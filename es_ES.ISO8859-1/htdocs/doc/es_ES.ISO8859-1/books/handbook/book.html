<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Manual de FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="¡Bienvenido a FreeBSD! Este manual cubre la instalación y uso diario de FreeBSD 10.1-RELEASE y FreeBSD 9.3-RELEASE. Este manual está en constante evolución y es el resultado del trabajo de muchas personas. Algunas secciones no están completas y otras necesitan ser actualizadas. Si está interesado en colaborar en este proyecto envíe un mensaje de correo electrónico a lista de correo del proyecto de documentación de FreeBSD. La última versión de este documento está siempre disponible en el sitio web de FreeBSD. También puede encontrarla en diferentes formatos y opciones de compresión en el servidor FTP de FreeBSD o en las numerosas réplicas. Si prefiere una copia en papel de este manual puede comprarla en FreeBSD Mall. También es posible hacer búsquedas en este manual." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="es" class="book" lang="es"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp61184336"></a>Manual de FreeBSD</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="author"><h3 class="author"><span class="orgname">Proyecto de Documentación de FreeBSD</span></h3></div></div><div>Revisión: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 1995-2010 The FreeBSD Documentation Project</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="legalnotice"></a><p>La redistribución y uso en fuente (SGML DocBook) y formatos
    "compilados" (SGML, HTML, PDF, PostScript, RTF y cualquier otro) con o
    sin modificación, esta permitida siempre y cuando se cumplan las
    siguientes condiciones:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>La redistribución del código fuente (SGML DocBook)
        debe contener esta información de copyright, esta lista de
        condiciones y el siguiente texto como las primeras líneas
        del fichero sin modificar.</p></li><li class="listitem"><p>La redistribución en formatos compilados (transformado
        a otros DTDs, convertidos a PDF, PostScript, RTF y otros formatos)
        debe reproducir el siguiente texto de copyright, esta lista de
        condiciones y el siguiente texto en la documentación y/u
        otros materiales entregados con la distribución.</p></li></ol></div><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION
      PROJECT "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,
      BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
      FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
      THE FREEBSD DOCUMENTATION PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT,
      INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
      OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
      ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
      TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
      USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
      DAMAGE.</p></div></div></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD is a registered trademark of
  the FreeBSD Foundation.</p><p>3Com and HomeConnect are registered
  trademarks of 3Com Corporation.</p><p>3ware is a registered
  trademarks of 3ware Inc.</p><p>ARM is a registered trademark of ARM
  Limited.</p><p>Adaptec is a registered trademark of
  Adaptec, Inc.</p><p>Adobe, Acrobat, Acrobat Reader, and
  PostScript are either registered trademarks or trademarks of Adobe
  Systems Incorporated in the United States and/or other
  countries.</p><p>Apple, AirPort, FireWire, Mac, Macintosh, Mac OS,
  Quicktime, and TrueType are trademarks of Apple Computer, Inc.,
  registered in the United States and other countries.</p><p>Corel and WordPerfect are trademarks
  or registered trademarks of Corel Corporation and/or its
  subsidiaries in Canada, the United States and/or other
  countries.</p><p>Sound Blaster is a trademark of
  Creative Technology Ltd. in the United States and/or other
  countries.</p><p>CVSup is a registered trademark of
  John D. Polstra.</p><p>Heidelberg, Helvetica,
  Palatino, and Times Roman are either registered trademarks or
  trademarks of Heidelberger Druckmaschinen AG in the U.S. and other
  countries.</p><p>IBM, AIX, OS/2,
  PowerPC, PS/2, S/390, and ThinkPad are
  trademarks of International Business Machines Corporation in the
  United States, other countries, or both.</p><p>IEEE, POSIX, and 802 are registered
  trademarks of Institute of Electrical and Electronics Engineers,
  Inc. in the United States.</p><p>Intel, Celeron, EtherExpress, i386,
  i486, Itanium, Pentium, and Xeon are trademarks or registered
  trademarks of Intel Corporation or its subsidiaries in the United
  States and other countries.</p><p>Intuit and Quicken are registered
  trademarks and/or registered service marks of Intuit Inc., or one of
  its subsidiaries, in the United States and other countries.</p><p>Linux is a registered trademark of
  Linus Torvalds.</p><p>LSI Logic, AcceleRAID, eXtremeRAID,
  MegaRAID and Mylex are trademarks or registered trademarks of LSI
  Logic Corp.</p><p>M-Systems and DiskOnChip are
  trademarks or registered trademarks of M-Systems Flash Disk
  Pioneers, Ltd.</p><p>Macromedia, Flash, and Shockwave are
  trademarks or registered trademarks of Macromedia, Inc. in the
  United States and/or other countries.</p><p>Microsoft, IntelliMouse, MS-DOS,
  Outlook, Windows, Windows Media and Windows NT are either
  registered trademarks or trademarks of Microsoft Corporation in the
  United States and/or other countries.</p><p>Netscape and the Netscape Navigator
  are registered trademarks of Netscape Communications Corporation in
  the U.S. and other countries.</p><p>GateD and NextHop are registered and
  unregistered trademarks of NextHop in the U.S. and other
  countries.</p><p>Motif, OSF/1, and UNIX are
  registered trademarks and IT DialTone and The Open Group are
  trademarks of The Open Group in the United States and other
  countries.</p><p>Oracle is a registered trademark
  of Oracle Corporation.</p><p>PowerQuest and PartitionMagic are
  registered trademarks of PowerQuest Corporation in the United States
  and/or other countries.</p><p>RealNetworks, RealPlayer, and
  RealAudio are the registered trademarks of RealNetworks,
  Inc.</p><p>Red Hat, RPM, are trademarks or
  registered trademarks of Red Hat, Inc. in the United States and
  other countries.</p><p>SAP, R/3, and mySAP are trademarks or
  registered trademarks of SAP AG in Germany and in several other
  countries all over the world.</p><p>Sun, Sun Microsystems, Java, Java
  Virtual Machine, JDK, JRE, JSP, JVM, Netra,
  Solaris, StarOffice and
  SunOS are trademarks or registered trademarks of Sun Microsystems,
  Inc. in the United States and other countries.</p><p>Symantec and Ghost are registered
  trademarks of Symantec Corporation in the United States and other
  countries.</p><p>MATLAB is a registered trademark
  of The MathWorks, Inc.</p><p>SpeedTouch is a trademark of
  Thomson.</p><p>U.S. Robotics and Sportster are
  registered trademarks of U.S. Robotics Corporation.</p><p>VMware is a trademark of VMware,
  Inc.</p><p>Waterloo Maple and Maple are
  trademarks or registered trademarks of Waterloo Maple Inc.</p><p>Mathematica is a registered
  trademark of Wolfram Research, Inc.</p><p>XFree86 is a trademark of The
  XFree86 Project, Inc.</p><p>Ogg Vorbis and Xiph.Org are trademarks
  of Xiph.Org.</p><p>Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <span class="quote">&#8220;<span class="quote">&#8482;</span>&#8221;</span> or the
  <span class="quote">&#8220;<span class="quote">®</span>&#8221;</span> symbol.</p></div></div><div>  Febrero 1999 por .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Resumen</div><p>¡Bienvenido a FreeBSD!  Este manual cubre la
	instalación y uso diario de <span class="emphasis"><em>FreeBSD
	10.1-RELEASE</em></span> y <span class="emphasis"><em>FreeBSD
	9.3-RELEASE</em></span>.  Este manual está en
	<span class="emphasis"><em>constante evolución</em></span> y es el resultado del
	trabajo de muchas personas.  Algunas secciones no están
	completas y otras necesitan ser actualizadas.  Si está
	interesado en colaborar en este proyecto envíe un mensaje de
	correo electrónico a <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">lista de correo del proyecto de documentación de FreeBSD</a>.  La última versión
	de este documento está siempre disponible en el <a class="link" href="http://www.FreeBSD.org" target="_top"> sitio web de
	FreeBSD</a>.  También puede encontrarla en diferentes
	formatos y opciones de compresión en el <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/" target="_top">servidor FTP de
	FreeBSD</a> o en las numerosas <a class="link" href="#mirrors-ftp" title="30.1. Servidores FTP">réplicas</a>.  Si prefiere una
        copia en papel de este manual puede comprarla en <a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD Mall</a>. También
        es posible <a class="link" href="../../../../search/index.html" target="_top">hacer búsquedas</a>
        en este manual.</p></div></div></div><div class="docformatnavi">
      [
      <a href="index.html">Split HTML</a>
      /
      
	  Single HTML
	
      ]
    </div><hr /></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="preface"><a href="#book-preface">Prefacio</a></span></dt><dt><span class="part"><a href="#getting-started">I. Primeros pasos</a></span></dt><dd><dl><dt><span class="chapter"><a href="#introduction">1. Introducción</a></span></dt><dd><dl><dt><span class="sect1"><a href="#introcution-synopsis">1.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. Bienvenido a FreeBSD</a></span></dt><dt><span class="sect1"><a href="#history">1.3. Acerca del Proyecto FreeBSD </a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">2. Instalación de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install-synopsis">2.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#install-hardware">2.2. Requisitos de hardware</a></span></dt><dt><span class="sect1"><a href="#install-pre">2.3. Tareas anteriores a la instalación</a></span></dt><dt><span class="sect1"><a href="#install-start">2.4. Inicio de la instalación</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">2.5. ?Qué es sysinstall?</a></span></dt><dt><span class="sect1"><a href="#install-steps">2.6. Asignación de espacio en disco</a></span></dt><dt><span class="sect1"><a href="#install-choosing">2.7. Elección de qué instalar</a></span></dt><dt><span class="sect1"><a href="#install-media">2.8. Elección del medio de instalación</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">2.9. El punto sin retorno</a></span></dt><dt><span class="sect1"><a href="#install-post">2.10. Después de la instalación</a></span></dt><dt><span class="sect1"><a href="#install-trouble">2.11. Solución de problemas</a></span></dt><dt><span class="sect1"><a href="#install-advanced">2.12. Guía avanzada de instalación</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">2.13. Cómo preparar su propio medio de instalación</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basics">3. Conceptos básicos de Unix</a></span></dt><dd><dl><dt><span class="sect1"><a href="#basics-synopsis">3.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#consoles">3.2. Consolas virtuales y terminales</a></span></dt><dt><span class="sect1"><a href="#permissions">3.3. Permisos</a></span></dt><dt><span class="sect1"><a href="#dirstructure">3.4. Estructura de directorios</a></span></dt><dt><span class="sect1"><a href="#disk-organization">3.5. Organización de disco</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">3.6. Montaje y desmontaje de sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#basics-processes">3.7. Procesos</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">3.8. Dæmons, señales y cómo matar procesos</a></span></dt><dt><span class="sect1"><a href="#shells">3.9. Shells</a></span></dt><dt><span class="sect1"><a href="#editors">3.10. Editores de texto</a></span></dt><dt><span class="sect1"><a href="#basics-devices">3.11. Dispositivos y nodos de dispositivos</a></span></dt><dt><span class="sect1"><a href="#binary-formats">3.12. Formatos binarios</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">3.13. Más información</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ports">4. Instalación de aplicaciones: «packages» y ports</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ports-synopsis">4.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#ports-overview">4.2. Aproximación a la instalación de software</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">4.3. Cómo encontrar aplicaciones</a></span></dt><dt><span class="sect1"><a href="#packages-using">4.4. Uso del sistema de packages</a></span></dt><dt><span class="sect1"><a href="#ports-using">4.5. Uso de la colección de ports</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">4.6. Después de instalar un port</a></span></dt><dt><span class="sect1"><a href="#ports-broken">4.7. Ports que no funcionan</a></span></dt></dl></dd><dt><span class="chapter"><a href="#x11">5. El sistema X Window</a></span></dt><dd><dl><dt><span class="sect1"><a href="#x11-synopsis">5.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#x-understanding">5.2. Entender X</a></span></dt><dt><span class="sect1"><a href="#x-install">5.3. Instalar X11</a></span></dt><dt><span class="sect1"><a href="#x-config">5.4. Configuración de X11</a></span></dt><dt><span class="sect1"><a href="#x-fonts">5.5. Uso de tipos en X11</a></span></dt><dt><span class="sect1"><a href="#x-xdm">5.6. El gestor de pantalla X</a></span></dt><dt><span class="sect1"><a href="#x11-wm">5.7. Entornos de escritorio</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#common-tasks">II. Tareas comunes</a></span></dt><dd><dl><dt><span class="chapter"><a href="#desktop">6. Aplicaciones de escritorio</a></span></dt><dd><dl><dt><span class="sect1"><a href="#desktop-synopsis">6.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">6.2. Navegadores</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">6.3. Productividad</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">6.4. Visores de documentos</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">6.5. Finanzas</a></span></dt><dt><span class="sect1"><a href="#desktop-summary">6.6. Resumen</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multimedia">7. Multimedia</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp69521744">7.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#sound-setup">7.2. Configuración de la tarjeta de sonido</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">7.3. Sonido MP3</a></span></dt><dt><span class="sect1"><a href="#video-playback">7.4. Reproducción de vídeo</a></span></dt><dt><span class="sect1"><a href="#tvcard">7.5. Configuración de tarjetas de TV</a></span></dt><dt><span class="sect1"><a href="#scanners">7.6. Escáneres de imágenes</a></span></dt></dl></dd><dt><span class="chapter"><a href="#kernelconfig">8. Configuración del kernel de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp70106704">8.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#idp70113744">8.2. ?Qué razones hay para compilar un kernel personalizado?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-devices">8.3. Inventario de hardware del sistema</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-modules">8.4. Controladores del kernel, subsistemas y módulos</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">8.5. Compilación e instalación de un kernel personalizado</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">8.6. El fichero de configuración</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">8.7. Qué hacer si algo va mal</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printing">9. Imprimir</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp70709072">9.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">9.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">9.3. Configuración básica</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">9.4. Configuración avanzada de impresoras</a></span></dt><dt><span class="sect1"><a href="#printing-using">9.5. Cómo utilizar impresoras</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">9.6. Alternativas a LPD</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">9.7. Solución de problemas</a></span></dt></dl></dd><dt><span class="chapter"><a href="#linuxemu">10. Compatibilidad binaria con Linux</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linuxemu-synopsis">10.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">10.2. Instalación</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematica">10.3. Instalación de <span class="trademark">Mathematica</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-maple">10.4. Instalación de <span class="trademark">Maple</span>&#8482;</a></span></dt><dt><span class="sect1"><a href="#linuxemu-matlab">10.5. Instalación de <span class="trademark">MATLAB</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">10.6. Instalación de <span class="trademark">Oracle</span>®</a></span></dt><dt><span class="sect1"><a href="#sapr3">10.7. Instalación de <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-advanced">10.8. Temas avanzados</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#system-administration">III. Administración del sistema.</a></span></dt><dd><dl><dt><span class="chapter"><a href="#config-tuning">11. Configuración y Adaptación del Sistema</a></span></dt><dd><dl><dt><span class="sect1"><a href="#config-network-setup">11.1. Configuración de Tarjetas de Red</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">11.2. <span class="quote">&#8220;<span class="quote">Arrancar servicios</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#soft-updates">11.3. <span class="quote">&#8220;<span class="quote">Soft Updates</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#adding-swap-space">11.4. Añadir espacio swap</a></span></dt></dl></dd><dt><span class="chapter"><a href="#boot">12. El proceso de arranque en FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#boot-synopsis">12.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">12.2. El problema que representa arrancar el sistema</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">12.3. El RMA y las etapas de arranque uno, dos y tres</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">12.4. Interacción con el kernel durante el arranque</a></span></dt><dt><span class="sect1"><a href="#device-hints">12.5. Device Hints</a></span></dt><dt><span class="sect1"><a href="#boot-init">12.6. Init: inicialización del proceso de control</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">12.7. Secuencia de apagado</a></span></dt></dl></dd><dt><span class="chapter"><a href="#users">13. Usuarios y administración básica de cuentas</a></span></dt><dd><dl><dt><span class="sect1"><a href="#users-synopsis">13.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#users-introduction">13.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#users-superuser">13.3. La cuenta superusuario</a></span></dt><dt><span class="sect1"><a href="#users-system">13.4. Cuentas de sistema</a></span></dt><dt><span class="sect1"><a href="#users-user">13.5. Cuentas de usuario</a></span></dt><dt><span class="sect1"><a href="#users-modifying">13.6. Modificación de cuentas</a></span></dt><dt><span class="sect1"><a href="#users-limiting">13.7. Limitar a los usuarios</a></span></dt><dt><span class="sect1"><a href="#users-personalizing">13.8. Personalizar a los usuarios</a></span></dt><dt><span class="sect1"><a href="#users-groups">13.9. Grupos</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">14. Seguridad</a></span></dt><dd><dl><dt><span class="sect1"><a href="#security-synopsis">14.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#security-intro">14.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">14.3. Asegurar FreeBSD</a></span></dt><dt><span class="sect1"><a href="#crypt">14.4. DES, MD5 y Crypt</a></span></dt><dt><span class="sect1"><a href="#one-time-passwords">14.5. Contraseñas de un solo uso</a></span></dt><dt><span class="sect1"><a href="#tcpwrappers">14.6. TCP Wrappers</a></span></dt><dt><span class="sect1"><a href="#kerberosIV">14.7. <span class="application">KerberosIV</span></a></span></dt><dt><span class="sect1"><a href="#kerberos5">14.8. <span class="application">Kerberos5</span></a></span></dt><dt><span class="sect1"><a href="#openssl">14.9. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">14.10. VPN sobre IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">14.11. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">14.12. Listas de control de acceso a sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#security-portaudit">14.13. Monitorización de fallos de seguridad de aplicaciones</a></span></dt><dt><span class="sect1"><a href="#security-advisories">14.14. FreeBSD Security Advisories</a></span></dt><dt><span class="sect1"><a href="#security-accounting">14.15. Contabilidad de procesos</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jails">15. Jaulas</a></span></dt><dd><dl><dt><span class="sect1"><a href="#jails-synopsis">15.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#jails-terms">15.2. Términos relacionados con las jaulas</a></span></dt><dt><span class="sect1"><a href="#jails-intro">15.3. Introducción</a></span></dt><dt><span class="sect1"><a href="#jails-build">15.4. Creación y gestión de jaulas</a></span></dt><dt><span class="sect1"><a href="#jails-tuning">15.5. Administración y personalización a fondo</a></span></dt><dt><span class="sect1"><a href="#jails-application">15.6. Uso de las jaulas</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mac">16. Mandatory Access Control</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mac-synopsis">16.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#mac-inline-glossary">16.2. Términos clave en este capítulo</a></span></dt><dt><span class="sect1"><a href="#mac-initial">16.3. Explicación de MAC</a></span></dt><dt><span class="sect1"><a href="#mac-understandlabel">16.4. Las etiquetas MAC</a></span></dt><dt><span class="sect1"><a href="#mac-modules">16.5. Configuración de módulos</a></span></dt><dt><span class="sect1"><a href="#mac-ifoff">16.6. El módulo MAC ifoff</a></span></dt><dt><span class="sect1"><a href="#mac-portacl">16.7. El módulo MAC portacl</a></span></dt><dt><span class="sect1"><a href="#mac-labelingpolicies">16.8. Políticas de etiquetas MAC</a></span></dt><dt><span class="sect1"><a href="#mac-partition">16.9. El módulo MAC partition</a></span></dt><dt><span class="sect1"><a href="#mac-mls">16.10. El módulo de seguridad multinivel MAC</a></span></dt><dt><span class="sect1"><a href="#mac-biba">16.11. El módulo MAC Biba</a></span></dt><dt><span class="sect1"><a href="#mac-lomac">16.12. El módulo MAC LOMAC</a></span></dt><dt><span class="sect1"><a href="#mac-implementing">16.13. Implementación de un entorno seguro con MAC</a></span></dt><dt><span class="sect1"><a href="#MAC-examplehttpd">16.14. Otro ejemplo: Uso de MAC para restringir un servidor web</a></span></dt><dt><span class="sect1"><a href="#mac-troubleshoot">16.15. Depuración de errores en MAC</a></span></dt></dl></dd><dt><span class="chapter"><a href="#audit">17. Auditoría de eventos de seguridad</a></span></dt><dd><dl><dt><span class="sect1"><a href="#audit-synopsis">17.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#disks">18. Almacenamiento</a></span></dt><dd><dl><dt><span class="sect1"><a href="#disks-synopsis">18.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#disks-naming">18.2. Nombres de dispositivo</a></span></dt><dt><span class="sect1"><a href="#disks-adding">18.3. Añadir discos</a></span></dt><dt><span class="sect1"><a href="#raid">18.4. RAID</a></span></dt><dt><span class="sect1"><a href="#usb-disks">18.5. Dispositivos de almacenamiento USB</a></span></dt><dt><span class="sect1"><a href="#creating-cds">18.6. Creación y uso de medios ópticos (CD)</a></span></dt><dt><span class="sect1"><a href="#creating-dvds">18.7. Crear y utilizar medios ópticos (DVDs)</a></span></dt><dt><span class="sect1"><a href="#floppies">18.8. Creación y uso de disquetes (floppies)</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">18.9. Creación y uso de cintas de datos</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">18.10. Respaldos en disquetes</a></span></dt><dt><span class="sect1"><a href="#backup-basics">18.11. Bases para respaldos</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</a></span></dt><dt><span class="sect1"><a href="#snapshots">18.13. Instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>) de sistemas
      de ficheros</a></span></dt><dt><span class="sect1"><a href="#quotas">18.14. Cuotas en sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">18.15. Cifrado de particiones de disco</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GEOM">19. GEOM: Marco de trabajo modular de transformación de discos</a></span></dt><dd><dl><dt><span class="sect1"><a href="#GEOM-synopsis">19.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#GEOM-intro">19.2. Introducción a GEOM</a></span></dt><dt><span class="sect1"><a href="#GEOM-striping">19.3. RAID0 - Distribución por bandas</a></span></dt><dt><span class="sect1"><a href="#GEOM-mirror">19.4. RAID1 - Replicación</a></span></dt></dl></dd><dt><span class="chapter"><a href="#vinum-vinum">20. El Gestor de Volúmenes Vinum</a></span></dt><dd><dl><dt><span class="sect1"><a href="#vinum-synopsis">20.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#vinum-intro">20.2. Los Discos son Demasiado Pequeños</a></span></dt><dt><span class="sect1"><a href="#vinum-access-bottlenecks">20.3. Cuellos de Botella en el Acceso</a></span></dt><dt><span class="sect1"><a href="#vinum-data-integrity">20.4. Integridad de Datos</a></span></dt><dt><span class="sect1"><a href="#vinum-objects">20.5. Objetos Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-examples">20.6. Ejemplos</a></span></dt><dt><span class="sect1"><a href="#vinum-object-naming">20.7. Esquema de Nombres de los Objetos</a></span></dt><dt><span class="sect1"><a href="#vinum-config">20.8. Configuración de Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-root">20.9. Uso de Vinum en el Sistema de Ficheros Raíz</a></span></dt></dl></dd><dt><span class="chapter"><a href="#virtualization">21. Virtualización</a></span></dt><dd><dl><dt><span class="sect1"><a href="#virtualization-synopsis">21.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#l10n">22. Localización - Uso y configuración de
    I18N/L10N</a></span></dt><dd><dl><dt><span class="sect1"><a href="#l10n-synopsis">22.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">22.2. Lo básico</a></span></dt><dt><span class="sect1"><a href="#using-localization">22.3. Uso de la localización</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">22.4. Compilación de programas con soporte para I18N</a></span></dt><dt><span class="sect1"><a href="#lang-setup">22.5. Localización de FreeBSD a idiomas específicos</a></span></dt></dl></dd><dt><span class="chapter"><a href="#cutting-edge">23. Lo último de lo último</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp77147472">23.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#current-stable">23.2. FreeBSD-CURRENT vs. FreeBSD-STABLE</a></span></dt><dt><span class="sect1"><a href="#synching">23.3. Sincronización de su código fuente</a></span></dt><dt><span class="sect1"><a href="#makeworld">23.4. Uso de <code class="command">make world</code></a></span></dt><dt><span class="sect1"><a href="#small-lans">23.5. Redes pequeñas</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#network-communication">IV. Comunicaciones en red</a></span></dt><dd><dl><dt><span class="chapter"><a href="#serialcomms">24. Comunicaciones serie</a></span></dt><dd><dl><dt><span class="sect1"><a href="#serial-synopsis">24.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#serial">24.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#term">24.3. Terminales</a></span></dt><dt><span class="sect1"><a href="#dialup">24.4. Servicio dial-in</a></span></dt><dt><span class="sect1"><a href="#dialout">24.5. Servicio dial-out</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">24.6. Configurando la consola serie</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ppp-and-slip">25. PPP y SLIP</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp78103248">25.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#userppp">25.2. Uso de User PPP</a></span></dt><dt><span class="sect1"><a href="#ppp">25.3. Uso de Kernel PPP</a></span></dt><dt><span class="sect1"><a href="#pppoe">25.4. Uso de <span class="application">PPP</span> sobre Ethernet (PPPoE)</a></span></dt><dt><span class="sect1"><a href="#pppoa">25.5. Uso de <span class="application">PPP</span> sobre ATM (PPPoA)</a></span></dt><dt><span class="sect1"><a href="#slip">25.6. Uso de SLIP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#firewalls">26. Cortafuegos</a></span></dt><dd><dl><dt><span class="sect1"><a href="#firewalls-intro">26.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">27. Correo Electrónico</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mail-synopsis">27.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#mail-using">27.2. Utilización del correo electrónico</a></span></dt><dt><span class="sect1"><a href="#sendmail">27.3. Configuración de <span class="application">sendmail</span></a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">27.4. Sustitución del Agente de Transferencia de Correo</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">27.5. Depuración de Problemas</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">27.6. Conceptos Avanzados</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">27.7. SMTP con UUCP</a></span></dt><dt><span class="sect1"><a href="#outgoing-only">27.8. Configuración para sólamente enviar correo</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">27.9. Utilización del correo con una conexión mediante módem analógico (dial-up)</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">27.10. Autentificación utilizando SMTP</a></span></dt><dt><span class="sect1"><a href="#mail-agents">27.11. Agente de Correo de Usuario</a></span></dt><dt><span class="sect1"><a href="#mail-fetchmail">27.12. Manejo de fetchmail</a></span></dt><dt><span class="sect1"><a href="#mail-procmail">27.13. Uso de procmail</a></span></dt></dl></dd><dt><span class="chapter"><a href="#network-servers">28. Servidores de red</a></span></dt><dd><dl><dt><span class="sect1"><a href="#network-servers-synopsis">28.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#advanced-networking">29. Networking avanzado</a></span></dt><dd><dl><dt><span class="sect1"><a href="#advanced-networking-synopsis">29.1. Resumen</a></span></dt><dt><span class="sect1"><a href="#network-routing">29.2. Pasarelas y <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#network-wireless">29.3. Redes sin cables (<span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>)</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">29.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">29.5. Puenteado</a></span></dt><dt><span class="sect1"><a href="#network-nfs">29.6. NFS</a></span></dt><dt><span class="sect1"><a href="#network-diskless">29.7. Ejecución sin disco duro</a></span></dt><dt><span class="sect1"><a href="#network-isdn">29.8. RDSI</a></span></dt><dt><span class="sect1"><a href="#network-nis">29.9. NIS/YP</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">29.10. DHCP</a></span></dt><dt><span class="sect1"><a href="#network-dns">29.11. DNS</a></span></dt><dt><span class="sect1"><a href="#network-ntp">29.12. NTP</a></span></dt><dt><span class="sect1"><a href="#network-natd">29.13. Traducción de direcciones de red</a></span></dt><dt><span class="sect1"><a href="#network-inetd">29.14. El <span class="quote">&#8220;<span class="quote">Superservidor</span>&#8221;</span> <span class="application">
      inetd</span></a></span></dt><dt><span class="sect1"><a href="#network-plip">29.15. Línea IP paralela (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">29.16. IPv6</a></span></dt><dt><span class="sect1"><a href="#network-atm">29.17. ATM en FreeBSD 5.X</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#appendices">V. Apéndices</a></span></dt><dd><dl><dt><span class="chapter"><a href="#mirrors">30. Cómo obtener FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mirrors-ftp">30.1. Servidores FTP</a></span></dt><dt><span class="sect1"><a href="#cvsup">30.2. Uso de CVSup</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bibliography">31. Bibliografía</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp82705360">31.1. Libros y revistas específicas sobre FreeBSD</a></span></dt><dt><span class="sect1"><a href="#idp82723920">31.2. Guías de usuario</a></span></dt><dt><span class="sect1"><a href="#idp82741968">31.3. Guías de administrador</a></span></dt><dt><span class="sect1"><a href="#idp82757584">31.4. Guías de programadores</a></span></dt><dt><span class="sect1"><a href="#idp82774608">31.5. El sistema operativo por dentro</a></span></dt><dt><span class="sect1"><a href="#idp82791504">31.6. Referencia de seguridad</a></span></dt><dt><span class="sect1"><a href="#idp82796240">31.7. Referencia de hardware</a></span></dt><dt><span class="sect1"><a href="#idp82805712">31.8. Historia de UNIX</a></span></dt><dt><span class="sect1"><a href="#idp82831952">31.9. Diarios y revistas</a></span></dt></dl></dd><dt><span class="appendix"><a href="#eresources">A. Recursos en Internet</a></span></dt><dd><dl><dt><span class="sect1"><a href="#eresources-mail">A.1. Listas de correo</a></span></dt><dt><span class="sect1"><a href="#eresources-news">A.2. Grupos de noticias de Usenet</a></span></dt><dt><span class="sect1"><a href="#eresources-web">A.3. Servidores WWW</a></span></dt><dt><span class="sect1"><a href="#eresources-email">A.4. Direcciones de correo electrónico</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">A.5. Cuentas shell</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pgpkeys">32. PGP keys</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp83281744">32.1. Responsables</a></span></dt><dt><span class="sect1"><a href="#idp83285200">32.2. Miembros del Core Team</a></span></dt></dl></dd><dt><span class="index"><a href="#idp83322320">Índice</a></span></dt></dl></dd></dl></div><div class="list-of-figures"><div class="toc-title">Lista de figuras</div><dl><dt>2.1. <a href="#install-dev-probe">Ejemplo de resultado de prueba de dispositivos</a></dt><dt>2.2. <a href="#config-country">Menú de selección de país</a></dt><dt>2.3. <a href="#sysinstall-exit">Salir de Sysinstall</a></dt><dt>2.4. <a href="#sysinstall-main3">Selección de «Usage» en el menú principal de sysinstall</a></dt><dt>2.5. <a href="#main-doc">Selección del menú de documentación</a></dt><dt>2.6. <a href="#docmenu1">El menú de documentación de sysinstall</a></dt><dt>2.7. <a href="#sysinstall-keymap">Menú principal de sysinstall</a></dt><dt>2.8. <a href="#sysinstall-keymap-menu">Menú de esquemas de teclado de sysinstall</a></dt><dt>2.9. <a href="#sysinstall-options">Menú principal de sysinstall</a></dt><dt>2.10. <a href="#options">Opciones de sysinstall</a></dt><dt>2.11. <a href="#sysinstall-standard">Comenzar una instalación estándar</a></dt><dt>2.12. <a href="#sysinstall-fdisk-drive1">Elija en qué unidad usar FDisk</a></dt><dt>2.13. <a href="#sysinstall-fdisk1">Un ejemplo de particionamiento típico con FDisk</a></dt><dt>2.14. <a href="#sysinstall-fdisk2">Partición con FDisk usando el disco completo</a></dt><dt>2.15. <a href="#sysinstall-bootmgr">Menú de gestores de arranque de sysinstall</a></dt><dt>2.16. <a href="#sysinstall-fdisk-drive2">Salir de la selección de unidad</a></dt><dt>2.17. <a href="#sysinstall-label">El editor Disklabel</a></dt><dt>2.18. <a href="#sysinstall-label2">Editor Disklabel con valores por omisión</a></dt><dt>2.19. <a href="#sysinstall-label-add">Liberar espacio para la partición raíz</a></dt><dt>2.20. <a href="#sysinstall-label-add2">Edición del tamaño de la partición raíz</a></dt><dt>2.21. <a href="#sysinstall-label-type">Elegir el tipo de partición raíz</a></dt><dt>2.22. <a href="#sysinstall-label-mount">Elegir el punto de montaje del sistema de ficheros raíz</a></dt><dt>2.23. <a href="#sysinstall-label4">Editor Disklabel</a></dt><dt>2.24. <a href="#distribution-set1">Elección de distribuciones</a></dt><dt>2.25. <a href="#distribution-set2">Confirmar la elección de distribuciones</a></dt><dt>2.26. <a href="#choose-media">Choose Installation Media</a></dt><dt>2.27. <a href="#ed-config1">Selección de un dispositivo Ethernet</a></dt><dt>2.28. <a href="#ed-config2">Configuración de ed0</a></dt><dt>2.29. <a href="#inetd-edit">Edición de <code class="filename">inetd.conf</code></a></dt><dt>2.30. <a href="#anon-ftp4">Edición del mensaje de bienvenida de FTP</a></dt><dt>2.31. <a href="#nfs-server-edit">Edición de <code class="filename">exports</code></a></dt><dt>2.32. <a href="#saver-options">Opciones de configuración de la consola del sistema</a></dt><dt>2.33. <a href="#saver-select">Opciones del salvapantallas</a></dt><dt>2.34. <a href="#saver-timeout">Retardo del salvapantallas</a></dt><dt>2.35. <a href="#saver-exit">Salida del menú de configuración de la consola del sistema</a></dt><dt>2.36. <a href="#set-timezone-region">Elección de región</a></dt><dt>2.37. <a href="#set-timezone-country">Elección de país</a></dt><dt>2.38. <a href="#set-timezone-locality">Elección de zona horaria</a></dt><dt>2.39. <a href="#mouse-protocol">Elija el protocolo que usa el ratón</a></dt><dt>2.40. <a href="#set-mouse-protocol">Ajuste del protocolo del ratón</a></dt><dt>2.41. <a href="#config-mouse-port">Configuración del puerto del ratón</a></dt><dt>2.42. <a href="#set-mouse-port">Configuración del puerto del ratón</a></dt><dt>2.43. <a href="#test-daemon">Arranque del dæmon del ratón</a></dt><dt>2.44. <a href="#test-mouse-daemon">Prueba del dæmon del ratón</a></dt><dt>2.45. <a href="#package-category">Categorías de «packages»</a></dt><dt>2.46. <a href="#package-select">Selección de «packages»</a></dt><dt>2.47. <a href="#package-install">Instalación de «packages»</a></dt><dt>2.48. <a href="#package-install-confirm">Confirmación previa a la instalación de «packages»</a></dt><dt>2.49. <a href="#add-user2">Selección de «Añadir un usuario»</a></dt><dt>2.50. <a href="#add-user3">Añadir la información del usuario</a></dt><dt>2.51. <a href="#add-user4">Salir de la gestión de usuarios y grupos</a></dt><dt>2.52. <a href="#final-main">Salir de la instalación</a></dt><dt>2.53. <a href="#network-configuration">Primer nivel de servicios de red</a></dt><dt>2.54. <a href="#mta-selection">Elegir el MTA del sistema</a></dt><dt>2.55. <a href="#Ntpdate-config">Configuración de Ntpdate</a></dt><dt>2.56. <a href="#Network-configuration-cont">Segundo nivel de configuración de red</a></dt><dt>20.1. <a href="#vinum-concat">Organización Concatenada</a></dt><dt>20.2. <a href="#vinum-striped">Organización con <span class="quote">&#8220;<span class="quote">Striping</span>&#8221;</span></a></dt><dt>20.3. <a href="#vinum-raid5-org">Organización en RAID-5</a></dt><dt>20.4. <a href="#vinum-simple-vol">Un Volumen Vinum Sencillo</a></dt><dt>20.5. <a href="#vinum-mirrored-vol">Un Volumen Vinum Replicado</a></dt><dt>20.6. <a href="#vinum-striped-vol">Un Volumen Vinum en <span class="quote">&#8220;<span class="quote">Striping</span>&#8221;</span></a></dt><dt>20.7. <a href="#vinum-raid10-vol">Un Volumen Vinum Replicado y en
            <span class="quote">&#8220;<span class="quote">Striping</span>&#8221;</span></a></dt></dl></div><div class="list-of-tables"><div class="toc-title">Lista de tablas</div><dl><dt>2.1. <a href="#idp65424208">Ejemplo de inventario de dispositivos</a></dt><dt>2.2. <a href="#idp66054352">Estructura de particiones del primer disco</a></dt><dt>2.3. <a href="#idp66088400">Esquema de particiones para varios discos</a></dt><dt>2.4. <a href="#idp66849232">Nombres y funciones de las imágenes de FreeBSD 6.<em class="replaceable"><code>X</code></em> and 7.<em class="replaceable"><code>X</code></em></a></dt><dt>3.1. <a href="#basics-dev-codes">Códigos de dispositivos de disco</a></dt><dt>18.1. <a href="#disk-naming-physical-table">Convenciones para nombrar discos físicos</a></dt><dt>29.1. <a href="#idp82421456">Cableado de una conexión de cable paralelo para redes</a></dt><dt>29.2. <a href="#idp82515536">Direcciones IPv6 reservadas</a></dt></dl></div><div class="list-of-examples"><div class="toc-title">Lista de ejemplos</div><dl><dt>2.1. <a href="#idp65482192">Uso de una partición sin cambiar nada</a></dt><dt>2.2. <a href="#idp65486672">Reducir una partición existente</a></dt><dt>3.1. <a href="#basics-disk-slice-part">Ejemplo de nombres de disco, «slice» y partición</a></dt><dt>3.2. <a href="#basics-concept-disk-model">Modelo conceptual de un disco</a></dt><dt>4.1. <a href="#idp68087376">Descarga de un paquete manualmente e instalación en
	  nuestro sistema</a></dt><dt>12.1. <a href="#boot-boot0-example">Pantalla <code class="filename">boot0</code></a></dt><dt>12.2. <a href="#boot-boot2-example">Pantalla de <code class="filename">boot2</code></a></dt><dt>12.3. <a href="#boot-insecure-console">Una consola insegura en /etc/ttys</a></dt><dt>13.1. <a href="#idp72691024">Configuración de adduser</a></dt><dt>13.2. <a href="#idp72726608">Eliminación interactiva de cuenta con rmuser</a></dt><dt>13.3. <a href="#idp72733392">chpass interactivo ejecutado por el superusuario</a></dt><dt>13.4. <a href="#idp72734928">chpass interactivo ejecutado por un usuario normal</a></dt><dt>13.5. <a href="#idp72748112">Cambio de tu contraseña</a></dt><dt>13.6. <a href="#idp72750032">Cambio de la contraseña de otro usuario como superusuario</a></dt><dt>13.7. <a href="#idp72901072">Añadir un grupo usando pw(8)</a></dt><dt>13.8. <a href="#idp72907216">Añadir a alguien a un grupo usando pw(8)</a></dt><dt>13.9. <a href="#idp72918992">Determinar pertenencia a grupos con id(1)</a></dt><dt>14.1. <a href="#idp74466256">Uso de SSH para crear un túnel seguro para SMTP</a></dt><dt>18.1. <a href="#idp75966672">Utilizando <code class="command">dump</code> a través de
          <span class="application">ssh</span></a></dt><dt>18.2. <a href="#idp75970256">Uso de <code class="command">dump</code> a través de
           <span class="application">ssh</span> con <code class="envar">RSH</code>
           configurada</a></dt><dt>18.3. <a href="#idp76099920">Un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> para la creación de discos
            flexibles de arranque</a></dt><dt>18.4. <a href="#idp76145872">Uso de vnconfig para montar una imagen de un sistema de
          ficheros bajo FreeBSD 4.X</a></dt><dt>18.5. <a href="#idp76149584">Creación de una imagen nueva de un sistema de ficheros
          respaldado en un archivo con <code class="command">vnconfig</code></a></dt><dt>18.6. <a href="#idp76180176">Uso de <code class="command">mdconfig</code> para montar una imagen
          de un sistema de ficheros en FreeBSD 5.X</a></dt><dt>18.7. <a href="#idp76188368">Creación de un disco respaldado en fichero
          con <code class="command">mdconfig</code></a></dt><dt>18.8. <a href="#idp76211408">Configurar y montar un disco basado en un fichero con
          <code class="command">mdmfs</code></a></dt><dt>18.9. <a href="#idp76231632">Disco de memoria md en FreeBSD 4.X</a></dt><dt>18.10. <a href="#idp76245456">Creación de un nuevo disco basado en memoria con
	  <code class="command">mdconfig</code></a></dt><dt>18.11. <a href="#idp76249808">Creación de un nuevo disco basado en memoria con
	  <code class="command">mdmfs</code></a></dt><dt>24.1. <a href="#ex-etc-ttys">Agregando entradas de terminal a
	    <code class="filename">/etc/ttys</code></a></dt><dt>27.1. <a href="#idp79180240">Configuración de la base de datos de acceso de <span class="application">sendmail</span>
        </a></dt><dt>27.2. <a href="#idp79187792">Mail Aliases</a></dt><dt>27.3. <a href="#idp79217488">Ejemplo de asociación de correo de dominio virtual</a></dt><dt>29.1. <a href="#idp80673616">Anclaje de una exportación utilizando
          <span class="application">amd</span></a></dt><dt>29.2. <a href="#idp81038928">Sucursal o red doméstica</a></dt><dt>29.3. <a href="#idp81045456">Oficina central u otra LAN</a></dt><dt>29.4. <a href="#network-inetd-hangup">Envío de una señal HANGUP a
	  <span class="application">inetd</span></a></dt></dl></div><div class="preface"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="book-preface"></a>Prefacio</h1></div></div></div><h2 class="title"><a id="preface-audience"></a>A quién va
  dirigido este texto</h2><p>La primera sección de este libro está pensada
    para guiar a los recién llegados a FreeBSD durante el proceso
    de instalación y presentarles los conceptos y convenciones
    que dan entidad a <span class="trademark">UNIX</span>®.  Para sacar provecho de esta sección
    lo único que el lector necesitará son ganas de
    explorar y habilidad para ir interiorizando nuevos conceptos a
    medida que le van planteando.</p><p>La siguiente sección, la segunda, mucho más
    extensa, es una referencia completa de todo tipo de temas de
    interés para administradores de sistemas FreeBSD.  Es posible
    que alguno de esos capítulos requiera que previamente
    lea otros textos; si es el caso esto se anuncia en la sinopsis
    situada al principio de cada capítulo.</p><p>Hay una lista de fuentes de información adicionales en el <a class="xref" href="#bibliography" title="Capítulo 31. Bibliografía">Capítulo 31, <em>Bibliografía</em></a>.</p><h2 class="title"><a id="preface-changes-from2"></a>Cambios desde la
  segunda edición</h2><p>Esta tercera edición es la culminación de
      más de dos años de trabajo de los miembros
      del FreeBSD Documentation Project.  Estos son los cambios
      más importantes que encontrará en esta
      nueva edición:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#config-tuning" title="Capítulo 11. Configuración y Adaptación del Sistema">Capítulo 11, <em>Configuración y Adaptación del Sistema</em></a>, configuración
	  y adaptación del sistema, ha sido ampliado con
	  nuevos datos sobre el sistema de gestión de
	  energía y recursos ACPI, la utilidad del
	  sistema <code class="command">cron</code> y más
	  opciones de personalización del kernel.</p></li><li class="listitem"><p><a class="xref" href="#security" title="Capítulo 14. Seguridad">Capítulo 14, <em>Seguridad</em></a>, seguridad, ha sido
	  ampliado con información sobre redes privadas
	  virtuales (VPN), listas de control de accesos al
	  sistema de ficheros (más conocidas por ACL) e
	  información sobre avisos de seguridad.</p></li><li class="listitem"><p><a class="xref" href="#mac" title="Capítulo 16. Mandatory Access Control">Capítulo 16, <em>Mandatory Access Control</em></a>, Mandatory Access Control (MAC),
	  es un capítulo nuevo.  En él se expone
	  qué es MAC y de qué forma puede utilizarse
	  en FreeBSD como complemento de la seguridad del sistema.</p></li><li class="listitem"><p><a class="xref" href="#disks" title="Capítulo 18. Almacenamiento">Capítulo 18, <em>Almacenamiento</em></a>, almacenamiento, se ha
	  ampliado con información sobre dispositivos USB
	  de almacenamiento, instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>)
	  de sistemas de ficheros, sistemas de ficheros basados
	  en ficheros y en red, y particiones de disco
	  cifradas.</p></li><li class="listitem"><p><a class="xref" href="#vinum-vinum" title="Capítulo 20. El Gestor de Volúmenes Vinum">Capítulo 20, <em>El Gestor de Volúmenes Vinum</em></a>, Vinum, es un
	  capítulo nuevo.  Describe el uso de Vinum, un gestor
	  de volúmenes lógicos que permite disponer de
	  discos lógicos independientes de dispositivo,
	  así como de RAID-0, RAID-1 y RAID-5 por
	  software.</p></li><li class="listitem"><p>Se ha añadido una sección de
	  depuración de problemas al <a class="xref" href="#ppp-and-slip" title="Capítulo 25. PPP y SLIP">Capítulo 25, <em>PPP y SLIP</em></a>, PPP y SLIP.</p></li><li class="listitem"><p><a class="xref" href="#mail" title="Capítulo 27. Correo Electrónico">Capítulo 27, <em>Correo Electrónico</em></a>, correo electrónico,
	  ha sido ampliado con información sobre el
	  uso de MTA alternativos, autentificación
	  SMTP, UUCP, <span class="application">fetchmail</span>,
	  <span class="application">procmail</span> así como
	  otros temas avanzados relacionados con el correo.</p></li><li class="listitem"><p><a class="xref" href="#network-servers" title="Capítulo 28. Servidores de red">Capítulo 28, <em>Servidores de red</em></a>, servidores de red,
	  es un capítulo nuevo.  En él se
	  incluye información sobre la configuración
	  de <span class="application">Apache HTTP Server</span>,
	  <span class="application">ftpd</span> y cómo
	  configurar <span class="application">Samba</span> para
	  su uso con clientes <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  Ciertas
	  partes de <a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>, <span class="quote">&#8220;<span class="quote">networking</span>&#8221;</span> avanzado,
	  se han trasladado a este capítulo para
	  dar más solidez al contenido.</p></li><li class="listitem"><p><a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>,
	  <span class="quote">&#8220;<span class="quote">networking</span>&#8221;</span> avanzado, incluye en
	  esta edición nuevos datos sobre el uso de
	  dispositivos <span class="trademark">Bluetooth</span>® en FreeBSD, la configuración
	  de redes <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> y el <span class="quote">&#8220;<span class="quote">networking</span>&#8221;</span>
	  ATM (Asynchronous Transfer Mode).</p></li><li class="listitem"><p>Se ha creado un glosario para disponer de una
	  ubicación centralizada donde encontrar
	  definiciones de términos técnicos que
	  se utilizan a lo largo del libro.</p></li><li class="listitem"><p>Las tablas e imágenes que aparecen en
	  el libro han experimentado diversas mejoras
	  est´ticas.</p></li></ul></div><h2 class="title"><a id="preface-changes"></a>Cambios desde
  la primera edición</h2><p>La segunda edición fue la culminación
      de más de dos años de trabajo de los miembros
      del FreeBSD Documentation Project.  Estos son los principales
      cambios que encontrará en esta edición:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Se ha creado un índice completo.</p></li><li class="listitem"><p>Todos los esquemas ASCII han sido reemplazados
	  por diagramas gráficos.</p></li><li class="listitem"><p>Se ha añadido una sinopsis estándar
	  a cada capítulo donde se ofrece un breve sumario
	  del contenido del capítulo y qué se
	  espera que sepa el lector para poder sacarle
	  provecho.</p></li><li class="listitem"><p>Se ha reorganizado de forma lógica el contenido
	  en tres partes: <span class="quote">&#8220;<span class="quote">primeros pasos</span>&#8221;</span>,
	  <span class="quote">&#8220;<span class="quote">administración del sistema </span>&#8221;</span> y
	<span class="quote">&#8220;<span class="quote">apéndices</span>&#8221;</span>.</p></li><li class="listitem"><p>El <a class="xref" href="#install" title="Capítulo 2. Instalación de FreeBSD">Capítulo 2, <em>Instalación de FreeBSD</em></a>
	  (<span class="quote">&#8220;<span class="quote">instalación de FreeBSD</span>&#8221;</span>) ha sido
	  reescrito completamente e incluye gran cantidad de
	  capturas de pantalla para facilitar su comprensión
	  a los nuevos usuarios.</p></li><li class="listitem"><p>El <a class="xref" href="#basics" title="Capítulo 3. Conceptos básicos de Unix">Capítulo 3, <em>Conceptos básicos de Unix</em></a>
	  (<span class="quote">&#8220;<span class="quote">conceptos básicos de <span class="trademark">UNIX</span>®</span>&#8221;</span>)
	  se ha ampliado con más información sobre
	  procesos, dæmons y señales.</p></li><li class="listitem"><p>El <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>
	  (<span class="quote">&#8220;<span class="quote">instalación de aplicaciones</span>&#8221;</span>)
	  incluye información sobre la gestión
	  de paquetes binarios.</p></li><li class="listitem"><p>El <a class="xref" href="#x11" title="Capítulo 5. El sistema X Window">Capítulo 5, <em>El sistema X Window</em></a>, (<span class="quote">&#8220;<span class="quote">El sistema X Window</span>&#8221;</span>)
 	  ha sido reescrito totalmente, con especial énfasis
	  en el uso de modernas tecnologías de escritorio
	  como <span class="application">KDE</span> y <span class="application">GNOME</span>
	  en <span class="trademark">XFree86</span>&#8482; 4.X.</p></li><li class="listitem"><p>El <a class="xref" href="#boot" title="Capítulo 12. El proceso de arranque en FreeBSD">Capítulo 12, <em>El proceso de arranque en FreeBSD</em></a> (<span class="quote">&#8220;<span class="quote">El proceso de arranque de FreeBSD</span>&#8221;</span>)
	  ha sido ampliado.</p></li><li class="listitem"><p>El <a class="xref" href="#disks" title="Capítulo 18. Almacenamiento">Capítulo 18, <em>Almacenamiento</em></a> (<span class="quote">&#8220;<span class="quote">Almacenamiento</span>&#8221;</span>)
	  ha sido el fruto de refundir el contenido de lo eran
	  dos capítulos sobre <span class="quote">&#8220;<span class="quote">discos</span>&#8221;</span> y
          <span class="quote">&#8220;<span class="quote">copias de seguridad</span>&#8221;</span>.  Pensamos que
	  estos temas eran más fáciles de entender
	  si se trataban en un mismo capítulo.  Se ha
	  añadido también una sección
          sobre RAID (tanto hardware como software).</p></li><li class="listitem"><p>El <a class="xref" href="#serialcomms" title="Capítulo 24. Comunicaciones serie">Capítulo 24, <em>Comunicaciones serie</em></a> (<span class="quote">&#8220;<span class="quote">communicaciones serie</span>&#8221;</span>)
	  ha sido reorganizado y actualizado completamente
	  con información sobre FreeBSD 4.X y 5.X.</p></li><li class="listitem"><p>El <a class="xref" href="#ppp-and-slip" title="Capítulo 25. PPP y SLIP">Capítulo 25, <em>PPP y SLIP</em></a> (<span class="quote">&#8220;<span class="quote">PPP y SLIP</span>&#8221;</span>)
	  ha sido actualizado en gran parte.</p></li><li class="listitem"><p>Se han añadido muchas secciones nuevas al <a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>
	(<span class="quote">&#8220;<span class="quote">Networking avanzado</span>&#8221;</span>).</p></li><li class="listitem"><p>El <a class="xref" href="#mail" title="Capítulo 27. Correo Electrónico">Capítulo 27, <em>Correo Electrónico</em></a> (<span class="quote">&#8220;<span class="quote">correo electrónico</span>&#8221;</span>
	  incluye ahora más información
	  sobre la configuración de
	  <span class="application">sendmail</span>.</p></li><li class="listitem"><p>El <a class="xref" href="#linuxemu" title="Capítulo 10. Compatibilidad binaria con Linux">Capítulo 10, <em>Compatibilidad binaria con Linux</em></a> (<span class="quote">&#8220;<span class="quote">compatibilidad con<span class="trademark">Linux</span>®</span>&#8221;</span>)
	  se ha ampliado con información sobre
	  la instalación de
	  <span class="application"><span class="trademark">Oracle</span>®</span> y
	<span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.</p></li><li class="listitem"><p>En esta segunda edición se incluyen
	  también estos nuevos contenidos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Configuración y adaptación
	      del sistema (<a class="xref" href="#config-tuning" title="Capítulo 11. Configuración y Adaptación del Sistema">Capítulo 11, <em>Configuración y Adaptación del Sistema</em></a>).</p></li><li class="listitem"><p>Multimedia (<a class="xref" href="#multimedia" title="Capítulo 7. Multimedia">Capítulo 7, <em>Multimedia</em></a>)</p></li></ul></div></li></ul></div><h2 class="title"><a id="preface-overview"></a>Cómo se
    organiza este libro</h2><p>Este libro se divide en cinco secciones lógicamente
    distintas.  La primera, <span class="emphasis"><em>primeros pasos</em></span>,
    trata sobre la instalación y el uso más
    básico de FreeBSD.  Está pensada para que el
    lector los recorra en secuencialmente, aunque puede
    saltarse algunos si tratan sobre temas que le resulten
    familiares.  La segunda sección,
    <span class="emphasis"><em>Tareas comunes</em></span>, está dedicada
    a las características de FreeBSD que suelen utilizarse
    con más frecuencia.  Esta sección, así
    como las siguientes, pueden leerse en cualquier orden.  Cada
    capítulo comienza con una sinopsis sucinta en
    la que se describe el contenido del capítulo y qué
    es lo que se espera que sepa el lector antes de leerlo.  Esto
    se hace para dar ocasión al lector ocasional a que elija
    el capítulo que más pueda interesarle.  La
    tercera sección, <span class="emphasis"><em>Administración del
    sistema</em></span>, trata sobre diversos aspectos de la
    administración del sistema.  La cuarta sección,
    <span class="emphasis"><em>Redes y comunicaciones</em></span>, está
    dedicada al <span class="quote">&#8220;<span class="quote">networking</span>&#8221;</span> y temas relacionados
    con los servidores.  La quinta sección dispone de
    apéndices con información de referencia.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#introduction" title="Capítulo 1. Introducción">Capítulo 1, <em>Introducción</em></a>, Presentación</em></span></span></dt><dd><p>Este capítulo, como su nombre indica, presenta
	  FreeBSD al usuario.  En él se cuenta la historia del
	  Proyecto FreeBSD, sus objetivos y su modelo de desarrollo.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#install" title="Capítulo 2. Instalación de FreeBSD">Capítulo 2, <em>Instalación de FreeBSD</em></a>, Instalación</em></span></span></dt><dd><p>Guía al usuario a través de un proceso
	  completo de instalación.  Se explican también
	  algunos aspectos avanzados como la instalación
	  a través de una consola serie.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#basics" title="Capítulo 3. Conceptos básicos de Unix">Capítulo 3, <em>Conceptos básicos de Unix</em></a>, Conceptos básicos
        de <span class="trademark">UNIX</span>®</em></span></span></dt><dd><p>Se explican los comandos más básicos y
	  el funcionamiento del sistema operativo FreeBSD.  Si ya se
	  tiene experiencia con <span class="trademark">Linux</span>® u otro tipo de <span class="trademark">UNIX</span>®
	  posiblemente sea este un capítulo que no deba
	  leerse.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>, Instalación de
        aplicaciones</em></span></span></dt><dd><p>Se explica la instalación de software desarrollado
	  por personas ajenas al proyecto, tanto mediante la innovadora
	  <span class="quote">&#8220;<span class="quote">Colección de Ports</span>&#8221;</span> de FreeBSD como mediante
	  paquetes binarios estándar (<span class="quote">&#8220;<span class="quote">packages</span>&#8221;</span>).</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#x11" title="Capítulo 5. El sistema X Window">Capítulo 5, <em>El sistema X Window</em></a>, El sistema X Window</em></span></span></dt><dd><p>Describe el sistema X Windows en general y su
	  uso en FreeBSD en particular.  Describe también
	  entornos de escritorio de uso común como
	  <span class="application">KDE</span> y <span class="application">GNOME</span>.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#desktop" title="Capítulo 6. Aplicaciones de escritorio">Capítulo 6, <em>Aplicaciones de escritorio</em></a>, Aplicaciones de escritorio</em></span></span></dt><dd><p>Se enumeran algunas aplicaciones de escritorio muy comunes,
	  como navegadores web y suites ofimáticas, y cómo
	  instalar estas aplicaciones en FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#multimedia" title="Capítulo 7. Multimedia">Capítulo 7, <em>Multimedia</em></a>, Multimedia</em></span></span></dt><dd><p>Trata sobre la configuración la reproducción
        de sonido y vídeo en su sistema.  Describe también
	algunas aplicaciones de sonido y vídeo.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>, Configuración
        del kernel de FreeBSD</em></span></span></dt><dd><p>Explica bajo qué circunstancias tendrá
	  que configurar un nuevo kernel y facilita instrucciones
	  detalladas para la configuración, compilación
	  e instalación de un kernel personalizado.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#printing" title="Capítulo 9. Imprimir">Capítulo 9, <em>Imprimir</em></a>, Imprimir</em></span></span></dt><dd><p>Describe la gestión de impresoras en FreeBSD,
	  abarcando aspectos diversos como las páginas
	  <span class="quote">&#8220;<span class="quote">banner</span>&#8221;</span>, las cuentas de impresión
	  así como la configuración inicial.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#linuxemu" title="Capítulo 10. Compatibilidad binaria con Linux">Capítulo 10, <em>Compatibilidad binaria con Linux</em></a>, Compatibilidad binaria
        con <span class="trademark">Linux</span>®</em></span></span></dt><dd><p>Describe las características de compatibilidad
	  con <span class="trademark">Linux</span>® de FreeBSD.  Incluye también instrucciones
	  detalladas de instalación de varias aplicaciones
	  <span class="trademark">Linux</span>® muy populares, como
	  <span class="application"><span class="trademark">Oracle</span>®</span>, <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
	  y <span class="application"><span class="trademark">Mathematica</span>®</span>.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#config-tuning" title="Capítulo 11. Configuración y Adaptación del Sistema">Capítulo 11, <em>Configuración y Adaptación del Sistema</em></a>, Configuración
        y adaptación del sistema</em></span></span></dt><dd><p>Describe los parámetros que los administradores
	  de sistemas tienen a su alcance para hacer que FreeBSD
	  rinda al máximo.  Describe también
	  los diversos ficheros de configuración que
	  se usan en FreeBSD y dónde están.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#boot" title="Capítulo 12. El proceso de arranque en FreeBSD">Capítulo 12, <em>El proceso de arranque en FreeBSD</em></a>, El proceso de arranque
        en FreeBSD</em></span></span></dt><dd><p>Describe el proceso de arranque de FreeBSD y explica
	  cómo controlar este proceso mediante opciones
	  de configuración.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#users" title="Capítulo 13. Usuarios y administración básica de cuentas">Capítulo 13, <em>Usuarios y administración básica de cuentas</em></a>, Usuarios y administración
        básica de cuentas</em></span></span></dt><dd><p>Describe la creación y gestión de
	  cuentas de usuario.  Trata también sobre la
	  limitación de recursos que puede aplicarse
	  sobre los mismos, así como otras tareas
	  administrativas.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#security" title="Capítulo 14. Seguridad">Capítulo 14, <em>Seguridad</em></a>, Seguridad</em></span></span></dt><dd><p>Describe las abudantes herramientas diferentes que pueden
	  ayudar a que su sistema FreeBSD esté y permanezca seguro.
	  Entre ellas encontrará a Kerberos, IPsec y OpenSSH.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#jails" title="Capítulo 15. Jaulas">Capítulo 15, <em>Jaulas</em></a>, Jaulas</em></span></span></dt><dd><p>Describe el uso de jaulas en FreeBSD y el avance que este
	  <span class="quote">&#8220;<span class="quote">framework</span>&#8221;</span> supone respecto al tradicional uso
	  de chroot que se hacía en FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mac" title="Capítulo 16. Mandatory Access Control">Capítulo 16, <em>Mandatory Access Control</em></a>, Mandatory Access Control</em></span></span></dt><dd><p>Explica qué es Mandatory Access Control (MAC) y
	  cómo puede usarse este mecanismo para hacer más
	  seguro FreeBSD</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#audit" title="Capítulo 17. Auditoría de eventos de seguridad">Capítulo 17, <em>Auditoría de eventos de seguridad</em></a>, Auditoría de
        eventos de seguridad</em></span></span></dt><dd><p>Describe qué es la auditoría de eventos
	  en FreeBSD cómo instalarla y configurarla y cómo
	  pueden inspeccionarse y monitorizarse dichas auditorías.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#disks" title="Capítulo 18. Almacenamiento">Capítulo 18, <em>Almacenamiento</em></a>, Almacenamiento</em></span></span></dt><dd><p>Describe cómo gestionar medios de almacenamiento
	  y sistemas de ficheros en FreeBSD, tanto discos físicos,
	  arreglos RAID, medios ópticos o en cinta, como
	  discos en memoria y sistemas de ficheros en red.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#GEOM" title="Capítulo 19. GEOM: Marco de trabajo modular de transformación de discos">Capítulo 19, <em>GEOM: Marco de trabajo modular de transformación de discos</em></a>, GEOM</em></span></span></dt><dd><p>Trata sobre el <span class="quote">&#8220;<span class="quote">framework</span>&#8221;</span> <span class="quote">&#8220;<span class="quote">GEOM</span>&#8221;</span>
	  de FreeBSD y cómo configurar con él alguno
	  de los diversos niveles de RAID que admite.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#vinum-vinum" title="Capítulo 20. El Gestor de Volúmenes Vinum">Capítulo 20, <em>El Gestor de Volúmenes Vinum</em></a>, Vinum</em></span></span></dt><dd><p>Describe cómo usar Vinum, un gestor de
	  volúmenes lógicos que permite tanto el
	  uso de discos lógicos independientes de dispositivo,
          como RAID-0, RAID-1 y RAID-5 por software.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#virtualization" title="Capítulo 21. Virtualización">Capítulo 21, <em>Virtualización</em></a>, Virtualización</em></span></span></dt><dd><p>Describe los sistemas de virtualización disponibles
	  en FreeBSD y cómo utilizarlos.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#l10n" title="Capítulo 22. Localización - Uso y configuración de I18N/L10N">Capítulo 22, <em>Localización - Uso y configuración de
    I18N/L10N</em></a>, Localización</em></span></span></dt><dd><p>Describe el uso en FreeBSD de idiomas distintos del
	  inglés.  Trata tanto la localización del
	  sistema como de las aplicaciones.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#cutting-edge" title="Capítulo 23. Lo último de lo último">Capítulo 23, <em>Lo último de lo último</em></a>, Lo último de
        lo último</em></span></span></dt><dd><p>Explica las diferencias existentes entre FreeBSD-STABLE,
	  FreeBSD-CURRENT y las releases de FreeBSD.  Describe
	  también qué tipos de usuario pueden
	  beneficiarse de seguir el desarrollo contínuo
	  del sistema en su propia máquina y muestra el
	  proceso a seguir.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#serialcomms" title="Capítulo 24. Comunicaciones serie">Capítulo 24, <em>Comunicaciones serie</em></a>, Comunicaciones serie</em></span></span></dt><dd><p>Explica cómo conectar terminales serie y
	  módems a su sistema FreeBSD tanto para conexiones
	  entrantes como salientes.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#ppp-and-slip" title="Capítulo 25. PPP y SLIP">Capítulo 25, <em>PPP y SLIP</em></a>, PPP y SLIP</em></span></span></dt><dd><p>Describe cómo usar en FreeBSD PPP, SLIP o PPP sobre
	  Ethernet para conexiones a sistemas remotos.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mail" title="Capítulo 27. Correo Electrónico">Capítulo 27, <em>Correo Electrónico</em></a>, Correo electrónico</em></span></span></dt><dd><p>Detalla los distintos elementos que componen un servidor
	  de correo electrónico y explica diversos aspectos
	  sencillos de la configuración del servidor de correo
	  más extendido:
	  <span class="application">sendmail</span>.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#network-servers" title="Capítulo 28. Servidores de red">Capítulo 28, <em>Servidores de red</em></a>, Servidores de red</em></span></span></dt><dd><p>En este capítulo encontrará instrucciones
	  detalladas y ficheros de configuración de ejemplo que
	  le permitirán configurar su sistema FreeBSD como servidor
	  NFS, servidor de nombres, servidor NIS o de sincronización
	  de hora.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#firewalls" title="Capítulo 26. Cortafuegos">Capítulo 26, <em>Cortafuegos</em></a>, Cortafuegos</em></span></span></dt><dd><p>Explica la filosofía que sustenta los
	  cortafuegos por software y facilita información
	  detallada sobre la configuración de los distintos
	  cortafuegos disponibles en FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>, <span class="quote">&#8220;<span class="quote">Networking</span>&#8221;</span>
        avanzado</em></span></span></dt><dd><p>Describe diversos temas relacionados con el
	  <span class="quote">&#8220;<span class="quote">networking</span>&#8221;</span>, desde compartir la conexión
	  a Internet con otras máquinas de su LAN a diversos
	  aspectos avanzados del encaminamiento de tráfico,
	  pasando por las redes <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>,
	  <span class="trademark">Bluetooth</span>®, ATM, IPv6 y mucho más.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mirrors" title="Capítulo 30. Cómo obtener FreeBSD">Capítulo 30, <em>Cómo obtener FreeBSD</em></a>, Cómo conseguir FreeBSD</em></span></span></dt><dd><p>Enumera las diferentes fuentes desde la que puede
	  conseguirse FreeBSD en CDROM o DVD, así como los
	  numerosos sitios de Internet desde los que puede descargar
	  e instalar FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#bibliography" title="Capítulo 31. Bibliografía">Capítulo 31, <em>Bibliografía</em></a>, Bibliografía </em></span></span></dt><dd><p>Este libro toca tantos temas que es muy posible que
	  el lector se quede a falta de una explicación
	  más detallada.  En la bibliografía
	  muchos libros estupendos relacionados con el contenido de
	  este texto.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#eresources" title="Apéndice A. Recursos en Internet">Apéndice A, <em>Recursos en Internet</em></a>, Recursos en Internet</em></span></span></dt><dd><p>Describe los abundantes foros de que disponen los usuarios
	  de FreeBSD para enviar preguntas y participar en conversaciones
	  técnicas sobre FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#pgpkeys" title="Capítulo 32. PGP keys">Capítulo 32, <em>PGP keys</em></a>, PGP Keys</em></span></span></dt><dd><p>Lista las claves públicas PGP de varios
	  desarrolladores de FreeBSD.</p></dd></dl></div><h2 class="title"><a id="preface-conv"></a>Convenciones usadas
    en este libro</h2><p>Con el ánimo de mantener la consistencia y
      facilitar la lectura del texto se siguen varias convenciones
      a lo largo del libro.</p><h3 class="title"><a id="preface-conv-typographic"></a>Convenciones
    tipográficas</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>Cursiva</em></span></span></dt><dd><p>Se usa un tipo de letra<span class="emphasis"><em>cursiva</em></span>
	  cuando se citan nombres de fichero, URL, texto en el que
	  se quiere hacer énfasis y cuando un término
	  técnico aparece por primera vez en el texto.</p></dd><dt><span class="term"><code class="literal">Tipografía de máquina de
        escribir</code></span></dt><dd><p>Se usa un tipo de letra <code class="literal">de máquina
	    de escribir</code>
	    cuando se muestran mensajes de error, comandos,
	    variables de entorno, nombres de <span class="quote">&#8220;<span class="quote">ports</span>&#8221;</span>,
	    nombres de máquina, nombres de usuario o de
	    grupo, nombres de dispositivo, variables y cuando
	    Se usa un tipo de letra <code class="literal">monospaced</code>
	      cuando se muestran mensajes de error, comandos,
	      variables de entorno, nombres de <span class="quote">&#8220;<span class="quote">ports</span>&#8221;</span>,
	      nombres de máquina, nombres de usuario o de
	      grupo, nombres de dispositivo, variables y cuando
	      se muestran fragmentos de código.</p></dd><dt><span class="term"><span class="application">Negrita</span></span></dt><dd><p>Se usa un tipo de letra <span class="application">negrita</span>
	  en el nombre de aplicaciones, comandos y cuando se
	  muestran claves.</p></dd></dl></div><h3 class="title"><a id="preface-conv-commands"></a>Datos que introduce el usuario</h3><p>Las claves se muestran en <span class="keycap"><strong>negrita</strong></span> para
    distinguirlas de cualquier otro texto.  Las combinaciones de
    teclas que implican que sean pulsadas simultáneamente
    se muestran con el símbolo `<code class="literal">+</code>' entre
    una y otra, como en:</p><p>
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Supr</strong></span>
  </p><p>Esto significa que el usuario debe pulsar las teclas
  <span class="keycap"><strong>Ctrl</strong></span>,
    <span class="keycap"><strong>Ctrl</strong></span>, <span class="keycap"><strong>Alt</strong></span> y <span class="keycap"><strong>Supr</strong></span>
    al mismo tiempo.</p><p>Las teclas que deben pulsarse secuencialmente se separan con
    comas, como en este ejemplo:</p><p>
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>X</strong></span>,
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>S</strong></span>
  </p><p>Esto significa que el usuario debe pulsar simultáneamente
    las teclas <span class="keycap"><strong>Ctrl</strong></span> y <span class="keycap"><strong>X</strong></span> y después
    pulsar simultáneamente <span class="keycap"><strong>Ctrl</strong></span> y
    <span class="keycap"><strong>S</strong></span>.</p><h3 class="title"><a id="preface-conv-examples"></a>Ejemplos</h3><p>Un comienzo como <code class="filename">E:\&gt;</code>
    indica un ejemplo de comando de <span class="trademark">MS-DOS</span>®.  A menos que se
    especifique otra cosa, estos comandos deben ejecutarse en una
    terminal <span class="quote">&#8220;<span class="quote">Command Prompt</span>&#8221;</span> de un sistema <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®
    moderno.</p><pre class="screen"><code class="prompt">E:\&gt;</code> <strong class="userinput"><code>tools\fdimage floppies\kern.flp A:</code></strong></pre><p>Si hay un <code class="prompt">#</code> indica que el comando debe ejecutarse
    como superusuario en FreeBSD.  Puede acceder al sistema como
    <code class="systemitem">root</code> y ejecutar el comando o bien con su
    usuario habitual y utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> para disponer de privilegios
    de superusuario.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=kern.flp of=/dev/fd0</code></strong></pre><p>Si el ejemplo comienza con un <code class="prompt">%</code> indica que
    el comando puede ejecutarse en una cuenta de usuario normal.  Salvo
    que se indique otra cosa se usa la sintaxis de C-shell para
    asignar valores a variables de entorno u otros comandos.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong></pre><h2 class="title"><a id="preface-acknowledgements"></a>Agradecimientos</h2><p>Este libro representa el esfuerzo de muchos cientos de
    personas del mundo entero.  Tanto si fue en forma de correción
    de errores de contenido como gramaticales, o bien fue un
    capítulo entero lo que enviaron, toda contribución
    ha sido muy valiosa.</p><p>Varias compañías han colaborado en el
    desarrollo de este documento pagando a tiempo completo
    a varios autores, financiando la publicación, etc.  En
    especial BSDi (posteriormente adquirida por <a class="link" href="http://www.windriver.com" target="_top">Wind River Systems</a>)
    pagaron a varios miembros del FreeBSD Documentation Project por
    trabajar en la mejora lo que fue la primera edición
    de este libro, que apareció en marzo de 2000
    (ISBN 1-57176-241-8).  Además de esto, Wind River Systems
    aportó el dinero para que otros autores pudieran
    realizar gran cantidad de mejoras en la estructura de creación
    de material listo para impresión y para pudieran
    añadir nuevos capítulos.  Este trabajo culminó
    con la publicación de la segunda edición impresa
    en noviembre de 2001 (ISBN 1-57176-303-1).  En 2003 y 2004 <a class="link" href="http://www.freebsdmall.com" target="_top">FreeBSD Mall, Inc</a>,
    pagó a varios autores para que se dedicaran a lo que será
    la tercera edición.</p></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="getting-started"></a>Parte I. Primeros pasos</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>Esta parte del manual de FreeBSD es para usuarios y
        administradores nuevos en FreeBSD. El cometido de estos
	capítulos es:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ofrecer una introducción a FreeBSD.</p></li><li class="listitem"><p>Guiar a través de una instalación de
            FreeBSD.</p></li><li class="listitem"><p>Explicar conceptos básica de Unix.</p></li><li class="listitem"><p>Explicar cómo instalar la gran cantidad de software de
	    terceros disponible para FreeBSD.</p></li><li class="listitem"><p>Presentar una introducción al manejo de X Window,
	    el sistema de ventanas de <span class="trademark">UNIX</span>®, y detallar cómo
	    configurar un entorno de escritorio
            más productivo.</p></li></ul></div><p>Se ha intentado minimizar el número de referencias a
        otras secciones de este documento para evitar el salto entre
        páginas y facilitar la lectura continuada.</p><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="chapter"><a href="#introduction">1. Introducción</a></span></dt><dd><dl><dt><span class="sect1"><a href="#introcution-synopsis">1.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. Bienvenido a FreeBSD</a></span></dt><dt><span class="sect1"><a href="#history">1.3. Acerca del Proyecto FreeBSD </a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">2. Instalación de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install-synopsis">2.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#install-hardware">2.2. Requisitos de hardware</a></span></dt><dt><span class="sect1"><a href="#install-pre">2.3. Tareas anteriores a la instalación</a></span></dt><dt><span class="sect1"><a href="#install-start">2.4. Inicio de la instalación</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">2.5. ?Qué es sysinstall?</a></span></dt><dt><span class="sect1"><a href="#install-steps">2.6. Asignación de espacio en disco</a></span></dt><dt><span class="sect1"><a href="#install-choosing">2.7. Elección de qué instalar</a></span></dt><dt><span class="sect1"><a href="#install-media">2.8. Elección del medio de instalación</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">2.9. El punto sin retorno</a></span></dt><dt><span class="sect1"><a href="#install-post">2.10. Después de la instalación</a></span></dt><dt><span class="sect1"><a href="#install-trouble">2.11. Solución de problemas</a></span></dt><dt><span class="sect1"><a href="#install-advanced">2.12. Guía avanzada de instalación</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">2.13. Cómo preparar su propio medio de instalación</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basics">3. Conceptos básicos de Unix</a></span></dt><dd><dl><dt><span class="sect1"><a href="#basics-synopsis">3.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#consoles">3.2. Consolas virtuales y terminales</a></span></dt><dt><span class="sect1"><a href="#permissions">3.3. Permisos</a></span></dt><dt><span class="sect1"><a href="#dirstructure">3.4. Estructura de directorios</a></span></dt><dt><span class="sect1"><a href="#disk-organization">3.5. Organización de disco</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">3.6. Montaje y desmontaje de sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#basics-processes">3.7. Procesos</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">3.8. Dæmons, señales y cómo matar procesos</a></span></dt><dt><span class="sect1"><a href="#shells">3.9. Shells</a></span></dt><dt><span class="sect1"><a href="#editors">3.10. Editores de texto</a></span></dt><dt><span class="sect1"><a href="#basics-devices">3.11. Dispositivos y nodos de dispositivos</a></span></dt><dt><span class="sect1"><a href="#binary-formats">3.12. Formatos binarios</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">3.13. Más información</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ports">4. Instalación de aplicaciones: «packages» y ports</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ports-synopsis">4.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#ports-overview">4.2. Aproximación a la instalación de software</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">4.3. Cómo encontrar aplicaciones</a></span></dt><dt><span class="sect1"><a href="#packages-using">4.4. Uso del sistema de packages</a></span></dt><dt><span class="sect1"><a href="#ports-using">4.5. Uso de la colección de ports</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">4.6. Después de instalar un port</a></span></dt><dt><span class="sect1"><a href="#ports-broken">4.7. Ports que no funcionan</a></span></dt></dl></dd><dt><span class="chapter"><a href="#x11">5. El sistema X Window</a></span></dt><dd><dl><dt><span class="sect1"><a href="#x11-synopsis">5.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#x-understanding">5.2. Entender X</a></span></dt><dt><span class="sect1"><a href="#x-install">5.3. Instalar X11</a></span></dt><dt><span class="sect1"><a href="#x-config">5.4. Configuración de X11</a></span></dt><dt><span class="sect1"><a href="#x-fonts">5.5. Uso de tipos en X11</a></span></dt><dt><span class="sect1"><a href="#x-xdm">5.6. El gestor de pantalla X</a></span></dt><dt><span class="sect1"><a href="#x11-wm">5.7. Entornos de escritorio</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="introduction"></a>Capítulo 1. Introducción</h2></div><div><span class="authorgroup">Reesctructurado, reorganizado y con algunas
          partes reescritas por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#introcution-synopsis">1.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. Bienvenido a FreeBSD</a></span></dt><dt><span class="sect1"><a href="#history">1.3. Acerca del Proyecto FreeBSD </a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="introcution-synopsis"></a>1.1. Sinopsis</h2></div></div></div><p>Gracias por su interés en FreeBSD.  El siguiente
      capítulo trata varios temas relativos al Proyecto FreeBSD, como
      su historia, objetivos, modelo de desarrollo, etc.</p><p>Después de leer este capítulo sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Qué relación guarda FreeBSD con otros sistemas
        operativos.</p></li><li class="listitem"><p>La historia del Proyecto FreeBSD.</p></li><li class="listitem"><p>Los objetivos del Proyecto FreeBSD.</p></li><li class="listitem"><p>Los fundamentos del modelo de desarrollo de código
	  abierto de FreeBSD.</p></li><li class="listitem"><p>Y por supuesto: de dónde procede el nombre
	  <span class="quote">&#8220;<span class="quote">FreeBSD</span>&#8221;</span>.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="nutshell"></a>1.2. Bienvenido a FreeBSD</h2></div></div></div><a id="idp62294736" class="indexterm"></a><p>FreeBSD es un sistema operativo basado en 4.4BSD-Lite para
      ordenadores Intel (x86 e <span class="trademark">Itanium</span>®), AMD64,
      <span class="trademark">Alpha</span>&#8482; y Sun <span class="trademark">UltraSPARC</span>®. Se está
      trabajando también en versiones para otras arquitecturas.
      También puede leer sobre <a class="link" href="#history" title="1.3. Acerca del Proyecto FreeBSD">la
      historia de FreeBSD</a>, o sobre la <a class="link" href="#relnotes" title="1.3.4. En qué consiste el FreeBSD que distribuimos">distribución actual</a>.  Si
      cree que puede ayudar al proyecto de algún modo
      (desarrollando código, donando hardware, dinero, etc) consulte
      el artículo <a class="link" href="../../articles/contributing/index.html" target="_top">Contribuir a
      FreeBSD</a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="os-overview"></a>1.2.1. ?Qué puede hacer FreeBSD?</h3></div></div></div><p>FreeBSD tiene muchas características notables.  Algunas
        de ellas son:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp62309456" class="indexterm"></a><p><span class="emphasis"><em>Multitarea expropiativa</em></span> con
            prioridades dinámicamente ajustadas para asegurar que
            distintas aplicaciones y usuarios compartan los recursos del
	    sistema de un modo equitativo, incluso bajo la mayor de las
            cargas.</p></li><li class="listitem"><a id="idp62312272" class="indexterm"></a><p><span class="emphasis"><em>Servicios multiusuario</em></span> que permiten
            a mucha gente usar un sistema FreeBSD simultáneamente para
            distintas cosas.  Ésto significa, por ejemplo, que los
            periféricos del sistema como impresoras y dispositivos de
            cinta son compartidos adecuadamente por varios usuarios del
            sistema o la red, y que pueden establecerse límites sobre
            recursos concretos para usuarios o grupos de usuarios,
            protegiendo los recursos críticos del sistema de un
            uso abusivo.</p></li><li class="listitem"><a id="idp62315984" class="indexterm"></a><p>Conexión de <span class="emphasis"><em>redes TCP/IP</em></span> muy
            robusta, con soporte para estándares industriales como
	    SCTP, DHCP, NFS, NIS, PPP, SLIP, IPSec e IPv6.  Esto quiere decir
	    que su sistema FreeBSD puede interactuar fácilmente con
	    otros sistemas y hacer de servidor en una empresa, proporcionando
	    servicios clave como NFS (acceso a ficheros remotos) y
	    servicios de correo electrónico, o proporcinando la
	    presencia en Internet de su organización mediante WWW,
	    FTP, servicios de encaminamiento y cortafuegos.</p></li><li class="listitem"><a id="idp62328400" class="indexterm"></a><p>La <span class="emphasis"><em>protección de memoria</em></span>
	     garantiza que las aplicaciones (o los usuarios) no se estorben
	     los unos a los otros.  Un error catastrófico en una
	      aplicación no afecta al resto.</p></li><li class="listitem"><p>FreeBSD es un sistema operativo de
            <span class="emphasis"><em>32-bits</em></span> (de <span class="emphasis"><em>64-bits</em></span>
            en Alpha, <span class="trademark">Itanium</span>®, AMD64, y <span class="trademark">UltraSPARC</span>®) y fue diseñado
            como tal desde el principio.</p></li><li class="listitem"><a id="idp62338896" class="indexterm"></a><p><span class="emphasis"><em>X Window System</em></span> (X11R6), estándar
            de la industria, dota a los usuarios una interfaz
            gráfica (GUI) por el coste de una tarjeta VGA y un monitor
            comunes, y viene con los fuentes completos.</p></li><li class="listitem"><a id="idp62344528" class="indexterm"></a><a id="idp62347344" class="indexterm"></a><a id="idp62350032" class="indexterm"></a><a id="idp62353232" class="indexterm"></a><a id="idp62357840" class="indexterm"></a><p><span class="emphasis"><em>Compatibilidad binaria</em></span> con muchos
            programas nativos de Linux, SCO, SVR4, BSDI y NetBSD.</p></li><li class="listitem"><p>Hay en Internet miles y miles de aplicaciones
            <span class="emphasis"><em>listas para su uso</em></span>.  FreeBSD es compatible
            a nivel de código fuente con la mayoría de
            sistemas <span class="trademark">UNIX</span>® comerciales; por tanto la
            mayoría de aplicaciones requieren poco o
            ningún cambio para compilar en FreeBSD.</p></li><li class="listitem"><p>En Internet hay miles de aplicaciones
            <span class="emphasis"><em>fáciles de portar</em></span>.  El
            código fuente de FreeBSD es compatible con el de los
	    sistemas <span class="trademark">UNIX</span>® comerciales más populares y por ello la
	    mayoría de las aplicaciones tan sólo necesitan
	    pocos cambios, si es que necesitan alguno, para compilar.
	    </p></li><li class="listitem"><a id="idp62382032" class="indexterm"></a><p>El diseño de la <span class="emphasis"><em>memoria virtual</em></span> con
            paginación bajo demanda y de la <span class="quote">&#8220;<span class="quote">caché
	    unificada de VM/buffer</span>&#8221;</span> satisface a aplicaciones que
	    requieren grandes cantidades de memoria de forma eficiente aun
            dando respuestas interactivas a otros usuarios.</p></li><li class="listitem"><a id="idp62390992" class="indexterm"></a><p>Soporte para <span class="emphasis"><em>SMP</em></span> en máquinas con
            múltiples CPUs.</p></li><li class="listitem"><a id="idp62399312" class="indexterm"></a><a id="idp62402128" class="indexterm"></a><a id="idp62404560" class="indexterm"></a><p>Una colección completa de herramientas de desarrollo en
            <span class="emphasis"><em>C</em></span>, <span class="emphasis"><em>C++</em></span>,
            <span class="emphasis"><em>Fortran</em></span>, y <span class="emphasis"><em>Perl</em></span>.
            Podrá encontrar muchos otros lenguajes avanzados para
	    investigación y desarrollo tanto en la
	    la Colección de Ports como en forma de
	    <span class="emphasis"><em>packace</em></span>.</p></li><li class="listitem"><a id="idp62422480" class="indexterm"></a><p>Disponer del <span class="emphasis"><em>código fuente</em></span> del
            sistema entero significa contar con el mayor nivel de
            control posible sobre su entorno.  ?Para qué atarse a
	    una solución propietaria a merced de un fabricante
	    cuando puede tener un verdadero sistema abierto?</p></li><li class="listitem"><p>Documentación exhaustiva <span class="emphasis"><em>en
            línea</em></span>.</p></li><li class="listitem"><p><span class="emphasis"><em>¡Y mucho más!</em></span></p></li></ul></div><a id="idp62431568" class="indexterm"></a><a id="idp62432592" class="indexterm"></a><a id="idp62434640" class="indexterm"></a><p>FreeBSD está basado en la versión 4.4BSD-Lite del
        Computer Systems Research Group (CSRG) de la Universidad de
	California en Berkeley, y continúa la distinguida
	tradición de desarrollo de
        sistemas BSD.  Además del excelente trabajo del CSRG, el
        Proyecto FreeBSD ha invertido miles de horas en ajustar el
        sistema para conseguir un rendimiento y una fiabilidad máximas
        en situaciones de carga reales.  Mientras que muchos de los
        gigantes comerciales se esfuerzan en dotar a los sistemas
        operativos para PC de esas características, rendimiento y
        fiabilidad, FreeBSD puede ofrecerlas
        ¡<span class="emphasis"><em>ya</em></span>!</p><p>Los usos que pueda darle a FreeBSD se ven limitados
        tan sólo por su imaginación.  Desde el desarrollo de
	programas hasta la automatización de
	fábricas, desde control de inventarios hasta corrección
	de azimut de antenas de satélites remotos; Si puede
	hacerse con un <span class="trademark">UNIX</span>® comercial lo más seguro es que
	también pueda llevarse a cabo con FreeBSD.  FreeBSD
	también hace buen uso de las literalmente miles de
        aplicaciones de alta calidad que se desarrollan en centros de
        investigación y universidades de todo el mundo, frecuentemente
        disponibles por poco o ningún coste.  También
	existen aplicaciones comerciales, cuyo número aumenta
	cada dia.</p><p>Dado que el código fuente de FreeBSD está
        disponible para todo el mundo el sistema puede personalizarse en un
	grado nunca visto para aplicaciones o proyectos especiales, y de
	maneras generalmente imposibles con los sistemas operativos de la
        mayoría de los fabricantes comerciales.  Aquí damos
	tan sólo una muestra de aplicaciones en las que se está
	usando actualmente FreeBSD:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Servicios de Internet:</em></span> La robusta
          conectividad TCP/IP integrada en FreeBSD hace de este sistema
          una plataforma ideal para servicios de Internet como:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a id="idp62457552" class="indexterm"></a><p>Servidores FTP</p></li><li class="listitem"><a id="idp62461008" class="indexterm"></a><p>Servidores web (estándares o seguros [SSL])</p></li><li class="listitem"><a id="idp62463952" class="indexterm"></a><a id="idp62465360" class="indexterm"></a><p>Cortafuegos y pasarelas NAT (<span class="quote">&#8220;<span class="quote">enmascaramiento
              IP</span>&#8221;</span>).</p></li><li class="listitem"><a id="idp62469328" class="indexterm"></a><p>Servidores de correo electrónico</p></li><li class="listitem"><a id="idp62472912" class="indexterm"></a><p>USENET y BBSs</p></li><li class="listitem"><p>y muchos más.</p></li></ul></div><p>Con FreeBSD puede empezar fácilmente con un
          pequeño y económico PC de tipo 386
          e ir actualizando su equipo hasta un tetraprocesador Xeon con
          almacenamiento RAID a medida que su proyecto crezca.</p></li><li class="listitem"><p><span class="emphasis"><em>Educación:</em></span> ?Es estudiante de
          informática o de algún campo relacionado con la
          ingeniería?
          No hay mejor modo de estudiar sistemas operativos, arquitectura
          de computadores y redes que la experiencia a bajo nivel que
          FreeBSD puede aportar.  Para aquéllos cuyo principal
	  interés en los ordenadores no es otro que el de poder
	  realizar su trabajo existe una serie de paquetes gratuitos de CAD,
          matemáticas y diseño gráfico que hacen de FreeBSD un
          sistema verdaderamente útil.</p></li><li class="listitem"><p><span class="emphasis"><em>Investigación:</em></span> Encontrándose
          disponible el código fuente del sistema entero FreeBSD es
	  una excelente plataforma para la investigación en sistemas
          operativos y otras ramas de la informática.  El hecho de que
          FreeBSD esté disponible gratuítamente hace posible
	  que grupos remotos puedan colaborar con ideas o compartan
	  desarrollos sin tener que preocuparse de acuerdos de licencias
	  especiales o de limitaciones acerca de lo que puede discutirse en
	  foros públicos.</p></li><li class="listitem"><a id="idp62496848" class="indexterm"></a><a id="idp62498384" class="indexterm"></a><p><span class="emphasis"><em>Redes:</em></span> ?Necesita un nuevo
	  <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>?
	  ?Un servidor de nombres (DNS)?  ?Un
          cortafuegos que haga más segura su red
          interna?  FreeBSD puede convertir ese PC 386 o 486 que tiene
          arrinconado en un <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> avanzado con
          sofisticadas capacidades de filtrado de paquetes.</p></li><li class="listitem"><a id="idp62503760" class="indexterm"></a><a id="idp62506960" class="indexterm"></a><p><span class="emphasis"><em>Estación de trabajo X:</em></span> FreeBSD es
	  una magnífica elección como terminal X de bajo coste
	  gracias al servidor libre X11.  A diferencia
          de las terminales X FreeBSD permite ejecutar muchas aplicaciones
          en local si así se quiere, aligerando de este
          modo la carga soportada por el servidor central.  FreeBSD
          puede incluso arrancar <span class="quote">&#8220;<span class="quote">sin disco</span>&#8221;</span>, permitiendo
          que las estaciones sean aún más económicas y
	  fáciles de administrar.</p></li><li class="listitem"><a id="idp62513360" class="indexterm"></a><p><span class="emphasis"><em>Desarrollo de software:</em></span> El sistema
          base de FreeBSD incluye una completa colección de
          herramientas de desarrollo que incluyen el famoso compilador y
          depurador de C/C++ de GNU.</p></li></ul></div><p>Puede conseguir FreeBSD tanto en forma de código fuente como
      binaria por FTP anónimo o en CDROM.  Por favor, consulte el <a class="xref" href="#mirrors" title="Capítulo 30. Cómo obtener FreeBSD">Capítulo 30, <em>Cómo obtener FreeBSD</em></a> para más información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp62521808"></a>1.2.2. ?Quién usa FreeBSD?</h3></div></div></div><a id="idp62524368" class="indexterm"></a><p>Algunos de los mayores sitios web de Internet utilizan FreeBSD;
        he aquí algunos de ellos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp62538320" class="indexterm"></a><p><a class="link" href="http://www.yahoo.com/" target="_top">Yahoo!</a></p></li><li class="listitem"><a id="idp62542032" class="indexterm"></a><p><a class="link" href="http://www.apache.org/" target="_top">Apache</a></p></li><li class="listitem"><a id="idp62546256" class="indexterm"></a><p><a class="link" href="http://www.bluemountain.com/" target="_top">Blue Mountain
	    Arts</a></p></li><li class="listitem"><a id="idp62549328" class="indexterm"></a><p><a class="link" href="http://www.pair.com/" target="_top">Pair
            Networks</a></p></li><li class="listitem"><a id="idp62552528" class="indexterm"></a><p><a class="link" href="http://www.sony.co.jp/" target="_top">Sony
            Japón</a></p></li><li class="listitem"><a id="idp62556752" class="indexterm"></a><p><a class="link" href="http://www.netcraft.com/" target="_top">Netcraft</a>
            </p></li><li class="listitem"><a id="idp62560336" class="indexterm"></a><p><a class="link" href="http://www.wni.com/" target="_top">Weathernews</a></p></li><li class="listitem"><a id="idp62563792" class="indexterm"></a><p><a class="link" href="http://www.supervalu.com/" target="_top">Supervalu</a></p></li><li class="listitem"><a id="idp62576336" class="indexterm"></a><p><a class="link" href="http://www.telehouse.com/" target="_top">TELEHOUSE America</a></p></li><li class="listitem"><a id="idp62580176" class="indexterm"></a><p><a class="link" href="http://www.sophos.com/" target="_top">Sophos
	    Anti-Virus</a></p></li><li class="listitem"><a id="idp62587984" class="indexterm"></a><p><a class="link" href="http://www.jmawired.com/" target="_top">JMA Wired</a></p></li></ul></div><p>y muchos más.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="history"></a>1.3. Acerca del Proyecto FreeBSD </h2></div></div></div><p>En la siguiente sección se explican ciertos aspectos
      básicos del Proyecto, una breve historia, sus objetivos y
      el modelo de desarrollo del mismo.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="intro-history"></a>1.3.1. Breve historia de FreeBSD</h3></div><div><span class="authorgroup">Elaborado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jordan</span> <span class="surname">Hubbard</span></span>. </span></div></div></div><a id="idp62614864" class="indexterm"></a><a id="idp62615888" class="indexterm"></a><a id="idp62617424" class="indexterm"></a><a id="idp62618576" class="indexterm"></a><a id="idp62620240" class="indexterm"></a><p>La génesis del proyecto FreeBSD se remonta a comienzos de
        1993, en parte como una extensión del <span class="quote">&#8220;<span class="quote">Unofficial 386BSD
        Patchkit</span>&#8221;</span> debida a los tres últimos coordinadores del
        patchkit: Nate Williams, Rod Grimes y yo mismo.</p><a id="idp62624976" class="indexterm"></a><p>Nuestro objetivo original era producir una instantánea de
        386BSD intermedia para arreglar una serie de problemas que no se
        podían solventar con uno de nuestros parches.  Quizás
	haya quien recuerde que el primer nombre del proyecto fue
        <span class="quote">&#8220;<span class="quote">386BSD 0.5</span>&#8221;</span> o <span class="quote">&#8220;<span class="quote">386BSD Interim</span>&#8221;</span> debido
	a esto.</p><a id="idp62632656" class="indexterm"></a><p>386BSD era el sistema operativo de Bill Jolitz, que hasta
        ese punto había estado sufriendo severamente las consecuencias
        de prácticamente un año que más valdría
	olvidar.  A medida que el <span class="quote">&#8220;<span class="quote">patchkit</span>&#8221;</span> se iba haciendo
        haciendo más incómodo cada dia que pasaba, así
	que acordamos ayudar a Bill con una instantánea del
	sistema.  Estos planes se vieron bruscamente interrumpidos cuando
	Bill Jolitz decidió repentinamente retirar su
	aprobación al proyecto sin dejar ninguna indicación
	clara de qué debía hacerse a continuación.</p><a id="idp62635088" class="indexterm"></a><a id="idp62636624" class="indexterm"></a><p>No tardamos mucho en decidir que el objetivo seguía valiendo
        la pena, aun sin el soporte de Bill, así que adoptamos el
        nombre de <span class="quote">&#8220;<span class="quote">FreeBSD</span>&#8221;</span>, una idea de David Greenman.
        Nuestros objetivos iniciales se fijaron tras consultar a
        los usuarios del sistema y cuando quedó claro que el proyecto
        estaba en marcha y que podía llegar a ser una
	realidad contacté con Walnut Creek CDROM con idea de
	mejorar los canales de distribución de FreeBSD y hacer
	m´s fácil llegar a aquellas personas que no tenían
	la suerte de tener acceso a Internet.  Walnut Creek CDROM no solo
        nos ayudó con la idea de distribuir FreeBSD en CD;
        también facilitó al Proyecto una máquina en la que
        trabajar y una conexión rápida a Internet.
        Sin la fe casi sin precedentes que tuvo Walnut Creek
        CDROM en lo que era en aquél momento un proyecto completamente
        desconocido, es bastante improbable que FreeBSD hubiera logrado
        tanto y tan rápido como ha logrado hasta el dia de hoy.</p><a id="idp62639952" class="indexterm"></a><a id="idp62641232" class="indexterm"></a><a id="idp62642000" class="indexterm"></a><a id="idp62643408" class="indexterm"></a><a id="idp62644560" class="indexterm"></a><p>La primera distribución en CDROM (y disponible por la red)
        fue FreeBSD 1.0, publicado en diciembre de 1993.  Estaba basado
        en la cinta de U.C. Berkeley del 4.3BSD-Lite
        (<span class="quote">&#8220;<span class="quote">Net/2</span>&#8221;</span>), con bastantes componentes de 386BSD y de
        trabajos proveniente de la Free Software Foundation.  Fue un logro
	bastante apreciable para una primera versión; pronto le
        siguió FreeBSD 1.1 en mayo de 1994, que tuvo un gran
        éxito.</p><a id="idp62647504" class="indexterm"></a><a id="idp62648656" class="indexterm"></a><a id="idp62658512" class="indexterm"></a><a id="idp62659920" class="indexterm"></a><p>Por entonces se formaron unos inesperados nubarrones en el
        horizonte ya que Novell y la Universidad de Berkeley resolvieron el
        largo juicio acerca del estatus legal de la cinta de Berkeley Net/2.
        Una condición del acuerdo fue la concesión por parte de
        Berkeley de que una gran parte de Net/2 era código
        <span class="quote">&#8220;<span class="quote">gravado</span>&#8221;</span> y propiedad de Novell, quien a su vez lo
        había adquirido de AT&amp;T anteriormente.  Berkeley obtuvo a
        cambio de Novell el <span class="quote">&#8220;<span class="quote">beneplácito</span>&#8221;</span> para que
        4.4BSD-Lite, cuando saliera, fuera declarado como <span class="quote">&#8220;<span class="quote">no
	gravado</span>&#8221;</span> y se instara a los usuarios de Net/2 a cambiar.
        Esto repercutió sobre el Proyecto FreeBSD, a quienes se dio
        hasta julio de 1994 para dejar de sacar su producto basado en
        Net/2.  Bajo los términos de aquel acuerdo se permitía
        al Proyecto sacar una última versión antes de la
        fecha límite: esa versión fue FreeBSD 1.1.5.1.</p><p>FreeBSD tuvo entonces que acometer la ardua tarea de
        (literalmente) reinventarse a sí mismo a partir de partes
        nuevas y bastante incompletas de 4.4BSD-Lite.  Las versiones
        <span class="quote">&#8220;<span class="quote">Lite</span>&#8221;</span> eran ligeras en parte porque el CSRG de
        Berkeley quitó grandes partes del código necesario para
        construir un sistema que pudiera arrancar (debido a diversos
        requisitos legales) y porque la versión del 4.4 para Intel era
        muy incompleta.  Hasta noviembre de 1994 el proyecto al fin
        realizó esa transición; apareció FreeBSD 2.0 en
        la red y (a finales de diciembre) en CDROM.  A pesar de no estar
        suficientemente pulida esta distribución fue un éxito
        significativo, al cual siguió el más robusto y
	fácil de instalar FreeBSD 2.0.5; era junio de 1995.</p><p>Sacamos FreeBSD 2.1.5 en Agosto de 1996; pareció ser
        suficientemente popular entre ISPs y otras comunidades
        comerciales como para que mereciera otra versión de la rama
        2.1-STABLE.  Fue FreeBSD 2.1.7.1, publicada en febrero de
        1997, que marcó el final de la línea principal de
	desarrollo en 2-1.STABLE.  Una vez en puesta en mantenimiento, en esa
        rama (RELENG_2_1_0) sólo se harían ya mejoras en
	seguridad y se corregirían errores críticos.</p><p>FreeBSD se ramificó desde la línea principal de
        desarrollo (<span class="quote">&#8220;<span class="quote">-CURRENT</span>&#8221;</span>) en noviembre de 1996 como la
        rama RELENG_2_2, y la primera versión completa (2.2.1)
	salió en abril de 1997.  Se hicieron más versiones de
        la rama 2.2 en verano y otoño de 1997, la última de
        las cuales (2.2.8) apareció en noviembre de 1998.  La
        primera versión 3.0 oficial salió en octubre de
        1998 y marcó el inicio del fin de la rama 2.2.</p><p>El árbol se ramificó de nuevo el 20 de Enero de 1999,
        dando lugar a las ramas 4.0-CURRENT y 3.X-STABLE.  A partir de
	la 3.X-STABLE salió 3.1 el 15 de febrero de 1999, 3.2 el
        15 de mayo de 1999, 3.3 el 16 de septiembre de 1999, 3.4 el
        20 de diciembre de 1999 y 3.5 el 24 de junio de 2000.  Pocos dias
	después de esta apareció una actualización
	menor, la 3.5.1, que incorporaba parches de seguridad de
        última hora para Kerberos.  Esa fue la última
        versión de la rama 3.X.</p><p>Hubo otra ramificación el 13 de Marzo de 2000 que
        dio lugar a la rama 4.X-STABLE.  Ha habido varias versiones de la
        misma desde entonces: 4.0-RELEASE salió en marzo de 2000 y la
        última versión de la rama, 4.11-RELEASE, apareció
	en enero de 2005.</p><p>La largamente esperada 5.0-RELEASE se anunció el 19
        de enero de 2003, culminando casi tres años de
        trabajo; esta versión situó a FreeBSD en el escenario
        del multiproceso avanzado y el soporte de hilos para
        las aplicaciones, e introdujo soporte para las plataformas
        <span class="trademark">UltraSPARC</span>® y <code class="literal">ia64</code>.  Siguió a esta la
        versión 5.1 lanzada en Junio de 2003.  La última
        versión de 5.X como la rama -CURRENT fué
        5.2.1-RELEASE, que salió en febrero de 2004.</p><p>La rama RELENG_5, creada en agosto de 2004, desembocó en
        5.3-RELEASE, que marcó el inicio de la rama de versiones
	5-STABLE.  La versión 5.5-RELEASE más reciente
	apareció en mayo de 2006.  No aparecerán más
	versiones a partir de la rama RELENG_5.</p><p>
        El árbol se dividió de nuevo en julio de 2005, en
	esta ocasión para crear RELENG_6.  6.0-RELEASE, la primera
	versión de la rama 6.X, apareció en noviembre de
	2005.  9.3-RELEASE apareció en
	July 2014.  Irán apareciendo más
	versiones a partir de la rama RELENG_6.</p><p>La rama RELENG_7</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="goals"></a>1.3.2. Objetivos del Proyecto FreeBSD</h3></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jordan</span> <span class="surname">Hubbard</span></span>. </span></div></div></div><a id="idp62696912" class="indexterm"></a><p>Los objetivos del Proyecto FreeBSD son producir software que
        pueda usarse con cualquier propósito y sin ningún tipo
	de restricción.  Muchos de nosotros participamos de forma
	significativa en el código (y en el proyecto) y ciertamente
        no nos importaría recibir una pequeña compensación
        económica de vez en cuando, pero no vamos a insistir en
        ello.  Creemos que nuestra <span class="quote">&#8220;<span class="quote">misión</span>&#8221;</span> más
	importante y primordial es facilitar el acceso al código a
	cualquiera, para lo que quiera usarlo y de forma que se use tanto
	y para sacarle tanto provecho para sea posible.  Creo que
        éste es uno de los objetivos más fundamentales del
        software libre y algo que nosotros apoyamos con
        entusiasmo.</p><a id="idp62709968" class="indexterm"></a><a id="idp62712144" class="indexterm"></a><a id="idp62713680" class="indexterm"></a><p>El código fuente de nuestro árbol que se halla bajo
        la GNU General Public License (GPL) o la Library General Public License
        (LGPL) viene con algunas restricciones más, si bien para
        garantizar acceso al mismo, y no al contrario como es lo habitual.
        Debido a las complicaciones adicionales que pueden surgir en el
        uso comercial de software con licencia GPL preferimos que el
        software que incluyamos en el árbol venga bajo la licencia BSD,
        menos restrictiva, siempre y cuando sea una opción
	razonable.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="development"></a>1.3.3. El modelo de desarrollo de FreeBSD</h3></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Satoshi</span> <span class="surname">Asami</span></span>. </span></div></div></div><a id="idp62721616" class="indexterm"></a><p>El desarrollo de FreeBSD es un proceso muy abierto y
        flexible: FreeBSD está literalmente compuesto de partes hechas
        por centenares de personas de todo el mundo,
        como puede verse en <a class="link" href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/contributors/article.html" target="_top">este texto</a>.
	la infraestructura de desarrollo del proyecto FreeBSD permite a estos
	cientos de desarrolladores trabajar a través de Internet.
	Estamos buscando constantemente de nuevos desarrolladores e ideas.
	Las personas interesadas en vincularse más al
        proyecto tienen que ponerse en contacto con nosotros
	en la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">lista de correo de discusiones técnicas en FreeBSD</a>.  La <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">lista de anuncios importantes del Proyecto FreeBSD</a> está a
	disposición de quienes deseen dar a conocer a otros usuarios de
	FreeBSD grandes áreas de trabajo.</p><p>Veamos unas cuantas cosas útiles sobre el Proyecto FreeBSD y su
        proceso de desarrollo, ya sea trabajando de forma independiente o en
        estrecha cooperación:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Los repositorios SVN y CVS<a id="development-cvs-repository"></a></span></dt><dd><a id="idp62733520" class="indexterm"></a><a id="idp62736208" class="indexterm"></a><a id="idp62747472" class="indexterm"></a><a id="idp62750288" class="indexterm"></a><p>El árbol central de código de FreeBSD se ha
	      mantenido mediante <a class="link" href="http://ximbiot.com/cvs/wiki/" target="_top">CVS</a>
	      (Concurrent Versions System, o sistema concurrente de versiones),
	      una herramienta de control de código totalmente libre que
	      forma parte de FreeBSD.  En junio de 2008 el Proyecto
	      adoptó <a class="link" href="http://subversion.tigris.org" target="_top">SVN</a> (Subversion).
	      La necesidad de un cambio como este venía de largo a medida
	      que las limitaciones técnicas que el uso de
	      <span class="application">CVS</span> imponía se iban haciendo
	      más y más obvias con la rápida expansión
	      del árbol de código y de la cantidad de historial de
	      cambios que hay que almacenar y gestionar. Aunque el repositorio
	      principal use
	      <span class="application">SVN</span> las aplicaciones del lado del cliente
	      como <span class="application">CVSup</span> y
	      <span class="application">csup</span>, que dependen de la infraestructura
	      anterior basada en <span class="application">CVS</span>, siguen funcionando
	      normalmente; los cambios que se hacen en el repositorio
	      <span class="application">SVN</span> se van replicando en el repositorio
	      <span class="application">CVS</span> con este fin.  Actualmente (octubre
	      2008) solamente el árbol central de código usa
	      <span class="application">SVN</span>.  Los repositorios de
	      documentación, WWW y Ports siguen usando
	      still using <span class="application">CVS</span>.  El
	      <a class="link" href="http://www.FreeBSD.org/cgi/cvsweb.cgi" target="_top">repositorio</a>
	      primario está alojado en una máquina en Santa Clara
	      (California, EEUU), que constituye el original del que todas las
	      réplicas (a las que llamamos a veces <span class="quote">&#8220;<span class="quote">mirrors</span>&#8221;</span>)
	      son copias exactas actualizadas cada muy poco tiempo.  El
	      árbol <span class="application">SVN</span>, que contiene
	      también los árboles <a class="link" href="#current" title="23.2.1. Current">-CURRENT</a>
	      y <a class="link" href="#stable" title="23.2.2. Stable">-STABLE</a>, puede replicarse
	      muy fácilmente en local en su máquina.
	      Consulte la sección <a class="link" href="#synching" title="23.3. Sincronización de su código fuente">Sincronización
	      del árbol de código</a> para más
	      información.</p></dd><dt><span class="term">La lista de committers<a id="development-committers"></a></span></dt><dd><a id="idp62794960" class="indexterm"></a><p>Los <em class="firstterm">committers</em> son la gente que
              tienen permisos de <span class="emphasis"><em>escritura</em></span> en el
              los fuentes de FreeBSD (el término
              <span class="quote">&#8220;<span class="quote">committer</span>&#8221;</span> viene de la orden
              <code class="command">commit</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a>, que sirve para
              hacer cambios en el repositorio CVS).  La mejor
              manera de enviar aportaciones para que sean revisadas por
              los committers es usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>.  Si le parece que
              si pareciera que algo va mal en el sistema también puede
              enviar correo electrónico a la lista de correo para 'committers' de FreeBSD.</p></dd><dt><span class="term">El Core Team de FreeBSD<a id="development-core"></a></span></dt><dd><a id="idp62811088" class="indexterm"></a><p>El <em class="firstterm">Core Team de FreeBSD</em> sería
              el equivalente a una junta directiva si el Proyecto
              FreeBSD fuese una compañía.  La tarea principal del
	      Core Team es la de garantizar que el Proyecto como un todo
	      tenga salud y se mueva en las direcciones adecuadas.  Otra de
	      sus funciones es invitar a desarrolladores comprometidos y
	      responsables a que se unan a nuestro equipo, además
	      de reclutar nuevos miembros del Core Team cuando alguno se
	      va.  El Core Team actual fue elegido entre un conjunto de
	      candidatos committers en julio de 2008.  Se celebran elecciones
	      cada dos años.</p><p>Algunos miembros del Core Team tienen también
	      áreas específicas de responsabilidad, pues se
	      encargan de garantizar que grandes secciones del sistema
	      funcionen según lo previsto.  Hay una lista completa
	      de desarrolladores de FreeBSD con sus áreas de
	      responsabilidad en la  <a class="link" href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/contributors/article.html" target="_top">lista de colaboradores</a>. .</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La mayoría de los miembros del Core Team
                trabaja de forma altruísta en el desarrollo de FreeBSD y no
                reciben beneficio económico del Proyecto; es por esto que
                <span class="quote">&#8220;<span class="quote">compromiso</span>&#8221;</span> no debe confundirse con
                <span class="quote">&#8220;<span class="quote">soporte garantizado</span>&#8221;</span>.  La anterior
                analogía de la <span class="quote">&#8220;<span class="quote">junta directiva</span>&#8221;</span> en
                realidad no es del todo exacta; quizá fuera más
		acertado decir que esa es la gente que dedica su vida
		a FreeBSD <span class="emphasis"><em>en contra de lo que les aconseja su propio
                sentido común</em></span>.</p></div></dd><dt><span class="term">Contribuidores externos</span></dt><dd><a id="idp62833360" class="indexterm"></a><p>Por último, y no por ello menos importante, el mayor
              grupo de desarrolladores está formado por los mismos
              usuarios, quienes constantemente nos aportan comentarios y
              corrección de errores.  La mejor manera de seguir de
              cerca el desarrollo (al estilo descentralizado de FreeBSD) es suscribirse
              a la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">lista de correo de discusiones técnicas en FreeBSD</a>, que es donde se habla de este tipo de cosas.
              Consulte el <a class="xref" href="#eresources" title="Apéndice A. Recursos en Internet">Apéndice A, <em>Recursos en Internet</em></a> si necesita más
              información sobre las diferentes listas de correo de
	      FreeBSD.</p><p><em class="citetitle">La lista de colaboradores</em> es larga
	      y no para de crecer. ?Por qué no
              apuntarse y hacer algo en FreeBSD hoy mismo?</p><p>Aportar código no es la única manera de
	      ayudar al proyecto; hay una lista completa de tareas
	      pendientes en el
	      <a class="link" href="http://www.freebsd.org/index.html" target="_top">sitio web del Proyecto FreeBSD</a>.</p></dd></dl></div><p>En resumen, nuestro modelo de desarrollo está organizado
        como un conjunto de círculos concéntricos.  El modelo
        centralizado está diseñado pensando el la comodidad
        de los <span class="quote">&#8220;<span class="quote">usuarios</span>&#8221;</span> de FreeBSD, que así tienen un modo
        sencillo de estar al dia con una base de código
        central y por supuesto <span class="emphasis"><em>no para excluir a quien quiera
	ayudar</em></span>.  Nuestro afán es ofrecer un sistema
        operativo estable con un gran conjunto de
        <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">aplicaciones</a> coherentes que los
        usuarios puedan instalar y usar fácilmente (y este modelo
        está dando buenos resultados)</p><p>Lo único que pedimos a quienes quieran unirse a nosotros
        como desarrolladores de FreeBSD es la misma dedicación que los
        integrantes actuales tienen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="relnotes"></a>1.3.4. En qué consiste el FreeBSD que distribuimos</h3></div></div></div><a id="idp62849744" class="indexterm"></a><a id="idp62850896" class="indexterm"></a><a id="idp62852432" class="indexterm"></a><a id="idp62853456" class="indexterm"></a><a id="idp62854992" class="indexterm"></a><a id="idp62856144" class="indexterm"></a><p>FreeBSD es un sistema operativo libre y gratuito que se distribuye
        con el código fuente íntegro. Está basado en
	4.4BSD-Lite y está diseñado para funcionar en sistemas
	Intel <span class="trademark">i386</span>&#8482;, <span class="trademark">i486</span>&#8482;, <span class="trademark">Pentium</span>®, <span class="trademark">Pentium</span>® Pro, <span class="trademark">Celeron</span>®,
        <span class="trademark">Pentium</span>® II, <span class="trademark">Pentium</span>® III, <span class="trademark">Pentium</span>® III,
        <span class="trademark">Pentium</span>®4 (o compatible), <span class="trademark">Xeon</span>&#8482;, DEC
        <span class="trademark">Alpha</span>&#8482; y sistemas basados en SUN
        <span class="trademark">UltraSPARC</span>®.  Está basado principalmente en software
        del grupo CSRG de la Universidad de Berkeley (California),
	y tiene mejoras importadas de NetBSD, OpenBSD, 386BSD y
        código creado al amparo de la Free Software
        Foundation.</p><p>Desde la versión 2.0 de FreeBSD de finales del 94 el
        rendimiento, conjunto de funcionalidades, y estabilidad del
        sistema han mejorado drásticamente.
        
        El último cambio consiste
        en un rediseño del sistema de memoria virtual con una
	caché
        unificada de VM/buffer que no solo aumenta el rendimiento sino
        que reduce el consumo de memoria de FreeBSD, haciendo
        que una configuración de 5 MB sea un mínimo más
	aceptable.  Otras mejoras incluyen soporte completo para clientes y
	servidores NIS, soporte para transacciones TCP, llamada bajo demanda
	PPP, soporte para DHCP integrado, un subsistema SCSI mejorado,
        soporte para RDSI (ISDN), soporte para ATM, FDDI, adaptadores Fast y
        Gigabit Ethernet (1000 Mbit), soporte mejorado para los últimos
        controladores Adaptec y cientos de correcciones de
        errores.</p><p>Además de la distribución base FreeBSD ofrece una
        colección de software con miles de programas de uso común.
        <span class="emphasis"><em>En el momento de escribir esto hay unos
        24,000 <span class="quote">&#8220;<span class="quote">Ports</span>&#8221;</span></em></span>  La lista de Ports comprende
        desde servidores HTTP (WWW), juegos, lenguajes de programación,
	editores, y prácticamente cualquier cosa.  La colección de
        Ports completa requiere un espacio de aproximadamente 500 MB, todos
        ellos expresados como <span class="quote">&#8220;<span class="quote">deltas</span>&#8221;</span> de sus fuentes
        originales.  Esto hace que nos sea mucho más fácil
        actualizar Ports y reduce notablemente el espacio en disco que
        necesitaba la anterior Colección de Ports 1.0.  Para compilar un
        port uno simplemente se sitúa bajo el directorio del programa
        que desea instalar, escribe <code class="command">make install</code> y
        deja que el sistema se encargue del resto.  La distribución
        original completa de cada port que compile se descargará
        dinámicamente de un CDROM o un sitio FTP, de modo que sólo
        necesita el espacio necesario para compilar los ports que
        quiera.  La mayoría de los ports también
	están precompilados como <span class="quote">&#8220;<span class="quote">packages</span>&#8221;</span>, que
        quienes no quieran compilar Ports pueden instalar con una simple orden:
	<code class="command">pkg_add</code>.  En el <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a> tiene más información sobre los
	<span class="quote">&#8220;<span class="quote">packages</span>&#8221;</span> y Ports.</p><p>Algunos documentos que pueden ser de ayuda en el proceso de
        instalación y al utilizar FreeBSD pueden también
	encontrarse  el directorio <code class="filename">/usr/share/doc</code> de cualquier
        máquina con una versión reciente de FreeBSD encontrará
	varios documentos que pueden serle de ayuda en el proceso de
	instalación o al usar FreeBSD.  Para poder consultarlos utilice
	cualquier navegador para seguir estos enlaces:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">El <span class="emphasis"><em>Handbook</em></span> de FreeBSD</span></dt><dd><p><a class="link" href="file://localhost/usr/share/doc/handbook/index.html" target="_top">/usr/share/doc/handbook/index.html</a></p></dd><dt><span class="term">Las FAQ de FreeBSD</span></dt><dd><p><a class="link" href="file://localhost/usr/share/doc/faq/index.html" target="_top">/usr/share/doc/faq/index.html</a></p></dd></dl></div><p>También puede ver la copia original (y más
        frecuentemente
        actualizada) en <a class="link" href="http://www.FreeBSD.org/" target="_top">http://www.FreeBSD.org/</a>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install"></a>Capítulo 2. Instalación de FreeBSD</h2></div><div><span class="authorgroup">Reestructurado, reorganizado y con
	  algunas partes reescritas por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">El recorrido por sysinstall, las capturas de
	  pantalla y el texto original son obra de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Randy</span> <span class="surname">Pratt</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#install-synopsis">2.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#install-hardware">2.2. Requisitos de hardware</a></span></dt><dt><span class="sect1"><a href="#install-pre">2.3. Tareas anteriores a la instalación</a></span></dt><dt><span class="sect1"><a href="#install-start">2.4. Inicio de la instalación</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">2.5. ?Qué es sysinstall?</a></span></dt><dt><span class="sect1"><a href="#install-steps">2.6. Asignación de espacio en disco</a></span></dt><dt><span class="sect1"><a href="#install-choosing">2.7. Elección de qué instalar</a></span></dt><dt><span class="sect1"><a href="#install-media">2.8. Elección del medio de instalación</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">2.9. El punto sin retorno</a></span></dt><dt><span class="sect1"><a href="#install-post">2.10. Después de la instalación</a></span></dt><dt><span class="sect1"><a href="#install-trouble">2.11. Solución de problemas</a></span></dt><dt><span class="sect1"><a href="#install-advanced">2.12. Guía avanzada de instalación</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">2.13. Cómo preparar su propio medio de instalación</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-synopsis"></a>2.1. Sinopsis</h2></div></div></div><a id="idp62925648" class="indexterm"></a><p>FreeBSD dispone de un programa en modo texto muy fácil de
      usar llamado <span class="application">sysinstall</span>.  Es el programa
      de instalación por omisión en FreeBSD, pero quien decida
      distribuir FreeBSD tiene todo el derecho de facilitar un sistema de
      instalación propio si así lo desea.  Este capítulo
      trata sobre cómo usar <span class="application">sysinstall</span>
      para instalar FreeBSD</p><p>Tras leer este capítulo sabrá usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cómo crear los discos de instalación de
          FreeBSD</p></li><li class="listitem"><p>Cómo interpreta (y subdivide) FreeBSD sus discos
          duros.</p></li><li class="listitem"><p>Cómo arrancar <span class="application">
          sysinstall</span>.</p></li><li class="listitem"><p>Qué preguntas le hará <span class="application">
          sysinstall</span>, qué significan y cómo
          responderlas.</p></li></ul></div><p>Antes de leer este capítulo debería usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Leer la lista de hardware soportado que se suministra con la
	  con la versión de FreeBSD que va a instalar y verificar que su
	  hardware está en dicha lista.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En general éstas instrucciones de instalación
        han sido escritas para computadoras de arquitectura <span class="trademark">i386</span>&#8482;
	(«PC compatible»).  En algunos puntos concretos
	se darán instrucciones específicas para otras
	plataformas (por ejemplo Alpha).  A pesar de que esta guía
	se intenta mantener todo lo al día que es posible
	puede que se encuentre con pequeñas diferencias entre el
	programa de instalación y lo que aquí se le
	muestra.  Le sugerimos que use este capítulo como una
	guía general más que como un manual literal de
	instalación.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-hardware"></a>2.2. Requisitos de hardware</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-hardware-minimal"></a>2.2.1. Configuración mínima</h3></div></div></div><p>La configuración mínima para instalar FreeBSD
        varía según la versión de FreeBSD y la arquitectura
	de hardware.</p><p>Tiene información sobre la confuración
        mínima en las Notas de Instalación que encontrará
	en la sección de <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Información de
	Releases</a> del sitio web de FreeBSD.  En la siguiente
	sección se facilita un resumen de dicha información.
	Dependiendo de cuál sea el método de instalación
	que elija para instalar FreeBSD necesitará un floppy, un lector de
	CDROM que pueda utilizar con FreeBSD o quizás un adaptador de
	red.  Todo esto se explica en la <a class="xref" href="#install-floppies" title="2.3.7. Preparación del medio de arranque">Sección 2.3.7, &#8220;Preparación del medio de arranque&#8221;</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp62970960"></a>2.2.1.1. FreeBSD/i386 y FreeBSD/pc98</h4></div></div></div><p>Tanto FreeBSD/i386 como FreeBSD/pc98 necesitan
	  un procesador 486 o superior y un mínimo de
	  24 MB de RAM.  Necesitará también al menos
	  150 MB de espacio libre en disco, que es lo que necesita
	  la instalación mínima.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En sistemas muy antiguos la mayoría de las veces
	    será de mucha más ayuda conseguir más
	    RAM y espacio de disco que un procesador más
	    rápido.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp62975312"></a>2.2.1.2. FreeBSD/alpha</h4></div></div></div><a id="idp62977104" class="indexterm"></a><p>Para instalar FreeBSD/alpha necesitará una
	  plataforma que esté soportada
	  (consulte <a class="xref" href="#install-hardware-supported" title="2.2.2. Hardware soportado">Sección 2.2.2, &#8220;Hardware soportado&#8221;</a>) y un
	  disco duro dedicado a FreeBSD.  En este momento no es posible
	  compartir un disco con otro sistema operativo.  Este disco
	  debe estar necesariamente conectado a una controladora SCSI
	  que esté soportada por el firmware SRM, o si se trata
	  de un disco IDE el SRM de su máquina debe permitir el
	  arranque desde discos IDE.</p><a id="idp62980432" class="indexterm"></a><a id="idp62981584" class="indexterm"></a><a id="idp62982992" class="indexterm"></a><p>Necesitará el firmware de la consola SRM de
	  su plataforma.  En ciertos casos es posible pasar del
	  firmware AlphaBIOS (o ARC) al SRM.  En otros casos
	  no habrá más remedio que descargar un nuevo
	  firmware desde el sito web del fabricante.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A partir de FreeBSD 7.0 no hay soporte para
	    Alpha.  La serie FreeBSD 6.<em class="replaceable"><code>X</code></em>
	    es la última que ofrece soporte para esta
	    arquitectura.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp62987984"></a>2.2.1.3. FreeBSD/amd64</h4></div></div></div><p>Hay dos tipos de procesadores capaces de ejecutar
	  FreeBSD/amd64.  La primera son los procesadores AMD64,
	  entre los que están los <span class="trademark">AMD Athlon</span>&#8482;64,
	  <span class="trademark">AMD Athlon</span>&#8482;64-FX, <span class="trademark">AMD Opteron</span>&#8482; y los modelos
	  superiores.</p><p>La segunda categoría de procesadores que
	  pueden usar FreeBSD/amd64 es la de los procesadores
	  de arquitectura EM64T de <span class="trademark">Intel</span>®, por ejemplo las familias
	  de procesadores <span class="trademark">Intel</span>® <span class="trademark">Core</span>&#8482; 2 Duo, Quad, y Extreme,
	  y la secuencia de procesadores <span class="trademark">Intel</span>® <span class="trademark">Xeon</span>&#8482; 3000, 5000 y
	  7000.</p><p>Si tiene una máquina basada en una nVidia nForce3
	  Pro-150 <span class="emphasis"><em>tendrá que usar la configuración
	  de la BIOS</em></span> para deshabilitar IO ACPI.  Si no tiene la
	  opción de hacerlo tendrá que deshabilitar ACPI.  Hay
	  errores en el chipset Pro-150 para los que no hemos encontrado
	  aún una solución.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63001296"></a>2.2.1.4. FreeBSD/sparc64</h4></div></div></div><p>Para instalar FreeBSD/sparc64 necesita una plataforma que
	  esté soportada (consulte la <a class="xref" href="#install-hardware-supported" title="2.2.2. Hardware soportado">Sección 2.2.2, &#8220;Hardware soportado&#8221;</a>).</p><p>Necesitará un disco dedicado a FreeBSD/sparc64.  De
	  momento es imposible compartir un disco duro con otro sistema
	  operativo.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-hardware-supported"></a>2.2.2. Hardware soportado</h3></div></div></div><p>Cada versión de FreeBSD incluye una lista de hardware
        soportado en las «FreeBSD Hardware Notes».  Este
	documento suele estar en un fichero llamado
	<code class="filename">HARDWARE.TXT</code>, que está en el
	directorio raiz del CDROM o distribución FTP, o en el
	menú de documentación de
	<span class="application">sysinstall</span>.  En este documento se
	listan los dispositivos de hardware que se sabe que funcionan
	con cada versión de FreeBSD y para qué
	arquitectura.  En la página de <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Información
	de Releases</a> del sitio web de FreeBSD encontrará
	copias de esta lista para diversas releases y arquitecturas.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-pre"></a>2.3. Tareas anteriores a la instalación</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-inventory"></a>2.3.1. Inventario de su sistema</h3></div></div></div><p>Antes de instalar FreeBSD en su sistema debería hacer
	un inventario de los componentes de su computadora.  El sistema
	de instalación de FreeBSD le mostrará los componentes
	(discos duros, tarjetas de red, unidades de CDROM, etc.) con sus
	datos de modelo y fabricante.  FreeBSD tratará también
	de determinar la configuración correcta para dichos
	dispositivos, lo que incluye información sobre las IRQ y
	el uso de puertos IO.  A causa de la ingente variedad de hardware
	para PC este proceso no siempre se puede culminar con éxito
	y es posible que deba corregir las decisiones de FreeBSD retocando
	la configuración.</p><p>Si ya dispone de otro sistema operativo instalado (como
	<span class="trademark">Windows</span>® o Linux) puede usar los recursos que dicho o dichos
	sistemas operativos le faciliten para determinar exactamente
	qué hardware tiene y cómo está configurado.
	Si tiene del todo claro qué configuración está
	usando una tarjeta de expasión concreta es posible que
	pueda encontrar esos datos impresos en la propia tarjeta.  Es muy
	habitual el uso de las IRQ 3, 5 y 7 y las direcciones de los
	puertos IO suelen representarse con números hexadecimales,
	como 0x330.</p><p>Le recomendamos imprimir o tomar nota de todos esos datos
	antes de instalar FreeBSD.  Una tabla como esta puede serle de mucha
	ayuda:</p><div class="table"><a id="idp65424208"></a><div class="table-title">Tabla 2.1. Ejemplo de inventario de dispositivos</div><div class="table-contents"><table summary="Ejemplo de inventario de dispositivos" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nombre de dispositivo</th><th>IRQ</th><th>Puerto(s) IO</th><th>Notas</th></tr></thead><tbody><tr><td>Primer disco duro</td><td>N/A</td><td>N/A</td><td>40 GB, fabricado por Seagate, primer maestro IDE </td></tr><tr><td>CDROM</td><td>N/A</td><td>N/A</td><td>Primer esclavo IDE</td></tr><tr><td>Segundo disco duro</td><td>N/A</td><td>N/A</td><td>20 GB, fabricado por IBM, segundo maestro IDE</td></tr><tr><td>Primera controladora IDE</td><td>14</td><td>0x1f0</td><td> </td></tr><tr><td>Tarjeta de red</td><td>N/A</td><td>N/A</td><td><span class="trademark">Intel</span>® 10/100</td></tr><tr><td>Módem</td><td>N/A</td><td>N/A</td><td><span class="trademark">3Com</span>® 56K faxmodem, en COM1</td></tr><tr><td>&#8230;</td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></tbody></table></div></div><br class="table-break" /><p>Una vez termine el inventorio de componentes de su sistema
        debe comprobar si aparecen en la lista de hardware soportado de
	la versión de FreeBSD que vaya a instalar.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65447760"></a>2.3.2. Haga una copia de seguridad de sus datos</h3></div></div></div><p>Si la máquina en la que va a instalar FreeBSD contiene
	datos que desea conservar por algún motivo
	asegúrese de haber hecho una copia de seguridad de los
	mismos y de que esa copia es de fiar antes de instalar FreeBSD.
	El sistema de instalación de FreeBSD le mostrará una
	advertencia antes de modificar datos en su disco pero una vez
	que el proceso ha comenzado no hay manera de dar marcha
	atrás.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-where"></a>2.3.3. Decida dónde instalar FreeBSD</h3></div></div></div><p>Si quiere que FreeBSD use todo su disco duro puede saltar
	tranquilamente a la siguiente sección.</p><p>Si por el contrario necesita que FreeBSD coexista con otros
	sistemas operativos tendrá que comprender cómo
	se almacenan los datos en el disco duro y cómo le afecta
	esto.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-where-i386"></a>2.3.3.1. Esquemas de disco en FreeBSD/<span class="trademark">i386</span>&#8482;</h4></div></div></div><p>Un disco de PC puede dividirse en varias partes.  Estas partes
        reciben el nombre de <em class="firstterm">partitions</em>.  Dado
	que FreeBSD internamente también tiene particiones la
	nomenclatura puede ser confusa muy rápidamente, así
	que estas partes del disco reciben el nombre de «disk
	slices» o sencillamente «slices»
	(«rebanadas de disco»y «rebanadas»
	respectivamente).  Por ejemplo, la versión de
	<code class="command">fdisk</code> que usará FreeBSD con las particiones
	de disco de PC usa la palabra «slices» en lugar de
	«partitions».  Debido a limitaciones de diseño
	la plataforma PC sólo admite cuatro particiones por disco.  Dichas
	particiones reciben el nombre de <em class="firstterm">particiones
	primarias</em>.  Esta limitación puede sortearse
	(y de ese modo disponer de más de cuatro particiones)
	gracias a que se creó un nuevo tipo de partición,
	las <em class="firstterm">particiones extendidas</em>.  Un disco puede
	contener una única partición extendida.  Dentro de ella
	pueden crearse particiones especiales, que reciben el nombre de
	<em class="firstterm">particiones lógicas</em>.</p><p>Cada partición tiene un <em class="firstterm">identificador de
	partición</em> (o  <em class="firstterm">partition ID</em>),
	que es un número que se usa para identificar el tipo de datos que
	alberga la partición.  Las particiones FreeBSD tienen como
	identificador de partición <code class="literal">165</code>.</p><p>Normalmente cada sistema operativo que vaya a utilizar
	identificará las particiones de un modo propio.  Por ejemplo
	DOS (y sus descendientes,  como <span class="trademark">Windows</span>®) asignan a cada
	partición primaria y lógica una
	<em class="firstterm">letra de unidad</em> a partir de
	<code class="filename">C:</code>.</p><p>FreeBSD debe instalarse en una partición primaria.  FreeBSD
	puede albergar todos los datos que necesita, incluyendo cualquier
	fichero que pueda usted crear, en esta partición.  Si tiene
	usted varios discos duros puede crear particiones para que FreeBSD las
	use en todos ellos o en algunos nada más.  Al instalar FreeBSD
	debe usar al menos una partición.  Puede usar una
	partición vacía que haya preparado o puede usar
	también una partición que contenga datos que no desea
	conservar.</p><p>Si está usando todas las particiones de todos sus discos
	tendrá que dejar libre una de ellas para FreeBSD usando las
	herramientas del otro sistema operativo que esté usando
	(por ejemplo <code class="command">fdisk</code> en DOS o en
	<span class="trademark">Windows</span>®).</p><p>Si tiene una partición sobrante puede usarla, pero puede
	verse en la necesidad de reducir una o más de las particiones
	que está usando.</p><p>Una instalación mínima de FreeBSD cabrí en
	sólo 100 MB de disco pero tenga en cuenta que apenas
	quedaría espacio para los ficheros que quiera crear.  Un
	mínimo más realista sería de 250 MB si no
	pretende usar entorno gráfico y 350 MB o más si
	quiere usar un interfaz gráfico de usuario.  Si quiere instalar
	gran cantidad de software para usarlo en FreeBSD sin duda
	necesitará más espacio.</p><p>Para ello puede usar herramientas comerciales como
        <span class="application"><span class="trademark">PartitionMagic</span>®</span> o libres como
	<span class="application">GParted</span> para redimensionar sus
	particiones y hacer sitio para FreeBSD.  El directorio
	<code class="filename">tools</code> directory del CDROM de instalación
	contiene dos herramientas libres con las que puede hacer hacer
	esta redimensión:
	<span class="application">FIPS</span> y
	<span class="application">PResizer</span>.  En el mismo directorio
	encontrará documentación de ambas.
	<span class="application">FIPS</span>,
	<span class="application">PResizer</span> y
	<span class="application"><span class="trademark">PartitionMagic</span>®</span> pueden redimensionar
	particiones <acronym class="acronym">FAT16</acronym> y <acronym class="acronym">FAT32</acronym>,
	que pueden encontrarse desde <span class="trademark">MS-DOS</span>® hasta <span class="trademark">Windows</span>® ME.  Tanto
	<span class="application"><span class="trademark">PartitionMagic</span>®</span> como
	<span class="application">GParted</span> funcionan también en
	particiones <acronym class="acronym">NTFS</acronym>.  <span class="application">GParted</span>
	forma parte de diversas distribuciones de «Live CD» de Linux,
	como <a class="link" href="http://www.sysresccd.org/" target="_top">SystemRescueCD</a>.</p><p>Hay informes de problemas redimensionando particiones de
        <span class="trademark">Microsoft</span>® Vista.  Le recomendamos tener a mano un disco de
	instalación de Vista cuando intente hacer esto.  Lo dicho
	para cualquier otra tarea de mantenimiento de discos es válido
	aquí: tenga una copia de seguridad <span class="emphasis"><em>fiable</em></span>
	y reciente a mano.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">El uso incorrecto de estas herramientas puede borrar datos
	  de su disco duro.  Recuerde, asegúrese de disponer de
	  copias de seguridad recientes y utilizables antes de
	  usarlas.</p></div><div class="example"><a id="idp65482192"></a><div class="example-title">Ejemplo 2.1. Uso de una partición sin cambiar nada</div><div class="example-contents"><p>Supongamos que tiene una máquina con un sólo
	  disco de 4 GB que ya tiene una versión de <span class="trademark">Windows</span>®
	  instalada y que ese disco está dividido en dos unidades,
	  <code class="filename">C:</code> y <code class="filename">D:</code>, cada
	  una de las cuales tiene un tamaño de  2 GB.  Tiene
	  1 GB de datos en <code class="filename">C:</code> y 0.5 GB de
	  datos en <code class="filename">D:</code>.</p><p>Esto significa que su disco duro tiene dos particiones, una
	  por cada letra de unidad.  Copie todos sus datos de
	  <code class="filename">D:</code> en <code class="filename">C:</code>; de
	  este modo vaciará la segunda partició y podrá
	  usarla con FreeBSD.</p></div></div><br class="example-break" /><div class="example"><a id="idp65486672"></a><div class="example-title">Ejemplo 2.2. Reducir una partición existente</div><div class="example-contents"><p>Suponga que tiene una máquina con un sólo disco
	  de 4 GB que contiene una versión de <span class="trademark">Windows</span>® instalada.
	  Cuando instaló <span class="trademark">Windows</span>® creó una gran
	  partición, lo que le dió como resultado una unidad
	  <code class="filename">C:</code> de 4 GB.  Está usando
	  1.5 GB de espacio y quiere que FreeBSD tenga  2 GB de
	  espacio.</p><p>Para poder instalar FreeBSD tendrá que realizar una de
	  las siguientes tareas:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Haga una copia de sus datos de <span class="trademark">Windows</span>® y después
	    reinstale <span class="trademark">Windows</span>®, eligiendo una partición de 2 GB
	    en el momento de la instalación.</p></li><li class="listitem"><p>Utilice alguna herramienta del estilo de
	      <span class="application"><span class="trademark">PartitionMagic</span>®</span> que se han
	      descrito antes para reducir el tamaño de su
	      partición de <span class="trademark">Windows</span>®.</p></li></ol></div></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65498064"></a>2.3.3.2. Estructura de discos en Alpha</h4></div></div></div><a id="idp65498704" class="indexterm"></a><p>Tendrá que dedicar un disco de su sistema
	  para usar FreeBSD puesto que de momento es imposible compartir
	  un disco con otro sistema operativo.  Dependiendo de la
	  la máquina Alpha que tenga el disco podrá ser
	  SCSI o IDE en la medida en que sea posible arrancar desde
	  tales discos.</p><p>Siguiendo las normas de los manuales de Digital / Compaq
	  todos los datos suministrados a SRM se muestran en
	  mayúsculas.  SRM no distingue entre mayúsculas y
	  minúsculas.</p><p>Use <code class="literal">SHOW DEVICE</code> en la consola de SRM
	  para saber qué tipo de discos hay en su sistema:</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>SHOW DEVICE</code></strong>
dka0.0.0.4.0               DKA0           TOSHIBA CD-ROM XM-57  3476
dkc0.0.0.1009.0            DKC0                       RZ1BB-BS  0658
dkc100.1.0.1009.0          DKC100             SEAGATE ST34501W  0015
dva0.0.0.0.1               DVA0
ewa0.0.0.3.0               EWA0              00-00-F8-75-6D-01
pkc0.7.0.1009.0            PKC0                  SCSI Bus ID 7  5.27
pqa0.0.0.4.0               PQA0                       PCI EIDE
pqb0.0.1.4.0               PQB0                       PCI EIDE</pre><p>Este ejemplo es de una Digital Personal Workstation
	  433au y muestra tres discos instalados en el sistema.
	  El primer disco es una unidad CDROM llamada
	  <code class="filename">DKA0</code> y los otros dos reciben los nombres
	  de <code class="filename">DKC0</code> y <code class="filename">DKC100</code>
	  respectivamente.</p><p>Los discos con nombres tipo  <code class="filename">DKx</code>
	  son discos SCSI.  Por ejemplo <code class="filename">DKA100</code>
	  se refiere a un disco SCSI con el «target ID 1» en
	  el primer bus SCSI (A), mientras que <code class="filename">DKC300</code>
	  es un disco SCSI con un ID 3 en el tercer bus SCSI (C).
	  Los nombres de dispositivo <code class="filename">PKx</code> son para
	  adaptadores de bus SCSI.  Como hemos visto en la salida de
	  <code class="literal">SHOW DEVICE</code> las unidades CDROM SCSI son
	  consideradas iguales a otros discos duros SCSI.</p><p>Los discos IDE tienen nombres similares a <code class="filename">
	  DQx</code>, mientras que <code class="filename">PQx</code> es la
	  controladora IDE asociada.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65539664"></a>2.3.4. Recopile los datos de la configuración
	de la red</h3></div></div></div><p>Si pretende conectarse a alguna red durante la instalación
	de FreeBSD (por ejemplo si pretende hacerlo desde un sitio FTP o mediante
	un servidor NFS) tendrá que conocer la configuración de
	su red.  Durante la instalación se le pedirán esos datos
	para que FreeBSD pueda conectarse a la red y realizar la
	instalación.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65549008"></a>2.3.4.1. Conexión a una red Ethernet o a un módem
	  Cable/DSL</h4></div></div></div><p>Necesitará la siguiente información si va a
	  conectarse a una red Ethernet o si tiene una conexión a
	  Internet a través de una adaptador Ethernet via cable o
	  DSL:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Dirección IP</p></li><li class="listitem"><p>Dirección IP de la pasarela («gateway»,
	      «puerta de enlace»)</p></li><li class="listitem"><p>Nombre del sistema («hostname»)</p></li><li class="listitem"><p>Dirección IP del servidor DNS</p></li><li class="listitem"><p>Máscara de subred</p></li></ol></div><p>Si no conoce estos datos póngase en contacto con su
	  administrador de sistemas o con su proveedor de servicios.  Es
	  que le digan que tal información se asigna
	  automáticamente mediante <em class="firstterm">DHCP</em>.
	  Si es así, anótelo.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65555152"></a>2.3.4.2. Conexión mediante módem</h4></div></div></div><p>Si usted se conecta con su ISP mediante un módem
	  tradicional sigue pudiendo instalar FreeBSD a través de
	  Internet; el problema es que tardará mucho más
	  que por otros medios.</p><p>Necesitará saber:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>El número de teléfono de su ISP a
	       través del que accederá a Internet</p></li><li class="listitem"><p>El COM: el puerto al que está conectado su
	      módem</p></li><li class="listitem"><p>Su nombre de usuario y su contraseña de acceso
	      a Internet</p></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65588432"></a>2.3.5. Consulte «FreeBSD Errata»</h3></div></div></div><p>A pesar de que el proyecto FreeBSD hace todo lo humanamente posible
	para asegurarse de que cada «release» de FreeBSD es todo
	lo estable posible a veces algún error logra entrar en
	escena.  En contadísimas ocasiones esos errores llegan a
	afectar al proceso de instalación.  Cuando esos errores son
	ubicados y corregidos aparecen  en lo que llamamos la
	<a class="link" href="http://www.FreeBSD.org/releases/10.1R/errata.html" target="_top">FreeBSD Errata</a>,
	que encontrará en el sitio web de FreeBSD.  Debería consultar
	este texto antes de la instalación para asegurarse de que
	no hay problemas de última hora de los que deba
	preocuparse.</p><p>Tiene información sobre las «releases»,
	incluyendo la «errata» de cada una de ellas, en la
	<a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">sección de
	información de «releases» </a> del
	<a class="link" href="http://www.FreeBSD.org/index.html" target="_top">sitio web de FreeBSD</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65591504"></a>2.3.6. Obtención de los ficheros de instalación de
	FreeBSD</h3></div></div></div><p>El proceso de instalación de FreeBSD permite instalar FreeBSD
	desde ficheros ubicados en cualquiera de los siguientes
	sitios:</p><div class="itemizedlist"><div class="itemizedlist-title">Medios locales</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un CDROM o DVD</p></li><li class="listitem"><p>Una partición DOS en la propia computadora</p></li><li class="listitem"><p>Una cinta SCSI o QIC</p></li><li class="listitem"><p>Discos floppy</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Red</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un sitio FTP, saliendo a través de un cortafuegos o
	    usando un proxy HTTP si fuera necesario</p></li><li class="listitem"><p>Un servidor NFS</p></li><li class="listitem"><p>Una conexión serie o a través de una cable
	    paralelo</p></li></ul></div><p>Si ha adquirido FreeBSD en CD o DVD ya tiene todo lo que
	necesitará, puede pasar a la siguiente sección:
	(<a class="xref" href="#install-floppies" title="2.3.7. Preparación del medio de arranque">Sección 2.3.7, &#8220;Preparación del medio de arranque&#8221;</a>).</p><p>Si no dispone de los ficheros de instalación de FreeBSD
	debería consultar la
	<a class="xref" href="#install-diff-media" title="2.13. Cómo preparar su propio medio de instalación">Sección 2.13, &#8220;Cómo preparar su propio medio de instalación&#8221;</a>, donde se explica cómo
	preparar la instalación de FreeBSD desde cualquiera de los
	medios listados anteriormente.  Tras leer esa sección puede
	volver aquí y leer la
	<a class="xref" href="#install-floppies" title="2.3.7. Preparación del medio de arranque">Sección 2.3.7, &#8220;Preparación del medio de arranque&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-floppies"></a>2.3.7. Preparación del medio de arranque</h3></div></div></div><p>El proceso de instalación de FreeBSD comienza por arrancar
	su sistema mediante el instalador de FreeBSD: no es un programa que
	pueda ejecutar desde otro sistema operativo.  Su sistema suele
	arrancar usando el sistema operativo que está instalado en
	su disco duro pero puede también ser configurado para que
	lo haga desde un floppy «arrancable».  Las computadoras
	más modernas pueden también arrancar desde un CDROM
	introducido en la unidad CDROM.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si tiene FreeBSD en CDROM o DVD (por haberlo comprado o haberlo
	  preparado por usted) y su sistema puede arracar desde
	  CDROM o DVD (suele ser una opción de BIOS llamada
	  «Boot Order» o algo similar) puede saltarse esta
	  sección.  Las imágenes de CDROM o DVD de FreeBSD
	  permiten arrancar desde ellas y pueden emplearse para instalar
	  FreeBSD sin ninguna preparación especial.</p></div><p>Siga estos pasos para crear las imágenes que le
	permitirán arrancar desde floppy:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Consiga las imágenes de arranque desde
	    floppy</strong></p><p>Los discos de arranque se encuentran en el directorio
	    <code class="filename">floppies/</code> del medio de instalación
	    o pueden descargarse desde el directorio correspondiente de
	    <code class="literal">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/&lt;arch&gt;/&lt;version&gt;-RELEASE/floppies/</code>.
	    Reemplace <em class="replaceable"><code>&lt;arch&gt;</code></em> y
	    <em class="replaceable"><code>&lt;version&gt;</code></em> con la
	    arquitectura y la versión de FreeBSD que quiera instalar.
	    Por ejemplo, las imágenes de arranque desde floppy para
	    FreeBSD 10.1-RELEASE para <span class="trademark">i386</span>&#8482; están en
	    from <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/floppies/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/floppies/</a></code>.</p><p>Las imágenes de floppy tienen la extensión
	    <code class="filename">.flp</code>.  El directorio
	    <code class="filename">floppies/</code> contiene diferentes imágenes
	    y las que usted necesitará dependerán de la
	    versión de FreeBSD que vaya a instalar y, en algunos casos,
	    del hardware en el que lo va a instalar.  En la mayoría de
	    de los casos solamente usará dos ficheros:
	    <code class="filename">kern.flp</code> y
	    <code class="filename">mfsroot.flp</code>.  La instalación en
	    algunos sistemas concretos requerirá controladores de
	    dispositivo adicionales, que se encuentran en la imagen
	    <code class="filename">drivers.flp</code>.  Consulte
	    <code class="filename">README.TXT</code> en el propio directorio,
	    ahí encontrará la información más
	    reciente sobre las imágenes.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">Su programa de FTP debe usar <span class="emphasis"><em>modo
	      binario</em></span> para descargar las imágenes.
	      Algunos navegadores web suelen usar el modo
	      <span class="emphasis"><em>texto</em></span> ( o <span class="emphasis"><em>ASCII</em></span>).
	      He aquí lo primero a comprobar si no puede arrancar desde
	      los disquetes que ha creado.</p></div></li><li class="step"><p class="title"><strong>Preparación de los discos floppy</strong></p><p>Tendrá que preperar un disquete por cada imagen que
	    descargue.  Es imprescindible que esos discos carezcan de
	    errores.  La forma más sencilla de asegurarlo es
	    formatearlos usted.  No confíe en disquetes
	    preformateados.  La herramienta de formateo de <span class="trademark">Windows</span>® no le
	    advertirá del hallazgo de bloques defectuosos,
	    si encuentra alguno sencillamente lo marcará como
	    «defectuoso» y lo ignorará.  Le recomendamos
	    que use disquetes nuevos si decide usar este procedimiento de
	    instalación.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si instenta instalar FreeBSD y el programa de
	      instalación falla, se queda congelado o sucede alguna
	      otra catástrofe uno de las primeras cosas de las que
	      sospechar son los disquetes.  Vuelque los ficheros
	      de imagen en discos nuevos e inténtelo de nuevo.</p></div></li><li class="step"><p class="title"><strong>Escriba los ficheros de imagen en discos floppy («
	    disquetes»)</strong></p><p>Los ficheros <code class="filename">.flp</code> <span class="emphasis"><em>
	    no</em></span> son ficheros normales que puedan copiarse
	    a disco.  Son imágenes del contenido completo de los
	    discos.  Esto significa que <span class="emphasis"><em>no puede</em></span>
	    simplemente copiar esos ficheros de un disco a otro.  Debe
	    usar herramientas especializadas para escribir esas
	    imágenes directamente al disco correspondiente.</p><a id="idp65637840" class="indexterm"></a><p>Si va a crear los disquetes de arranque en un sistema en
	    el que se está ejecutando <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>® utilice
	    la herramienta <code class="command">fdimage</code>.</p><p>Si las imágenes están en el CDROM y su
	    CDROM es la unidad <code class="filename">E:</code> ejecute lo
	    siguiente:</p><pre class="screen"><code class="prompt">E:\&gt;</code> <strong class="userinput"><code>tools\fdimage floppies\kern.flp A:</code></strong></pre><p>Repita el proceso con cada fichero <code class="filename">.flp</code>
	    reemplazando cada vez el disco y recuerde etiquetarlos
	    con el nombre del fichero que ha copiado en cada uno.  Modifique
	    la línea del comando donde sea necesario, adaptándola
	    al lugar donde tenga usted los ficheros <code class="filename">.flp</code>.
	    Puede descargar <code class="command">fdimage</code> desde el directorio <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/tools/" target="_top"><code class="filename">tools</code>
	   </a> del sitio FTP de FreeBSD.</p><p>Si va a crear los disquetes en un sistema <span class="trademark">UNIX</span>® (por ejemplo
	    otro sistema FreeBSD) puede utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> para volcar las
	    imágenes a los discos.  En FreeBSD puede ejecutar algo
	    como:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=kern.flp of=/dev/fd0</code></strong></pre><p>En FreeBSD <code class="filename">/dev/fd0</code> es la primera
	    unidad de disquetes (la unidad
	    <code class="filename">A:</code>).  <code class="filename">/dev/fd1</code>
	    sería la unidad <code class="filename">B:</code> y así
	    sucesivamente.  Otras versiones de <span class="trademark">UNIX</span>® pueden asignar
	    nombres diferentes a las unidades de disquetes; consulte la
	    documentación de su sistema.</p></li></ol></div><p>Ya podemos instalar instalar FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-start"></a>2.4. Inicio de la instalación</h2></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">La instalación no efectúa ningún
	cambio en su disco o discos duros hasta la aparición del
	siguiente mensaje:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="literallayout">Last Chance: Are you SURE you want continue the installation?

If you're running this on a disk with data you wish to save then WE
STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

We can take no responsibility for lost disk contents!</pre><p xmlns="http://www.w3.org/1999/xhtml">Es decir:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="literallayout">Última oportunidad: ?Seguro que quiere seguir adelante con la instalación?

¡Si está ejecutando este programa en un disco que contenga datos
que quiera conservar LE RECOMENDAMOS ENCARECIDAMENTE QUE HAGA
COPIAS DE SEGURIDAD FIABLES antes de proseguir!

¡No podemos responsabilizarnos de datos perdidos!</pre><p xmlns="http://www.w3.org/1999/xhtml">El proceso de instalación puede abandonarse en cualquier
	momento antes de la advertencia final sin efectuar cambios en el
	contenido del disco duro.  Si advierte que ha configurado algo
	de forma incorrecta basta con que apague su sistema y no
	estropeará nada.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-starting"></a>2.4.1. El arranque</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-starting-i386"></a>2.4.1.1. El arranque en <span class="trademark">i386</span>&#8482;</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Comience con su sistema apagado.</p></li><li class="step"><p>Arranque el sistema.  Durante el arranque deberí
	    mostrarse la opción para entrar en la BIOS, normalmente
	    mediante las teclas <span class="keycap"><strong>F2</strong></span>, <span class="keycap"><strong>F10</strong></span>,
	    <span class="keycap"><strong>Del</strong></span>, o
	    <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>S</strong></span>.  Utilice la tecla o combinación de las mismas
	    que se le indique en pantalla.  En algunos casos el sistema puede
	    mostrar un gráfico durante el arranque.  Pulsar
	    <span class="keycap"><strong>Esc</strong></span> suele disminuir en esos casos el
	    tamaño del gráfico y le permitirá ver
	    los mensajes del arranque.</p></li><li class="step"><p>Encuentre el parámetro que controla desde qué
	    dispositivos arranca el sistema.  Normalmente se llama
	    «Boot Order» y suele presentarse como una lista
	    de dispositivos, como <code class="literal">Floppy</code>,
	    <code class="literal">CDROM</code>, <code class="literal">First Hard Disk</code>,
	    etc.</p><p>Si necesita disquetes de arranque asegúrese de que
	    selecciona la unidad correspondiente.  Si va a arrancar desde
	    CDROM, seleccione la unidad CDROM.  En caso de duda consulte el
	    manual que venía con su computadora y/o el de su placa
	    base.</p><p>Haga los cambios necesarios, guarde los cambios y salga.
	    El sistema debería reiniciarse.</p></li><li class="step"><p>Si ha elegido arrancar desde disquete, tal y como se describe
	    en <a class="xref" href="#install-floppies" title="2.3.7. Preparación del medio de arranque">Sección 2.3.7, &#8220;Preparación del medio de arranque&#8221;</a>, uno de ellos será
	    el primer disco de arranque, probablemente el que contiene
	    <code class="filename">kern.flp</code>.  Introduzca ese disco en su
	    unidad de disquetes.</p><p>Si va a arrancar desde CDROM tendrá que arrancar el
	    sistema e introducir el CDROM en cuanto tenga
	    ocasión.</p><p>Si su sistema arranca normalmente y carga el sistema
	    operativo que ya está instalado puede ocurrir alguna
	    de estas cosas:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Los discos no se introdujeron lo suficientemente pronto
		en el proceso de arranque.  Déjelos insertados y
		reinicie su sistema.</p></li><li class="listitem"><p>Los cambios que hizo en la BIOS no han funcionado.
		Debería repetir los pasos previos hasta que dé
		con la opción correcta.</p></li><li class="listitem"><p>Su BIOS en concreto no admite el arranque el arranque
		desde el medio que ha elegido.</p></li></ol></div></li><li class="step"><p>FreeBSD comenzará a arrancar.  Si está arrancando
	    desde CDROM debería ver algo parecido a esto (se ha omitido
	    la información de número de versión):</p><pre class="screen">Verifying DMI Pool Data ........
Boot from ATAPI CD-ROM :
 1. FD 2.88MB  System Type-(00)
Uncompressing ... done

BTX loader 1.00 BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive B: is disk1
BIOS drive C: is disk2
BIOS drive D: is disk3
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 0.8

/kernel text=0x277391 data=0x3268c+0x332a8 |

|
Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</pre><p>Si arranca desde floppy verá algo parecido a esto
	    (se ha omitido la información de número de
	    versión):</p><pre class="screen">Verifying DMI Pool Data ........

BTX loader 1.00  BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive C: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 0.8

/kernel text=0x277391 data=0x3268c+0x332a8 |

Please insert MFS root floppy and press enter:</pre><p>Siga las instrucciones y extraiga el disco
	    <code class="filename">kern.flp</code> disc, inserte el disco
	    <code class="filename">mfsroot.flp</code> y pulse
	    <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Tanto si arranca desde disquete como CDROM el proceso
	    de arranque llegará a este punto:</p><pre class="screen">Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</pre><p>Dicho y hecho: espere diez segundos o pulse
	    <span class="keycap"><strong>Enter</strong></span>.  Esto lanzará el menú de
	    configuración del kernel.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65682000"></a>2.4.1.2. Arranque en Alpha</h4></div></div></div><a id="idp65682640" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Comience con su sistema apagado.</p></li><li class="step"><p>Encienda su computadora y espera un mensaje de arranque
	    en el monitor.</p></li><li class="step"><p>Si va a arrancar desde disquetes, tal y como se describe en la
	    <a class="xref" href="#install-floppies" title="2.3.7. Preparación del medio de arranque">Sección 2.3.7, &#8220;Preparación del medio de arranque&#8221;</a>, uno de ellos será el
	    primer disco de arranque, probablemente el que contiene
	    <code class="filename">kern.flp</code>.  Ponga este disco en la unidad de
	    disquetes y escriba el siguiente comando para lanzar el arranque
	    desde el disco (corrija el nombre de su unidad de disquetes si
	    fuera necesario):</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>BOOT DVA0 -FLAGS '' -FILE ''</code></strong></pre><p>Si va a arrancar desde CDROM introduzca el CDROM en la
	    unidad y escriba el siguiente comando para iniciar la
	    instalación (corrija el nombre de la unidad correcta de
	    CDROM si fuera necesario):</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>BOOT DKA0 -FLAGS '' -FILE ''</code></strong></pre></li><li class="step"><p>FreeBSD comenzará a arrancar.  Si está arrancando
	    desde disquete llegado un cierto punto verá usted este
	    mensaje:</p><pre class="screen">Please insert MFS root floppy and press enter:</pre><p>Siga las instrucciones del programa de instalación y
	     retire el disco <code class="filename">kern.flp</code>, inserte el
	    disco <code class="filename">mfsroot.flp</code>y pulse
	    <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Tanto si arrancó desde disquete como desde CDROM
	    el proceso de arranque llegará a este punto:</p><pre class="screen">Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</pre><p>Dicho y hecho: Espere diez segundos o pulse
	    <span class="keycap"><strong>Enter</strong></span>.  Esto iniciará el menú
	    de configuración del kernel.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65701456"></a>2.4.1.3. Arranque en <span class="trademark">Sparc64</span>®</h4></div></div></div><p>La mayoría de sistemas <span class="trademark">Sparc64</span>® están
	  configurados para arrancar automáticamente desde
	  disco.  Si quiere instalar FreeBSD tendrá que arrancar
	  por red o desde un CDROM, lo que requiere que acceda a la
	  PROM (OpenFirmware).</p><p>Reinicie el sistema y espere hasta que aparezca el mensaje
	  de arranque.  Depende del modelo, pero debería parecerse
	  a este:</p><pre class="screen">Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</pre><p>Si en este punto su sistema arranca desde el disco
	  pulse
	  <span class="keycap"><strong>L1</strong></span>+<span class="keycap"><strong>A</strong></span>
	  o
	  <span class="keycap"><strong>Stop</strong></span>+<span class="keycap"><strong>A</strong></span>,
	  o envíe un<code class="command">BREAK</code> desde la consola serie
	  serial console (usando, por ejemplo, <code class="command">~#</code> en
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>) para así recuperar el prompt de
	  PROM.  Tiene este aspecto:</p><pre class="screen"><code class="prompt">ok     </code><a id="prompt-single"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">ok {0} </code><a id="prompt-smp"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#prompt-single"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Este es el prompt que verá en sistemas con una sola
		CPU.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#prompt-smp"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Este prompt se usa en sistemas SMP; el dígito
		indica el número de la CPU activa.</p></td></tr></table></div><p>Ponga el CDROM dentro de la unidad y teclée
	  <code class="command">boot cdrom</code> en el prompt
	  de la PROM.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="view-probe"></a>2.4.2. Revisión de los resultados de la prueba de dispositivos</h3></div></div></div><p>Es posible revisar los últimos cientos de líneas que
        se han mostrado en pantalla, pues se almacenan en un búfer con ese
	propósito.</p><p>Pulse <span class="keycap"><strong>Bloq Despl</strong></span> (<span class="keycap"><strong>Scroll Lock</strong></span>) y ya
        puede revisar el búfer. Para moverse use las flechas o
	<span class="keycap"><strong>RePág</strong></span> y <span class="keycap"><strong>AvPág</strong></span>
	(<span class="keycap"><strong>PageUp</strong></span> y <span class="keycap"><strong>PageDown</strong></span> respectivamente).  Pulse
	de nuevo <span class="keycap"><strong>Bloq Despl</strong></span> (<span class="keycap"><strong>Scroll Lock</strong></span>) cuando
	quiera salir del búfer.</p><p>Pruébelo, revise el texto que ha generado el kernel al probar
        los dispositivos del sistema.  Verá un texto muy similar al de la
	<a class="xref" href="#install-dev-probe" title="Figura 2.1. Ejemplo de resultado de prueba de dispositivos">Figura 2.1, &#8220;Ejemplo de resultado de prueba de dispositivos&#8221;</a>, aunque en su caso concreto se
	mostrarán los dispositivos que tenga su sistema.</p><div class="figure"><a id="install-dev-probe"></a><div class="figure-title">Figura 2.1. Ejemplo de resultado de prueba de dispositivos</div><div class="figure-contents"><pre class="screen">avail memory = 253050880 (247120K bytes)
Preloaded elf kernel "kernel" at 0xc0817000.
Preloaded mfs_root "/mfsroot" at 0xc0817084.
md0: Preloaded image &lt;/mfsroot&gt; 4423680 bytes at 0xc03ddcd4

md1: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1:&lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;iSA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0 &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci
0
usb0: &lt;VIA 83572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr1
uhub0: 2 ports with 2 removable, self powered
pci0: &lt;unknown card&gt; (vendor=0x1106, dev=0x3040) at 7.3
dc0: &lt;ADMtek AN985 10/100BaseTX&gt; port 0xe800-0xe8ff mem 0xdb000000-0xeb0003ff ir
q 11 at device 8.0 on pci0
dc0: Ethernet address: 00:04:5a:74:6b:b5
miibus0: &lt;MII bus&gt; on dc0
ukphy0: &lt;Generic IEEE 802.3u media interface&gt; on miibus0
ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xec00-0xec1f irq 9 at device 10.
0 on pci0
ed0 address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
orm0: &lt;Option ROM&gt; at iomem 0xc0000-0xc7fff on isa0
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5&#8221; drive&gt; on fdc0 drive 0
atkbdc0: &lt;Keyboard controller (i8042)&gt; at port 0x60,0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/@ mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
pppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
plip0: &lt;PLIP network interface&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master UDMA33
acd0: CD-RW &lt;LITE-ON LTR-1210B&gt; at ata1-slave PIO4
Mounting root from ufs:/dev/md0c
/stand/sysinstall running as init on vty0</pre></div></div><br class="figure-break" /><p>Compruebe cuidadosamente que FreeBSD haya encontrado todos los
        dispositivos que debe encontrar.  Si no se lista algún
	dispositivo significa que FreeBSD no lo ha encontrado.  Un <a class="link" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">kernel personalizado</a> le permitirá
	agregar al sistema el soporte de dispositivos que no aparecen en el
	kernel<code class="filename">GENERIC</code>, que suele ser el caso de algunas
	tarjetas de sonido.</p><p>En FreeBSD 6.2 y versiones siguientes verá tras la
        prueba de dispositivos verá lo que muestra la
	<a class="xref" href="#config-country" title="Figura 2.2. Menú de selección de país">Figura 2.2, &#8220;Menú de selección de país&#8221;</a>.  Utilice las flechas del teclado
	para elegir país, región o grupo.  Cuando acabe pulse
	<span class="keycap"><strong>Intro</strong></span>, con lo que habrá elegido país y
	esquema de teclado.  En cualquier momento puede salir de
	easily.  It is also easy to exit the
	<span class="application">sysinstall</span> y volver a empezar.</p><div class="figure"><a id="config-country"></a><div class="figure-title">Figura 2.2. Menú de selección de país</div><div class="figure-contents"><div class="mediaobject"><img src="install/config-country.png" alt="Menú de selección de país" /></div></div></div><br class="figure-break" /><div class="figure"><a id="sysinstall-exit"></a><div class="figure-title">Figura 2.3. Salir de Sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/sysinstall-exit.png" alt="Salir de Sysinstall" /></div></div></div><br class="figure-break" /><p>Para salir de <span class="application">sysinstall</span> utilice
        las flechas del teclado para seleccionar
	<span class="guimenuitem">Exit Install</span> en el menú de la
	pantalla principal de instalación.  Aparecerá el
	siguiente mensaje:</p><pre class="screen">                      User Confirmation Requested
         Are you sure you wish to exit? The system will reboot
           (be sure to remove any floppies/CDs/DVDs from the drives).

                            [ Yes ]    No</pre><p>Si pulsa <span class="guibutton">[ Yes ]</span> y no retira el CDROM durante el reinicio el
        programa de instalación comenzará de nuevo.</p><p>Si está arrancando desde disquetes tendrá que
        retirar el floppy
	<code class="filename">boot.flp</code> antes de reiniciar.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-sysinstall"></a>2.5. ?Qué es sysinstall?</h2></div></div></div><p><span class="application">sysinstall</span> es la aplicación que
      el Proyecto FreeBSD creó para la instalación del sistema.
      Está orientada a consola y consta de diversos menús y
      pantallas que podrá usar para configurar y ejecutar el
      proceso de instalación.</p><p>El sistema de menús de <span class="application">sysinstall</span>
      se controla mediante las flechas del teclado,
      <span class="keycap"><strong>Intro</strong></span>,el <span class="keycap"><strong>tabulador</strong></span>), <span class="keycap"><strong>Espacio</strong></span> y
      otras teclas.  Tiene una descripción detallada de todas esas teclas y
      qué es lo que hacen en la información de uso de
      <span class="application">sysinstall</span>.</p><p>Si quiere consultarla seleccione
      <span class="guimenuitem">Usage</span> y asegúrese de que el botón
      <span class="guibutton">[Select]</span> esté seleccionado (como se ven en la <a class="xref" href="#sysinstall-main3" title="Figura 2.4. Selección de «Usage» en el menú principal de sysinstall">Figura 2.4, &#8220;Selección de «Usage» en el menú principal de sysinstall&#8221;</a>) y pulse <span class="keycap"><strong>Intro</strong></span>.</p><p>Aparecerán las instrucciones de uso del sistema de
      menús.  Una vez revisadas pulse  <span class="keycap"><strong>Enter</strong></span>
      y volverá al menú principal.</p><div class="figure"><a id="sysinstall-main3"></a><div class="figure-title">Figura 2.4. Selección de «Usage» en el menú principal de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/main1.png" alt="Selección de «Usage» en el menú principal de sysinstall" /></div></div></div><br class="figure-break" /><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="select-doc"></a>2.5.1. Selección del menú de documentación</h3></div></div></div><p>Una vez en el menú principal seleccione <span class="guimenuitem">Doc</span>
	con las flechas del teclado y pulse
	<span class="keycap"><strong>Enter</strong></span>.</p><div class="figure"><a id="main-doc"></a><div class="figure-title">Figura 2.5. Selección del menú de documentación</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-doc.png" alt="Selección del menú de documentación" /></div></div></div><br class="figure-break" /><p>Esto mostrará el menú de documentación.</p><div class="figure"><a id="docmenu1"></a><div class="figure-title">Figura 2.6. El menú de documentación de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/docmenu1.png" alt="El menú de documentación de sysinstall" /></div></div></div><br class="figure-break" /><p>Es muy importante qeu lea la documentación de sysinstall.</p><p>Si quiere consultar un documento seleccionelo con las flechas
	y pulse <span class="keycap"><strong>Intro</strong></span>.  Cuando acabe pulse de nuevo
	<span class="keycap"><strong>Intro</strong></span> y volverá al menú de
	documentación.</p><p>Si desea regresar al menú principal de la instalación
	seleccione <span class="guimenuitem">Exit</span> con las flechas
	y pulse <span class="keycap"><strong>Intro</strong></span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="keymap"></a>2.5.2. Selección del menú de esquemas de teclado</h3></div></div></div><p>Si quiere cambiar el esquema de teclado seleccione el que
	<span class="guimenuitem">Keymap</span> y pulse
	<span class="keycap"><strong>Enter</strong></span>.  Tendrá que hacer esto si su
	teclado no es el estándar en los EEUU.</p><div class="figure"><a id="sysinstall-keymap"></a><div class="figure-title">Figura 2.7. Menú principal de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-keymap.png" alt="Menú principal de sysinstall" /></div></div></div><br class="figure-break" /><p>La selección de un esquema de teclado se hace del siguiente
        modo: seleccione uno de la lista mediante las flechas arriba/abajo y pulse
	<span class="keycap"><strong>Espacio</strong></span>.
	Si pulsa <span class="keycap"><strong>Espacio</strong></span> otra vez anulará la selección.
	Una vez que tenga clara su elección use las flechas para seleccionar
	<span class="guibutton">[ OK ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>.</p><p>En esta pantalla solamente se muestra una parte de la lista.  Seleccione
	<span class="guibutton">[ Cancel ]</span> usando el <span class="keycap"><strong>tabulador</strong></span> si ha decido seguir usando
	el esquema de teclado por omisión y regresar al menú
	principal de instalación.</p><div class="figure"><a id="sysinstall-keymap-menu"></a><div class="figure-title">Figura 2.8. Menú de esquemas de teclado de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/keymap.png" alt="Menú de esquemas de teclado de sysinstall" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="viewsetoptions"></a>2.5.3. Pantalla de opciones de instalación</h3></div></div></div><p>Seleccione <span class="guimenuitem">Options</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="sysinstall-options"></a><div class="figure-title">Figura 2.9. Menú principal de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-options.png" alt="Menú principal de sysinstall" /></div></div></div><br class="figure-break" /><div class="figure"><a id="options"></a><div class="figure-title">Figura 2.10. Opciones de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/options.png" alt="Opciones de sysinstall" /></div></div></div><br class="figure-break" /><p>Los valores por omisión deberían bastar para
        la mayoría de usuarios.  El número de
	«release» variará según sea la
	versión que se está instalando.</p><p>La descripción del elemento seleccionado aparecerá
        resaltada en azul en la parte baja de la pantalla.  Observe que una
	de las opciones es
	<span class="guimenuitem">Use Defaults</span>, que devuelve todos los valores
	a los asignados por omisión al principio del proceso de
	instalación.</p><p>Si pulsa <span class="keycap"><strong>F1</strong></span> podrá leer la pantalla de
        ayuda de las diversas opciones.</p><p>Si pulsa <span class="keycap"><strong>Q</strong></span> volverá al menú
        principal de la instalación.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="start-install"></a>2.5.4. Comenzar una instalación estándar</h3></div></div></div><p>La instalación estándar
        (<span class="guimenuitem">Standard</span>) es la opción más
	adecuada para aquellas personas con poca o ninguna experiencia con
	<span class="trademark">UNIX</span>® o FreeBSD.  Utilice las flechas para seleccionar
	<span class="guimenuitem">Standard</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>; a partir de ahí comenzará
	la instalación.</p><div class="figure"><a id="sysinstall-standard"></a><div class="figure-title">Figura 2.11. Comenzar una instalación estándar</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-std.png" alt="Comenzar una instalación estándar" /></div></div></div><br class="figure-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-steps"></a>2.6. Asignación de espacio en disco</h2></div></div></div><p>Lo primero que tiene que hacer es asignar espacio en disco a FreeBSD
      para que <span class="application">sysinstall</span> lo pueda dejar listo
      para su uso.  Para ello debe saber cómo espera FreeBSD encontrar
      la información en el disco.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-drive-bios-numbering"></a>2.6.1. Numeración de unidades desde el punto de vista de la BIOS</h3></div></div></div><p>Antes de instalar y configurar FreeBSD en su sistema hay una cosa más
        de la que ocuparse, especialmente si tiene más de un disco
	duro.</p><a id="idp65963984" class="indexterm"></a><a id="idp65964496" class="indexterm"></a><p>La BIOS es capz de abstraer el orden normal de los discos si hablamos
        de un PC en el que se está ejecutando un sistema operativo
	"BIOS-dependiente" como
	<span class="trademark">MS-DOS</span>® o <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, que admiten esos cambios sin problemas.
	Tal cosa permite al usuario arrancar desde un disco duro distinto del
	llamado «maestro principal».  Esto viene muy bien a los
	usuarios que tienen el «backup» del sistema más
	barato que existe, comprar un disco duro idéntico al primero y
	copiar periódicamente la primera unidad en la segunda mediante
	<span class="application">Ghost</span> o <span class="application">XCOPY</span>.
	De este modo si la primera unidad falla, sufre el ataque de un virus o
	sufre las consecuencias de un fallo del sistema operativo sólo hay
	que decirle a la BIOS que interpole lógicamente las unidades.  Es
	como intercambiar las conexiones de los discos sin tener que abrir
	la caja del sistema.</p><a id="idp65971920" class="indexterm"></a><a id="idp65972432" class="indexterm"></a><p>en sistemas más caros a veces pueden encontrarse controladoras
        SCSI que incorporan extensiones BIOS, que permiten organizar hasta
	siete unidades SCSI de un modo muy similar.</p><p>Cualquiera que esté acostumbrado a usar las técnicas
        descritas se llevará una sorpresa al intentar usarlas en FreeBSD.
	FreeBSD no usa la BIOS y no tiene en cuenta en absoluto la «notación
	de unidades lógicas desde el punto de vista de la BIOS».  Esto
	puede dar lugar a situaciones bastante chocantes, especialmente cuando
	las unidades son físicamente idénticas en geometría
	y han sido creadas como clones de datos la una de la otra.</p><p>Si va a usar FreeBSD recuerde siempre devolver a la BIOS a los
        valores de numeración «natural» antes de la
	instalación y dejarlos así.  Si tiene que intercambiar
	unidades hágalo, pero a la vieja usanza: abra la caja, toque
	los «jumpers» y los cables todo lo que sea menester.</p><div class="sidebar"><div xmlns="" class="titlepage"><div><div><div xmlns="http://www.w3.org/1999/xhtml" class="-title"></div></div></div></div><p>Pedro decide dedicar una vieja máquina
	  «Wintel» para prepararle un sistema FreeBSD a Pablo.
	  Pedro le instala una sola unidad SCSI como
	  «unidad SCSI 0» e instala FreeBSD en ella.</p><p>Pablo comienza a usar el sistema pero a los pocos dias
	  advierte que esa vieja unidad SCSI está mostrando
	  numerosos errores lógicos, así que informa del hecho
	  a Pedro.</p><p>Dias después Pedro decide solucionar el problema;
	  consigue un disco idéntico al que instaló a Pablo.
	  Le pasa un chequeo de superficie que da resultados satisfactorios,
	  así que instala este disco como «unidad SCSI 4» y
	  hace una copia binaria de la unidad 0 (el primer disco) a la
	  recién instalada unidad 4.  Una vez que el nuevo disco
	  está instalado Pedro decide que hay que empezar a usarlo,
	  así que configura la BIOS SCSI para reorganizar las unidades
	  de disco para que el sistema arranque desde la unidad SCSI 4.
	  FreeBSD arranca desde dicha unidad y todo funciona perfectamente.</p><p>Pablo sigue trabajando varios dias y no pasa mucho tiempo
	  antes de que Pedro y Pablo decidan que ya es hora de meterse en una
	  nueva aventura: actualizarse a la nueva versín de FreeBSD.
	  Bill retira la unidad SCSI 0 de la máquina porque le parece
	  poco de fiar y la reemplaza por un disco que obtiene de su en
	  apariencia inagotable trastero.  Pedro instala la última
	  versión de FreeBSD en la nueva unidad SCSI mediante los
	  disquetes FTP mágicos que Pablo ha bajado de Internet. La
	  instalación se ejecuta sin problemas.</p><p>Pablo utiliza la nueva versión de FreeBSD durante unos
	  dias y comprueba que en efecto es lo bastante buena como para
	  usarla en el departamento de ingeniería.  Ha llegado, por
	  tanto, el momento de copiar los datos que tiene en la versión
	  anterior de FreeBSD a su nuevo alojamiento.  Pablo monta la unidad
	  SCSI 4 (la última que instaló con la versión
	  anterior de FreeBSD).  Pablo queda consternado al comprobar que en la
	  unidad SCSI 4 no hay ni rastro de sus preciados datos.</p><p>?Dónde están los datos?</p><p>Cuando Pedro hizo la copia binaria de la unidad SCSI 0
	  en la unidad SCSI 4, la unidad se convirtió en el
	  «el nuevo clon».  Cuando Pedro reconfiguró la
	  BIOS SCSI para poder arrancar desde la unidad SCSI 4 tan
	  sólo estaba engañándose a sí mismo
	  puesto que FreeBSD seguía arrancando desde la unidad SCSI
	  0.  Al hacer tal cambio en la BIOS causamos que parte del
	  código de arranque y del cargador del sistema se copie de
	  una a otra unidad pero en cuanto los controladores del kernel de
	  FreeBSD toman el control de la situación el esquema de
	  nomenclatura de unidades de la BIOS es desestimado y FreeBSD recupera
	  el esquema normal de nomenclatura.  En nuestro ejemplo el sistema
	  sigue funcionando desde la unidad SCSI 0 y ahí están
	  todos los datos de Pablo, no en la unidad SCSI 4.  El hecho de que
	  pareciera que el sistema estaba funcionando en la unidad SCSI 4 era
	  un producto de la imaginación humana.</p><p>Estamos encantados de decir que ni un solo byte fue
	  herido o maltratado durante el descubrimiento de este
	  fenómeno.  La vieja unidad SCSI 0 fué recuperada del
	  montón de discos caídos en acto de servicio y
	  fue posible devolver todo el trabajo de Pablo a su
	  legítimo dueño.  Por si fuera poco, ahora Pedro sabe
	  con certeza que es capaz de contar hasta cero.</p><p>En el ejemplo se han usado unidades SCSI pero los conceptos
	  pueden aplicarse perfectamente a unidades IDE.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="main-fdisk"></a>2.6.2. Creación de «slices» con FDisk</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Aún no ha hecho modificaciones en su disco duro.
	  Si cree que ha cometido algún error y quiere comenzar de
	  nuevo puede hacerlo, salga de los menús de
	  <span class="application">sysinstall</span> e inténtelo de nuevo
	  o pulse <span class="keycap"><strong>U</strong></span> para ejecutar la opción
	  <span class="guimenuitem">Undo</span> (deshacer).  Si se pierde o no
	  sabe cómo salir siempre puede apagar su
	  sistema.</p></div><p>Si ha elegido iniciar una instalación estándar
	<span class="application">sysinstall</span> le mostrará el siguiente
	mensaje:</p><pre class="screen">                                 Message
 In the next menu, you will need to set up a DOS-style ("fdisk")
 partitioning scheme for your hard disk. If you simply wish to devote
 all disk space to FreeBSD (overwriting anything else that might be on
 the disk(s) selected) then use the (A)ll command to select the default
 partitioning scheme followed by a (Q)uit. If you wish to allocate only
 free space to FreeBSD, move to a partition marked "unused" and use the
 (C)reate command.
                                [  OK  ]

                      [ Press enter or space ]</pre><p>Es decir:</p><pre class="screen">                                 Mensaje
 En el siguiente menú tendrá que configurar un esquema de particionado
 estilo DOS ("fdisk") en su disco duro.  Si quiere dedicar todo el
 espacio de disco a FreeBSD (cosa que sobreescribirá cualquier cosa
 que contuviera el/los disco/s) use el comando (A)ll (Todo) para
 seleccionar el esquema de particiones por defecto y luego pulse
 (Q)uit (Salir).  Si quiere asignar a FreeBSD sólamente el espacio
 libre en la unidad elija una partición que figure marcada como
 "unused" (sin usar) y ejecute el comando (C)reate (Crear).
                                [  OK  ]

                      [ Pulse Intro o Espacio ]</pre><p>Pulse <span class="keycap"><strong>Intro</strong></span> tal y como se le dice.  Se le
	mostrará una lista con todas las unidades de disco duro que el
	kernel ha econtrado al hacer el chequeo del sistema.
	La <a class="xref" href="#sysinstall-fdisk-drive1" title="Figura 2.12. Elija en qué unidad usar FDisk">Figura 2.12, &#8220;Elija en qué unidad usar FDisk&#8221;</a> muestra un ejemplo de
	un sistema con dos discos IDE.  Reciben los nombres de
	<code class="filename">ad0</code> y <code class="filename">ad2</code>.</p><div class="figure"><a id="sysinstall-fdisk-drive1"></a><div class="figure-title">Figura 2.12. Elija en qué unidad usar FDisk</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-drive1.png" alt="Elija en qué unidad usar FDisk" /></div></div></div><br class="figure-break" /><p>Quizás esté preguntandose por qué
        <code class="filename">ad1</code> no aparece por ningún lado.
	?Acaso hemos pasado algo por alto?</p><p>Veamos qué ocurriría si tuviera usted dos discos
        duros IDE, uno como maestro de la primera controladora IDE y el otro
	como maestro en la segunda controladora IDE.  Si FreeBSD asignara
	números de unidad en el orden en el que las encuentra en el
	ejemplo habríamos visto
	<code class="filename">ad0</code> y
	<code class="filename">ad1</code> y todo funcionaría sin
	mayor problema.</p><p>Pero si tuviera usted que añadir un tercer disco, digamos
	como esclavo de la primera controladora IDE, tendría que
	llamarse <code class="filename">ad1</code> y el disco que antes era
	<code class="filename">ad1</code> pasaría a llamarse
	<code class="filename">ad2</code>.  Los nombres de dispositivo (como
	por ejemplo <code class="filename">ad1s1a</code>) se usan para ubicar
	sistemas de ficheros, así que podría encontrarse con
	que alguno de sus sistemas de ficheros no está donde debiera
	y tendría que modificar la configuración de su
	FreeBSD.</p><p>Para evitar este problema el kernel puede configurarse para
	asignar nombres a discos IDE basándose en dónde
	están en lugar de hacerlo por el orden en el que los
	encuentra.  Según dicho esquema el disco maestro de la segunda
	contoladora IDE <span class="emphasis"><em>siempre</em></span> será
	<code class="filename">ad2</code>, incluso si no existen dispositivos
	<code class="filename">ad0</code> o
	<code class="filename">ad1</code>.</p><p>Ésta es la configuración por omisión que
        incorpora el kernel de FreeBSD, por lo que muestra las unidades
	<code class="filename">ad0</code> y
	<code class="filename">ad2</code>.  La máquina en la que se tomaron
	las capturas de pantalla tiene sendos discos IDE en ambos canales
	maestros de las dos controladoras y carece de discos en los
	canales esclavos.</p><p>Seleccione el disco en el que desea instalar FreeBSD y pulse
	<span class="guibutton">[ OK ]</span>.  <span class="application">FDisk</span> arrancará y
	le mostrará una pantalla similar a la que muestra la
	<a class="xref" href="#sysinstall-fdisk1" title="Figura 2.13. Un ejemplo de particionamiento típico con FDisk">Figura 2.13, &#8220;Un ejemplo de particionamiento típico con FDisk&#8221;</a>.</p><p>La pantalla de <span class="application">FDisk</span> se divide en tres
	partes.</p><p>La primera parte, que ocupa las dos primeras líneas de la
	pantalla, muestra los detalles del disco que seleccionemos, el
	nombre que FreeBSD le da, la geometría del disco y el
	tamaño total del disco.</p><p>La segunda parte muestra las «slices» que haya
	en el disco, dónde comienzan y acaban, cu´l es su
	tamaño, qué nombre les da FreeBSD, su descripción
	y subtipo.  Este ejemplo muestra dos pequeñas
	«slices» sin usar; las «slices» (del
	inglés «rebanadas») son un tipo de esquema
	estructural de los discos de PC.  También muestra una gran
	«slice» <acronym class="acronym">FAT</acronym>, que casi con total
	seguridad aparecerá como <code class="filename">C:</code> en
	<span class="trademark">MS-DOS</span>® / <span class="trademark">Windows</span>®, y una «slice» extendida, que
	podría contener otras letras de unidad de
	<span class="trademark">MS-DOS</span>® / <span class="trademark">Windows</span>®.</p><p>La tercera parte muestra las órdenes que pueden usarse en
	<span class="application">FDisk</span>.</p><div class="figure"><a id="sysinstall-fdisk1"></a><div class="figure-title">Figura 2.13. Un ejemplo de particionamiento típico con FDisk</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-edit1.png" alt="Un ejemplo de particionamiento típico con FDisk" /></div></div></div><br class="figure-break" /><p>Lo que deba hacer a partir de ahora dependerá mucho de
	la forma en la que quiera distribuir su disco.</p><p>Si desea usar FreeBSD en el resto del disco (lo que implica borrar
	todos los datos que pudiera haber en el disco una vez que le
	confirme a <span class="application">sysinstall</span> que desea seguir
	adelante con la instalación) pulse <span class="keycap"><strong>A</strong></span>, que
	equivale a la opción <span class="guimenuitem">Use Entire Disk</span>
	(Utilizar el disco íntegro).  Las «slices» que
	existieran se borrarán y serán reemplazadas por un pequeño
	área de disco marcado como <code class="literal">sin usar</code> (otro
	recurso de la estructura de disco de los PC) y tras él una gran
	«slice» destinada a FreeBSD.  Ahora marque la
	partición FreeBSD que acaba de crear como arrancable: pulse
	<span class="keycap"><strong>S</strong></span>.  La pantalla que verá ha de ser muy
	similar a la <a class="xref" href="#sysinstall-fdisk2" title="Figura 2.14. Partición con FDisk usando el disco completo">Figura 2.14, &#8220;Partición con FDisk usando el disco completo&#8221;</a>.  Observe la
	<code class="literal">A</code> en la columna <code class="literal">Flags</code>: indica
	que la «slice» es <span class="emphasis"><em>activa</em></span> y se
	arrancará desde ella.</p><p>Si desea borrar una «slice» para hacer más
	sitio a FreeBSD selecciónela mediante las flechas y pulse
	<span class="keycap"><strong>D</strong></span>.  Después pulse <span class="keycap"><strong>C</strong></span> y
	verá un mensaje en el que se le pedirá el
	tamaño de la «slice» que va a crear.
	Introduzca los datos apropiados y pulse <span class="keycap"><strong>Intro</strong></span>.
	El valor por defecto en ésta pantalla es el de la
	«slice» más grande que pueda crear en el disco,
	que debería ser la mayor parte del disco que queda sin usar
	o el tamaño del disco duro completo.</p><p>Si ha hecho sitio para FreeBSD (quizás con una herramienta
	como <span class="application"><span class="trademark">PartitionMagic</span>®</span>) puede pulsar
	press <span class="keycap"><strong>C</strong></span> y crear una nueva «slice».
	Verá de nuevo un mensaje en el que se le pedirá que
	escriba el tamaño de la «slice» que va a
	crear.</p><div class="figure"><a id="sysinstall-fdisk2"></a><div class="figure-title">Figura 2.14. Partición con FDisk usando el disco completo</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-edit2.png" alt="Partición con FDisk usando el disco completo" /></div></div></div><br class="figure-break" /><p>Cuando acabe pulse <span class="keycap"><strong>Q</strong></span>.  Sus cambios se guardarán
	en <span class="application">sysinstall</span>, pero de momento no se
	guardarán en disco.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bootmgr"></a>2.6.3. Instalación de un gestor de arranque</h3></div></div></div><p>Ha llegado el momento de instalar un gestor de arranque.  Elija
	el gestor de arranque de FreeBSD si:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Tiene más de un disco y ha instalado FreeBSD en cualquiera
	    que no sea el primero.</p></li><li class="listitem"><p>Ha instalado FreeBSD codo con codo con otro sistema operativo
	    y quiere poder elegir si arrancar FreeBSD o ese otro sistema operativo
	    cuando arranque su sistema.</p></li></ul></div><p>Si FreeBSD va a ser el único sistema operativo en el
        sistema y va a instalarlo en el primer disco duro elija el
	gestor estándar (que, obviamente, está en la
	opción <span class="guimenuitem">Standard</span>).  Elija
	<span class="guimenuitem">None</span> (ninguno) si va a usar algún
	otro gestor de arranque que sea capaz de arrancar FreeBSD.</p><p>Elija y pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="sysinstall-bootmgr"></a><div class="figure-title">Figura 2.15. Menú de gestores de arranque de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/boot-mgr.png" alt="Menú de gestores de arranque de sysinstall" /></div></div></div><br class="figure-break" /><p>La pantalla de ayuda, que puede consultar en cualquier momento
        pulsando <span class="keycap"><strong>F1</strong></span>, puede serle de mucha ayuda con los
	problemas que puede encontrarse al intentar compartir un disco duro
	entre varios sistemas operativos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66042576"></a>2.6.4. Creación de «slices» en otra unidad.</h3></div></div></div><p>Si hay más de una unidad de disco el programa de
	instalación volverá a la pantalla
	«Select Drives» («selección de
	unidades») una vez elegido el gestor de arranque.  Si quiere
	instalar FreeBSD en más de un disco seleccione aquí ese
	otro disco y repita el proceso con las «slices» mediante
	<span class="application">FDisk</span>.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si va a instalar FreeBSD en una unidad que no sea la primera
	  tendrá que instalar el gestor de arranque de FreeBSD
	  en ambas unidades.</p></div><div class="figure"><a id="sysinstall-fdisk-drive2"></a><div class="figure-title">Figura 2.16. Salir de la selección de unidad</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-drive2.png" alt="Salir de la selección de unidad" /></div></div></div><br class="figure-break" /><p>El <span class="keycap"><strong>tabulador</strong></span> se usa para hacer pasar el
        cursor entre <span class="guibutton">[ OK ]</span>, <span class="guibutton">[ Cancel ]</span>.</p><p>Pulse <span class="keycap"><strong>tabulador</strong></span> para pasar el cursor a
	<span class="guibutton">[ OK ]</span> y pulse
	<span class="keycap"><strong>Enter</strong></span> para proseguir con la
	instalación.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdlabeleditor"></a>2.6.5. Creación de particiones con
	<span class="application">Disklabel</span></h3></div></div></div><p>Tendrá que crear particiones dentro de las
        «slices» que haya creado.  Recuerde que cada
	partición está asociada a una letra entre la
	<code class="literal">a</code> y la <code class="literal">h</code>y que las particiones
	<code class="literal">b</code>, <code class="literal">c</code> y
	<code class="literal">d</code> tienen significados heredados que tendrá
	que respetar.</p><p>Ciertas aplicaciones pueden optimizar su rendimiento de un
	esquema de particiones concreto, sobre todo si hace particiones
	repartidas en más de un disco.  Si embargo si esta es su
	primera instalación de FreeBSD no necesita dedicarle demasiado
	tiempo a decidir cómo partir el disco duro.  Es mucho
	más importante que instale FreeBSD y empiece a aprender a
	usarlo.  Siempre estáa tiempo de reinstalar FreeBSD y cambiar
	su esquema de particiones cuando esté más
	familiarizado con el sistema operativo.</p><p>El siguiente esquema consta de cuatro particiones: una para la swap y
	tres para los sistemas de ficheros.</p><div class="table"><a id="idp66054352"></a><div class="table-title">Tabla 2.2. Estructura de particiones del primer disco</div><div class="table-contents"><table summary="Estructura de particiones del primer disco" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Partición</th><th>Sistema de ficheros</th><th>Tamaño</th><th>Descripción</th></tr></thead><tbody><tr><td><code class="literal">a</code></td><td><code class="filename">/</code></td><td>512 MB</td><td>Este es el sistema de ficheros raíz.  el resto
		de sistemas de ficheros se montarán en algún
		punto de este sistema raíz.  100 MB es un
		tamaño razonable para él.  No es el mejor sitio
		para almacenar muchos datos y la instalación de FreeBSD
		escribirá cerca de 40 MB de datos en ella.
		El resto del espacio es para datos temporales y por si futuras
		versiones de FreeBSD necesitan más espacio en
		<code class="filename">/</code>.</td></tr><tr><td><code class="literal">b</code></td><td>N/A</td><td>2-3 x RAM</td><td><p>Esta partición es el espacio de memoria de
		  intercambio (o «swap») del sistema.  La
		  elección de la cantidad correcta de swap es
		  casi un arte en sí mismo.  Hay una regla
		  básica que es asignar a la swap el doble o el
		  triple de MB de los que haya en la memoria física
		  (RAM) del sistema.  Debería tener
		  al menos 64 MB de swap así que si tiene
		  menos de 32 MB de RAM asígnele a su swap
		  64 MB.</p><p>

		  Si tiene más de un disco puede poner espacio
		  swap en cada disco.  FreeBSD usará ambas swap con el
		  resultado de acelerar notablemente el intercambio de
		  páginas de memoria.  Calcule el total de swap que
		  necesita (por ejemplo 128 MB) y divida esa cantidad
		  por el número de discos que tenga (por ejemplo dos)
		  y ya tiene la cantidad de espacio que debe destinar a swap
		  en cada uno de sus discos. En nuestro ejemplo 64 MB
		  de swap por disco.</p></td></tr><tr><td><code class="literal">e</code></td><td><code class="filename">/var</code></td><td>256 MB to 1024 MB</td><td>El directorio <code class="filename">/var</code> contiene
		ficheros que están en continuo cambio, como
		«logs» y otros ficheros
		administrativos.  Muchos de esos ficheros son una
		consecuencia o son de gran ayuda para el correcto
		funcionamiento diario de FreeBSD.  FreeBSD ubica dichos ficheros
		en ese sistema de ficheros para optimizar el acceso a
		los mismos sin afectar a otros ficheros ni directorios que
		tienen similar patrón de accesos.</td></tr><tr><td><code class="literal">f</code></td><td><code class="filename">/usr</code></td><td>Resto del disco(al menos 2 GB)</td><td>El resto de sus ficheros pueden almacenarse en
		<code class="filename">/usr</code> y sus subdirectorios.</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los valores que se han mostrado son simples ejemplos y
	  se recomienda su uso exclusivamente a usuarios experimentados.
	  Recomendamos a los usuarios que utilicen la opción
	  <code class="literal">Auto Defaults</code>, que elegirá unas
	  proporciones adecuadas para el espacio que encuentre
	  disponible.</p></div><p>Si va a instalar FreeBSD en más de un disco puede crear
        particiones el las demás «slices» que haya
	creado.  La forma más fácil de hacerlo es creando
	dos particiones en cada disco, una para la swap y la otra para los
	sistemas de ficheros.</p><div class="table"><a id="idp66088400"></a><div class="table-title">Tabla 2.3. Esquema de particiones para varios discos</div><div class="table-contents"><table summary="Esquema de particiones para varios discos" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Partición</th><th>Sistema de ficheros</th><th>Tamaño</th><th>Descripción</th></tr></thead><tbody><tr><td><code class="literal">b</code></td><td>N/A</td><td>Ver descripción</td><td>Tal y como se ha explicado puede repartir su espacio swap
	        entre varios discos.  Aunque piense que la partición
		<code class="literal">a</code> está libre la costumbre (y se dice que
		«las costumbres son leyes» dicta que el espacio
		swap reside en la partición
		<code class="literal">b</code>.</td></tr><tr><td><code class="literal">e</code></td><td>/disco<em class="replaceable"><code>n</code></em></td><td>Resto del disco</td><td>El resto del disco puede dejarse en una sola
		partición.  Esto podría ubicarse simplemente
		en la partición <code class="literal">a</code> en lugar de en
		la <code class="literal">e</code>.  Sin embargo la costumbre dice que
		la partición <code class="literal">a</code> de una
		«slice» está reservada para el sistema de
		ficheros que ha de albergar el sistema de ficheros
		raíz (<code class="filename">/</code>).  No tiene por qué
		seguir la costumbre pero tenga en cuenta que
		<span class="application">sysinstall</span> sí que lo hace,
		así que si la sigue sabe que está haciendo una
		instalación más limpia.  Puede montar los
		sistemas de ficheros donde prefiera; este ejemplo le sugiere
		que los monte como directorios
		<code class="filename">/discon</code>, donde
		<em class="replaceable"><code>n</code></em> es un número que cambia en
		cada disco.  Por supuesto que puede usar el esquema que
		prefiera.</td></tr></tbody></table></div></div><br class="table-break" /><p>Una vez que haya elegido el esquema de particiones creelo en
	<span class="application">sysinstall</span>.  Verá este
	mensaje:</p><pre class="screen">                                 Message
 Now, you need to create BSD partitions inside of the fdisk
 partition(s) just created. If you have a reasonable amount of disk
 space (200MB or more) and don't have any special requirements, simply
 use the (A)uto command to allocate space automatically. If you have
 more specific needs or just don't care for the layout chosen by
 (A)uto, press F1 for more information on manual layout.

                                [  OK  ]
                          [ Press enter or space ]</pre><p>Es decir:</p><pre class="screen">                                 Message
 Debe crear particiones BSD dentro de las 'particiones
 fdisk' que acaba de crear.  Si tiene una cantidad de espacio en
 disco razonablemente grande (200MB o más) y no tiene necesidades
 especiales puede simplemente usar el comando (A)uto para asignar
 el espacio automáticamente. Si tiene necesidades más concretas o
 simplemente no le gusta la estructura que le da (A)uto pulse
 F1 y obtendrá más información sobre la creación manual de
 la estructura.

                                [  OK  ]
                          [ Pulse Intro o Espacio ]</pre><p>Al pulsar <span class="keycap"><strong>Intro</strong></span> arrancará el editor de
	particiones de FreeBSD, <span class="application">Disklabel</span>.</p><p>La <a class="xref" href="#sysinstall-label" title="Figura 2.17. El editor Disklabel">Figura 2.17, &#8220;El editor Disklabel&#8221;</a> muestra lo que verá cuando
	arranque <span class="application">Disklabel</span>.  La pantalla se divide en
	tres secciones.</p><p>Las primeras líneas muestran el nombre del disco en el
	que estamos haciendo cambios y el de la «slice» que
	contiene  las particiones que estamos creando
	(<span class="application">Disklabel</span> las muestra bajo
	<code class="literal">Partition name</code>
	(«nombre de partición») en lugar de hacerlo
	como «slices»).  Vemos también ahí la
	cantidad de espacio libre en la «slice», esto es, el
	espacio que hay asignado a la «slice» pero que
	aún no ha sido asignado a ninguna partición.</p><p>En la mitad de la pantalla se muestran las particiones que se
	han creado, el nombre de los sistemas de ficheros que contiene cada
	partición, sus tamaños y algunas opciones relacionadas
	con la creación de sistemas de ficheros.</p><p>La tercera parte de la pantalla, la de más abajo, muestra
	los atajos de teclado que pueden usarse
	en <span class="application">Disklabel</span>.</p><div class="figure"><a id="sysinstall-label"></a><div class="figure-title">Figura 2.17. El editor Disklabel</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-ed1.png" alt="El editor Disklabel" /></div></div></div><br class="figure-break" /><p><span class="application">Disklabel</span> puede crear automáticamente
        particiones y asignarles tamaños por omisión.  Estos
	tamaños se calculan con la ayuda de un algoritmo interno de
	dimensionamiento de particiones que analiza el tamaño del
	disco.  Puede probarlo pulsando
	<span class="keycap"><strong>A</strong></span>.  Verá una pantalla similar a la que aparece en
	la <a class="xref" href="#sysinstall-label2" title="Figura 2.18. Editor Disklabel con valores por omisión">Figura 2.18, &#8220;Editor Disklabel con valores por omisión&#8221;</a>.  Dependiendo del tama&#732;o del
	disco que esté usando los valores por omisión pueden o no
	ser los apropiados.  Esto no es algo de lo que deba preocuparse dado que
	no está obligado a aceptar esos valores por omisión.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En el esquema de particiones por omisión el directorio
	    <code class="filename">/tmp</code> tiene su propia partición en lugar
	    de formar parte de <code class="filename">/</code>.  Esto ayuda a evitar el
	    desbordamiento de <code class="filename">/</code> con ficheros
	    temporales.</p></div><div class="figure"><a id="sysinstall-label2"></a><div class="figure-title">Figura 2.18. Editor Disklabel con valores por omisión</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-auto.png" alt="Editor Disklabel con valores por omisión" /></div></div></div><br class="figure-break" /><p>Si decide no usar los valores por defecto para las particiones
	y quiere reemplazar tales valores por los suyos use las flechas:
	elija la primera partición y pulse <span class="keycap"><strong>D</strong></span> para
	borrarla.  Repita el proceso para borrar todas las particiones que
	desee.</p><p>Vamos a crear la primera partición
	(<code class="literal">a</code>, montada como <code class="filename">/</code>
	o raíz).  Seleccione la «slice» adecuada y
	pulse <span class="keycap"><strong>C</strong></span>.  Aparecerá un diálogo
	pidiéndole que escriba el tamaño de la nueva
	partición (como se muestra en la
	in <a class="xref" href="#sysinstall-label-add" title="Figura 2.19. Liberar espacio para la partición raíz">Figura 2.19, &#8220;Liberar espacio para la partición raíz&#8221;</a>).  Puede introducir
	el tamaño expresado en bloques de disco o como un
	número seguido de una <code class="literal">M</code> para expresarlo en
	megabytes, una <code class="literal">G</code> para usar gygabytes o una
	<code class="literal">C</code> si quiere expresarlo en cilindros.</p><div class="figure"><a id="sysinstall-label-add"></a><div class="figure-title">Figura 2.19. Liberar espacio para la partición raíz</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root1.png" alt="Liberar espacio para la partición raíz" /></div></div></div><br class="figure-break" /><p>El tamaño por omisión que se muestra creará una
	partición que ocupe el resto de la «slice».
	Si va a usar los tamaños de partición que se daban
	en el ejemplo anterior borre el texto existente pulsando
	<span class="keycap"><strong>Retroceso</strong></span>; escriba <strong class="userinput"><code>64M</code></strong>, como
	se puede ver en la
	<a class="xref" href="#sysinstall-label-add2" title="Figura 2.20. Edición del tamaño de la partición raíz">Figura 2.20, &#8220;Edición del tamaño de la partición raíz&#8221;</a>.  Después pulse
	<span class="guibutton">[ OK ]</span>.</p><div class="figure"><a id="sysinstall-label-add2"></a><div class="figure-title">Figura 2.20. Edición del tamaño de la partición raíz</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root2.png" alt="Edición del tamaño de la partición raíz" /></div></div></div><br class="figure-break" /><p>Una vez elegido el tamaño de la partición tendrá
        que elegir si esta partición ha de contener un sistema de
	ficheros o espacio swap y escribir lo que corresponda en una pantalla
	como la que se muestra en la
	<a class="xref" href="#sysinstall-label-type" title="Figura 2.21. Elegir el tipo de partición raíz">Figura 2.21, &#8220;Elegir el tipo de partición raíz&#8221;</a>.  Esta primera partición
	contendrá un sistema de ficheros, así que seleccionamos
	<span class="guimenuitem">FS</span> y pulsamos
	<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="sysinstall-label-type"></a><div class="figure-title">Figura 2.21. Elegir el tipo de partición raíz</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-fs.png" alt="Elegir el tipo de partición raíz" /></div></div></div><br class="figure-break" /><p>Para acabar, dado que está creando un sistema de ficheros,
	tendrá que decirle a <span class="application">Disklabel</span>
	dónde hay que montarlo.  La pantalla se muestra en la
	<a class="xref" href="#sysinstall-label-mount" title="Figura 2.22. Elegir el punto de montaje del sistema de ficheros raíz">Figura 2.22, &#8220;Elegir el punto de montaje del sistema de ficheros raíz&#8221;</a>.  El punto de montaje del sistema
	de ficheros raíz es <code class="filename">/</code>, así que
	tendrá que teclear <strong class="userinput"><code>/</code></strong>y luego pulsar
	<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="sysinstall-label-mount"></a><div class="figure-title">Figura 2.22. Elegir el punto de montaje del sistema de ficheros raíz</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root3.png" alt="Elegir el punto de montaje del sistema de ficheros raíz" /></div></div></div><br class="figure-break" /><p>La pantalla le mostrará ahora la partición que
	acaba de crear.  Repita el procedimiento todas las veces que
	necesite con las demás particiones.  Cuando cree la
	partición swap no se le pedirá el punto de
	montaje puesto que las particiones swap nunca se montan como
	tales.  Cuando cree la última partición
	<code class="filename">/usr</code>, puede dejar el tamaño que se le
	sugiere, esto es, usar el resto del espacio en la
	«slice».</p><p>La última pantalla del editor Disklabel será muy
	parecida a la <a class="xref" href="#sysinstall-label4" title="Figura 2.23. Editor Disklabel">Figura 2.23, &#8220;Editor Disklabel&#8221;</a>, aunque los valores
	pueden ser diferentes.  Pulse <span class="keycap"><strong>Q</strong></span> para salir del
	editor.</p><div class="figure"><a id="sysinstall-label4"></a><div class="figure-title">Figura 2.23. Editor Disklabel</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-ed2.png" alt="Editor Disklabel" /></div></div></div><br class="figure-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-choosing"></a>2.7. Elección de qué instalar</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="distset"></a>2.7.1. Elección del tipo de instalación</h3></div></div></div><p>La elección de qué tipo de instalación
	debe hacer depende enormemente del uso que se va a dar al sistema y
	del espacio de disco disponible.  El rango de opciones predefinidas
	está entre hacer la instalación más
	pequeña posible o instalarlo todo.  Las personas con poco o ninguna
	experiencia en <span class="trademark">UNIX</span>® o FreeBSD deberán elegir alguna de las
	opciones predefinidas que se les ofrecen, a las que llamaremos
	distribuciones (de «distribution set») tal y como
	aparecen en el menú de <span class="application">sysinstall</span>.
	Una instalación ·a medida es algo más adecuado para
	para usuarios con más experiencia.</p><p>Si pulsa <span class="keycap"><strong>F1</strong></span> podrá acceder a más
	información sobre las opciones de tipo de instalación
	y qué contiene cada distribución.  Cuando acabe de
	consultar la ayuda pulse <span class="keycap"><strong>Intro</strong></span> y volverá al
	al menú de selección de instalación de
	distribuciones.</p><p>Si tiene intención de instalar un interfaz gráfico de
        usuario tendrá que instalar una de las distribuciones cuyo
	nombre comienza por <code class="literal">X</code>.  La configuración
	del servidor X y la selección de un entorno de escritorio son
	algunas de las tareas que tendrá una vez instalado FreeBSD.  Tiene
	más información sobre la configuración de un
	servidor X en <a class="xref" href="#x11" title="Capítulo 5. El sistema X Window">Capítulo 5, <em>El sistema X Window</em></a>.</p><p>La versión de X11 por omisión en FreeBSD es
        <span class="application">Xorg</span>.</p><p>Si preve compilar un kernel a medida selecciones la
	opción que incluye el código fuente.  Para más
	información sobre las razones por las que debe compilarse
	un kernel a medida y sobre cómo compilarlo
	consulte el <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><p>Evidentemente el sistema más versátil es
	aquél que lo tiene todo.  Si dispone de espacio de disco
	suficiente seleccione <span class="guimenuitem">All</span>, como se
	muestra en la <a class="xref" href="#distribution-set1" title="Figura 2.24. Elección de distribuciones">Figura 2.24, &#8220;Elección de distribuciones&#8221;</a>, usando las
	flechas y pulsando <span class="keycap"><strong>Intro</strong></span>.  Si el espacio en
	disco es limitado piense en usar alguna de las otras opciones.
	No pierda con ello demasiado tiempo puesto que el resto de
	distribuciones pueden añadirse en cualquier momento tras
	la intalación.</p><div class="figure"><a id="distribution-set1"></a><div class="figure-title">Figura 2.24. Elección de distribuciones</div><div class="figure-contents"><div class="mediaobject"><img src="install/dist-set.png" alt="Elección de distribuciones" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portscol"></a>2.7.2. Instalación de la colección de ports</h3></div></div></div><p>Tras seleccionar la distribución elegida se le
	presentará la opción de instalar el árbol
	de ports, o Colección de Ports, de FreeBSD.  Los ports son una
	forma fácil y cómoda de instalar software.  El
	árbol de ports no contiene el código fuente necesario
	para compilar software; es una gran colección de ficheros que
	automatiza la descarga, la compilación y la instalación
	de paquetes de software de todo tipo.  El
	<a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a> explica con detalle cómo utilizar los
	ports.</p><p>El programa de instalación no comprueba si tiene espacio
	suficiente.  Seleccione esta opción si dispone de sitio
	en el disco.  En FreeBSD 10.1 los ports ocupan cerca de
	500 MB en disco.  Puede asumir tranquilamente que en
	las nuevas versiones del sistema irán ocupando más y
	más.</p><pre class="screen">                         User Confirmation Requested
 Would you like to install the FreeBSD ports collection?

 This will give you ready access to over 24,000 ported software packages,
 at a cost of around 500 MB of disk space when "clean" and possibly much
 more than that if a lot of the distribution tarballs are loaded
 (unless you have the extra CDs from a FreeBSD CD/DVD distribution
 available and can mount it on /cdrom, in which case this is far less
 of a problem).

 The Ports Collection is a very valuable resource and well worth having
 on your /usr partition, so it is advisable to say Yes to this option.

 For more information on the Ports Collection &amp; the latest ports,
 visit:
     http://www.FreeBSD.org/ports

                              [ Yes ]     No</pre><p>Es decir:</p><pre class="screen"> Petición de confirmación del usuario
 ?Quiere instalar la colección de ports de FreeBSD?

 Tendrá acceso inmediato a más de 24,000 paquetes de software listos
 para usarse en FreeBSD, aunque necesitará cerca de 500 MB de
 espacio en disco como mínimo y posiblemente mucho más
 si descarga los 'tarballs' de código fuente (aunque si tiene los CD
 extra de una versión de FreeBSD en CD/DVD puede montarlos en /cdrom, de forma
 que esto dejaría de ser un problema).

 La colección de ports es un recurso extremadamente valioso y es muy
 recomendable que la instale en su partición /usr, así que debería
 responder Sí a la siguiente pregunta.

 Si quiere estar al tanto de las últimas novedades y las últimas
 entradas en la colección de ports visite:
     http://www.FreeBSD.org/ports

                              [ Yes ]     No</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> con las flechas e instale los
	ports o <span class="guibutton">[ No ]</span> para obviar la pregunta.  Pulse
	<span class="keycap"><strong>Intro</strong></span> para seguir con la instalación.
	Volvemos al menú de elección de distribuciones.</p><div class="figure"><a id="distribution-set2"></a><div class="figure-title">Figura 2.25. Confirmar la elección de distribuciones</div><div class="figure-contents"><div class="mediaobject"><img src="install/dist-set2.png" alt="Confirmar la elección de distribuciones" /></div></div></div><br class="figure-break" /><p>Si ya ha elegido todo lo que necesita seleccione
	<span class="guimenuitem">Exit</span> con las flechas, asegúrese de
	que <span class="guibutton">[ OK ]</span> está seleccionado también y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-media"></a>2.8. Elección del medio de instalación</h2></div></div></div><p>Si va a instalar FreeBSD desde CDROM o DVD seleccione
      <span class="guimenuitem">Install from a FreeBSD CD/DVD</span> con las
      flechas.  Una vez <span class="guibutton">[ OK ]</span> está seleccionado pulse
      <span class="keycap"><strong>Intro</strong></span> y siga adelante con la instalación.</p><p>Si quiere usar otro método de instalación seleccione
      la opción correspondiente y siga las instrucciones.</p><p>Pulse <span class="keycap"><strong>F1</strong></span> si necesita acceder a la ayuda del
      medio de instalación elegido.  Pulse <span class="keycap"><strong>Intro</strong></span>
      para regresar al menú de selección de medios.</p><div class="figure"><a id="choose-media"></a><div class="figure-title">Figura 2.26. Choose Installation Media</div><div class="figure-contents"><div class="mediaobject"><img src="install/media.png" alt="Choose Installation Media" /></div></div></div><br class="figure-break" /><div xmlns="" class="note"><h3 class="admontitle">Tipos de instalación desde FTP: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp66214352" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Hay tres tipos de instalación por FTP entre las que
        puede elegir:  FTP activo, FTP pasivo o a través de un
	proxy HTTP.</p><div xmlns="http://www.w3.org/1999/xhtml" class="variablelist"><dl class="variablelist"><dt><span class="term">FTP Activo: <span class="guimenuitem">Install from an FTP
	      server</span>, es decir:
	      «Instalar desde un servidor FTP»</span></dt><dd><p>Esta opción hará que todas las
	      transferencias FTP usen el modo «Activo».
	      No funcionará a través de cortafuegos pero
	      seguramente funcionará con viejos servidores FTP que
	      no soportan el modo pasivo.  Si su conexión se cuelga
	      cuando usa el modo pasivo (el modo por omisión) pruebe el
	      modo activo.</p></dd><dt><span class="term">FTP Pasivo: <span class="guimenuitem">Install from an FTP server through a
	      firewall</span>, es decir
	      «Instalar desde un servidor FTP tras un
	      cortafuegos».</span></dt><dd><a id="idp66219728" class="indexterm"></a><p>Esta opción configura
              <span class="application">sysinstall</span> para que use el
	      modo «Pasivo» para todas las operaciones
	      FTP.  Esto permite al usuario pasar a través de
	      cortafuegos que no permiten conexiones entrantes a
	      puertos TCP aleatorios.</p></dd><dt><span class="term">FTP via un proxy HTTP: <span class="guimenuitem">Install from an FTP server
	      through a http proxy</span>, es decir «Instalar
	      desde un un servidor FTP via un proxy HTTP».</span></dt><dd><a id="idp66227408" class="indexterm"></a><p>Esta opción configura <span class="application">sysinstall</span>
	      para que use el protocolo HTTP (como si fuera un navegador web) para
	      conectarse a un proxy en todas las operaciones FTP.  El proxy
	      traducirá las peticiones del usuario de forma que pasarán
	      a través de un cortafuegos que no permita ningún tipo de
	      conexiones FTP pero ofrezca un proxy HTTP.  Tendrá que configurar
	      los datos del proxy además de los del servidor FTP.</p></dd></dl></div><p xmlns="http://www.w3.org/1999/xhtml">Si quiere usar un servidor proxy FTP tendrá que usar
	el nombre del servidor con el que realmente quiere conectar como
	nombre de usuario seguido de un signo «@».  Veamos un
	ejemplo.  Quiere usted instalar desde
	<code class="systemitem">ftp.FreeBSD.org</code> a través del
	servidor proxy FTP
	<code class="systemitem">talycual.ejemplo.com</code>, que escucha en el
	puerto 1024.</p><p xmlns="http://www.w3.org/1999/xhtml">Vaya al menú opciones, ponga
	<code class="literal">ftp@ftp.FreeBSD.org</code> como nombre de usuario FTP,
	y su dirección de correo electrónico como
	contraseña.  El medio de instalación será FTP
	(o FTP pasivo si el proxy lo permite) y la URL
	<code class="literal">ftp://talycual.ejemplo.com:1234/pub/FreeBSD</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Dado accede al directorio <code class="filename">/pub/FreeBSD</code>
	de <code class="systemitem">ftp.FreeBSD.org</code> a través
	del proxy <code class="systemitem">talycual.ejemplo.com</code> puede usted
	instalar desde <span class="emphasis"><em>ésta</em></span> máquina,
	que irá descargando los ficheros que necesite desde
	<code class="systemitem">ftp.FreeBSD.org</code> a medida que el
	proceso de instalación los vaya requiriendo.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-final-warning"></a>2.9. El punto sin retorno</h2></div></div></div><p>A partir de aquí entramos en la instalación propiamente
      dicha.  Esta es la última oportunidad antes de empezar a escribir
      datos en el disco duro.</p><pre class="screen">                       User Confirmation Requested
 Last Chance! Are you SURE you want to continue the installation?

 If you're running this on a disk with data you wish to save then WE
 STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

 We can take no responsibility for lost disk contents!

                             [ Yes ]    No</pre><p>Es decir:</p><pre class="screen">   Petición de confirmación del usuario
 ¡Última oportunidad!.  ?SEGURO que quiere seguir con la instalación?

 Si está ejecutando este proceso en un disco que contenga datos que
 quiera coservar LE RECOMENDAMOS ENCARECIDAMENTE QUE HAGA COPIAS DE
 SEGURIDAD FIABLES antes de instalar.

 No podemos asumir nigún tipo de responsabilidad por datos que pierda.

                             [ Yes ]    No</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> y pulse
      <span class="keycap"><strong>Intro</strong></span>.</p><p>La instalación tardará más o menos
      tiempo según la distribución que haya elegido, el medio
      de instalación  y la velocidad del sistema.  Se le
      irán mostrando mensajes durante el proceso para irle
      informando de cómo van las cosas.</p><p>Cuando acabe la instalación verá un mensaje como
      este:</p><pre class="screen">                               Message

Congratulations! You now have FreeBSD installed on your system.

We will now move on to the final configuration questions.
For any option you do not wish to configure, simply select No.

If you wish to re-enter this utility after the system is up, you may
do so by typing: sysinstall .

                                 [ OK ]

                      [  Press enter to continue  ]</pre><p>Es decir:</p><pre class="screen">                               Mensaje

         ¡Enhorabuena! Ha instalado FreeBSD en su sistema.

Ahora terminaremos la configuración del sistema.  Si hay alguna
opción que no quiere configurar bastará con que elija No.

Si en algún momento quiere regresar a este programa escriba
sysinstall .

                                 [ OK ]

                      [  Pulse Intro  ]</pre><p>Pulse <span class="keycap"><strong>Intro</strong></span>; pasaremos a acometer ciertas tareas
      posteriores a la instalación.</p><p>Si selecciona <span class="guibutton">[ No ]</span> y pulsa <span class="keycap"><strong>Intro</strong></span>
      la instalación se detendrá para evitar hacer
      más modificaciones en su sistema.  Verá el
      el siguiente mensaje.</p><pre class="screen">                                Message
Installation complete with some errors.  You may wish to scroll
through the debugging messages on VTY1 with the scroll-lock feature.
You can also choose "No" at the next prompt and go back into the
installation menus to retry whichever operations have failed.

                                 [ OK ]</pre><p>Es decir:</p><pre class="screen">                                Mensaje
La instalación ha finalizado con errores.  Puede moverse por la
pantalla de mensajes de depuración de VTY1 tras pulsar la tecla
de Bloqueo de Pantalla.  También puede elegir "No" en el próximo
menú y volver a los menús de instalación y repetir cualquier
operación que haya fallado.

                                 [ OK ]</pre><p>Este mensaje se ha generado porque no se ha instalado nada.
      Pulse <span class="keycap"><strong>Intro</strong></span> para volver al menún
      principal y salir de la instalación.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-post"></a>2.10. Después de la instalación</h2></div></div></div><p>Para poder terminar una instalación de FreeBSD que merezca
      tal nombre debemos responder todavía a unas cuantas preguntas.
      Para ello debemos entrar en la
      configuración antes de entrar en el nuevo sistema FreeBSD o
      una vez en dentro del sistema desde
      <code class="command">sysinstall</code>, seleccionando
      <span class="guimenuitem">Configure</span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inst-network-dev"></a>2.10.1. Network Device Configuration</h3></div></div></div><p>Si ha tenido que configurar PPP para poder instalar desde FTP
        esta pantalla no aparecerá.  Puede modificar la configuración
	tal y como se ha explicado más arriba.</p><p>Si necesita información sobre redes de área local
        y la configuración de FreeBSD necesaria para que haga de
	«gateway/router» consulte el
	<a class="link" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Advanced Networking</a>
	chapter.</p><pre class="screen">                      User Confirmation Requested
   Would you like to configure any Ethernet or SLIP/PPP network devices?

                             [ Yes ]   No</pre><p>Si quiere configurar dispositivos de red seleccione
	<span class="guibutton">[ Yes ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>.  Si no quiere
        seleccione <span class="guibutton">[ No ]</span>.</p><div class="figure"><a id="ed-config1"></a><div class="figure-title">Figura 2.27. Selección de un dispositivo Ethernet</div><div class="figure-contents"><div class="mediaobject"><img src="install/ed0-conf.png" alt="Selección de un dispositivo Ethernet" /></div></div></div><br class="figure-break" /><p>Seleccione con las flechas el interfaz de red que desea
        configurar y pulse
	<span class="keycap"><strong>Enter</strong></span>.</p><pre class="screen">                      User Confirmation Requested
       Do you want to try IPv6 configuration of the interface?

                              Yes   [ No ]</pre><p>En la red local del ejemplo el tipo de protocolo de Internet
	que había (<acronym class="acronym">IPv4</acronym>) parecía más
	que suficiente, así que se eligió <span class="guibutton">[ No ]</span>.</p><p>Si puede conectar con alguna red
        <acronym class="acronym">IPv6</acronym> mediante un servidor
	<acronym class="acronym">RA</acronym> elija
	<span class="guibutton">[ Yes ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>.  La búsqueda de
	servidores RA se hará en unos instantes.</p><pre class="screen">                             User Confirmation Requested
        Do you want to try DHCP configuration of the interface?

                              Yes   [ No ]</pre><p>Si no necesita DHCP seleccione <span class="guibutton">[ No ]</span> con las flechas y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><p>Si selecciona <span class="guibutton">[ Yes ]</span> ejecutará
	<span class="application">dhclient</span> y, si ha funcionado, completará
	los datos de configuración automáticamente.  Para
	más información consulte la
	<a class="xref" href="#network-dhcp" title="29.10. DHCP">Sección 29.10, &#8220;DHCP&#8221;</a>.</p><p>La siguiente ilustración muestra la configuración
        de un dispositivo Ethernet en un sistema que cumplirá las
	funciones de «gateway» en una red local.</p><div class="figure"><a id="ed-config2"></a><div class="figure-title">Figura 2.28. Configuración de ed0</div><div class="figure-contents"><div class="mediaobject"><img src="install/ed0-conf2.png" alt="Configuración de ed0" /></div></div></div><br class="figure-break" /><p>Use el <span class="keycap"><strong>tabulador</strong></span> para ir pasando de un campo al siguiente
        una vez que los vaya rellenando:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Host</span></dt><dd><p>El nombre de la máquina; por ejemplo,
	      <code class="systemitem">k6-2.ejemplo.com</code>.</p></dd><dt><span class="term">Dominio</span></dt><dd><p>El nombre del dominio al que pertenece la máquina, en
	      este caso <code class="systemitem">ejemplo.com</code>.</p></dd><dt><span class="term">«Gateway»IPv4</span></dt><dd><p>La dirección IP del sistema que reenvia paquetes a
	      destinos fuera de la red local. Debe rellenar este campo si
	      esta función la realiza una máquina que forme parte
	      de la red.  <span class="emphasis"><em>Déjelo en blanco</em></span> si el
	      sistema es el enlace de su red con Internet.  El
	      «gateway» recibe también los nombres de
	      puerta de enlace o ruta por omisión.</p></dd><dt><span class="term">Servidor de nombres</span></dt><dd><p>Dirección IP de su servidor local de DNS.  En la red
	      del ejemplo no hay servidor DNS local así que se ha
	      introducido la dirección IP del servidor DNS del proveedor
	      de Internet:
	      <code class="systemitem">208.163.10.2</code>.</p></dd><dt><span class="term">Dirección IPv4</span></dt><dd><p>En este interfaz se usará la dirección IP
	      <code class="systemitem">192.168.0.1</code></p></dd><dt><span class="term">Máscara de red</span></dt><dd><p>En esta red local se usa un bloque de redes de Clase C
	      <code class="systemitem">192.168.0.0</code> -
	      <code class="systemitem">192.168.0.255</code>.  La
	      máscara de red es, por tanto,
	      <code class="systemitem">255.255.255.0</code>.</p></dd><dt><span class="term">Opciones adicionales de ifconfig</span></dt><dd><p>Cualquiera de las opciones que quiera agregar a su interfaz
	      mediante <code class="command">ifconfig</code>.  En nuestro caso no
	      había ninguna.</p></dd></dl></div><p>Utilice el <span class="keycap"><strong>tabulador</strong></span> para seleccionar <span class="guibutton">[ OK ]</span>
	cuando haya acabado y pulse<span class="keycap"><strong>Intro</strong></span>.</p><pre class="screen">                      User Confirmation Requested
        Would you like to Bring Up the ed0 interface right now?

                             [ Yes ]   No</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> y pulse
	<span class="keycap"><strong>Enter</strong></span> si quiere conectar inmediatamente su
	sistema a la red mediante el o los interfaces que acaba de
	configurar, pero recuerde que aún tendrá que
	reiniciar la máquina.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="gateway"></a>2.10.2. Configuración del «gateway»</h3></div></div></div><pre class="screen">                       User Confirmation Requested
       Do you want this machine to function as a network gateway?

                              [ Yes ]    No</pre><p>Si el sistema hará de enlace de la red local y
        reenviará paquetes entre otras máquinas elija <span class="guibutton">[ Yes ]</span>
	y pulse <span class="keycap"><strong>Intro</strong></span>.  Si la máquina es un
	nodo de una red elija <span class="guibutton">[ No ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inetd-services"></a>2.10.3. Configuración de servicios de internet</h3></div></div></div><pre class="screen">                      User Confirmation Requested
Do you want to configure inetd and the network services that it provides?

                               Yes   [ No ]</pre><p>Si selecciona <span class="guibutton">[ No ]</span> varios servicios de la máquina,
	como <span class="application">telnetd</span> y otros, no se
	activarán.  Eso significa que los usuarios remotos no
	podrán acceder al sistema mediante
	<span class="application">telnet</span>.  Los usuarios locales, en cambio,
	podrán acceder a sistemas remotos mediante
	<span class="application">telnet</span>.</p><p>Dichos servicios pueden activarse en cualquier momento
	editando <code class="filename">/etc/inetd.conf</code> con el editor de
	texto que prefiera.  Para más información
	consulte la
	<a class="xref" href="#network-inetd-overview" title="29.14.1. Resumen">Sección 29.14.1, &#8220;Resumen&#8221;</a>.</p><p>Seleccione <span class="guibutton">[ Yes ]</span> si desea configurar estos servicios
	durante la instalación.  Se le mostrará el
	siguiente mensaje:</p><pre class="screen">                      User Confirmation Requested
The Internet Super Server (inetd) allows a number of simple Internet
services to be enabled, including finger, ftp and telnetd.  Enabling
these services may increase risk of security problems by increasing
the exposure of your system.

With this in mind, do you wish to enable inetd?

                             [ Yes ]   No</pre><p>Select <span class="guibutton">[ Yes ]</span> to continue.</p><pre class="screen">                      User Confirmation Requested
inetd(8) relies on its configuration file, /etc/inetd.conf, to determine
which of its Internet services will be available.  The default FreeBSD
inetd.conf(5) leaves all services disabled by default, so they must be
specifically enabled in the configuration file before they will
function, even once inetd(8) is enabled.  Note that services for
IPv6 must be separately enabled from IPv4 services.

Select [Yes] now to invoke an editor on /etc/inetd.conf, or [No] to
use the current settings.

                             [ Yes ]   No</pre><p>Es decir:</p><pre class="screen">      Petición de confirmación del usuario
El Super Servidor de Internet (inetd) le permite activar diversos
servicios sencillos de Internet, como finger, ftp y telnetd.  Si
activa tales servicios puede sobreexponer su sistema al exterior, lo
que puede incrementar el riesgo de tener problemas de seguridad.

Dicho esto ?desea activar inetd?

                             [ Yes ]   No</pre><p>Si selecciona <span class="guibutton">[ Yes ]</span> podrá añadir servicios
	borrando caracteres <code class="literal">#</code> al comienzo de las
	líneas correspondientes.</p><div class="figure"><a id="inetd-edit"></a><div class="figure-title">Figura 2.29. Edición de <code class="filename">inetd.conf</code></div><div class="figure-contents"><div class="mediaobject"><img src="install/edit-inetd-conf.png" alt="Edición de inetd.conf" /></div></div></div><br class="figure-break" /><p>Una vez que haya añadido los servicios que quiera en el
        sistema pulse  <span class="keycap"><strong>Esc</strong></span> y verá un menú en el
	que se le preguntará si quiere guardar los cambios.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ssh-login"></a>2.10.4. Activar el acceso al sistema mediante SSH</h3></div></div></div><a id="idp66323280" class="indexterm"></a><pre class="screen">                      User Confirmation Requested
                  Would you like to enable SSH login?
                           Yes        [  No  ]</pre><p>Si selecciona <span class="guibutton">[ Yes ]</span> activará <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>, el
	dæmon de <span class="application">OpenSSH</span>.  De este modo
	será posible el acceso remoto y seguro al sistema.  Para más
	información sobre <span class="application">OpenSSH</span> visite <a class="xref" href="#openssh" title="14.11. OpenSSH">Sección 14.11, &#8220;OpenSSH&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ftpanon"></a>2.10.5. FTP anónimo</h3></div></div></div><a id="idp66328400" class="indexterm"></a><pre class="screen">                      User Confirmation Requested
 Do you want to have anonymous FTP access to this machine?

                              Yes    [ No ]</pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="deny-anon"></a>2.10.5.1. Rechazar el acceso al sistema mediante FTP anónimo</h4></div></div></div><p>si acepta la respuesta por omisión (<span class="guibutton">[ No ]</span>) y pulsa
	  <span class="keycap"><strong>Intro</strong></span> tenga en cuenta que los usuarios que tengan
	  cuenta en la máquina podrán seguir accediendo
	  al sistema.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ftpallow"></a>2.10.5.2. Aceptar el acceso al sistema mediante FTP anónimo</h4></div></div></div><p>Si decide aceptar conexiones FTP anónimas cualquiera
	  podrá conectarse al sistema.  Antes de activar esta
	  opción debería meditar sobre las implicaciones de
	  seguridad de esa decisión.  Para más información
	  sobre la seguridad y FreeBSD consulte el <a class="xref" href="#security" title="Capítulo 14. Seguridad">Capítulo 14, <em>Seguridad</em></a>.</p><p>Si ha decidido activar el FTP anónimo seleccione con
	  las flechas <span class="guibutton">[ Yes ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>.  Verá la
	  siguiente pantalla (o una muy similar):</p><pre class="screen">This screen allows you to configure the anonymous FTP user.

The following configuration values are editable:

UID:     The user ID you wish to assign to the anonymous FTP user.
         All files uploaded will be owned by this ID.

Group:   Which group you wish the anonymous FTP user to be in.

Comment: String describing this user in /etc/passwd


FTP Root Directory:

        Where files available for anonymous FTP will be kept.

Upload subdirectory:

        Where files uploaded by anonymous FTP users will go.</pre><p>Es decir:</p><pre class="screen">En esta pantalla puede configurar el usuario de FTP
        anónimo.

Puede editar los siguientes valores de la configuración:

UID:     El ID del usuario que quiere asignar al usuario anónimo de
         de FTP.  Todos los ficheros que se suban le  pertenecerán.

Group:   El grupo al que pertenecerá el usuario FTP anónimo.

Comment: La descripción del usuario en /etc/passwd


FTP Root Directory:

        Dónde se guardarán contenidos para los usuarios anónimos.

Upload subdirectory:

        Dónde se guardarán los ficheros que suban los usuarios
	de FTP anónimo.</pre><p>Por omisión el directorio raíz del ftp será
	  <code class="filename">/var</code>.  Si no hay sitio suficiente para
	  lo que prevea que va a necesitar puede usar
	  <code class="filename">/usr</code>; puede poner el Directorio Raíz de
	  FTP en <code class="filename">/usr/ftp</code>.</p><p>Cuando haya terminado con la configuración pulse
	  <span class="keycap"><strong>Intro</strong></span>.</p><pre class="screen">                          User Confirmation Requested
         Create a welcome message file for anonymous FTP users?

                              [ Yes ]    No</pre><p>Si selecciona <span class="guibutton">[ Yes ]</span> y pulsa <span class="keycap"><strong>Intro</strong></span>
	  arrancará automáticamente un editor y podrá
	  crear un mensaje que verá los usuarios de FTP
	  anónimo al conectarse a la máquina.</p><div class="figure"><a id="anon-ftp4"></a><div class="figure-title">Figura 2.30. Edición del mensaje de bienvenida de FTP</div><div class="figure-contents"><div class="mediaobject"><img src="install/ftp-anon2.png" alt="Edición del mensaje de bienvenida de FTP" /></div></div></div><br class="figure-break" /><p>Vemos en acción un editor de texto llamado <code class="command">ee</code>.
	  Puede modificar el mensaje ahora mismo o hacerlo en cualquier otro
	  momento con el editor de texto que prefiera.  Observe el fichero y
	  su ubicación en la parte baja de la pantalla.</p><p>Pulse <span class="keycap"><strong>Esc</strong></span>, aparecerá una ventana flotante
	  con la opción por omisión de
	  to <span class="guimenuitem">a) leave editor</span> (salir del editor).  Pulse
	  <span class="keycap"><strong>Intro</strong></span> si quiere salir y seguir con lo que estaba haciendo.
	  Pulse <span class="keycap"><strong>Intro</strong></span> de nuevo para guardar los cambios que
	  hubiera hecho.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfsconf"></a>2.10.6. Configuración de NFS</h3></div></div></div><p>NFS («Network File System» (de Network File
        System, o Sistema de Ficheros en Red) le permitirá compartir
	ficheros a través de una red.  Una máquina puede
	configurarse como servidor, como cliente o ambos.  Para má
	información consulte la
	<a class="xref" href="#network-nfs" title="29.6. NFS">Sección 29.6, &#8220;NFS&#8221;</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nsf-server-options"></a>2.10.6.1. Servidor NFS</h4></div></div></div><pre class="screen">                       User Confirmation Requested
 Do you want to configure this machine as an NFS server?

                              Yes    [ No ]</pre><p>Si no tiene necesidad de usar un servidor NFS seleccione
	  <span class="guibutton">[ No ]</span> y pulse
	  <span class="keycap"><strong>Intro</strong></span>.</p><p>Si ha elegido <span class="guibutton">[ Yes ]</span> verá un mensaje emergente
	  indicando que hay que crear el fichero
	  <code class="filename">exports</code>.</p><pre class="screen">                               Message
Operating as an NFS server means that you must first configure an
/etc/exports file to indicate which hosts are allowed certain kinds of
access to your local filesystems.
Press [Enter] now to invoke an editor on /etc/exports
                               [ OK ]</pre><p>Es decir:</p><pre class="screen">                               Mensaje
Hacer funcionar un servidor NFS implica que tendrá que configurar
un fichero /etc/exports para indicar qué hosts estarán autorizados a
acceder de qué manera a sus sistemas de ficheros locales.
Pulse [Intro] para abrir /etc/exports en un editor
                               [ OK ]</pre><p>Pulse <span class="keycap"><strong>Intro</strong></span> para seguir adelante.  Se
	  abrirá un editor de texto gracias al cual se podrá
	  editar y crear el fichero <code class="filename">exports</code>.</p><div class="figure"><a id="nfs-server-edit"></a><div class="figure-title">Figura 2.31. Edición de <code class="filename">exports</code></div><div class="figure-contents"><div class="mediaobject"><img src="install/nfs-server-edit.png" alt="Edición de exports" /></div></div></div><br class="figure-break" /><p>Puede editar el fichero ahora mismo o más tarde con
	  el editor de texto que prefiera.  Observe que el nombre del
	  fichero y su ubicación aparecen en la parte de abajo de
	  de la pantalla.</p><p>Pulse <span class="keycap"><strong>Escape</strong></span>; aparecerá un mensaje
	  emergente que por omisión le ofrecerá
	  <span class="guimenuitem">a) leave editor</span> (es decir, salir del
	  editor).  Pulse <span class="keycap"><strong>Intro</strong></span> para salir del editor y
	  seguir adelante.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfs-client-options"></a>2.10.6.2. Cliente NFS</h4></div></div></div><p>El cliente NFS permite que su máquina pueda acceder
	  a servidores NFS.</p><pre class="screen">                       User Confirmation Requested
 Do you want to configure this machine as an NFS client?

                              Yes   [ No ]</pre><p>Utilice las flechas para elegir si quiere o no disponer de
	  cliente NFS (respectivamente con <span class="guibutton">[ Yes ]</span> y
	  <span class="guibutton">[ No ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="console"></a>2.10.7. Configuración de la consola del sistema</h3></div></div></div><p>La consola del sistema tiene diversas opciones que puede usted
         adaptar a sus gustos o necesidades.</p><pre class="screen">                      User Confirmation Requested
       Would you like to customize your system console settings?

                              [ Yes ]  No</pre><p>Si  quiere ver y modificar las opciones seleccione
	<span class="guibutton">[ Yes ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="saver-options"></a><div class="figure-title">Figura 2.32. Opciones de configuración de la consola del sistema</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver1.png" alt="Opciones de configuración de la consola del sistema" /></div></div></div><br class="figure-break" /><p>Una opción que suele elegirse es el uso del
	salvapantallas.  Elija <span class="guimenuitem">Saver</span> y
	luego pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="saver-select"></a><div class="figure-title">Figura 2.33. Opciones del salvapantallas</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver2.png" alt="Opciones del salvapantallas" /></div></div></div><br class="figure-break" /><p>Desplácese arriba y abajo con las flechas por la
	lista de salvapantallas y elija el que prefiera pulsando
	<span class="keycap"><strong>Intro</strong></span> sobre él.  Se le mostrará
	de nuevo el menú de configuración de la consola.</p><p>El intervalo por defecto es de 300 segundos.  Si quiere cambiarlo
	seleccione <span class="guimenuitem">Saver</span> otra vez.  Busque
	<span class="guimenuitem">Timeout</span> en el menú de opciones del
	salvapantallas y pulse <span class="keycap"><strong>Intro</strong></span>.  Aparecerá un
	mensaje en pantalla:</p><div class="figure"><a id="saver-timeout"></a><div class="figure-title">Figura 2.34. Retardo del salvapantallas</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver3.png" alt="Retardo del salvapantallas" /></div></div></div><br class="figure-break" /><p>Asigne el retardo del salvapantallas a su gusto, seleccione
	<span class="guibutton">[ OK ]</span> y pulse <span class="keycap"><strong>Intro</strong></span> para volver al menú de
	configuración de la consola del sistema.</p><div class="figure"><a id="saver-exit"></a><div class="figure-title">Figura 2.35. Salida del menú de configuración de la consola del sistema</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver4.png" alt="Salida del menú de configuración de la consola del sistema" /></div></div></div><br class="figure-break" /><p>Seleccione <span class="guimenuitem">Exit</span> y pulse
	<span class="keycap"><strong>Intro</strong></span> para seguir adelante con la configuración
	necesaria tras la instalación.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="timezone"></a>2.10.8. Configuración de la zona horaria</h3></div></div></div><p>Si su sistema tiene correctamente configurada la zona
	horaria podrá corregir cualquier automáticamente
	cualquier cambio horario regional, así como cumplir
	adecuadamente con otras funciones relacionadas con zonas
	horarias.</p><p>El ejemplo que se muestra en las capturas de pantalla es
	de una máquina ubicada en la zona horaria del Este de los
	EEUU.</p><pre class="screen">                      User Confirmation Requested
          Would you like to set this machine's time zone now?

                            [ Yes ]   No</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.  Vamos a configurar la zona horaria del
	sistema.</p><p>Seleccione <span class="guibutton">[ Yes ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><pre class="screen">                       User Confirmation Requested
 Is this machine's CMOS clock set to UTC? If it is set to local time
 or you don't know, please choose NO here!

                              Yes   [ No ]</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> o <span class="guibutton">[ No ]</span> según esté
	configurado el reloj del sistema y pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="set-timezone-region"></a><div class="figure-title">Figura 2.36. Elección de región</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone1.png" alt="Elección de región" /></div></div></div><br class="figure-break" /><p>Elija la zona adecuada mediante las flechas y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="set-timezone-country"></a><div class="figure-title">Figura 2.37. Elección de país</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone2.png" alt="Elección de país" /></div></div></div><br class="figure-break" /><p>Elija el país adecuado con las flechas y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="set-timezone-locality"></a><div class="figure-title">Figura 2.38. Elección de zona horaria</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone3.png" alt="Elección de zona horaria" /></div></div></div><br class="figure-break" /><p>Elija la zona horaria adecuada con las flechas y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><pre class="screen">                            Confirmation
            Does the abbreviation 'EDT' look reasonable?

                            [ Yes ]   No</pre><p>Confirme si la abreviatura de la zona horaria es la correcta.  Cuando
        todo esté correcto pulse <span class="keycap"><strong>Intro</strong></span> y siga
	adelante.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxcomp"></a>2.10.9. Compatibilidad con <span class="trademark">Linux</span>®</h3></div></div></div><pre class="screen">                      User Confirmation Requested
          Would you like to enable Linux binary compatibility?

                            [ Yes ]   No</pre><p>Si selecciona <span class="guibutton">[ Yes ]</span> y pulsa
	<span class="keycap"><strong>Intro</strong></span> podrá ejecutar software <span class="trademark">Linux</span>® en
	FreeBSD.  La instalación añadirá los paquetes
	necesarios para poder tener compatibilidad binaria con
	<span class="trademark">Linux</span>®.</p><p>Si realiza la instalación por FTP la máquina
	necesitará conectarse a Internet.  A veces los servidores
	ftp no tienen todas las distribuciones, de forma que si no puede
	instalar la distribución de compatibilidad con <span class="trademark">Linux</span>® no se
	preocupe, puede probar con otro servidor o instalarla más
	tarde.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mouse"></a>2.10.10. Configuración del ratón</h3></div></div></div><p>Esta opción le permitirá cortar y pegar texto en
	consola y en otros programas mediante un ratón de tres
	botones.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">moused</span>(8)</span></a> si usa uno de 2 botones, es posible
	emular ese tercer botón.  En el siguiente ejemplo veremos la
	configuración de un ratón «no USB» (es
	decir, PS/2 o de puerto COM):</p><pre class="screen">                      User Confirmation Requested
         Does this system have a PS/2, serial, or bus mouse?

                            [ Yes ]    No </pre><p>Seleccione <span class="guibutton">[ Yes ]</span> si tiene un ratón que no sea USB o por el
	contrario seleccione <span class="guibutton">[ No ]</span> si tiene un ratón USB.  Después
	pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="mouse-protocol"></a><div class="figure-title">Figura 2.39. Elija el protocolo que usa el ratón</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse1.png" alt="Elija el protocolo que usa el ratón" /></div></div></div><br class="figure-break" /><p>Seleccione <span class="guimenuitem">Type</span> usando las flechas
	y pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="set-mouse-protocol"></a><div class="figure-title">Figura 2.40. Ajuste del protocolo del ratón</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse2.png" alt="Ajuste del protocolo del ratón" /></div></div></div><br class="figure-break" /><p>En el ejemplo se ha usado un ratón PS/2, así que
	<span class="guimenuitem">Auto</span> era correcto.  Para cambiar el
	protocolo use las flechas para moverse por el menú y elegir otra
	opción.  Para salir seleccione <span class="guibutton">[ OK ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="config-mouse-port"></a><div class="figure-title">Figura 2.41. Configuración del puerto del ratón</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse3.png" alt="Configuración del puerto del ratón" /></div></div></div><br class="figure-break" /><p>Seleccione <span class="guimenuitem">Port</span> y
	pulse <span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="set-mouse-port"></a><div class="figure-title">Figura 2.42. Configuración del puerto del ratón</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse4.png" alt="Configuración del puerto del ratón" /></div></div></div><br class="figure-break" /><p>El sistema de ejemplo tiene un ratóna
        <span class="guimenuitem">PS/2</span>, de forma que
        la configuración por omisión basta.  Si quiere modificarla
	utilice las flechas y después pulse<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="test-daemon"></a><div class="figure-title">Figura 2.43. Arranque del dæmon del ratón</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse5.png" alt="Arranque del dæmon del ratón" /></div></div></div><br class="figure-break" /><p>Por último, utilice las flechas para elegir
	<span class="guimenuitem">Enable</span>y pulse
	<span class="keycap"><strong>Intro</strong></span>; así se activa y prueba el
	dæmon del ratón.</p><div class="figure"><a id="test-mouse-daemon"></a><div class="figure-title">Figura 2.44. Prueba del dæmon del ratón</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse6.png" alt="Prueba del dæmon del ratón" /></div></div></div><br class="figure-break" /><p>Mueva el ratón un poco por la pantalla hasta
	asegurarse de que el cursor responde adecuadamente.  Si todo
	es correcto seleccione <span class="guibutton">[ Yes ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.  Si hay algo que no funcione correctamente
	seleccione <span class="guibutton">[ No ]</span> e inténtelo con otras opciones de
	configuración.</p><p>Seleccione <span class="guimenuitem">Exit</span> y pulse
	<span class="keycap"><strong>Intro</strong></span> para volver a la configuración
	del sistema.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="packages"></a>2.10.11. Instalación de «packages»</h3></div></div></div><p>Los «packages» son binarios precompilados; son una
        forma muy cómoda de instalar software.</p><p>Veamos la instalación de un «package»   Este
        es un buen momento para instalar «packages» si
	así lo desea.  De todos modos una vez concluida la instalación
	puede entrar cuando quiera a
	<code class="command">sysinstall</code> e instalar lo que necesite.</p><pre class="screen">                     User Confirmation Requested
 The FreeBSD package collection is a collection of hundreds of
 ready-to-run applications, from text editors to games to WEB servers
 and more. Would you like to browse the collection now?

                            [ Yes ]   No</pre><p>Elija <span class="guibutton">[ Yes ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>: verá la pantalla de
	selección de paquetes:</p><div class="figure"><a id="package-category"></a><div class="figure-title">Figura 2.45. Categorías de «packages»</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-cat.png" alt="Categorías de «packages»" /></div></div></div><br class="figure-break" /><p>Los «packages» presentes en el medio de instalación
	que esté accesible en cada momento son los únicos que
	se pueden instalar.</p><p>Todos los «packages» disponibles en el medio se
        mostrarán al seleccionar la categoría
	<span class="guimenuitem">All</span>.  Elija una categoría y pulse
	<span class="keycap"><strong>Intro</strong></span>.</p><p>Al seleccionar una categoría aparecerá un
	menú con los paquetes disponibles existentes en la misma:</p><div class="figure"><a id="package-select"></a><div class="figure-title">Figura 2.46. Selección de «packages»</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-sel.png" alt="Selección de «packages»" /></div></div></div><br class="figure-break" /><p>Hemos elegido la shell <span class="application">bash</span>.
	Seleccione tantos «packages» como quiera instalar y pulse
	<span class="keycap"><strong>Espacio</strong></span>.  Se mostrará una breve
	descripción de cada  «package» en la esquina inferior
	izquierda de la pantalla.</p><p>Pulsando el <span class="keycap"><strong>Tabulador</strong></span> desplazará el
	cursor entre el último  «package» que haya seleccionado,
	<span class="guibutton">[ OK ]</span> y <span class="guibutton">[ Cancel ]</span>.</p><p>Cuando haya seleccionado todos los «packages» que quiera
	instalar pulse <span class="keycap"><strong>Tabulador</strong></span> una sola vez para que
	el cursor pase a <span class="guibutton">[ OK ]</span> y pulse <span class="keycap"><strong>Intro</strong></span>, lo que
	le llevará al menú de selección de
	 «packages».</p><p>Las flechas «izquierda» y «derecha»
	 pueden usarse para mover el cursor entre <span class="guibutton">[ OK ]</span> y <span class="guibutton">[ Cancel ]</span>.
	 Use esto para seleccionar <span class="guibutton">[ OK ]</span> y pulsar
	<span class="keycap"><strong>Intro</strong></span> para volver al menú de
	selección de  «packages».</p><div class="figure"><a id="package-install"></a><div class="figure-title">Figura 2.47. Instalación de «packages»</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-install.png" alt="Instalación de «packages»" /></div></div></div><br class="figure-break" /><p>Utilice el <span class="keycap"><strong>tabulador</strong></span> y las flechas para seleccionar
        <span class="guibutton">[ Install ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span>.  Se le pedirá que confirme que quiere
	instalar «packages»:</p><div class="figure"><a id="package-install-confirm"></a><div class="figure-title">Figura 2.48. Confirmación previa a la instalación de «packages»</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-confirm.png" alt="Confirmación previa a la instalación de «packages»" /></div></div></div><br class="figure-break" /><p>Si selecciona <span class="guibutton">[ OK ]</span> y pulsa <span class="keycap"><strong>Intro</strong></span>
	comenzará la instalación de «packages».  Irán
	apareciendo mensajes relacionados con los diversos procesos de
	instalación hasta que se cumplan todos.  Esté atento
	por si aparecieran mensajes de error.</p><p>Tras la instalación de «packages» nos
	quedan unos toques finales a la configuración.  Si no ha
	elegido ningún «package» y quiere regresar
	al menú de configuración seleccione
	<span class="guibutton">Install</span> de todos modos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="addusers"></a>2.10.12. Añadir usuarios y grupos</h3></div></div></div><p>Deberí al menos añadir un usuario al sistema
	para poder usarlo para acceder al sistema una vez reiniciado sin
	tener que recurrir a <code class="systemitem">root</code>.  La partición
	raíz suele ser pequeña y ejecutar aplicaciones como
	<code class="systemitem">root</code> tiene a llenarla rápidamente.
	Pero hay un peligro mucho mayor:</p><pre class="screen">                     User Confirmation Requested
 Would you like to add any initial user accounts to the system? Adding
 at least one account for yourself at this stage is suggested since
 working as the "root" user is dangerous (it is easy to do things which
 adversely affect the entire system).

                            [ Yes ]   No</pre><p>Es decir:</p><pre class="screen">     Petición de confirmación del usuario
 ?Quiere añadir algún usuario al sistema? Le sugerimos que añada al menos
 uno para usted puesto que trabajar como "root" es peligroso (es fácil
 hacer algo con consecuencias en todo el sistema).

                            [ Yes ]   No</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> y pulse
	<span class="keycap"><strong>Intro</strong></span> para añadir un usuario.</p><div class="figure"><a id="add-user2"></a><div class="figure-title">Figura 2.49. Selección de «Añadir un usuario»</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser1.png" alt="Selección de «Añadir un usuario»" /></div></div></div><br class="figure-break" /><p>Seleccione <span class="guimenuitem">User</span> con las flechas y
	y pulse<span class="keycap"><strong>Intro</strong></span>.</p><div class="figure"><a id="add-user3"></a><div class="figure-title">Figura 2.50. Añadir la información del usuario</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser2.png" alt="Añadir la información del usuario" /></div></div></div><br class="figure-break" /><p>A medida que vaya seleccionando los campos ayudándose del
	<span class="keycap"><strong>Tabulador</strong></span> se le irán mostrando las siguientes
	descripciones en la parte baja de la pantalla:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Login ID</span></dt><dd><p>El nombre del usuario (obligatorio).</p></dd><dt><span class="term">UID</span></dt><dd><p>El ID numérico del usuario Déjelo
	      en blanco si quiere el que sistema lo asigne
	      automáticamente.</p></dd><dt><span class="term">Group</span></dt><dd><p>El grupo al que pertenecerá el usuario.  Déjelo
	      en blanco si quiere que el sistema lo asigne
	      automáticamente.</p></dd><dt><span class="term">Password</span></dt><dd><p>La contraseña del usuario. <span class="emphasis"><em>Rellene este campo con
	      mucho cuidado</em></span>.</p></dd><dt><span class="term">Full name</span></dt><dd><p>El nombre completo del usuario (o un comentario
	    descriptivo.</p></dd><dt><span class="term">Member groups</span></dt><dd><p>Los grupos a los que este usuario pertenece, es decir, de los que
	      hereda sus derechos de acceso.</p></dd><dt><span class="term">Home directory</span></dt><dd><p>El directorio «home» del usuario; déjelo en
	      blanco si quiere que el sistema lo asigne
	      automáticamente.</p></dd><dt><span class="term">Login shell</span></dt><dd><p>La shell con la que el usuario accederá al
	      sistema.  Déjela en blanco si le sirve
	      <code class="filename">/bin/sh</code>, la shell por
	      omisión.</p></dd></dl></div><p>En nuestro ejemplo no se eligió
        <code class="filename">/bin/sh</code> sino
	<code class="filename">/usr/local/bin/bash</code>, para lo cual hubo que
	instalar previamente la shell <span class="application">bash</span>
	como «package».  No intente usar una shell que no
	existe o no podrá acceder al sistema con ese usuario.  La
	shell más habitual en el mundo BSD es
	<code class="filename">/bin/tcsh</code>, la «C shell».</p><p>El usuario se añadió también al grupo
        <code class="systemitem">wheel</code> para que pueda convertirse en
	superusuario con privilegios de
	<code class="systemitem">root</code>.</p><p>Cuando haya terminado pulse <span class="guibutton">[ OK ]</span> y volverá al menú
        de gestión de grupos y usuarios.</p><div class="figure"><a id="add-user4"></a><div class="figure-title">Figura 2.51. Salir de la gestión de usuarios y grupos</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser3.png" alt="Salir de la gestión de usuarios y grupos" /></div></div></div><br class="figure-break" /><p>Los grupos también pueden añadirse en este
	momento si fuera necesario.  También puede hacerse desde
	<code class="filename">sysinstall</code> una vez culminada la
	instalación.</p><p>Cuando haya acabado de añadir usuarios seleccione
	<span class="guimenuitem">Exit</span> con las flechas y pulse
	<span class="keycap"><strong>Intro</strong></span> y siga con la instalación.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rootpass"></a>2.10.13. Asignar contraseña a<code class="systemitem">root</code> Password</h3></div></div></div><pre class="screen">                        Message
 Now you must set the system manager's password.
 This is the password you'll use to log in as "root".

                         [ OK ]

               [ Press enter or space ]</pre><p>Es decir:</p><pre class="screen">                        Mensaje
 Debe asignar la contraseña del administrador del sistema.
 Esta es la contraseña que usará cuando acceda al sistema como
 "root".

                         [ OK ]

                    [ Pulse Intro ]</pre><p>Pulse <span class="keycap"><strong>Intro</strong></span> y asígnele una
	contraseña a <code class="systemitem">root</code>.</p><p>Tendrá que escribir la contraseña correctamente
	dos veces.  No hay necesidad de decirle que es importante que
	recuerde esa contraseña.</p><pre class="screen">New password:
Retype new password :</pre><p>La instalación proseguirá una vez que introduzca
        la contraseña correctamente dos veces.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="exit-inst"></a>2.10.14. Salir de la instalación</h3></div></div></div><p>Si tiene que configurar <a class="link" href="#network-services" title="2.10.15. Configuración de servicios de red">servicios de
        red</a> o cualquier otra cosa, puede hacerlo ahora mismo
	o tras terminar la instalación ejecutando
	<code class="command">sysinstall</code>.</p><pre class="screen">                     User Confirmation Requested
 Visit the general configuration menu for a chance to set any last
 options?

                              Yes   [ No ]</pre><p>Seleccione <span class="guibutton">[ No ]</span> con las flechas
	y pulse <span class="keycap"><strong>Intro</strong></span> para volver al menú
	principal de la instalación.</p><div class="figure"><a id="final-main"></a><div class="figure-title">Figura 2.52. Salir de la instalación</div><div class="figure-contents"><div class="mediaobject"><img src="install/mainexit.png" alt="Salir de la instalación" /></div></div></div><br class="figure-break" /><p>Seleccione <span class="guibutton">[X Exit Install]</span> con las flechas
	y pulse <span class="keycap"><strong>Intro</strong></span>.  Se le pedirá que confirme que
	quiere salir de la instalación:</p><pre class="screen">                     User Confirmation Requested
 Are you sure you wish to exit? The system will reboot (be sure to
 remove any floppies/CDs/DVDs from the drives).

                            [ Yes ]   No</pre><p>Es decir:</p><pre class="screen">            Petición del Confirmación al usuario
 ?Seguro que quiere salir?  El sistema reiniciará (compruebe que
 ha retirado los disquetes de la unidad).

                            [ Yes ]   No</pre><p>Seleccione <span class="guibutton">[ Yes ]</span> y extraiga el disquete si ha arrancado desde
	floppy.  La unidad CDROM está bloqueada hasta que la
	máquina comience a reiniciarse.  La unidad CDROM se desbloquea
	y (actuando con agilidad felina) puede extraerse el CDROM.</p><p>El sistema reiniciará. Esté atento por si aparece
	algún mensaje de error.</p><p>Seleccione <span class="guibutton">[ Yes ]</span> y extraiga el disquete si ha arrancado desde
	floppy.  La unidad lectora de CDROM está bloqueada hasta que
	la máquina comience a reiniciarse.  La unidad CDROM se
	desbloquea y (actuando con agilidad felina) puede extraerse el
	CDROM.</p><p>Si apareciera algún error durante el arranque consulte la
	<a class="xref" href="#freebsdboot" title="2.10.16. El arranque de FreeBSD">Sección 2.10.16, &#8220;El arranque de FreeBSD&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-services"></a>2.10.15. Configuración de servicios de red</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>La configuración de servicios de red puede ser una
        tarea peliaguda para usuarios inexpertos si no tienen
	demasiados conocimientos en la materia.  Todo lo relacionado
	con las redes (y ahí entra Internet) tiene una
	importancia crítica en cualquier sistema operativo
	moderno y FreeBSD no es una excepción.  Es por esta
	razón que le será muy útil saber un
	poco sobre la conectividad en general de FreeBSD desde el momento
	mismo de la instalación y los servicios de que puede
	disponer.</p><p>Los servicios de red son programas que aceptan entradas de
        datos desde cualquier punto de la red.  Se pone mucho empeño
	en evitar que estos programas puedan ser «dañinos»
	pero por desgracia los programadores no son perfectos y
	de tanto en cuanto aparecen errores en los servicios de red
	que algunos logran aprovechar para hacer maldades.  Es crucial
	que solamente active los servicios que sabe que va a necesitar.
	Si tiene dudas con alguno lo mejor es que no lo active hasta
	que no sea evidente que lo necesita.  Puede activarlo cuando
	sea necesario ejecutando
	later by re-running <span class="application">sysinstall</span> o
	utilizando el fichero <code class="filename">/etc/rc.conf</code> file.</p><p>Si selecciona la opción <span class="guimenu">Networking</span> verá
        un menú muy parecido a este:</p><div class="figure"><a id="network-configuration"></a><div class="figure-title">Figura 2.53. Primer nivel de servicios de red</div><div class="figure-contents"><div class="mediaobject"><img src="install/net-config-menu1.png" alt="Primer nivel de servicios de red" /></div></div></div><br class="figure-break" /><p>La primera opción, <span class="guimenuitem">Interfaces</span>, la hemos
	visto en la <a class="xref" href="#inst-network-dev" title="2.10.1. Network Device Configuration">Sección 2.10.1, &#8220;Network Device Configuration&#8221;</a>, así que podemos
	ignorarla.</p><p>Si selecciona la opción <span class="guimenuitem">AMD</span>
	añadirá al sistema la aplicación montaje
	automático de dispositivos de <acronym class="acronym">BSD</acronym>.  Suele usarse
	junto con el protocolo <acronym class="acronym">NFS</acronym> protocol (ver más
	adelante) para automatizar el montaje de sistemas de ficheros remotos.
	No es necesario que configure nada.</p><p>La siguiente opción es <span class="guimenuitem">AMD Flags</span>.
        Si la selecciona verá un menú emergente que le
	requerirá parámetros específicos de
	<acronym class="acronym">AMD</acronym>.  El menú dispone ya de un
	conjunto de opciones por omisión:</p><pre class="screen">-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map</pre><p>La opción <code class="option">-a</code> fija el punto de montaje
        por omisión, en este caso
	<code class="filename">/.amd_mnt</code>.  La opción <code class="option">-l</code>
	indica el <code class="filename">log</code> por omisió, aunque si
	usa <code class="literal">syslogd</code> todos los datos de log se
	enviarán al dæmon de logs del sistema.  El directorio
	<code class="filename">/host</code> se usa para montar
	sistemas de ficheros exportados desde una máquina remota, mientras que
	el directorio <code class="filename">/net</code> se usa
	para montar sistemas de ficheros exportados desde una dirección
	<acronym class="acronym">IP</acronym>.  El fichero
	<code class="filename">/etc/amd.map</code> define las opciones de exportación
	que <acronym class="acronym">AMD</acronym> exporta por omisión.</p><a id="idp66611024" class="indexterm"></a><p>La opción <span class="guimenuitem">Anon FTP</span> permite
	conexiones <acronym class="acronym">FTP</acronym> anónimas.  Seleccione esta
	opción si quiere utilizar la máquina como servidor
	servidor <acronym class="acronym">FTP</acronym> anónimo.  Tenga muy en cuenta
	los riesgos de seguridad que conlleva esta opción.  Se le
	ofrecerá otro menú en el que se explican en profundidad
	los riesgos de seguridad y la configuración.</p><p>El menú de configuración <span class="guimenuitem">Gateway</span>
        preparará la máquina para que cumpla las funciones de
	pasarela, tal y como se ha explicado previamente.  Puede utilizarlo
	también para desactivar la opción
	<span class="guimenuitem">Gateway</span> si la seleccionón sin querer
	durante la instalación.</p><p>La opción <span class="guimenuitem">Inetd</span> permite desactivar
        el dæmon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p><p>La opción <span class="guimenuitem">Mail</span> se usa para configurar
	el <acronym class="acronym">MTA</acronym> (de Mail Transfer Agent, agente de transferencia
	de correo) del sistema.  Si selecciona esta opción llegará
	al siguiente menú:</p><div class="figure"><a id="mta-selection"></a><div class="figure-title">Figura 2.54. Elegir el MTA del sistema</div><div class="figure-contents"><div class="mediaobject"><img src="install/mta-main.png" alt="Elegir el MTA del sistema" /></div></div></div><br class="figure-break" /><p>Aquí se le pide que elija qué
	<acronym class="acronym">MTA</acronym> quiere instalar en su sistema.
	Un <acronym class="acronym">MTA</acronym> no es otra cosa que un servidor de correo
	que entrega correo electrónico a los usuarios del sistema
	o los que acceden a través de Internet.</p><p>Si selecciona <span class="guimenuitem">Sendmail</span> instalará
	el célebre <span class="application">sendmail</span>, el
	<acronym class="acronym">MTA</acronym> de FreeBSD por omisión.  La opción
	<span class="guimenuitem">Sendmail local</span> hará que
	<span class="application">sendmail</span> sea el
	<acronym class="acronym">MTA</acronym> del sistema pero desactivará la
	capacidad de recibir correo entrante desde Internet.  Las demás
	opciones,
	<span class="guimenuitem">Postfix</span> y
	<span class="guimenuitem">Exim</span> son en el fonodo similares a
	<span class="guimenuitem">Sendmail</span>.  Ambas aplicaciones gestionan
	correo aunque hay usuarios que los elegirían como su
	 <acronym class="acronym">MTA</acronym> antes que
	<span class="application">sendmail</span>.</p><p>Tras elegir un <acronym class="acronym">MTA</acronym> (o si ha elegido
	no usar ninguno) el menú de configuración de red nos muestra
	la siguiente opción:<span class="guimenuitem">NFS client</span>.</p><p>La opción <span class="guimenuitem">NFS client</span>
	configura el sistema para comunicarse con servidores
	<acronym class="acronym">NFS</acronym>.  Un servidor <acronym class="acronym">NFS</acronym>
	permite que, mediante el uso del protocolo  <acronym class="acronym">NFS</acronym>,
	otras máquinas de la red puedan acceder a sus sistemas de
	ficheros.  Si no hay más máquinas en su red puede dejar
	la opción sin seleccionar.  El sistema puede necesitar
	más configuración; consulte la
	<a class="xref" href="#network-nfs" title="29.6. NFS">Sección 29.6, &#8220;NFS&#8221;</a> para más información sobre
	cómo configurar el cliente y el servidor.</p><p>La siguiente opción es <span class="guimenuitem">NFS server</span>,
	que le permitirá configurar su sistema como servidor
	<acronym class="acronym">NFS</acronym>.  Con esta opción añadirá
	la información necesaria para el arranque de <acronym class="acronym">RPC</acronym>,
	los servicios de llamada de procedimientos remotos.
	<acronym class="acronym">RPC</acronym> se usa para coordinar conexiones entre
	sistemas y programas.</p><p>La siguiente opción es <span class="guimenuitem">Ntpdate</span>,
	la sincronización de la hora.  Al seleccionarla verá un
	menú como este:</p><div class="figure"><a id="Ntpdate-config"></a><div class="figure-title">Figura 2.55. Configuración de Ntpdate</div><div class="figure-contents"><div class="mediaobject"><img src="install/ntp-config.png" alt="Configuración de Ntpdate" /></div></div></div><br class="figure-break" /><p>Elija en el menú el servidor más cercano
        al lugar donde está la máquina.  De este modo
	la sincronozación será más precisa, puesto
	que un servidor más lejano puede padecer de conexiones
	con más latencia.</p><p>La siguiente opción es <acronym class="acronym">PCNFSD</acronym>.
	Esta opción instalará el «package»
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pcnfsd/pkg-descr">net/pcnfsd</a> desde la colección
	de Ports.  Es una aplicación muy útil que da
	servicios de autentificación <acronym class="acronym">NFS</acronym> a
	sistemas que son incapaces de tenerlos por sí mismos,
	como por ejemplo el sistema operativo <span class="trademark">MS-DOS</span>® de
	Microsoft.</p><p>Si usa las flechas podrá ver más
	opciones:</p><div class="figure"><a id="Network-configuration-cont"></a><div class="figure-title">Figura 2.56. Segundo nivel de configuración de red</div><div class="figure-contents"><div class="mediaobject"><img src="install/net-config-menu2.png" alt="Segundo nivel de configuración de red" /></div></div></div><br class="figure-break" /><p>Las aplicaciones <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpcbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpcbind</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.statd</span>(8)</span></a> y
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.lockd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.lockd</span>(8)</span></a> utilities se utilizan en las llamadas de
	procesos remotos (<acronym class="acronym">RPC</acronym>).
	<code class="command">rpcbind</code> gestiona la comunicación
	entre servidores y clientes  <acronym class="acronym">NFS</acronym>; los
	servidores <acronym class="acronym">NFS</acronym> lo necesitan para poder
	funcionar correctamente.  El dæmon <span class="application">rpc.statd</span>
	se comunica con el dæmon <span class="application">rpc.statd</span>
	de otras máquinas para facilitar seguimiento de estado.  La
	información de estado se deposita por omisión en
	<code class="filename">/var/db/statd.status</code>.  La siguiente opción
	que vemos es <span class="guimenuitem">rpc.lockd</span>; si se selecciona
        facilita servicios de bloqueo de ficheros.  Se suele usar conjuntamente
	con <span class="application">rpc.statd</span> para monitorizar qué
	máquina pide bloqueos y con qué frecuencia.
	Si bien es cierto que estas dos útimas opciones son
	fantásticas para depuración, también lo es
	que no son necesarias para que clientes y servidores
	<acronym class="acronym">NFS</acronym> funcionen correctamente.</p><p>El siguiente elemento de la lista es
	<span class="guimenuitem">Routed</span>, un dæmon de encaminamiento.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a> gestiona tablas de rutas, encuentra
	«routers» multicast y, bajo petición, facilita
	una copia de la tabla de rutas a cualquier máquina conectada
	físicamente a la red.  Suele usarse principalmente en
	máquinas que hacen funciones de pasarela de una red
	local.  Si la selecciona verá un menú en el que se
	le requerirá que indique la ubicación de la
	aplicación.  Por omisión ya está
	configurada, así que basta que la confirme pulsando
	<span class="keycap"><strong>Intro</strong></span> key.  Se le presentará un menú
	más, pidiendole esta vez parámetros que quiera
	proporcionarle a <span class="application">routed</span>.  Por omisión
	<code class="option">-q</code> estará ya dispuesto y debería
	aparecer así en pantalla.</p><p>La siguiente opción que aparece es
        <span class="guimenuitem">Rwhod</span>; si la selecciona arrancará
	el dæmon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rwhod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rwhod</span>(8)</span></a> durante el arranque del sistema.
	La aplicación <code class="command">rwhod</code> envía mensajes
	del sistema (en broadcast) periódicamente a través
	de la red, o si está en modo «consumer» los
	va recogiendo.  Tiene más información en las
	páginas de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruptime&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ruptime</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rwho&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rwho</span>(1)</span></a>.</p><p>La siguiente opción del menú está
        relacionada con el dæmon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>.  Se trata del
	servidor de shell segura de
	<span class="application">OpenSSH</span> y le recomendamos encarecidamente
	su uso en lugar de los servidores <span class="application">telnet</span>
	y <acronym class="acronym">FTP</acronym>.  El servidor <span class="application">sshd</span>
	se usa para crear una conexión segura de una máquina a
	otra mediante conexiones cifradas.</p><p>La última opción es
        <span class="guimenuitem">TCP Extensions</span>, que activa
	las extensiones <acronym class="acronym">TCP</acronym> definidas en las
	<acronym class="acronym">RFC</acronym> 1323 y
	<acronym class="acronym">RFC</acronym> 1644.  En algunas máquinas puede
	acelerar conexiones, pero también puede haber conexiones que
	se pierdan.  No se recomienda su uso en servidores, pero puede ser
	de utilidad en máquinas aisladas.</p><p>Una vez configurados los servicios de red, vaya al principio del
        menú ( <span class="guimenuitem">X Exit</span>)a o vuelva a

	<span class="application">sysinstall</span> seleccionando dos veces
	<span class="guimenuitem">X Exit</span> y después <span class="guibutton">[X
	Exit Install]</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdboot"></a>2.10.16. El arranque de FreeBSD</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdboot-i386"></a>2.10.16.1. El arranque de FreeBSD/i386</h4></div></div></div><p>Si todo ha ido bien debería ver una pantalla de
        mensajes pasando frente a usted hasta que llegue a lo que
	llamamos un «login prompt».  Puede volver a ver
	los mensajes del arranque pulsando <span class="keycap"><strong>Bloq Deslp</strong></span>
	y usando <span class="keycap"><strong>RePág</strong></span> y <span class="keycap"><strong>AvPág</strong></span>.
	Pulsando <span class="keycap"><strong>Bloq Despl</strong></span> otra vez volverá al
	prompt.</p><p>El mensaje del arranque no puede mostrarse completo debido
        a las limitaciones del búfer, pero puede consultarse desde
	la shell mediante
	<code class="command">dmesg</code>.</p><p>Entre al sistema utilizando un nombre de usuario y
        contraseña que haya creado durante la instalación
	(en nuestro ejemplo <code class="systemitem">rpratt</code>).  Evite entrar al
	sistema como <code class="systemitem">root</code> salvo en los casos en los que
	sea estrictamente necesario.</p><p>Este es un típico mensaje de arranque (se ha eliminado
        la información de la versión):</p><pre class="screen">Copyright (c) 1992-2002 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.

Timecounter "i8254"  frequency 1193182 Hz
CPU: AMD-K6(tm) 3D processor (300.68-MHz 586-class CPU)
  Origin = "AuthenticAMD"  Id = 0x580  Stepping = 0
  Features=0x8001bf&lt;FPU,VME,DE,PSE,TSC,MSR,MCE,CX8,MMX&gt;
  AMD Features=0x80000800&lt;SYSCALL,3DNow!&gt;
real memory  = 268435456 (262144K bytes)
config&gt; di sn0
config&gt; di lnc0
config&gt; di le0
config&gt; di ie0
config&gt; di fe0
config&gt; di cs0
config&gt; di bt0
config&gt; di aic0
config&gt; di aha0
config&gt; di adv0
config&gt; q
avail memory = 256311296 (250304K bytes)
Preloaded elf kernel "kernel" at 0xc0491000.
Preloaded userconfig_script "/boot/kernel.conf" at 0xc049109c.
md0: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1: &lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: &lt;VIA 83C572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
chip1: &lt;VIA 82C586B ACPI interface&gt; at device 7.3 on pci0
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xe800-0xe81f irq 9 at
device 10.0 on pci0
ed0: address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5" drive&gt; on fdc0 drive 0
atkbdc0: &lt;keyboard controller (i8042)&gt; at port 0x60-0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x1 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
ppbus0: IEEE1284 device found /NIBBLE
Probing for PnP devices on ppbus0:
plip0: &lt;PLIP network interface&gt; on ppbus0
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port
ppi0: &lt;Parallel I/O&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master using UDMA33
ad2: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata1-master using UDMA33
acd0: CDROM &lt;DELTA OTC-H101/ST3 F/W by OIPD&gt; at ata0-slave using PIO4
Mounting root from ufs:/dev/ad0s1a
swapon: adding /dev/ad0s1b as swap device
Automatic boot in progress...
/dev/ad0s1a: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1a: clean, 48752 free (552 frags, 6025 blocks, 0.9% fragmentation)
/dev/ad0s1f: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1f: clean, 128997 free (21 frags, 16122 blocks, 0.0% fragmentation)
/dev/ad0s1g: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1g: clean, 3036299 free (43175 frags, 374073 blocks, 1.3% fragmentation)
/dev/ad0s1e: filesystem CLEAN; SKIPPING CHECKS
/dev/ad0s1e: clean, 128193 free (17 frags, 16022 blocks, 0.0% fragmentation)
Doing initial network setup: hostname.
ed0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
        inet6 fe80::5054::5ff::fede:731b%ed0 prefixlen 64 tentative scopeid 0x1
        ether 52:54:05:de:73:1b
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x8
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
Additional routing options: IP gateway=YES TCP keepalive=YES
routing daemons:.
additional daemons: syslogd.
Doing additional network setup:.
Starting final network daemons: creating ssh RSA host key
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
cd:76:89:16:69:0e:d0:6e:f8:66:d0:07:26:3c:7e:2d root@k6-2.example.com
 creating ssh DSA host key
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
f9:a1:a9:47:c4:ad:f9:8d:52:b8:b8:ff:8c:ad:2d:e6 root@k6-2.example.com.
setting ELF ldconfig path: /usr/lib /usr/lib/compat /usr/X11R6/lib
/usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
starting standard daemons: inetd cron sshd usbd sendmail.
Initial rc.i386 initialization:.
rc.i386 configuring syscons: blank_time screensaver moused.
Additional ABI support: linux.
Local package initialization:.
Additional TCP options:.

FreeBSD/i386 (k6-2.example.com) (ttyv0)

login: rpratt
Password:</pre><p>La generación de claves RSA y DSA puede llevar su
        tiempo en máquinas lentas.  Esto solamente sucede en el
	primer arranque después de la instalación.  Los
	demás arranques serán más rápidos.</p><p>Si ya hay un servidor X configurado y ha elegido un escritorio
         por omisión puede arrancarlo tecleando
	<code class="command">startx</code> en la shell.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66687312"></a>2.10.16.2. El arranque de FreeBSD/alpha</h4></div></div></div><a id="idp66700368" class="indexterm"></a><p>Una vez acabado el proceso de instalación
	  podrá arrancar FreeBSD tecleando algo muy parecido
	  a esto en el prompt de SRM:</p><p>Once the install procedure has finished, you will be
          able to start FreeBSD by typing something like this to the
          SRM prompt:</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>BOOT DKC0</code></strong></pre><p>Esto hace que el firmware arranque desde el disco especificado.  Para que FreeBSD arranque automáticamente de ahí en adelante utilice lo siguiente:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET BOOT_OSFLAGS A</code></strong>
<code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET BOOT_FILE ''</code></strong>
<code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET BOOTDEF_DEV DKC0</code></strong>
<code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET AUTO_ACTION BOOT</code></strong></pre><p>Los mensajes de arranque serán muy similares (aunque
	 no iguales) a los que aparecen durante el arranque de FreeBSD
	en <span class="trademark">i386</span>&#8482;.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="shutdown"></a>2.10.17. El apagado de FreeBSD</h3></div></div></div><p>Es importante apagar correctamente el sistema operativo.  No
        basta con darle al interruptor.  Lo primero que debe hacer
	es convertirse en superusuario tecleando en la shell
	<code class="command">su</code> e introduciendo la contraseña de
	<code class="systemitem">root</code>.  Tenga en cuenta que esto funcionará
	solamente si el usuario es miembro del grupo
	<code class="systemitem">wheel</code>.  Si no lo es siempre puede
	acceder al sistema como <code class="systemitem">root</code> y utilizar
	<code class="command">shutdown -h now</code>.</p><pre class="screen">The operating system has halted.
Please press any key to reboot.</pre><p>Una vez que vea el mensaje de «<span class="emphasis"><em>Please press any
        key to reboot</em></span> » puede apagar la máquina.
	Si pulsa cualquier tecla en lugar de apagar la máquina
	el sistema reiniciará.</p><p>También puede usar la combinación de teclas
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Supr</strong></span>
	para reiniciar el sistema, aunque no le recomendamos que lo haga
	durante el funcionamiento normal del sistema.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-trouble"></a>2.11. Solución de problemas</h2></div></div></div><a id="idp66714832" class="indexterm"></a><p>Esta sección trata sobre la solución de problemas
      habituales durante la instalación que la comunidad de usuarios
      ha documentado.  Hay también unas cuantas preguntas y respuestas
      para quienes quieren poder elegir en el arranque entre FreeBSD y
      <span class="trademark">MS-DOS</span>®.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66721104"></a>2.11.1. Qué hacer si algo va mal</h3></div></div></div><p>A causa de las diversas limitaciones de la arquitectura PC es
	imposible hacer que nada funcione con un 100% de probabilidades, pero
	al menos hay unas cuantas cosas que pueden hacerse si algo
	va mal.</p><p>Consulte la <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">lista de hardware
	soportado</a> de su versión de FreeBSD y asegúrese de
	que su hardware debería funcionar con ella.</p><p>Si su hardware está soportado y sigue experimentando
	«cuelgues» u otro tipo de problemas tendrá que
	<a class="link" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">compilar un kernel personalizado</a>.
	Esto le permitirá disponer de soporte que no está
	incluido en el kernel <code class="filename">GENERIC</code>.  El kernel
	que se incluye en los discos de arranque está configurado
	asumiendo que la mayoría de los dispositivos
	van a funcionar con la configuración por omisión
	de fábrica (en términos de IRQ, direcciones IO y
	canales DMA).  Si su hardware ha sido reconfigurado quizás
	tendrá que usar el editor de configuración para
	decirle a FreeBSD dónde encontrar cada cosa.</p><p>Es posible también que la prueba de un dispositivo que
	no está en el sistema cause problemas más tarde al probar
	un dispositivo que sí está en la máquina.
	Si ese puede ser su caso desactive las pruebas de controladores
	conflictivos.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos problemas de instalación pueden evitarse o
	  al menos aliviarse actualizando el firmware de ciertos tipos de
	  hardware; esto es especialmente cierto en el caso de las placas
	  El firmware de las placas base se llama también
	  <acronym class="acronym">BIOS</acronym> y la mayoría de las placas base
	  y de los fabricantes de computadoras tienen un sitio web en el
	  que suelen encontrarse actualizaciones e información sobre
	  su uso.</p><p xmlns="http://www.w3.org/1999/xhtml">La mayoría de los fabricantes recomienda que no se
	  actualice la <acronym class="acronym">BIOS</acronym> de la placa base a menos que
	  tenga una buena razón para hacerlo, por ejemplo una
	  actualización crítica.  El proceso de
	  actualización <span class="emphasis"><em>podría</em></span> fallar,
          lo que puede acarrrear daños en el chip de la
	  <acronym class="acronym">BIOS</acronym>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66727504"></a>2.11.2. Uso de sistemas de ficheros de <span class="trademark">MS-DOS</span>® y <span class="trademark">Windows</span>®</h3></div></div></div><p>No puede usar sistemas de ficheros comprimidos con
	<span class="application">Double Space&#8482;</span>.  Deberá por
	lo tanto descomprimir el sistema de ficheros antes de acceder a los
	datos desde FreeBSD.
	Ejecute el <span class="application">Agente de compresión</span>
	desde <span class="guimenuitem">Inicio</span>&gt;
	<span class="guimenuitem">Programas</span> &gt;
	<span class="guimenuitem">Herramientas del sistema</span>.</p><p>FreeBSD puede usar sistemas de ficheros <span class="trademark">MS-DOS</span>®.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a> inserta estos sistemas de ficheros en la
	jerarquía de directorios del sistema, haciendo posible
	el acceso a los datos.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a> no suele usarse
	directamente; el sistema lo utiliza debido a alguna entrada
	en <code class="filename">/etc/fstab</code> o porque <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> lo
	invoque debido a que se le hayan dado los parámetros
	adecuados para ello.</p><p>Veamos una de esas entradas en el fichero
      <code class="filename">/etc/fstab</code>:</p><pre class="programlisting">/dev/ad0sN  /dos  msdosfs rw  0	0</pre><p>El directorio <code class="filename">/dos</code> debe existir previamente
        o no funcionará.  Tiene todos los detalles del formato correcto
	de las entradas en <code class="filename">/etc/fstab</code> en
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>.</p><p>Veamos ahora un ejemplo de llamada de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> a un sistema
        de ficheros <span class="trademark">MS-DOS</span>®:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_msdos /dev/ad0s1 /mnt</code></strong></pre><p>En el ejemplo el sistema de ficheros <span class="trademark">MS-DOS</span>® está en la
	primera partición del primer disco duro.
	La situación en su sistema puede ser diferente: compruebe la
	salida de <code class="command">dmesg</code> y <code class="command">mount</code>.
	Deberían darle suficiente información como para
	darle una idea completa de la estructura de particiones en la que
	está trabajando.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD suele numerar las las «slices» (que es como
        decir los sistemas de ficheros <span class="trademark">MS-DOS</span>®) de un modo distinto al de
        otros sistemas operativos.  Más concretamente, las particiones
	extendidas de <span class="trademark">MS-DOS</span>® suelen tener un número mayor de
	«slice» que las particiones primarias de <span class="trademark">MS-DOS</span>®.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> le será de ayuda a la hora de determinar
	qué «slices» pertenecen a FreeBSD y cuáles
	a otros sistemas operativos.</p></div><p>Las particiones NTFS se montan de una forma muy similar gracias a
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ntfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ntfs</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66767184"></a>2.11.3. Preguntas y respuestas de la resolución de problemas</h3></div></div></div><div class="qandaset"><a id="idp66767824"></a><dl><dt>2.11.3.1. <a href="#idp66768080">Mi sistema se «cuelga» durante el arranque,
	      o se comporta de modo extraño durante la instalación,
	      o no llega a comprobar el funcionamiento del lector de
	      disquetes.</a></dt><dt>2.11.3.2. <a href="#idp66772432">Cuando voy a arrancar FreeBSD por primera vez después
	      de la instalación el kernel carga y prueba mi hardware,
	      pero se detiene y muestra mensajes como este:</a></dt><dt>2.11.3.3. <a href="#idp66786640">Cuando voy a arrancar desde disco duro por primera
	      vez tras la instalación de FreeBSD el prompt del gestor
	      de arranque muestra F? en el menú
	      de arranque y no pasa de ahí.</a></dt><dt>2.11.3.4. <a href="#idp66790992">El sistema encuentra mi tarjeta de red ed(4) pero
	      me dan errores de «timeout».</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp66768080"></a><a id="idp66768336"></a><p><strong>2.11.3.1.</strong></p></td><td align="left" valign="top"><p>Mi sistema se «cuelga» durante el arranque,
	      o se comporta de modo extraño durante la instalación,
	      o no llega a comprobar el funcionamiento del lector de
	      disquetes.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD utiliza profusamente el servicio ACPI del sistema en las
	      plataformas i386, amd64 e ia64 con el fin de ayudar en
	      la configuración del sistema durante la detección
	      de hardware durante el arranque.  Por desgracia todavía
	      hay errores tanto en el controlador ACPI como en algunas BIOS y
	      placas base.  Puede desactivar ACPI en la tercera fase del cargador
	      de arranque del sistema haciendo que
	      <code class="literal">hint.acpi.0.disabled</code> tenga el siguiente
	      valor:</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>Tenga en cuenta que tendría que volver a hacerlo cada vez que
	      el sistema arranque, así que añada
	      <code class="literal">hint.acpi.0.disabled="1"</code> al fichero
	      <code class="filename">/boot/loader.conf</code>.  Tiene más
	      información sobre el cargador de arranque en
	      <a class="xref" href="#boot-synopsis" title="12.1. Sinopsis">Sección 12.1, &#8220;Sinopsis&#8221;</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66772432"></a><a id="idp66772688"></a><p><strong>2.11.3.2.</strong></p></td><td align="left" valign="top"><p>Cuando voy a arrancar FreeBSD por primera vez después
	      de la instalación el kernel carga y prueba mi hardware,
	      pero se detiene y muestra mensajes como este:</p><pre class="screen">changing root device to ad1s1a panic: cannot mount root</pre><p>?Cuál es el problema?</p><p>?Qué es lo que significa este mensaje de
	      <code class="literal">bios_drive:interface(unit,partition)kernel_name</code>
	      que aparece  en la ayuda del arranque?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Hay un problema que ya lleva tiempo con nosotros
	      cuando el disco desde el que se arranca no es el primero
	      en el sistema.  La BIOS utiliza un esquema de numeración
	      distinto al que usa FreeBSD y a veces saber qué
	      número es el que corresponde a qué resulta
	      un poco complicado.</p><p>Cuando el disco de arranque no sea el primer disco
	      del sistema FreeBSD necesitará un poco de ayuda para
	      poderlo encontrar.  Puede haber dos escenarios donde
	      suceda esto y en ambos hay que decirle a FreeBSD, dónde
	      encontrar el sistema de ficheros raíz.  Esto se
	      hace especificando el número de disco según
	      la BIOS, el tipo de disco y el número de disco
	      que FreeBSD le dará a ese disco.</p><p>El primer caso es cuando hay dos discos IDE, ambos
	      configurados como maestros de sus respectivos buses IDE
	      y quiere usted arrancar desde el segundo disco.  La BIOS
	      dice que son el disco 0 y el disco 1, mientras que FreeBSD
	      los ve como
	      <code class="filename">ad0</code> y
	      <code class="filename">ad2</code>.</p><p>FreeBSD está en el disco BIOS 1, de tipo
	      <code class="literal">ad</code> y el número de disco FreeBSD es
	      el 2, así que habrá que decir lo
	      siguiente:</p><pre class="screen"><strong class="userinput"><code>1:ad(2,a)kernel</code></strong></pre><p>Tenga en cuenta que si tiene un disco esclavo en
	      el bus primario esto no es necesario (de hecho es
	      un error hacerlo).</p><p>El segundo escenario es el arranque desde un disco
	      SCSI teniendo uno o más discos IDE en el sistema.
	      En este caso el número de disco FreeBSD es más
	      bajo que el número de disco BIOS.  Si tiene dos
	      discos IDE además del disco SCSI, el disco SCSI
	      es el disco 2 de BIOS, del tipo
	      <code class="literal">da</code> y para FreeBSD es el disco número
	      disk number 0, so
	      0, así que tendrá que usar</p><pre class="screen"><strong class="userinput"><code>2:da(0,a)kernel</code></strong></pre><p>para decirle a FreeBSD que quiere arrancar desde el
	      disco 2 de BIOS, que es el primer disco SCSI del sistema.
	      Si solamente tiene un disco IDE tendrá que poner
	      <code class="literal">1:</code>.</p><p>Una vez que sabe con exactitud los valores que debe
	      usar póngalos exactamente como los ha tecleado
	      en <code class="filename">/boot.config</code> utilizando el
	      editor de texto que prefiera.  Salvo que se le diga lo
	      contrario FreeBSD utilizará el contenido de este
	      fichero decidiráel comportamiento por omisión
	      del prompt de <code class="literal">boot:</code> prompt.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66786640"></a><a id="idp66786896"></a><p><strong>2.11.3.3.</strong></p></td><td align="left" valign="top"><p>Cuando voy a arrancar desde disco duro por primera
	      vez tras la instalación de FreeBSD el prompt del gestor
	      de arranque muestra <code class="literal">F?</code> en el menú
	      de arranque y no pasa de ahí.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>La geometría del disco duro se configuró
	      mal cuando se utilizó el editor de particiones
	      durante la instalación.  Ejecute el editor de
	      particiones e introduzca la geometría del disco
	      correctamente.  Tendrá que reinstalar FreeBSD
	      completamente dado que habrá cambiado la
	      geometría del disco.</p><p>Si no encuentra la manera de saber cuál es
	      la geometría correcta pruebe con esto:
	      Cree una pequeña partición DOS al principio
	      del disco e instale FreeBSD en el espacio de disco inmediatamente
	      contiguo.  El programa de instalación verá la
	      partición DOS e intentará deducir la
	      geometría correcta a partir de ahí; esto suele
	      funcionar.</p><p>Le mostramos otra sugerencia que, aunque no es recomendable
	      de seguir, se muestra para que sirva de referencia:</p><div class="blockquote"><blockquote class="blockquote"><p>Si lo que está instalando es un servidor
	        o máquina de escritorio dedicado a FreeBSD y
		no le preocupa que en el futuro cercano tenga que
		mantener la convivencia con DOS, Linux u otro
		sistema operativo siempre tiene la opción de
		utilizar el disco entero
		(la opción <span class="guimenuitem">A</span> en
		el editor de particiones).  Es una opción no
		estándar gracias a la cual  FreeBSD ocupa todo
		el disco, desde el primer sector al último.
		De este modo nos olvidamos de todos los problemas
		relacionados con la geometría de disco, pero
		le obliga a no poder instalar ningún otro
		sistema operativo aparte de FreeBSD en ese disco.</p></blockquote></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66790992"></a><a id="idp66791248"></a><p><strong>2.11.3.4.</strong></p></td><td align="left" valign="top"><p>El sistema encuentra mi tarjeta de red <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> pero
	      me dan errores de «timeout».</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Lo más probable es que su tarjeta esté
	      utilizando una IRQ distinta de la que debería
	      estar usando según lo que aparece en
	      <code class="filename">/boot/device.hints</code> .  El controlador
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> no utiliza configuración
	      does not use the «soft» por omisión
	      (es decir, valores que se le suministren mediante EZSETUP
	      bajo DOS) pero como casi todo en esta vida hay
	      solución.  En este caso, de hecho, hay dos.</p><p>Ponga el «jumper» de la tarjeta en
	      una configuración «dura» (es posible
	      que tenga que modificar la configuración del
	      kernel debido a esto) o modifique el valor de la IRQ
	      con el valor <code class="literal">-1</code> del siguiente modo:
	      by setting the hint <code class="literal">hint.ed.0.irq="-1"</code>.
	      Así le dirá al kernel que utilice la
	      configuración «suave».</p><p>Hay otra posibilidad, que es cuando su tarjeta
	      esté utilizando la IRQ 9, que suele compartir
	      funciones con la IRQ 2, circunstancia que es con
	      frecuencia causa de problemas (sobre todo cuando entra
	      en escena una tarjeta VGA que utiliza justamente la
	      IRQ 2).  Le recomendamos encarecidamente que haga todo
	      lo posible para no utilizar ni la IRQ 2 ni la IRQ 9.</p></td></tr></tbody></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-advanced"></a>2.12. Guía avanzada de instalación</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><p>This section describes how to install FreeBSD in exceptional
       cases.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="headless-install"></a>2.12.1. Instalación de FreeBSD en un sistema sin monitor o
	teclado</h3></div></div></div><a id="idp66805072" class="indexterm"></a><a id="idp66806352" class="indexterm"></a><p>Es posible instalar FreeBSD en máquinas que no
        tengan teclado ni siquiera monitor conectado.  De hecho
	no tienen por qué tener ni salida VGA.
	?Cómo es posible?, se preguntará:
	Haciendolo todo a través de una consola serie.  Una consola serie
	consiste básicamente en usar otro sistema como la pantalla y el
	teclado de una máquina.  Siga las instrucciones de
	creación de los disquetes que se detallan en la <a class="xref" href="#install-floppies" title="2.3.7. Preparación del medio de arranque">Sección 2.3.7, &#8220;Preparación del medio de arranque&#8221;</a>.</p><p>Tendrá que modificar esos disquetes para que arranquen
	en la consola serie; siga estas instrucciones:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Modificación de los disquetes de arranque para que
	    permitan el arranque en la consola serie</strong></p><a id="idp66808912" class="indexterm"></a><p>Si arrancara con los disquetes que acaba de crear FreeBSD
	      arrancaría en el modo normal de instalación.  Lo
	      que queremos es que FreeBSD arranque en una consola serie,
	      así que hemos de montar el disquete
	      <code class="filename">kern.flp</code> en un sistema FreeBSD mediante
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/fd0 /mnt</code></strong></pre><p>Una vez montado el disquete entre en el directorio
	      <code class="filename">/mnt</code> :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong></pre><p>Aquí es donde enseñaremos al disquete a
	      arrancar en la consola serie.  Debe crearse un fichero llamado
	      <code class="filename">boot.config</code> que contenga lo siguiente:
	      <code class="literal">/boot/loader -h</code>.  Con esto le pasamos
	      cargador de arranque (el «bootloader»)
	      el parámetro necesario para que intente arrancar
	      en una consola serie.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/boot/loader -h" &gt; boot.config</code></strong></pre><p>Una vez configurado correctamente nuestro disquete lo
	      desmontamos con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong></pre><p>Y podemos extraer el disquete de la unidad.</p></li><li class="step"><p class="title"><strong>Conexión del cable modem</strong></p><a id="idp66820048" class="indexterm"></a><p>Tiene que conectar un
	      <a class="link" href="#term-cables-null" title="24.2.2.1.1. Cables null-modem">cable
	      módem  nulo</a> entre dos máquinas.
	      <span class="emphasis"><em>Un cable serie normal no funcionará</em></span>,
	      necesitará un cable módem nulo porque tiene
	      cruzado alguno de los hilos.</p></li><li class="step"><p class="title"><strong>Arranque de la instalación</strong></p><p>Podemos iniciar la instalación.  Introduzca el
	      disquete <code class="filename">kern.flp</code> en la unidad de disquetes
	      de la máquina en la que quiere hacer la instalación
	      y encienda la máquina.</p></li><li class="step"><p class="title"><strong>La conexión a su máquina sin teclado
	      ni monitor</strong></p><a id="idp66828496" class="indexterm"></a><p>Conéctese usando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l /dev/cuaa0</code></strong></pre></li></ol></div><p>?Ya está! Desde este momento ya puede controlar su
        máquina sin monitor ni teclado desde la sesión
	<code class="command">cu</code> que acaba de abrir.  El sistema le pedirá
	que introduzca el disco <code class="filename">kern1.flp</code> y después
	tendrá que elegir qué tipo de terminal va a utilizar.  Elija
	la consola en color de FreeBSD y buena suerte con la instalación.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-diff-media"></a>2.13. Cómo preparar su propio medio de instalación</h2></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Para evitar la repetición «disco FreeBSD»
	será en adelante un CDROM o un DVD de FreeBSD que haya
	comprado o hecho por sus propios medios.</p></div><p>Es posible que tengaque crear su propio
      medio de instalación de FreeBSD.  Puede tratarse de un medio
      físico como una cinta o una fuente para que
      <span class="application">sysinstall</span> pueda obtener los ficheros
      que vaya necesitando, como un sitio FTP local, o bien puede
      tratarse de una partición <span class="trademark">MS-DOS</span>®.</p><p>Por ejemplo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Tiene muchas máquinas conectadas a una red local y
	  un sólo disco FreeBSD.  Quiere crear un sitio FTP local
	  con el contenido del disco FreeBSD y que desde él sus
	  máquinas obtengan los ficheros en lugar de tener que
	  conectarse a Internet.</p></li><li class="listitem"><p>Tiene un disco FreeBSD y FreeBSD no reconoce su unidad CD/DVD pero
	  <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>® sí.  Quiere copiar los ficheros de
	  instalación de FreeBSD a una partición DOS en
	  mismo sistema y luego instalar FreeBSD usando esos ficheros.</p></li><li class="listitem"><p>El sistema en el que quiere instalar FreeBSD no tiene
	  unidad CD/DVD ni tarjeta de red pero puede conectar un cable
	  paralelo o un cable serie «Laplink» a una computadora
	  que sí que tiene.</p></li><li class="listitem"><p>Quiere crear una cinta desde la que se pueda instalar
	  FreeBSD.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-cdrom"></a>2.13.1. Creación de un CDROM de instalación</h3></div></div></div><p>Con cada «release» el Proyecto FreeBSD libera dos
	imágenes de CDROM («imágenes ISO»).
	Dichas imágenes pueden copiarse a CD si dispone de una
	grabadora y usarse posteriormente para instalar FreeBSD.
	Si tiene una grabadora de CD y el ancho de banda no le supone un
	problema la forma más fácil de instalar FreeBSD es
	esta.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Descargar la imagen ISO correcta</strong></p><p>Puede descargar las imágenes ISO de cada
	   «release» desde
	   <code class="filename">ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-arquitectura/versión</code>
	    o desde la réplica más próxima.
	    Sustituya <em class="replaceable"><code>arquitectura</code></em> y
	    <em class="replaceable"><code>versión</code></em> por lo que
	    corresponda.</p><p>Ese directorio contendrá normalmente las siguientes
	    imágenes:</p><div class="table"><a id="idp66849232"></a><div class="table-title">Tabla 2.4. Nombres y funciones de las imágenes de FreeBSD 6.<em class="replaceable"><code>X</code></em> and 7.<em class="replaceable"><code>X</code></em></div><div class="table-contents"><table summary="Nombres y funciones de las imágenes de FreeBSD 6.X and 7.X" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Contenido</th></tr></thead><tbody><tr><td><code class="filename">versión-RELEASE-arch-bootonly.iso</code></td><td>Todo lo necesario para arrancar un kernel
		    de FreeBSD y ejecutar la interfaz de instalación.
		    Los ficheros que vayan haciendo falta tendrán
		    que irse descargando por FTP o por algún
		    otro medio.</td></tr><tr><td><code class="filename">versión-RELEASE-arch-disc1.iso</code></td><td>Todo lo necesario para instalar AFreeBSD y un
		    «live filesystem», que le será
		    muy útil (conjuntamente con la aplicación
		    «Repair» de
		    <span class="application">sysinstall</span>.</td></tr><tr><td><code class="filename">versión-RELEASE-arch-disc2.iso</code></td><td>Todas las aplicaciones que puedan caber en un
		    disco.</td></tr><tr><td><code class="filename">versión-RELEASE-arch-docs.iso</code></td><td>La documentacióN de FreeBSD.</td></tr></tbody></table></div></div><br class="table-break" /><p>Descargue la imagen ISO  de arranque (si existe para su
	    plataforma) o la imagen del disco uno.
	    <span class="emphasis"><em>No</em></span> descargue ambas, puesto que el disco
	    uno contiene todo lo que hay en la imagen ISO de arranque.</p><p>Utilice la imagen ISO de arranque si su acceso a Internet es barato.
	    Con ella podrá instalar FreeBSD e instalar todo tipo de
	    software descargándolo como paquetes/ports (consulte
	    el <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>) cuando lo precise.</p><p>Utilice la imagen del disco uno si quiere disponer en el
	    propio disco de una selección bastante completa
	    de software.</p><p>Si tiene acceso de alta velocidad a Internet las demás
	    imágenes de disco son útiles pero no
	    esenciales.</p></li><li class="step"><p class="title"><strong>Escribir los CD</strong></p><p>Si va a grabar los CD en un sistema FreeBSD consulte la
	    <a class="xref" href="#creating-cds" title="18.6. Creación y uso de medios ópticos (CD)">Sección 18.6, &#8220;Creación y uso de medios ópticos (CD)&#8221;</a> (en particular la
	    <a class="xref" href="#burncd" title="18.6.3. burncd">Sección 18.6.3, &#8220;burncd&#8221;</a> y la
	    <a class="xref" href="#cdrecord" title="18.6.4. cdrecord">Sección 18.6.4, &#8220;cdrecord&#8221;</a>).</p><p>Las imágenes se hacen en un formato ISO
	    estándar; si va a grabarlas en cualquier otra plataforma
	    no debería tener problemas para hacerlo cualquiera que sea
	    la aplicación que use para grabar CD.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si lo que quiere hacer es crear una «release»
        personalizada de FreeBSD consulte el artículo <a class="link" href="../../../../doc/es_ES.ISO8859-1/articles/releng" target="_top">Release Engineering</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-ftp"></a>2.13.2. Creación de un sitio FTP local a partir de un disco de
        instalación de FreeBSD</h3></div></div></div><a id="idp66874320" class="indexterm"></a><p>Los discos de FreeBSD tienen la misma estructura que los sitios FTP.
	Esa circunstancia le facilitará mucho la tarea de crear un sitio
	FTP local para uso de otras máquinas de su red durante la
	instalación de FreeBSD.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Monte el CDROM en el directorio <code class="filename">/cdrom</code>
	    del sistema que va a albergar el sitio FTP.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong></pre></li><li class="step"><p>Cree una cuenta apta para FTP anónimo en
	    <code class="filename">/etc/passwd</code> editando
	    <code class="filename">/etc/passwd</code> con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a>.
	    Añádale lo siguiente:</p><pre class="programlisting">ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent</pre></li><li class="step"><p>Compruebe que el servicio FTP está activado en
	    <code class="filename">/etc/inetd.conf</code>.</p></li></ol></div><p>Ahora cualquier máquina capaz de conectarse a su
	sistema a través de una red puede elegir como medio de
	instalación «FTP» y escribir
	<strong class="userinput"><code>ftp://su máquina</code></strong>
	tras seleccionar «Other» en el menú de sitios
	FTP.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Acabamos de exponer una buena solución para usar
	  en un sistema de su propia red y que además está
	  protegido por un cortafuegos.  Si ofrece servicios FTP a
	  máquinas de Internet (y no de su red local) expone su
	  sistema a caer bajo la atención de «crackers»
	  y otras variedades de indeseable.  Le recomendamos encarecidamente
	  que siga a rajatabla políticas sensatas de seguridad.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66884432"></a>2.13.3. Creación de disquetes de instalación</h3></div></div></div><a id="idp66885072" class="indexterm"></a><p>Si quiere instalar FreeBSD desde disquetes (cosa que, de
	antemano, le sugerimos que <span class="emphasis"><em>no</em></span> haga) bien
	sea porque FreeBSD no soporta cierto componente necesario de su
	sistema o sencillamente porque insiste en querer hacer las cosas
	de la manera más difícil, tendrá que
	tener a mano unos cuantos disquetes.</p><p>Como mínimo necesitará tantos disquetes de
	  1.44 MB o 1.2 MB como hagan falta para dar cabida a todos
	  los ficheros que hay en <code class="filename">bin</code>.   Recuerde la
	  entrada «binary distribution» (distribución
	  binaria) durante la instalación.  Si está generando
	  los disquetes en DOS <span class="emphasis"><em>debe formatearlos</em></span> con
	  <code class="command">FORMAT</code> de <span class="trademark">MS-DOS</span>®.  Si está usando
	  <span class="trademark">Windows</span>® puede usar el Explorador para formatear disquetes:
	  botón derecho del ratón sobre la unidad
	  <code class="filename">A:</code> y elija «Formatear».</p><p> <span class="emphasis"><em>No</em></span> confíe en el preformateo
	  de fábrica de los disquetes.  Formatéelos usted de
	  nuevo, sólo para asegurarse.  La mayoría de los
	  problemas de los que se ha informado se han debido a formateos
	  defectuosos, téngalo en cuenta.</p><p>Si puede crear los disquetes en una máquina FreeBSD un
	  formateo sigue sin ser una mala idea, pero no necesitará
	  crear un sistema de ficheros DOS en cada floppy.  Use
	  <code class="command">disklabel</code> y <code class="command">newfs</code>
	  para crear un sistema de ficheros UFS en los disquetes tal y como
	  se muestra aquí (en un floppy de 1.44 MB y 3.5")
	  :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdformat -f 1440 fd0.1440</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -w -r fd0.1440 floppy3</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Tendrá que usar <code class="literal">fd0.1200</code> y
	    <code class="literal">floppy5</code> si usa discos de 5.25" y
	    1.2 MB.</p></div><p>Ahora puede montarlos y escribir en ellos igual que en cualquier
	  otro sistema de ficheros del sistema.</p><p>Tras el formateo de los disquetes pasamos a llenarlos.  Los
	  ficheros necesarios para crear la distribución se dividen en
	  partes de tamaño regular de modo que cinco de ellas entren
	  en otros tantos disquetes de 1.44 MB.  Empaquete tantos ficheros
	  como pueda en cada uno hasta que tenga todas las distribuciones
	  que necesita listas para pasar a los disquetes.
	  Cada distribución
	  debería ir en un subdirectorio del floppy, por ejemplo
	  <code class="filename">a:\bin\bin.aa</code>,
	  <code class="filename">a:\bin\bin.ab</code>, etc.</p><p>Una vez en el menú de selección de medio de
	  instalación elija <span class="guimenuitem">Floppy</span> y
	  siga las instrucciones.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-msdos"></a>2.13.4. Instalación desde una partición <span class="trademark">MS-DOS</span>®</h3></div></div></div><a id="idp66907856" class="indexterm"></a><p>Copie los ficheros de la distribución en un directorio
	  llamado <code class="filename">freebsd</code> en el directorio raíz
	  de la partición, por ejemplo <code class="filename">c:\freebsd</code>.
	  La estructura de directorios del sitio FTP o el CDROM debe
	  reproducirse parcialmente en este directorio, así que le
	  sugerimos que use <code class="command">xcopy</code> si está
	  copiando los datos desde un CD.  En el siguiente ejemplo vamos a
	  preparar una instalación mínima de FreeBSD:</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>md c:\freebsd</code></strong>
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>xcopy e:\bin c:\freebsd\bin\ /s</code></strong>
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>xcopy e:\manpages c:\freebsd\manpages\ /s</code></strong></pre><p>Se ha asumido que <code class="filename">C:</code> es donde tiene
	  espacio libre y <code class="filename">E:</code> es donde tiene montada
	  su unidad CDROM.</p><p>Si no tiene unidad CDROM puede descargar la distribución
	  desde <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/" target="_top">ftp.FreeBSD.org</a>.
	  Cada distribución dispone de su propio directorio; por
	  ejemplo, la distribución <span class="emphasis"><em>base</em></span> está
	  en el directorio<a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/base/" target="_top">10.1/base/</a>.</p><p>La única distribución
	  <span class="emphasis"><em>imprescindible</em></span> es <code class="literal">BIN</code>.
	  Guarde esta y todas las distribuciones que quiera instalar desde
	  una partición <span class="trademark">MS-DOS</span>® bajo
	  <code class="filename">c:\freebsd</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66918352"></a>2.13.5. Creación de una cinta de instalación</h3></div></div></div><a id="idp66918992" class="indexterm"></a><p>La instalación desde cinta es probablemente el
	  método más fácil, casi tanto como una
	  instalación desde una réplica FTP o desde un
	  CDROM.  Lo único que el programa de instalación
	  necesita es que los  ficheros estén empaquetados con
	  <span class="application">tar</span> y en una cinta.  Veamos
	  un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /freebsd/distdir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar cvf /dev/rwt0 dist1 ... dist2</code></strong></pre><p>Cuando esté preparando la instalación tenga
	  la precaución de dejar sitio suficiente en algún
	  directorio temporal (accesible en ese momento) para dejar
	  <span class="emphasis"><em>todos los ficheros</em></span> que hubiera en la
	  cinta de instalación.  A causa del acceso secuencial propio
	  del diseño de las cintas este método de
	  instalación requiere un poco de almacenamiento
	  temporal.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Recuerde que antes de arrancar desde el disquete de
	    arranque la cinta <span class="emphasis"><em>debe estar en la unidad</em></span>.
	    La prueba de hardware de la instalación no
	    encontraría la cinta.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66928848"></a>2.13.6. Before Installing over a Network</h3></div></div></div><a id="idp66929488" class="indexterm"></a><a id="idp66931024" class="indexterm"></a><a id="idp66932560" class="indexterm"></a><p>Hay tres tipos de instalación a través de
	  una red disponibles en FreeBSD: Puerto serie (SLIP o PPP), puerto
	  paralelo (PLIP (cable «laplink»)) y Ethernet.</p><p>El adaptador Ethernet es, debido a su velocidad de transferencia,
	  la mejor elección.
	  FreeBSD soporta la mayoría de los adaptadores Ethernet.  Tiene
	  una lista de dispositivos soportados en las notas de hardware de
	  cada «release» de FreeBSD.  Si disponde alguno de los
	  adaptadores Ethernet PCMCIA soportados por FreeBSD recuerde que debe
	  estar presente en el sistema <span class="emphasis"><em>antes</em></span> de que
	  el sistema arranque.  Por desgracia FreeBSD no soporta aún
	  la inserción en caliente de tarjetas PCMCIA durante la
	  instalación.</p><p>Tendrá que saber también la dirección
	  IP de la red, la máscara de red correcta para la clase de
	  su red y el nombre de su máquina.  Si va a instalar
	  mediante una conexión PPP y no tiene IP estática no
	  se preocupe, su ISP puede asignarle una IP temporal
	  dinámicamente.  Su administrador de sistemas seguramente
	  puede ayudarle con la configuración de su red.  Si va a
	  intentar conectarse con otras máquinas mediante sus
	  nombres en lugar de sus direcciones IP necesitará los
	  datos de un servidor de nombres y es posible que necesite
	  también la dirección de un «gateway»
	  (si usa PPP vale con la dirección IP de su proveedor).
	  Si va a instalar por FTP a través de un proxy HTTP
	  necesitará la dirección del proxy.
	  Si no sabe qué pueden significar todas (o la mayoría)
	  de estas preguntas hable con su administrador de sistemas o con su
	  ISP <span class="emphasis"><em>antes</em></span> de intentar instalar FreeBSD de esta
	  forma.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66940240"></a>2.13.6.1. Antes de instalar via NFS</h4></div></div></div><a id="idp66940880" class="indexterm"></a><p>La instalación por NFS es bastante sencilla.
	    Sólo tendrá que copiar los ficheros de la
	    distribución a un servidor NFS, seleccionar NFS como
	    medio de instalación y apuntar a los contenidos a donde
	    los haya copiado.</p><p>si el servidor sólo soporta
	    «puertos privilegiados» (que suele ser la
	    configuración por omisión en estaciones de trabajo
	    Sun) tendrá que seleccionar la opción
	    <code class="option">NFS Secure</code> en el menú
	    «Options» antes de comenzar con la
	    instalación.</p><p>Si usa tarjeta Ethernet de mala calidad y está
	    experimentando velocidades de transferencia muy bajas puede
	    probar con el parámetro <code class="option">NFS Slow</code>.</p><p>Para que la instalación via NFS funcione el servidor
	    debe permitir el montaje de subdirectorios.  Por ejemplo, si su
	    distribución  FreeBSD 10.1 está en
	    <code class="filename">ziggy:/usr/archive/stuff/FreeBSD</code> el servidor
	    <code class="systemitem">ziggy</code> tendrá que permitir que pueda
	    montarse <code class="filename">/usr/archive/stuff/FreeBSD</code>, no
	    simplemente como <code class="filename">/usr</code> o
	    <code class="filename">/usr/archive/stuff</code>.</p><p>En el fichero <code class="filename">/etc/exports</code> de FreeBSD
	    eso puede controlarse mediante la opción
	    <code class="option">-alldirs</code>.  Puede que otros servidores NFS
	    requieran de parámetros diferentes.  Si ve mensajes
	    de <span class="errorname">permission denied</span> seguramente no ha
	    activado esto correctamente.</p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics"></a>Capítulo 3. Conceptos básicos de Unix</h2></div><div><span class="authorgroup">Reescrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chris</span> <span class="surname">Shumway</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#basics-synopsis">3.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#consoles">3.2. Consolas virtuales y terminales</a></span></dt><dt><span class="sect1"><a href="#permissions">3.3. Permisos</a></span></dt><dt><span class="sect1"><a href="#dirstructure">3.4. Estructura de directorios</a></span></dt><dt><span class="sect1"><a href="#disk-organization">3.5. Organización de disco</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">3.6. Montaje y desmontaje de sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#basics-processes">3.7. Procesos</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">3.8. Dæmons, señales y cómo matar procesos</a></span></dt><dt><span class="sect1"><a href="#shells">3.9. Shells</a></span></dt><dt><span class="sect1"><a href="#editors">3.10. Editores de texto</a></span></dt><dt><span class="sect1"><a href="#basics-devices">3.11. Dispositivos y nodos de dispositivos</a></span></dt><dt><span class="sect1"><a href="#binary-formats">3.12. Formatos binarios</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">3.13. Más información</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-synopsis"></a>3.1. Sinopsis</h2></div></div></div><p>El siguiente capítulo comprende la funcionalidad y
    órdenes básicas del sistema operativo FreeBSD.
    Gran parte de este material es relevante para cualquier sistema
    operativo tipo <span class="trademark">UNIX</span>®.
    Puede saltarse este capítulo si considera que ya conoce
    el funcionamiento de <span class="trademark">UNIX</span>®.
    Si no tiene experiencia previa con FreeBSD debería leer este
    capítulo con mucha atención.</p><p>Después de leer este capítulo, usted
      sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cómo usar las «consolas virtuales» de
            FreeBSD.</p></li><li class="listitem"><p>Cómo funcionan los permisos de fichero <span class="trademark">UNIX</span>® en
          relación con las banderas de fichero en FreeBSD.</p></li><li class="listitem"><p>La disposición de sistemas de ficheros por
	  omisión en FreeBSD.</p></li><li class="listitem"><p>La organización de disco de FreeBSD.</p></li><li class="listitem"><p>Cómo montar y desmontar sistemas de ficheros.</p></li><li class="listitem"><p>Qué son los procesos, dæmons y señales.</p></li><li class="listitem"><p>Qué es una shell, cómo modificar sus variables
	  de entorno por omisión.</p></li><li class="listitem"><p>Cómo utilizar editores de texto básicos.</p></li><li class="listitem"><p>Qué son los dispositivos y nodos de dispositivos.</p></li><li class="listitem"><p>Qué formato binario se usa en FreeBSD.</p></li><li class="listitem"><p>Cómo buscar información en las  páginas
	  de manual.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="consoles"></a>3.2. Consolas virtuales y terminales</h2></div></div></div><a id="idp66981584" class="indexterm"></a><a id="idp66982096" class="indexterm"></a><p>FreeBSD puede utilizarse de muchas maneras.  Una de ellas es
      tecleando órdenes en una terminal de texto.  De este modo, mucha
      de la flexibilidad y poder de un sistema operativo <span class="trademark">UNIX</span>® está
      inmediatamente en sus manos cuando usa FreeBSD.  Esta sección
      describe qué son «terminales» y
      «consolas» y cómo puede usarlas en FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-intro"></a>3.2.1. La consola</h3></div></div></div><a id="idp66984272" class="indexterm"></a><p>Si no ha configurado FreeBSD para ejecutar automáticamente
        un entorno gráfico en el arranque, el sistema le
        presentará un «prompt» de entrada después
        del arranque, inmediatamente después de que los
        «scripts» de inicio terminen de ejecutarse.
        Verá algo similar a esto:</p><pre class="screen">Additional ABI support:.
Local package initialization:.
Additional TCP options:.

Fri Sep 20 13:01:06 EEST 2002

FreeBSD/i386 (pc3.ejemplo.org) (ttyv0)

login:</pre><p>Los mensajes pueden ser un poco diferentes en su sistema, pero
        verá algo similar. Las últimas dos líneas son
        las que nos interesan por el momento. La penúltima línea
        dice:</p><pre class="programlisting">FreeBSD/i386 (pc3.ejemplo.org) (ttyv0)</pre><p>Esta línea contiene información
        acerca del sistema que acaba de arrancar.  Esta usted ante una
        consola «FreeBSD» que se ejecuta en un procesador Intel
        o compatible de la arquitectura x86<a href="#ftn.idp66990800" class="footnote" id="idp66990800"><sup class="footnote">[1]</sup></a>.
        El nombre de esta máquina (todas las  máquinas <span class="trademark">UNIX</span>®
        tiene un nombre) es <code class="systemitem">pc3.ejemplo.org</code>, y usted
        está ahora ante su consola de sistema (la
        terminal <code class="filename">ttyv0</code>).</p><p>Para acabar, la última línea siempre es:</p><pre class="programlisting">login:</pre><p>Este es el lugar donde se usted tecleará su
        «nombre de usuario» para entrar en FreeBSD.
        La siguiente sección describe cómo hacerlo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-login"></a>3.2.2. La entrada a FreeBSD</h3></div></div></div><p>FreeBSD es un sistema multiusuario multiprocesador. Esta
        es la descripción formal que se suele dar a un
        sistema que puede ser utilizado por muchas personas diferentes,
        que simultáneamente ejecutan muchos programas en un sola
        máquina.</p><p>Cada sistema multiusuario necesita algún modo de
        distinguir a un «usuario» del resto. En FreeBSD
        (y en todos los sistemas operativos de tipo <span class="trademark">UNIX</span>®) esto se
        logra requiriendo que cada usuario «acceda»
        al sistema antes de poder ejecutar programas.  Cada usuario
        tiene un nombre único (el «nombre de usuario»)
        y una clave secreta, personal (la «contraseña»).
        FreeBSD preguntará por ambos antes de permitirle a
        un usuario ejecutar cualquier programa.</p><a id="idp66997200" class="indexterm"></a><p>Justo después de que FreeBSD arranque y termine de
        ejecutar sus «scripts» de inicio
        <a href="#ftn.idp66997968" class="footnote" id="idp66997968"><sup class="footnote">[2]</sup></a>, le presentará un «prompt» y
        solicitará un nombre válido de usuario:</p><pre class="screen">login:</pre><p>En este ejemplo vamos a asumir que su nombre de
        usuario es <code class="systemitem">john</code>.  Teclée
        <code class="literal">john</code> en el «prompt» y pulse
        <span class="keycap"><strong>Intro</strong></span>.  Debería presentársele un
        «prompt» donde introducir una
        «contraseña»:</p><pre class="screen">login: <strong class="userinput"><code>john</code></strong>
Password:</pre><p>Teclée ahora la contraseña de <code class="systemitem">john</code>
        y pulse <span class="keycap"><strong>Enter</strong></span>. La contraseña
        <span class="emphasis"><em>no se muestra en pantalla</em></span>, pero no debe
        preocuparse por ello.  Esto se hace así por motivos de
        seguridad.</p><p>Si ha tecleado su contraseña correctamente ya está
        usted en un sistema FreeBSD, listo para probar todas las
        órdenes disponibles.</p><p>Verá el <acronym class="acronym">MOTD</acronym> (mensaje del día)
        seguido por un «prompt» (un caracter <code class="literal">#</code>,
        <code class="literal">$</code> o <code class="literal">%</code>).  Esto confirma
        que ha validado con éxito su usuario en FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-virtual"></a>3.2.3. Consolas múltiples</h3></div></div></div><p>Ejecutar órdenes <span class="trademark">UNIX</span>® en una consola está bien,
        pero FreeBSD puede ejecutar muchos programas a la vez.  Tener una consola
        donde se pueden teclear órdenes puede ser un desperdicio
        cuando un sistema operativo como FreeBSD puede ejecutar docenas de
        programas al mismo tiempo.  Aquí es donde las
        «consolas virtuales» muestran su potencial.</p><p>FreeBSD puede configurarse para presentarle diferentes
        consolas virtuales.  Puede cambiar de una de ellas a cualquier
        otra consola virtual pulsando un par de teclas en su teclado.
        Cada consola tiene su propio canal de salida, y FreeBSD
        se ocupa de redirigir correctamente la entrada del teclado y
        la salida al monitor cuando cambia de una consola virtual a la
        siguiente.</p><p>Se han reservado ciertas combinaciones especiales de teclas
        para pasar de unas consolas virtuales a otras en FreeBSD <a href="#ftn.idp67037136" class="footnote" id="idp67037136"><sup class="footnote">[3]</sup></a>. Puede utilizar
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>,
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> y
         así sucesivamente hasta
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F8</strong></span> para
         cambiar a una consola virtual diferente en FreeBSD.</p><p>Mientras está cambiando de una consola a la siguiente,
        FreeBSD se ocupa de guardar y restaurar la salida de pantalla. El
        resultado es la «ilusión» de tener varias
        pantallas y teclados «virtuales» que puede utilizar
        para teclear órdenes para que FreeBSD los ejecute.  El programa que
        usted lanza en una consola virtual no deja de ejecutarse cuando la
        consola no está visible.  Continúan ejecutándose
        cuando se cambia a una consola virtual diferente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-ttys"></a>3.2.4. El fichero <code class="filename">/etc/ttys</code></h3></div></div></div><p>La configuración por omisión de FreeBSD iniciará
        con ocho consolas virtuales.  No es una configuración
        estática por hardware, así que puede personalizar
        fácilmente su sistema para arrancar con más o menos
        consolas virtuales.  El número y propiedades de las consolas
        virtuales están detallados en
        <code class="filename">/etc/ttys</code>.</p><p>En <code class="filename">/etc/ttys</code> es donde se configuran
        las consolas virtuales de FreeBSD.  Cada línea no
        comentada de este fichero (líneas que no comienzan con un
        caracter <code class="literal">#</code>) contiene propiedades para una sola
        terminal o consola virtual.  La versión por omisión de
        este fichero en FreeBSD configura nueve consolas
        virtuales y habilita ocho de ellas.  Son las líneas que
        comienzan con <code class="literal">ttyv</code>:</p><pre class="programlisting"># name  getty                           type    status          comments
#
ttyv0   "/usr/libexec/getty Pc"         cons25  on  secure
# Virtual terminals
ttyv1   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv2   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv3   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv8   "/usr/X11R6/bin/xdm -nodaemon"  xterm   off secure</pre><p>Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a> si quiere una descripción detallada
        de cada columna en este fichero y todas las opciones que puede usar
        para configurar las consolas virtuales.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-singleuser"></a>3.2.5. Consola en modo monousuario</h3></div></div></div><p>En la <a class="xref" href="#boot-singleuser" title="12.6.2. Modo monousuario">Sección 12.6.2, &#8220;Modo monousuario&#8221;</a> encontrará una
        descripción detallada de lo que es «modo
        monousuario».
        No importa que sólo exista una consola cuando ejecuta FreeBSD en
        modo monousuario.  No hay otra consola virtual disponible.  Las
        configuraciones de la consola en modo monousuario se pueden encontrar
        también en <code class="filename">/etc/ttys</code>.  Busque la
        línea que comienza por <code class="literal">console</code>:</p><pre class="programlisting"># name  getty                           type    status          comments
#
# Si la consola está marcada como "insecure", entonces init
# le pedirá la contraseña de root al entrar a modo monousuario.
console none                            unknown off secure</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tal y como indican los comentarios por encima de la
          línea <code class="literal">console</code>, puede editar esta
          línea y cambiar <code class="literal">secure</code> por
          <code class="literal">insecure</code>.  Si lo hace, cuando FreeBSD arranque
          en modo monousuario el sistema le pedirá la
          contraseña de <code class="systemitem">root</code>.</p><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Tenga cuidado si cambia esto a
          <code class="literal">insecure</code></em></span>.  Si olvida la
          contraseña de <code class="systemitem">root</code> arrancar
          en modo monousuario será con seguridad más
          complicado.  Sigue siendo posible, pero será un poco
          difícil para alguien que no esté familiarizado
          con le proceso de arranque de FreeBSD y los programas involucrados
          en dicho proceso.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-vidcontrol"></a>3.2.6. Cambio del modo de video de la consola</h3></div></div></div><p>La consola FreeBSD por omisión tiene un modo de video que
	puede ajustarse a 1024x768, 1280x1024 o cualquier otra resolución
	que admita su chip gráfico y su monitor.  Si quiere utilizar
	uno diferente tendrá que recompilar su kernel con estas dos
	opciones añadidas:</p><pre class="programlisting">options VESA
options SC_PIXEL_MODE</pre><p>Una vez recompilado el kernel con esas dos opciones en él
        determine qué modos de video admite su hardware; para ello
	use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>.  Con lo siguiente le mostrará una
	lista de modos de video soportados:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol -i mode</code></strong></pre><p>La salida de esta orden es una lista de los modos de
        que admite su tarjeta.  Para elegir uno de ellos tendrá
	que ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> en una consola como
	<code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol MODE_279</code></strong></pre><p>Si el modo de video que ha elegido le parece adecuado puede
	configurarlo de forma permanente haciendo que funcione desde el
	momento del arranque; para ello debe editar <code class="filename">/etc/rc.conf</code>
	file:</p><pre class="programlisting">allscreens_flags="MODE_279"</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="permissions"></a>3.3. Permisos</h2></div></div></div><a id="idp67068368" class="indexterm"></a><p>FreeBSD, cuya raíz histórica es el <span class="trademark">UNIX</span>® BSD,
      se fundamenta en varios conceptos clave de UNIX. El primero y
      más importante es que FreeBSD es un sistema operativo
      multi-usuario.  El sistema puede gestionar múltiples usuarios
      trabajando simultáneamente y en tareas que no guarden relación
      entre sí.  El sistema se encarga de compartir y administrar
      peticiones de dispositivos de hardware, periféricos, memoria y
      tiempo de CPU de manera equitativa para cada usuario.</p><p>Debido a que el sistema es capaz de soportar múltiples
      usuarios, todo lo que el sistema administra tiene un conjunto de
      permisos que usa para decidir quién puede leer, escribir y
      ejecutar un recurso.  Estos permisos se guardan como octetos
      divididos en tres partes: una para el propietario del fichero, otra
      para el grupo al que el fichero pertenece, y otra para todos los
      demás grupos y usuarios.  Veamos una
      representación numérica de esto:</p><a id="idp67070160" class="indexterm"></a><a id="idp67070672" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Valor</th><th>Permiso</th><th>Listado de directorio</th></tr></thead><tbody><tr><td>0</td><td>No leer, no escribir, no ejecutar</td><td><code class="literal">---</code></td></tr><tr><td>1</td><td>No leer, no escribir, ejecutar</td><td><code class="literal">--x</code></td></tr><tr><td>2</td><td>No leer, escribir, no ejecutar</td><td><code class="literal">-w-</code></td></tr><tr><td>3</td><td>No leer, escribir, ejecutar</td><td><code class="literal">-wx</code></td></tr><tr><td>4</td><td>Leer, no escribir, no ejecutar</td><td><code class="literal">r--</code></td></tr><tr><td>5</td><td>Leer, no escribir, ejecutar</td><td><code class="literal">r-x</code></td></tr><tr><td>6</td><td>Leer, escribir, no ejecutar</td><td><code class="literal">rw-</code></td></tr><tr><td>7</td><td>Leer, escribir, ejecutar</td><td><code class="literal">rwx</code></td></tr></tbody></table></div><a id="idp67096656" class="indexterm"></a><a id="idp67097680" class="indexterm"></a><p>Puede utilizar el parámetro de línea de órdenes
      <code class="option">-l</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> para ver un listado
      largo que incluya una columna con información acerca
      de los permisos de fichero para el propietario, grupo y
      los demás.  Por ejemplo, un <code class="command">ls -l</code> en
      un directorio puede mostrar algo como esto:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ls -l</code></strong>
total 530
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 mifichero
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 otrofichero
-rw-r--r--  1 root  wheel    7680 Sep  5 12:31 email.txt
...</pre><p>Aquí está como se divide la primera columna
      de <code class="command">ls -l</code>:</p><pre class="screen">-rw-r--r--</pre><p>El primer caracter (más a la izquierda) indica si
      este fichero es un fichero regular, un directorio, un
      dispositivo especial de caracter, un socket o cualquier otro
      dispositivo especial pseudo-ficheroa . En este caso, el
      <code class="literal">-</code> un fichero regular.  Los siguientes tres
      caracteres, <code class="literal">rw-</code> en este ejemplo, dan los permisos
      para el propietario del fichero.  Los siguientes tres caracteres,
      <code class="literal">r--</code>, dan los permisos para el grupo al que
      el fichero pertenece.  Los últimos tres caracteres,
      <code class="literal">r--</code>, dan los permisos para el resto del
      mundo.  Un guión indica que el permiso está desactivado.
      En el caso de este fichero, los permisos están
      asignados de tal manera que el propietario puede leer y escribir
      en el fichero, el grupo puede leer el fichero, y el resto del
      mundo sólo puede leer el fichero.  De acuerdo con la tabla
      de arriba, los permisos para este fichero serían
      <code class="literal">644</code>,
      donde cada dígito representa las tres partes de los
      permisos del fichero.</p><p>Todo ésto está muy bien, pero ?cómo
      controla el sistema los permisos de los dispositivos? FreeBSD en
      realidad trata la mayoría de los dispositivos hardware como un
      fichero que los programas pueden abrir, leer y en los que pueden
      escribir datos como si de cualquier otro fichero se tratara.  Estos
      ficheros especiales de dispositivo se encuentran en el directorio
      <code class="filename">/dev</code>.</p><p>Los directorios también son tratados como ficheros.  Tienen
      permisos de lectura, escritura y ejecución.  El bit de
      ejecución en un directorio tiene un significado
      ligeramente distinto que para los ficheros.  Cuando un directorio
      está marcado como ejecutable significa que se puede mirar dentro,
      se puede hacer un «cd» (cambiar directorio) a él.
      Esto también significa que dentro del directorio es posible
      acceder a ficheros cuyos nombres son conocidos (sujeto, claro está,
      a los permisos de los ficheros mismos).</p><p>En particular, para poder realizar un listado de directorio,
      el permiso de lectura debe ser activado en el directorio,
      mientras que para borrar un fichero del que se conoce el
      nombre es necesario tener permisos de escritura <span class="emphasis"><em>y</em></span>
      ejecución en el directorio que contiene el fichero.</p><p>Existen más permisos, pero se usan principalmente en
      circunstancias especiales como los binarios ejecutables de tipo setuid
      y los los directorios de tipo «sticky».  Si desea más
      información acerca de los permisos de ficheros y cómo
      establecerlos, consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>.
      </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67108176"></a>3.3.1. Permisos simbólicos</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp67110608" class="indexterm"></a><p>Los permisos simbólicos, también conocidos como
        expresiones simbólicas, utilizan caracteres en lugar de valores
        octales para asignar permisos a ficheros o directorios.  Las expresiones
        simbólicas utilizan la sintaxis de (quién) (acción)
        (permisos) mediante los siguientes valores:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Opción</th><th>Letra</th><th>Representa</th></tr></thead><tbody><tr><td>(quién)</td><td>u</td><td>Usuario</td></tr><tr><td>(quién)</td><td>g</td><td>Grupo propietario</td></tr><tr><td>(quién)</td><td>o</td><td>Otro</td></tr><tr><td>(quién)</td><td>a</td><td>Todos («todo el mundo»)</td></tr><tr><td>(acción)</td><td>+</td><td>Añadir permisos</td></tr><tr><td>(acción)</td><td>-</td><td>Quitar permisos</td></tr><tr><td>(acción)</td><td>=</td><td>Activar permisos explícitamente</td></tr><tr><td>(permisos)</td><td>r</td><td>Lectura</td></tr><tr><td>(permisos)</td><td>w</td><td>Escritura</td></tr><tr><td>(permisos)</td><td>x</td><td>Ejecución</td></tr><tr><td>(permisos)</td><td>t</td><td>Bit Sticky («pegajoso»)</td></tr><tr><td>(permisos)</td><td>s</td><td>Activar UID o GID</td></tr></tbody></table></div><p>Estos valores se aplican con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
      de la misma manera que los anteriores, pero con letras.  Por
      ejemplo, podría usar la siguiente orden para
      bloquear a otros usuarios el acceso a <em class="replaceable"><code>FICHERO</code></em>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go= FICHERO</code></strong></pre><p>Puede usarse una lista separada por comas cuando
      se quiera aplicar más de un conjunto de cambios a un fichero.
      Por ejemplo la siguiente orden eliminará los permisos de
      escritura de grupo y «mundo» a
      <em class="replaceable"><code>FICHERO</code></em>, y añade permisos de
      ejecución para todos:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go-w,a+x FILE</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67150928"></a>3.3.2. Banderas de fichero en FreeBSD</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Además de los permisos de fichero previamente
        expuestos, FreeBSD permite el uso de «banderas de
        fichero». Estas banderas añaden un nivel de seguridad
        y control adicional a los ficheros, pero no a los directorios.</p><p>Las banderas de fichero añaden un nivel adicional
        de control sobre los ficheros ayudando a asegurar que en algunos
        casos ni siquiera <code class="systemitem">root</code> pueda eliminar
        o alterar ficheros.</p><p>Las banderas de fichero se modifican mediante
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>, gracias a una interfaz muy sencilla. Por ejemplo,
        para habilitar la bandera imborrable de sistema en
        <code class="filename">fichero1</code>, escriba lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags sunlink fichero1</code></strong></pre><p>Y para dehabilitar la bandera imborrable de sistema,
        simplemente escriba la orden previa con «no»
        antes de <code class="option">sunlink</code>. Observe:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags nosunlink fichero1</code></strong></pre><p>Para ver las banderas de este fichero, utilice
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> con las opciones <code class="option">-lo</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -lo fichero1
	</code></strong></pre><p>La salida debería ser como esta:</p><pre class="programlisting">-rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 fichero1</pre><p>Varias banderas solo pueden ser añadidas o retiradas
        de ficheros por el usuario <code class="systemitem">root</code>. En
        otros casos, el propietario del fichero puede activar estas
        banderas. Se recomienda que para más información
        la persona encargada de la administración del sistema
        consulte las  páginas de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> y
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chflags</span>(2)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67164752"></a>3.3.3. Los permisos <code class="literal">setuid</code>,
        <code class="literal">setgid</code> y <code class="literal">sticky</code></h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Además de los permisos que se han explicado hay
        más, hay tres tipos más que todos los administradores
	deberían conocer.  Son los permisos
	<code class="literal">setuid</code>,
	<code class="literal">setgid</code> y <code class="literal">sticky</code>.</p><p>Estos permisos juegan un papel clave en ciertas operaciones
        <span class="trademark">UNIX</span>® puesto que facilitan funcionalidades que no se suelen
	permitir a los usuarios normales.  Para comprenderlas
	totalmente hay que comprender la diferencia entre el ID real
	del usuario y el ID efectivo.</p><p>El ID del usuario real es el
        <acronym class="acronym">UID</acronym> que arranca (y el propietario) del
	proceso.   El <acronym class="acronym">UID</acronym> efectivo es el ID bajo
	el que se ejecuta el proceso.  Veamos un ejemplo; el programa
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> se ejecuta con el ID real del usuario puesto que
	el usuario está cambiando su contraseña.  Pero para
	poder manipular la base de datos de contraseñas debe
	ejecutarse con el ID efectivo del usuario
	<code class="systemitem">root</code>.  De este modo es posible que los usuarios
	cambien su contraseña sin llegar a ver un error de
	<span class="errorname">Permission Denied</span> (permiso denegado).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La opción <code class="literal">nosuid</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	  hace que estos binarios den errores silenciosos, es decir,
	  fallarán pero el usuario no recibirá ningún
	  mensaje de error por ello.  Esta opción no funciona
	  siempre, pues, según la página man de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>, un «wrapper»
	  <code class="literal">nosuid</code> puede sortear esta limitación.</p></div><p>El permiso setuid puede asignarse colocando un número
         cuatro (4) antes de los permisos.  Se ve mejor con un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 4755 ejemplosuid.sh</code></strong></pre><p>Los permisos de
	<code class="filename">ejemplosuid.sh</code>
	deberían ser así:</p><pre class="programlisting">-rwsr-xr-x   1 trhodes  trhodes    63 Aug 29 06:36 ejemplosuid.sh</pre><p>Fíjese atentamente en la
	<code class="literal">s</code> que ha aparecido en los permisos
	del fichero, en la parte de los permisos del propietario;
	esa <code class="literal">s</code> está en donde estaría
	el bit de ejecución.  Gracias a esto el funcionamiento
	de aplicaciones que necesitan permisos elevados, como
	<code class="command">passwd</code>, pueden funcionar.</p><p>Si quiere ver un ejemplo con sus propios ojos abra dos
        terminales.  En una arranque un proceso (ejecute)
	<code class="command">passwd</code> con un usuario normal.  Mientras la
	aplicación espera a que le de una nueva contraseña
	busque la información de usuario del proceso
	<code class="command">passwd</code> en la tabla de procesos.</p><p>En la terminal A:</p><pre class="screen">Changing local password for trhodes
Old Password:</pre><p>En la terminal B:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ps aux | grep passwd</code></strong></pre><pre class="screen">trhodes  5232  0.0  0.2  3420  1608   0  R+    2:10AM   0:00.00 grep passwd
root     5211  0.0  0.2  3620  1724   2  I+    2:09AM   0:00.01 passwd</pre><p>Tal y como se ha dicho, un usuario normal puede ejecutar
        <code class="command">passwd</code>, pero en realidad está
	utilizando el <acronym class="acronym">UID</acronym> efectivo de
	<code class="systemitem">root</code>.</p><p>El permiso <code class="literal">setgid</code> actúa del mismo
        modo que el <code class="literal">setuid</code>, pero afecta a los permisos
	del grupo.  Cuando una aplicación funciona con esta
	configuración lo hace con los permisos del grupo al
	que pertenece el fichero, no los del usuario que ha
	arrancado el proceso.</p><p>Si quiere utilizar el permiso <code class="literal">setgid</code>
        debe situar un núnmero dos (2) al principio de los
	permisos que vaya a asignar mediante
	<code class="command">chmod</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 2755 ejemplosuid.sh</code></strong></pre><p>La nueva configuración tiene un aspecto muy
        similar a la que tenía antes, pero observe que la
	<code class="literal">s</code> de antes está ahora en el campo
	de los permisos de grupo:</p><pre class="screen">-rwxr-sr-x   1 trhodes  trhodes    44 Aug 31 01:49 ejemplosuid.sh</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En ambos ejemplos, incluso si el «script»
	  en cuestión es ejecutable, no se va a ejecutar
	  con un
	  <acronym class="acronym">EUID</acronym> distinto o un ID efectivo de
	  usuario porque los «scripts» de shell no
	  pueden acceder a la llama del sistema
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setuid&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">setuid</span>(2)</span></a>.</p></div><p>Los dos permisos que acabamos de mostrar
	los bits de permisos (<code class="literal">setuid</code>
	y <code class="literal">setgid</code>) pueden reducir el nivel
	de seguridad haciendo que se escalen los permisos.
	Pero hay un tercer bit especial de permisos que puede
	ser de mucha ayuda para reforzar la seguridad del
	sistema:
	el <code class="literal">sticky bit</code>.</p><p>El <code class="literal">sticky bit</code>( que podríamos
        traducir como «bit pegajoso») aplicado a un
	directorio hace que solamente el propietario de un fichero
	pueda borrarlo.  Esto evita el borrado de ficheros ajenos
	en directorios públicos como
	<code class="filename">/tmp</code>.  Si quiere
	usarlo coloque un uno (1) antes de los permisos. Veamos
	un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 1777 /tmp</code></strong></pre><p>Para ver el <code class="literal">;sticky bit</code> en acción usamos
	<code class="command">ls</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -al / | grep tmp</code></strong></pre><pre class="screen">drwxrwxrwt  10 root  wheel         512 Aug 31 01:49 tmp</pre><p>El <code class="literal">sticky bit</code> es la letra
	<code class="literal">t</code> al final de los permisos.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dirstructure"></a>3.4. Estructura de directorios</h2></div></div></div><a id="idp67242064" class="indexterm"></a><p>La jerarquía del sistema de ficheros de FreeBSD es
      fundamental para obtener una compresión completa del
      sistema.  El concepto más importante a entender es el
      del directorio raíz, «/».  Este directorio
      es el primero en ser montado en el arranque y contiene
      el sistema básico necesario para preparar el sistema
      operativo para su funcionamiento en modo multiusuario.
      El directorio raíz también contiene puntos de montaje
      para cualquier otro sistema de ficheros que se pretenda montar.</p><p>Un punto de montaje es un directorio del que se pueden
      colgar sistemas de ficheros adicionales en un sistema padre
      (que suele ser el directorio raíz).
      Esto se explica con detalle en la <a class="xref" href="#disk-organization" title="3.5. Organización de disco">Sección 3.5, &#8220;Organización de disco&#8221;</a>.
      Los puntos de montaje estándar son, por ejemplo,
      <code class="filename">/usr</code>, <code class="filename">/var</code>,
      <code class="filename">/tmp</code>,
      <code class="filename">/mnt</code> y <code class="filename">/cdrom</code>.  Estos
      directorios suelen corresponderse con entradas en
      <code class="filename">/etc/fstab</code>.  <code class="filename">/etc/fstab</code>
      es una tabla que sirve de referencia al sistema y contiene
      los diferentes sistemas de ficheros y sus respectivos
      puntos de montaje.  La mayoría de los sistemas de ficheros
      en <code class="filename">/etc/fstab</code> se montan automáticamente
      en el arranque gracias al «script» <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>,
      a menos que contengan la opción <code class="option">noauto</code>.
      Si quiere más información consulte la <a class="xref" href="#disks-fstab" title="3.6.1. El fichero fstab">Sección 3.6.1, &#8220;El fichero <code class="filename">fstab</code>&#8221;</a>.</p><p>Veremos ahora una descripción de los directorios
      más comunes.  Si desea información más
      completa consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a>.</p><p>
      </p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Directorio</th><th>Descripción</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="filename">/</code></td><td valign="top">Directorio raíz del sistema de ficheros.</td></tr><tr><td valign="top"><code class="filename">/bin/</code></td><td valign="top">Utilidades de usuario fundamentales tanto para el
                ambiente monousuario como para el multiusuario.</td></tr><tr><td valign="top"><code class="filename">/boot/</code></td><td valign="top">Programas y ficheros de configuración necesarios
                durante el arranque del sistema operativo.</td></tr><tr><td valign="top"><code class="filename">/boot/defaults/</code></td><td valign="top">Ficheros de configuración por omisión del
                arranque; ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/dev/</code></td><td valign="top">Nodos de dispositivo; ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=intro&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">intro</span>(4)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/</code></td><td valign="top">Ficheros de configuración y
               «scripts» del sistema.</td></tr><tr><td valign="top"><code class="filename">/etc/defaults/</code></td><td valign="top">Ficheros de configuración por omisión del sistema;
                ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/mail/</code></td><td valign="top">Ficheros de configuración para agentes de
                transporte de correo como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/namedb/</code></td><td valign="top">Ficheros de configuración de <code class="command">named</code>;
                ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/periodic/</code></td><td valign="top">«Scripts» que se ejecutan diariamente,
                semanalmente y mensualmente mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>;
                ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/ppp/</code></td><td valign="top">Ficheros de configuración de <code class="command">ppp</code>;
                ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/mnt/</code></td><td valign="top">Directorio vacío utilizado de forma habitual por
                administradores de sistemas como punto de montaje
                temporal.</td></tr><tr><td valign="top"><code class="filename">/proc/</code></td><td valign="top">Sistema de ficheros de procesos; ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procfs</span>(5)</span></a>,
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_procfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_procfs</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/rescue/</code></td><td valign="top">Programas enlazados estáticamente para
                restauraciones de emergencia; ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rescue&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rescue</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/root/</code></td><td valign="top">Directorio local para la cuenta <code class="systemitem">root</code>.</td></tr><tr><td valign="top"><code class="filename">/sbin/</code></td><td valign="top">Programas del sistema y utilidades fundamentales de
                administración para ambientes monousuario y
                multiusuario.</td></tr><tr><td valign="top"><code class="filename">/tmp/</code></td><td valign="top">Ficheros temporales. El contenido de
                <code class="filename">/tmp</code>
                <span class="emphasis"><em>NO</em></span> suelen conservarse después
                de un reinicio del sistema.
                Los sistemas de ficheros basados en memoria suelen montarse
                en <code class="filename">/tmp</code>
                Puede automatizarse mediante variables de
                tmpmfs en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> (o con una entrada en
                <code class="filename">/etc/fstab</code>; ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>,
                o para FreeBSD 4.X, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mfs</span>(8)</span></a>).</td></tr><tr><td valign="top"><code class="filename">/usr/</code></td><td valign="top">La mayoría de utilidades y aplicaciones de usuario.</td></tr><tr><td valign="top"><code class="filename">/usr/bin/</code></td><td valign="top">Aplicaciones comunes, herramientas de programación y
                otras aplicaciones.</td></tr><tr><td valign="top"><code class="filename">/usr/include/</code></td><td valign="top">Ficheros «include» estándar de C.</td></tr><tr><td valign="top"><code class="filename">/usr/lib/</code></td><td valign="top">Bibliotecas.</td></tr><tr><td valign="top"><code class="filename">/usr/libdata/</code></td><td valign="top">Ficheros de datos con diversas funciones.</td></tr><tr><td valign="top"><code class="filename">/usr/libexec/</code></td><td valign="top">Dæmons del sistema y utilidades del sistema
                (ejecutados por otros programas).</td></tr><tr><td valign="top"><code class="filename">/usr/local/</code></td><td valign="top">Ejecutables locales, bibliotecas, etc.
                también se usa como destino por omisión
                de la infraestructura de ports de FreeBSD.  Dentro de
                <code class="filename">/usr/local</code> debe seguirse el esquema
                general definido en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a> para
                <code class="filename">/usr</code>. Las
                excepciones son el directorio man, que está
                directamente bajo <code class="filename">/usr/local</code> en
                lugar de debajo de <code class="filename">/usr/local/share</code>,
                y la documentación de los ports está en
                <code class="filename">share/doc/port</code>.
 	      </td></tr><tr><td valign="top"><code class="filename">/usr/obj/</code></td><td valign="top">Arbol destino dependiente de arquitectura fruto de
                la compilación del árbol
                <code class="filename">/usr/src</code>.</td></tr><tr><td valign="top"><code class="filename">/usr/ports</code></td><td valign="top">La colección de Ports de FreeBSD (opcional).</td></tr><tr><td valign="top"><code class="filename">/usr/sbin/</code></td><td valign="top">Dæmons del sistema y utilidades del sistema
                (ejecutados por usuarios del sistema).</td></tr><tr><td valign="top"><code class="filename">/usr/share/</code></td><td valign="top">Ficheros independientes de arquitectura.</td></tr><tr><td valign="top"><code class="filename">/usr/src/</code></td><td valign="top">Ficheros fuente BSD y/o local.</td></tr><tr><td valign="top"><code class="filename">/usr/X11R6/</code></td><td valign="top">Ejecutables de la distribución X11R6,
                bibliotecas, etc (opcional).</td></tr><tr><td valign="top"><code class="filename">/var/</code></td><td valign="top">Ficheros multipropósito de log, temporales, en
                tránsito y de «spool».
                En ocasiones se monta en
                <code class="filename">/var</code> un sistema de
                ficheros basado en memoria.</td></tr><tr><td valign="top"><code class="filename">/var/log/</code></td><td valign="top">Diversos ficheros de log del sistema.</td></tr><tr><td valign="top"><code class="filename">/var/mail/</code></td><td valign="top">Ficheros de buzones de correo de usuarios.</td></tr><tr><td valign="top"><code class="filename">/var/spool/</code></td><td valign="top">Directorios diversos del sistema de spool de impresora
                y correo.</td></tr><tr><td valign="top"><code class="filename">/var/tmp/</code></td><td valign="top">Ficheros temporales.  Suelen conservarse tras el
                Estos ficheros suelen conservarse tras el reinicio del
		sistema, a menos que
                <code class="filename">/var</code> sea un
                sistema de ficheros basado en memoria.</td></tr><tr><td valign="top"><code class="filename">/var/yp</code></td><td valign="top">Mapas NIS.</td></tr></tbody></table></div><p>
    </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disk-organization"></a>3.5. Organización de disco</h2></div></div></div><p>La unidad más pequeña que FreeBSD utiliza para
        ubicar ficheros es el nombre de fichero.  Los nombres de fichero
        son sensibles a las mayúsculas, lo que significa que
        <code class="filename">readme.txt</code> y <code class="filename">README.TXT</code>
        son dos ficheros distintos. FreeBSD no utiliza la extensión
        (<code class="filename">.txt</code>) de un fichero para determinar si
        es un programa, o un documento o alguna otra forma de datos.</p><p>Los ficheros se almacenan en directorios. Un directorio puede
        estar vacío, o puede contener cientos de ficheros.  Un
        directorio también puede contener otros directorios,
        permitiéndole contruir una jerarquía de directorios
        dentro de otro.  Esto hace mucho más fácil la
        organización de sus datos.</p><p>Para referirse a ficheros o directorios se usa el nombre
        de archivo o de directorio, seguido por una barra,
        <code class="literal">/</code>, seguido por cualquier otro nombre de
        directorio que sea necesario. Si tiene un directorio
        <code class="filename">tal</code>, el cual contiene el directorio
        <code class="filename">cual</code>, el cual contiene el fichero
        <code class="filename">readme.txt</code>, entonces el nombre completo
        o <em class="firstterm">ruta</em> al fichero es
        <code class="filename">tal/cual/readme.txt</code>.</p><p>Los directorios y ficheros se almacenan en un sistema de ficheros.
        Cada sistema de ficheros contiene un sólo directorio en el nivel
        más elevado, que es el
        <em class="firstterm">directorio raíz</em>
        de ese sistema de ficheros.  Este directorio raíz puede
        contener otros directorios.</p><p>Lo visto hasta ahora probablemente sea similar a cualquier otro
        sistema operativo que pueda haber utilizado, pero hay unas cuantas
        diferencias; por ejemplo, <span class="trademark">MS-DOS</span>® utiliza <code class="literal">\</code> para
        separar nombres de fichero y directorio, mientras que <span class="trademark">Mac OS</span>® usa
        <code class="literal">:</code>.</p><p>FreeBSD no utiliza letras de unidades, u otro nombre de unidad
        en la ruta. Por tanto, no podrá escribir
        <code class="filename">c:/tal/cual/readme.txt</code>
        en FreeBSD.</p><p>En FreeBSD, en cambio, un sistema de ficheros recibe el nombre de
        <em class="firstterm">sistema de ficheros raíz</em>.  El
        directorio raíz del sistema de ficheros raíz se
        representa como <code class="literal">/</code>. Cualquier otro sistema
        de ficheros, por tanto, se <em class="firstterm">monta</em> bajo el
        sistema de ficheros raíz.  No importa cuántos discos
        tenga en su sistema FreeBSD, cada directorio parecerá ser parte del
        mismo disco.</p><p>Suponga que tiene tres sistemas de ficheros, denominados
        <code class="literal">A</code>,
        <code class="literal">B</code> y <code class="literal">C</code>. Cada sistema de
        ficheros tiene un directorio raíz, el cual contiene
        otros dos directorios, llamados
        <code class="literal">A1</code>, <code class="literal">A2</code> (y de la misma manera
        <code class="literal">B1</code>, <code class="literal">B2</code> y
	<code class="literal">C1</code>, <code class="literal">C2</code>).</p><p>Usaremos <code class="literal">A</code> como sistema de ficheros
        raíz.  Si usara <code class="command">ls</code> para ver el contenido de
        este directorio vería dos subdirectorios, <code class="literal">A1</code>
        y <code class="literal">A2</code>.  El árbol de directorios sería
        como este:</p><div class="mediaobject"><img src="install/example-dir1.png" /></div><p>Un sistema de ficheros debe montarse en un directorio
        de otro sistema de ficheros.  Ahora suponga que monta el
        sistema de ficheros <code class="literal">B</code> en el directorio
        <code class="literal">A1</code>.  El directorio raíz de
        <code class="literal">B</code> reemplaza a <code class="literal">A1</code>,
        y los directorios en <code class="literal">B</code> aparecen de
        esta manera:</p><div class="mediaobject"><img src="install/example-dir2.png" /></div><p>Cualquier fichero que esté en el directorio
        <code class="literal">B1</code> o <code class="literal">B2</code> puede
        encontrarse con la ruta <code class="filename">/A1/B1</code> o
        <code class="filename">/A1/B2</code> según sea necesario.
        Cualquier fichero que esté en <code class="filename">/A1</code>
        ha desaparecido temporalmente.  Aparecerán de nuevo
        si <code class="literal">B</code> se <em class="firstterm">desmonta</em>
        de A.</p><p>Si <code class="literal">B</code> se monta en <code class="literal">A2</code>
        entonces el diagrama se vería así:</p><div class="mediaobject"><img src="install/example-dir3.png" /></div><p>y las rutas serían <code class="filename">/A2/B1</code> y
        <code class="filename">/A2/B2</code> respectivamente.</p><p>Pueden montarse sistemas de ficheros uno sobre otro.  Continuando
        con el ejemplo anterior, el sistema de ficheros <code class="literal">C</code>
        podría montarse en el directorio <code class="literal">B1</code>
        en el sistema de ficheros <code class="literal">B</code>, lo que nos
        llevaría a esto:</p><div class="mediaobject"><img src="install/example-dir4.png" /></div><p>O <code class="literal">C</code> podría montarse directamente
        en el sistema de ficheros <code class="literal">A</code>, bajo el directorio
        <code class="literal">A1</code>:</p><div class="mediaobject"><img src="install/example-dir5.png" /></div><p>Si está familiarizado con <span class="trademark">MS-DOS</span>® esto es similar,
        aunque no idéntico, a utilizar <code class="command">join</code>.</p><p>Esto no es algo a lo deba usted dedicar tiempo de forma habitual.
        Normalmente creará sistemas de ficheros al instalar FreeBSD
        y decidirá dónde montarlos; lo más habitual es que
        no los cambie de sitio a menos que agregue un disco nuevo.</p><p>Es perfectamente posible tener un sistema de ficheros raíz
        extenso y no necesitar crear otros.  Este esquema tiene unos cuantos
        inconvenientes y una ventaja:
        </p><div class="itemizedlist"><div class="itemizedlist-title">Ventajas de disponer de múltiples sistemas de
         ficheros</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si dispone de varios sistemas de ficheros puede optar por
            usar distintas <em class="firstterm">opciones de montaje</em>.
            Por ejemplo, gracias a una planificación cuidadosa, el
            sistema de ficheros raíz puede montarse como
            sólo-lectura, haciendo imposible borrar sin querer o
            editar un fichero crítico.  Al mantener separados
            sistemas de ficheros en los que los usuarios pueden escribir,
            como <code class="filename">/home</code>, de otros sistemas de ficheros
            también le permite montar con la opción
            <em class="firstterm">nosuid</em>; dicha opción previene
            que los bits <em class="firstterm">suid</em>/<em class="firstterm">guid</em>
            en los ejecutables almacenados en el sistema de ficheros
            tengan efecto, mejorando en cierto modo la seguridad.</p></li><li class="listitem"><p>FreeBSD optimiza automáticamente el esquema de ficheros
            en un sistema de ficheros, dependiendo de cómo el sistema
            de ficheros esté siendo utilizado.
            Uno que contenga muchos ficheros pequeños tendrá
            una optimización distinta de uno que contenga menos ficheros
	    y más grandes.  Si sólo tiene un gran sistema de
            ficheros no hay manera de aplicar esta optimización.</p></li><li class="listitem"><p>Los sistemas de ficheros de FreeBSD son muy robustos en caso
            de sufrir un caída eléctrica.  De todas maneras, un fallo
            eléctrico en un momento crítico puede
            dañar la estructura del sistema de ficheros.  Si reparte
            sus datos en múltiples sistemas de ficheros hará
            que sea más probable que el sistema arranque después
            de uno de esos fallos, haciéndole además
            más fácil la tarea de restaurarlo desde
            un respaldo si fuera necesario.</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Ventajas de un sólo sistema de ficheros</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Los sistemas de ficheros son de un tamaño fijo. Si crea
            un sistema de ficheros cuando instala FreeBSD y le da un tamaño
            específico, tal vez descubra más tarde que necesita
            hacer la partición más grande.  Esto no es
            fácil de realizar sin hacer una copia de seguridad, crear
            de nuevo el sistema de ficheros con el nuevo
            tamaño y entonces restaurar los datos respaldados.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD dispone de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">growfs</span>(8)</span></a>, que permite incrementar el
              tamanño de un sistema de ficheros «al vuelo»,
              eliminando esta limitación.</p></div></li></ul></div><p>Los sistemas de ficheros están alojados en particiones.
        Este es un detalle muy importante, puesto que el
        término <span class="emphasis"><em>partición</em></span> no significa
        aquí lo mismo que en otros entornos (por ejemplo, en <span class="trademark">MS-DOS</span>®)
        debido a la herencia <span class="trademark">UNIX</span>® de FreeBSD. Cada partición se
        identifica con una letra desde <code class="literal">a</code> hasta
        <code class="literal">h</code>.  Cada partición puede contener solamente
        un sistema de ficheros, lo que significa que los sistemas de
        ficheros suelen definirse mediante su punto de montaje en la
        jerarquía del sistema de ficheros o por la letra de la
        partición en la que están alojados.</p><p>FreeBSD también utiliza espacio de disco
        como <em class="firstterm">espacio de intercambio (swap)</em>.
        El espacio de intercambio le brinda a FreeBSD
        <em class="firstterm">memoria virtual</em>.  Esto permite al
        su sistema comportarse como si tuviera más memoria de
        la que realmente tiene.  Cuando a FreeBSD se le agota la memoria
        mueve algunos de los datos que no está utilizando en
        ese momento al espacio de intercambio, y los vuelve a poner
        donde estaban (desplazando alguna otra cosa) cuando
        los necesita.</p><p>Algunas particiones tienen ciertas convenciones heredadas.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Partición</th><th>Representación</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="literal">a</code></td><td valign="top">Normalmente contiene el sistema de ficheros raíz</td></tr><tr><td valign="top"><code class="literal">b</code></td><td valign="top">Normalmente contiene el espacio de intercambio (swap)</td></tr><tr><td valign="top"><code class="literal">c</code></td><td valign="top">Suele tener el mismo tamaño de la
	        «slice» que la encierra.  Esto permite
                a las utilidades que necesitan trabajar en toda la
                «slice»  entera (por ejemplo durante una
                búsqueda de bloques dañados) trabajar en
                la partición <code class="literal">c</code>. Normalmente no
                debería usted crear un sistema de ficheros en esta
                partición.</td></tr><tr><td valign="top"><code class="literal">d</code></td><td valign="top">La partición <code class="literal">d</code> solía
                tuvo un significado especial asociado pero ya no lo
		tiene.</td></tr></tbody></table></div><p>Cada partición que contiene un sistema de ficheros
        se almacena en lo que FreeBSD llama una «slice».
        «slice» es en FreeBSD lo que en otros ámbitos se
	denomina partición; es un hecho que deriva de los orígenes
	de FreeBSD como ya sabemos basado en <span class="trademark">UNIX</span>®.</p><a id="idp67472080" class="indexterm"></a><a id="idp67472592" class="indexterm"></a><a id="idp67473104" class="indexterm"></a><p>Los números de «slice» muestran
        el nombre de dispositivo, al que precede una
        <code class="literal">s</code> y un número que puede ser un
	1 u otro número mayor.  Por lo tanto
        «da0<span class="emphasis"><em>s1</em></span>» es la
        primera slice en la primera unidad SCSI.  Sólo
        puede haber cuatro «slice» físicas en un
        disco, pero puede haber «slice» lógicas dentro
        «slice» físicas del tipo apropiado.  Estas
        «slice»extendidas se numeran a partir de 5,
        así que «ad0<span class="emphasis"><em>s5</em></span>»
        es la primera «slice» extendida en el primer
        disco IDE. Estos dispositivos se usan en sistemas de ficheros
        que se preve que ocupen una slice.</p><p>Tanto las «slice» y las unidades físicas
        «peligrosamente dedicadas», como otras unidades
        contienen <em class="firstterm">particiones</em>, que se designan
        mediante letras desde la <code class="literal">a</code>
        hasta <code class="literal">h</code>.  Esta letra se añade al nombre
        del dispositivo.  Se verá mucho mejor mediante ejemplos:
        «da0<span class="emphasis"><em>a</em></span>» es la partición
        a en la primera unidad da y es una de esas a las que llamamos
        «peligrosamente dedicada».
        «ad1s3<span class="emphasis"><em>e</em></span>» es la quinta
        partición en la tercera slice de la segunda
        unidad de disco IDE.</p><p>Para terminar, cada disco en el sistema tiene también
        su designación.
        El nombre de disco comienza por un código que indica
        el tipo de disco, luego un número, que indica qué disco
        es.  A diferencia de las «slice», la numeración de
        discos comienza desde 0.  Puede las numeraciones más comunes en
	el <a class="xref" href="#basics-dev-codes" title="Tabla 3.1. Códigos de dispositivos de disco">Tabla 3.1, &#8220;Códigos de dispositivos de disco&#8221;</a>.</p><p>Cuando se hace referencia a una partición, FreeBSD
        necesita que también se nombre la «slice»
	y el disco que contiene la partició.  Esto se hace
        con el nombre de disco, <code class="literal">s</code>, el número
        «slice» y por último la letra de la
        partición.  Tiene varios casos en el
	<a class="xref" href="#basics-disk-slice-part" title="Ejemplo 3.1. Ejemplo de nombres de disco, «slice» y partición">Ejemplo 3.1, &#8220;Ejemplo de nombres de disco, «slice» y partición&#8221;</a>.</p><p>En el <a class="xref" href="#basics-concept-disk-model" title="Ejemplo 3.2. Modelo conceptual de un disco">Ejemplo 3.2, &#8220;Modelo conceptual de un disco&#8221;</a> muestra un modelo
        conceptual del esquema de un disco que debería ayudarle a
        aclarar las cosas.</p><p>Antes de instalar FreeBSD tendrá que configurar las
        «slice» de disco, después crear particiones
	dentro de las «slice» que vaya a usar en FreeBSD y luego
	crear un sistema de ficheros (o swap) en cada partición y
	luego decidir cuál va a ser el punto de montaje del sistema
	de ficheros.</p><div class="table"><a id="basics-dev-codes"></a><div class="table-title">Tabla 3.1. Códigos de dispositivos de disco</div><div class="table-contents"><table summary="Códigos de dispositivos de disco" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Código</th><th>Significado</th></tr></thead><tbody><tr><td><code class="filename">ad</code></td><td>Disco ATAPI (IDE)</td></tr><tr><td><code class="filename">da</code></td><td>Disco de acceso directo SCSI</td></tr><tr><td><code class="filename">acd</code></td><td>CDROM ATAPI (IDE)</td></tr><tr><td><code class="filename">cd</code></td><td>CDROM SCSI</td></tr><tr><td><code class="filename">fd</code></td><td>Disquete (floppy)</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="basics-disk-slice-part"></a><div class="example-title">Ejemplo 3.1. Ejemplo de nombres de disco, «slice» y partición</div><div class="example-contents"><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Significado</th></tr></thead><tbody><tr><td><code class="literal">ad0s1a</code></td><td>La primera partición (<code class="literal">a</code>) en
                  la primera slice (<code class="literal">s1</code>) en el
                  primer disco IDE (<code class="literal">ad0</code>).</td></tr><tr><td><code class="literal">da1s2e</code></td><td>La quinta partición (<code class="literal">e</code>) en
                  la segunda slice (<code class="literal">s2</code>) en el
                  segundo disco SCSI (<code class="literal">da1</code>).</td></tr></tbody></table></div></div></div><br class="example-break" /><div class="example"><a id="basics-concept-disk-model"></a><div class="example-title">Ejemplo 3.2. Modelo conceptual de un disco</div><div class="example-contents"><p>Este diagrama muestra cómo ve FreeBSD el primer disco IDE
          en el sistema.  Se asume que el disco es de 4 GB,
          y contiene dos «slices» de 2 GB (particiones <span class="trademark">MS-DOS</span>®).
          La primera partición contiene un disco <span class="trademark">MS-DOS</span>®,
          <code class="filename">C:</code>,
          y la segunda partición contiene una instalación  de FreeBSD.
          Esta instalación de ejemplo tiene tres particiones, y una
          partición swap.</p><p>Cada una de las tres particiones tiene un sistema de ficheros.
          La partición <code class="literal">a</code> se utilizará
          para el sistema de ficheros raíz, <code class="literal">e</code>
          para la jerarquía del directorio <code class="filename">/var</code>,
          y <code class="literal">f</code> para la jerarquía del directorio
          <code class="filename">/usr</code>.</p><div class="mediaobject"><img src="install/disk-layout.png" /></div></div></div><br class="example-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mount-unmount"></a>3.6. Montaje y desmontaje de sistemas de ficheros</h2></div></div></div><p>El sistema de ficheros se visualiza mejor como un
      árbol enraizado, tal y como esá, en
      <code class="filename">/</code>.
      <code class="filename">/dev</code>, <code class="filename">/usr</code> y todos
      los demás directorios en el directorio raíz son
      raamas, las cuales pueden tener sus propias ramas, como
      <code class="filename">/usr/local</code> y así sucesivamente.</p><a id="idp67527888" class="indexterm"></a><p>Existen varias razones para albergar algunos de
      estos directorios en sistemas de ficheros separados.
      <code class="filename">/var</code> contiene los directorios
      <code class="filename">log/</code>, <code class="filename">spool/</code> y
      varios tipos de ficheros temporales y pueden llegar a desbordarse.
      Agotar el espacio del sistema de ficheros raíz
      no es nada bueno desde cualquier  punto de vista, así que
      separar <code class="filename">/var</code> de
      de <code class="filename">/</code> es algo que debería
      hacerse siempre que sea posible.</p><p>Otra razón para meter ciertos árboles
      de directorios en otros sistemas de ficheros es si van a estar
      albergados en discos físicos separados, o si son discos
      virtuales separados, como un montaje por
      <a class="link" href="#network-nfs" title="29.6. NFS">NFS</a> en el caso de unidades
      de CDROM.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-fstab"></a>3.6.1. El fichero <code class="filename">fstab</code></h3></div></div></div><a id="idp67532880" class="indexterm"></a><p>Durante el <a class="link" href="#boot" title="Capítulo 12. El proceso de arranque en FreeBSD">proceso de arranque</a>
        los sistemas de ficheros listados en <code class="filename">/etc/fstab</code>
        se montan automáticamente (a menos que estén
        listados con la opción <code class="option">noauto</code>).</p><p><code class="filename">/etc/fstab</code> contiene una
        lista de líneas con el siguiente formato:</p><pre class="programlisting"><em class="replaceable"><code>dispositivo</code></em>       <em class="replaceable"><code>/punto-de-montaje</code></em> <em class="replaceable"><code>punto de montaje</code></em>     <em class="replaceable"><code>opciones</code></em>      <em class="replaceable"><code>dumpfreq</code></em>     <em class="replaceable"><code>passno</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">dispositivo</code></span></dt><dd><p>Un nombre de dispositivo (<span class="emphasis"><em>debe existir</em></span>).</p></dd><dt><span class="term"><code class="literal">punto-de-montaje</code></span></dt><dd><p>Un directorio (que debe existir) en
              el que montar el sistema de ficheros.</p></dd><dt><span class="term"><code class="literal">tipo de sistema ficheros</code></span></dt><dd><p>El tipo de sistema de ficheros es un parámetro
                que interpretará <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  El sistema de
                ficheros por omisión de FreeBSD es
                <code class="literal">ufs</code>.</p></dd><dt><span class="term"><code class="literal">opciones</code></span></dt><dd><p>Ya sea <code class="option">rw</code> para sistemas
              de ficheros de lectura-escritura, o <code class="option">ro</code>
              para sistemas de ficheros de sólo lectura, seguido
              de cualquier otra opción que sea necesaria.
              Una opción muy habitual es <code class="option">noauto</code>,
              que se suele usar en sistemas de ficheros que no se deben
              montar durante la secuencia de arranque.  Tiene otras
              opciones en la página de manual de
              <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.</p></dd><dt><span class="term"><code class="literal">dumpfreq</code></span></dt><dd><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> la usa para determinar qué
             sistema de ficheros requieren volcado.  Si el campo no
             está declarado se asume un valor de cero.</p></dd><dt><span class="term"><code class="literal">passno</code></span></dt><dd><p>Determina el orden en el cual los sistemas de
             ficheros deben revisarse.  Los sistemas de ficheros
             que hayan de saltarse deben tener su <code class="literal">passno</code>
             a cero.  El sistema de ficheros raíz (que obviamente
             debe ser revisado antes que cualquier otro) debe tener
             su <code class="literal">passno</code> puesto a uno, y los demás
             sistemas de ficheros deben tener valores mayores que uno.
             Si más de un sistema de ficheros tiene el mismo
             <code class="literal">passno</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> tratará
             de revisarlos en paralelo en caso de ser posible.
             </p></dd></dl></div><p>Consulte la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> para
        mayor información sobre el formato del fichero
        <code class="filename">/etc/fstab</code> y las opciones que contiene.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mount"></a>3.6.2. La orden <code class="command">mount</code></h3></div></div></div><a id="idp67565904" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> es al fin y al cabo quien monta los sistemas
        de ficheros.</p><p>En su forma más básica se usa lo siguiente:</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount dispositivo punto-de-montaje</code></strong></pre></div><p>Existe una gran cantidad de opciones (las encontrará
        todas en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>) pero las más comunes son:</p><div class="variablelist"><div class="variablelist-title">Opciones de montaje</div><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>Montar todos los sistemas de ficheros
              que aparezcan en <code class="filename">/etc/fstab</code>,
              excepto aquellos marcados como «noauto»,
              excluidos por el parámetro <code class="option">-t</code> o
              aquellos que ya estén montados.</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>Realizar todo excepto la llamada real de montaje del
              sistema.  Esta opción es muy útil en caso
	      de problemas si se combina con la  opción
              <code class="option">-v</code> para determinar qué es lo que
              <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> está haciendo realmente.</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>Forzar el montaje de un sistema de ficheros inestable
              (por ejemplo uno que da errores tras un reinicio súbito,
	      algo que es bastante <span class="emphasis"><em>peligroso</em></span>), o forzar
              la revocación de accesos de escritura cuando se cambia
              el estado de un sistema de ficheros de lectura-escritura
              a solo lectura.</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>Montar el sistema de ficheros como sólo lectura.
              Esto es idéntico a utilizar el argumento
              <code class="option">ro</code>
              (<code class="option">rdonly</code> para versiones anteriores a
              FreeBSD 5.2) en la opción <code class="option">-o</code>.</p></dd><dt><span class="term"><code class="option">-t</code>
	    <em class="replaceable"><code>tipo de sistema de ficheros</code></em></span></dt><dd><p>Montar un sistema de ficheros dado con el tipo de
              sistema de ficheros, o montar solamente sistemas
              de ficheros del tipo dado si se proporciona la
              opción <code class="option">-a</code>.</p><p>«ufs» es el sistema de ficheros
              por omisión.</p></dd><dt><span class="term"><code class="option">-u</code></span></dt><dd><p>Actualizar puntos de montaje en el sistema
              de ficheros.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>Mostrar mayor información.</p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>Montar el sistema de ficheros como lectura-escritura.</p></dd></dl></div><p>La opción <code class="option">-o</code> toma una lista las siguientes
        opciones separada por comas:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">nodev</span></dt><dd><p>No interpretar dispositivos especiales en el sistema
              ficheros.  Es una opción de seguridad que puede
              ser muy útil.</p></dd><dt><span class="term">noexec</span></dt><dd><p>No permitir la ejecución de binarios
                en este sistema de ficheros.  Esta también
                es una opción de seguridad útil.</p></dd><dt><span class="term">nosuid</span></dt><dd><p>No interpretar bits setuid o setgid en el
              sistema de ficheros.  Esta también es una
              opción de seguridad útil.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-umount"></a>3.6.3. La orden <code class="command">umount</code></h3></div></div></div><a id="idp67605200" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> toma como parámetro un
        punto de montaje, un nombre de dispositivo, o la opción
        <code class="option">-a</code> o <code class="option">-A</code>.</p><p>Todas las formas toman <code class="option">-f</code> para forzar
        el desmontaje y <code class="option">-v</code> para mostrar más
        información.  Tenga muy en cuenta que usar <code class="option">-f</code>
        no suele ser una forma recomendable de proceder.  Desmontar a la
        fuerza los sistemas de ficheros puede acarrear el congelar la
        máquina o dañar los datos en el sistema de
        ficheros.</p><p><code class="option">-a</code> y <code class="option">-A</code> se usan para
        desmontar todos los sistemas de ficheros montados,
        con la ventaja de poder elegir el tipo de sistema de ficheros
        que se use tras <code class="option">-t</code>.  De todas maneras
        <code class="option">-A</code> no trata de desmontar el sistema de
        ficheros raíz.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-processes"></a>3.7. Procesos</h2></div></div></div><p>FreeBSD es un sistema operativo multitarea.  Esto significa que
      parece como si más de un programa se estuviera ejecutando al
      mismo tiempo.  Cada programa uno de esos programas que se está
      ejecutando en un momento dado se denomina
      <em class="firstterm">proceso</em>.  Cada orden que ejecuta iniciará
      al menos un proceso nuevo, y hay muchos procesos que se están
      que se están ejecutando en todo momento, manteniendo
      el sistema en funcionamiento.</p><p>Cada proceso tiene un identificador individual consistente en
      un número llamado <em class="firstterm">ID del proceso</em>,
      o <em class="firstterm">PID</em>, y al igual que sucede con los
      ficheros, cada proceso tiene un propietario y un grupo.  La
      información de propietario y grupo se usa para determinar
      qué ficheros y dispositivos puede abrir el proceso
      mediante los permisos de fichero explicados anteriormente.  La
      mayoría de los procesos también tiene un proceso
      padre.  El proceso padre es el proceso que los inició.  Por
      ejemplo, si está tecleando órdenes en la shell,
      la shell es un proceso, y cualquier orden que usted ejecute
      también lo será.  De este modo cada proceso que ejecute
      tendrá como proceso padre a su shell.   La excepción
      es un proceso especial llamado <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.  <code class="command">init</code>
      es siempre el primer proceso, así que su PID siempre es 1.
      El kernel arranca automáticamente <code class="command">init</code>
      en el arranque de FreeBSD.</p><p>Hay dos órdenes particularmente útiles para ver
      los procesos en el sistema, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a>.
      <code class="command">ps</code> se usa para mostrar una lista estática
      de los procesos que se ejecutan en el sistema en es momento, y
      puede mostrar sus PID, cuánta memoria está usando,
      la línea de órdenes con la que fueron iniciados y
      muchas más cosas.  <code class="command">top</code> despliega todos
      los procesos que se están ejecutando y actualiza la
      pantalla cada pocos segundos para que pueda ver lo que
      está haciendo su sistema.</p><p>Por omisión <code class="command">ps</code> solo le muestra las
      órdenes que están ejecutando
      <span class="emphasis"><em>y</em></span> que sean propiedad de su usuario.
      Por ejemplo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps</code></strong>
  PID  TT  STAT      TIME COMMAND
  298  p0  Ss     0:01.10 tcsh
 7078  p0  S      2:40.88 xemacs mdoc.xsl (xemacs-21.1.14)
37393  p0  I      0:03.11 xemacs freebsd.dsl (xemacs-21.1.14)
48630  p0  S      2:50.89 /usr/local/lib/netscape-linux/navigator-linux-4.77.bi
48730  p0  IW     0:00.00 (dns helper) (navigator-linux-)
72210  p0  R+     0:00.00 ps
  390  p1  Is     0:01.14 tcsh
 7059  p2  Is+    1:36.18 /usr/local/bin/mutt -y
 6688  p3  IWs    0:00.00 tcsh
10735  p4  IWs    0:00.00 tcsh
20256  p5  IWs    0:00.00 tcsh
  262  v0  IWs    0:00.00 -tcsh (tcsh)
  270  v0  IW+    0:00.00 /bin/sh /usr/X11R6/bin/startx -- -bpp 16
  280  v0  IW+    0:00.00 xinit /home/nik/.xinitrc -- -bpp 16
  284  v0  IW     0:00.00 /bin/sh /home/nik/.xinitrc
  285  v0  S      0:38.45 /usr/X11R6/bin/sawfish</pre><p>Como puede ver en este ejemplo la salida de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> está
      organizada en columnas.  <code class="literal">PID</code>
      es el ID de proceso anteriormente expuesto.  Los PIDs se asignan
      a partir del 1 y hasta 99999, y vuelven a comenzar desde el 1 otra
      cuando se terminan los números.  La columna
      <code class="literal">TT</code> muestra la tty en la que el programa se está
      ejecutando; podemos ignorarla tranquilamente por el momento.
      <code class="literal">STAT</code> muestra el estado del programa; de momento
      también podemos ignorarlo.  <code class="literal">TIME</code> es la
      cantidad de tiempo que el programa ha se ha estado ejecutando en la
      CPU (generalmente no es el tiempo transcurrido desde que se
      inició el programa, ya que la mayoría de los
      programas pasan mucho tiempo esperando antes
      de que necesiten gastar tiempo en la CPU.  Finalmente,
      <code class="literal">COMMAND</code> es la línea de órdenes que
      se empleó para ejecutar el programa.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> admite muchas opciones sobre la información
      que se desea ver.  Uno de los conjuntos más
      útiles es <code class="literal">auxww</code>.  <code class="option">a</code>
      muestra información acerca de todos los procesos
      ejecutándose, no solamente los suyos.  <code class="option">u</code>
      despliega el nombre de usuario del propietario del proceso, así
      como el uso de memoria.  <code class="option">x</code> despliega información
      acerca de los procesos dæmon y <code class="option">ww</code> hace que
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> despliegue la línea de órdenes completa, en lugar
      de truncarla cuando es demasiado larga para caber en la pantalla.</p><p>La salida de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> es similar.  Veamos un ejemplo:
      </p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong>
last pid: 72257;  load averages:  0.13,  0.09,  0.03    up 0+13:38:33  22:39:10
47 processes:  1 running, 46 sleeping
CPU states: 12.6% user,  0.0% nice,  7.8% system,  0.0% interrupt, 79.7% idle
Mem: 36M Active, 5256K Inact, 13M Wired, 6312K Cache, 15M Buf, 408K Free
Swap: 256M Total, 38M Used, 217M Free, 15% Inuse

  PID USERNAME PRI NICE  SIZE    RES STATE    TIME   WCPU    CPU COMMAND
72257 nik       28   0  1960K  1044K RUN      0:00 14.86%  1.42% top
 7078 nik        2   0 15280K 10960K select   2:54  0.88%  0.88% xemacs-21.1.14
  281 nik        2   0 18636K  7112K select   5:36  0.73%  0.73% XF86_SVGA
  296 nik        2   0  3240K  1644K select   0:12  0.05%  0.05% xterm
48630 nik        2   0 29816K  9148K select   3:18  0.00%  0.00% navigator-linu
  175 root       2   0   924K   252K select   1:41  0.00%  0.00% syslogd
 7059 nik        2   0  7260K  4644K poll     1:38  0.00%  0.00% mutt
...</pre><p>La salida está dividida en dos secciones. La cabecera (las
      primeras cinco líneas) muestra el PID del último proceso
      en ejecutarse, la carga promedio del sistema (una medida de la carga
      del sistema), el «uptime» del sistema (tiempo
      desde el último reinicio) y la hora actual.  Las otras cifras
      en la cabecera se relacionan con cuántos procesos hay en
      ejecución en el sistema (47 en este caso), cuánta
      memoria y espacio de intercambio (swap) está en uso, y
      cuánto tiempo está el sistema en diferentes estados de
      CPU.</p><p>Más abajo hay una serie de columnas con información
      similar a la salida de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>. Igual que antes, puede usted
      ver el PID, el nombre de usuario, la cantidad de tiempo de CPU
      en uso y la orden que se ejecutó.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a>
      también mostrará por omisión la cantidad de espacio
      de memoria que emplea cada proceso.  Está dividido en dos
      columnas, una para el tamaño total y otra para el tamaño
      residente (el tamaño total es cuánta memoria
      ha necesitado la aplicación y el tamaño residente
      es cuánta se está usando en ese momento concreto).
      En este ejemplo puede verse que <span class="application"><span class="trademark">Netscape</span>®</span>
      requerido casi 30 MB de RAM, pero actualmente solo está usando
      9 MB.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> actualiza automáticamente el listado cada
      dos segundos, pero este lapso puede cambiarse mediante la
      opción <code class="option">s</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-daemons"></a>3.8. Dæmons, señales y cómo matar procesos</h2></div></div></div><p>cuando ejecuta un editor es fácil controlarlo,
      decirle que cargue ficheros y demás.  Puede hacerse
      porque el editor permite ese control y porque el editor
      depende de una <em class="firstterm">terminal</em>.  Algunos
      programas no están diseñados para ejecutarse
      entradas continuas por parte del usuario, así que se desconectan
      de la terminal a la primera oportunidad.  Por ejemplo, un servidor
      web pasa todo el dia respondiendo peticiones web y normalmente
      no necesita que usted le haga caso.  Los programas que transportan
      correo electrónico de un sitio a otro son otro ejemplo de
      esta clase de aplicación.</p><p>Llamamos a estos programas <em class="firstterm">dæmons</em>.
      Los Dæmons eran personajes de la mitología griega;
      no eran ni buenos ni malos, eran pequeños espíritus
      sirvientes que, en gran medida, hacían cosas útiles por
      la humanidad. Algo muy parecido a cómo los servidores web y
      los servidores de correo hacen hoy día tantas cosas
      útiles para nosotros.  Por eso, desde hace mucho tiempo la
      mascota de BSD es ese dæmon de aspecto tan ufano con su tridente
      y su cómodo calzado deportivo.</p><p>Hay una norma según la cual se da nombre a los programas que
      suelen ejecutarse como dæmons con una «d» final.
      <span class="application">BIND</span> es el dæmon de nombres de
      Berkeley (y el programa que en realidad se ejecuta se llama
      <code class="command">named</code>); el servidor web
      <span class="application">Apache</span> se llama
      <code class="command">httpd</code>, el dæmon de «spool» de
      impresora de línea es <code class="command">lpd</code> y así
      sucesivamente.  Se trata de un acuerdo,  no una ley férrea; por
      ejemplo el dæmon principal de correo de
      <span class="application">Sendmail</span> se llama
      <code class="command">sendmail</code>, y no <code class="command">maild</code>,
      como podría suponerse visto lo precedente.</p><p>Algunas veces necesitará comunicarse con un dæmon.
      Estas comunicaciones se denominan <em class="firstterm">señales</em>;
      es posible comunicarse con un dæmon (o con cualquier otro proceso
      ejecutándose) mandándole una señal.  Existen
      diversos tipos de señales diferentes que puede mandar: algunas
      tienen un significado especial, otras son interpretadas por
      la aplicación y la documentación de la aplicación
      le dirá cómo interpreta la señal esa
      aplicación).  Solamente puede enviar una señal a un
      del que sea usted propietario.  Si manda una señal a un proceso
      de otro usuario con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a> verá un mensaje
      del sistema en el que se le comunica que no tiene permiso para hacer
      tal cosa.  La excepción a esto es el usuario
      <code class="systemitem">root</code>, que puede mandar señales a los
      procesos de cualquier usuario del sistema.</p><p>FreeBSD también enviará señales de
      aplicación en determinados casos.  Si una aplicación
      está mal escrita y trata de acceder a  memoria a la que no
      está previsto que acceda FreeBSD manda al proceso la señal
      <em class="firstterm">Violación de segmento</em>
      (<code class="literal">SIGSEGV</code>).  Si una aplicación ha utilizado
      la llamada de sistema <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=alarm&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">alarm</span>(3)</span></a> para ser avisada después
      de que un periodo de tiempo haya transcurrido se le
      mandará la señal de alarma (<code class="literal">SIGALRM</code>),
      y así sucesivamente.</p><p>Hay dos señales que pueden usarse para detener un proceso,
      <code class="literal">SIGTERM</code> y <code class="literal">SIGKILL</code>.
      <code class="literal">SIGTERM</code> es la manera amable de matar un proceso;
      el proceso puede <span class="emphasis"><em>recibir</em></span> la señal,
      darse cuenta que usted quiere que se apague, cerrar cualquier
      fichero de log que pueda tener abierto y generalmente terminar
      cualquier tarea que esté realizando en ese momento antes
      de apagarse.  En algunos casos un proceso puede incluso ignorar
      <code class="literal">SIGTERM</code> si se encuentra inmerso en una
      tarea que no puede ser interrumpida.</p><p>Por el contrario, un proceso no puede ignorar una señal
    <code class="literal">SIGKILL</code>.
      Esta es la señal «No me importa lo que estás
      haciendo, detente ahora mismo».  Si manda un
      <code class="literal">SIGKILL</code> a un proceso FreeBSD detendrá ese
      proceso inmediatamente.<a href="#ftn.idp67682384" class="footnote" id="idp67682384"><sup class="footnote">[4]</sup></a>.</p><p>Otras señales que puede usar:
      <code class="literal">SIGHUP</code>, <code class="literal">SIGUSR1</code> y
      <code class="literal">SIGUSR2</code>.  Son señales de propósito
      general, y aplicaciones diferentes pueden hacer cosas diferentes
      cuando se utilicen.</p><p>Suponga que ha cambiado el fichero de configuración de su
      servidor web; es un buen momento para decirle al servidor
      web que lea y aplique la  configuración.  Podría detener y
      reiniciar <code class="command">httpd</code>, pero esto implicaría
      un período breve de suspensión del servicio de su
      servidor web, lo cual puede no ser asumible.  La mayoría de
      los dæmons fueron creados pensando en que fueran capaces de
      responder a la señal
      <code class="literal">SIGHUP</code> releyendo su fichero de configuración.
      En lugar de matar y reiniciar <code class="command">httpd</code>
      le podría mandar la  señal <code class="literal">SIGHUP</code>.
      Dado que no hay una manera estándar para responder a estas
      señales, diferentes dæmons tendrán diferente
      comportamiento, así que asegúrese de leer la
      documentación del dæmon en cuestión.</p><p>Las señales se envian mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a>,
      como puede verse en el siguiente ejemplo.</p><div class="procedure"><a id="idp67708496"></a><div class="procedure-title">Procedimiento 3.1. Envío de una señal a un proceso</div><p>Este ejemplo muestra como enviar una señal a
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.  El fichero de configuración de
        <code class="command">inetd</code> es
        <code class="filename">/etc/inetd.conf</code> e <code class="command">inetd</code>
        releerá dicho fichero de configuración cuando
        se le envíe un <code class="literal">SIGHUP</code>.</p><ol class="procedure" type="1"><li class="step"><p>Identifique el ID de proceso del proceso al que quiere
          enviarle la señal mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> y
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> se usa para buscar cadenas de
          texto de su elección en la salida estándar.
          Puede ejecutarse como un usuario normal, mientras que
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> se ejecuta como <code class="systemitem">root</code>,
          así que debe pasarle los parámetros
          <code class="option">ax</code> a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps -ax | grep inetd</code></strong>
  198  ??  IWs    0:00.00 inetd -wW</pre><p>Vemos que el PID de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> es 198.  En algunos casos
          <code class="literal">grep inetd</code> también
          puede aparecer en esta salida.  Esto se debe a la manera en que
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> tiene que encontrar la lista de procesos
          ejecutándose.</p></li><li class="step"><p>Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> para enviar la señal.  Debido a que
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> está siendo ejecutado po
          <code class="systemitem">root</code> tendrá que usar primero
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> para volverse <code class="systemitem">root</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code>
<code class="prompt">#</code> <strong class="userinput"><code>/bin/kill -s HUP 198</code></strong></pre><p>Del mismo modo que la mayoría de órdenes <span class="trademark">UNIX</span>®
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> no imprimirá ninguna salida si ha funcionado
          bien.
          Si envía una señal a un proceso del que no es
          el propietario verá lo siguiente: <span class="errorname">kill:
          <em class="replaceable"><code>PID</code></em>: Operation not permitted</span>.
          Si no teclea bien el PID puede enviar la señal a un
          proceso equivocado, lo cual puede ser malo, o si tiene suerte,
          habrá enviado la señal a un proceso que no está
          en uso y verá el sistema le dir´ <span class="errorname">kill:
          <em class="replaceable"><code>PID</code></em>: No such process</span>.</p><div xmlns="" class="note"><h3 class="admontitle">¿Por qué utilizar <code xmlns="http://www.w3.org/1999/xhtml" class="command">/bin/kill</code>?: </h3><p xmlns="http://www.w3.org/1999/xhtml">Muchas shells incorporan su propio <code class="command">kill</code>;
            esto es, el shell mandará la señal directamente,
            en lugar de ejecutar
            <code class="filename">/bin/kill</code>.  Esto puede ser útil
            pero las diferentes shells tienen diferentes sintaxis para
            especificar el nombre de la señal que envían.  En
            lugar de tratar de aprederse todas ellas, es más
            fácil simplemente usar
            <code class="command">/bin/kill ...</code>
            sea la que sea la shell que prefiera usar.</p></div></li></ol></div><p>El envío de otras señales es muy similar;
      sustituya <code class="literal">TERM</code> o <code class="literal">KILL</code>
      en la línea de órdenes según sea necesario.</p><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">Matar procesos aleatorios en el sistema es una mala
        idea.  En particular, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, ID de proceso 1, es muy
        especial.  Ejecutar <code class="command">/bin/kill -s KILL 1</code> es
        una manera rápida de apagar su sistema.
        <span class="emphasis"><em>Siempre</em></span> revise dos veces los argumentos con
        los que ejecuta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> <span class="emphasis"><em>antes</em></span>
	de pulsar <span class="keycap"><strong>Intro</strong></span>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="shells"></a>3.9. Shells</h2></div></div></div><a id="idp67755984" class="indexterm"></a><a id="idp67756496" class="indexterm"></a><p>En FreeBSD gran parte del trabajo diario se hace en una
      interfaz de línea de órdenes llamada shell.  El trabajo
      principal de la shell es ir recibiendo órdenes mediante un
      canal de entrada y ejecutarlos.
      Muchas shells también tienen funciones integradas para ayudar
      ayudar con las tareas diarias como manipulación de ficheros,
      gestión de archivos con expresiones regulares,
      edición en la propia línea de órdenes, macros de
      órdenes y variables de entorno.
      FreeBSD incluye diversas shells, como <code class="command">sh</code>,
      el shell Bourne y <code class="command">tcsh</code>, el shell C mejorado.
      Hay muchas otras shells disponibles en la colección de
      ports de FreeBSD, como <code class="command">zsh</code> y
      <code class="command">bash</code>.</p><p>?Qué shell usar? es una cuestión
      de gustos.  Si va a programar en C puede preferir usar una shell
      tipo C, como <code class="command">tcsh</code>.
      Si viene del mundo Linux o si es nuevo en la interfaz de línea
      de órdenes de <span class="trademark">UNIX</span>® puede probar con <code class="command">bash</code>.
      Tenga en cuenta que cada shell posee unas propiedades únicas que
      pueden o no funcionar con su entorno de trabajo preferido y que
      puede usted elegir qué shell usar.</p><p>Una de las propiedades comunes de las shell es que completan los
      nombres de fichero.  Una vez que ha introducido las primeras letras
      de una orden o del nombre de un fichero, se puede hacer que la shell
      complete automáticamente el resto de la orden o nombre de fichero
      pulsando la tecla <span class="keycap"><strong>Tab</strong></span>.
      Veamos un ejemplo.  Suponga que tiene dos ficheros
      llamados <code class="filename">talcual</code> y <code class="filename">tal.cual</code>.
      Usted quiere borrar <code class="filename">tal.cual</code>.  Lo que
      habría que teclear es:
      <code class="command">rm ta[tabulador].[tabulador]</code>.</p><p>La shell mostraría en pantalla <code class="command">rm
      ta[BIP].cual</code>.</p><p>El [BIP] es la campana de la consola, es decir, la shell
      está diciéndome que no pudo completar totalmente el nombre
      de fichero porque hay más de una coincidencia.
      Tanto <code class="filename">talcual</code> como <code class="filename">tal.cual</code>
      comienzan por <code class="literal">ta</code>, pero solo se pudo completar
      hasta <code class="literal">tal</code>.  Si se teclea <code class="literal">.</code>,
      y de nuevo <span class="keycap"><strong>tabulador</strong></span> la shell es capaz de
      añadir el resto del nombre de fichero.</p><a id="idp67766480" class="indexterm"></a><p>Otra función de  la shell son las variables de entorno.
      Las variables de entorno son parejas de valores clave almacenados
      en el espacio de entorno del shell.  Este espacio puede ser leído
      por cualquier programa invocado por la shell y por lo tanto
      contiene mucha configuración de programas. Esta es una lista
      de las variables de entorno más comunes y su
      significado:</p><a id="idp67767376" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Descripción</th></tr></thead><tbody><tr><td><code class="envar">USER</code></td><td>Nombre de usuario en el sistema.</td></tr><tr><td><code class="envar">PATH</code></td><td>Lista de directorios, separados por punto y coma, en los que
              se buscan ejecutables.</td></tr><tr><td><code class="envar">DISPLAY</code></td><td>Nombre de red de la pantalla X11 a la que conectarse,
              si está disponible.</td></tr><tr><td><code class="envar">SHELL</code></td><td>La shell actual.</td></tr><tr><td><code class="envar">TERM</code></td><td>El nombre de la terminal del usuario. Se usa para determinar
              las características de la terminal.</td></tr><tr><td><code class="envar">TERMCAP</code></td><td>Base de datos donde encontrar los códigos de
              escape necesarios para realizar diferentes funciones en la
              terminal.</td></tr><tr><td><code class="envar">OSTYPE</code></td><td>Tipo de sistema operativo.  Por ejemplo, FreeBSD.</td></tr><tr><td><code class="envar">MACHTYPE</code></td><td>Arquitectura de CPU en la que se está ejecutando
              el sistema.</td></tr><tr><td><code class="envar">EDITOR</code></td><td>El editor de texto preferido por el usuario.</td></tr><tr><td><code class="envar">PAGER</code></td><td>El paginador de texto preferido por el usuario.</td></tr><tr><td><code class="envar">MANPATH</code></td><td>Lista de directorios separados por punto y coma
              en los que se buscan páginas de manual.</td></tr></tbody></table></div><a id="idp67793616" class="indexterm"></a><p>Establecer una variable de entorno difiere ligeramente
      de shell a shell. Por ejemplo, en las shells al estilo C
      como <code class="command">tcsh</code> y <code class="command">csh</code>,
      se usa <code class="command">setenv</code> para establecer
      las variables de entorno.  Bajo shells Bourne como
      <code class="command">sh</code> y <code class="command">bash</code>, se
      usa <code class="command">export</code> para establecer
      las variables de entorno actuales.  Por ejemplo, para
      establecer o modificar la variable de entorno
      <code class="envar">EDITOR</code> (bajo <code class="command">csh</code> o
      <code class="command">tcsh</code>) la siguiente orden establece
      <code class="envar">EDITOR</code> como
      <code class="filename">/usr/local/bin/emacs</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv EDITOR /usr/local/bin/emacs</code></strong></pre><p>Bajo shells Bourne:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>export EDITOR="/usr/local/bin/emacs"</code></strong></pre><p>También se puede hacer que la mayoría de las shells
      muestren el contenido de una variable de entorno situando el
      carácter <code class="literal">$</code> delante del nombre de la variable
      en la línea de órdenes.  Por ejemplo,
      <code class="command">echo $TERM</code>
      mostrará cualquiera que sea el valor que
      haya establecido para <code class="envar">$TERM</code>, porque la shell
      expande el valor  de <code class="envar">$TERM</code> y se lo pasa al
      programa <code class="command">echo</code>.</p><p>Las shells manejan muchos caracteres especiales, llamados
      metacaracteres, como representaciones especiales de datos.  El más
      común es el caracter <code class="literal">*</code>, que representa
      cualquier número de caracteres en un nombre de fichero.  Estos
      metacaracteres especiales se pueden usar para la expansión de
      nombres de fichero.  Por ejemplo, teclear <code class="command">echo *</code> es
      casi lo mismo que introducir <code class="command">ls</code> porque la shell
      toma todos los ficheros que coinciden con <code class="command">*</code> y se
      los pone en la línea de órdenes para que
      <code class="command">echo</code> los vea.</p><p>Para evitar que la shell interprete estos caracteres especiales
      pueden escamotearse anteponiéndoles una contrabarra
      (<code class="literal">\</code>).  <code class="command">echo $TERM</code> imprime
      el nombre de terminal que esté usando.
      <code class="command">echo \$TERM</code> imprime <code class="envar">$TERM</code>,
      literalmente.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="changing-shells"></a>3.9.1. Cómo cambiar su shell</h3></div></div></div><p>La manera más fácil de cambiar de shell es
        mediante <code class="command">chsh</code>.  <code class="command">chsh</code>
        le colocará dentro del editor que esté configurado en
        la variable de entorno <code class="envar">EDITOR</code>; si no la ha modificado,
        el sistema ejecutará <code class="command">vi</code>, el editor por
        omisión.  Cambie la línea «Shell:» según
        sus gustos.</p><p>También se le puede suministrar a <code class="command">chsh</code>
        la opción <code class="option">-s</code>; ésto establecerá la
        shell sin necesidad de entrar en el editor de texto.
        Si por ejemplo quiere que <code class="command">bash</code> sea su shell por
        omisión puede configurarlo del siguiente modo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chsh -s /usr/local/bin/bash</code></strong></pre><p>Ejecutar <code class="command">chsh</code> sin parámetros y
        editar la shell desde ahí también funciona.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La shell que se desee usar <span class="emphasis"><em>debe</em></span> estar
          incluida en <code class="filename">/etc/shells</code>.
          Si se ha instalado una shell desde la
          <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">colección de ports</a>
          esto deberí estar hecho automáticamente.  Si ha
          instalado la shell manualmente, tendrá usted que
          realizar el cambio oportuno en
          <code class="filename">/etc/shells</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Por ejemplo, si instaló manualmente <code class="command">bash</code>
        y lo ubicó en <code class="filename">/usr/local/bin</code>
        debería hacer lo siguiente:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/usr/local/bin/bash" &gt;&gt; /etc/shells</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Hecho esto vuelva a ejecutar <code class="command">chsh</code>.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="editors"></a>3.10. Editores de texto</h2></div></div></div><a id="idp67828688" class="indexterm"></a><a id="idp67829200" class="indexterm"></a><p>Gran parte de la configuración de FreeBSD se realiza
      modificando ficheros de texto, así que le conviene
      familiarizarse con alguno de ellos.  FreeBSD viene con unos cuantos
      como parte del sistema base y encontrará muchos más
      en la colección de ports.</p><a id="idp67830096" class="indexterm"></a><a id="idp67830992" class="indexterm"></a><p>El editor de textos más sencillo y fácil de
      aprender es uno llamado <span class="application">ee</span>, cuyo nombre
      proviene del inglés «easy editor» (editor fácil).
      Para iniciar <span class="application">ee</span> se debe teclear en la
      línea de órdenes
      <code class="command">ee nombre-de-fichero</code>,
      donde <em class="replaceable"><code>nombre-de-fichero</code></em> es el nombre
      del fichero que se quiere editar.  Por ejemplo, para editar
      <code class="filename">/etc/rc.conf</code>
      teclée <code class="command">ee /etc/rc.conf</code>.  Una vez dentro
      de <code class="command">ee</code> todas las órdenes para manipular
      las funciones del editor están listadas en la parte
      superior de la pantalla.  El caracter <code class="literal">^</code> representa
      la tecla <span class="keycap"><strong>Ctrl</strong></span> del teclado, por lo tanto
      <code class="literal">^e</code> significa  la combinación de teclas
      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span>.
      Para salir de <span class="application">ee</span> pulse la tecla
      <span class="keycap"><strong>Esc</strong></span> y elija abandonar («leave») el editor.
      El editor preguntará entonces si quiere conservar los
      cambios si el fichero hubiera sido modificado.</p><a id="idp67838288" class="indexterm"></a><a id="idp67839184" class="indexterm"></a><a id="idp67840464" class="indexterm"></a><a id="idp67841360" class="indexterm"></a><p>FreeBSD viene también con editores de texto mucho más
      potentes, como <span class="application">vi</span>, como parte del
      sistema base, mientras que otros editores, como
      <span class="application">Emacs</span>
      y <span class="application">vim</span> son parte de la colección
      de ports de FreeBSD
      (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/emacs/pkg-descr">editors/emacs</a> y
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/vim/pkg-descr">editors/vim</a>).
      Estos editores son muchísimo más poderosos, pero tienen
      la desventaja de ser un poco más complicados de aprender a
      manejar.
      De cualquier manera si planea hacer mucho trabajo de edición
      de texto, aprender a usar un editor de texto más poderoso
      como <span class="application">vim</span> o <span class="application">Emacs</span>
      le ahorrará muchísimo más tiempo a la larga.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-devices"></a>3.11. Dispositivos y nodos de dispositivos</h2></div></div></div><p>Dispositivo es un término utilizado
      la mayoría de las veces para actividades relacionadas
      con hardware del sistema, como discos, impresoras, tarjetas
      gráficas y teclados.  Cuando FreeBSD arranca, la
      mayoría de lo que FreeBSD despliega son dispositivos
      en el momento de ser detectados.  Si lo desea, puede volver a
      ver todos los mensajes que el sistema emite durante el arranque
      consultando
      <code class="filename">/var/run/dmesg.boot</code>.</p><p>Por ejemplo, <code class="filename">acd0</code> es la
      primera unidad CDROM IDE, mientras que <code class="filename">kbd0</code>
      representa el teclado.</p><p>En un sistema operativo <span class="trademark">UNIX</span>® debe accederse a la mayoría
      de estos dispositivos a través de ficheros especiales llamados
      nodos de dispositivo, que se encuentran en el directorio
      <code class="filename">/dev</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67850064"></a>3.11.1. Creación de nodos de dispositivo</h3></div></div></div><p>Cuando agregue un nuevo dispositivo a su sistema, o
        compile soporte para dispositivos adicionales, puede que
        necesite crear uno o más nodos de dispositivo.
        </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67855312"></a>3.11.1.1. <code class="literal">DEVFS</code> Dispositivo de sistema de ficheros (DEVice File System)</h4></div></div></div><p>El dispositivo de sistema de ficheros, o <code class="literal">DEVFS</code>,
          ofrece acceso a dispositivos del espacio de nombres del kernel en el
          espacio de nombres del sistema de ficheros global.
          En lugar de tener que crear y modificar nodos de dispositivo,
          <code class="literal">DEVFS</code> se encarga del mantenimiento
          dinámico de este sistema de fichero.</p><p>Consulte  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> si quiere más
          información.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>3.12. Formatos binarios</h2></div></div></div><p>Para poder entender por qué FreeBSD utiliza el formato
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a> primero debe saber ciertas cosas sobre los tres
      formatos de ejecutables «dominantes» en <span class="trademark">UNIX</span>®:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>El formato objeto de <span class="trademark">UNIX</span>® más antiguo y
          «clásico». Utiliza una cabecera
          corta y compacta con un número mágico al
          inicio que se usa frecuentemente para identificar el
          formato (vea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> para más información).
          Contiene tres segmentos cargados: .text, .data, y .bss
          además de una tabla de símbolos y una tabla
          de cadena («strings»).</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>El formato objeto de SVR3.  La cabecera consiste
          en una tabla de sección, para que pueda tener más
          contenido además de las secciones .text, .data,
          y .bss.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>Es el sucesor de <acronym class="acronym">COFF</acronym>; dispone de
          secciones múltiples y valores posibles de 32-bits
          o 64-bits.  Una gran desventaja: <acronym class="acronym">ELF</acronym>
          fué también diseñado asumiendo que
          solamente existiría una ABI por cada arquitectura
          de sistema.  Esa suposición es en realidad bastante
          incorrecta y ni siquiera en el mundo comercial SYSV (el
          cual tiene al menos tres ABIs:  SVR4, Solaris y SCO) se
          puede dar por buena.</p><p>FreeBSD trata de solucionar este problema de alguna
          manera ofreciendo una herramienta para <span class="emphasis"><em>marcar</em></span>
          un ejecutable <acronym class="acronym">ELF</acronym> conocido con
          información acerca de la ABI con la que funciona.
          Si quiere más información consulte
          la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.
          </p></li></ul></div><p>FreeBSD viene del campo «clásico» y ha
      utilizado el formato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>, una tecnología usada
      y probada en muchas de muchas generaciones de versiones de
      BSD hasta el inicio de la rama 3.X.  Aunque era posible
      compilar y ejecutar binarios nativos <acronym class="acronym">ELF</acronym>
      (y kernels) en un sistema FreeBSD desde algún tiempo
      antes de esto, FreeBSD al principio se mantuvo
      «contra corriente» y no cambió a
      <acronym class="acronym">ELF</acronym> como formato por defecto.
      ?Por qué?  Bueno, cuando el mundo Linux
      efectuó su dolorosa transición a
      <acronym class="acronym">ELF</acronym> no fué tanto por huir del formato
      <code class="filename">a.out</code> como por su inflexible mecanismo de
      bibliotecas compartidas basado en tablas de saltos, que
      hacía igual de difícil la construcción de
      bibliotecas compartidas tanto para los desarrolladores como para
      los proveedores.
      Ya que las herramientas <acronym class="acronym">ELF</acronym>
      disponibles ofrecían una solución al problema de
      las bibliotecas compartidas y eran vistas por mucha gente como
      «la manera de avanzar», el costo
      de migración fué aceptado como necesario y se
      realizó la transición.  El mecanismo de
      bibliotecas compartidas de FreeBSD está diseñado de
      manera más cercana al estilo del sistema de
      bibliotecas compartidas de <span class="trademark">SunOS</span>&#8482; de Sun y, como tal, es
      muy sencillo de utilizar.</p><p>Entonces, ?por qué existen tantos formatos
      diferentes?</p><p>En un tiempo muy, muy lejano, existía hardware simple.
      Este hardware tan simple soportaba un sistema pequeño, simple.
      <code class="filename">a.out</code> era idóneo para el trabajo
      de representar binarios en este sistema tan simple (un PDP-11). A
      medida que la gente portaba <span class="trademark">UNIX</span>® desde este sistema simple,
      retuvieron el formato <code class="filename">a.out</code> debido a que
      era suficiente para los primeros portes de <span class="trademark">UNIX</span>® a arquitecturas
      como 68k de Motorola, VAXen, etc.</p><p>Entonces algún brillante ingeniero de hardware decidió
      que si podía forzar al software a hacer algunos trucos
      sucios podría sortear ciertos obstáculos del
      diseño y permitir al núcleo de su CPU correr más
      rápidamente.  Aunque estaba hecho para trabajar con este nuevo
      tipo de hardware (conocido entonces como <acronym class="acronym">RISC</acronym>),
      <code class="filename">a.out</code> no estaba bien adaptado para este
      hardware, así que varios formatos fueron desarrollados
      para obtener un rendimiento mayor de este hardware que el
      podía extraerse del limitado y simple formato
      <code class="filename">a.out</code>.
      Así fué cómo <acronym class="acronym">COFF</acronym>,
      <acronym class="acronym">ECOFF</acronym> y algunos otros formatos más
      extraños fueron inventados y sus limitaciones exploradas hasta
      que se fué llegando a la elección de
      <acronym class="acronym">ELF</acronym>.</p><p>Además, el tamaño de los programas estaba
      volviendose gigante y los discos (y la memoria física)
      eran relativamente pequeños,  así que el concepto
      de una biblioteca compartida nació.  El sistema
      VM también se volvió más sofisticado.
      A pesar de que todos estos avances se hicieron utilizando
      el formato <code class="filename">a.out</code>, su utilidad se iba reduciendo
      paulatinamente con cada nueva opción.  Además,
      la gente quería cargar cosas dinámicamente en el momento
      de ejecución, o descartar partes de su programa después de
      que el código de inicio se ejecutara para ahorrar memoria
      principal y espacio de swap.  Al volverse más sofisticados los
      lenguajes, la gente empezó a ver la necesidad de introducir
      código antes del inicio del programa de forma automática.
      Se hicieron muchos hacks al formato <code class="filename">a.out</code> para
      permitir que todas estas cosas sucedieran y lo cierto es que por un
      tiempo funcionaron.  Pero <code class="filename">a.out</code> no estaba
      para solucionar todos estos problemas sin incrementar la carga
      y complejidad del código.  Aunque <acronym class="acronym">ELF</acronym>
      resolvía muchos de estos problemas, en ese momento hubiera sido
      terrible dejar de lado un sistema que funcionaba,
      así que
      <acronym class="acronym">ELF</acronym> tuvo que esperar hasta que fué más
      doloroso permanecer con <code class="filename">a.out</code> que migrar a
      <acronym class="acronym">ELF</acronym>.</p><p>De todas maneras, con el paso del tiempo las herramientas
      de compilación de las que FreeBSD derivó
      las suyas (en especial el ensamblador y el cargador) evolucionaron
      en dos árboles paralelos.  El árbol FreeBSD
      FreeBSD añadió bibliotecas compartidas y corrigió
      algunos errores.  La gente de GNU (que fueron quienes escribieron
      estos programas) los reescribió y añadieron una forma
      más simple de disponer de compiladores cruzados
      («cross compilers»), el uso de diferentes formatos, etc.
      Aunque mucha gente quería compiladores cruzados con FreeBSD
      como «blanco» no hubo suerte, porque los fuentes que
      que FreeBSD tenía para <span class="application">as</span> y
      <span class="application">ld</span> no estaban listos para cumplir esa
      tarea.  La nueva cadena de herramientas
      GNU (<span class="application">binutils</span>) soporta compilación
      cruzada, <acronym class="acronym">ELF</acronym>, bibliotecas compartidas,
      extensiones C++, etc.  Además, muchos proveedores están
      liberando binarios <acronym class="acronym">ELF</acronym> y es algo muy bueno
      que FreeBSD los pueda ejecutar.</p><p><acronym class="acronym">ELF</acronym> es más expresivo que
      <code class="filename">a.out</code>
      y permite un sistema base más extensible.
      Las herramientas <acronym class="acronym">ELF</acronym> están mejor
      mantenidas y ofrecen soporte de compilación cruzada,
      muy importante para mucha gente.
      <acronym class="acronym">ELF</acronym> puede ser un poco más lento que
      <code class="filename">a.out</code>, pero tratar de medirlo puede ser
      difícil. También existen numerosos detalles
      que son diferentes entre los dos en cómo gestionan páginas,
      cómo gestionan código de inicio, etc. Ninguna
      es muy importante, pero las diferencias existen. Con el tiempo,
      el soporte para <code class="filename">a.out</code> será eliminado
      del kernel <code class="filename">GENERIC</code> y es muy posible que
      se elimine del kernel la posibilidad de ejecutar tales binarios
      una vez que la necesidad de usar programas
      <code class="filename">a.out</code> haya pasado.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-more-information"></a>3.13. Más información</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics-man"></a>3.13.1. Páginas de manual</h3></div></div></div><a id="idp67919056" class="indexterm"></a><p>La documentación más exhaustiva de FreeBSD
        está en las páginas de manual. Casi todos los
        programas del sistema vienen con un breve manual de referencia
        explicando el funcionamiento básico y sus diferentes argumentos.
        Estos manuales pueden revisarse mediante <code class="command">man</code>.
        El uso de <code class="command">man</code> es simple:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man orden</code></strong></pre><p><code class="literal">orden</code> es el nombre de la orden sobre la que
        que desea saber más. Por ejemplo, para más información
        sobre <code class="command">ls</code> escriba:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man ls</code></strong></pre><p>El manual en línea está dividido en secciones
        numeradas:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Comandos de usuario.</p></li><li class="listitem"><p>Llamadas al sistema y números de error.</p></li><li class="listitem"><p>Funciones en las bibliotecas de C.</p></li><li class="listitem"><p>Controladores de dispositivo.</p></li><li class="listitem"><p>Formatos de fichero.</p></li><li class="listitem"><p>Juegos y demás pasatiempos.</p></li><li class="listitem"><p>Información sobre temas diversos.</p></li><li class="listitem"><p>Comandos relacionados con el mantenimiento del sistema y
           su funcionamiento.</p></li><li class="listitem"><p>Desarrolladores del Kernel.</p></li></ol></div><p>En algunos casos, el mismo tema puede aparecer en más de
        una sección del manual en línea.  Por ejemplo,
        existe una orden de usuario <code class="command">chmod</code> y una
        llamada del sistema <code class="function">chmod()</code>.  En este caso
        se le puede decir a <code class="command">man</code>
        cuál  desea consultar especificando la sección:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man 1 chmod</code></strong></pre><p>Esto desplegará la página de manual de la
        orden de usuario <code class="command">chmod</code>. Las referencias
        a una sección concreta del manual en línea
        tradicionalmente suelen colocarse entre paréntesis
        en la documentación escrita, por lo tanto <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
        se refiere a la orden de usuario <code class="command">chmod</code> y
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chmod</span>(2)</span></a> se refiere a la llamada de sistema.</p><p>Esto está muy bien si se conoce el nombre del programa y
        simplemente se quiere saber como usarlo.  Pero ?y si no
        puede recordar el nombre de la orden? Se puede usar man para que
        realice una búsqueda mediante palabras clave en las descripciones
        de programas utilizando el argumento <code class="option">-k</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man -k mail</code></strong></pre><p>Dicha orden mostrará una lista de
        órdenes que contengan la palabra clave «mail»
        en sus descripciones.  Esto es funcionalmente
        equivalente a usar <code class="command">apropos</code>.</p><p>Así que, ¿está viendo todos esos programas
        tan atractivos en <code class="filename">/usr/bin</code> pero no tiene
        ni la menor idea de lo que la mayoría de ellos hace?
        Haga lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>man -f *</code></strong></pre><p>o</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>whatis *</code></strong></pre><p>que hace exactamente lo mismo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics-info"></a>3.13.2. Ficheros de información GNU: info</h3></div></div></div><a id="idp67953232" class="indexterm"></a><p>FreeBSD incluye muchas aplicaciones y utilidades producidas
        por la FSF (Free Software Foundation).  Además de con
        las correspondientes páginas de manual, estos programas
        vienen con documentos de hipertexto más detallados,
        llamados ficheros <code class="literal">info</code>, los
        cuales pueden ser visualizados con <code class="command">info</code>,
        o si tiene instalado <span class="application">emacs</span>, con
        el modo info de <span class="application">emacs</span>.</p><p>Si quiere utilizar la orden <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">info</span>(1)</span></a>
        teclée:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>info</code></strong></pre><p>Para una breve introducción teclée <code class="literal">h</code>.
        Cuando necesite una referencia rápida, teclée
	<code class="literal">?</code>.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp66990800" class="footnote"><p><a href="#idp66990800" class="para"><sup class="para">[1] </sup></a>Esto es lo que <code class="literal">i386</code> significa.  Tenga en
            cuenta que incluso si no está ejecutando FreeBSD en una CPU
            Intel 386, éste va a ser <code class="literal">i386</code>.
            No es el tipo de su procesador, sino la
            «arquitectura» la que se muestra aquí.</p></div><div id="ftn.idp66997968" class="footnote"><p><a href="#idp66997968" class="para"><sup class="para">[2] </sup></a>Los «scripts» de inicio son programas que FreeBSD
            ejecuta automáticamente cuando arranca.  Su función
            principal es preparar todo lo necesario para que todo lo demás
            se ejecute, e iniciar cualquier servicio que tenga configurado
            para ejecutarse en segundo plano algo
            útiles.</p></div><div id="ftn.idp67037136" class="footnote"><p><a href="#idp67037136" class="para"><sup class="para">[3] </sup></a>Tiene una descripción bastante técnica y correcta
          de todos los detalles de la consola FreeBSD y los controladores de
          teclado pueden encontrarse en las páginas de manual de
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atkbd</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> y
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdcontrol</span>(1)</span></a>. No nos extenderemos en los detalles aquí,
          pero el lector interesado siempre puede consultar dichas
          páginas de manual si quiere una explicación
          más detallada y profunda de cómo funcionan
          estas cosas.</p></div><div id="ftn.idp67682384" class="footnote"><p><a href="#idp67682384" class="para"><sup class="para">[4] </sup></a>Esto no es del todo cierto (ciertas cosas no pueden
        ser interrumpidas.  Por ejemplo, si el proceso está tratando
        de leer desde un fichero que está en otro sistema de
        la red, y el otro sistema no está disponible por
        alguna razón (por estar apagada, o que la red tenga un fallo),
        tenemos un caso de lo que llamamos
        «proceso ininterrumpible».
        Más tarde, al proceso se le acabará el tiempo de
        espera, generalmente pasados dos minutos.  Tan pronto como esto
        ocurra el proceso será liquidado.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports"></a>Capítulo 4. Instalación de aplicaciones: «packages» y ports</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#ports-synopsis">4.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#ports-overview">4.2. Aproximación a la instalación de software</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">4.3. Cómo encontrar aplicaciones</a></span></dt><dt><span class="sect1"><a href="#packages-using">4.4. Uso del sistema de packages</a></span></dt><dt><span class="sect1"><a href="#ports-using">4.5. Uso de la colección de ports</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">4.6. Después de instalar un port</a></span></dt><dt><span class="sect1"><a href="#ports-broken">4.7. Ports que no funcionan</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-synopsis"></a>4.1. Sinopsis</h2></div></div></div><a id="idp67961424" class="indexterm"></a><a id="idp67961936" class="indexterm"></a><p>FreeBSD viene con una excelente colección de herramientas
      de sistema como parte del sistema base.  A pesar de esto, existe gran
      cantidad de cosas que uno requiere hacer para poner las cosas realmente en
      marcha, para lo cual se necesita instalar software adicional de
      terceros.
      FreeBSD ofrece dos tecnologías complementarias para instalar
      software de terceros en nuestro sistema: la Colección de Ports de
      FreeBSD y «packages»(paquetes)  binarios.  Cualquiera de los dos
      sistemas puede usarse para instalar las versiones más recientes,
      de forma local o directamente desde la red.</p><p>Después de leer este capítulo usted
      sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cómo instalar packages binarios de software
	de terceros.</p></li><li class="listitem"><p>Cómo compilar software de terceros desde la
	  Colección de Ports.</p></li><li class="listitem"><p>Cómo eliminar packages o ports instalados
	  previamente.</p></li><li class="listitem"><p>Cómo sobreescribir los valores por omisión
	  que utiliza la colección de ports.</p></li><li class="listitem"><p>Cómo encontrar la aplicación adecuada.</p></li><li class="listitem"><p>Cómo actualizar aplicaciones.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-overview"></a>4.2. Aproximación a la instalación de software</h2></div></div></div><p>Si ha usado un sistema <span class="trademark">UNIX</span>® con anterioridad sabrá que el
      procedimiento típico para instalar software de terceros es algo
      similar a esto:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Descargar el software, que puede distribuirse en formato de
	  código fuente o binario.</p></li><li class="step"><p>Desempaquetar el software de su formato de distribución
	  (normalmente en un «tarball» comprimido con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=compress&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">compress</span>(1)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bzip2&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">bzip2</span>(1)</span></a>).</p></li><li class="step"><p>Consultar la documentación (quizás un fichero
	  <code class="filename">INSTALL</code> o
	  <code class="filename">README</code>, o los ficheros del subdirectorio
	  <code class="filename">doc/</code>) para ver como instalar el software.</p></li><li class="step"><p>Si el software se distribuye como fuente, compilarlo.  Esto
	  puede requerir que editemos el fichero <code class="filename">Makefile</code>
	  o que ejecutemos el «script»
	  <code class="command">configure</code>, entre otras cosas.</p></li><li class="step"><p>Instalar y probar el software.</p></li></ol></div><p>Y esto solamente si todo marcha bien.  Si está instalando un
      software que no ha sido portado específicamente para FreeBSD, puede
      que sea necesario editar el código para que funcione
      correctamente.
      </p><p>Si lo desea puede continuar instalando software de la forma
      «tradicional» en FreeBSD, aunque FreeBSD dispone de
      dos tecnologías que le pueden ahorrar gran cantidad de tiempo y
      esfuerzo: los packages y los ports.  En el momento de escribir esto
      existen más de 24,000 aplicaciones de terceros.</p><p>En cualquier aplicación el paquete de FreeBSD
      es un solo fichero que tiene que descargar.  Los paquetes contienen
      copia de los programas binarios precompilados de la aplicación,
      así como cualquier fichero de configuración o
      documentación.  Los paquetes descargados se pueden
      manipular con las herramientas de gestión de paquetes de FreeBSD:
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_info</span>(1)</span></a>, etc.  Instalar una aplicación nueva puede
      realizarse con una sola orden.</p><p>Un port de FreeBSD es una colección de ficheros
      diseñada para automatizar el proceso de
      compilación desde el código fuente.</p><p>Recuerde que existen ciertos pasos que deberá llevar a cabo
      para compilar un programa por usted mismo (descargar,
      desempaquetar, parchear, compilar e instalar).  Los ficheros que
      conforman un port permiten que el sistema se encargue de todo esto.
      Usted ejecuta un conjunto simple de órdenes
      y el código fuente se descarga, desempaqueta, parchea,
      compila e instala.</p><p>De hecho el sistema de ports también se puede usar para crear
      paquetes que posteriormente se pueden manipular con
      <code class="command">pkg_add</code> y las
      demás utilidades de gestión de packages que veremos en
      breve.</p><p>Tanto el sistema de ports como el de paquetes entienden las
      <span class="emphasis"><em>dependencias</em></span>.  Suponga que desea instalar una
      aplicación que depende de que una biblioteca
      específica esté instalada.  Tanto la biblioteca como la
      aplicación existen en FreeBSD como paquete o port.  Si utiliza
      <code class="command">pkg_add</code> o el sistema de ports para instalar
      la aplicación ambos notarán que la biblioteca no
      está instalada y procederán a instalarla antes que
      nada.</p><p>Dado que ambas tecnologís son similares quizás se
      pregunte por qué FreeBSD se toma la molestía de contar con
      ambas.  Los Packages y los Ports tienen sus propias ventajas,
      así que cuál utilizar dependerá de su
      elección en cada momento.</p><div class="itemizedlist"><div class="itemizedlist-title">Ventajas de los Paquetes</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El fichero tarball de un package es normalmente más
	  pequeño que el tarball con el código fuente de
	  la aplicación.</p></li><li class="listitem"><p>Los paquetes no requieren compilación.
	  En el caso de aplicaciones grandes, como
	  <span class="application">Mozilla</span>,
	  <span class="application">KDE</span>, o
	  <span class="application">GNOME</span> este detalle puede ser importante,
	  especialmente si usa un equipo lento.</p></li><li class="listitem"><p>Los paquetes no requieren que comprenda el proceso que envuelve
	  el compilar software bajo FreeBSD.</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Ventajas de los Ports</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Normalmente los paquetes se compilan con opciones conservadoras,
	  en virtud del gran número de equipos donde se
	  instalarán.  Al instalar como port puede usted editar las
	  preferencias para (por ejemplo) generar código
	  específico para un procesador
	  Pentium IV o Athlon.</p></li><li class="listitem"><p>Algunas aplicaciones tienen opciones sobre lo que pueden y lo
	  que no pueden hacer.  Por ejemplo
	  <span class="application">Apache</span> se puede configurar con
	  una gran variedad de opciones.  Al compilarlo desde los
	  ports usted no tiene por que aceptar las opciones
	  predefinidas, puede seleccionar que opciones desea.</p><p>En algunos casos existen varios paquetes para la misma
	  aplicación con diferentes opciones.  Por ejemplo,
	  <span class="application">Ghostscript</span> está disponible
	  como paquete
	  <code class="filename">ghostscript</code> y como paquete
	  <code class="filename">ghostscript-nox11</code>, dependiendo de si usted
	  cuenta o no con servidor X11.  En este caso decidir puede ser
	  sencillo e incluso pueden facilitarse packages con ambas opciones,
	  pero elegir se puede volver un problema si hay más de
	  una o dos opciones de compilación.</p></li><li class="listitem"><p>Las condiciones de la licencia de algunas aplicaciones
	  prohiben la distribución de binarios.  Solo permiten la
	  distribución del código fuente.</p></li><li class="listitem"><p>Existe gente que no confía en los binarios.  Al
	  menos puede usted (en teoría) revisar el código fuente
	  y localizar problemas potenciales.</p></li><li class="listitem"><p>Si tiene parches locales necesitará el código
	  fuente para poder aplicarlos.</p></li><li class="listitem"><p>Hay gente a la que le gusta tener el código fuente para
	  poder leerlo en ratos de ocio, modificarlo, tomar partes prestadas
	  (cuando la licencia lo permite, claro está), etc.</p></li></ul></div><p>Para tener constancia de los ports actualizados, suscríbase
      a la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">lista de correo sobre los ports de FreeBSD</a> y a la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-bugs" target="_top">lista de correo sobre errores en los ports de FreeBSD</a>.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Antes de instalar cualquier aplicación
        consulte <code class="uri"><a class="uri" href="http://vuxml.freebsd.org" target="_top">http://vuxml.freebsd.org</a></code> para
        comprobar los posibles problemas de seguridad relacionados con
	ella.</p><p xmlns="http://www.w3.org/1999/xhtml">También puede instalar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/portaudit/pkg-descr">security/portaudit</a> que automáticamente
        comprobará las vulnerabilidades conocidas de todas las
        aplicaciones instaladas; también lo comprobará antes de
        compilar cualquier port.  Mientras tanto, puede usar
        <code class="command">portaudit -F -a</code> después de instalar
        algunos packages.</p></div><p>El resto de este capítulo le explicará cómo
      usar los ports y los packages para instalar software de terceros en
      FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-finding-applications"></a>4.3. Cómo encontrar aplicaciones</h2></div></div></div><p>Antes de poder instalar cualquier software debe saber qué
      es lo que quiere instalar y cómo se llama la
      aplicación.</p><p>La lista de software disponible para FreeBSD crece constantemente.
      Afortunadamente existen varias formas de localizar lo que busca:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El sitio web de FreeBSD mantiene una lista (actualizada y que
	  admite búsquedas) de todas las
	  aplicaciones disponibles para FreeBSD en la dirección
	  <a class="link" href="http://www.freebsd.org/ports/index.html" target="_top">http://www.FreeBSD.org/ports/
	  </a>.  Esta base esta dividida en categorías, y puede
	  buscar por nombre (si lo sabe) o bien listar las aplicaciones
	  disponibles en cierta categoría.</p></li><li class="listitem"><a id="idp68050128" class="indexterm"></a><p>Dan Langille mantiene FreshPorts en
	  <code class="uri"><a class="uri" href="http://www.FreshPorts.org/" target="_top">http://www.FreshPorts.org/</a></code>.
	  FreshPorts verifica los cambios en las aplicaciones del árbol
	  de ports, y le permite «seguir» uno o más
	  ports, sobre los que le enviarán un correo cada vez
	  que se actualicen.</p></li><li class="listitem"><a id="idp68056144" class="indexterm"></a><p>Si no conoce el nombre de la aplicación que desea
	  pruebe a usar un sitio como FreshMeat (<a class="link" href="http://www.freshmeat.net/" target="_top">http://www.freshmeat.net/</a>)
	  para encontrar una aplicación; después consulte
	  el sitio web de FreeBSD para ver si la aplicación ha sido
	  portada.</p></li><li class="listitem"><p>Si sabe el nombre exacto del port y solo necesita saber
          en qué categoria está puede usar
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=whereis&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">whereis</span>(1)</span></a>.  Simplemente escriba <code class="command">whereis
          fichero</code>, donde
          <em class="replaceable"><code>fichero</code></em> es el programa que quiera
          instalar.  Si está en su sistema, le dirá dónde
          está:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>whereis lsof</code></strong>
lsof: /usr/ports/sysutils/lsof</pre><p>Esto nos dice que <code class="command">lsof</code> (una utilidad de
	sistema) está en el directorio
	<code class="filename">/usr/ports/sysutils/lsof</code>.</p></li><li class="listitem"><p>Otra forma de encontrar un port en particular es usando
        el mecanismo de búsqueda integrado en la colección de
        ports.  Para poder usar esta opción de búsqueda
        debe estar en el directorio <code class="filename">/usr/ports</code>.  Una
        vez en ese directorio ejecute <code class="command">make search
        name=nombre-del-programa</code>, donde
        <em class="replaceable"><code>nombre-del-programa</code></em> es el nombre
        del programa que desea encontrar.  Por ejemplo, si busca
        <code class="command">lsof</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make search name=lsof</code></strong>
Port:   lsof-4.56.4
Path:   /usr/ports/sysutils/lsof
Info:   Lists information about open files (similar to fstat(1))
Maint:  obrien@FreeBSD.org
Index:  sysutils
B-deps:
R-deps: </pre><p>Debe prestar especial atención a la línea
        «Path:»de la salida, porque es la que indica
        dónde puede encontrar el port.  El resto de información
        no se necesita para instalar el port.</p><p>Si quiere hacer una búsqueda más a fondo
       utilice <code class="command">make
       search key=cadena</code> donde
       <em class="replaceable"><code>cadena</code></em> es el término que busca.
       Podrá buscar nombres de ports, comentarios,
       descripciones y dependencias; también se puede usar
       para encontrar ports que tengan relación con
       algún tema en particular si no conoce el nombre del
       programa que busca.</p><p>En ambos casos la cadena de búsqueda no distingue entre
       mayúsculas y minúsculas.  Buscar «LSOF»
       dará los mismos resultados que buscar
       «lsof».</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="packages-using"></a>4.4. Uso del sistema de packages</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68071120"></a>4.4.1. Instalar un package</h3></div></div></div><a id="idp68071760" class="indexterm"></a><a id="idp68085328" class="indexterm"></a><p>Puede usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> para instalar un
      package de FreeBSD desde un fichero local o desde
      un servidor remoto vía red.</p><div class="example"><a id="idp68087376"></a><div class="example-title">Ejemplo 4.1. Descarga de un paquete manualmente e instalación en
	  nuestro sistema</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ftp -a ftp2.FreeBSD.org</code></strong>
Connected to ftp2.FreeBSD.org.
220 ftp2.FreeBSD.org FTP server (Version 6.00LS) ready.
331 Guest login ok, send your email address as password.
230-
230-     This machine is in Vienna, VA, USA, hosted by Verio.
230-         Questions? E-mail freebsd@vienna.verio.net.
230-
230-
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
<code class="prompt">ftp&gt;</code> <strong class="userinput"><code>cd /pub/FreeBSD/ports/packages/sysutils/</code></strong>
250 CWD command successful.
<code class="prompt">ftp&gt;</code> <strong class="userinput"><code>get lsof-4.56.4.tgz</code></strong>
local: lsof-4.56.4.tgz remote: lsof-4.56.4.tgz
200 PORT command successful.
150 Opening BINARY mode data connection for 'lsof-4.56.4.tgz' (92375 bytes).
100% |**************************************************| 92375       00:00 ETA
226 Transfer complete.
92375 bytes received in 5.60 seconds (16.11 KB/s)
<code class="prompt">ftp&gt;</code> <strong class="userinput"><code>exit</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pkg_add lsof-4.56.4.tgz</code></strong></pre></div></div><br class="example-break" /><p>Si no tiene una fuente local de packages (por ejemplo
        un CDROM de FreeBSD) probablemente la mejor
        opción sea utilizar el argumento <code class="option">-r</code> de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>, que hará que determine
        automáticamente el formato del objeto correcto, para
        posteriormente descargarlo e instalarlo desde un FTP.</p><a id="idp68126544" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r lsof</code></strong></pre><p>En el ejemplo anterior el package correspondiente se
        descargará e instalará sin intervención
        del usuario.  Si desea utilizar una réplica
	(«mirror») de packages que no sea el sitio principal
        de FreeBSD solo tiene configurar la variable de entorno
        <code class="envar">PACKAGESITE</code> correctamente para
        sobreescribir el sitio predefinido.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> utiliza
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a> para descargar los ficheros, tomando como
        referencia varias variables de entorno, como
        <code class="envar">FTP_PASSIVE_MODE</code>, <code class="envar">FTP_PROXY</code> y
        <code class="envar">FTP_PASSWORD</code>.  Quizás deba modificar alguna de
        estas si se encuentra detrás de un cortafuegos, o usa un
        proxy FTP/HTTP.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a> si quiere ver una lista
        completa.  Observe también que en el ejemplo anterior
        usamos <code class="literal">lsof</code> en vez de
	<code class="literal">lsof-4.56.4</code>.
        Cuando usamos la opción de descarga remota no es
        necesario especificar la versión del paquete.
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> descargará automáticamente la
        última versión de la aplicación.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> descargará la última
	  versión de su aplicación si usa FreeBSD-CURRENT o
	  FreeBSD-STABLE, pero si usa una versión -RELEASE,
	  descargará la versión del package que se
	  construyó con dicha versión.  Es posible configurar
	  esto sobreescribiendo la variable de entorno
	  <code class="envar">PACKAGESITE</code>.</p></div><p>Los packages se destribuyen en formatos
          <code class="filename">.tgz</code> y <code class="filename">.tbz</code>.
          Puede encontrarlos en <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/</a></code>,
          o en la distribución de FreeBSD en CD-ROM.  Todos los
          CDs en el set de 4 CDs de FreeBSD (y en el PowerPak, etc.)
          contienen packages en el directorio
          <code class="filename">/packages</code>.  La estructura de los
          packages es similar a la del arbol de
          <code class="filename">/usr/ports</code>.  Cada categoría
          tiene su propio directorio, y todos los paquetes se pueden
          encontrar dentro del directorio <code class="filename">All</code>.
      </p><p>La estructura del directorio de packageckages es idéntica a la
        de los ports, y funcionan como un todo para conformar el sistema de
        paquetes/ports.
        </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68139216"></a>4.4.2. Eliminar un package</h3></div></div></div><a id="idp68139856" class="indexterm"></a><a id="idp68140752" class="indexterm"></a><p>Para eliminar un package instalado en el sistema utilice
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete xchat-1.7.1</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68152400"></a>4.4.3. Miscelánea</h3></div></div></div><p>Toda la información de los packages se guarda en
        <code class="filename">/var/db/pkg</code>.  Ahíl encontrará
        la lista completa de paquetes instalados y las descripciones de
	los mismos.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-using"></a>4.5. Uso de la colección de ports</h2></div></div></div><p>La siguiente sección incluye las instrucciones
      básicas para instalar o eliminar programas mediante la
      Colección de Ports de su sistema.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-tree"></a>4.5.1. Cómo obtener la Colección de Ports</h3></div></div></div><p>Para poder instalar ports primero debe hacerse, obviamente, con
        la Colección de Ports&#8212;; en esencia está compuesta
        por <code class="filename">Makefiles</code>, parches y ficheros con la
        descripción de los ports y está en
        <code class="filename">/usr/ports</code>.</p><p>Cuando instaló su sistema FreeBSD el programa
	    <span class="application">sysinstall</span> le preguntó si
	    querí instalar la Colección de Ports.
	    Si contestó que no siga estas instrucciones:</p><div class="procedure"><a id="idp68158160"></a><div class="procedure-title">Procedimiento 4.1. Mediante CVSup</div><p>Este es un método rápido de conseguir y
	  mantener una copia de la Colección de Ports al dia mediante
	  el protocolo <span class="application">CVSup</span>.  Si quiere saber
	  más sobre <span class="application">CVSup</span> consulte <a class="link" href="#cvsup" title="30.2. Uso de CVSup">Uso de CVSup</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La implementación del protocolo
	    <span class="application">CVSup</span> que se incluye en FreeBSD se llama
	    <span class="application">csup</span>.  Apareció en FreeBSD 6.2.
	    Los usuarios de releases anteriores de FreeBSD puden instalar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/csup/pkg-descr">net/csup</a> como port o package.</p></div><p>Asegúrese de que <code class="filename">/usr/ports</code>
	  está vacío antes de ejecutar <span class="application">csup</span>
	  por primera vez.  Si ya tiene la Colección de Ports porque la
	  ha instalado por otros medios  <span class="application">csup</span>
	  no purgará los parches de ports eliminados.</p><ol class="procedure" type="1"><li class="step"><p>Ejecute <code class="command">csup</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>csup -L 2 -h cvsup.FreeBSD.org /usr/share/examples/cvsup/ports-supfile</code></strong></pre><p>Cambie
	    <em class="replaceable"><code>cvsup.FreeBSD.org</code></em> por algún
	    otro servidor <span class="application">CVSup</span> que tenga cerca.
	    Consulte <a class="link" href="#cvsup-mirrors" title="30.2.2. Servidores">Réplicas CVSup</a> (<a class="xref" href="#cvsup-mirrors" title="30.2.2. Servidores">Sección 30.2.2, &#8220;Servidores&#8221;</a>), donde encontrará una lista
	    completa de las réplicas CVSup.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede usar una versión de
	      <code class="filename">ports-supfile</code> confeccionada a su gusto,
	      por ejemplo para evitar tener que indicarle el nombre del
	      servidor <span class="application">CVSup</span> a mano.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>Haga lo siguiente: como <code class="systemitem">root</code> copie
		  <code class="filename">/usr/share/examples/cvsup/ports-supfile</code>
		  en otro sitio, por ejemplo
		  <code class="filename">/root</code> o su directorio /home.</p></li><li class="step"><p>Edite <code class="filename">ports-supfile</code>.</p></li><li class="step"><p>Reemplace
		  <em class="replaceable"><code>CHANGE_THIS.FreeBSD.org</code></em>
		  por un servidor <span class="application">CVSup</span> que
		  esté cerca de donde esté usted.  Consulte
		  <a class="link" href="#cvsup-mirrors" title="30.2.2. Servidores">Réplicas
		  CVSup</a> (<a class="xref" href="#cvsup-mirrors" title="30.2.2. Servidores">Sección 30.2.2, &#8220;Servidores&#8221;</a>) si necesita
		  ver una lista completa de las mismas.</p></li><li class="step"><p>Ejecute <code class="command">csup</code>del siguiente
		  modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>csup -L 2 /root/ports-supfile</code></strong></pre></li></ol></div></div></li><li class="step"><p>Al ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a> descargará y
	    aplicará todos los cambios recientes que haya sufrido
	    la Colección de Ports, pero tenga en cuenta que no
	    actualizará ninguno de los ports que ya tenga instalados
	    en su sistema.</p></li></ol></div><div class="procedure"><a id="idp68200144"></a><div class="procedure-title">Procedimiento 4.2. Mediante portsnap</div><p><span class="application">Portsnap</span> es un método
	   alternativo de distribuir la Colección de Ports.  Se
	   incluyó por primera vez en FreeBSD 6.0.  Puede
	   instalar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> en versiones anteriores de FreeBSD
	   como port (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portsnap/pkg-descr">ports-mgmt/portsnap</a>) o como
	    package:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r portsnap</code></strong></pre><ol class="procedure" type="1"><li class="step"><p>Puede saltarse esta paso a partir de FreeBSD 6.1-RELEASE
	    y en versiones recientes de
	    <span class="application">Portsnap</span> (port o package).
	    <code class="filename">/usr/ports</code> se creará
	    automáticamente la primera vez que ejecute
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>.  En versiones anteriores de
	    <span class="application">portsnap</span> había que crear
	    un <code class="filename">/usr/ports</code> vacío si
	    no existía previamente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /usr/ports</code></strong></pre></li><li class="step"><p>Descargue una instantánea comprimida de la
	    Colección de Ports en
	    <code class="filename">/var/db/portsnap</code>.  Hecho esto
	    puede desconectar de Internet si quiere.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong></pre></li><li class="step"><p>Si está ejecutando <span class="application">Portsnap</span> por
	    vez primera debe extraer la instantánea en <code class="filename">/usr/ports</code>:
	  </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong></pre><p>Si ya tiene un <code class="filename">/usr/ports</code> y solamente está
	    actualizando su árbol de ports ejecute lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre></li></ol></div><div class="procedure"><a id="idp68218064"></a><div class="procedure-title">Procedimiento 4.3. Mediante Sysinstall</div><p>Este método implica el uso de
	  <span class="application">sysinstall</span> para
	  instalar la Colección de Ports.</p><ol class="procedure" type="1"><li class="step"><p>Como usuario <code class="systemitem">root</code> ejecute
	    <code class="command">sysinstall</code>
	    (<code class="command">/stand/sysinstall</code> en cualquier versión
	    previa a FreeBSD 5.2); del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysinstall</code></strong></pre></li><li class="step"><p>Posiciónese en la opción
	    <span class="guimenuitem">Configure</span>
	    y pulse <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Seleccione la opción
	  <span class="guimenuitem">Distributions</span>
	  y pulse <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Seleccione la opción <span class="guimenuitem">ports</span>
	    y pulse la <span class="keycap"><strong>barra espaciadora</strong></span>.</p></li><li class="step"><p>Seleccione el medio de instalación deseado (CDROM,
	    FTP, etc.)</p></li><li class="step"><p>Diríjase a la opción
	    <span class="guimenuitem">Exit</span> y
	    pulse <span class="keycap"><strong>Intro</strong></span>.</p></li><li class="step"><p>Pulse <span class="keycap"><strong>X</strong></span> para salir de
            <span class="application">sysinstall</span>.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-skeleton"></a>4.5.2. Instalación de ports</h3></div></div></div><a id="idp68236240" class="indexterm"></a><p>Al hablar de la Colección de Ports lo primero que
        hay que explicar es a qué nos referimos cuando hablamos de
        un «esqueleto» (skeleton).  El esqueleto de un
	port es un conjunto mínimo de ficheros que
	indican a FreeBSD cómo compilar e instalar un programa.
        Cada esqueleto incluye:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un <code class="filename">Makefile</code>.  Este
	    <code class="filename">Makefile</code> contiene diversas sentencias
	    que le indican al sistema cómo compilarlo y dónde
	    instalarlo en su sistema.</p></li><li class="listitem"><p>Un fichero <code class="filename">distinfo</code>.  Este fichero
	    contiene información sobre los ficheros que se debe
	    descargar para poder compilar el programa, así como el
	    identificador «checksum», que se usa para comprobar
	    mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">md5</span>(1)</span></a> que la descarga ha sido correcta y que el
	    la integridad del fichero está garantizada.</p></li><li class="listitem"><p>Un directorio <code class="filename">files</code>.  Este directorio
	    contiene  los parches necesarios para compilar e instalar
	    el programa en su sistema FreeBSD.  Básicamente los parches
	    son pequeños ficheros que especifican cambios en ficheros
	    concretos.  Su formato es en texto plano y suelen decir cosas
	    como «borra la línea 10» o
	    «Cambia la línea 26 por esto».
	    Estos parches también se conocen como
	    «diffs» ya que se generan con
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p><p>Es posible que este directorio tambié contenga
	    algún otro fichero necesario para compilar e instalar
	    el port.</p></li><li class="listitem"><p>Un fichero <code class="filename">pkg-descr</code>.  Es una
	    descripción más detallada del programa.
	    En algunas ocasiones ocupa varias líneas.</p></li><li class="listitem"><p>Un fichero <code class="filename">pkg-plist</code>.  Es una lista de
	    todos los ficheros que instalará el port.
	    También le indica al sistema de ports qué ficheros
	    eliminar durante la desinstalación del programa.</p></li></ul></div><p>Algunos ports tienen otros ficheros, como
        <code class="filename">pkg-message</code>.  El sistema de ports los usa para
        gestionar situaciones especiales.  Si desea conocer los detalles,
        incluso sobre los ports en general, consulte el libro <a class="link" href="http://www.FreeBSD.org/doc/en_EN.ISO8859-1/books/porters-handbook/index.html" target="_top">FreeBSD Porter's Handbook</a>.</p><p>El port incluye las instrucciones necesarias para obtener
        software a partir del código fuente, pero no incluye el
        código.  Puede obtener el código desde un CDROM
        o desde Internet.  El código se distribuye del modo
        que el autor estime oportuno.  Normalmente es un fichero tar
        comprimido con gzip, pero puede comprimirse con otra herramienta o
        incluso no estar comprimido.  El código del programa,
        venga como venga, se llama «distfile».  A
	continuación veremos los dos métodos de
	instalación de un port.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debe ser el usuario <code class="systemitem">root</code> para
          instalar ports.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Antes de instalar cualquier port asegúrese de tener
	  la Colección de Ports actualizada y de comprobar en <code class="uri"><a class="uri" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a></code> la existencia de posibles
	  problemas de seguridad que pudiera tener el port.</p><p xmlns="http://www.w3.org/1999/xhtml">Puede realizar la comprobación de seguridad
	  con <span class="application">portaudit</span> antes de instalar
	  cualquier  aplicación.  Esta herramienta está
	  en la Colección de Ports (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/portaudit/pkg-descr">security/portaudit</a>).  Le rogamos
	  que al menos considere ejecutar
	  <code class="command">portaudit -F</code> antes de instalar un port nuevo
	  para que descargue la nueva base de datos de vulnerabilidades.
	  Durante la comprobación diaria de seguridad
	  actualizará la base de datos y hará una
	  auditoría del sistema.  Para más información
	  lea las páginas de manúal de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portaudit&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portaudit</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>.</p></div><p>La Colección de  Ports asume que tiene usted conexión
        con Internet.  Si no es así tendrá que disponer de una
	copia del distfile en <code class="filename">/usr/ports/distfiles</code>.</p><p>El primer paso es ubicarse en el directorio del port que desea
	  instalar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/lsof</code></strong></pre><p>Una vez en el directorio <code class="filename">lsof</code> puede
	  ver el esqueleto del port.  El siguiente paso es compilar el
	  port.  Solamente tiene que teclear
	  <code class="command">make</code> en el prompt.  Una vez hecho
	  verá algo como esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.57
...
[La salida de la descompresión se ha eliminado]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[La salida de la configuración se ha eliminado]
...
===&gt;  Building for lsof-4.57
...
[La salida de la compilación se ha eliminado]
...
<code class="prompt">#</code></pre><p>Una vez que acabe la compilación
	  se le devolverá el control del prompt.  El siguiente
	  paso es instalar el port.  Para ello bastará con que
	  añada una palabra a la orden
	  <code class="command">make</code>: esa palabra es
	  <code class="buildtarget">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
===&gt;  Installing for lsof-4.57
...
[La salida de la instalación se ha eliminado]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
<code class="prompt">#</code></pre><p>Una vez que vuelva usted al prompt podrá ejecutar la
	  aplicación que acaba de instalar.  Dado que
	  <code class="command">lsof</code> es un programa que se ejecuta con
	  privilegios altos se le ha mostrado una advertencia de
	  seguridad.  Durante la compilación e instalación
	  es posible que hayan aparecido otros.</p><p>Le recomendamos que borre el directorio que contiene todos
	  los ficheros temporales necesarios durante la compilación.
	  No solo consume valioso espacio en disco sino que puede dar
	  problemas cuando vaya a actualizar el port a una versión
          más reciente.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
===&gt;  Cleaning for lsof-4.57
<code class="prompt">#</code></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede ahorrarse teclear dos pasos si para instalar un port
	    teclea <code class="command">make
	    install clean</code> en lugar de
	    <code class="command">make</code>,
	    <code class="command">make install</code> y
	    <code class="command">make clean</code>
	    como tres pasos separados.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunas shells mantienen una caché de
	    órdenes disponibles en los directorios que aparecen
	    en la variable de entorno
	    <code class="envar">PATH</code> con el fin de acelerar las operaciones
	    de búsqueda de ejecutables de esas órdenes.
	    Si usa una de esas shells tendrá que utilizar la
	    orden <code class="command">rehash</code> tras instalar un port o
	    no podrá ejecutar aplicaciones recién
	    instaladas.  Esta orden funciona en shells como
	    <code class="command">tcsh</code>.  Utilice <code class="command">hash -r</code>
	    en shells <code class="command">sh</code>.  Para más
	    información consulte la documentación de
	    su shell.</p></div><p>Algunos DVD-ROM de terceros, como el FreeBSD Toolkit
	  de <a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD
	  Mall</a> contienen distfiles. Puede usarlos con la Colección
	  de Ports.  Monte el DVD-ROM en <code class="filename">/cdrom</code>.  Si
	  utiliza un punto de montaje diferente asigne a
	  <code class="varname">CD_MOUNTPTS</code> el valor adecuado.  Los
	  distfiles se irán copiando automáticamente
	  a medida que vayan siendo necesarios.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por favor, tenga en cuenta que la licencia de unos
	    cuantos ports muy concretos no permite su distribución
	    en CD-ROM.  Puede deberse a que es necesario rellenar un
	    formulario de registro antes de descargarlo, porque la
	    redistribución no esté permitida o por otra
	    razón.  Si quiere instalar un port que no está
	    en el CD-ROM tendrá que tener salida a Internet.</p></div><p>El sistema de ports utiliza <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a> para descargar
	  ficheros; en este proceso intervienen varias variables de
	  entorno, como <code class="envar">FTP_PASSIVE_MODE</code>, <code class="envar">FTP_PROXY</code>,
	  y <code class="envar">FTP_PASSWORD</code>.  Si está detrás de
	  un cortafuegos tendrá que asignar valores a una o
	  más de estas variables, así como si necesita
	  utilizar un proxy FTP/HTTP.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a>, donde
	  econtrará una lista detallada.</p><p>La opción <code class="command">make
	  fetch</code> se creó para
	  los usuarios que no disponen de conexión contínua.
	  Ejecute esta orden en el directorio raíz
	  (<code class="filename">/usr/ports</code>) y se descargarán todos
	  los ficheros necesarios.  Esta orden también funciona en
	  directorios situados más abajo, por ejemplo
	  <code class="filename">/usr/ports/net</code>.  Tenga en cuenta que si un
	  port depende de librerías u otros ports éstos
	  distfiles <span class="emphasis"><em>no</em></span> se descargarán, a
	  menos que reemplace <code class="buildtarget">fetch</code> por
	  <code class="buildtarget">fetch-recursive</code>, que se encargará
	  de descargar todas las dependencias de cada port.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si quiere compilar todos los ports de una
	  categoría y de una sola vez ejecutando la orden
	  <code class="command">make</code> en el directorio raíz, de muy
	  similar manera que lo que se acaba de ver con
	  <code class="command">makefetch</code>.  Tenga en
	  cuenta que esto es bastante peligroso porque algunos ports no
	  pueden coexistir.  También se dan casos de ports que
	  instalan instalan dos ficheros diferentes con el mismo
	  nombre.</p></div><p>En algunos casos (raros) el usuario tendrá que
	  descargar los tarball de un sitio que no es el que se guarda
	  en la variable de entorno <code class="varname">MASTER_SITES</code>
	  (el sitio desde el que se descargan todos los demás
	  normalmente).  Puede sobreescribir la opción
	  <code class="varname">MASTER_SITES</code> con la siguiente
	  orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/directory</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make MASTER_SITE_OVERRIDE= \
ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ fetch</code></strong></pre><p>En este ejemplo vamos a darle a la opción
	  <code class="varname">MASTER_SITES</code> el valor <code class="systemitem">ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos ports permiten (o incluso exigen) que se le
	  faciliten opciones de compilación para activar o desactivar
	  partes de la aplicación que no se necesiten, determinadas
	  opciones de seguridad, etc.  Casos típicos de esto son
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a>, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/gpgme/pkg-descr">security/gpgme</a>, and <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/sylpheed-claws/pkg-descr">mail/sylpheed-claws</a>.  Cuando debe
	  usted tomar este tipo de decisiones se le muestra un mensaje
	  con las opciones disponibles.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68292176"></a>4.5.2.1. Sobreescribir directorios por omisión de ports</h4></div></div></div><p>Algunas veces es útil (u obligatorio) utilizar un
	  directorio de trabajo o un «target» distinto al
	  que tenemos por omisión.  Las variables de entorno
	  <code class="varname">WRKDIRPREFIX</code> y <code class="varname">PREFIX</code>
	  pueden sobreescribirse según nuestra conveniencia.  Veamos
	  un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=/usr/home/ejemplo/ports install</code></strong></pre><p>compilará el port en
	    <code class="filename">/usr/home/ejemplo/ports</code> y lo instalará
	    en <code class="filename">/usr/local</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make PREFIX=/usr/home/ejemplo/local install</code></strong></pre><p>lo compilará en <code class="filename">/usr/ports</code> y lo
	  instalará en
	  <code class="filename">/usr/home/ejemplo/local</code>.</p><p>Y por supuesto,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=../ports PREFIX=../local install</code></strong></pre><p>combinará ambas; (ocupa demasiado para mostrarlo en una
	  página, pero la idea general queda clara).</p><p>Puede asignar valores a estas variables del mismo modo
	  que a cualquier otra de su entorno.  Consulte la
	  documentación de su shell para más
	  información.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68308560"></a>4.5.2.2. Uso de <code class="command">imake</code></h4></div></div></div><p>Algunos ports que usan <code class="command">imake</code>
	  (un componente del Sistema X Window) no funcionan correctamente
	  con <code class="varname">PREFIX</code> e  insistirán en instalarse
	  en <code class="filename">/usr/X11R6</code>.  Del mismo modo
	  algunos ports de Perl ignoran <code class="varname">PREFIX</code> y se
	  instalan en el árbol de Perl.  Hacer que estos ports
	  respeten <code class="varname">PREFIX</code> es difícil y a veces
	  imposible.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68312016"></a>4.5.2.3. Reconfigurar ports</h4></div></div></div><p>Al compilar ciertos ports se le presentará un
	  menú basado en ncurses en el cual podrá elegir
	  entre más o menos opciones de compilación.  No es
	  raro que los usuarios quieran volver a usar ese menú para
	  añadir, quitar o cambiar opciones una vez que el port ya
	  está compilado.  Hay bastantes formas de hacerlo.  Una
	  manera es entrar al directorio que contiene el port y teclear
	  <code class="command">make
	  config</code>, que hará que se
	  le presente de nuevo el menú con las opciones que estuvieran
	  seleccionadas previamente.  Otra opción es usar la orden
	  <code class="command">make showconfig</code>, que
	  le mostrará todas las opciones de configuración del
	  port.  Hay otra opción más, <code class="command">make
	  rmconfig</code>, que borrará
	  todas las opciones que estuvieran seleccionadas y le permitirá
	  por tanto empezar desde cero.  Todas estas opciones y muchas
	  más las encontrará descritas con gran detalle en
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-removing"></a>4.5.3. Cómo desinstalar ports</h3></div></div></div><a id="idp68315984" class="indexterm"></a><p>Ahora que sabe instalar ports probablemente quiera saber
        cómo eliminarlos; puede que haya instalado alguno y
        posteriormente se haya dado cuenta de que ha instalado el port
	incorrecto.  Vamos a desinstalar el port del ejemplo anterior
        (que, para todos aquellos que no estaban atentos,  era
	<code class="command">lsof</code>).  Igual que al instalar ports, lo primero
	que debemos hacer es ubicarnos en el directorio del port que
	deseamos eliminar del sistema, en nuestro caso
	<code class="filename">/usr/ports/sysutils/lsof</code>.   Los ports se
	desinstalan exactamente igual que los packages; esto se
	explica en la <a class="link" href="#packages-using" title="4.4. Uso del sistema de packages">sección de packages</a>) utilizando
	la orden <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete lsof-4.57</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-upgrading"></a>4.5.4. Actualización de ports</h3></div></div></div><a id="idp68321488" class="indexterm"></a><p>Antes de nada necesita ver una lista de ports instalados de
        los cuales exista una nueva versión en la Colección
	de Ports.  Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_version</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_version -v</code></strong></pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-file-updating"></a>4.5.4.1. <code class="filename">/usr/ports/UPDATING</code></h4></div></div></div><p>Una vez actualizada la Colección de Ports (y
	  <span class="emphasis"><em>antes</em></span> de intentar actualizar ningún
	  port) debe consultar
	  <code class="filename">/usr/ports/UPDATING</code>.  Este fichero describe
	  todas las novedades, problemas que pueden encontrarse y pasos que
	  deben seguir los usuarios al actualizar un port; hay cambios de
	  formato, cambios de ubicación de ficheros de
	  configuración o incompatibilidades con versiones
	  anteriores.</p><p>Si <code class="filename">UPDATING</code> se contradice de cualquier modo
	  con lo que lea aquí tenga muy encuenta que lo que aparezca en
	  <code class="filename">UPDATING</code> tiene prioridad absoluta.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portupgrade"></a>4.5.4.2. Actualización de ports con portupgrade</h4></div></div></div><a id="idp68333136" class="indexterm"></a><p>La aplicación <span class="application">portupgrade</span>
        se diseñó para actualizar fácilmente los ports
	instalados en un sistema.  Puede instalarla desde el port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>.  La
	instalación es como al de cualquier otro port, use la orden
	<code class="command">make install
	clean</code> command:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portupgrade</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Compruebe la lista de ports instalados con <code class="command">pkgdb
	-F</code> y arregle todas las inconsistencias que aparezcan.  Le
	recomendamos que haga esta comprobación de forma regular y
	siempre antes de una actualización.</p><p>Si ejecuta <code class="command">portupgrade -a</code>
	<span class="application">portupgrade</span> intentará actualizar
	todos y cada uno de los ports instalados en su sistema.  Utilice el
	parámetro <code class="option">-i</code> si quiere que le pida
	confirmación antes de actualizar cada uno de los ports.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -ai</code></strong></pre><p>Si solamente quiere actualizar una sola aplicación (y no
        absolutamente todos los ports) utilice la orden <code class="command">portupgrade
	nombre-de-aplicación</code>.
	Añada el modificador <code class="option">-R</code> si quiere que
	<span class="application">portupgrade</span> actualice antes todos los
	ports de los que depende la aplicación en cuestión.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -R firefox</code></strong></pre><p>Si quiere usar packages en lugar de ports use el modificador
	<code class="option">-P</code> flag.  Con esta opción
	<span class="application">portupgrade</span> busca en los directorios
	locales que aparezcan en <code class="envar">PKG_PATH</code> o descarga los
	packages desde un sitio remoto si es que no los encuentra en
	local.  Si es imposible encontrar los packages ni en local ni en
	remoto <span class="application">portupgrade</span> utilizará
	ports.  Si no quiere usar ports pase lo que pase utilice el
	modificador <code class="option">-PP</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -PP gnome2</code></strong></pre><p>Si quiere solamente descargar los distfiles (o los packages,
	usando <code class="option">-P</code>) sin compilar ni instalar nada,
	use <code class="option">-F</code>.  Para más información
	consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portupgrade</span>(1)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmanager"></a>4.5.4.3. Actualización de ports con portmanager</h4></div></div></div><a id="idp68353232" class="indexterm"></a><p><span class="application">Portmanager</span> es otra aplicación
	  pensada para la actualización sencilla de ports instalados
	  en el sistema.  Puede encontrarla en
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmanager/pkg-descr">ports-mgmt/portmanager</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmanager</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Puede actualizar todos los ports que tenga instalados con
	  una sola orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager -u</code></strong></pre><p>Si usa el modificador <code class="option">-ui</code> se le pedirá
	  confirmación a cada paso que <span class="application">Portmanager</span>
	  vaya a dar.  <span class="application">Portmanager</span> también
	  puede usarse para instalar nuevos ports.  A diferencia del habitual
	  <code class="command">make install clean</code>
	  actualizará todos los ports que dependan antes de compilar e
	  instalar ese port que queramos instalar.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager x11/gnome2</code></strong></pre><p>Si aparecen problemas con las dependencias del port que quiere
	  instalar puede usar <span class="application">Portmanager</span> para
	  recompilar todos ello en el orden correcto.  Una vez que acabe el
	  port que estaba dando problemas será también
	  recompilado.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager graphics/gimp -f</code></strong></pre><p>Para más información consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portmanager&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portmanager</span>(1)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmaster"></a>4.5.4.4. Actualización de ports con portmaster</h4></div></div></div><a id="idp68368848" class="indexterm"></a><p><span class="application">Portmaster</span> es otra aplicación
	  para actualizar ports.  <span class="application">Portmaster</span> se
	  diseñó para que utilizara las herramientas del sistema
	  «base» (es decir, no depende de otros ports) y utiliza
	  la información que se almacena en el directorio
	  <code class="filename">/var/db/pkg/</code> para determinar
	  qué port es el que hay que actualizar.  Puede encontrarlo en
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="application">Portmaster</span> agrupa los ports en cuatro
	  categorías:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>«Root ports» (no tienen dependencias, ningún port depende de ellos)</p></li><li class="listitem"><p>«Trunk ports» (no tienen dependencias, otros ports dependen de ellos)</p></li><li class="listitem"><p>«Branch ports» (tienen dependencias, otros ports dependen de ellos)</p></li><li class="listitem"><p>«Leaf ports» (tienen dependencias, ningún port depende de ellos)</p></li></ul></div><p>Puede ver una lista de los ports instalados y
	  buscar actualizaciones para ellos usando el modificador
	  <code class="option">-L</code> :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -L</code></strong>
===&gt;&gt;&gt; Root ports (No dependencies, not depended on)
===&gt;&gt;&gt; ispell-3.2.06_18
===&gt;&gt;&gt; screen-4.0.3
        ===&gt;&gt;&gt; New version available: screen-4.0.3_1
===&gt;&gt;&gt; tcpflow-0.21_1
===&gt;&gt;&gt; 7 root ports
...
===&gt;&gt;&gt; Branch ports (Have dependencies, are depended on)
===&gt;&gt;&gt; apache-2.2.3
        ===&gt;&gt;&gt; New version available: apache-2.2.8
...
===&gt;&gt;&gt; Leaf ports (Have dependencies, not depended on)
===&gt;&gt;&gt; automake-1.9.6_2
===&gt;&gt;&gt; bash-3.1.17
        ===&gt;&gt;&gt; New version available: bash-3.2.33
...
===&gt;&gt;&gt; 32 leaf ports

===&gt;&gt;&gt; 137 total installed ports
        ===&gt;&gt;&gt; 83 have new versions available
</pre><p>Con la siguiente orden puede actualizar todos los ports
	  del sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -a</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por omisión <span class="application">Portmaster</span>
	  guardará una copia de seguridad (un package) de cada port
	  antes de borrarlo.  Si la instalación de la nueva versión
	  funciona <span class="application">Portmaster</span> borrará el package.
	  Si utiliza <code class="option">-b</code> le dirá a
	  <span class="application">Portmaster</span> que no borre automáticamente
	  el package.  Si usa el modificador <code class="option">-i</code> arrancará
	  <span class="application">Portmaster</span> en modo interactivo, lo que significa
	  que le pedirá confirmación antes de actualizar cada
	  port.</p></div><p>Si se encuentra con errores durante el proceso de
	  actualización puede utilizar el modificador
	  <code class="option">-f</code> para actualizar o recompilar todos
	  los ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -af</code></strong></pre><p>También puede usar
	  <span class="application">Portmaster</span> para
	  instalar nuevos ports en el sistema, actualizando todas sus
	  dependencias antes de compilar e instalar el nuevo port:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster shells/bash</code></strong></pre><p>Por favor, consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portmaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portmaster</span>(8)</span></a> para más
	  información.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-disk-space"></a>4.5.5. Los ports y el espacio en disco</h3></div></div></div><a id="idp68401360" class="indexterm"></a><p>Usar la Colección de Ports consume mucho espacio de
        disco según pasa el tiempo.  Por culpa de la tendencia del
        árbol de ports a crecer sin parar le recomendamos
	que después de compilar e instalar sofware desde los ports
        recuerde limpiar los directorios temporales <code class="filename">work</code> mediante la orden
        <code class="command">make clean</code>.  Puede
	limpiar de un plumazo los directorios temporales de toda la
	Colección de Ports con la siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -C</code></strong></pre><p>Rápidamente acumulará gran cantidad de viejas
        distribuciones de código en
	<code class="filename">distfiles</code>.  Puede borrarlos
	a mano, pero también puede usar la siguiente orden para
	borrar todos los distfiles que no tengan relación con
	ningún port:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -D</code></strong></pre><p>También puede borrar todos los distfiles sin relación
      con ningún port instalado en el sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -DD</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">portsclean</code> forma parte de la
	  «suite» <span class="application">portupgrade</span>.</p></div><p>No olvide borrar los ports instalados una vez que deja de
         necesitarlos.  Hay una herramienta muy útil para ayudar
	 a automatizar esta tarea:
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/pkg_cutleaves/pkg-descr">ports-mgmt/pkg_cutleaves</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-nextsteps"></a>4.6. Después de instalar un port</h2></div></div></div><p>Una vez que ha instalado una nueva aplicación normalmente
      deberáa leer toda la documentación que incluya, editar los
      ficheros de configuración necesarios, asegurarse de que la
      aplicación se ejecute al arrancar el sistema (si es un
      dæmon)etc.</p><p>Obviamente los pasos exactos para configurar cada aplicación
      son distintos de una a otra.  De cualquier forma, si acaba de instalar
      aplicación y se pregunta
      «?Y ahora qué?» estos consejos puede que le
      ayuden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_info</span>(1)</span></a> para ver qué ficheros se instalaron
	  y dónde.  Por ejemplo, si instalón
	  el paquete Un-Package 1.0.0, lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info -L un-package-1.0.0 | less</code></strong></pre><p>mostrará los ficheros instalados por el paquete.  Preste
	  especial atención a los ficheros en el directorio
	  <code class="filename">man/</code>, que son las páginas de ayuda y los
	  del directorio <code class="filename">etc/</code>, que contiene los ficheros
	  de configuración; bajo el directorio <code class="filename">doc/</code>
	  podrá encontrar información más
	  detallada.</p><p>Si no está seguro de qué versión del
	  paquete ha instalado, teclée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info | grep -i un-package</code></strong></pre><p>y verá todos los paquetes que se llaman
	  <em class="replaceable"><code>un-package</code></em>.  Reemplace
	  <em class="replaceable"><code>un-package</code></em> en la línea de
	  órdenes que tenga que usar en su caso.</p></li><li class="listitem"><p>Una vez que ha identificado las páginas de manual
	  de la aplicación revíselas mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=man&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">man</span>(1)</span></a>.
	  Revise también los ficheros de configuración,
	  así como cualquier otro tipo de documentación
	  que venga con el software.</p></li><li class="listitem"><p>Si la aplicación tiene sitio web visítelo.
	  Es muy posible que encuentre más documentación,
	  listas de preguntas frecuentes (FAQ), etc.  Si no sabe cuál
	  puede ser la dirección del sitio web examine la
	  salida de la orden</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info un-package-1.0.0</code></strong></pre><p>a veces incluye una línea <code class="literal">WWW:</code>, que
	  contiene la dirección del sitio web de la
	  aplicación.</p></li><li class="listitem"><p>Los ports que deben arrancar con el sistema (como los
	  servidores de Internet) normalmente instalaran un
	  «script» de
	  ejemplo en <code class="filename">/usr/local/etc/rc.d</code>.  Debe
	  revisar este «script» para comprobar que todo sea
	  correcto, editarlo o renombrarlo si fuera necesario.  Consulte
	   <a class="link" href="#configtuning-starting-services" title="11.2. &#8220;Arrancar servicios&#8221;">Cómo arrancar
	    servicios</a> para más información.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-broken"></a>4.7. Ports que no funcionan</h2></div></div></div><p>Si encuentra un port que no funciona hay varias cosas
        que puede hacer:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Consulte en la
	    <a class="link" href="http://www.freebsd.org/support.html#gnats" target="_top">Base
	    de datos de informes de error</a> si ya se ha publicado
	    un parche que lo solucione.  Si es el caso puede aplicar
	    aplicar el parche en su sistema.</p></li><li class="listitem"><p>Pida ayuda al responsable del mantenimiento
	     (conocido como «mantainer») del port.
	     Teclée <code class="command">make maintainer</code> o
	     consulte el
	     <code class="filename">Makefile</code> del port si no sabe cuál
	     es la dirección de correo del «mantainer».
	     Recuerde que debe incluir el nombre y la versión del
	     port.   Envíe la línea que contiene
	     <code class="literal">$FreeBSD:</code> al principio del
	     <code class="filename">Makefile</code> del port y salida
	     con el error que obtiene al intentar usar la
	     aplicación.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos ports no son responsabilidad de un individuo
	       sino de <a class="link" href="http://www.freebsd.org/doc/en_US.ISO-8859-1/articles/mailing-list-faq/article.html" target="_top">una lista de correo.</a>
	       Muchas, aunque no todas, tienen un aspecto parecido a
	       <code class="email">&lt;freebsd-nombredelalista@FreeBSD.org&gt;</code>.
	       Por favor, téngalo en cuenta cuando envie ese correo
	       sobre el port que no funciona.</p><p xmlns="http://www.w3.org/1999/xhtml">Hay un caso especial: Los ports que tienen como
	       «mantainer»
               <code class="email">&lt;freebsd-ports@FreeBSD.org&gt;</code> en
	       realidad no son responsabilidad de nadie.  Los parches
	       y el soporte, en caso de existir, vienen de la comunidad de
	       usuarios y desarrolladores que están suscritos
	       a la lista.  Por cierto, siempre hacen falta más
	       voluntarios.</p></div><p>Si no recibe respuesta utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> para
	      enviar un informe de errores.  Consulte
	      <a class="link" href="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/problem-reports/article.html" target="_top">Cómo escribir informes de error</a>)
	      <a href="#ftn.idp68446288" class="footnote" id="idp68446288"><sup class="footnote">[5]</sup></a>
	      </p></li><li class="listitem"><p><span class="emphasis"><em>Arreglarlo</em></span>. El «Porter's
	    Handbook» incluye información detallada
	    sobre la infraestructura de los ports, así que
	    puede arreglar un port roto o incluso enviar su propio
	    port.</p></li><li class="listitem"><p>Descargue el paquete de algún sitio FTP.  El
	    servidor «principal» de la colección
	    de paquetes está en el
	    <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/" target="_top">directorio
	    de paquetes</a> de
	    <code class="systemitem">ftp.FreeBSD.org</code>
	    <span class="emphasis"><em>pero asegúrese de mirar antes en la
	    réplica más próxima</em></span>.
	    Esta es una forma de instalar aplicaciones más
	    fácil y más rápida.
	    Instale el paquete mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>.</p></li></ol></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp68446288" class="footnote"><p><a href="#idp68446288" class="para"><sup class="para">[5] </sup></a>
	        Hay traducción al castellano de este artículo.
		Está aquí: <code class="uri"><a class="uri" href="http://www.freebsd.org/doc/es_ES.ISO8859-1/articles/problem-reports/article" target="_top">http://www.freebsd.org/doc/es_ES.ISO8859-1/articles/problem-reports/article</a></code>
	      </p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11"></a>Capítulo 5. El sistema X Window</h2></div><div><span class="authorgroup">Actualizado al servidor X11 de X.Org por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ken</span> <span class="surname">Tom</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#x11-synopsis">5.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#x-understanding">5.2. Entender X</a></span></dt><dt><span class="sect1"><a href="#x-install">5.3. Instalar X11</a></span></dt><dt><span class="sect1"><a href="#x-config">5.4. Configuración de X11</a></span></dt><dt><span class="sect1"><a href="#x-fonts">5.5. Uso de tipos en X11</a></span></dt><dt><span class="sect1"><a href="#x-xdm">5.6. El gestor de pantalla X</a></span></dt><dt><span class="sect1"><a href="#x11-wm">5.7. Entornos de escritorio</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x11-synopsis"></a>5.1. Sinopsis</h2></div></div></div><p>FreeBSD usa X11 para proporcionar una potente interfaz
      gráfica.  X11 es una implementación de código
      abierto del sistema X Window que incluye
      <span class="application">Xorg</span> y
      <span class="application"><span class="trademark">XFree86</span>&#8482;</span>.  En las versiones de
      FreeBSD hasta FreeBSD 4.10-RELEASE y FreeBSD 5.3-RELEASE el
      sistema X window que se instalará por defecto es
      <span class="application"><span class="trademark">XFree86</span>&#8482;</span>, el servidor X11
      distribuido por el proyecto <span class="trademark">XFree86</span>&#8482;.  Después de
      FreeBSD 5.3-RELEASE el sistema X Window pasó a
      ser <span class="application">Xorg</span>, el servidor X11
      distribuido por la Fundación X.Org.</p><p>Este capítulo cubre la instalación y
      configuración de X11 poniendo énfasis en
      <span class="application">Xorg</span>.  Si quiere
      información sobre la configuración de
      <span class="application"><span class="trademark">XFree86</span>&#8482;</span> o versiones
      anteriores de Xorg consulte las versiones archivadas
      del «Handbook» de FreeBSD en <code class="uri"><a class="uri" href="http://docs.FreeBSD.org/doc/" target="_top">http://docs.FreeBSD.org/doc/</a></code>.</p><p>Para mas información del hardware de vídeo
      que X11 soporta consulte la página web de <a class="link" href="http://www.x.org/" target="_top">Xorg</a>.</p><p>Después de leer este capítulo usted
      sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cuáles son los diferentes componentes del
	  sistema X Window y como interoperan.</p></li><li class="listitem"><p>Cómo instalar y configurar X11.</p></li><li class="listitem"><p>Cómo instalar y usar diferentes gestores
	  de ventanas.</p></li><li class="listitem"><p>Cómo usar tipos de letra <span class="trademark">TrueType</span>® en X11.
	  </p></li><li class="listitem"><p>Como preparar su sistema para iniciar la sesión
          de forma gráfica (<span class="application">XDM</span>).</p></li></ul></div><p>Antes de leer este capítulo debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Saber cómo instalar software de terceros
          (<a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>).</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Este capítulo cubre la instalación y
         configuración de los servidores X11
         <span class="application">Xorg</span> y
         <span class="application"><span class="trademark">XFree86</span>&#8482;</span>.  La mayoría de los
         ficheros de configuración, órdenes y sintaxis son
         idénticos.  En los casos en que haya diferencias se
         mostrará la sintaxis de
         <span class="application">Xorg</span> y
         <span class="application"><span class="trademark">XFree86</span>&#8482;</span>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-understanding"></a>5.2. Entender X</h2></div></div></div><p>Usar X por primera vez puede resultar chocante para alguien
      familiarizado con otros entornos gráficos, como
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® o <span class="trademark">Mac OS</span>®.</p><p>No es necesario entender todos los detalles de los diferentes
      componentes de X y como interactúan, pero un conocimiento
      básico hace posible el sacarle más provecho a la
      potencia de X.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68479696"></a>5.2.1. ?Por qué X?</h3></div></div></div><p>X no es el primer sistema de ventanas escrito para <span class="trademark">UNIX</span>®
        pero es el más popular de todos ellos.  El equipo original
        que desarrolló X trabajó en otro sistema de ventanas
        antes de escribir X.  Ese sistema se llamó «W»
        (de «Window» que significa ventana en inglés).
        X era solo la siguiente letra en el alfabeto Romano.</p><p>X se puede llamar «X»
        «X Window System», «X11» y de otras
        formas. También puede usar el término
        «X Windows» para describir X11 si lo que quiere es
        ofender a algunas personas; si quiere saber más sobre esto
        consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68486864"></a>5.2.2. El modelo cliente/servidor de X</h3></div></div></div><p>X fue diseñado desde el principio pensando en redes
        y adoptó un modelo «cliente-servidor».</p><p>En el modelo de X el «servidor X» se ejecuta en la
        máquina que tiene el teclado, monitor y ratón.  El servidor
        es responsable de manejar la pantalla, la entrada de datos a
        través del teclado, el ratón, etc.  Cada
        aplicación X (como una <span class="application">XTerm</span> o
        <span class="application"><span class="trademark">Netscape</span>®</span>) es un
        «cliente».  Un cliente manda mensajes al servidor como
        «Por favor dibuja una ventana en estas coordenadas» y el
        servidor devuelve mensajes como «El usuario ha pulsado el
        botón OK».</p><p>Sí solo hay un ordenador involucrado, como en una
        casa o una pequeña oficina, el servidor X y los clientes
        X seguramente se ejecutarán en el mismo sistema.  Sin embargo, es
        perfectamente posible ejecutar el servidor X en un sistema de
        escritorio menos potente y ejecutar las aplicaciones X (los
        clientes) en, por ejemplo, la potente y cara máquina que sirve
        la oficina.  En este panorama la comunicación entre el
        cliente X y el servidor tiene lugar a través de la red.</p><p>Esto confunde a algunas personas, porque la terminología es
        exactamente opuesta a lo que ellos esperan.  Ellos esperan que el
        «servidor X» sea la máquina grande que hay en el
	sótano y que el «cliente X» sea la máquina
        de su mesa.</p><p>Es importante que recuerde que el servidor X es la
        máquina con el monitor y el teclado y que los clientes
        X son los programas que muestran las ventanas.</p><p>No hay nada en el protocolo que obligue a que el cliente y el
        servidor tengan que usar el mismo sistema operativo o incluso que
        estén en el mismo sistema.  Es posible ejecutar un servidor X
        en <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® o en el <span class="trademark">Mac OS</span>® de Apple; de hecho hay varias
        aplicaciones libres y comerciales que hacen exactamente eso.</p><p>A partir de FreeBSD 5.3-RELEASE, el servidor X que se instala
        con FreeBSD es <span class="application">Xorg</span>, que es libre  y
        se distribuye bajo una licencia muy similar a la de FreeBSD.
        También hay servidores X comerciales para FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68493264"></a>5.2.3. El gestor de ventanas</h3></div></div></div><p>La filosofía de diseño de X es más parecida
        a la de <span class="trademark">UNIX</span>®: «herramientas, no normas».  Esto
        significa que X no impone cómo debe hacerse una tarea.  En
        lugar de eso proporciona herramientas al usuario y es responsabilidad
        suya decidir qué hacer con ellas.</p><p>Esta filosofía se extiende a X; no impone como deben verse
        las ventanas en la pantalla, cómo moverlas con el ratón,
        qué teclas deberían usarse para moverse entre ventanas
        (por ejemplo <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Tab</strong></span>, en <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®), cómo deben ser las
        barras de título en cada ventana, si tienen o no botón
        de cierre, etc.</p><p>En lugar de eso X delega esta responsabilidad en una
        aplicación llamada «gestor de ventanas».  Hay
        docenas de gestores de ventanas disponibles para X:
        <span class="application">AfterStep</span>,
        <span class="application">Blackbox</span>, <span class="application">ctwm</span>,
        <span class="application">Enlightenment</span>,
        <span class="application">fvwm</span>, <span class="application">Sawfish</span>,
        <span class="application">twm</span>,
	<span class="application">Window Maker</span>, etc.  Cada uno de estos
	gestores de ventanas tiene un aspecto diferente; algunos soportan
	«escritorios virtuales»; otros permiten personalizar las
	teclas para manejar el escritorio; otros tienen un botón de
	«Inicio» o algo similar; otros tienen
	«diseños modificables», permitiendo un cambio
	completo del aspecto mediante un nuevo diseño.  Estos gestores
	de ventanas, y muchos otros, están en la
	categoría <code class="filename">x11-wm</code> de los ports.</p><p>Además, los entornos de escritorio
        <span class="application">KDE</span> y <span class="application">GNOME</span>
        tienen sus propios gestores de ventanas integrados con el
        escritorio.</p><p>Cada gestor de ventanas tiene diferentes mecanismos de
        configuración; en algunos debe escribir el fichero de
        configuración a mano, otros tienen herramientas gráficas
        para la mayor parte de la configuración; y al menos uno
        (<span class="application">Sawfish</span>) tiene un fichero de
        configuración escrito en un dialecto del lenguaje Lisp.</p><div xmlns="" class="note"><h3 class="admontitle">Política de foco: </h3><p xmlns="http://www.w3.org/1999/xhtml">Otra responsabilidad del gestor de ventanas es la
          «política de foco» del ratón.  Todos los
          sistemas de ventanas necesitan algo para elegir una ventana activa
          que recibirá los eventos y también debieran indicar
          claramente qué ventana está activa.
        </p><p xmlns="http://www.w3.org/1999/xhtml">Una política muy popular es la de «click to
          focus».  Este es el modelo que utiliza
          <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, en el que una ventana se convierte en activa
          al recibir un clic del ratón.
        </p><p xmlns="http://www.w3.org/1999/xhtml">X no tiene ninguna política de foco.  En lugar de eso el
          gestor de ventanas controla qué ventana tiene el foco en todo
          momento.  Los diferentes gestores de ventanas tienen diferentes
          políticas de foco.  Todos soportan la política
          «clic-para-foco» y la mayoría de ellos
          también soportan otros métodos.</p><p xmlns="http://www.w3.org/1999/xhtml">Las políticas de foco más populares son:</p><div xmlns="http://www.w3.org/1999/xhtml" class="variablelist"><dl class="variablelist"><dt><span class="term">el-foco-sigue-al-ratón
	      (<code class="literal">focus-follows-mouse</code>)</span></dt><dd><p>La ventana que esta bajo el puntero del ratón es
                la ventana que tiene el foco.  No es necesario que la ventana
                esté encima de las demás ventanas.  El foco se
                cambia al apuntar a otra ventana, aunque no es necesario hacer
                clic en ella.</p></dd><dt><span class="term">foco-descuidado
	      <code class="literal">sloppy-focus</code></span></dt><dd><p>Esta política es una pequeña
                extensión de
                «el-foco-sigue-al-ratón».  En
                «el-foco-sigue-al-ratón» si el
                ratón se mueve sobre la ventana raíz (o fondo)
                ninguna ventana tiene el foco y las pulsaciones del
                teclado se perderán.  Con la política
                «foco-descuidado» el foco sólo cambia
                cuando el cursor entra en una nueva ventana y no cuando
                sale de la ventana actual.</p></dd><dt><span class="term">click-para-foco
	      <code class="literal">click-to-focus</code></span></dt><dd><p>La ventana activa se selecciona con un clic del
                ratón.  La ventana se puede «levantar»
                y aparecer delante de las demás ventanas.  Todas las
                pulsaciones de teclado serán redirigidas a esa ventana
                aunque el cursor se mueva a otra ventana.</p></dd></dl></div><p xmlns="http://www.w3.org/1999/xhtml">Muchos gestores de ventanas soportan otras políticas o
          variaciones de estas.  Consulte la documentación del propio
          gestor de ventanas.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68517584"></a>5.2.4. Widgets</h3></div></div></div><p>La idea de X de hacer herramientas en vez de normas
        y se extiende a los «widgets» que se ven en la
        pantalla de cada aplicación.</p><p>«Widget» es un término que abarca todos los
        objetos en el interfaz de usuario que pueden pulsarse con el
	ratón manipularse de alguna manera: botones,
        «check boxes», listas, etc.  <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® los
        llama «controles».</p><p><span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® y <span class="trademark">Mac OS</span>® de Apple tienen una política
        de «widgets» muy rígida.  Se supone que los
        desarrolladores de aplicaciones comparten el aspecto.  En X no se
        consideró imponer un estilo gráfico o un conjunto de
        «widgets» al que adherirse.</p><p>Como resultado no se puede esperar que las aplicaciones de X
        tengan un aspecto homogéneo.  Hay varios conjuntos de
        «widgets» y variaciones muy populares como el
        «widget» Athena creado en el MIT,
        <span class="application"><span class="trademark">Motif</span>®</span> (donde los «widgets»
	de <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® fueron modelados, con todos los bordes
	biselados y tres tonos de gris), <span class="application">OpenLook</span>,
	y otros.</p><p>Las aplicaciones más modernas de X usan un conjunto
        de «widgets» con mejor aspecto, o Qt, utilizado
	por <span class="application">KDE</span>, o GTK+, que usa el proyecto
	<span class="application">GNOME</span>.  Se intenta que el aspecto del
	escritorio de <span class="trademark">UNIX</span>® sea parecido, lo que hace la vida más
	fácil al usuario novato.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-install"></a>5.3. Instalar X11</h2></div></div></div><p><span class="application">Xorg</span> es la implementación
      de X11 por omisión en FreeBSD.  <span class="application">Xorg</span>
      está basado en código de
      <span class="application"><span class="trademark">XFree86</span>&#8482; 4.4RC2</span> y X11R6.6.
      La versión de <span class="application">Xorg</span> que se
      distribuye actualmente en la Colección de Ports de FreeBSD es
      la 7.7.</p><p>Para compilar e instalar <span class="application">Xorg</span>
    desde la colección de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/xorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si quiere compilar e instalar <span class="application">Xorg</span>
        entero, asegúrese de tener como mínimo
        2GB de espacio disponible.</p></div><p>Si lo prefiere puede instalar Xorg con packages.  Cuando
      utilice la capacidad de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> para instalar packages
      que descargue remotamente recuerde que no debe escribir el
      número de versión.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> descargará
      automáticamente la última versión de la
      aplicación..</p><p>Veamos qué es lo que hay que hacer para descargar e
      instalar el package de
      <span class="application">Xorg</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xorg</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El anterior ejemplo instala la distribución X11
      completa, es decir, servidores, clientes, tipos de letra, etc.
      Hay packages y ports con cada uno de esos elementos por
      separado.</p></div><p>En el resto del capítulo se explica cómo
      configurar X11 y cómo configurar un entorno de escritorio
      que le resulte productivo.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-config"></a>5.4. Configuración de X11</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp68609872" class="indexterm"></a><a id="idp68610384" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68610896"></a>5.4.1. Antes de empezar</h3></div></div></div><p>Antes de configurar X11 necesitará la siguiente
        información sobre el sistema:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Especificaciones del monitor</p></li><li class="listitem"><p>Chipset de la tarjeta de vídeo</p></li><li class="listitem"><p>Memoria de la tarjeta de vídeo</p></li></ul></div><a id="idp68614096" class="indexterm"></a><a id="idp68614608" class="indexterm"></a><p>X11 usa las especificaciones del monitor para determinar
        la resolución y la frecuencia de refresco a la que
        funcionará.  Estas especificaciones se pueden encontrar
        normalmente en la documentación que viene con el monitor o
        en la web del fabricante.  Se necesitan dos rangos de números: la
        frecuencia de refresco horizontal y la vertical.</p><p>El chipset de la tarjeta de vídeo define qué
        controlador utilizará X11 para comunicarse con el hardware
        gráfico.  Con la mayoría de chipsets es posible
	detectarlo automáticamente pero es útil saberlo en
        caso de que la detección automática no
        funcione.</p><p>La memoria de la tarjeta gráfica determina la
        resolución y la profundidad de color a la que el sistema
        funcionará.  Es importante saberlo para que el usuario
        conozca las limitaciones del sistema.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68616400"></a>5.4.2. Configurar X11</h3></div></div></div><p>A partir de la versión 7.3
        <span class="application">Xorg</span> puede funcionar sin utilizar
	fichero de configuración; basta con teclear en el
	prompt:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>startx</code></strong></pre><p>Si no funciona, o si la configuración por
        omisión no es aceptable, hay que configurar X11
	a mano.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ciertos entornos de escritorio como
	  <span class="application">GNOME</span>,
	  <span class="application">KDE</span> o
	  <span class="application">XFce</span> tienen herramientas que permiten
	  al usuario configurar fácilmente parámetros
	  de la pantalla como la resolución.  Si la
	  configuración por omisión no sirve y tiene
	  idea de instalar un entorno de escritorio puede seguir
	  adelante tranquilamente con la instalación del entorno
	  de escritorio y utilice la herramienta que el software que
	  instale le facilite.</p></div><p>La configuración de X11 es un proceso que consta de
        múltiples pasos.  El primero es generar un fichero inicial
	de configuración.  Como superusuario teclee:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -configure</code></strong></pre><p>Esto generará un fichero de configuración
        bastante esquemático pero completo en
        <code class="filename">/root</code> llamado
	<code class="filename">xorg.conf.new</code> (si ha utilizado <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> o
	ha entrado directamente como superusuario afectará al valor
	que tenga la variable de directorio
	<code class="envar">$HOME</code>).  X11 intentará probar el hardware
	gráfico del sistema y escribir un fichero de
	configuración en el que registrar los controladores de
	dispositivo adecuados para hacer funcionar el harware que haya
	detectado.</p><p>El siguiente paso es probar el fichero generado para
        verificar si <span class="application">Xorg</span>
        puede funcionar con el hardware gráfico del sistema.  Para
	ello teclee:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -config xorg.conf.new</code></strong></pre><p>Si aparece una rejilla negra y gris junto con el cursor del
        ratón con forma de X es que la configuración ha
	tenido éxito.  Para salir de la prueba pulse
	simultáneamente
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Retroceso</strong></span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si el ratón no funciona tendrá que
	  configurarlo antes de continuar.  Consulte la
	  <a class="xref" href="#mouse" title="2.10.10. Configuración del ratón">Sección 2.10.10, &#8220;Configuración del ratón&#8221;</a> en el capítulo de instalación
	  de FreeBSD.</p></div><a id="idp68633808" class="indexterm"></a><p>Después modifique el fichero <code class="filename">xorg.conf.new</code>
        a su gusto.  Abra el fichero con un editor de texto (como
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">emacs</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ee</span>(1)</span></a>).  Primero añada las frecuencias
	del monitor.  Estas suelen estar expresadas en frecuencia de refresco
	horizontal y vertical.  Estos valores se añaden al fichero
        <code class="filename">xorg.conf.new</code> en la sección
        <code class="literal">"Monitor"</code>:</p><pre class="programlisting">Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
EndSection</pre><p>Las palabras <code class="literal">HorizSync</code> y
        <code class="literal">VertRefresh</code>  podrían no existir en el
        fichero de configuración.  Si no existen es necesario
        añadirlas con la frecuencia horizontal correcta puesta
        después de la palabra <code class="literal">HorizSync</code> y la
        frecuencia vertical correcta después de la palabra
        <code class="literal">VertRefresh</code>.  En el ejemplo anterior se pusieron
        las frecuencias del monitor.</p><p>X permite usar las características DPMS (Energy Star)
        con los monitores que lo soportan.  El programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a> controla
        el «timeout», y puede forzar los modos
        «standby», suspendido o apagado.  Si desea habilitar las
        características DPMS para su monitor tendrá que
        añadir la siguiente línea en la sección
        <code class="literal">monitor</code>:</p><pre class="programlisting">
        Option       "DPMS"</pre><a id="idp68642000" class="indexterm"></a><p>Agrege a su
        <code class="filename">xorg.conf.new</code>
        la resolución por omisión y la profundidad de
        color deseada.  Esto se define en la sección
        <code class="literal">"Screen"</code>:</p><pre class="programlisting">Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection</pre><p>La palabra <code class="literal">DefaultDepth</code> describe la profundidad
        de color a la que arrancará por omisión.  Esto puede
        sobrescribirse con el argumento <code class="command">-bpp</code> de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a> (o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=XFree86&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">XFree86</span>(1)</span></a>).  La palabra <code class="literal">Modes</code>
	describe la resolución a la que funcionará para esa
	profundidad de color.  Observe que sólo los modos
	estándar VESA están soportados por el hardware
        gráfico.  En el ejemplo anterior la profundidad de color es
        24 bits por pixel.  En esta profundidad de color la resolución
        aceptada es 1024 por 768 pixels.</p><p>Para acabar guarde el fichero de configuración y
        pruébelo usando el modo de prueba descrito anteriormente
	</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Una de las herramientas disponibles para ayudarle con el
          proceso de solución de problemas es el fichero de
          «logs», que contiene información de cada
          dispositivo al que el servidor X11 se conecta.  Los
          «logs» (o bitácoras) de
          <span class="application">Xorg</span> se pueden encontrar en
          <code class="filename">/var/log/Xorg.0.log</code>
          El nombre exacto del fichero de «log» puede variar
          entre <code class="filename">Xorg.0.log</code> y
          <code class="filename">Xorg.8.log</code> y así
          sucesivamente.</p></div><p>Si todo ha ido bien ha llegado el momento de ubicar el
        fichero de configuración donde <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a> pueda
	encontrarlo.  Puede dejarlo en
	<code class="filename">/etc/X11/xorg.conf</code> o
	<code class="filename">/usr/local/etc/X11/xorg.conf</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp xorg.conf.new /etc/X11/xorg.conf</code></strong></pre><p>El proceso de configuración de X11 ha concluido.
	Arranque <span class="application">Xorg</span> mediante
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=startx&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">startx</span>(1)</span></a>.  Puede también arrancar el servidor X11
        utilizando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Existe también una herramienta gráfica de
	configuración en X11, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>.  Permite definir de
	forma interactiva su configuració mediante la elección
	de los controladores y las opciones adecuadas.  Este programa
	también puede usarse desde consola mediante la orden
	<code class="command">xorgcfg -textmode</code>.  Para más
	información consulte la página de manual de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>.</p><p xmlns="http://www.w3.org/1999/xhtml">Puede usar también <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgconfig&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgconfig</span>(1)</span></a>.  Este programa es
        una herramienta orientada a consola que es bastante menos atractiva
	para el usuario, pero que puede funcionar en situaciones en las que
	otras herramientas no sirven.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68677072"></a>5.4.3. Configuración avanzada</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68677712"></a>5.4.3.1. Configuración de chipsets gráficos <span class="trademark">Intel</span>®
          i810</h4></div></div></div><a id="idp68687184" class="indexterm"></a><p>Para configurar los chipsets integrados <span class="trademark">Intel</span>® i810 es
          necesario el interfaz de programación AGP
          <code class="filename">agpart</code> para que
          X11 pueda usarla.  Consulte la página de manual de
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> para más información.</p><p>Hecho esto podrá configurar el hardware como cualquier
	  otra tarjeta gráfica.  Tenga en cuenta que si en un
	  sistema que no tenga el controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> intenta cargar
	  el módulo del kernel con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> no va a
	  funcionar.  El controlador tiene necesariamente que estar en el
	  kernel desde el mismo momento del arranque, cosa que puede
	  obtenerse bien compilando un nuevo kernel, bien utilizando
	  <code class="filename">/boot/loader.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68692176"></a>5.4.3.2. Añadir una pantalla panorámica a nuestro sistema</h4></div></div></div><a id="idp68692816" class="indexterm"></a><p>A lo largo de esta sección se asumen unos mínimos
	  de soltura con ciertos aspectos de configuración avanzada.  Si
	  Si las herramientas estándar de configuración que se
	  han descrito previamente no le ayudan a tener una
	  configuración funcional busque en los ficheros de log,
	  ahí encontrará información suficiente para
	  lograrlo.  Tendrá que utilizar un editor de texto a lo
	  largo de estas instrucciones.</p><p>Los formatos actuales de pantalla panorámica,
	  (también conocidas como «Widescreen», WSXGA,
	  WSXGA+, WUXGA, WXGA, WXGA+, etc, soportan formatos de
	  16:10 y 10:9 o aspectos-tasa que pueden ser
	  problemáticos.  Veamos algunos ejemplos de resoluciones de
	  pantalla en formatos 16:10:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>2560x1600</p></li><li class="listitem"><p>1920x1200</p></li><li class="listitem"><p>1680x1050</p></li><li class="listitem"><p>1440x900</p></li><li class="listitem"><p>1280x800</p></li></ul></div><p>At some point, it will be as easy as adding one of these
	  resolutions as a possible <code class="literal">Mode</code> in the <code class="literal">Section
	  "Screen"</code> as such:</p><pre class="programlisting">Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
	Viewport  0 0
	Depth     24
	Modes     "1680x1050"
EndSubSection
EndSection</pre><p><span class="application">Xorg</span> se basta y se sobra para
	  recabar la información de resolución de su pantalla
	  panorámica mediante la información
	  I2C/DDC, así que sabe qué frecuencias y
	  resoluciones puede manejar el monitor.</p><p>Si esas <code class="literal">ModeLines</code> no existen en los
	  controladores tendrá usted que ayudar un poco a
	  <span class="application">Xorg</span>.  Lea atentamente el contenido
	  de <code class="filename">/var/log/Xorg.0.log</code>; de él
	  podrá extraer suficiente información como para
	  crear un <code class="literal">ModeLine</code> que funcione.  Todo lo que
	  tiene que hacer es buscar información que se parezca
	  a esta:</p><pre class="programlisting">(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</pre><p>Esta información se llama información EDID.  Para
	  crear una <code class="literal">ModeLine</code> a partir de estos datos solamente
	  tiene que poner los números en el orden correcto:</p><pre class="programlisting">ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</pre><p>Así que la <code class="literal">ModeLine</code>
	  en la <code class="literal">Section "Monitor"</code> del ejemplo
	  tendría este aspecto:</p><pre class="programlisting">Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</pre><p>Como ve, con un poco de edición hemos culminado la tarea
	  y X debería ya poder arrancar sin problemas en su nuevo
	  monitor panorámico.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-fonts"></a>5.5. Uso de tipos en X11</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="type1"></a>5.5.1. Tipos Type1</h3></div></div></div><p>Los tipos que X11 incluye por omisión no son precisamente
        ideales para las aplicaciones típicas.  Los tipos grandes para
	presentaciones
        aparecen dentados y con un aspecto poco profesional, mientras
        que los tipos pequeños en
        <span class="application"><span class="trademark">Netscape</span>®</span> son prácticamente
        ilegibles.  Sin embargo hay varios tipos de letra libres
        Type1 de alta calidad (<span class="trademark">PostScript</span>®) que se pueden usar con
        X11.  Por ejemplo los tipos URW
        (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/urwfonts/pkg-descr">x11-fonts/urwfonts</a>) incluyen
        una versión de alta calidad de los tipos estándar Type
	1 (<span class="trademark">Times Roman</span>®,
        (<span class="trademark">Helvetica</span>®,
        (<span class="trademark">Palatino</span>®, y muchas otras).
        Las Freefonts (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/freefonts/pkg-descr">x11-fonts/freefonts</a>
	) incluyen muchas más pero la mayoría están
        pensadas para usarse con software gráfico como el
        <span class="application">Gimp</span> y no son lo bastante completos para
        usarse como tipos de pantalla.  Además X11 se
        puede configurar para usar tipos <span class="trademark">TrueType</span>® con un
        esfuerzo mínimo.  Para más detalles sobre esto consulte
        la página del manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> o la
        <a class="link" href="#truetype" title="5.5.2. Tipos TrueType®">sección de tipos <span class="trademark">TrueType</span>®</a>.</p><p>Para instalar los tipos Type1 desde
        los ports ejecute las siguientes órdenes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-fonts/urwfonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Proceda del mismo modo con los FreeFonts o cualesquiera otras.
        Para que el servidor X las detecte añada la siguiente
        línea al fichero de configuración de X
        (<code class="filename">/etc/X11/xorg.conf</code>:</p><pre class="programlisting">FontPath "/usr/X11R6/lib/X11/fonts/URW/"</pre><p>o bien desde una emulación de terminal durante una
        sesión X ejecute</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/URW</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>Esto funcionará hasta que la sesión X se cierre a
        menos que lo añada a su fichero de inicio
        (<code class="filename">~/.xinitrc</code> en el caso de una sesión
        <code class="command">startx</code> normal o <code class="filename">~/.xsession</code>
        si hace login desde un gestor gráfico como
        <span class="application">XDM</span>).  Una tercera forma sería
        usando el nuevo fichero
        <code class="filename">/usr/X11R6/etc/fonts/local.conf</code>:
        consulte la sección de <a class="link" href="#antialias" title="5.5.3. Tipos Anti-Aliasing">anti-aliasing</a>.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="truetype"></a>5.5.2. Tipos <span class="trademark">TrueType</span>®</h3></div></div></div><a id="idp68733008" class="indexterm"></a><a id="idp68733520" class="indexterm"></a><p><span class="application">Xorg</span> se diseñó
        pensando en que utilizara tipos <span class="trademark">TrueType</span>®.  Hay dos
	módulos diferentes que pueden habilitar esta opción.  El
	módulo freetype se usa en en este ejemplo porque es más
	consistente con el resto de «back-ends» de
	representación.  Para habilitar el módulo freetype debe
	añadir la siguiente línea a la sección
	<code class="literal">"Module"</code> del fichero
        <code class="filename">/etc/X11/xorg.conf</code>.</p><pre class="programlisting">Load "freetype"</pre><p>Ahora haga un directorio para los tipos <span class="trademark">TrueType</span>® (por ejemplo
        <code class="filename">/usr/X11R6/lib/X11/fonts/TrueType</code>) y copie todos
        los tipos <span class="trademark">TrueType</span>® en este directorio.  Recuerde que los
        tipos <span class="trademark">TrueType</span>® no se pueden coger directamente de
        un <span class="trademark">Macintosh</span>®; tienen que estar en formato <span class="trademark">UNIX</span>®/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®
        para usarlas con X11.  Una vez que los ficheros
        se hayan copiado en este directorio use
        <span class="application">ttmkfdir</span> para crear un fichero
        <code class="filename">fonts.dir</code>, para que el representador de tipos
        de X sepa que se han instalado estos ficheros
        nuevos.  <code class="command">ttmkfdir</code> forma parte de la Colección
        de Ports de FreeBSD: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr">x11-fonts/ttmkfdir</a>.
      </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ttmkfdir -o fonts.dir</code></strong></pre><p>Ahora añada el directorio <span class="trademark">TrueType</span>® a la ruta de
        tipos.  Esto es igual que lo anteriormente descrito sobre los
        tipos <a class="link" href="#type1" title="5.5.1. Tipos Type1">Type1</a>.  Ejecute:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>o añada una línea <code class="literal">FontPath</code> en su
        <code class="filename">/etc/X11/xorg.conf</code>.</p><p>Esto es todo.  Ahora <span class="application"><span class="trademark">Netscape</span>®</span>,
        <span class="application">Gimp</span>,
        <span class="application"><span class="trademark">StarOffice</span>&#8482;</span> y el resto de aplicaciones X
        debieran reconocer los tipos <span class="trademark">TrueType</span>® instalados.
        Los tipos muy  pequeños (como el texto en una pantalla con
	alta resolución viendo una página web) y los
        tipos muy grandes (Dentro de
        <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>) se verán
        muchísimo mejor ahora.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="antialias"></a>5.5.3. Tipos Anti-Aliasing</h3></div><div><span class="authorgroup">Actualizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joe Marcus</span> <span class="surname">Clarke</span></span>. </span></div></div></div><a id="idp68763088" class="indexterm"></a><a id="idp68763600" class="indexterm"></a><p>Los «tipos anti-aliasing» han estado en
        X11 desde
        <span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.0.2.  Aunque la
        configuración de los tipos era incómoda
        antes de
        <span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.3.0.  A partir de
        <span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.3.0 todos los
        tipos de X11 que se encuentren en
        <code class="filename">/usr/local/lib/X11/fonts/</code> y
        <code class="filename">~/.fonts/</code> están disponibles
        automáticamente para aplicaciones que soporten Xft.  No todas
        las aplicaciones soportan Xft pero muchas ya tienen soporte
        Xft.  Ejemplos de aplicaciones que lo soportan son Qt 2.3 o superior
        (el «toolkit» del escritorio
        <span class="application">KDE</span>), GTK+ 2.0 o superior (el
        «toolkit» del escritorio <span class="application">GNOME</span>
	) y <span class="application">Mozilla</span> 1.2 o superior.</p><p>Para controlar qué tipos
        «anti-aliasing» o configurar las propiedades
        «anti-aliasing» crée (o edite, si ya existe)
        el fichero
        <code class="filename">/usr/local/etc/fonts/local.conf</code>.  Se pueden
        modificar diversas opciones avanzadas del sistema de tipos Xft
	usando este fichero; esta sección describe solo algunas
	posibilidades simples.  Para más detalles consulte
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fonts-conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fonts-conf</span>(5)</span></a>.</p><a id="idp68774352" class="indexterm"></a><p>Este fichero tiene que estar en formato XML.  Preste especial
        atención a las mayúsculas y minúsculas y
        asegúrese de que las etiquetas están cerradas
        correctamente.  El fichero empieza con la típica cabecera XML
        seguida de una definición DOCTYPE y después la etiqueta
        <code class="literal">&lt;fontconfig&gt;</code>:</p><pre class="programlisting">
        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
        &lt;fontconfig&gt;
      </pre><p>Como se ha dicho antes todos los tipos en
        <code class="filename">/usr/local/lib/X11/fonts/</code> y en
        <code class="filename">~/.fonts/</code> están ya disponibles para las
        aplicaciones que soporten Xft.  Si usted desea añadir otro
        directorio además de estos dos árboles de directorios
        añada una línea similar a esta en el fichero
        <code class="filename">/usr/local/etc/fonts/local.conf</code>:</p><pre class="programlisting">&lt;dir&gt;/ruta/de/mis/tipos&lt;/dir&gt;</pre><p>Después de añadir los nuevos tipos,
        y en especial los nuevos directorios de tipos,
        debe ejecutar la siguiente orden para
        reconstruir la caché de tipos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fc-cache -f</code></strong></pre><p>Los «tipos anti-aliasing» hacen los bordes
        ligeramente borrosos, lo que hace que el texto muy
        pequeño sea más legible y elimina los escalones del
        texto grande pero puede causar fatiga visual aplicada al texto
        normal.  Para excluir los tipos de menos de 14
        puntos del «anti-aliasing» incluya las siguientes
        líneas:</p><pre class="programlisting">        &lt;match target="font"&gt;
            &lt;test name="size" compare="less"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit name="antialias" mode="assign"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
        &lt;match target="font"&gt;
            &lt;test name="pixelsize" compare="less" qual="any"&gt;
                &lt;double&gt;14&lt;/double&gt;
            &lt;/test&gt;
            &lt;edit mode="assign" name="antialias"&gt;
                &lt;bool&gt;false&lt;/bool&gt;
            &lt;/edit&gt;
        &lt;/match&gt;</pre><a id="idp68779984" class="indexterm"></a><p>El espacio entre algunos tipos también
        podría ser inapropiado con «anti-aliasing», por ejemplo
        en el caso de <span class="application">KDE</span>.
        Una posible solución para esto es forzar que el espacio entre
        los tipos sea 100.  Añada las siguientes
        líneas:</p><pre class="programlisting">       &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;fixed&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="family" mode="assign"&gt;
                 &lt;string&gt;mono&lt;/string&gt;
             &lt;/edit&gt;
          &lt;/match&gt;
          &lt;match target="pattern" name="family"&gt;
              &lt;test qual="any" name="family"&gt;
                  &lt;string&gt;console&lt;/string&gt;
              &lt;/test&gt;
              &lt;edit name="family" mode="assign"&gt;
                  &lt;string&gt;mono&lt;/string&gt;
              &lt;/edit&gt;
          &lt;/match&gt;</pre><p>(Esto selecciona los otros nombres comunes para
        «tipos fixed» como <code class="literal">"mono"</code>);
        añada también lo siguiente:</p><pre class="programlisting">         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;mono&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="spacing" mode="assign"&gt;
                 &lt;int&gt;100&lt;/int&gt;
             &lt;/edit&gt;
         &lt;/match&gt;      </pre><p>Algunos tipos, como Helvetica, podrían
        tener problemas con «anti-aliasing».  Normalmente esto
	se manifiesta en tipos que parecen cortados verticalmente por la
        mitad.  En el peor de los casos podría causar que el
        funcionamiento de aplicaciones como
        <span class="application">Mozilla</span> se interrumpiese.  Para evitar
        esto puede añadir lo siguiente a
        <code class="filename">local.conf</code>:
      </p><pre class="programlisting">         &lt;match target="pattern" name="family"&gt;
             &lt;test qual="any" name="family"&gt;
                 &lt;string&gt;Helvetica&lt;/string&gt;
             &lt;/test&gt;
             &lt;edit name="family" mode="assign"&gt;
                 &lt;string&gt;sans-serif&lt;/string&gt;
             &lt;/edit&gt;
         &lt;/match&gt;        </pre><p>Una vez que haya terminado de editar
        <code class="filename">local.conf</code> asegúrese de que el fichero
        termina con la etiqueta <code class="literal">&lt;/fontconfig&gt;</code>.  Si no
        lo hace los cambios  que haya hecho serán ignorados.</p><p>Los tipos por omisión que vienen con
        X11 no son los ideales para «anti-aliasing».
        Puede encontrar otros mucho mejores en el port
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/bitstream-vera/pkg-descr">x11-fonts/bitstream-vera</a>.  Este
        port instalará el fichero
        <code class="filename">/usr/local/etc/fonts/local.conf</code> si aun no se ha
        creado.  Si el fichero existe el port creara el fichero
        <code class="filename">/usr/local/etc/fonts/local.conf-vera</code>.  Combine
        el contenido de este fichero con
        <code class="filename">/usr/local/etc/fonts/local.conf</code> y los tipos
        Bitstream reemplazarán automáticamente los
        tipos por defecto por X11 Serif, Sans Serif y
        Monospaced.</p><p>Por si esto fuera poco los usuarios pueden añadir sus
        propios ajustes mediante sus ficheros personales
        <code class="filename">.fonts.conf</code>.  Los usuarios que deseen hacerlo
        deberán crear un fichero <code class="filename">~/.fonts.conf</code>.
        Este fichero tiene que estar también en formato XML.</p><a id="idp68793552" class="indexterm"></a><a id="idp68794064" class="indexterm"></a><p>Un último punto: con pantallas LCD sería
        deseable un muestreo de subpixel, que consiste en configurar los
        componentes (separados horizontalmente) rojo, verde y azul para
        mejorar la resolución horizontal; los resultados pueden ser
        impresionantes.  Para habilitarlo añada la siguiente
        línea a
        <code class="filename">local.conf</code>:</p><pre class="programlisting">
        &lt;match target="font"&gt;
            &lt;test qual="all" name="rgba"&gt;
                &lt;const&gt;unknown&lt;/const&gt;
            &lt;/test&gt;
            &lt;edit name="rgba" mode="assign"&gt;
                &lt;const&gt;rgb&lt;/const&gt;
            &lt;/edit&gt;
        &lt;/match&gt;
      </pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dependiendo del tipo de pantalla <code class="literal">rgb</code>
        podría ser <code class="literal">bgr</code> o <code class="literal">vrgb</code> o
        <code class="literal">vbgr</code>: experimente y elija cuál de ellos funciona
        mejor.</p></div><a id="idp68798288" class="indexterm"></a><a id="idp68798800" class="indexterm"></a><p>Una vez concluido el proceso «anti-aliasing» se
        debería activar la próxima vez que arranque X, aunque
        los programas necesitan saber como utilizarlo.  En
        este momento el «toolkit» Qt es capaz de hacerlo, así
        que <span class="application">KDE</span> entero puede usar
        «tipos  anti-aliasing».  GTK+ y
        <span class="application">GNOME</span> también pueden usar
        «tipos anti-aliasing» mediante el «applet»
	«Font» (consulte <a class="xref" href="#x11-wm-gnome-antialias" title="5.7.1.3. Tipos «Anti-aliased» en GNOME">Sección 5.7.1.3, &#8220;Tipos «Anti-aliased» en GNOME&#8221;</a> para más detalle).  Por
        omisión <span class="application">Mozilla</span>
        1.2 y versiones siguientes usarán automáticamente
        «tipos anti-aliasing».  Para deshabilitarlos
        recompile <span class="application">Mozilla</span> usando el
        parámetro <code class="varname">-DWITHOUT_XFT</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-xdm"></a>5.6. El gestor de pantalla X</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Seth</span> <span class="surname">Kingsley</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68809808"></a>5.6.1. Descripción</h3></div></div></div><a id="idp68810448" class="indexterm"></a><p>El gestor de pantalla X (<span class="application">XDM</span>) es una
        parte opcional del sistema X Window que se usa para la gestión de
        sesiones.  Esto es útil en diferentes situaciones, como
        «Terminales X» con escritorios mínimos y grandes
        servidores de red.  Como X Window System es independiente
        del protocolo y de la red hay muchas configuraciones posibles para
        ejecutar clientes y servidores X en diferentes equipos conectados a
        una red.  <span class="application">XDM</span> dispone de un interfaz
        gráfico para elegir a qué pantalla se quiere
        conectar y pedir la información de autentificación como
        el nombre de usuario y le contraseña.</p><p><span class="application">XDM</span> ac6túa como proveedor de la
        misma funcionalidad que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> (consulte
        <a class="xref" href="#term-config" title="24.3.2. Configuración">Sección 24.3.2, &#8220;Configuración&#8221;</a> para más detalles).  Esto quiere
        decir que se encarga de las entradas al sistema en la pantalla a la
        que está conectado y arranca el gestor de sesiones para que lo
        utilice el usuario (normalmente un gestor de ventanas
        X).  <span class="application">XDM</span> espera a que el
	programa termine, envía la señal de que el usuario ha
	terminado y que se le
        debería  desconectar de la pantalla.  En este punto
        <span class="application">XDM</span> puede mostrar las pantallas de entrada
        al sistema y de selección de pantalla para que el siguiente
        usuario intente acceder al sistema.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68815056"></a>5.6.2. Uso de XDM</h3></div></div></div><p>El dæmon <span class="application">XDM</span> está en
        <code class="filename">/usr/local/bin/xdm</code>.  Este programa se puede
        arrancar en cualquier momento como <code class="systemitem">root</code> y
        empezará a gestionar la pantalla X en la máquina
        local.  Si se quiere que <span class="application">XDM</span> arranque cada
        vez que la máquina se encienda puede hacerlo añadiendo
        una entrada a <code class="filename">/etc/ttys</code>.  Para más
        información sobre el formato y uso de este fichero consulte la
	<a class="xref" href="#term-etcttys" title="24.3.2.1. Agregando una entrada a /etc/ttys">Sección 24.3.2.1, &#8220;Agregando una entrada a <code class="filename">/etc/ttys</code>&#8221;</a>.  Por omisión hay una línea en
        <code class="filename">/etc/ttys</code> que permite arrancar el
	dæmon <span class="application">XDM</span> en una terminal virtual:
	</p><pre class="screen">ttyv8   "/usr/local/bin/xdm -nodaemon"  xterm   off secure</pre><p>Por omisión esta entrada está deshabilitada; para habilitarla
        cambie el campo 5 de <code class="literal">off</code> a <code class="literal">on</code> y
        reinicie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> usando los pasos descritos en la <a class="xref" href="#term-hup" title="24.3.2.2. Forzar init a que relea /etc/ttys">Sección 24.3.2.2, &#8220;Forzar <code class="command">init</code> a que relea
	  <code class="filename">/etc/ttys</code>&#8221;</a>.  El primer campo es el nombre de la terminal que
        que gestiona el programa, <code class="literal">ttyv8</code>.  Es decir,
        <span class="application">XDM</span> empezará a
        ejecutarse en la terminal virtual número 9.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68822992"></a>5.6.3. Configuración de XDM</h3></div></div></div><p>El directorio de configuración de
        <span class="application">XDM</span> está en
        <code class="filename">/usr/local/lib/X11/xdm</code>.  En este directorio hay
        varios ficheros que se usan para intervenir en el comportamiento y la
        apariencia de <span class="application">XDM</span>.  Normalmente tendrá
        estos ficheros:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Fichero</th><th>Descripción</th></tr></thead><tbody><tr><td><code class="filename">Xaccess</code></td><td>Reglas de acceso para clientes.</td></tr><tr><td><code class="filename">Xresources</code></td><td>Recursos de X por omisión.</td></tr><tr><td><code class="filename">Xservers</code></td><td>Lista de pantallas locales y remotas a gestionar.</td></tr><tr><td><code class="filename">Xsession</code></td><td>«script» por omisión para el acceso al
                sistema.</td></tr><tr><td><code class="filename">Xsetup_</code>*</td><td>«script» para lanzar aplicaciones antes del
                acceso al sistema.</td></tr><tr><td><code class="filename">xdm-config</code></td><td>Configuración de todas las pantallas de
              este equipo.</td></tr><tr><td><code class="filename">xdm-errors</code></td><td>Errores generados por el programa servidor.</td></tr><tr><td><code class="filename">xdm-pid</code></td><td>El ID de proceso del XDM que está
                 funcionando.</td></tr></tbody></table></div><p>En este directorio también hay unos cuantos programas y
        «scripts» que se usan para arrancar el escritorio cuando
        <span class="application">XDM</span> se está ejecutando.
        El objetivo de cada uno de estos ficheros será descrito
        brevemente.  La sintaxis exacta y el uso de todos estos ficheros
        se describe en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><p>La configuración por omisión es una simple ventana
        rectangular de acceso al sistema con el nombre de la máquina
        en la parte superior en un tipo de letra grande y unos campos para que
        introduzca«Login:» y «Password:» debajo.  Este es
        un buen punto de partida para aprender a cambiar el aspecto de las
        pantallas de <span class="application">XDM</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68886352"></a>5.6.3.1. Xaccess</h4></div></div></div><p>El protocolo para conectar con las pantallas controladas por
          <span class="application">XDM</span> se llama «X Display Manager Connection
          Protocol» (XDMCP).  Este fichero es un conjunto de reglas para
          controlar las conexiones XDMCP desde otros equipos.  Por defecto
          permite a cualquier cliente conectar, pero eso no importa a menos
          que <code class="filename">xdm-config</code> se cambie para escuchar
          conexiones remotas.  La configuración básica no
	  permite conexiones desde ningún cliente.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68888272"></a>5.6.3.2. Xresources</h4></div></div></div><p>Este es el fichero de opciones por defecto para el selector de
          pantalla y acceso al sistema.  Aquí es donde se puede
          modificar la apariencia del programa de «login».
          El formato es idéntico al fichero de opciones por defecto
          descrito en la documentación de X11.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68889424"></a>5.6.3.3. Xservers</h4></div></div></div><p>Una lista de pantallas remotas entre las que elegir.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68890576"></a>5.6.3.4. Xsession</h4></div></div></div><p>Este es el «script» de sesión que por
	  defecto <span class="application">XDM</span> arrancará
	  después de que el usuario acceda al sistema.  Normalmente
	  cada usuario tendrá una versión personalizada del
          «script» de sesión en
          <code class="filename">~/.xsession</code> que sobreescribe el
          «script» por defecto.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68892624"></a>5.6.3.5. Xsetup_*</h4></div></div></div><p>Estos se arrancarán automáticamente antes de que
	  se muestre el interfaz de selección o de acceso al sistema.
          Hay un «script» por cada gestor de ventanas disponible
          llamados <code class="filename">Xsetup_</code> seguido por el número
	  de pantalla local (por ejemplo <code class="filename">Xsetup_0</code>).
	  Normalmente estos «scripts» arrancan uno o dos
	  programas en segundo plano, por ejemplo <code class="command">xconsole</code>.
	  </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68895056"></a>5.6.3.6. xdm-config</h4></div></div></div><p>Este fichero contiene las opciones por defecto aplicables a
          todas las pantallas que gestiona la instalación.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68896208"></a>5.6.3.7. xdm-errors</h4></div></div></div><p>Este fichero contiene la salida de los servidores X que
          <span class="application">XDM</span> intente arrancar.  Si alguna pantalla
          que <span class="application">XDM</span> intente arrancar se cuelga por
          alguna razón este es un buen sitio para buscar los mensajes
          de error.  Estos mensajes también se escriben en el fichero
          <code class="filename">~/.xsession-errors</code> del usuario en cada
          sesión.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68898640"></a>5.6.4. Ejecutar un servidor de pantalla a través de la red
        </h3></div></div></div><p>Para que otros clientes puedan conectar al servidor de pantalla
        edite las reglas de acceso y habilite la escucha en la
        conexión.  Por omisión se aplican restricciones.  Si quiere
        que <span class="application">XDM</span> escuche conexiones
        comente la siguiente línea en el fichero
        <code class="filename">xdm-config</code>:</p><pre class="screen">! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</pre><p>y después reinicie <span class="application">XDM</span>.
        Recuerde que los comentarios en los ficheros de opciones por defecto
        comienzan con el carácter«!» en
        vez del típico «#».  Puede aplicar controles
        más restrictivos.  Consulte las opciones de ejemplo en
        <code class="filename">Xaccess</code> y la página de manual de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68927824"></a>5.6.5. Alternativas a XDM</h3></div></div></div><p>Hay algunas alternativas al programa por defecto
        <span class="application">XDM</span>.  Una de ellas,
        <span class="application">kdm</span> (que se incluye con
        <span class="application">KDE</span>) se describe más adelante en este
        capítulo.  <span class="application">kdm</span> ofrece muchas
	ventajas visuales y funcionalidad para permitir a los usuarios elegir
	su gestor de ventanas en el momento del acceso al sistema.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x11-wm"></a>5.7. Entornos de escritorio</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><p>Está sección describe los diferentes entornos de
      escritorio disponibles para X en FreeBSD.  Un «entorno de
      escritorio» puede ser cualquier cosa que vaya desde un simple
      gestor de ventanas hasta una completa «suite» de
      aplicaciones de escritorio como <span class="application">KDE</span> o
      <span class="application">GNOME</span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome"></a>5.7.1. GNOME</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-about"></a>5.7.1.1. Acerca de GNOME</h4></div></div></div><a id="idp68944592" class="indexterm"></a><p><span class="application">GNOME</span> es un entorno de escritorio
          amigable que permite a los usuarios una configuración
          fácil de sus sistemas.  <span class="application">GNOME</span>
          incluye un panel (para iniciar las aplicaciones y mostrar su
          estado),  un escritorio (donde pueden colocarse los datos y las
          aplicaciones), un conjunto de herramientas y aplicaciones de
          escritorio estándar y un conjunto de convenciones para
          facilitar la creación de aplicaciones que sean consistentes
	  y colaboren unas con otras.  Los usuarios de otros sistemas
	  operativos o entornos pueden sentirse como en casa utilizando el
	  poderoso entorno gráfico <span class="application">GNOME</span>.
	  Encontrará más información sobre
	  <span class="application">GNOME</span> en FreeBSD en la página
	  <a class="link" href="http://www.FreeBSD.org/gnome" target="_top">del
          Proyecto FreeBSD GNOME</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-install"></a>5.7.1.2. Instación de GNOME</h4></div></div></div><p><span class="application">GNOME</span> puede instalarse
	  fácilmente utilizando packages
          precompilados o desde la Colección de Ports:</p><p>Para instalar el paquete de <span class="application">GNOME</span>
          desde la red, simplemente teclee:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnome2</code></strong></pre><p>Para compilar <span class="application">GNOME</span> a partir del
          código fuente, es decir, como port:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/gnome2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Una vez <span class="application">GNOME</span> esté instalado
          debe indicarle al servidor X como iniciar
          <span class="application">GNOME</span> para convertirlo en el gestor de
          ventanas predeterminado.</p><p>La manera más fácil de arrancar
          <span class="application">GNOME</span> es con
          <span class="application">GDM</span>, el gestor de pantalla de GNOME.
          <span class="application">GDM</span>, que se instala con el escritorio
          <span class="application">GNOME</span> al ser parte del mismo (aunque venga
          desactivado por omisión) se activa añadiendo
          <code class="literal">gdm_enable="YES"</code> a
          <code class="filename">/etc/rc.conf</code>.  Tras reiniciar,
          <span class="application">GNOME</span> arrancará automáticamente
          al acceder al sistema; no es necesario configurar nada
          más.</p><p>Puede arrancar <span class="application">GNOME</span> también
	  desde la línea de órdenes configurando adecuadamente
	  un fichero llamado <code class="filename">.xinitrc</code>.  Si ya tiene un
          <code class="filename">.xinitrc</code> personalizado tendrá que
	  reemplazar la línea que arranca el gestor de ventanas anterior
          por otra que contenga
	  <span class="application">/usr/local/bin/gnome-session</span>.  Si no ha
	  modificado el fichero previamente basta con que teclée lo
	  siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/gnome-session" &gt; ~/.xinitrc</code></strong></pre><p>Después teclée <code class="command">startx</code> y debería
          iniciarse el entorno de escritorio
          <span class="application">GNOME</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si utiliza un gestor de pantalla antíguo,
	  como <span class="application">XDM</span>, lo anteriormente descrito no
	  funcionará.  Cree un fichero ejecutable
          <code class="filename">.xsession</code> con la misma orden en
          él.  Edite el fichero y sustituya la orden
          para iniciar su actual gestor de ventanas por
          <span class="application">/usr/local/bin/gnome-session</span>:
          </p></div><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "#!/bin/sh" &gt; ~/.xsession</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/gnome-session" &gt;&gt; ~/.xsession</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>chmod +x ~/.xsession</code></strong></pre><p>Otra opción es configurar el gestor de pantalla para que
          permita seleccionar el gestor de ventanas durante el acceso;
          la sección de <a class="link" href="#x11-wm-kde-details" title="5.7.3. Más detalles sobre KDE">detalles de KDE</a> explica cómo
          hacerlo para <span class="application">kdm</span>, el gestor de pantalla
          de <span class="application">KDE</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-antialias"></a>5.7.1.3. Tipos «Anti-aliased» en GNOME</h4></div></div></div><a id="idp68976592" class="indexterm"></a><p>X11 soporta «anti-aliasing» a
          través de la extensión «RENDER».  Gtk+
	  2.0 y superiores (el «toolkit» utilizado por
          <span class="application">GNOME</span>) disponen de esta funcionalidad.
	  La configuración del «anti-aliasing» se describe
	  en la <a class="xref" href="#antialias" title="5.5.3. Tipos Anti-Aliasing">Sección 5.5.3, &#8220;Tipos Anti-Aliasing&#8221;</a>.  Una vez configurado el software es
          posible utilizar «anti-aliasing» en el entorno de
          escritorio <span class="application">GNOME</span>.  Sólamente tiene
	  que ir a
	  <span class="guimenu">Applications</span> &#8594; <span class="guisubmenu">Desktop Preferences</span> &#8594; <span class="guimenuitem">Font</span>,
          y seleccione entre
	  <span class="guibutton">Best shapes</span>,
	  <span class="guibutton">Best contrast</span>, o
	  <span class="guibutton">Subpixel smoothing (LCDs)</span>.  En el caso de una
	  aplicación Gtk+ que no forme parte del escritorio
	  <span class="application">GNOME</span> asigne a la variable de entorno
          <code class="varname">GDK_USE_XFT</code> un valor de <code class="literal">1</code> antes de
	  arrancar el programa.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde"></a>5.7.2. KDE</h3></div></div></div><a id="idp68983888" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-about"></a>5.7.2.1. Acerca de KDE</h4></div></div></div><p><span class="application">KDE</span> es un entorno de escritorio
          contemporáneo y fácil de usar.  Veamos alguna de las cosas
	  que <span class="application">KDE</span> brinda al usuario:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un bello escritorio contemporáneo.</p></li><li class="listitem"><p>Un escritorio completamente transparente en red.</p></li><li class="listitem"><p>Un sistema de ayuda integrado que facilita un acceso adecuado y
              consistente a la ayuda durante el uso del escritorio
	      <span class="application">KDE</span> y sus aplicaciones.</p></li><li class="listitem"><p>Un aspecto consistente de todas las aplicaciones
              <span class="application">KDE</span>.</p></li><li class="listitem"><p>Menús y barras de herramientas estándares,
	      teclas programables, esquemas de color, etc.</p></li><li class="listitem"><p>Internacionalización: <span class="application">KDE</span>
              está disponible en más de 40 idiomas.</p></li><li class="listitem"><p>Un diálogo de configuración del escritorio
              centralizado y consistente.</p></li><li class="listitem"><p>Un gran número de útiles aplicaciones
              <span class="application">KDE</span>.</p></li></ul></div><p><span class="application">KDE</span> incluye un navegador web llamado
          <span class="application">Konqueror</span>, que es un sólido
	  competidor del resto de navegadores web existentes en sistemas
	  <span class="trademark">UNIX</span>®.  Puede encontrar más
	  información sobre <span class="application">KDE</span> en el
	  <a class="link" href="http://www.kde.org/" target="_top"> sitio web de KDE</a>.  Si quiere
          información específica y recursos sobre
          <span class="application">KDE</span> en FreeBSD consulte el sitio web del
	  <a class="link" href="http://freebsd.kde.org/" target="_top">equipo de KDE en FreeBSD</a>.</p><p>Hay dos versiones de <span class="application">KDE</span> en FreeBSD: la
          versión 3 lleva ya bastante tiempo en el sistema y es muy
	  estable en todos los sentidos.  La versión 4, la nueva
	  generación de <span class="application">KDE</span>, también
	  está en los ports.  Si quiere puede instalar ambas versiones
	  simultáneamente.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-install"></a>5.7.2.2. Instalación de KDE</h4></div></div></div><p>Igual que sucede con <span class="application">GNOME</span> o cualquier
          otro entorno de escritorio puede instalarlo como package o desde la
          Colección de Ports:</p><p>Si quiere instalar como package <span class="application">KDE3</span>
          (desde la red) escriba:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r kde</code></strong></pre><p>Si quiere instalar como package <span class="application">KDE4</span>
          (desde la red) escriba:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r kde4</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> descargará automáticamente
          la versión más reciente de la aplicación.</p><p>Si lo que desea es compilar <span class="application">KDE3</span> desde
	  el código fuente utilice el árbol de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/kde3</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Si lo que desea es compilar <span class="application">KDE4</span> desde
	  el código fuente utilice el árbol de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/kde4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Una vez instalado <span class="application">KDE</span>
	  debe indicarle al servidor X cómo iniciar la aplicación
	  para que se convierta en el gestor de ventanas por defecto.  Edite
	  <code class="filename">.xinitrc</code>:</p><p>Para <span class="application">KDE3</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "exec startkde" &gt; ~/.xinitrc</code></strong></pre><p>Para <span class="application">KDE4</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "exec /usr/local/kde4/bin/startkde" &gt; ~/.xinitrc</code></strong></pre><p>A partir de ahora cuando se llame al sistema X Window con
          <code class="command">startx</code> el escritorio será
          <span class="application">KDE</span>.</p><p>Si utiliza un gestor de pantalla, como por ejemplo
          <span class="application">xdm</span>, la configuración es
          ligeramente diferente.  En vez de lo antedicho edite
          <code class="filename">.xsession</code>.  Las instrucciones para
          <span class="application">kdm</span> se decribirán más
          adelante en este capítulo.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-details"></a>5.7.3. Más detalles sobre KDE</h3></div></div></div><p>Una vez <span class="application">KDE</span> está instalado
	  en el sistema la mayoría de las cosas se pueden ir descubriendo
          utilizando las páginas de ayuda o sencillamente a golpe de
	  ratón en los diversos menús.  Los usuarios de
          <span class="trademark">Windows</span>® y <span class="trademark">Mac</span>® se sentiráan como en casa.</p><p>La mejor referencia para <span class="application">KDE</span> es
          la documentación «on-line».
	  <span class="application">KDE</span>
          incluye su propio navegador, <span class="application">Konqueror</span>,
          docenas de útiles aplicaciones y una extensa
          documentación.  El resto de esta sección trata sobre
          cuestiones técnicas que son difíciles de aprender
          mediante una exploración al azar.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-kdm"></a>5.7.3.1. El gestor de pantalla de KDE</h4></div></div></div><a id="idp69043152" class="indexterm"></a><p>El administrador de un sistemas multiusuario puede querer ofrecer
	  a sus usuarios una pantalla de bienvenido que se les presente
	  al acceder al sistema.  Tal y como se ha explicado previamente puede
          usar <a class="link" href="#x-xdm" title="5.6. El gestor de pantalla X">XDM</a>.  De todos modos
          <span class="application">KDE</span> incluye su propia alternativa,
          alternative, <span class="application">kdm</span>, diseñado pensando
	  en ser más atractivo y tener más opciones que ofrecer
	  en el momento del acceso al sistema.  Más concretamente ofrece
	  a los usuarios la posibilidad de elegir mediante un menú
	  qué entorno de escritorio
          (<span class="application">KDE</span>,
          <span class="application">GNOME</span>, o cualquier otro) quiere ejecutar
	  el usuario una vez validado.</p><p>Si quiere activar <span class="application">kdm</span> debe modificar
	  la entrada de <code class="literal">ttyv8</code> en
	  <code class="filename">/etc/ttys</code>.  La línea debe quedar
	  del siguiente modo:</p><p>Si va a usar <span class="application">KDE3</span>:</p><pre class="programlisting">ttyv8 "/usr/local/bin/kdm -nodaemon" xterm on secure</pre><p>En el caso de <span class="application">KDE4</span>:</p><pre class="programlisting">ttyv8 "/usr/local/kde4/bin/kdm -nodaemon" xterm on secure</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce"></a>5.7.4. XFce</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce-about"></a>5.7.4.1. Acerca de XFce</h4></div></div></div><p><span class="application">XFce</span> es un entorno de escritorio
          basado en el «toolkit» GTK utilizado por
          <span class="application">GNOME</span> pero es mucho más ligero y
          está pensado para aquellos que quieran un escritorio
	  sencillo, eficiente y fácil de utlizar y configurar.
	  Visualmente es muy parecido a <span class="application">CDE</span>, que
	  podemos encontrar en sistemas <span class="trademark">UNIX</span>® comerciales.  Alguna de las
	  caracterésticas de <span class="application">XFce</span> son:
	  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un escritorio sencillo y fácil de utilizar.</p></li><li class="listitem"><p>Completamente configurable utilizando el ratón, con
               arrastrar y soltar, etc.</p></li><li class="listitem"><p>Panel principal similar al de
               <span class="application">CDE</span>, con menús,
               «applets» y accesos directos a las
               aplicaciones.</p></li><li class="listitem"><p>Gestor de ventanas integrado, gestor de ficheros, gestor
	       de sonido, módulo de compatibilidad con
           <span class="application">GNOME</span>, y muchas cosas más.</p></li><li class="listitem"><p>Aspecto configurable (utiliza GTK).</p></li><li class="listitem"><p>Rápido, ligero y eficiente: ideal para
               máquinas viejas, lentas o máquinas con
	       memoria limitada.</p></li></ul></div><p>Puede encontrar más información sobre
          <span class="application">XFce</span> en el
          <a class="link" href="http://www.xfce.org/" target="_top"> sitio web de XFce</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce-install"></a>5.7.4.2. Instalar XFce</h4></div></div></div><p>En el momento de escribir este texto existe un paquete binario
          para <span class="application">XFce</span>.  Para instalarlo
          escriba:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xfce4</code></strong></pre><p>También puede compilarlo desde el
          código gracias a la Colección de Ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-wm/xfce4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Para indicar al servidor X que use
         <span class="application">XFce</span> la próxima vez que arranque
         simplemente escriba lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/X11R6/bin/startxfce4" &gt; ~/.xinitrc</code></strong></pre><p>La próxima vez que arranque X
          <span class="application">XFce</span> será el escritorio.
          Como antes, si se usa un gestor de pantalla como
          <code class="filename">xdm</code> cree un <code class="filename">.xsession</code> tal
	  y como se ha descrito en la anterior sección en <a class="link" href="#x11-wm-gnome" title="5.7.1. GNOME">GNOME</a>, pero con la orden
	  <code class="filename">/usr/local/bin/startxfce4</code>; puede configurar el
	  gestor de pantalla para permitir elegir el escritorio en el momento
	  de acceder al sistema tal y como se ha explicado en la
	  sección de <a class="link" href="#x11-wm-kde-kdm" title="5.7.3.1. El gestor de pantalla de KDE">kdm</a>.</p></div></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="common-tasks"></a>Parte II. Tareas comunes</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>Una vez tratados los aspectos más básicos,
        pasaremos a detallar alguna de las características
	más utilizadas de FreeBSD:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Introducción a algunas de las aplicaciones de
	    escritorio más útiles y extendidas: navegadores,
	    herramientas de productividad,
	    visores de documentos, etc.</p></li><li class="listitem"><p>Introducción a algunas de las herramientas
	    multimedia de FreeBSD.</p></li><li class="listitem"><p>Explicación de cómo crear un kernel
	    personalizado en FreeBSD, lo que le permitirá
	    añadir nuevas funcionalidades al
	    sistema.</p></li><li class="listitem"><p>Descripción en detalle del sistema de
	    impresión, tanto en entornos de escritorio como en
	    impresoras conectadas en red.</p></li><li class="listitem"><p>Cómo ejecutar aplicaciones de <span class="trademark">Linux</span>® en
	    FreeBSD.</p></li></ul></div><p>Algunos de los capítulos recomiendan lecturas de
	capítulos anteriores, lo que se indica al inicio de
	cada capítulo.</p><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="chapter"><a href="#desktop">6. Aplicaciones de escritorio</a></span></dt><dd><dl><dt><span class="sect1"><a href="#desktop-synopsis">6.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">6.2. Navegadores</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">6.3. Productividad</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">6.4. Visores de documentos</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">6.5. Finanzas</a></span></dt><dt><span class="sect1"><a href="#desktop-summary">6.6. Resumen</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multimedia">7. Multimedia</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp69521744">7.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#sound-setup">7.2. Configuración de la tarjeta de sonido</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">7.3. Sonido MP3</a></span></dt><dt><span class="sect1"><a href="#video-playback">7.4. Reproducción de vídeo</a></span></dt><dt><span class="sect1"><a href="#tvcard">7.5. Configuración de tarjetas de TV</a></span></dt><dt><span class="sect1"><a href="#scanners">7.6. Escáneres de imágenes</a></span></dt></dl></dd><dt><span class="chapter"><a href="#kernelconfig">8. Configuración del kernel de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp70106704">8.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#idp70113744">8.2. ?Qué razones hay para compilar un kernel personalizado?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-devices">8.3. Inventario de hardware del sistema</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-modules">8.4. Controladores del kernel, subsistemas y módulos</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">8.5. Compilación e instalación de un kernel personalizado</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">8.6. El fichero de configuración</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">8.7. Qué hacer si algo va mal</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printing">9. Imprimir</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp70709072">9.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">9.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">9.3. Configuración básica</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">9.4. Configuración avanzada de impresoras</a></span></dt><dt><span class="sect1"><a href="#printing-using">9.5. Cómo utilizar impresoras</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">9.6. Alternativas a LPD</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">9.7. Solución de problemas</a></span></dt></dl></dd><dt><span class="chapter"><a href="#linuxemu">10. Compatibilidad binaria con Linux</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linuxemu-synopsis">10.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">10.2. Instalación</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematica">10.3. Instalación de <span class="trademark">Mathematica</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-maple">10.4. Instalación de <span class="trademark">Maple</span>&#8482;</a></span></dt><dt><span class="sect1"><a href="#linuxemu-matlab">10.5. Instalación de <span class="trademark">MATLAB</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">10.6. Instalación de <span class="trademark">Oracle</span>®</a></span></dt><dt><span class="sect1"><a href="#sapr3">10.7. Instalación de <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-advanced">10.8. Temas avanzados</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop"></a>Capítulo 6. Aplicaciones de escritorio</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christophe</span> <span class="surname">Juniet</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#desktop-synopsis">6.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">6.2. Navegadores</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">6.3. Productividad</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">6.4. Visores de documentos</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">6.5. Finanzas</a></span></dt><dt><span class="sect1"><a href="#desktop-summary">6.6. Resumen</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-synopsis"></a>6.1. Sinopsis</h2></div></div></div><p>FreeBSD puede ejecutar gran número de aplicaciones de
      escritorio, como navegadores y procesadores de texto.  La
      mayoría de ellas están disponibles como packages o
      se pueden compilar automáticamente desde la
      colección de ports.  Muchos usuarios nuevos esperan
      encontrar este tipo de aplicaciones en su escritorio.  Este
      capítulo mostrará cómo instalar de forma
      fácil algunas aplicaciones populares, bien como packages o
      desde la colección de ports.</p><p>Tenga en cuenta que cuando se instalan programas desde los
      ports se compilan desde el código fuente.  Esto puede
      tardar muchísimo tiempo, dependiendo de qué esté
      compilando y la potencia de proceso de su máquina.  Si
      compilar una o más aplicaciones le requiere una cantidad de
      tiempo desmesurada para sus necesidades recuerde que puede
      instalar la mayoría de programas de la Colección
      de Ports como packages precompilados.</p><p>FreeBSD tiene compatibilidad binaria con <span class="trademark">Linux</span>®, así que
      muchas aplicaciones originariamente desarrolladas para Linux
      existen también para su escritorio.  Le recomendamos
      encarecidamente que lea el <a class="xref" href="#linuxemu" title="Capítulo 10. Compatibilidad binaria con Linux">Capítulo 10, <em>Compatibilidad binaria con Linux</em></a> antes
      instalar aplicaciones Linux.  Muchos de los ports que usan la
      compatibilidad binaria de Linux empiezan por
      «linux-».  Recuérdelo cuando busque un port en
      particular, por ejemplo con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=whereis&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">whereis</span>(1)</span></a>.  En el siguiente
      texto se asume que ha habilitado usted la compatibilidad
      binaria de Linux antes de instalar aplicaciones de
      Linux.</p><p>Estas son las categorías que cubre este
      capítulo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Navegadores (como <span class="application">Mozilla</span>,
          <span class="application"><span class="trademark">Netscape</span>®</span>,
          <span class="application">Opera</span>,
          <span class="application">Firefox</span>,
	  <span class="application">Konqueror</span>)</p></li><li class="listitem"><p>Productividad (como
          <span class="application">KOffice</span>,
          <span class="application">AbiWord</span>,
          <span class="application">The GIMP</span>,
          <span class="application">OpenOffice.org</span>)</p></li><li class="listitem"><p>Visores de documentos (como
          <span class="application"><span class="trademark">Acrobat Reader</span>®</span>,
          <span class="application">gv</span>,
          <span class="application">Xpdf</span>,
          <span class="application">GQview</span>)</p></li><li class="listitem"><p>Finanzas (como
          <span class="application">GnuCash</span>,
          <span class="application">Gnumeric</span>,
          <span class="application">Abacus</span>)</p></li></ul></div><p>Antes de leer este capítulo, usted debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Saber como instalar software de terceros
          (<a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>).</p></li><li class="listitem"><p>Saber como instalar software de Linux
	  (<a class="xref" href="#linuxemu" title="Capítulo 10. Compatibilidad binaria con Linux">Capítulo 10, <em>Compatibilidad binaria con Linux</em></a>).</p></li></ul></div><p>Si quiere más información sobre cómo
      conseguir un entorno un entorno multimedia en FreeBSD consulte el
      <a class="xref" href="#multimedia" title="Capítulo 7. Multimedia">Capítulo 7, <em>Multimedia</em></a>.  Si quiere configurar y usar el
      correo electrónico consulte el
      <a class="xref" href="#mail" title="Capítulo 27. Correo Electrónico">Capítulo 27, <em>Correo Electrónico</em></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-browsers"></a>6.2. Navegadores</h2></div></div></div><p>FreeBSD no trae ningún navegador preinstalado, pero en
      el directorio <a class="link" href="http://www.FreeBSD.org/ports/www.html" target="_top">www</a> de la
      colección de ports tiene muchos navegadores listos para
      instalar.  Si no tiene tiempo para compilarlo todo (esto
      puede requerir muchísimo tiempo en algunos casos) muchos de
      ellos están disponibles como packages.</p><p><span class="application">KDE</span> y
      <span class="application">GNOME</span> ya proporcionan navegadores
      HTML.  Consulte la <a class="xref" href="#x11-wm" title="5.7. Entornos de escritorio">Sección 5.7, &#8220;Entornos de escritorio&#8221;</a> para más
      información sobre cómo configurar estos
      escritorios.</p><p>Si busca navegadores ligeros tiene en la
      colección de ports
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/dillo/pkg-descr">www/dillo</a>,
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/links/pkg-descr">www/links</a>, o
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/w3m/pkg-descr">www/w3m</a>.</p><p>Esta sección cubre estas aplicaciones:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nombre de aplicación</th><th>Recursos necesarios</th><th>Instalación desde los Ports</th><th>Dependencias importantes</th></tr></thead><tbody><tr><td><span class="application">Mozilla</span></td><td>pesado</td><td>pesado</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">Opera</span></td><td>ligero</td><td>ligero</td><td>Versiones para FreeBSD y Linux disponibles.  La
              versión de Linux depende de la compatibiliad
              binaria de Linux y de
	      <span class="application">linux-openmotif</span>.</td></tr><tr><td><span class="application">Firefox</span></td><td>medio</td><td>pesado</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">Konqueror</span></td><td>medio</td><td>pesado</td><td><span class="application">KDE</span> Librerís</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69180112"></a>6.2.1. Mozilla</h3></div></div></div><a id="idp69180752" class="indexterm"></a><p><span class="application">Mozilla</span> es una navegador
        moderno y estable que dispone de soporte completo en FreeBSD:
	dispone de un motor de presentación de HTML muy
	ajustado a los estándares, tiene cliente de correo
	electrónico, lector de noticias e incluso ofrece un
	editor de páginas HTML por si quiere crear
        páginas web.  Los usuarios de
        <span class="application"><span class="trademark">Netscape</span>®</span> encontrarán semejanzas
        con la suite <span class="application">Communicator</span>, dado que
        ambos navegadores comparten parte de la base de desarrollo.</p><p>En máquinas lentas, con una CPU de velocidad inferior a
        233MHz o con menos de 64MB de RAM,
        <span class="application">Mozilla</span> puede consumir demasiados
        recursos para poder utilizarse.  Puede usar el navegador
        <span class="application">Opera</span>, mucho más ligero,
        que se describe más adelante en este mismo
	capítulo.</p><p>Si no puede o no quiere compilar
        <span class="application">Mozilla</span> por algún motivo, el equipo
        de FreeBSD GNOME ya lo ha hecho por usted.  Instale el
        package desde la red del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r mozilla</code></strong></pre><p>Si no hay package disponible y tiene suficiente
        tiempo y espacio en el disco puede obtener el código
        de <span class="application">Mozilla</span>, compilarlo e instalarlo
        en su sistema.  Esto se hace con:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/mozilla</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>El port de <span class="application">Mozilla</span> se asegura
        de que se inicialice adecuadamente ejecutando la
        configuración del registro «chrome» con
        privilegios de <code class="systemitem">root</code>, aunque si quiere instalar
        algún añadido como «mouse gestures»
	(gestos del ratón) tendrá que ejecutar
        que correr <span class="application">Mozilla</span> como
        <code class="systemitem">root</code> para que se instale correctamente.</p><p>Una vez efectuada la instalación de
        <span class="application">Mozilla</span> no es necesario ser
        <code class="systemitem">root</code> por más tiempo.  Puede arrancar
        <span class="application">Mozilla</span> como navegador
        escribiendo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mozilla</code></strong></pre><p>Puede arrancarlo directamente como lector de correo y
        noticias del siguiente modo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mozilla -mail</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69207248"></a>6.2.2. Firefox</h3></div></div></div><a id="idp69207888" class="indexterm"></a><p><span class="application">Firefox</span> es un navegador de nueva
         generación basado en el código fuente de
	 <span class="application">Mozilla</span>.
         <span class="application">Mozilla</span> es una suite completa de
	 aplicaciones en la que encontrará un navegador, un
	 cliente de correo, un cliente de chat y muchas otras.
         <span class="application">Firefox</span> es solamente un navegador,
	 lo que hace que sea mucho más pequeño y
	 ligero.</p><p>Puede instalarlo como package del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r firefox</code></strong></pre><p>Si prefiere compilar el código fuente e instalarlo
         desde los ports puede hacer esto otro:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/firefox</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moz-java-plugin"></a>6.2.3. Firefox, Mozilla y el «plugin» <span class="trademark">Java</span>&#8482;</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En esta sección y en la siguiente asumiremos que
	  ya ha instalado <span class="application">Firefox</span> o
	  <span class="application">Mozilla</span>.</p></div><p>La FreeBSD Foundation disponde una licencia de Sun
        Microsystems que le permite distribuir binarios FreeBSD del
	Java Runtime Environment (<span class="trademark">JRE</span>&#8482;) y del
	Java Development Kit (<span class="trademark">JDK</span>&#8482;).  Puede descargar packages binarios
	para FreeBSD desde el <a class="link" href="http://www.freebsdfoundation.org/downloads/java.shtml" target="_top">sitio
	web</a>de la FreeBSD Foundation.</p><p>Para añadir soporte <span class="trademark">Java</span>&#8482; a
	<span class="application">Firefox</span> o
	<span class="application">Mozilla</span> tiene que instalar el port
	the <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/java/javavmwrapper/pkg-descr">java/javavmwrapper</a>.  Después
	descargue el package <span class="application">Diablo <span class="trademark">JRE</span>&#8482;</span>
	desde <code class="uri"><a class="uri" href="http://www.freebsdfoundation.org/downloads/java.shtml" target="_top">http://www.freebsdfoundation.org/downloads/java.shtml</a></code>
	e instálelo con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>.</p><p>Arranque su navegador, introduzca
	<code class="literal">about:plugins</code> en la barra de navegación
	y pulse <span class="keycap"><strong>Intro</strong></span>.  Verá una página
	con una lista de los «plugins» que tenga instalados; el
	«plugin» <span class="application"><span class="trademark">Java</span>&#8482;</span> debería
	ser uno de los que aparezcan.  Si no es así ejecute
	(como <code class="systemitem">root</code>) lo siguiente</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /usr/local/diablo-jre1.6.0/plugin/i386/ns7/libjavaplugin_oji.so \
  /usr/local/lib/browser_plugins/</code></strong></pre><p>y reinicie su navegador.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69230032"></a>6.2.4. Opera</h3></div></div></div><a id="idp69230672" class="indexterm"></a><p><span class="application">Opera</span> es un navegador muy
        rápido, completo y que cumple con los estándares.
        Hay dos versiones: la versión «nativa» de FreeBSD
        y la versión que se ejecuta bajo la emulación de
        Linux.  Para cada sistema operativo hay una versión
        gratuita que muestra publicidad y otra sin publicidad que se
        puede comprar en <a class="link" href="http://www.opera.com/" target="_top">la página web de Opera</a>.</p><p>Para navegar por la web con la versión para FreeBSD
        de <span class="application">Opera</span> tendrá que instalar
	el package:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r opera</code></strong></pre><p>Algunos sitios FTP no tienen todos los paquetes, pero
        puede instalarlo desde la Colección de
        Ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/opera</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Si quiere instalar la versión de Linux de
	<span class="application">Opera</span> ponga
	<code class="literal">linux-opera</code> en lugar de
	<code class="literal">opera</code> en los atnteriores ejemplos.  La
	versión de Linux es útil en situaciones donde se
	necesitan «plugins» de los que sólo hay
	versiones para Linux, como
	<span class="application">Adobe <span class="trademark">Acrobat Reader</span>®</span>.  En todos los
	demás aspectos las versiones de FreeBSD y Linux son iguales.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69238992"></a>6.2.5. Konqueror</h3></div></div></div><a id="idp69239632" class="indexterm"></a><p><span class="application">Konqueror</span> forma parte de
	<span class="application">KDE</span> pero también se puede
	instalar y usar independienmente de
	<span class="application">KDE</span> instalando
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/kdebase3/pkg-descr">x11/kdebase3</a>.
	<span class="application">Konqueror</span> es mucho más que un
	navegador, también es gestor de ficheros y visor
	multimedia.</p><p><span class="application">Konqueror</span> también trae
	un conjunto de «plugins», disponibles en <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/konq-plugins/pkg-descr">misc/konq-plugins</a>.</p><p><span class="application">Konqueror</span> también
	soporta <span class="application"><span class="trademark">Flash</span>&#8482;</span>, hay un tutorial
	en <code class="uri"><a class="uri" href="http://freebsd.kde.org/howto.php" target="_top">http://freebsd.kde.org/howto.php</a></code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-productivity"></a>6.3. Productividad</h2></div></div></div><p>Cuando se trata de productividad, normalmente los nuevos
       usuarios piensan en una buena suite ofimática o un procesador
       de textos amigable.  Mientras que algunos <a class="link" href="#x11-wm" title="5.7. Entornos de escritorio">entornos de escritorio</a> como
       <span class="application">KDE</span> ofrecen una suite
       ofimática propia, no hay una aplicación por
       defecto.  FreeBSD permite usar todo lo que se necesite sin importar
       qué entorno de escritorio use.</p><p>Esta sección cubre estas aplicaciones:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nombre de la aplicación</th><th>Recursos necesarios</th><th>Instalación desde los ports</th><th>Dependencias importantes</th></tr></thead><tbody><tr><td><span class="application">KOffice</span></td><td>ligero</td><td>pesado</td><td><span class="application">KDE</span></td></tr><tr><td><span class="application">AbiWord</span></td><td>ligero</td><td>ligero</td><td><span class="application">Gtk+</span> o <span class="application">GNOME</span></td></tr><tr><td><span class="application">The Gimp</span></td><td>ligero</td><td>pesado</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">OpenOffice.org</span></td><td>pesado</td><td>enorme</td><td><span class="application">GCC 3.1</span>, <span class="application"><span class="trademark">JDK</span>&#8482; 1.3</span>, <span class="application">Mozilla</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69279056"></a>6.3.1. KOffice</h3></div></div></div><a id="idp69279696" class="indexterm"></a><a id="idp69280592" class="indexterm"></a><p>La comunidad de KDE ha dotado su entorno de escritorio
        con una suite ofimática totalmente independiente de
        <span class="application">KDE</span>.  Incluye los 4 componentes
        estándar que se pueden encontrar en otras suites
        ofimáticas.  <span class="application">KWord</span> es el
        procesador de textos, <span class="application">KSpread</span> es la
        hoja de cálculo, <span class="application">KPresenter</span>
        se encarga de las presentaciones y
        <span class="application">Kontour</span> le permite dibujar
        documentos gráficos.</p><p>Antes de instalar el último
        <span class="application">KOffice</span> asegúrese de que tiene
        una versión actualizada de <span class="application">KDE</span>.</p><p>Para instalar <span class="application">KOffice</span> como un
        paquete ejecute la siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r koffice</code></strong></pre><p>Si el paquete no está disponible puede usar la
        colección de ports.  Por ejemplo, para instalar
        <span class="application">KOffice</span> para
        <span class="application">KDE3</span> haga lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/koffice-kde3</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69290192"></a>6.3.2. AbiWord</h3></div></div></div><a id="idp69290832" class="indexterm"></a><p><span class="application">AbiWord</span> es un procesador de
        textos libre con un aspecto parecido a
        <span class="application"><span class="trademark">Microsoft</span>® Word</span>.  Es útil
        para escribir documentos, cartas, informes, notas, etc.  Es
        muy rápido, tiene muchas opciones y es muy amigable.</p><p><span class="application">AbiWord</span> puede importar o
        exportar muchos formatos de fichero, incluyendo algunos
        propietarios como Microsoft <code class="filename">.doc</code>.</p><p><span class="application">AbiWord</span> está disponible como
        package.  Si quiere instalarlo haga lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r AbiWord2</code></strong></pre><p>Si el package no está disponible por el motivo que
        fuere puede instalarlo desde la colección de Ports.
        La colección de ports
        debería estar más actualizada:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/AbiWord2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69302224"></a>6.3.3. The GIMP</h3></div></div></div><a id="idp69302864" class="indexterm"></a><p><span class="application">GIMP</span> es un programa de
        manipulación de imágenes muy sofisticado
	que le permitirá también crearlas y
	retocarlas.  Puede usarlo como un programa de dibujo
	sencillo o como una sofisticada herramienta de retoque
	fotográfico.  Admite una gran cantidad de
        «plug-ins» y tiene opciones tan interesantes como
	una interfaz para «scripts».
        <span class="application">GIMP</span> puede leer y
        escribir un gran número de formatos de fichero.
        Soporta escáners y tabletas gráficas.</p><p>Instale el package mediante la siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gimp</code></strong></pre><p>Si su servidor FTP no tiene este package puede usar la
        colección de ports.  El directorio
        <a class="link" href="http://www.FreeBSD.org/ports/graphics.html" target="_top">graphics</a>
	de la colección de ports también contiene
        <span class="application">The Gimp Manual</span>.  Si quiere instalarlo
        haga lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gimp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gimp-manual-pdf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El directorio
          <a class="link" href="http://www.FreeBSD.org/ports/graphics.html" target="_top">graphics</a>
          de la colección de ports tiene la versión de
          desarrollo de <span class="application">GIMP</span> en
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gimp-devel/pkg-descr">graphics/gimp-devel</a>.
          Hay una versión en HTML de
          <span class="application">The Gimp Manual</span> en
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gimp-manual-html/pkg-descr">graphics/gimp-manual-html</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69317840"></a>6.3.4. OpenOffice.org</h3></div></div></div><a id="idp69318480" class="indexterm"></a><a id="idp69319376" class="indexterm"></a><p><span class="application">OpenOffice.org</span> incluye todas
        las aplicaciónes esenciales en una completa suite
        ofimática: un procesador de textos, una hoja de
        cálculo, un gestor de presentaciones y un programa de
        dibujo.  Su interfaz de usuario es muy parecida a otras suites
        ofimáticas y puede importar y exportar diversos
        formatos muy extendidos.  Está disponible en diversos
        idiomas; el proceso de internacionalización incluye
	interfaces, correctores
        ortográficos y diccionarios.</p><p>El procesador de textos de
        <span class="application">OpenOffice.org</span> usa un fichero XML
        nativo para aumentar la portabilidad y la eficiencia.  El
        programa de hojas de cálculo tiene un lenguaje de
        macros y puede usarse desde bases de datos
        externas.  <span class="application">OpenOffice.org</span> es
        estable y hay versiones nativas para <span class="trademark">Windows</span>®,
        <span class="trademark">Solaris</span>&#8482;, Linux, FreeBSD, y <span class="trademark">Mac OS</span>® X.  Tiene más
        información sobre
        <span class="application">OpenOffice.org</span> en
	<a class="link" href="http://www.openoffice.org/" target="_top">la página web de
        OpenOffice</a>.  Si quiere información específica
        para FreeBSD, o si quiere bajar directamente los packages
        use la página web de <a class="link" href="http://porting.openoffice.org/freebsd/" target="_top">FreeBSD OpenOffice
	Porting Team</a>.</p><p>Para instalar <span class="application">OpenOffice.org</span>
        ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r openoffice</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si usa una versión -RELEASE de FreeBSD todo lo antedicho
	  funcionará.  Si usa cualquier otra versión
	  visite el sitio web del FreeBSD
	  <span class="application">OpenOffice.org</span> Porting Team, desde
	  el cual podrá descargar e instalar el package
	  más adecuado e instalarlo mediante
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>.  En este sitio web encontrará tanto
	  una versión current como la de desarrollo.</p></div><p>Una vez instalado el package escriba la siguiente orden para
        ejecutar
        <span class="application">OpenOffice.org</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>openoffice.org</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En el primer arranque se le harán diversas preguntas
	  se creará un directorio
	  <code class="filename">.openoffice.org2</code> en su
	  «home».</p></div><p>Si no hay packages de
        <span class="application">OpenOffice.org</span> disponibles siempre
	tiene la opción de compilar el port.  Tenga muy en cuenta
	que necesitará gran cantidad de espacio en disco y que
	este port necesita una cantidad de tiempo monstruosa para
	efectuar la compilación.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/openoffice.org-2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si quiere compilar una de las muchas versiones que existen en
	  idiomas distintos del inglés sustituya la orden anterior
	  por la que se muestra a continuación:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make LOCALIZED_LANG=su_idioma install clean</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Sustituya
	  <em class="replaceable"><code>su_idioma</code></em> por el código ISO
	  del idioma que quiera.  Tiene una lista de códigos de
	  idioma disponibles dentro del directorio del port en
	  <code class="filename">files/Makefile.localized</code>.</p></div><p>Hecho esto puede ejecutar
	<span class="application">OpenOffice.org</span> con la orden:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>openoffice.org</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-viewers"></a>6.4. Visores de documentos</h2></div></div></div><p>Desde la aparición de <span class="trademark">UNIX</span>® han ido apareciendo formatos
      de documento de lo más diverso, alguno de los cuales se ha
      hecho muy popular.  Los visores de documentos estándar
      que requieren no tienen por qué estar en el sistema base.  En
      esta sección veremos cómo instalar estos visores.</p><p>Esta sección cubre las siguientes aplicaciones:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nombre de la aplicación</th><th>Recursos necesarios</th><th>Instalación desde los ports</th><th>Dependencias importantes</th></tr></thead><tbody><tr><td><span class="application"><span class="trademark">Acrobat Reader</span>®</span></td><td>ligero</td><td>ligero</td><td>Compatibilidad binaria de Linux</td></tr><tr><td><span class="application">gv</span></td><td>ligero</td><td>ligero</td><td><span class="application">Xaw3d</span></td></tr><tr><td><span class="application">Xpdf</span></td><td>ligero</td><td>ligero</td><td><span class="application">FreeType</span></td></tr><tr><td><span class="application">GQview</span></td><td>ligero</td><td>ligero</td><td><span class="application">Gtk+</span> o <span class="application">GNOME</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69366736"></a>6.4.1. <span class="trademark">Acrobat Reader</span>®</h3></div></div></div><a id="idp69367632" class="indexterm"></a><a id="idp69368528" class="indexterm"></a><p>Muchos documentos se distribuyen en formato
        PDF, siglas de «Portable Document Format».
        Uno de los visores recomendados para este tipo de ficheros es
        <span class="application"><span class="trademark">Acrobat Reader</span>®</span>, un producto de Adobe
        para Linux.  Dado que FreeBSD puede ejecutar binarios de Linux
        también existe para FreeBSD.</p><p>Para instalar <span class="application"><span class="trademark">Acrobat Reader</span>®
        7</span> desde la Colección de Ports ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/print/acroread7</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>No hay package debido a las restricciones que impone la licencia
        del software.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69374160"></a>6.4.2. gv</h3></div></div></div><a id="idp69374800" class="indexterm"></a><a id="idp69375696" class="indexterm"></a><a id="idp69376848" class="indexterm"></a><p><span class="application">gv</span> es un visor de <span class="trademark">PostScript</span>® y
        PDF.  Tiene su origen en <span class="application">ghostview</span> pero
        tiene un aspecto bastante mejorado gracias a la librería
        <span class="application">Xaw3d</span>.  Es rápido y tiene una
        interfaz limpia.  <span class="application">gv</span> tiene muchas
        opciónes como orientación, tamaño del
        papel, escalado o antialias.  Casi todas las operaciones se
        pueden realizar desde el teclado o desde el ratón.</p><p>Para instalar <span class="application">gv</span> como package
        ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gv</code></strong></pre><p>Si no puede obtener el package puede usar la
        colección de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/print/gv</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69388368"></a>6.4.3. Xpdf</h3></div></div></div><a id="idp69389008" class="indexterm"></a><a id="idp69389904" class="indexterm"></a><p>Si quiere un visor de PDF pequeño,
        <span class="application">Xpdf</span> es un visor ligero y
        eficiente.  Requiere muy pocos recursos y es muy estable.  Usa
        los tipos estándar de X y no depende de
        <span class="application"><span class="trademark">Motif</span>®</span> ni de ningún otro
	«toolkit» de X.</p><p>Para instalar el package de
        <span class="application">Xpdf</span> use la siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xpdf</code></strong></pre><p>Si el paquete no está disponible o prefiere usar la
        colección de ports ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/xpdf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Una vez que la instalación haya concluido puede
        lanzar <span class="application">Xpdf</span>;  use el botón
        derecho del ratón para activar el menú.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69405392"></a>6.4.4. GQview</h3></div></div></div><a id="idp69406032" class="indexterm"></a><p><span class="application">GQview</span> es un visor de
        imágenes.  Puede ver un fichero con un click, lanzar un
        editor externo, obtener imágenes de previsualización y
        muchas cosas más.  También tiene un modo de
	presentación y admite algunas opciones básicas de
        manipulación de ficheros.  Puede gestionar colecciones
        de imágenes y encontrar ficheros duplicados con
        facilidad.  <span class="application">GQview</span>
        puede mostrar las imágenes a pantalla completa
        y está preparado para la internacionalización.</p><p>Si quiere instalar el paquete de
        <span class="application">GQview</span> ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gqview</code></strong></pre><p>Si el paquete no está disponible o prefiere usar la
        colección de ports ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gqview</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-finance"></a>6.5. Finanzas</h2></div></div></div><p>Si por algun motivo quisiera gestionar sus finanzas
      personales en su escritorio FreeBSD hay algunas aplicaciones
      potentes y sencillas de utilizar que puede instalar.  Algunas
      de ellas son compatibles con formatos muy extendidos
      como documentos de <span class="application">Quicken</span> o
      <span class="application">Excel</span>.</p><p>Esta sección cubre las siguientes aplicaciones:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nombre de aplicación</th><th>Recursos necesarios</th><th>Instalación desde los ports</th><th>Dependencias importantes</th></tr></thead><tbody><tr><td><span class="application">GnuCash</span></td><td>ligero</td><td>pesado</td><td><span class="application">GNOME</span></td></tr><tr><td><span class="application">Gnumeric</span></td><td>ligero</td><td>pesado</td><td><span class="application">GNOME</span></td></tr><tr><td><span class="application">Abacus</span></td><td>ligero</td><td>pesado</td><td><span class="application">Tcl/Tk</span></td></tr><tr><td><span class="application">KMyMoney</span></td><td>ligero</td><td>pesado</td><td><span class="application">KDE</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69439440"></a>6.5.1. GnuCash</h3></div></div></div><a id="idp69440080" class="indexterm"></a><p><span class="application">GnuCash</span> es parte del afán
        de <span class="application">GNOME</span> por ofrecer aplicaciones
        de uso sencillo pero a la vez potentes a los usuarios.  Con
        <span class="application">GnuCash</span>, puede gestionar sus
        ingresos y sus gastos, sus cuentas bancarias o sus acciones.
        Tiene una interfaz intuitiva pero muy profesional.</p><p><span class="application">GnuCash</span> dispone de un registro
        elegante, un sistema jerárquico de cuentas, muchos
        atajos de teclado y métodos de autocompletado.  Puede
        dividir una transacción en varias partes más
        detalladas.  <span class="application">GnuCash</span> puede importar
        y mezclar ficheros QIF de <span class="application">Quicken</span>.
        También admite muchos formatos internacionales de fecha
        y moneda.</p><p>Para instalar <span class="application">GnuCash</span> en su
        sistema ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnucash</code></strong></pre><p>Si el paquete no está disponible puede usar la
        colección de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/finance/gnucash</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69447760"></a>6.5.2. Gnumeric</h3></div></div></div><a id="idp69448400" class="indexterm"></a><a id="idp69449296" class="indexterm"></a><p><span class="application">Gnumeric</span> es una hoja de
        cálculo que forma parte del entorno de escritorio
        <span class="application">GNOME</span>.  Implementa una
        «predicción» automática de la entrada
        del usuario de acuerdo con el formato de celda y un sistema de
        completado automático para múltiples secuencias.  Puede
        importar ficheros de un gran número de formatos muy
        extendidos, como <span class="application">Excel</span>, <span class="application">Lotus
        1-2-3</span> o <span class="application">Quattro Pro</span>.
        <span class="application">Gnumeric</span> soporta gráficas
        mediante el programa de gráficas <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/math/guppi/pkg-descr">math/guppi</a>.  Tiene un gran
        n´mero de funciones internas y permite todos los
        formatos normales de celda como número, moneda, fecha,
        hora y muchos más.</p><p>Para instalar <span class="application">Gnumeric</span> como
        package ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnumeric</code></strong></pre><p>Si el package no está disponible puede usar la
        colección de ports del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/math/gnumeric</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69461712"></a>6.5.3. Abacus</h3></div></div></div><a id="idp69462352" class="indexterm"></a><a id="idp69463248" class="indexterm"></a><p><span class="application">Abacus</span> es una hoja de
        cálculo pequeña y fácil de usar.  Tiene
        muchas funciones útiles en varios ámbitos como la
        estadística, las finanzas y las matemáticas.  Puede
        importar y exportar ficheros
        con formato <span class="application">Excel</span>.
        <span class="application">Abacus</span> puede generar ficheros
        <span class="trademark">PostScript</span>®.</p><p>Para instalar <span class="application">Abacus</span> como package
        ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r abacus</code></strong></pre><p>Si no hay package al alcance puede usar la
        colección de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/deskutils/abacus</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-summary"></a>6.6. Resumen</h2></div></div></div><p>FreeBSD está muy extendido en ISP por su alto
      rendimiento y estabilidad, pero también se puede usar a diario
      como escritorio.  Hay miles de aplicaciones disponibles como
      <a class="link" href="http://www.FreeBSD.org/where.html" target="_top">packages</a> o
      <a class="link" href="http://www.FreeBSD.org/ports/index.html" target="_top">ports</a>
      con las que puede crear un escritorio que cubra todas sus
      necesidades.</p><p>Aqui hay un resumen de todas las aplicaciones cubiertas en
      este cápitulo:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nombre De La Aplicación</th><th>Nombre Del Paquete</th><th>Nombre Del Port</th></tr></thead><tbody><tr><td><span class="application">Mozilla</span></td><td><code class="literal">mozilla</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a></td></tr><tr><td><span class="application">Opera</span></td><td><code class="literal">opera</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/opera/pkg-descr">www/opera</a></td></tr><tr><td><span class="application">Firefox</span></td><td><code class="literal">firefox</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox/pkg-descr">www/firefox</a></td></tr><tr><td><span class="application">KOffice</span></td><td><code class="literal">koffice-kde3</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/koffice-kde3/pkg-descr">editors/koffice-kde3</a></td></tr><tr><td><span class="application">AbiWord</span></td><td><code class="literal">AbiWord2</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/AbiWord2/pkg-descr">editors/AbiWord2</a></td></tr><tr><td><span class="application">GIMP</span></td><td><code class="literal">gimp</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gimp/pkg-descr">graphics/gimp</a></td></tr><tr><td><span class="application">OpenOffice.org</span></td><td><code class="literal">openoffice</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/openoffice-1.1/pkg-descr">editors/openoffice-1.1</a></td></tr><tr><td><span class="application"><span class="trademark">Acrobat Reader</span>®</span></td><td><code class="literal">acroread</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/acroread7/pkg-descr">print/acroread7</a></td></tr><tr><td><span class="application">gv</span></td><td><code class="literal">gv</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/gv/pkg-descr">print/gv</a></td></tr><tr><td><span class="application">Xpdf</span></td><td><code class="literal">xpdf</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xpdf/pkg-descr">graphics/xpdf</a></td></tr><tr><td><span class="application">GQview</span></td><td><code class="literal">gqview</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gqview/pkg-descr">graphics/gqview</a></td></tr><tr><td><span class="application">GnuCash</span></td><td><code class="literal">gnucash</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/finance/gnucash/pkg-descr">finance/gnucash</a></td></tr><tr><td><span class="application">Gnumeric</span></td><td><code class="literal">gnumeric</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/math/gnumeric/pkg-descr">math/gnumeric</a></td></tr><tr><td><span class="application">Abacus</span></td><td><code class="literal">abacus</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/deskutils/abacus/pkg-descr">deskutils/abacus</a></td></tr><tr><td><span class="application">KMyMoney</span></td><td><code class="literal">kmymoney2</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/finance/kmymoney2/pkg-descr">finance/kmymoney2</a></td></tr></tbody></table></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="multimedia"></a>Capítulo 7. Multimedia</h2></div><div><span class="authorgroup">Editado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ross</span> <span class="surname">Lippert</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp69521744">7.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#sound-setup">7.2. Configuración de la tarjeta de sonido</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">7.3. Sonido MP3</a></span></dt><dt><span class="sect1"><a href="#video-playback">7.4. Reproducción de vídeo</a></span></dt><dt><span class="sect1"><a href="#tvcard">7.5. Configuración de tarjetas de TV</a></span></dt><dt><span class="sect1"><a href="#scanners">7.6. Escáneres de imágenes</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp69521744"></a>7.1. Sinopsis</h2></div></div></div><p>FreeBSD admite una gran variedad de tarjetas de sonido,
      lo que permite disfrutar de sonido de alta fidelidad en su
      sistema. Ésto incluye la posibilidad de grabar y reproducir
      ficheros de audio tanto en los formatos MPEG Audio Layer 3
      (MP3), WAV y Ogg Vorbis, así como muchos otros.
      La Colección de Ports de FreeBSD contiene también
      aplicaciones que le permitirán editar audio previamente grabado,
      añadir efectos y controlar dispositivos MIDI.</p><p>Tras unas cuantas pruebas podrá reproducir ficheros de
      video y DVD en FreeBSD.  La cantidad de aplicaciones disponibles
      para codificar, convertir y reproducir los diversos soportes de
      video es más limitada que lo que hay disponible para
      el sonido.  Por ejemplo, en el momento de escribir este texto
      no hay en la Colección de Ports de FreeBSD una buena
      aplicación que permita pasar datos de un formato a
      otro, el equivalente a lo que hay en el campo del sonido con
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sox/pkg-descr">audio/sox</a>.  A pesar de eso
      la situación en este área está cambiando
      rápidamente.</p><p>Este capítulo muestra los pasos necesarios para configurar
      una tarjeta de sonido.  La configuración e instalación
      de X11 (<a class="xref" href="#x11" title="Capítulo 5. El sistema X Window">Capítulo 5, <em>El sistema X Window</em></a>) habrá solucionado ya todos
      los problemas que hubiera podido darle su tarjeta gráfica,
      aunque quizás haya algún pequeño detalle que
      añadir para mejorar la reproducción.</p><p>Tras leer éste capítulo sabrá usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cómo configurar su sistema de modo que su tarjeta
        de sonido sea reconocida por el mismo.</p></li><li class="listitem"><p>Confirmar el funcionamiento de su tarjeta usando
        herramientas de muestreo.</p></li><li class="listitem"><p>Cómo enfrentarse a problemas de
        configuración de sonido.</p></li><li class="listitem"><p>Cómo reproducir y crear ficheros
        MP3 y otros.</p></li><li class="listitem"><p>Cómo gestiona el video el servidor X.</p></li><li class="listitem"><p>Identificar unos cuantos ports para reproducir y
        codificar video que le darán muy buenos resultados.</p></li><li class="listitem"><p>Cómo reproducir DVD y ficheros
        <code class="filename">.mpg</code> y
	<code class="filename">.avi</code>.</p></li><li class="listitem"><p>Cómo convertir CD y DVD en ficheros
        de datos.</p></li><li class="listitem"><p>Cómo configurar una tarjeta de TV.</p></li><li class="listitem"><p>Cómo configurar un escáner de
        imágenes.</p></li></ul></div><p>Antes de leer éste capítulo debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Saber configurar e instalar un nuevo kernel (<a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>).</p></li></ul></div><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Si intenta montar un cd con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> provocará
        (como mínimo) un error en el sistema, pero puede
        llegar a provocar un <span class="emphasis"><em>kernel
        panic</em></span>.  Dichos soportes tienen codificaciones
	especiales sustancialmente diferentes de los típicos
	sistemas de ficheros ISO.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-setup"></a>7.2. Configuración de la tarjeta de sonido</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Moses</span> <span class="surname">Moore</span></span>. </span></div><div><span class="authorgroup">Ampliado para FreeBSD 5.X por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-device"></a>7.2.1. Configuración del sistema </h3></div></div></div><a id="idp69564368" class="indexterm"></a><a id="idp69564880" class="indexterm"></a><a id="idp69565392" class="indexterm"></a><p>Antes de nada tendrá que saber a ciencia cierta el
      modelo de tarjeta que tiene, qué chip utiliza y si es PCI
      o ISA.  FreeBSD admite una amplia variedad de tarjetas, tanto PCI como
      ISA.  Consulte la lista de dispositivos de sonido que puede usar
      en FreeBSD en las <a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">Hardware Notes</a>.  Las
      «Hardware Notes» le dirán también
      qué controlador es el que hace funcionar su tarjeta.</p><a id="idp69566800" class="indexterm"></a><p>Para poder usar su dispositivo de sonido en FreeBSD tiene que
      cargar el controlador de dispositivo adecuado, cosa que puede
      hacerse de dos maneras.  La forma más fácil es
      cargar el módulo del kernel correspondiente a su tarjeta
      de sonido mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.  Puede hacerlo en su shell
      con la siguiente orden</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_emu10k1</code></strong></pre><p>o añadiendo la línea apropiada al fichero
      <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">snd_emu10k1_load="YES"</pre><p>Ambos ejemplos son para una tarjeta de sonido
      Creative <span class="trademark">SoundBlaster</span>® Live!.  Encontrará una lista de
      módulos de sonido que puede cargar del mismo modo en
      <code class="filename">/boot/defaults/loader.conf</code>.  Si no está
      del todo seguro sobre el controlador que debe usar pruebe con el
      módulo <code class="filename">snd_driver</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_driver</code></strong></pre><p>Se trata de un «metacontrolador» que carga en
      memoria todos los controladores más habituales.  De este modo
      acelerará notablemente el proceso de detectar cuál es
      el controlador perfecto para su hardware.  También
      puede cargar todos los controladores de sonido desde
      <code class="filename">/boot/loader.conf</code>.</p><p>Si quiere saber qué controlador se corresponde
      con su tarjeta de sonido una vez cargado el «metadriver»
      <code class="filename">snd_driver</code> debe comprobar el contenido de
      <code class="filename">/dev/sndstat</code> mediante la orden
      <code class="command">cat /dev/sndstat</code>.</p><p>El segundo método es compilar de forma estática
      el soporte para su tarjeta de sonido dentro de un kernel
      personalizado.  En la siguiente sección encontrará
      la información necesaria para añadir a su kernel
      el soporte que necesita su hardware.  Para más información
      sobre la compilación de un kernel consulte el <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69577040"></a>7.2.1.1. Configuración de un kernel personalizado con soporte de sonido</h4></div></div></div><p>Lo primero que hay que hacer es añadir el
        controlador del «framework» de sonido
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a> al kernel;  tendrá que añadir
	la siguiente línea a su fichero de configuración
	del kernel:</p><pre class="programlisting">device sound</pre><p>Una vez hecho esto tiene que añadir el soporte
        para su tarjeta de sonido.  Evidentemente tendrá que
	saber exactamente qué controlador es el que hace
	funcionar su tarjeta.  Consulte la lista de dispositivos de
	sonido soportados que encontrará en las <a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">Hardware Notes</a> y elija
	el controlador perfecto para su tarjeta.  Por ejemplo una
	una tarjeta de sonido Creative <span class="trademark">SoundBlaster</span>® Live! usará
	el controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_emu10k1&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_emu10k1</span>(4)</span></a>.  Siguiendo con el ejemplo,
	si queremos añadir soporte para esta tarjeta agregaremos
	lo siguiente:</p><pre class="programlisting">device snd_emu10k1</pre><p>Por favor, lea la página de manual del controlador
        si tiene dudas con la sintaxis.  La sintaxis específica
	para la configuración en el kernel de cada tarjeta de
	sonido soportada existente puede encontrarse también
	en <code class="filename">/usr/src/sys/conf/NOTES</code>.</p><p>Las tarjetas ISA no PnP pueden requerir que se le
        facilite al kernel la información de la
	configuración de la tarjeta (IRQ, puerto de E/S, etc).  Esto
	se hace modificando el fichero
	<code class="filename">/boot/device.hints</code>.  Durante el proceso de
	arranque <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> leerá este fichero y le
	pasará los parámetros al kernel.  Veamos un ejemplo:
	una vieja tarjeta Creative <span class="trademark">SoundBlaster</span>® 16 ISA no PnP
	utilizará el controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> junto con
	<code class="literal">snd_sb16</code>.  En el caso de esta tarjeta
	habrá que añadir las siguientes líneas
	al fichero de configuración del kernel</p><pre class="programlisting">device snd_sbc
device snd_sb16</pre><p>y añadir lo siguiente a
	<code class="filename">/boot/device.hints</code>:</p><pre class="programlisting">hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</pre><p>La tarjeta del ejemplo usa el puerto de E/S <code class="literal">0x220</code>
	I/O port y la IRQ <code class="literal">5</code>.</p><p>La sintaxis a utilizar en
	<code class="filename">/boot/device.hints</code> se explica en
	la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a> y en la del
	controlador en cuestión.</p><p>En el ejemplo se muestran los parámetros por
        omisión.  En ciertos casos habrá que usar
	otra IRQ o usar otros parámetros para hacer funcionar
	la tarjeta de sonido.  Consulte la página de manual de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> para más información sobre esta
	tarjeta.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-testing"></a>7.2.2. Cómo probar su tarjeta de sonido</h3></div></div></div><p>Una vez que haya reiniciado con su kernel personalizado, o
      tras cargar el mólo del kernel necesario la tarjeta de
      sonido aparecerá en el búfer de mensajes del sistema
      (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>); deberí ser algo muy parecido a esto:</p><pre class="screen">pcm0: &lt;Intel ICH3 (82801CA)&gt; port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: &lt;Cirrus Logic CS4205 AC97 Codec&gt;</pre><p>Puede comprobar el estado de la tarjeta de sonido en
      el fichero <code class="filename">/dev/sndstat</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /dev/sndstat</code></strong>
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: &lt;Intel ICH3 (82801CA)&gt; at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)</pre><p>El resultado en su sistema seguramente será distinto.  Si
      no aparecen dispositivos <code class="filename">pcm</code> revise todo el
      proceso a ver dónde está el error.  Revise su fichero
      de configuración del kernel nuevamente y compruebe que
      eligió el controlador de dispositivo adecuado.  Tiene una
      lista de problemas habituales en la <a class="xref" href="#troubleshooting" title="7.2.2.1. Problemas habituales">Sección 7.2.2.1, &#8220;Problemas habituales&#8221;</a>.</p><p>Si todo ha ido bien ya tiene una tarjeta de sonido funcionando
      en su sistema.  Si los pins de salida de sonido de su CD-ROM o DVD-ROM
      están colocados correctamente puede poner un CD en la unidad
      y reproducirlo con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdcontrol</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdcontrol -f /dev/acd0 play 1</code></strong></pre><p>Hay muchas aplicaciones como <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/workman/pkg-descr">audio/workman</a> que le ofrecerán
      un interfaz más amigable.  Si quiere escuchar ficheros MP3
      puede instalar, por ejemplo,
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a>.</p><p>Hay otra via aún más rápida de probar su
      tarjeta de sonido.  Envíe datos a
      to <code class="filename">/dev/dsp</code> del siguiente modo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat fichero &gt; /dev/dsp</code></strong></pre><p>donde <code class="filename">fichero</code>
      puede ser cualquier fichero.  Esta orden producirá ruido,
      lo que confirmará que la tarjeta de sonido funciona.</p><p>Puede manejar los niveles de la tarjeta de sonido con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>.
      Tiene todos los detalles en la página de manual de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="troubleshooting"></a>7.2.2.1. Problemas habituales</h4></div></div></div><a id="idp69617744" class="indexterm"></a><a id="idp69618256" class="indexterm"></a><a id="idp69618768" class="indexterm"></a><a id="idp69619280" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Error</th><th>Solution</th></tr></thead><tbody><tr><td><span class="errorname">sb_dspwr(XX) timed out</span></td><td><p>El puerto de E/S no ha sido configurado correctamente.</p></td></tr><tr><td><span class="errorname">bad irq XX</span></td><td><p>No ha elegido correctamente la IRQ.  Asegúrese
  	        de que la IRQ que ha elegido y la IRQ del sonido son la misma.</p></td></tr><tr><td><span class="errorname">xxx: gus pcm not attached, out of memory</span></td><td><p>No queda memoria suficiente en el sistema para poder
	        usar el dispositivo.</p></td></tr><tr><td><span class="errorname">xxx: can't open /dev/dsp!</span></td><td><p>Compruebe si hay otra aplicación utilizando
	        (y por tanto ocupando) el dispositivo.  Escriba
	        <code class="command">fstat | grep dsp</code>.  Los sospechosos
                habituales son <span class="application">esound</span> y
		el sistema de sonido de <span class="application">KDE</span>.
                </p></td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-multiple-sources"></a>7.2.3. Cómo utilizar múltiples fuentes de sonido</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Munish</span> <span class="surname">Chopra</span></span>. </span></div></div></div><p>Disponer de múltiples fuentes de sonido puede ser muy
      útil, por ejemplo cuando
      <span class="application">esound</span> o
      <span class="application">artsd</span> no permiten compartir el dispositivo
      de sonido con otra aplicación.</p><p>FreeBSD permite hacerlo gracias a los <span class="emphasis"><em>Virtual Sound
      Channels</em></span> (<code class="literal">canales virtuales de sonido</code>),
      que se activan mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  Los canales virtuales
      permiten multiplexar la reproducción de sonido de su tarjeta
      mezclando el sonido en el kernel.</p><p>El número de canales virtuales se configura utilizando
      dos sysctl; como <code class="systemitem">root</code> escriba lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.pcm0.vchans=4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.maxautovchans=4</code></strong></pre><p>En el ejemplo anterior se han creado cuatro canales virtuales, una
      cantidad muy razonable para el uso normal.
      <code class="varname">hw.snd.pcm0.vchans</code> es el número de canales
      virtuales de que dispone <code class="filename">pcm0</code>; puede configurarlo
      en cuanto el dispositivo sea reconocido por el sistema.
      <code class="literal">hw.snd.maxautovchans</code> es el número de canales
      virtuales que se le asignan a un nuevo dispositivo de audio cuando se
      conecta al sistema mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.  Puesto que el
      módulo <code class="filename">pcm</code> puede cargarse independientemente
      de los controladores de hardware
      <code class="varname">hw.snd.maxautovchans</code> puede almacenar cuántos
      canales virtuales tienen asignados los dispositivos que se vayan
      conectando al sistema.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">No es posible modificar el número de canales virtuales
        de un dispositivo que esté en marcha.  Cierre antes todos
	los programas que estén utilizando el dispositivo, como
	reproductores de música o dæmons de sonido.</p></div><p>Si no usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> tendrá que configurar sus
      aplicaciones para que apunten a
      <code class="filename">/dev/dsp0</code>.<em class="replaceable"><code>x</code></em>,
      donde <em class="replaceable"><code>x</code></em> es un número entre 0 y 3 si
      <code class="varname">hw.snd.pcm.0.vchans</code> tiene un valor de 4 como en el
      ejemplo anterior.  Si se estuviera usando
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> en el ejemplo anterior cualquier programa que pidiera
      <code class="filename">/dev/dsp0</code> sería atendido de
      forma totalmente transparente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69659344"></a>7.2.4. Asignación a los canales de mezcla de valores por omisión</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Josef</span> <span class="surname">El-Rayes</span></span>. </span></div></div></div><p>Los valores por defecto de los distintos canales de mezcla
      están fijados en el código del controlador
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a>.  Hay distintas aplicaciones y dæmons
      que le permitirán asignar valores al mezclador y que
      permanezcan entre uso y uso, pero no es una solución
      demasiado limpia.  Puede asignar valores por omisión a
      las mezclas a nivel de controlador definiendo los valores
      apropiados en <code class="filename">/boot/device.hints</code>.  Veamos
      un ejemplo:</p><pre class="programlisting">hint.pcm.0.vol="50"</pre><p>Esto asignará al canal de volumen un valor por
      omisión de 50 al cargar el módulo
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-mp3"></a>7.3. Sonido MP3</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><p>El formato MP3 (MPEG Layer 3 Audio) llega casi al nivel de
      calidad del CD, por lo que no hay motivo por el deba faltar en
      su escritorio FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-players"></a>7.3.1. Reproductores de MP3</h3></div></div></div><p>El reproductor de MP3 para X11 más extendido
	es, de lejos, <span class="application">XMMS</span> (X Multimedia System).
	Puede usar en él «skins»de
	<span class="application">Winamp</span> puesto que el interfaz
	gráfico de <span class="application">XMMS</span> es casi
	idéntico al de Nullsoft
	<span class="application">Winamp</span>.
	<span class="application">XMMS</span> incluye también soporte nativo
	para «plug-ins».</p><p>Puede instalar <span class="application">XMMS</span> como port
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xmms/pkg-descr">multimedia/xmms</a>) o como package.</p><p>La interfaz de <span class="application">XMMS</span> es intuitiva e
	incluye una lista de reproducción, un ecualizador
	gráfico y muchas otras cosas.  Si está acostumbrado
	a <span class="application">Winamp</span>
	<span class="application">XMMS</span> le será muy
	fácil de usar.</p><p>El port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a>
        es un reproductor MP3 que se usa desde la shell.</p><p>Puede especificarle desde la misma línea de órdenes
        a <span class="application">mpg123</span> el dispositivo de
        sonido que debe usar y el fichero MP3 que debe reproducir.  Veamos
	un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpg123 -a /dev/dsp1.0 ASaber-GrandesÉxitos.mp3</code></strong>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!





Playing MPEG stream from ASaber-GrandesÉxitos.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo
</pre><p>Sustituya <code class="filename">/dev/dsp1.0</code>
	por el dispositivo <code class="filename">dsp</code> que haya en su
	sistema.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rip-cd"></a>7.3.2. Extracción de pistas de sonido de un CD</h3></div></div></div><p>Antes de convirtir una pista o todo un CD a MP3 la información
        sonido debe volcarse al disco duro.  Esto se hace convirtiendo
	los datos «raw CDDA» (CD Digital Audio) a ficheros
	WAV.</p><p>La herramienta <code class="command">cdda2wav</code>, que forma parte
	del port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>,
	permite la extracción de información de sonido en
	CD así como la información asociada a él.</p><p>Con el CD en la unidad la siguiente orden
	(como <code class="systemitem">root</code>) un CD entero en ficheros WAV
	individuales, uno por pista:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D 0,1,0 -B</code></strong></pre><p><span class="application">cdda2wav</span> soporta unidades CDROM
	ATAPI (IDE).  En el caso de unidades IDE  especifique
	el número de dispositivo en el lugar correspondiente al
	núro de unidad SCSI.  Por ejemplo, para extraer la pista
	7 desde una unidad IDE:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D /dev/acd0 -t 7</code></strong></pre><p>La opción
        <code class="option">-D <em class="replaceable"><code>0,1,0</code></em></code>
	indica el dispositivo SCSI <code class="filename">0,1,0</code>,
	que corresponde con la salida de <code class="command">cdrecord
	-scanbus</code>.</p><p>Para extraer pistas de forma selectiva use la opción
	<code class="option">-t</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D 0,1,0 -t 7</code></strong></pre><p>Esta opción extrae la séptima pista de un CDROM
        de sonido.  Si quiere extraer un rango de pistas, por ejemplo las
	pistas de la uno a la siete, declare el rango del siguiente
	modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D 0,1,0 -t 1+7</code></strong></pre><p>La herramienta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> le permite también extraer
        pistas de sonido desde unidades ATAPI; consulte la <a class="xref" href="#duplicating-audiocds" title="18.6.5. Copiar CD de audio">Sección 18.6.5, &#8220;Copiar CD de audio&#8221;</a> para más
	información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-encoding"></a>7.3.3. Codificación de MP3</h3></div></div></div><p>Hoy por hoy el codificador de MP3 por antonomasia es
	<span class="application">lame</span>.
	Puede encontrar <span class="application">lame</span> en
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a>.</p><p>Partiendo de ficheros WAV previamente extraidos la
        siguiente orden convierte
	<code class="filename">audio01.wav</code> en
	<code class="filename">audio01.mp3</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lame -h -b 128 \
--tt "Título de copla o cantar" \
--ta "Grupo, solista o coral sinfónica" \
--tl "Título del álbum" \
--ty "2001" \
--tc "Autor de la extracción y paso a MP3" \
--tg "Estilo" \
audio01.wav audio01.mp3</code></strong></pre><p>Los 128 kbits pasan por se el estándar de ratio
        de bits de los MP3, aunque puede que usted sea de los que prefieren
	calidades más altas, 160 o incluso 192.  A mayor ratio
	de bits, más espacio en disco necesitará, aunque
	la calidad también será mayor.  La opción
	<code class="option">-h</code> usa el modo «más calidad pero
	algo más lento».  Las opciones que empiezan por
	<code class="option">--t</code> indican etiquetas ID3, que suelen contener
	información de la canción que contiene el fichero
	MP3.  Tiene información sobre otras opciones de
	codificación en la página de manual de
	<span class="application">lame</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-decoding"></a>7.3.4. Decodificación de MP3</h3></div></div></div><p>Para grabar un CD de sonido desde ficheros MP3 hay
        que convertirlos a formato WAV no comprimido.  Tanto
	<span class="application">XMMS</span> como
	<span class="application">mpg123</span> soportan la conversión
	de MP3 a un formato de fichero no comprimido.</p><p>Escritura a disco desde <span class="application">XMMS</span>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Arranque <span class="application">XMMS</span>.</p></li><li class="step"><p>Botón derecho del raón en la
	    ventana para acceder al menú de
	    <span class="application">XMMS</span>.</p></li><li class="step"><p>Elija <code class="literal">Preferences</code> en
	    <code class="literal">Options</code>.</p></li><li class="step"><p>Cambie el «Output Plugin» a «Disk Writer
	      Plugin».</p></li><li class="step"><p>Pulse <code class="literal">Configure</code>.</p></li><li class="step"><p>Elija un directorio en el que guardar los ficheros
	    descomprimidos.</p></li><li class="step"><p>Cargue el fichero MP3 en <span class="application">XMMS</span>
	    de la forma habitual, pero asegúrese de tener el
	    volumen al 100% y las opciones de ecualización
	    desactivadas.</p></li><li class="step"><p>Pulse <code class="literal">Play</code> &#8212;  parecerá
	    que <span class="application">XMMS</span> está reproduciendo
	    música pero no sonará nada.  Lo que está
	    haciendo es volcar el MP3 a un fichero.</p></li><li class="step"><p>Recuerde que antes de poder volver a escuchar ficheros
	    MP3 de nuevo tendrá que devolver el «Plugin de
	    salida» por omisión a la posición
	    inicial.</p></li></ol></div><p>Escritura de la salida estándar en <span class="application">mpg123</span>:</p><div class="procedure"><ul class="procedure"><li class="step"><p>Ejecute <code class="command">mpg123 -s audio01.mp3
	    &gt; audio01.pcm</code></p></li></ul></div><p><span class="application">XMMS</span> genera un fichero WAV,
	mientras que  <span class="application">mpg123</span> convierte MP3 a
	datos de sonido raw PCM.  Puede usar
	<span class="application">cdrecord</span> con ambos formatos para crear
	CD de sonido.  Tendrá que usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">burncd</span>(8)</span></a> para raw PCM.
	Si lo que tiene son ficheros WAV escuchará un ligero clic
	al principio de cada pista: se trata de la cabecera del fichero
	WAV.  Puede eliminar esta cabecera mediante
	<span class="application">SoX</span> (que puede instalar como port desde
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sox/pkg-descr">audio/sox</a> o si lo prefiere como
	package):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sox -t wav -r 44100 -s -w -c 2 pista.wav pista.raw</code></strong></pre><p>Consulte la <a class="xref" href="#creating-cds" title="18.6. Creación y uso de medios ópticos (CD)">Sección 18.6, &#8220;Creación y uso de medios ópticos (CD)&#8221;</a> para más
        información sobre el uso de grabadoras de CD en
	FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="video-playback"></a>7.4. Reproducción de vídeo</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ross</span> <span class="surname">Lippert</span></span>. </span></div></div></div><p>La reproducción de vídeo es un área muy
      nueva y en la que se producen grandes cambios a gran velocidad.
      Tenga paciencia.  Aquí no va a ser todo tan sencillo como al
      configurar el sonido.</p><p>Antes de comenzar es imprescindible que sepa con certeza
      cuál es el modelo de su tarjeta gráfica y qué
      chip usa.  Tanto <span class="application">Xorg</span> como
      <span class="application"><span class="trademark">XFree86</span>&#8482;</span> soportan gran cantidad de
      tarjetas gráficas, pero de pocas se puede decir que den
      un buen rendiemiento de reproducción.  Puede consultar una
      lista de extensiones que el servidor X  puede hacer funcionar en
      su tarjeta ejecutando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdpyinfo&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdpyinfo</span>(1)</span></a> desde una sesión
      X11.</p><p>Le recomendamos que tenga a mano un fichero MPEG no muy
      grande para usarlo en las pruebas que haga con los diversos
      reproductores y opciones.  Algunos reproductores de DVD
      buscarán por omisión soportes DVD en
      <code class="filename">/dev/dvd</code> (algunos incluso tienen fijado en
      el código el nombre de dicha unidad) seguramente le
      resultará útil ejecutar los siguientes enlaces
      simbólicos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/acd0 /dev/dvd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/acd0 /dev/rdvd</code></strong></pre><p>Tenga en cuenta que debido al diseño de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>
      los enlaces creados a mano no sobrevivirán a un reinicio
      del sistema.  Para que así suceda tras cada reinicio debe
      añadir las siguientes líneas a
      <code class="filename">/etc/devfs.conf</code>:</p><pre class="programlisting">link acd0 dvd
link acd0 rdvd</pre><p>Además, el descifrado de DVD (una tarea que hará
      necesario llamar a funciones especiales de los DVD-ROM)
      requiere permisos de escritura en unidades DVD.</p><p>Le recomendamos que aumente la memoria compartida del
      interfaz X11, para lo cual tendrá que incremente los
      valores asignados a varias <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>:</p><pre class="programlisting">kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface"></a>7.4.1. Cómo determinar las características de video</h3></div></div></div><a id="idp69770704" class="indexterm"></a><a id="idp69771216" class="indexterm"></a><a id="idp69775952" class="indexterm"></a><p>Hay varias formas de reproducir vídeo en X11, pero cuál
      de ellas sea la que funcione depende en gran medida del
      hardware que intervenga.  Cada uno de los métodos que
      se describen más son mejores o peores según en
      qué hardware se ejecute.  Además el procesamiento de
      video en X11 es un asunto que está recibiendo mucha
      atención últimamente y en cada nueva versión
      de <span class="application">Xorg</span> y de
      <span class="application"><span class="trademark">XFree86</span>&#8482;</span> no es extraño encontrar
      avances significativos.</p><p>Veamos una lista de interfaces de vídeo muy comunes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>X11: salida normal de X11 utilizando memoria compartida.</p></li><li class="listitem"><p>XVideo: una extensión del interfaz X11 que permite la
        reproducción de vídeo en las ventanas de X11.</p></li><li class="listitem"><p>SDL: Simple Directmedia Layer.</p></li><li class="listitem"><p>DGA: Direct Graphics Access (<code class="literal">acceso directo
        a gráficos</code>.</p></li><li class="listitem"><p>SVGAlib: capa de consola de gráficos a bajo nivel.</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-xvideo"></a>7.4.1.1. XVideo</h4></div></div></div><p><span class="application">Xorg</span> y
        <span class="application"><span class="trademark">XFree86</span>&#8482; 4.X</span> tienen una extensión
        llamada <span class="emphasis"><em>XVideo</em></span> (también conocida como Xvideo,
	Xv o xv) que permite reproducir vídeo en ventanas del sistema
        X11 a través de un tipo de aceleración especial.
	Dicha extensión ofrece una calidad de reproducción
	muy alta incluso en máquinas muy cortas de recursos.</p><p>Utilice <code class="command">xvinfo</code> para saber qué
        extensión está utilizando:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xvinfo</code></strong></pre><p>XVideo is supported for your card if the result looks like:</p><pre class="screen">X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</pre><p>Tenga en cuenta que los formatos que aparecen en el listado
     (YUV2, YUV12, etc) no aparecen en todas las implementaciones de
     de XVideo y su ausencia puede despistar a algunos
     reproductores.</p><p>Si el resultado se parece mucho a esto</p><pre class="screen">X-Video Extension version 2.2
screen #0
no adaptors present</pre><p>lo más probable es que su tarjeta no soporte XVideo.</p><p>Si su tarjeta gráfica no soporta XVideo lo único
      que significa es que para su sistema será más
      complicado alcanzar los requisitos computacionales necesarios
      para el procesamiento de vídeo.  Dependiendo de la tarjeta
      gráfica y el procesador que tenga es posible que de todos
      modos pueda salvar la papeleta.  Consulte la sección sobre
      recursos avanzados en la <a class="xref" href="#video-further-reading" title="7.4.3. Lecturas adicionales">Sección 7.4.3, &#8220;Lecturas adicionales&#8221;</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-SDL"></a>7.4.1.2. Simple Directmedia Layer</h4></div></div></div><p>SDL (Simple Directmedia Layer) se creó pensando en una
      capa que permitiera aplicaciones fáciles de portar entre las
      plataformas  <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, BeOS y <span class="trademark">UNIX</span>® y que permitiera
      al mismo tiempo un uso eficiente del sonido y el vídeo.  La
      capa SDL ofrece abstracción de hardware a bajo nivel, lo que
      a veces puee ser más eficiente que la propia
      interfaz X11.</p><p>SDL está en <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl12/pkg-descr">devel/sdl12</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-DGA"></a>7.4.1.3. Direct Graphics Access</h4></div></div></div><p>«Direct Graphics Access» es una extensión
      de X11 que permite que un programa sortée el servidor X y
      acceda directamente al «framebuffer».  Utiliza memoria
      de bajo nivel, así es imprescindible que se ejecute como
      <code class="systemitem">root</code>.</p><p>Puede probar y analizar el rendimiento de la extensión
      DGA con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dga&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dga</span>(1)</span></a>.  Al ejecutar <code class="command">dga</code> la pantalla
      cambia de color cada vez que pulsa una tecla.  Para salir de la
      aplicación pulse <span class="keycap"><strong>q</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports"></a>7.4.2. Ports y packages relacionados con el vídeo</h3></div></div></div><a id="idp69798608" class="indexterm"></a><a id="idp69799120" class="indexterm"></a><p>Esta sección expone el software existente en la
      Colección de Ports de FreeBSD que puede usar para la
      reproducción de vídeo.  La reproducción
      de vídeo es un área del desarrollo de software
      donde hay muchísima actividad, de manera que las
      características de más de una de las aplicaciones
      que vamos a describir pueden ser distintas.</p><p>Lo primero que hay que conocer es el importante detalle de
      que la mayoría de las aplicaciones de vídeo
      que funcionan en FreeBSD se desarrollaron para Linux.  Muchas de
      esas aplicaciones todavía están en versiones
      beta.  Estos son algunos de los problemas que puede encontrarse
      durante el uso de software de vídeo en FreeBSD:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Una aplicación no puede reproducir un fichero
	  que ha generado otra aplicación distinta.</p></li><li class="listitem"><p>Una aplicación no puede reproducir un fichero
	  que ella misma a generado.</p></li><li class="listitem"><p>La misma aplicación ejecutándose en dos
	  máquinas distintas, compilada en cada una de esas
	  máquinas; la reproducción del mismo fichero
	  da resultados diferentes.</p></li><li class="listitem"><p>El uso de un filtro aparentemente trivial como es
	  redimensionar una imagen aplicando una escala da como fruto un
	  resultado horroroso debido a que la rutina encargada de
	  aplicarla es defectuosa.</p></li><li class="listitem"><p>Que una aplicación de volcados de memoria («core
	  dumps»).</p></li><li class="listitem"><p>La documentación no se instala con el port, pero
	  sí que existe en la web o en el directorio
          <code class="filename">work</code> del port.</p></li></ol></div><p>La mayoría de estas aplicaciones muestra
      síntomas evidente de «Linuxismo», es decir,
      hay problemas derivados del modo en el que se implementan las
      bibliotecas en las distribuciones de Linux, o del hecho de que
      ciertas características del kernel de Linux han sido
      dadas por omnipresentes por los autores de las aplicaciones.  Estos
      problemas no siempre han sido advertidas y solucionadas de algún
      modo por los responsables de los ports, lo que puede desembocar
      en problemas como:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>El uso de <code class="filename">/proc/cpuinfo</code> para detectar
          las características del procesador.</p></li><li class="listitem"><p>El uso erróneo de los hilos puede causar que
	  ciertos programas se cuelguen al intentar cerrarse en lugar
	  de cerrarse correctamente.</p></li><li class="listitem"><p>Software que aún no está en la
	  Colección de Ports de FreeBSD usado frecuentemente con
	  la aplicación.</p></li></ol></div><p>Hasta ahora los autores de las aplicaciones han colaborado
        de buen grado con los responsables de los ports para hacer
	más sencillo el trabajo de portar estas aplicaciones
	a FreeBSD.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer"></a>7.4.2.1. MPlayer</h4></div></div></div><p><span class="application">MPlayer</span> es un reproductor de
        vídeo desarrollado muy recientemente y con un desarrollo
	rapidísimo.  Los objetivos del equipo
        <span class="application">MPlayer</span> son la velocidad y la flexibilidad
	en Linux y otros sistemas Unix.  El proyecto comenzó
	cuando el fundador del equipo se cansó de padecer
	el pobre rendimiento de los reproductores de vídeo
	que había disponibles en ese momento.  Hay quien dice
	que el interfaz gráfico fue sacrificado en pos de
	un diseño más ligero, aunque una vez que
	se acostumbre a las opciones desde la línea de
	órdenes y a los atajos de teclado todo irá
	como la seda.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer-building"></a>7.4.2.1.1. Compilación de MPlayer</h5></div></div></div><a id="idp69824976" class="indexterm"></a><p>Encontrará <span class="application">MPlayer</span> en <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mplayer/pkg-descr">multimedia/mplayer</a>.
	  <span class="application">MPlayer</span> ejecuta una serie de
	  pruebas de hardware durante el proceso de compilación,
	  dando como resultado un binario que no tiene por qué
	  funcionar en otros sistemas.  Recuerde, por tanto, compilar
	  la aplicación como port y no utilice el package
	  binario.  Además hay múltiples parámetros
	  que puede pasarle a <code class="command">make</code>, tal y como
	  verá al comenzar la compilación:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mplayer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
</pre><p>Las opciones por omisión del port deberían
	  bastar para la mayoría de los usuarios, aunque si
	  va a necesitar el codec XviD tendrá que especificar
	  <code class="varname">WITH_XVID</code> en la línea de
	  órdenes.  La unidad de DVD por defecto se puede
	  definir con la opción
	  <code class="varname">WITH_DVD_DEVICE</code>si la opción por omisión,
	  <code class="filename">/dev/acd0</code>, no le sirve.</p><p>En el momento de escribir esto el port de
	  <span class="application">MPlayer</span> genera la documentación
	  en formato HTML y dos ejecutables:
          <code class="command">mplayer</code> y
          <code class="command">mencoder</code>, que es una herramienta para
          recodificar vídeo.</p><p>La documentación en HTML de
	  <span class="application">MPlayer</span> es muy informativa.  Si el
	  lector no cubre todas sus dudas sobre hardware de vídeo
	  e interfaces con el contenido de este capítulo la
          documentación de <span class="application">MPlayer</span>
          es el sitio donde debe buscar.  Si quiere más información
	  sobre el soporte de vídeo en <span class="trademark">UNIX</span>® el mejor sitio para
	  consultar es, sin duda alguna, la documentación de
          <span class="application">MPlayer</span>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer-using"></a>7.4.2.1.2. Uso de MPlayer</h5></div></div></div><a id="idp69872720" class="indexterm"></a><p>Los usuarios de <span class="application">MPlayer</span> deben
          crear un subdirectorio <code class="filename">.mplayer</code> en su
          «home».  Para crear este directorio (necesario
	  para el funcionamiento de la aplicación) teclée
	  lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mplayer</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make install-user</code></strong></pre><p>Las opciones de <code class="command">mplayer</code> para la línea
	  de órdenes se detallan en la página de manual.  Si
	  necesita todavía más detalles consulte la
	  documentación en HTML.  En esta sección se
	  va a explicar solamente lo más básico.</p><p>Para reproducir el fichero
	  <code class="filename">ficherodeprueba.avi</code>,
	  mediante una de las diversas interfaces de vídeo utilice la
	  opción <code class="option">-vo</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo xv ficherodeprueba.avi</code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo sdl ficherodeprueba.avi</code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo x11 ficherodeprueba.avi</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo dga ficherodeprueba.avi</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo 'sdl:dga' ficherodeprueba.avi</code></strong></pre><p>Merece la pena que pruebe todas, puesto que el rendimiento
	  relativo depende en gran medida de muchos factores y será
	  muy distinto el resultado dependiendo del hardware.</p><p>Si quiere reproducir un DVD sustituya
	 <code class="filename">ficherodeprueba.avi</code> por <code class="option">dvd://<em class="replaceable"><code>N</code></em> -dvd-device
	 <em class="replaceable"><code>DISPOSITIVO</code></em></code>, donde
	 <em class="replaceable"><code>N</code></em> es
	 el número de título que quiere reproducir y
	 <code class="filename">DISPOSITIVO</code> es el
	 nodo de dispositivo del DVD-ROM.  Veamos un ejemplo: para reproducir el
	 título 3 desde <code class="filename">/dev/dvd</code>
	 ejecutaremos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La unidad de DVD por omisión puede definirse
	    durante la compilación del port de
	    <span class="application">MPlayer</span> con la opción
	    <code class="varname">WITH_DVD_DEVICE</code>.  Por defecto apunta a
	    <code class="filename">/dev/acd0</code>.  Tiene todos los
	    detalles en el
	    <code class="filename">Makefile</code> del port.</p></div><p>Consulte los atajos de teclado para parar la
	  reproducción, ponerla en pausa, etc. consulte la
	  salida de <code class="command">mplayer -h</code> o mejor aún
	  lése la página de manual.</p><p>Hay otras opciones que le resultarán de interés
	  para la reproducción:
          <code class="option">-fs -zoom</code>, para la reproducción a pantalla
          completa y <code class="option">-framedrop</code>, que mejora el
	  rendimiento.</p><p>Para evitar que la línea de órdenes se
	  haga demasiado larga puede crear un fichero
	  <code class="filename">.mplayer/config</code> e introducir en él
	  las opciones que quiera usar desde el arranque de la
	  aplicación:</p><pre class="programlisting">vo=xv
fs=yes
zoom=yes</pre><p>Para terminar, puede usar <code class="command">mplayer</code>
	  para extraer un título de un DVD a un fichero
	  <code class="filename">.vob</code>.  Por ejemplo, si quiere extraer
	  el segundo título de un DVD escriba esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -dumpstream -dumpfile salida.vob dvd://2 -dvd-device /dev/dvd</code></strong></pre><p>El fichero de salida, <code class="filename">salida.vob</code>,
	  un MPEG y puede manipularlo con las aplicaciones que se
	  describen en esta sección.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mencoder"></a>7.4.2.1.3. mencoder</h5></div></div></div><a id="idp69908944" class="indexterm"></a><p>Antes de empezar a usar
         <code class="command">mencoder</code> le recomendamos que se familiarice
	 con las opciones que se detallan en la documentación
	 HTML.  Hay también una página de manual, pero no
	 es de mucha utilidad sin la documentación HTML.  Hay una
	 ingente cantidad de formas de mejorar la calidad, reducir el
	 ratio de bits y cambiar formatos; alguno de esos pequeños
	 trucos pueden marcar la diferencia entre un buen y un mal
	 rendimiento.  Le mostramos un par de ejemplos por los que
	 puede empezar.  El primero es una simple copia:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder entrada.avi -oac copy -ovc copy -o salida.avi</code></strong></pre><p>Ciertas combinaciones erróneas de opciones en la
	 línea de órdenes pueden dar como fruto un fichero
	 de salida que no puede reproducir ni siquiera el propio
	 <code class="command">mplayer</code>, así que si lo que quiere es
	 extraer datos a un fichero siga usando tranquilamente la opción
	 <code class="option">-dumpfile</code> de
	 <code class="command">mplayer</code>.</p><p>Para convertir
	 <code class="filename">entrada.avi</code> con
	 codificación MPEG4 y audio con codificación MPEG3
	 (necesitará <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a>):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder entrada.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o salida.avi</code></strong></pre><p>El fichero de salida puede verse con <code class="command">mplayer</code>
	 y con <code class="command">xine</code>.</p><p>Si sustituye
	   <code class="filename">entrada.avi</code>
	   por <code class="option">dvd://1 -dvd-device /dev/dvd</code> y lo ejecuta
	   como <code class="systemitem">root</code> puede recodificar un título
	   de DVD directamente.  Es posible que el resultado no sea
	   muy satisfactorio tras los primeros intentos, así que
	   le recomendamos que vuelque el título a un fichero
	   y haga todas las pruebas que necesite sobre ese fichero.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-xine"></a>7.4.2.2. El reproductor de vídeo xine</h4></div></div></div><p>El reproductor de vídeo
      <span class="application">xine</span> es un ambicioso proyecto que
      tiene como meta ofrecer no solamente una aplicación de
      vídeo «todo en uno», sino crear una
      biblioteca base reutilizable y un ejecutable modular que
      puede ampliarse mediante «plugins».  Existe como
      package y también como port: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xine/pkg-descr">multimedia/xine</a>.</p><p>El reproductor <span class="application">xine</span> está
     todavía en mantillas, pero sus primeros pasos están
     siendo muy interesantes.  <span class="application">xine</span> requiere
     o una CPU rápida o una tarjeta gráfica, o bien
     soporte para la extensión XVideo.  El GUI es intuitivo, aunque
     un tanto pedestre.</p><p>En el momento de escribir esto
     <span class="application">xine</span> no incorpora ningún
     módulo de entrada que sirva para reproducir DVD codificados
     con CSS.  Hay versiones compiladas por terceros que tienen módulos
     que lo permiten, pero ninguna de ellas está en la
     Colección de Ports de FreeBSD.</p><p>Comparado con <span class="application">MPlayer</span>
      <span class="application">xine</span> deja las cosas más hechas
      para el usuario, pero al mismo tiempo pone más difícil
      el control exhaustivo sobre todo lo que pasa.  El reproductor
      <span class="application">xine</span> da un mejor rendimiento
      en interfaces XVideo.</p><p>Por omisión <span class="application">xine</span> arranca
      con un intefaz gráfico de usuario.  Los menús
      pueden usarse para abrir un fichero en concreto:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine</code></strong></pre><p>También puede invocar la aplicación desde la
      línea de órdenes para que reproduzca un fichero
      inmediatamente y sin utilizar el GUI:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine -g -p fichero.avi</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports-transcode"></a>7.4.2.3. Las herramientas transcode</h4></div></div></div><p><span class="application">transcode</span> no es un reproductor,
      sino una suite de herramientas para recodificar (también
      se podría usar la palabra «transcodificar», de
      ahí su nombre) ficheros de sonido y de vídeo.
      Con <span class="application">transcode</span> es posible fundir ficheros
      de video y reparar ficheros deteriorados desde la línea de
      órdenes y en las interfaces de flujo
      <code class="filename">stdin/stdout</code>.</p><p>Puede configurar gran cantidad de opciones en el
      momento de la compilación de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/transcode/pkg-descr">multimedia/transcode</a>; le
      recomendamos que use la siguiente línea de
      órdenes para compilar
      <span class="application">transcode</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes</code></strong></pre><p>La configuración que le proponemos deberí
      satisfacer a la mayoría de los usuarios.</p><p>Veamos un ejemplo ilustrativo de las posibilidades de
      <code class="command">transcode</code>: convertir un fichero DivX
      en un fichero PAL MPEG-1 (PAL VCD):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>transcode -i input.avi -V --export_prof vcd-pal -o output_vcd</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mplex -f 1 -o output_vcd.mpg output_vcd.m1v output_vcd.mpa</code></strong></pre><p>Puede reproducir el fichero MPEG resultante,
      <code class="filename">output_vcd.mpg</code>,
      con <span class="application">MPlayer</span>.  Si quiere también
      puede grabar el fichero en un CD-R y tendrá un VideoCD,
      aunque para eso tendrá que instalar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/vcdimager/pkg-descr">multimedia/vcdimager</a> y <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a>.</p><p>Consulte la página de manual de <code class="command">transcode</code>,
      pero no olvide consultar también el <a class="link" href="http://www.transcoding.org/cgi-bin/transcode" target="_top">wiki de
      transcode</a>, en el que encontrará
      más información y muchos ejemplos.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-further-reading"></a>7.4.3. Lecturas adicionales</h3></div></div></div><p>El desarrollo de las diversas aplicaciones de
      vídeo disponibles en FreeBSD avanza
      rápidamente.  Es muy posible que en un futuro
      cercano la mayoría de los problemas de los que
      hemos hablado aquí hayan sido resueltos.  Mientras
      tanto quien quiera exprimir las capacidades de FreeBSD en
      las áreas del sonido y el vídeo tendrán
      que recopilar la información repartida en varias
      FAQ y tutoriales y utilizar unos cuantos programas
      diferentes.  En esta sección se le proponen al
      lector interesado varias fuentes de información
      adicional.</p><p>La
      <a class="link" href="http://www.mplayerhq.hu/DOCS/" target="_top">documentación
      de MPlayer</a> contiene una gran cantidad de información
      técnica.  Cualquiera que quiera alcanzar un alto grado
      de conocimiento en vídeo sobre <span class="trademark">UNIX</span>® debe consultar
      esa documentación.  La lista de correo de
      <span class="application">MPlayer</span> es sumamente hostil hacia
      quien no se ha molestado en leer la documentación
      <span class="emphasis"><em>antes</em></span> de preguntar, así que si
      va a enviar informes de errores a esa lista, por favor,
      <span class="emphasis"><em>léase la documentación.</em></span>.</p><p>El texto
      <a class="link" href="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html" target="_top">      xine HOWTO</a>
      contiene un capítulo sobre mejora del rendimiento que
      afecta a todos los reproductores.</p><p>Hay unas cuantas aplicaciones muy prometedoras que el lector
      debería al menos probar:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://avifile.sourceforge.net/" target="_top">Avifile</a>, que
	   encontrará en los ports:<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/avifile/pkg-descr">multimedia/avifile</a>.</p></li><li class="listitem"><p><a class="link" href="http://www.dtek.chalmers.se/groups/dvd/" target="_top">Ogle</a>,
	   también en la colección de  ports: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/ogle/pkg-descr">multimedia/ogle</a>.</p></li><li class="listitem"><p><a class="link" href="http://xtheater.sourceforge.net/" target="_top">Xtheater</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/dvdauthor/pkg-descr">multimedia/dvdauthor</a>, una aplicación
           libre para la producción de contenidos en DVD.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tvcard"></a>7.5. Configuración de tarjetas de TV</h2></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Josef</span> <span class="surname">El-Rayes</span></span>. </span></div><div><span class="authorgroup">Ampliado y adaptado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp69973072" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69973840"></a>7.5.1. Introducción</h3></div></div></div><p>Las tarjetas de TV le permiten ver en su sistema
        emisiones de TV tradicionales o incluso por cable.  La
	mayoría aceptan vídeo compuesto mediante
	RCA o una entrada de S-video; algunas de estas tarjetas
	incorporan también un sintonizador de radio FM.</p><p>FreeBSD puede utilizar tarjetas de TV PCI que tengan el chip
	Brooktree Bt848/849/878/879 o el chip de captura de vídeo
	Conexant CN-878/Fusion 878a gracias al controlador
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>.  Asegúrese de que la tarjeta tiene un
	sintonizador que esté soportado: consulte la lista de
	sintonizadores soportados que encontrará en la página
	de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69976912"></a>7.5.2. Añadir el controlador</h3></div></div></div><p>Poder usar la tarjeta tendrá que cargar el
        controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>.  Una forma de hacerlo es
	añdir la siguiente línea al fichero
	<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">bktr_load="YES"</pre><p>También puede hacerlo compilando estáticamente
        el soporte para la tarjeta de TV en su kernel;  añada
	las siguientes líneas al fichero de configuración
	de su kernel:</p><pre class="programlisting">device	 bktr
device	iicbus
device	iicbb
device	smbus</pre><p>Es necesario incluir todas esas lineas adicionales porque
        los componentes de la tarjeta están conectados entre
	sí por un bus I2C.  Hecho esto compile e instale su
	nuevo kernel.</p><p>Una vez añadido el soporte de la tarjeta al sistema
        tendrá que reiniciar.  Durante el arranque deberían
	aparecer rastros de su tarjeta de TV. Veamos un ejemplo:</p><pre class="programlisting">bktr0: &lt;BrookTree 848A&gt; mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: &lt;I2C bit-banging driver&gt; on bti2c0
iicbus0: &lt;Philips I2C bus&gt; on iicbb0 master-only
iicbus1: &lt;Philips I2C bus&gt; on iicbb0 master-only
smbus0: &lt;System Management Bus&gt; on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.</pre><p>Es obvio que estos mensajes serán distintos
        según sea el hardware del que se trate.
	Asegúrese de que el sistema detecta correctamente
	el sintonizador.  Se puede sobreescribir alguno de los
	parámetros detectados por el sistema mediante
	MIB <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> y opciones del fichero de configuración
	del kernel.  Si por ejemplo quiere obligar al sintonizador
	para que se comporte como un Phillips SECAM añada
	lo siguiente al fichero de configuración de su
	kernel:</p><pre class="programlisting">options OVERRIDE_TUNER=6</pre><p>Puede utilizar directamente <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.bt848.tuner=6</code></strong></pre><p>Consulte en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> y en
	<code class="filename">/usr/src/sys/conf/NOTES</code> si necesita
	más detalles sobre las opciones disponibles.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69990992"></a>7.5.3. Aplicaciones útiles</h3></div></div></div><p>Tendrá que instalar una de estas aplicaciones
        para poder utilizar su tarjeta de TV:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/fxtv/pkg-descr">multimedia/fxtv</a>
	    ofrece «TV en una ventana» y captura de
	    imagen/sonido/vídeo.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xawtv/pkg-descr">multimedia/xawtv</a>:
	    otra aplicación de TV; ofrece lo mismo que
	    <span class="application">fxtv</span>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/alevt/pkg-descr">misc/alevt</a> decodifica
	    y reproduce videotexto y teletexto.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/xmradio/pkg-descr">audio/xmradio</a> permite
	    utilizar el sintonizador de radio FM que incorporan algunas
	    tarjetas de TV.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/wmtune/pkg-descr">audio/wmtune</a>, una
	    aplicación de escritorio muy útil para
	    el uso de sintonizadores de radio.</p></li></ul></div><p>Hay más aplicaciones útiles en la Colección de
        de Ports de FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70002768"></a>7.5.4. Solución de problemas</h3></div></div></div><p>Si tiene algún problema con su tarjeta de TV compruebe
        en primer lugar que el chip de captura de vídeo y el
	sintonizador realmente funcionan con el controlador
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> y si ha utilizado las opciones de configuración
	más adecuadas.  Si necesita más ayuda o necesita
	respuestas sobre su tarjeta de TV puede recurrir a la lista
	de correo <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-multimedia" target="_top">freebsd-multimedia</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="scanners"></a>7.6. Escáneres de imágenes</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp70012112" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70012880"></a>7.6.1. Introducción</h3></div></div></div><p>El acceso a escáneres de imágenes en FreeBSD
        funciona gracias a la  <acronym class="acronym">API</acronym>
	<span class="application">SANE</span> (siglas de «Scanner Access Now
	Easy», «el acceso a escáneres ahora es
	fácil»), disponible en la Colección de Ports
	de FreeBSD.  <span class="application">SANE</span> utiliza también
	ciertos controladores de FreeBSD para acceder al hardware del
	escáner.</p><p>FreeBSD puede utilizar tanto escáneres SCSI como USB.
        Asegúrese de que el suyo funciona con
	<span class="application">SANE</span> antes de intentar ningún
	tipo de configuración.  <span class="application">SANE</span>
	tiene una lista de <a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">dispositivos
	soportados</a> donde encontrará información
	actualizada sobre hasta dónde funciona el escáner
	y su estatus.  La página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a>
	incluye una listas de escáneres USB que funcionan con
	<span class="application">SANE</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70018384"></a>7.6.2. Configuración del kernel</h3></div></div></div><p>Como ya se ha dicho tanto los interfaces USB como las
         SCSI funcionan.  Según sea el interfaz de su
	 escáner necesitará un tipo diferente de
	 controlador:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="scanners-kernel-usb"></a>7.6.2.1. Interfaz USB</h4></div></div></div><p>El kernel <code class="filename">GENERIC</code> incluye por
	  omisión los controladores de dispositivo necesarios
	  para poder usar escáneres USB.  Si va a personalizar
	  su kernel asegúrese de que esto está en el
	  fichero de configuración del mismo:</p><pre class="programlisting">device usb
device uhci
device ohci
device uscanner</pre><p>Según cual sea el chipset de su placa base
	  tendrá que usar <code class="literal">device uhci</code> o
	  <code class="literal">device ohci</code>, aunque si tiene ambos
	  no tendrá problemas por eso.</p><p>Si por cualquier motivo no quiere recompilar su
	  kernel y su kernel no es el
	  <code class="filename">GENERIC</code> puede cargar el módulo
	  controlador de dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a> con
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload uscanner</code></strong></pre><p>Si quiere cargar este módulo cada vez que arranque
	  el sistema debe añadir la siguiente
	  línea a
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">uscanner_load="YES"</pre><p>Tras reiniciar con el kernel correcto (o una vez
	  que el módulo esté cargado) conecte su
	  escáner USB.  Debe aparecer en el «buffer»
	  de mensajes del sistema (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) un mensaje una
	  línea como la siguiente:</p><pre class="screen">uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2</pre><p>La línea del ejemplo muestra que nuestro
	  escáner está utilizando el nodo de
	  dispositivo<code class="filename">/dev/uscanner0</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70033616"></a>7.6.2.2. Interfaz SCSI</h4></div></div></div><p>Si su escáner tiene un interfaz SCSI es importante
	  saber qué controladora SCSI incorpora.
	  El chipset SCSI que tenga influirá en la
	  configuración del kernel que tenga que
	  personalizar.  El kernel <code class="filename">GENERIC</code>
	  tiene controladores de dispositivo para las controladoras
	  SCSI más comunes.  Consulte el fichero
	  <code class="filename">NOTES</code> y añada la
	  línea correcta al fichero de configuración
	  de su kernel.  Tendrá que añadir
	  también la siguiente línea:</p><pre class="programlisting">device scbus
device pass</pre><p>Una vez compilado e instalado el kernel correctamente
	  tiene ya que ver sus nuevos dispositivos en el
	  «buffer» de mensajes del sistema:</p><pre class="screen">pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</pre><p>Si su escáner estaba apagado durante el arranque
	  puede forzar manualmente la detección si ejecuta una
	  búsqueda de buses SCSI con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol rescan all</code></strong>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</pre><p>El escáner aparecerá en la lista de
	  dispositivos SCSI:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</pre><p>Tiene todos los detalles sobre los dispositivos
	  SCSI en las páginas de manual de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scsi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">scsi</span>(4)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70042576"></a>7.6.3. Configuración de SANE</h3></div></div></div><p>El sistema <span class="application">SANE</span> se divide
	en dos partes: los «backends» (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>) y los
	«frontends» (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).  Los
	 «backends» facilitan el acceso al escáner
	 propiamente dicho.  La
	<a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">lista
	de dispositivos que funcionan con </a>
	<span class="application">SANE</span> le dirá qué
	«backend» hará funcionar su escáner
	de imágenes.  No hay más remedio que identificar
	correctamente el «backend» de su escáner
	para poder usarlo.  Los «frontends» ofrecen
	una interfaz gráfica para escanear
	(<span class="application">xscanimage</span>).</p><p>Lo primero que hay que hacer es instalar el port
        o package de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>.  Después
	ejecute la orden <code class="command">sane-find-scanner</code>
	para comprobar el funcionamiento de la detección
	de escáneres del sistema
	<span class="application">SANE</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</pre><p>En la salida de la orden anterior se le mostrará
        el tipo de interfaz del escáner y el nodo de dispositivo
	a través del cual el sistema accede a él.  Es
	posible que no aparezcan la marca y el modelo, pero eso no
	tiene importancia.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos escáneres USB necesitan que les instale un
	  «firmware»; esto se explica en la página
	  de manual del «backend» correspondiente.  También
	  debe leer las páginas de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane-find-scanner&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sane-find-scanner</span>(1)</span></a>
	  y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">sane</span>(7)</span></a>.</p></div><p>Ahora hay que comprobar que el «frontend» de
        escaneo puede identificar el escáner.  Por omisión
	los «backends» de
	<span class="application">SANE</span> incorporan una herramienta de
	línea de órdenes llamada <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a>, que
	le mostrará una lista de dispositivos e incluso una
	captura de imagen desde la shell.  La opción
	<code class="option">-L</code> muestra una lista de escáners:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</pre><p>Si el software no lanza ningún mensaje, o si
        el mensaje indica que no se han encontrado escáneres
	significa que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> no puede identificar su
	escáner.  Si este es el caso tendrá que
	editar el fichero de configuración del
	«backend»y definir en él el
	escáner que quiera utilizar.  Encontrará
	todos los ficheros de configuración de los
	«backends» en el directorio <code class="filename">/usr/local/etc/sane.d/</code>.  Este
	problema con la identificación del hardware
	es relativamente frecuente con ciertos modelos de
	escáneres USB.</p><p>Por ejemplo, con el escáner que hemos usado en
        la <a class="xref" href="#scanners-kernel-usb" title="7.6.2.1. Interfaz USB">Sección 7.6.2.1, &#8220;Interfaz USB&#8221;</a> la orden
	<code class="command">sane-find-scanner</code> nos da la siguiente
	información:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</pre><p>El escáner ha sido detectado sin problemas, utiliza el
        interfaz USB y está conectado al nodo de dispositivo
	<code class="filename">/dev/uscanner0</code> .  Ahora comprobaremos
	que podemos identificar correctamente el escáner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</pre><p>No hemos podido identificar el escáner, así
        que hemos de editar el fichero
	<code class="filename">/usr/local/etc/sane.d/epson.conf</code>.  Estamos
	usando el modelo de escáner <span class="trademark">EPSON
  Perfection</span>® 1650,
	así que ya sabemos que el escáner utilizará
	el «backend» <code class="literal">epson</code>.  Lea
	atentamente los comentarios que hay en los ficheros de
	configuración de los «backends».  Lo que
	hay que hacer es muy sencillo: basta con comentar las
	líneas en las que aparecen interfaces que no sean el
	perfecto para su escáner.  En nuestro caso comentaremos
	todas las líneas que comiencen por
	<code class="literal">scsi</code> puesto que nuestro escáner
	tiene interfaz USB.  Después de esto hay que
	añadir una lína al final del fichero declarando
	el interfaz y el nodo de dispositivo que se van a usar.  En
	el caso del ejemplo esto es lo que añadimos:</p><pre class="programlisting">usb /dev/uscanner0</pre><p>Por favor, lea los comentarios que encontrará
        en el fichero de configuración del «backend»
	y la pángina de manual de del «backend»
	si necesita más información sobre la
	sintaxis que debe usar.  Hecho esto podemos verificar si
	ya podemos identificar el escáner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</pre><p>Hemos identificado nuestro escáner USB.  Ni tiene
        importancia si la marca y modelo que hemos visto no coinciden
	con nuestro escáner.  Lo único realmente
	importante es el campo
	<code class="literal">`epson:/dev/uscanner0'</code>, que nos da
	el nombre correcto del «backend» y el
	nodo de dispositivo correcto.</p><p>Una vez que <code class="command">scanimage -L</code> llega a ver
        al escáner hemos terminado con la configuración.
	El dispositivo está listo para escanear
	imángenes.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> permite ejecutar una captura de
        imágen desde la línea de órdenes,
	pero siempre es mejor utilizar un interfaz gráfico de
	usuario para estas tareas.
	<span class="application">SANE</span> ofrece un interfaz
	gráfico simple pero eficiente:
	<span class="application">xscanimage</span>
	(<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).</p><p>Otro «frontend» gráfico para
        escanear que se ha hecho muy popular es
	<span class="application">Xsane</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a>).  Este
	«frontend» tiene características muy
	avanzadas como varios modos de escaneo (fotocopia, fax, etc.),
	corrección de color, escaneo de imágenes por
	lotes, etc.  Ambas aplicaciones pueden utilizarse además
	como «plugins» de
	<span class="application">GIMP</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70082512"></a>7.6.4. Dar acceso al escáner a otros usuarios</h3></div></div></div><p>Todo lo que se ha mostrado en esta sección
        se ha ejecutado con privilegios de
	<code class="systemitem">root</code>.  Lo normal es que haya otros usuarios
	que tengan que tener acceso al escáner.  Un usuario
	que quiera usar el escáner tiene que tener acceso
	de lectura y escritura al nodo de dispositivo que usa
	el escáner.  Por ejemplo, nuestro escáner
	USB utiliza el nodo de dispositivo
	<code class="filename">/dev/uscanner0</code> propiedad del grupo
	<code class="systemitem">operator</code>.  Al añadir al usuario
	<code class="systemitem"><em class="replaceable"><code>joe</code></em></code> al
	grupo <code class="systemitem">operator</code> éste podrá
	acceder al esc´ner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod operator -m joe</code></strong></pre><p>Para más información sobre el uso de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> lea su página de manual.  Tendrá
	también que configurar correctamente los permisos de
	escritura (0660 o 0664) en el nodo de dispositivo
	<code class="filename">/dev/uscanner0</code>; por omisión los
	miembros del grupo <code class="systemitem">operator</code> sólo
	tienen acceso de lectura en este nodo de dispositivo.
	Añada las siguientes líneas al fichero
	lines to the <code class="filename">/etc/devfs.rules</code>:</p><pre class="programlisting">[system=5]
add path uscanner0 mode 660</pre><p>Ahora añada lo siguiente a
	<code class="filename">/etc/rc.conf</code> y reinicie la
	máquina:</p><pre class="programlisting">devfs_system_ruleset="system"</pre><p>Para más información sobre lo que acaba de
        leer consulte la página de manual de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por seguridad debería pensarse dos veces
	  el hecho mismo de añadir cualquier usuario
	  a un grupo y muy especialmente al grupo
	  <code class="systemitem">operator</code>.</p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kernelconfig"></a>Capítulo 8. Configuración del kernel de FreeBSD</h2></div><div><span class="authorgroup">Actualizado y reestructurado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Texto original por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jake</span> <span class="surname">Hamby</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp70106704">8.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#idp70113744">8.2. ?Qué razones hay para compilar un kernel personalizado?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-devices">8.3. Inventario de hardware del sistema</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-modules">8.4. Controladores del kernel, subsistemas y módulos</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">8.5. Compilación e instalación de un kernel personalizado</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">8.6. El fichero de configuración</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">8.7. Qué hacer si algo va mal</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp70106704"></a>8.1. Sinopsis</h2></div></div></div><a id="idp70107344" class="indexterm"></a><p>El kernel de FreeBSD es el corazón del sistema
      operativo.  Es el responsable de la gestión y control de la
      memoria, reforzamiento de los controles de seguridad, gestión
      de redes, acceso a dispositivos y muchas cosas más.  FreeBSD
      es un sistema dinámico y configurable, pero a veces
      sigue siendo necesario reconfigurar y recompilar
      un kernel hecho a la medida de nuestras necesidades.</p><p>Una vez leido este capítulo sabrá usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Por qué puede ser necesario que compile un kernel
	  personalizado.</p></li><li class="listitem"><p>Cómo crear un fichero de configuración del kernel,
	  o bien editar un fichero existente.</p></li><li class="listitem"><p>Cómo utilizar el fichero de configuración
	  para crear
	  y compilar un nuevo kernel.</p></li><li class="listitem"><p>Cómo instalar su nuevo kernel.</p></li><li class="listitem"><p>Cómo resolver algunos problemas si algo sale mal.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp70113744"></a>8.2. ?Qué razones hay para compilar un kernel personalizado?</h2></div></div></div><p>Tradicionalmente FreeBSD ha contado con lo que se conoce como
      un kernel <span class="quote">&#8220;<span class="quote">monolítico</span>&#8221;</span>.  Esto quiere decir que
      el kernel era un gran y único programa que se comunicaba con una lista
      previa de dispositivos, y que si se deseaba modificar el comportamiento
      del kernel se debía compilar un nuevo kernel y reiniciar el sistema
      con el nuevo kernel.</p><p>Hoy en día FreeBSD evoluciona muy rápidamente
      hacia un modelo donde la funcionalidad del kernel se
      basa en módulos, los cuales pueden cargarse y
      descargarse dinámicamente de acuerdo a las necesidades del
      kernel. Esto permite al kernel adaptarse al nuevo hardware que
      sale al mercado (como las tarjetas PCMCIA en sistemas
      portátiles), o bien
      añadir nuevas funcionalidades al kernel que no eran
      al compilarlo la vez anterior.  Esto es lo que conocemos como
      kernel modular.</p><p>A pesar de lo dicho aún es necesario llevar a cabo cierta
      configuración estática en la configuración
      del kernel.  A veces se debe a que la funcionalidad del
      sistema está tan ligada al kernel que no puede hacerse
      mediante carga dinámica de módulos.  En otros casos puede
      tratarse simplemente de que nadie ha programado un módulo
      para esa funcionalidad concreta que pueda cargarse
      dinámicamente en el kernel.</p><p>Compilar un kernel personalizado es uno de los ritos de
      iniciación más importantes a los que los usuarios de
      casi todos los BSD han de enfrentarse.  Este proceso lleva su
      tiempo, pero le aportará grandes beneficios a su
      sistema FreeBSD.  A diferencia del kernel
      <code class="filename">GENERIC</code>, con el que puede funcionar una cantidad
      apabullante de hardware disponible en el mercado, un kernel personalizado
      contiene únicamente lo necesario para que funcione el hardware de
      <span class="emphasis"><em>su</em></span> sistema.  Obviamente esto tiene sus
      ventajas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Mayor rapidez en el arranque del sistema.  Dado que el
	  kernel sólo tiene que probar el hardware que realmente está
	  en el sistema el tiempo que necesitará para arrancar se
	  reducirá visiblemente.</p></li><li class="listitem"><p>Menor uso de memoria.  Generalmente un kernel personalizado
	  utiliza menos memoria que un kernel
	  <code class="literal">GENERIC</code>,  lo cual es importante ya que el
	  kernel debe encontrarse siempre en memoria real.  Por ésta
	  razón un kernel personalizado puede ser de gran utilidad
	  en sistemas con una cantidad limitada de memoria RAM.</p></li><li class="listitem"><p>Hacer funcionar hardware específico.  Un kernel personalizado
	  le permite añadir al sistema dispositivos como tarjetas de sonido,
	  que no están incluidas en el kernel <code class="literal">GENERIC</code>.
	  </p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-devices"></a>8.3. Inventario de hardware del sistema</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Antes de aventurarnos en la configuración del kernel
      nunca está de más disponer de un inventario
      completo del hardware que hay en
      la máquina.  En los casos en los que FreeBSD no es el
      sistema operativo principal de la máquina puede
      conseguir el inventario consultando la configuración
      de otro sistema operativo.  Por ejemplo, el
      <span class="application">Gestor de dispositivos</span> de <span class="trademark">Microsoft</span>®
      suele contener información importante sobre los
      dispositivos que haya en la máquina.  El
      <span class="application">Gestor de dispositivos</span> está
      en el panel de control.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunas versiones de <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® tienen un icono
	de <span class="application">Sistema</span> con forma de pantalla
	desde el que se puede acceder al <span class="application">Gestor de
	dispositivos</span>.</p></div><p>Si no hay otro sistema operativo en la máquina el
      administrador tendrá que conseguir la información
      por su cuenta.  Una forma de hacerlo es mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> y
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=man&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">man</span>(1)</span></a>.  La mayoría de los controladores de dispositivo
      que hay en FreeBSD tienen una página de manual, que suele
      incluir una lista del hardware que puede hacer funcionar.  En
      la prueba del sistema durante el arranque va apareciendo una
      lista del harware que hay en la máquina.  Por ejemplo,
      las siguientes líneas indican que el controlador
      <code class="filename">psm</code> ha encontrado un ratón:</p><pre class="programlisting">psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: [ITHREAD]
psm0: model Generic PS/2 mouse, device ID 0</pre><p>Puede añadir este controlador al fichero de
      configuración de su kernel personalizado o cargarlo
      utilizando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>.</p><p>A veces los datos que muestra <code class="command">dmesg</code>
      solamente muestran mensajes del sistema en lugar de la
      salida de la prueba de arranque.  En esos casos puede
      ver la verdadera salida de <code class="command">dmesg</code> en el
      fichero <code class="filename">/var/run/dmesg.boot</code>.</p><p>Otro método para identificar el hardware del sistema
      es usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pciconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pciconf</span>(8)</span></a>, que tiene una salida mucho más
      verbosa.  Veamos un ejemplo:</p><pre class="programlisting">ath0@pci0:3:0:0:        class=0x020000 card=0x058a1014 chip=0x1014168c rev=0x01 hdr=0x00
    vendor     = 'Atheros Communications Inc.'
    device     = 'AR5212 Atheros AR5212 802.11abg wireless'
    class      = network
    subclass   = ethernet</pre><p>Este fragmento, obtenido con
      <code class="command">pciconf -lv</code> muestra cómo
      el controlador <code class="filename">ath</code> ha encontrado un
      dispositivo Ethernet inalámbrico.  Escriba
      <code class="command">man ath</code> para
      consultar la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath</span>(4)</span></a>.</p><p>La opción <code class="option">-k</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=man&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">man</span>(1)</span></a> le
      suministrará valiosa información.  Sigamos
      con el ejemplo anterior:</p><pre class="screen"><code class="prompt">#</code> man -k <em class="replaceable"><code>Atheros</code></em></pre><p>Con esto obtendremos una lista de páginas de manual que
      contienen esa palabra en particular:</p><pre class="programlisting">ath(4)                   - Atheros IEEE 802.11 wireless network driver
ath_hal(4)               - Atheros Hardware Access Layer (HAL)</pre><p>Una vez que tenemos nuestra flamante lista de hardware del sistema
      el proceso de compilar un kernel personalizado debería parecer
      un poco menos inquietante.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-modules"></a>8.4. Controladores del kernel, subsistemas y módulos</h2></div></div></div><a id="idp70170448" class="indexterm"></a><p>Antes de compilar un kernel personalizado conviene
      pensar antes los motivos.  Si lo que se necesita es
      añadir hardware específico al sistema es
      posible que sea posible utilizarlo mediante un
      módulo.</p><p>Los módulos del kernel están en el directorio
      <code class="filename">/boot/kernel</code> y se
      pueden cargar dinámicamente en un kernel en funcionamiento
      con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.  La mayoría, por no decir todos, los
      controladores del kernel tienen un módulo específico
      y una página de manual.  Por ejemplo, en la sección
      anterior hablábamos del controlador Ethernet inalámbrico
      <code class="filename">ath</code>.  La página de manual
      de este dispositivo contiene la siguiente
      información:</p><pre class="programlisting">Alternatively, to load the driver as a module at boot time, place the
     following line in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>:

           if_ath_load="YES"</pre><p>Si hace lo que dice ahí, es decir, añadir
      la línea <code class="literal">if_ath_load="YES"</code> al fichero
      <code class="filename">/boot/loader.conf</code> hará que el
      módulo se cargue dinámicamente cada vez
      que el sistema arranque.</p><p>Hay casos, no obstante, en los que no existe el módulo
      correspondiente.  Esto sucede con ciertos subsistemas y con
      controladores muy importantes, como por ejemplo el de
      <acronym class="acronym">FFS</acronym>, que necesita el kernel.  Igual sucede con
      la posibilidad de utilizar redes (INET).  Por desgracia, en estos
      casos la única forma de saber si hace falta un controlador
      es buscar el módulo.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es sumamente fácil quitar un dispositivo o una
        opción del kernel y encontrarse de manos a boca con
	un kernel que no funciona.  Por ejemplo, si elimina el
        controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ata</span>(4)</span></a> del fichero de configuración
	del kernel un sistema que utilice unidades de disco
        <acronym class="acronym">ATA</acronym> no podrá arrancar a menos que
	se añada la línea correspondiente al fichero
        <code class="filename">loader.conf</code>.  Si tiene dudas busque el
	módulo y deje el kernel como está.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-building"></a>8.5. Compilación e instalación de un kernel personalizado</h2></div></div></div><a id="idp70196816" class="indexterm"></a><p>En primer lugar, hagamos un breve recorrido por el directorio
      donde se lleva a cabo la compilación del kernel.  Todos los
      directorios mencionados hacen referencia al directorio principal,
      que es <code class="filename">/usr/src/sys</code>, al que también
      podemos acceder desde <code class="filename">/sys</code>.  Existen gran
      cantidad de subdirectorios que representan diferentes partes del
      kernel, pero el más importante para lo que deseamos hacer son
      <code class="filename">arch</code> y
      <code class="filename">/conf</code>, que es donde se llevara a cabo la
      edición del fichero de configuración y la
      compilación propiamente dicha del mismo,
      el punto de partida para la personalización del kernel. El
      directorio <code class="filename">arch</code>
      representa la arquitectura del sistema, por lo que puede ser
      <code class="filename">i386</code>, <code class="filename">alpha</code>,
      <code class="filename">amd64</code>, <code class="filename">ia64</code>,
      <code class="filename">powerpc</code>, <code class="filename">sparc64</code> o
      <code class="filename">pc98</code> (una arquitectura alternativa, similar a PC
      y muy popular en Japón).  Todo lo que existe dentro de un
      directorio de una arquitectura en particular, es específico
      para dicha arquitectura; el resto del código es común
      para todas las plataformas en las que FreeBSD puede funcionar.
      Observe la organización lógica de la estructura
      de los directorios, con cada dispositivo utilizable en el sistema,
      sistema de ficheros y opciones, cada cosa en su propio
      subdirectorio.</p><p>A lo largo de este capítulo asumiremos que está
       utilizando la arquitectura i386, puesto que sobre ella son los
       ejemplos que vamos a ir exponiendo.  Si no es este su caso debe
       hacer los cambios adecuados a su arquitectura de hardware en las
       rutas que vayamos utilizando.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si <span class="emphasis"><em>no existe</em></span> el directorio
        <code class="filename">/usr/src/sys</code> en su sistema quiere
        decir que no están instaladas las fuentes del
	kernel.  La forma más sencilla de tenerlas es
        mediante <code class="command">/stand/sysinstall</code>.  Como
        usuario <code class="systemitem">root</code> seleccione
        <code class="literal">Configure</code>, luego
        <code class="literal">Distributions</code>, después
        <code class="literal">src</code> y finalmente <code class="literal">sys</code>.
        Si no le gusta mucho
        <span class="application">sysinstall</span> y tiene acceso a un
        CDROM <span class="quote">&#8220;<span class="quote">oficial</span>&#8221;</span> de FreeBSD puede
        instalar las fuentes por medio de la siguiente línea
        de órdenes:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount</code></strong> /cdrom
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p</code></strong> <code class="filename">/usr/src/sys</code>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s</code></strong> /usr/src/sys /sys
<code class="prompt">#</code> <strong class="userinput"><code>cat /cdrom/sys/ssys.[a-d]* | tar -xzvf</code></strong></pre></div><p>Ahora vaya al al directorio
      <code class="filename">arch/conf</code>
      y copie el fichero de configuración <code class="filename">GENERIC</code>
      con el nombre que desee.  Por ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC MIKERNEL</code></strong></pre><p>Por tradición el nombre se escribe con mayúsuculas y
      si tiene varias maquinas FreeBSD, con diferente hardware es recomendable
      darle a cada kernel el mismo nombre que la máquina en la que va
      a ejecutarse.  En este ejemplo usaremos el nombre de
      <code class="filename">MIKERNEL</code> .</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Guardar su fichero de configuración directamente bajo
        el directorio <code class="filename">/usr/src</code>, puede que no sea una
        idea muy astuta.  Si empieza a tener problemas puede ser muy tentador
        borrar <code class="filename">/usr/src</code> y comenzar desde cero.
        Cinco segundos después de haber hecho esto se dará
        cuenta de que ha eliminado el fichero de configuración de
        su kernel, en el que quizás llevaba horas trabajando.</p><p xmlns="http://www.w3.org/1999/xhtml">Le proponemos una alternativa: guardar su fichero de configuración
        cualquier otro sitio y crear un enlace simbólico al fichero
        que hay en el directorio <code class="filename">i386</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Por ejemplo:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /root/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC /root/kernels/MIKERNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /root/kernels/MIKERNEL</code></strong></pre></div><p>Ahora edite el fichero de configuración
      <code class="filename">MIKERNEL</code> con su editor de textos favorito.
      Si se trata de una instalación reciente probablemente el
      único editor disponible sea <span class="application">vi</span>,
      del cual es complicado explicar su uso detallado en este
      documento, pero existen bastantes libros que detallan su uso; puede
      ver algunos en la <a class="link" href="#bibliography" title="Capítulo 31. Bibliografía">bibliografía</a>.
      FreeBSD dispone de un editor de uso muy sencillo, llamado
      <span class="application">ee</span>; si es usted principiante le será
      de mucha ayuda.  Cambie los comentarios al principio del fichero
      con algo que refleje los cambios realizados o al menos para
      diferenciarlo del fichero <code class="filename">GENERIC</code>.</p><p>Si ha compilado un kernel en <span class="trademark">SunOS</span>&#8482; o algún otro sistema operativo
      BSD seguramente la mayor parte de fichero le será muy
      familiar.  Si viene usted de otros sistemas
      operativos como DOS, el fichero <code class="filename">GENERIC</code> puede
      parecerle intimidante, así que siga las instrucciones descritas
      en <a class="link" href="#kernelconfig-config" title="8.6. El fichero de configuración">El Fichero de Configuración
      </a> detenidamente y con sumo cuidado.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Asegúrese siempre de verificar el fichero
        <code class="filename">/usr/src/UPDATING</code> antes de realizar cualquier
        actualización del sistema si ha
        <a class="link" href="#cutting-edge" title="Capítulo 23. Lo último de lo último">sincronizado sus fuentes</a>
        para disponer de la última versión de los mismos.
        En el fichero <code class="filename">/usr/src/UPDATING</code> está toda
        la información importante sobre las actualizaciones.
        Al distribuirse con FreeBSD dicha información deberá
        estar más actualizada que la que hay en este mismo
	texto.</p></div><p>Ahora es momento de llevar a cabo la compilación del
      código fuente del kernel.</p><div class="procedure"><a id="idp70236496"></a><div class="procedure-title">Procedimiento 8.1. Compilación del kernel</div><ol class="procedure" type="1"><li class="step"><p>Vaya al directorio <code class="filename">/usr/src</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre></li><li class="step"><p>Compile el kernel:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MIKERNEL</code></strong></pre></li><li class="step"><p>Instale el nuevo kernel:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MIKERNEL</code></strong></pre></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es imprescindible que disponga del código fuente completo de FreeBSD
        para poder compilar el kernel.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Por omisión, si compila un kernel personalizado
	<span class="emphasis"><em>todos</em></span> los módulos del kernel
	serán recompilados también.  Si quiere
	que la actualización de su kernel sea mucho más
	rápida o compilar solamente ciertos módulos
	personalizados, edite kernel modules will be rebuilt as well.
	<code class="filename">/etc/make.conf</code> antes de compilar el
	kernel:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">MODULES_OVERRIDE = linux acpi sound/sound sound/driver/ds1 ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Esta variable crea una lista de módulos listos para
      ser compilados, sin tocar los demás.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">WITHOUT_MODULES = linux acpi sound/sound sound/driver/ds1 ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Esta variable crea una lista de módulos que serán
        excluidos del proceso de compilación.  Hay otras variables que
	pueden resultarle útiles durante este proceso; consulte la
	página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a>.</p></div><a id="idp70247376" class="indexterm"></a><p>El nuevo kernel se copiará al directorio raíz
      como <code class="filename">/kernel</code> y el kernel viejo tendrá
      el nombre de <code class="filename">/kernel.old</code>.  Ahora
      reinicie su sistema para poder probar su nuevo kernel.  En caso de que se
      presente algun problema hay algunos consejos para la <a class="link" href="#kernelconfig-trouble" title="8.7. Qué hacer si algo va mal">resolución de problemas</a> al
      final de este capítulo.  Asegúrese de leer la sección
      que explica cómo recuperar el sistema en caso de que su kernel <a class="link" href="#kernelconfig-noboot">no quiera arrancar</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ciertos ficheros relacionados con el proceso de
	arranque, como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>y su configuración,
	se guardan en <code class="filename">/boot</code>.  Los módulos
	personalizados o de terceros se suelen guardar en
	<code class="filename">/boot/kernel</code>,
	aunque debe tener presente que es muy importante que
	los módulos y el kernel estén
	sincronizados.  Si intenta usar módulos con un
	kernel para el que no están destinados puede
	haber errores o incluso producirse intesatabilidades.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-config"></a>8.6. El fichero de configuración</h2></div><div><span class="authorgroup">Actualizado a FreeBSD 6.X por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joel</span> <span class="surname">Dahl</span></span>. </span></div></div></div><a id="idp70255952" class="indexterm"></a><a id="idp70257104" class="indexterm"></a><a id="idp70257616" class="indexterm"></a><p>El formato de un fichero de configuración es
      bastante simple.  Cada línea contiene una palabra
      clave con uno o más argumentos.  Para simplificar,
      hay muchas líneas que solamente contienen un
      argumento.  Cualquier cosa detrás de un
      <code class="literal">#</code> se considerará un comentario y
      en consecuencia será ignorado.  Las siguientes
      secciones describen todas las palabras clave en el orden
      en el que aparecen en
      <code class="filename">GENERIC</code>.
      <a id="kernelconfig-options"></a> Si quiere una lista exhaustiva de
      de opciones dependientes de arquitectura y de dispositivos
      puede consultar el fichero <code class="filename">NOTES</code>
      en el mismo directorio donde está el fichero
      <code class="filename">GENERIC</code>.  Si quiere ver las
      opciones independientes de arquitectura consulte
      <code class="filename">/usr/src/sys/conf/NOTES</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede generar un fichero que contenga todas las opciones
        disponibles en un kernel.  Esto es algo que solamente se
	usa para hacer pruebas.  Si quiere generarlo ejecute, como
	<code class="systemitem">root</code>, lo siguiente:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf &amp;&amp; make LINT</code></strong></pre></div><a id="idp70272080" class="indexterm"></a><p>A continuación veremos un ejemplo de fichero de
      configuración de un kernel <code class="filename">GENERIC</code>
      al que se han añadido comentarios adicionales donde se
      ha visto que era necesario abundar un poco para mayor
      claridad.  Este ejemplo es igual (o, en el
      peor de los casos, casi igual) que la copia del mismo
      que tiene usted en
      <code class="filename">/usr/src/sys/i386/conf/GENERIC</code>.
      </p><a id="idp70274384" class="indexterm"></a><pre class="programlisting">machine		i386</pre><p>Esta es la arquitectura de la máquina.  Debe ser
      <code class="literal">alpha</code>, <code class="literal">amd64</code>,
      <code class="literal">i386</code>, <code class="literal">ia64</code>,
      <code class="literal">pc98</code>, <code class="literal">powerpc</code> o
      <code class="literal">sparc64</code>.</p><a id="idp70279248" class="indexterm"></a><pre class="programlisting">cpu          I486_CPU
cpu          I586_CPU
cpu          I686_CPU</pre><p>Las opciones anteriores definen el tipo de CPU que
      haya en su sistema.  Puede dejar varias líneas
      de CPU (si, por ejemplo, no está seguro de usar
      <code class="literal">I586_CPU</code> o <code class="literal">I686_CPU</code>),
      pero si está personalizando su kernel es mucho mejor
      que solamente ponga la CPU que tenga.  Si no está
      seguro de la CPU que tiene busque en los mensajes de arranque
      que se guardan en
      <code class="filename">/var/run/dmesg.boot</code>.</p><a id="idp70282320" class="indexterm"></a><pre class="programlisting">ident          GENERIC</pre><p>Este es el identificador del kernel.  Modifíquelo
      para que cuadre con el nombre que le haya dado a su kernel,
      es decir, <code class="literal">MIKERNEL</code>
      si ha seguido los ejemplos anteriores.  El valor que asigne
      a la cadena <code class="literal">ident</code> será el que
      se muestre cuando arranque con su kernel, así que
      es útil darle a su kernel un nombre distintivo que
      permita distinguirlo fácilmente de otros, por ejemplo,
      si está compilando un kernel experimental.</p><pre class="programlisting">#To statically compile in device wiring instead of /boot/device.hints
#hints          "GENERIC.hints"         # Default places to look for devices.</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> se usa para configurar opciones
      de controladores de dispositivo.  La ubicación por
      defecto en la que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> buscará durante
      el arranque es <code class="filename">/boot/device.hints</code>.  Si usa
      la opción <code class="literal">hints</code> puede compilar el
      contenido de <code class="filename">device.hints</code> en su kernel,
      lo que hará innecesario crear ese fichero en
      <code class="filename">/boot</code>.</p><pre class="programlisting">makeoptions     DEBUG=-g          # Build kernel with gdb(1) debug symbols</pre><p>El proceso normal de compilación en FreeBSD
      incluye información de depuración de
      errores si se compila un kernel con la opción
      <code class="option">-g</code>, que activa la información
      de depuración de errores al pasar a
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gcc</span>(1)</span></a>.</p><pre class="programlisting">options          SCHED_4BSD         # 4BSD scheduler</pre><p>El planificador de tareas tradicional y por omisión
      de FreeBSD.  Déjelo como está.</p><pre class="programlisting">options          PREEMPTION         # Enable kernel thread preemption</pre><p>Permite que hilos que están en el kernel
      puedan asociarse con hilos cuya prioridad sea más
      alta.  Ayuda con la interactividad y permite que los hilos
      interrumpidos puedan ejecutarse antes en lugar de tener
      que esperar.</p><pre class="programlisting">options          INET              # InterNETworking</pre><p>Networking.  Deje esto como está, incluso si no
      tiene en mente conectar la máquina a una red.  Muchos
      programas necesitan al menos disponer de lo que se llama
      «loopback networking» (esto es, poder efectuar
      conexiones de red con su propia máquina) así
      que tener esto es obligatorio.</p><pre class="programlisting">options          INET6             # IPv6 communications protocols</pre><p>Activa los protocolos de comunicación IPv6.</p><pre class="programlisting">options          FFS               # Berkeley Fast Filesystem</pre><p>El sistema de ficheros básico para discos
      duros.  Debe dejarlo como está si pretende
      poder arrancar desde disco duro.</p><pre class="programlisting">options          SOFTUPDATES       # Enable FFS Soft Updates support</pre><p>Activa Soft Updates en el kernel, lo que acelerará
      los accesos de escritura a sus discos.  Esta funcionalidad
      la facilita el kernel, pero debe activarse para cada disco
      de forma específica.  Revise la salida de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> y verá si Soft Updates está
      activado en los discos de su sistema.  Si no aparece la
      opción <code class="literal">soft-updates</code> actívela
      mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> (para sistemas de ficheros ya
      existentes) o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> (en el caso de sistemas
      de ficheros nuevos).</p><pre class="programlisting">options          UFS_ACL           # Support for access control lists</pre><p>Esta opción activa en el kernel las listas
      de control de acceso.  Consiste en el uso de atributos
      extendidos y <acronym class="acronym">UFS2</acronym> junto con las
      características que se describen detalladamente
      en la <a class="xref" href="#fs-acl" title="14.12. Listas de control de acceso a sistemas de ficheros">Sección 14.12, &#8220;Listas de control de acceso a sistemas de ficheros&#8221;</a>.  Las <acronym class="acronym">ACL</acronym>
      por omisión están activadas, y no deben
      desactivarse del kernel una vez que hayan sido usadas
      en un sistema de ficheros puesto que eliminará
      las listas de control de acceso y el modo en el que
      se protegen esos ficheros de un modo totalmente
      fuera de control.</p><pre class="programlisting">options          UFS_DIRHASH       # Improve performance on big directories</pre><p>This option includes functionality to speed up disk
      operations on large directories, at the expense of using
      additional memory.  You would normally keep this for a large
      server, or interactive workstation, and remove it if you are
      using FreeBSD on a smaller system where memory is at a premium and
      disk access speed is less important, such as a firewall.</p><pre class="programlisting">options          MD_ROOT           # MD is a potential root device</pre><p>Esta opción permite que la partición
      raíz esté en un disco virtual basado en
      memoria.</p><a id="idp70314448" class="indexterm"></a><a id="idp70315600" class="indexterm"></a><pre class="programlisting">options          NFSCLIENT         # Network Filesystem Client
options          NFSSERVER         # Network Filesystem Server
options          NFS_ROOT          # NFS usable as /, requires NFSCLIENT</pre><p>NFS, el sistema de ficheros en red.  Salvo que tenga
      intención de montar particiones de sistemas de ficheros
      <span class="trademark">UNIX</span>® de un servidor a través de TCP/IP puede
      comentar estas opciones.</p><a id="idp70318032" class="indexterm"></a><pre class="programlisting">options          MSDOSFS           # MSDOS Filesystem</pre><p>El sistema de ficheros <span class="trademark">MS-DOS</span>®.  Salvo que tenga en mente
      montar particiones de disco duro con formato DOS durante el
      arranque puede comentar esta opción.  En caso de
      necesidad esta funcionalidad se cargará
      automáticamente.  También tiene a su
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a>,
      que le permitirá acceder a disquetes DOS sin tener
      que montarlos y desmontarlos (y ni siquiera requiere
      <code class="literal">MSDOSFS</code>).</p><pre class="programlisting">options          CD9660            # ISO 9660 Filesystem</pre><p>El sistema de ficheros ISO 9660 para CDROM.  Coméntelo
      si no tiene unidad CDROM o solamente monta CD muy de
      vez en cuando; cuando lo necesite el sistema lo cargará
      dinámicamente.  Los CD de sonido no utilizan este
      sistema de ficheros.</p><pre class="programlisting">options          PROCFS            # Process filesystem (requires PSEUDOFS)</pre><p>El sistema de ficheros de procesos.  Es un sistema
      de ficheros <span class="quote">&#8220;<span class="quote">simulado</span>&#8221;</span> que se monta en
      <code class="filename">/proc</code> y permite a programas como
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> suministrar más información
      sobre qué procesos están
      ejecutándose.  En la mayoaría de los casos
      no es necesario usar <code class="literal">PROCFS</code>,
      puesto que la mayoría de las herramientas de
      monitorización y depuración han sido
      adaptadas para que funcionen sin
      <code class="literal">PROCFS</code>.  De hecho aunque lo instale
      el sistema no lo montará por omisión.</p><pre class="programlisting">options          PSEUDOFS          # Pseudo-filesystem framework</pre><p>Los kernel 6.X pueden usar <code class="literal">PSEUDOFS</code>
        al utilizar <code class="literal">PROCFS</code>.</p><pre class="programlisting">options          GEOM_GPT          # GUID Partition Tables.</pre><p>Con esta opción se puede tener una gran cantidad
      de particiones en un único disco.</p><pre class="programlisting">options          COMPAT_43         # Compatible with BSD 4.3 [KEEP THIS!]</pre><p>Compatibilidad con 4.3BSD.  Déjelo como está;
      ciertos programas pueden comportarse de formas muy
      extrañas si comenta esta opción.</p><pre class="programlisting">options          COMPAT_FREEBSD4   # Compatible with FreeBSD4</pre><p>FreeBSD 5.X en sistemas <span class="trademark">i386</span>&#8482; y Alpha necesita
      esta opción para poder usar aplicaciones compiladas
      en versiones antiguas de FreeBSD que utilizan, por tanto,
      llamadas al sistema más antiguas.  Esta opción
      no es necesaria en plataformas en las que funciona FreeBSD
      desde 5.X, como ia64 y <span class="trademark">Sparc64</span>®.</p><pre class="programlisting">options          COMPAT_FREEBSD5   # Compatible with FreeBSD5</pre><p>Esta opción hace falta en sistemas FreeBSD 6.X
      y versiones posteriores para poder ejecutar aplicaciones
      compiladas en FreeBSD 5.X, que usan interfaces de llamada
      al sistema FreeBSD 5.X.</p><pre class="programlisting">options          SCSI_DELAY=5000  # Delay (in ms) before probing SCSI</pre><p>Hace que el kernel haga una pausa de 5 segundos antes de
      probar los dispositivos SCSI del sistema.  Si solamente tiene
      discos IDE puede ignorar esta opción, o también
      puede asignarle un valor menos para evitar el retardo en el
      arranque.  Si lo hace y FreeBSD tiene problemas para reconocer
      dispositivos SCSI en el sistema es obvio que tendrá
      que incrementar el valor.</p><pre class="programlisting">options          KTRACE            # ktrace(1) support</pre><p>Activa las trazas en el kernel, algo muy útil para
      la depuración de errores.</p><pre class="programlisting">options          SYSVSHM           # SYSV-style shared memory</pre><p>Facilita memoria compartida System V.  El uso
      más habitual es la extensión XSHM de X, que
      utiliza la mayoría de programas que hacen uso
      intensivo de los gráficos para incrementar la
      velocidad.  Si usa X es casi seguro que le vendrá bien
      esta opción.</p><pre class="programlisting">options          SYSVMSG           # SYSV-style message queues</pre><p>Mensajes System V.  Esta opción añade
      solamente unos cuantos bytes al kernel.</p><pre class="programlisting">options          SYSVSEM           # SYSV-style semaphores</pre><p>Semáforos System V.  No es demasiado frecuente
      que se utilicen, pero solamente añaden unos
      cuantos cientos de bytes al kernel.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La opción <code class="option">-p</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipcs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ipcs</span>(1)</span></a>
        le mostrará una lista de procesos que estén
	utilizando características
	System V.</p></div><pre class="programlisting">options 	     _KPOSIX_PRIORITY_SCHEDULING # POSIX P1003_1B real-time extensions</pre><p>Extensiones en tiempo real añadidas en 1993
      <span class="trademark">POSIX</span>®.  Ciertas aplicaciones de la Colección de
      Ports las utilizan, por ejemplo
      <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>.</p><pre class="programlisting">options          KBD_INSTALL_CDEV  # install a CDEV entry in /dev</pre><p>This option is required to allow the creation of keyboard device
      nodes in <code class="filename">/dev</code>.</p><pre class="programlisting">options          ADAPTIVE_GIANT    # Giant mutex is adaptive.</pre><p>Giant es un mecanismo de exclusión mutua
      («sleep mutex») que protege un gran conjunto
      de recursos del kernel.  Hoy en dia no es asumible tener
      un cuello de botella así por el impacto que tiene
      en el rendimiento, así que está siendo
      reemplazado por bloqueos que protegen los recursos de
      manera individual.  <code class="literal">ADAPTIVE_GIANT</code>
      hace que Giant sea incluido en un conjunto de
      «mutextes» que va rotando
      Esto es, cuando un hilo quiere
      bloquear el Giant mutex (pero ya está bloqueado
      por un hilo de otra CPU) el primer hilo seguirá
      ejecutándose a la espera de que se libere el
      bloqueo.  Generalmente el hilo volverá al estado
      de reposo y esperará hasta que aparezca otra
      oportunidad de ejecutarse.  Si no está seguro de
      lo que está haciendo es mejor que deje esta
      opción tal y como está.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tenga en cuenta que en FreeBSD 8.0-CURRENT y
        versiones siguientes todos los «mutexes»
	son adaptables por omisión, salvo que se use
	la opción
	<code class="literal">NO_ADAPTIVE_MUTEXES</code>.  El resultado
	evidente que es Giant es adaptable por omisión,
	así que la opción
	<code class="literal">ADAPTIVE_GIANT</code> ha sido eliminada de
	la configuración.</p></div><a id="idp70350544" class="indexterm"></a><pre class="programlisting">device          apic               # I/O APIC</pre><p>El dispositivo apic activa la E/S APIC en la entrega
      de interrupciones.  El dispositivo apic puede usarse tanto en
      kernels para un procesador (UP) como para sistemas
      multiprocesador (SMP).  Si añada
      <code class="literal">options SMP</code> funcionará en
      sistemas multiprocesador.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El dispositivo apic existe solamente en la
        arquitectura i386, de modo que no debe usarse
	esta línea en otras arquitecturas.</p></div><pre class="programlisting">device          eisa</pre><p>Use esta opción si tiene una placa base
      EISA.  Activa la detección automática y
      permite la configuración de todos los dispositivos
      que estén en el bus EISA.</p><pre class="programlisting">device          pci</pre><p>Use esta opción si tiene una placa PCI.  Permite
      la detección automática de tarjetas PCI y
      permite la configuración entre el bus ISA y el
      PCI.</p><pre class="programlisting"># Floppy drives
device          fdc</pre><p>Este dispositivo es el controlador de la unidad de
      disquetes.</p><pre class="programlisting"># ATA and ATAPI devices
device          ata</pre><p>Este controlador permite utilizar dispositivos ATA
      y ATAPI.  Si añade al kernel
      one <code class="literal">device ata</code> éste detectará
      cualquier dispositivo ATA/ATAPI PCI que conecte a una
      máquina moderna.</p><pre class="programlisting">device          atadisk                 # ATA disk drives</pre><p>Si usa <code class="literal">device ata</code> tendrá que
      añadir también esto para poder usar unidades
      de disco ATA.</p><pre class="programlisting">device          ataraid                 # ATA RAID drives</pre><p>Si usa <code class="literal">device ata</code> tendrá que
      añadir también esto para poder usar unidades
      de disco ATA RAID.</p><pre class="programlisting"><a id="kernelconfig-atapi"></a>
device          atapicd                 # ATAPI CDROM drives</pre><p>Si usa <code class="literal">device ata</code> tendrá que
      añadir también esto para poder usar unidades
      ATAPI CDROM.</p><pre class="programlisting">device          atapifd                 # ATAPI floppy drives</pre><p>Si usa <code class="literal">device ata</code> tendrá que
      añadir también esto para poder usar unidades
      de disquete ATAPI.</p><pre class="programlisting">device          atapist                 # ATAPI tape drives</pre><p>Si usa <code class="literal">device ata</code> tendrá que
      añadir también esto para poder usar unidades
      de cinta ATAPI.</p><pre class="programlisting">options         ATA_STATIC_ID           # Static device numbering</pre><p>Con esta opción hace que el número de
      controladores sea estático; si no se usa los
      números de dispositivo se asignan
      dinámicamente.</p><pre class="programlisting"># SCSI Controllers
device          ahb        # EISA AHA1742 family
device          ahc        # AHA2940 and onboard AIC7xxx devices
options         AHC_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~128k to driver.
device          ahd        # AHA39320/29320 and onboard AIC79xx devices
options         AHD_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~215k to driver.
device          amd        # AMD 53C974 (Teckram DC-390(T))
device          isp        # Qlogic family
#device         ispfw      # Firmware for QLogic HBAs- normally a module
device          mpt        # LSI-Logic MPT-Fusion
#device         ncr        # NCR/Symbios Logic
device          sym        # NCR/Symbios Logic (newer chipsets + those of `ncr')
device          trm        # Tekram DC395U/UW/F DC315U adapters

device          adv        # Advansys SCSI adapters
device          adw        # Advansys wide SCSI adapters
device          aha        # Adaptec 154x SCSI adapters
device          aic        # Adaptec 15[012]x SCSI adapters, AIC-6[23]60.
device          bt         # Buslogic/Mylex MultiMaster SCSI adapters

device          ncv        # NCR 53C500
device          nsp        # Workbit Ninja SCSI-3
device          stg        # TMC 18C30/18C50</pre><p>Controladoras SCSI.  Coméntelas si no las tiene
      en su sistema.  Si en su sistema tiene solamente unidades IDE
      puede borrarlas todas.
      Las líneas <code class="literal">*_REG_PRETTY_PRINT</code> son
      opciones de depuración de errores de sus
      respectivos controladores de dispositivo.</p><pre class="programlisting"># SCSI peripherals
device          scbus      # SCSI bus (required for SCSI)
device          ch         # SCSI media changers
device          da         # Direct Access (disks)
device          sa         # Sequential Access (tape etc)
device          cd         # CD
device          pass       # Passthrough device (direct SCSI access)
device          ses        # SCSI Environmental Services (and SAF-TE)</pre><p>Periféricos SCSI.  Estos también puede
      borrarlos sin problemas si no los tiene en su sistema o
      si solamente tiene hardware IDE.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El controlador USB <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> (y unos cuantos
        controladores más) utilizan el subsistema
	SCSI aunque no sean dispositivos SCSI reales.  No elimine
	el subsistema SCSI del kernel si va a utilizar cualquiera
	de estos controladores.</p></div><pre class="programlisting"># RAID controllers interfaced to the SCSI subsystem
device          amr        # AMI MegaRAID
device          arcmsr     # Areca SATA II RAID
device          asr        # DPT SmartRAID V, VI and Adaptec SCSI RAID
device          ciss       # Compaq Smart RAID 5*
device          dpt        # DPT Smartcache III, IV - See NOTES for options
device          hptmv      # Highpoint RocketRAID 182x
device          rr232x     # Highpoint RocketRAID 232x
device          iir        # Intel Integrated RAID
device          ips        # IBM (Adaptec) ServeRAID
device          mly        # Mylex AcceleRAID/eXtremeRAID
device          twa        # 3ware 9000 series PATA/SATA RAID

# RAID controllers
device          aac        # Adaptec FSA RAID
device          aacp       # SCSI passthrough for aac (requires CAM)
device          ida        # Compaq Smart RAID
device          mfi        # LSI MegaRAID SAS
device          mlx        # Mylex DAC960 family
device          pst        # Promise Supertrak SX6000
device          twe        # 3ware ATA RAID</pre><p>Controladoras RAID que pueden utilizarse en FreeBSD.  Si no las
      tiene en su sistema puede borrarlas.</p><pre class="programlisting"># atkbdc0 controls both the keyboard and the PS/2 mouse
device          atkbdc     # AT keyboard controller</pre><p>El controlador de teclado (<code class="literal">atkbdc</code>)
      ofrece servicios de E/S con teclados AT y ratones PS/2.  El
      controlador de teclado
      (<code class="literal">atkbd</code>) y el controlador de ratón PS/2
      (<code class="literal">psm</code>) necesitan este dispositivo.</p><pre class="programlisting">device          atkbd      # AT keyboard</pre><p>El controlador <code class="literal">atkbd</code>, junto con el
      controlador <code class="literal">atkbdc</code>, permiten utilizar el
      teclado AT 84 u otros tipos de teclados AT mejorados que se
      conecten mediante el controlador de teclado AT.</p><pre class="programlisting">device          psm        # PS/2 mouse</pre><p>Utilice este dispositivo si conecta su ratón en el
      puerto PS/2.</p><pre class="programlisting">device          kbdmux        # keyboard multiplexer</pre><p>Funcionalidad básica para múltiples
      teclados.  Si no tiene en mente usar más de un
      teclado en el sistema puede borrar esta línea
      sin mayor problema.</p><pre class="programlisting">device          vga        # VGA video card driver</pre><p>El controlador de la tarjeta gráfica.</p><pre class="programlisting">
device          splash     # Splash screen and screen saver support</pre><p>«Splash screen» en el arranque.  Los salvapantallas
      necesitan este dispositivo.</p><pre class="programlisting"># syscons is the default console driver, resembling an SCO console
device          sc</pre><p><code class="literal">sc</code> por omisión es el controlador
      de dispositivo de la consola; se parece mucho a una consola de
      SCO.  Dado que muchos programas de pantalla completa acceden
      a la consola a través de la biblioteca de bases de datos
      de terminal
      <code class="filename">termcap</code> no tiene demasiada importancia si
      usa <code class="literal">vt</code>, el controlador de consola compatible
      <code class="literal">VT220</code>.  Cuando acceda al sistema asigne a
      su variable <code class="envar">TERM</code> el valor
      <code class="literal">scoansi</code>si los programas a pantalla completa
      tienen algún problema para acceder a la consola.</p><pre class="programlisting"># Enable this for the pcvt (VT220 compatible) console driver
#device          vt
#options         XSERVER          # support for X server on a vt console
#options         FAT_CURSOR       # start with block cursor</pre><p>El controlador de dispositivo VT220-compatible;
      es compatible con VT100/102, anterior a él.  Funciona
      bien en ciertos sistemas portátiles que adolecen de
      incompatibilidad de harware con
      <code class="literal">sc</code>.  Asigne a su variable de entorno
      <code class="envar">TERM</code> el valor <code class="literal">vt100</code> o
      <code class="literal">vt220</code> cuando acceda al sistema.  Este
      controlador le puede ser de utilidad si tiene que acceder
      a gran cantidad de máquinas a través de una
      red, una situación en la que suele suceder que
      <code class="filename">termcap</code> o
      <code class="filename">terminfo</code> no están ahí
      para que las use <code class="literal">sc</code>.
      <code class="literal">vt100</code>, por el contrario, debería
      aparecer en práticamente cualquier
      plataforma.</p><pre class="programlisting">device          agp</pre><p>Utilice esta opción si tiene en el sistema una
      tarjeta AGP.  Activará AGP y también AGP GART
      si su tarjeta puede usarla.</p><a id="idp70566992" class="indexterm"></a><pre class="programlisting"># Power management support (see NOTES for more options)
#device          apm</pre><p>Gestión avanzada de la energía.  Muy
      útil en sistemas portátiles.  Viene
      desactivada por omisión en el kernel
      <code class="filename">GENERIC</code> .</p><pre class="programlisting"># Add suspend/resume support for the i8254.
device           pmtimer</pre><p>Controlador del reloj para eventos de gestión de la
      energía, como APM y ACPI.</p><pre class="programlisting"># PCCARD (PCMCIA) support
# PCMCIA and cardbus bridge support
device          cbb               # cardbus (yenta) bridge
device          pccard            # PC Card (16-bit) bus
device          cardbus           # CardBus (32-bit) bus</pre><p>Dispositivos PCMCIA.  Si el sistema es portátil
      necesita tener esto activado.</p><pre class="programlisting"># Serial (COM) ports
device          sio               # 8250, 16[45]50 based serial ports</pre><p>Estos son los puertos serie a los que se conoce como
      puertos <code class="filename">COM</code> en entornos
      <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si tiene un módem interno en
        <code class="filename">COM4</code> un puerto serie en
	<code class="filename">COM2</code> tendrá que
	asignar a la IRQ del módem el 2 (por razones
	técnicas ignotas IRQ2 = IRQ 9) para que pueda
	acceder al dispositivo desde FreeBSD.  Si tiene una tarjeta
	serie multipuerto consulte la página de manual de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> si quiere más detalles sobre los
	valores que debe añadir a
	<code class="filename">/boot/device.hints</code>.  Algunas tarjetas
	gráficas (sobre todo las que usan chips S3) utilizan
	direcciones IO del tipo
	<code class="literal">0x*2e8</code> y dado que muchas tarjetas serie
	de baja calidad no decodifican correctamente el espacio de
	direcciones de 16 bits chocan con estas tarjetas, haciendo
	que el puerto <code class="filename">COM4</code> sea
	prácticamente inútil.</p><p xmlns="http://www.w3.org/1999/xhtml">Es necesario que cada puerto serie tenga una IRQ
        única (salvo que use una tarjeta multipuerto que
	permita compartir interrupciones), así que las
	IRQ de <code class="filename">COM3</code> y de
	<code class="filename">COM4</code> no se pueden
	utilizar.</p></div><pre class="programlisting"># Parallel port
device          ppc</pre><p>El interfaz del puerto paralelo de bus ISA.</p><pre class="programlisting">device          ppbus      # Parallel port bus (required)</pre><p>El bus del puerto paralelo.</p><pre class="programlisting">device          lpt        # Printer</pre><p>Permite usar el puerto paralelo para conectar impresoras.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Necesitará disponer de los tres anteriores para
        poder utilizar impresoras mediante el puerto paralelo.</p></div><pre class="programlisting">device          plip       # TCP/IP over parallel</pre><p>Este controlador es para la interfaz de red a través
      del puerto paralelo.</p><pre class="programlisting">device          ppi        # Parallel port interface device</pre><p>La E/S de propósito general (conocida
      también como <span class="quote">&#8220;<span class="quote">puerto geek</span>&#8221;</span>) + E/S
      IEEE1284.</p><pre class="programlisting">#device         vpo        # Requires scbus and da</pre><a id="idp70582992" class="indexterm"></a><p>Este dispositivo se usa con unidades Iomega Zip.  Necesita
      <code class="literal">scbus</code> y <code class="literal">da</code> .  El mejor
      rendimiento se alcanza con el uso de los puertos en modo
      EPP 1.9.</p><pre class="programlisting">#device         puc</pre><p>Puede utilizar este dispositivo si tiene una tarjeta
      PCI <span class="quote">&#8220;<span class="quote">tonta</span>&#8221;</span> (por puerto serie o paralelo)
      que funcione mediante el controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=puc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">puc</span>(4)</span></a>.</p><pre class="programlisting"># PCI Ethernet NICs.
device          de         # DEC/Intel DC21x4x (<span class="quote">&#8220;<span class="quote">Tulip</span>&#8221;</span>)
device          em         # Intel PRO/1000 adapter Gigabit Ethernet Card
device          ixgb       # Intel PRO/10GbE Ethernet Card
device          txp        # 3Com 3cR990 (<span class="quote">&#8220;<span class="quote">Typhoon</span>&#8221;</span>)
device          vx         # 3Com 3c590, 3c595 (<span class="quote">&#8220;<span class="quote">Vortex</span>&#8221;</span>)</pre><p>Diversos controladores para tarjetas de red PCI.  Puede borrar
      todas las que no estén en su sistema.</p><pre class="programlisting"># PCI Ethernet NICs that use the common MII bus controller code.
# NOTE: Be sure to keep the 'device miibus' line in order to use these NICs!
device          miibus     # MII bus support</pre><p>El poder utilizar bus MII es necesario para ciertas tarjetas
      Ethernet PCI 10/100, más concretamente las que usan
      transceptores compatibles con MII o implementan interfaces
      de control de transceptores que funcionan como si fueran
      MII.  Si incluye <code class="literal">device miibus</code> al kernel
      dispondrá de la API miibus genérica  y todos los
      controladores PHY, incluyendo uno que hará funcionar
      hardware que, siendo del tipo PHY, no está bajo ninguno
      de los controladores PHY específicos.</p><pre class="programlisting">device          bce        # Broadcom BCM5706/BCM5708 Gigabit Ethernet
device          bfe        # Broadcom BCM440x 10/100 Ethernet
device          bge        # Broadcom BCM570xx Gigabit Ethernet
device          dc         # DEC/Intel 21143 and various workalikes
device          fxp        # Intel EtherExpress PRO/100B (82557, 82558)
device          lge        # Level 1 LXT1001 gigabit ethernet
device          msk        # Marvell/SysKonnect Yukon II Gigabit Ethernet
device          nge        # NatSemi DP83820 gigabit ethernet
device          nve        # nVidia nForce MCP on-board Ethernet Networking
device          pcn        # AMD Am79C97x PCI 10/100 (precedence over 'lnc')
device          re         # RealTek 8139C+/8169/8169S/8110S
device          rl         # RealTek 8129/8139
device          sf         # Adaptec AIC-6915 (<span class="quote">&#8220;<span class="quote">Starfire</span>&#8221;</span>)
device          sis        # Silicon Integrated Systems SiS 900/SiS 7016
device          sk         # SysKonnect SK-984x &amp; SK-982x gigabit Ethernet
device          ste        # Sundance ST201 (D-Link DFE-550TX)
device          stge       # Sundance/Tamarack TC9021 gigabit Ethernet
device          ti         # Alteon Networks Tigon I/II gigabit Ethernet
device          tl         # Texas Instruments ThunderLAN
device          tx         # SMC EtherPower II (83c170 <span class="quote">&#8220;<span class="quote">EPIC</span>&#8221;</span>)
device          vge        # VIA VT612x gigabit ethernet
device          vr         # VIA Rhine, Rhine II
device          wb         # Winbond W89C840F
device          xl         # 3Com 3c90x (<span class="quote">&#8220;<span class="quote">Boomerang</span>&#8221;</span>, <span class="quote">&#8220;<span class="quote">Cyclone</span>&#8221;</span>)</pre><p>Controladores que utilizan el código del controlador
      de bus MII.</p><pre class="programlisting"># ISA Ethernet NICs.  pccard NICs included.
device          cs         # Crystal Semiconductor CS89x0 NIC
# 'device ed' requires 'device miibus'
device          ed         # NE[12]000, SMC Ultra, 3c503, DS8390 cards
device          ex         # Intel EtherExpress Pro/10 and Pro/10+
device          ep         # Etherlink III based cards
device          fe         # Fujitsu MB8696x based cards
device          ie         # EtherExpress 8/16, 3C507, StarLAN 10 etc.
device          lnc        # NE2100, NE32-VL Lance Ethernet cards
device          sn         # SMC's 9000 series of Ethernet chips
device          xe         # Xircom pccard Ethernet

# ISA devices that use the old ISA shims
#device         le</pre><p>Controladores Ethernet ISA.  Consulte
      <code class="filename">/usr/src/sys/i386/conf/NOTES</code>
      para más detalles sobre qué tarjetas hace funcionar
      qué controlador.</p><pre class="programlisting"># Wireless NIC cards
device          wlan            # 802.11 support</pre><p>802.11 genérico.  Necesitará esta línea
      si va a usar redes inalámbricas.</p><pre class="programlisting">device          wlan_wep        # 802.11 WEP support
device          wlan_ccmp       # 802.11 CCMP support
device          wlan_tkip       # 802.11 TKIP support</pre><p>Criptografía en dispositivos 802.11.  Necesita
      estas líneas si quiere utilizar criptografía
      y protocolos de seguridad 802.11.</p><pre class="programlisting">device          an         # Aironet 4500/4800 802.11 wireless NICs.
device          ath             # Atheros pci/cardbus NIC's
device          ath_hal         # Atheros HAL (Hardware Access Layer)
device          ath_rate_sample # SampleRate tx rate control for ath
device          awi        # BayStack 660 and others
device          ral        # Ralink Technology RT2500 wireless NICs.
device          wi         # WaveLAN/Intersil/Symbol 802.11 wireless NICs.
#device         wl         # Older non 802.11 Wavelan wireless NIC.</pre><p>Diversas tarjetas inalámbricas.</p><pre class="programlisting"># Pseudo devices
device   loop          # Network loopback</pre><p>El dispositivo de «loopback» para
      TCP/IP.  Si accede por telnet o FTP
      or FTP to <code class="systemitem">localhost</code> también
      conocido como <code class="systemitem">127.0.0.1</code>) lo hará a
      través de este dispositivo.  Es
      <span class="emphasis"><em>imprescindible</em></span> tenerlo en el
      sistema.</p><pre class="programlisting">device   random        # Entropy device</pre><p>Generador de números criptográficamente
      seguro.</p><pre class="programlisting">device   ether         # Ethernet support</pre><p><code class="literal">ether</code> solo es necesario si tiene
      alguna tarjeta Ethernet.  Incluye código
      genérico del protocolo Ethernet.</p><pre class="programlisting">device   sl            # Kernel SLIP</pre><p><code class="literal">sl</code> permite utilizar SLIP.  Ha sido
      sustituido casi totalmente por PPP, que es más
      fácil de usar, está mejor capacitado para
      la conexión de módem a módem y es,
      en general, claramente mejor.</p><pre class="programlisting">device   ppp           # Kernel PPP</pre><p>Este dispositivo incluye en el kernel la capacidad de
      gestionar conexiones de llamada entrante
      «dial-up».  Hay también una versión
      de PPP implementada como aplicación de usuario; utiliza
      <code class="literal">tun</code> y ofrece más flexibilidad y
      características como la llamada bajo
      petición.</p><pre class="programlisting">device   tun           # Packet tunnel.</pre><p>Este dispositivo lo usa el software PPP de usuario.
      Consulte la sección sobre
      <a class="link" href="#userppp" title="25.2. Uso de User PPP">PPP</a> de este mismo libro.</p><pre class="programlisting"><a id="kernelconfig-ptys"></a>
device   pty           # Pseudo-ttys (telnet etc)</pre><p>Este dispositivo es una <span class="quote">&#8220;<span class="quote">pseudoterminal</span>&#8221;</span>,
      o un puerto de entrada al sistema simulado.  Se usa en
      sesiones entrantes de <code class="command">telnet</code> y
      <code class="command">rlogin</code>; también lo usan
      <span class="application">xterm</span> y otras aplicaciones, entre
      las que encontramos a <span class="application">Emacs</span>.</p><pre class="programlisting">device   md            # Memory <span class="quote">&#8220;<span class="quote">disks</span>&#8221;</span></pre><p>Pseudodispositivos de disco basados en memoria.</p><pre class="programlisting">device   gif           # IPv6 and IPv4 tunneling</pre><p>Este dispositivo implementa túneles de IPv6
      sobre IPv4, IPv4 sobre IPv6, IPv4 sobre IPv4 e
      IPv6 sobre IPv6.  El dispositivo
      <code class="literal">gif</code> se puede clonar a sí mismo,
      así que los nodos de dispositivo se van creando a
      medida que van haciendo falta.</p><pre class="programlisting">device   faith         # IPv6-to-IPv4 relaying (translation)</pre><p>Este pseudodispositivo captura paquetes que se le
      hayan enviado y los dirige hacia el dæmon de
      traducción IPv4/IPv6.</p><pre class="programlisting"># The `bpf' device enables the Berkeley Packet Filter.
# Be aware of the administrative consequences of enabling this!
# Note that 'bpf' is required for DHCP.
device   bpf           # Berkeley packet filter</pre><p>El filtro de paquetes de Berkeley. Este pseudodispositivo
      permite poner interfaces de red en modo promíscuo, lo que
      significa que capturan todos los paquetes que circulen por una
      red broadcast (por ejemplo una Ethernet).  Dichos paquetes
      pueden guardarse en disco para su posterior examen mediante
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> (el análisis con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> no
      puede hacerse directamente también).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a> también lo usa
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> para obtener direcciones IP del
	encaminador (gateway) por omisión.  Si usa
	DHCP deje esta opción como está.</p></div><pre class="programlisting"># USB support
device          uhci          # UHCI PCI-&gt;USB interface
device          ohci          # OHCI PCI-&gt;USB interface
device          ehci          # EHCI PCI-&gt;USB interface (USB 2.0)
device          usb           # USB Bus (required)
#device         udbp          # USB Double Bulk Pipe devices
device          ugen          # Generic
device          uhid          # <span class="quote">&#8220;<span class="quote">Human Interface Devices</span>&#8221;</span>
device          ukbd          # Keyboard
device          ulpt          # Printer
device          umass         # Disks/Mass storage - Requires scbus and da
device          ums           # Mouse
device          ural          # Ralink Technology RT2500USB wireless NICs
device          urio          # Diamond Rio 500 MP3 player
device          uscanner      # Scanners
# USB Ethernet, requires mii
device          aue           # ADMtek USB Ethernet
device          axe           # ASIX Electronics USB Ethernet
device          cdce          # Generic USB over Ethernet
device          cue           # CATC USB Ethernet
device          kue           # Kawasaki LSI USB Ethernet
device          rue           # RealTek RTL8150 USB Ethernet</pre><p>Diversos dispositivos USB.</p><pre class="programlisting"># FireWire support
device          firewire      # FireWire bus code
device          sbp           # SCSI over FireWire (Requires scbus and da)
device          fwe           # Ethernet over FireWire (non-standard!)</pre><p>Diversos dispositivos Firewire.</p><p>Tiene más información y una lista
      con más dispositivos que funcionan en FreeBSD
      consulte
      <code class="filename">/usr/src/sys/i386/conf/NOTES</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70641104"></a>8.6.1. Configuraciones con grandes cantidades de memoria
	  (<acronym class="acronym">PAE</acronym>)</h3></div></div></div><a id="idp70642128" class="indexterm"></a><p>Las máquinas que tienen configuraciones
	  con grandes cantidades de memoria necesitan acceder
	  a más de 4 gigabytes de espacio de direcciones
	  <acronym class="acronym">KVA</acronym> (User+Kernel Virtual
	  Address).  Debido a esta limitación Intel
	  añadió a las CPU <span class="trademark">Pentium</span>® Pro y modelos
	  posteriores la posibilidad de acceso al espacio de
	  direcciones físicas de 36 bits.</p><p><acronym class="acronym">PAE</acronym> (Physical Address Extension)
	  a las CPU <span class="trademark">Intel</span>® <span class="trademark">Pentium</span>® Pro y los modelos posteriores
	  configuraciones de memoria de hasta 64 gigabytes.
	  Para poder aprovechar esto en FreeBSD existe la
	  opción del kernel
	  <code class="option">PAE</code>, disponible en todas las versiones
	  modernas de FreeBSD.  A causa de esta limitación de
	  memoria en los Intel no hay nada que distinga de
	  algún modo la memoria situada por debajo del
	  límite de los 4 gigabytes.  La memoria que
	  esté por encima de los 4 gigabytes se coloca
	  en el «pool» de memoria disponible.</p><p>Si quiere activar <acronym class="acronym">PAE</acronym> en el kernel
	  tiene que añadir la siguiente liínea al
	  fichero de configuración del kernel:</p><pre class="programlisting">options		    PAE</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD <acronym class="acronym">PAE</acronym> solamente existe
	    en procesadores <span class="trademark">Intel</span>® IA-32.  Hemos de advertirle
	    de que <acronym class="acronym">PAE</acronym> no ha sido probado
	    todo lo necesario, así que debe considerarse
	    de calidad beta, sobre todo si se le compara con
	    otras características de FreeBSD.</p></div><p><acronym class="acronym">PAE</acronym> en FreeBSD tiene varias
	  limitaciones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un solo proceso no puede acceder a más
	      de 4 gigabytes de espacio VM.</p></li><li class="listitem"><p>No puede cargar módulos
	      <acronym class="acronym">KLD</acronym> en un kernel que tenga
	      <acronym class="acronym">PAE</acronym> activado debido a las diferencias
	      existentes entre el «framework» de
	      compilación del módulo y el del
	      kernel mismo.</p></li><li class="listitem"><p>Los controladores de dispositivo que utilizan
	      el interfaz <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_dma&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">bus_dma</span>(9)</span></a> pueden provocar
	      corrupción de datos en un kernel con
	      <acronym class="acronym">PAE</acronym> activado, una excelente
	      razón para no utilizarlos.  Esta es
	      la razón de que FreeBSD incorpore un fichero
	      de configuración de un kernel
	      <code class="filename">PAE</code> del que se han
	      extraído todos los módulos que
	      se sabe que no funcionan en un kernel con
	      <acronym class="acronym">PAE</acronym> activado.</p></li><li class="listitem"><p>Algunos «system tunables» determinan el
	      uso de recursos de memoria basándose en la
	      memoria física disponible.  Estos «tunables»
	      pueden asignar más memoria de la que realmente
	      debieran debido a que el sistema <acronym class="acronym">PAE</acronym>
	      está íntimamente ligado a cantidades
	      bastante importantes de memoria.  Un ejemplo de esto
	      es la sysctl <code class="option">kern.maxvnodes</code>, que
	      controla el número máximo de vnodes
	      permitidos en el kernel.  Le recomendamos que
	      ajuste este y otros tunables dentro valores
	      razonables.</p></li><li class="listitem"><p>Es posible que tenga que aumentar el espacio virtual
	      de direcciones del kernel (el <acronym class="acronym">KVA</acronym>)
	      o reducir la cantidad de recursos exclusivos del kernel
	      que se utilicen exhaustivamente (ver más
	      arriba) para evitar que <acronym class="acronym">KVA</acronym> literalmente
	      se ahogue.  La opción del kernel
	      <code class="option">KVA_PAGES</code> permite incrementar el
	      espacio <acronym class="acronym">KVA</acronym>.</p></li></ul></div><p>Si quiere saber más sobre la estabilidad
	  del sistema consulte la página de manual de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>.  La página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pae&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pae</span>(4)</span></a>
	  contiene información actualizada sobre
	  <acronym class="acronym">PAE</acronym> y FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-trouble"></a>8.7. Qué hacer si algo va mal</h2></div></div></div><p>Hay cuatro categorías de problemas que
      podemos encontrarnos en el proceso de compilación
      de un kernel personalizado:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Fallo de <code class="command">config</code>:</span></dt><dd><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> falla cuando le pasa la
	    descripción de su kernel seguramente ha
	    cometido algún pequeño error.  Por
	    suerte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> les mostrará el
	    número de la línea que le está
	    dando problemas, así que no tendrá
	    mayor problema para localizarla. Veamos un
	    ejemplo:</p><pre class="screen">config: line 17: syntax error</pre><p>Si ve algo así asegúrese de que
	     ha tecleado la palabra clave que hay en esa
	     lína.  Compare la de su fichero de
	     configuración del kernel con la de
	    <code class="filename">GENERIC</code>.</p></dd><dt><span class="term">Fallo de <code class="command">make</code>:</span></dt><dd><p>If the <code class="command">make</code> command fails, it usually
	    signals an error in your kernel description which is not severe
	    enough for <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> to catch.  Again, look
	    over your configuration, and if you still cannot resolve the
	    problem, send mail to the <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">lista de correo para preguntas generales sobre FreeBSD</a> with your kernel
	    configuration, and it should be diagnosed quickly.</p></dd><dt><span class="term">El kernel no arranca:<a id="kernelconfig-noboot"></a></span></dt><dd><p>Si su nuevo kernel no arranca o no reconoce sus
	    dispositivos de hardware no desespere.  FreeBSD
	    dispone de excelentes mecanismos de
	    recuperación ante kernels defectuosos.  Elija
	    el kernel con el que quiere arrancar en el gestor
	    de arranque de FreeBSD.  Puede acceder al gestor de
	    arranque en el momento en el que aparece el
	    menú de arranque.  Elija la opción
	    número seis, <span class="quote">&#8220;<span class="quote">Escape to a loader
	    prompt</span>&#8221;</span> option, Escriba en el prompt
	    <code class="command">unload kernel</code>
            y después escriba
	    <code class="command">boot /boot/kernel.old/kernel</code>,
            o el nombre de cualquier otro kernel que tenga en el sistema
	    y del que sepa que puede fiarse.  Si va a reconfigurar un
	    kernel es una buenísima idea guardar un kernel
	    que sepa que funciona.</p><p>Tras arrancar con un kernel de fiar verifique el
	    fichero de configuración e intente de nuevo
	    una compilación.  El fichero
	    <code class="filename">/var/log/messages</code> es una fuente de
	    información muy valiosa puesto que registra, entre
	    otras cosas, todos los mensajes que deja el kernel cada
	    vez que hay un arranque satisfactorio.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	    le mostrará los mensajes que el kernel ha
	    generado durante el último arranque.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si tiene problemas compilando un kernel recuerde que
	      es de vital importancia que guarde una copia de un kernel
	      <code class="filename">GENERIC</code> u otro del que pueda fiarse
	      y que (esto es muy importante) tenga un nombre distinto de
	      <code class="filename">kernel.old</code> para evitar que el sistema
	      lo borre una vez que termine una nueva
	      compilación.  No puede confiar en su kernel
	      <code class="filename">kernel.old</code> porque al instalar un nuevo
	      kernel (que aún no sabe si será el que
	      funcione tal y como espera de él) el kernel
	      <code class="filename">kernel.old</code> se sobreescribe con el
	      kernel que instale.  Otra cosa importante es que copie
	      ese kernel de fiar a
	      <code class="filename">/boot/kernel</code>, o
	      ciertas herramientas como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> no
	      funcionarán.  Basta con que haga lo
	      siguiente:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel /boot/kernel.malo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel.bueno /boot/kernel</code></strong></pre></div></dd><dt><span class="term">El kernel funciona, pero <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> no:</span></dt><dd><p>Si el kernel que tiene instalado es de una
	    versión de FreeBSD y las utilidades del sistema
	    son de otra, por ejemplo un kernel -CURRENT en una
	    -RELEASE, hay muchas herramientas de monitorización
	    del sistema como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vmstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vmstat</span>(8)</span></a> no
	    funcionarán.
	    Ejecute un <a class="link" href="#makeworld" title="23.4. Uso de make world">make buildworld y un
	    make install world</a> con la misma versión de
	    código fuente con la que ha compilado su
	    kernel.  Esta es una de las razones por las que no
	    es una idea demasiado buena utilizar versiones
	    diferentes de kernel y de sistema operativo.</p></dd></dl></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing"></a>Capítulo 9. Imprimir</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div><div><span class="authorgroup">Reestructurado y actualizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp70709072">9.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">9.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">9.3. Configuración básica</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">9.4. Configuración avanzada de impresoras</a></span></dt><dt><span class="sect1"><a href="#printing-using">9.5. Cómo utilizar impresoras</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">9.6. Alternativas a LPD</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">9.7. Solución de problemas</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp70709072"></a>9.1. Sinopsis</h2></div></div></div><a id="idp70713936" class="indexterm"></a><a id="idp70714448" class="indexterm"></a><p>FreeBSD puede utilizarse para imprimir en una gran variedad
      de impresoras, desde las antiguas impresoras de matriciales hasta
      las más modernas impresoras laser y todo lo que existe entre
      unas y otras, con lo que podrá imprimir con una calidad muy
      alta desde cualquier aplicación.</p><p>FreeBSD puede usarse también como
      servidor de impresión en red; FreeBSD puede
      recibir peticiones de impresión de una gran cantidad de
      sistemas, bien sean FreeBSD, <span class="trademark">Windows</span>® y <span class="trademark">Mac OS</span>®.
      FreeBSD se encarga de los trabajos se vayan imprimiendo uno tras
      otro y puede mantener estadísticas sobre qué
      usuarios y qué máquinas están imprimiendo
      más, generar páginas de «encabezado»
      para colocarlas antes de cada trabajo y distinguir así
      de quién es la impresión, etc.</p><p>Tras leer el presente capítulo sabrá usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cómo configurar la cola de impresión en FreeBSD.</p></li><li class="listitem"><p>Cómo instalar filtros de impresión para gestionar
	  diversos trabajos especiales como la conversión de documentos
	  a formatos aptos para su impresora.</p></li><li class="listitem"><p>Cómo habilitar encabezados en sus impresiones.</p></li><li class="listitem"><p>Cómo imprimir en impresoras conectadas a otras máquinas.</p></li><li class="listitem"><p>Cómo imprimir en impresoras conectadas directamente a la red.</p></li><li class="listitem"><p>Cómo controlar restricciones de impresión,
	  como por ejemplo limitaciones del tamaño de trabajos o
	  evitar que ciertos usuarios puedan imprimir.</p></li><li class="listitem"><p>Cómo mantener estadísticas de impresión
	  y cuentas de usuario de impresión.</p></li><li class="listitem"><p>Cómo solucionar los problemas de impresión
	  más comunes.</p></li></ul></div><p>Antes de leer este capítulo usted debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Saber cómo compilar e instalar un kernel
	  personalizado (<a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-spooler"></a>9.2. Introducción</h2></div></div></div><p>Si quiere utilizar impresoras con FreeBSD debe
      configurarlas de forma que funcionen con el sistema de cola de
      impresión de Berkeley, también conocido como
      sistema de cola <span class="application">LPD</span>.  Es el sistema
      de control de impresión estándar en FreeBSD.  Este
      capítulo trata sobre el sistema <span class="application">LPD</span>,
      al que en adelante nos referiremos simplemente como
      <span class="application">LPD</span>, y le introducirá
      en la configuración del mismo.</p><p>Si está familiarizado con el sistema de cola de
      impresión <span class="application">LPD</span>, o bien con
      algún otro sistema de impresión, puede pasar a la
      sección <a class="link" href="#printing-intro-setup" title="9.3. Configuración básica">Configuración del sistema de
      cola de impresión</a>.</p><p><span class="application">LPD</span> se encarga de controlar
      todo lo relacionado con la impresión, lo que en consecuencia
      implica encargarse de lo siguiente:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Controlar el acceso a las impresoras conectadas directamente
	  al sistema y a impresoras conectadas a otras
	  máquinas de la red.</p></li><li class="listitem"><a id="idp65141072" class="indexterm"></a><p>Permitir que ciertos usuarios puedan enviar ficheros para
	  su impresión; estos envíos reciben el nombre de
	  <span class="emphasis"><em>trabajos</em></span>
	  (<span class="quote">&#8220;<span class="quote">jobs</span>&#8221;</span>).</p></li><li class="listitem"><p>Evita que usuarios diferentes accedan a la impresora al
	  mismo tiempo manteniendo un orden estricto en la cola de
	  impresión de cada impresora.</p></li><li class="listitem"><p>Imprimir <span class="emphasis"><em>encabezados</em></span>
	  de forma que los usuarios puedan distinguir
	  fácilmente los trabajos que han impreso.</p></li><li class="listitem"><p>Se ocupa de los parámetros para impresoras
	  conectadas a puertos serie.</p></li><li class="listitem"><p>Enviar trabajos de impresión a través
	  de una red a la cola <span class="application">LPD</span> de una
	  máquina remota.</p></li><li class="listitem"><p>Ejecutar filtros especiales para formatear
	  trabajos que requieren la gestión de lenguajes
	  de impresión o impresoras de diferentes
	  características.</p></li><li class="listitem"><p>Mantener un registro del uso de la impresora.</p></li></ul></div><p>Gracias al fichero de configuración
      (<code class="filename">/etc/printcap</code>) y mediante programas
      especiales de filtrado puede hacerse que el sistema
      <span class="application">LPD</span> cumpla todas las tareas citadas o
      si lo prefiere solo unas cuantas; además puede hacerlo
      en una gran variedad de impresoras.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-intro-why"></a>9.2.1. ?Por qué utilizar una cola de impresión?</h3></div></div></div><p>Si es usted la única persona que usa el sistema
        se estará por qué preocuparse de utilizar un sistema
        de cola de impresión si es evidente que no necesita
	restricciones de acceso, encabezados ni cuentas de
	impresión.  Puede utilizar el acceso directo a
	impresión, pero debería utilizar una cola
	de impresión por las siguientes razones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El sistema <span class="application">LPD</span> ejecuta los trabajos
	    en segundo plano, esto es, no tiene que esperar a que la
	    impresora procese los datos para seguir trabajando.</p></li><li class="listitem"><a id="idp65152464" class="indexterm"></a><p><span class="application">LPD</span> puede procesar un
	    trabajo de forma que pase por filtros, añadir cabeceras
	    de fecha y hora o convertir un fichero de formato especial
	    (por ejemplo <span class="application">TeX</span> DVI) a un formato que la impresora entienda
	    y que no tenga usted que ocuparse de ello
	    manualmente.</p></li><li class="listitem"><p>Muchos programas, tanto libres como comerciales,
	    desde los que se puede imprimir están hechos pensando
	    en que haya disponible un sistema de impresión.
	    Una vez que configure un sistema de colas podrá utilizar
	    software que ya tiene instalado y preparar el campo para
	    el que instale en el futuro.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-setup"></a>9.3. Configuración básica</h2></div></div></div><p>Pendiente de traducción.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-advanced"></a>9.4. Configuración avanzada de impresoras</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-using"></a>9.5. Cómo utilizar impresoras</h2></div></div></div><p>Pendiente de traducción.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-lpd-alternatives"></a>9.6. Alternativas a LPD</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-troubleshooting"></a>9.7. Solución de problemas</h2></div></div></div><p>Pendiente de traducción</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu"></a>Capítulo 10. Compatibilidad binaria con Linux</h2></div><div><span class="authorgroup">Reestructurado y actualizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brian N.</span> <span class="surname">Handy</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Rich</span> <span class="surname">Murphey</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#linuxemu-synopsis">10.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">10.2. Instalación</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematica">10.3. Instalación de <span class="trademark">Mathematica</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-maple">10.4. Instalación de <span class="trademark">Maple</span>&#8482;</a></span></dt><dt><span class="sect1"><a href="#linuxemu-matlab">10.5. Instalación de <span class="trademark">MATLAB</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">10.6. Instalación de <span class="trademark">Oracle</span>®</a></span></dt><dt><span class="sect1"><a href="#sapr3">10.7. Instalación de <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-advanced">10.8. Temas avanzados</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-synopsis"></a>10.1. Sinopsis</h2></div></div></div><a id="idp70915152" class="indexterm"></a><a id="idp70915664" class="indexterm"></a><p>FreeBSD proporciona compatibilidad de binarios con muchos otros
      sistemas operativos tipo <span class="trademark">UNIX</span>®, incluyendo Linux.
      Puede estarse preguntando ?por qué necesita
      FreeBSD ejecutar binarios de Linux?  La
      respuesta a esa pregunta es muy simple.  Muchos desarrolladores y
      compañías desarrollan sólo para Linux, ya
      que últimamente es el blanco de todas las miradas dentro del
      mundo de las tecnologís de la información.
      Esto hace que la comunidad FreeBSD tenga que exigir a esas
      compañías y desarrolladores que produzcan versiones
      nativas de sus aplicaciones para FreeBSD.
      El problema es que la mayoría de esas compañías
      no suelen saber realmente cuánta gente utilizaría
      su producto si existieran esas versiones para FreeBSD, y
      la mayoría continúa desarrollando únicamente
      para Linux.
      Vista la situación ?que puede hacer un usuario de FreeBSD?
      Aquí es donde entra en juego la compatibilidad binaria con
      Linux.</p><p>Para expresarlo en pocas palabras, dicha compabitilidad permite
      a los usuarios de FreeBSD cerca del 90% de las aplicaciones de Linux sin
      tener que modificarlas en absoluto.  Entre estas está
      <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>,
      la versión Linux de <span class="application"><span class="trademark">Netscape</span>®</span>,
      <span class="application"><span class="trademark">Adobe</span>® <span class="trademark">Acrobat</span>®</span>,
      <span class="application">RealPlayer</span>,
      <span class="application">VMware</span>,
      <span class="application"><span class="trademark">Oracle</span>®</span>,
      <span class="application">WordPerfect</span>, <span class="application">Doom</span>,
      <span class="application">Quake</span> y muchas más. En determinados
       casos los binarios Linux rinden mejor en FreeBSD que en Linux.</p><p>Existen, por desgracia, ciertas características
      específicas de Linux que no funcionan en FreeBSD.
      Los binarios Linux no funcionarán en FreeBSD si recurren a
      llamadas específicas de <span class="trademark">i386</span>&#8482; como la activación
      del modo virtual 8086.</p><p>Tras leer este capítulo sabrá usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cómo activar la compatibilidad binaria con Linux en su
          sistema.</p></li><li class="listitem"><p>cómo instalar bibliotecas compartidas de Linux que pueda
          necesitar.
	  </p></li><li class="listitem"><p>cómo instalar aplicaciones de Linux en su sistema FreeBSD.</p></li><li class="listitem"><p>cuáles son los detalles de la implementación de
          compatibilidad binaria con Linux en FreeBSD.</p></li></ul></div><p>Antes de leer este capítulo es necesario que sepa:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cómo instalar software de
          terceros (<a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>10.2. Instalación</h2></div></div></div><a id="idp70934864" class="indexterm"></a><p>La compatibilidad binaria con Linux no viene activada
      por omisión.  La forma más sencilla de habilitarla
      es cargar el KLD (<span class="quote">&#8220;<span class="quote">objeto cargable en el kernel</span>&#8221;</span>)
      <code class="literal">linux</code>.  Como usuario
      <code class="systemitem">root</code> proceda del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Si quiere que la compatibilidad con Linux esté
      siempre activada tendrá que añadir la siguiente
      línea en <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">linux_enable="YES"</pre><p>Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a> para verificar que el KLD
      esté cargado:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp70945488" class="indexterm"></a><p>Si por alguna razón no desea o no puede cargar el KLD,
      entonces puede enlazar estáticamente la compatibilidad de binarios
      Linux en el kernel agregando <code class="literal">options COMPAT_LINUX</code>
      a su fichero de configuración del kernel. Luego instale
      su nuevo kernel como se describe en
      <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70947792"></a>10.2.1. Instalación de bibliotecas de ejecución Linux</h3></div></div></div><a id="idp70948432" class="indexterm"></a><p>Puede hacerse de dos maneras, ya sea usando
        el port <a class="link" href="#linuxemu-libs-port" title="10.2.1.1. Instalación usando el port linux_base">linux_base</a>,
        o instalándolas
	<a class="link" href="#linuxemu-libs-manually" title="10.2.1.2. Instalación manual de bibliotecas">de forma manual</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>10.2.1.1. Instalación usando el port linux_base</h4></div></div></div><a id="idp70951888" class="indexterm"></a><p>Este es con mucho el método mas sencillo
          para instalar bibliotecas de ejecución.  Es como
          instalar cualquier otro port de la
          <a class="link" href="file://localhost/usr/ports/" target="_top">Colección
          de Ports</a>. Es tan sencillo como esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>Hecho esto debería disponer de compatibilidad binaria con
          Linux.  Algunos programas pueden <span class="quote">&#8220;<span class="quote">quejarse</span>&#8221;</span> por
          la presencia de versiones antiguas de algunas bibliotecas del
          sistema.  Generalmente esto no suele ser un problema muy
	  grave.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pueden coexistir múltiples versiones
          del port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>
          disponibles correspondientes a distintas versiones de diversas
          distribuciones de Linux.  Tendrá que instalar el port
          que más se ajuste a las necesidades de las aplicaciones
          de Linux que quiera instalar.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>10.2.1.2. Instalación manual de bibliotecas</h4></div></div></div><p>Si, por el motivo que fuese, no tiene instalada
          la colección de ports puede instalar las bibliotecas
          que necesite de forma manual.
          Necesitará las bibliotecas compartidas Linux de
          las que depende el programa y el enlazador en tiempo de
          ejecución (<span class="quote">&#8220;<span class="quote">runtime linker</span>&#8221;</span>).
          Necesitará también
          crear un directorio
          <code class="filename">/compat/linux</code> donde alojar las bibliotecas
          Linux en su sistema FreeBSD  Cualquier biblioteca compartida a la
          que haya recurrido un programa de Linux ejecutado en FreeBSD
          buscará en primer lugar en dicho directorio.
          Por lo tanto, si se carga un
          programa Linux, por ejemplo <code class="filename">/lib/libc.so</code>,
          FreeBSD intentará en primer lugar abrir
          <code class="filename">/compat/linux/lib/libc.so</code> y, si no
          existe, lo intentará con
	  <code class="filename">/lib/libc.so</code>.  Las bibliotecas
	  compartidas deben instalarse en
	  <code class="filename">/compat/linux/lib</code> en lugar de las rutas que
	  el <code class="command">ld.so</code> de Linux proporcione.</p><p>En general, necesitará buscar las bibliotecas
          compartidas de las que los binarios Linux dependen
          sólamente las primeras veces que instale un programa
          Linux en su FreeBSD.  Más adelante tendrá un conjunto
          suficiente de bibliotecas compartidas Linux en su sistema
          para poder ejecutar binarios Linux sin que tenga que hacer nada
          más.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70961488"></a>10.2.1.3. Cómo instalar bibliotecas compartidas adicionales</h4></div></div></div><a id="idp70962128" class="indexterm"></a><p>?Que pasaría si instalara el port
	  <code class="filename">linux_base</code> y su aplicación
	  todavía tuviera problemas debido a bibliotecas compartidas
          que no encuentra en el sistema?
	  ?Cómo saber qué bibliotecas compartidas
	  necesitan los binarios Linux? Básicamente hay dos
          posibilidades (para poder ejecutar las siguientes instrucciones
	  necesitará estar como <code class="systemitem">root</code>
	  </p><p>Si tiene acceso a un sistema Linux busque en él
          qué bibliotecas necesita la aplicación, y
          cópielas a su sistema FreeBSD.  Veamos unos ejemplos:
          </p><div class="informalexample"><p>Asumiremos que utilizó FTP para conseguir los
            binarios Linux de <span class="application">Doom</span> y los
            puso en un sistema Linux.
            Para ver qué bibliotecas compartidas necesitará
            ejecute <code class="command">ldd linuxdoom</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp70966736" class="indexterm"></a><p>Necesitaría todos los ficheros de la
            segunda columna, y tendrá que ponerlos en
            <code class="filename">/compat/linux</code> con los nombres de
            la primera columna como enlaces
            simbólicos apuntando hacia ellos.  De este modo
            tendría en su sistema FreeBSD los siguientes ficheros:
            </p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Recuerde que si ya tiene una biblioteca
                compartida Linux con un número de versión
                mayor que coincida con la primera columna de la salida de
                <code class="command">ldd</code> no necesitará copiar el
                fichero que aparece en la última columna;
                el que tiene debería funcionar, aunque se aconseja
                copiar la biblioteca compartida de todas maneras
                si es una nueva versión.  Puede eliminar la vieja
                siempre que haga que el enlace simbólico apunte
                a la nueva.  Si tiene estas bibliotecas
                en su sistema:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">y  un binario requiere
                una versión más reciente (como indica la
                siguiente salida de <code class="command">ldd</code>):</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">si solo ve una o dos versiones desfasadas en los
                últimos dígitos no se preocupe
                de copiar <code class="filename">/lib/libc.so.4.6.29</code>,
                el programa debería funcionar
                bien con una versión ligeramente antigua.
                De todas formas, si así lo prefiere, puede actualizar
                <code class="filename">libc.so</code>; el resultado sería
                este:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El mecanismo de enlazado simbólico
                <span class="emphasis"><em>sólamente</em></span> es necesario con
                binarios Linux.  El enlazador en tiempo de ejecución
                de FreeBSD se encarga de buscar él mismo las versiones
                correctas, así que no tendrá que preocuparse
                usted de hacerlo.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70983504"></a>10.2.2. Instalar binarios ELF Linux</h3></div></div></div><a id="idp70988368" class="indexterm"></a><p>Los binarios ELF algunas veces requieren un paso extra de
        <span class="quote">&#8220;<span class="quote">marcado</span>&#8221;</span>.  Si trata de ejecutar un binario ELF no
        marcado recibirá un mensaje de error como el siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./mi-binario-elf</code></strong>
ELF binary type not known
Abort</pre><p>Para ayudar al kernel de FreeBSD a distinguir entre un binario
        ELF de FreeBSD y uno de Linux utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux mi-binario-elf-de-linux</code></strong></pre><a id="idp70993360" class="indexterm"></a><p>Las herramientas GNU se encargan de ubicar automáticamente
        la marca apropiada en los binarios ELF, por lo tanto este
        paso será innecesario en un futuro próximo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70994384"></a>10.2.3. Configuración de la resolución de nombres de
       equipos</h3></div></div></div><p>Si el DNS no funciona u obtiene este mensaje:</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>Necesitará un fichero
        <code class="filename">/compat/linux/etc/host.conf</code>
        con el siguiente contenido:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>Significa que
        <code class="filename">/etc/hosts</code> seráanalizado en primer lugar
        y después se usará DNS.
	Si <code class="filename">/compat/linux/etc/host.conf</code> no
        está instalado, las aplicaciones Linux usan el
	<code class="filename">/etc/host.conf</code> de FreeBSD y chocan con la
	sintaxis (incompatible) de FreeBSD.  Borre
	<code class="literal">bind</code> de su <code class="filename">/etc/resolv.conf</code>
        si no tiene configurado un servidor de nombres.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-mathematica"></a>10.3. Instalación de <span class="trademark">Mathematica</span>®</h2></div><div><span class="authorgroup">Actualizado para Mathematica 5.X por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hollas</span> <span class="surname">Boris</span></span>. </span></div></div></div><a id="idp71006928" class="indexterm"></a><p>Este documento describe el proceso de instalación
      de la versión para Linux de
      <span class="application"><span class="trademark">Mathematica</span>® 5.X</span> en un sistema
      FreeBSD.</p><p>Puede pedir a Wolfram, el fabricante, La versión para
      para Linux de <span class="application"><span class="trademark">Mathematica</span>®</span> o
      la versión de
      <span class="application"><span class="trademark">Mathematica</span>® para estudiantes</span>
      en su sitio web,
      <code class="uri"><a class="uri" href="http://www.wolfram.com/" target="_top">http://www.wolfram.com/</a></code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71011792"></a>10.3.1. El instalador de <span class="trademark">Mathematica</span>®</h3></div></div></div><p>Lo primero que tiene que hacer es decirle a FreeBSD
	que los binarios de <span class="application"><span class="trademark">Mathematica</span>®</span>
	para Linux utilizan la ABI Linux.  La forma más
	sencilla de hacerlo es marcar por omisión todos los
	binarios sin marcas como Linux ELF.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.fallback_elf_brand=3</code></strong></pre><p>Hecho esto FreeBSD asumirá que cualquier binario
        sin marca que encuentre utiliza la ABI Linux; de este modo
	podrá ejecutar el binario directamente desde el
	CDROM.</p><p>Copie el fichero <code class="filename">MathInstaller</code> en su
        disco duro</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp /cdrom/Unix/Installers/Linux/MathInstaller /directoriolocal/</code></strong></pre><p>Edite este fichero y sustituya la primera línea,
        <code class="literal">/bin/sh</code>, por
	<code class="literal">/compat/linux/bin/sh</code> para asegurarnos de
	que lo que ejecute el instalador sea la verión
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a> de Linux.  El siguiente paso es sustituir todos
	los <code class="literal">Linux)</code> por <code class="literal">FreeBSD)</code>
	con un editor de texto on con el script que encontrará
	en la siguiente sección.  Esto se hace para ayudar al
	instalador de <span class="application"><span class="trademark">Mathematica</span>®</span>,
	el cual en un cierto momento invoca a
	<code class="command">uname -s</code> para determinar el sistema operativo,
	a tratar a FreeBSD como si fuera un sistema operativo muy similar
	a Linux.  Hecho todo esto, cuando ejecute
	<code class="command">MathInstaller</code> podrá instalar
	<span class="application"><span class="trademark">Mathematica</span>®</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71026768"></a>10.3.2. Modificación de los ejecutables de <span class="trademark">Mathematica</span>®</h3></div></div></div><p>Debe modificar los scripts de shell que
	<span class="application"><span class="trademark">Mathematica</span>®</span> creó durante
	la instalación antes de usarlos.  Si eligió
	ubicar en
	<code class="filename">/usr/local/bin</code>
	los ejecutables de
	<span class="application"><span class="trademark">Mathematica</span>®</span> verá que
	en ese directorio hay enlaces simbólicos a ficheros
	como <code class="filename">math</code>, <code class="filename">mathematica</code>,
	<code class="filename">Mathematica</code> y
	<code class="filename">MathKernel</code>.  En cada uno de esos ficheros debe
	sustituir <code class="literal">Linux)</code> por <code class="literal">FreeBSD)</code>
	con un editor de texto o bien con el siguiente script de
	shell:</p><pre class="programlisting">#!/bin/sh
cd /usr/local/bin
for i in math mathematica Mathematica MathKernel
  do sed 's/Linux)/FreeBSD)/g' $i &gt; $i.tmp
  sed 's/\/bin\/sh/\/compat\/linux\/bin\/sh/g' $i.tmp &gt; $i
  rm $i.tmp
  chmod a+x $i
done</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71032784"></a>10.3.3. Cómo obtener una contraseña de <span class="trademark">Mathematica</span>®</h3></div></div></div><a id="idp71033808" class="indexterm"></a><p>Cuando arranque <span class="application"><span class="trademark">Mathematica</span>®</span>
	por primera vez se le pedirá una contraseña.  Si
	Wolfram no le ha enviado ya necesita un <span class="quote">&#8220;<span class="quote">machine ID</span>&#8221;</span>,
	para lo cual debe ir al directorio de instalación y ejecutar
	<code class="command">mathinfo</code>.  Este <span class="quote">&#8220;<span class="quote">machine IDE</span>&#8221;</span>
	se obtiene de la dirección MAC de la primera tarjeta
	Ethernet de la máquina y tiene como objetivo que no
	pueda ejecutar <span class="application"><span class="trademark">Mathematica</span>®</span> en
	más de una máquina.</p><p>Durante el proceso de registro en Wolfram (ya sea por
        correo electrónico, teléfono o fax) les dará
	el <span class="quote">&#8220;<span class="quote">machine ID</span>&#8221;</span> y Wolfram le enviará una
	contraseña relacionada con él, consistente en grupos
	de números.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71042896"></a>10.3.4. Ejecución del «frontend» de <span class="trademark">Mathematica</span>®
        través de una red</h3></div></div></div><p><span class="application"><span class="trademark">Mathematica</span>®</span> usa unos cuantos
        tipos especiales para mostrar caracteres que no están
	en ningún conjunto estándar de tipos: integrales,
	sumas, letras griegas, etc.  El protocolo X exige que los
	tipos estén instalados
	<span class="emphasis"><em>en local</em></span>, es decir, tiene que copiar los
	tipos del CDROM o la máquina desde la que ha instalado
	<span class="application"><span class="trademark">Mathematica</span>®</span> a su
	máquina.  Los tipos están en el directorio del CDDROM
	<code class="filename">/cdrom/Unix/Files/SystemFiles/Fonts</code> y se
	supone que deben estar en su disco duro en el directorio
	<code class="filename">/usr/local/mathematica/SystemFiles/Fonts</code>.  Los
	tipos están realmente en los subdirectorios
	<code class="filename">Type1</code> y <code class="filename">X</code>.  Hay varias
	formas de utilizarlos.</p><p>La primera es copiarlos en uno de los directorios de tipos
	que hay en <code class="filename">/usr/X11R6/lib/X11/fonts</code>, antes
	de lo cual tendrá que añadir a
	<code class="filename">fonts.dir</code> los nombres de los tipos;
	tendrá también que cambiar el número de
	tipos en la primera línea.  Por otra parte, todo esto
	puede hacerse ejecutando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkfontdir&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mkfontdir</span>(1)</span></a> en el directorio
	donde haya copiado los tipos.</p><p>La segunda forma de utilizar estos tipos es copiarlos
        bajo
	<code class="filename">/usr/X11R6/lib/X11/fonts</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/Unix/Files/SystemFiles/Fonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp X/* /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp Type1/* /usr/X11R6/lib/X11/fonts/MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkfontdir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd ../MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkfontdir</code></strong></pre><p>Añada los nuevos directorios de tipos a su ruta de
        tipos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>Si usa el servidor <span class="application">Xorg</span>
        puede cargar los tipos automáticamente
	añadiéndolos al fichero
	<code class="filename">xorg.conf</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En servidores <span class="application"><span class="trademark">XFree86</span>&#8482;</span>
	el fichero de configuración es
	<code class="filename">XF86Config</code>.</p></div><a id="idp71071952" class="indexterm"></a><p>Si <span class="emphasis"><em>no</em></span> tiene ya en su sistema un
	directorio <code class="filename">/usr/X11R6/lib/X11/fonts/Type1</code>
	puede cambiarle el nombre al directorio
	<code class="filename">MathType1</code> del ejemplo anterior
	por <code class="filename">Type1</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-maple"></a>10.4. Instalación de <span class="trademark">Maple</span>&#8482;</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Gracias a <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Getschmann</span></span>. </span></div></div></div><a id="idp71083216" class="indexterm"></a><p><span class="application"><span class="trademark">Maple</span>&#8482;</span> es un programa comercial
      de matemáticas
      similar a <span class="application"><span class="trademark">Mathematica</span>®</span>.  Puede adquirir
      este software en
      <code class="uri"><a class="uri" href="http://www.maplesoft.com/" target="_top">http://www.maplesoft.com/</a></code>;  tras registrarlo
      recibirá un fichero de licencia.  Si quiere instalar este
      software en FreeBSD siga los siguienes pasos:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Ejecute el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de shell
          <code class="filename">INSTALL</code>
          desde el lugar de instalación del producto.  Elija
          la opción <span class="quote">&#8220;<span class="quote">RedHat</span>&#8221;</span> cuando
          le pregunte el programa de instalación.
          <code class="filename">/usr/local/maple</code>
	  es un buen sitio para instalar el software.</p></li><li class="step"><p>Si no lo ha hecho ya, solicite una licencia
	  para <span class="application"><span class="trademark">Maple</span>&#8482;</span>
          a Maple Waterloo Software (<code class="uri"><a class="uri" href="http://register.maplesoft.com/" target="_top">http://register.maplesoft.com/</a></code>)
          y cópiela a
	  <code class="filename">/usr/local/maple/license/license.dat</code>.</p></li><li class="step"><p>Instale el gestor de licencias
	  <span class="application">FLEXlm</span>
          ejecutando el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de shell de instalación
          <code class="filename">INSTALL_LIC</code>
          que viene con <span class="application"><span class="trademark">Maple</span>&#8482;</span>.  Introduzca
          el nombre de su máquina (el servidor de licencias
          lo necesita).</p></li><li class="step"><p>Parchée el fichero
          <code class="filename">/usr/local/maple/bin/maple.system.type</code>
          con lo siguiente:</p><pre class="programlisting">   ----- snip ------------------
*** maple.system.type.orig      Sun Jul  8 16:35:33 2001
--- maple.system.type   Sun Jul  8 16:35:51 2001
***************
*** 72,77 ****
--- 72,78 ----
          # the IBM RS/6000 AIX case
          MAPLE_BIN="bin.IBM_RISC_UNIX"
          ;;
+     "FreeBSD"|\
      "Linux")
          # the Linux/x86 case
        # We have two Linux implementations, one for Red Hat and
   ----- snip end of patch -----</pre><p>Tenga muy presente que después de
          <code class="literal">"FreeBSD"|\</code>
          no debe haber ningún espacio en blanco.</p><p>Este parche le dice a <span class="application"><span class="trademark">Maple</span>&#8482;</span>
          que interprete <span class="quote">&#8220;<span class="quote">FreeBSD</span>&#8221;</span> como un tipo de sistema
          Linux.  El <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de shell
          <code class="filename">bin/maple</code>
          llama al <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de shell
          <code class="filename">bin/maple.system.type</code>,
          que a su vez recurre a <code class="command">uname -a</code> para
          dictaminar el nombre del sistema operativo.  Dependiendo de
          cuál sea sabrá qué binarios
          utilizar.</p></li><li class="step"><p>Inicio del servidor de licencias.</p><p>El siguiente <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>, sito en
          <code class="filename">/usr/local/etc/rc.d/lmgrd.sh</code>,  le
          permitirá arrancar <code class="command">lmgrd</code>:</p><pre class="programlisting">   ----- snip ------------

#! /bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
PATH=${PATH}:/usr/local/maple/bin:/usr/local/maple/FLEXlm/UNIX/LINUX
export PATH

LICENSE_FILE=/usr/local/maple/license/license.dat
LOG=/var/log/lmgrd.log

case "$1" in
start)
	lmgrd -c ${LICENSE_FILE} 2&lt;&lt; ${LOG} 1&lt;&amp;2
	echo -n " lmgrd"
	;;
stop)
	lmgrd -c ${LICENSE_FILE} -x lmdown 2&lt;&lt; ${LOG} 1&lt;&amp;2
	;;
*)
	echo "Usage: `basename $0` {start|stop}" 1&lt;&amp;2
	exit 64
	;;
esac

exit 0
   ----- snip ------------</pre></li><li class="step"><p>Prueba de arranque de <span class="application"><span class="trademark">Maple</span>&#8482;</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/maple/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>./xmaple</code></strong></pre><p>Todo debería funcionar perfectamente.  Si es así
          aún le queda un último paso: escribir a
          Maplesoft y decirles que sería genial una versión
          nativa para FreeBSD.</p></li></ol></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71145040"></a>10.4.1. Problemas frecuentes</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El gestor de licencias
	  <span class="application">FLEXlm</span> puede ser un tanto
          difícil de usar.  En caso de necesitarla tiene
          más información en
          <code class="uri"><a class="uri" href="http://www.globetrotter.com/" target="_top">http://www.globetrotter.com/</a></code>.</p></li><li class="listitem"><p><code class="command">lmgrd</code> tiene una reconocida fama
          de ser muy meticuloso en todo lo relacionado con el fichero de
          licencia; suele generar volcados de memoria si se encuentra con
          algún problema.  Un fichero de licencia correcto tiene
          que parecerse mucho a este:</p><pre class="programlisting"># =======================================================
# License File for UNIX Installations ("Pointer File")
# =======================================================
SERVER chillig ANY
#USE_SERVER
VENDOR maplelmg

FEATURE Maple maplelmg 2000.0831 permanent 1 XXXXXXXXXXXX \
         PLATFORMS=i86_r ISSUER="Waterloo Maple Inc." \
         ISSUED=11-may-2000 NOTICE=" Technische Universitat Wien" \
         SN=XXXXXXXXX</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El número de serie y la clave han sido
            sobreescritos con X.
            <code class="systemitem">chillig</code> es el nombre de un equipo.</p></div><p>Puede editar el fichero de licencia siempre que no
            toque la línea <span class="quote">&#8220;<span class="quote">FEATURE</span>&#8221;</span> (que está
            protegida por la clave de la licencia).</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-matlab"></a>10.5. Instalación de <span class="trademark">MATLAB</span>®</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Dan</span> <span class="surname">Pelleg</span></span>. </span></div></div></div><a id="idp71154000" class="indexterm"></a><p>Este documento describe el proceso de instalación de
      la versión para Linux de
      <span class="application"><span class="trademark">MATLAB</span>® version 6.5</span>
      en FreeBSD.  En general funciona bastante bien, excepción
      hecha de <span class="application"><span class="trademark">Java Virtual Machine</span>&#8482;</span>
      (consulte la <a class="xref" href="#matlab-jre" title="10.5.3. Enlace del entorno de ejecución Java&#8482;">Sección 10.5.3, &#8220;Enlace del entorno de ejecución <span class="trademark">Java</span>&#8482;&#8221;</a>).</p><p>La versión Linux de <span class="application"><span class="trademark">MATLAB</span>®</span>
      puede pedirse directamente en el sitio de  The MathWorks,
      <code class="uri"><a class="uri" href="http://www.mathworks.com" target="_top">http://www.mathworks.com</a></code>.  Tiene que
      recibir también el fichero de licencia o instrucciones
      de cómo crearlo.  Al hacer su pedido aproveche para decirles
      que sería muy buena idea que ofrecieran una versión
      nativa de su software para FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71158864"></a>10.5.1. Instalación de <span class="trademark">MATLAB</span>®</h3></div></div></div><p>Para instalar <span class="application"><span class="trademark">MATLAB</span>®</span>
        haga lo siguiente:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Inserte el CD de instalación y móntelo.
            Conviértase en <code class="systemitem">root</code> e
            inicie la instalación:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/compat/linux/bin/sh /cdrom/install</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">El instalador es gráfico. Si obtiene errores
              acerca de no ser capaz de abrir un display teclée
              <code class="command">setenv HOME ~USUARIO</code>,
              donde <em class="replaceable"><code>USUARIO</code></em> es el nombre del
              usuario con el que hizo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.</p></div></li><li class="step"><p>Teclée
	    <strong class="userinput"><code>/compat/linux/usr/local/matlab</code></strong>
            donde el instalador le pida el directorio raíz de
            <span class="application"><span class="trademark">MATLAB</span>®</span>.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Esto último le facilitará la entrada de datos
              durante el resto de la instalación.  Introduzca lo
              siguiente en el <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de su shell:
	      <code class="command">set MATLAB=/compat/linux/usr/local/matlab</code></p></div></li><li class="step"><p>Edite el fichero de licencia tal y como consta en las
            instrucciones de la licencia de <span class="application"><span class="trademark">MATLAB</span>®</span>.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede tenerlo ya editado y copiado a
              <code class="filename">$MATLAB/license.dat</code> desde antes de que
              el instalador se lo pida.</p></div></li><li class="step"><p>Complete el proceso de instalación.</p></li></ol></div><p>La instalación <span class="application"><span class="trademark">MATLAB</span>®</span>
        ha finalizado. Los siguientes pasos aplicarán el
        <span class="quote">&#8220;<span class="quote">pegamento</span>&#8221;</span> necesario para conectarlo a su
        sistema FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71190480"></a>10.5.2. Inicio del administrador de licencias</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Crée los enlaces simbólicos que necesitan los
            <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> del administrador
            de licencias:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</code></strong></pre></li><li class="step"><p>Crée un fichero de inicio en
            <code class="filename">/usr/local/etc/rc.d/flexlm.sh</code>.
            El siguiente ejemplo es una versión modificada de
            <code class="filename">$MATLAB/etc/rc.lm.glnx86</code> que viene con
            la distribución de <span class="application"><span class="trademark">MATLAB</span>®</span>.
            Los cambios que se han hecho en él obedecen a la
            ubicación de los ficheros y el arranque del
            administrador de licencias bajo emulación de Linux.
            </p><pre class="programlisting">#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <em class="replaceable"><code>nombre-de-usuario</code></em> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</pre><div xmlns="" class="important"><h3 class="admontitle">Importante: </h3><p xmlns="http://www.w3.org/1999/xhtml">El fichero debe ser ejecutable:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x /usr/local/etc/rc.d/flexlm.sh</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Tendrá que reemplazar la entrada
              <em class="replaceable"><code>nombre-de-usuario</code></em> de
              nuestro ejemplo por un nombre de usuario
              válido en su sistema
              (que no sea <code class="systemitem">root</code>).</p></div></li><li class="step"><p>Arranque el administrador de licencias:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/flexlm.sh start</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-jre"></a>10.5.3. Enlace del entorno de ejecución <span class="trademark">Java</span>&#8482;</h3></div></div></div><p>Cambie el enlace del entorno de ejecución
        <span class="application"><span class="trademark">Java</span>&#8482;</span>
        (JRE) a uno que funcione en FreeBSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $MATLAB/sys/java/jre/glnx86/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>unlink jre; ln -s ./jre1.1.8 ./jre</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71206096"></a>10.5.4. Creación de un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de arranque
        para <span class="trademark">MATLAB</span>®</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Coloque el siguiente <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de arranque en
	    <code class="filename">/usr/local/bin/matlab</code>:
	  </p><pre class="programlisting">#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</pre></li><li class="step"><p>Escriba
	    <code class="command">chmod +x /usr/local/bin/matlab</code>.</p></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dependiendo de su versión de
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> tal
          vez obtenga errores al ejecutar este <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>.
          Para evitarlo edite
          <code class="filename">/compat/linux/usr/local/matlab/bin/matlab</code>
          y cambie la línea en la que aparece:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</pre><p xmlns="http://www.w3.org/1999/xhtml">(en la versión 13.0.1 es en la línea 410) por
	  esta otra línea:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if test -L $newbase; then</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71222480"></a>10.5.5. Creación de un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> para detener
        <span class="trademark">MATLAB</span>®</h3></div></div></div><p>Este <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> solucionará
        las dificultades que pueda tener para detener <span class="trademark">MATLAB</span>®
        correctamente.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Crée un fichero llamado
            <code class="filename">$MATLAB/toolbox/local/finish.m</code> y
            ponga en él una sola línea con este
	    texto:</p><pre class="programlisting">! $MATLAB/bin/finish.sh</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">$MATLAB</code> debe escribirse
	    tal cual.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">En el mismo directorio encontrará los
              ficheros <code class="filename">finishsav.m</code> y
              <code class="filename">finishdlg.m</code>, que le
              permiten guardar su trabajo antes de
              salir de la aplicación.  Si quiere usar alguno de ellos,
              inserte la línea de arriba inmediatamente
              después de
              <code class="literal">save</code>.</p></div></li><li class="step"><p>Crée un fichero
            <code class="filename">$MATLAB/bin/finish.sh</code> con el siguiente
            contenido:</p><pre class="programlisting">#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &amp;
exit 0</pre></li><li class="step"><p>El fichero tiene que ser ejecutable:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x $MATLAB/bin/finish.sh</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-using"></a>10.5.6. Uso de <span class="trademark">MATLAB</span>®</h3></div></div></div><p>Desde este momento ya puede usted teclear
        <code class="command">matlab</code> y empezar a
        usarlo.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-oracle"></a>10.6. Instalación de <span class="trademark">Oracle</span>®</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marcel</span> <span class="surname">Moolenaar</span></span>. </span></div></div></div><a id="idp71238736" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71240016"></a>10.6.1. Prefacio</h3></div></div></div><p>Este texto describe el proceso de instalación de
        <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span>
        y <span class="application"><span class="trademark">Oracle</span>® 8.0.5.1 Enterprise Edition</span>
        para Linux en una
        máquina FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71247056"></a>10.6.2. Instalación del entorno Linux</h3></div></div></div><p>Debe tener instalados los ports
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>
        y <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/linux_devtools/pkg-descr">devel/linux_devtools</a>.
        Si tiene dificultades con estos ports es posible que tenga que
        usar los paquetes o quizás versiones más antiguas
        de dichas aplicaciones que encontrará en la Colección
        de Ports.</p><p>Si quiere usar el agente inteligente también
        tendrá que instalar el paquete Tcl de Red Hat,
        <code class="filename">tcl-8.0.3-20.i386.rpm</code>.  La orden
        genérica para instalar paquetes con el port oficial
        de <span class="application">RPM</span>
        (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/archivers/rpm/pkg-descr">archivers/rpm</a>) es:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm paquete</code></strong></pre><p>La instalación de dicho <em class="replaceable"><code>paquete</code></em> no debe generar ningún error.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71252176"></a>10.6.3. Creación del entorno <span class="trademark">Oracle</span>®</h3></div></div></div><p>Antes de instalar <span class="application"><span class="trademark">Oracle</span>®</span>
        tendrá que configurar un entorno apropiado.  Este documento
        solamente explica lo que hay que hacer
        <span class="emphasis"><em>especialmente</em></span> para utilizar la versión
        de Linux para <span class="application"><span class="trademark">Oracle</span>®</span> FreeBSD, no
        lo que figura en la guía de instalación de
        <span class="application"><span class="trademark">Oracle</span>®</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-kernel-tuning"></a>10.6.3.1. Personalización del kernel</h4></div></div></div><a id="idp71260880" class="indexterm"></a><p>Tal y como consta en la guía de instalación de
          <span class="application"><span class="trademark">Oracle</span>®</span>, debe configurar
          la cantidad máxima de memoria compartida.
          No utilice <code class="literal">SHMMAX</code> en FreeBSD.
          <code class="literal">SHMMAX</code> se calcula a partir de
          <code class="literal">SHMMAXPGS</code> y <code class="literal">PGSIZE</code>,
          así que defina <code class="literal">SHMMAXPGS</code>.  Todas
          las demás opciones pueden usarse tal y como se describen
          en la guía.  Por ejemplo:</p><pre class="programlisting">options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</pre><p>Configure estas opciones para que se ajusten al uso que
          pretenda darle a
          <span class="application"><span class="trademark">Oracle</span>®</span>.</p><p>Asegúrese también de que las siguientes
          opciones están en el fichero de configuración de
          su kernel:</p><pre class="programlisting">options SYSVSHM #SysV shared memory
options SYSVSEM #SysV semaphores
options SYSVMSG #SysV interprocess communication</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-oracle-account"></a>10.6.3.2. Cuenta <span class="trademark">Oracle</span>®</h4></div></div></div><p>Crée una cuenta <code class="systemitem">oracle</code> según
          el procedimiento habitual de creación de usuarios.
          La cuenta <code class="systemitem">oracle</code>, empero, tiene algo
          especial puesto que debe teer una shell <span class="emphasis"><em>de</em></span>
          Linux. Añada
          <code class="literal">/compat/linux/bin/bash</code> a
          <code class="filename">/etc/shells</code> y asigne a la
          cuenta <code class="systemitem">oracle</code>
          <code class="filename">/compat/linux/bin/bash</code> como shell
          por omisión.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-environment"></a>10.6.3.3. Entorno</h4></div></div></div><p>Además de las variables normales para
          <span class="application"><span class="trademark">Oracle</span>®</span>,
          como <code class="envar">ORACLE_HOME</code> y <code class="envar">ORACLE_SID</code>, debe
          configurar las siguientes variables de entorno:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Valor</th></tr></thead><tbody><tr><td><code class="envar">LD_LIBRARY_PATH</code></td><td><code class="literal">$ORACLE_HOME/lib</code></td></tr><tr><td><code class="envar">CLASSPATH</code></td><td><code class="literal">$ORACLE_HOME/jdbc/lib/classes111.zip</code></td></tr><tr><td><code class="envar">PATH</code></td><td><code class="literal">/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</code></td></tr></tbody></table></div><p>Le aconsejamos configurar todas las variables de entorno
          en <code class="filename">.profile</code>.  Veamos un ejemplo
	  completo:</p><pre class="programlisting">ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin
PATH=$PATH:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PATH=$PATH:/usr/local/bin:$ORACLE_HOME/bin
export PATH</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71292368"></a>10.6.4. Instalación de <span class="trademark">Oracle</span>®</h3></div></div></div><p>Debido a una pequeña inconsistencia en el emulador
        Linux tendrá que crear un directorio llamado
        <code class="filename">.oracle</code>
        en <code class="filename">/var/tmp</code> antes de iniciar el instalador.
        Haga que sea propiedad del usuario <code class="systemitem">oracle</code>.
        Hecho esto deberí poder instalar
	<span class="application"><span class="trademark">Oracle</span>®</span>
        sin ningún problema.  Si no es así
        <span class="emphasis"><em>revise su distribución</em></span>
        <span class="application"><span class="trademark">Oracle</span>®</span> y su
        configuración.  Una vez finalizada la instalación de
        <span class="application"><span class="trademark">Oracle</span>®</span> aplique los parches
        que se detallan en las dos siguientes subsecciones.</p><p>Un problema que se da con una cierta frecuencia es que el
        adaptador del protocolo TCP
        no está correctamente instalado.  Como consecuencia no
        puede iniciarse ninguna escucha TCP, a las que también se
	les llama directamente «listeners».  Esto le
	ayudará a resolver el problema.:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ar r libnetwork.a ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk install</code></strong></pre><p><span class="emphasis"><em>No se olvide de ejecutar <code class="filename">root.sh</code>
        de nuevo</em></span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-root"></a>10.6.4.1. Cómo parchear root.sh</h4></div></div></div><p>Durante la instalación de
          <span class="application"><span class="trademark">Oracle</span>®</span> algunas
          acciones que requieren ser ejecutadas como
          <code class="systemitem">root</code> deben almacenarse en un
          <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de shell llamado
          <code class="filename">root.sh</code>.  Dicho <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>
          está en el directorio <code class="filename">orainst</code>.
          Aplique el siguiente parche a <code class="filename">root.sh</code> para
          que utilice la ruta correcta de <code class="command">chown</code> o
          ejecute el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> bajo una shell nativa
          de Linux.</p><pre class="programlisting">*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</pre><p>Si no está instalando
          <span class="application"><span class="trademark">Oracle</span>®</span> desde un CD puede parchear
          las fuentes de <code class="filename">root.sh</code>.  Se llama
          <code class="filename">rthd.sh</code> y está en el directorio
          <code class="filename">orainst</code> del árbol de fuentes.
          </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-tcl"></a>10.6.4.2. Cómo parchear genclntsh</h4></div></div></div><p>El <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> <code class="command">genclntsh</code> se usa
          para crear una biblioteca de cliente compartida y para
          construir los demos. Al aplicar el siguiente parche
          comentará la definición de <code class="envar">PATH</code>:</p><pre class="programlisting">*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71322576"></a>10.6.5. Ejecución de <span class="trademark">Oracle</span>®</h3></div></div></div><p>Una vez seguidas estas instrucciones podrá ejecutar
        <span class="application"><span class="trademark">Oracle</span>®</span> como si la hubiera instalado
        en Linux.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sapr3"></a>10.7. Instalación de <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Holger</span> <span class="surname">Kipp</span></span>. </span></div><div><span class="authorgroup">Versión original convertida a SGML por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><a id="idp71330128" class="indexterm"></a><p>Las instalaciones de sistemas <span class="application"><span class="trademark">SAP</span>®</span>
      en FreeBSD no reciben soporte técnico de <span class="trademark">SAP</span>®.
      <span class="trademark">SAP</span>® solamente lo ofrece si se usan plataformas
      certificadas.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preface"></a>10.7.1. Introducción</h3></div></div></div><p>Este texto expone una forma de instalar
        un <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® System</span> con
        una <span class="application"><span class="trademark">Oracle</span>® Database</span>
        para Linux en una máquina FreeBSD, incluyendo la
        instalación de FreeBSD y <span class="application"><span class="trademark">Oracle</span>®</span>.
        Se muestran dos configuraciones diferentes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B (IDES)</span> con
	  <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span> en FreeBSD 4.3-STABLE</p></li><li class="listitem"><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C</span> con
	  <span class="application"><span class="trademark">Oracle</span>® 8.1.7</span> en FreeBSD 4.5-STABLE</p></li></ul></div><p>Aunque este documento trate de describir todos
        los pasos importantes con detalle no ha sido escrito como
        sustituto de las guías de instalación de
        <span class="application"><span class="trademark">Oracle</span>®</span> y
        <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.</p><p>Por favor, consulte la documentación de
        <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
        que se incluye en la edición para Linux de
        <span class="application"><span class="trademark">SAP</span>®</span>
        y las preguntas específicas sobre
        <span class="application"><span class="trademark">Oracle</span>®</span>,
        así como los recursos que estén a su disposición
        sobre  <span class="application"><span class="trademark">Oracle</span>®</span>
        y <span class="application"><span class="trademark">SAP</span>® OSS</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software"></a>10.7.2. Software</h3></div></div></div><p>Durante la instalación de <span class="application"><span class="trademark">SAP</span>®</span>
        se han utilizado los siguientes CD-ROM:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software-46b"></a>10.7.2.1. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B, <span class="trademark">Oracle</span>® 8.0.5</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Número</th><th>Descripción</th></tr></thead><tbody><tr><td>KERNEL</td><td>51009113</td><td>SAP Kernel Oracle /
		Installation / AIX, Linux, Solaris</td></tr><tr><td>RDBMS</td><td>51007558</td><td>Oracle / RDBMS 8.0.5.X /
		Linux</td></tr><tr><td>EXPORT1</td><td>51010208</td><td>IDES / DB-Export /
		Disco 1 de 6</td></tr><tr><td>EXPORT2</td><td>51010209</td><td>IDES / DB-Export /
		Disco 2 de 6</td></tr><tr><td>EXPORT3</td><td>51010210</td><td>IDES / DB-Export /
		Disco 3 de 6</td></tr><tr><td>EXPORT4</td><td>51010211</td><td>IDES / DB-Export /
		Disco 4 de 6</td></tr><tr><td>EXPORT5</td><td>51010212</td><td>IDES / DB-Export /
		Disco 5 de 6</td></tr><tr><td>EXPORT6</td><td>51010213</td><td>IDES / DB-Export /
		Disco 6 de 6</td></tr></tbody></table></div><p>También  utilizamos el CD de <span class="application"><span class="trademark">Oracle</span>® 8
        Server</span> (versión pre-producción
        8.0.5 para Linux, versión de kernel 2.0.33), que
        no es realmente necesario y FreeBSD 4.3-STABLE (a unos cuantos
        días de la liberación de 4.3-RELEASE).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software-46c"></a>10.7.2.2. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C SR2, <span class="trademark">Oracle</span>® 8.1.7</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Número</th><th>Descripción</th></tr></thead><tbody><tr><td>KERNEL</td><td>51014004</td><td>SAP Kernel Oracle /
		  SAP Kernel Version 4.6D / DEC, Linux</td></tr><tr><td>RDBMS</td><td>51012930</td><td>Oracle 8.1.7/ RDBMS /
		  Linux</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Disco 1 de 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Disco 2 de 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Disco 3 de 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Release 4.6C SR2 / Export
		  / Disco 4 de 4</td></tr><tr><td>LANG1</td><td>51013954</td><td>Release 4.6C SR2 /
		  Language / DE, EN, FR / Disco 1 de 3</td></tr></tbody></table></div><p>Según los idiomas que quiera usar es posible que
          necesite otros CD de idiomas.  Sólo hemos utilizado DE y
          EN, así que nos bastó con el primer CD.
          Para su información, los números de los cuatro CD
          EXPORT son idénticos.  Los tres CD de idiomas también
          tienen el mismo número, aunque esto es distinto en los CD de
          la versión 4.6B IDES.  Al escribir este texto
          (20.03.2002) ejecutamos la instalación en FreeBSD
          4.5-STABLE (20.03.2002).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes"></a>10.7.3. Notas <span class="trademark">SAP</span>®</h3></div></div></div><p>Las siguientes notas han resultado ser muy útiles
       durante la instalación, así que le recomendamos
       encarecidamente que las lea antes de instalar
        <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes-46b"></a>10.7.3.1. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B, <span class="trademark">Oracle</span>® 8.0.5</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Número</th><th>Título</th></tr></thead><tbody><tr><td>0171356</td><td>SAP Software on Linux: Essential
		  Comments</td></tr><tr><td>0201147</td><td>INST: 4.6C R/3 Inst. on UNIX -
		  Oracle</td></tr><tr><td>0373203</td><td>Update / Migration Oracle 8.0.5 --&gt;
		  8.0.6/8.1.6 LINUX</td></tr><tr><td>0072984</td><td>Release of Digital UNIX 4.0B for
		  Oracle</td></tr><tr><td>0130581</td><td>R3SETUP step DIPGNTAB terminates</td></tr><tr><td>0144978</td><td>Your system has not been installed
		  correctly</td></tr><tr><td>0162266</td><td>Questions and tips for R3SETUP on Windows
		  NT / W2K</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes-46c"></a>10.7.3.2. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C, <span class="trademark">Oracle</span>® 8.1.7</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Número</th><th>Título</th></tr></thead><tbody><tr><td>0015023</td><td>Initializing table TCPDB (RSXP0004)
		  (EBCDIC)</td></tr><tr><td>0045619</td><td>R/3 with several languages or
		  typefaces</td></tr><tr><td>0171356</td><td>SAP Software on Linux: Essential
		  Comments</td></tr><tr><td>0195603</td><td>RedHat 6.1 Enterprise version:
		  Known problems</td></tr><tr><td>0212876</td><td>The new archiving tool SAPCAR</td></tr><tr><td>0300900</td><td>Linux: Released DELL Hardware</td></tr><tr><td>0377187</td><td>RedHat 6.2: important remarks</td></tr><tr><td>0387074</td><td>INST: R/3 4.6C SR2 Installation on
		  UNIX</td></tr><tr><td>0387077</td><td>INST: R/3 4.6C SR2 Inst. on UNIX -
		  Oracle</td></tr><tr><td>0387078</td><td>SAP Software on UNIX: OS Dependencies
		  4.6C SR2</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-requirements"></a>10.7.4. Requisitos de hardware</h3></div></div></div><p>El siguiente equipo es suficiente para la instalación
        de un <span class="application">sistema <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.  Si pretende
        darle uso productivo necesitará hacer un estudio
        detallado de sus necesidades:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Componente</th><th>4.6B</th><th>4.6C</th></tr></thead><tbody><tr><td>Procesador</td><td><span class="trademark">Pentium</span>® III 800MHz x 2</td><td><span class="trademark">Pentium</span>® III 800MHz x 2</td></tr><tr><td>Memoria</td><td>1GB ECC</td><td>2GB ECC</td></tr><tr><td>Espacio en disco</td><td>50-60GB (IDES)</td><td>50-60GB (IDES)</td></tr></tbody></table></div><p>Para su uso en producción le recomendamos procesadores
        <span class="trademark">Xeon</span>&#8482; con una caché grande, discos de alta
        velocidad (SCSI, controlador de RAID por hardware), USV y
        ECC-RAM.  Un espacio en disco tan grande se debe al sistema
        IDES preconfigurado, que crea ficheros de bases de datos de
        27 GB durante la instalación.  Este espacio
        también es suficiente para sistemas de producción
        iniciales y datos de aplicación.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-46b"></a>10.7.4.1. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B, <span class="trademark">Oracle</span>® 8.0.5</h4></div></div></div><p>Este es el hardware que utilizamos al escribir este texto:
        placa base dual
        con 2 procesadores <span class="trademark">Pentium</span>® III a 800 MHz, adaptador
        SCSI <span class="trademark">Adaptec</span>® 29160 Ultra160 (para acceder a una unidad de cinta
        40/80 GB DLT y CDROM), <span class="trademark">Mylex</span>® <span class="trademark">AcceleRAID</span>&#8482; (2 canales,
        firmware 6.00-1-00 con 32 MB RAM). La controladora <span class="trademark">Mylex</span>® RAID
        tiene conectados dos discos duros de 17 GB
        (replicados) y cuatro discos duros de 36 GB (RAID nivel 5).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-46c"></a>10.7.4.2. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C, <span class="trademark">Oracle</span>® 8.1.7</h4></div></div></div><p>Para esta instalación se usó un <span class="trademark">Dell</span>&#8482; <span class="trademark">PowerEdge</span>&#8482;
        2500: placa base dual con 2 procesadores <span class="trademark">Pentium</span>® III
        a 1000 MHz (256 kB de Caché), 2 GB PC133 ECC
        SDRAM, controladora RAID PERC/3 DC PCI con 128 MB y una unidad
        EIDE DVD-ROM.  La controladora RAID tiene conectados dos discos
        duros 18 GB (replicados) y cuatro discos duros de
        36 GB (RAID nivel 5).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installation"></a>10.7.5. Instalación de FreeBSD</h3></div></div></div><p>Lo primero que tiene que hacer es instalar FreeBSD.  Hay muchas
       formas de hacerlo.  Nosotros instalamos FreeBSD 4.3 desde un FTP y
        FreeBSD 4.5 desde el CD de la distribución.  Si necesita
        más información sobre los medios de instalación
        de FreeBSD consulte la
        <a class="xref" href="#install-diff-media" title="2.13. Cómo preparar su propio medio de instalación">Sección 2.13, &#8220;Cómo preparar su propio medio de instalación&#8221;</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disk-layout"></a>10.7.5.1. Esquema de disco</h4></div></div></div><p>Quisimos hacer el proceso lo más simple posible,
          así que usamos el esquema de disco de
          <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 46B</span> y <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 46C
          SR2</span>.  Solo cambiamos los nombres
          de dispositivo debido a que las instalaciones tuvieron lugar en
          hardware diferente (<code class="filename">/dev/da</code> y
          <code class="filename">/dev/amr</code> respectivamente.  Si
          utiliza una AMI <span class="trademark">MegaRAID</span>® verá en pantalla
          <code class="filename">/dev/amr0s1a</code> en lugar de
          <code class="filename">/dev/da0s1a</code>):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Sistema de ficheros</th><th>Tamaño (bloques de 1k)</th><th>Tamaño (GB)</th><th>Montado en</th></tr></thead><tbody><tr><td><code class="filename">/dev/da0s1a</code></td><td>1.016.303</td><td>1</td><td><code class="filename">/</code></td></tr><tr><td><code class="filename">/dev/da0s1b</code></td><td> </td><td>6</td><td>swap</td></tr><tr><td><code class="filename">/dev/da0s1e</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/var</code></td></tr><tr><td><code class="filename">/dev/da0s1f</code></td><td>8.205.339</td><td>8</td><td><code class="filename">/usr</code></td></tr><tr><td><code class="filename">/dev/da1s1e</code></td><td>45.734.361</td><td>45</td><td><code class="filename">/compat/linux/oracle</code></td></tr><tr><td><code class="filename">/dev/da1s1f</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/compat/linux/sapmnt</code></td></tr><tr><td><code class="filename">/dev/da1s1g</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/compat/linux/usr/sap</code></td></tr></tbody></table></div><p>Configure e inicialice antes que nada las dos unidades
          lógicas con el software <span class="trademark">Mylex</span>® o PERC/3 RAID.
          El software puede iniciarse durante la fase
          de arranque de <acronym class="acronym">BIOS</acronym>.</p><p>Por favor, tenga en cuenta que el esquema de disco que
          utilizamos difiere ligeramente de las recomendaciones de
          <span class="trademark">SAP</span>®, ya que <span class="trademark">SAP</span>® sugiere montar los subdirectorios
          <span class="application"><span class="trademark">Oracle</span>®</span>
          (y algunos otros) por separado.  Decidimos
          crearlos como subdirectorios reales para simplificar.
          </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworldandnewkernel"></a>10.7.5.2. <code class="command">make world</code> y un nuevo kernel</h4></div></div></div><p>Descargue las fuentes -STABLE más recientes.
          Ejecute <code class="command">make world</code> y compile su kernel
          personalizado.  Recuerde incluir en él tanto los
          <a class="link" href="#kerneltuning" title="10.7.7.6. Personalización del kernel">parámetros del kernel</a>
          requeridos por <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
          como los que necesita
	  <span class="application"><span class="trademark">Oracle</span>®</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingthelinuxenviornment"></a>10.7.6. Instalación del entorno Linux</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxbase-system"></a>10.7.6.1. Instalación del sistema base Linux</h4></div></div></div><p>Primero instale el port
          <a class="link" href="#linuxemu-libs-port" title="10.2.1.1. Instalación usando el port linux_base">linux_base</a>
          (como <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxdevelopment"></a>10.7.6.2. Instalación del entorno de desarrollo Linux</h4></div></div></div><p>El entorno de desarrollo Linux es imprescindible si quiere
          instalar
          <span class="application"><span class="trademark">Oracle</span>®</span> en FreeBSD según se
          explica en la <a class="xref" href="#linuxemu-oracle" title="10.6. Instalación de Oracle®">Sección 10.6, &#8220;Instalación de <span class="trademark">Oracle</span>®&#8221;</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/linux_devtools</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>El entorno de desarrollo Linux solo ha de
          instalarse si sigue el proceso para instalar
          <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 46B IDES</span>.
          No es necesario si <span class="application"><span class="trademark">Oracle</span>® DB</span>
          no está reenlazado («relinked») con el sistema
          FreeBSD.  Este sería su caso si está usa el fichero
          comprimido tar de <span class="application"><span class="trademark">Oracle</span>®</span> de un
	  sistema Linux.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingnecessaryrpms"></a>10.7.6.3. Instalación de los RPM necesarios</h4></div></div></div><a id="idp71565008" class="indexterm"></a><p>Necesitará soporte PAM para iniciar el programa
          <code class="command">R3SETUP</code>.
          Durante la primera instalación de
          <span class="application"><span class="trademark">SAP</span>®</span>
          en FreeBSD 4.3-STABLE intentamos instalar PAM con todas
          las dependencias y finalmente forzamos la
          instalación del paquete PAM, y  funcionó.
          En <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C SR2</span> forzamos
          la instalación del RPM PAM, que también
          funcionó, así que parece que las dependencias
          no lo son tanto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm \
pam-0.68-7.i386.rpm</code></strong></pre><p>Para que <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span> pueda
          lanzar el agente inteligente también tendremos que
          instalar el paquete Tcl de RedHat
          <code class="filename">tcl-8.0.5-30.i386.rpm</code> (si no,
          cuando lo reenlace durante la instalación de
          <span class="application"><span class="trademark">Oracle</span>®</span> no funcionará).
          Existen otros aspectos relacionados con el
          reenlazado de <span class="application"><span class="trademark">Oracle</span>®</span> a tener en
          cuenta durante la instalación, pero
          atañen a la versión para Linux de
          <span class="application"><span class="trademark">Oracle</span>®</span> y no son específicos
          de FreeBSD.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxprocandfallbackelfbrand"></a>10.7.6.4. Sugerencias</h4></div></div></div><p>Le recomendamos añadir
          <code class="literal">linprocfs</code> a <code class="filename">/etc/fstab</code>.
          Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=linprocfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">linprocfs</span>(5)</span></a> para más información.
          Otro parámetro que debería configurar es
          <code class="literal">kern.fallback_elf_brand=3</code> en
          <code class="filename">/etc/sysctl.conf</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingsapr3env"></a>10.7.7. Creación del entorno <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filesystemsandmountpoints"></a>10.7.7.1. Creación de los sistemas de ficheros y
	  puntos de montaje necesarios</h4></div></div></div><p>Para una instalación sencilla es suficiente con
          crear los siguientes sistemas de ficheros:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>punto de montaje</th><th>tamaño en GB</th></tr></thead><tbody><tr><td><code class="filename">/compat/linux/oracle</code></td><td>45 GB</td></tr><tr><td><code class="filename">/compat/linux/sapmnt</code></td><td>2 GB</td></tr><tr><td><code class="filename">/compat/linux/usr/sap</code></td><td>2 GB</td></tr></tbody></table></div><p>También es necesario crear algunos enlaces.  Si no,
          el instalador <span class="application"><span class="trademark">SAP</span>®</span>
          tendrá problemas ya que buscará los siguientes
          enlaces:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/oracle /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/sapmnt /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/usr/sap /usr/sap</code></strong></pre><p>Veamos unos cuantos errores que se le pueden presentar
          durante la instalación (en este caso
          con el sistema <span class="emphasis"><em>PRD</em></span> y la instalación
          de <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C SR2</span>):</p><pre class="screen">INFO 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:200
    Checking existence of symbolic link /usr/sap/PRD/SYS/exe/dbg to
    /sapmnt/PRD/exe. Creating if it does not exist...

WARNING 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:400
    Link /usr/sap/PRD/SYS/exe/dbg exists but it points to file
    /compat/linux/sapmnt/PRD/exe instead of /sapmnt/PRD/exe. The
    program cannot go on as long as this link exists at this
    location. Move the link to another location.

ERROR 2002-03-19 16:45:36 R3LINKS_IND_IND Ins_SetupLinks:0
    can not setup link '/usr/sap/PRD/SYS/exe/dbg' with content
    '/sapmnt/PRD/exe'</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusersanddirectories"></a>10.7.7.2. Creación de usuarios y directorios</h4></div></div></div><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> necesita dos usuarios
          y tres grupos.  Los nombres de usuario dependen del
          <span class="quote">&#8220;<span class="quote"><span class="application"><span class="trademark">SAP</span>®</span> system ID</span>&#8221;</span>
          (SID), y consisten en tres letras.
          Algunos de estos SID
          están reservados por <span class="application"><span class="trademark">SAP</span>®</span>
          (por ejemplo <code class="literal">SAP</code> y <code class="literal">NIX</code>.
          Tiene una lista completa de ellos en la documentación
          de <span class="application"><span class="trademark">SAP</span>®</span>).
          Para la instalación de IDES usamos <code class="literal">IDS</code>
          y para la instalación de 4.6C SR2 <code class="literal">PRD</code>,
          dado que ese sistema está pensado para un uso de
          producción.  Tenemos por lo tanto los siguientes
          grupos (Los ID de grupo pueden ser diferentes, estos son
          solamente los valores que utilizamos en nuestra
          instalación):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>ID de grupo</th><th>nombre de grupo</th><th>descripción</th></tr></thead><tbody><tr><td>100</td><td>dba</td><td>Administrador de base de datos</td></tr><tr><td>101</td><td>sapsys</td><td>Sistema <span class="trademark">SAP</span>®</td></tr><tr><td>102</td><td>oper</td><td>Operador de base de datos</td></tr></tbody></table></div><p>En una instalación por omisión de
          <span class="application"><span class="trademark">Oracle</span>®</span> solo se usa el
          grupo <code class="systemitem">dba</code>.
          Puede usar el grupo
          <code class="systemitem">oper</code> como grupo
          <code class="systemitem">dba</code> (consulte la
          documentación de
          <span class="application"><span class="trademark">Oracle</span>®</span> y
          <span class="application"><span class="trademark">SAP</span>®</span>
          para más información).</p><p>También necesitaremos los siguientes usuarios:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>ID de usuario</th><th>nombre de usuario</th><th>nombre genérico</th><th>grupo</th><th>grupos adicionales</th><th>descripción</th></tr></thead><tbody><tr><td>1000</td><td>idsadm/prdadm</td><td><em class="replaceable"><code>sid</code></em>adm</td><td>sapsys</td><td>oper</td><td>Administrador <span class="trademark">SAP</span>®</td></tr><tr><td>1002</td><td>oraids/oraprd</td><td>ora<em class="replaceable"><code>sid</code></em></td><td>dba</td><td>oper</td><td>Administrador <span class="trademark">Oracle</span>®</td></tr></tbody></table></div><p>Al añadir dichos usuarios mediante
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> tenga en cuenta que debe incluir
          las siguientes entradas (observe la shell y el
          directorio home) al crear el
          <span class="quote">&#8220;<span class="quote">administrador <span class="trademark">SAP</span>®</span>&#8221;</span>:</p><pre class="programlisting">Name: <em class="replaceable"><code>sid</code></em>adm
Password: ******
Fullname: SAP Administrator <em class="replaceable"><code>SID</code></em>
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/<em class="replaceable"><code>sid</code></em>adm
Shell: bash  (/compat/linux/bin/bash)</pre><p>y para el <span class="quote">&#8220;<span class="quote">Administrador <span class="trademark">Oracle</span>®</span>&#8221;</span>:</p><pre class="programlisting">Name: ora<em class="replaceable"><code>sid</code></em>
Password: ******
Fullname: Oracle Administrator <em class="replaceable"><code>SID</code></em>
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/<em class="replaceable"><code>sid</code></em>
Shell: bash  (/compat/linux/bin/bash)</pre><p>Esto también incluye al grupo
          <code class="systemitem">oper</code> en caso de que esté
          usando el grupo <code class="systemitem">dba</code> y
          el grupo <code class="systemitem">oper</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingdirectories"></a>10.7.7.3. Creación de directorios</h4></div></div></div><p>Estos directorios se crean como sistemas de ficheros
          independientes.  Esto depende totalmente de sus necesidades.
          Nosotros decidimos crearlos como directorios ya que todos
          están en el mismo RAID 5:</p><p>Primero vamos a configurar los propietarios y los
          derechos de algunos directorios (como
          <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 777 /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown root:dba /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown sidadm:sapsys /compat/linux/usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /compat/linux/usr/sap</code></strong></pre><p>Luego vamos a crear directorios como el
          usuario <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>.
          Estos serán todos subdirectorios de
	  <code class="filename">/oracle/SID</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - orasid</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/SID</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir mirrlogA mirrlogB origlogA origlogB</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir saparch sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre><p>Para la instalación de
          <span class="application"><span class="trademark">Oracle</span>® 8.1.7</span>
          tendrá que crear unos cuantos directorios
	  más:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - orasid</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir 805_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir client stage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir client/80x_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir stage/817_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/SID</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir 817_32</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El directorio <code class="filename">client/80x_32</code> tiene
          que tener exactamente este nombre.  No sustituya la
          <span class="emphasis"><em>x</em></span>
          por un número ni por ninguna otra
          cosa.</p></div><p>En el tercer paso creamos directorios como usuario
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - sidadm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir SID</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir trans</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="entriesinslashetcslashservices"></a>10.7.7.4. Entradas en <code class="filename">/etc/services</code></h4></div></div></div><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> requiere algunas entradas
          en <code class="filename">/etc/services</code> que es posible que
          no estén correctamente activadas durante
          la instalalación.  Añada
          las siguientes entradas (necesita al menos las entradas
          correspondientes al número de instancia, en
          este caso, <code class="literal">00</code>.  No hará ningún
          daño añadir todas las entradas de
          <code class="literal">00</code> hasta <code class="literal">99</code> para
          <code class="literal">dp</code>, <code class="literal">gw</code>, <code class="literal">sp</code>
          y <code class="literal">ms</code>).  Si va a utilizar un
          <span class="application">SAProuter</span>
          o necesita acceder a
          <span class="application"><span class="trademark">SAP</span>®</span> OSS, también
          necesitará <code class="literal">99</code>, ya que el puerto 3299
          se usa generalmente para el proceso
          <span class="application">SAProuter</span>
          en el sistema destino:</p><pre class="programlisting">
sapdp00    3200/tcp # SAP Dispatcher.      3200 + Instance-Number
sapgw00  3300/tcp # SAP Gateway.         3300 + Instance-Number
sapsp00  3400/tcp #                      3400 + Instance-Number
sapms00  3500/tcp #                      3500 + Instance-Number
sapms<em class="replaceable"><code>SID</code></em> 3600/tcp # SAP Message Server.  3600 + Instance-Number
sapgw00s   4800/tcp # SAP Secure Gateway   4800 + Instance-Number</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="necessarylocales"></a>10.7.7.5. Locales necesarios</h4></div></div></div><a id="idp71696208" class="indexterm"></a><p><span class="application"><span class="trademark">SAP</span>®</span> requiere al menos dos locales
          que no forman parte de la instalación por defecto de
          RedHat.  <span class="trademark">SAP</span>® dispone de los paquetes RPMs que pueda necesitar;
          puede descargalos desde su FTP, aunque tenga en cuenta que
	  solo pueden acceder al mismo los clientes con acceso OSS).
          Consulte la nota
          0171356, que contiene una lista de los RPM que necesitará.
          </p><p>También puede crear enlaces
          (por ejemplo desde <span class="emphasis"><em>de_DE</em></span> y
          <span class="emphasis"><em>en_US</em></span> ), pero no se lo recomendamos si
          pretende configurar un sistema de producción (no obstante,
          hemos de reconocer que a nosotros nos ha funcionado con
          el sistema IDES sin ningún problema).  Necesitará
          al menos los siguientes locales:</p><pre class="programlisting">de_DE.ISO-8859-1
en_US.ISO-8859-1</pre><p>Haga los enlaces de esta manera:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /compat/linux/usr/share/locale</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s de_DE de_DE.ISO-8859-1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s en_US en_US.ISO-8859-1</code></strong></pre><p>Si no están habrá algunos
          problemas durante la instalación.  Si se ignoran
          (es decir, si configura el <code class="literal">STATUS</code>
          de los pasos relacionados con esos locales a
          <code class="literal">OK</code> en el fichero
          <code class="filename">CENTRDB.R3S</code>) será imposible
          entrar al sistema <span class="application"><span class="trademark">SAP</span>®</span> sin
          tener que recurrir a ciertas triquiñuelas.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kerneltuning"></a>10.7.7.6. Personalización del kernel</h4></div></div></div><a id="idp71706064" class="indexterm"></a><p>Los sistemas <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> necesitan muchos
          recursos, por eso hemos añadido los siguientes
          parámetros al fichero de configuración de su
          kernel:</p><pre class="programlisting"># Set these for memory pigs (SAP and Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)"
# System V options needed.
options SYSVSHM #SYSV-style shared memory
options SHMMAXPGS=262144 #max amount of shared mem. pages
#options SHMMAXPGS=393216 #use this for the 46C inst.parameters
options SHMMNI=256 #max number of shared memory ident if.
options SHMSEG=100 #max shared mem.segs per process
options SYSVMSG #SYSV-style message queues
options MSGSEG=32767 #max num. of mes.segments in system
options MSGSSZ=32 #size of msg-seg. MUST be power of 2
options MSGMNB=65535 #max char. per message queue
options MSGTQL=2046 #max amount of msgs in system
options SYSVSEM #SYSV-style semaphores
options SEMMNU=256 #number of semaphore UNDO structures
options SEMMNS=1024 #number of semaphores in system
options SEMMNI=520 #number of semaphore identifiers
options SEMUME=100       #number of UNDO keys</pre><p>Puede consultar los valores mínimos en la
          documentación de <span class="trademark">SAP</span>®.  Como no hay detalles
          sobre Linux, consulte para mayor información
          la sección de HP-UX (32-bit).
          El sistema de instalación 4.6C SR2 tiene más
          memoria principal, asín que los segmentos compartidos
          pueden ser más extensos tanto para
          <span class="application"><span class="trademark">SAP</span>®</span> como para
          <span class="application"><span class="trademark">Oracle</span>®</span>; elija, por tanto,
          un número mayor de páginas
          de memoria compartida.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En la instalación por omisión de
          FreeBSD 4.5 en <span class="trademark">i386</span>&#8482;, configure <code class="literal">MAXDSIZ</code>
          y <code class="literal">DFLDSIZ</code> como máximo a 1 GB.
          Si no lo hace podrían aparecer errores extraños
          como <span class="errorname">ORA-27102: out of memory</span>
          y <span class="errorname">Linux Error: 12: Cannot allocate memory</span>.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingsapr3"></a>10.7.8. Instalación de <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preparingsapcdroms"></a>10.7.8.1. Preparación de los CDROM</h4></div></div></div><p>Hay que montar y desmontar muchos CD-ROM durante la
          instalación.  Si tiene suficientes unidades
          de CDROM, podría montarlos todos.  Nosotros decidimos
          copiar el contenido de los CD-ROM a los directorios
          correspondientes:</p><pre class="programlisting">/oracle/<em class="replaceable"><code>SID</code></em>/sapreorg/<em class="replaceable"><code>nombre-cd</code></em></pre><p>Donde <em class="replaceable"><code>nombre-cd</code></em> era <code class="filename">KERNEL</code>,
	  <code class="filename">RDBMS</code>, <code class="filename">EXPORT1</code>,
	  <code class="filename">EXPORT2</code>, <code class="filename">EXPORT3</code>,
	  <code class="filename">EXPORT4</code>, <code class="filename">EXPORT5</code> y
	  <code class="filename">EXPORT6</code> para la instalación 4.6B/IDES, y
	  <code class="filename">KERNEL</code>, <code class="filename">RDBMS</code>,
	  <code class="filename">DISK1</code>, <code class="filename">DISK2</code>,
	  <code class="filename">DISK3</code>, <code class="filename">DISK4</code> y
	  <code class="filename">LANG</code> para la instalación 4.6C SR2.
          Todos los nombres de fichero en los CDs montados deben estar
          en mayúsculas; si no es así use la opción
          <code class="option">-g</code> al montar.  Utilice lo siguiente:
          </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 -g /dev/cd0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp -R /mnt/* /oracle/SID/sapreorg/nombre-cd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="runningtheinstall-script"></a>10.7.8.2. Ejecución del <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de
          instalación</h4></div></div></div><p>Primero tendrá que preparar un directorio
          <code class="filename">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/SID/sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd install</code></strong></pre><p>Una vez arrancado el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de instalación
          copiará casi todos los ficheros relevantes en el directorio
          <code class="filename">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/oracle/SID/sapreorg/KERNEL/UNIX/INSTTOOL.SH</code></strong></pre><p>La instalación IDES (4.6B) incluye un sistema de
          demostración <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® totalmente personalizado, así
          que hay seis CD EXPORT en lugar de solo tres.
          La plantilla de instalación
          <code class="filename">CENTRDB.R3S</code> está pensada para
          una instancia central estándar
          (<span class="application"><span class="trademark">R/3</span>®</span> y
          base de datos), no la instancia central IDES, así que
          hay que copiar el <code class="filename">CENTRDB.R3S</code>
          correspondiente del directorio
          <code class="filename">EXPORT1</code>.
          Si no lo hace <code class="command">R3SETUP</code> solo pedirá
          tres CD EXPORT.</p><p>La nueva versión de
          <span class="application"><span class="trademark">SAP</span>® 4.6C SR2</span>
          incluye cuatro CDs EXPORT.  El fichero de parámetros
          que controla los pasos de la instalación es
          <code class="filename">CENTRAL.R3S</code>.  A diferencia de versiones
          versiones anteriores, no existen patrones de instalación
          por separado para una instancia central con o sin base de datos.
          <span class="application"><span class="trademark">SAP</span>®</span> utiliza un patrón separado
          para la instalación de la base
          de datos.  Para reiniciar la instalación después es
          suficiente reiniciarla con el fichero original.</p><p>Durante y después de la instalación,
          <span class="application"><span class="trademark">SAP</span>®</span>
          necesita que <code class="command">hostname</code> devuelva
          <span class="emphasis"><em>sólamente</em></span> el nombre del sistema,
          no el nombre cualificado de dominio.  Configure el nombre
          del equipo de ese modo, o active un alias mediante
          <code class="command">alias hostname='hostname -s'</code> para
          <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>
          y para <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>
          (y para <code class="systemitem">root</code> al menos durante los
          pasos de la instalación realizados como
          <code class="systemitem">root</code>).  También puede configurar
          los ficheros <code class="filename">.profile</code> y
          <code class="filename">.login</code> de los usuarios que se crean durante
          la instalación <span class="application"><span class="trademark">SAP</span>®</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup-46B"></a>10.7.8.3. Inicio de <code class="command">R3SETUP</code> 4.6B</h4></div></div></div><p>Asegúrese de que <code class="envar">LD_LIBRARY_PATH</code>
          esté configurada correctamente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</code></strong></pre><p>Inicie <code class="command">R3SETUP</code> como <code class="systemitem">root</code>
          desde el directorio de instalación:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre><p>El <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> le preguntará algunas cosas;
          le mostramos aquí entre corchetes la respuesta por
          defecto, y después la respuesta que nosotros
          introdujimos:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Pregunta</th><th>Por omisión</th><th>Entrada</th></tr></thead><tbody><tr><td>Enter SAP System ID</td><td>[C11]</td><td>IDS<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter SAP Instance Number</td><td>[00]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter SAPMOUNT Directory</td><td>[/sapmnt]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter name of SAP central host</td><td>[troubadix.domain.de]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter name of SAP db host</td><td>[troubadix]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Select character set</td><td>[1] (WE8DEC)</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Oracle server version (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</td><td> </td><td>1<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Extract Oracle Client archive</td><td>[1] (Yes, extract)</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to KERNEL CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/KERNEL</td></tr><tr><td>Enter path to RDBMS CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/RDBMS</td></tr><tr><td>Enter path to EXPORT1 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT1</td></tr><tr><td>Directory to copy EXPORT1 CD</td><td>[/oracle/IDS/sapreorg/CD4_DIR]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to EXPORT2 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT2</td></tr><tr><td>Directory to copy EXPORT2 CD</td><td>[/oracle/IDS/sapreorg/CD5_DIR]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to EXPORT3 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT3</td></tr><tr><td>Directory to copy EXPORT3 CD</td><td>[/oracle/IDS/sapreorg/CD6_DIR]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to EXPORT4 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT4</td></tr><tr><td>Directory to copy EXPORT4 CD</td><td>[/oracle/IDS/sapreorg/CD7_DIR]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to EXPORT5 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT5</td></tr><tr><td>Directory to copy EXPORT5 CD</td><td>[/oracle/IDS/sapreorg/CD8_DIR]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to EXPORT6 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT6</td></tr><tr><td>Directory to copy EXPORT6 CD</td><td>[/oracle/IDS/sapreorg/CD9_DIR]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter amount of RAM for SAP + DB</td><td> </td><td>850<span class="keycap"><strong>Intro</strong></span> (en Megabytes)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Group-ID of sapsys</td><td>[101]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Group-ID of oper</td><td>[102]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Group-ID of dba</td><td>[100]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter User-ID of <em class="replaceable"><code>sid</code></em>adm</td><td>[1000]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter User-ID of ora<em class="replaceable"><code>sid</code></em></td><td>[1002]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Number of parallel procs</td><td>[2]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr></tbody></table></div><p>Si no ha copiado los CD a su disco duro el instalador
          <span class="application"><span class="trademark">SAP</span>®</span> no podrá encontrar
          el CD que necesite (identifica los contenidos mediante
          fichero <code class="filename">LABEL.ASC</code> de cada CD) y por lo
          tanto le pedirá que introduzca y monte el CD, o que
          confirme o introduzca la ruta de montaje.</p><p><code class="filename">CENTRDB.R3S</code> puede contener algún
          error.  En nuestro caso, solicitó
          el CD EXPORT4 más de una vez, pero se le indicó
          la clave correcta (6_LOCATION, luego 7_LOCATION, etc),
          así que pudimos continuar introduciendo
          los valores correctos.</p><p>Aparte de algunos problemas que se detallan más
          adelante  deberíamos ir llegando a la instalación
          del software de base de datos <span class="trademark">Oracle</span>®.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup-46C"></a>10.7.8.4. Iniciar <code class="command">R3SETUP</code> 4.6C SR2</h4></div></div></div><p>Asegúrese de que <code class="envar">LD_LIBRARY_PATH</code> esté
          correctamente configurada.  Tenga en cuenta de que es un valor
          diferente de la instalación 4.6B con
	  <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/sapmnt/PRD/exe:/oracle/PRD/817_32/lib</code></strong></pre><p>Arranque <code class="command">R3SETUP</code> como el usuario
          <code class="systemitem">root</code>
          desde el directorio de instalación:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/PRD/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRAL.R3S</code></strong></pre><p>El <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> le preguntará algunas cosas.
          Le presentamos la respuesta por omisión entre corchetes
          y después la respuesta que dimos nosotros):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Pregunta</th><th>Por omisión</th><th>Entrada</th></tr></thead><tbody><tr><td>Enter SAP System ID</td><td>[C11]</td><td>PRD<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter SAP Instance Number</td><td>[00]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter SAPMOUNT Directory</td><td>[/sapmnt]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter name of SAP central host</td><td>[majestix]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Database System ID</td><td>[PRD]</td><td>PRD<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter name of SAP db host</td><td>[majestix]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Select character set</td><td>[1] (WE8DEC)</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Oracle server version (2) Oracle 8.1.7</td><td> </td><td>2<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Extract Oracle Client archive</td><td>[1] (Yes, extract)</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter path to KERNEL CD</td><td>[/sapcd]</td><td>/oracle/PRD/sapreorg/KERNEL</td></tr><tr><td>Enter amount of RAM for SAP + DB</td><td>2044</td><td>1800<span class="keycap"><strong>Intro</strong></span> (in Megabytes)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Group-ID of sapsys</td><td>[100]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Group-ID of oper</td><td>[101]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Group-ID of dba</td><td>[102]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter User-ID of <code class="systemitem">oraprd</code></td><td>[1002]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter User-ID of <code class="systemitem">prdadm</code></td><td>[1000]</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>LDAP support</td><td> </td><td>3<span class="keycap"><strong>Intro</strong></span> (no support)</td></tr><tr><td>Installation step completed</td><td>[1] (continue)</td><td><span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Choose installation service</td><td>[1] (DB inst,file)</td><td><span class="keycap"><strong>Intro</strong></span></td></tr></tbody></table></div><p>La creación de usuarios da un
          error durante la instalación en las fases
          OSUSERDBSID_IND_ORA (al crear al usuario
          <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>) y
          OSUSERSIDADM_IND_ORA (al crear el usuario
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>).</p><p>Más adelante hablaremos de cierto problemas
          que aún tenemos pendientes, pero ha llegado el
          momento de instalar el software
          de base de datos <span class="trademark">Oracle</span>®.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle805"></a>10.7.9. Instalación de <span class="trademark">Oracle</span>® 8.0.5</h3></div></div></div><p>Consulte los
        <code class="filename">Readme</code> de <span class="trademark">Oracle</span>® y las notas de
        de <span class="trademark">SAP</span>® sobre Linux y <span class="application"><span class="trademark">Oracle</span>® DB</span>
        por si hubiera algo que le pueda afectar.  La mayoría de los
        problemas, por no decir todos, tienen su origen en bibliotecas
        incompatibles.</p><p>Para mayor información sobre la instalación
        de <span class="application"><span class="trademark">Oracle</span>®</span> diríjase al
        <a class="link" href="#linuxemu-oracle" title="10.6. Instalación de Oracle®">capítulo de
        instalación de <span class="trademark">Oracle</span>®.</a></p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805withorainst"></a>10.7.9.1. Instalación de <span class="trademark">Oracle</span>® 8.0.5 con <code class="command">orainst</code></h4></div></div></div><p>Si quiere instalar <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span>
          necesitará unas cuantas bibliotecas para el enlazado,
          ya que <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span>
          fué enlazado con una glibc antigua (la de RedHat 6.0),
          pero RedHat 6.1 usa una nueva glibc.  Tendrá que
          instalar los siguientes paquetes para
          asegurarse que el reenlazado funcione:</p><p><code class="filename">compat-libs-5.2-2.i386.rpm</code></p><p><code class="filename">compat-glibc-5.2-2.0.7.2.i386.rpm</code></p><p><code class="filename">compat-egcs-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</code></p><p><code class="filename">compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</code></p><p>Para más información consulte las notas
          correspondientes de <span class="trademark">SAP</span>® o los <code class="filename">Readme</code>
          de <span class="trademark">Oracle</span>®.  Si no es posible (durante la instalación
          no tuvimos tiempo suficiente para ello), se
          podrían utilizar los binarios originales, o
          los binarios reenlazados de un sistema original RedHat.</p><p>Instale el paquete Tcl de RedHat para compilar el agente
          inteligente.  Si no puede conseguir
          <code class="filename">tcl-8.0.3-20.i386.rpm</code> debería
          funcionar una versión más reciente, por ejemplo
          <code class="filename">tcl-8.0.5-30.i386.rpm</code> para RedHat.</p><p>Aparte del reenlazado, la instalación
          es muy sencilla:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_HOME=/oracle/IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/orainst_sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./orainst</code></strong></pre><p>Confirme todas las pantallas con <span class="keycap"><strong>Intro</strong></span> hasta
          que el software esté instalado; todas excepto en la que
          debe quitar la marca de instalación al
	  <span class="emphasis"><em>visualizador de
          textos <span class="trademark">Oracle</span>® en línea</em></span>, ya que no
          existe para Linux.  <span class="application"><span class="trademark">Oracle</span>®</span>
          intentará, gracias a esto, reenlazar con
          <code class="command">i386-glibc20-linux-gcc</code>
          en lugar de <code class="command">gcc</code>,
          <code class="command">egcs</code> o
          <code class="command">i386-redhat-linux-gcc</code>.</p><p>Debido a la falta de tiempo decidimos usar los binarios
          de una versión
          <span class="application"><span class="trademark">Oracle</span>® 8.0.5 PreProduction</span>,
          después de que nuestro primer intento de que funcionara la
          versión del CD RDBMS fallara y viendo que encontrar y
          utilizar los RPM correctos hubiera sido una pesadilla.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805preproduction"></a>10.7.9.2. Instalación de <span class="trademark">Oracle</span>® 8.0.5 <span class="quote">&#8220;<span class="quote">Pre-production
          Release</span>&#8221;</span> para Linux (Kernel 2.0.33)</h4></div></div></div><p>La instalación es bastante fácil.
          Monte el CD e inicie el instalador.  Le preguntará
          por la ubicación del directorio home de <span class="trademark">Oracle</span>®,
          y copiará en él todos los binarios.  (Nosotros
          no eliminamos los restos de una instalación
          RDBMS anterior que no terminó de llegó a
	  terminar).</p><p>Tras esto la base de datos <span class="application"><span class="trademark">Oracle</span>®</span>
          puede arrancar.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle817"></a>10.7.10. Instalación desde el fichero comprimido de
        Linux <span class="trademark">Oracle</span>® 8.1.7</h3></div></div></div><p>Descomprima el fichero
        <code class="filename">oracle81732.tgz</code> (creado en el directorio
        de instalación en un sistema Linux) y descomprímalo en
        <code class="filename">/oracle/SID/817_32/</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="continuewithsapr4installation"></a>10.7.11. Continúe con la instalación <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h3></div></div></div><p>Revise las configuraciones del entorno de los usuarios
        <code class="systemitem">idsamd</code>
        (<em class="replaceable"><code>sid</code></em>adm) y
        <code class="systemitem">oraids</code> (ora<em class="replaceable"><code>sid</code></em>).
        Ambos deben tener los ficheros
        <code class="filename">.profile</code>, <code class="filename">.login</code> y
        <code class="filename">.cshrc</code> con
        <code class="command">hostname</code> correctamente configurado.  En caso
        que el nombre del sistema sea el nombre cualificado completo
        tendrá que cambiar <code class="command">hostname</code> a
        <code class="command">hostname -s</code> en los tres ficheros anteriormente
        citados.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="databaseload"></a>10.7.11.1. Carga de la base de datos</h4></div></div></div><p>Hecho esto puede rearrancar <code class="command">R3SETUP</code>
          o volver a arrancar la instalación
          (dependiendo si eligió salir o no).
          <code class="command">R3SETUP</code>
          crea las tablas y carga los datos (en 46B IDES,
          desde EXPORT1 a EXPORT6, en 46C desde DISK1 a DISK4)
          mediante <code class="command">R3load</code>.</p><p>Cuando se termina la carga de la base de datos (que puede
          llevar un par de horas) se le pedirán algunas
          contraseñas.  En una instalación de prueba puede
          usar unas contraseñas de compromiso.
          (<span class="emphasis"><em>use una contraseña de verdad si le preocupa
          siquiera ligeramente la seguridad</em></span>):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Pregunta</th><th>Entrada</th></tr></thead><tbody><tr><td>Enter Password for sapr3</td><td>sap<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Confirum Password for sapr3</td><td>sap<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Enter Password for sys</td><td>change_on_install<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Confirm Password for sys</td><td>change_on_install<span class="keycap"><strong>Enter</strong></span></td></tr><tr><td>Enter Password for system</td><td>manager<span class="keycap"><strong>Intro</strong></span></td></tr><tr><td>Confirm Password for system</td><td>manager<span class="keycap"><strong>Intro</strong></span></td></tr></tbody></table></div><p>Aquí tuvimos problemas con
	  <code class="command">dipgntab</code> en la instalación de
          4.6B.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="listener"></a>10.7.11.2. Las escuchas</h4></div></div></div><p>Arranque las escuchas de <span class="application"><span class="trademark">Oracle</span>®</span>
          con el usuario <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>
          de la siguiente manera:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>Si no lo hace así verá un error
          <span class="errorcode">ORA-12546</span>,
          ya que los sockets no tendrán los permisos correctos.
          Consulte la nota 072984 de <span class="trademark">SAP</span>®.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mnlstables"></a>10.7.11.3. Actualización de tablas MNLS</h4></div></div></div><p>Si tiene previsto importar idiomas que no sean Latin-1
          en <span class="application"><span class="trademark">SAP</span>®</span> tiene que actualizar
          las tablas <span class="quote">&#8220;<span class="quote">Multi National Language Support</span>&#8221;</span>.
          Tiene más información sobre esto en las notas de
          <span class="trademark">SAP</span>® OSS 15023 y 45619.  Si no es su caso puede saltarse
          esta parte de la instalación de
	  <span class="application"><span class="trademark">SAP</span>®</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Aunque no necesite soporte MNLS sigue siendo necesario
          que revise la tabla TCPDB y que la inicialice si no lo ha hecho ya.
          Consulte las notas 0015023 y 0045619 de <span class="trademark">SAP</span>® para más
          información.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="postinstallationsteps"></a>10.7.12. Pasos para después de la instalación</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="requestsapr3licensekey"></a>10.7.12.1. Solicitar una licencia <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h4></div></div></div><p>Tiene que solicitar una licencia de
          <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.  No tendrá más
          remedio, puesto que la licencia temporal que se usa durante la
          instalación tiene un límite de validez de
          cuatro semanas.  Necesitará la llave
          hardware.  Entre al sistema como usuario
          <code class="systemitem">idsadm</code>
          y ejecute <code class="command">saplicense</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -get</code></strong></pre><p>Si ejecuta <code class="command">saplicense</code> sin parámetros
          verá una lista de opciones.  Una vez que tenga la licencia
          en su poder la podrá instalar del siguiente modo:
          </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -install</code></strong></pre><p>Se le solicitará que introduzca los siguientes
          valores:</p><pre class="programlisting">SAP SYSTEM ID   = <em class="replaceable"><code>SID, 3 caracteres</code></em>
CUSTOMER KEY    = <em class="replaceable"><code>llave hardware, 11 caracteres</code></em>
INSTALLATION NO = <em class="replaceable"><code>instalación, 10 caracteres</code></em>
EXPIRATION DATE = <em class="replaceable"><code>yyyymmdd, normalmente "99991231"</code></em>
LICENSE KEY     = <em class="replaceable"><code>licencia, 24 caracteres</code></em></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusers"></a>10.7.12.2. Crear usuarios</h4></div></div></div><p>Cree un usuario dentro del cliente 000 (es necesario
          para algunas tareas que requieren hacerse dentro del cliente 000,
          pero con un usuario que no sea ni
          <code class="systemitem">sap*</code>
          ni <code class="systemitem">ddic</code>).  Nosotros solemos elegir
          para este usuario el nombre de <code class="systemitem">wartung</code>
          (o <code class="systemitem">service</code>, ambos
          <span class="quote">&#8220;<span class="quote">servicio</span>&#8221;</span> en castellano).
          Los perfiles son <code class="literal">sap_new</code> y
          <code class="literal">sap_all</code>.  Para mayor seguridad
          las contraseñas para usuarios por defecto dentro de
          todos los clientes deben cambiarse (incluidos los
          usuarios <code class="systemitem">sap*</code> y
          <code class="systemitem">ddic</code>).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtranssysprofileopermodesetc"></a>10.7.12.3. Configurar sistema de transporte, perfil,
	  modos de operación, etc.</h4></div></div></div><p>Dentro del cliente 000 y con un usuario que no sea
          <code class="systemitem">ddic</code>
          ni <code class="systemitem">sap*</code>, haga al menos lo siguiente:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Tarea</th><th>Transacción</th></tr></thead><tbody><tr><td>Configurar sistema de transporte, por ejemplo como
              <span class="emphasis"><em>Stand-Alone
              Transport Domain Entity</em></span></td><td>STMS</td></tr><tr><td>Crear / editar perfil para el sistema</td><td>RZ10</td></tr><tr><td>Mantener modos de operación e instancias</td><td>RZ04</td></tr></tbody></table></div><p>Todos estos (y muchos más) pasos para ejecutar
          después de la instalación se explican de forma
          detallada en las guías de instalación de
          <span class="application"><span class="trademark">SAP</span>®</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="editintsidsap"></a>10.7.12.4. Editar <code class="filename">initsid.sap</code> (<code class="filename">initIDS.sap</code>)</h4></div></div></div><p>El fichero <code class="filename">/oracle/IDS/dbs/initIDS.sap</code>
          contiene la copia de seguridad del perfil de de
	  <span class="application"><span class="trademark">SAP</span>®</span>.
          Aquí es donde debe definir el tamaño de la cinta a
          utilizar, tipo de conpresión, etc. Las siguientes
          modificaciones nos permitirían ejecutar
          <code class="command">sapdba</code> /
          <code class="command">brbackup</code>:</p><pre class="programlisting">compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</pre><p>Explicación:</p><p><code class="varname">compress</code>: La cinta que usamos es una
           HP DLT1 que tiene compresión por hardware.</p><p><code class="varname">archive_function</code>: Define el
          comportamiento por omisión del almacenaje de los
          logs de <span class="trademark">Oracle</span>®: los nuevos ficheros de log se guardan en cinta,
          los ficheros de log que ya han sido guardados
          se guardan de nuevo y luego se borran.  Así se
          evitan muchos problemas si necesita recuperar la base de datos
          y una de las cintas está dañada.</p><p><code class="varname">cpio_flags</code>: por omisión se usa
          <code class="option">-B</code>, que asigna un tamaño de bloque de
          5120 Bytes.  HP recomienda un tamaño de bloque de
          32 K como mínimo; usamos
          <code class="option">--block-size=128</code> para que sea de
          64 K.  Necesitaremos usar <code class="option">--format=newc</code>
          porque tenemos números de inodo mayores a 65535.  La
          última opción (<code class="option">--quiet</code>) se necesita
          ya que <code class="command">brbackup</code> se queja en cuanto
          <code class="command">cpio</code> imprime los números de bloque
          guardados.</p><p><code class="varname">cpio_in_flags</code>: Parámetros
          necesarios para cargar datos desde la cinta.  El formato
          es reconocido automáticamente.</p><p><code class="varname">tape_size</code>: La
          capacidad de almacenaje de la cinta.  Por razones
          de seguridad (nosotros usamos compresión por
          hardware) el valor es ligeramente menor que el valor
          real.</p><p><code class="varname">tape_address</code>: El dispositivo
          (que no permite el rebobinado) que se usará con
          <code class="command">cpio</code>.</p><p><code class="varname">tape_address_rew</code>: El dispositivo
          (que permite el rebobinado) que se usará con
          <code class="command">cpio</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72093392"></a>10.7.12.5. Aspectos de la configuración una vez
          concluida la instalación</h4></div></div></div><p>Los siguientes parámetros
	  <span class="application"><span class="trademark">SAP</span>®</span>
          deben personalizarse una vez concluída la
          instalación (los ejemplos son para IDES 46B,
          1 GB de memoria):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Valor</th></tr></thead><tbody><tr><td>ztta/roll_extension</td><td>250000000</td></tr><tr><td>abap/heap_area_dia</td><td>300000000</td></tr><tr><td>abap/heap_area_nondia</td><td>400000000</td></tr><tr><td>em/initial_size_MB</td><td>256</td></tr><tr><td>em/blocksize_kB</td><td>1024</td></tr><tr><td>ipc/shm_psize_40</td><td>70000000</td></tr></tbody></table></div><p><span class="trademark">SAP</span>® Note 0013026:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Valor</th></tr></thead><tbody><tr><td>ztta/dynpro_area</td><td>2500000</td></tr></tbody></table></div><p><span class="trademark">SAP</span>® Note 0157246:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre</th><th>Valor</th></tr></thead><tbody><tr><td>rdisp/ROLL_MAXFS</td><td>16000</td></tr><tr><td>rdisp/PG_MAXFS</td><td>30000</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En un sistema con 1 GB de memoria y los parámetros
            arriba expuestos puede esperarse encontrar un consumo de
            memoria similar al siguiente:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="problemsduringinstallation"></a>10.7.13. Problemas durante la instalación</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="restartr3setup"></a>10.7.13.1. Reiniciar <code class="command">R3SETUP</code> una vez arreglado
          el problema</h4></div></div></div><p><code class="command">R3SETUP</code> se detiene si encuentra un error.
          Si ha revisado los logs y ha corregido el error reinicie
          <code class="command">R3SETUP</code>; hágalo seleccionando
          la opción REPEAT en el paso donde
          <code class="command">R3SETUP</code> se detuvo.</p><p>Cuando quiera reiniciar <code class="command">R3SETUP</code>
          inícielo con el fichero <code class="filename">R3S</code>
          correspondiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre><p>en el caso de 4.6B, o con</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRAL.R3S</code></strong></pre><p>en 4.6C; no importa si el error ocurrió
            con <code class="filename">CENTRAL.R3S</code> o con
            <code class="filename">DATABASE.R3S</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En algunas etapas, <code class="command">R3SETUP</code> asume
            que la base de datos y los procesos
            <span class="application"><span class="trademark">SAP</span>®</span> están en marcha
            (como aquellos en los cuales se completaron los pasos).
            Si hay errores y por ejemplo la base de datos no se
            puede iniciar tendrá que arrancar la base de datos y
            <span class="application"><span class="trademark">SAP</span>®</span> manualmente una vez haya
            corregido los errores y antes de iniciar
            <code class="command">R3SETUP</code> nuevamente.</p><p xmlns="http://www.w3.org/1999/xhtml">No olvide iniciar también la escucha de
            <span class="application"><span class="trademark">Oracle</span>®</span>
            (como <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code> con
            <code class="command">umask 0; lsnrctl start</code>) si también
            tuvo que detenerlo (si por ejemplo hubo que reiniciar el
            sistema).</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringduringr3setup"></a>10.7.13.2. OSUSERSIDADM_IND_ORA durante <code class="command">R3SETUP</code></h4></div></div></div><p>Si <code class="command">R3SETUP</code> se queja en este etapa edite
          la plantilla <code class="command">R3SETUP</code> que esté usando
          en ese momento (<code class="filename">CENTRDB.R3S</code> (en 4.6B) o
          <code class="filename">CENTRAL.R3S</code> o
          <code class="filename">DATABASE.R3S</code> (en 4.6C)).
          Ubique <code class="literal">[OSUSERSIDADM_IND_ORA]</code> o busque la
          única entrada <code class="literal">STATUS=ERROR</code> y
          edite los siguientes valores:</p><pre class="programlisting">HOME=/home/<em class="replaceable"><code>sid</code></em>adm (was empty)
STATUS=OK (had status ERROR)
        </pre><p>Hecho esto, reinicie <code class="command">R3SETUP</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringr3setup"></a>10.7.13.3. OSUSERDBSID_IND_ORA durante <code class="command">R3SETUP</code></h4></div></div></div><p>Es posible que <code class="command">R3SETUP</code> se queje
	  también en esta etapa.  El
          error aquí es similar al de la fase
          OSUSERSIDADM_IND_ORA.  Edite la plantilla
          <code class="command">R3SETUP</code> que esté usando
          (<code class="filename">CENTRDB.R3S</code> (en 4.6B) o
          <code class="filename">CENTRAL.R3S</code> o
          <code class="filename">DATABASE.R3S</code> (en 4.6C)).
          Ubique <code class="literal">[OSUSERDBSID_IND_ORA]</code> o busque la
          única entrada <code class="literal">STATUS=ERROR</code> y
          edite los siguientes valores en esa sección:</p><pre class="programlisting">STATUS=OK</pre><p>Hecho esto reinicie <code class="command">R3SETUP</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="oraviewvrffilenotfound"></a>10.7.13.4. <span class="errorname">oraview.vrf FILE NOT FOUND</span> durante la instalación de <span class="trademark">Oracle</span>®</h4></div></div></div><p>No ha dejado sin seleccionar la opción de
          instalar el <span class="emphasis"><em>visualizador de texto en línea
          de <span class="trademark">Oracle</span>®</em></span> antes de iniciar la instalación.
          Está seleccionado para ser instalado, aunque la
          aplicación no existe para Linux.  Deje sin seleccionar
          el producto en el menú de instalación de
          <span class="application"><span class="trademark">Oracle</span>®</span> y reinicie la
          instalación.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="textenvincalid"></a>10.7.13.5. <span class="errorname">TEXTENV_INVALID</span> durante <code class="command">R3SETUP</code>, o inicio de RFC o SAPgui</h4></div></div></div><p>Si se encuentra con este error significa que falta el locale
          correcto.  La nota 0171356 de <span class="trademark">SAP</span>® contiene una lista de RPM que
          deben instalarse (p.ej. <code class="filename">saplocales-1.0-3</code>,
          <code class="filename">saposcheck-1.0-1</code> para RedHat 6.1).
          En caso de que ignore todos los errores relacionados y
          configure los <code class="literal">STATUS</code> correspondientes
          de <code class="literal">ERROR</code> a <code class="literal">OK</code>
          (en <code class="filename">CENTRDB.R3S</code>) cada vez que
          <code class="command">R3SETUP</code> se queje y simplemente reinicie
          <code class="command">R3SETUP</code>; el sistema
          <span class="application"><span class="trademark">SAP</span>®</span>
          no estará configurado correctamente y no podrá
          conectarse al sistema con <span class="application">SAPgui</span>,
          aunque el sistema pueda arrancar.  Si intenta conectar con el
          antiguo <span class="application">SAPgui</span> de Linux recibirá
          los siguientes mensajes:</p><pre class="programlisting">Sat May 5 14:23:14 2001
*** ERROR =&gt; no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR =&gt; ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR =&gt; Error when generating text environment. [trgmsgi. 0435]
*** ERROR =&gt; function failed [trgmsgi. 0447]
*** ERROR =&gt; no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</pre><p>Este comportamiento se debe a que
          <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
          es incapaz de asignar correctamente un locale y tampoco
          puede configurarse a sí mismo correctamente (faltan
          entradas en algunas tablas de la base de datos).
          Añada las siguientes entradas al fichero
          <code class="filename">DEFAULT.PFL</code> y podrá conectarse a
          <span class="application"><span class="trademark">SAP</span>®</span>
          (vea la nota 0043288):</p><pre class="programlisting">abap/set_etct_env_at_new_mode = 0
install/collate/active = 0
rscp/TCP0B = TCP0B</pre><p>Reinicie el sistema <span class="application"><span class="trademark">SAP</span>®</span>.
          Puede conectar al sistema, aunque la configuración
          de idioma o de país puede que no funcione como se
          espera de ella.  Una vez corregidas las configuraciones de
          país (y proporcionados los locales adecuados)
          puede eliminar estas entradas
          de <code class="filename">DEFAULT.PFL</code> y el sistema
          <span class="application"><span class="trademark">SAP</span>®</span> puede reiniciarse.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-00001"></a>10.7.13.6. <span class="errorcode">ORA-00001</span></h4></div></div></div><p>Este error solo aparece con
          <span class="application"><span class="trademark">Oracle</span>® 8.1.7</span> en FreeBSD 4.5.
          Se debe a que la base de datos <span class="application"><span class="trademark">Oracle</span>®</span>
          no puede inicializarse correctamente y se viene abajo, dejando
          semáforos y memoria compartida en el sistema.  El
          siguiente intento de iniciar la base de datos produce
          el error <span class="errorcode">ORA-00001</span>.</p><p>Encuéntrelos con <code class="command">ipcs -a</code> y
          elimínelos
          con <code class="command">ipcrm</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-00445pmon"></a>10.7.13.7. <span class="errorcode">ORA-00445</span> (Brackground Process PMON
          Did Not Start)</h4></div></div></div><p>Este error tuvo lugar con
          <span class="application"><span class="trademark">Oracle</span>® 8.1.7</span>.  Aparece si
          se arranca la base de datos con el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>
          <code class="command">startsap</code>
          (por ejemplo <code class="command">startsap_majestix_00</code>)
          con el usuario <code class="systemitem">prdadm</code>.</p><p>Una solución (entre otras) es iniciar la base de
          datos con el usuario <code class="systemitem">oraprd</code> en
          lugar de hacerlo con <code class="command">svrmgrl</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svrmgrl</code></strong>
SVRMGR&gt; <strong class="userinput"><code>connect internal;</code></strong>
SVRMGR&gt; <strong class="userinput"><code>startup</code></strong>;
SVRMGR&gt; <strong class="userinput"><code>exit</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-12546"></a>10.7.13.8. <span class="errorcode">ORA-12546</span> (Start Listener with Correct
          Permissions)</h4></div></div></div><p>Inicie la escucha de <span class="application"><span class="trademark">Oracle</span>®</span> como
          usuario <code class="systemitem">oraids</code> con la siguiente
	  orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>De no ser así puede encontrarse con el error
          <span class="errorcode">ORA-12546</span>, ya que los sockets no
          tendrán los permisos adecuados.  Consulte la nota
          de <span class="trademark">SAP</span>® 0072984.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-27102"></a>10.7.13.9. <span class="errorcode">ORA-27102</span> (Out of Memory)</h4></div></div></div><p>Este error ocurre al tratar de usar valores mayores
          a 1 GB (1024x1024x1024) en <code class="literal">MAXDSIZ</code>
          y <code class="literal">DFLDSIZ</code>.  Recibiremos, además, este
          otro error:
          <span class="errorname">Linux Error 12: Cannot allocate memory</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dipgntabindind"></a>10.7.13.10. [DIPGNTAB_IND_IND] during <code class="command">R3SETUP</code></h4></div></div></div><p>Consulte la nota de <span class="trademark">SAP</span>® 0130581 de
          (<code class="command">R3SETUP</code> step
          (<code class="literal">DIPGNTAB</code> terminates).  Por alguna razón
          durante la instalación específica IDES el proceso
          de instalación no usaba el nombre de sistema correcto
          <span class="application"><span class="trademark">SAP</span>®</span>  <span class="quote">&#8220;<span class="quote">IDS</span>&#8221;</span>
          sino la cadena vacía <code class="literal">""</code>.
          Esto provocaba algunos errores menores en el acceso a directorios,
          ya que las rutas se generan dinámicamente en base a dicho
          <em class="replaceable"><code>SID</code></em> (en este caso IDS).
          En lugar de ejecutar los accesos del siguiente modo :</p><pre class="programlisting">/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</pre><p>se usaron las siguientes rutas:</p><pre class="programlisting">/usr/sap//SYS/...
/usr/sap/D00</pre><p>Para continuar con la instalación creamos un
          enlace y un directorio adicional:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pwd</code></strong>
/compat/linux/usr/sap
<code class="prompt">#</code> <strong class="userinput"><code>ls -l</code></strong>
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans</pre><p>Encontramos una descripción de este comportamiento
          en las notas de <span class="trademark">SAP</span>®.  (0029227 y 0008401).
          En la instalación de
          <span class="application"><span class="trademark">SAP</span>® 4.6C</span> no tuvimos estos
          problemas.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcrswboiniindind"></a>10.7.13.11. [RFCRSWBOINI_IND_IND] during <code class="command">R3SETUP</code></h4></div></div></div><p>Durante la instalación de
          <span class="application"><span class="trademark">SAP</span>® 4.6C</span> nos encontramos con
          este error, cuyo origen está en un error que tuvo lugar
          anteriormente durante la propia instalación.
          Busque en sus ficheros de log y corrija el problema.</p><p>Si despues de buscar en los logs el error resulta ser
          el correcto (revise las notas de <span class="trademark">SAP</span>®), puede poner el
          <code class="literal">STATUS</code> del paso donde se produce el error de
          <code class="literal">ERROR</code> a <code class="literal">OK</code>
          (en el fichero <code class="filename">CENTRDB.R3S</code>) y reiniciar
          <code class="command">R3SETUP</code>.  Una vez finalizada la instalación,
          tiene que ejecutar el informe <code class="literal">RSWBOINS</code>
          de la transacción SE38.  Consulte la nota <span class="trademark">SAP</span>® 0162266
          para más información sobre las fases
          <code class="literal">RFCRSWBOINI</code> y
	  <code class="literal">RFCRADDBDIF</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcraddbdifindind"></a>10.7.13.12. [RFCRADDBDIF_IND_IND] during <code class="command">R3SETUP</code></h4></div></div></div><p>Aquí sucede lo mismo de antes, asegúrese,
          revisando los logs, de que la causa de este error no esté
          en algún problema previo.</p><p>Si en la nota de <span class="trademark">SAP</span>® 0162266 está la solución
          ponga el <code class="literal">STATUS</code> del paso donde se
          produce el error de
          <code class="literal">ERROR</code> a <code class="literal">OK</code>
          (en el fichero <code class="filename">CENTRDB.R3S</code>) y reinicie
          <code class="command">R3SETUP</code>.  Una vez finalizada la
          instalación ejecute el informe
          <code class="literal">RADDBDIF</code> desde la transacción SE38.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sigactionsig31"></a>10.7.13.13. <span class="errorcode">sigaction sig31: File size limit exceeded</span></h4></div></div></div><p>Este error ocurrió durante el inicio del proceso
          <span class="application"><span class="trademark">SAP</span>®</span>
          <span class="emphasis"><em>disp+work</em></span>.  Si inicia
          <span class="application"><span class="trademark">SAP</span>®</span>
          con el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> <code class="command">startsap</code>
          se inician los subprocesos que se separan y hacen el
          <span class="quote">&#8220;<span class="quote">trabajo sucio</span>&#8221;</span> de iniciar el resto de procesos de
          <span class="application"><span class="trademark">SAP</span>®</span>, pero es importante saber que
          el propio <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> no notará si algo ha
          ido mal.</p><p>Puede revisar si los procesos <span class="application"><span class="trademark">SAP</span>®</span>
          se iniciaron correctamente con
          <code class="command">ps ax | grep SID</code>, que
          le proporcionará una lista de todos los procesos de
          <span class="application"><span class="trademark">Oracle</span>®</span> y de
          <span class="application"><span class="trademark">SAP</span>®</span>.
          Si parece que algunos procesos no están, o si no puede
          conectarse al sistema <span class="application"><span class="trademark">SAP</span>®</span> revise los
          logs que encontrará en
          <code class="filename">/usr/sap/SID/DVEBMGSnr/work/</code>.
          Los ficheros que debe revisar son <code class="filename">dev_ms</code> y
	  <code class="filename">dev_disp</code>.</p><p>La señal 31 aparece si la cantidad de memoria
          compartida asignada a
          <span class="application"><span class="trademark">Oracle</span>®</span> y
	  <span class="application"><span class="trademark">SAP</span>®</span>
          supera la definida dentro del fichero de configuración del
          kernel y puede resolverse usando un valor mayor:</p><pre class="programlisting"># larger value for 46C production systems:
options SHMMAXPGS=393216
# smaller value sufficient for 46B:
#options SHMMAXPGS=262144</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="saposcolfails"></a>10.7.13.14. Start of <code class="command">saposcol</code> Failed</h4></div></div></div><p>Hay algunos problemas con el programa
          <code class="command">saposcol</code> (version 4.6D).
          El sistema <span class="application"><span class="trademark">SAP</span>®</span> utiliza
          <code class="command">saposcol</code> para recoger datos del
          rendimiento del sistema.  Este programa no es necesario para
          usar el sistema <span class="application"><span class="trademark">SAP</span>®</span>, así
          que el problema puede considerarse como poco importante.
          La versión más antigua (4.6B) funciona, pero
          no recoge todos los datos (muchas llamadas devolverán
          un 0, por ejemplo el uso de CPU).</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-advanced"></a>10.8. Temas avanzados</h2></div></div></div><p>Si siente curiosidad por saber cómo funciona
      la compatibilidad con Linux esta es la sección que
      debe leer.  La mayor parte de lo que sigue está
      basado casi en su totalidad en un mensaje enviado por Terry
      Lambert <code class="email">&lt;<a xmlns="" class="email" href="mailto:tlambert@primenet.com">tlambert@primenet.com</a>&gt;</code> a la lista <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">lista de charla de FreeBSD</a>
      (Message ID: <code class="literal">&lt;199906020108.SAA07001@usr09.primenet.com&gt;</code>).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72296528"></a>10.8.1. ?Cómo funciona?</h3></div></div></div><a id="idp72297168" class="indexterm"></a><p>FreeBSD dispone de una abstracció denominada
      <span class="quote">&#8220;<span class="quote">cargador de clase en ejecución</span>&#8221;</span>.  Esto no
      es más que un bloque de código incrustado
      en la llamada <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a> del sistema.</p><p>Históricamente las plataformas <span class="trademark">UNIX</span>®
      disponían de un único cargador
      de binarios, que en última instancia
      (<span class="emphasis"><em>fallback</em></span>) recurría
      al cargador <code class="literal">#!</code> para ejecutar
      cualesquiera intérpretes o scripts de la shell. Ese
      cargador único examinaba el número
      mágico (generalmente los 4 u 8 primeros bytes
      del fichero) para ver si era un binario reconocible
      por el sistema y, en tal caso, invocaba al cargador
      binario.</p><p>Si no era de tipo binario, la llamada <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a>
      devolvía un error y la shell intentaba empezar
      a ejecutarlo como órdenes shell, tomando por
      defecto como punto de partida
      <span class="quote">&#8220;<span class="quote">la shell actual, sea cual sea</span>&#8221;</span>.</p><p>Posteriormente se pensó en hacer una
      modificación de manera que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a> examinara
      los dos primeros caracteres, de modo que si eran
      <code class="literal">:\n</code> se llamaba a la shell
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span></a> en su lugar (parece ser que en SCO
      fueron los primeros en utilizar ese truco).</p><p>Lo que ocurre ahora es que FreeBSD dispone de una
        lista de cargadores, en lugar de uno solo.  FreeBSD
        recorre esa lista de cargadores, con un cargador genérico
        <code class="literal">#!</code> que sabe reconocer los
	intérpretes en base a los caracteres que
        siguen al siguiente espacio en blanco, con
	<code class="filename">/bin/sh</code> como último
        recurso.</p><a id="idp72306000" class="indexterm"></a><p>Para dar soporte a la ABI
      (<span class="quote">&#8220;<span class="quote">Application Binary Interface</span>&#8221;</span>) de Linux,
      FreeBSD interpreta el número mágico como un
      binario ELF (<span class="quote">&#8220;<span class="quote">Executable and Linking
      Format</span>&#8221;</span>): En este punto no hace distinción
      entre FreeBSD, <span class="trademark">Solaris</span>&#8482;, <span class="trademark">Linux</span>® o cualquier otro SO que tenga un
      tipo de imagen ELF.</p><a id="idp72317008" class="indexterm"></a><p>El cargador ELF busca entonces una marca
      (<span class="emphasis"><em>brand</em></span>) especial, una
      sección de comentarios en la imagen ELF
      que no está presente en los binarios ELF de
      SVR4/<span class="trademark">Solaris</span>&#8482;.</p><p>Para que los binarios de Linux funcionen deben
      estar marcados con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> como tipo
      <code class="literal">Linux</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux file</code></strong></pre><p>Hecho esto el cargador ELF verá la
      marca <code class="literal">Linux</code> en el fichero.</p><a id="idp72321872" class="indexterm"></a><p>Cuando el cargador ELF ve la marca
      <code class="literal">Linux</code> sustituye un puntero en la
      estructura <code class="literal">proc</code>.  Todas las
      llamadas del sistema se indexan a través de
      este puntero (en un sistema <span class="trademark">UNIX</span>® tradicional
      sería el «array» de estructura
      <code class="literal">sysent[]</code> que contiene las llamadas
      del sistema).  Además, el proceso se marca
      con unos indicadores (<span class="quote">&#8220;<span class="quote">flags</span>&#8221;</span>) para que
      el vector trampa del código de envío
      señales lo maneje de una forma determinada,
      así como otros arreglos (menores) que
      serán utilizados por el módulo Linux
      del kernel.</p><p>El vector de llamada del sistema Linux contiene,
      entre otras cosas, una lista de entradas
      <code class="literal">sysent[]</code> cuyas direcciones residen
      en el módulo del kernel.</p><p>Cuando el binario Linux realiza una llamada al
      sistema, el código trampa extrae el puntero
      a la función de la llamada del sistema de la estructura
      <code class="literal">proc</code>, y así obtiene los puntos de
      entrada a las llamadas del sistema Linux, no las
      de FreeBSD.</p><p>Además, el modo Linux cambia la raíz
      de las búsquedas de una forma dinámica. En
      efecto, esto es lo que hace la opción
      <code class="option">union</code> cuando se monta un sistema de ficheros
      (¡y que <span class="emphasis"><em>no</em></span> es lo mismo que el
      sistema de ficheros <code class="literal">unionfs</code>!).  Primero
      se hace un intento de buscar el fichero en el directorio
      <code class="filename">/compat/linux/ruta-original</code>
      y <span class="emphasis"><em>solo después</em></span>, si lo anterior
      falla, se repite la búsqueda en el
      directorio
      <code class="filename">/ruta-original</code>.  Esto
      permite que se puedan ejecutar binarios que necesitan de
      otros binarios (por ejemplo las herramientas de
      programación (<span class="quote">&#8220;<span class="quote">toolchain</span>&#8221;</span>) de Linux
      pueden ejecutarse en su totalidad bajo la ABI de
      Linux). Esto significa también que los binarios
      Linux pueden cargar y ejecutar binarios FreeBSD si los binarios
      Linux equivalentes no se hallan presentes y que se puede poner
      una orden <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a> en el árbol de directorios
      <code class="filename">/compat/linux</code> para poder estar seguros de
      que los binarios Linux no puedan decir que no estaban
      ejecutándose en Linux.</p><p>En efecto, hay un kernel Linux en el kernel
       FreeBSD; las distintas funciones subyacentes que
       implementan todos los servicios proporcionados
       por el kernel son idénticas en ambas, las
       tablas de entradas de llamadas del sistema en FreeBSD y en
       Linux: operaciones del sistema de ficheros, operaciones
       de memoria virtual, envío de señales
       IPC System V, etc.  La única diferencia es que
       los binarios FreeBSD reciben sus funciones de
       conexión (<span class="quote">&#8220;<span class="quote"><span class="emphasis"><em>glue</em></span></span>&#8221;</span>)
       y los binarios Linux las suyas (la mayoría de los
       sistemas operativos más antiguos solo tienen sus
       propias funciones de conexión:
       direcciones de funciones en un <span class="quote">&#8220;<span class="quote">array</span>&#8221;</span> de
       estructura <code class="literal">sysent[]</code> estática y
       global, en lugar de direcciones de funciones que se extraen
       a partir de un puntero inicializado dinámicamente
       en la estructura <code class="literal">proc</code> del proceso que hace
       la llamada).</p><p>?Cuál es entonces la ABI nativa de FreeBSD?  No
      importa. Básicamente, la única diferencia
      es (ahora mismo; esto podría cambiar y probablemente lo
      hará en una release futura) que las funciones de
      conexión de FreeBSD están enlazadas
      estáticamente en el kernel mientras que las de
      Linux pueden estarlo también estáticamente o
      se puede acceder a ellas por medio de un módulo
      del kernel.</p><p>Bien, pero ?de verdad es esto una
      emulación?  No.  Es una implementación ABI, no
      una emulación. No hay un emulador involucrado (ni
      un simulador, para adelantarnos a la siguiente
      pregunta).</p><p>Entonces ?por qué a veces se le llama
      <span class="quote">&#8220;<span class="quote">emulación Linux</span>&#8221;</span>?  ¡Para hacer
      más difícil el vender FreeBSD!  En serio, se
      debe a que la primera implementación se hizo
      en un momento en que realmente no había ninguna
      palabra distinta a esa para describir lo que se estaba
      haciendo; decir que FreeBSD ejecutaba binarios Linux no era
      cierto si no se compilaba el código o se cargaba
      un módulo; hacía falta una forma de
      describir todo esto y acabamos usando
      <span class="quote">&#8220;<span class="quote">emulador Linux</span>&#8221;</span>.</p></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="system-administration"></a>Parte III. Administración del sistema.</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>Los restantes capítulos de este libro cubren
        todos los aspectos de administración de un sistema FreeBSD.
	Cada capítulo comienza describiendo lo que será
	aprendido una vez finalizada la lectura, explicando también
	los conocimientos mínimos necesarios para una
	comprensión satisfactoria del texto.</p><p>Estos capítulos están diseñados para
        leerse cuando se necesita la información. No es
	necesario leerlos en un determinado orden ni es necesario
	leerlos todos antes de comenzar a usar FreeBSD.</p><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="chapter"><a href="#config-tuning">11. Configuración y Adaptación del Sistema</a></span></dt><dd><dl><dt><span class="sect1"><a href="#config-network-setup">11.1. Configuración de Tarjetas de Red</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">11.2. <span class="quote">&#8220;<span class="quote">Arrancar servicios</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#soft-updates">11.3. <span class="quote">&#8220;<span class="quote">Soft Updates</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#adding-swap-space">11.4. Añadir espacio swap</a></span></dt></dl></dd><dt><span class="chapter"><a href="#boot">12. El proceso de arranque en FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#boot-synopsis">12.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">12.2. El problema que representa arrancar el sistema</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">12.3. El RMA y las etapas de arranque uno, dos y tres</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">12.4. Interacción con el kernel durante el arranque</a></span></dt><dt><span class="sect1"><a href="#device-hints">12.5. Device Hints</a></span></dt><dt><span class="sect1"><a href="#boot-init">12.6. Init: inicialización del proceso de control</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">12.7. Secuencia de apagado</a></span></dt></dl></dd><dt><span class="chapter"><a href="#users">13. Usuarios y administración básica de cuentas</a></span></dt><dd><dl><dt><span class="sect1"><a href="#users-synopsis">13.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#users-introduction">13.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#users-superuser">13.3. La cuenta superusuario</a></span></dt><dt><span class="sect1"><a href="#users-system">13.4. Cuentas de sistema</a></span></dt><dt><span class="sect1"><a href="#users-user">13.5. Cuentas de usuario</a></span></dt><dt><span class="sect1"><a href="#users-modifying">13.6. Modificación de cuentas</a></span></dt><dt><span class="sect1"><a href="#users-limiting">13.7. Limitar a los usuarios</a></span></dt><dt><span class="sect1"><a href="#users-personalizing">13.8. Personalizar a los usuarios</a></span></dt><dt><span class="sect1"><a href="#users-groups">13.9. Grupos</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">14. Seguridad</a></span></dt><dd><dl><dt><span class="sect1"><a href="#security-synopsis">14.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#security-intro">14.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">14.3. Asegurar FreeBSD</a></span></dt><dt><span class="sect1"><a href="#crypt">14.4. DES, MD5 y Crypt</a></span></dt><dt><span class="sect1"><a href="#one-time-passwords">14.5. Contraseñas de un solo uso</a></span></dt><dt><span class="sect1"><a href="#tcpwrappers">14.6. TCP Wrappers</a></span></dt><dt><span class="sect1"><a href="#kerberosIV">14.7. <span class="application">KerberosIV</span></a></span></dt><dt><span class="sect1"><a href="#kerberos5">14.8. <span class="application">Kerberos5</span></a></span></dt><dt><span class="sect1"><a href="#openssl">14.9. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">14.10. VPN sobre IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">14.11. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">14.12. Listas de control de acceso a sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#security-portaudit">14.13. Monitorización de fallos de seguridad de aplicaciones</a></span></dt><dt><span class="sect1"><a href="#security-advisories">14.14. FreeBSD Security Advisories</a></span></dt><dt><span class="sect1"><a href="#security-accounting">14.15. Contabilidad de procesos</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jails">15. Jaulas</a></span></dt><dd><dl><dt><span class="sect1"><a href="#jails-synopsis">15.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#jails-terms">15.2. Términos relacionados con las jaulas</a></span></dt><dt><span class="sect1"><a href="#jails-intro">15.3. Introducción</a></span></dt><dt><span class="sect1"><a href="#jails-build">15.4. Creación y gestión de jaulas</a></span></dt><dt><span class="sect1"><a href="#jails-tuning">15.5. Administración y personalización a fondo</a></span></dt><dt><span class="sect1"><a href="#jails-application">15.6. Uso de las jaulas</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mac">16. Mandatory Access Control</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mac-synopsis">16.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#mac-inline-glossary">16.2. Términos clave en este capítulo</a></span></dt><dt><span class="sect1"><a href="#mac-initial">16.3. Explicación de MAC</a></span></dt><dt><span class="sect1"><a href="#mac-understandlabel">16.4. Las etiquetas MAC</a></span></dt><dt><span class="sect1"><a href="#mac-modules">16.5. Configuración de módulos</a></span></dt><dt><span class="sect1"><a href="#mac-ifoff">16.6. El módulo MAC ifoff</a></span></dt><dt><span class="sect1"><a href="#mac-portacl">16.7. El módulo MAC portacl</a></span></dt><dt><span class="sect1"><a href="#mac-labelingpolicies">16.8. Políticas de etiquetas MAC</a></span></dt><dt><span class="sect1"><a href="#mac-partition">16.9. El módulo MAC partition</a></span></dt><dt><span class="sect1"><a href="#mac-mls">16.10. El módulo de seguridad multinivel MAC</a></span></dt><dt><span class="sect1"><a href="#mac-biba">16.11. El módulo MAC Biba</a></span></dt><dt><span class="sect1"><a href="#mac-lomac">16.12. El módulo MAC LOMAC</a></span></dt><dt><span class="sect1"><a href="#mac-implementing">16.13. Implementación de un entorno seguro con MAC</a></span></dt><dt><span class="sect1"><a href="#MAC-examplehttpd">16.14. Otro ejemplo: Uso de MAC para restringir un servidor web</a></span></dt><dt><span class="sect1"><a href="#mac-troubleshoot">16.15. Depuración de errores en MAC</a></span></dt></dl></dd><dt><span class="chapter"><a href="#audit">17. Auditoría de eventos de seguridad</a></span></dt><dd><dl><dt><span class="sect1"><a href="#audit-synopsis">17.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#disks">18. Almacenamiento</a></span></dt><dd><dl><dt><span class="sect1"><a href="#disks-synopsis">18.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#disks-naming">18.2. Nombres de dispositivo</a></span></dt><dt><span class="sect1"><a href="#disks-adding">18.3. Añadir discos</a></span></dt><dt><span class="sect1"><a href="#raid">18.4. RAID</a></span></dt><dt><span class="sect1"><a href="#usb-disks">18.5. Dispositivos de almacenamiento USB</a></span></dt><dt><span class="sect1"><a href="#creating-cds">18.6. Creación y uso de medios ópticos (CD)</a></span></dt><dt><span class="sect1"><a href="#creating-dvds">18.7. Crear y utilizar medios ópticos (DVDs)</a></span></dt><dt><span class="sect1"><a href="#floppies">18.8. Creación y uso de disquetes (floppies)</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">18.9. Creación y uso de cintas de datos</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">18.10. Respaldos en disquetes</a></span></dt><dt><span class="sect1"><a href="#backup-basics">18.11. Bases para respaldos</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</a></span></dt><dt><span class="sect1"><a href="#snapshots">18.13. Instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>) de sistemas
      de ficheros</a></span></dt><dt><span class="sect1"><a href="#quotas">18.14. Cuotas en sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">18.15. Cifrado de particiones de disco</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GEOM">19. GEOM: Marco de trabajo modular de transformación de discos</a></span></dt><dd><dl><dt><span class="sect1"><a href="#GEOM-synopsis">19.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#GEOM-intro">19.2. Introducción a GEOM</a></span></dt><dt><span class="sect1"><a href="#GEOM-striping">19.3. RAID0 - Distribución por bandas</a></span></dt><dt><span class="sect1"><a href="#GEOM-mirror">19.4. RAID1 - Replicación</a></span></dt></dl></dd><dt><span class="chapter"><a href="#vinum-vinum">20. El Gestor de Volúmenes Vinum</a></span></dt><dd><dl><dt><span class="sect1"><a href="#vinum-synopsis">20.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#vinum-intro">20.2. Los Discos son Demasiado Pequeños</a></span></dt><dt><span class="sect1"><a href="#vinum-access-bottlenecks">20.3. Cuellos de Botella en el Acceso</a></span></dt><dt><span class="sect1"><a href="#vinum-data-integrity">20.4. Integridad de Datos</a></span></dt><dt><span class="sect1"><a href="#vinum-objects">20.5. Objetos Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-examples">20.6. Ejemplos</a></span></dt><dt><span class="sect1"><a href="#vinum-object-naming">20.7. Esquema de Nombres de los Objetos</a></span></dt><dt><span class="sect1"><a href="#vinum-config">20.8. Configuración de Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-root">20.9. Uso de Vinum en el Sistema de Ficheros Raíz</a></span></dt></dl></dd><dt><span class="chapter"><a href="#virtualization">21. Virtualización</a></span></dt><dd><dl><dt><span class="sect1"><a href="#virtualization-synopsis">21.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#l10n">22. Localización - Uso y configuración de
    I18N/L10N</a></span></dt><dd><dl><dt><span class="sect1"><a href="#l10n-synopsis">22.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">22.2. Lo básico</a></span></dt><dt><span class="sect1"><a href="#using-localization">22.3. Uso de la localización</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">22.4. Compilación de programas con soporte para I18N</a></span></dt><dt><span class="sect1"><a href="#lang-setup">22.5. Localización de FreeBSD a idiomas específicos</a></span></dt></dl></dd><dt><span class="chapter"><a href="#cutting-edge">23. Lo último de lo último</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp77147472">23.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#current-stable">23.2. FreeBSD-CURRENT vs. FreeBSD-STABLE</a></span></dt><dt><span class="sect1"><a href="#synching">23.3. Sincronización de su código fuente</a></span></dt><dt><span class="sect1"><a href="#makeworld">23.4. Uso de <code class="command">make world</code></a></span></dt><dt><span class="sect1"><a href="#small-lans">23.5. Redes pequeñas</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-tuning"></a>Capítulo 11. Configuración y Adaptación del Sistema</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#config-network-setup">11.1. Configuración de Tarjetas de Red</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">11.2. <span class="quote">&#8220;<span class="quote">Arrancar servicios</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#soft-updates">11.3. <span class="quote">&#8220;<span class="quote">Soft Updates</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#adding-swap-space">11.4. Añadir espacio swap</a></span></dt></dl></div><p>Configuración y Adaptación del Sistema</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config-network-setup"></a>11.1. Configuración de Tarjetas de Red</h2></div></div></div><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-starting-services"></a>11.2. <span class="quote">&#8220;<span class="quote">Arrancar servicios</span>&#8221;</span></h2></div></div></div><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="soft-updates"></a>11.3. <span class="quote">&#8220;<span class="quote">Soft Updates</span>&#8221;</span></h2></div></div></div><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="adding-swap-space"></a>11.4. Añadir espacio swap</h2></div></div></div><p>Pendiente de traducción</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot"></a>Capítulo 12. El proceso de arranque en FreeBSD</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#boot-synopsis">12.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">12.2. El problema que representa arrancar el sistema</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">12.3. El RMA y las etapas de arranque uno, dos y tres</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">12.4. Interacción con el kernel durante el arranque</a></span></dt><dt><span class="sect1"><a href="#device-hints">12.5. Device Hints</a></span></dt><dt><span class="sect1"><a href="#boot-init">12.6. Init: inicialización del proceso de control</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">12.7. Secuencia de apagado</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-synopsis"></a>12.1. Sinopsis</h2></div></div></div><a id="idp72351312" class="indexterm"></a><a id="idp72351824" class="indexterm"></a><p>Al proceso de inicio del sistema y carga del sistema operativo
      se le conoce como <span class="quote">&#8220;<span class="quote">mecanismo de arranque</span>&#8221;</span> (bootstrap),
      o simplemente
      <span class="quote">&#8220;<span class="quote">arranque</span>&#8221;</span> (booting). El proceso de arranque de FreeBSD
      provee de gran flexibilidad al configurar lo que ocurre cuando se
      inicia el sistema, permitiendole seleccionar de diferentes sistemas
      operativos instalados en el mismo ordenador, o inclusive diferentes
      versiones del mismo sistema oprativo o kernels instalados.</p><p>Este capítulo detalla las opciones de configuración
      que puede manejar y como personalizar el proceso de arranque de
      FreeBSD.  Esto incluye todo lo que sucede hasta que el kernel de
      FreeBSD comienza con la comprobación de dispositivos y se
      inicializa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.  En caso de que usted desconozca cuando ocurre
      todo esto, esto sucede cuando el color del texto que aparece al iniciar
      el sistema, cambia de blanco a gris.</p><p>Una vez que concluya con la lectura de este capítulo, usted
      sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cuales son los componentes del mecanismo de arranque de FreeBSD,
	  y como es que interactuan entre sí.</p></li><li class="listitem"><p>Las opciones que puede manejar con los componentes del mecanismo
	  de arranque de FreeBSD, para controlar el proceso de inicio
	  del sistema.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Sólo x86: </h3><p xmlns="http://www.w3.org/1999/xhtml">El presente capítulo describe únicamente el
        proceso de inicio, para sistemas FreeBSD que corren en plataformas
        Intel x86.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-introduction"></a>12.2. El problema que representa arrancar el sistema</h2></div></div></div><p>El encender una computadora e iniciar el sistema operativo, trae
      consigo un dilema interesante.  Por definición, la computadora
      no sabe hacer nada, hasta que el sistema operativo ha sido cargado.  Esto
      incluye la ejecución de programas desde el disco duro.  Así
      que este es el dilema; si la computadora no sabe hacer nada hasta que se
      cargue el sistema operativo, y el sistema operativo es un conjunto de
      programas que residen en el disco duro, ?Cómo es que
      arranca el sistema operativo?</p><p>Este problema se asemeja a un problema del libro <em class="citetitle">Las
      Aventuras del Barón Munchausen</em>.  Donde un personaje ha
      caido parcialmente en un hoyo, y ha podido salir al tomarse de las cintas
      de sus botas y jalarse hacia fuera.  En los años mozos de la
      computación, el término utilizado para hablar sobre el
      proceso de carga del sistema operativo era <em class="firstterm">mecanismo de
      arranque</em> (bootstrap), que por efectos de simplificación
      ahora conocemos como <span class="quote">&#8220;<span class="quote">arranque</span>&#8221;</span> (booting).</p><p>En equipos con arquitectura x86, el Sistema Básico de
      Entrada/Salida (BIOS) es el responsable de cargar el sistema
      operativo.  Para hacer esto, el BIOS busca en el disco duro el Registro
      Maestro de Arranque (RMA) (N de T. Conocido como MBR&#8212;Master Boot
      Record), el cual debe localizarse en un lugar específico del disco.
      El BIOS cuenta con suficiente información, para cargar y ejecutar
      el RMA, y asumir que el RMA puede encargarse del resto de las tareas
      necesarias en la carga del sistema operativo.</p><a id="idp72369744" class="indexterm"></a><p>Si usted sólo cuenta con un sistema operativo instalado en
      su disco duro, el RMA estándar será suficiente.  Este RMA
      buscará la primer partición del disco que pueda arrancar, y
      posteriormente ejecutará el código restante de dicha
      partición, para efecto de completar la carga del sistema
      operativo.</p><p>Si usted cuenta con varios sistemas operativos instalados en su
      disco, entonces puede hacer uso de un RMA diferente, uno que despliegue
      una lista de los diferentes sistemas operativos, y le permita escoger
      cual de ellos desea que se cargue.  FreeBSD cuenta con un RMA de este
      tipo que puede ser instalado, así como otros distribuidores de
      sistemas operativos cuentan con RMAs alternativos.</p><p>En el caso de FreeBSD, el resto del mecanismo de arranque, está
      dividido en tres etapas.  La primer etapa es ejecutada por al RMA, que
      sabe lo suficiente como para poner a la computadora en un estado
      específico y ejecutar la segunda etapa.  La segunda etapa puede
      hacer un poco más que esto, antes de ejecutar la tercer etapa.  La
      tercer etapa finaliza el trabajo de carga del sistema operativo.  El
      trabajo es dividido en tres etapas, debido a las limitantes que tiene
      una PC, en cuanto al tamaño de los programas a ejecutar, durante
      las etapas uno y dos.  El encadenar estas tareas, le permiten a FreeBSD
      contar con un arrancador más flexible.</p><a id="idp72372048" class="indexterm"></a><a id="idp72372560" class="indexterm"></a><p>Posteriormente el kernel es inicializado y comienza con la
      comprobación de dispositivos, y prepararlos para su uso.  Una
      vez que el proceso de arranque del kernel ha finalizado, el kernel
      transfiere el control al proceso de usuario <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, quien se
      asegura de que los discos se encuentren en buen estado para su
      uso.  Posteriormente <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> inicia la configuración
      fuente a nivel de usuario, que monta los sistemas de ficheros,
      configura las tarjetas de red para que pueden comunicarse en la red,
      y comunmente inicia todos los procesos que normalmente son ejecutados
      en un sistema FreeBSD al arrancar el mismo.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-blocks"></a>12.3. El RMA y las etapas de arranque uno, dos y tres</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot0"></a>12.3.1. RMA, <code class="filename">/boot/boot0</code></h3></div></div></div><a id="idp72381264" class="indexterm"></a><p>El RMA de FreeBSD, se localiza en <code class="filename">/boot/boot0</code>.
        Este es una <span class="emphasis"><em>copia</em></span> del RMA, ya que el RMA real
        debe localizarse en una parte especial del disco duro, fuera de la
        área de FreeBSD.</p><p>El fichero <code class="filename">boot0</code> es muy simple, dado que el
        programa en el <abbr class="abbrev">RMA</abbr> sólo puede ser de 512 bytes.
        Si usted ha instalado el RMA de FreeBSD y ha instalado varios sistemas
        operativos en sus discos duros, entonces al momento de arrancar el
        sistema, visualizará una pantalla similar a la siguiente.</p><div class="example"><a id="boot-boot0-example"></a><div class="example-title">Ejemplo 12.1. Pantalla <code class="filename">boot0</code></div><div class="example-contents"><pre class="screen">F1 DOS
F2 FreeBSD
F3 Linux
F4 ??
F5 Drive 1

Default: F2</pre></div></div><br class="example-break" /><p>Es sabido que otros sistemas, en particular Windows 95, sobreescriben
        el RMA con el suyo.  Si esto le sucede, o bien desea reemplazar su RMA
        actual con el RMA de FreeBSD, entonces puede utilizar las siguientes
        órdenes.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -B -b /boot/boot0 dispositivo</code></strong></pre><p>Donde <em class="replaceable"><code>dispositivo</code></em> es aquel, desde el
        cual usted pretende arrancar el sistema, tal como
        <code class="filename">ad0</code> para el disco conectado al primer IDE,
        <code class="filename">ad2</code> para el disco maestro conectado al IDE
        secundario, <code class="filename">da0</code> para el primer disco SCSI, y
        así sucesivamente.</p><p>Por otro lado, si usted es un usuario de Linux, y prefiere que
        la aplicación <span class="application">LILO</span> controle el
        proceso de arranque, puede editar el fichero
        <code class="filename">/etc/lilo.conf</code> para incluir a FreeBSD, o bien
        seleccionar la opción
        <code class="option">Leave The Master Boot Record Untouched</code> durante
        el proceso de instalación.  Si ha instalado el gestor de
        arranque de FreeBSD, puede arrancar Linux y modificar el fichero
        de configuración de <span class="application">LILO</span>,
        <code class="filename">/etc/lilo.conf</code>, añadiendo la
        siguiente opción:</p><pre class="programlisting">other=/dev/hdXY
table=/dev/hdb
loader=/boot/chain.b
label=FreeBSD</pre><p>lo que permitirá el arranque de FreeBSD y Linux, por
        medio de <span class="application">LILO</span>.  En nuestro ejemplo
        hemos utilizado <em class="replaceable"><code>XY</code></em> para especificar
        el disco utilizado y su partición.  Si usted utiliza un
        sistema <acronym class="acronym">SCSI</acronym>, deberá cambiar
        <em class="replaceable"><code>/dev/hdXY</code></em> por algo similar a
        <em class="replaceable"><code>/dev/sdXY</code></em>, que nuevamente utiliza
        la sintáxis <em class="replaceable"><code>XY</code></em>.  La opción
        <code class="option">loader=/boot/chain.b</code> puede omitirse si usted
        cuenta con ambos sistemas operativos en el mismo disco.  Una vez
        que esto se ha completado, puede ejecutar
        <code class="command">/sbin/lilo -v</code> para que se actualicen los cambios
        en el sistema, lo cual deberá verificarse con los
        mensajes que aparezcan en pantalla.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">N de T: La opción mencionada como;
	    <code class="option">Leave The Master Boot Record Untouched</code>, se
	    mostrará <span class="quote">&#8220;<span class="quote">tal cual</span>&#8221;</span> aparece en este
	    documento, una vez que ha terminado la fase de
	    partición del disco duro.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot1"></a>12.3.2. Etapa uno, <code class="filename">/boot/boot1</code>, y etapa dos,
	<code class="filename">/boot/boot2</code></h3></div></div></div><p>Conceptualmente las estapas uno y dos, son parte del mismo
        programa, en la misma área del disco.  Por cuestiones de
        espacio se han dividido en dos, pero estas siempre se instalaran
        de manera conjunta.</p><p>Estas son localizadas en el sector de arranque, de la
        partición de arranque, que es donde <a class="link" href="#boot-boot0" title="12.3.1. RMA, /boot/boot0">boot0</a>, o cualquier otro programa
        del <abbr class="abbrev">RMA</abbr> espera encontrar el programa que
        dará continuación al proceso de arranque.  Los
        ficheros localizados bajo el directorio <code class="filename">/boot</code>
        son copias de los ficheros reales, que se localizan fuera del
        sistema de ficheros de FreeBSD.</p><p>El fichero <code class="filename">boot1</code> es muy simple, en virtud
        de que sólo puede tener un tamaño de 512 bytes, y
        conocer simplemente del etiquetador de discos de FreeBSD
        (<em class="firstterm">disklabel</em>), el cual almacena la
        información de las particiones, para efecto de localizar
        y ejecutar <code class="filename">boot2</code>.</p><p>El fichero <code class="filename">boot2</code> es un poco más
        sofisticado, y comprende lo suficiente del sistema de ficheros de
        FreeBSD como para localizar ficheros en el, y puede proveer una
        interfaz simple, para seleccionar el kernel o cargador que
        deberá ejecutarse.</p><p>En virtud de que el <a class="link" href="#boot-loader" title="12.3.3. Etapa tres, /boot/loader (cargador de arranque)">cargador</a>
        (loader) es mucho más sofisticado, y provee una
        configuración de arranque más sencilla de utilizar,
        <code class="filename">boot2</code> la ejecuta normalmente, una vez que ha
        terminado de solicitar el arranque del kernel directamente.</p><div class="example"><a id="boot-boot2-example"></a><div class="example-title">Ejemplo 12.2. Pantalla de <code class="filename">boot2</code></div><div class="example-contents"><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/kernel
boot:</pre></div></div><br class="example-break" /><p>Si alguna vez requiere reemplazar los ficheros
	    <code class="filename">boot1</code> y <code class="filename">boot2</code>
	    instalados, utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>disklabel -B partición</code></strong></pre><p>Donde <em class="replaceable"><code>partición</code></em> es el disco
        y partición del cual pretende arrancar el sistema, tal como
        <code class="filename">ad0s1</code> para la primer partición del
        disco Mastro&#8212;Primario.</p><div xmlns="" class="warning"><h3 class="admontitle">Modo peligrosamente dedicado: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si sólo utiliza el nombre del disco, tal como
	  <code class="filename">ad0</code>, al usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>
	  creará un disco peligrosamente dedicado, sin partición
	  alguna.  Seguramente esto no es lo que desea hacer, así que
	  asegurese dos veces antes de presionar la tecla <span class="keycap"><strong>Return</strong></span>
	  cuando utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader"></a>12.3.3. Etapa tres, <code class="filename">/boot/loader</code> (cargador de arranque)</h3></div></div></div><a id="idp72430928" class="indexterm"></a><p>El cargador es la etapa final de las tres etapas del mecanismo
      de arranque, y esta localizado en el sistema de ficheros, normalmente
      como <code class="filename">/boot/loader</code>.</p><p>El cargador pretende ser un metodo amistoso de
      configuración, utilizando una serie de órdenes integradas
      de fácil uso, respaldado por un intérprete más
      poderoso, con una serie de órdenes de mayor complejidad.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-flow"></a>12.3.3.1. Flujo del programa cargador</h4></div></div></div><p>Durante la inicialización del sistema, el cargador
        hará una comprobación en busca de una
        consola y discos, y sabra de que disco se encuentra
        arrancando.  Establecerá las variables necesarias, y
        posteriormente es iniciado el intérprete donde se
        pueden introducir órdenes desde un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> o de
        manera interactiva.</p><a id="idp72434128" class="indexterm"></a><a id="idp72434640" class="indexterm"></a><p>Posteriormente el cargador leerá el fichero
        <code class="filename">/boot/loader.rc</code>, que por default lee
        la información del fichero
        <code class="filename">/boot/defaults/loader.conf</code> que a su
        vez, establece las variables correspondientes y verifica en
        el fichero <code class="filename">/boot/loader.conf</code> los cambios
        locales que se hayan hecho, para establecer valores de las
        variables modificadas.  Una vez llevado a cabo esto,
        <code class="filename">loader.rc</code> actua sobre estas variables,
        cargando cualquier módulo y kernel seleccionado.</p><p>Finalmente, y por default, el cargador hace una pausa contando
        10 segundos y en espera de que al presionar una tecla se
        interrumpa el proceso, de no ser así, procederá a
        arrancar el kernel.  En el caso de que al hacer esta pausa, se haya
        presionado una tecla (diferente de <span class="keycap"><strong>Return</strong></span>), el
        proceso será interrumpido y se nos mostrará un
        <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span>, que entiende el conjunto de órdenes
        de fácil-uso, y donde el usuario puede ajustar
        ciertas variables, cargar y descargar todos los módulos, y
        también arrancar o reiniciar el sistema.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-commands"></a>12.3.3.2. Órdenes internas del cargador</h4></div></div></div><p>A continuación se presentan las órdenes más
        comunes del cargador.  Para ver una descripción detallada
        de los mismos, por favor consulte la página de manual de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">autoboot <em class="replaceable"><code>segundos</code></em></span></dt><dd><p>Procede a iniciar el arranque del sistema, si es que
	      no es interrumpido el periodo dado, en segundos.  Despliega
	      una cuenta regresiva, y el tiempo dado es de 10 segundos.</p></dd><dt><span class="term">boot
	    [<span class="optional">-opciones</span>]
	    [<span class="optional">nombre_del_kernel</span>]</span></dt><dd><p>Procede a iniciar el kernel de manera inmediata, con
	      las opciones dadas, si es que fuera el caso y el kernel
	      especificado, si es que se especifica alguno.</p></dd><dt><span class="term">boot-conf</span></dt><dd><p>Rehace la configuración automática de
	      modulos en función a las variables definidas, como
	      sucede al arrancar.  Esta opción sólo tiene
	      sentido utilizarla, si en primer lugar hemos usado
	      <code class="command">unload</code>, y hemos modificado alguna
	      variable, siendo lo más común el
	      <code class="envar">kernel</code>.</p></dd><dt><span class="term">help
	    [<span class="optional">tema</span>]</span></dt><dd><p>Muestra la ayuda de un tema específico, que lee
	      del fichero <code class="filename">/boot/loader.help</code>.  Si el
	      tema que se indica es <code class="literal">index</code>, entonces se
	      mostrará una lista de todos los temas disponibles.</p></dd><dt><span class="term">include <em class="replaceable"><code>fichero</code></em>
	    &#8230;</span></dt><dd><p>Procesa el fichero que se ha especificado.
	      El fichero se lee e interpreta
	      línea por línea.  Cualquier
	      error detendrá inmediatamente a include.</p></dd><dt><span class="term">load [<span class="optional">-t
	    tipo</span>]
	    <em class="replaceable"><code>fichero</code></em></span></dt><dd><p>Carga el kernel, modulo del kernel, o el fichero
	      del tipo dado, en base al fichero especificado.  Cualquier
	      argumento que se añada, será pasado al
	      fichero.</p></dd><dt><span class="term">ls [<span class="optional">-l</span>]
	    [<span class="optional">ruta</span>]</span></dt><dd><p>Despliega un listado de todos los ficheros que se
	      localizan en la ruta especificada, o en el directorio
	      raíz, si es que no se le especifica ruta alguna.  Si
	      se utiliza la opción <code class="option">-l</code>, también
	      se mostrara el tamaño de los ficheros.</p></dd><dt><span class="term">lsdev [<span class="optional">-v</span>]</span></dt><dd><p>Nos muestra una lista de todos los dispositivos desde
	      los cuales puede ser posible cargar modulos.  Si se
	      incluye la opción <code class="option">-v</code>, el listado
	      que se obtiene cuenta con más detalle.</p></dd><dt><span class="term">lsmod [<span class="optional">-v</span>]</span></dt><dd><p>Despliega los módulos cargados. Si se utiliza la
	      opción <code class="option">-v</code>, se mostraran más
	      detalles.</p></dd><dt><span class="term">more <em class="replaceable"><code>fichero</code></em></span></dt><dd><p>Despliega el contenido del fichero especificado, haciendo
	      una pausa a cada numero determinado de <code class="varname">LINEAS</code>
	      mostradas.</p></dd><dt><span class="term">reboot</span></dt><dd><p>Reinicia el sistema de forma inmediata.</p></dd><dt><span class="term">set <em class="replaceable"><code>variable</code></em>, </span><span class="term">set
	    <em class="replaceable"><code>variable</code></em>=<em class="replaceable"><code>valor</code></em></span></dt><dd><p>Especifica los valores de las variables de entorno del
	      cargador.</p></dd><dt><span class="term">unload</span></dt><dd><p>Remueve todos los módulos cargados.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-examples"></a>12.3.3.3. Ejemplos de uso del cargador</h4></div></div></div><p>He aqui unos ejemplos prácticos sobre el uso
        correcto del cargador.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp72479312" class="indexterm"></a><p>Para arrancar simplemente su kernel usual, pero en modo
	    mono-usuario, deberá hacer lo siguiente:</p><pre class="screen"><strong class="userinput"><code>boot -s</code></strong></pre></li><li class="listitem"><p>Para descargar su kernel usual y sus módulos
	    correspondientes, y posteriormente cargar su kernel anterior
	    (o cualquier otro):</p><a id="idp72481488" class="indexterm"></a><pre class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>load kernel.old</code></strong></pre><p>Puede utilizar <code class="filename">kernel.GENERIC</code> para
	    referirse al kernel generico actual que viene con la
	    instalación, o bien puede utilizar
	    <code class="filename">kernel.old</code> para hacer referencia al
	    kernel anterior (por ejemplo, cuando ha actualizado su
	    sistema o ha recompilado su propio kernel).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Utilice lo siguiente para cargar sus módulos
	      actuales con otro kernel:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>set kernel="kernel.old"</code></strong>
<strong class="userinput"><code>boot-conf</code></strong></pre></div></li><li class="listitem"><p>Para cargar un escrito de configuración (script que
	    de forma automática hará todo lo que normalmente
	    hace usted de forma manual al momento de ejecutarse el
	    configurador de arranque):</p><pre class="screen"><strong class="userinput"><code>load -t escrito_de_configuración /boot/kernel.conf</code></strong></pre></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-kernel"></a>12.4. Interacción con el kernel durante el arranque</h2></div></div></div><a id="idp72493264" class="indexterm"></a><p>Una vez que el kernel ha sido iniciado, ya sea por
      el <a class="link" href="#boot-loader" title="12.3.3. Etapa tres, /boot/loader (cargador de arranque)">cargador</a> (que es lo
      común) o bien por <a class="link" href="#boot-boot1" title="12.3.2. Etapa uno, /boot/boot1, y etapa dos, /boot/boot2">boot2</a> (sobrepasando el cargador),
      examinará las opciones de arranque, en busca de cambios,
      y ajustar su comportamiento en caso de ser necesario.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-kernel-bootflags"></a>12.4.1. Opciones de arranque del kernel</h3></div></div></div><a id="idp72496592" class="indexterm"></a><p>He aqui las opciones de arranque más comunes:</p><div class="variablelist"><a id="boot-kernel-bootflags-list"></a><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>durante la inicialización del kernel, pregunta por
	      los dispositivos a utilizar, para montar el sistema de ficheros
	      raíz.</p></dd><dt><span class="term"><code class="option">-C</code></span></dt><dd><p>arranque desde una unidad de CDROM.</p></dd><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>ejecuta UserConfig, la utilidad de configuración
	      de arranque del kernel.</p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>arranca el sistem en modo mono-usuario.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>imprime mensajes informativos durante el arranque del kernel</p></dd></dl></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Existen otras opciones de arranque, por favor vea la página
	      de ayuda <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> para más información al respecto.
	    </p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="device-hints"></a>12.5. Device Hints</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp72515920" class="indexterm"></a><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-init"></a>12.6. Init: inicialización del proceso de control</h2></div></div></div><a id="idp72517968" class="indexterm"></a><p>Ya que el kernel ha finalizado de arrancar, pasará el
      control a un proceso de usuario llamado <code class="command">init</code>,
      el cual se localiza en <code class="filename">/sbin/init</code>, o bien
      en la ruta especificada por la variable de entorno
      <code class="envar">init_path</code> del cargador.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-autoreboot"></a>12.6.1. Secuencia automática de reinicio</h3></div></div></div><p>La secuencia automática de reinicio se asegura
        de que los sistemas de ficheros disponibles en el sistema
        sean consistentes.  Si no lo son, y el programa
        <code class="command">fsck</code> no puede arreglar estas
        inconsistencias, <code class="command">init</code> envia el sistema
        a modo <a class="link" href="#boot-singleuser" title="12.6.2. Modo monousuario">monousuario</a>, de
        tal forma que el administrador pueda ingresar en él y
        arreglar los problemas directamente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-singleuser"></a>12.6.2. Modo monousuario</h3></div></div></div><a id="idp72527952" class="indexterm"></a><a id="idp72528464" class="indexterm"></a><p>A este modo se puede llegar por medio de la <a class="link" href="#boot-autoreboot" title="12.6.1. Secuencia automática de reinicio">secuencia automática de reinicio</a>,
        o por medio de la opción <code class="option">-s</code> en el
        arranque de usuario o al establecer la variable
        <code class="envar">boot_single</code> en el cargador.</p><p>También desde el modo <a class="link" href="#boot-multiuser" title="12.6.3. Modo multiusuario">multi-usuario</a> se puede acceder,
        al utilizar <code class="command">shutdown</code> sin la
        opción de reinicio (<code class="option">-r</code>) o la de
        apagado (<code class="option">-h</code>) del sistema.</p><p>Si la consola del sistema esta configurada de modo
        <code class="literal">inseguro</code> en el fichero
        <code class="filename">/etc/ttys</code>, entonces el sistema
        solicitará la contraseña del
        <code class="systemitem">superusuario</code> (root), antes de ingresar
        al sistema en modo mono-usuario.</p><div class="example"><a id="boot-insecure-console"></a><div class="example-title">Ejemplo 12.3. Una consola insegura en /etc/ttys</div><div class="example-contents"><pre class="programlisting"># name  getty                           type    status          comments
#
# If console is marked "insecure", then init will ask for the root password
# when going to single-user mode.
console none                            unknown off insecure</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Una consola <code class="literal">insegura</code> significa que usted
	    considera como insegura físicamente su consola, por lo
	    que desea asegurarse de que sólo quien conoce la
	    contraseña del <code class="systemitem">superusuario</code> puede
	    ingresar al sistema en modo mono-usuario, y no que desea ejecutar
	    la consola inseguramente.  Esto es, si desea contar con seguridad
	    escoja la opción <code class="literal">insecure</code>, y no
	  <code class="literal">secure</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-multiuser"></a>12.6.3. Modo multiusuario</h3></div></div></div><a id="idp72539088" class="indexterm"></a><p>En el caso de que <code class="command">init</code> encuentre en
        buen estado al sistema de ficheros, o una vez que el usuario
        ha terminado del modo <a class="link" href="#boot-singleuser" title="12.6.2. Modo monousuario">mono-usuario</a>, el sistema
        entrará al modo multi-usuario, en donde comienzan
        los ficheros de configuración-fuente del sistema.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-rc"></a>12.6.3.1. Configuración-Fuente(rc)</h4></div></div></div><a id="idp72541904" class="indexterm"></a><p>La configuración fuente lee la configuración
	  por default del fichero
	  <code class="filename">/etc/defaults/rc.conf</code>, y detalles
	  específicos del sistema desde el fichero
	  <code class="filename">/etc/rc.conf</code>, y posteriormente procede
	  a montar los sistemas de ficheros del sistema, descritos en
	  <code class="filename">/etc/fstab</code>, iniciar servicios de red,
	  así como varios demonios del sistema, para finalmente
	  ejecutar los escritos (scripts) de configuración
	  instalados por paquetes, localmente.</p><p>La página de ayuda <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> es una buena referencia
	  para conocer más de este tipo de ficheros, así como
	  examinar los mismos ficheros.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-shutdown"></a>12.7. Secuencia de apagado</h2></div></div></div><a id="idp72546384" class="indexterm"></a><p>Una vez que el apagado sea controlado, por medio de
      <code class="command">shutdown</code>, <code class="command">init</code>
      ejecutará el escrito <code class="filename">/etc/rc.shutdown</code>,
      para posteriormente enviar a todos los procesos la señal
      <code class="literal">TERM</code>, y subsecuentemente la señal
      <code class="literal">KILL</code> a cualquiera que no haya terminado en
      tiempo.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users"></a>Capítulo 13. Usuarios y administración básica de cuentas</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Neil</span> <span class="surname">Blakey-Milner</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#users-synopsis">13.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#users-introduction">13.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#users-superuser">13.3. La cuenta superusuario</a></span></dt><dt><span class="sect1"><a href="#users-system">13.4. Cuentas de sistema</a></span></dt><dt><span class="sect1"><a href="#users-user">13.5. Cuentas de usuario</a></span></dt><dt><span class="sect1"><a href="#users-modifying">13.6. Modificación de cuentas</a></span></dt><dt><span class="sect1"><a href="#users-limiting">13.7. Limitar a los usuarios</a></span></dt><dt><span class="sect1"><a href="#users-personalizing">13.8. Personalizar a los usuarios</a></span></dt><dt><span class="sect1"><a href="#users-groups">13.9. Grupos</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-synopsis"></a>13.1. Sinopsis</h2></div></div></div><p>FreeBSD permite que varios usuarios usen el mismo ordenador.
      Obviamente, sólo uno de estos usuarios puede sentarse frente al
      monitor y al teclado en un momento dado
      <a href="#ftn.idp72558032" class="footnote" id="idp72558032"><sup class="footnote">[6]</sup></a>
      , pero cualquier número de usuarios puede entrar por la red para
      hacer su trabajo.  Para usar el sistema cada usuario ha de tener
      una cuenta.</p><p>Después de leer este capítulo sabrás:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cuáles son las diferencias entre las distintas cuentas de
          usuario en sistemas FreeBSD.</p></li><li class="listitem"><p>Cómo añadir cuentas.</p></li><li class="listitem"><p>Cómo eliminar cuentas.</p></li><li class="listitem"><p>Cómo cambiar detalles de las cuentas, como el nombre
          completo del usuario, o su shell preferida.</p></li><li class="listitem"><p>Cómo establecer límites por cuenta, para controlar los
          recursos como memoria o tiempo de CPU que las cuentas y grupos
          de cuentas pueden emplear.</p></li><li class="listitem"><p>Cómo usar grupos para facilitar la administración de
          cuentas.</p></li></ul></div><p>Antes de leer este capítulo deberías:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Entender los conceptos básicos de Unix y FreeBSD (<a class="xref" href="#basics" title="Capítulo 3. Conceptos básicos de Unix">Capítulo 3, <em>Conceptos básicos de Unix</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-introduction"></a>13.2. Introducción</h2></div></div></div><p>Todos los accesos al sistema se consiguen vía cuentas, y todos
      los procesos son ejecutados por usuarios, por ello la
      administración de usuarios y cuentas es de una gran importancia
      en sistemas FreeBSD.</p><p>Cada cuenta en un sistema FreeBSD tiene cierta información
      asociada que la identifica.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Nombre de usuario</span></dt><dd><p>El nombre de usuario como se le entraría al prompt
            <code class="prompt">login:</code>.  Los nombres de usuario han de ser
            únicos en la computadora; no puede haber dos usuarios con el
            mismo nombre de usuario.  Existen algunas reglas para la
            creación de nombres de usuario válidos documentadas en
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">passwd</span>(5)</span></a>; típicamente se usarían nombres de usuario de
            a lo sumo ocho caracteres, todos ellos en minúscula.</p></dd><dt><span class="term">Contraseña</span></dt><dd><p>Cada cuenta tiene una contraseña asociada.  La
            contraseña puede ser vacía, en cuyo caso no se requerirá
            ninguna para acceder al sistema.  Esto normalmente es una
            mala idea; cada cuenta debería tener una constraseña no
            vacía.</p></dd><dt><span class="term">Identificador de usuario (UID)</span></dt><dd><p>El UID es un numero entre 0 y 65536 que sirve para
            identificar unívocamente al usuario en el sistema.
            Internamente, FreeBSD usa el UID para identificar usuarios y
            cualquier comando de FreeBSD que permita especificar un
            nombre de usuario convertirá éste al UID antes de trabajar
            con él.  Esto significa que puedes tener varias cuentas con
            nombres de usuario distintos pero con el mismo UID.  En lo
            que a FreeBSD respecta, tales cuentas son un solo usuario.
            Es improbable que alguna vez tengas que hacer algo
            así.</p></dd><dt><span class="term">Identificador de grupo (GID)</span></dt><dd><p>El GID es un número entre 0 y 65536 que sirve para
            identificar unívocamente el grupo principal al cual
            pertenece un usuario.  Los grupos son un mecanismo para
            controlar el acceso a recursos del sistema en base al GID,
            en vez del UID.  Esto puede reducir significativamente el
            tamaño de algunos ficheros de configuración.  Un usuario
            puede pertencer a más de un grupo.</p></dd><dt><span class="term">Clase de login</span></dt><dd><p>Las clases de login son una extensión al mecanismo de
            grupos que ofrecen una mayor flexibilidad a la hora de
            adaptar el sistema a distintos usuarios.</p></dd><dt><span class="term">Tiempo de cambio de contraseña</span></dt><dd><p>Por defecto FreeBSD no obliga a los usuarios a cambiar
            su contraseña periódicamente.  Se puede requerir esto a
            determinados usuarios, haciendo que algunos o todos deban
            cambiar sus contraseñas al cabo de cierto periodo de
            tiempo.</p></dd><dt><span class="term">Tiempo de expiración de cuentas</span></dt><dd><p>Por defecto las cuentas en FreeBSD no expiran.  Si estás
            creando cuentas que sabes que van a tener un tiempo limitado
            de vida, por ejemplo, las cuentas de los estudiantes de una
            escuela, entonces puedes especificar cuándo expiran.  Una
            vez vencido su tiempo de expiración una cuenta no puede ser
            usada para entrar en el sistema, si bien sus directorios y
            archivos serán conservados.</p></dd><dt><span class="term">Nombre completo de usuario</span></dt><dd><p>El nombre de usuario identifica unívocamente a una
            cuenta para FreeBSD, pero no refleja su verdadero nombre
            necesariamente.  Esta información puede ser asociada a la
            cuenta. </p></dd><dt><span class="term">Directorio home</span></dt><dd><p>El directorio home es el camino completo de un
            directorio en el sistema en el que el usuario se hallará
            cuando entre.  Una convención usual consiste en poner todos
            los directorios home en
            <code class="filename">/home/nombre_de_usuario</code>
            o en
            <code class="filename">/usr/home/nombre_de_usuario</code>.
            Los usuarios guardarían sus archivos personales en sus
            directorios home, y en cualquier directorio que creasen
            allí.</p></dd><dt><span class="term">Shell de usuario</span></dt><dd><p>La shell provee el entorno por defecto mediante el cual
            los usuarios interactúan con el sistema.  Existen varios
            tipos de shell y los usuarios experimentados tendrán sus
            propias preferencias, que pueden expresarse en la
            configuración de su cuenta.</p></dd></dl></div><p>Existen principalmente tres tipos de cuentas; la cuenta de
      <a class="link" href="#users-superuser" title="13.3. La cuenta superusuario">superusuario</a>, las cuentas
      de <a class="link" href="#users-system" title="13.4. Cuentas de sistema">usuarios del sistema</a>, y las
      de <a class="link" href="#users-user" title="13.5. Cuentas de usuario">usuarios</a>.  La cuenta de
      superusuario, normalmente llamada <code class="systemitem">root</code>, se
      usa para administrar el sistema sin limitaciones en los
      privilegios.  Los usuarios del sistema utilizan servicios del
      mismo.  Finalmente, las cuentas de usuarios son usadas por gente
      real, aquellos que entran, leen correo, etcétera.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-superuser"></a>13.3. La cuenta superusuario</h2></div></div></div><a id="idp72597968" class="indexterm"></a><p>La cuenta superusuario, normalmente llamada
      <code class="systemitem">root</code>, viene preconfigurada para facilitar la
      administración del sistema, y no debería ser utilizada para tareas
      cotidianas como enviar o recibir correo, exploración general del
      sistema, o programación.</p><p>Esto es así porque el superusuario, a diferencia de las
      cuentas de usuario, puede operar sin límites, y un mal uso de la
      cuenta de superusuario puede conllevar desastres espectaculares.
      Las cuentas de usuario no pueden destruir el sistema por un error,
      por ello es generalmente mejor utilizar cuentas de usuario
      normales cuando sea posible, a no ser que especialmente necesites
      privilegios extra.</p><p>Deberías comprobar siempre un par o tres de veces los comandos
      que ejecutas como superusuario, ya que un espacio de más o un
      carácter omitido pueden significar una pérdida de datos
      irreparable.</p><p>Así pues, lo primero que deberías hacer después de leer este
      capítulo es crear una cuenta sin privilegios de uso general para
      ti si aún no la tienes.  Esto aplica tanto si trabajas en una
      máquina con varios usuarios como si trabajas en una máquina con un
      solo usuario.  Más adelante, en este mismo capítulo, explicamos
      cómo crear cuentas adicionales, y cómo cambiar de usuario normal a
      superusuario.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-system"></a>13.4. Cuentas de sistema</h2></div></div></div><a id="idp72610384" class="indexterm"></a><p>Los usuarios de sistema son aquéllos que corren servicios como
      DNS, correo, servidores web, etc.  Esto es así por seguridad; si
      todos los servicios corrieran como superusuario podrían actuar sin
      ninguna restricción.</p><a id="idp72611920" class="indexterm"></a><a id="idp72613328" class="indexterm"></a><p>Algunos ejemplos de usuarios de sistema son
      <code class="systemitem">daemon</code>, <code class="systemitem">operator</code>,
      <code class="systemitem">bind</code> (para el DNS), y
      <code class="systemitem">news</code>.  Con frecuencia, los administradores de
      sistemas crean el usuario <code class="systemitem">httpd</code> para que
      ejecute los servidores web que instalan.</p><a id="idp72617680" class="indexterm"></a><p><code class="systemitem">nobody</code> es el usuario de sistema sin
      privelegios genérico.  No obstante, es importante tener en cuenta
      que cuantos más servicios use <code class="systemitem">nobody</code>, más
      ficheros y procesos estarán asociados con dicho usuario, y en
      consecuencia más privilegiado será.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-user"></a>13.5. Cuentas de usuario</h2></div></div></div><a id="idp72629584" class="indexterm"></a><p>Las cuentas de usuario constituyen la principal vía de acceso
      al sistema para la gente real.  Estas cuentas aíslan al usuario
      del entorno, impidiendo que pueda dañar al sistema o a otros
      usuarios, y permitiendo a su vez que pueda personalizar su entorno
      sin que esto afecte a otros.</p><p>Cada persona que acceda a tu sistema debería tener una sola
      cuenta de usuario.  Esto te permite averiguar quién está haciendo
      qué, evita que interfieran las configuraciones de distintos
      usuarios, que unos puedan leer el correo de otros,
      etcétera.</p><p>Cada usuario puede configurar su entorno para acomodarlo al
      uso que hace del sistema, utilizando shells, editores, atajos de
      teclado e idioma alternativos.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-modifying"></a>13.6. Modificación de cuentas</h2></div></div></div><a id="idp72632784" class="indexterm"></a><p>Existe una variedad de comandos disponible en el entorno Unix
      para modificar cuentas de usuario.  Los comandos más comunes se
      hallan resumidos a continuación, seguidos de ejemplos más
      detallados de su uso.</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Comando</th><th>Resumen</th></tr></thead><tbody><tr><td><code class="command">adduser</code></td><td>La aplicación de línea de comandos recomendada para
          añadir nuevos usuarios.</td></tr><tr><td><code class="command">rmuser</code></td><td>La aplicación de línea de comandos recomendada para
          eliminar usuarios.</td></tr><tr><td><code class="command">chpass</code></td><td>Una herramienta flexible para modificar la base de datos
          de usuarios.</td></tr><tr><td><code class="command">passwd</code></td><td>Una herramienta de línea de comandos simple para cambiar
          contraseñas de usuario.</td></tr><tr><td><code class="command">pw</code></td><td>Una herramienta potente y flexible para modificar
          cualquier aspecto de las cuentas de usuario.</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-adduser"></a>13.6.1. adduser</h3></div></div></div><a id="idp72681424" class="indexterm"></a><a id="idp72682576" class="indexterm"></a><a id="idp72683472" class="indexterm"></a><a id="idp72684368" class="indexterm"></a><p><code class="command">adduser</code> es un programa simple para añadir
        usuarios.  Crea entradas en los archivos de sistema
        <code class="filename">passwd</code> y <code class="filename">group</code>.
        También crea un directorio home para el nuevo usuario, copia
        allí ficheros de configuración por defecto
        (<span class="quote">&#8220;<span class="quote">dotfiles</span>&#8221;</span>) de
        <code class="filename">/usr/share/skel</code>, y opcionalmente puede
        enviar al usuario un mensaje de bienvenida.</p><p>Para crear el fichero inicial de configuración usa
        <code class="command">adduser -s -config_create</code>.
        <a href="#ftn.idp72687824" class="footnote" id="idp72687824"><sup class="footnote">[7]</sup></a>
        A continuación configuramos valores por defecto para
        <span class="application">adduser</span> y creamos nuestra primera
        cuenta de usuario, dado que utilizar <code class="systemitem">root</code>
        para uso normal del sistema es pernicioso y peligroso.</p><div class="example"><a id="idp72691024"></a><div class="example-title">Ejemplo 13.1. Configuración de adduser</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser -v</code></strong>
Use option ``-silent'' if you don't want to see all warnings and questions.
Check /etc/shells
Check /etc/master.passwd
Check /etc/group
Enter your default shell: csh date no sh tcsh zsh [sh]: <strong class="userinput"><code>zsh</code></strong>
Your default shell is: zsh -&gt; /usr/local/bin/zsh
Enter your default HOME partition: [/home]:
Copy dotfiles from: /usr/share/skel no [/usr/share/skel]:
Send message from file: /etc/adduser.message no
[/etc/adduser.message]: <strong class="userinput"><code>no</code></strong>
Do not send message
Use passwords (y/n) [y]: <strong class="userinput"><code>y</code></strong>

Write your changes to /etc/adduser.conf? (y/n) [n]: <strong class="userinput"><code>y</code></strong>

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username [a-z0-9_-]: <strong class="userinput"><code>jru</code></strong>
Enter full name []: <strong class="userinput"><code>J. Random User</code></strong>
Enter shell csh date no sh tcsh zsh [zsh]:
Enter home directory (full path) [/home/jru]:
Uid [1001]:
Enter login class: default []:
Login group jru [jru]:
Login group is ``jru''. Invite jru into other groups: guest no
[no]: <strong class="userinput"><code>wheel</code></strong>
Enter password []:
Enter password again []:

Name:     jru
Password: ****
Fullname: J. Random User
Uid:      1001
Gid:      1001 (jru)
Class:
Groups:   jru wheel
HOME:     /home/jru
Shell:    /usr/local/bin/zsh
OK? (y/n) [y]: <strong class="userinput"><code>y</code></strong>
Added user ``jru''
Copy files from /usr/share/skel to /home/jru
Add another user? (y/n) [y]: <strong class="userinput"><code>n</code></strong>
Goodbye!
<code class="prompt">#</code></pre></div></div><br class="example-break" /><p>En resumen, cambiamos la shell por defecto a
        <span class="application">zsh</span> (una shell alternativa incluida
        en la colección de ports), y deshabilitamos el envío de un
        mensaje de bienvenida a nuevos usuarios.  Luego grabamos la
        configuración, creamos una cuenta para <code class="systemitem">jru</code>,
        y nos aseguramos de que <code class="systemitem">jru</code> esté en el
        grupo <code class="systemitem">wheel</code> (de modo que puede asumir el
        papel de <code class="systemitem">root</code> vía el comando
        <code class="command">su</code>).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La contraseña que escribes no se muestra, tampoco se
          muestran asteriscos.  Asegúrate de no entrar dos veces una
          contraseña equivocada.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Usa <code class="command">adduser</code> sin argumentos en adelante,
          no necesitarás cambiar las opciones por defecto.  Si el
          programa te pide modificarlas sal y prueba con la opción
          <code class="option">-s</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-rmuser"></a>13.6.2. <span class="application">rmuser</span></h3></div></div></div><a id="idp72703312" class="indexterm"></a><a id="idp72703952" class="indexterm"></a><p>Puedes usar <code class="command">rmuser</code> para eliminar
        completamente del sistema a un usuario.
        <code class="command">rmuser</code> efectúa los siguientes pasos:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Elimina la entrada del usuario en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> (si
            tiene alguna).</p></li><li class="step"><p>Elimina las tareas <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=at&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">at</span>(1)</span></a> pertenecientes al
            usuario.</p></li><li class="step"><p>Mata todos los procesos pertenecientes al
            usuario.</p></li><li class="step"><p>Elimina al usuario del fichero local de contraseñas del
            sistema.</p></li><li class="step"><p>Borra el directorio home del usuario (si le
            pertenece).</p></li><li class="step"><p>Elimina los archivos de correo entrante del usuario de
            <code class="filename">/var/mail</code>.</p></li><li class="step"><p>Borra todos los ficheros del usuario de áreas en las que
            se guardan archivos temporales como
            <code class="filename">/tmp</code>.</p></li><li class="step"><p>Finalmente, elimina el nombre de usuario de todos
            aquellos grupos a los que pertenece en
            <code class="filename">/etc/group</code>.

            </p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si un grupo queda vacío y el nombre del grupo
                coincide con el del usuario, el grupo es eliminado; esto
                complementa la creación de grupos por usuario de
                <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a>.</p></div><p>
          </p></li></ol></div><p><code class="command">rmuser</code> no puede ser usado para eliminar
        cuentas de superusuario, dado que algo así es casi siempre señal
        de masiva destrucción.</p><p>Por defecto existe un modo interactivo que intenta asegurar
        que uno sabe lo que hace.</p><div class="example"><a id="idp72726608"></a><div class="example-title">Ejemplo 13.2. Eliminación interactiva de cuenta con rmuser</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rmuser jru</code></strong>
Matching password entry:
jru:*:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/tcsh
Is this the entry you wish to remove? <strong class="userinput"><code>y</code></strong>
Remove user's home directory (/home/jru)? <strong class="userinput"><code>y</code></strong>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
<code class="prompt">#</code></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-chpass"></a>13.6.3. <span class="application">chpass</span></h3></div></div></div><a id="idp72730576" class="indexterm"></a><p><code class="command">chpass</code> cambia información de los usuarios
        en base de datos como contraseñas, shells y datos
        personales.</p><p>Los administradores del sistema, como el superusuario, son
        los únicos que pueden modificar la información y contraseñas de
        otros usuarios con <code class="command">chpass</code>.</p><p>Cuando no le pasamos más opciones, salvo un nombre de
        usuario opcional, <code class="command">chpass</code> muestra un editor
        con información de usuario.  Cuando se sale del editor la base
        de datos de usuarios se actualiza con la nueva
        información.</p><div class="example"><a id="idp72733392"></a><div class="example-title">Ejemplo 13.3. chpass interactivo ejecutado por el superusuario</div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1000
Gid [# or name]: 1000
Change [month day year]:

Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/tcsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><p>Un usuario normal puede modificar un pequeño subconjunto de
        esta información, y sólo para sí mismo.</p><div class="example"><a id="idp72734928"></a><div class="example-title">Ejemplo 13.4. chpass interactivo ejecutado por un usuario normal</div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Shell: /usr/local/bin/tcsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">chfn</code> y <code class="command">chsh</code> son
          enlaces a <code class="command">chpass</code>, como también lo son
          <code class="command">ypchpass</code>, <code class="command">ypchfn</code>, e
          <code class="command">ypchsh</code>.  El soporte para NIS es automático,
          por lo que no es necesario especificar el
          <code class="literal">yp</code> antes del comando.  Si esto te resulta
          algo confuso no te preocupes, NIS será tratado en el <a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-passwd"></a>13.6.4. passwd</h3></div></div></div><a id="idp72744912" class="indexterm"></a><a id="idp72745552" class="indexterm"></a><p><code class="command">passwd</code> es el comando que se usa
        normalmente para cambiar tu propia contraseña como usuario o,
        como superusuario, la de otros usuarios.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los usuarios han de introducir su contraseña original
          antes de cambiarla para prevenir que gente no autorizada pueda
          hacerlo cuando no se encuentren en la consola.</p></div><div class="example"><a id="idp72748112"></a><div class="example-title">Ejemplo 13.5. Cambio de tu contraseña</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div class="example"><a id="idp72750032"></a><div class="example-title">Ejemplo 13.6. Cambio de la contraseña de otro usuario como superusuario</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>passwd jru</code></strong>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Como ocurre con <code class="command">chpass</code>,
          <code class="command">yppasswd</code> es un enlace a
          <code class="command">passwd</code>, de manera que NIS funciona con
          ambos comandos.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-pw"></a>13.6.5. <span class="application">pw</span></h3></div></div></div><a id="idp72755024" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> es una utilidad de línea de comandos para crear,
        eliminar, modificar, y mostrar usuarios y grupos.  Hace de
        interfaz a los archivos del sistema de usuarios y grupos.
        <code class="command">pw</code> tiene un conjunto de opciones de línea de
        comandos bastante potente que lo hacen adecuado para su uso en
        scripts de shell, aunque los nuevos usuarios puede que lo
        encuentren algo más complicado que el resto de comandos que
        presentamos aquí.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>13.7. Limitar a los usuarios</h2></div></div></div><a id="idp72758224" class="indexterm"></a><a id="idp72758736" class="indexterm"></a><p>En un sistema multiusuario es probable que no confíes en que
      el sistema no vaya a ser dañado por ningún usuario.</p><a id="idp72760272" class="indexterm"></a><a id="idp72760784" class="indexterm"></a><a id="idp72761936" class="indexterm"></a><p>Las cuotas de disco permiten al administrador decirle al
      sistema de ficheros qué cantidad de espacio de disco puede
      utilizar un usuario; además, ofrecen una manera rápida de
      comprobar el uso de disco de un usuario sin tener que calcularlo
      cada vez.  Las cuotas se estudian en el capítulo de quotas.</p><p>El resto de límites de recursos incluyen cantidad de CPU,
      memoria, y otros recursos que el usuario puede utilizar.</p><a id="idp72763216" class="indexterm"></a><p>Las clases de login se definen en
      <code class="filename">/etc/login.conf</code>.  La semántica precisa está
      fuera del alcance de esta sección, pero se describe con detalle en
      la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.  Es suficiente decir que
      cada usuario es asignado a una clase de login
      (<code class="literal">default</code> por defecto), y que cada clase de
      login tiene un conjunto de capacidades asociado.  Una capacidad
      de login es un par
      <code class="literal">nombre=valor</code>,
      donde <em class="replaceable"><code>nombre</code></em> es un identificador
      conocido y <em class="replaceable"><code>valor</code></em> una cadena de texto
      arbitraria que se procesa en función del nombre.  Establecer
      clases y capacidades de login es bastante sencillo y también se
      describe en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><p>Los límites de recursos son diferentes de las capacidades de
      login en dos sentidos.  En primer lugar, para cada límite existe
      un límite blando (actual) y uno duro.  Un límite blando puede ser
      ajustado por el usuario o una aplicación, pero no puede ser más
      alto que el límite duro.  Éste último puede ser disminuido por el
      usuario pero nunca aumentado.  En segundo lugar, la mayoría de los
      límites de recursos aplican a un usuario concreto por proceso, no
      globalmente.  Nótese, no obstante, que estas diferencias vienen
      impuestas por cómo se tratan los límites específicamente, no por
      la implementación del marco de capacidades de login (es decir, en
      realidad no constituyen un caso especial de capacidades de
      login).</p><p>Sin más, a continuación veremos los límites de recursos más
      comúnmente usados (el resto, junto con el resto de capacidades de
      login, puede encontrarse en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp72791376" class="indexterm"></a><a id="idp72791888" class="indexterm"></a><p>El tamaño de un fichero core generado por un programa
            está, por razones obvias, subordinado a otros límites sobre
            uso de disco (p. ej., <code class="literal">filesize</code>, o cuotas
            de disco).  Aun y así, se usa frecuentemente como un método
            menos severo de controlar consumo de espacio de disco, dado
            que los usuarios no generan ficheros core por ellos mismos,
            y a menudo no los borran, activar este límite puede evitar
            que agoten el espacio de disco de que disponen si algún
            programa grande (p. ej., <span class="application">emacs</span>)
            deja de funcionar abruptamente.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp72799696" class="indexterm"></a><a id="idp72800208" class="indexterm"></a><p>Ésta es la máxima cantidad de tiempo de CPU que los
            procesos de un usuario pueden consumir.

            </p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Éste es un límite sobre el
                <span class="emphasis"><em>tiempo</em></span> de CPU consumido, no el
                porcentaje de uso de CPU que se muestra en algunos
                campos de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.  Un límite de ese
                tipo no es posible a día de hoy, y sería bastante
                inútil: un compilador &#8212;probablemente una tarea
                legítima&#8212; puede usar prácticamente el 100% de la
                CPU durante algún tiempo con facilidad.</p></div><p>
          </p></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp72805968" class="indexterm"></a><a id="idp72806480" class="indexterm"></a><p>Éste es el tamaño máximo que puede llegar a tener un
            fichero del usuario.  A diferencia de las cuotas de disco, este
            límite se especifica para ficheros individuales, no para
            el conjunto de todos los archivos que posee.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp72809424" class="indexterm"></a><a id="idp72809936" class="indexterm"></a><p>Éste es el máximo número de procesos que un usuario
            puede ejecutar a la vez, incluidos tanto los procesos en
            primer plano como los procesos en segundo plano.  Por
            razones obvias, este límite no puede ser mayor que el límite
            de sistema especificado por <code class="varname">kern.maxproc</code>
            <code class="command">sysctl</code>.  Obsérvese también que si
            asignamos un valor demasiado bajo a este límite podemos
            mermar la productividad de un usuario: frecuentemente es
            útil entrar múltiples veces en el sistema o ejecutar
            pipelines.  Algunas tareas, como compilar largos programas,
            lanzan múltiples procesos (p. ej., <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a>,
            y demás preprocesadores intermedios).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp72815184" class="indexterm"></a><a id="idp72815696" class="indexterm"></a><p>Ésta es la máxima cantidad de memoria que un proceso
            puede haber solicitado tener bloqueada en memoria principal
            (p. ej., ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).  Algunos programas críticos
            para el sistema, como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, se quedan bloqueados en
            la memoria principal de manera que en caso de ser llevados a
            swap no contribuyan a la basura del sistema si hay algún
            problema.</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp72820048" class="indexterm"></a><a id="idp72820560" class="indexterm"></a><p>Ésta es la mayor cantidad de memoria que un proceso
            puede consumir en todo momento.  Incluye tanto memoria
            normal como uso de swap.  No se trata de un límite para
            restringir el consumo de memoria en general, pero es un buen
            comienzo.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp72831696" class="indexterm"></a><a id="idp72832208" class="indexterm"></a><p>Ésta es la máxima cantidad de archivos que un proceso
            puede tener abiertos.  En FreeBSD, los archivos se usan
            tambien para representar sockets y canales IPC; así, cuida
            de no poner este límite demasiado bajo.  A nivel de sistema,
            el límite para esto lo define
            <code class="varname">kern.maxfiles</code>
            <code class="command">sysctl</code>.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp72835792" class="indexterm"></a><a id="idp72836304" class="indexterm"></a><p>Éste es el límite de cantidad de memoria de red, y por
            lo tanto mbufs, que un usuario puede consumir.  Se originó
            como respuesta a un viejo ataque DoS que creaba muchos
            sockets, pero puede ser usado en general para limitar las
            comunicaciones por red.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><a id="idp72839120" class="indexterm"></a><a id="idp72872528" class="indexterm"></a><p>Éste es el tamaño máximo que puede alcanzar la pila de
              un proceso.  Por sí solo no es suficiente para limitar la
              cantidad de memoria que puede usar un programa; en
              consecuencia, debería ser usado junto con otros
              límites.</p></dd></dl></div><p>Hay unas pocas cosas más a recordar cuando establecemos
      límites de recursos.  A continuación vienen algunas
      recomendaciones, sugerencias, y comentarios varios.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Los procesos que se ponen en marcha cuando arranca el
          sistema por <code class="filename">/etc/rc</code> están asignados a la
          clase de login <code class="literal">daemon</code>.</p></li><li class="listitem"><p>Aunque el <code class="filename">/etc/login.conf</code> que viene
          con el sistema tiene valores razonables para la mayoría de los
          límites, sólo tú, el administrador, puedes saber lo que es
          apropiado para tu sistema.</p></li><li class="listitem"><p>A los usuarios del X Window System (X11) probablemente se
          les debería conceder más recursos que al resto.  X11 de por sí
          consume muchos recursos, pero además contribuye a que los
          usuarios ejecuten más programas simultáneamente.</p></li><li class="listitem"><p>Recuerda que hay muchos límites que aplican a procesos
          individuales, no al usuario en general.  Por ejemplo, poner
          <code class="varname">openfiles</code> a 50 significa que cada uno de
          los procesos que ejecute un usuario puede abrir a lo máximo 50
          ficheros.  Así, la cantidad de ficheros que un usuario puede
          abrir es el valor de <code class="literal">openfiles</code> multiplicado
          por el valor de <code class="literal">maxproc</code>.  Esto también
          aplica al uso de memoria.</p></li></ul></div><p>Para más información acerca de límites de recursos y clases y
      capacidades de login en general, consulta las páginas de manual
      relevantes: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-personalizing"></a>13.8. Personalizar a los usuarios</h2></div></div></div><p>La localización es un entorno establecido por el administrador
      o el usuario para dar soporte a distintos lenguajes, juegos de
      caracteres, estándares sobre fechas y horas, etcétera.  Éste tema
      se trata en el capítulo <a class="link" href="#l10n" title="Capítulo 22. Localización - Uso y configuración de I18N/L10N">Localización</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-groups"></a>13.9. Grupos</h2></div></div></div><a id="idp72886096" class="indexterm"></a><a id="idp72886608" class="indexterm"></a><a id="idp72887504" class="indexterm"></a><p>Un grupo es simplemente una lista de usuarios.  Los grupos se
      identifican por su nombre de grupo y gid (ID de grupo).  En
      FreeBSD (y en la mayoría de sistemas Unix), los dos factores que
      tiene en cuenta el núcleo para decidir si un proceso puede hacer
      algo es su ID de usuario y la lista de grupos a los que pertenece.
      A diferencia del ID de usuario, un proceso tiene una lista de
      grupos asociados.  En ocasiones encontrarás menciones al "ID de
      grupo" de un usuario o de un proceso; la mayoría de las veces
      referirán simplemente al primero de los grupos de la lista.</p><p>La correspondencia entre nombres e IDs de grupo está en
      <code class="filename">/etc/group</code>.  Se trata de un fichero de texto
      plano con cuatro campos separados por el signo dos puntos.  El
      primer campo es el nombre de grupo, el segundo la contraseña
      encriptada, el tercero el ID de grupo, y el cuarto la lista de
      miembros separados por comas.  Puede ser editado a mano sin
      peligro (¡suponiendo, por supuesto, que no se cometan errores de
      sintaxis!).  Para una descripción más completa de la sintaxis, ver
      la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=group&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">group</span>(5)</span></a>.</p><p>Si no quieres editar <code class="filename">/etc/group</code>
      manualmente, puedes usar el comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> para añadir y
      modificar grupos.  Por ejemplo, para añadir un grupo llamado
      <code class="systemitem">teamtwo</code> y luego confirmar que existe puedes
      usar:</p><div class="example"><a id="idp72901072"></a><div class="example-title">Ejemplo 13.7. Añadir un grupo usando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupadd teamtwo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:</pre></div></div><br class="example-break" /><p>El número <code class="literal">1100</code> en el ejemplo anterior es el
      ID de grupo del grupo <code class="systemitem">teamtwo</code>.  Ahora mismo
      <code class="systemitem">teamtwo</code> no tiene miembros, y es por tanto
      bastante inútil.  Cambiemos eso invitando a
      <code class="systemitem">jru</code> a formar parte del grupo
      <code class="systemitem">teamtwo</code>.</p><div class="example"><a id="idp72907216"></a><div class="example-title">Ejemplo 13.8. Añadir a alguien a un grupo usando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod teamtwo -M jru</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:jru</pre></div></div><br class="example-break" /><p>El argumento de la opción <code class="option">-M</code> es una lista con
      los usuarios que son miembros del grupo separados por comas.
      Sabemos de secciones anteriores que el fichero de contraseñas
      también contiene un grupo para cada usuario.  El usuario es
      automáticamente añadido a la lista de grupos por el sistema; no
      constará como miembro cuando usemos el comando
      <code class="command">groupshow</code> con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>, pero sí cuando la
      información se consulte con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=id&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">id</span>(1)</span></a> u otra herramienta similar.
      En otras palabras, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> sólo manipula el fichero
      <code class="filename">/etc/group</code>; nunca tratará de leer datos
      adicionales de <code class="filename">/etc/passwd</code>.</p><div class="example"><a id="idp72918992"></a><div class="example-title">Ejemplo 13.9. Determinar pertenencia a grupos con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=id&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">id</span>(1)</span></a></div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>id jru</code></strong>
uid=1001(jru) gid=1001(jru) groups=1001(jru), 1100(teamtwo)</pre></div></div><br class="example-break" /><p>Como puedes ver, <code class="systemitem">jru</code> es miembro de los
      grupos <code class="systemitem">jru</code> y
      <code class="systemitem">teamtwo</code>.</p><p>Para más información acerca de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>, consulta su página
      de manual, y para más información acerca del formato de
      <code class="filename">/etc/group</code>, consulta la página de manual de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=group&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">group</span>(5)</span></a>.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp72558032" class="footnote"><p><a href="#idp72558032" class="para"><sup class="para">[6] </sup></a>Bueno, a menos que conectes múltiples terminales, pero
          dejaremos ese tema para el <a class="xref" href="#serialcomms" title="Capítulo 24. Comunicaciones serie">Capítulo 24, <em>Comunicaciones serie</em></a>.</p></div><div id="ftn.idp72687824" class="footnote"><p><a href="#idp72687824" class="para"><sup class="para">[7] </sup></a>La <code class="option">-s</code> hace que <code class="command">adduser</code>
            sea silencioso por defecto.  Más tarde usamos <code class="option">-v</code>
            cuando queremos cambiar valores por defecto.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security"></a>Capítulo 14. Seguridad</h2></div><div><span class="authorgroup">Gran parte del contenido de este capítulo
        procede de la página de manual de security(7), de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Matthew</span> <span class="surname">Dillon</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#security-synopsis">14.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#security-intro">14.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">14.3. Asegurar FreeBSD</a></span></dt><dt><span class="sect1"><a href="#crypt">14.4. DES, MD5 y Crypt</a></span></dt><dt><span class="sect1"><a href="#one-time-passwords">14.5. Contraseñas de un solo uso</a></span></dt><dt><span class="sect1"><a href="#tcpwrappers">14.6. TCP Wrappers</a></span></dt><dt><span class="sect1"><a href="#kerberosIV">14.7. <span class="application">KerberosIV</span></a></span></dt><dt><span class="sect1"><a href="#kerberos5">14.8. <span class="application">Kerberos5</span></a></span></dt><dt><span class="sect1"><a href="#openssl">14.9. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">14.10. VPN sobre IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">14.11. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">14.12. Listas de control de acceso a sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#security-portaudit">14.13. Monitorización de fallos de seguridad de aplicaciones</a></span></dt><dt><span class="sect1"><a href="#security-advisories">14.14. FreeBSD Security Advisories</a></span></dt><dt><span class="sect1"><a href="#security-accounting">14.15. Contabilidad de procesos</a></span></dt></dl></div><a id="idp72933072" class="indexterm"></a><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-synopsis"></a>14.1. Sinopsis</h2></div></div></div><p>Este capítulo contiene una introducción
      básica a los conceptos de seguridad del sistema, unas
      cuantas normas básicas de uso y algunos avanzados del
      tema en FreeBSD.  Muchos de los temas expuestos se aplican a la
      seguridad del sistema y de Internet en general.
      Internet ya no es aquél lugar <span class="quote">&#8220;<span class="quote">amistoso</span>&#8221;</span>
      en el que todo el mundo se comportaba como un buen ciudadano.
      Si quiere proteger sus datos, su propiedad intelectual, su tiempo
      y muchas más cosas de manos malintencionadas debe hacer
      que su sistema sea seguro.</p><p>FreeBSD proporciona un variado arsenal de utilidades y mecanismos para
      asegurar la integridad y la seguridad de su sistema y red.</p><p>Después de leer este capítulo:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>conocerá conceptos básicos de la seguridad
          relacionados con FreeBSD.
	  </p></li><li class="listitem"><p>Tendrá información sobre los diversos mecanismos
          de cifrado disponibles en FreeBSD, entre los cuales están
	  <acronym class="acronym">DES</acronym> y <acronym class="acronym">MD5</acronym>.
	  </p></li><li class="listitem"><p>Sabrá cómo configurar la autentificación
          de contraseñas de un solo uso.</p></li><li class="listitem"><p>Sabrá cómo configurar <acronym class="acronym">TCP</acronym>
          Wrappers y usarlos con
          <code class="command">inetd</code>.</p></li><li class="listitem"><p>Sabrá cómo instalar
          <span class="application">KerberosIV</span> en versiones de FreeBSD
	  anteriores a 5.0.</p></li><li class="listitem"><p>Sabrá cómo instalar
          <span class="application">Kerberos5</span> en versiones de FreeBSD
	  posteriores a 5.0.</p></li><li class="listitem"><p>Podrá configurar IPsec y crear una
          <acronym class="acronym">VPN</acronym> entre
          máquinas FreeBSD/<span class="trademark">Windows</span>®.</p></li><li class="listitem"><p>Sabrá cómo configurar y utilizar
          <span class="application">OpenSSH</span>,
	  la implementación de <acronym class="acronym">SSH</acronym> en FreeBSD.</p></li><li class="listitem"><p>Sabrá en qué consisten las
          <acronym class="acronym">ACL</acronym> del sistema de ficheros y cómo
          utilizarlas.</p></li><li class="listitem"><p>Sabrá cómo usar
          <span class="application">Portaudit</span>, con la que podrá
          auditar el software que instale desde la
          desde la colección de ports.</p></li><li class="listitem"><p>Sabrá cómo sacar partido de los avisos de
          seguridad que publica FreeBSD.</p></li><li class="listitem"><p>Podrá hacerse una idea clara de en qué consiste
          la contabilidad de procesos y de cómo activarla en
          FreeBSD.</p></li></ul></div><p>Antes de leer este capítulo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprender conceptos básicos de FreeBSD e Internet.</p></li></ul></div><p>En otras secciones de este manual se cubren aspectos adicionales
      sobre seguridad.  Por ejemplo, MAC (controles de acceso obligatorio)
      se explica en el <a class="xref" href="#mac" title="Capítulo 16. Mandatory Access Control">Capítulo 16, <em>Mandatory Access Control</em></a> y los cortafuegos en el
      <a class="xref" href="#firewalls" title="Capítulo 26. Cortafuegos">Capítulo 26, <em>Cortafuegos</em></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-intro"></a>14.2. Introducción</h2></div></div></div><p>La seguridad es un trabajo que que comienza y termina en el
      administrador de sistema.  Aunque que los sistemas multiusuario
      BSD <span class="trademark">UNIX</span>® posean una seguridad inherente, el trabajo de construir y
      mantener mecanismos de seguridad adicionales para que los
      usuarios sean aún más <span class="quote">&#8220;<span class="quote">honestos</span>&#8221;</span> es
      probablemente una de las mayores tareas de la administración
      de sistemas.  Los sistemas son tan seguros como uno los haga, y
      no hay que olvidar que los problemas de seguridad compiten con la
      comodidad a la que tendemos los humanos.  Los sistemas <span class="trademark">UNIX</span>®
      son capaces de ejecutar una gran cantidad de procesos
      simultáneamente, muchos de los cuales son servidores, lo que
      significa que las entidades externas pueden conectarse y
      <span class="quote">&#8220;<span class="quote">hablar</span>&#8221;</span> con ellos.  Del mismo modo que las
      minicomputadoras de ayer se convirtieron en los sistemas de
      escritorio de hoy en día, la seguridad se va convirtiendo
      en un problemas más y más acuciante.</p><p>La seguridad bien entendida se implementa en capas, a la manera de
      una <span class="quote">&#8220;<span class="quote">cebolla</span>&#8221;</span>.  Básicamente lo que se hace es
      crear la mayor cantidad posible de capas de seguridad, para más
      tarde monitorizar el sistema en busca de intrusos.  No es conveniente
      exagerar la seguridad, ya que interferiría con la
      detección, y la detección es uno de los aspectos
      más importantes de cualquier mecanismo de seguridad.
      Por ejemplo, no tiene mucho sentido activar la bandera
      <code class="literal">schg</code> (consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>) en cada binario del
      sistema, ya que aunque protegería en cierto modo los binarios,
      haría que cualquier cambio que pudiera realizar un atacante
      una vez dentro del sistema fuera más difícil de detectar
      o incluso hacerlo del todo imposible.</p><p>La seguridad del sistema depende también de estar preparados
      para distintos tipos de ataque, incluyendo intentos de
      <span class="quote">&#8220;<span class="quote">tirar</span>&#8221;</span> la máquina o dejarla en un estado
      inutilizable, pero que no impliquen intentos de comprometer el usuario
      <code class="systemitem">root</code>  Los problemas de seguridad pueden
      dividirse en diferentes categorías:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Ataques de denegación de servicio (DoS).</p></li><li class="listitem"><p>Comprometer cuentas de usuarios.</p></li><li class="listitem"><p>Comprometer root a través de servidores accesibles.
	</p></li><li class="listitem"><p>Comprometer root desde cuentas de usuario.</p></li><li class="listitem"><p>Creación de puertas traseras
          (<span class="quote">&#8220;<span class="quote">Backdoors</span>&#8221;</span>).</p></li></ol></div><a id="idp72980688" class="indexterm"></a><a id="idp72981840" class="indexterm"></a><a id="idp72983376" class="indexterm"></a><p>Un ataque de denegación de servicio es una acción que
      priva al sistema de los recursos requeridos para su funcionamiento
      normal.  Generalmente, los ataques DoS son mecanismos de fuerza bruta
      que intentan <span class="quote">&#8220;<span class="quote">tumbar</span>&#8221;</span> el sistema o hacerlo inutilizable
      sobrecargando la capacidad de sus servidores o de la pila de red.
      Algunos ataques DoS intentan aprovechar errores en la pila de red
      para <span class="quote">&#8220;<span class="quote">tumbar</span>&#8221;</span> el sistema con un solo paquete.
      Estos últimos únicamente pueden solucionarse aplicando
      al kernel una actualización que subsane el error.
      Los ataques a servidores muchas veces pueden solucionarse configurando
      las opciones apropiadas para limitar la carga del sistema en
      condiciones adversas.  Los ataques de fuerza bruta a redes
      son más complicados.  Los ataques con paquetes enmascarados,
      por ejemplo, son casi imposibles de detener, a menos que desconecte
      el sistema de Internet.  Puede ser que no <span class="quote">&#8220;<span class="quote">tiren</span>&#8221;</span> el
      sistema, pero saturarán la conexión a Internet.</p><a id="idp72985552" class="indexterm"></a><p>Comprometer una cuenta de usuario es mucho más común
      que un ataque DoS.  Muchos administradores de sistemas
      todavía ejecutan servidores estándar
      <span class="application">telnetd</span>, <span class="application">rlogind</span>,
      <span class="application">rshd</span> y <span class="application">ftpd</span> en
      sus máquinas.
      Estos servidores, por defecto no operan a través de conexiones
      cifradas.  El resultado es que se si se tiene una base de usuarios de
      tamaño medio, tarde o temprando la contraseña de uno
      (o más) de sus usuarios será descubierta durante
      sus accesos al sistema desde ubicaciones remotas.(que es, por otra
      parte, la forma más común y más cómoda
      de acceder a un sistema).  El administrador de sistemas atento
      analizará sus logs de acceso remoto en busca de direcciones
      origen spspechosas, incluso entre los accesos al sistema.</p><p>Se debe asumir <span class="emphasis"><em>siempre</em></span> que, una vez que
      el atacante tiene acceso a una cuenta de usuario, el atacante
      puede comprometer la cuenta <code class="systemitem">root</code>.  En realidad
      en un sistema bien mantenido y asegurado el acceso a una cuenta de
      usuario no necesariamente da al atacante acceso a
      <code class="systemitem">root</code>.  Esta precisión es importante
      porque sin acceso a <code class="systemitem">root</code> el atacante
      difícilmente podrá esconder sus huellas;  podrá,
      como mucho, hacer poco más que sembrar el caos en los ficheros
      del usuario o <span class="quote">&#8220;<span class="quote">tirar</span>&#8221;</span> la máquina.
      Comprometer cuentas de usuario es muy común porque los
      usuarios tienden a no tomar las precauciones que toma el
      administrador.</p><a id="idp72991696" class="indexterm"></a><p>Los administradores de sistemas deben tener presente que
      existen muchas formas potenciales de comprometer la cuenta
      <code class="systemitem">root</code> de una máquina.  El atacante puede
      conocer la contraseña de <code class="systemitem">root</code>, el
      atacante puede encontrar un error en un servidor que se ejecuta
      como root y ser capaz de comprometer <code class="systemitem">root</code> a
      través de una conexión de red a ese servidor; puede
      ser que el atacante sepa de la existencia de un error en un
      programa suid-root que le permita comprometer
      <code class="systemitem">root</code> una vez dentro de una cuenta de usuario.
      Si un atacante encuentra la manera de comprometer la cuenta
      <code class="systemitem">root</code> de una máquina puede que no
      necesite instalar una puerta trasera.  Muchos de
      los agujeros <code class="systemitem">root</code> encontrados y cerrados hasta
      la fecha implican una cantidad considerable de trabajo para el atacante
      limpiando todo después del ataque, así que
      la mayoría de los atacantes instalan puertas traseras.
      Una puerta trasera facilita al atacante una forma sencilla de
      recuperar el acceso de <code class="systemitem">root</code> al sistema,
      pero también proporciona al administrador de sistemas
      inteligente una forma de detectar la intrusión.  Si hace
      imposible a un atacante la instalación de una puerta
      trasera puede estar actuando en detrimento de su seguridad, porque
      no cerrará el agujero que el atacante encontró
      para accder al sistema la primera vez que lo hizo.</p><p>Las medidas de seguridad se implementan en un modelo
      multicapa (tipo <span class="quote">&#8220;<span class="quote">cebolla</span>&#8221;</span>), que puede categorizarse
      del siguiente modo:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Asegurar <code class="systemitem">root</code> y cuentas
          administrativas.</p></li><li class="listitem"><p>Asegurar los servidores que se ejecuten como
          <code class="systemitem">root</code> los binarios suid/sgid.</p></li><li class="listitem"><p>Asegurar cuentas de usuario.</p></li><li class="listitem"><p>Asegurar el fichero de contraseñas.</p></li><li class="listitem"><p>Asegurar el núcleo del kernel, los dispositivos
          en bruto y el sistema de ficheros.</p></li><li class="listitem"><p>Detección rápida de cambios
          hechos al sistema.</p></li><li class="listitem"><p>Paranoia.</p></li></ol></div><p>La siguiente sección de este capítulo tratará
      los puntos de arriba con mayor profundidad.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="securing-freebsd"></a>14.3. Asegurar FreeBSD</h2></div></div></div><a id="idp73010384" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Orden vs. protocolo: </h3><p xmlns="http://www.w3.org/1999/xhtml">En este capítulo usaremos el texto en
        <span class="application">negrita</span> para referirnos a una orden o
        aplicación, y una fuente en <code class="command">cursiva</code> para
        referirnos a órdenes específicas.  Usaremos un tipo normal
        para los protocolos.  Esta diferencia tipográfica nos
        será útil por ejemplo con ssh, que es tanto un
        protocolo como una orden.</p></div><p>Las siguientes secciones cubren los métodos a seguir para
      asegurar su sistema FreeBSD que se mencionados en la
      <a class="link" href="#security-intro" title="14.2. Introducción"> sección anterior</a> de este
      capítulo.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="securing-root-and-staff"></a>14.3.1. Asegurar la cuenta <code class="systemitem">root</code> y las
        cuentas administrativas</h3></div></div></div><a id="idp73015632" class="indexterm"></a><p>En primer lugar, no se moleste en asegurar las cuentas
        administrativas (o <span class="quote">&#8220;<span class="quote">staff</span>&#8221;</span>) si no ha asegurado la
        cuenta <code class="systemitem">root</code>.
        La mayoría de los sistemas tienen una contraseña
        asignada para la cuenta <code class="systemitem">root</code>.  Lo primero que
        se hace es asumir que la contraseña está
        <span class="emphasis"><em>siempre</em></span> amenazada.
        Esto no significa que deba eliminar la contraseña.  La
        contraseña es casi siempre necesaria para el acceso por
        consola a la máquina; significa que no se debe permitir
        el uso de la contraseña fuera de la consola o, mejor
        aún, mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.  Por ejemplo,
        asegúrese de que sus ptys aparezcan como
        <span class="emphasis"><em>inseguras</em></span> en el fichero
        <code class="filename">/etc/ttys</code>, con lo que hará que
        los accesos como <code class="systemitem">root</code> vía
        <code class="command">telnet</code> o <code class="command">rlogin</code> no sean
        posibles.
        Si utiliza otros tipos de login como
        <span class="application">sshd</span> asegúrese de que
        los accesos al sistema como <code class="systemitem">root</code>
        estén también deshabilitados.
        Para ello edite su
        <code class="filename">/etc/ssh/sshd_config</code> y asegúrese de
        que <code class="literal">PermitRootLogin</code> esté puesto a
        <code class="literal">NO</code>.  Estudie cada método de acceso:
        hay servicios como FTP que frecuentemente son origen de grietas
        en la estructura del sistema.  El acceso directo como usuario
        <code class="systemitem">root</code> sólamente debe permitirse
        a través de la consola.</p><a id="idp73061328" class="indexterm"></a><p>Es evidente que, como administrador del sistema, debe usted
        tener la posibilidad de acceder a <code class="systemitem">root</code>,
        así que tendrá que abrir algunos agujeros, pero
        debe asegurarse de que estos agujeros necesiten contraseñas
        adicionales para verificar su correcto uso.  Puede hacer
        que <code class="systemitem">root</code> sea accesible añadiendo
        cuentas administrativas al grupo
        <code class="systemitem">wheel</code> (en
        <code class="filename">/etc/group</code>).  El personal que administra los
        sistemas que aparezcan en el grupo
        en el grupo <code class="systemitem">wheel</code> pueden hacer
        <code class="command">su</code> a <code class="systemitem">root</code>.
        Nunca debe de proporcionar al personal administrativo el acceso
        nativo a <code class="systemitem">wheel</code> poniéndolos
        en el grupo <code class="systemitem">wheel</code> en su entrada de
        contraseña.  Las cuentas administrativas deben colocarse
        en un grupo <code class="systemitem">staff</code>, y agregarse
        después al grupo <code class="systemitem">wheel</code> en
        <code class="filename">/etc/group</code>.  Sólo aquellos
        administradores que realmente necesiten acceder a
        <code class="systemitem">root</code> deben pertenecer al grupo
        <code class="systemitem">wheel</code>.  También es posible,
        mediante un método de autentificación como
        Kerberos, usar el fichero <code class="filename">.k5login</code> en
        la cuenta <code class="systemitem">root</code> para permitir un
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ksu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ksu</span>(1)</span></a> a <code class="systemitem">root</code> sin tener que
        colocar a nadie en el grupo
        <code class="systemitem">wheel</code>.  Puede ser una mejor solución,
        ya que el mecanismo <code class="systemitem">wheel</code> aún
        permite a un atacante comprometer <code class="systemitem">root</code>
        si el intruso ha conseguido el fichero de contraseñas
        y puede comprometer una cuenta de administración.
        Recurrir al mecanismo <code class="systemitem">wheel</code> es mejor que
        no tener nada, pero no es necesariamente la opción
        más segura.</p><p>Una manera indirecta de asegurar las cuentas de staff y
        el acceso a <code class="systemitem">root</code> es utilizar un método
        de acceso alternativo: es lo que se conoce como
        <span class="quote">&#8220;<span class="quote">estrellar</span>&#8221;</span> las contraseñas cifradas de las
        cuentas administrativas.  Use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> para reemplazar
        cada contraseña cifrada por un sólo caracter
        asterisco (<span class="quote">&#8220;<span class="quote"><code class="literal">*</code></span>&#8221;</span>).  Esto
        actualizará
        <code class="filename">/etc/master.passwd</code> y la base de datos de
        usuario/contraseña y deshabilitará los accesos
        al sistema validados mediante
        contraseñas.</p><p>Veamos una cuenta administrativa típica:</p><pre class="programlisting">foobar:R9DT/Fa1/LV9U:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre><p>y cómo debería quedar:</p><pre class="programlisting">foobar:*:1000:1000::0:0:Foo Bar:/home/foobar:/usr/local/bin/tcsh</pre><p>Este cambio evitará que se efectúen logins normales,
        ya que la contraseña cifrada nunca se corresponderá
        con <span class="quote">&#8220;<span class="quote"><code class="literal">*</code></span>&#8221;</span>.  Hecho esto, el personal
        de administración tendrá que usar otro mecanismo
        de validación como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kerberos&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kerberos</span>(1)</span></a> o
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> que use un par de llave pública/privada.
        Si decide usar algo como Kerberos tendrá que asegurar
        la máquina que ejecuta los servidores Kerberos
        y su estación de trabajo.  Si usa un par de llave
        pública/privada con ssh, debe asegurar la
        máquina <span class="emphasis"><em>desde</em></span> desde la que se hace el
        login (normalmente nuestra estación de trabajo).  Puede
        añadir una capa adicional de protección  al par de
        llaves protegiéndolas con contraseña al crearlo
        con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>.
        El <span class="quote">&#8220;<span class="quote">estrellado</span>&#8221;</span> de las contraseñas
        administrativas también garantiza que dicho personal
        sólo pueda entrar a través de métodos de
        acceso que haya usted configurado.  Así obligará
        al personal administrativo a usar conexiones seguras, cifradas,
        en todas sus sesiones, lo que cierra un importante agujero
        de seguridad al que recurren muchos intrusos: usar un
        sniffer (olfateador) de red desde una máquina que le
        permita hacer tal cosa.</p><p>Los mecanismos de seguridad más indirectos también
        asumen que está validando su identidad desde un servidor
        más restrictivo un servidor menos restrictivo.
        Por ejemplo, si su máquina principal ejecuta toda clase de
        servidores su estación de trabajo no debe ejecutar ninguno.
        Para que su estación de trabajo sea razonablemente segura
        debe ejecutar los mínimos servidores posibles, si es posible
        ninguno, y debe usar un salvapantallas protegido por
        contraseña.  Es evidente que un atancante con acceso
        físico al sistema puede romper cualquier barrera de seguridad
        que se disponga.  Es un problema a tener en cuenta, pero la
        mayoría de las intrusiones tienen lugar de forma remota,
        a través de la red, por parte de gente que no tiene acceso
        físico a su estación de trabajo ni a sus
        servidores.</p><a id="idp73103696" class="indexterm"></a><p>Usar Kerberos le ofrece también el poder
        de deshabilitar o cambiar la contraseña para una cuenta
        administrativa en un lugar, y que tenga un efecto inmediato en todas
        las máquinas en las cuales ese administrador pueda
        tener una cuenta.  Si una de esas cuentas se ve comprometida
        la posibilidad para cambiar instantáneamente su
        contraseña en todas las máquinas no debe ser
        desestimada.  Con contraseñas distintas, el cambio
        de una contraseña en N máquinas puede ser un
        problema.  También puede imponer restricciones de
        re-contraseñas con Kerberos: no sólo se puede
        hacer un ticket de Kerberos que expire después de un
        tiempo, sino que el sistema Kerberos puede requerir al usuario
        que escoja una nueva contraseña después de cierto
        tiempo (digamos una vez al mes).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73104720"></a>14.3.2. Asegurar servidores que se ejecutan como
          <code class="systemitem">root</code>
          y binarios SUID/SGID</h3></div></div></div><a id="idp73106000" class="indexterm"></a><a id="idp73106896" class="indexterm"></a><a id="idp73107792" class="indexterm"></a><a id="idp73108688" class="indexterm"></a><a id="idp73109712" class="indexterm"></a><a id="idp73110608" class="indexterm"></a><a id="idp73111504" class="indexterm"></a><a id="idp73112400" class="indexterm"></a><p>Un administrador de sistemas prudente sólo
        ejecutará los servidores que necesita, ni uno más
        ni uno menos.  Dese cuenta de que los servidores ajenos son
        los más propensos a contener errores.  Por ejemplo,
        ejecutando una versión desfasada de
        <span class="application">imapd</span> o
        <span class="application">popper</span> es como dar una entrada universal
        de <code class="systemitem">root</code> al mundo entero.
        Nunca ejecute un servidor que no haya revisado cuidadosamente.
        Muchos servidores no necesitan ejecutarse como
        <code class="systemitem">root</code>.  Por ejemplo, los dæmons
        <span class="application">ntalk</span>,
        <span class="application">comsat</span> y
        <span class="application">finger</span> pueden ejecutarse en una
        <em class="firstterm">caja de arena (sandbox)</em> especial de usuario.
        Una caja de arena no es perfecta, a menos que pase por muchos
        problemas, pero la aproximación de cebolla a la seguridad
        prevalece aún y todo: Si alguien es capaz de penetrar a
        través de un servidor ejecutándose en una caja
        de arena, todavía tendrá que salir de la caja de
        arena.  Cuantas más capas tenga que romper el atacante
        menor será la posibilidad de éxito que tenga.
        Se han encontrado vías de entrada a
        <code class="systemitem">root</code> en virtualmente todos los servidores
        que se haya ejecutado como <code class="systemitem">root</code>,
        incluyendo servidores básicos del sistema.
        Si está tiene una máquina a través de
        la cual la gente sólo entra por
        <span class="application">sshd</span>, y nunca entra por
        <span class="application">telnetd</span>,
        <span class="application">rshd</span>, o
        <span class="application">rlogind</span>
        <span class="emphasis"><em>apague esos servicios</em></span>.</p><p>FreeBSD ejecuta por defecto
        <span class="application">ntalkd</span>,
        <span class="application">comsat</span> y
        <span class="application">finger</span> en una caja de arena.
        Otro programa que puede ser candidato para ejecutarse en una
        caja de arena es <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.
        <code class="filename">/etc/defaults/rc.conf</code> contiene las directrices
        necesarias (con comentarios) para usar <span class="application">named</span>
        en una caja de arena.  Dependiendo de si
        está instalando un nuevo sistema o actualizando un sistema
        ya existente, las cuentas especiales de usuario que usan
        estas cajas de arena puede que no estén instaladas.
        El administrador de sistemas prudente debe investigar e
        implementar cajas de arena para servidores siempre que sea
        posible.</p><a id="idp73131600" class="indexterm"></a><p>Existen numerosos servidores que no se suelen
        ejecutar en cajas de arena:
        <span class="application">sendmail</span>,
        <span class="application">imapd</span>, <span class="application">ftpd</span>,
        y otros.  Existen alternativas para algunos de ellos, pero
        instalarlas puede requerir más trabajo del que tal vez
        esté dispuesto a realizar (el factor comodidad ataca de
        nuevo).  Tal vez tenga que ejecutar estos servidores como
        <code class="systemitem">root</code> y depender de otros mecanismos para
        detectar intrusiones que puedan tener lugar a través de
        ellos.</p><p>Los otros grandes agujeros potenciales de
         <code class="systemitem">root</code> que encontramos en un sistema son los
         binarios suid-root y sgid.  La mayoría
         de estos binarios, como <span class="application">rlogin</span>,
         están en <code class="filename">/bin</code>, <code class="filename">/sbin</code>,
         <code class="filename">/usr/bin</code> o <code class="filename">/usr/sbin</code>.
         Aunque no hay nada absolutamente seguro los binarios suid y sgid
         del sistema por defecto pueden considerarse razonablemente
         seguros.  Aún así, de vez en cuando aparecen
         agujeros <code class="systemitem">root</code> en estos binarios.
         En 1998 se encontró un agujero
         <code class="systemitem">root</code> en
         <code class="literal">Xlib</code>, que hacía a
         <span class="application">xterm</span> (que suele ser suid)
         vulnerable.  Es mejor prevenir que curar, y el administrador de
         sistemas prudente restringirá los binarios suid, que
         sólo el personal de administración debe ejecutar,
         a un grupo especial al que sólo dicho personal pueda acceder,
         y deshacerse de cualquier binario suid
         (<code class="command">chmod 000</code>) que no se use.
         Un servidor sin pantalla generalmente no necesita un binario
         <span class="application">xterm</span>.  Los  binarios sgid pueden ser
         igual de peligrosos.  Si un intruso logra comprometer un binario
         sgid-kmem, el intruso podría leer
         <code class="filename">/dev/kmem</code> y llegar a leer el fichero
         cifrado de contraseñas, poniendo en compromiso potencial
         cualquier cuenta con contraseña.  Por otra parte, un intruso
         que comprometa el grupo <code class="literal">kmem</code> puede monitorizar
         las pulsaciones de teclado que se envien a través de ptys,
         incluyendo las ptys a las que acceden usuarios que emplean
         métodos seguros.  Un intruso que comprometa el grupo
         <code class="systemitem">tty</code> puede escribir en la pty de casi
         cualquier usuario.  Si un usuario ejecuta un programa de terminal
         o un emulador capaz de simular un teclado, el intruso podría
         generar un flujo de datos que provoque que la terminal del
         usuario muestre una orden en pantalla, orden que el usuario
         ejecutará.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="secure-users"></a>14.3.3. Asegurar las cuentas de usuario</h3></div></div></div><p>Las cuentas de usuario suelen ser las más
        difíciles de asegurar.  Aunque puede imponer restricciones
        de acceso draconianas a su personal administrativo  y
        <span class="quote">&#8220;<span class="quote">estrellar</span>&#8221;</span> sus contraseñas, tal vez no pueda
        hacerlo con todas las cuentas de todos sus usuarios.  Si mantiene
        el control en un grado suficiente quizás lo logre y sea
        capaz de hacer que las cuentas de sus usuarios sean seguras.  Si no,
        tendrá que ser más cuidadoso (aún) en la
        monitorización de esas cuentas.  Usar ssh y Kerberos en
        cuentas de usuario da más problemas debido al soporte
        técnico y administrativo que requerirá, pero sigue
        siendo mejor solución que un fichero de
        contraseñas cifradas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73147216"></a>14.3.4. Asegurar el fichero de contraseñas</h3></div></div></div><p>La única manera segura es ponerle <code class="literal">*</code>
        a tantas contraseñas como sea posible y utilizar ssh o
        Kerberos para acceder a esas cuentas.  Aunque el fichero
        cifrado de contraseñas (<code class="filename">/etc/spwd.db</code>)
        sólo puede ser legible para <code class="systemitem">root</code>, puede
        que un intruso consiga acceso de lectura a ese fichero, incluso sin
        haber alcanzado el acceso de escritura como root.</p><p>Sus <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> de seguridad deben buscar siempre
        cambios en el fichero de contraseñas
        (consulte <a class="link" href="#security-integrity" title="14.3.6. Revisión de integridad de ficheros: binarios, ficheros de configuración, etc.">Revisión de
        integridad de ficheros</a> más abajo) e informar de
        ellos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73151056"></a>14.3.5. Asegurar el Kernel, dispositivos en bruto y el sistema
          sistema de ficheros</h3></div></div></div><p>Si un atacante compromete <code class="systemitem">root</code> puede
        hacer cualquier cosa, pero hay ciertas cosas que puede usted
        preparar para <span class="quote">&#8220;<span class="quote">curarse en salud</span>&#8221;</span>.  Por ejemplo,
        la mayoría de los kernel modernos tienen un dispositivo
        de los Kernels modernos tienen un integrado un
        dispositivo de paquetes.  En FreeBSD se llama
        <code class="filename">bpf</code>.  Un intruso típico
        tratará de ejecutar un <span class="quote">&#8220;<span class="quote">sniffer</span>&#8221;</span> de paquetes
        en una máquina comprometida.  No debería darle a
        ese intruso tal recurso, y la mayoría de los sistemas no
        necesitan el dispositivo
        <code class="filename">bpf</code>.</p><a id="idp73154128" class="indexterm"></a><p>Pero si desactiva el dispositivo <code class="filename">bpf</code>
        todavía tendrá que preocuparse por
        <code class="filename">/dev/mem</code> y
        <code class="filename">/dev/kmem</code>.
        Desde ellos el intruso podría en dispositivos de disco
        en bruto.  También hay que tener muy en cuenta
        una opción del kernel llamada cargador de módulos,
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.  Un intruso con iniciativa puede usar un
        módulo KLD para instalar su propio dispositivo
        <code class="filename">bpf</code>, u otro dispositivo
        que le permita el <span class="quote">&#8220;<span class="quote">sniffing</span>&#8221;</span> en un kernel en
        ejecución.  Para prevenir estos problemas debe ejecutar el
        kernel en un nivel de seguridad mayor, al menos en securelevel 1.
        Puede configurar el securelevel mediante una <code class="command">sysctl</code>
        en la variable <code class="varname">kern.securelevel</code>.
        Una vez que tiene su securelevel a 1, los accesos de
        escritura a dispositivos en bruto se
        denegarán y se impondrán las banderas especiales
        <code class="literal">schg</code>.
        También debe cerciorarse de activar la bandera
        <code class="literal">schg</code> en binarios críticos para el arranque,
        directorios y scripts (dicho de otro modo, todo aquello que se
        ejecuta <span class="emphasis"><em>antes</em></span> de que se active el
        securelevel).  Puede ser que todo esto sea una exageración,
        sobre todo teniendo en cuenta que la actualización del sistema
        se complica bastante a medida que se incrementa el nivel de
        seguridad.  Puede ejecutar el sistema a un nivel de seguridad
        superior pero no activar la bandera <code class="literal">schg</code>
        en cada fichero y directorio del sistema.  Otra posibilidad es
        montar <code class="filename">/</code> y <code class="filename">/usr</code> como
        sólo lectura.  Recuerde que siendo demasiado draconiano
        en aquello que busca proteger puede dificultar mucho la
        detección de una intrusión.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-integrity"></a>14.3.6. Revisión de integridad de ficheros: binarios,
        ficheros de configuración, etc.</h3></div></div></div><p>Cuando se piensa de proteccón, sólo se puede
        proteger la configuración central del sistema y los ficheros
        de control hasta el momento en el que el factor comodidad salta
        a la palestra.  Por ejemplo, si usa
        <code class="command">chflags</code> para activar el bit <code class="literal">schg</code>
        en la mayoría de los ficheros de <code class="filename">/</code>
        y <code class="filename">/usr</code> probablemente sea contraproducente;
        puede proteger los ficheros haciéndolo, pero también
        cierra una vía de detección.  La última capa
        de su modelo de seguridad tipo cebolla es quizás la
        más importante: la detección.  El resto de su
        estructura de seguridad será inútil (o peor
        aún, le proporcionará un sentimiento de seguridad
        totalmente infundado) si no puede detectar posibles intrusiones.
        La mitad del trabajo de la cebolla es alentar al atacante, en lugar
        de detenerlo, para darle a la parte de la ecuación de
        detección una oportunidad de atraparlo con las manos en la
        masa.</p><p>La mejor manera de detectar una intrusión es buscar
        ficheros modificados, perdidos, o cuya presencia o estado sea
        inesperado.  La mejor forma de buscar ficheros modificados es
        desde otro sistema (que muchas veces es centralizado) con acceso
        restringido.
        Escribir sus <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> de seguridad en un sistema
        <span class="quote">&#8220;<span class="quote">extraseguro</span>&#8221;</span> y con acceso restringido los hace casi
        invisibles a posibles atacantes, y esto es algo muy importante.
        potenciales, y esto es importante.  Para poderle sacar el
        máximo partido debe proporcionar a esa máquina con
        acceso restringido un acceso preferente al contenido de las otras
        máquinas de su entorno; suele hacerse mediante la
        importación vía NFS de sólo lectura de las
        demás máquinas, o configurando pares de llaves ssh
        para acceder a las otras máquinas desde la que tiene el
        acceso restringido.  Si exceptuamos el tráfico de red, NFS
        es el método menos visible y le permite monitorizar los
        sistemas de ficheros de cada máquina cliente de forma
        prácticamente indetectable.  Si su servidor de acceso
        restringido está conectado a las máquinas clientes
        a través de un concentrador o a través de varias
        capas de encaminamiento el método NFS puede ser muy inseguro,
        por lo que ssh puede ser la mejor opción, incluso con
        las huellas de auditoría que ssh va dejando.</p><p>Una vez que le da a una máquina de acceso restringido
        (al menos) acceso de lectura a los sistemas cliente que va
        a monitorizar, tendrá que escribir <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span>
        para efectuar la monitorización.  Si va a usar un montaje
        NFS puede escribir <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> utilizando simples
        herramientas del sistema como
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md5&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">md5</span>(1)</span></a>.  Es aconsejable ejecutar MD5
        físicamente en los ficheros de las máquinas cliente
        al menos una vez al día, y comprobar los ficheros de control
        (los que hay en <code class="filename">/etc</code> y
        <code class="filename">/usr/local/etc</code>) con una frecuencia incluso
        mayor.  Si aparecen discrepancias al compararlos con la
        información basada en MD5 que la máquina de acceso
        restringido usa como base debe hacer una comprobación
        inmediata y profunda.  Un buen <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> también
        debe buscar binarios que sean suid sin razón aparente, y
        ficheros nuevos o borrados en particiones del sistema como
        <code class="filename">/</code> y <code class="filename">/usr</code>.</p><p>Si usa ssh en lugar de NFS será mucho más
        complicado escribir el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de seguridad.
        En esencia, tiene que pasar por <code class="command">scp</code> los
        <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> a la máquina cliente para poder
        ejecutarlos, haciéndolos visibles; por seguridad,
        también tendrá que pasar vía
        <code class="command">scp</code> los binarios (por ejemplo find) que
        utilizan dichos <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span>.  El cliente
        <span class="application">ssh</span> de la máquina cliente
        puede estar ya bajo el control del intruso.  Con todo y con eso,
        puede ser necesario usar ssh si trabaja sobre enlaces inseguros,
        también es mucho más difícil de manejar.</p><p>Un buen <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de seguridad buscará
        también cambios en la configuración de los ficheros
        de acceso de usuarios y miembros del personal de
        administración:
        <code class="filename">.rhosts</code>, <code class="filename">.shosts</code>,
        <code class="filename">.ssh/authorized_keys</code>, etc; en resumen,
        ficheros fuera del rango de revisión
        <code class="literal">MD5</code>.</p><p>Si tiene que vérselas con una cantidad enorme de
        espacio en disco para usuarios le llevará mucho tiempo
        recorrer cada fichero de cada partición.  En su caso
        sería una buena idea configurar mediante opciones de
        montaje la deshabilitación de binarios y dispositivos
        suid en esas particiones.  Revise las opciones
        <code class="literal">nodev</code> y <code class="literal">nosuid</code> de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Debería comprobarlos de todas maneras
        al menos una vez por semana, ya que el objeto de esta capa es
        detectar intrusiones, efectivas o no.</p><p>La contabilidad de procesos (vea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=accton&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">accton</span>(8)</span></a>) es una
        opción con una carga relativamente ligera para el sistema
        operativo, y puede ayudarle como mecanismo de
        evaluación tras una intrusión.  Es especialmente
        útil para rastrear cómo consiguión realmente
        acceder el intruso al sistema (asumiendo que el fichero
        esté intacto después de la intrusión).</p><p>Los <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> de seguridad deben procesar los
        logs, y los propios logs deben generarse de la forma más
        segura posible: un syslog remoto puede ser muy
        útil.  Un intruso trata de cubrir sus huellas, los logs
        son un recurso crítico cuando el administrador de sistemas
        intenta determinar la hora y el método de la intrusión
        inicial.  La ejecución de la consola del sistema en un
        puerto serie y recolectar la información de forma
        periódica en una máquina segura de
        monitorización de consolas es una forma de cumplir esta
        tarea.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73187280"></a>14.3.7. Paranoia</h3></div></div></div><p>Un poco de paranoia nunca está de más.
        Como norma, un administrador de sistemas puede añadir
        cualquier tipo de mecanismo de seguridad siempre y cuando no
        afecte a la comodidad, y puede añadir mecanismos de seguridad
        que <span class="emphasis"><em>sí</em></span> afecten a la comodidad
        si tiene una buena razón para hacerlo.  Más
        aún, un administrador de seguridad debe mezclar
        un poco de ambas cosas: si sigue al pie de la letra las
        recomendaciones que se dan en este documento también
        está sirviendo en bandeja de plata al posible atancante
        su metodología.  Ese posible atacante también
        tiene acceso a este documento.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73188816"></a>14.3.8. Ataques de denegación de servicio</h3></div></div></div><a id="idp73189456" class="indexterm"></a><p>Esta sección cubre ataques de denegación de
        servicio.  Un ataque DoS suele consistir en un ataque mediante
        paquetes.  NO hay mucho que pueda hacerse contra un ataque
        mediante paquetes falsificados (<span class="quote">&#8220;<span class="quote">spoofed</span>&#8221;</span>) que busque
        saturar su red, pero puede limitar el daño
        asegurándose de que los ataques no tiren sus servidores.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Limitación de forks en el servidor.</p></li><li class="listitem"><p>Limitación de ataques <span class="quote">&#8220;<span class="quote">springboard</span>&#8221;</span>
            (ataques de respuesta ICMP, ping broadcast, etc.)</p></li><li class="listitem"><p>Caché de rutas del kernel.</p></li></ol></div><p>Un típico ataque DoS contra un servidor con instancias
        (forks) sería tratar de provocar que el servidor consuma
        procesos, descriptores de fichero y memoria hasta tirar la
        máquina.
        <span class="application">inetd</span> (consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>)
        dispone de varias opciones para limitar este tipo de ataque.
        Recuerde que aunque es posible evitar que una máquina
        caiga, generalmente no es posible evitar que un servicio sea
        vea interrumpido a causa el ataque.  Consulte la página
        de manual de <span class="application">inetd</span> atentamente y
        sobre todo estudie las las opciones
        <code class="option">-c</code>, <code class="option">-C</code>,
        y <code class="option">-R</code>.  Observe que los ataques con direcciones IP
        falsificadas sortearán la opción <code class="option">-C</code> de
        <span class="application">inetd</span>, así que debe usar una
        combinación de opciones.  Algunos servidores
        autónomos (<span class="quote">&#8220;<span class="quote">standalone</span>&#8221;</span>) cuentan con
        parámetros de autolimitación de instancias.</p><p><span class="application">Sendmail</span> tiene la opción
        <code class="option">-OMaxDaemonChildren</code>, que tiende a funcionar
        mucho mejor que las opciones de límite
        de carga de sendmail debido al retraso que provoca la carga.
        Debe especificar un parámetro
        <code class="literal">MaxDaemonChildren</code> al inicio de
        <span class="application">sendmail</span> que sea lo suficientemente alto
        como para gestionar la carga esperada, pero no tan alto que la
        computadora no pueda absorber tal número de
        <span class="application">sendmails</span> sin caerse de boca.
        También es prudente ejecutar sendmail en modo de cola
        (<code class="option">-ODeliveryMode=queued</code>) y ejecutar el
        dæmon (<code class="command">sendmail -bd</code>)
        de manera independiente de las ejecuciones de cola
        (<code class="command">sendmail -q15m</code>).  Si a pesar de todo necesita
        entregas en tiempo real puede ejecutar la cola a un intervalo
        menor, como <code class="option">-q1m</code>, pero asegúrese de
        especificar una opción <code class="literal">MaxDaemonChildren</code>
        razonable para <span class="emphasis"><em>ese</em></span> sendmail y así
        evitar fallos en cascada.</p><p><span class="application">Syslogd</span> puede recibir ataques directos
        y se recomienda encarecidamente que utilice la opción
        <code class="option">-s</code> siempre que sea posible, y si no la opción
        <code class="option">-a</code>.</p><p>También debe ser extremadamente cuidadoso con servicios
        de conexión inversa como el ident inverso de
        <span class="application">TCP Wrapper</span>, que puede recibir ataques
        directos.  No se suele usar el ident inverso de
        <span class="application">TCP Wrapper</span> por esa misma
        razón.</p><p>Es una muy buena idea proteger los servicios internos
        de acceso externo protegiéndolos vía con un cortafuegos
        en los routers de frontera.  La idea es prevenir ataques de
        saturación desde el exterior de la LAN, y no tanto para
        proteger servicios internos de compromisos
        <code class="systemitem">root</code> basados en red.
        Configure siempre un cortafuegos exclusivo, esto es,
        <span class="quote">&#8220;<span class="quote">restringir todo <span class="emphasis"><em>menos</em></span> los puertos
        A, B, C, D y M-Z</span>&#8221;</span>.  De esta manera restringirá
        todos sus puertos con números bajos excepto ciertos
        servicios específicos como
        <span class="application">named</span> (si es el servidor primario de
        una zona), <span class="application">ntalkd</span>,
        <span class="application">sendmail</span>, y otros servicios accesibles
        desde Internet.  Si configura el cortafuegos de la otra
        manera (como un cortafuegos inclusivo o permisivo), tiene grandes
        posibilidades de que olvide <span class="quote">&#8220;<span class="quote">cerrar</span>&#8221;</span> un
        par de servicios, o de que agregue un nuevo servicio interno y
        olvide actualizar el cortafuegos.  Puede incluso abrir el rango
        de números de puerto altos en el cortafuegos para permitir
        operaciones de tipo permisivo sin comprometer sus puertos
        bajos.  Recuerde también que FreeBSD le permite controlar
        el rango de números de puerto utilizados para asignación
        dinámica a través de las numerosas
        <code class="varname">net.inet.ip.portrange</code> de
        <code class="command">sysctl</code>
        (<code class="command">sysctl -a | fgrep portrange</code>), lo cual
        también facilita la complejidad de la configuración
        de su cortafuegos.  Por ejemplo, puede utilizar un rango normal
        primero/último de 4000 ó 5000, y un rango de puerto
        alto de 49152 a 65535; bloquée todo por debajo de
        4000 (excepto para ciertos puertos específicos
        accesibles desde Internet, por supuesto).</p><a id="idp73238608" class="indexterm"></a><p>Otro ataque DoS común es llamado ataque
        <span class="quote">&#8220;<span class="quote">springboard</span>&#8221;</span>: atacar un servidor de forma que
        genere respuestas que lo sobrecarguen, sobrecarguen la red local
        o alguna otra máquina.  Los ataques más
        comunes de este tipo son los
        <span class="emphasis"><em>ataques ICMP ping broadcast</em></span>.
        El atacante falsifica paquetes ping enviados a la dirección
        broadcast de su LAN simulando que la dirección IP origen
        es la de la máquina que desean atacar.  Si sus routers
        de frontera no están configurados para lidiar con pings a
        direcciones de broadcast su LAN termina generando suficientes
        respuestas a la dirección origen falsificada como para saturar
        a la víctima, especialmente cuando el atacante utiliza
        el mismo truco en varias docenas de direcciones broadcast en
        varias docenas de redes diferentes a la vez.  Se han medido
        ataques de broadcast de más de ciento veinte megabits.
        Un segundo tipo de ataque <span class="quote">&#8220;<span class="quote">springboard</span>&#8221;</span> bastante
        común se da contra el sistema de informe de error de ICMP.
        Un atacante puede saturar la conexión entrante de red de un
        servidor mediante la construcción de paquetes que generen
        respuestas de error ICMP, provocando que el servidor sature su
        conexión saliente de red con respuestas ICMP.  Este tipo
        de ataque también puede tumbar el servidor agotando sus
        <span class="quote">&#8220;<span class="quote">mbufs</span>&#8221;</span>, especialmente si el servidor no puede
        drenar lo suficientemente rápido las respuestas ICMP que
        genera.  El kernel de FreeBSD tiene una opción de
        compilación llamada <code class="option">ICMP_BANDLIM</code>,
        que limita la efectividad de este tipo de ataques.
        La última gran categoría de ataques
        <span class="quote">&#8220;<span class="quote">springboard</span>&#8221;</span> está relacionada con
        ciertos servicios de <span class="application">inetd</span>, como
        el servicio de eco udp.  El atacante simplemente imita un paquete
        UDP con el puerdo de eco del servidor A como dirección de
        origen, y el puerto eco del servidor B como dirección de
        destino, estando ambos servidores en la misma LAN.  Un atacante
        puede sobrecargar ambos servidores y la propia LAN inyectando
        simplemente un par de paquetes.  Existen problemas similares
        con el puerto
        <span class="application">chargen</span>.  Un administrador de sistemas
        competente apagará todos estos servicios internos de
        verificación de inetd.</p><p>Los ataques con paquetes falsificados pueden utilizarse
        también para sobrecargar la caché de rutas del kernel.
        Consulte los parámetros de <code class="command">sysctl</code>
        <code class="varname">net.inet.ip.rtexpire</code>,
        <code class="varname">rtminexpire</code>, y
        <code class="varname">rtmaxcache</code>.
        Un ataque de paquetes falsificados que utiliza una dirección
        IP origen aleatoria provocará que el kernel genere una
        ruta temporal en caché en su tabla de rutas, visible con
        <code class="command">netstat -rna | fgrep W3</code>.  Estas rutas
        suelen expiran en 1600 segundos más o menos.  Si el
        kernel detecta que la tabla de rutas en caché es ya
        demasiado grande reducirá dinámicamente
        <code class="varname">rtexpire</code>, pero nunca la reducirá a un
        valor que sea menor que <code class="varname">rtminexpire</code>.
        Esto nos presenta dos problemas:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>El kernel no reacciona con suficiente rapidez cuando
            un servidor ligeramente cargado es atacado.</p></li><li class="listitem"><p>El <code class="varname">rtminexpire</code> no es lo suficientemente
            bajo para que el kernel sobreviva a un ataque sostenido.</p></li></ol></div><p>Si sus servidores están conectados a Internet mediante
        mediante una línea T3 o superior puede ser prudente corregir
        manualmente
        <code class="varname">rtexpire</code> y <code class="varname">rtminexpire</code>
        por medio de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  Nunca ponga ambos parámetros
        a cero (a menos que desée estrellar la máquina).
        Configurar ambos parámetros a 2 segundos debería
        bastar para proteger de ataques la tabla de rutas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73250256"></a>14.3.9. Otros aspectos del acceso con Kerberos y SSH</h3></div></div></div><a id="idp73250896" class="indexterm"></a><a id="idp73251536" class="indexterm"></a><p>Existen un par de detalles con respecto a
        Kerberos y ssh que debe analizar sy pretende usarlos.
        Kerberos V es un excelente protocolo de
        protocolo de autentificación, pero hay errores en la
        versión kerberizada de <span class="application">telnet</span>
        y <span class="application">rlogin</span> que las hacen
        inapropiadas para gestionar flujos binarios.
        Ademé Kerberos no cifra por defecto una
        sesión a menos que utilice la opción
        <code class="option">-x</code>.  <span class="application">ssh</span> cifra todo
        por defecto.</p><p>ssh funciona bastante bien en todos los casos, con la sola
        salvedad de que por defecto reenvía llaves de cifrado.
        Esto significa que si usted tiene una estación de trabajo
        segura, que contiene llaves que le dan acceso al resto del sistema,
        y hace ssh a una máquina insegura, sus llaves se pueden
        utilizar.   Las llaves en sí no se exponen, pero ssh
        crea un puerto de reenvío durante el login, y si un
        atacante ha comprometido el <code class="systemitem">root</code>
        de la máquina insegura, puede utilizar ese puerto
        para usar sus llaves y obtener acceso a cualquier otra
        máquina que sus llaves abran.</p><p>Le recomendamos que, siempre que sea posible, use ssh
        combinado con Kerberos en los login de su personal de
        administración.
        para logins de staff.  Puede compilar
        <span class="application">ssh</span> con soporte de Kerberos.
        Esto reducirá su dependencia de llaves ssh expuestas,
        al mismo tiempo que protege las contraseñas vía
        Kerberos.  Las llaves ssh deben usarse sólamente para
        tareas automáticas desde máquinas seguras
        (algo que Kerberos no hace por incompatibilidad).  Recomendamos
        también que desactive el reenvío de llaves
        en la configuración de ssh, o que use la
        opción <code class="literal">from=IP/DOMAIN</code> que ssh incluye
        en <code class="filename">authorized_keys</code>; así la llave
        sólo podrá ser utilizada por entidades que se
        validen desde máquinas
        específicas.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="crypt"></a>14.4. DES, MD5 y Crypt</h2></div><div><span class="authorgroup">Secciones reescritas y actualizadas por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div></div></div><a id="idp73267536" class="indexterm"></a><a id="idp73268688" class="indexterm"></a><a id="idp73269200" class="indexterm"></a><a id="idp73269840" class="indexterm"></a><p>Cada usuario de un sistema <span class="trademark">UNIX</span>® tiene una contraseña
      asociada a su cuenta.  Parece obvio que estas contraseñas
      sólo deben ser conocidas por el usuario y por el sistema
      operativo.  Para que estas contraseñas permanezcan en secreto
      se cifran con lo que se conoce como un
      <span class="quote">&#8220;<span class="quote">hash de una pasada</span>&#8221;</span>, esto es, sólo pueden ser
      fácilmente cifradas pero no descifradas.  En otras palabras,
      lo que acabamos de decir es tan obvio que ni siguiera es verdad:
      el propio sistema operativo no sabe cuál es
      <span class="emphasis"><em>realmente</em></span> la contraseña.
      Lo único que conoce es la versión
      <span class="emphasis"><em>cifrada</em></span> de la contrasenña.
      La única manera de obtener la
      contraseña en <span class="quote">&#8220;<span class="quote">texto plano</span>&#8221;</span> es por medio
      de una búsqueda de fuerza bruta en el espacio de
      contraseñas posibles.</p><p>Por desgracia la única manera segura de cifrar
      contraseñas cuando <span class="trademark">UNIX</span>® empezó a hacerlo estaba
      basada en DES, (<span class="quote">&#8220;<span class="quote">Data Encryption Standard</span>&#8221;</span>,
      <span class="quote">&#8220;<span class="quote">estándar de cifrado de datos</span>&#8221;</span>).
      Esto no era un gran problema para usuarios residentes en los EEUU,
      pero el código fuente de FreeBSD no se podía exportar desde
      los EEUU, así que FreeBSD hubo de buscar una forma de complir
      las leyes de EEUU y al mismo tiempo mantener la compatibilidad con
      otras variantes de <span class="trademark">UNIX</span>® que
      que todavía utilizaban DES.</p><p>La solución fué dividir las bibliotecas de cifrado
      para que los usuarios de EEUU pudieran instalar las bibliotecas DES
      pero los usuarios del resto del mundo tuvieran un método
      de cifrado que pudiera ser exportado.  Así es como FreeBSD
      comenzó a usar MD5 como su método de cifrado por
      defecto.  MD5 se considera más seguro que DES, así
      que se mantiene la opción de poder instalar DES por motivos
      de compatibilidad.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73275344"></a>14.4.1. Cómo reconocer su mecanismo de cifrado</h3></div></div></div><p>En versiones anteriores a FreeBSD 4.4
        <code class="filename">libcrypt.a</code> era un enlace
        simbólico que apuntaba a la biblioteca que se usaba para el
        cifrado.  En FreeBSD 4.4 se cambió
        <code class="filename">libcrypt.a</code> para ofrecer una biblioteca hash
        configurable de validación de contraseñas.
        Actualmente la biblioteca permite funciones hash DES, MD5 y
        Blowfish.  FreeBSD utiliza por defecto MD5 para cifrar
        contraseñas.</p><p>Es muy sencillo identificar qué método usa FreeBSD
        para cifrar.  Una forma es examinando las contraseñas
        cifradas en <code class="filename">/etc/master.passwd</code>.
        Las contraseñas cifradas con el hash MD5 son más
        largas que las cifradas con el hash DES, y también
        comienzan por los caracteres
        <code class="literal">$1$</code>.  Las contraseñas
        que comienzan por <code class="literal">$2a$</code> están
        cifradas con la función hash de Blowfish.  Las
        contraseñas DES no tienen ninguna
        característica particular, pero son más cortas que
        las contraseñas MD5, y están codificadas en un
        alfabeto de 64 caracteres que no incluye el caracter
        <code class="literal">$</code>; es por esto que una cadena
        relativamente corta que comience con un signo de
        dólar es muy probablemente una contraseña
        DES.</p><p>El formato de contraseña a usar en nuevas
        contraseñas se define en
        <code class="filename">/etc/login.conf</code> mediante
        <code class="literal">passwd_format</code>, pudiendo tener los valores
        <code class="literal">des</code>, <code class="literal">md5</code> o
        <code class="literal">blf</code>. Consulte la página de manual
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> para más información.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="one-time-passwords"></a>14.5. Contraseñas de un solo uso</h2></div></div></div><a id="idp73283280" class="indexterm"></a><a id="idp73283792" class="indexterm"></a><p>S/Key es un esquema de contraseña de un solo uso
      basado en una función de hash de sentido único.
      FreeBSD utiliza el
      hash MD4 por compatibilidad, pero otros sistemas usan
      MD5 y DES-MAC.  S/Key forma parte del sistema base de FreeBSD
      desde la versión 1.1.5 y se usa también en
      un número creciente de otros sistemas operativos.  S/Key
      es una marca registrada de Bell Communications Research, Inc.</p><p>A partir de la versión 5.0 de FreeBSD S/Key fué
      reemplazado por su equivalente OPIE (<span class="quote">&#8220;<span class="quote">One-time Passwords
      In Everything</span>&#8221;</span>, <span class="quote">&#8220;<span class="quote">Contraseñas de un solo
      uso para todo</span>&#8221;</span>).  OPIE usa por defecto hash MD5.</p><p>En esta sección se explican tres tipos de
      contraseña.  La primera es la típica
      contraseña al estilo <span class="trademark">UNIX</span>® o Kerberos;  las llamaremos
      <span class="quote">&#8220;<span class="quote">contraseñas <span class="trademark">UNIX</span>®</span>&#8221;</span>.
      El segundo tipo es la contraseña de un solo uso,
      que se genera con el programa <code class="command">key</code> de S/Key o
      con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opiekey&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">opiekey</span>(1)</span></a> de OPIE, y que aceptan los programas
      <code class="command">keyinit</code>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opiepasswd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">opiepasswd</span>(1)</span></a>, y el prompt de
      login; llamaremos a esta una
      <span class="quote">&#8220;<span class="quote">contraseña de un solo uso</span>&#8221;</span>.
      El último tipo de contraseña es la contraseña
      secreta que le da usted a los programas
      <code class="command">key</code>/<code class="command">opiekey</code> (y a veces
      <code class="command">keyinit</code>/<code class="command">opiepasswd</code>), que
      se usa para generar contraseñas de un solo uso;
      a estas las llamaremos <span class="quote">&#8220;<span class="quote">contraseñas secretas</span>&#8221;</span>,
      o simplemente <span class="quote">&#8220;<span class="quote">contraseña</span>&#8221;</span>.</p><p>La contraseña secreta no tiene nada que ver con su
      contraseña <span class="trademark">UNIX</span>®; pueden ser la misma, pero no es
      recomendable.  Las contraseñas secretas S/Key y OPIE no
      están limitadas a 8 caracteres como las contraseñas
      <span class="trademark">UNIX</span>® antiguas<a href="#ftn.idp73306960" class="footnote" id="idp73306960"><sup class="footnote">[8]</sup></a>, pueden ser tan largas como se quiera.
      Las contraseñas con frases de seis o siete palabras muy largas
      son bastante comunes.  El funcionamiento del sistema S/Key o el
      OPIE es en gran parte completamente independiente del sistema de
      contraseñas <span class="trademark">UNIX</span>®.</p><p>Además de la contraseña hay dos datos que son
      importantes para S/Key y OPIE.  Uno es lo que se conoce como
      <span class="quote">&#8220;<span class="quote">semilla</span>&#8221;</span> o <span class="quote">&#8220;<span class="quote">llave</span>&#8221;</span>, que consiste en dos
      letras y cinco dígitos. El otro dato importante se llama
      la <span class="quote">&#8220;<span class="quote">cuenta de iteración</span>&#8221;</span>, que es un número
      entre 1 y 100.  S/Key genera la contraseña de un solo
      uso concatenando la semilla y la contraseña secreta,
       aplica el hash MD4/MD5 tantas veces como especifique la cuenta de
      iteración y convierte el resultado en seis palabras
      cortas en inglés.  Estas seis palabras en inglés
      son su contraseña de un solo uso.  El sistema de
      autentificación (principalmente PAM) mantiene un registro del
      uso de contraseñas de un solo uso, y el usuario
      puede validarse si el hash de la contraseña que proporciona
      es igual a la contraseña previa.  Como se utiliza un
      hash de sentido único es imposible generar futuras
      contraseñas de un solo uso si una contraseña
      que ya ha sido usada fuera capturada;
      la cuenta de iteración se reduce después de cada login
      correcto para sincronizar al usuario con el programa login.
      Cuanto la iteración llega a 1, S/Key y OPIE deben
      reinicializar.</p><p>Hay tres programas involucrados en cada uno de estos
      sistemas.  Los programas <code class="command">key</code> y
      <code class="command">opiekey</code> aceptan una cuenta iterativa,
      una semilla y una contraseña secreta, y generan
      una contraseña de un solo uso o una lista consecutiva
      de contraseñas de un solo uso.  Los programas
      <code class="command">keyinit</code> y <code class="command">opiepasswd</code>
      se usan respectivamente para inicializar S/Key y OPIE,
      y para cambiar contraseñas, cuentas iterativas o
      semillas; toman ya sea una frase secreta, o una cuenta
      iterativa y una contraseña de un solo uso.  Los
      programas <code class="command">keyinfo</code> y <code class="command">opieinfo</code>
      examinan los ficheros de credenciales correspondientes
      (<code class="filename">/etc/skeykeys</code> o
      <code class="filename">/etc/opiekeys</code>) e imprimen la cuenta
      iterativa y semilla del usuario invocante.</p><p>Explicaremos cuatro tipos de operaciones diferentes.
      La primera es usar <code class="command">keyinit</code> o
      <code class="command">opiepasswd</code> a través de una conexión
      segura para configurar contraseñas de un solo uso por
      primera vez, o para cambiar su contraseña o semilla.
      La segunda operación es utilizar <code class="command">keyinit</code>
      o <code class="command">opiepasswd</code> a través de una conexión
      insegura, además de usar <code class="command">key</code> u
      <code class="command">opiekey</code> sobre una conexión segura para
      hacer lo mismo.  La tercera es usar
      <code class="command">key</code>/<code class="command">opiekey</code> para conectarse a
      través de una conexión insegura.  La cuarta es usar
      <code class="command">opiekey</code> o <code class="command">key</code> para generar
      numerosas llaves, que pueden ser escritas para llevarlas con usted
      al ir a algún lugar desde el que no se puedan hacer conexiones
      seguras a ningún sitio.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73317584"></a>14.5.1. Inicialización de conexiones seguras</h3></div></div></div><p>Para inicializar S/Key por primera vez cambie su contraseña,
        o cambie su semilla mientras está conectado a través de
        una conexión segura (esto es, en la consola de una
        máquina o vía <span class="application">ssh</span>); use
        <code class="command">keyinit</code> sin ningún parámetro:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>keyinit</code></strong>
Adding unfurl:
Reminder - Only use this method if you are directly connected.
If you are using telnet or rlogin exit with no password and use keyinit -s.
Enter secret password:
Again secret password:

ID unfurl s/key is 99 to17757
DEFY CLUB PRO NASH LACE SOFT</pre><p>En OPIE se utiliza <code class="command">opiepasswd</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd -c</code></strong>
[grimreaper] ~ $ opiepasswd -f -c
Adding unfurl:
Only use this method from the console; NEVER from remote. If you are using
telnet, xterm, or a dial-in, type ^C now or exit with no password.
Then run opiepasswd without the -c parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:
ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED
</pre><p>En <code class="prompt">Enter new secret pass phrase:</code> o
        <code class="prompt">Enter secret password:</code>, debe introducir
        una contraseña o frase.  Recuerde que no es la
        contraseña que utilizará para entrar, se usará
        para generar sus llaves de un solo uso.  La línea
        <span class="quote">&#8220;<span class="quote">ID</span>&#8221;</span> da los parámetros de su instancia
        en particular: su nombre de login, la cuenta iterativa y
        semilla.  En el momento del login el sistema recordará estos
        parámetros y los presentará de nuevo para que
        no tenga que recordarlos.  La última línea proporciona
        las contraseéas de un solo uso que
        corresponden a esos parámetros y su contraseña
        secreta; si fuera a hacer login de manera inmediata,
        debería usar esta contraseña de una sola vez.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73323984"></a>14.5.2. Inicialización de conexiones inseguras</h3></div></div></div><p>Para inicializar o cambiar su contraseña secreta
        a través de una conexión insegura, necesitará
        tener alguna conexión segura a algún lugar
        donde pueda ejecutar <code class="command">key</code> u
        <code class="command">opiekey</code>; puede ser gracias a un accesorio de
        escritorio o en una <span class="trademark">Macintosh</span>®, o un prompt de shell en una
        máquina en la que confíe.  Necesitará
        también una cuenta iterativa (100 probablemente sea un
        buen valor), y puede usar su propia semilla, o usar una generada
        aleatoriamente.  Siguiendo con la conexión insegura
        (hacia la máquina que está inicializando), ejecute
        <code class="command">keyinit -s</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>keyinit -s</code></strong>
Updating unfurl:
Old key: to17758
Reminder you need the 6 English words from the key command.
Enter sequence count from 1 to 9999: <strong class="userinput"><code>100</code></strong>
Enter new key [default to17759]:
s/key 100 to 17759
s/key access password:
s/key access password:<strong class="userinput"><code>CURE MIKE BANE HIM RACY GORE</code></strong>
</pre><p>En OPIE debe usar <code class="command">opiepasswd</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd</code></strong>

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY
</pre><p>Para aceptar la semilla por defecto (la que
        el programa <code class="command">keyinit</code> llama
        <code class="literal">key</code>, <span class="quote">&#8220;<span class="quote">llave</span>&#8221;</span>, para terminar de
        complicar las cosas), pulse <span class="keycap"><strong>Enter</strong></span>.
        Antes de introducir una una contraseña de acceso
        cambie a su conexión o accesorio de escritorio S/Key y
        dele el mismo parámetro:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key 100 to17759</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
CURE MIKE BANE HIM RACY GORE</pre><p>O para OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT
</pre><p>Vuelva a la conexión insegura y copie la
        contraseña de un solo uso generada al programa
        que quiera usar.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73339728"></a>14.5.3. Generación una sola contraseña de un solo
        uso</h3></div></div></div><p>Una vez que ha inicializado S/Key u OPIE, cuando haga login
        verá un <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> parecido al siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet ejemplo.com</code></strong>
Trying 10.0.0.1...
Connected to ejemplo.com
Escape character is '^]'.

FreeBSD/i386 (ejemplo.com) (ttypa)

login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
s/key 97 fw13894
Password: </pre><p>O, en el caso de OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet ejemplo.com</code></strong>
Trying 10.0.0.1...
Connected to ejemplo.com
Escape character is '^]'.

FreeBSD/i386 (ejemplo.com) (ttypa)

login: <strong class="userinput"><code>&lt;nombre_de_usuario&gt;</code></strong>
otp-md5 498 gr4269 ext
Password: </pre><p>Como una nota aparte, el <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de S/Key y OPIE
        cuenta con una opción útil (que no se muestra
        aquí): si pulsa <span class="keycap"><strong>Enter</strong></span> en el
        <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de contraseña el
        <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> activará el eco para que pueda ver
        en pantalla lo que teclea.  Esto puede ser extremadamente
        útil si está tecleando una contraseña a
        a mano o desde un la lista impresa.</p><a id="idp73358928" class="indexterm"></a><a id="idp73359440" class="indexterm"></a><a id="idp73359952" class="indexterm"></a><p>Ahora necesitará generar su contraseña de un
        sólo uso para responder a este <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de
        login.  Debe hacerlo en un sistema digno de confianza y en el que
        pueda ejecutar <code class="command">key</code> u <code class="command">opiekey</code>.
        Existen versiones DOS, <span class="trademark">Windows</span>® y también para <span class="trademark">Mac OS</span>®.
        Ambos usarán la cuenta iterativa y la semilla como opciones
        de línea de órdenes. Puede cortarlas y pegarlas desde el
        <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de login de la máquina en la
        que se está identificando.</p><p>En el sistema de confianza:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key 97 fw13894</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
WELD LIP ACTS ENDS ME HAAG</pre><p>Con OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>Ahora que tiene su contraseña de un solo uso puede
        proceder con el login:</p><pre class="screen">login: <strong class="userinput"><code>&lt;nombre_de_usuario&gt;</code></strong>
s/key 97 fw13894
Password: <strong class="userinput"><code>&lt;Enter para activar el eco&gt;</code></strong>
s/key 97 fw13894
Password [echo on]: WELD LIP ACTS ENDS ME HAAG
Last login: Tue Mar 21 11:56:41 from 10.0.0.2 ... </pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73376464"></a>14.5.4. Generación de múltiples contraseñas
        de un solo uso</h3></div></div></div><p>A veces usted hay que ir a lugares donde no hay
        acceso a una máquina de fiar o a una conexión
        segura.  En estos casos, puede utilizar
        <code class="command">key</code> y <code class="command">opiekey</code> para
        generar previamente numerosas contraseñas de un solo uso
        para, una vez impresas, llevárselas a donde hagan falta.
        Por ejemplo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key -n 5 30 zz99999</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
26: SODA RUDE LEA LIND BUDD SILT
27: JILT SPY DUTY GLOW COWL ROT
28: THEM OW COLA RUNT BONG SCOT
29: COT MASH BARR BRIM NAN FLAG
30: CAN KNEE CAST NAME FOLK BILK</pre><p>O para OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey -n 5 30 zz99999</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</pre><p>El <code class="option">-n 5</code> pide cinco llaves en secuencia, la
        opción <code class="option">30</code> especifica que ese debe ser el
        último número de iteración.  Observe que se
        imprimen en el orden <span class="emphasis"><em>inverso</em></span> de uso.
        Si es realmente paranoico escriba los resultados a mano; si no,
        puede enviar la salida a <code class="command">lpr</code>.  Observe que
        cada línea muestra la cuenta iterativa y la
        contraseña de un solo uso; puede ir tachando las
        contraseñas según las vaya utilizando.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73387984"></a>14.5.5. Restricción del uso de contraseñas <span class="trademark">UNIX</span>®</h3></div></div></div><p>S/Key puede implantar restricciones en el uso de contraseñas
        <span class="trademark">UNIX</span>® basándose en el nombre de equipo, nombre de usuario,
        puerto de terminal o dirección IP de una sesión de
        login.  Consulte el fichero de configuración
        <code class="filename">/etc/skey.access</code>. La página de manual
        de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=skey.access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">skey.access</span>(5)</span></a> contiene más información sobre el
        formato del fichero y detalla también algunas precauciones
        de seguridad que hay que tener en cuenta antes de basar nuestra
        seguridad en este fichero.</p><p>Si <code class="filename">/etc/skey.access</code> no existiera
        (por defecto es así en sistemas FreeBSD 4.X) todos los
        usuarios podrán disponer de contraseñas <span class="trademark">UNIX</span>®.
        Si el fichero existe se exigirá a todos los usuarios
        el uso de S/Key, a menos que se configure de otro modo en
        <code class="filename">skey.access</code>.  En todos los casos las
        contraseñas <span class="trademark">UNIX</span>® son admiten en consola.</p><p>Aquí hay un ejemplo del fichero de configuración
        <code class="filename">skey.access</code> que muestra las tres formas más
        comunes de configuración:</p><pre class="programlisting">permit internet 192.168.0.0 255.255.0.0
permit user fnord
permit port ttyd0</pre><p>La primera línea (<code class="literal">permit internet</code>)
        permite a usuarios cuyas direcciones IP origen (las cuales son
        vulnerables a una falsificación) concuerden con los valores
        y máscara especificados utilizar contraseñas <span class="trademark">UNIX</span>®.
        Esto no debe usarse como mecanismo de seguridad, sino como
        medio de recordarle a los usuarios autorizados que están
        usando una red insegura y necesitan utilizar S/Key para
        la validación.</p><p>La segunda línea (<code class="literal">permit user</code>)
        permite al nombre de usuario especificado, en este caso
        <code class="systemitem">fnord</code>, utilizar contraseñas <span class="trademark">UNIX</span>®
        en cualquier momento.  Hablando en general, esto solo debe ser
        usado por gente que no puede usar el programa <code class="command">key</code>,
        como aquellos con terminales tontas o refractarios al
        aprendizaje.</p><p>La tercera línea (<code class="literal">permit port</code>)
        permite a todos los usuarios validados en la línea de
        terminal especificada utilizar contraseñas <span class="trademark">UNIX</span>®;
        esto puede usarse para usuarios que se conectan mediante
        <span class="quote">&#8220;<span class="quote">dial-ups</span>&#8221;</span>.</p><p>OPIE puede restringir el uso de contraseñas <span class="trademark">UNIX</span>®
        basándose en la dirección IP de una sesión
        de login igual que lo haría S/Key.  El fichero que gestiona
        esto es <code class="filename">/etc/opieaccess</code>, que está
        incluído por defecto en sistemas FreeBSD 5.0 o posteriores.
        Revise <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opieaccess&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">opieaccess</span>(5)</span></a> para más información sobre
        este fichero y qué consideraciones de seguridad debe tener
        presentes a la hora de usarlo.</p><p>Veamos un ejemplo de <code class="filename">opieaccess</code>:</p><pre class="programlisting">permit 192.168.0.0 255.255.0.0</pre><p>Esta línea permite a usuarios cuya dirección
        IP de origen (vulnerable a falsificación) concuerde
        con los valores y máscara especificados, utilizar
        contraseñas <span class="trademark">UNIX</span>® en cualquier momento.</p><p>Si no concuerda ninguna regla en <code class="filename">opieaccess</code>
        se niegan por defecto los logins no-OPIE.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tcpwrappers"></a>14.6. TCP Wrappers</h2></div><div><span class="authorgroup">Escrito por: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp73407696" class="indexterm"></a><p>Cualquiera que esté familiarizado con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>
      probablemente haya oído hablar de
      <acronym class="acronym">TCP</acronym> Wrappers, pero poca gente parece comprender
      completamente su utilidad en un entorno de red.  Parece que
      todos quieren instalar un cortafuegos para manejar conexiones
      de red.  Aunque un cortafuegos tiene una amplia variedad de
      usos hay cosas que un cortafuegos no es capaz de gestionar,
      como el envío de texto como respuesta al creador de la
      conexión.  El software <acronym class="acronym">TCP</acronym> hace esto
      y más.  En las siguientes secciones se explicarán
      unas cuantas opciones de
      <acronym class="acronym">TCP</acronym> Wrappers y, cuando sea necesario, se
      mostrarán ejemplos de configuraciones.</p><p>El software <acronym class="acronym">TCP</acronym> Wrappers extiende
      las habilidades de <code class="command">inetd</code> para ofrecer
      soporte para cada servidor dæmon bajo su control.
      Utilizando este método es posible proveer soporte de
      logs, devolver mensajes a conexiones, permitir a un dæmon
      aceptar solamente conexiones internas, etc.  Aunque algunas de estas
      opciones pueden conseguirse gracias a un cortafuegos, no sólo
      añadirá una capa extra de seguridad, sino que irá
      más allá del nivel de control ue un cortafuegos
      puede ofrecerle.</p><p>Las brillantes capacidades de <acronym class="acronym">TCP</acronym> Wrappers
      no deben considerarse una alternativa a un buen cortafuegos.
      <acronym class="acronym">TCP</acronym> Wrappers puede usarse conjuntamente con un
      cortafuegos u otro sistema de de seguridad, pues ofrece una capa
      extra de protección para el sistema.</p><p>Ya que es una extensión de la configuración
      de <code class="command">inetd</code>, se da por hecho que el lector ha
      leído la sección
      <a class="link" href="#network-inetd" title="29.14. El &#8220;Superservidor&#8221; inetd">configuración de inetd</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Aunque los programas ejecutados por <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> no son
        exactamente <span class="quote">&#8220;<span class="quote">dæmons</span>&#8221;</span> tradicionalmente han
        recibido ese nombre.  Dæmon es, por tanto, el término
        que usaremos en esta sección.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73420240"></a>14.6.1. Configuración inicial</h3></div></div></div><p>El único requisito para usar
        <acronym class="acronym">TCP</acronym> Wrappers en FreeBSD es que el servidor
        <code class="command">inetd</code> se inicie desde
        <code class="filename">rc.conf</code> con la opción
        <code class="option">-Ww</code>  (es la configuración
        por defecto).  Por descontado, se presupone que
        <code class="filename">/etc/hosts.allow</code> estará correctamente
        configurado, pero <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> enviará mensajes
        a los logs del sistema si no es así.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A diferencia de otras implementaciones de <acronym class="acronym">TCP</acronym>
          Wrappers, se ha dejado de usar
          <code class="filename">hosts.deny</code>.  Todas las opciones de
          configuración deben ir en
          <code class="filename">/etc/hosts.allow</code>.</p></div><p>En la configuración más simple las
        políticas de conexión de dæmons están
        configuradas ya sea a permitir o bloquear, dependiendo de
        las opciones en <code class="filename">/etc/hosts.allow</code>.
        La configuración por defecto en FreeBSD consiste en
        permitir una conexión a cada dæmon iniciado por
        <code class="command">inetd</code>.  Es posible modificar esta
        configuración, pero explicaremos cómo hacerlo
        después de exponer la configuración
        básica.</p><p>La configuración básica tiene la estructura
        <code class="literal">dæmon : dirección : acción</code>,
        donde <code class="literal">dæmon</code> es el nombre de dæmon
        que inicia <code class="command">inetd</code>.  La
        <code class="literal">dirección</code> puede ser un nombre
        de equipo válido, una dirección IP o
        IPv6 encerrada en corchetes ([ ]).  El campo
        acción puede ser permitir o denegar para el
        dar el acceso apropiado.  Tenga presente que la
        configuración funciona en base a la primera
        regla cuya semántica concuerde;
        esto significa que el fichero de configuración se
        lee en orden ascendente hasta que concuerde una regla.
        Cuando se encuentra una concordancia se aplica la regla
        y el proceso se detendrá.</p><p>Existen muchas otras opciones pero estas se
        explican en una sección posterior.  Una línea
        de configuración simple puede generarse mediante datos
        así de simples.  Por ejemplo, para permitir conexiones
        <acronym class="acronym">POP</acronym>3 mediante el dæmon
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/qpopper/pkg-descr">mail/qpopper</a>, añada
        las siguientes líneas a
        <code class="filename">hosts.allow</code>:</p><pre class="programlisting"># This line is required for POP3 connections:
qpopper : ALL : allow</pre><p>Despues de añadir esta línea tendrá que
        reiniciar <code class="command">inetd</code>.  Use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> o use el
        parámetro <em class="parameter"><code>restart</code></em> de
        <code class="filename">/etc/rc.d/inetd</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73437776"></a>14.6.2. Configuración avanzada</h3></div></div></div><p>Las opciones avanzadas de <acronym class="acronym">TCP</acronym> Wrappers
        le permiten un mayor control sobre la gestión de
	conexiones.  En algunos casos puede convenir el enío de
	un comentario a ciertos equipos o conexiones de dæmons.
        En otros casos, quizás se deba registrar una entrada en
        un log o enviar un correo al administrador.  Otro tipo de
        situaciones pueden requerir el uso de un servicio
        solamente para conexiones locales.  Todo esto es posible gracias
        al uso de unas opciones de configuración conocidas
        como <code class="literal">comodines</code>, caracteres de expansión
        y ejecución de órdenes externas.  Las siguientes dos
        secciones intentarán cubrir estas situaciones.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73439568"></a>14.6.2.1. Órdenes externas</h4></div></div></div><p>Imaginemos una situación en la que una
          conexión debe ser denegada pero se debe mandar un motivo
          a quien intentó establecer esa conexión.
          ?Cómo? Mediante la opción
          <code class="option">twist</code>.  Ante un intento de conexión se
          invoca a <code class="option">twist</code>, que ejecuta una orden de shell
          o un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>.  Tiene un ejemplo en el fichero
          <code class="filename">hosts.allow</code>:</p><pre class="programlisting"># The rest of the daemons are protected.
ALL : ALL \
        : severity auth.info \
        : twist /bin/echo "No se permite utilizar %d desde %h."</pre><p>Este ejemplo muestra que el mensaje,
          <span class="quote">&#8220;<span class="quote">No se permite utilizar <code class="literal">dæmon</code>
          desde <code class="literal">nombre de equipo</code>.</span>&#8221;</span> se
          enviará en el caso de cualquier dæmon no configurado
          previamente en el fichero de acceso.
          Esto es extremadamente útil para enviar una respuesta
          al creador de la conexión justo después de
          que la conexión establecida es rechazada.  Observe que
          cualquier mensaje que se desee enviar <span class="emphasis"><em>debe ir</em></span>
          entre comillas <code class="literal">"</code>; esta regla no tiene
          excepciones.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Es posible lanzar un ataque de denegación
            de servicio al servidor si un atacante o grupo de
            atacantes pueden llegar a sobrecargar estos dæmons
            con peticiones de conexión.</p></div><p>Otra posibilidad en estos casos es usar la opción
          <code class="option">spawn</code>.  Igual que <code class="option">twist</code>,
          <code class="option">spawn</code> niega implícitamente la
          conexión, y puede usarse para ejecutar órdenes de
          shell externos o <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span>.  A diferencia de
          <code class="option">twist</code>, <code class="option">spawn</code> no
          enviará una respuesta al origen de la conexión.
          Veamos un ejemplo; observe la siguiente línea de
          configuración:</p><pre class="programlisting"># No permitimos conexiones desde ejemplo.com:
ALL : .ejemplo.com \
	: spawn (/bin/echo %a desde %h intento acceder a %d &gt;&gt; \
	  /var/log/connections.log) \
	: deny</pre><p>Esto denegará todos los intentos de conexión
          desde el dominio <code class="systemitem">*.ejemplo.com</code>;
          simultáneamente creará una entrada con
          el nombre del equipo, dirección <acronym class="acronym">IP</acronym>
          y el dæmon al que intentó conectarse al fichero
          <code class="filename">/var/log/connections.log</code>.</p><p>Además de la sustitución de caracteres ya
          expuesta más arriba (por ejemplo  %a) existen unas
          cuantas más.  Si quiere ver la lista completa consulte
          la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73476560"></a>14.6.2.2. Opciones comodín</h4></div></div></div><p>Hasta ahora se ha usado <code class="literal">ALL</code> en todos
          los ejemplos, pero hay otras opciones interesantes para
          extender un poco más la funcionalidad.  Por ejemplo,
          <code class="literal">ALL</code> puede usarse para concordar con cualquier
          instancia ya sea un dæmon, dominio o
          dirección <acronym class="acronym">IP</acronym>.  Otro comodín
          es <code class="literal">PARANOID</code>, que puede utilizarse para
          concordar con cualquier equipo que presente una
          dirección <acronym class="acronym">IP</acronym> que pueda estar
          falsificada.  En otras palabras, <code class="literal">paranoid</code>
          puede usarse para definir una acción a tomar
          siempre que tenga lugar una conexión desde una
          dirección  <acronym class="acronym">IP</acronym> que difiera de su
          nombre de equipo.  Quizás todo se vea más claro
	  con el siguiente ejemplo:</p><pre class="programlisting"># Bloquear peticiones posiblemente falsificadas a sendmail:
sendmail : PARANOID : deny</pre><p>En ese ejemplo todas las peticiones de conexión
          a <code class="command">sendmail</code> que tengan una
          dirección <acronym class="acronym">IP</acronym> que varíe
          de su nombre de equipo serán denegadas.</p><div xmlns="" class="caution"><h3 class="admontitle">Atención: </h3><p xmlns="http://www.w3.org/1999/xhtml">Utilizando <code class="literal">PARANOID</code> puede bloquear el
	    acceso a servidores si el cliente o el servidor
            tiene una configuración de
            <acronym class="acronym">DNS</acronym> incorrecta.  Recomendamos al
            administrador la máxima cautela en su uso.</p></div><p>Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> si quiere saber más
	  sobre los comodines y sus posibilidades de uso.</p><p>Si quiere que cualquiera de los ejemplos citados
	  funcione debe comentar la primera línea de
          <code class="filename">hosts.allow</code> (tal y como se dijo
          al principio de la sección.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerberosIV"></a>14.7. <span class="application">KerberosIV</span></h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mark</span> <span class="surname">Murray</span></span>. </span></div><div><span class="authorgroup">Basado en un texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mark</span> <span class="surname">Dapoz</span></span>. </span></div></div></div><p>Kerberos es un sistema/protocolo de red agregado que permite
      a los usuarios identificarse a través de los servicios de un
      servidor seguro.  Los servicios como login remoto, copia remota, copias
      de ficheros de un sistema a otro y otras tantas tareas arriesgadas
      pasan a ser considerablemente seguras y más controlables.</p><p>Las siguientes instrucciones pueden usarse como una guía
      para configurar Kerberos tal y como se distribuye con FreeBSD.  De todas
      maneras, debe consultar diversas páginas de manual para
      conocer todos los detalles.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73499472"></a>14.7.1. Instalación de <span class="application">KerberosIV</span></h3></div></div></div><a id="idp73500368" class="indexterm"></a><a id="idp73500880" class="indexterm"></a><p>Kerberos es un componente opcional de FreeBSD.  La manera
        más fácil de instalar este software es
        seleccionando la distribución <code class="literal">krb4</code> o
        <code class="literal">krb5</code> en <span class="application">sysinstall</span>
        durante la instalación inicial de FreeBSD.  Desde ahí
        instalará la implementación de Kerberos
        <span class="quote">&#8220;<span class="quote">eBones</span>&#8221;</span> (KerberosIV) o
        <span class="quote">&#8220;<span class="quote">Heimdal</span>&#8221;</span> (Kerberos5).
        Estas implementaciones se incluyen porque a que han sido
        desarrolladas fuera de EEUU y Canadá, lo que las
	convertía en accesibles para administradores de sistemas
	del resto del mundo durante la época restrictiva de control
        control de exportaciones de código
        criptográfico desde EEUU.</p><p>También puede instalar la implementación de
        Kerberos del MIT desde la colección de ports
        (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a>).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73505232"></a>14.7.2. Creación de la base de datos inicial</h3></div></div></div><p>Esto solo debe hacerse en el servidor Kerberos.  Lo primero
        es asegurarse de que no tiene bases de datos de Kerberos
        anteriores.  Entre al directorio <code class="filename">/etc/kerberosIV</code>
        y asegúrese de que solo estén los siguientes
	ficheros:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/kerberosIV</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ls</code></strong>
README		krb.conf        krb.realms</pre><p>Si existe cualquier otro fichero (como
        <code class="filename">principal.*</code>
        o <code class="filename">master_key</code>) utilice
        <code class="command">kdb_destroy</code> para destruir la base
        de datos antigua de Kerberos.  Si Kerberos no está
        funcionando simplemente borre los ficheros sobrantes.</p><p>Edite <code class="filename">krb.conf</code>
        y <code class="filename">krb.realms</code> para definir su dominio
        Kerberos.  En nuestro ejemplo el dominio será
	<code class="literal">EJEMPLO.COM</code> y el servidor es
        <code class="systemitem">grunt.ejemplo.com</code>.
        Editamos o creamos <code class="filename">krb.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.conf</code></strong>
EJEMPLO.COM
EJEMPLO.COM grunt.ejemplo.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</pre><p>Los demás dominios no deben estar forzosamente en la
        configuración.  Los hemos incluido como ejemplo de
	cómo puede hacerse que una máquina trabaje con
	múltiples dominios.  Si quiere mantener todo simple puede
	abstenerse de incluirlos.</p><p>La primera línea es el dominio en el que el
        sistema funcionará.  Las demás líneas
	contienen entradas dominio/equipo.  El primer componente de cada
        línea es un dominio y el segundo es un equipo de ese
        dominio, que actúa como
        <span class="quote">&#8220;<span class="quote">centro de distribución de llaves</span>&#8221;</span>.
        Las palabras <code class="literal">admin server</code> que siguen al
        nombre de equipo significan que ese equipo también
        ofrece un servidor de base da datos administrativo.
        Si quiere consultar una explicación más completa de
	estos términos consulte las páginas de manual de
        de Kerberos.</p><p>Ahora añadiremos
        <code class="systemitem">grunt.ejemplo.com</code> al dominio
        <code class="literal">EJEMPLO.COM</code> y también una entrada
        para poner todos los equipos en el dominio
        <code class="systemitem">.ejemplo.com</code> Kerberos
        <code class="literal">EJEMPLO.COM</code>.  Puede actualizar su
        <code class="filename">krb.realms</code> del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.realms</code></strong>
grunt.ejemplo.com EJEMPLO.COM
.ejemplo.com EJEMPLO.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</pre><p>Igual que en caso previo, no tiene por qué incluir
        los demás dominios.  Se han incluido para mostrar
	cómo puede usar una máquina en múltiples
	dominios.  Puede eliminarlos y simplificar la
	configuración.</p><p>La primera línea pone al sistema
        <span class="emphasis"><em>específico</em></span>
        en el dominio nombrado.  El resto de las líneas muestran
        cómo asignar por defecto sistemas de un subdominio
        a un dominio Kerberos.</p><p>Ya podemos crear la base de datos.  Solo se ejecuta en el
        servidor Kerberos (o centro de distribución de
        llaves).  Ejecute <code class="command">kdb_init</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_init</code></strong>
<code class="prompt">Realm name [default  ATHENA.MIT.EDU ]:</code> <strong class="userinput"><code>EJEMPLO.COM</code></strong>
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

<code class="prompt">Enter Kerberos master key:</code> </pre><p>Ahora tendremos que guardar la llave para que los servidores en
         la máquina local puedan recogerla.  Utilice
         <code class="command">kstash</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kstash</code></strong>

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered. BEWARE!</pre><p>Esto guarda la contraseña cifrada
        maestra en <code class="filename">/etc/kerberosIV/master_key</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73575248"></a>14.7.3. Puesta en marcha del sistema</h3></div></div></div><a id="idp73575888" class="indexterm"></a><p>Tendrá que añadir a la base de datos dos
        entradas en concreto para <span class="emphasis"><em>cada</em></span> sistema
	que vaya a usar Kerberos: <code class="literal">kpasswd</code> y
        <code class="literal">rcmd</code>.  Se hacen para cada sistema individualmente
        cada sistema, y el campo <span class="quote">&#8220;<span class="quote">instance</span>&#8221;</span> es el nombre
	individual del sistema.</p><p>Estos dæmons <span class="application">kpasswd</span> y
        <span class="application">rcmd</span> permiten a otros sistemas
        cambiar contraseñas de Kerberos y ejecutar órdenes
        como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a>.</p><p>Ahora vamos a añadir estas entradas:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>passwd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: passwd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- tecleo aleatorio
Verifying password

<code class="prompt">New Password:</code> &lt;---- tecleo aleatorio

<code class="prompt">Random password [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code> <strong class="userinput"><code>rcmd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code>

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>		&lt;---- tecleo aleatorio
Verifying password

<code class="prompt">New Password:</code>           &lt;---- tecleo aleatorio

<code class="prompt">Random password [y] ?</code>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>         &lt;---- si introduce datos nulos saldrá del programa</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73602512"></a>14.7.4. Creación del fichero del servidor</h3></div></div></div><p>Ahora tendremos que extraer todas las instancias que definen
        los servicios en cada máquina; para ello usaremos
        <code class="command">ext_srvtab</code>.  Esto creará un
        fichero que debe ser copiado o movido <span class="emphasis"><em>por medios
        seguros</em></span> al directorio
	<code class="filename">/etc/kerberosIV</code> de cada
	cliente Kerberos.  Este fichero debe existir en todos los
	servidores y clientes dada su importancia clave para el
	funcionamiento de Kerberos.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ext_srvtab grunt</code></strong>
<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered. BEWARE!
Generating 'grunt-new-srvtab'....</pre><p>Esta orden solo genera un fichero temporal al que tendrá
        que cambiar el nombre a <code class="filename">srvtab</code> para que todos
        los servidores puedan recogerlo.  Utilice
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mv</span>(1)</span></a> para moverlo al lugar correcto en el sistema
        original:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grunt-new-srvtab srvtab</code></strong></pre><p>Si el fichero es para un sistema cliente y la red no puede
        considerarse segura copie el
        <code class="filename">cliente-new-srvtab</code>
        en un medio extraíble y transpórtelo por medios
	físicos seguros.  Asegúrese de cambiar su nombre a
        <code class="filename">srvtab</code> en el directorio
        <code class="filename">/etc/kerberosIV</code> del cliente, y
        asegúrese también de que tiene modo 600:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grumble-new-srvtab srvtab</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 srvtab</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73611984"></a>14.7.5. Añadir entradas a la base de datos</h3></div></div></div><p>Ahora tenemos que añadir entradas de usuarios a la
        base de datos.  Primero vamos a crear una entrada para el usuario
        <code class="systemitem">jane</code>.  Para ello usaremos
        <code class="command">kdb_edit</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>jane</code></strong>
<code class="prompt">Instance:</code>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: jane, Instance: , kdc_key_ver: 1
<code class="prompt">New Password:</code>                &lt;---- introduzca una constraseña segura
Verifying password

<code class="prompt">New Password:</code>                &lt;---- introduzca de nuevo la contraseña
Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>		   &lt;---- si introduce datos nulos saldrá del programa</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73623888"></a>14.7.6. Prueba del sistema</h3></div></div></div><p>Primero tenemos que iniciar los dæmons de Kerberos.
        Tenga en cuenta que si su <code class="filename">/etc/rc.conf</code>
	está configurado correctamente el inicio tendrá
	ligar cuando reinicie el sistema.  Esta prueba solo es necesaria
	en el servidor Kerberos; los clientes Kerberos tomarán
	lo que necesiten automáticamente desde el directorio
        <code class="filename">/etc/kerberosIV</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kerberos &amp;</code></strong>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered. BEWARE!

Current Kerberos master key version is 1
Local realm: EJEMPLO.COM
<code class="prompt">#</code> <strong class="userinput"><code>kadmind -n &amp;</code></strong>
KADM Server KADM0.0A initializing
Please do not use 'kill -9' to kill this job, use a
regular kill instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</pre><p>Ahora podemos probar a usar <code class="command">kinit</code>
        para obtener un ticket para el ID <code class="systemitem">jane</code>
        que creamos antes:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit jane</code></strong>
MIT Project Athena (grunt.ejemplo.com)
Kerberos Initialization for "jane"
<code class="prompt">Password:</code> </pre><p>Pruebe a listar los tokens con <code class="command">klist</code> para ver
        si realmente están:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:    /tmp/tkt245
Principal:      jane@EJEMPLO.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EJEMPLO.COM@EJEMPLO.COM</pre><p>Ahora trate de cambiar la contraseña usando
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> para comprobar si el dæmon
	<span class="application">kpasswd</span> está autorizado
        a acceder a la base de datos Kerberos:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
realm EJEMPLO.COM
<code class="prompt">Old password for jane:</code>
<code class="prompt">New Password for jane:</code>
Verifying password
<code class="prompt">New Password for jane:</code>
Password changed.</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73640144"></a>14.7.7. Añadir privilegios de <code class="command">su</code></h3></div></div></div><p>Kerberos nos permite dar a <span class="emphasis"><em>cada</em></span>
        usuario que necesite privilegios de <code class="systemitem">root</code>
        su <span class="emphasis"><em>propia</em></span> contraseña para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.
        Podemos agregar un ID que esté autorizado a ejecutar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> <code class="systemitem">root</code>.  Esto se controla
        con una instancia de <code class="systemitem">root</code>
        asociada con un usuario.  Vamos a crear una entrada
	<code class="literal">jane.root</code> en la base de datos, para lo que
	recurrimos a <code class="command">kdb_edit</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>jane</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>root</code></strong>

&lt;Not found&gt;, Create [y] ? y

Principal: jane, Instance: root, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- introduzca una contraseña SEGURA
Verifying password

<code class="prompt">New Password:</code>    	 	 &lt;---- introduzca otra vez la constraseña

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code> <strong class="userinput"><code>12</code></strong> &lt;--- Keep this short!
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>		         &lt;---- si introduce datos nulos saldrá del programa</pre><p>Ahora trate de obtener los tokens para comprobar que
        todo funciona:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kinit jane.root</code></strong>
MIT Project Athena (grunt.ejemplo.com)
Kerberos Initialization for "jane.root"
<code class="prompt">Password:</code></pre><p>Hemos de agregar al usuario al
        <code class="filename">.klogin</code> de <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
jane.root@EJEMPLO.COM</pre><p>Ahora trate de hacer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code></pre><p>y eche un vistazo a qué tokens tenemos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:	/tmp/tkt_root_245
Principal:      jane.root@EJEMPLO.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EJEMPLO.COM@EJEMPLO.COM</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73668304"></a>14.7.8. Uso de otras órdenes</h3></div></div></div><p>En un ejemplo anterior creamos un usuario llamado
        <code class="literal">jane</code> con una instancia <code class="literal">root</code>.
	Nos basamos en un usuario con el mismo nombre del
	<span class="quote">&#8220;<span class="quote">principal</span>&#8221;</span> (<code class="literal">jane</code>),
	el procedimiento por defecto en Kerberos:
        <code class="literal">&lt;principal&gt;.&lt;instancia&gt;</code> con la
        estructura
	<code class="literal">&lt;nombre de usuario&gt;.</code><code class="systemitem">root</code>
        permitirá que <code class="literal">&lt;nombre de usuario&gt;</code>
        haga <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> a <code class="systemitem">root</code> si existen
	las entradas necesarias en el
        <code class="filename">.klogin</code> que hay en el directorio home de
        <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
jane.root@EJEMPLO.COM</pre><p>De la misma manera, si un usuario tiene en su directorio home
        lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat ~/.klogin</code></strong>
jane@EJEMPLO.COM
jack@EJEMPLO.COM</pre><p>significa que cualquier usuario del dominio
        <code class="literal">EJEMPLO.COM</code> que se identifique como
        <code class="systemitem">jane</code> o como <code class="systemitem">jack</code>
        (vía <code class="command">kinit</code>, ver más arriba)
        podrá acceder a la cuenta de <code class="systemitem">jane</code> o
        a los ficheros de este sistema (<code class="systemitem">grunt</code>) vía
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> o
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>.</p><p>Veamos por ejemplo cómo <code class="systemitem">jane</code> se
        se identifica en otro sistema mediante Kerberos:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
MIT Project Athena (grunt.ejemplo.com)
<code class="prompt">Password:</code>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt</code></strong>
Last login: Mon May  1 21:14:47 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre><p>Aquí <code class="systemitem">jack</code> se identifica con la
        cuenta de <code class="systemitem">jane</code> en la misma
        máquina (<code class="systemitem">jane</code> tiene configurado
        su fichero <code class="filename">.klogin</code> como se ha mostrado
        antes, y la persona encargada de la administración de
        Kerberos ha configurado un usuario principal
        <span class="emphasis"><em>jack</em></span> con una instancia nula):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt -l jane</code></strong>
MIT Project Athena (grunt.ejemplo.com)
<code class="prompt">Password:</code>
Last login: Mon May  1 21:16:55 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.
FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerberos5"></a>14.8. <span class="application">Kerberos5</span></h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tillman</span> <span class="surname">Hodgson</span></span>. </span></div><div><span class="authorgroup">Basado en un texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mark</span> <span class="surname">Murray</span></span>. </span></div></div></div><p>Cada versión de FreeBSD posterior a FreeBSD-5.1 incluye
      soporte solamente para <span class="application">Kerberos5</span>.
      Por esta razón <span class="application">Kerberos5</span> es
      la única versión incluida.  Su configuración
      es similar en muchos aspectos a la de
      <span class="application">KerberosIV</span>.
      La siguiente información solo atañe a
      <span class="application">Kerberos5</span> en versiones de
      FreeBSD-5.0 o posteriores.  Los usuarios que deséen
      utilizar <span class="application">KerberosIV</span> pueden
      instalar el port
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb4/pkg-descr">security/krb4</a>.</p><p><span class="application">Kerberos</span> es un sistema/protocolo
      agregado para red que permite a los usuarios validar su identidad
      a través de los servicios de un servidor seguro.
      Los servicios como login remoto, copia remota, copias
      de fichero de un sistema a otro y otras tareas generalmente
      consideradas poco seguras pasan a ser considerablemente
      seguras y más controlables.</p><p><span class="application">Kerberos</span> puede describirse como
      un sistema proxy identificador/verificador.  También
      puede describirse como un sistema confiable de autentificación
      de terceros.
      <span class="application">Kerberos</span> solamente ofrece una
      función: la validación segura de usuarios a
      través de una red.  No proporciona funciones de
      autorización (es decir, lo que los usuarios tienen
      permitido hacer) o funciones de auditoría (lo que esos
      usuarios hicieron).  Después de que un servidor y un
      cliente han usado <span class="application">Kerberos</span> para
      demostrar su identidad pueden también cifrar todas sus
      sus comunicaciones, asegurando de este modo su intimidad y la
      integridad de sus datos durante su uso del sistema.</p><p>Es, por tanto, altamente recomendable que se use
      <span class="application">Kerberos</span>
      <span class="emphasis"><em>además</em></span> de otros métodos de
      seguridad que ofrezcan servicios de autorización
      y auditoría.</p><p>Puede usar las siguientes instrucciones como una guía
      para configurar <span class="application">Kerberos</span> tal y como se
      distribuye en FreeBSD.  De todas maneras, debería consultar
      las páginas de manual adecuadas para tener toda la
      información.</p><p>Vamos a mostrar una instalación
      <span class="application">Kerberos</span>, para lo cual usaremos
      los siguientes espacios de nombres:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El dominio <acronym class="acronym">DNS</acronym> (<span class="quote">&#8220;<span class="quote">zona</span>&#8221;</span>)
          será ejemplo.org.</p></li><li class="listitem"><p>El dominio <span class="application">Kerberos</span> (realm)
          será EJEMPLO.ORG.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debe utilizar nombres de dominio reales al
        configurar <span class="application">Kerberos</span> incluso si
        pretende ejecutarlo internamente. Esto le evitará problemas
        de <acronym class="acronym">DNS</acronym> y asegura la interoperación
        con otros dominios <span class="application">Kerberos</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73724496"></a>14.8.1. Historia</h3></div></div></div><a id="idp73725136" class="indexterm"></a><p><span class="application">Kerberos</span> fué creado
        en el Massachusetts Institute of Technology
	(<acronym class="acronym">MIT</acronym>) como una solución
        a los problemas de seguridad de la red.
        El protocolo <span class="application">Kerberos</span> utiliza
        criptografía fuerte para que un cliente pueda
        demostrar su identidad en un servidor (y viceversa) a
        través de una conexión de red insegura.</p><p><span class="application">Kerberos</span> es el nombre de un
        protocolo de autentificación vía red y un adjetivo
        para describir programas que implementan el programa
        (<span class="application">Kerberos</span> telnet, por ejemplo,
	conocido también como el
	<span class="quote">&#8220;<span class="quote">telnet kerberizado</span>&#8221;</span>).
        La versión actual del protocolo es la 5, descrita en
        <acronym class="acronym">RFC</acronym> 1510.</p><p>Existen diversas implementaciones libres de este protocolo,
        cubriendo un amplio rango de sistemas operativos.
        El <acronym class="acronym">MIT</acronym>, donde <span class="application">Kerberos</span>
        fué desarrollado, continúa desarrollando su
        propio paquete <span class="application">Kerberos</span>.
	Suele usarse en los EEUU como producto criptográfico
        y como tal ha sufrido las regulaciones de exportación
	de los EEUU.  El
        <span class="application">Kerberos</span> del <acronym class="acronym">MIT</acronym>
        existe como un port en
        (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a>).  Heimdal
        <span class="application">Kerberos</span> es otra implementación
        de la versión 5, y fué desarrollada de forma
        intencionada fuera de los <acronym class="acronym">EEUU</acronym> para sortear las
        regulaciones de exportación (y por eso puede incluirse
        en versiones no comerciales de <span class="trademark">UNIX</span>®).  La distribución
        Heimdal <span class="application">Kerberos</span> está en el
        port (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/heimdal/pkg-descr">security/heimdal</a>), y
        se incluye una instalación mínima en el sistema
        base de FreeBSD.</p><p>Para alcanzar la mayor audiencia estas instrucciones asumen
      el uso de la distribución Heimdal incluída en FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73738960"></a>14.8.2. Configuración de un <acronym class="acronym">KDC</acronym> Heimdal</h3></div></div></div><a id="idp73739984" class="indexterm"></a><p>El centro de distribución de llaves (<acronym class="acronym">KDC</acronym>,
        Key Distribution Center) es el servicio centralizado de
	validación que proporciona
        <span class="application">Kerberos</span>: es el sistema que emite
        tickets <span class="application">Kerberos</span>.
        El <acronym class="acronym">KDC</acronym> goza del estátus de ser
	considerado como <span class="quote">&#8220;<span class="quote">confiable</span>&#8221;</span> por las demás
        computadoras del dominio <span class="application">Kerberos</span>,
        y por eso tiene consideraciones de seguridad más
	elevadas.</p><p>Tenga en cuenta que, aunque la ejecución del servidor
      <span class="application">Kerberos</span> requiere muy pocos recursos,
      se recomienda el uso de una máquina dedicada a
      <acronym class="acronym">KDC</acronym> por razones de seguridad.</p><p>Para empezar a configurar un <acronym class="acronym">KDC</acronym> asegúrese
      de que su <code class="filename">/etc/rc.conf</code> contenga la
      configuración adecuada para actuar como <acronym class="acronym">KDC</acronym>
      (tal vez deba ajustar algunas rutas para que cuadren con su
      sistema):</p><pre class="programlisting">kerberos5_server_enable="YES"
kadmind5_server_enable="YES"
kerberos_stash="YES"</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="option">kerberos_stash</code> solo existe en
          FreeBSD 4.X.</p></div><p>A continuación configuraremos el fichero de
        configuración de <span class="application">Kerberos</span>,
        <code class="filename">/etc/krb5.conf</code>:</p><pre class="programlisting">[libdefaults]
    default_realm = EJEMPLO.ORG [realms]
    EXAMPLE.ORG = {
        kdc = kerberos.ejemplo.org
        admin_server = kerberos.ejemplo.org
    }
[domain_realm]
    .ejemplo.org = EJEMPLO.ORG</pre><p>Tenga en cuenta que este <code class="filename">/etc/krb5.conf</code>
        implica que su <acronym class="acronym">KDC</acronym> tendrá el nombre
        de equipo completo calificado de
	<code class="systemitem">kerberos.ejemplo.org</code>.
        Necesitará añadir una entrada CNAME (alias) a su
        fichero de zona si su <acronym class="acronym">KDC</acronym> tiene un
        nombre de equipo diferente.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En grandes redes con un servidor <acronym class="acronym">DNS</acronym>
          <acronym class="acronym">BIND</acronym> bien configurado, el ejemplo
          de arriba puede quedar del siguiente modo:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">[libdefaults]
      default_realm = EJEMPLO.ORG</pre><p xmlns="http://www.w3.org/1999/xhtml">Con las siguientes líneas agregadas al
          fichero de zona <code class="systemitem">ejemplo.org</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">_kerberos._udp      IN  SRV     01 00 88 kerberos.ejemplo.org.
_kerberos._tcp      IN  SRV     01 00 88 kerberos.ejemplo.org.
_kpasswd._udp       IN  SRV     01 00 464 kerberos.ejemplo.org.
_kerberos-adm._tcp  IN  SRV     01 00 749 kerberos.ejemplo.org.
_kerberos           IN  TXT     EJEMPLO.ORG</pre></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para que los clientes sean capaces de encontrar los
          servicios <span class="application">Kerberos</span>
          <span class="emphasis"><em>debe</em></span> tener ya sea un
          <code class="filename">/etc/krb5.conf</code> configurado o
          un <code class="filename">/etc/krb5.conf</code> configurado de forma
          mínima <span class="emphasis"><em>y</em></span> un servidor DNS
          configurado correctamente.</p></div><p>A continuación crearemos la base de datos
        <span class="application">Kerberos</span>.  Esta base de datos contiene
        las llaves de todos los principales cifradas con una
        contraseña maestra.  No es necesario que recuerde
        esta contraseña, pues se almacenará en
        <code class="filename">/var/heimdal/m-key</code>.  Para crear la llave
        maestra ejecute <code class="command">kstash</code> e introduzca una
        contraseña.</p><p>Una vez que se ha creado la llave maestra puede inicializar
        la base de datos usando el programa <code class="command">kadmin</code>
        con la opción <code class="literal">-l</code> (que significa
        <span class="quote">&#8220;<span class="quote">local</span>&#8221;</span>).  Esta opción le dice a
        <code class="command">kadmin</code> que modifique los ficheros de la base
        de datos directamente en lugar de ir a través del servicio
        de red <code class="command">kadmind</code>.  Esto gestiona el problema del
        huevo y la gallina de tratar de conectar a la base de datos
        antes de que ésta exista.  Una vez que tiene el
	<span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de <code class="command">kadmin</code>, utilice
        <code class="command">init</code> para crear su base de datos de
        dominios iniciales.</p><p>Para terminar, mientras está todavía en
        <code class="command">kadmin</code> puede crear su primer principal
        mediante <code class="command">add</code>.  Utilice las opciones por
	defecto por ahora, más tarde puede cambiarlas mediante
        <code class="command">modify</code>.  Recuerde que puede usar
        <code class="literal">?</code> en cualquier <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> para
	consultar las opciones disponibles.</p><p>Veamos un ejemplo de sesión de creación de una
        base de datos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kstash</code></strong>
Master key: <strong class="userinput"><code>xxxxxxxx</code></strong>
Verifying password - Master key: <strong class="userinput"><code>xxxxxxxx</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>kadmin -l</code></strong>
kadmin&gt; <strong class="userinput"><code>init EJEMPLO.ORG</code></strong>
Realm max ticket life [unlimited]:
kadmin&gt; <strong class="userinput"><code>add tillman</code></strong>
Max ticket life [unlimited]:
Max renewable life [unlimited]:
Attributes []:
Password: <strong class="userinput"><code>xxxxxxxx</code></strong>
Verifying password - Password: <strong class="userinput"><code>xxxxxxxx</code></strong></pre><p>Ahora puede arrancar los servicios <acronym class="acronym">KDC</acronym>.
        Ejecute <code class="command">/etc/rc.d/kerberos start</code> y
        <code class="command">/etc/rc.d/kadmind start</code> para levantar dichos
        servicios.  Recuerde que no tendrá ningún
        dæmon kerberizado ejecutándose pero debe
	poder confirmar que <acronym class="acronym">KDC</acronym> funciona por el
        procedimiento de obtener y listar un boleto del principal
        (usuario) que acaba de crear en la línea de órdenes de
        <acronym class="acronym">KDC</acronym>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>k5init tillman</code></strong>
tillman@EJEMPLO.ORG's Password:

<code class="prompt">%</code> <strong class="userinput"><code>k5list</code></strong>
Credentials cache: FILE:<code class="filename">/tmp/krb5cc_500</code>
	Principal: tillman@EJEMPLO.ORG

  Issued           Expires          Principal
Aug 27 15:37:58  Aug 28 01:37:58  krbtgt/EJEMPLO.ORG@EJEMPLO.ORG</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73782736"></a>14.8.3. Creación de un servidor
	  <span class="application">Kerberos</span> con servicios
          Heimdal</h3></div></div></div><a id="idp73783760" class="indexterm"></a><p>Antes de nada necesitaremos una copia del fichero de
	  configuración de <span class="application">Kerberos</span>,
          <code class="filename">/etc/krb5.conf</code>.  Cópielo al cliente
          desde <acronym class="acronym">KDC</acronym> de forma segura (mediante
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a>, o usando un disquete).</p><p>A continuación necesitará un fichero
	  <code class="filename">/etc/krb5.keytab</code>.
          Esta es la mayor diferencia entre un servidor que proporciona
          dæmons habilitados con <span class="application">Kerberos</span>
          y una estación de trabajo: el servidor debe
          tener un fichero <code class="filename">keytab</code>.  Dicho fichero
          contiene las llaves de equipo del servidor, las cuales
          le permiten a él y al <acronym class="acronym">KDC</acronym>
          verificar la identidad entre ellos.  Deben transmitirse
          al servidor de forma segura ya que la seguridad del servidor
          puede verse comprometida si la llave se hace pública.
	  Por decirlo más claro, transferirla como texto plano a
	  través de la red (por ejemplo por
          <acronym class="acronym">FTP</acronym>) es una <span class="emphasis"><em>pésima
          idea</em></span>.</p><p>Lo normal es que transmita su <code class="filename">keytab</code>
          al servidor mediante el programa <code class="command">kadmin</code>.
          Esto es práctico porque también debe crear
          el principal del equipo (el <acronym class="acronym">KDC</acronym> que aparece
          al final de <code class="filename">krb5.keytab</code>)
	  usando <code class="command">kadmin</code>.</p><p>Tenga en cuenta que ya debe disponer de un ticket, y que
	  este ticket debe poder usar el interfaz
          <code class="command">kadmin</code> en <code class="filename">kadmind.acl</code>.
           Consulte la sección
          <span class="quote">&#8220;<span class="quote">administración remota</span>&#8221;</span> en la página
          info de Heimdal (<code class="command">info heimdal</code>), donde se
          exponen los detalles de diseño de las listas de control de
	  acceso.  Si no quiere habilitar acceso remoto
          <code class="command">kadmin</code>, puede conectarse de forma segura al
          <acronym class="acronym">KDC</acronym> (por medio de consola
          local, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a>
	  <span class="application">Kerberos</span>) y administrar en local
          mediante <code class="command">kadmin -l</code>.</p><p>Después de instalar el fichero
	  <code class="filename">/etc/krb5.conf</code> puede usar
          <code class="command">kadmin</code> desde el servidor
          <span class="application">Kerberos</span>.
          <code class="command">add --random-key</code> le permitirá
          añadir el principal del equipo servidor, y
	  <code class="command">ext</code> le permitirá extraer el principal
          del equipo servidor a su propio keybat.  Por ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kadmin</code></strong>
kadmin&gt;<strong class="userinput"><code> add --random-key host/myserver.ejemplo.org</code></strong>
Max ticket life [unlimited]:
Max renewable life [unlimited]:
Attributes []:
kadmin&gt;<strong class="userinput"><code> ext host/miservidor.ejemplo.org</code></strong>
kadmin&gt;<strong class="userinput"><code> exit</code></strong></pre><p>Tenga en cuenta que <code class="command">ext</code>
          (contracción de <span class="quote">&#8220;<span class="quote">extract</span>&#8221;</span>) almacena la
	  llave extraída por defecto en
          en <code class="filename">/etc/krb5.keytab</code>.</p><p>Si no tiene <code class="command">kadmind</code>
	  ejecutándose en
          <acronym class="acronym">KDC</acronym> (posiblemente por razones de seguridad)
          y por lo tanto carece de acceso remoto a <code class="command">kadmin</code>
          puede añadir el principal de equipo
          (<code class="systemitem">host/miservidor.EJEMPLO.ORG</code>) directamente
          en el <acronym class="acronym">KDC</acronym> y entonces extraerlo a un fichero
          temporal (para evitar sobreescribir
	  <code class="filename">/etc/krb5.keytab</code> en el
          <acronym class="acronym">KDC</acronym>) mediante algo parecido a esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kadmin</code></strong>
kadmin&gt;<strong class="userinput"><code> ext --keytab=/tmp/ejemplo.keytab host/miservidor.ejemplo.org</code></strong>
kadmin&gt;<strong class="userinput"><code> exit</code></strong></pre><p>Puede entonces copiar de forma segura el keytab al
          servidor (usando <code class="command">scp</code> o un diquete).
          Asegúrese de usar un nombre de keytab diferente
          para evitar sobreescribir el keytab en el
          <acronym class="acronym">KDC</acronym>.</p><p>Su servidor puede comunicarse con el
          <acronym class="acronym">KDC</acronym> (gracias a su fichero
          <code class="filename">krb5.conf</code>) y puede probar su propia
          identidad (gracias al fichero <code class="filename">krb5.keytab</code>).
          Ahora está listo para que usted habilite algunos
          servicios <span class="application">Kerberos</span>.
          En este ejemplo habilitaremos el servicio <code class="command">telnet</code>
          poniendo una línea como esta en su
          <code class="filename">/etc/inetd.conf</code> y reiniciando el
          servicio <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> con
          <code class="command">/etc/rc.d/inetd restart</code>:</p><pre class="programlisting">telnet    stream  tcp     nowait  root    /usr/libexec/telnetd  telnetd -a user</pre><p>La parte crítica es <code class="command">-a</code>,
          de autentificación de usuario.  Consulte
          la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">telnetd</span>(8)</span></a> para
          más información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73824080"></a>14.8.4. <span class="application">Kerberos</span> con un cliente
	  Heimdal</h3></div></div></div><a id="idp73824976" class="indexterm"></a><p>Configurar una computadora cliente es extremadamente
	  fácil.  Lo único que necesita es el
          fichero de configuración de
	  <span class="application">Kerberos</span> que encontrará
          en <code class="filename">/etc/krb5.conf</code>.
          Simplemente cópielo de forma segura a la computadora
          cliente desde el <acronym class="acronym">KDC</acronym>.</p><p>Pruebe su computadora cliente mediante
          <code class="command">kinit</code>, <code class="command">klist</code>, y
          <code class="command">kdestroy</code> desde el cliente para obtener,
          mostrar y luego borrar un ticket para el principal que
          creó antes.  Debería poder usar aplicaciones
          <span class="application">Kerberos</span> para conectarse a
          servidores habilitados con <span class="application">Kerberos</span>,
          aunque si no funciona y tiene problemas al intentar obtener
	  el boleto lo más probable es que el problema
          esté en el servidor y no en el cliente o el
	  <acronym class="acronym">KDC</acronym>.</p><p>Al probar una aplicación como <code class="command">telnet</code>,
          trate de usar un <span class="quote">&#8220;<span class="quote">sniffer</span>&#8221;</span> de paquetes
	  ( como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a>) para confirmar que su contraseña
          no viaja en claro por la red.
          Trate de usar <code class="command">telnet</code> con la opción
          <code class="literal">-x</code>, que cifra el flujo de datos por
          entero (algo parecido a lo que hace
	  <code class="command">ssh</code>).</p><p>Las aplicaciones clientes <span class="application">Kerberos</span>
          principales (llamadas tradicionalmente <code class="command">kinit</code>,
          <code class="command">klist</code>, <code class="command">kdestroy</code> y
          <code class="command">kpasswd</code>) están incluidas en
          la instalación base de FreeBSD.  Tenga en cuenta que
	  en las versiones de FreeBSD anteriores a 5.0 reciben los nombres de
          <code class="command">k5init</code>,
          <code class="command">k5list</code>, <code class="command">k5destroy</code>,
          <code class="command">k5passwd</code> y <code class="command">k5stash</code>.</p><p>También se instalan por defecto diversas aplicaciones
          <span class="application">Kerberos</span> que no entran dentro de
	  la categoría de <span class="quote">&#8220;<span class="quote">imprescindibles</span>&#8221;</span>.
          Es aquí donde la naturaleza
          <span class="quote">&#8220;<span class="quote">mínima</span>&#8221;</span> de la instalación base de
          Heimdal salta a la palestra: <code class="command">telnet</code> es el
	  único servicio <span class="application">Kerberos</span>
	  habilitado.</p><p>El port Heimdal añade algunas de las aplicaciones
          cliente que faltan: versiones <span class="application">Kerberos</span>
          de <code class="command">ftp</code>, <code class="command">rsh</code>,
          <code class="command">rcp</code>, <code class="command">rlogin</code> y algunos
          otros programas menos comunes.  El port del <acronym class="acronym">MIT</acronym>
          también contiene una suite completa de aplicaciones
          cliente de <span class="application">Kerberos</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73859792"></a>14.8.5. Ficheros de configuración de usuario: <code class="filename">.k5login</code> y <code class="filename">.k5users</code></h3></div></div></div><a id="idp73861072" class="indexterm"></a><a id="idp73861968" class="indexterm"></a><p>Suele ser habitual que los usuarios de un dominio
          <span class="application">Kerberos</span> (o <span class="quote">&#8220;<span class="quote">principales</span>&#8221;</span>)
	  tengan su usuario
          (por ejemplo <code class="systemitem">tillman@EJEMPLO.ORG</code>) mapeado
          a una cuenta de usuario local (por ejemplo un usuario llamado
          llamado <code class="systemitem">tillman</code>).  Las aplicaciones cliente
          como <code class="command">telnet</code> normalmente no requieren un
          nombre de usuario o un principal.</p><p>Es posible que de vez en cuando quiera dar acceso a una
          una cuenta de usuario local a alguien que no tiene un
          principal <span class="application">Kerberos</span>.
          Por ejemplo, <code class="systemitem">tillman@EJEMPLO.ORG</code> puede
          necesitar acceso a la cuenta de usuario local
	  <code class="systemitem">webdevelopers</code>.
          Otros principales tal vez necesiten acceso a esas
          cuentas locales.</p><p>Los ficheros <code class="filename">.k5login</code> y
          <code class="filename">.k5users</code>, ubicados en el directorio
          home del usuario, pueden usarse de un modo similar a
          una combinación potente de
          <code class="filename">.hosts</code> y <code class="filename">.rhosts</code>.
          Por ejemplo, si pusiera un fichero
          <code class="filename">.k5login</code> con el siguiente
          contenido</p><pre class="screen">tillman@example.org
jdoe@example.org</pre><p>en el directorio home del usuario local
          <code class="systemitem">webdevelopers</code> ambos
          principales listados tendrían acceso a esa cuenta
          sin requerir una contraseña compartida.</p><p>Le recomendamos encarecidamente la lectura de las
	  páginas de manual de estas órdenes.  Recuerde que
	  la página de manual de
          <code class="command">ksu</code> abarca
          <code class="filename">.k5users</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73880528"></a>14.8.6. <span class="application">Kerberos</span> Sugerencias, trucos y
	   solución de problemas</h3></div></div></div><a id="idp73881424" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Tanto si utiliza el port de Heimdal o
	      el <span class="application">Kerberos</span>
              del <acronym class="acronym">MIT</acronym> asegúrese de que su
              variable de entorno <code class="envar">PATH</code> liste las
              versiones de <span class="application">Kerberos</span> de las
              aplicaciones cliente antes que las versiones del
              sistema.</p></li><li class="listitem"><p>?Todas las computadoras de su dominio Kerberos
              tienen la hora sincronizada? Si no, la autentificación
              puede fallar.
              <a class="xref" href="#network-ntp" title="29.12. NTP">Sección 29.12, &#8220;NTP&#8221;</a> describe como sincronizar
              los relojes utilizando <acronym class="acronym">NTP</acronym>.</p></li><li class="listitem"><p><acronym class="acronym">MIT</acronym> y Heimdal conviven bien, con la
              excepción de <code class="command">kadmin</code>, protocolo
              no está estandarizado.</p></li><li class="listitem"><p>Si cambia su nombre de equipo debe cambiar también
              el <span class="quote">&#8220;<span class="quote">apellido</span>&#8221;</span> de su principal y actualizar su
              keytab.  Esto también se aplica a entradas especiales
              en keytab como el principal <code class="systemitem">www/</code>
              que usa el <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mod_auth_kerb/pkg-descr">www/mod_auth_kerb</a>
              de Apache.</p></li><li class="listitem"><p>Todos los equipos en su dominio Kerberos deben poder
              resolverse (tanto en la forma normal normal como en la
	      inversa) en el <acronym class="acronym">DNS</acronym> (o en
              <code class="filename">/etc/hosts</code> como mínimo).
              Los CNAME funcionarán, pero los registros A y PTR
              deben ser correctos y estar en su sitio.  El mensaje de error
              que recibirá de no hacerlo así no es muy
	      intuitivo:
              <span class="errorname">Kerberos5 refuses authentication because Read req
              failed: Key table entry not found</span>.</p></li><li class="listitem"><p>Algunos sistemas operativos que puede usar como clientes
              de su <acronym class="acronym">KDC</acronym> no activan
              los permisos para <code class="command">ksu</code> como
              setuid <code class="systemitem">root</code>.  Esto hará que
              <code class="command">ksu</code> no funcione, lo cual es muy seguro
              pero un tanto molesto.  Tenga en cuenta que no se debe a
              un error de <acronym class="acronym">KDC</acronym>.</p></li><li class="listitem"><p>Si desea permitir que un principal tenga un ticket con
	      una validez más larga que el valor por defecto de diez
	      horas en <span class="application">Kerberos</span> del
              <acronym class="acronym">MIT</acronym> debe usar
              <code class="command">modify_principal</code> en <code class="command">kadmin</code>
              para cambiar <span class="quote">&#8220;<span class="quote">maxlife</span>&#8221;</span> tanto del principal en
	      cuestión como del <code class="systemitem">krbtgt</code> del
	      principal.  Hecho esto,
              el principal puede utilizar la opción
              <code class="literal">-l</code> con <code class="command">kinit</code> para
              solicitar un boleto con más tiempo de vida.</p></li><li class="listitem"><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si ejecuta un <span class="quote">&#8220;<span class="quote">sniffer</span>&#8221;</span> de paquetes en su
              <acronym class="acronym">KDC</acronym> para ayudar con la resolución
              de problemas y ejecuta <code class="command">kinit</code> desde una
              estación de trabajo puede encontrarse con que su
              <acronym class="acronym">TGT</acronym> se envía inmediatamente
              después de ejecutar <code class="command">kinit</code>:
              <span class="emphasis"><em>incluso antes de que escriba su
	      contraseña</em></span> La explicación es que el
              servidor <span class="application">Kerberos</span> transmite
              tranquilamente un <acronym class="acronym">TGT</acronym> (Ticket Granting
              Ticket) a cualquier petición no autorizada; de todas
              maneras, cada <acronym class="acronym">TGT</acronym> está cifrado
              en una llave derivada de la contraseña del usuario.
              Por tanto, cuando un usuario teclea su contraseña
              no la está enviando al <acronym class="acronym">KDC</acronym>,
              se está usando para descifrar el <acronym class="acronym">TGT</acronym>
              que <code class="command">kinit</code> ya obtuvo.  Si el proceso de
              descifrado termina en un ticket válido con
              una marca de tiempo válida, el usuario tiene
              credenciales <span class="application">Kerberos</span> válidas.
              Estas credenciales incluyen una llave de sesión para
              establecer comunicaciones seguras con el servidor
              <span class="application">Kerberos</span> en el futuro, así
              como el TGT en sí, que se cifra con la llave del propio
              servidor <span class="application">Kerberos</span>.
	      Esta segunda capa de cifrado es invisible para el usuario, pero
              es lo que permite al servidor <span class="application">Kerberos</span>
              verificar la autenticidad de cada
	      <acronym class="acronym">TGT</acronym>.</p></div></li><li class="listitem"><p>Si desea utilizar tickets con un tiempo largo de vida (una
              semana, por ejemplo) y está utilizando
	      <span class="application">OpenSSH</span>
              para conectarse a la máquina donde se almacena su
	      boleto asgúrese de que
              <span class="application">Kerberos</span>
              <code class="option">TicketCleanup</code> esté configurado a
	      <code class="literal">no</code> en su <code class="filename">sshd_config</code>
              o de lo contrario sus tickets serán eliminados cuando
              termine la sesión.</p></li><li class="listitem"><p>Recuerde que los principales de equipos también
	      pueden tener tener un tiempo de vida más largo.
              Si su principal de usuario tiene un tiempo de vida de una
	      semana pero el equipo al que se conecta tiene un
              tiempo de vida de nueve horas, tendrá un principal de
              equipo expirado en su caché, y la caché de
              ticket no funcionará como esperaba.</p></li><li class="listitem"><p>Cuando esté configurando un fichero
              <code class="filename">krb5.dict</code> pensando específicamente
              en prevenir el uso de contraseñas defectuosas (la
	      página de manual de
              de <code class="command">kadmind</code> trata el tema brevemente), recuerde
              que solamente se aplica a principales que tienen una
	      política de contraseñas asignada.  El formato
              de los ficheros <code class="filename">krb5.dict</code> es simple:
	      una cadena de texto por línea.  Puede serle
              útil crear un enlace simbólico a
              <code class="filename">/usr/share/dict/words</code>.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73925584"></a>14.8.7. Diferencias con el port del <acronym class="acronym">MIT</acronym></h3></div></div></div><p>Las diferencias más grandes entre las instalaciones
          <acronym class="acronym">MIT</acronym> y Heimdal están relacionadas
          con <code class="command">kadmin</code>, que tiene un conjunto
          diferente (pero equivalente) de órdenes y utiliza un protocolo
          diferente.  Esto tiene implicaciones muy grandes si su
          <acronym class="acronym">KDC</acronym> es <acronym class="acronym">MIT</acronym>, ya que no
          podrá utilizar el programa <code class="command">kadmin</code>
          de Heimdal para administrar remotamente su <acronym class="acronym">KDC</acronym>
          (o viceversa).</p><p>Las aplicaciones cliente pueden también disponer de
          diferentes opciones de línea de órdenes para
          lograr lo mismo.  Le recomendamos seguir las instrucciones de
          la página web de <span class="application">Kerberos</span>
          del <acronym class="acronym">MIT</acronym>
          (<code class="uri"><a class="uri" href="http://web.mit.edu/Kerberos/www/" target="_top">http://web.mit.edu/Kerberos/www/</a></code>).
          Sea cuidadoso con los parches: el port
          del <acronym class="acronym">MIT</acronym> se instala por defecto en
          <code class="filename">/usr/local/</code>, y las
          aplicaciones <span class="quote">&#8220;<span class="quote">normales</span>&#8221;</span> del sistema pueden
          ser ejecutadas en lugar de las del <acronym class="acronym">MIT</acronym>
          si su variable de entorno <code class="envar">PATH</code> lista antes los
          directorios del sistema.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si usa el port del <acronym class="acronym">MIT</acronym>
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a>
          proporcionado por FreeBSD asegúrese de leer el fichero
          <code class="filename">/usr/local/share/doc/krb5/README.FreeBSD</code>
          instalado por el port si quiere entender por qué los
          login vía <code class="command">telnetd</code> y
          <code class="command">klogind</code> se comportan de un modo un tanto
          extraño.  Más importante aún, corregir la
          conducta de <span class="quote">&#8220;<span class="quote">permisos incorrectos en el fichero
          caché</span>&#8221;</span> requiere que el binario
          <code class="command">login.krb5</code> se use para la
	  validación para que pueda cambiar correctamente los
          permisos de propiedad de credenciales reenviadas.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73936336"></a>14.8.8. Mitigación de limitaciones encontradas en
	  <span class="application">Kerberos</span></h3></div></div></div><a id="idp73937232" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73938384"></a>14.8.8.1. <span class="application">Kerberos</span> es un enfoque
	   <span class="quote">&#8220;<span class="quote">todo o nada</span>&#8221;</span></h4></div></div></div><p>Cada servicio habilitado en la red debe modificarse
            para funcionar con <span class="application">Kerberos</span> (o
            debe ser asegurado contra ataques de red) o de lo
            contrario las credenciales de usuario pueden robarse y
            reutilizarse.  Un ejemplo de esto podría ser que
            <span class="application">Kerberos</span> habilite todos los shells
            remotos ( vía <code class="command">rsh</code> y
	    <code class="command">telnet</code>, por ejemplo) pero que no cubra
            el servidor de correo <acronym class="acronym">POP3</acronym>, que
	    envía contraseñas en texto plano.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73942096"></a>14.8.8.2. <span class="application">Kerberos</span> está pensado
	    para estaciones de trabajo monousuario</h4></div></div></div><p>En un entorno multiusuario
            <span class="application">Kerberos</span> es menos seguro.
            Esto se debe a que almacena los tickets en el
            directorio <code class="filename">/tmp</code>, que puede
            ser leído por todos los usuarios.  Si un
            usuario está compartiendo una computadora con
            varias personas (esto es, si utiliza un sistema
	    multiusuario)  es posible que los tickets sean robados
            (copiados) por otro usuario.</p><p>Esto puede solventarse con la opción de línea
            de órdenes <code class="literal">-c</code> nombre-de-fichero o
            (mejor aún) la variable de entorno
            <code class="envar">KRB5CCNAME</code>, pero raramente se hace.
            Si almacena los tickets en el directorio home de los
            usuarios y utiliza sin mucha complicación los permisos
	    de fichero puede mitigar este problema.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73945552"></a>14.8.8.3. El KDC es el punto crítico de fallo</h4></div></div></div><p>Por motivos de diseño el <acronym class="acronym">KDC</acronym>
	    es tan seguro como la base de datos principal de
            contraseñas que contiene.  El
            <acronym class="acronym">KDC</acronym> no debe ejecutar ningún
            otro servicio ejecutándose en él y debe ser
	    físicamente seguro.  El peligro es grande debido a que
            <span class="application">Kerberos</span> almacena todas las
            contraseñas cifradas con la misma llave
            (la llave <span class="quote">&#8220;<span class="quote">maestra</span>&#8221;</span>, que a su vez se guarda
            como un fichero en el
            <acronym class="acronym">KDC</acronym>).</p><p>De todos modos una llave maestra comprometida no es
            algo tan terrible como parece a primera vista.  La llave maestra
	    solo se usa para cifrar la base de datos
            <span class="application">Kerberos</span> y como semilla para el
            generador de números aleatorios.  Mientras sea seguro
            el acceso a su <acronym class="acronym">KDC</acronym> un atancante no puede
            hacer demasiado con la llave maestra.</p><p>Además, si el <acronym class="acronym">KDC</acronym> no está
            disponible (quizás debido a un ataque de denegación
            de servicio o problemas de red) no se podrán utilizar
	    los servicios de red ya que no se puede efectuar la
	    validación, lo que hace que esta sea una buena forma de
	    lanzar un ataque de denegación de servicio.
            Este problema puede aliviarse con múltiples
	    <acronym class="acronym">KDC</acronym>s (un maestro y uno o más esclavos)
            y con una implementación cautelosa de secundarios o
            autentificación de respaldo (para esto
	    <acronym class="acronym">PAM</acronym> es excelente).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73988304"></a>14.8.8.4. Limitaciones de <span class="application">Kerberos</span></h4></div></div></div><p><span class="application">Kerberos</span> le permite a usuarios,
            equipos y servicios validarse entre sí, pero no
            dispone de ningún mecanismo para autentificar el
	    <acronym class="acronym">KDC</acronym> a los usuarios, equipos o servicios.
            Esto significa que una versión
	    (por ejemplo) <span class="quote">&#8220;<span class="quote">troyanizada</span>&#8221;</span>
            <code class="command">kinit</code> puede grabar todos los usuarios y sus
            contraseñas.  Puede usar
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/tripwire/pkg-descr">security/tripwire</a> o
            alguna otra herramienta de revisión de integridad
            de sistemas de ficheros para intentar evitar problemas como
	    este.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73991632"></a>14.8.9. Recursos y más información</h3></div></div></div><a id="idp73992272" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.faqs.org/faqs/Kerberos-faq/general/preamble.html" target="_top">
	    Las preguntas frecuentes (FAQ) de
	    <span class="application">Kerberos</span></a></p></li><li class="listitem"><p><a class="link" href="http://web.mit.edu/Kerberos/www/dialogue.html" target="_top">Designing an
	    Authentication System: a Dialog in Four Scenes</a></p></li><li class="listitem"><p><a class="link" href="http://www.ietf.org/rfc/rfc1510.txt?number=1510" target="_top">RFC 1510,
	    The <span class="application">Kerberos</span> Network Authentication Service
	    (V5)</a></p></li><li class="listitem"><p><a class="link" href="http://web.mit.edu/Kerberos/www/" target="_top">Página web de <span class="application">Kerberos</span>
	  del <acronym class="acronym">MIT</acronym></a></p></li><li class="listitem"><p><a class="link" href="http://www.pdc.kth.se/heimdal/" target="_top">Página web de
	  <span class="application">Kerberos</span> Heimdal</a></p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssl"></a>14.9. OpenSSL</h2></div><div><span class="authorgroup">Escrito por: <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74003664" class="indexterm"></a><p>El conjunto de herramientas <span class="application">OpenSSL</span>
      es una característica de FreeBSD que muchos usuarios
      pasan por alto.  <span class="application">OpenSSL</span> ofrece una
      capa de cifrada de transporte sobre la capa normal de
      comunicación, permitiendo la combinación con
      con muchas aplicaciones y servicios de red.</p><p>Algunos usos de <span class="application">OpenSSL</span> son
      la validación cifrada de clientes de correo, las
      transacciones basadas en web como pagos con tarjetas de
      crédito, etc.  Muchos ports, como
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13-ssl/pkg-descr">www/apache13-ssl</a> y
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/sylpheed-claws/pkg-descr">mail/sylpheed-claws</a>
      ofrecen soporte de compilación para
      <span class="application">OpenSSL</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En la mayoría de los casos la colección
        de ports tratará de compilar el port
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/openssl/pkg-descr">security/openssl</a> a menos
        que la variable de make <code class="varname">WITH_OPENSSL_BASE</code>
        sea puesta explícitamente a <span class="quote">&#8220;<span class="quote">yes</span>&#8221;</span>.</p></div><p>La versión de <span class="application">OpenSSL</span>
      incluida en FreeBSD soporta los protocolos de seguridad
      de red Secure Sockets Layer v2/v3 (SSLv2/SSLv3) y
      Transport Layer Security v1 (TLSv1) y puede utilizarse como
      biblioteca criptográfica general.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">OpenSSL</span> soporta el
        algoritmo <acronym class="acronym">IDEA</acronym> pero estáa deshabilitado
        por defecto debido a patentes en vigor en los  Estados Unidos.
        Si quiere usarlo debe revisar la licencia, y si las
        restricciones le parecen aceptables active la variable
        <code class="varname">MAKE_IDEA</code> en
        <code class="filename">make.conf</code>.</p></div><p>Uno de los usos más comunes de
      <span class="application">OpenSSL</span> es ofrecer certificados para
      usar con aplicaciones de software.  Estos certificados aseguran
      que las credenciales de la compañia o individuo son
      válidos y no son fraudulentos.  Si el certificado en
      cuestión no ha sido verificado por uno de las diversas
      <span class="quote">&#8220;<span class="quote">autoridades certificadoras</span>&#8221;</span>
      o <acronym class="acronym">CA</acronym>, suele generarse una advertencia al respecto.
      Una autoridad de certificados es una compañia, como
      <a class="link" href="http://www.verisign.com" target="_top">VeriSign</a>, que
      firma certificados para validar credenciales de individuos
      o compañias.  Este proceso tiene un costo asociado y no es
      un requisito imprescindible para usar certificados, aunque
      puede darle un poco de tranquilidad a los usuarios
      más paranóicos.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74014928"></a>14.9.1. Generación de certificados</h3></div></div></div><a id="idp74015568" class="indexterm"></a><p>Para generar un certificado ejecute lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl req -new -nodes -out req.pem -keyout cert.pem</code></strong>
Generating a 1024 bit RSA private key
................++++++
.......................................++++++
writing new private key to 'cert.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<strong class="userinput"><code>US</code></strong>
State or Province Name (full name) [Some-State]:<strong class="userinput"><code>PA</code></strong>
Locality Name (eg, city) []:<strong class="userinput"><code>Pittsburgh</code></strong>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<strong class="userinput"><code>Mi compañía</code></strong>
Organizational Unit Name (eg, section) []:<strong class="userinput"><code>Administrador de sistemas</code></strong>
Common Name (eg, YOUR name) []:<strong class="userinput"><code>localhost.ejemplo.org</code></strong>
Email Address []:<strong class="userinput"><code>trhodes@FreeBSD.org</code></strong>

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:<strong class="userinput"><code>UNA CONTRASEÑA</code></strong>
An optional company name []:<strong class="userinput"><code>Otro nombre</code></strong></pre><p>Tenga en cuenta que la respuesta directamente después
        de <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> <span class="quote">&#8220;<span class="quote">Common Name</span>&#8221;</span> muestra un
        nombre de dominio.  Este <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> requiere que se
	introduzca un nombre de servidor para usarlo en la
        verificación; si escribe cualquier otra cosa
        producirá un certificado inválido.
        Otras opciones, por ejemplo el tiempo
        de expiración, alternan algoritmos de cifrado,
        etc.  Puede ver una lista completa en la página
        de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=openssl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">openssl</span>(1)</span></a>.</p><p>Debería tener dos ficheros en el directorio
        donde ha ejecutado la orden anterior.  La petición
	de certificado,
        <code class="filename">req.pem</code>, es lo que debe enviar a una
	autoridad certificadora para que valide las credenciales que
	introdujo; firmará la petición y le devolverá
        el certificado.  El segundo fichero es
        <code class="filename">cert.pem</code> y es la llave privada para
        el certificado, que debe proteger a toda costa; si  cae en
	malas manos podrí usarse para suplantarle a usted o a
        sus servidores.</p><p>Si no necesita la firma de una <acronym class="acronym">CA</acronym>
        puede crear y firmar usted mismo su certificado.
        Primero, genere la llave <acronym class="acronym">RSA</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl dsaparam -rand -genkey -out myRSA.key 1024</code></strong></pre><p>A continuación genere la llave <acronym class="acronym">CA</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl gendsa -des3 -out myca.key myRSA.key</code></strong></pre><p>Utilice esta llave para crear el certificado:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl req -new -x509 -days 365 -key myca.key -out new.crt</code></strong></pre><p>Deberín aparecer dos nuevos ficheros en su directorio:
        un fichero de firma de autoridad de certificados
        (<code class="filename">myca.key</code>) y el certificado en sí,
        <code class="filename">new.crt</code>.  Deben ubicarse en un directorio,
        que se recomienda que sea
        <code class="filename">/etc</code>, que es legible
        solo para <code class="systemitem">root</code>.  Para terminar, es recomendable
	asignar permisos 0700 para el fichero con
        <code class="command">chmod</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74041040"></a>14.9.2. Uso de certificados; un ejemplo</h3></div></div></div><p>?Qué pueden hacer estos ficheros?
        Cifrar conexiones al <acronym class="acronym">MTA</acronym>
        <span class="application">Sendmail</span> es un buen sitio para
	usarlos.  De este modo eliminará el uso de validación
        mediante texto en claro para los usuarios que envían
        correo a través del <acronym class="acronym">MTA</acronym>
        local.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">No es el mejor uso en el mundo, ya que algunos
          <acronym class="acronym">MUA</acronym>s enviarán al usuario un
	  mensaje de error si no tiene instalados localmente los
	  certificados.  Consulte la documentación
	  para más datos sobre la
          instalación de certificados.</p></div><p>Debe añadir las siguientes líneas
        en su fichero local <code class="filename">.mc</code>:</p><pre class="programlisting">dnl SSL Options
define(`confCACERT_PATH',`/etc/certs')dnl
define(`confCACERT',`/etc/certs/new.crt')dnl
define(`confSERVER_CERT',`/etc/certs/new.crt')dnl
define(`confSERVER_KEY',`/etc/certs/myca.key')dnl
define(`confTLS_SRV_OPTIONS', `V')dnl</pre><p><code class="filename">/etc/certs/</code>
        es el directorio destinado a almacenamiento de
        los ficheros de certificado y llave en local.
        El último requisito es una reconstrucción
        del fichero <code class="filename">.cf</code> local.  Solo tiene que
        teclear <code class="command">make</code>
        <em class="parameter"><code>install</code></em> en el directorio
        <code class="filename">/etc/mail</code>.
        A continuación ejecute un <code class="command">make</code>
        <em class="parameter"><code>restart</code></em>, que debería reiniciar el
        dæmon <span class="application">Sendmail</span>.</p><p>Si todo fué bien no habrá mensajes de error
        en el fichero <code class="filename">/var/log/maillog</code>
        y <span class="application">Sendmail</span> aparecerá en
        la lista de procesos.</p><p>Puede probarlo todo de una forma muy sencilla;
        conéctese al servidor de correo mediante
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>telnet ejemplo.com 25</code></strong>
Trying 192.0.34.166...
Connected to <code class="systemitem">ejemplo.com</code>.
Escape character is '^]'.
220 <code class="systemitem">ejemplo.com</code> ESMTP Sendmail 8.12.10/8.12.10; Tue, 31 Aug 2004 03:41:22 -0400 (EDT)
<strong class="userinput"><code>ehlo ejemplo.com</code></strong>
250-ejemplo.com Hello ejemplo.com [192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
<strong class="userinput"><code>quit</code></strong>
221 2.0.0 <code class="systemitem">ejemplo.com</code> closing connection
Connection closed by foreign host.</pre><p>Si la línea <span class="quote">&#8220;<span class="quote">STARTTLS</span>&#8221;</span> aparece en la
        salida, todo está funcionando correctamente.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ipsec"></a>14.10. VPN sobre IPsec</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Nik</span> <span class="surname">Clayton</span></span>. </span></div></div></div><a id="idp74063184" class="indexterm"></a><p>Creación de una VPN entre dos redes, a través de
      Internet, mediante puertas de enlace
      (<span class="quote">&#8220;<span class="quote">gateways</span>&#8221;</span>) FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74064848"></a>14.10.1. Qué es IPsec</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hiten M.</span> <span class="surname">Pandya</span></span>. </span></div></div></div><p>Esta sección le guiará a través del
        proceso de configuración de IPsec, y de su uso en un
        entorno consistente en máquinas FreeBSD y
        <span class="application"><span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® 2000/XP</span>, para
        hacer que se comuniquen de manera segura.  Para configurar
        IPsec es necesario que esté familiarizado con los
        conceptos de construcción de un kernel personalizado
        (consulte el <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>).</p><p><span class="emphasis"><em>IPsec</em></span> es un protocolo que está
        sobre la capa del protocolo de Internet (IP).  Le permite
        a dos o más equipos comunicarse de forma segura (de ahí
        el nombre).  La <span class="quote">&#8220;<span class="quote">pila de red</span>&#8221;</span> IPsec de FreeBSD
        se basa en la implementación
        <a class="link" href="http://www.kame.net/" target="_top">KAME</a>, que incluye
        soporte para las dos familias de protocolos, IPv4 e IPv6.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.X contiene una pila IPsec <span class="quote">&#8220;<span class="quote">acelerada
          por hardware</span>&#8221;</span>, conocida como <span class="quote">&#8220;<span class="quote">Fast
          IPsec</span>&#8221;</span>, que fué obtenida de OpenBSD.
          Emplea hardware criptográfico (cuando es posible)
          a través del subsistema <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crypto&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">crypto</span>(4)</span></a> para
          optimizar el rendimiento de IPsec.  Este subsistema es
          nuevo, y no soporta todas las opciones disponibles en la
          versión KAME de IPsec.  Para poder habilitar IPsec
          acelerado por hardware debe añadir las siguientes
          opciones al fichero de configuración de su kernel:</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp74078032" class="indexterm"></a><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">
options	  FAST_IPSEC  # new IPsec (cannot define w/ IPSEC)
        </pre><p xmlns="http://www.w3.org/1999/xhtml">Tenga en cuenta que no es posible utilizar el subsistema
          <span class="quote">&#8220;<span class="quote">Fast IPsec</span>&#8221;</span>  y la implementación
          KAME de IPsec en la misma computadora.  Consulte la
	  página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fast_ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">fast_ipsec</span>(4)</span></a> para más
          información.</p></div><a id="idp74081232" class="indexterm"></a><a id="idp74082384" class="indexterm"></a><p>IPsec consta de dos sub-protocolos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Encapsulated Security Payload
            (ESP)</em></span>, que protege los datos del paquete IP
            de interferencias de terceros, cifrando el contenido
            utilizando algoritmos de criptografía simétrica
            (como Blowfish, 3DES).</p></li><li class="listitem"><p><span class="emphasis"><em>Authentication Header (AH)</em></span>, que
            protege la cabecera del paquete IP de interferencias de
            terceros así como contra la  falsificación
	    (<span class="quote">&#8220;<span class="quote">spoofing</span>&#8221;</span>), calculando una suma de
	    comprobación criptográfica y aplicando a
            los campos de cabecera IP una función hash segura.
	    Detrás de todo esto va una cabecera adicional que
	    contiene el hash para permitir la validación de
	    la información que contiene el paquete.</p></li></ul></div><p><acronym class="acronym">ESP</acronym> y <acronym class="acronym">AH</acronym> pueden
        utilizarse conjunta o separadamente, dependiendo del
        entorno.</p><a id="idp74091984" class="indexterm"></a><a id="idp74092752" class="indexterm"></a><p>IPsec puede utilizarse para cifrar directamente el
        tráfico entre dos equipos (conocido como
        <span class="emphasis"><em>modo de transporte</em></span>) o para construir
        <span class="quote">&#8220;<span class="quote">túneles virtuales</span>&#8221;</span> entre dos subredes,
        que pueden usarse para comunicación segura
        entre dos redes corporativas (conocido como <span class="emphasis"><em>modo
        de túnel</em></span>).  Este último es muy
        conocido como una <span class="emphasis"><em>red privada virtual (Virtual
        Private Network, o VPN)</em></span>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> contiene
        información detallada sobre el subsistema IPsec de
	FreeBSD.</p><p>Si quiere añdir soporte IPsec a su kernel debe
        incluir las siguientes opciones al fichero de configuración
	de su kernel:</p><a id="idp74096976" class="indexterm"></a><a id="idp74098256" class="indexterm"></a><pre class="screen">
options   IPSEC        #IP security
options   IPSEC_ESP    #IP security (crypto; define w/ IPSEC)
      </pre><a id="idp74099792" class="indexterm"></a><p>Si quiere soporte para la depuración de
        errores no olvide la siguiente opción:</p><pre class="screen">
options   IPSEC_DEBUG  #debug for IP security
      </pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74101840"></a>14.10.2. El Problema</h3></div></div></div><p>No existe un estándar para lo que constituye una VPN.
        Las VPN pueden implementarse utilizando numerosas
        tecnologías diferentes, cada una de las cuales tiene sus
        pros y sus contras.  Esta sección presenta un
        escenario, y las estrategias usadas para implementar una VPN
        para este escenario.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74102992"></a>14.10.3. El escenario: dos redes, conectadas por Internet, que
        queremos que se comporten como una sola</h3></div></div></div><a id="idp74103632" class="indexterm"></a><p>Este es el punto de partida:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Usted tiene al menos dos sitios</p></li><li class="listitem"><p>Ambos sitios utilizan IP internamente</p></li><li class="listitem"><p>Ambos sitios están conectados a Internet, a
            través de una puerta de enlace FreeBSD.</p></li><li class="listitem"><p>La puerta de enlace de cada red tiene al menos una
	    dirección IP pública.</p></li><li class="listitem"><p>Las direcciones internas de las dos redes pueden ser
            direcciones IP públicas o privadas, no importa.
            Puede ejecutar NAT en la máquina que hace de
	    puerta de enlace si es necesario.</p></li><li class="listitem"><p>Las direcciones IP internas de las dos redes
            <span class="emphasis"><em>no colisionan</em></span>.  Aunque espero
            que sea teóricamente posible utilizar una
	    combinación de tecnología VPN y NAT
            para hacer funcionar todo esto sospecho que
	    configurarlo sería una pesadilla.</p></li></ul></div><p>Si lo que intenta es conectar dos redes y ambas usan el
        mismo rango de direcciones IP privadas (por ejemplo las dos usan
        <code class="systemitem">192.168.1.x</code>)debería renumerar
	una de las dos redes.</p><p>La topología de red se parecería a esto:</p><div class="mediaobject" align="center"><img src="security/ipsec-network.png" align="middle" /></div><p>Observe las dos direcciones IP públicas.  Usaré
        letras para referirme a ellas en el resto de este artículo.
        El cualquier lugar que vea esas letras en este artículo
        reemplácelas con su propia dirección IP pública.
        Observe también que internamente las dos máquinas
        que hacen de puerta de enlace tienen la dirección IP .1,
	y que las dos redes tienen direcciones IP privadas diferentes
        (<code class="systemitem">192.168.1.x</code> y <code class="systemitem">192.168.2.x</code> respectivamente).  Todas las
        máquinas de las redes privadas están configuradas para
        utilizar la máquina <code class="systemitem">.1</code>
        como su puerta de enlace por defecto.</p><p>La intención es que, desde el punto de vista de la
        red, cada red debe ver las máquinas en la otra red como
        si estuvieran directamente conectadas al mismo router (aunque
        aunque sea un router ligeramente lento con una tendencia
        ocasional a tirar paquetes).</p><p>Esto significa que (por ejemplo), la máquina
        <code class="systemitem">192.168.1.20</code> debe ser
        capaz de ejecutar</p><pre class="programlisting">ping 192.168.2.34</pre><p>y recibir de forma transparente una respuesta.  Las
        máquinas <span class="trademark">Windows</span>® deben ser capaces de ver las
        máquinas de la otra red, acceder a sus ficheros
	compartidos, etc, exactamente igual que cuando acceden a
        las máquinas de la red local.</p><p>Y todo debe hacerse de forma segura.  Esto significa que el
        tráfico entre las dos redes tiene que ser
        cifrado.</p><p>La creación de una VPN entre estas dos redes es un
        proceso que requiere varios pasos.  Las etapas son estas:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Crear un enlace de red <span class="quote">&#8220;<span class="quote">virtual</span>&#8221;</span> entre las dos
            redes, a través de Internet.  Probarlo usando herramientas
            como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> para asegurarse de que funcione.</p></li><li class="listitem"><p>Aplicar políticas de seguridad para asegurarse
            de que el tráfico entre las dos redes sea cifrado
            y descifrado de forma transparente.  Comprobarlo mediante
            herramientas como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> para asegurarse de que
            el tráfico esté siendo efectivamente
	    cifrado.</p></li><li class="listitem"><p>Configurar software adicional en las puertas de
	    enlace FreeBSD para permitir a las máquinas <span class="trademark">Windows</span>®
            verse entre ellas a través de la VPN.</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74145232"></a>14.10.3.1. Paso 1: Creación y prueba de un enlace de
        red <span class="quote">&#8220;<span class="quote">virtual</span>&#8221;</span></h4></div></div></div><p>Suponga que está en la puerta de enlace de la red
        red #1 (con dirección IP pública <code class="systemitem">A.B.C.D</code>, dirección IP privada
        <code class="systemitem">192.168.1.1</code>), y ejecuta
        <code class="command">ping 192.168.2.1</code>, que es la dirección
        privada de la máquina con dirección IP
        <code class="systemitem">W.X.Y.Z</code>.  ?Qué
	hace falta para esto?</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>La puerta de enlace necesita saber cómo alcanzar
            a <code class="systemitem">192.168.2.1</code>.  En otras
            palabras, necesita tener una ruta hasta <code class="systemitem">192.168.2.1</code>.</p></li><li class="listitem"><p>Las direcciones IP privadas, como las que están
	    en el rango <code class="systemitem">192.168.x</code>
            no deberían aparecer en Internet.  Por eso, cada paquete
            que mande a <code class="systemitem">192.168.2.1</code>
            necesitará encerrarse dentro de otro paquete.
            Este paquete debe tener todas las características
            de haber sido enviado desde
	    <code class="systemitem">A.B.C.D</code>,
            y tendrá que ser enviado a <code class="systemitem">W.X.Y.Z</code>.  Este proceso recibe el nombre
            de <em class="firstterm">encapsulado</em>.</p></li><li class="listitem"><p>Una vez que este paquete llega a
            <code class="systemitem">W.X.Y.Z</code> necesitará
            ser <span class="quote">&#8220;<span class="quote">desencapsulado</span>&#8221;</span>, y entregado a
            <code class="systemitem">192.168.2.1</code>.</p></li></ol></div><p>Puede verlo como si necesitara un <span class="quote">&#8220;<span class="quote">túnel</span>&#8221;</span>
        entre las dos redes.  Las dos <span class="quote">&#8220;<span class="quote">bocas del túnel</span>&#8221;</span>
        son las direcciones IP <code class="systemitem">A.B.C.D</code> y
        <code class="systemitem">W.X.Y.Z</code>, y debe hacer que el
	túnel sepa cuáles serán las direcciones
	IP privadas que tendrán permitido el paso a través
	de él.  El túnel se usa para transferir tráfico
        con direcciones IP privadas a través de la Internet
        pública.</p><p>Este túnel se crea mediante la interfaz genérica,
        o dispositivo <code class="filename">gif</code> en FreeBSD.  Como
        puede imaginarse la interfaz <code class="filename">gif</code>
        de cada puerta de enlace debe configurarse con cuatro
        direcciones IP:  dos para las direcciones IP públicas,
        y dos para las direcciones IP privadas.</p><p>El soporte para el dispositivo gif debe compilarse en el
        kernel de FreeBSD en ambas máquinas añadiendo
        la línea</p><pre class="programlisting">device gif</pre><p>a los ficheros de configuración del kernel de
        ambas máquinas, compilarlo, instalarlo y reiniciar.</p><p>La configuración del túnel es un proceso
        que consta de dos partes.  Primero se le debe decir al
	túnel cuáles son las direcciones IP exteriores
        (o públicas) mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gifconfig</span>(8)</span></a>.  Después
        configure las direcciones IP con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.X las funciones de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gifconfig</span>(8)</span></a>
          se han incluido en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>.</p></div><p>En la puerta de enlace de la red #1 debe ejecutar
        las siguientes dos órdenes para configurar el
	túnel.</p><pre class="programlisting">gifconfig gif0 A.B.C.D W.X.Y.Z
ifconfig gif0 inet 192.168.1.1 192.168.2.1 netmask 0xffffffff
      </pre><p>En la otra puerta de enlace ejecute las mismas
        órdenes, pero con el orden las direcciones IP
        invertido.</p><pre class="programlisting">gifconfig gif0 W.X.Y.Z A.B.C.D
ifconfig gif0 inet 192.168.2.1 192.168.1.1 netmask 0xffffffff
      </pre><p>Ahora ejecute:</p><pre class="programlisting">gifconfig gif0</pre><p>y podrá ver la configuración.  Por ejemplo, en la
        puerta de enlace de la red #1 vería algo parecido
	a esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gifconfig gif0</code></strong>
gif0: flags=8011&lt;UP,POINTTOPOINT,MULTICAST&gt; mtu 1280
inet 192.168.1.1 --&gt; 192.168.2.1 netmask 0xffffffff
physical address inet A.B.C.D --&gt; W.X.Y.Z
      </pre><p>Como puede ver se ha creado un túnel entre las direcciones
        físicas <code class="systemitem">A.B.C.D</code> y
        <code class="systemitem">W.X.Y.Z</code>, y el tráfico
        que puede pasar a través del túnel es entre
        <code class="systemitem">192.168.1.1</code> y
        <code class="systemitem">192.168.2.1</code>.</p><p>Esto también habrá agregado una entrada en
        la tabla de rutas de ambas máquinas, que puede
        examinar con <code class="command">netstat -rn</code>.
        Esta salida es de la puerta de enlace de la red #1.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>netstat -rn</code></strong>
Routing tables

Internet:
Destination      Gateway       Flags    Refs    Use    Netif  Expire
...
192.168.2.1      192.168.1.1   UH        0        0    gif0
...
      </pre><p>Como el valor de <span class="quote">&#8220;<span class="quote">Flags</span>&#8221;</span> lo indica, esta
        es una ruta de equipo, lo que significa que cada puerta de
        enlace sabe como alcanzar la otra puerta de enlace, pero no saben
	cómo llegar al resto de sus respectivas redes.  Ese
        problema se solucionará en breve.</p><p>Es posible que disponga de un cortafuegos en ambas
        máquinas, por lo que tendrá que buscar la
	forma de que el tráfico de la VPN pueda entrar y
	salir limpiamente.  Puede permitir todo el tráfico
	de ambas redes, o puede que quiera incluir reglas en el
	cortafuegos para que protejan ambos extremos de la VPN uno
	del otro.</p><p>Las pruebas se simplifican enormemente si configura
        el cortafuegos para permitir todo el tráfico a
        través de la VPN.  Siempre puede ajustar las cosas
        después.  Si utiliza <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a> en las puertas de
        enlace una orden similar a</p><pre class="programlisting">ipfw add 1 allow ip from any to any via gif0</pre><p>permitirá todo el tráfico entre los dos
        extremos de la VPN, sin afectar al resto de reglas del
        cortafuegos.  Obviamente tendrá que ejecutar esta orden
        en ambas puertas de enlace.</p><p>Esto es suficiente para permitir a cada puerta de enlace
        hacer un ping entre ellas.  En
	<code class="systemitem">192.168.1.1</code> deberí poder
        ejecutar</p><pre class="programlisting">ping 192.168.2.1</pre><p>y obtener una respuesta; es obvio que debería poder
        hacer los mismo en la otra puerte de enlace.</p><p>Aún no podrá acceder a las máquinas
        internas de las redes.  El problema está en el
	encaminamiento: aunque las puertas de enlace saben
	cómo alcanzarse mútuamente no saben cómo
	llegar a la red que hay detrás de la otra.</p><p>Para resolver este problema debe añadir una ruta
        estática en cada puerta de enlace.  La orden
        en la primera puerta de enlace podría ser:</p><pre class="programlisting">route add 192.168.2.0 192.168.2.1 netmask 0xffffff00
      </pre><p>Esto significa <span class="quote">&#8220;<span class="quote">Para alcanzar los equipos en
        la red <code class="systemitem">192.168.2.0</code>, envía
        los paquetes al equipo
	<code class="systemitem">192.168.2.1</code></span>&#8221;</span>.
        Necesitará ejecutar una orden similar en la otra
        puerta de enlace, pero obviamente con las direcciones
        <code class="systemitem">192.168.1.x</code>.</p><p>El tráfico IP de equipos en una red no será
        capaz de alcanzar equipos en la otra red.</p><p>Ya tiene dos tercios de una VPN, puesto que ya es
        <span class="quote">&#8220;<span class="quote">virtual</span>&#8221;</span> y es una <span class="quote">&#8220;<span class="quote">red</span>&#8221;</span>.
        Todavía no es privada.  Puede comprobarlo con
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a>.  Abra una sesión en
	la puerta de enlace y ejecute</p><pre class="programlisting">tcpdump dst host 192.168.2.1</pre><p>En otra sesión en el mismo equipo ejecute</p><pre class="programlisting">ping 192.168.2.1</pre><p>Verá algo muy parecido a esto:</p><pre class="programlisting">
16:10:24.018080 192.168.1.1 &gt; 192.168.2.1: icmp: echo request
16:10:24.018109 192.168.1.1 &gt; 192.168.2.1: icmp: echo reply
16:10:25.018814 192.168.1.1 &gt; 192.168.2.1: icmp: echo request
16:10:25.018847 192.168.1.1 &gt; 192.168.2.1: icmp: echo reply
16:10:26.028896 192.168.1.1 &gt; 192.168.2.1: icmp: echo request
16:10:26.029112 192.168.1.1 &gt; 192.168.2.1: icmp: echo reply
      </pre><p>Como puede ver los mensajes ICMP van y vienen sin
        cifrar.  Si usa el parámetro <code class="option">-s</code>
        en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> para tomar más bytes de datos de
        estos paquetes verá más información.</p><p>Obviamente esto es inaceptable.  La siguiente sección
        explicará cómo asegurar el enlace entre las dos
        redes para que todo el tráfico se cifre
        automáticamente.</p><div class="itemizedlist"><div class="itemizedlist-title">Sumario:</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configure ambos kernel con <span class="quote">&#8220;<span class="quote">pseudo-device
            gif</span>&#8221;</span>.</p></li><li class="listitem"><p>Edite <code class="filename">/etc/rc.conf</code> en la puerta de
            enlace #1 y añada las siguientes líneas
            (reemplazando las direcciones IP según sea necesario).</p><pre class="programlisting">gifconfig_gif0="A.B.C.D W.X.Y.Z"
ifconfig_gif0="inet 192.168.1.1 192.168.2.1 netmask 0xffffffff"
static_routes="vpn"
route_vpn="192.168.2.0 192.168.2.1 netmask 0xffffff00"
          </pre></li><li class="listitem"><p>Edite la configuración de su cortafuegos
            (<code class="filename">/etc/rc.firewall</code>, o lo que corresponda)
            en ambos equipos y añada</p><pre class="programlisting">ipfw add 1 allow ip from any to any via gif0</pre></li><li class="listitem"><p>Haga los cambios oportunos en el
            <code class="filename">/etc/rc.conf</code> de la puerta de
            enlace #2, invirtiendo el orden de las direcciones IP.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74219216"></a>14.10.3.2. Paso 2: Asegurar el enlace</h4></div></div></div><p>Para asegurar el enlace usaremos IPsec. IPsec ofrece un
        mecanismo para que dos equipos coincidan en una llave de
        cifrado, y usar esta llave para cifrar los datos
        entre los dos equipos.</p><p>Existen dos áreas de configuración a
        tener en cuenta:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Debe existir un mecanismo para que los dos equipos
            se pongan de acuerdo en el mecanismo de cifrado que van a
            utilizar.  Una vez que los dos equipos se han puesto de
            acuerdo dice que existe una
            <span class="quote">&#8220;<span class="quote">asociación de seguridad</span>&#8221;</span> entre
            ellos.</p></li><li class="listitem"><p>Debe existir un mecanismo para especificar que tráfico
            debe ser cifrado.  Obviamente, usted no querrá
            cifrar todo su tráfico saliente: solo querrá
            cifrar el tráfico que es parte de la VPN.  Las
            reglas con las que determinará qué tráfico
            será cifrado se llaman <span class="quote">&#8220;<span class="quote">políticas
            de seguridad</span>&#8221;</span>.</p></li></ol></div><p>Tanto las asociaciones de seguridad como las
         políticas de seguridad son responsabilidad del kernel,
	 pero pueden ser modificadas desde el espacio de usuario.
	 Antes de poder hacerlo, tendrá que configurar el kernel
	 para que incluya IPsec y el protocolo ESP
         (Encapsulated Security Payload).  Incluya en el fichero de
	 configuración de su kernel lo siguiente:</p><a id="idp74223824" class="indexterm"></a><pre class="programlisting">options IPSEC
options IPSEC_ESP
       </pre><p>Recompile y resintale su kernel y reinicie.  Como se dijo
         anteriormente, tendrá que hacer lo mismo en el kernel
	 de las dos puertas de enlace.</p><a id="idp74229968" class="indexterm"></a><p>Tiene dos opciones cuando se trata de configurar
         asociaciones de seguridad.  Puede configurarlas a mano en
         los dos equipos, lo que significa elegir el algoritmo de
         cifrado, las llaves de cifrado, etc, o puede utilizar
         alguno de los dæmons que implementan el protocolo
         de intercambio de llaves de Internet (IKE, Internet Key
	 Exchange).</p><p>Le recomiendo la segunda opción.  Aparte de
         otras consideraciones es más fácil de
	 configurar.</p><a id="idp74231504" class="indexterm"></a><a id="idp74232656" class="indexterm"></a><p>La edición y despliegue se efectúa con
         <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a>.  Todo esto se entiende mejor con una
	 analogía.  <code class="command">setkey</code> es a las tablas
	 de políticas de seguridad del kernel lo que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>
	 es a las tablas de rutas del kernel.
         También puede usar <code class="command">setkey</code>
         ver las asociaciones de seguridad en vigor, siguiendo con
         la analogía, igual que puede usar
         <code class="command">netstat -r</code>.</p><p>Existen numerosos dæmons que pueden encargarse de
         la gestión de asociaciones de seguridad en FreeBSD.  En
	 este texto se muestra cómo usar uno de ellos,
         racoon (que puede instalar desde
         <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/racoon/pkg-descr">security/racoon</a> en la
         colección de ports de FreeBSD.</p><a id="idp74237520" class="indexterm"></a><p>El software <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/racoon/pkg-descr">security/racoon</a>
         debe ejecutarse en las dos puertas de enlace.  En cada equipo
         debe configurar la dirección IP del otro extremo de la
         VPN y una llave secreta (que usted puede y debe elegir, y debe ser
	 la misma en ambas puertas de enlace).</p><p>Los dos dæmons entran en contacto uno con otro, y confirman
         que son quienes dicen ser (utilizando la llave secreta que usted
         configuró).  Los dæmons generan una nueva llave
         secreta, y la utilizan para cifrar el tráfico que discurre a
         través de la VPN.  Periódicamente cambian esta
         llave, para que incluso si un atacante comprometiera una
         de las llaves (lo cual es teóricamente cercano a
	 imposible) no le serviriía de mucho: para cuando el
	 atacante haya <span class="quote">&#8220;<span class="quote">crackeado</span>&#8221;</span> la llave los dæmons
         ya habrán escogido una nueva.</p><p>El fichero de configuración de racoon
         está en <code class="filename">${PREFIX}/etc/racoon</code>.
         No debería tener que hacer demasiados cambios a ese
	 fichero.  El otro componente de la configuración de
	 racoon (que <span class="emphasis"><em>sí</em></span> tendrá que
	 modificar) es la <span class="quote">&#8220;<span class="quote">llave pre-compartida</span>&#8221;</span>.</p><p>La configuración por defecto de racoon
         espera encontrarla en
	 <code class="filename">${PREFIX}/etc/racoon/psk.txt</code>.
         Es importante saber que la llave precompartida <span class="emphasis"><em>no</em></span>
         es la llave que se utilizará para cifrar el
         tráfico a través del enlace VPN; solamente es una
         muestra que permite a los dæmons que administran las
         llaves confiar el uno en el otro.</p><p><code class="filename">psk.txt</code> contiene una línea
         por cada sitio remoto con el que esté tratando.  En
         nuestro ejemplo, donde existen dos sitios, cada fichero
         <code class="filename">psk.txt</code> contendrá una línea
         (porque cada extremo de la VPN solo está tratando
         con un sitio en el otro extremo).</p><p>En la puerta de enlace #1 esta línea debería
         parecerse a esta:</p><pre class="programlisting">W.X.Y.Z            secreto</pre><p>Esto es, la dirección IP
         <span class="emphasis"><em>pública</em></span> del extremo remoto, un
	 espacio en blanco, y una cadena de texto que es el secreto
	 en sí.
         en el extremo remoto, espacio en blanco, y un texto de cadena que
         proporcina el secreto. Obviamente, no debe utilizar
	 <span class="quote">&#8220;<span class="quote">secret</span>&#8221;</span> como su llave; aplique aquí las
	 reglas y recomendaciones habituales para la elección de
	 contraseñas.</p><p>En la puerta de enlace #2 la línea se parecería
         a esta</p><pre class="programlisting">A.B.C.D            secreto</pre><p>Esto es, la dirección IP pública del
         extremo remoto, y la misma llave secreta.
	 <code class="filename">psk.txt</code> debe tener modo
         <code class="literal">0600</code> (es decir, modo de solo
         lectura/escritura para <code class="systemitem">root</code>) antes de
         que ejecute racoon.</p><p>Debe ejecutar racoon en ambas puertas de enlace.
         También tendrá que añadir algunas reglas
         a su cortafuegos para permitir el tráfico IKE, que se
         transporta sobre UDP al puerto ISAKMP (Internet Security
         Association Key Management Protocol).   Esto debe estar
         al principio de las reglas de su cortafuegos.</p><pre class="programlisting">ipfw add 1 allow udp from A.B.C.D to W.X.Y.Z isakmp
ipfw add 1 allow udp from W.X.Y.Z to A.B.C.D isakmp
       </pre><p>Una vez que ejecute racoon puede tratar de hacer un
         ping a una puerta de enlace desde la otra.  La conexión
         todavía no está cifrada porque aún no se
         han creado las asociaciones de seguridad entre los dos
         equipos: esto puede llevar un poco de tiempo; es posible que
	 advierta un pequeño retraso antes de los ping empiecen
         responder.</p><p>Una vez creadas las asociaciones de seguridad
         puede verlas utilizando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a>. Ejecute</p><pre class="programlisting">setkey -D</pre><p>en cualquiera de los equipos para comprobar la información
         de la asociación de seguridad.</p><p>Ya está resuelta la mitad del problema. La otra mitad es
         configurar sus políticas de seguridad.</p><p>Queremos crear una política de seguridad sensata,
         así que vamos a revisar lo que tenemos configurado
	 hasta el momento.  Esta revisión abarca ambos extremos
	 del enlace.</p><p>Cada paquete IP que usted manda tiene una cabecera que
         contiene datos acerca del paquete.  La cabecera incluye la
         dirección IP de destino y del origen.  Como ya sabemos,
         las direcciones IP privadas como el rango
         <code class="systemitem">192.168.x.y</code> no deberían
         aparezcan en Internet.  Dado que es a través de Internet
	 por donde los queremos transmitir los debemos encapsular dentro
	 de otro paquete.  Este paquete debe contener tanto la dirección
	 IP de destino y origen públicas sustituidas por las
	 direcciones privadas.</p><p>Así que si su paquete saliente empezó
         pareciendose a este:</p><div class="mediaobject" align="center"><img src="security/ipsec-out-pkt.png" align="middle" /></div><p>tras el encapsulado se parecerá bastante a este:</p><div class="mediaobject" align="center"><img src="security/ipsec-encap-pkt.png" align="middle" /></div><p>El dispositivo <code class="filename">gif</code> se encarga
         del encapsulado.  Como puede ver el paquete tiene una
	 dirección IP real en el exterior, y nuestro paquete
	 original ha sido envuelto como dato dentro del paquete que
	 enviaremos a través de Internet.</p><p>Obviamente, queremos que todo el tráfico entre
         las VPN vaya cifrado.  Pongamos esto último en
	 palabras para comprenderlo mejor:</p><p><span class="quote">&#8220;<span class="quote">Si un paquete sale desde <code class="systemitem">A.B.C.D</code>, y tiene como destino
         <code class="systemitem">W.X.Y.Z</code>, cífralo
         utilizando las asociaciones de seguridad necesarias.</span>&#8221;</span></p><p><span class="quote">&#8220;<span class="quote">Si un paquete llega desde <code class="systemitem">W.X.Y.Z</code>, y tiene como destino
         <code class="systemitem">A.B.C.D</code>, descífralo
         utilizando las asociaciones de seguridad necesarias.</span>&#8221;</span></p><p>Este planteamiento se aproxima bastante, pero no es
         exactamente lo que queremos hacer.  Si lo hiciera así
         todo el tráfico desde y hacia
	 <code class="systemitem">W.X.Y.Z</code>, incluso el tráfico
         que no forma parte de la VPN, será cifrado; esto no es lo que
	 queremos.  La política correcta es la siguiente:</p><p><span class="quote">&#8220;<span class="quote">Si un paquete sale desde <code class="systemitem">A.B.C.D</code>, y está
         encapsulando a otro paquete, y tiene como destino
         <code class="systemitem">W.X.Y.Z</code>, cífralo
         utilizando las asociaciones de seguridad necesarias.</span>&#8221;</span></p><p><span class="quote">&#8220;<span class="quote">Si un paquete llega desde <code class="systemitem">W.X.Y.Z</code>, y está
          encapsulando a otro paquete, y tiene como destino
          <code class="systemitem">A.B.C.D</code>, descífralo
          utilizando las asociaciones de seguridad necesarias.</span>&#8221;</span></p><p>Un cambio sutil, pero necesario.</p><p>Las políticas de seguridad también se
         imponen utilizando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a> proporciona
         un lenguaje de configuración para definir la
         política.  Puede introducir las instrucciones de
         configuración a través de la entrada estándar
	 (stdin), o puede usar la opción
         <code class="option">-f</code> para especificar un fichero que
         contenga las instrucciones de configuración.</p><p>La configuración en la puerta de enlace #1 (que
         tiene la dirección IP pública
         <code class="systemitem">A.B.C.D</code>) para forzar que todo
         el tráfico saliente hacia
	 <code class="systemitem">W.X.Y.Z</code> vaya cifrado es:</p><pre class="programlisting">
spdadd A.B.C.D/32 W.X.Y.Z/32 ipencap -P out ipsec esp/tunnel/A.B.C.D-W.X.Y.Z/require;
       </pre><p>Ponga estas órdenes en un fichero (por ejemplo
         <code class="filename">/etc/ipsec.conf</code>) y ejecute</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -f /etc/ipsec.conf</code></strong></pre><p><code class="option">spdadd</code> le dice a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a> que
         queremos añadir una regla a la base de datos de
	 políticas de seguridad.  El resto de la línea
	 especifica qué paquetes se ajustarán a esta
         política.
         <code class="systemitem">A.B.C.D/32</code> y
         <code class="systemitem">W.X.Y.Z/32</code> son las direcciones IP
         y máscaras de red que identifican la red o equipos a los
         que se aplicará esta política.  En nuestro caso
         queremos aplicarla al tráfico entre estos dos equipos.
         <code class="option">-P out</code> dice que esta política se aplica
         a paquetes salientes, e <code class="option">ipsec</code> hace que el
         paquete sea asegurado.</p><p>La segunda línea especifica cómo será
         cifrado este paquete.   <code class="option">esp</code> es el
         protocolo que se utilizará, mientras que
         <code class="option">tunnel</code> indica que el paquete será
         después encapsulado en un paquete IPsec.  El uso repetido de
         <code class="systemitem">A.B.C.D</code> y
         <code class="systemitem">W.X.Y.Z</code> se utiliza para
         seleccionar la asociación de seguridad a usar, y
         por último <code class="option">require</code> exige que los
         paquetes deben cifrarse si concuerdan con esta
         regla.</p><p>Esta regla solo concuerda con paquetes salientes.
         Necesitará una regla similar para los paquetes
         entrantes.</p><pre class="programlisting">spdadd W.X.Y.Z/32 A.B.C.D/32 ipencap -P in ipsec esp/tunnel/W.X.Y.Z-A.B.C.D/require;</pre><p>Observe el <code class="option">in</code> en lugar del <code class="option">out</code>
         en este caso, y la inversión necesaria de las direcciones
         IP.</p><p>La otra puerta de enlace (que tiene la dirección
         IP pública <code class="systemitem">W.X.Y.Z</code>)
         necesitará reglas similares.</p><pre class="programlisting">spdadd W.X.Y.Z/32 A.B.C.D/32 ipencap -P out ipsec esp/tunnel/W.X.Y.Z-A.B.C.D/require;
spdadd A.B.C.D/32 W.X.Y.Z/32 ipencap -P in ipsec esp/tunnel/A.B.C.D-W.X.Y.Z/require;</pre><p>Finalmente, necesita añadir reglas a su cortafuegos
         para permitir la circulación de paquetes ESP e IPENCAP
         de ida y vuelta.  Tendrá que añadir reglas como
	 estas a ambos equipos.</p><pre class="programlisting">ipfw add 1 allow esp from A.B.C.D to W.X.Y.Z
ipfw add 1 allow esp from W.X.Y.Z to A.B.C.D
ipfw add 1 allow ipencap from A.B.C.D to W.X.Y.Z
ipfw add 1 allow ipencap from W.X.Y.Z to A.B.C.D
       </pre><p>Debido a que las reglas son simétricas puede utilizar
         las mismas reglas en ambas puertas de enlace.</p><p>Los paquetes salientes tendrán ahora este aspecto:</p><div class="mediaobject" align="center"><img src="security/ipsec-crypt-pkt.png" align="middle" /></div><p>Cuando los paquetes llegan al otro extremo de la VPN
         serán descifrados (utilizando las
         asociaciones de seguridad que han sido negociadas por racoon).
         Después entrarán al interfaz
	 <code class="filename">gif</code>, que desenvuelve la segunda capa,
	 hasta que nos quedamos con paquete má interno, que puede
	 entonces viajar a la red interna.</p><p>Puede revisar la seguridad utilizando la misma prueba de
         <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> anterior.  Primero, inicie una sesión en
         la puerta de enlace <code class="systemitem">A.B.C.D</code>,
         y ejecute:</p><pre class="programlisting">tcpdump dst host 192.168.2.1</pre><p>En otra sesión en la misma máquina ejecute</p><pre class="programlisting">ping 192.168.2.1</pre><p>Debería ver algo similar a lo siguiente:</p><pre class="programlisting">XXX tcpdump output</pre><p>ahora, como puede ver, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a> muestra los paquetes ESP.
         Si trata de examinarlos con la opción <code class="option">-s</code>
         verá basura (aparentemente), debido al
	 cifrado.</p><p>Felicidades. Acaba de configurar una VPN entre dos sitios
        remotos.</p><div class="itemizedlist"><div class="itemizedlist-title">Sumario</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configure ambos kernel con:</p><pre class="programlisting">options IPSEC
options IPSEC_ESP
          </pre></li><li class="listitem"><p>Instale <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/racoon/pkg-descr">security/racoon</a>.
            Edite <code class="filename">${PREFIX}/etc/racoon/psk.txt</code> en ambas
            puertas de enlace añadiendo una entrada para la
	    dirección IP del equipo remoto y una llave secreta que
	    ambos conozcan.  Asegúrese de que este fichero esté
	    en modo 0600.</p></li><li class="listitem"><p>Añada las siguientes líneas a
            <code class="filename">/etc/rc.conf</code> en ambos equipos:</p><pre class="programlisting">ipsec_enable="YES"
ipsec_file="/etc/ipsec.conf"
          </pre></li><li class="listitem"><p>Crée en ambos equipos un
	    <code class="filename">/etc/ipsec.conf</code> que contenga las
            líneas spdadd necesarias.  En la puerta de enlace
            #1 sería:</p><pre class="programlisting">
spdadd A.B.C.D/32 W.X.Y.Z/32 ipencap -P out ipsec
  esp/tunnel/A.B.C.D-W.X.Y.Z/require;
spdadd W.X.Y.Z/32 A.B.C.D/32 ipencap -P in ipsec
  esp/tunnel/W.X.Y.Z-A.B.C.D/require;
</pre><p>En la puerta de enlace #2 sería:</p><pre class="programlisting">
spdadd W.X.Y.Z/32 A.B.C.D/32 ipencap -P out ipsec
  esp/tunnel/W.X.Y.Z-A.B.C.D/require;
spdadd A.B.C.D/32 W.X.Y.Z/32 ipencap -P in ipsec
  esp/tunnel/A.B.C.D-W.X.Y.Z/require;
</pre></li><li class="listitem"><p>Añada a su(s) cortafuegos las reglas necesarias para
	    que permita(n) el paso de tráfico IKE, ESP e
            IPENCAP en ambos equipos:</p><pre class="programlisting">
ipfw add 1 allow udp from A.B.C.D to W.X.Y.Z isakmp
ipfw add 1 allow udp from W.X.Y.Z to A.B.C.D isakmp
ipfw add 1 allow esp from A.B.C.D to W.X.Y.Z
ipfw add 1 allow esp from W.X.Y.Z to A.B.C.D
ipfw add 1 allow ipencap from A.B.C.D to W.X.Y.Z
ipfw add 1 allow ipencap from W.X.Y.Z to A.B.C.D
          </pre></li></ul></div><p>Los dos pasos previos deben bastar para levantar la VPN.
        Las máquinas en cada red seán capaces de
        dirigirse una a otra utilizando direcciones IP, y todo el
	tráfico a través del enlace será cifrado de
	forma automática y segura.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssh"></a>14.11. OpenSSH</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><a id="idp74325200" class="indexterm"></a><a id="idp74325712" class="indexterm"></a><p><span class="application">OpenSSH</span> es un conjunto de herramientas
      de conectividad que se usan para acceder a sistemas remotos de
      forma segura.  Puede usarse como sustituto directo de
      <code class="command">rlogin</code>,
      <code class="command">rsh</code>, <code class="command">rcp</code> y
      <code class="command">telnet</code>.  Además cualquier otra conexión
      TCP/IP puede reenviarse o enviarse a través de un túnel a
      través de SSH.
      <span class="application">OpenSSH</span> cifra todo el tráfico para
      eliminar de forma efectiva el espionaje, el secuestro de conexiones, y
      otros ataques en la capa de red.</p><p><span class="application">OpenSSH</span> está a cargo del proyecto
      OpenBSD, y está basado en SSH v1.2.12, con todos los errores
      recientes corregidos y todas las actualizaciones correspondientes.
      Es compatible con los protocolos SSH 1 y 2.
      <span class="application">OpenSSH</span> forma parte del sistema base desde
      FreeBSD 4.0.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74330448"></a>14.11.1. Ventajas de utilizar OpenSSH</h3></div></div></div><p>Normalmente, al utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>
        los datos se envían a través de la red en limpio,
        es decir, sin cifrar.  Cualquier <span class="quote">&#8220;<span class="quote">sniffer</span>&#8221;</span> de red
        entre el cliente y el servidor puede robar la información
        de usuario/contraseña o los datos transferidos durante
        su sesión.  <span class="application">OpenSSH</span> ofrece
        diversos métodos de validación y cifrado para
	evitar que sucedan estas cosas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74346320"></a>14.11.2. Habilitar sshd</h3></div></div></div><a id="idp74346960" class="indexterm"></a><p>El dæmon <span class="application">sshd</span> está
        habilitado por defecto FreeBSD 4.X y puede elegir habilitarlo
        o no durante la instalación en FreeBSD 5.X.  Si quiere
	saber si está habilitado revise si la siguiente
        línea está en <code class="filename">rc.conf</code>:</p><pre class="screen">sshd_enable="YES"</pre><p>Esta línea  cargará <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>, el programa
        dæmon de <span class="application">OpenSSH</span>, en el arranque
        de su sistema.  Puede ejecutar el dæmon
        <span class="application">sshd</span> tecleando
        <code class="command">sshd</code> en la línea de órdenes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74356304"></a>14.11.3. Cliente SSH</h3></div></div></div><a id="idp74356944" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> funciona de manera
        similar a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ssh user@example.com</code></strong>
Host key not found from the list of known hosts.
Are you sure you want to continue connecting (yes/no)? <strong class="userinput"><code>yes</code></strong>
Host 'ejemplo.com' added to the list of known hosts.
usuario@ejemplo.com's password: <strong class="userinput"><code>*******</code></strong></pre><p>El login continuará como lo haría si fuera
        una sesión de <code class="command">rlogin</code> o
        <code class="command">telnet</code>.  SSH utiliza un sistema de huellas de
        llaves para verificar la autenticidad del servidor cuando el
        cliente se conecta.  Se le pide al usuario que introduzca
        <code class="literal">yes</code> solamente la primera vez que se
        conecta.  Todos los intentos futuros de login se verifican
        contra la huella de la llave guardada la primera vez.
	El cliente SSH le alertará si la huella guardada difiere
        de la huella recibida en futuros intentos de acceso al sistema.
        Las huellas se guardan en
        <code class="filename">~/.ssh/known_hosts</code>, y en
        <code class="filename">~/.ssh/known_hosts2</code> las huellas
        SSH v2.</p><p>Por defecto las versiones recientes de
        los servidores <span class="application">OpenSSH</span> solamente
        aceptan conexiones SSH v2.  El cliente utilizará la
        versión 2 si es posible y pasará como
        respaldo a la versión 1.  El cliente puede también
        ser obligado a utilizar una u otra pasándole
	<code class="option">-1</code> o <code class="option">-2</code>, respectivamente para
        la versión 1 y la  versión 2.  Se mantiene la
	compatibilidad del cliente con la versión 1 para
        mantener la compatibilidad con versiones antiguas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74365648"></a>14.11.4. Copia segura</h3></div></div></div><a id="idp74366288" class="indexterm"></a><a id="idp74367440" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> funciona de manera muy similar a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>;
        copia un fichero desde o hacia un sistema remoto, con la
	diferencia de que lo hace de una forma segura.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code> scp usuario@ejemplo.com:/COPYRIGHT COPYRIGHT</code></strong>
usuario@ejemplo.com's password: <strong class="userinput"><code>*******</code></strong>
COPYRIGHT            100% |*****************************|  4735
00:00
<code class="prompt">#</code></pre><p>Ya que la huella se guardó en este equipo durante
        el ejemplo anterior se verifica ahora al utilizar
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a>.</p><p>Los argumentos de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> son similares
        a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cp</span>(1)</span></a>, con el fichero o ficheros como primer
        argumento, y el destino como segundo.  Ya que el fichero
        se transfiere a través de la red, a través de
        SSH, uno o más argumentos tienen la estructura
	<code class="option">user@host:&lt;ruta_al_fichero_remoto&gt;</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74383568"></a>14.11.5. Configuración</h3></div></div></div><a id="idp74384208" class="indexterm"></a><p>Los ficheros de configuración del sistema
        tanto para el dæmon <span class="application">OpenSSH</span>
        como para el cliente están en
	<code class="filename">/etc/ssh</code>.</p><p><code class="filename">ssh_config</code> contiene las opciones
        del cliente, mientras que <code class="filename">sshd_config</code>
        configura el dæmon.</p><p>Además las opciones <code class="option">sshd_program</code>
        (<code class="filename">/usr/sbin/sshd</code> por defecto),
        y <code class="option">sshd_flags</code> de <code class="filename">rc.conf</code>
        ofrecer más niveles de configuración.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-keygen"></a>14.11.6. ssh-keygen</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> le permite validar a un usuario sin
        pedirle la contraseña:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh-keygen -t dsa</code></strong>
Generating public/private dsa key pair.
Enter file in which to save the key (/home/user/.ssh/id_dsa):
Created directory '/home/user/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/user/.ssh/id_dsa.
Your public key has been saved in /home/user/.ssh/id_dsa.pub.
The key fingerprint is:
bb:48:db:f2:93:57:80:b6:aa:bc:f5:d5:ba:8f:79:17 usuario@host.ejemplo.com
</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> creará un par de llaves
        pública y privada para usar en la validación.
        La llave privada se guarda en
        <code class="filename">~/.ssh/id_dsa</code> o en
        <code class="filename">~/.ssh/id_rsa</code>, mientras que la llave
        pública se guarda en <code class="filename">~/.ssh/id_dsa.pub</code>
        o en <code class="filename">~/.ssh/id_rsa.pub</code>, respectivamente para
        llaves DSA y RSA.  La llave pública debe guardarse en
        el <code class="filename">~/.ssh/authorized_keys</code> de la
        máquina remota para que la configuración funcione.
        Las llaves RSA versión 1 deben guardarse en
        <code class="filename">~/.ssh/authorized_keys</code>.</p><p>De este modo permitirá conexiones a la máquina
        remota mediante llaves SSH en lugar de contraseñas.</p><p>Si usa una contraseña al ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>, se
        le pedirá al usuario una contraseña cada
        vez que quiera utilizar la llave privada.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a>
        puede evitar la molestia de introducir repetidamente
        frases largas.   esto se explica  má adelante, en la
        <a class="xref" href="#security-ssh-agent" title="14.11.7. ssh-agent y ssh-add">Sección 14.11.7, &#8220;ssh-agent y ssh-add&#8221;</a>.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las opciones y ficheros pueden ser
        diferentes según la versión de
	<span class="application">OpenSSH</span> que tenga en su sistema;  para
	evitar problemas consulte la página de manual
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-agent"></a>14.11.7. ssh-agent y ssh-add</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> ofrecen
        métodos para que las llaves <span class="application">SSH</span>
        se puedan cargar en memoria, permitiendo eliminar la necesidad de
	teclear la contraseña cada vez que haga falta.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> gestionará la
        validación utilizando la llave (o llaves) privada que
        le cargue.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> se usa para lanzar otras
        aplicaciones.  En el nivel más básico
        puede generar una shell o a un nivel más avanzado un
        gestor de ventanas.</p><p>Para usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> en una shell necesitará
        primero ser invocado como argumento por una shell.  Segundo,
        añada la identidad ejecutando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> y facilitando
        la contraseña de la llave privada.  Completados estos
        pasos el usuario puede hacer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> a cualquier equipo
        que tenga instalada la llave pública correspondiente.
        Por ejemplo:</p><pre class="screen"><code class="prompt">%</code> ssh-agent <em class="replaceable"><code>csh</code></em>
<code class="prompt">%</code> ssh-add
Enter passphrase for /home/user/.ssh/id_dsa:
Identity added: /home/user/.ssh/id_dsa (/home/user/.ssh/id_dsa)
<code class="prompt">%</code></pre><p>Para utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> en X11 tendrá que
        incluir una llamada a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> en
        <code class="filename">~/.xinitrc</code>.  De este modo ofrecerá
        los servicios de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> a todos los programas
	lanzados en X11.  Veamos un ejemplo de
        <code class="filename">~/.xinitrc</code>:</p><pre class="programlisting">exec ssh-agent <em class="replaceable"><code>startxfce4</code></em></pre><p>Esto lanzaría <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a>, que a su
        vez lanzaría <span class="application">XFCE</span> cada
        vez que inicie X11.  Hecho esto y una vez reiniciado X11
        para aplicar los cambios puede ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> para
	cargar todas sus llaves SSH.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-tunneling"></a>14.11.8. Túneles SSH</h3></div></div></div><a id="idp74429648" class="indexterm"></a><p><span class="application">OpenSSH</span> permite crear un túnel
        en el que encapsular otro protocolo en una sesión
	cifrada.</p><p>La siguiente orden le dice a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> que cree un
        túnel para <span class="application">telnet</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5023:localhost:23 usuario@foo.ejemplo.com</code></strong>
<code class="prompt">%</code></pre><p>Veamos las opciones que se le han suministrado a
        <code class="command">ssh</code>:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-2</code></span></dt><dd><p>Obliga a <code class="command">ssh</code> a utilizar la
              versión 2 del protocolo.  (No la use si
              está trabajando con servidores SSH antiguos)</p></dd><dt><span class="term"><code class="option">-N</code></span></dt><dd><p>Indica que no se ejecutará una orden remota, o
	      solamente túnel.  Si se omite,
              <code class="command">ssh</code> iniciaría una sesión
              normal.</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>Obliga a <code class="command">ssh</code> a ejecutarse
              en segundo plano.</p></dd><dt><span class="term"><code class="option">-L</code></span></dt><dd><p>Indica un túnel local según el esquema
              <em class="replaceable"><code>puerto local:equipo remoto:puerto remoto</code></em>.</p></dd><dt><span class="term"><code class="option">usuario@foo.ejemplo.com</code></span></dt><dd><p>El servidor SSH remoto.</p></dd></dl></div><p>Un túnel SSH crea un socket que escucha
         en <code class="systemitem">localhost</code> en el puerto especificado.
         Luego reenvía cualquier conexión
         recibida en el puerto/equipo local vía la
         conexión SSH al puerto o equipo remoto especificado.</p><p>En el ejemplo el puerto <em class="replaceable"><code>5023</code></em> en
        <code class="systemitem">localhost</code> se reenvía al puerto
        <em class="replaceable"><code>23</code></em> del <code class="systemitem">localhost</code>
        de la máquina remota.  Ya que <em class="replaceable"><code>23</code></em>
        es <span class="application">telnet</span>, esto crearía una
	sesión <span class="application">telnet</span> segura a
        través de un túnel SSH.</p><p>Puede usar esto para encapsular cualquier otro
        protocolo TCP inseguro como SMTP, POP3, FTP, etc.</p><div class="example"><a id="idp74466256"></a><div class="example-title">Ejemplo 14.1. Uso de SSH para crear un túnel seguro para SMTP</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5025:localhost:25 usuario@correo.ejemplo.com</code></strong>
usuario@correo.ejemplo.com's password: <strong class="userinput"><code>*****</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>telnet localhost 5025</code></strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 correo.ejemplo.com ESMTP</pre><p>Puede usar esta técnica junto con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
	  y cuentas adicionales de usuario para crear un entorno
	  más transparente, esto es, más cómodo.
	  Puede usar llaves en lugar de teclear contraseñas y
	  puede ejecutar los túneles de varios usuarios.</p></div></div><br class="example-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74470352"></a>14.11.8.1. Ejemplos prácticos de túneles SSH</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74470992"></a>14.11.8.1.1. Acceso seguro a un servidor POP3</h5></div></div></div><p>En el trabajo hay un servidor SSH que acepta
            conexiones desde el exterior.  En la misma red de la
            oficina reside un servidor de correo que ejecuta un
            servidor POP3.  La red, o ruta de red entre su casa y
            oficina puede o no ser completamente de fiar.  Debido
            a esto necesita revisar su correo electrónico
            de forma segura.  La solución es crear una
            conexión SSH al servidor SSH de su oficina y
            llegar por un túnel al servidor de correo.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 2110:correo.ejemplo.com:110 usuario@servidor-ssh.ejemplo.com</code></strong>
usuario@servidor-ssh.ejemplo.com's password: <strong class="userinput"><code>******</code></strong></pre><p>cuando el túnel esté funcionando
            haga que su cliente de correo envíe peticiones
            POP3 a <code class="systemitem">localhost</code> en el puerto 2110.
            La conexión será reenviada de forma totalmente
            segura a traveés del túnel a
	    <code class="systemitem">correo.ejemplo.com</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74478800"></a>14.11.8.1.2. Saltarse un cortafuegos draconiano</h5></div></div></div><p>Algunos administradores de red imponen reglas de
            cortafuegos extremadamente draconianas, filtrando no
            solo las conexiones entrantes, sino también
            las salientes.  Tal vez solo se le otorgue acceso
            a máquinas remotas a través de los puertos 22
            y 80 para ssh y navegar en web.</p><p>Tal vez quiera acceder a otros servicios
	    (que tal vez ni siquiera estén relacionados con el
	    trabajo), como un servidor Ogg Vorbis para escuchar
	    música.  Si ese servidor Ogg Vorbis transmite en
	    un puerto que no sea el 22 o el 80 no podrá tener
	    acceso a él.</p><p>La solución es crear una conexión SSH
            fuera del cortafuegos de su red y utilizarla para hacer un
            túnel al servidor Ogg Vorbis.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 8888:musica.ejemplo.com:8000 usuario@sistema-no-filtrado.ejemplo.org</code></strong>
usuario@sistema-no-filtrado.ejemplo.org's password: <strong class="userinput"><code>*******</code></strong></pre><p>Haga que el programa con el que suele escuchar
	    música haga peticiones a
            <code class="systemitem">localhost</code> puerto 8888, que será
            reenviado a <code class="systemitem">musica.ejemplo.com</code>
            puerto 8000, evadiendo con éxito el cortafuegos.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74483536"></a>14.11.9. La opción de usuarios <code class="varname">AllowUsers</code></h3></div></div></div><p>Limitar qué usuarios pueden entrar y desde dónde
        suele ser razonable.  La opción
        <code class="literal">AllowUsers</code> le permite configurarlo, por
        ejemplo, para permitir entrar solamente al usuario
        <code class="systemitem">root</code> desde
        <code class="systemitem">192.168.1.32</code>.  Puede hacerlo
	con algo parecido a esto en
        <code class="filename">/etc/ssh/sshd_config</code>:</p><pre class="programlisting">AllowUsers root@192.168.1.32</pre><p>Para permitir al usuario <code class="systemitem">admin</code> la
        entrada desde cualquier lugar, solamente introduzca el nombre
        de usuario:</p><pre class="programlisting">AllowUsers admin</pre><p>Puede listar múltiples usuarios en la misma
        línea:</p><pre class="programlisting">AllowUsers root@192.168.1.32 admin</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es importante que incluya a cada usuario que necesite entrar
          a esta máquina o no podrán entrar.</p></div><p>Después de hacer los cambios a b
        <code class="filename">/etc/ssh/sshd_config</code> debe decirle a
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> que cargue de nuevo sus ficheros de
        configuración ejecutando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd reload</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74496720"></a>14.11.10. Lecturas complementarias</h3></div></div></div><p><a class="link" href="http://www.openssh.com/" target="_top">OpenSSH</a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh_config&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ssh_config</span>(5)</span></a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sftp-server&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sftp-server</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd_config&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">sshd_config</span>(5)</span></a></p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="fs-acl"></a>14.12. Listas de control de acceso a sistemas de ficheros</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74516432" class="indexterm"></a><p>Además de otras mejoras del sistema de ficheros como
      las instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>), FreeBSD 5.0 y
      siguientes ofrecen las ACL (<span class="quote">&#8220;<span class="quote">Access Control Lists</span>&#8221;</span>,
      listas de control de acceso) como un elemento más de
      seguridad.</p><p>Las listas de control de acceso extienden el modelo de
      permisos estándar de <span class="trademark">UNIX</span>® de una manera altamente
      compatible (<span class="trademark">POSIX</span>®.1e).  Esta opción permite al
      administrador usar con gran provecho un modelo de seguridad
      más sofisticado.</p><p>Para habilitar soporte de <acronym class="acronym">ACL</acronym> en sistemas
      de ficheros <acronym class="acronym">UFS</acronym> la siguiente opción:</p><pre class="programlisting">options UFS_ACL</pre><p>debe ser compilada en el kernel.  Si esta opción
      no ha sido compilada, se mostrará un mensaje de advertencia
      si se intenta montar un sistema de ficheros que soporte
      <acronym class="acronym">ACL</acronym>.  Esta opción viene incluida
      en el kernel <code class="filename">GENERIC</code>.
      Las <acronym class="acronym">ACL</acronym> dependen de los atributos extendidos
      habilitados en el sistema de ficheros.  Los atributos extendidos
      están incluidos por defecto en la nueva generación
      de sistemas de ficheros <span class="trademark">UNIX</span>® <acronym class="acronym">UFS2</acronym>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los atributos extendidos pueden usarse también
      en <acronym class="acronym">UFS1</acronym> pero requieren una carga de trabajo
      mucho más elevada que en <acronym class="acronym">UFS2</acronym>.
      El rendimiento de los atributos extendidos es, también,
      notablemente mayor en <acronym class="acronym">UFS2</acronym>.  Por todo esto
      si quiere usar ACL le recomendamos encarecidamente que use
      <acronym class="acronym">UFS2</acronym>.</p></div><p>Las<acronym class="acronym">ACL</acronym> se habilitadan mediante una bandera
      administrativa durante el montaje, <code class="option">acls</code>, en el fichero
      <code class="filename">/etc/fstab</code>.  La bandera de montaje puede
      también activarse de forma permanente mediante
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> para modificar una bandera de superbloque
      <acronym class="acronym">ACLs</acronym> en la cabecera del sistema de ficheros.
      En general es preferible usar la bandera de superbloque por
      varios motivos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La bandera de montaje <acronym class="acronym">ACL</acronym> no puede cambiarse
         por un remontaje (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> <code class="option">-u</code>), sino con un
         completo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> y un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Esto significa
         que no se pueden habilitar las <acronym class="acronym">ACL</acronym> en el sistema
         de ficheros raíz después del arranque.  También
	 significa que no se puede cambiar la disposición de un
         de ficheros una vez que se ha comenzado a usar.</p></li><li class="listitem"><p>Activar la bandera de superbloque provocará que el sistema
          de ficheros se monte siempre con las <acronym class="acronym">ACL</acronym>
	  habilitadas incluso si no existe una entrada en
          <code class="filename">fstab</code> o si los dispositivos se reordenan.
          Esto es así para prevenir un montaje accidental del
          sistema de ficheros sin tener las <acronym class="acronym">ACL</acronym> habilitadas,
          que podría resultar en que se impongan de forma inadecuada las
          <acronym class="acronym">ACL</acronym>, y en consecuencia problema de
	  seguridad.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Podemos cambiar el comportamiento de las
      <acronym class="acronym">ACL</acronym> para permitirle a la bandera ser habilitada
      sin un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> completo, pero puede salirle el tiro por la
      culata si activa las <acronym class="acronym">ACL</acronym>, luego las desactiva,
      y después las vuelve a activar sin configurar desde cero las
      atributos extendidos.  En general, una vez que se han deshabilitado
      las <acronym class="acronym">ACL</acronym> en un sistema de ficheros no deben
      dehabilitarse, ya que la protección de ficheros resultante
      puede no ser compatible las que esperan los usuarios del sistema,
      y al volver a activar las <acronym class="acronym">ACL</acronym> volver a asignar
      las <acronym class="acronym">ACL</acronym> a ficheros cuyos permisos hubieran sido
      cambiados, lo que puede desenbocar en un escenario
      impredecible.</p></div><p>Los sistemas de ficheros con <acronym class="acronym">ACL</acronym> habilitadas
      tienen un signo <code class="literal">+</code> (más) al visualizar
      sus configuraciones de permisos.  Por ejemplo:</p><pre class="programlisting">drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directorio1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directorio2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directorio3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre><p>Aquí vemos que los directorios
      <code class="filename">directorio1</code>,
      <code class="filename">directorio2</code>, y <code class="filename">directorio3</code>
      están usando <acronym class="acronym">ACL</acronym>.
      El directorio <code class="filename">public_html</code> no.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74559440"></a>14.12.1. Uso de <acronym class="acronym">ACL</acronym></h3></div></div></div><p>Las <acronym class="acronym">ACL</acronym>s del sistema de ficheros pueden
        comprobarse con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">getfacl</span>(1)</span></a>.  Por ejemplo,
        para ver las configuraciones de <acronym class="acronym">ACL</acronym> del
        fichero <code class="filename">test</code>, uno podría
        usar lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>getfacl test</code></strong>
	#file:test
	#owner:1001
	#group:1001
	user::rw-
	group::r--
	other::r--</pre><p>Para cambiar las configuraciones de las <acronym class="acronym">ACL</acronym> en
        este fichero use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">setfacl</span>(1)</span></a>.  Observe:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -k test</code></strong></pre><p>La bandera <code class="option">-k</code> eliminará todas
        las <acronym class="acronym">ACL</acronym>s definidas para un fichero o sistema
        ficheros.  El método preferible sería utilizar
        <code class="option">-b</code>, ya que deja los campos básicos
        imprescindibles para que las <acronym class="acronym">ACL</acronym> sigan
	funcionando.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -m u:trhodes:rwx,group:web:r--,o::--- test</code></strong></pre><p>La opción <code class="option">-m</code> se usa para modificar
        las entradas por defecto de las <acronym class="acronym">ACL</acronym>.
        Debido a que no había entradas predefinidas puesto que
        fueron eliminadas por la orden anterior, restauraremos las
        opciones por defecto y asignará las opciones listadas.
	Tenga en cuenta que si añade un nuevo usuario o grupo
	aparecerá el error <span class="errorname">Invalid argument</span>
	en la salida estándar
	<code class="filename">stdout</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-portaudit"></a>14.13. Monitorización de fallos de seguridad de aplicaciones</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74590288" class="indexterm"></a><p>En estos últimos años el mundo de la seguridad
      ha hecho grandes avances en cuanto a la gestión de las
      vulnerabilidades.  La amenaza de asaltos a los sistemas se
      incrementa cuando se instalan y configuran aplicaciones de
      muy diversas procedencias en virtualmente cualquier sistema
      operativo disponible.</p><p>La evaluación de vulnerabilidades es un factor
      clave en la seguridad; aunque FreeBSD libere avisos de seguridad
      relacionados con el sistema base, llevar la gestión
      de vulnerabilidades hasta cada aplicación que se puede
      instalar en FreeBSD va mucho más allá de la capacidad
      del proyecto FreeBSD.  A pesar de esto existe una forma de
      mitigar las vulnerabilidades de esas aplicaciones y advertir
      a los administradores sobre los problemas de seguridad a
      medida que se detectan.  <span class="application">Portaudit</span>
      existe para hacer ese trabajo.</p><p>El port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/portaudit/pkg-descr">security/portaudit</a>
      consulta una base de datos, actualizada y mantenida por el
      equipo de seguridad y por los desarrolladores de FreeBSD en busca de
      incidentes de seguridad que hayan sido detectados.</p><p>Si quiere usar <span class="application">Portaudit</span>
      instálelo desde la colección de ports:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/security/portaudit &amp;&amp; make install clean</code></strong></pre><p>Durante el proceso de instalación los ficheros
      de configuración de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> se actualizan
      haciendo que <span class="application">Portaudit</span>
      aparezca en el mensaje sobre la seguridad del sistema que diariamente
      Recuerde que ese correo (que se envia a la cuenta
      <code class="systemitem">root</code> es muy importante y debería
      leerlo.  No hay ninguna
      configuración que deba modificar o crear.</p><p>Después de la instalación un administrador debe
      actualizar la base de datos alojada en local en
      <code class="filename">/var/db/portaudit</code>
      mediante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portaudit -F</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La base de datos será actualizada
        automáticamente durante la ejecución de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>; así que la orden anterior es
	totalmente opcional.  Solo se necesita para los siguientes
        ejemplos.</p></div><p>Si quiere comproblar si entre las aplicaciones que haya
      instalado desde el árbol de ports en su sistema hay
      problemas de seguridad sólo tiene que ejecutar lo
      siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portaudit -a</code></strong></pre><p>Este es un ejemplo de la salida:</p><pre class="programlisting">Affected package: cups-base-1.1.22.0_1
Type of problem: cups-base -- HPGL buffer overflow vulnerability.
Reference: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

1 problem(s) in your installed packages found.

You are advised to update or deinstall the affected package(s) immediately.</pre><p>El administrador del sistema obtendrá mucha más
      información sobre el problema de seguridad dirigiendo su
      navegador web a la <acronym class="acronym">URL</acronym> que aparece en el
      mensaje.  Esto incluye versiones afectadas (por versión de
      port de FreeBSD), junto con otros sitios web que contengan advertencias
      de seguridad.</p><p>En pocas palabras, <span class="application">Portaudit</span> es un
      programa muy poderoso y extremadamente útil cuando se
      combina con el port <span class="application">Portupgrade</span>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-advisories"></a>14.14. FreeBSD Security Advisories</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74611024" class="indexterm"></a><p>Como muchos sistemas operativos con calidad de producción,
      FreeBSD publica <span class="quote">&#8220;<span class="quote">Security Advisories</span>&#8221;</span> (advertencias de
      seguridad.   Estas advertencias suelen enviarse por correo a las
      listas de seguridad e incluidas en la Errata solamente después
      de que la versión apropiada haya sido corregida.  Esta
      sección tiene como fin explicar en qué consiste una
      advertencia de seguridad, cómo entenderla y qué
      medidas hay que tomar para parchear el sistema.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74612560"></a>14.14.1. ?Qué aspecto tiene una advertencia de
        seguridad?</h3></div></div></div><p>Las advertencias de seguridad de FreeBSD tienen un aspecto
        similar a la que se muestra aquí.  Fué enviada a la
        lista de correo <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">freebsd-security-notifications</a>.</p><pre class="programlisting">=============================================================================
FreeBSD-SA-XX:XX.UTIL                                     Security Advisory
                                                          The FreeBSD Project

Topic:          denial of service due to some problem<a id="co-topic"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>

Category:       core<a id="co-category"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
Module:         sys<a id="co-module"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
Announced:      2003-09-23<a id="co-announce"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
Credits:        Person@EMAIL-ADDRESS<a id="co-credit"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
Affects:        All releases of FreeBSD<a id="co-affects"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>
                FreeBSD 4-STABLE prior to the correction date
Corrected:      2003-09-23 16:42:59 UTC (RELENG_4, 4.9-PRERELEASE)
                2003-09-23 20:08:42 UTC (RELENG_5_1, 5.1-RELEASE-p6)
                2003-09-23 20:07:06 UTC (RELENG_5_0, 5.0-RELEASE-p15)
                2003-09-23 16:44:58 UTC (RELENG_4_8, 4.8-RELEASE-p8)
                2003-09-23 16:47:34 UTC (RELENG_4_7, 4.7-RELEASE-p18)
                2003-09-23 16:49:46 UTC (RELENG_4_6, 4.6-RELEASE-p21)
                2003-09-23 16:51:24 UTC (RELENG_4_5, 4.5-RELEASE-p33)
                2003-09-23 16:52:45 UTC (RELENG_4_4, 4.4-RELEASE-p43)
                2003-09-23 16:54:39 UTC (RELENG_4_3, 4.3-RELEASE-p39)<a id="co-corrected"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
FreeBSD only:   NO<a id="co-only"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>

For general information regarding FreeBSD Security Advisories,
including descriptions of the fields above, security branches, and the
following sections, please visit
http://www.FreeBSD.org/security/.

I.   Background<a id="co-backround"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>


II.  Problem Description<a id="co-descript"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>


III. Impact<a id="co-impact"></a><span><img src="./imagelib/callouts/11.png" alt="11" border="0" /></span>


IV.  Workaround<a id="co-workaround"></a><span><img src="./imagelib/callouts/12.png" alt="12" border="0" /></span>


V.   Solution<a id="co-solution"></a><span><img src="./imagelib/callouts/13.png" alt="13" border="0" /></span>


VI.  Correction details<a id="co-details"></a><span><img src="./imagelib/callouts/14.png" alt="14" border="0" /></span>


VII. References<a id="co-ref"></a><span><img src="./imagelib/callouts/15.png" alt="15" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-topic"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Topic</code> indica cuál es
	    exactamente el problema.  Básicamente es la
            introducción de la advertencia de seguridad actual
            e indica el uso malintencionado que puede darse a la
	    vulnerabilidad.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-category"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p><code class="literal">Category</code> se refiere a la parte afectada del
	    sistema, que puede ser
            <code class="literal">core</code>, <code class="literal">contrib</code> o
            <code class="literal">ports</code>.  La categoría
	    <code class="literal">core</code> significa que la vulnerabilidad afecta
            a un componente central del sistema operativo FreeBSD.  La
            categoría <code class="literal">contrib</code> significa que la
            vulnerabilidad afecta a software que no ha sido desarrollado por
            el proyecto FreeBSD, como <span class="application">sendmail</span>.
            La categoría <code class="literal">ports</code> indica que la
            vulnerabilidad afecta a software incluido en la colección
            de ports.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-module"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Module</code> se refiere a la
	    ubicación del componente, por ejemplo
            <code class="literal">sys</code>.  En este ejemplo vemos que está
            afectado el módulo <code class="literal">sys</code>;
	    por lo tanto esta vulnerabilidad afecta a componentes
            utilizados dentro del kernel.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-announce"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Announced</code> refleja la fecha
            de publicación de la advertencia de seguridad fué
	    publicada o anunciada al mundo.  Esto significa que el equipo
            de seguridad ha verificado que el que el problema existe y que
	    se ha incluido un parche que soluciona el problema en el
	    repositorio de código fuente de FreeBSD.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-credit"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Credits</code> le da el crédito al
            individuo u organización que descubrió y reportó
            la vulnerabilidad.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-affects"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Affects</code> explica a qué
	    versiones de FreeBSD afecta esta vulnerabilidad.  En el caso del
	    kernel una rápida revisión de la salida de
            <code class="command">ident</code> en los ficheros afectados
            ayudará a determinar la versión.  En el caso de
            de los ports el número de versión aparece
            después del nombre del port en
            <code class="filename">/var/db/pkg</code>.  Si el sistema no se
            sincroniza con el repositorio <acronym class="acronym">CVS</acronym> de
            FreeBSD y se reconstruye diariamente, existe la posibilidad de
            que esté afectado por el problema de seguridad.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-corrected"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Corrected</code> indica la fecha, hora,
            zona horaria y versión de FreeBSD en que fué
	    corregido.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-only"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">FreeBSD only</code> indica si la
	    vulnerabilidad afecta solamente a FreeBSD o si afecta
            también a otros sistemas operativos.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-backround"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Background</code> informa acerca de
            qué es exactamente la aplicación afectada.
	    La mayor parte de las veces se refiere a por qué la
            aplicación existe en FreeBSD, para qué se usa y
            un poco de información de cómo llegó
	    llegó a ocupar el lugar que ocupa en el sistema o el
	    árbol de ports.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-descript"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Problem Description</code> explica el
	    problema de seguridad en profundidad.  Puede incluir
            información del código erróneo,
            o incluso cómo puede usarse maliciosamente el error
            para abrir un agujero de seguridad.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-impact"><span><img src="./imagelib/callouts/11.png" alt="11" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Impact</code> describe el tipo de
            impacto que el problema pueda tener en un sistema.  Por ejemplo,
            esto puede ser desde un ataque de denegación de servicio,
            hasta una escalada de privilegios de usuario, o incluso
            ofrecer al atacante acceso de superusuario.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-workaround"><span><img src="./imagelib/callouts/12.png" alt="12" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Workaround</code> ofrece una
	    solución temoral posible para los administradores
            de sistemas que tal vez no puedan actualizar el sistema.
            Esto puede deberse a la falta de tiempo, disponibilidad de
            de red, o a muchas otras razones.  A pesar de todo la
            la seguridad no se debe tomar a la ligera y un sistema
            afectado debe parchearse al menos aplicar una
            solución temporal para el agujero de
	    seguridad.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-solution"><span><img src="./imagelib/callouts/13.png" alt="13" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Solution</code> ofrece instrucciones
            para parchear el sistema afectado.  Este es un método paso
            a paso, probado y verificado para parchear un sistema y que
            trabaje seguro.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-details"><span><img src="./imagelib/callouts/14.png" alt="14" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">Correction Details</code> despliega
            la rama del <acronym class="acronym">CVS</acronym> o el nombre de la
            versión con los puntos cambiados a guiones bajos.
	    También muestra el número de revisión de
            los ficheros afectados dentro de cada rama.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ref"><span><img src="./imagelib/callouts/15.png" alt="15" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El campo <code class="literal">References</code> suele ofrecer fuentes
	    adicionales de información:
            <acronym class="acronym">URL</acronym>, libros, listas de correo y grupos
	    de noticias.</p></td></tr></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-accounting"></a>14.15. Contabilidad de procesos</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74677072" class="indexterm"></a><p>La contabilidad de procesos es un método de
      seguridad en el cual un administrador puede mantener un
      seguimiento de los recursos del sistema utilizados,
      su distribución entre los usuarios, ofrecer
      monitorización del sistema y seguir la pista
      mínimamente a las órdenes de usuario.</p><p>Esto en realidad tiene sus puntos positivos y negativos.
      Uno de los positivos es que una intrusión puede
      minimizarse en el momento de producirse.  Uno negativo
      es la cantidad de logs generados por la contabilidad de
      procesos y el espacio de disco que requieren.  Esta
      sección guiará al administrador a
      través de los fundamentos de la contabilidad de
      procesos.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74678608"></a>14.15.1. Cómo habilitar y utilizar la contabilidad
        de procesos</h3></div></div></div><p>Antes de poder usar la contabilidad de procesos
        tendrá que habilitarla.  Ejecute la
        siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>touch /var/account/acct</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>accton /var/account/acct</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>echo 'accounting_enable="YES"' &gt;&gt; /etc/rc.conf</code></strong></pre><p>Una vez habilitada, la contabilidad de procesos
        empezará a seguir el rastro de estadísticas
        de la <acronym class="acronym">CPU</acronym>, órdenes, etc.  Todos los logs
        de contabilidad están en un formato ilegible
        para humanos, pero accesibles para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sa</span>(8)</span></a>.
        Si se ejecuta sin opciones, <code class="command">sa</code>
        imprimirá información sobre el número
        de llamadas por usuario, el tiempo total transcurrido expresado
        en minutos, el tiempo total de <acronym class="acronym">CPU</acronym> y de usuario
        en minutos, el número medio de operaciones de E/S,
        etc.</p><p>Para ver información acerca de las órdenes
        que se están ejecutados puede usar la
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lastcomm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lastcomm</span>(1)</span></a>.  <code class="command">lastcomm</code> imprime
        órdenes ejecutadas por los usuarios en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>
        específicas.  Veamos un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lastcomm ls
	trhodes ttyp1</code></strong></pre><p>Imprimiría todas las veces (conocidas) que
        el usuario <code class="systemitem">trhodes</code> ha usado
	<code class="command">ls</code> en la terminal
        ttyp1.</p><p>Hay muchas más opciones que pueden serle muy
        útiles.  Si quiere conocerlas consulte
        las páginas de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lastcomm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lastcomm</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acct&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">acct</span>(5)</span></a>
        y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sa</span>(8)</span></a>.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp73306960" class="footnote"><p><a href="#idp73306960" class="para"><sup class="para">[8] </sup></a>En FreeBSD la contraseña del
      login estándar puede ser de hasta 128 caracteres de
      longitud.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails"></a>Capítulo 15. Jaulas</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Matteo</span> <span class="surname">Riondato</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#jails-synopsis">15.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#jails-terms">15.2. Términos relacionados con las jaulas</a></span></dt><dt><span class="sect1"><a href="#jails-intro">15.3. Introducción</a></span></dt><dt><span class="sect1"><a href="#jails-build">15.4. Creación y gestión de jaulas</a></span></dt><dt><span class="sect1"><a href="#jails-tuning">15.5. Administración y personalización a fondo</a></span></dt><dt><span class="sect1"><a href="#jails-application">15.6. Uso de las jaulas</a></span></dt></dl></div><a id="idp74699728" class="indexterm"></a><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-synopsis"></a>15.1. Sinopsis</h2></div></div></div><p>En este capítulo se explica qué son las
      jaulas en FreeBSD y cómo usarlas.  Las jaulas, citadas
      con frecuencia como la nueva generación de
      <span class="emphasis"><em>entornos chroot</em></span>, son una herramienta
      muy poderosa que se ha puesto al servicio de los administradores
      de sistemas, aunque su uso más básico puede
      ser también de suma utilidad para usuarios avanzados.</p><p>Tras leer este capítulo sabrá usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Qué es una jaula y para qué puede usarse
	  en sistemas FreeBSD.</p></li><li class="listitem"><p>Cómo generar, arrancar y parar una jaula.</p></li><li class="listitem"><p>Cómo manejarse con los rudimentos de la
	  administración de las jaulas, tanto desde dentro
	  como desde fuera de la jaula.</p></li></ul></div><p>Otras fuentes de información útil sobre
      las jaulas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  Es la referencia
	  completa de <code class="command">jail</code>, la herramienta administrativa
	  de FreeBSD con la que se arrancan, paran y controlan las jaulas.</p></li><li class="listitem"><p>Las listas de correo y sus respectivos archivos.  Los archivos
	  de la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">lista de correo para preguntas generales sobre FreeBSD</a>, entre otras listas de correo alojadas en
	  el <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">servidor de listas de FreeBSD</a> contienen una enorme cantidad de
	  información sobre jaulas.  La ayuda que está
	  buscando puede obtenerla, por tanto, de una búsqueda
	  en los archivos de las listas o de enviar una pregunta que
	  nadie haya hecho en la lista de correo <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a>.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-terms"></a>15.2. Términos relacionados con las jaulas</h2></div></div></div><p>Para ayudar a comprender las partes de FreeBSD que intervienen
      en el funcionamiento de las jaulas, su funcionamiento interno y
      el modo en que interactuan con el resto de FreeBSD, durante el
      resto del capítulo se utilizarán los siguientes
      términos:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> (comando)</span></dt><dd><p>Es una llamada al sistema de FreeBSD que restringe el
	    directorio raiz de un proceso y sus hijos.</p></dd><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> (entorno)</span></dt><dd><p>Es el entorno de procesos que se ejecutan en un
	    <span class="quote">&#8220;<span class="quote">chroot</span>&#8221;</span>.  Esto incluye recursos como
	    la parte visible del sistema de ficheros, los ID de usuario
	    y grupo disponibles, interfaces de red u otros mecanismos IPC.</p></dd><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> (comando)</span></dt><dd><p>La herramienta de administración que permite arrancar
	    procesos dentro del entorno de una jaula.</p></dd><dt><span class="term">servidor (sistema, proceso, usuario, etc)</span></dt><dd><p>El sistema que controla una jaula.  El servidor tiene
	    acceso a todos los recursos de hardware y puede controlar
	    procesos tanto dentro como fuera de la jaula.  Una de las
	    diferencias importantes entre el sistema que aloja la jaula y
	    la jaula propiamente dicha: las limitaciones que afectan a
	    los procesos que se ejecutan con privilegios de superusuario
	    dentro de la jaula no dependen de los procesos del
	    servidor que la aloja.</p></dd><dt><span class="term">enjaulado (sistema, proceso, usuario, etc.)</span></dt><dd><p>Un proceso, usuario u otra entidad, cuyo acceso a los
	    recursos está restringido por una jaula de FreeBSD.</p></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-intro"></a>15.3. Introducción</h2></div></div></div><p>Dado lo dificil y desconcertante de la tarea de
      administrar sistemas se han ido desarrollando poderosas
      herramientas con el fin de hacer la vida del administrador
      más sencilla.  Dichas herramientas suelen facilitar
      cierto tipo de mejoras en la instalación, configuración
      o mantenimiento de los sistemas.  Una de las tareas que
      se espera que cumpla un administrador de sistemas es la
      configuración adecuada de la seguridad, de modo que
      pueda dar el servicio para el que se ha destinado sin que
      pueda verse comprometido.</p><p>Una de las herramientas disponibles para mejorar los niveles
      de seguridad de un sistema FreeBSD es el uso de
      <span class="emphasis"><em>jaulas</em></span>.  Las jaulas fueron introducidas en
      FreeBSD 4.X por Poul-Henning Kamp, pero en FreeBSD 5.X sus capacidades fueron
      aumentadas hasta hacer de ellas un subsistema poderoso y
      flexible.  Su desarrollo sigue avanzando, aumentando así su
      utilidad, rendimiento, fiabilidad y seguridad.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-what"></a>15.3.1. Qué es una jaula</h3></div></div></div><p>Los sistemas tipo BSD disponen de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> desde
        la época de 4.2BSD.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a> permite restringir
	el directorio raiz de un conjunto de procesos, creando un
	entorno seguro y separado del resto del sistema.  Los procesos
	creados dentro de un entorno chroot no pueden acceder a ficheros
	o recursos ubicados fuera del mismo.  Por esta razón,
	si un atacante logra comprometer un servicio que se ejecuta
	en un entorno chroot no debería automáticamente
	poder acceder al resto del sistema.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a> es una
	buena herramienta para tareas sencillas que no requieran
	mucha flexibilidad o características complejas o muy
	avanzadas.  Por desgracia, desde la invención de chroot
	se han ido encontrando muchas formas de saltarse las
	barreras que chroot impone y, aunque estén corregidas
	en las versiones más modernas del kernel de FreeBSD,
	era evidente que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> no era la solución
	ideal para ejecutar servicios con seguridad.  Había
	que implementar un nuevo subsistema.</p><p>Este es uno de los principales motivos por los que
	se crearon las <span class="emphasis"><em>jaulas</em></span>.</p><p>Las jaulas llevan más allá en muchos
        sentidos el concepto tradicional de entorno
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a>.  En un entorno <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> tradicional los
	procesos solo ven limitada la parte del sistema de ficheros
	a la que pueden acceder.  El resto de recursos del sistema,
	es decir, el conjunto de usuarios del sistema, los procesos
	en ejecución o el subsistema de red están
	compartidos entre el sistema alojado y el servidor.  Las jaulas
	extienden este modelo virtualizando no solamente el acceso al
	sistema de ficheros, sino al conjunto de usuarios, al subsistema
	de red del kernel de FreeBSD y unas cuantas cosas más.  En la <a class="xref" href="#jails-tuning" title="15.5. Administración y personalización a fondo">Sección 15.5, &#8220;Administración y personalización a fondo&#8221;</a> se detallan diversas opciones de
	control exhaustivo para configurar el acceso a recursos de
	un entorno enjaulado.</p><p>Una jaula se caracteriza por disponer de cuatro elementos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un <span class="quote">&#8220;<span class="quote">subárbol</span>&#8221;</span> de directorios:
	    el punto desde el que se entra a una jaula.  Una vez
	    dentro de la jaula un proceso no puede escapar de dicho
	    <span class="quote">&#8220;<span class="quote">subárbol</span>&#8221;</span>.  Los típicos problemas
	    de seguridad que aparecín una y otra vez en el
	    diseño del <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> original no afectan a
	    las jaulas de FreeBSD.</p></li><li class="listitem"><p>Un nombre de máquina (<span class="quote">&#8220;<span class="quote">hostname</span>&#8221;</span>),
	    que definirá a la jaula.  Las jaulas se usan
	    principalmente para albergar servicios de red, por lo que
	    disponer de un nombre de máquina descriptivo ayuda
	    enormemente al administrador de sistemas.</p></li><li class="listitem"><p>Una dirección <acronym class="acronym">IP</acronym>: debe asignarse
	    a la jaula y no cambiarse durante el ciclo de vida de la
	    jaula.  La dirección IP de una jaula suele ser un
	    alias de un interfaz de red, aunque no es imprescindible que
	    así sea.</p></li><li class="listitem"><p>Un comando: La ruta de un ejecutable ubicado dentro de
	    la jaula.  La ruta es relativa al directorio raiz de la
	    jaula, por lo que puede ser muy diferentes según
	    el entorno.</p></li></ul></div><p>Además, las jaulas pueden tener sus propios usuarios
        e incluso su propio <code class="systemitem">root</code>.  Es obvio que
	este usuario <code class="systemitem">root</code> tiene su poder para hacer
	circunscrito a la jaula y, desde el punto de vista del servidor,
	el usuario <code class="systemitem">root</code> de la jaula no es
	omnipotente.  El usuario <code class="systemitem">root</code> de la jaula
	no puede ejecutar tareas críticas fuera de la jaula
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>) a la que pertenece.  Más adelante, en
	la <a class="xref" href="#jails-tuning" title="15.5. Administración y personalización a fondo">Sección 15.5, &#8220;Administración y personalización a fondo&#8221;</a>, se dará más
	información sobre las restricciones del usuario
	<code class="systemitem">root</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-build"></a>15.4. Creación y gestión de jaulas</h2></div></div></div><p>Algunos administradores dividen las jaulas en dos tipos:
      jaulas <span class="quote">&#8220;<span class="quote">completas</span>&#8221;</span>, que recrean un sistema FreeBSD
      real, y jaulas <span class="quote">&#8220;<span class="quote">de servicio</span>&#8221;</span>, que son aquellas
      que están dedicadas a una sola aplicación o
      servicio, en muchos casos ejecutándose sin privilegios.  Se
      trata de una división exclusivamente conceptual, por lo
      que el proceso de generación de una jaula no se ve
      afectado por ella.  La página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>
      explica claramente el procedimiento a seguir para generar una
      jaula:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setenv D /aquí/está/la/jaula</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p $D</code></strong> <a id="jailpath"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make world DESTDIR=$D</code></strong> <a id="jailworld"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd etc/</code></strong> <a href="#ftn.idp74766288" class="footnote" id="idp74766288"><sup class="footnote">[9]</sup></a>
<code class="prompt">#</code> <strong class="userinput"><code>make distribution DESTDIR=$D</code></strong> <a id="jaildistrib"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>mount_devfs devfs $D/dev</code></strong> <a id="jaildevfs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#jailpath"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El mejor punto de partida es la elección del punto
	  del sistema de ficheros del servidor donde estará
	  físicamente ubicada la jaula.  <code class="filename">/usr/jail/nombredelajaula</code>
	  es un buen sitio.   <em class="replaceable"><code>nombredelajaula</code></em>
	  es el nombre de máquina que identifica a la jaula.  El
	  sistema de ficheros <code class="filename">/usr/</code> suele tener espacio
	    suficiente para albergar el sistema de ficheros de la jaula que,
	    cuando se trata de jaulas <span class="quote">&#8220;<span class="quote">completas</span>&#8221;</span>, es
	    esencialmente lo necesario para alojar todos y cada uno de
	    los sistemas de ficheros en una instalación del sistema
	    base por omisión de FreeBSD.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#jailworld"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Este comando creará el contenido necesario
	  (binarios, bibliotecas, páginas de manual, etc.) y
	  lo copiará al <span class="quote">&#8220;<span class="quote">subárbol</span>&#8221;</span> elegido
	  como ubicación física de la jaula.  Todo se
	  hace al típico estilo FreeBSD: se compila todo y luego
	  se instala en la ruta de destino.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#jaildistrib"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Al pasar el <span class="quote">&#8220;<span class="quote">target</span>&#8221;</span>
	  <code class="buildtarget">distribution</code> a
	  <span class="application">make</span> se instalan todos los ficheros
	  de configuración necesarios.  En pocas palabras,
	  instala cada fichero instalable que haya en
	  <code class="filename">/usr/src/etc/</code> en el
	  directorio <code class="filename">/etc</code> de la
	  jaula, es decir, en
	  <code class="filename">$D/etc/</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#jaildevfs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>No es imprescindible montar el sistema de ficheros
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a> dentro de la jaula aunque por otra parte
	  (casi) todas las aplicaciones necesitan acceso al menos
	  a un dispositivo, dependiendo esto del propósito
	  de la aplicación.  Es muy importante el control del
	  acceso a dispositivos desde la jaula, puesto que una
	  configuración descuidada puede permitir que un
	  atacante haga de las suyas.  El control sobre <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>
	  se gestiona mediante reglas que se detallan en las
	  páginas de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.conf</span>(5)</span></a>.</p></td></tr></table></div><p>Una vez instalada la jaula puede arrancarla mediante
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> usa los cuatro argumentos que
      se detallan en la <a class="xref" href="#jails-what" title="15.3.1. Qué es una jaula">Sección 15.3.1, &#8220;Qué es una jaula&#8221;</a>.  Puede pasarle otros argumentos
      además de estos, por ejemplo para ejecutar procesos
      enjaulados bajo los permisos de un usuario específico.  El
      argumento <code class="option"><em class="replaceable"><code>comando</code></em></code>
      depende del tipo de jaula; si se trata de un
      <span class="emphasis"><em>virtual system</em></span> <code class="filename">/etc/rc</code>
      es una buena elección, puesto que ejecutará la
      secuencia de arranque de un sistema FreeBSD real.  Si se trata
      de una jaula <span class="emphasis"><em>de servicio</em></span> depende del
      servicio o aplicación que se quiera ejecutar mediante
      la jaula.</p><p>Con frecuencia las jaulas se arrancan durante el arranque del
      servidor que las aloja;  el sistema <code class="filename">rc</code> de
      FreeBSD permite hacerlo de un modo muy sencillo.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Puede crear una lista de jaulas que quiera arrancar
	  en el inicio del sistema en el fichero
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>:</p><pre class="programlisting">jail_enable="YES"   # Ponga NO si quiere desactivar el arranque de jaulas
jail_list="<em class="replaceable"><code>www</code></em>"     # Lista de nombres de jaulas separados por espacios</pre></li><li class="step"><p>Tendrá que añadir parámetros
	  específicos para cada jaula al fichero
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>:</p><pre class="programlisting">jail_<em class="replaceable"><code>www</code></em>_rootdir="/usr/jail/www"     # directorio raiz de la jaula
jail_<em class="replaceable"><code>www</code></em>_hostname="<em class="replaceable"><code>www</code></em>.example.org"  # nombre de máquina de la jaula
jail_<em class="replaceable"><code>www</code></em>_ip="192.168.0.10"           # dirección IP de la jaula
jail_<em class="replaceable"><code>www</code></em>_devfs_enable="YES"          # montar devfs en la jaula
jail_<em class="replaceable"><code>www</code></em>_devfs_ruleset="<em class="replaceable"><code>www_ruleset</code></em>" # reglas a aplicar a devfs dentro de la jaula</pre><p>El arranque de jaulas por omisión que se
	  configure en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> ejecutará el script
	  <code class="filename">/etc/rc</code> de la jaula y asumirá
	  que es un sistema virtual completo.  Si se trata de una
	  jaula de servicio el comando de arranque por omisión
	  tendrá que cambiarse configurando la opción
	  <code class="varname">jail_<em class="replaceable"><code>nombredejaula</code></em>_exec_start</code>
	  según convenga.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si quiere consultar la lista completa de opciones
	    consulte la página de manual
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.</p></div></li></ol></div><p>Puede arrancar o parar a mano una jaula mediante el script
      <code class="filename">/etc/rc.d/jail</code> siempre y cuando la jaula
      aparezca en <code class="filename">rc.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail start www</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail stop www</code></strong></pre><p>De momento no hay una forma limpia de apagar una jaula
      (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>) debido a que los comandos que se usan normalmente
      para producir un apagado limpio del sistema no pueden usarse
      dentro de una jaula.  La mejor forma de parar una jaula es
      ejecutar el siguiente comando desde dentro de la propia jaula
      o bien mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> desde fuera:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh /etc/rc.shutdown</code></strong></pre><p>Para más información consulte la página
      de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-tuning"></a>15.5. Administración y personalización a fondo</h2></div></div></div><p>Hay diversas opciones que pueden usarse en las jaulas y varios
      tipos de formas de combinar un sistema FreeBSD servidor y las jaulas
      y poder disponer de aplicaciones de alto nivel.  En esta
      sección se muestra lo siguiente:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Algunas de las opciones disponibles para personalizar
	  el comportamiento y las restricciones de seguridad que
	  pueden aplicarse en una jaula.</p></li><li class="listitem"><p>Algunas de las aplicaciones de alto nivel creadas para
	  la administración de jaulas.  Estas aplicaciones
	  están en la colección de ports y pueden
	  utilizarse en conjunto para implementar productos
	  basados en jaulas.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-tuning-utilities"></a>15.5.1. Herramientas del sistema para la personalización
        de jaulas en FreeBSD</h3></div></div></div><p>La personalización a fondo de las jaulas se hace
        en su mayor parte mediante la configuración de variables
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  Hay una subcategoría especial de
	sysctl para que sea más sencillo organizar las opciones
	más más importantes: se trata de las opciones
	de la jerarquía <code class="varname">security.jail.*</code>
	del kernel de FreeBSD.  A continuación veremos una lista
	de las principales sysctl relacionadas con las jaulas y los
	valores que tienen por omisión.  Los nombres deberían
	describir por sí mismos qué función tienen
	(N. del T.: En inglés, claro) pero si necesita más
	información sobre ellas consulte las páginas de
	manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">security.jail.set_hostname_allowed:
	     1</code></p></li><li class="listitem"><p><code class="varname">security.jail.socket_unixiproute_only:
	     1</code></p></li><li class="listitem"><p><code class="varname">security.jail.sysvipc_allowed:
	     0</code></p></li><li class="listitem"><p><code class="varname">security.jail.enforce_statfs:
	     2</code></p></li><li class="listitem"><p><code class="varname">security.jail.allow_raw_sockets:
	     0</code></p></li><li class="listitem"><p><code class="varname">security.jail.chflags_allowed:
	    0</code></p></li><li class="listitem"><p><code class="varname">security.jail.jailed: 0</code></p></li></ul></div><p>El administrador del <span class="emphasis"><em>servidor</em></span> puede
        usar estas variables para añadir o quitar limitaciones
	impuestas por omisión al usuario
	<code class="systemitem">root</code>.  Tenga en cuenta que hay ciertas
	limitaciones que no pueden quitarse.  El usuario
	<code class="systemitem">root</code> no puede montar o desmontar sistemas
	de ficheros desde su jaula.  El usuario <code class="systemitem">root</code>
	no puede cargar o descargar reglas de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>, configurar
	reglas de cortafuegos ni ejecutar muchas otras tareas
	administrativas que requieran modificaciones o acceso a datos
	internos del kernel, como cambiar el nivel de seguridad
	<code class="varname">securelevel</code> del kernel.</p><p>El sistema base de FreeBSD contiene un conjunto básico
        de herramientas que permiten el acceso a información
        sobre jaulas activas en el sistema, así como la
	conexión a una jaula para ejecutar comandos
	administrativos.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jls&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jls</span>(8)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> forman parte
	del sistema base de FreeBSD y permiten ejecutar las siguientes
	tareas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Mostrar una lista de jaulas activas y sus correspondientes
	    identificadores de jaula (<acronym class="acronym">JID</acronym>),
	    dirección <acronym class="acronym">IP</acronym>, nombre de máquina
	    y ruta.</p></li><li class="listitem"><p>Conectarse a una jaula en ejecució desde el
	    servidor y ejecutar un comando dentro de la jaula o
	    realizar tareas administrativas dentro de dicha jaula.  Esto
	    es muy útil cuando el usuario
	    <code class="systemitem">root</code> quiere apagar la jaula de forma
	    limpia.  La herramienta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> permite
	    también arrancar una shell dentro de la jaula para
	    realizar tareas administrativas.  Veamos un ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>jexec 1 tcsh</code></strong></pre></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-tuning-admintools"></a>15.5.2. Herramientas para tareas administrativas de alto nivel
        en la Colección de Ports</h3></div></div></div><p>Entre las variadas aplicaciones ajenas al Proyecto FreeBSD que
      han ido apareciendo para administrar jaulas una de las más
      completas y útiles es <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/jailutils/pkg-descr">sysutils/jailutils</a>.  Es un conjunto de
      pequeñas aplicaciones de mucha ayuda en la gestión
      de una jaula (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>).  Por favor, consulte su página
      web para más información.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-application"></a>15.6. Uso de las jaulas</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-service-jails"></a>15.6.1. Jaulas <span class="quote">&#8220;<span class="quote">de servicio</span>&#8221;</span></h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Daniel</span> <span class="surname">Gerzo</span></span>. </span></div></div></div><p>Esta sección está basada en una idea
        que Simon L. B. Nielsen presentó por primera vez en <code class="uri"><a class="uri" href="http://simon.nitro.dk/service-jails.html" target="_top">http://simon.nitro.dk/service-jails.html</a></code> y en
	un artículo con contenido adicional escrito por Ken
	Tom <code class="email">&lt;<a xmlns="" class="email" href="mailto:locals@gmail.com">locals@gmail.com</a>&gt;</code>.  En esta sección
	se detalla cómo configurar un sistema FreeBSD que
	añade una capa adicional de seguridad mediante el uso
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  Para su verdadero aprovechamiento se asume
	que el sistema en el que se vaya a aplicar ejecuta al menos
	RELENG_6_0 y que la información que contienen las secciones
	previas de este capítulo se ha comprendido totalmente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-service-jails-design"></a>15.6.1.1. Diseño</h4></div></div></div><p>Uno de los mayores problemas de las jaulas es la
	  gestión de su proceso de actualización.  Este
	  proceso tiene a ser un problema porque cada jaula tiene que
	  recompilarse íntegramente desde el código fuente
	  cada vez que hay que actualizarla.  Esto no es un gran problema
	  si tenemos una sola jaula puesto que el proceso de
	  actualización es bastante simple, pero si hay muchas
	  jaulas será un trabajo largo y tedioso.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">: Esta configuración requiere mucha experiencia
	    con FreeBSD y el uso de sus características.  Si los
	    pasos que se detallan a continuación le parecen
	    demasiado complicados puede echar un vistazo a sistemas
	    más sencillos como <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/ezjail/pkg-descr">sysutils/ezjail</a>, que le
            permitirá acceder a un método de
	    administración de jaulas en FreeBSD más sencillo
	    y no es tan sofisticado como el que le proponemos a
	    continuación.</p></div><p>El origen de esta idea es resolver los problemas antes
	  descritos compartiendo el máximo posible entre distintas
	  jaulas, de un modo seguro (utilizando montajes
	  using read-only <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nullfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nullfs</span>(8)</span></a> mounts) para que la
	  actualización sea más sencilla y el ubicar
	  servicios aislados en jaulas sea más interesante.
	  Además, se presenta una forma sencilla de añadir
	  o borrar jaulas así como una forma de actualizarlas.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los ejemplos de servicios en este contexto son: un
	    servidor <acronym class="acronym">HTTP</acronym>,un servidor
	    <acronym class="acronym">DNS</acronym>, un servidor
	    <acronym class="acronym">SMTP</acronym>, etc.</p></div><p>Los objetivos de la configuración descrita en
	  esta sección son:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Crear una estructura de jaulas simple y fácil
	      de entender.  Esto implica <span class="emphasis"><em>no</em></span> tener
	      que ejecutar un <span class="quote">&#8220;<span class="quote">installworld</span>&#8221;</span> completo en
	      todas y cada una de las jaulas.</p></li><li class="listitem"><p>Facilitar la creación de nuevas jaulas o
	      el borrado de jaulas previamente existentes.</p></li><li class="listitem"><p>Facilitar la actualización de jaulas
	      ya existentes.</p></li><li class="listitem"><p>Hacer posible el uso de una rama de FreeBSD
	      personalizada.</p></li><li class="listitem"><p>Ser paranoico en cuanto a seguridad, reduciendo
	      todo lo posible la posibilidad de que los sistemas
	      se vean comprometidos.</p></li><li class="listitem"><p>Ahorrar todo el espacio e inodos que sea
	      posible.</p></li></ul></div><p>Como ya se ha dicho, este diseño se basa en
	  gran medida en el disponer de una única plantilla
	  en modo de sólo lectura (a la que llamaremos
	  <span class="application">nullfs</span>) montada en cada jaula
	  y un dispositivo en modo lectura-escritura por cada jaula.  El
	  dispositivo puede ser otro disco físico adicional, una
	  partición o un dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> basado en un
	  vnode.  En este ejemplo utilizaremos montajes
	  <span class="application">nullfs</span> en modo
	  lectura-escritura.</p><p>La estructura del sistema de ficheros se detalla en
	  la siguiente lista:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cada jaula se montará bajo <code class="filename">/home/j</code>.</p></li><li class="listitem"><p><code class="filename">/home/j/mroot</code>
	      será la plantilla para cada jaula y la
	      partición de sólo lectura para todas las
	      jaulas.</p></li><li class="listitem"><p>Se creará un directorio vacío para
	      cada jaula bajo el directorio <code class="filename">/home/j</code>.</p></li><li class="listitem"><p>Cada jaula tendrá un directorio <code class="filename">/s</code> que estará enlazado
	      con la parte de lectura-escritura del sistema.</p></li><li class="listitem"><p>Cada jaula tendrá su propio sistema en modo
	      lectura-escritura basado en <code class="filename">/home/j/skel</code>.</p></li><li class="listitem"><p>Cada parte de lectura-escritura correspondiente a cada
	      jaula se creará en <code class="filename">/home/js</code>.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Se asume que las jaulas se instalarán bajo
	    la partición <code class="filename">/home</code>.  Por supuesto esto no
	    es en absoluto obligatorio, pero hay que tener en cuenta que
	    debe hacerse el mismo cambio en cada uno de los ejemplos que
	    se muestran más adelante.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-service-jails-template"></a>15.6.1.2. Creación de la plantilla</h4></div></div></div><p>En esta sección se describen los pasos necesarios
	  para crear la plantilla maestra que conformará la
	  parte de sólo lectura que usarán las jaulas.</p><p>Siempre es recomendable actualizar el sistema FreeBSD a la
	  última rama -RELEASE.  Consulte el <a class="link" href="../../../../doc/es_ES.ISO8859-1/books/handbook/makeworld.html" target="_top">capítulo</a>
	  correspondiente de este libro si necesita más
	  información.  En caso de que la actualización no
	  sea posible tendrá que usar <span class="quote">&#8220;<span class="quote">buidworld</span>&#8221;</span> para
	  poder seguir adelante.  También necesitará el
	  paquete <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cpdup/pkg-descr">sysutils/cpdup</a>.  Usaremos
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> para descargar la Colección de Ports
	  de FreeBSD.  El capítulo sobre <a class="link" href="../../../../doc/es_ES.ISO8859-1/books/handbook/portsnap.html" target="_top">Portsnap</a>
	  es siempre una lectura muy recomendable para quienes no tengan
	  experiencia con su funcionamiento.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Lo primero que haremos será crear una estructura
	      de directorios para el sistema de ficheros de sólo
	      lectura que contendrá los binarios de nuestras jaulas,
	      luego iremos al directorio que contiene el árbol de
	      código de FreeBSD e instalaremos el sistema de ficheros
	      de sólo lectura en la plantilla de las jaulas:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /home/j /home/j/mroot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld DESTDIR=/home/j/mroot</code></strong></pre></li><li class="step"><p>Una vez hecho esto, prepararemos la Colección
	      de Ports de FreeBSD para nuestras jaulas así como un
	      árbol de código FreeBSD, necesario para usar
	      <span class="application">mergemaster</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /home/j/mroot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir usr/ports</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portsnap -p /home/j/mroot/usr/ports fetch extract</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpdup /usr/src /home/j/mroot/usr/src</code></strong></pre></li><li class="step"><p>Crear la estructura de directorios necesaria para la
	      parte de lectura-escritura del sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /home/j/skel /home/j/skel/home /home/j/skel/usr-X11R6 /home/j/skel/distfiles</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv etc /home/j/skel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv usr/local /home/j/skel/usr-local</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv tmp /home/j/skel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv var /home/j/skel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv root /home/j/skel</code></strong></pre></li><li class="step"><p>Usamos <span class="application">mergemaster</span> para
	      instalar los ficheros de configuración que
	      falten.  Después nos libramos de los directorios
	      adicionales que haya creado
	      <span class="application">mergemaster</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mergemaster -t /home/j/skel/var/tmp/temproot -D /home/j/skel -i</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /home/j/skel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -R bin boot lib libexec mnt proc rescue sbin sys usr dev</code></strong></pre></li><li class="step"><p>Ahora enlazamos simbólicamente el sistema
	      de ficheros de lectura-escritura con el sistema de
	      ficheros de sólo lectura.  Por favor,
	      asegúrese de que los enlaces simbólicos
	      se crean en las ubicaciones correctas: <code class="filename">s/</code>.  Si se usan directorios
	      reales o directorios erróneos la instalación
	      no funcionará.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /home/j/mroot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir s</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/etc etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/home home</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/root root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s ../s/usr-local usr/local</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s ../s/usr-X11R6 usr/X11R6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s ../../s/distfiles usr/ports/distfiles</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/tmp tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/var var</code></strong></pre></li><li class="step"><p>Como último paso, cree un
	      <code class="filename">/home/j/skel/etc/make.conf</code>
	      genérico con el siguiente contenido:</p><pre class="programlisting">WRKDIRPREFIX?=  /s/portbuild</pre><p>El tener <code class="literal">WRKDIRPREFIX</code> configurado
	       de este modo hará posible compilar ports de FreeBSD
	       dentro de cada jaula.  Recuerde que el el directorio
	       de los ports es de sólo lectura.  La ruta
	       personalizada por <code class="literal">WRKDIRPREFIX</code>
	       permite ejecutar compilaciones en la parte de
	       sólo lectura de cada jaula.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-service-jails-creating"></a>15.6.1.3. Creación de las jaulas</h4></div></div></div><p>Ya tenemos una plantilla de jaulas de FreeBSD completa,
	  así que podemos configurar nuestras jaulas en
	  <code class="filename">/etc/rc.conf</code>.  En este ejemplo crearemos
	  3 jaulas: <span class="quote">&#8220;<span class="quote">NS</span>&#8221;</span>,
	  <span class="quote">&#8220;<span class="quote">MAIL</span>&#8221;</span> y <span class="quote">&#8220;<span class="quote">WWW</span>&#8221;</span>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Introduzca las siguientes lineas en el fichero
	      <code class="filename">/etc/fstab</code>; con esto cada jaula
	      tendrá acceso a la plantilla de sólo lectura
	      y al espacio de lectura-escritura:</p><pre class="programlisting">/home/j/mroot   /home/j/ns     nullfs  ro  0   0
/home/j/mroot   /home/j/mail   nullfs  ro  0   0
/home/j/mroot   /home/j/www    nullfs  ro  0   0
/home/js/ns     /home/j/ns/s   nullfs  rw  0   0
/home/js/mail   /home/j/mail/s nullfs  rw  0   0
/home/js/www    /home/j/www/s  nullfs  rw  0   0</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las particiones que tienen un 0 en la columna
	        <span class="quote">&#8220;<span class="quote">pass</span>&#8221;</span> no serán revisadas por
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> durante el arranque y las que tienen
		un 0 en la columna <span class="quote">&#8220;<span class="quote">dump</span>&#8221;</span> no serán
		copiadas por <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.  No nos interesa que
		<span class="application">fsck</span> compruebe la
		integridad de montajes <span class="application">nullfs</span>
		ni que <span class="application">dump</span> haga copias de
		seguridad de montajes nullfs de sólo lectura de las
		jaulas.  Por esta razón el ejemplo de
		<code class="filename">fstab</code> tiene en las dos últimas
		columnas <span class="quote">&#8220;<span class="quote">0 0</span>&#8221;</span>.</p></div></li><li class="step"><p>Configure las jaulas en
	      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">jail_enable="YES"
jail_set_hostname_allow="NO"
jail_list="ns mail www"
jail_ns_hostname="ns.ejemplo.org"
jail_ns_ip="192.168.3.17"
jail_ns_rootdir="/usr/home/j/ns"
jail_ns_devfs_enable="YES"
jail_mail_hostname="mail.ejemplo.org"
jail_mail_ip="192.168.3.18"
jail_mail_rootdir="/usr/home/j/mail"
jail_mail_devfs_enable="YES"
jail_www_hostname="www.ejemplo.org"
jail_www_ip="62.123.43.14"
jail_www_rootdir="/usr/home/j/www"
jail_www_devfs_enable="YES"</pre><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">: La razón por la que
		<code class="varname">jail_<em class="replaceable"><code>nombre</code></em>_rootdir</code>
		contiene <code class="filename">/usr/home</code> y no
		<code class="filename">/home</code> es que la ruta
		física del directorio<code class="filename">/home</code> en una instalación
		de FreeBSD por omisión es <code class="filename">/usr/home</code>.  La variable
		<code class="varname">jail_<em class="replaceable"><code>nombre</code></em>_rootdir</code>
		<span class="emphasis"><em>no</em></span> debe apuntar a una ruta que
		contenga un enlace simbólico porque sería
		imposible arrancar las jaulas.  Utilice
		la herramienta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=realpath&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">realpath</span>(1)</span></a> para asegurarse del valor
		exacto que debe asignar a la variable.  Por favor, consulte
		el aviso de seguridad FreeBSD-SA-07:01.jail para más
		información.</p></div></li><li class="step"><p>Creamos los puntos de montaje de sistemas de ficheros
	      de sólo lectura correspondientes a cada jaula:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /home/j/ns /home/j/mail /home/j/www</code></strong></pre></li><li class="step"><p>Instalamos la plantilla de lectura-escritura dentro
	      de cada jaula.  Observe que utilizamos <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cpdup/pkg-descr">sysutils/cpdup</a> para asegurarnos
	      de que se hace una copia exacta de cada directorio:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /home/js</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpdup /home/j/skel /home/js/ns</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpdup /home/j/skel /home/js/mail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpdup /home/j/skel /home/js/www</code></strong></pre></li><li class="step"><p>Llegados a este punto las jaulas están
	      configuradas y listas para arrancar.  Monte los sistemas
	      de ficheros de cada jaula y luego arránquelas
	      con el script <code class="filename">/etc/rc.d/jail</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail start</code></strong></pre></li></ol></div><p>Las jaulas deberían haber arrancado.  Asegúrese
	  de ello con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jls&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jls</span>(8)</span></a>.  La salida que verá debe parecerse
	  a esta:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>jls</code></strong>
   JID  IP Address      Hostname                      Path
     3  192.168.3.17    ns.ejemplo.org                /home/j/ns
     2  192.168.3.18    mail.ejemplo.org              /home/j/mail
     1  62.123.43.14    www.ejemplo.org               /home/j/www</pre><p>En este punto debería ser posible entrar a
	  cada una de las jaulas, añadir nuevos usuarios o
	  configurar dæmons.  La columna <code class="literal">JID</code>
	  indica el número de identificación de cada
	  jaula que esté funcionando en el sistema.  Con el
	  siguiente comando puede ejecutar tareas administrativas
	  en la jaula cuyo <code class="literal">JID</code> sea 3:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>jexec 3 tcsh</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-service-jails-upgrading"></a>15.6.1.4. Actualización</h4></div></div></div><p>Llegará el momento en el que sea necesario
	  actualizar el sistema, bien por seguridad o porque sea
	  útil para las jaulas disponer de alguna nueva
	  característica del sistema.  El diseño de
	  esta configuración facilita una forma fácil
	  de actualizar sus jaulas.  Además, minimiza la
	  pérdida de servicio, puesto que las jaulas deben
	  apagarse sólamente al final de todo el proceso.  Se
	  ofrece también la posibilidad de volver a la versión
	  anterior en caso de que algo salga mal.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>El primer paso es actualizar el servidor que aloja
	      las jaulas de la forma habitual.  Después creamos
	      una plantilla de sólo lectura temporal en <code class="filename">/home/j/mroot2</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /home/j/mroot2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld DESTDIR=/home/j/mroot2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /home/j/mroot2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpdup /usr/src usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir s</code></strong></pre><p>La ejecución de <code class="buildtarget">installworld</code>
	      crea unos cuantos directorios innecesarios que debemos
	      borrar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags -R 0 var</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -R etc var root usr/local tmp</code></strong></pre></li><li class="step"><p>Creamos de nuevo los enlaces simbólicos de
	      lectura-escritura del sistema de ficheros principal:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s s/etc etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/root root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/home home</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s ../s/usr-local usr/local</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s ../s/usr-X11R6 usr/X11R6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/tmp tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s s/var var</code></strong></pre></li><li class="step"><p>Ha llegado el momento de parar las jaulas:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail stop</code></strong></pre></li><li class="step"><p>Desmontamos los sistemas de ficheros originales:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /home/j/ns/s</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /home/j/ns</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /home/j/mail/s</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /home/j/mail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /home/j/www/s</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /home/j/www</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los sistemas de ficheros de lectura-escritura
	        cuelgan del sistema de sólo lectura <code class="filename">/s</code> y por tanto deben
		desmontarse antes.</p></div></li><li class="step"><p>Movemos el sistema de ficheros de sólo lectura
	      viejo y lo reemplazamos por el nuevo.  Nos servirá
	      de copia de seguridad y como archivo en caso de que haya
	      problemas.  Para darle un nombre usamos la fecha en la que
	      se creado una nueva copia del sistema de ficheros de
	      sólo lectura.  Movemos también la
	      Colección de Ports de FreeBSD al sistema de ficheros
	      nuevo para ahorrar un poco más de espacio e
	      inodos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /home/j</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv mroot mroot.20060601</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv mroot2 mroot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv mroot.20060601/usr/ports mroot/usr</code></strong></pre></li><li class="step"><p>Una vez llegados a este punto la nueva plantilla de
	      sólo lectura está lista, de manera que lo
	      único que nos queda por hacer es montar los sistemas
	      de ficheros y arrancar las jaulas:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -a</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail start</code></strong></pre></li></ol></div><p>Compruebe con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jls&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jls</span>(8)</span></a> si las jaulas han arrancado
	  sin contratiempos.  No olvide ejecutar mergemaster en cada
	  jaula.  Tendrá que actualizar tanto
	  los ficheros de configuración como los scripts
	  rc.d.</p></div></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp74766288" class="footnote"><p><a href="#idp74766288" class="para"><sup class="para">[9] </sup></a>Este paso
no es necesario en FreeBSD 6.0 y versiones posteriores.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mac"></a>Capítulo 16. Mandatory Access Control</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#mac-synopsis">16.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#mac-inline-glossary">16.2. Términos clave en este capítulo</a></span></dt><dt><span class="sect1"><a href="#mac-initial">16.3. Explicación de MAC</a></span></dt><dt><span class="sect1"><a href="#mac-understandlabel">16.4. Las etiquetas MAC</a></span></dt><dt><span class="sect1"><a href="#mac-modules">16.5. Configuración de módulos</a></span></dt><dt><span class="sect1"><a href="#mac-ifoff">16.6. El módulo MAC ifoff</a></span></dt><dt><span class="sect1"><a href="#mac-portacl">16.7. El módulo MAC portacl</a></span></dt><dt><span class="sect1"><a href="#mac-labelingpolicies">16.8. Políticas de etiquetas MAC</a></span></dt><dt><span class="sect1"><a href="#mac-partition">16.9. El módulo MAC partition</a></span></dt><dt><span class="sect1"><a href="#mac-mls">16.10. El módulo de seguridad multinivel MAC</a></span></dt><dt><span class="sect1"><a href="#mac-biba">16.11. El módulo MAC Biba</a></span></dt><dt><span class="sect1"><a href="#mac-lomac">16.12. El módulo MAC LOMAC</a></span></dt><dt><span class="sect1"><a href="#mac-implementing">16.13. Implementación de un entorno seguro con MAC</a></span></dt><dt><span class="sect1"><a href="#MAC-examplehttpd">16.14. Otro ejemplo: Uso de MAC para restringir un servidor web</a></span></dt><dt><span class="sect1"><a href="#mac-troubleshoot">16.15. Depuración de errores en MAC</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-synopsis"></a>16.1. Sinopsis</h2></div></div></div><a id="idp75067344" class="indexterm"></a><a id="idp75072080" class="indexterm"></a><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-inline-glossary"></a>16.2. Términos clave en este capítulo</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-initial"></a>16.3. Explicación de MAC</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-understandlabel"></a>16.4. Las etiquetas MAC</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-modules"></a>16.5. Configuración de módulos</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-ifoff"></a>16.6. El módulo MAC ifoff</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-portacl"></a>16.7. El módulo MAC portacl</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-labelingpolicies"></a>16.8. Políticas de etiquetas MAC</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-partition"></a>16.9. El módulo MAC partition</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-mls"></a>16.10. El módulo de seguridad multinivel MAC</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-biba"></a>16.11. El módulo MAC Biba</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-lomac"></a>16.12. El módulo MAC LOMAC</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-implementing"></a>16.13. Implementación de un entorno seguro con MAC</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="MAC-examplehttpd"></a>16.14. Otro ejemplo: Uso de MAC para restringir un servidor web</h2></div></div></div><p>Pendiente de traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-troubleshoot"></a>16.15. Depuración de errores en MAC</h2></div></div></div><p>Pendiente de traducción</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="audit"></a>Capítulo 17. Auditoría de eventos de seguridad</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Watson</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#audit-synopsis">17.1. *</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="audit-synopsis"></a>17.1. *</h2></div></div></div><a id="idp75109072" class="indexterm"></a><a id="idp75109584" class="indexterm"></a><p>Pendiente de traducción.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks"></a>Capítulo 18. Almacenamiento</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#disks-synopsis">18.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#disks-naming">18.2. Nombres de dispositivo</a></span></dt><dt><span class="sect1"><a href="#disks-adding">18.3. Añadir discos</a></span></dt><dt><span class="sect1"><a href="#raid">18.4. RAID</a></span></dt><dt><span class="sect1"><a href="#usb-disks">18.5. Dispositivos de almacenamiento USB</a></span></dt><dt><span class="sect1"><a href="#creating-cds">18.6. Creación y uso de medios ópticos (CD)</a></span></dt><dt><span class="sect1"><a href="#creating-dvds">18.7. Crear y utilizar medios ópticos (DVDs)</a></span></dt><dt><span class="sect1"><a href="#floppies">18.8. Creación y uso de disquetes (floppies)</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">18.9. Creación y uso de cintas de datos</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">18.10. Respaldos en disquetes</a></span></dt><dt><span class="sect1"><a href="#backup-basics">18.11. Bases para respaldos</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</a></span></dt><dt><span class="sect1"><a href="#snapshots">18.13. Instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>) de sistemas
      de ficheros</a></span></dt><dt><span class="sect1"><a href="#quotas">18.14. Cuotas en sistemas de ficheros</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">18.15. Cifrado de particiones de disco</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-synopsis"></a>18.1. Sinopsis</h2></div></div></div><p>Este capítulo trata sobre el uso de discos en FreeBSD.
      Esto incluye discos basados en memoria, discos conectados
      a través de la red, dispositivos de almacenamiento SCSI/IDE
      estándar y dispositivos que utilizan el interfaz
      USB.</p><p>Tras leer este capítulo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Conocerá la terminología que se usa en
        FreeBSD para describir la organización de datos en un disco
        físico (particiones y porciones).</p></li><li class="listitem"><p>Sabrá cómo añadir discos duros
        a su sistema.</p></li><li class="listitem"><p>Sabrá cómo configurar FreeBSD para utilizar
          dispositivos de almacenamiento USB.</p></li><li class="listitem"><p>Sabrá cómo configurar sistemas virtuales
        de ficheros, como los discos de memoria.
        </p></li><li class="listitem"><p>Sabrá cómo usar cuotas para limitar el uso del
          espacio en disco.</p></li><li class="listitem"><p>Sabrá cómo cifrar discos para hacerlos más
          seguros ante un atacante.</p></li><li class="listitem"><p>Sabrá cómo se crean y graban los CD y DVD en
          FreeBSD.</p></li><li class="listitem"><p>Conocerá diversas opciones de almacenamiento de copias
          de seguridad.</p></li><li class="listitem"><p>Sabrá cómo usar diversos programas de respaldo
          que pueden utilizarse en FreeBSD.</p></li><li class="listitem"><p>Sabrá cómo hacer copias de seguridad utilizando
          disquetes (floppy).</p></li><li class="listitem"><p>Sabrá en qué consiste una instantánea
          (<span class="quote">&#8220;<span class="quote">snapshot</span>&#8221;</span>) y cómo utilizarla
          de forma eficiente.</p></li></ul></div><p>Antes de leer este capítulo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Debe saber cómo configurar e instalar un nuevo kernel
          en FreeBSD (<a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-naming"></a>18.2. Nombres de dispositivo</h2></div></div></div><p>A continuación le mostraremos una lista de dispositivos
      de físicos almacenamiento soportados por FreeBSD
      y los nombres de dispositivo asociados con ellos.</p><div class="table"><a id="disk-naming-physical-table"></a><div class="table-title">Tabla 18.1. Convenciones para nombrar discos físicos</div><div class="table-contents"><table summary="Convenciones para nombrar discos físicos" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Tipo de unidad</th><th>Nombre de dispositivo de la unidad</th></tr></thead><tbody><tr><td>Discos duros IDE</td><td><code class="literal">ad</code></td></tr><tr><td>Unidades CDROM IDE</td><td><code class="literal">acd</code></td></tr><tr><td>Discos duros SCSI y dispositivos de almacenamiento masivo
              USB</td><td><code class="literal">da</code></td></tr><tr><td>Unidades CDROM SCSI</td><td><code class="literal">cd</code></td></tr><tr><td>Diferentes tipos de unidades CDROM no estándares</td><td><code class="literal">mcd</code> para CD-ROM Mitsumi,
	      <code class="literal">scd</code> para CD-ROM Sony,
	      <code class="literal">matcd</code> para CD-ROM Matsushita/Panasonic
	    </td></tr><tr><td>Unidades de disquete (floppy)</td><td><code class="literal">fd</code></td></tr><tr><td>Unidades de cinta SCSI</td><td><code class="literal">sa</code></td></tr><tr><td>Unidades de cinta IDE</td><td><code class="literal">ast</code></td></tr><tr><td>Unidades Flash</td><td><code class="literal">fla</code> para dispositivos <span class="trademark">DiskOnChip</span>®</td></tr><tr><td>Unidades RAID</td><td><code class="literal">aacd</code> para <span class="trademark">Adaptec</span>® AdvancedRAID,
	      <code class="literal">mlxd</code> y <code class="literal">mlyd</code>
	      para <span class="trademark">Mylex</span>®,
	      <code class="literal">amrd</code> para AMI <span class="trademark">MegaRAID</span>®,
	      <code class="literal">idad</code> para Compaq Smart RAID,
	      <code class="literal">twed</code> para <span class="trademark">3ware</span>® RAID.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-adding"></a>18.3. Añadir discos</h2></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">David</span> <span class="surname">O'Brien</span></span>. </span></div></div></div><a id="idp75167440" class="indexterm"></a><p>Digamos que queremos añadir un nuevo disco SCSI a una
      máquina que solo tiene un disco.  Comience por apagar el
      sistema e instale el disco siguiendo las instrucciones del fabricante
      de la computadora, del disco y de la controladora.  Debido a la gran
      variedad de procedimientos posibles los detalles están más
      allá del alcance de este texto.</p><p>Entre como usuario <code class="systemitem">root</code>.  Una vez instalado el
      disco inspeccione <code class="filename">/var/run/dmesg.boot</code>
      para asegurarse de que el sistema encontró el nuevo disco.
      Continuando con nuestro ejemplo, el disco recién añadido
      será
      <code class="filename">da1</code> y queremos montarlo en
      <code class="filename">/1</code> (si está añadiendo un disco IDE,
      el nombre de dispositivo será
      <code class="filename">wd1</code> en sistemas anteriores a 4.0, y
      <code class="filename">ad1</code> en sistemas 4.X y 5.X).</p><a id="idp75171792" class="indexterm"></a><a id="idp75172304" class="indexterm"></a><a id="idp75172816" class="indexterm"></a><p>FreeBSD funciona en computadoras IBM-PC y compatibles, por lo tanto
      tendrá en cuenta las particiones de la BIOS del PC, que son
      diferentes del tipo de partición que se ha venido usando en
      BSD.  Un disco para PC puede contener hasta cuatro entradas de
      particiones BIOS.  Si el disco va a utilizarse íntegramente
      con FreeBSD puede usar el modo
      <span class="emphasis"><em>dedicado</em></span>.  Si no, FreeBSD tendrá que
      instalarse dentro de una las particiones BIOS.  En FreeBSD se llama
      slices (<span class="quote">&#8220;<span class="quote">porciones</span>&#8221;</span> o <span class="quote">&#8220;<span class="quote">rebanadas</span>&#8221;</span>) a las
      particiones de PC BIOS para no confundirlas con las particiones BSD.
      También puede utilizar slices en un disco dedicado a
      FreeBSD pero que se está usando en un sistema que también
      tiene otro sistema operativo instalado.
      Esta es una buena manera de evitar confundir la versión de
      <code class="command">fdisk</code> de otros sistemas operativos.</p><p>Desde el punto de vista de las slices el disco se
      añadirá como <code class="filename">/dev/da1s1e</code>.
      Se interpreta del siguiente modo: disco SCSI, unidad
      número 1 (segundo disco SCSI), slice 1 (partición 1
      de PC BIOS), y partición BSD <code class="filename">e</code>.
      Si es un disco dedicado, el disco se añadirá como
      <code class="filename">/dev/da1e</code>.</p><p>Debido al uso de enteros de 32-bits para almacenar el número
      de sectores, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> (llamado <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> en
      FreeBSD 4.X) está limitado a 2^32-1 sectores por disco
      ó 2TB (en la mayoría de los casos).  El formato de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> permite un sector de arranque de un máximo de
      más de 2^32-1 y no más de 2^32-1 de longitud, limitando
      las particiones a 2TB y los discos a 4TB (también en
      la mayoría de los casos).  El formato <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sunlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sunlabel</span>(8)</span></a> tiene
      una limitación de 2^32-1 sectores por partición y 8
      particiones en un espacio máximo de 16TB.  Si va a usar discos
      mayores puede usar particiones <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpt</span>(8)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75181520"></a>18.3.1. Uso de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a></h3></div></div></div><a id="idp75182928" class="indexterm"></a><a id="idp75184208" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Navegar en <span class="application">Sysinstall</span></strong></p><p>Puede utilizar <code class="command">sysinstall</code>
            (<code class="command">/stand/sysinstall</code> en versiones de FreeBSD
            anteriores a 5.2) para particionar y etiquetar un
            disco nuevo usando sus intuitivos menús.
            Entre como el usuario <code class="systemitem">root</code> o utilice
            <code class="command">su</code>.  Ejecute
            <code class="command">sysinstall</code> y entre al menú
            <code class="literal">Configure</code>.  Dentro de
            <code class="literal">FreeBSD Configuration Menu</code>, descienda
            y seleccione la opción <code class="literal">Fdisk</code>.</p></li><li class="step"><p class="title"><strong>Editor de particiones <span class="application">fdisk</span></strong></p><p>Una vez dentro de <span class="application">fdisk</span>,
            teclée <strong class="userinput"><code>A</code></strong> si quiere usar el
            disco entero con FreeBSD  Cuando se le pregunte
            <span class="quote">&#8220;<span class="quote">remain cooperative with any future
            possible operating systems</span>&#8221;</span>
            <a href="#ftn.idp75200464" class="footnote" id="idp75200464"><sup class="footnote">[10]</sup></a>, responda <code class="literal">YES</code>.
            Escriba los cambios al disco pulsando <strong class="userinput"><code>W</code></strong>.
            Salga del editor FDISK pulsando <strong class="userinput"><code>q</code></strong>.
            A continuación se le preguntará sobre el
            <span class="quote">&#8220;<span class="quote">Master Boot Record</span>&#8221;</span>.  Debido a que está
            añadiendo un nuevo disco a un sistema que ya está
            instalado, tendrá que seleccionar
            <code class="literal">None</code>.</p></li><li class="step"><p class="title"><strong>Editor de etiquetas de disco</strong></p><a id="idp75203792" class="indexterm"></a><p>A continuación, debe salir de
            <span class="application">sysinstall</span> e iniciarlo de nuevo.
            Siga las instrucciones arriba expuestas, pero esta vez elija la
            opción <code class="literal">Label</code>.  De este modo
            accederá al
            <code class="literal">editor de etiquetas de disco</code>.
            En él  creará las particiones BSD
            tradicionales.  Un disco puede tener hasta ocho particiones,
            etiquetadas desde la <code class="literal">a</code> a la
            <code class="literal">h</code>.
            Algunas de las etiquetas de las particiones tienen
            usos especiales.  La partición <code class="literal">a</code>
            se utiliza para la partición raíz
            (<code class="filename">/</code>), por lo tanto sólo su disco
            de sistema (esto es, el disco desde el cual arranca)
            tendrá una partición <code class="literal">a</code>.
            La partición <code class="literal">b</code> se usa como
            partición swap; puede tener más de una
            partición swap y puede alojarlas en más de un
            disco.  La partición <code class="literal">c</code>
            hace referencia al disco entero en modo dedicado, o a
            la slice de FreeBSD completa en modo slice.  Las demás
            particiones son para el resto de los usos típicos.</p><p>El editor de etiquetas de
            <span class="application">sysinstall</span>
            creará la partición <code class="literal">e</code> como
            partición <span class="quote">&#8220;<span class="quote">ni raíz, ni swap</span>&#8221;</span>.
            En el editor de etiquetas crée un solo sistema de
            ficheros tecleando <strong class="userinput"><code>C</code></strong>.  Cuando se
            le pregunte si debe etiquetarse como FS (sistema de ficheros) o
            swap, elija <code class="literal">FS</code> y teclée un punto de
            montaje (por ejemplo <code class="filename">/mnt</code>).  Al
            añadir un disco en modo
            <span class="quote">&#8220;<span class="quote">post-instalación</span>&#8221;</span>
            <span class="application">sysinstall</span> no creará
            automáticamente las entradas correspondientes en
            <code class="filename">/etc/fstab</code>, por lo que el punto de
            montaje que usted especifique no tiene importancia.</p><p>Ahora puede escribir la nueva etiqueta al disco y
            crear un sistema de ficheros en él tecleando
            <strong class="userinput"><code>W</code></strong>.  Ignore cualquier error que
            pudiera generar <span class="application">sysinstall</span> acerca
            de dificultades para montar la nueva partición.  Salga del
            editor de etiquetas y de <span class="application">sysinstall</span>.
            </p></li><li class="step"><p class="title"><strong>Terminar</strong></p><p>El último paso es editar
            <code class="filename">/etc/fstab</code>
            y añadir una entrada para su nuevo disco.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75216592"></a>18.3.2. Uso de utilidades de línea de comandos</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75217232"></a>18.3.2.1. Uso de slices</h4></div></div></div><p>Esta configuración le permitirá a su
          disco convivir sin sobresaltos con otro sistema operativo
          que pueda estar instalado en su sistema y no
          confundirá a las utilidades <code class="command">fdisk</code> de
          esos otros sistemas operativos.  Se recomienda utilizar este
          método para instalar discos nuevos.
          <span class="emphasis"><em>Utilice el modo dedicado sólamente si tiene
          un buen motivo para hacerlo</em></span>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>fdisk -BI da1</code></strong> #Initialice el nuevo disco.
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -B -w -r da1s1 auto</code></strong> #Etiquételo.
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e da1s1</code></strong> # Edite la etiqueta de disco que acaba de crear y añada particiones.
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1s1e</code></strong> # Repita este paso por cada partición que crée.
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da1s1e /1</code></strong> # Monte la partición o particiones.
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # Añada la/s entrada/s apropiadas en <code class="filename">/etc/fstab</code>.</pre><p>Si tiene un disco IDE, sustituya <code class="filename">ad</code>
          por <code class="filename">da</code>.  En sistemas anteriores a 4.X
          utilice <code class="filename">wd</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75231696"></a>18.3.2.2. Dedicado</h4></div></div></div><a id="idp75232336" class="indexterm"></a><p>Si no va a compartir el nuevo disco con otro sistema
          operativo puede utilizar el modo <code class="literal">dedicado</code>.
          Recuerde que este modo puede confundir a los sistemas operativos
          de Microsoft, aunque no podrán dañar por ello el
          disco o su contenido.  Tenga en cuenta que FreeBSD (de IBM)
          se <span class="quote">&#8220;<span class="quote">apropiará</span>&#8221;</span> de cualquier partición
          que encuentre y no entienda.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -Brw da1 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -e da1</code></strong>				# crear partición `e'
<code class="prompt">#</code> <strong class="userinput"><code>newfs -d0 /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>				# agregar una entrada para /dev/da1e
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><p>Una forma alternativa de hacerlo sería:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel /dev/da1 | disklabel -BrR da1 /dev/stdin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>					# añadir una entrada para /dev/da1e
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A partir de FreeBSD 5.1-RELEASE, la utilidad
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> reemplazó al antiguo programa
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> se han eliminado muchos
          parámetros y opciones obsoletas;
          en los ejemplos de arriba la opción <code class="option">-r</code>
          debe eliminarse si se usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.  Para más
          información diríjase al manual
          de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="raid"></a>18.4. RAID</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-soft"></a>18.4.1. Software RAID</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd"></a>18.4.1.1. Configuración de controlador de disco
	  concatenado (CCD)</h4></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div><div><span class="authorgroup">Revisado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Brown</span></span>. </span></div></div></div><a id="idp75264336" class="indexterm"></a><a id="idp75265104" class="indexterm"></a><p>Al escoger una solución de almacenamiento masivo
          los factores más importantes a considerar son velocidad,
          fiabilidad y coste.  Es raro tener los tres por igual;
          normalmente un dispositivo de almacenamiento masivo veloz y
          fiable es caro, y para recortar los costes suele sacrificarse
          la velocidad o la fiabilidad.</p><p>Al diseñar el sistema descrito más adelante se
          eligió el coste como el factor más importante,
          seguido de la velocidad, y luego la fiabilidad.
          La velocidad de transferencia de datos para este sistema está,
          en última instancia, limitada por la red.  Y mientras que la
          confiabilidad es muy importante, el controlador CCD descrito
          más adelante sirve datos que están respaldados
          en CD-R y pueden ser reemplazados sin dificultad.</p><p>Al escoger una solución de almacenamiento masivo el
          primer paso es definir sus necesidades.  Si prefiere velocidad o
          fiabilidad por encima del coste, el resultado será
          distinto del que vamos a describir en esta sección.
          </p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-installhw"></a>18.4.1.1.1. Instalación del hardware</h5></div></div></div><p>Además del disco IDE, el núcleo del
            disco CCD está compuesto por tres discos IDE
            discos IDE Western Digital de 30GB y 5400 RPM, que
            ofrecen aproximadamente 90GB de almacenamiento.
            Lo ideal sería que cada disco IDE tuviera
            su propio cable y controlador, pero para minimizar
            costes no se utilizaron controladores IDE adicionales.
            En lugar de eso se configuraron los discos
            con <span class="quote">&#8220;<span class="quote">jumpers</span>&#8221;</span> para que cada controlador IDE
            tuviera un maestro y un esclavo.</p><p>Despues de reiniciar la BIOS se configuró
            para que detectara automáticamente los discos
            conectados.
            FreeBSD los detectó al reiniciar:</p><pre class="programlisting">ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si FreeBSD no detecta todos los discos
            asegúrese de que ha colocado correctamente los
            <span class="quote">&#8220;<span class="quote">jumpers</span>&#8221;</span>.  La mayoría de los discos IDE
            tienen  un <span class="quote">&#8220;<span class="quote">jumper</span>&#8221;</span> <span class="quote">&#8220;<span class="quote">Cable Select</span>&#8221;</span>.
            Este <span class="emphasis"><em>no</em></span> es el
            <span class="quote">&#8220;<span class="quote">jumper</span>&#8221;</span> que define la relación
            maestro/esclavo.  Consulte la documentación
            del disco para identificar el <span class="quote">&#8220;<span class="quote">jumper</span>&#8221;</span>
            correcto.</p></div><p>El siguiente paso es estudiar cómo conectarlos
            para que formen parte del sistema de ficheros.  Investigue
            Debe investigar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>
            (<a class="xref" href="#vinum-vinum" title="Capítulo 20. El Gestor de Volúmenes Vinum">Capítulo 20, <em>El Gestor de Volúmenes Vinum</em></a>) y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>. Nosotros
            elegimos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> para nuestra
            configuración.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-setup"></a>18.4.1.1.2. Configuración de CCD</h5></div></div></div><p>El controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> le permite tomar
            varios discos idénticos y concatenarlos
            en un solo sistema lógico de ficheros.
            Para poder usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> necesita un
            kernel compilado con soporte de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>.
            Añada esta línea al fichero de
            configuración de su kernel, recompile y
            reinstale su kernel:</p><pre class="programlisting">pseudo-device   ccd     4</pre><p>En sistemas 5.X, use la siguiente línea:</p><pre class="programlisting">device   ccd</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.X no es necesario especificar
            un número de dispositivos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>, ya que el controlador
            de dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> es capaz de clonarse a sí
            mismo (se crearán nuevas instancias de dispositivo
            automáticamente según vayan haciendo falta).
            </p></div><p>El soporte de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> también puede
            cargarse como módulo en FreeBSD 3.0 y
            posteriores.</p><p>Para configurar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> tendrá que
            usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> para etiquetar los
            discos:</p><pre class="programlisting">disklabel -r -w ad1 auto
disklabel -r -w ad2 auto
disklabel -r -w ad3 auto</pre><p>Esto crea una etiqueta de disco para
            <code class="filename">ad1c</code>,
            <code class="filename">ad2c</code> y
            <code class="filename">ad3c</code> que abarcan
            el disco completo.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A partir de FreeBSD 5.1-RELEASE
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> reemplazó al antiguo programa
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> se eliminaron muchas
          opciones y parámetros obsoletos;
          en los ejemplos de arriba la opción <code class="option">-r</code>
          deben obviarse.  Para más información consulte
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p></div><p>El siguiente paso es cambiar el tipo de etiqueta
            de disco.  Edite los discos con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>:
            </p><pre class="programlisting">disklabel -e ad1
disklabel -e ad2
disklabel -e ad3</pre><p>Esto abre la etiqueta de disco de cada disco
            con el editor declarado en la variable de
            entorno <code class="envar">EDITOR</code>, por defecto <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>.</p><p>Esta es una etiqueta de disco sin modificar:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> necesita que añada una nueva
            partición <code class="literal">e</code>.  Puede copiarla desde la
            partición <code class="literal">c</code>, pero el tipo de sistema de
            ficheros (la opción <code class="option">fstype</code>) debe ser
            <strong class="userinput"><code>4.2BSD</code></strong>.  La etiqueta del disco
            debería tener este aspecto:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-buildingfs"></a>18.4.1.1.3. Contrucción del sistema de ficheros</h5></div></div></div><p>Puede que todavía no exista el
              nodo de dispositivo para <code class="filename">ccd0c</code>.
              Si es así, ejecute lo siguiente:
              </p><pre class="programlisting">cd /dev
sh MAKEDEV ccd0</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.0 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> administrará
            automáticamente los nodos de dispositivos en
            <code class="filename">/dev</code>, así que no tendrá que
            usar <code class="command">MAKEDEV</code>.</p></div><p>Una vez etiquetados todos los discos construya
            el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>. Utilice
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> con opciones similares a las siguientes:</p><pre class="programlisting">ccdconfig ccd0<a id="co-ccd-dev"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span> 32<a id="co-ccd-interleave"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span> 0<a id="co-ccd-flags"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span> /dev/ad1e<a id="co-ccd-devs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span> /dev/ad2e /dev/ad3e</pre><p>El uso y el significado de cada una de las opciones se
            muestra más abajo:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-dev"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El primer argumento es el dispositivo a configurar, en este
              caso <code class="filename">/dev/ccd0c</code>.  La parte
              <code class="filename">/dev/</code> es opcional.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-interleave"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El intervalo para el sistema de ficheros.  El intervalo
              define el tamaño de una banda en bloques de disco,
              normalmente 512 bytes.  Por lo tanto, un intervalo
              de 32 equivaldría 16.384 bytes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-flags"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Banderas para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>. Si desea disponer
              sus discos en espejo use aquí una bandera.
              Esta configuración no necesita discos en espejo,
              por lo que está dispuesta a 0 (cero).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-devs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Los últimos argumentos de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>
              son los dispositivos a colocar en el array.  Utilice
              la ruta completa para cada dispositivo.</p></td></tr></table></div><p>Despues de ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
            estará configurado y podrá instalar un sistema
            de ficheros.  Consulte las opciones de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> y
            ejecute:</p><pre class="programlisting">newfs /dev/ccd0c</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-auto"></a>18.4.1.1.4. Automatización</h5></div></div></div><p>Seguramente querrá que
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> esté dispuesto tras cada reinicio.  Para
            ello, debe configurarlo.  Guarde su configuración
            en <code class="filename">/etc/ccd.conf</code> mediante lo
            siguiente:</p><pre class="programlisting">ccdconfig -g &gt; /etc/ccd.conf</pre><p>Durante el reinicio, el <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>
            <code class="command">/etc/rc</code>
            ejecuta <code class="command">ccdconfig -C</code> si encuentra
            el fichero <code class="filename">/etc/ccd.conf</code>.  De este modo
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> queda configurado automáticamente para que
            pueda montarse.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si ha arrancando en modo mono usuario necesita
            ejecutar el siguiente comando antes de que pueda montar
            el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> para configurar el array:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ccdconfig -C</pre></div><p>Para montar automaticamente el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
            coloque una entrada para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> en
            <code class="filename">/etc/fstab</code> para que se monte
            durante el arranque:</p><pre class="programlisting">/dev/ccd0c              /media       ufs     rw      2       2</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum"></a>18.4.1.2. El administrador de volúmenes Vinum</h4></div></div></div><a id="idp75389776" class="indexterm"></a><a id="idp75390544" class="indexterm"></a><p>El administrador de volúmenes Vinum es un
          controlador de dispositivos de bloque que implementa
          unidades de disco virtuales.  Aísla los discos hardware de
          la interfaz de dispositivos de bloque y mapea datos de
          modo que revierta en un incremento de flexibilidad,
          rendimiento y fiabilidad comparados con el sistema de slices
          de almacenamiento de disco tradicional.
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> implementa los modelos RAID-0, RAID-1 y
          RAID-5, individualmente o combinados.</p><p>Consulte el <a class="xref" href="#vinum-vinum" title="Capítulo 20. El Gestor de Volúmenes Vinum">Capítulo 20, <em>El Gestor de Volúmenes Vinum</em></a> para mayor
          información sobre <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-hard"></a>18.4.2. RAID por Hardware</h3></div></div></div><a id="idp75395408" class="indexterm"></a><p>FreeBSD admite una gran variedad de controladores
        <acronym class="acronym">RAID</acronym> por hardware.  Estos dispositivos
        controlan un subsistema <acronym class="acronym">RAID</acronym> sin necesidad
        de software específico para FreeBSD que administre el
        array.</p><p>Puede controlar la mayoría de las operaciones de disco con
        una tarjeta que incorpore <acronym class="acronym">BIOS</acronym>.
        El siguiente texto es una breve
        descripción de configuración utilizando una
        controladora Promise <acronym class="acronym">RAID</acronym> <acronym class="acronym">IDE</acronym>.
        Cuando se instala esta tarjeta e inicia el sistema despliega
        un <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> pidiendo información.  Siga las
        instrucciones para entrar a la pantalla de configuración de la
        tarjeta.  Ahí tendrá posibilidad de combinar todos los
        discos que haya conectado.  Hecho esto el disco (o discos)
        aparecerán como una sola unidad en FreeBSD.  Pueden configurarse
        otros niveles de
        <acronym class="acronym">RAID</acronym>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75408464"></a>18.4.3. Reconstrucción de arrays ATA RAID1</h3></div></div></div><p>FreeBSD le permite reemplazar en caliente un disco dañado.
        Esto requiere que lo intercepte antes de reiniciar.</p><p>Probablemente vea algo como lo siguiente en
        <code class="filename">/var/log/messages</code> o en la salida de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>:</p><pre class="programlisting">ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11)\\
status=59 error=40
ar0: WARNING - mirror lost</pre><p>Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atacontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atacontrol</span>(8)</span></a> para más
        información:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol list</code></strong>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</pre><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Primero debe desconectar el disco del array para
            que pueda retirarlo con seguridad:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol detach 3</code></strong></pre></li><li class="step"><p>Reemplace el disco.</p></li><li class="step"><p>Conecte el disco de repuesto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol attach 3</code></strong>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</pre></li><li class="step"><p>Reconstruya el array:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol rebuild ar0</code></strong></pre></li><li class="step"><p>El comando de reconstrucción no responderá hasta
            que termine la tarea.  Puede abrir otra terminal (mediante
            <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F<em class="replaceable"><code>n</code></em></strong></span>)
            y revisar el progreso ejecutando lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | tail -10</code></strong>
[texto eliminado]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0% completed</pre></li><li class="step"><p>Espere hasta que termine la operación.</p></li></ol></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="usb-disks"></a>18.5. Dispositivos de almacenamiento USB</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp75436752" class="indexterm"></a><p>Hoy día hay una enorme cantidad de soluciones de
      almacenamiento externoque usan el bus serie universal (USB):
      discos duros, <span class="quote">&#8220;<span class="quote">mecheros</span>&#8221;</span> (o
      <span class="quote">&#8220;<span class="quote">lápices</span>&#8221;</span>) USB, grabadoras de
      CD-R, etc. FreeBSD puede usar estos dispositivos.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75439056"></a>18.5.1. Configuración</h3></div></div></div><p>El controlador de dispositivos de almacenamiento masivo
        USB, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>, ofrece soporte para dispositivos de
        almacenamiento USB.  Si usa el kernel <code class="filename">GENERIC</code>
        no necesita cambiar nada en su configuración.  Si
        utiliza un kernel personalizado asegúrese de que su
        fichero de configuración del kernel contiene las
        siguientes líneas:</p><pre class="programlisting">device scbus
device da
device pass
device uhci
device ohci
device usb
device umass</pre><p>El controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> usa el subsistema SCSI para
        acceder a los dispositivos de almacenamiento USB y su
        dispositivo USB aparecerá en el sistema como
        dispositivo SCSI.  Dependiendo del chipset USB de su
        placa base sólamente necesitará
        <code class="literal">device uhci</code> o
        <code class="literal">device ohci</code>;  en cualquier caso tener
        los dos en el fichero de configuración del kernel
        no provocará ningún daño.  No olvide
        compilar e instalar el nuevo kernel si hizo alguna
        modificación.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si su dispositivo USB es una grabadora CD-R o DVD el
          controlador SCSI CD-ROM, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cd</span>(4)</span></a>, debe ser añadirse al
          kernel mediante la siguiente línea:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device cd</pre><p xmlns="http://www.w3.org/1999/xhtml">Dado que la grabadora aparece como una unidad
          SCSI no tiene que usar el controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a>
          en la configuración del kernel.</p></div><p>En FreeBSD 5.X y en la rama 4.X desde FreeBSD 4.10-RELEASE
        el soporte para controladores USB 2.0 se incorpora al sistema del
        siguiente modo:</p><pre class="programlisting">device ehci</pre><p>Tenga en cuenta que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uhci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uhci</span>(4)</span></a> y
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ohci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ohci</span>(4)</span></a> siguen siendo necesarios si quiere disponer de
        soporte para USB 1.X.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 4.X, El dæmon USB (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbd</span>(8)</span></a>) debe
          ejecutarse para poder ver ciertos tipos de dispositivo USB.
          Para habilitarlo, añada
          <code class="literal">usbd_enable="YES"</code> en
          <code class="filename">/etc/rc.conf</code> y reinicie la
          máquina.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75451856"></a>18.5.2. Prueba de la configuración</h3></div></div></div><p>La configuración está lista para probarse:
        conecte su dispositivo USB; en el búfer de mensajes del
        sistema (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>), la unidad debe aparecer como algo
        similar a esto:</p><pre class="screen">umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 dp=0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB (258048 512 byte sectors: 64H 32S/T 126C)</pre><p>Obviamente la marca, el nodo de dispositivo
        (<code class="filename">da0</code>) y otros detalles
        pueden diferir dependiendo de su hardware.</p><p>Ya que el dispositivo USB aparece como uno SCSI,
        puede usar <code class="command">camcontrol</code> para ver una lista
        de dispositivos USB conectados al
        sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 (da0,pass0)</pre><p>Si la unidad tiene un sistema de ficheros puede montarla.
        La <a class="xref" href="#disks-adding" title="18.3. Añadir discos">Sección 18.3, &#8220;Añadir discos&#8221;</a> contiene información que
        le resultará muy útil para formatear y crear
        particiones en el disco USB en caso de necesitarlo.</p><p>Si desconecta el dispositivo (el disco debe desmontarse
        previamente), debería ver en el búfer de mensajes
        del sistema algo parecido a esto:</p><pre class="screen">umass0: at uhub0 port 1 (addr 2) disconnected
(da0:umass-sim0:0:0:0): lost device
(da0:umass-sim0:0:0:0): removing device entry
GEOM: destroy disk da0 dp=0xc2d74850
umass0: detached</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75466576"></a>18.5.3. Lecturas recomendadas</h3></div></div></div><p>Ademas de las secciones
        <a class="link" href="#disks-adding" title="18.3. Añadir discos">Cómo añadir discos</a>
        y <a class="link" href="#mount-unmount" title="3.6. Montaje y desmontaje de sistemas de ficheros">Montado y desmontado de sistemas
        ficheros</a>, consulte las siguientes páginas man:
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a> y
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbdevs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbdevs</span>(8)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="creating-cds"></a>18.6. Creación y uso de medios ópticos (CD)</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mike</span> <span class="surname">Meyer</span></span>. </span></div></div></div><a id="idp75473872" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75475024"></a>18.6.1. Introducción</h3></div></div></div><p>Los CD tienen muchas opciones que los hacen distintos de
        los discos convencionales.  Al principio los usuarios no
        podían escribirlos.  Su diseño permite que leamos
        en ellos sin el retardo del movimiento de una cabeza lectora
        de una pista a otra.
        También son mucho más fáciles de transportar
        de un sistema a otro que muchos otros soportes de
        información.</p><p>Los CD tienen pistas, pero son una sección de los
        que permiten lectura contínua, no una propiedad
        física del disco.  Para crear un CD en FreeBSD debe
        preparar los ficheros de datos que van a constituir las pistas
        del CD y luego escribir las pistas al CD.</p><a id="idp75476432" class="indexterm"></a><a id="idp75476944" class="indexterm"></a><p>El sistema de ficheros ISO 9660 se diseñó
        para gestionar estas diferencias.  Por desgracia implementa
        límites de sistema de ficheros que eran comunes en la
        época en que se diseñó.
        Por suerte también proporciona un mecanismo de extensiones
        que permite que CD escritos excediendo dichos límites
        funcionen en sistemas que no soportan esas extensiones.</p><a id="idp75478608" class="indexterm"></a><p>El port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>
        incluye <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, un programa que le permitirá
        crear un fichero de datos que contenga un sistema de
        ficheros ISO 9660.  Incorpora opciones que soportan varias
        extensiones.  Se describe más adelante.</p><a id="idp75481168" class="indexterm"></a><p>Qué herramienta usar para grabar el CD depende de si
        su grabadora es ATAPI o no.  Las grabadoras de CD ATAPI usan el
        programa <code class="command">burncd</code>,
        que forma parte del sistema base.  Las grabadoras SCSI y USB usan
        <code class="command">cdrecord</code>, del
        port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>.</p><p><code class="command">burncd</code> no soporta cualquier unidad de
        grabación.  Para saber si una unidad está
        soportada consulte la siguiente lista de
        <a class="link" href="http://www.freebsd.dk/ata/" target="_top">unidades CD-R/RW soportadas</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp75485264" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Si utiliza FreeBSD 5.X, FreeBSD 4.8-RELEASE
          o posteriores, puede utilizar
          <code class="command">cdrecord</code> y
          otras herramientas para unidades SCSI en hardware ATAPI con
          el <a class="link" href="#atapicam" title="18.6.9. Uso del controlador ATAPI/CAM">módulo ATAPI/CAM</a>.</p></div><p>Si quiere usar un interfaz gráfico con su software
        de grabación de CD quizás le guste
        <span class="application">X-CD-Roast</span> o
        <span class="application">K3b</span>.  Puede instalar estas herramientas
        como paquetes o desde los ports
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/xcdroast/pkg-descr">sysutils/xcdroast</a> y
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/k3b/pkg-descr">sysutils/k3b</a>, respectivamente.
        <span class="application">X-CD-Roast</span> y
        <span class="application">K3b</span> requieren el
        <a class="link" href="#atapicam" title="18.6.9. Uso del controlador ATAPI/CAM">módulo ATAPI/CAM</a>
        si usa hardware ATAPI.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mkisofs"></a>18.6.2. mkisofs</h3></div></div></div><p>El programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> (que forma parte del
        port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>)
        genera un sistema de ficheros ISO 9660 que es una imagen
        de un árbol de directorios en el espacio de nombres
        del sistema de ficheros <span class="trademark">UNIX</span>®.  Esta es la forma más simple
        de usarlo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -o ficherodeimagen.iso /ruta/del/árbol</code></strong></pre><a id="idp75499344" class="indexterm"></a><p>Este comando creará un
        <em class="replaceable"><code>ficherodeimagen.iso</code></em>
        que contenga un sistema de ficheros ISO 9660 que es una copia del
        árbol ubicado en
        <em class="replaceable"><code>/ruta/al/árbol</code></em>. En el
        proceso, mapeará los nombres de fichero a nombres que
        se ajusten a las limitaciones del estándar del sistema
        de ficheros ISO 9660, y excluirá ficheros que posean
        nombres no característicos de sistemas de ficheros
        ISO.</p><a id="idp75501648" class="indexterm"></a><a id="idp75502800" class="indexterm"></a><p>Existe gran cantidad de opciones que permiten superar
        esas restricciones.  En particular, <code class="option">-R</code>
        habilita las extensiones Rock Ridge comunes para sistemas
        <span class="trademark">UNIX</span>®, <code class="option">-J</code> habilita las extensiones Joliet
        usadas por sistemas Microsoft y <code class="option">-hfs</code> puede
        usarse para crear sistemas de ficheros utilizados por
        <span class="trademark">Mac OS</span>®.</p><p>Puede utilizar <code class="option">-U</code> para deshabilitar
        todas las restricciones de nombres de fichero si quiere crear un
        CD que se vaya a usar exclusivamente en sistemas FreeBSD.  Cuando se
        usa con <code class="option">-R</code> produce una imagen de sistema
        de ficheros que es idéntica al árbol FreeBSD
        origen, aunque puede violar el estándar ISO 9660
        de múltiples formas.</p><a id="idp75511888" class="indexterm"></a><p>La última opción de uso general es
        <code class="option">-b</code>.  Se usa para configurar la ubicación
        de la imagen de arranque que se usará al crear un CD
        arrancable <span class="quote">&#8220;<span class="quote">El Torito</span>&#8221;</span>.
        Esta opción usa como argumento la ruta a la imagen de
        arranque desde la raíz del árbol de directorios que
        se va a escribir en el CD.  Por defecto <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>
        crea una imagen ISO en un modo llamado <span class="quote">&#8220;<span class="quote">de emulación
        de disquete (floppy)</span>&#8221;</span>, y por lo tanto espera que
        la imagen de arranque sea exactamente de 1.200, 1.440 o
        2880 KB de tamaño.  Algunos cargadores de arranque,
        como el que se usa en los discos de la distribución FreeBSD,
        no utilizan modo de emulación: se usa la opción
        <code class="option">-no-emul-boot</code>.  Por tanto, si
        <code class="filename">/tmp/miarranque</code> tiene un sistema FreeBSD
        arrancable con la imagen de arranque en
        <code class="filename">/tmp/miarranque/boot/cdboot</code> podría
        crear la imagen en un sistema de ficheros ISO 9660 en
        <code class="filename">/tmp/arrancable.iso</code> de la siguiente manera:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -R -no-emul-boot -b boot/cdboot -o /tmp/arrancable.iso /tmp/miarranque</code></strong></pre><p>Hecho esto, si tiene <code class="filename">vn</code>
        (FreeBSD 4.X), o <code class="filename">md</code>
        (FreeBSD 5.X)
        configurado en su kernel, puede montar el sistema de
        ficheros del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig -e vn0c /tmp/arrancable.iso</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/vn0c /mnt</code></strong></pre><p>En FreeBSD 4.X y FreeBSD 5.X proceda del siguiente
        modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /tmp/arrancable.iso -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/md0 /mnt</code></strong></pre><p>Ahora puede verificar que <code class="filename">/mnt</code>
        y <code class="filename">/tmp/miarranque</code> sean idénticos.</p><p>Existen muchas otras opciones que puede usar para depurar el
        comportamiento de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, sobre todo en lo que se refiere
        al esquema ISO 9660 y la creación de discos Joliet y HFS.
        Consulte el manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="burncd"></a>18.6.3. burncd</h3></div></div></div><a id="idp75531344" class="indexterm"></a><p>Si tiene una grabadora ATAPI puede usar
        <code class="command">burncd</code> para grabar una imagen ISO en un
        CD.  <code class="command">burncd</code> forma parte del sistema base, y
        está en <code class="filename">/usr/sbin/burncd</code>.  Su uso
        es muy sencillo, ya que tiene pocas opciones:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f unidaddecd data ficheroimagen.iso fixate</code></strong></pre><p>Esto grabará una copia de <em class="replaceable"><code>ficheroimagen.iso</code></em>
        en <em class="replaceable"><code>unidadcd</code></em>.  El dispositivo por
        defecto es <code class="filename">/dev/acd0</code>
        (o <code class="filename">/dev/acd0c</code> en FreeBSD 4.X).
        Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">burncd</span>(8)</span></a> para ver las opciones de configuración
        de velocidad de escritura, expulsión de CD una vez grabado, y
        escritura de datos de audio.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cdrecord"></a>18.6.4. cdrecord</h3></div></div></div><p>Si no dispone de una grabadora ATAPI de CD, tendrá que
        usar <code class="command">cdrecord</code> para grabar sus CD.
        <code class="command">cdrecord</code> no forma parte del sistema
        base; instálelo  desde el port
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> o
        como paquete.  Los cambios en el sistema base pueden
        hacer que las versiones binarias del programa fallen.
        Tendrá que actualizar el port cuando actualice su sistema
        o, si está
        <a class="link" href="#stable" title="23.2.2. Stable">siguiendo la rama -STABLE</a>,
        actualizar el port cuando haya una nueva versión
        disponible.</p><p>Aunque <code class="command">cdrecord</code> tiene muchas opciones, el
        uso básico es incluso más simple que
        el de <code class="command">burncd</code>.  Así se graba una imagen
        ISO 9660:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord dev=dispositivo ficheroimagen.iso</code></strong></pre><p>La parte complicada de utilizar <code class="command">cdrecord</code> es
        encontrar qué <code class="option">dev</code> usar.  Utilice la
        bandera <code class="option">-scanbus</code> para dar con la
        configuración apropiada.  La salida será parecida a
        la siguiente:</p><a id="idp75548368" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord -scanbus</code></strong>
Cdrecord 1.9 (i386-unknown-freebsd4.2) Copyright (C) 1995-2000 Jörg Schilling
Using libscg version 'schily-0.1'
scsibus0:
        0,0,0     0) 'SEAGATE ' 'ST39236LW       ' '0004' Disk
        0,1,0     1) 'SEAGATE ' 'ST39173W        ' '5958' Disk
        0,2,0     2) *
        0,3,0     3) 'iomega  ' 'jaz 1GB         ' 'J.86' Removable Disk
        0,4,0     4) 'NEC     ' 'CD-ROM DRIVE:466' '1.26' Removable CD-ROM
        0,5,0     5) *
        0,6,0     6) *
        0,7,0     7) *
scsibus1:
        1,0,0   100) *
        1,1,0   101) *
        1,2,0   102) *
        1,3,0   103) *
        1,4,0   104) *
        1,5,0   105) 'YAMAHA  ' 'CRW4260         ' '1.0q' Removable CD-ROM
        1,6,0   106) 'ARTEC   ' 'AM12S           ' '1.06' Scanner
        1,7,0   107) *</pre><p>Esta lista muestra los valores <code class="option">dev</code> apropiados para
        los dispositivos de la lista.  Localice su grabadora de CD y
        utilice los tres números separados por comas como valor
        para <code class="option">dev</code>.  En este caso, el dispositivo CDW
        es 1,5,0 y por tanto la entrada apropiada sería
        <code class="option">dev=1,5,0</code>.  Hay modos más
        fáciles de especificar este valor; consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>
        para más detalles.  También es el lugar donde buscar
        información sobre la escritura de pistas de audio,
        controlar la velocidad de escritura y muchas más cosas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="duplicating-audiocds"></a>18.6.5. Copiar CD de audio</h3></div></div></div><p>Puede duplicar un CD de audio extrayendo los datos de audio del
        CD a ficheros y escribir estos ficheros en un CD virgen.
        El proceso es ligeramente diferente en unidades ATAPI y
        SCSI.</p><div class="procedure"><a id="idp75574864"></a><div class="procedure-title">Procedimiento 18.1. Unidades SCSI</div><ol class="procedure" type="1"><li class="step"><p>Use <code class="command">cdda2wav</code> para extraer el audio.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdda2wav -v255 -D2,0 -B -Owav</code></strong></pre></li><li class="step"><p>Use <code class="command">cdrecord</code> para escribir
            los ficheros <code class="filename">.wav</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdrecord -v dev=2,0 -dao -useinfo  *.wav</code></strong></pre><p>Asegúrese de que <em class="replaceable"><code>2,0</code></em>
            este configurado apropiadamente, como se describe en la
            <a class="xref" href="#cdrecord" title="18.6.4. cdrecord">Sección 18.6.4, &#8220;cdrecord&#8221;</a>.</p></li></ol></div><div class="procedure"><a id="idp75581392"></a><div class="procedure-title">Procedimiento 18.2. Unidades ATAPI</div><ol class="procedure" type="1"><li class="step"><p>El controlador de CD ATAPI hace que cada pista sea
            accesible como
            <code class="filename">/dev/acddtnn</code>,
            donde <em class="replaceable"><code>d</code></em> es el número
            de unidad y <em class="replaceable"><code>nn</code></em> es el
            número de pista expresado con dos dígitos
            decimales, precedido por un cero si es necesario.
            La primera pista del primer disco es
            <code class="filename">/dev/acd0t01</code>, la segunda es
            <code class="filename">/dev/acd0t02</code>, la tercera es
            <code class="filename">/dev/acd0t03</code> y así
            sucesivamente.</p><p>Asegúrese de que existen los ficheros apropiados
            en <code class="filename">/dev</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV acd0t99</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.0 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> creará
            y gestionará automáticamente las entradas
            necesarias en <code class="filename">/dev</code>, así que
            no será necesario usar
            <code class="command">MAKEDEV</code>.</p></div></li><li class="step"><p>Extraer cada pista con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>.  También
            deberá declarar un tamaño específico de
            bloque al extraer los ficheros.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t01 of=pista1.cdr bs=2352</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t02 of=pista2.cdr bs=2352</code></strong>
...
</pre></li><li class="step"><p>Grabar los ficheros extraídos a disco con
            <code class="command">burncd</code>.  Debe declarar que son
            ficheros de audio y que <code class="command">burncd</code> debe cerrar
            (<span class="quote">&#8220;<span class="quote">fixate</span>&#8221;</span>) el disco al terminar la
            grabación.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd0 audio pista1.cdr pista2.cdr ... fixate</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="imaging-cd"></a>18.6.6. Duplicar CDs de datos</h3></div></div></div><p>Puede copiar un CD de datos a un fichero de
        imagen que será funcionalmente equivalente al fichero
        de imagen creado con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, y puede usarlo
        para duplicar cualquier CD de datos.  El ejemplo dado
        aquí asume que su dispositivo CDROM es
        <code class="filename">acd0</code>.  Sustitúyalo por el
        dispositivo CDROM correcto para su configuración.
        Bajo FreeBSD 4.X, se debe añadir una
        <code class="literal">c</code> al final del nombre del dispositivo para
        indicar la partición entera o, en el caso de los CDROM,
        el disco entero.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0 of=fichero.iso bs=2048</code></strong></pre><p>Hecha la imagen puede garbarla en un CD como se
        describió anteriormente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mounting-cd"></a>18.6.7. Uso de CD de datos</h3></div></div></div><p>Ahora que ha creado un CDROM de datos estándar
        tal vez quiera montarlo y leer los datos que contiene.  Por
        defecto <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> asume que los sistemas de ficheros
        son de tipo <code class="literal">ufs</code>.  Si trata de
        hacer algo como</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/cd0 /mnt</code></strong></pre><p>recibirá un error como este:
        <span class="errorname">Incorrect super block</span> y no se
        montará.  Un CDROM no es un sistema de ficheros
        <code class="literal">UFS</code> así que los intentos de montarlo
        como tal fallarán. Tendrá que decirle a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
        que el sistema de ficheros es de tipo <code class="literal">ISO9660</code>
        y funcionará.  Puede hacerlo mediante la
        opción <code class="option">-t cd9660</code>.
        Por ejemplo, si quiere montar el dispositivo CDROM
        <code class="filename">/dev/cd0</code>  en
        <code class="filename">/mnt</code> ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0 /mnt</code></strong></pre><p>Tenga en cuenta que el nombre de su dispositivo
        (<code class="filename">/dev/cd0</code> en este ejemplo) puede
        ser diferente, dependiendo de la interfaz que su CDROM
        utilice.  Además la opción <code class="option">-t cd9660</code>
        sólo ejecuta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a>.  El ejemplo de arriba
        puede resumirse del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 /dev/cd0 /mnt</code></strong></pre><p>En general puede usar CDROM de datos de cualquier
        fabricante, aunque los discos con ciertas extensiones
        ISO 9660 pueden mostrar un comportamiento extraño.
        Por ejemplo, los discos Joliet almacenan todos los nombres
        de fichero en caracteres unicode de dos-bytes.  El kernel
        de FreeBSD no comprende unicode
        (<span class="emphasis"><em>todavía</em></span>) así que
        los caracteres que no están en inglés aparecen
        como signos de interrogación.  (Si utiliza FreeBSD 4.3
        o alguna versión posterior, el controlador CD9660 incluye
        unas estructuras llamadas <span class="quote">&#8220;<span class="quote">ganchos</span>&#8221;</span>, que le
        permitirán cargar una tabla de conversión unicode
        apropiada cuando haga falta.  Hay módulos para algunas
        de las codificaciones más comunes en el port
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cd9660_unicode/pkg-descr">sysutils/cd9660_unicode</a>.)</p><p>Es posible que reciba un error <span class="errorname">Device not
        configured</span> al tratar de montar un CDROM.
        Generalmente esto significa que la unidad de CDROM piensa que no
        hay disco en la bandeja, o que la unidad no es visible
        en el bus.  Puede llevar un par de segundos el que una
        unidad de CDROM se dé cuenta de que ha sido alimentada,
        por lo tanto sea paciente.</p><p>Algunas veces un CDROM SCSI puede <span class="quote">&#8220;<span class="quote">perdido</span>&#8221;</span> debido
        a que no tuvo tiempo suficiente para responder al reset del
        bus.  Si tiene un CDROM SCSI añada la siguiente opción
        a su fichero de  configuración del kernel y
        <a class="link" href="#kernelconfig-building" title="8.5. Compilación e instalación de un kernel personalizado">recompile su kernel</a>.</p><pre class="programlisting">options SCSI_DELAY=15000</pre><p>Esto le indica a su bus SCSI que haga una pausa de 15
        segundos durante el arranque para darle ocasión
        a su unidad de CDROM de responder al reset del bus.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rawdata-cd"></a>18.6.8. Grabar CD de datos <span class="quote">&#8220;<span class="quote">crudos</span>&#8221;</span> (Raw)</h3></div></div></div><p>Puede guardar un fichero directamente a CD
        sin crear un sistema de ficheros ISO 9660.  Algunas
        personas hacen esto al crear respaldos.  Es un proceso
        más rápido que grabar un CD
        estándar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd1 -s 12 data fichero.tar.gz fixate</code></strong></pre><p>Para recuperar los datos guardardados de este modo en un CD,
        debe leer los datos desde el nodo de dispositivo
        <span class="quote">&#8220;<span class="quote">crudo</span>&#8221;</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar xzvf /dev/acd1</code></strong></pre><p>No puede montar este disco como lo haría con un
        CDROM normal.  Estos CDROM no pueden leerse en ningún
        sistema operativo que no sea FreeBSD.  Si quiere montar el CD
        o compartir los datos con otro sistema operativo debe utilizar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> como se describió previamente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="atapicam"></a>18.6.9. Uso del controlador ATAPI/CAM</h3></div><div><span class="authorgroup">Original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp75636432" class="indexterm"></a><p>Este controlador permite que dispositivos ATAPI
        (CD-ROM, CD-RW, unidades DVD, etc) sean accesibles  a través
        del subsistema SCSI y por lo tanto permite el uso de
        aplicaciones como
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a> o
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>.</p><p>Para usar este controlador necesitará añadir
        la siguiente línea al fichero de configuración
        de su kernel:</p><pre class="programlisting">device atapicam</pre><p>Es posible que necesite también las siguientes
        líneas en el fichero de configuración
        de su kernel:</p><pre class="programlisting">device ata
device scbus
device cd
device pass</pre><p>(que, por otra parte, ya deberín estar presentes).</p><p>Recompile, instale su nuevo kernel y reinicie
        su máquina.  Durante el proceso de arranque su
        grabadora debe ser detectada; veamos un ejemplo:</p><pre class="screen">acd0: CD-RW &lt;MATSHITA CD-RW/DVD-ROM UJDA740&gt; at ata1-master PIO4
cd0 at ata1 bus 0 target 0 lun 0
cd0: &lt;MATSHITA CDRW/DVD UJDA740 1.00&gt; Removable CD-ROM SCSI-0 device
cd0: 16.000MB/s transfers
cd0: Attempt to query device size failed: NOT READY, Medium not present - tray closed</pre><p>Puede acceder a la unidad a través del
        del nombre de dispositivo <code class="filename">/dev/cd0</code>;
        por ejemplo, para montar un CDROM en <code class="filename">/mnt</code>,
        teclée lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0 /mnt</code></strong></pre><p>Como <code class="systemitem">root</code>, puede ejecutar el
        siguiente comando para obtener las direcciones SCSI
        del dispositivo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;MATSHITA CDRW/DVD UJDA740 1.00&gt;   at scbus1 target 0 lun 0 (pass0,cd0)</pre><p>Según esto, <code class="literal">1,0,0</code> será la
        dirección SCSI a utilizar con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>
        y otras aplicaciones SCSI.</p><p>Para mayor información sobre sistemas
        ATAPI/CAM y SCSI, diríjase a las páginas
        de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cam</span>(4)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="creating-dvds"></a>18.7. Crear y utilizar medios ópticos (DVDs)</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div><div><span class="authorgroup">Con colaboraciones de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andy</span> <span class="surname">Polyakov</span></span>. </span></div></div></div><a id="idp75658192" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75659344"></a>18.7.1. Introducción</h3></div></div></div><p>Comparado con el CD, el DVD es la nueva generación
        de tecnología de almacenamiento en medios ópticos.
        El DVD puede almacenar más datos que cualquier CD y
        hoy día es el estándar para publicación
        de vídeo.</p><p>Se pueden definir cinco formatos de grabación para
        lo que llamamos un DVD grabable:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DVD-R: Este fué el primer formato de grabación
            de DVD.  El DVD-R estándar fué definido por el
            <a class="link" href="http://www.dvdforum.com/forum.shtml" target="_top">DVD Forum</a>.
            Este formato es de una sola escritura.</p></li><li class="listitem"><p>DVD-RW: Esta es la versión reescribible
            del DVD-R estándar.  Un DVD-RW puede reescribirse
            unas 1.000 veces.</p></li><li class="listitem"><p>DVD-RAM: Este es también un formato
            reescribible soportado por el DVD Forum.  Un
            DVD-RAM puede verse como un disco duro extraíble.
            Este medio no es compatible con la
            mayoría de las unidades DVD-ROM y reproductores
            de video DVD; hay muy pocas grabadoras de DVD que soporten
            el formato DVD-RAM.</p></li><li class="listitem"><p>DVD+RW: Este es un formato reescribible definido
            por la
            <a class="link" href="http://www.dvdrw.com/" target="_top">DVD+RW Alliance</a>.
            Un DVD+RW puede reescribirse unas 1000 veces.</p></li><li class="listitem"><p>DVD+R: Este un formato es la versión
            de una sola escritura del formato DVD+RW.</p></li></ul></div><p>Un DVD grabable de una capa puede almacenar hasta
        4.700.000.000 bytes, es decir, 4'38 GB o
        4485 MB (1 kilobyte son 1.024 bytes).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debemos hacer una distinción entre medio físico
          y aplicación.  Un DVD de vídeo es una estructura
          de fichero específica que puede escribirse en cualquier
          medio físico consistente en un DVD grabable: DVD-R, DVD+R,
          DVD-RW, etc.  Antes de elegir el tipo de medio, debe
          asegurarse que la grabadora y el reproductor de DVD de
          vídeo (un reproductor independiente o una unidad DVD-ROM
          en una computadora) son compatibles con el medio que
          pretende utilizar.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75671376"></a>18.7.2. Configuración</h3></div></div></div><p>Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> para grabar el DVD.  Forma parte
        de las herramientas <span class="application">dvd+rw-tools</span>
        (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/dvd+rw-tools/pkg-descr">sysutils/dvd+rw-tools</a>).
        Las <span class="application">dvd+rw-tools</span> permiten usar todos
        los tipos de DVD.</p><p>Estas herramientas utilizan el subsistema SCSI para
        acceder a los dispositivos, por lo tanto el
        <a class="link" href="#atapicam" title="18.6.9. Uso del controlador ATAPI/CAM">soporte ATAPI/CAM</a> debe estar
        presente en su kernel.  Si su grabadora usa el interfaz
        USB no tendrá que hacerlo, pero tendrá que leer
        la
        <a class="xref" href="#usb-disks" title="18.5. Dispositivos de almacenamiento USB">Sección 18.5, &#8220;Dispositivos de almacenamiento USB&#8221;</a> para más información sobre
        la configuración de dispositivos USB.</p><p>También debe que habilitar el acceso DMA para
        dispositivos ATAPI. Para ello añada la siguiente
        línea a
        <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">hw.ata.atapi_dma="1"</pre><p>Antes de intentar utilizar
        <span class="application">dvd+rw-tools</span> debe consultar las
        <a class="link" href="http://fy.chalmers.se/~appro/linux/DVD+RW/hcn.html" target="_top">notas
        de compatibilidad de hardware de dvd+rw-tools</a> por si
        apareciera cualquier información relacionada con su
        grabadora de DVD.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si desea un interfaz gráfico debería
          echar un vistazo a <span class="application">K3b</span>
          (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/k3b/pkg-descr">sysutils/k3b</a>),  que ofrece
          un interfaz de usuario amigable para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>
          y muchas otras herramientas de grabación.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75680976"></a>18.7.3. Quemado de DVD de datos</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> es un <span class="quote">&#8220;<span class="quote">frontend</span>&#8221;</span> de
        <a class="link" href="#mkisofs" title="18.6.2. mkisofs">mkisofs</a>, invocará
        a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> para crear una estructura de sistema de
        ficheros y realizará la escritura del DVD.
        Esto significa que no necesita crear una imagen de los
        datos antes del proceso de escritura.</p><p>La grabación en DVD+R o DVD-R de los datos del
        directorio <code class="filename">/ruta/a/los/datos</code>,
        se hace del siguiente modo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -dvd-compat -Z /dev/cd0 -J -R /ruta/a/los/datos</code></strong></pre><p>Las opciones <code class="option">-J -R</code> se suministran a
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> para la creación del sistema de
        ficheros (en este caso: un sistema de ficheros ISO 9660
        con extensiones Joliet y Rock Ridge).  Consulte la
        página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> para más
        detalles.</p><p>La opción <code class="option">-Z</code> se usa
        la sesión inicial de grabación en todos los casos,
        sesiones múltiples o no. El dispositivo DVD del
        ejemplo,
        <em class="replaceable"><code>/dev/cd0</code></em>, debe ajustarse de
        acuerdo a la configuración de su sistema.  El parámero
        <code class="option">-dvd-compat</code> cerrar´ el disco (no
        se podrá añadir nada a la grabación).
        Por contra, esto le brindará una mejor compatibilidad del
        medio con unidades DVD-ROM.</p><p>También es posible grabar una imagen pre-masterizada,
        por ejemplo para guardar la imagen
        <em class="replaceable"><code>ficheroimagen.iso</code></em>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -dvd-compat -Z /dev/cd0=ficheroimagen.iso</code></strong></pre><p>La velocidad de escritura se detecta y configura
        automáticamente según el medio y la unidad que
        se esté utilizando.  Si quiere forzar la velocidad de
        escritura utilice el
        parámetro <code class="option">-speed=</code>.  Para más
        información consulte la página de manual
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75698128"></a>18.7.4. Grabación de un DVD de vídeo</h3></div></div></div><a id="idp75698768" class="indexterm"></a><p>Un DVD de vídeo es una estructura de ficheros
        específica basada en las especificiones ISO 9660 y
        micro-UDF (M-UDF).  El DVD de vídeo también
        dispone de una jerarquía de estructura de datos
        específica; por esta razón es necesario un
        programa especializado para crear tal DVD:
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/dvdauthor/pkg-descr">multimedia/dvdauthor</a>.
        </p><p>Si ya tiene una imagen de un sistema de ficheros de DVD
        de vídeo grábelo de la misma manera que cualquier
        otra imagen; consulte la sección previa para ver un
        ejemplo.  Si ha creado el DVD y el resultado está en,
        por ejemplo, el directorio
        <code class="filename">/ruta/al/vídeo</code>, use
        el siguiente comando para grabar el DVD de vídeo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0 -dvd-video /ruta/al/vídeo</code></strong></pre><p>La opción <code class="option">-dvd-video</code>
        de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> hará posible la creación
        de una estructura de sistema de ficheros de DVD de vídeo.
        Además, la opción <code class="option">-dvd-video</code>
        implica la opción
        <code class="option">-dvd-compat</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75710032"></a>18.7.5. Uso de un DVD+RW</h3></div></div></div><a id="idp75710672" class="indexterm"></a><p>A diferencia de un CD-RW, un DVD+RW virgen necesita ser
        formateado antes de usarse por primera vez.  El programa
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> se encargará de ello automáticamente
        cuando sea necesario, lo cual es el método
        <span class="emphasis"><em>recomendado</em></span>. De todas formas puede usted
        usar el comando <code class="command">dvd+rw-format</code> para
        formatear el DVD+RW:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format /dev/cd0</code></strong></pre><p>Necesita ejecutar esta operación solamente una vez,
        recuerde que sólo los DVD+RW vírgenes necesitan
        ser formateados.  Hecho eso ya puede usar el DVD+RW de la
        forma expuesta en las secciones previas.</p><p>Si desea guardar nuevos datos (grabar un sistema de
        ficheros totalmente nuevo, no añadir más datos) en
        un DVD+RW no necesita borrarlo, sólo tiene que escribir
        sobre la grabación anterior (realizando una
        nueva sesión inicial):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0 -J -R /ruta/alos/datosnuevos</code></strong></pre><p>El formato DVD+RW ofrece la posibilidad de añadir
        datos fácilmente a una grabación previa.
        La operación consiste en fusionar una nueva sesión
        a la existente, no es escritura multisesión;
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> <span class="emphasis"><em>hará crecer</em></span> el
        sistema de ficheros ISO 9660 presente en el medio.</p><p>Si, por ejemplo, añadir datos al DVD+RW del ejemplo
        anterior tenemos que usar lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -M /dev/cd0 -J -R /ruta/alos/datosnuevos</code></strong></pre><p>Las mismas opciones de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> que utilizamos
        para quemar la sesión inicial pueden usarse en
        ulteriores escritura.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede usar la opción <code class="option">-dvd-compat</code>
          si desea mejor la compatibilidad de medios con unidades
          DVD-ROM.  Si la usa en un DVD+RW no evitará que
          pueda añadir más datos.</p></div><p>Si por alguna razón desea borrar el contenido del
        medio, haga lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0=/dev/zero</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75727568"></a>18.7.6. Uso de un DVD-RW</h3></div></div></div><a id="idp75728208" class="indexterm"></a><p>Un DVD-RW acepta dos formatos de disco: el incremental
        secuencial y el de sobreescritura restringida.  Por defecto
        los discos DVD-RW están en formato secuencial.
        </p><p>Un DVD-RW virgen puede utilizarse directamente sin
        necesidad de formateo, sin embargo un DVD-RW no virgen en
        formato secuencial necesita ser borrado antes de poder guardar
        una nueva sesión inicial.</p><p>Para borrar un DVD-RW en modo secuencial, ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format -blank=full /dev/cd0</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un borrado total (<code class="option">-blank=full</code>) tardará
          aproximadamente una hora en un medio 1x.  Un borrado rápido
          puede realizarse con la opción <code class="option">-blank</code>
          si el DVD-RW fué grabado en modo Disk-At-Once (DAO).
          Para grabar el DVD-RW en modo DAO use el comando:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -use-the-force-luke=dao -Z /dev/cd0=ficheroimagen.iso</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">La opción <code class="option">-use-the-force-luke=dao</code>
          no es imprescindible, ya que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> trata
          de detectar el medio (borrado rápido) y entrar en
          escritura DAO.</p><p xmlns="http://www.w3.org/1999/xhtml">Debería usarse el modo de reescritura restringida
          en los DVD-RW, pues este formato es más flexible que el
          formato de incremento secuencial, el formato por defecto.</p></div><p>Para escribir datos en un DVD-RW secuencial proceda del
         mismo modo que con los demás formatos de DVD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0 -J -R /ruta/alos/datos</code></strong></pre><p>Si desea añadir datos a una grabación
        previa tendrá que usar la opción
        <code class="option">-M</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>.
        si añade datos a un DVD-RW en modo incremental secuencial
        se creará en el disco una nueva sesión
        y el resultado será un disco multisesión.</p><p>Un DVD-RW en formato de sobreescritura restringido no
        necesita ser borrado antes de una nueva sesión
        inicial, sólo tiene que sobreescribir el disco con la
        opción <code class="option">-Z</code>.  esto es similar al
        caso DVD+RW.  También es posible ampliar un sistema
        de ficheros ISO 9660 ya existente y escrito en el disco del
        mismo modo que para un DVD+RW con la opción
        <code class="option">-M</code>.  El resultado será un DVD
        de una sesión.</p><p>Para poner un DVD-RW en el formato de sobreescritura
        restringido haga lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format /dev/cd0</code></strong></pre><p>Para devolverlo al formato secuencial use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format -blank=full /dev/cd0</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75742800"></a>18.7.7. Multisesión</h3></div></div></div><p>Muy pocas unidades DVD-ROM soportan
        DVDs multisesión.  La mayoría de las veces (y
        si tiene suerte) solamente leerán la primera
        sesión.  Los DVD+R, DVD-R y DVD-RW en formato secuencial
        pueden aceptar multisesiones.  El concepto de multisesión
        no existe en los formatos de sobreescritura restringida
        de DVD+RW y DVD-RW.</p><p>Usando el siguiente comando despues de una sesión
        inicial (no-cerrada) en un DVD+R, DVD-R o DVD-RW en formato
        secuencial añadirá una nueva sesión
        al disco:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -M /dev/cd0 -J -R /ruta/alos/nuevosdatos</code></strong></pre><p>Usando este comando con un DVD+RW o un DVD-RW en modo
        de sobreescritura restringida, agregará datos
        fusionando la nueva sesión a la ya existente.  El
        resultado será un disco de una sola sesión.
        Este es el procedimiento habitual para añadir
        datos tras la escritura inicial.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Una cierta cantidad de espacio en el medio se usa en
          cada sesión al finalizar e iniciar sesiones;
          por tanto, se deben añadir sesiones con grandes
          cantidades de datos para optimizar el espacio del DVD.
          El número de sesiones está limitado a
          154 para un DVD+R, aproximadamente 2.000 para un DVD-R y
          127 para un DVD+R de doble capa.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75754704"></a>18.7.8. Para mayor información</h3></div></div></div><p>Para más información sobre
        un DVD,puede ejecutar el comando
        <code class="command">dvd+rw-mediainfo /dev/cd0</code>
        con el disco en la unidad.</p><p>Tiene más información sobre
        <span class="application">dvd+rw-tools</span> en la
        manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>, en el
        <a class="link" href="http://fy.chalmers.se/~appro/linux/DVD+RW/" target="_top">sitio
        web de dvd+rw-tools</a> y en los archivos de la
        <a class="link" href="http://lists.debian.org/cdwrite/" target="_top">lista de correos
        de cdwrite</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si va a enviar un informe de problemas es imperativo que
          adjunte la salida que <code class="command">dvd+rw-mediainfo</code> produjo
          al grabar (o no grabar) el medio.  Sin esta salida será
          prácticamente imposible ayudarle.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="floppies"></a>18.8. Creación y uso de disquetes (floppies)</h2></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Julio</span> <span class="surname">Merino</span></span>. </span></div><div><span class="authorgroup">Reescrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Martin</span> <span class="surname">Karlsson</span></span>. </span></div></div></div><p>Poder almacenar datos en discos flexibles es útil algunas
      veces, por ejemplo cuando no se tiene cualquier otro
      medio de almacenamiento extraible o cuando se necesita transferir
      una cantidad pequeña de datos a otro sistema.</p><p>Esta sección explicará cómo usar
      disquetes en FreeBSD.  Cubrirá principalmente el
      formateo y utilización de disquetes DOS
      de 3.5 pulgadas, pero los conceptos son similares en
      otros formatos de disquete.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75769296"></a>18.8.1. Formateo de disquetes</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75769936"></a>18.8.1.1. El dispositivo</h4></div></div></div><p>El acceso a los disquetes se efectúa a través
          de entradas en <code class="filename">/dev</code>, igual que en
          otros dispositivos.  Para acceder al disquete
          <span class="quote">&#8220;<span class="quote">crudo</span>&#8221;</span> (raw) en versiones 4.X y anteriores, se usa
          <code class="filename">/dev/fdN</code>,
          donde <em class="replaceable"><code>N</code></em> representa el
          número de unidad, generalmente 0, o
          <code class="filename">/dev/fdNX</code>,
          donde <em class="replaceable"><code>X</code></em> representa una
          letra.</p><p>En versiones 5.0 o posteriores, simplemente use
          <code class="filename">/dev/fdN</code>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75782352"></a>18.8.1.1.1. El tamaño de disco en versiones 4.X y anteriores</h5></div></div></div><p>También existen dispositivos
            <code class="filename">/dev/fdN.tamaño</code>,
            donde <em class="replaceable"><code>tamaño</code></em> es el
            tamaño del disquete en kilobytes.  Estas entradas se
            usan durante el formateo a bajo nivel para determinar el
            tamaño del disco.  En los siguientes ejemplos se
            usará el tamaño de 1440kB.</p><p>Algunas veces las entradas bajo <code class="filename">/dev</code>
            tendrán que ser (re)creadas.  Para ello, ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev &amp;&amp; ./MAKEDEV "fd*"</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75786064"></a>18.8.1.1.2. El tamaño de disco en versiones 5.0 y
            posteriores</h5></div></div></div><p>En 5.0, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> administrará
            automáticamente los nodos de dispositivo en
            <code class="filename">/dev</code>, así que el uso de
            <code class="command">MAKEDEV</code> no es necesario.</p><p>El tamaño de disco deseado se pasa a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdformat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fdformat</span>(1)</span></a>
            mediante la bandera <code class="option">-f</code>.  Los
            tamaños soportados aparecen en
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdcontrol</span>(8)</span></a>, pero tenga muy en cuenta que
            1440kB es el que funciona mejor.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75791696"></a>18.8.1.2. Formatear</h4></div></div></div><p>Un disquete necesita ser formateado a bajo nivel
          antes de poder usarse.  Esto suele hacerlo el fabricante,
          pero el formateo es una buena manera de revisar
          la integridad del medio.  Aunque es posible forzar
          tamaños de disco más grandes (o pequeños),
          1440kB es para lo que la mayoría de los disquetes
          están diseñados.</p><p>Para formatear un disquete a bajo nivel debe usar
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdformat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fdformat</span>(1)</span></a>.  Esta utilidad espera el nombre del
          dispositivo como argumento.</p><p>Tome nota de cualquier mensaje de error, ya que
           éstos pueden ayudarle a determinar si el disco está
           bien o mal.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75794256"></a>18.8.1.2.1. Formateo en versiones 4.X y anteriores</h5></div></div></div><p>Use el dispositivo
            <code class="filename">/dev/fdN.tamaño</code>
            para formatear el disquete.  Inserte un disco de
            3'5 pulgadas en su unidad y ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/fdformat /dev/fd0.1440</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75796688"></a>18.8.1.2.2. Formateo en versiones 5.0 y posteriores</h5></div></div></div><p>Use el dispositivo
            <code class="filename">/dev/fdN</code>
            para formatear el disquete.  Inserte un disco de
            3'5 pulgadas en su unidad y ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/fdformat -f 1440 /dev/fd0</code></strong></pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75811792"></a>18.8.2. La etiqueta de disco</h3></div></div></div><p>Tras un formato del disco a bajo nivel necesitará
        colocar una etiqueta de disco en él.  Esta etiqueta
        de disco será destruida más tarde, pero es
        necesaria para que el sistema determine el tamaño del
        disco y su geometría.</p><p>La nueva etiqueta de disco ocupará todo
        el disco, y contendrá toda la información
        apropiada sobre la geometría del disquete.
        Los valores de geometría para la etiqueta de disco
        están en
	<code class="filename">/etc/disktab</code>.</p><p>Ejecute <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> así:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/disklabel -B -r -w /dev/fd0 fd1440</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Desde FreeBSD 5.1-RELEASE
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> reemplazó al viejo programa
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> se eliminaron muchas
        opciones y parámetros obsoletos; en el ejemplo de arriba
        la opción <code class="option">-r</code> no debe usarse.
        Para mayor información consulte la página de
        manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75819856"></a>18.8.3. El sistema de ficheros</h3></div></div></div><p>Ahora el disquete está listo para ser formateado
        a alto nivel.  Esto colocará un sistema de ficheros
        nuevo en el disco y permitirá a FreeBSD leer y escribir en
        el disco.  Después de crear el sistema de ficheros
        se destruye la etiqueta de disco, así que si desea
        reformatearlo, tendrá que recrear la etiqueta
        de disco.</p><p>El sistema de ficheros del disquete puede ser UFS o
        o FAT.  FAT suele ser una mejor opción para
        disquetes.</p><p>Para formatear un disquete ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/newfs_msdos /dev/fd0</code></strong></pre><p>El disco está para su uso.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75823056"></a>18.8.4. Uso de un disquete</h3></div></div></div><p>Para usar el disquete móntelo con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a>
        (en versiones 4.X y anteriores) o con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a>
        (en versiones 5.X o posteriores).  También se puede
        usar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a>.
        </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backups-tapebackups"></a>18.9. Creación y uso de cintas de datos</h2></div></div></div><a id="idp75831248" class="indexterm"></a><p>Los principales medios de cinta son 4mm, 8mm, QIC, mini-cartridge
      y DLT.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-4mm"></a>18.9.1. 4mm (DDS: Digital Data Storage)</h3></div></div></div><a id="idp75832912" class="indexterm"></a><a id="idp75834064" class="indexterm"></a><p>Las cintas de 4mm están reemplazando a las QIC como los
        medios de respaldo más frecuentes en estaciones de trabajo.
        Esta tendencia se aceleró en gran medida cuando Conner
        adquirió Archive, un fabricante líder de unidades
        QIC, y abandonó la producción de unidades QIC.
        Las unidades de 4mm son pequeñas y silenciosas pero no tienen
        la reputación de fiabilidad de la que disfrutan las
        unidades de 8mm.  Los cartuchos son más baratos  y más
        pequeños (3 x 2 x 0.5 pulgadas, 76 x 51 x 12 mm) que los
        cartuchos de 8mm. En el caso de las cintas de 4mm, igual que las
        de  8mm, tienen un cabezal con una vida comparativamente más
        corta.  Ambos utilizan el escaneado en espiral.</p><p>El ancho de datos de estas unidades comienza por aprox.
        150 kB/s,  con un pico de aprox. ~500 kB/s.
        La capacidad de datos va de los
        1'3 GB a 2'0 GB.  La compresión
        por hardware, disponible con la mayoría de estas unidades,
        dobla aproximadamente la capacidad.  Existen unidades de biblioteca
        de cinta multi-unidad con 6 unidades en un solo armario y
        cambio de cinta automático.  Las capacidades de estas
        bibliotecas alcanzan los 240 GB.</p><p>El estándar DDS-3 soporta capacidades de cinta
        de hasta 12 GB (o 24 GB con compresión).</p><p>Las unidades de 4mm, igual que las unidades de 8mm, utilizan
        escaneo en espiral.  Tanto unas como otras tienen las mismas
        ventajas y desventajas.</p><p>Las cintas deben renovarse por otras después de 2,000
        pasadas ó 100 respaldos completos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-8mm"></a>18.9.2. 8mm (Exabyte)</h3></div></div></div><a id="idp75838160" class="indexterm"></a><p>Las cintas de 8mm son las unidades de cinta SCSI más comunes;
        son la mejor opción de cintas reemplazables y eso hace que
        las unidades de cinta Exabyte 8mm de 2 GB sean casi
        omnipresentes.  Las unidades de 8mm son fiables, prácticas y
        silenciosas.  Los cartuchos son baratos y bastante pequeños
        (4.8 x 3.3 x 0.6 pulgadas; 122 x 84 x 15 mm).  Una desventaja de las
        cintas de 8mm es la vida relativamente corta del cabezal y de la
        propia cinta debido a la alta tasa de movimiento relativo de la cinta
        por los cabezales.</p><p>El ancho de datos varía de aprox. 250 kB/s
        hasta los 500 kB/s.  La capacidad va desde los
        300 MB hasta los 7 GB.  La compresión por
        hardware, disponible con la mayoría de estas unidades,
        dobla aproximadamente la capacidad.  Estas unidades están
        disponibles como unidades solas o como unidades de biblioteca
        de cinta multi-unidad con 6 unidades y 120 cintas en un solo
        armario.  Las cintas las cambia automáticamente la unidad.
        La capacidad de dichas bibliotecas alcanza los 840+ GB.</p><p>El modelo Exabyte <span class="quote">&#8220;<span class="quote">Mammoth</span>&#8221;</span> soporta 12 GB en
        una cinta (24 GB con compresión) y cuesta aproximadamente
        el doble que las unidades de cinta convencionales.</p><p>Los datos se graban en cinta utilizando escaneo en espiral.
        Las cabezas se posicionan en ángulo en relación al
        medio (6 grados aproximadamente).  La cinta se envuelve cerca de 270
        grados en el cilindro que soporta las cabezas.  El cilindro gira
        mientras la cinta se desliza sobre el cilindro.  El resultado es
        una alta densidad de datos y pistas almacenadas muy pegadas,
        dispuestas en ángulo a través de la cinta de un
        extremo al otro.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-qic"></a>18.9.3. QIC</h3></div></div></div><a id="idp75842128" class="indexterm"></a><p>Las cintas y unidades QIC-150 son, quizás, las unidades y
        medios de cinta más comunes.  Las unidades de cinta QIC son
        las unidades de respaldo <span class="quote">&#8220;<span class="quote">serias</span>&#8221;</span> menos caras.
        La desventaja es el coste del medio.  Las cintas QIC son caras
        comparadas con las cintas de 8mm o de 4mm, hasta 5 veces el precio de
        almacenamiento de datos por GB.  No obstante, si sus necesidades
        pueden satisfacerse con media docena de cintas, QIC tal vez sea la
        decisión correcta.  QIC es la unidad de cinta
        <span class="emphasis"><em>más</em></span>  común.  Casi en todas partes
        tienen una unidad QIC de una u otra densidad.  Y ese es el problema,
        QIC ofrece un enorme número de densidades en cintas
        físicamente similares (algunas veces idénticas).
        Las unidades QIC son cualquier cosa menos silenciosas.
        Hacen bastante ruido antes de iniciar la grabación de datos
        y son claramente audibles siempre que leen, escriben o hacen una
        búsqueda.  Las cintas QIC miden 6 x 4 x 0.7 pulgadas;
        152 x 102 x 17 mm.</p><p>El ancho de datos varía de aprox. 150 kB/s a aprox.
        500 kB/s.  La capacidad de datos varía de 40 MB
        a 15 GB. La compresión por hardware existe en muchas de
        las nuevas unidades QIC.  Las unidades QIC se ven con menos
        frecuencia y además están siendo suplantadas por
        unidades DAT.</p><p>Los datos se graban en la cinta en pistas.  Las pistas
        discurren a lo largo del extenso eje de la cinta de un extremo
        al otro.  El número de pistas, y por lo tanto el ancho de
        una pista varía según la capacidad de la cinta.
        La mayoría, si no todas las unidades nuevas, ofrecen
        compatibilidad con modelos anteriores al menos para lectura
        (y también en muchos casos de escritura).  QIC tiene
        buena reputación en cuanto a seguridad de los datos
        (las piezas mecánicas son más simples y
        más robustas que en las unidades de búsqueda
        en espiral).</p><p>Las cintas deben ser sustituirse por otras después de
        5,000 respaldos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-dlt"></a>18.9.4. DLT</h3></div></div></div><a id="idp75846608" class="indexterm"></a><p>DLT tiene la tasa de transferencia de datos más
        rápida de todos los tipos de unidades mostradas aquí.
        La cinta de 1/2" (12'5mm) está alojada en un cartucho
        de un solo cilindro (4 x 4 x 1 pulgadas; 100 x 100 x 25 mm).
        El cartucho tiene una puerta giratoria a lo largo de todo un
        lado del cartucho.  El mecanismo de la unidad abre esta puerta
        para extraer el <span class="quote">&#8220;<span class="quote">líder</span>&#8221;</span>.  El <span class="quote">&#8220;<span class="quote">lider</span>&#8221;</span>
        de la cinta tiene un agujero oval que la unidad utiliza para
        <span class="quote">&#8220;<span class="quote">enganchar</span>&#8221;</span> la cinta.  El cilindro de levantamiento
        está dentro de la unidad de cinta.  Los demás
        cartuchos descritos en este texto  (los cartuchos de 9
        pistas son la única excepción) tienen el cilindro
        proveedor alojados dentro del propio cartucho de cinta.</p><p>El ancho de datos es aproximadamente de 1'5 MB/s, tres veces
        el ancho de unidades de cinta de 4mm, de 8mm o QIC.  Las capacidades
        de datos varían entre 10 GB y 20 GB en una sola
        unidad.  Hay unidades multicinta y con cargadores multi-cinta,
        y bibliotecas multiunidad que pueden albergar de 5 a 900 cintas
        con una a 20 unidades, con lo que pueden alcanzar desde
        50 GB hasta 9 TB de almacenamiento.</p><p>Con compresión, el formato DLT Type IV soporta hasta
        70 GB de capacidad.</p><p>Los datos se almacenan en cinta en pistas paralelas a la
        dirección del movimiento de la cinta (como en las cintas
        QIC).  Se escriben dos pistas al mismo tiempo.  El tiempo de vida
        de lectura/escritura es relativamente largo.  Una vez que la cinta
        no hay movimiento relativo entre las cabezas y la cinta.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75850576"></a>18.9.5. AIT</h3></div></div></div><a id="idp75851344" class="indexterm"></a><p>AIT es un nuevo formato de Sony, y puede almacenar hasta
        50 GB (con compresión) por cinta.  Las cintas contienen
        chips de memoria que retienen un índice de los
        contenidos de la cinta.  Este índice puede ser leido
        rápidamente para determinar la posición
        de los ficheros en la cinta, en lugar de los varios minutos que
        requeriría el proceso con otras cintas.
        <span class="application">SAMS:Alexandria</span> puede gestionar
        más de 40 bibliotecas de cinta AIT, comunicándose
        directamente con el chip de memoria de la cinta para desplegar
        el contenido en pantalla, determinar qué ficheros fueron
        respaldados a qué cinta, ubicar la cinta correcta, cargarla
        y restaurar los datos desde la cinta.</p><p>Las bibliotecas como ésta cuestan alrededor de 20.000
        dólares, lo que las aleja bastante del alcance de los
        aficionados.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75853776"></a>18.9.6. Estreno de una cinta</h3></div></div></div><p>La primera vez que trate de leer o escribir una
        cinta nueva, completamente en blanco, la operación
        fallará.  El mensaje de la consola se parecerá
        al siguiente:</p><pre class="screen">sa0(ncr1:4:0): NOT READY asc:4,1
sa0(ncr1:4:0):  Logical unit is in process of becoming ready</pre><p>La cinta no contiene un bloque identificador (bloque número
        0).  Todas las unidades de cinta QIC desde la adopción del
        estándar QIC-525 escriben un bloque identificador en la
        cinta.  Existen dos soluciones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">mt fsf 1</code> hace que la unidad de cinta
            escriba un bloque identificador a la cinta.</p></li><li class="listitem"><p>Use el botón del panel frontal para expulsar
            la cinta.</p><p>Inserte nuevamente la cinta y haga un <code class="command">dump</code>
            de datos a la cinta.</p><p><code class="command">dump</code> devolverá
            <span class="errorname">DUMP: End of tape detected</span> y la consola
            mostrará
            <span class="errorname">HARDWARE FAILURE info:280 asc:80,96</span>.</p><p>Rebobine la cinta usando: <code class="command">mt rewind</code>.</p><p>A partir de ese momento podrá utilizar la cinta.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backups-floppybackups"></a>18.10. Respaldos en disquetes</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-using"></a>18.10.1. ?Puedo utilizar disquetes para respaldar mis datos?</h3></div></div></div><a id="idp75908176" class="indexterm"></a><a id="idp75908688" class="indexterm"></a><p>Los disquetes no son realmente el medio ideal
        para hacer respaldos debido a que:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El medio no es fiable, especialmente después de
            largos periodos de tiempo.</p></li><li class="listitem"><p>El respaldo y la restauración es muy lento.</p></li><li class="listitem"><p>Tienen una capacidad muy limitada (los dís de
            respaldar un disco duro entero en una docena de disquetes
            pasaron hace mucho).</p></li></ul></div><p>De todas maneras, si no tiene otro método para respaldar
        sus datos los disquetes son una mejor solución que no tener
        ningún respaldo.</p><p>Si tiene que utilizar disquetes asegúrese de usar
        discos de buena calidad.  Los disquetes que han estado
        almacenados en la oficina durante un par de años son una
        mala elección.  Lo mejor sería que utilizara discos
        nuevos de un fabricante respetado.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-creating"></a>18.10.2. ?Cómo respaldo mis datos a discos flexibles?</h3></div></div></div><p>La mejor manera de respaldar a un disquete
        es usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> con la opción <code class="option">-M</code>
        (multi volumen), que permite que el respaldo se guarde en
        varios disquetes.</p><p>Para respaldar todos los ficheros en el directorio actual y
        sus subdirectorios use esto (como <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mcvf /dev/fd0 *</code></strong></pre><p>Cuando el primer disquete esté lleno
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> le solicitará que inserte el siguiente
        volumen (debido a que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> es independiente del medio
        se refiere a volúmenes; en éste contexto se refiere a
        disquetes).</p><pre class="screen">Prepare volume #2 for /dev/fd0 and hit return:</pre><p>Esto se repite (con el número de volumen incrementando)
        hasta que todos los ficheros especificados hayan sido archivados.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-compress"></a>18.10.3. ?Puedo comprimir mis respaldos?</h3></div></div></div><a id="idp75920976" class="indexterm"></a><a id="idp75921872" class="indexterm"></a><a id="idp75922768" class="indexterm"></a><p>Desafortunadamente, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> no permite
        el uso de la opción <code class="option">-z</code> para archivos
        multi-volumen.  Puede, por supuesto, hacer un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a>
        a todos los ficheros, mandarlos con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> a los
        disquetes, <span class="emphasis"><em>y después hacer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gunzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gunzip</span>(1)</span></a>
        a los archivos</em></span></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-restoring"></a>18.10.4. ?Cómo recupero mis respaldos?</h3></div></div></div><p>Para restaurar el archivo completo use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mxvf /dev/fd0</code></strong></pre><p>Hay dos maneras que puede usar para restaurar
        ficheros específicos.  La primera, puede comenzar por el
        primer disco flexible y usar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mxvf /dev/fd0 nombredefichero</code></strong></pre><p>La utilidad <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> le pedirá que inserte el resto de
        disquetes hasta que encuentre el fichero requerido.</p><p>La segunda manera es: si sabe en qué disco se encuentra
        el fichero puede insertar ese disco y usar el comando expuesto
        arriba.  Tenga en cuenta que si el primer fichero en el disquete
        es la continuación del anterior
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> le advertirá que no puede restaurarlo
        <span class="emphasis"><em>incluso si no se lo ha solicitado</em></span></p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-basics"></a>18.11. Bases para respaldos</h2></div></div></div><p>Los tres principales programas para respaldos son
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75945552"></a>18.11.1. Dump y Restore</h3></div></div></div><a id="idp75946192" class="indexterm"></a><a id="idp75947344" class="indexterm"></a><a id="idp75947984" class="indexterm"></a><p>Los programas <span class="trademark">UNIX</span>® que se han usado durante muchos
        años para hacer copias de seguridad son
        <code class="command">dump</code> y <code class="command">restore</code>.
        Operan en las unidades como una colección de bloques de
        disco, bajo la abstracción de ficheros, los enlaces y
        directorios creados por el sistema de ficheros.
        <code class="command">dump</code> respalda un sistema de ficheros completo
        en un dispositivo.  No es capaz de respaldar solamente parte
        de un sistema de ficheros o un árbol de directorios
        que se extienda por más de un sistema de ficheros.
        <code class="command">dump</code> no escribe ficheros y directorios a
        cinta, escribe los bloques de datos <span class="quote">&#8220;<span class="quote">crudos</span>&#8221;</span> (raw)
        que conforman los ficheros y directorios.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si utiliza <code class="command">dump</code> en su directorio
        raíz, no respaldará
        <code class="filename">/home</code>, <code class="filename">/usr</code> ni
        muchos otros directorios, ya que suelen ser puntos de montaje
        de otros sistemas de ficheros o enlaces simbólicos hacia
        dichos sistemas de ficheros.</p></div><p><code class="command">dump</code> tiene peculiaridades que se mantienen
        desde sus primeros días en la Version 6 de AT&amp;T UNIX
        (alrededor de 1975).  Los parámetros por defecto
        son los adecuados para cintas de 9 pistas (6250 bpi), pero no para
        los medios de alta densidad disponibles hoy en día
        (hasta 62,182 ftpi).  Estos valores por defecto deben
        obviarse en la línea de comandos para aprovechar la
        capacidad de las unidades de cinta actuales.</p><a id="idp75954000" class="indexterm"></a><p>También es posible respaldar datos a través de
        la red a una unidad de cinta conectada a otra computadora con
        <code class="command">rdump</code> y <code class="command">rrestore</code>.  Ambos
        programas dependen de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcmd&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">rcmd</span>(3)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a> para
        acceder a la unidad de cinta remota.  Por consiguiente, el usuario
        que realiza el respaldo debe estar listado en el fichero
        <code class="filename">.rhosts</code> de la computadora remota.  Los
        argumentos para <code class="command">rdump</code> y <code class="command">rrestore</code>
        deben ser adecuados para usarse en la computadora remota.
        Cuando realice un <code class="command">rdump</code> desde FreeBSD
        a una unidad de cinta Exabyte conectada a una Sun llamada
        <code class="systemitem">komodo</code>, use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</code></strong></pre><p>Advertencia: existen implicaciones de seguridad al
        permitir autentificación mediante
        <code class="filename">.rhosts</code>.  Le recomendamos que
        evalúe la situación cuidadosamente.</p><p>También es posible usar <code class="command">dump</code> y
        <code class="command">restore</code> de una forma más segura
        a través de <code class="command">ssh</code>.</p><div class="example"><a id="idp75966672"></a><div class="example-title">Ejemplo 18.1. Utilizando <code class="command">dump</code> a través de
          <span class="application">ssh</span></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \
          usuario@maquinaobjetivo.ejemplo.com dd of=/misficherosgrandes/dump-usr-l0.gz</code></strong></pre></div></div><br class="example-break" /><p>Uso del método integrado de <code class="command">dump</code>,
        configurando la variable de ambiente <code class="envar">RSH</code>:</p><div class="example"><a id="idp75970256"></a><div class="example-title">Ejemplo 18.2. Uso de <code class="command">dump</code> a través de
           <span class="application">ssh</span> con <code class="envar">RSH</code>
           configurada</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>RSH=/usr/bin/ssh /sbin/dump -0uan -f usuario@maquinaobjetivo.ejemplo.com:/dev/sa0 /usr</code></strong></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75973200"></a>18.11.2. <code class="command">tar</code></h3></div></div></div><a id="idp75973968" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> también es de la época de
        la Version 6 de AT&amp;T UNIX (alrededor de 1975).
        <code class="command">tar</code> trabaja en cooperación con el
        sistema de ficheros; escribe ficheros y directorios a
        cinta.  <code class="command">tar</code> no soporta el rango completo
        de opciones que ofrece <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>, pero no requiere el
        inusual comando de pipeline que utiliza
        <code class="command">cpio</code>.</p><a id="idp75982416" class="indexterm"></a><p>En FreeBSD 5.3 y posteriores, tiene a su disposición
        GNU <code class="command">tar</code>
        y el comando por defecto <code class="command">bsdtar</code>.
        La versión GNU puede ser invocada mediante
        <code class="command">gtar</code>.  Soporta dispositivos remotos mediante
        la misma sintaxis que <code class="command">rdump</code>.  Para hacer un
        <code class="command">tar</code> a una unidad de cinta conectada a una
        Sun llamada <code class="systemitem">komodo</code>, use:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/bin/gtar cf komodo:/dev/nsa8 . 2&gt;&amp;1</code></strong></pre><p>Puede hacer lo mismo con o con
        <code class="command">bsdtar</code> usando un <span class="quote">&#8220;<span class="quote">pipe</span>&#8221;</span> y
        <code class="command">rsh</code> para mandar los datos a una unidad
        de cinta remota.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar cf - . | rsh nombredemaquina dd of=dispositivo-de-cinta obs=20b</code></strong></pre><p>Si le preocupa la seguridad del proceso de hacer un
        respaldo a través de una red debe usar
        <code class="command">ssh</code> en lugar de <code class="command">rsh</code>.
        </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75998800"></a>18.11.3. <code class="command">cpio</code></h3></div></div></div><a id="idp75999568" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> es el programa de intercambio de archivos de
        cinta para medios magnéticos.  <code class="command">cpio</code>
        tiene opciones (entre muchas otras) para realizar intercambio de
        bytes, escribir un número diferente de formatos de
        archivo y hacer <span class="quote">&#8220;<span class="quote">pipe</span>&#8221;</span> de datos hacia otros programas.
        Esta última opción hace de <code class="command">cpio</code>
        una elección excelente para medios de instalación.
        <code class="command">cpio</code> no sabe cómo recorrer el árbol
        de directorios, así que debe facilitarle una lista de
        directorios a través de
        <code class="filename">stdin</code>.</p><a id="idp76003792" class="indexterm"></a><p><code class="command">cpio</code> no permite respaldos a través
        de la red.  Puede usar un pipe y <code class="command">rsh</code>
        para mandar los datos a una unidad de cinta remota.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>for f in lista_directorios; do</code></strong>
<strong class="userinput"><code>find $f &lt;&lt; backup.list</code></strong>
<strong class="userinput"><code>done</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpio -v -o --format=newc &lt; backup.list | ssh usuario@máquina "cat &gt; dispositivo_de_respaldo"</code></strong></pre><p>Donde <em class="replaceable"><code>lista_directorios</code></em> es la lista de
        directorios que desea respaldar,
        <em class="replaceable"><code>usuario</code></em>@<em class="replaceable"><code>máquina</code></em>
        es la combinación  usuario/nombre de equipo que realizará
        el respaldo y <em class="replaceable"><code>dispositivo_de_respaldo</code></em>
        es donde el respaldo se escribirá efectivamente (por ejemplo
        <code class="filename">/dev/nsa0</code>).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76035024"></a>18.11.4. <code class="command">pax</code></h3></div></div></div><a id="idp76035792" class="indexterm"></a><a id="idp76037072" class="indexterm"></a><a id="idp76037712" class="indexterm"></a><a id="idp76038224" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a> es la respuesta IEEE/<span class="trademark">POSIX</span>® a
        <code class="command">tar</code> y <code class="command">cpio</code>.
        A través de los años las diversas versiones
        de <code class="command">tar</code> y <code class="command">cpio</code> se han
        vuelto ligeramente incompatibles, así que en lugar
        de pelear por hacerlo completamente estándar,
        <span class="trademark">POSIX</span>® creó una nueva utilidad de archivado.
        <code class="command">pax</code> trata de leer y escribir muchos de
        los diversos formatos de <code class="command">cpio</code> y
        <code class="command">tar</code>, además de nuevos formatos
        propios.  Su conjunto de comandos se parece más a
        <code class="command">cpio</code> que a
	<code class="command">tar</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-programs-amanda"></a>18.11.5. <span class="application">Amanda</span></h3></div></div></div><a id="idp76045392" class="indexterm"></a><a id="idp76046672" class="indexterm"></a><p><span class="application">Amanda</span> (Advanced Maryland
        Network Disk Archiver) es un sistema de respaldos cliente/servidor,
        en lugar de un solo programa.  Un servidor
        <span class="application">Amanda</span>
        respaldará a una sola unidad de cinta cualquier cantidad de
        computadoras que tengan clientes <span class="application">Amanda</span>
        y una conexión de red al servidor
        <span class="application">Amanda</span>.
        Un problema común en sitios con gran cantidad de discos
        grandes es que la cantidad de tiempo requerida para respaldar los
        datos directamente a cinta excede la cantidad de tiempo disponible
        para la tarea.  <span class="application">Amanda</span> resuelve este
        problema.  <span class="application">Amanda</span> puede usar un
        <span class="quote">&#8220;<span class="quote">disco intermedio</span>&#8221;</span> para respaldar varios sistemas de
        ficheros al mismo tiempo.
        <span class="application">Amanda</span> crea
        <span class="quote">&#8220;<span class="quote">conjuntos de archivo</span>&#8221;</span>, esto es, un grupo de cintas
        usadas durante un periodo de tiempo para crear respaldos completos
        de todos los sistemas de ficheros listados en el fichero de
        configuración de <span class="application">Amanda</span>.
        El <span class="quote">&#8220;<span class="quote">conjunto de archivo</span>&#8221;</span> también contiene
        respaldos incrementales nocturnos (o diferenciales) de todos los
        sistemas de ficheros.  Para restaurar un sistema de ficheros
        dañado hace falta el respaldo completo más reciente
        y los respaldos incrementales.</p><p>El fichero de configuración ofrece un control
       exhaustivo de los respaldos y del tráfico de red que
       <span class="application">Amanda</span> genera.
       <span class="application">Amanda</span> usará cualquiera de
       los programas de respaldo mencionados arriba para escribir los
       datos a cinta.  Puede instalar <span class="application">Amanda</span>
       como paquete y como port.  No forma parte del sistema base.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76078416"></a>18.11.6. No hacer nada</h3></div></div></div><p><span class="quote">&#8220;<span class="quote">No hacer nada</span>&#8221;</span> no es un programa, pero
        es la estrategia de respaldo más extendida.  No tiene
        coste.  No hay un calendario de respaldos a seguir.  Simplemente
        hay que decir <span class="emphasis"><em>que no</em></span>.  Si algo le sucediera a
        sus datos <span class="emphasis"><em>sonría y acostúmbrese a su nueva
        situación</em></span>.</p><p>Si su tiempo y sus datos valen poco o nada, entonces
        <span class="quote">&#8220;<span class="quote">no hacer nada</span>&#8221;</span> es el programa de respaldo más
        adecuado para usted.  Pero cuidado, <span class="trademark">UNIX</span>® es una herramienta
        muy poderosa y puede suceder que dentro de seis meses
        tenga un montón de ficheros que sean valiosos para
        usted.</p><p><span class="quote">&#8220;<span class="quote">No hacer nada</span>&#8221;</span> es el método correcto de
        respaldo para <code class="filename">/usr/obj</code> y otros árboles
        de directorios que pueden ser fácilmente recreados por su
        computadora.  Un ejemplo son los archivos que forman la
        versión HTML o <span class="trademark">PostScript</span>® de este manual.
        Estos documentos han sido generados desde ficheros SGML.
        Crear respaldos de los archivos HTML o <span class="trademark">PostScript</span>® no es
        necesario dado que los ficheros SGML se respaldan regularmente.
        </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76084048"></a>18.11.7. ?Cuál es el mejor programa de respaldos?</h3></div></div></div><a id="idp76084688" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.
        <span class="emphasis"><em>Y no hay más que hablar.</em></span>
        Elizabeth D. Zwicky realizó pruebas de estrés a
        a todos los programas de copia de seguridad aquí
        expuestos.  La elección clarísima para preservar
        todos sus datos y todas las peculiaridades de sus sistemas de
        ficheros <span class="trademark">UNIX</span>® es <code class="command">dump</code>.
        Elizabeth creó sistemas de ficheros conteniendo una gran
        variedad de condiciones inusuales (y algunos no tan inusuales)
        y probó cada programa haciendo un respaldo y restaurando
        esos sistemas de ficheros.  Esas peculiaridades incluían:
        ficheros con y un bloque nulo, ficheros con caracteres
        extraños en sus nombres, ficheros que no se podían
        leer ni escribir, dispositivos, ficheros que cambiaban de
        tamaño durante el respaldo, ficheros que eran creados/borrados
        durante el respaldo y cosas así.  Elizabeth presentó los
        resultados en LISA V en octubre de 1991.
        Consulte <a class="link" href="http://berdmann.dyndns.org/zwicky/testdump.doc.html" target="_top">torture-testing
        Backup and Archive Programs</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76088528"></a>18.11.8. Procedimiento de restauración de emergencia</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76089168"></a>18.11.8.1. Antes del desastre</h4></div></div></div><p>Solamente existen cuatro pasos que debe realizar
          en preparación de cualquier desastre que pudiera
          ocurrir.</p><a id="idp76090192" class="indexterm"></a><p>Primero, imprima la etiqueta de disco de cada uno
          de sus discos (<code class="command">disklabel da0 | lpr</code>),
          su tabla de sistemas de ficheros
          (<code class="filename">/etc/fstab</code>) y todos los mensajes de
          arranque, dos copias de cada uno.</p><a id="idp76092240" class="indexterm"></a><p>Segundo, asegúrese que los disquetes de rescate
          (<code class="filename">boot.flp</code> y <code class="filename">fixit.flp</code>)
          tienen todos sus dispositivos.  La manera más fácil
          de revisarlo es reiniciar su máquina con el disquete
          en la unidad y revisar los mensajes de arranque.  Si todos sus
          dispositivos aparecen en la lista y funcionan, pase al tercer
          paso.</p><p>Si ha habido algún problema tiene que crear dos
          disquetes de arranque personalizados, que deben tener un
          kernel que pueda montar todos sus discos y acceder a su
          unidad de cinta.  Estos discos deben contener:
          <code class="command">fdisk</code>, <code class="command">disklabel</code>,
          <code class="command">newfs</code>, <code class="command">mount</code> y
          cualquier programa de respaldo que utilice.  Estos
          programas deben estar enlazados estáticamente.  Si
          usa <code class="command">dump</code>, el disquete debe
          contener <code class="command">restore</code>.</p><p>Tercero, use cintas de respaldo regularmente.  Cualquier
          cambio que haga después de su último respaldo puede
          perderse irremediablemente.  Proteja contra escritura las cintas
          de respaldo.</p><p>Cuarto, pruebe los disquetes (ya sea <code class="filename">boot.flp</code>
          y <code class="filename">fixit.flp</code> o los dos discos personalizados
          que creó en el segundo paso) y las cintas de respaldo.
          Documente el procedimiento.  Almacene estas notas con los
          discos de arranque, las impresiones y las cintas de respaldo.
          Estará tan perturbado cuando restaure su sistema  que las
          notas pueden pueden evitar que destruya sus cintas de respaldo.
          (?Como? en lugar de <code class="command">tar xvf /dev/sa0</code>,
          puede teclear accidentalmente <code class="command">tar cvf /dev/sa0</code>
          y sobreescribir su cinta).</p><p>Como medida adicional de seguridad haga discos de inicio
          y dos cintas de respaldo cada vez.  Almacene una de cada
          en una ubicación remota.  Una ubicación remota
          <span class="emphasis"><em>NO</em></span> es el sótano del mismo edificio.
          Muchas firmas alojadas en el World Trade Center aprendieron esta
          leccón de la manera más difícil.  Esa
          ubicación remota debe estar separada físicamente
          de sus computadoras y unidades de disco por una distancia
          significativa.</p><div class="example"><a id="idp76099920"></a><div class="example-title">Ejemplo 18.3. Un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> para la creación de discos
            flexibles de arranque</div><div class="example-contents"><pre class="programlisting">#!/bin/sh
#
# create a restore floppy
#
# format the floppy
#
PATH=/bin:/sbin:/usr/sbin:/usr/bin

fdformat -q fd0
if [ $? -ne 0 ]
then
	 echo "Bad floppy, please use a new one"
	 exit 1
fi

# place boot blocks on the floppy
#
disklabel -w -B /dev/fd0c fd1440

#
# newfs the one and only partition
#
newfs -t 2 -u 18 -l 1 -c 40 -i 5120 -m 5 -o space /dev/fd0a

#
# mount the new floppy
#
mount /dev/fd0a /mnt

#
# create required directories
#
mkdir /mnt/dev
mkdir /mnt/bin
mkdir /mnt/sbin
mkdir /mnt/etc
mkdir /mnt/root
mkdir /mnt/mnt			# for the root partition
mkdir /mnt/tmp
mkdir /mnt/var

#
# populate the directories
#
if [ ! -x /sys/compile/MINI/kernel ]
then
	 cat &amp;lt;&amp;lt; EOM
The MINI kernel does not exist, please create one.
Here is an example config file:
#
# MINI - A kernel to get FreeBSD onto a disk.
#
machine         "i386"
cpu             "I486_CPU"
ident           MINI
maxusers        5

options         INET                    # needed for _tcp _icmpstat _ipstat
                                        #            _udpstat _tcpstat _udb
options         FFS                     #Berkeley Fast File System
options         FAT_CURSOR              #block cursor in syscons or pccons
options         SCSI_DELAY=15           #Be pessimistic about Joe SCSI device
options         NCONS=2                 #1 virtual consoles
options         USERCONFIG              #Allow user configuration with -c XXX

config          kernel	root on da0 swap on da0 and da1 dumps on da0

device          isa0
device          pci0

device          fdc0	at isa? port "IO_FD1" bio irq 6 drq 2 vector fdintr
device          fd0	at fdc0 drive 0

device          ncr0

device          scbus0

device          sc0	at isa? port "IO_KBD" tty irq 1 vector scintr
device          npx0	at isa? port "IO_NPX" irq 13 vector npxintr

device          da0
device          da1
device          da2

device          sa0

pseudo-device   loop            # required by INET
pseudo-device   gzip            # Exec gzipped a.out's
EOM
	 exit 1
fi

cp -f /sys/compile/MINI/kernel /mnt

gzip -c -best /sbin/init &gt; /mnt/sbin/init
gzip -c -best /sbin/fsck &gt; /mnt/sbin/fsck
gzip -c -best /sbin/mount &gt; /mnt/sbin/mount
gzip -c -best /sbin/halt &gt; /mnt/sbin/halt
gzip -c -best /sbin/restore &gt; /mnt/sbin/restore

gzip -c -best /bin/sh &gt; /mnt/bin/sh
gzip -c -best /bin/sync &gt; /mnt/bin/sync

cp /root/.profile /mnt/root

cp -f /dev/MAKEDEV /mnt/dev
chmod 755 /mnt/dev/MAKEDEV

chmod 500 /mnt/sbin/init
chmod 555 /mnt/sbin/fsck /mnt/sbin/mount /mnt/sbin/halt
chmod 555 /mnt/bin/sh /mnt/bin/sync
chmod 6555 /mnt/sbin/restore

#
# create the devices nodes
#
cd /mnt/dev
./MAKEDEV std
./MAKEDEV da0
./MAKEDEV da1
./MAKEDEV da2
./MAKEDEV sa0
./MAKEDEV pty0
cd /

#
# create minimum file system table
#
cat &gt; /mnt/etc/fstab &amp;lt;&amp;lt;EOM
/dev/fd0a    /    ufs    rw  1  1
EOM

#
# create minimum passwd file
#
cat &gt; /mnt/etc/passwd &amp;lt;&amp;lt;EOM
root:*:0:0:Charlie &amp;amp;:/root:/bin/sh
EOM

cat &gt; /mnt/etc/master.passwd &amp;lt;&amp;lt;EOM
root::0:0::0:0:Charlie &amp;amp;:/root:/bin/sh
EOM

chmod 600 /mnt/etc/master.passwd
chmod 644 /mnt/etc/passwd
/usr/sbin/pwd_mkdb -d/mnt/etc /mnt/etc/master.passwd

#
# umount the floppy and inform the user
#
/sbin/umount /mnt
echo "The floppy has been unmounted and is now ready."</pre></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76101712"></a>18.11.8.2. Después del desastre</h4></div></div></div><p>La pregunta clave es: ?sobrevivió su hardware?
          Ha estado haciendo respaldos regularmente, así que no hay
          necesidad de preocuparse por el software.</p><p>Si el hardware ha sufrido daños los componentes deben
          reemplazarse antes de intentar de usar su sistema.</p><p>Si su hardware está bien revise sus discos de arranque.
          Si usa disquetes de arranque personalizados arranque en modo
          monousuario (teclée <code class="literal">-s</code> en el
          en el <span class="quote">&#8220;<span class="quote">prompt</span>&#8221;</span> de arranque <code class="prompt">boot:</code>).
          Sáltese el siguiente párrafo.</p><p>Si utiliza usando los discos <code class="filename">boot.flp</code>
          y <code class="filename">fixit.flp</code>, siga leyendo.  Inserte el disco
          <code class="filename">boot.flp</code> en la primera unidad de disquete
          y arranque la máquina.  El menú de instalación
          original se desplegará en pantalla.  Seleccione la
          opción <code class="literal">Fixit--Repair mode with CDROM or
          floppy.</code>.  Inserte el disco <code class="filename">fixit.flp</code>
          cuando se le pida.  Tanto <code class="command">restore</code> como los
          demás programas que necesitará están en
          <code class="filename">/mnt2/rescue</code>
          (<code class="filename">/mnt2/stand</code> para versiones
          de FreeBSD anteriores a 5.2).</p><p>Recupere cada sistema de ficheros por separado.</p><a id="idp76112720" class="indexterm"></a><a id="idp76113616" class="indexterm"></a><a id="idp76114128" class="indexterm"></a><a id="idp76115024" class="indexterm"></a><p>Trate de montar (por ejemplo
          <code class="command">mount /dev/da0a /mnt</code>) la partición
          raíz de su primer disco.  Si la etiqueta del disco
          ha sufrido daños use <code class="command">disklabel</code>
          para reparticionar y etiquetar el disco de forma que coincida con
          la etiqueta que imprimió y guardó previamente.   Use
          <code class="command">newfs</code> para crear de nuevo sus sistemas de
          ficheros.  Monte de nuevo la partición raíz del
          disquete en modo lectura/escritura
          (<code class="command">mount -u -o rw /mnt</code>).  Ejecute su programa de
          respaldo y utilice las cintas de respaldo para restaurar sus datos
          en este sistema de ficheros
          (<code class="command">restore vrf /dev/sa0</code>).
          Desmonte el sistema de ficheros (<code class="command">umount /mnt</code>).
          Repita el proceso con cada sistema de ficheros que sufrió
          daños.</p><p>Una vez que su sistema esté en marcha respalde sus
          datos en cintas nuevas.  Cualquiera que haya sido la causa de
          la caída o pérdida de datos puede suceder de nuevo.
          Una hora más que gaste ahora puede ahorrarle mucho
          sufrimiento más adelante.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-virtual"></a>18.12. Sistemas de ficheros en red, memoria y respaldados en fichero</h2></div><div><span class="authorgroup">Reorganizado y mejorado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp76126160" class="indexterm"></a><a id="idp76126672" class="indexterm"></a><p>Además de los discos que conecta físicamente en
      su máquina (discos flexibles, CDs, discos duros, etc.)
      FreeBSD permite usar otro tipo de discos:
      <em class="firstterm">los discos virtuales</em>.</p><a id="idp76128592" class="indexterm"></a><a id="idp76129232" class="indexterm"></a><a id="idp76129744" class="indexterm"></a><p>Esto incluye sistemas de ficheros en red como
      <a class="link" href="#network-nfs" title="29.6. NFS">NFS</a> y Coda, sistemas de
      ficheros basados en memoria y sistemas de ficheros basados en
      fichero.</p><p>Según la versión de FreeBSD que utilice tendrá
      que utilizar diferentes herramientas para la creación y
      uso de sistemas de ficheros en memoria y sistemas de ficheros
      basados en fichero.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Los usuarios de FreeBSD 4.X tendrán que usar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=MAKEDEV&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">MAKEDEV</span>(8)</span></a> para crear los dispositivos requeridos.
        FreeBSD 5.0 y posteriores usan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> para
        gestionar los nodos de dispositivo correspondientes de forma
        transparente para el usuario.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-vnconfig"></a>18.12.1. Sistema de ficheros basado en fichero en FreeBSD 4.X</h3></div></div></div><a id="idp76135504" class="indexterm"></a><p>La utilidad <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> configura y habilita vnodes
        de dispositivos de pseudodisco.  Un <em class="firstterm">vnode</em>
        es una representación de un fichero y es el enfoque de
        la actividad de fichero.  Esto significa que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>
        utiliza ficheros para crear y operar un sistema de ficheros.
        Un uso posible es el montaje de imágenes de disquetes o CD
        almacenadas como ficheros.</p><p>Para poder usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> necesitará tener
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vn&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vn</span>(4)</span></a> en el fichero de configuración de su
        kernel:</p><pre class="programlisting">pseudo-device vn</pre><p>Para montar una imagen de un sistema de ficheros:</p><div class="example"><a id="idp76145872"></a><div class="example-title">Ejemplo 18.4. Uso de vnconfig para montar una imagen de un sistema de
          ficheros bajo FreeBSD 4.X</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig vn0 imagendedisco</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/vn0c /mnt</code></strong></pre></div></div><br class="example-break" /><p>Para crear una nueva imagen de un sistema de ficheros con
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>:</p><div class="example"><a id="idp76149584"></a><div class="example-title">Ejemplo 18.5. Creación de una imagen nueva de un sistema de ficheros
          respaldado en un archivo con <code class="command">vnconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=nuevaimagen bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>vnconfig -s labels -c vn0 nuevaimagen</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -r -w vn0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs vn0c</code></strong>
Warning: 2048 sector(s) in last cylinder unallocated
/dev/vn0c:     10240 sectors in 3 cylinders of 1 tracks, 4096 sectors
        5.0MB in 1 cyl groups (16 c/g, 32.00MB/g, 1280 i/g)
super-block backups (for fsck -b #) at:
 32
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/vn0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/vn0c        4927        1     4532     0%    /mnt</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mdconfig"></a>18.12.2. Sistemas de ficheros basados en fichero en
        FreeBSD 5.X</h3></div></div></div><a id="idp76156624" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> se usa para configurar y habilitar discos
        habilitar discos de memoria, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>, en FreeBSD 5.X.
        Para usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>, tendrá que cargar el módulo
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> o añadir soporte para el mismo el el fichero de
        configuración del kernel:</p><pre class="programlisting">device md</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> soporta tres tipos de discos virtuales
        en memoria: discos de memoria asignados mediante
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>, discos de memoria usando un fichero o
        espacio de swap como respaldo.  Un uso posible es
        montar imágenes de disquetes o CD archivadas.
        </p><p>Para montar una imagen de un sistema de ficheros:</p><div class="example"><a id="idp76180176"></a><div class="example-title">Ejemplo 18.6. Uso de <code class="command">mdconfig</code> para montar una imagen
          de un sistema de ficheros en FreeBSD 5.X</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f imagendedisco -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0 /mnt</code></strong></pre></div></div><br class="example-break" /><p>Para crear una imagen nueva de un sistema de ficheros
        con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>:</p><div class="example"><a id="idp76188368"></a><div class="example-title">Ejemplo 18.7. Creación de un disco respaldado en fichero
          con <code class="command">mdconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=nuevaimagen bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f nuevaimagen -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>disklabel -r -w md0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs md0c</code></strong>
/dev/md0c: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 256 inodes.
super-block backups (for fsck -b #) at:
 32, 2624, 5216, 7808
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4846        2     4458     0%    /mnt</pre></div></div><br class="example-break" /><p>Si no especifica el número de unidad con la
        opción <code class="option">-u</code> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
        usará la designación automática de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> para seleccionar un dispositivo sin usar.
        El nombre de la unidad designada se enviará a la salida
        esándar como <code class="filename">md4</code>.  Para más
        información sobre <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> consulte su página
        de manual.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">A partir de FreeBSD 5.1-RELEASE
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> reemplazó a
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> se eliminaron muchas
        opciones y parámetros obsoletos.  En el ejemplo de
        arriba ignore la opción <code class="option">-r</code>.
        Para más información consulte la página
        de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</p></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> es muy útil, aunque requiere
        muchas líneas de comando para crear un sistema de ficheros
        basado en un fichero.  FreeBSD 5.0 incorpora <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>,
        que configura un disco <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> utilizando
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>, pone un sistema de ficheros UFS en él
        mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> y lo monta usando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.
        Por ejemplo, si desea crear y montar la misma imagen de
        sistema de ficheros de arriba, simplemente teclée
        lo siguiente:</p><div class="example"><a id="idp76211408"></a><div class="example-title">Ejemplo 18.8. Configurar y montar un disco basado en un fichero con
          <code class="command">mdmfs</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=nuevaimagen bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdmfs -F newimage -s 5m md0 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><p>Si utiliza la opción <code class="option">md</code> sin
        número de unidad, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> usará la
        opción de auto unidad de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> para
        selecionar automáticamente un dispositivo sin usar.  Para
        más información sobre <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>
        diríjase a la página de manual.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd4"></a>18.12.3. Sistemas de ficheros basados en memoria en FreeBSD 4.X</h3></div></div></div><a id="idp76223184" class="indexterm"></a><p>El controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> es un modo sencillo y eficiente de
        crear sistemas de ficheros basados en memoria en FreeBSD 4.X.
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> se usa para ubicar la memoria.</p><p>Sencillamete toma un sistema de ficheros que usted ha
        preparado con, por ejemplo, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a>, y:</p><div class="example"><a id="idp76231632"></a><div class="example-title">Ejemplo 18.9. Disco de memoria md en FreeBSD 4.X</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=nuevaimagen of=/dev/md0</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0c /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem  1K-blocks     Used    Avail Capacity  Mounted on
/dev/md0c        4927        1     4532     0%    /mnt</pre></div></div><br class="example-break" /><p>Para más información por favor consulte
        la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd5"></a>18.12.4. sistemas de ficheros basados en memoria en
        FreeBSD 5.X</h3></div></div></div><a id="idp76237264" class="indexterm"></a><p>Se usan las mismas herramientas para tratar con sistemas
        de ficheros basados en memoria o en ficheros:
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>.  El almacenamiento de
        sistemas de ficheros basados en memoria requiere el uso de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>.</p><div class="example"><a id="idp76245456"></a><div class="example-title">Ejemplo 18.10. Creación de un nuevo disco basado en memoria con
	  <code class="command">mdconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t malloc -s 5m -u 1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -U md1</code></strong>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 256 inodes.
	with soft updates
super-block backups (for fsck -b #) at:
 32, 2624, 5216, 7808
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md1 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><div class="example"><a id="idp76249808"></a><div class="example-title">Ejemplo 18.11. Creación de un nuevo disco basado en memoria con
	  <code class="command">mdmfs</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdmfs -M -s 5m md2 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /><p>En lugar de usar un sistema de ficheros respaldado en
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>, es posible utilizar swap; lo único que
        debe hacer es sustituir <code class="option">malloc</code> por
        <code class="option">swap</code> en la línea de comando de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> por defecto
        (sin <code class="option">-M</code>) crea un disco basado en swap).  Para
        más información, consulte las
        páginas de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> y de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76266448"></a>18.12.5. Desconexión del sistema de un disco de memoria</h3></div></div></div><a id="idp76267088" class="indexterm"></a><p>Cuando un sistema de ficheros basado en memoria o
        basado en fichero no se usa puede liberar recursos del sistema.
        Lo primero es desmontar el sistema de ficheros: use
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> para desconectar el disco del sistema y liberar
        dichos recursos.</p><p>Por ejemplo, para desconectar y liberar todos los
        recursos usados por <code class="filename">/dev/md4</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p>Es posible listar información sobre dispositivos
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> configurados en el sistema mediante
        <code class="command">mdconfig -l</code>.</p><p>En FreeBSD 4.X se usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vnconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vnconfig</span>(8)</span></a> para desconectar
        el dispositivo.  Por ejemplo, para desconectar y
        liberar todos los recursos usados por
        <code class="filename">/dev/vn4</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vnconfig -u vn4</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="snapshots"></a>18.13. Instantáneas (<span class="quote">&#8220;<span class="quote">snapshots</span>&#8221;</span>) de sistemas
      de ficheros</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp76286800" class="indexterm"></a><p>FreeBSD 5.0 ofrece una característica relacionada
        con
        <a class="link" href="#soft-updates" title="11.3. &#8220;Soft Updates&#8221;">Soft Updates</a>: las
        instantáneas del sistema de ficheros.</p><p>Las instantáneas permiten a un usuario crear
        imágenes de uno o más sistemas de ficheros dados, y
        tratarlas como un fichero.  Los ficheros de instantánea
        deben crearse en el sistema de ficheros en el que se realiza la
        acción, y un usuario puede crear hasta 20 (veinte)
        instantáneas por sistema de ficheros.  Las
        instantáneas activas se graban en el superbloque, lo que
        hace que sigan ahí independientemente de montajes,
        remontajes y reinicios del sistema.  Cuando ya no necesite
        una instantánea puede borrarla con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rm</span>(1)</span></a>.
        Las instantáneas pueden borrarse en cualquier orden pero
        puede que no pueda recuperar todo el espacio debido a que otra
        instantánea puede reclamar algunos bloques liberados.</p><p>La bandera inalterable de fichero <code class="option">snapshot</code>
        se activa con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mksnap_ffs</span>(8)</span></a> después de la creación
        inicial de un fichero de instantánea.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=unlink&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">unlink</span>(1)</span></a>
        hace una excepción con los ficheros de instantánea,
        ya que permite que se les borre.</p><p>Las instantáneas se crean con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.
        Veamos un ejemplo.  Vamos a colocar una instantánea de
        <code class="filename">/var</code> en
        <code class="filename">/var/snapshot/snap</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o snapshot /var/snapshot/snap /var</code></strong></pre><p>También puede usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mksnap_ffs</span>(8)</span></a> para
        crear una instantánea:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mksnap_ffs /var /var/snapshot/snap</code></strong></pre><p>Si busca ficheros de instantánea en un sistema de
        de ficheros (por ejemplo <code class="filename">/var</code>) puede usar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>find /var -flags snapshot</code></strong></pre><p>Una instantánea tiene distintos usos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Algunos administradores usan un fichero de
            instantánea como respaldo, puesto que la instantánea
            puede guardarse en CD o cinta.</p></li><li class="listitem"><p>Integridad de ficheros; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> puede ejecutarse
            en una instantánea.  Asumiendo que el sistema de
            ficheros estuviera limpio cuando se montó se debe
            obtener un resultado limpio (e intacto).  En esencia el
            proceso <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> hace esto mismo en segundo plano.</p></li><li class="listitem"><p>Ejecución de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> en la instantánea.
            Se obtendrá un dump consistente con el sistema de
            ficheros y los sellos de hora de la instantánea.
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> también puede leer una instantánea,
            crear una imagen dump y eliminar la instantánea en
            un comando usando la opción
            <code class="option">-L</code>.</p></li><li class="listitem"><p>Ejecutar un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> contra la instantánea
            como una imagen congelada del sistema de ficheros.
            Para montar la instantánea
            <code class="filename">/var/snapshot/snap</code> ejecute:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /var/snapshot/snap -u 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -r /dev/md4 /mnt</code></strong></pre></li></ul></div><p>Podrá recorrer la jerarquía de su sistema de
        ficheros <code class="filename">/var</code> congelado montado en
        <code class="filename">/mnt</code>.  Todo estará en el mismo estado
        en el que estaba cuando creó la instantánea.
        La única excepción es que cualquier
        instantánea anterior aparecerá como un fichero
        de longitud cero.  Cuando haya acabado de usar una
        instantánea puede desmontarla con:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p>Para más información sobre
        <code class="option">softupdates</code> e instantáneas de sistemas
        ficheros, incluyendo textos técnicos, visite el sitio
        web de Marshall Kirk McKusick:
	<code class="uri"><a class="uri" href="http://www.mckusick.com/" target="_top">http://www.mckusick.com/</a></code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="quotas"></a>18.14. Cuotas en sistemas de ficheros</h2></div></div></div><a id="idp76323280" class="indexterm"></a><a id="idp76324432" class="indexterm"></a><p>Las cuotas son una opción del sistema
      operativo que le permite limitar la cantidad de espacio en
      disco y/o el número de fichero que un usuario o
      miembros de un grupo pueden crear en el sistema, pudiendo
      además hacerlo de forma independiente en cada sistema de
      ficheros.
      Suele usarse principalmente en sistemas de tiempo compartido,
      donde se busca limitar la cantidad de recursos que cualquier
      usuario o grupo pueden utilizar.
      Esto evitará que un usuario o un grupo de usuarios
      consuma todos el espacio disponible en disco.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76329552"></a>18.14.1. Configuración del sistema para habilitar
       cuotas de disco</h3></div></div></div><p>Antes de intentar configurar el uso de cuotas de disco
        hay que asegurarse de que las cuotas están activadas en el
        kernel.  La siguiente línea debe estar en el fichero de
        de configuración del kernel:</p><pre class="programlisting">options QUOTA</pre><p>El kernel <code class="filename">GENERIC</code> no lo tiene activado
        por defecto, así que tendrá que configurar,
        compilar e instalar un kernel personalizado para
        poder usar cuotas de disco.  Por favor, consulte el
        <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a> para más información
        sobre la configuración del kernel.</p><p>A continuación tendrá que habilitar
        las cuotas de disco en <code class="filename">/etc/rc.conf</code>.
        Añadale la siguiente línea:</p><pre class="programlisting">enable_quotas="YES"</pre><a id="idp76333264" class="indexterm"></a><p>Hay una variable que le permitirá efectuar un
        control más exhaustivo sobre el arranque de cuotas.
        Normalmente se revisa la integridad de cuotas de cada sistema
        de ficheros en el arranque; el responsable es
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> se asegura de que los
        datos que hay en su base de datos de cuotas reflejen
        realmente los datos del sistema de ficheros.  Es un proceso
        que lleva mucho tiempo y que afectará significativamente
        al tiempo que tardará su sistema en arrancar.  Si desea
        saltarse ese paso puede usar una variable al efecto en
        <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">check_quotas="NO"</pre><p>Para concluir tendrá que editar
        <code class="filename">/etc/fstab</code> para habilitar las cuotas de disco
        para cada sistema de ficheros.  Es aquí donde podrá
        habilitar cuotas por usuario, por grupo, o ambos en todos sus
        sistemas de ficheros.</p><p>Para habilitar cuotas por usuario en un sistema de
        ficheros añada la opción <code class="option">userquota</code> al
        campo de opciones en la entrada de <code class="filename">/etc/fstab</code>
        que corresponda al sistema de ficheros en el que quiere habilitar
        las cuotas.  Veamos un ejemplo:</p><pre class="programlisting">/dev/da1s2g   /home    ufs rw,userquota 1 2</pre><p>En el caso de las cuotas de grupo es muy similar.
        Use la opción <code class="option">groupquota</code> en lugar
        de <code class="option">userquota</code>.  Para habilitar
        cuotas por usuario y por grupo modifique la entrada
        de este modo:</p><pre class="programlisting">/dev/da1s2g    /home    ufs rw,userquota,groupquota 1 2</pre><p>Por defecto los ficheros de cuota se guardan en
        el directorio raíz del sistema de ficheros con los
        nombres <code class="filename">quota.user</code> y
        <code class="filename">quota.group</code>
        para cuotas de usuario y grupo respectivamente.
        Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> para más información.
        Aunque la página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> diga que puede
        especificar otra ubicación para los ficheros de
        cuota, no se recomienda hacerlo debido a que las diversas herramientas
        de gestió cuotas no parecen sobrellevar esto
        adecuadamente.</p><p>Hecho todo esto puede reiniciar su sistema con el nuevo
        kernel.  <code class="filename">/etc/rc</code> ejecutará
        automáticamente los comandos apropiados para crear los
        ficheros de cuota iniciales que requieran todas las entradas en
        en <code class="filename">/etc/fstab</code>, así que no hay
        necesidad de crear ficheros de cuota de longitud cero.</p><p>En el curso normal de operaciones no se le debería
        pedir que ejecute <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaon&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaon</span>(8)</span></a> o
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaoff&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaoff</span>(8)</span></a> manualmente.  Sin embargo, tal vez quiera leer
        sus páginas de manual para familiarizarse con su
        funcionamiento.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76347984"></a>18.14.2. Configuración de límites de cuota</h3></div></div></div><a id="idp76348624" class="indexterm"></a><p>Una vez que tenga configurado su sistema para usar cuotas
        verifique que en realidad estén habilitadas.  Una manera
        sencilla de hacer esto es ejecutar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>quota -v</code></strong></pre><p>Debe ver un resumen de una sola línea de uso del
        disco y los límites de cuota actuales para cada sistema
        de ficheros donde estén habilitadas las cuotas.</p><p>Ahora puede iniciar la asignación
        de límites de cuota con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.</p><p>Tiene varias opciones para imponer límites en el
        espacio de disco que un usuario o grupo puede ocupar, y
        cuántos ficheros pueden crear.  Puede limitar el uso de
        disco basándose en el espacio en disco (cuotas de bloque) o
        en el número de ficheros (cuotas de inodo) o una
        combinación de ambas.  Cada uno de estos límites
        a su vez se divide en dos categorías: límites
        duros y suaves.</p><a id="idp76352976" class="indexterm"></a><p>Un límite duro no puede ser excedido.  Una vez que
        un usuario alcanza su límite duro no puede realizar
        más ubicaciones en el sistema de ficheros en cuestión.
        Por ejemplo, si el usuario tiene un límite duro de
        500 kbytes en un sistema de ficheros y está utilizando
        490 kbytes, el usuario solo puede ocupar
        otros 10 kbytes.  Un intento de ocupar 11 kbytes más
        fallará.</p><a id="idp76353872" class="indexterm"></a><p>Los límites suaves pueden excederse por un periodo
        Este periodo de tiempo recibe el nombre de periodo de gracia, que
        por defecto es una semana.  Si un usuario sobrepasa su periodo de
        gracia el límite suave se convertirá en
        un límite duro y no se permitir´n usos de disco
        adicionales.  Cuando el usuario devuelve su cuota de uso de
        recursos a un punto por debajo de su límite suave
        el periodo de gracia se reinicia.</p><p>Veamos un ejemplo de uso de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.
        Si se usa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> se entra en el el editor declarado en
        la variable de entorno
        <code class="envar">EDITOR</code>, o en el editor <span class="application">vi</span>
        si no ha modificado el valor por defecto de la variable
        <code class="envar">EDITOR</code>, para que pueda editar los
        límites de cuota.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -u test</code></strong></pre><pre class="programlisting">Quotas for user test:
/usr: kbytes in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: kbytes in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</pre><p>Debería ver dos líneas por cada sistema
        de ficheros que tenga habilitadas las cuotas.  Una línea
        para los límites de bloque y una línea para
        límites de inodo. Por ejemplo, para elevar los límites
        de este usuario de un límite suave de 50 y un límite
        duro de 75 a un límite suave de 500 y un límite
        duro de 600, cambie:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 50, hard = 75)</pre><p>por:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 500, hard = 600)</pre><p>Los nuevos límites de cuota se aplicarán en
        cuanto salga del editor.</p><p>Algunas veces se quieren activar límites de cuota
        en un rango de UIDs. Esto puede realizarse con la opción
        <code class="option">-p</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>. Primero asigne el
        límite de cuota deseado a un usuario y luego
        ejecute
        <code class="command">edquota -p protouser startuid-enduid</code>.  Por
        ejemplo, si el usuario <code class="systemitem">test</code> tiene el
        límite de cuota deseado, el siguiente comando puede
        usarse para duplicar esos límites de cuota para los
        UIDs de 10,000 hasta 19,999:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -p test 10000-19999</code></strong></pre><p>Para más información consulte la página de
        manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76382416"></a>18.14.3. Revisión de los límites de cuota y
        uso de disco</h3></div></div></div><a id="idp76383184" class="indexterm"></a><p>Puede usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> o
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> para revisar los límites de
        cuota y uso del disco.  El comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>
        le permitirá revisar cuotas individuales de
        usuario o grupo y uso del disco.  Un usuario puede
        sólamente examinar su propia cuota y la cuota de un
        grupo al que pertenezca.  Sólamente el superusuario
        puede ver las cuotas de todos los usuarios y grupos.
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> permite obtener
        un resumen de todas las cuotas y uso del disco de todos los
        sistemas de ficheros con cuotas habilitadas.</p><p>En el siguiente ejemplo vemos la salida de
        <code class="command">quota -v</code> para un usuario
        que tiene límites de cuota en dos sistemas
        de ficheros.</p><pre class="programlisting">Disk quotas for user test (uid 1002):
     Filesystem  usage    quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</pre><a id="idp76393168" class="indexterm"></a><p>En el sistema de ficheros <code class="filename">/usr</code> del
        ejemplo este usuario está actualmente
        15 kbytes sobre su límite suave de 50 kbytes y le quedan 5
        días de su periodo de gracia.  Observe el asterisco,
        <code class="literal">*</code> que indica que el usuario está
        actualmente por encima de su límite de cuota.</p><p>Normalmente los sistemas de ficheros en los que el usuario
        no esté utilizando espacio en disco no se mostrarán
        en la salida del comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>, incluso si tiene
        un límite de cuota asignado para esos sistemas
        de fichero.  La opción <code class="option">-v</code>
        desplegará esos sistemas de ficheros, en nuestro ejemplo
        el sistema de ficheros <code class="filename">/usr/var</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76396880"></a>18.14.4. Cuotas en NFS</h3></div></div></div><a id="idp76397520" class="indexterm"></a><p>Las cuotas son impuestas por el subsistema de cuotas en el
        servidor NFS.  El dæmon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.rquotad&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.rquotad</span>(8)</span></a> facilita la
        información a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> en los clientes
        NFS, permitiéndoles a los usuarios de esas máquinas
        ver sus estadísticas de cuota.</p><p>Habilite  <code class="command">rpc.rquotad</code> en
	<code class="filename">/etc/inetd.conf</code> del siguiente modo:</p><pre class="programlisting">rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</pre><p>Y reinicie <code class="command">inetd</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-encrypting"></a>18.15. Cifrado de particiones de disco</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Lucky</span> <span class="surname">Green</span></span>. </span></div></div></div><a id="idp76410960" class="indexterm"></a><p>FreeBSD ofrece un alto grado de protección
      contra el acceso no autorizado a los datos.  Los Permisos de fichero
      y MAC (Mandatory Access Control, controles de acceso obligatorio,
      consulte el <a class="xref" href="#mac" title="Capítulo 16. Mandatory Access Control">Capítulo 16, <em>Mandatory Access Control</em></a>) ayudan a evitar que otros
      tengan acceso no autorizado a los datos mientras el sistema
      operativo está funcionando y la computadora está
      encendida.  Sin embargo los permisos impuestos por el
      sistema operativo son irrelevantes si un atacante tiene acceso
      físico al sistema y puede simplemente mover el disco
      duro de la computadora a otro sistema para copiar
      y analizar datos sensibles.</p><p>Independientemente de cómo un atacante pueda
      conseguir acceso a un disco duro a a un sistema apagado,
      <span class="application">el cifrado de disco basado en GEOM
      (GEOM Based Disk Encryption, gbde)</span> puede proteger
      los datos de los sistemas de ficheros del sistema incluso
      contra atacantes muy decididos y con recursos adecuados a
      su disposición.   A diferencia de otros métodos de
      cifrado más difíciles de usar, que cifran
      únicamente ficheos individuales,
      <span class="application">gbde</span> cifra sistemas de ficheros
      completos de forma transparente.  Ni un solo texto en limpio
      llega a tocar el disco duro.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76418128"></a>18.15.1. Habilitar gbde en el kernel</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Conviértase en <code class="systemitem">root</code></strong></p><p>La configuración de <span class="application">gbde</span>
            requiere privilegios de superusuario.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su -</code></strong>
Password:</pre></li><li class="step"><p class="title"><strong>Verifique la versión del sistema operativo</strong></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a> requiere FreeBSD 5.0 o posterior.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>uname -r</code></strong>
5.0-RELEASE</pre></li><li class="step"><p class="title"><strong>Añada soporte de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a> al fichero de
            configuración de su kernel</strong></p><p>Añada la siguiente línea al fichero de
            configuración de su kernel con el editor que
            prefiera:</p><p><code class="literal">options GEOM_BDE</code></p><p>Configure, recompile e instale el kernel de FreeBSD.
            Este proceso se detalla en el
            <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><p>Reinicie con el nuevo kernel.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76428752"></a>18.15.2. Preparación del disco duro cifrado</h3></div></div></div><p>El siguiente ejemplo asume que añade a su sistema
        un disco duro nuevo que contendrá una sola
        partición cifrada.  Esta partición se
        montará como <code class="filename">/private</code>.
        <span class="application">gbde</span> puede usarse también
        para cifrar <code class="filename">/home</code> y
        <code class="filename">/var/mail</code>,
        pero esto requeriría instrucciones más complejas que
        las que se pretenden dar en esta introducción.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Añada el nuevo disco</strong></p><p>Instale el nuevo disco en el sistema como se explicó
            en la <a class="xref" href="#disks-adding" title="18.3. Añadir discos">Sección 18.3, &#8220;Añadir discos&#8221;</a>.  En nuestro ejemplo hemos
            añadido una nueva partición de disco como
            <code class="filename">/dev/ad4s1c</code>.  Los dispositivos
            <code class="filename">/dev/ad0s1*</code>
            representan particiones FreeBSD estándar que i
            existían previamente en el sistema.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4</pre></li><li class="step"><p class="title"><strong>Crée un directorio para los ficheros
            <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span> de gbde</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /etc/gbde</code></strong></pre><p>Los ficheros <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span> de
            <span class="application">gbde</span>
            contienen información que <span class="application">gbde</span>
            requiere para acceder a las particiones cifradas.   Sin el
            acceso a los ficheros <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span>
            <span class="application">gbde</span> no podrá descifrar los
            datos alojados en la partición cifrada sin una cantidad
            significativa de trabajo, tarea para la que además
            no le resultará de ayuda este software.  Cada
            partición cifrada utiliza un fichero
            <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span> separado.</p></li><li class="step"><p class="title"><strong>Inicialice la partición gbde</strong></p><p>Una partición <span class="application">gbde</span>
            debe inicializarse antes de que pueda utilizarse.
            Esta inicialización sólo debe hacerse
            una vez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde init /dev/ad4s1c -i -L /etc/gbde/ad4s1c</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> abrirá su editor para que pueda
            configurar las opciones de configuración que se
            le presentarán en una plantilla.
            Para utilizar UFS1 o UFS2, ponga el sector_size a 2048:</p><pre class="programlisting">$FreeBSD: src/sbin/gbde/template.txt,v 1.1 2002/10/20 11:16:13 phk Exp $
#
# El tamaño de sector (sector size) es la unidad de datos más
# pequeña que podrá leer o escribir.  Si la elige demasiado
# pequeña reducirá el rendimiento y la cantidad de espacio
# útil.  Si la elige demasiado grande puede hacer que los sistemas
# de ficheros no funcionen.  512 es el tamaño mínimo y
# siempre funciona.  Si va a usar UFS utilice
#
sector_size     =       2048
[...]
</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> le pedirá dos veces que escriba la
            contraseña que debe usarse para asegurar los datos.
            La contraseña debe ser la misma las dos veces.  La
            capacidad de <span class="application">gbde</span> de proteger sus
            datos depende íntegramente de la calidad de la
            contraseña que elija.
	  <a href="#ftn.idp76449232" class="footnote" id="idp76449232"><sup class="footnote">[11]</sup></a></p><p>El fichero <code class="command">gbde init</code> crea un fichero
            <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span> para su partición
            <span class="application">gbde</span>, que en nuestro ejemplo
            está en
	    <code class="filename">/etc/gbde/ad4s1c</code>.</p><div xmlns="" class="caution"><h3 class="admontitle">Atención: </h3><p xmlns="http://www.w3.org/1999/xhtml">Es imprescindible que los ficheros <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span>
              de <span class="application">gbde</span>
              <span class="emphasis"><em>deben</em></span> respaldarse junto con
              el contenido de cualquier partición cifrada.
              Aunque la sola acció de borrar
              un fichero <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span> no puede evitar que un atacante
              motivado descifre una partición
              <span class="application">gbde</span> sin el fichero
              <span class="quote">&#8220;<span class="quote">lock</span>&#8221;</span>, el propietario legítimo
              no podrá acceder a los datos en la partición
              cifrada sin una cantidad notable de trabajo, que es
              necesario señalar que no entra dentro de las funciones
              de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> ni de su diseñador.</p></div></li><li class="step"><p class="title"><strong>Conecte al kernel la partición cifrada</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</code></strong></pre><p>Se le pedirá la contraseña que elijió
            al inicializar la partición cifrada.  El
            nuevo dispositivo cifrado aparecerá en
            <code class="filename">/dev</code> como
	    <code class="filename">/dev/nombre_de_dispositivo.bde</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4        /dev/ad4s1c.bde</pre></li><li class="step"><p class="title"><strong>Crée un sistema de ficheros en el dispositivo
            cifrado</strong></p><p>Una vez el dispositivo cifrado está conectado
            al kernel puede crear un sistema de ficheros en el
            dispositivo con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>.  Dado que es más
            rápido inicializar un sistema de ficheros del
            nuevo UFS2 que un sistema de ficheros del tradicional
            UFS1, le recomendamos encarecidamente usar
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> con la opción
            <code class="option">-O2</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La opción <code class="option">-O2</code> es el
            valor por defecto en FreeBSD 5.1-RELEASE
            y siguientes.</p></div><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U -O2 /dev/ad4s1c.bde</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> debe ejecutarse en una
              partición <span class="application">gbde</span>
              conectada, que podrá identificar por la extensión
	      <code class="filename">*.bde</code>
              del nombre del dispositivo.</p></div></li><li class="step"><p class="title"><strong>Montar la partición cifrada</strong></p><p>Crée un punto de montaje para el sistema cifrado
            de ficheros.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /private</code></strong></pre><p>Montar el sistema cifrado de ficheros.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre></li><li class="step"><p class="title"><strong>Verificar que el sistema cifrado de ficheros esté
            disponible</strong></p><p>el sistema cifrado de ficheros debería ser visible
            para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a> y estar listo para su uso.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>df -H</code></strong>
Filesystem        Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a      1037M    72M   883M     8%    /
/devfs            1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f       8.1G    55K   7.5G     0%    /home
/dev/ad0s1e      1037M   1.1M   953M     0%    /tmp
/dev/ad0s1d       6.1G   1.9G   3.7G    35%    /usr
/dev/ad4s1c.bde   150G   4.1K   138G     0%    /private</pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76486352"></a>18.15.3. Montaje de sistemas cifrados de ficheros</h3></div></div></div><p>Todos los sistemas cifrados de ficheros deben reconectarse al
        kernel después de cada arranque.  Además, antes de
        poder utilizarlo debe revisarlo por si contuviera errores y montarlo.
        Todo el proceso debe ser ejecutado por el usuario
        <code class="systemitem">root</code>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Conectar la partición gbde al kernel</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</code></strong></pre><p>Se le pedirá la contraseña que
            elijió en la inicialización
            de la partición cifrada gbde.</p></li><li class="step"><p class="title"><strong>Revisión de errores en el sistema de ficheros</strong></p><p>Como que los sistemas cifrados de ficheros no pueden
            aparecer en <code class="filename">/etc/fstab</code> (lo que haría
            que fueran montados automáticamente), los sistemas
            de ficheros deben revisarse manualmente mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a>
            antes de montarlos.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p -t ffs /dev/ad4s1c.bde</code></strong></pre></li><li class="step"><p class="title"><strong>Montar los sistemas cifrados de ficheros</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre><p>El sistema cifrado de ficheros está listo para su
            uso.</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76495696"></a>18.15.3.1. Montar automáticamente particiones cifradas</h4></div></div></div><p>Es posible usar un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> para automatizar
          la conexión, revisión y el montaje de una
          partición cifrada, pero por razones de seguridad el
          <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> no debe contener la
          contraseña de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a>.  Se recomienda
          ejecutar esos <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> se ejecuten de forma manual
          proporcionando la contraseña vía consola o
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76507984"></a>18.15.4. Protección criptográfica que usa gbde</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> cifra el XXX sector payload usando AES de 128 bits
          en modo CBC.  Cada sector en el disco se cifra con una clave
          AES diferente.  Para más información sobre el
          diseño criptográfico de
          <span class="application">gbde</span>, incluyendo cómo se
          derivan las claves de sector a partir de la contraseña
          consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76510928"></a>18.15.5. Problemas de compatibilidad</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> es incompatible con dispositivos
          <span class="application">gbde</span> cifrados.  Todos los
          dispositivos <code class="filename">*.bde</code>
          deben desconectarse del kernel antes de iniciar
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> o se <span class="quote">&#8220;<span class="quote">congelará</span>&#8221;</span> durante
          la prueba inicial de dispositivos.  Para desconectar el
          el dispositivo cifrado de nuestro ejemplo haga lo siguiente:
          </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde detach /dev/ad4s1c</code></strong></pre><p>Tenga en cuenta también que, como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vinum</span>(4)</span></a> no
        utiliza el subsistema <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">geom</span>(4)</span></a>, no es posible usar
        <span class="application">gbde</span> en volúmenes
	<span class="application">vinum</span>.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp75200464" class="footnote"><p><a href="#idp75200464" class="para"><sup class="para">[10] </sup></a>
            Mantener el disco accesible a sistemas operativos que pudieran
            necesitar acceder al mismo en algún momento.
            </p></div><div id="ftn.idp76449232" class="footnote"><p><a href="#idp76449232" class="para"><sup class="para">[11] </sup></a>Si quiere ayuda para seleccionar una contraseña
            segura que además sea fácil de recordar visite
            el sitio web
            <a class="link" href="http://world.std.com/~reinhold/diceware.html" target="_top">Diceware
            Passphrase</a>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="GEOM"></a>Capítulo 19. GEOM: Marco de trabajo modular de transformación de discos</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#GEOM-synopsis">19.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#GEOM-intro">19.2. Introducción a GEOM</a></span></dt><dt><span class="sect1"><a href="#GEOM-striping">19.3. RAID0 - Distribución por bandas</a></span></dt><dt><span class="sect1"><a href="#GEOM-mirror">19.4. RAID1 - Replicación</a></span></dt></dl></div><p><span class="emphasis"><em>Traducción de Enrique Matías Sánchez <code class="email">&lt;<a xmlns="" class="email" href="mailto:cronopios@gmail.com">cronopios@gmail.com</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-synopsis"></a>19.1. Sinopsis</h2></div></div></div><a id="idp76560336" class="indexterm"></a><a id="idp76561104" class="indexterm"></a><p>Este capítulo explica el uso de discos bajo el marco de
      trabajo GEOM en FreeBSD.  Esto incluye las principales utilidades de control
      de <acronym class="acronym">RAID</acronym>
      que usan el marco de trabajo para su configuración.
      Este capítulo no se adentrará en un examen en profundidad
      de como GEOM maneja o controla la E/S, el subsistema subyacente, o el
      código.
      Esta información se proporciona en la página de manual
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">geom</span>(4)</span></a> y sus diversas referencias VEA TAMBIÉN.
      Este capítulo tampoco es una guía definitiva de
      configuraciones <acronym class="acronym">RAID</acronym>.  Sólo se examinan las
      clasificaciones de <acronym class="acronym">RAID</acronym> que puede usar GEOM.</p><p>Tras leer este capítulo, sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Que tipo de soporte para <acronym class="acronym">RAID</acronym> está
          disponible a través de GEOM.</p></li><li class="listitem"><p>Como utilizar las utilidades base para configurar, mantener,
	  y manipular los diversos niveles de <acronym class="acronym">RAID</acronym>.</p></li><li class="listitem"><p>Como replicar, unir, cifrar, y conectar remotamente dispositivos
	  de disco por medio de GEOM.</p></li><li class="listitem"><p>Como solucionar problemas con los discos adscritos al marco de
	  trabajo GEOM.</p></li></ul></div><p>Antes de leer este capítulo, debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Entender como trata FreeBSD a los dispositivos de disco
	  (<a class="xref" href="#disks" title="Capítulo 18. Almacenamiento">Capítulo 18, <em>Almacenamiento</em></a>).</p></li><li class="listitem"><p>Saber como configurar e instalar un nuevo núcleo de FreeBSD
	  (<a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-intro"></a>19.2. Introducción a GEOM</h2></div></div></div><p>GEOM permite el acceso y control de clases &#8212;sectores de
      arranque maestros (MBR), etiquetas <acronym class="acronym">BSD</acronym>, etc&#8212; por
      medio del uso de proveedores, o de los ficheros especiales de
      <code class="filename">/dev</code>.
      Capaz de trabajar con varias configuraciones de <acronym class="acronym">RAID</acronym>
      por software, GEOM proporcionará transparentemente acceso al
      sistema operativo y las utilidades del mismo.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-striping"></a>19.3. RAID0 - Distribución por bandas</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp76586832" class="indexterm"></a><a id="idp76587600" class="indexterm"></a><p>La distribución por bandas (striping) es un método que
      se usa para combinar varias unidades de disco en un único volumen.
      En muchos casos, esto se hace usando controladoras por hardware.  El
      subsistema de discos GEOM proporciona soporte por software para
      <acronym class="acronym">RAID</acronym>0, también conocido como discos
      configurados en bandas.</p><p>En un sistema <acronym class="acronym">RAID</acronym>0, los datos se dividen en
      bloques que son escritos por todas las unidades de la agrupación.
      En lugar de tener que esperar a que el sistema escriba 256 kB en un
      disco, un sistema <acronym class="acronym">RAID</acronym>0 puede escribir simultáneamente
      64 kB en cada uno de los cuatro discos, ofreciendo un superior
      rendimiento de E/S.  Este rendimiento se puede mejorar aún
      más usando varias controladoras de disco.</p><p>Cada uno de los discos de una banda <acronym class="acronym">RAID</acronym>0 debe ser
      del mismo tamaño, pues las peticiones de E/S están
      intercaladas para leer o escribir en varios discos en paralelo.</p><div class="mediaobject" align="center"><img src="geom/striping.png" align="middle" alt="Ilustració de la distribución por bandas de los discos" /></div><div class="procedure"><a id="idp76601680"></a><div class="procedure-title">Procedimiento 19.1. Creación de una banda de discos ATA sin formatear</div><ol class="procedure" type="1"><li class="step"><p>Cargue el módulo <code class="filename">geom_stripe</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload geom_stripe.ko</code></strong></pre></li><li class="step"><p>Asegúrese de que existe un punto de montaje adecuado.
	Si este volumen se convertirá en una partición raíz,
	utilice temporalmente otro punto de montaje, como <code class="filename">/mnt</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt</code></strong></pre></li><li class="step"><p>Determine los nombres de dispositivo de los discos que
	serán configurados en bandas, y cree el nuevo dispositivo de
	banda.  Por ejemplo, podría utilizar la siguiente orden para configurar
	en bandas dos discos <acronym class="acronym">ATA</acronym> sin usar ni particionar:
        <code class="filename">/dev/ad2</code> y
        <code class="filename">/dev/ad3</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gstripe label -v st0 /dev/ad2 /dev/ad3</code></strong></pre></li><li class="step"><p>Si se va a usar este volumen como dispositivo raíz
	para arrancar el sistema, debe ejecutar la siguiente orden antes de
	crear el sistema de ficheros:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -vBI /dev/stripe/st0</code></strong></pre></li><li class="step"><p>Se debe crear una tabla de particiones en el nuevo volumen con la
	siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -wB /dev/stripe/st0</code></strong></pre></li><li class="step"><p>Aademás del dispositivo <code class="filename">st0</code>,
	este proceso debería haber creado otros dos
	dispositivos en el directorio
	<code class="filename">/dev/stripe</code>, incluyendo
	<code class="filename">st0a</code> y <code class="filename">st0c</code>.
        Ahora se debe crear un sistema de ficheros en el dispositivo
	<code class="filename">st0a</code> usando la siguiente orden
        <code class="command">newfs</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U /dev/stripe/st0a</code></strong></pre><p>Por la pantalla se deslizarán muchos números, y al
	cabo de unos pocos segundos, el proceso habrá finalizado.  El
	volumen ha sido creado y está preparado para ser montado:</p></li></ol></div><p>Se puede usar la siguiente orden para montar manualmente una banda de
	  discos recién creada:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/stripe/st0a /mnt</code></strong></pre><p>Para montar automáticamente este sistema de ficheros distribuido
    por bandas durante el proceso de arranque, ponga la información
    del volumen en el fichero <code class="filename">/etc/fstab</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/dev/stripe/st0a /mnt ufs rw 2 2" \</code></strong>
    <strong class="userinput"><code>&gt;&gt; /etc/fstab</code></strong></pre><p>También se debe cargar automáticamente durante la
    inicialización del sistema el módulo geom, añadiendo
    una línea a <code class="filename">/boot/loader.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'geom_stripe_load="YES"' &gt;&gt; /boot/loader.conf</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-mirror"></a>19.4. RAID1 - Replicación</h2></div></div></div><a id="idp76651344" class="indexterm"></a><a id="idp76652112" class="indexterm"></a><p>La replicación es una tecnologín que usan muchas
      empresas y usuarios para hacer copias de respaldo de sus datos sin
      interrupciones.  Cuando hay una réplica, simplemente
      significa que el discoB replica al discoA.  O, quizá el discoC+D
      replica al discoA+B.  Al margen de la configuración de los discos,
      lo importante es que la información de un disco o
      partición está siendo replicada.  Más adelante se
      podría restaurar esa información más
      fácilmente, hacerse una copia de respaldo sin provocar
      intrrupciones de servicio o acceso, e incluso almacenarla
      físicamente en una caja fuerte para datos.</p><p>Para empezar, asegúrese de que el sistema tiene dos unidades
      de disco del mismo tamaño, eb este ejercicio se supone que son discos
      <acronym class="acronym">SCSI</acronym> de acceso directo (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=da&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">da</span>(4)</span></a>).</p><p>Comience por instalar FreeBSD en el primer disco con sólo dos
      particiones.  Una debería ser una partición de intercambio,
      de dos veces el tamaño de la <acronym class="acronym">RAM</acronym>, y todo el
      espacio restante se dedicará al sistema de ficheros raíz
      (<code class="filename">/</code>).
      Es posible tener particiones aparte para otros puntos de montajes; sin
      embargo, esto multiplicará por diez el nivel de dificultad, debido
      a la alteración manual de las opciones de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> y
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>.</p><p>Reinicie y espere a que el sistema se inicie por completo.  Una vez
      haya finalizado este proceso, ingrese como usuario
      <code class="systemitem">root</code>.</p><p>Cree el dispositivo <code class="filename">/dev/mirror/gm</code> y
      enlácelo a <code class="filename">/dev/da1</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmirror label -vnb round-robin gm0 /dev/da1</code></strong></pre><p>El sistema debería responder con:</p><pre class="screen">
Metadata value stored on /dev/da1.
Done.</pre><p>Inicialice GEOM, esto cargará el módulo del
      núcleo <code class="filename">/boot/kernel/geom_mirror.ko</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmirror load</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Esta orden debería haber creado en el directorio
	<code class="filename">/dev/mirror</code> los nodos de
	dispositivo <code class="filename">gm0</code>, <code class="filename">gm0s1</code>,
	<code class="filename">gm0s1a</code>, y <code class="filename">gm0s1c</code>.</p></div><p>Instale una etiqueta genérica <code class="command">fdisk</code> y
      el código de arranque en el recién creado dispositivo
      <code class="filename">gm0</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -vBI /dev/mirror/gm0</code></strong></pre><p>Ahora instale la información <code class="command">bsdlabel</code>
      genérica:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -wB /dev/mirror/gm0s1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si hay varias slices (rodajas) y particiones, necesitará
	modificar las opciones de las dos órdenes anteriores.  Deben
	coincidir con la slice y tamaño de partición del otro
	disco.</p></div><p>Utilice la utilidad <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> para crear un sistema de ficheros
      predefinido en nodo de dispositivo <code class="filename">gm0s1a</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U /dev/mirror/gm0s1a</code></strong></pre><p>Esto debería haber hecho que el sistema mostrara alguna
      información y un puñado de números.  Esto es bueno.
      Examine la pantalla por si hay algún mensaje de error y monte el
      dispositivo en el punto de montaje
      <code class="filename">/mnt</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/mirror/gm0s1a /mnt</code></strong></pre><p>Ahora mueva todos los datos del disco de arranque a este nuevo
      sistema de ficheros.  Este ejemplo usa las órdenes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>
      y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>; aunque, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> también debería
      funcionar en este escenario.  Evitamos utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> porque no
      copiará el código de arranque.  De ese modo, el fallo
      estaría garantizado.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dump -L -0 -f- / |(cd /mnt &amp;&amp; restore -r -v -f-)</code></strong></pre><p>Se debe hacer esto para cada sistema de ficheros.  Simplemente
      ponga el sistema de ficheros adecuado en la ubicación correcta
      al ejecutar la orden mencionada.</p><p>Ahora edite el fichero replicado <code class="filename">/mnt/etc/fstab</code>
      y elimine o comente el fichero swap
      <a href="#ftn.idp76692432" class="footnote" id="idp76692432"><sup class="footnote">[12]</sup></a>.  Cambie la información del otro sistema de ficheros
      para que utilice el nuevo disco.  Vea el siguiente ejemplo:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
#/dev/da0s2b             none            swap    sw              0       0
/dev/mirror/gm0s1a       /               ufs     rw              1       1</pre><p>Ahora cree un fichero <code class="filename">boot.conf</code> tanto en la
      partición actual como en la nueva partición raíz.
      Este fichero <span class="quote">&#8220;<span class="quote">ayudará</span>&#8221;</span> al <acronym class="acronym">BIOS</acronym>
      del sistema a arrancar la unidad correcta:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "1:da(1,a)/boot/loader" &gt; /boot.config</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "1:da(1,a)/boot/loader" &gt; /mnt/boot.config</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Lo hemos colcoado en ambas particiones raíz para asegurar un
	arranque correcto.  Si por alguna razón el sistema no pudiera
	leer en la nueva partición raíz, está disponible
	un arranque a prueba de fallos.</p></div><p>Ahora agregue la siguiente línea al nuevo
      <code class="filename">/boot/loader.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'geom_mirror_load="YES"' &gt;&gt; /mnt/boot/loader.conf</code></strong></pre><p>Esto le dice a la utilidad <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> que cargue el
      <code class="filename">geom_mirror.ko</code> durante la inicialización del
      sistema.</p><p>Reinicie el sistema:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><p>Si todo ha ido bien, el sistema debería haber arrancado desde
      el dispositivo <code class="filename">gm0s1a</code>, y un prompt
      <code class="command">login</code> debería estar a la espera.  Si algo fue
      mal, consulte la sección posterior de resolución de
      problemas.  Ahora agregue el disco <code class="filename">da0</code> al
      dispositivo <code class="filename">gm0</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmirror configure -a gm0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gmirror insert gm0 /dev/da0</code></strong></pre><p>La opción <code class="option">-a</code> le dice a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gmirror&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gmirror</span>(8)</span></a> que
      use sincronización automática; por ejemplo, que replique
      las escrituras en disco automáticamente.  La página de
      manual explica como reconstruir y reemplazar discos, aunque utiliza
      <code class="filename">data</code> en vez de <code class="filename">gm0</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76713296"></a>19.4.1. Resolución de problemas</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76713936"></a>19.4.1.1. El sistema se niega a arrancar</h4></div></div></div><p>Si el sistema arranca hasta un prompt similar a:</p><pre class="programlisting">ffs_mountroot: can't find rootvp
Root mount failed: 6
mountroot&gt;</pre><p>Reinicie la máquina utilizando el botón de
	  encendido o el de reset.  En el menú de arranque, seleccione
	  la opción seis (6).  Esto llevará al sistema a un
	  prompt de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>.  Cargue el módulo del núcleo
	  manualmente:</p><pre class="screen">OK? <strong class="userinput"><code>load geom_mirror.ko</code></strong>
OK? <strong class="userinput"><code>boot</code></strong></pre><p>Si esto funciona, es que por alguna razón el módulo
	  no se cargaba correctamente.  Ponga:</p><pre class="programlisting">options	GEOM_MIRROR</pre><p>en el fichero de configuración del núcleo,
	  recompile y reinstale.  Esto debería solucionar el problema.</p></div></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp76692432" class="footnote"><p><a href="#idp76692432" class="para"><sup class="para">[12] </sup></a>Debe advertirse que comentar la entrada del fichero swap en
	  <code class="filename">fstab</code> probablemente le obligará a
	  reestablecer una manera diferente de habilitar el espacio de
	  intercambio.  Consulte <a class="xref" href="#adding-swap-space" title="11.4. Añadir espacio swap">Sección 11.4, &#8220;Añadir espacio swap&#8221;</a> para
	  más información.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum-vinum"></a>Capítulo 20. El Gestor de Volúmenes Vinum</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#vinum-synopsis">20.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#vinum-intro">20.2. Los Discos son Demasiado Pequeños</a></span></dt><dt><span class="sect1"><a href="#vinum-access-bottlenecks">20.3. Cuellos de Botella en el Acceso</a></span></dt><dt><span class="sect1"><a href="#vinum-data-integrity">20.4. Integridad de Datos</a></span></dt><dt><span class="sect1"><a href="#vinum-objects">20.5. Objetos Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-examples">20.6. Ejemplos</a></span></dt><dt><span class="sect1"><a href="#vinum-object-naming">20.7. Esquema de Nombres de los Objetos</a></span></dt><dt><span class="sect1"><a href="#vinum-config">20.8. Configuración de Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-root">20.9. Uso de Vinum en el Sistema de Ficheros Raíz</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-synopsis"></a>20.1. Sinopsis</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-intro"></a>20.2. Los Discos son Demasiado Pequeños</h2></div><div><span class="authorgroup">Texto Original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Greg</span> <span class="surname">Lehey</span></span>. </span></div></div></div><a id="idp76732368" class="indexterm"></a><a id="idp76732880" class="indexterm"></a><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-access-bottlenecks"></a>20.3. Cuellos de Botella en el Acceso</h2></div></div></div><p></p><a id="idp76735312" class="indexterm"></a><a id="idp76736080" class="indexterm"></a><p>
      </p><div class="figure"><a id="vinum-concat"></a><div class="figure-title">Figura 20.1. Organización Concatenada</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-concat.png" alt="Organización Concatenada" /></div></div></div><p><br class="figure-break" />
    </p><a id="idp76739152" class="indexterm"></a><a id="idp76740176" class="indexterm"></a><p></p><p>
      </p><div class="figure"><a id="vinum-striped"></a><div class="figure-title">Figura 20.2. Organización con <span class="quote">&#8220;<span class="quote">Striping</span>&#8221;</span></div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-striped.png" alt="Organización con &#8220;Striping&#8221;" /></div></div></div><p><br class="figure-break" />
    </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-data-integrity"></a>20.4. Integridad de Datos</h2></div></div></div><p></p><a id="idp76745168" class="indexterm"></a><a id="idp76745936" class="indexterm"></a><a id="idp76747088" class="indexterm"></a><p>
	</p><div class="figure"><a id="vinum-raid5-org"></a><div class="figure-title">Figura 20.3. Organización en RAID-5</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-raid5-org.png" alt="Organización en RAID-5" /></div></div></div><p><br class="figure-break" />
      </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-objects"></a>20.5. Objetos Vinum</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76750672"></a>20.5.1. Consideraciones sobre el Tamaño de los
        Volúmenes</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76760144"></a>20.5.2. Almacenamiento Redundante de Datos</h3></div></div></div><p>
	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76761296"></a>20.5.3. Cuestiones Relacionadas con el Rendimiento</h3></div></div></div><p>
	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76762448"></a>20.5.4. Which Plex Organization?</h3></div></div></div><p>
	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76763600"></a>20.5.5. Vinum Plex Organizations</h3></div></div></div><p> </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-examples"></a>20.6. Ejemplos</h2></div></div></div><p></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76765904"></a>20.6.1. El Fichero de Configuración</h3></div></div></div><p>
	</p><p>
	</p><div class="figure"><a id="vinum-simple-vol"></a><div class="figure-title">Figura 20.4. Un Volumen Vinum Sencillo</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-simple-vol.png" alt="Un Volumen Vinum Sencillo" /></div></div></div><p><br class="figure-break" />
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76769104"></a>20.6.2. Increased Resilience: Mirroring</h3></div></div></div><p>
	</p><div class="figure"><a id="vinum-mirrored-vol"></a><div class="figure-title">Figura 20.5. Un Volumen Vinum Replicado</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-mirrored-vol.png" alt="Un Volumen Vinum Replicado" /></div></div></div><p><br class="figure-break" />
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76771792"></a>20.6.3. Optimización del Rendimiento</h3></div></div></div><p>
	</p><div class="figure"><a id="vinum-striped-vol"></a><div class="figure-title">Figura 20.6. Un Volumen Vinum en <span class="quote">&#8220;<span class="quote">Striping</span>&#8221;</span></div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-striped-vol.png" alt="Un Volumen Vinum en &#8220;Striping&#8221;" /></div></div></div><p><br class="figure-break" />
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76774736"></a>20.6.4. Resilience and Performance</h3></div></div></div><p></p><p>
	</p><div class="figure"><a id="vinum-raid10-vol"></a><div class="figure-title">Figura 20.7. Un Volumen Vinum Replicado y en
            <span class="quote">&#8220;<span class="quote">Striping</span>&#8221;</span></div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-raid10-vol.png" alt="Un Volumen Vinum Replicado y en &#8220;Striping&#8221;" /></div></div></div><p><br class="figure-break" />
      </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-object-naming"></a>20.7. Esquema de Nombres de los Objetos</h2></div></div></div><p></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The control devices
	  <code class="filename">/dev/vinum/control</code> and
	  <code class="filename">/dev/vinum/controld</code>, which are used
	  by <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> and the Vinum daemon respectively.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76781904"></a>20.7.1. Creación de un Sistema de Ficheros</h3></div></div></div><p>
	  </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-config"></a>20.8. Configuración de Vinum</h2></div></div></div><p></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76788432"></a>20.8.1. Arranque</h3></div></div></div><p></p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum-rc-startup"></a>20.8.1.1. Arranque Automático</h4></div></div></div><p></p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-root"></a>20.9. Uso de Vinum en el Sistema de Ficheros Raíz</h2></div></div></div><p></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76791760"></a>20.9.1. Inicio de Vinum en el Arranque para que Incluya el Sistema de
        Ficheros Raíz</h3></div></div></div><p> </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76792912"></a>20.9.2. Configuración de un Volumen Raíz en Vinum
        Accesible Para la Secuencia de Arranque</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76793936"></a>20.9.3. Ejemplo de Raíz basado en Vinum</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76794960"></a>20.9.4. Solución de Problemas</h3></div></div></div><p></p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76795856"></a>20.9.4.1. La Secuencia de Arranque Carga Pero el Sistema no Arranca</h4></div></div></div><p></p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76797008"></a>20.9.4.2. Sólo se Carga la Secuencia Primaria de Arranca</h4></div></div></div><p></p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum-root-panic"></a>20.9.4.3. No Hay Arranque, la Secuencia de Arranque da un
          Pánico</h4></div></div></div><p></p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum-root-4x"></a>20.9.5. Particularidades de Vinum en FreeBSD 4.x</h3></div></div></div><p></p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization"></a>Capítulo 21. Virtualización</h2></div><div><span class="authorgroup">Contributed by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#virtualization-synopsis">21.1. *</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="virtualization-synopsis"></a>21.1. *</h2></div></div></div><p>Pendiente de traducción.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="l10n"></a>Capítulo 22. Localización - Uso y configuración de
    I18N/L10N</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrey</span> <span class="surname">Chernov</span></span>. </span></div><div><span class="authorgroup">Reescrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Michael C.</span> <span class="surname">Wu</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#l10n-synopsis">22.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">22.2. Lo básico</a></span></dt><dt><span class="sect1"><a href="#using-localization">22.3. Uso de la localización</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">22.4. Compilación de programas con soporte para I18N</a></span></dt><dt><span class="sect1"><a href="#lang-setup">22.5. Localización de FreeBSD a idiomas específicos</a></span></dt></dl></div><p><span class="emphasis"><em>Traducción de Enrique Matías Sánchez <code class="email">&lt;<a xmlns="" class="email" href="mailto:cronopios@gmail.com">cronopios@gmail.com</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-synopsis"></a>22.1. Sinopsis</h2></div></div></div><p>FreeBSD es un proyecto muy distribuido, que cuenta con
      usuarios y contribuidores por todo el mundo.  Este
      capítulo examina las funcionalidades de
      internacionalización y localización de FreeBSD
      que permiten llevar a cabo su trabajo a los usuarios no
      angloparlantes.  Hay muchos aspectos en la
      implementación de la i18n, tanto en los niveles de
      sistema como de aplicación, así que cuando sea
      conveniente dirigiremos al lector a fuentes de
      documentación más específicas.</p><p>Tras leer este capítulo, sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cómo se codifican los distintos idiomas
        y <span class="quote">&#8220;<span class="quote">locales</span>&#8221;</span> en los sistemas operativos modernos.
	</p></li><li class="listitem"><p>Cómo configurar las <span class="quote">&#8220;<span class="quote">locales
        </span>&#8221;</span> para su intérprete de órdenes.</p></li><li class="listitem"><p>Cómo configurar la consola para idiomas
        distintos al inglés.</p></li><li class="listitem"><p>Cómo emplear efizcamente el sistema de
        ventanas X en distintos idiomas.</p></li><li class="listitem"><p>Dónde encontrar más
        información sobre como escribir aplicaciones que sigan
	la i18n.</p></li></ul></div><p>Antes de leer este capítulo, debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Saber como instalar aplicaciones adicionales de
        terceras partes (<a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-basics"></a>22.2. Lo básico</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76835536"></a>22.2.1. ?Qué es I18N/L10N?</h3></div></div></div><a id="idp76836176" class="indexterm"></a><a id="idp76837456" class="indexterm"></a><p>Los desarrolladores acortaron la palabra
        internacionalización al término I18N, contando
	el número de letras entre la primera y la
	última letra.  L10N sigue el mismo esquema, y procede
	de <span class="quote">&#8220;<span class="quote">localización</span>&#8221;</span>.  Combinados, los
	métodos, protocolos y aplicaciones de I18N/L10N
	permiten a los usuarios usar el idioma de su elección.
	</p><p>Las aplicaciones I18N se programan usando herramientas de
        I18N de bibliotecas.  Éstas permiten a los
	desarrolladores escribir un fichero sencillo y traducir los
	menús y textos contenidos a cada idioma.  Animamos
	fervientemente a los programadores a que sigan esta
	convención.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76839248"></a>22.2.2. ?Por qué debería usar I18N/L10N?
        </h3></div></div></div><p>I18N/L10N se usa siempre que quiera ver, introducir o
        procesar datos en idiomas distintos al inglés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76840400"></a>22.2.3. ?Qué idiomas están soportados en el
        proyecto de I18N?</h3></div></div></div><p>La I18N y L10N no son específicos de FreeBSD.  En la
        actualidad, uno puede elegir entre la mayoría de los
	principales idiomas del mundo, incluyendo pero sin limitarse
	a ellos: chino, alemán, japonés, coreano,
	francés, ruso, vietnamita y otros.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-localization"></a>22.3. Uso de la localización</h2></div></div></div><p>En todo su esplendor, la I18N no es específica de
      FreeBSD, y es una convención.  Le animamos a que ayude a
      FreeBSD siguiendo esta convención.</p><a id="idp76842960" class="indexterm"></a><p>Las opciones de localización se basan en tres
      términos principales: código de idioma,
      código de país y codificación.  Los
      nombres de las <span class="quote">&#8220;<span class="quote">locales</span>&#8221;</span> se construyen a partir de
      estas tres partes como sigue:</p><pre class="programlisting"><em class="replaceable"><code>CódigoDelIdioma</code></em>
      _<em class="replaceable"><code>CódigoDelPaís</code></em>.
      <em class="replaceable"><code>Codificación</code></em></pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76845648"></a>22.3.1. Códigos de idioma y país</h3></div></div></div><a id="idp76846288" class="indexterm"></a><a id="idp76846928" class="indexterm"></a><p>Para localizar un sistema FreeBSD a un idioma concreto
        (o cualquier otro sistema de tipo <span class="trademark">UNIX</span>® que soporte I18N),
	los usuarios necesitar averiguar los códigos del
	país e idioma concreto (los códigos de
	país le dicen a las aplicaciones que variedad del
	idioma dado deben usar).  Además, los navegadores web,
	servidores SMTP/POP, servidores web, etc toman decisiones
	basándose en ellos.  Los siguientes son ejemplos de
	códigos de idioma/país:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Código de idioma/país</th><th>Descripción</th></tr></thead><tbody><tr><td>en_US</td><td>Inglés - Estados Unidos de América
	        </td></tr><tr><td>ru_RU</td><td>Ruso de Rusia</td></tr><tr><td>zh_TW</td><td>Chino tradicional de Taiwán</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76859344"></a>22.3.2. Codificaciones</h3></div></div></div><a id="idp76859984" class="indexterm"></a><a id="idp76860496" class="indexterm"></a><p>Algunos idiomas usan codificaciones distintas al ASCII
        que son de 8 bits, caracteres anchos o multibyte; consulte
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a> para conocer más detalles.  Algunas
	aplicaciones más antiguas no los reconocen y los
	confunden con caracteres de control.  Las aplicaciones
	modernas normalmente reconocen los caracteres de 8 bits.
	Dependiendo de la implementación, los usuarios pueden
	necesitar compilar una aplicación con soporte para
	caracteres anchos o multibyte, o configurarlo correctamente.
	Para poder introducir y procesar caracteres anchos o
	multibyte, la Colección de <span class="quote">&#8220;<span class="quote">Ports</span>&#8221;</span> de FreeBSD
	proporciona diferentes programas a cada idioma.
	Diríjase a la documentación de I18N del <span class="quote">&#8220;<span class="quote">
	port</span>&#8221;</span> de FreeBSD correspondiente.</p><p>Específicamente, los usuarios necesitan mirar la
        documentación de la aplicación para decidir
	como configurarla correctamente o pasar valores correctos al
	configure/Makefile/compilador.</p><p>Algunas cosas a tener presentes son:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Los juegos de caracteres de tipo char de C
	    específicos para el idioma (consulte
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a>), v.g. ISO-8859-1, ISO-8859-15, KOI8-R,
	    CP437.</p></li><li class="listitem"><p>Las codificaciones anchas o multibyte, v.g. EUC, Big5
	    .</p></li></ul></div><p>Puede comprobar la lista activa de juegos de caracteres
        en el <a class="link" href="http://www.iana.org/assignments/character-sets" target="_top">Registro
	  IANA</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las versiones 4.5 y posteriores de FreeBSD usan en su lugar
        codificaciones de la <span class="quote">&#8220;<span class="quote">locale</span>&#8221;</span> compatibles con
	X11.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76872912"></a>22.3.3. Aplicaciones I18N</h3></div></div></div><p>En el sistema de paquetes y ports de FreeBSD, las
        aplicaciones I18N se han denominado con <code class="literal">I18N
	</code> en su nombre para una fácil
	identificación.  Sin embargo, no siempre soportan el
	idioma necesitado.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="setting-locale"></a>22.3.4. Configuración de las <span class="quote">&#8220;<span class="quote">locales</span>&#8221;</span>
        </h3></div></div></div><p>Normalmente basta con exportar el valor del nombre de la
        <span class="quote">&#8220;<span class="quote">locale</span>&#8221;</span> como <code class="envar">LANG</code> en el
	intérprete de órdenes de la sesión.
	Esto se podría hacer en el fichero <code class="filename">
	~/.login_conf</code> del usuario o en el fichero de
	inicio del intérprete de órdenes del usuario
	(<code class="filename">~/.profile</code>, <code class="filename">~/.bashrc
	</code>, <code class="filename">~/.cshrc</code>).  No es necesario
	configurar las otras variables de localización como
	<code class="envar">LC_CTYPE</code> o <code class="envar">LC_CTIME</code>.
	Diríjase a la documentación de FreeBSD
	específica de su idioma para más
	información.</p><p>Debería configurar las siguientes dos variables de
        entorno en sus ficheros de configuración:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp76880080" class="indexterm"></a><p><code class="envar">LANG</code> para las funciones de la familia
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setlocale&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">setlocale</span>(3)</span></a> de <span class="trademark">POSIX</span>® </p></li><li class="listitem"><a id="idp76882896" class="indexterm"></a><p><code class="envar">MM_CHARSET</code> para el juego de caracteres
	    MIME de las aplicaciones</p></li></ul></div><p>Esto comprende la configuración del
        intérprete de órdenes del usuario, la
	configuración específica de la
	aplicación y la configuración de X11.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76884688"></a>22.3.4.1. Métodos de configuración de las <span class="quote">&#8220;<span class="quote">
	  locales</span>&#8221;</span></h4></div></div></div><a id="idp76885584" class="indexterm"></a><a id="idp76886096" class="indexterm"></a><p>Hay dos métodos para configurar las <span class="quote">&#8220;<span class="quote">
	  locales</span>&#8221;</span>, que se describen aquí abajo.  El
	  primero (que es el recomendado) es asignar las variables de
	  entorno en una <a class="link" href="#login-class" title="22.3.4.1.1. Método de las clases de sesión">clase de
	  sesión</a>, y el segundo es añadir las
	  asignaciones de las variables de entorno al <a class="link" href="#startup-file" title="22.3.4.1.2. Método de los ficheros de inicio de los intérpretes de órdenes">fichero de inicio</a> del
	  intérprete de órdenes del sistema.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="login-class"></a>22.3.4.1.1. Método de las clases de sesión</h5></div></div></div><p>Este método permite asignar las variables de
	    entorno necesarias para el nombre de las <span class="quote">&#8220;<span class="quote">locales
	    </span>&#8221;</span> y el juego de caracteres MIME de una sola vez
	    para todos los posibles intérpretes de
	    órdenes, en vez de añadir asignaciones
	    específicas en los ficheros de inicio de cada uno
	    de los intérpretes de órdenes.  La <a class="link" href="#usr-setup" title="22.3.4.1.1.1. Configuración a nivel de usuario">configuración a nivel de
	    usuario</a> la puede realizar el propio usuario,
	    mientras que la <a class="link" href="#adm-setup" title="22.3.4.1.1.2. Configuración a nivel de administrador">
	    configuración a nivel de administrador</a>
	    precisa de permisos de superusuario.</p><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="usr-setup"></a>22.3.4.1.1.1. Configuración a nivel de usuario</h6></div></div></div><p>Esto es un ejemplo minimalista de un fichero
	      <code class="filename">.login_conf</code> de la carpeta de
	      inicio de un usuario, que contiene las dos variables
	      configuradas para la codificación Latin-1:
	      </p><pre class="programlisting">me:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:</pre><a id="idp76897232" class="indexterm"></a><p>Esto es un ejemplo de un <code class="filename">.login_conf
	      </code> que configura las variables para el chino
	      tradicional en la codificación BIG-5.  Observe
	      que se configuran muchas más variables porque
	      algunos programas no respetan correctamente las
	      variables de las <span class="quote">&#8220;<span class="quote">locales</span>&#8221;</span> para el chino,
	      el japonés y el coreano.</p><pre class="programlisting">#Users who do not wish to use monetary units or time formats
#of Taiwan can manually change each variable
me:\
	:lang=zh_TW.Big5:\
	:lc_all=zh_TW.Big:\
	:lc_collate=zh_TW.Big5:\
	:lc_ctype=zh_TW.Big5:\
	:lc_messages=zh_TW.Big5:\
	:lc_monetary=zh_TW.Big5:\
	:lc_numeric=zh_TW.Big5:\
	:lc_time=zh_TW.Big5:\
	:charset=big5:\
	:xmodifiers="@im=xcin": #Setting the XIM Input Server</pre><p>Consulte la <a class="link" href="#adm-setup" title="22.3.4.1.1.2. Configuración a nivel de administrador">
	      configuración a nivel de administrador</a> y
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> para conocer más detalles.
	      </p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="adm-setup"></a>22.3.4.1.1.2. Configuración a nivel de administrador
	      </h6></div></div></div><p>Compruebe que la clase de sesión en
	      <code class="filename">/etc/login.conf</code> establece el
	      idioma adecuado.  Asegúrese de que estas
	      opciones aparecen en <code class="filename">/etc/login.conf
	      </code>:</p><pre class="programlisting"><em class="replaceable"><code>nombre_del_idioma</code></em>:<em class="replaceable"><code>título_cuentas</code></em>:\
	:charset=<em class="replaceable"><code>juego_de_caracteres_MIME</code></em>:\
	:lang=<em class="replaceable"><code>nombre de la locale</code></em>:\
	:tc=default:</pre><p>Así que, si seguimos con nuestro ejemplo
	      anterior que usaba Latin-1, tendría este
	      aspecto:</p><pre class="programlisting">german:German Users Accounts:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:\
	:tc=default:</pre><h5 class="title"><a id="idp76906192"></a>Modificación de las
	      clases de sesión con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a></h5><a id="idp76911568" class="indexterm"></a><p>Utilice <code class="command">vipw</code> para añadir
	      nuevos usuarios, y haga que la entrada tenga este
	      aspecto:</p><pre class="programlisting">usuario:contraseña:1111:11:<em class="replaceable"><code>idioma</code></em>:0:0:Nombre de usuario:/home/usuario:/bin/sh</pre><h5 class="title"><a id="idp76914000"></a>Modificación de las
	      clases de sesión con with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a>
	      </h5><a id="idp76915280" class="indexterm"></a><a id="idp76916176" class="indexterm"></a><p>Utilice <code class="command">adduser</code> para
	      añadir nuevos usuarios, y haga lo siguiente:
	      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Establezca <code class="literal">defaultclass =
		  idioma</code> en
		  <code class="filename">/etc/adduser.conf</code>.  Recuerde
		  que en este caso debe introducir una clase
		  <code class="literal">default</code> (por omisión)
		  para todos los usuarios de otros idiomas.</p></li><li class="listitem"><p>Una variante alternativa es contestar el idioma
		  indicado cada vez que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> muestre
		  </p><pre class="screen"><code class="prompt">Enter login class: default
		  []: </code></pre></li><li class="listitem"><p>Otra alternativa es utilizar lo siguiente para
		  cada usuario de un idioma diferente al que desee
		  añadir:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser -class
		  idioma</code></strong>
		  </pre></li></ul></div><h5 class="title"><a id="idp76927952"></a>Modificación de las
	      clases de sesión con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></h5><a id="idp76929104" class="indexterm"></a><p>Si utiliza <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> para añadir nuevos
	      usuarios, llámelo de esta manera:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd
	      nombre_usuario -L
	      idioma</code></strong></pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startup-file"></a>22.3.4.1.2. Método de los ficheros de inicio de los
	    intérpretes de órdenes</h5></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">No se recomienda este método porque precisa
	      de una configuración diferente para cada
	      intérprete de órdenes que se pueda
	      elegir.  Utilice en su lugar el <a class="link" href="#login-class" title="22.3.4.1.1. Método de las clases de sesión">método de las clases de
	      sesión</a>.</p></div><a id="idp76938704" class="indexterm"></a><a id="idp76939216" class="indexterm"></a><p>Para añadir el nombre de la <span class="quote">&#8220;<span class="quote">locale
            </span>&#8221;</span> y el juego de caracteres MIME, simplemente
            establezca las dos variables de entorno mostradas abajo
            en los ficheros de inicio del intérprete de
            órdenes <code class="filename">/etc/profile</code> y/o
            <code class="filename">/etc/csh.login</code>.  Aquí abajo
            usaremos el idioma alemán como ejemplo:</p><p>En <code class="filename">/etc/profile</code>:</p><pre class="programlisting"><code class="envar">LANG=de_DE.ISO8859-1; export LANG</code>
<code class="envar">MM_CHARSET=ISO-8859-1; export MM_CHARSET</code></pre><p>O en <code class="filename">/etc/csh.login</code>:</p><pre class="programlisting"><code class="envar">setenv LANG de_DE.ISO8859-1</code>
<code class="envar">setenv MM_CHARSET ISO-8859-1</code></pre><p>Como alternativa, puede añadir las
            instrucciones anteriores a <code class="filename">/usr/share/skel/
            dot.profile</code> (similar a lo que se
            utilizó antes en <code class="filename">/etc/profile</code>
            ), o <code class="filename">/usr/share/skel/dot.login</code>
            (similar a lo que se utilizó antes en <code class="filename">
            /etc/csh.login</code>).</p><p>Para X11:</p><p>En <code class="filename">$HOME/.xinitrc</code>:</p><pre class="programlisting"><code class="envar">LANG=de_DE.ISO8859-1; export LANG</code></pre><p>O:</p><pre class="programlisting"><code class="envar">setenv LANG de_DE.ISO8859-1</code></pre><p>En función de su intérprete de
            órdenes (vea más arriba).</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="setting-console"></a>22.3.5. Configuración de la consola</h3></div></div></div><p>Para todos los juegos de caracteres representables con el
        tipo char en C, establezca los tipos de letra para la consola
        adecuados para el idioma en cuestión en <code class="filename">
        /etc/rc.conf</code> con:</p><pre class="programlisting">font8x16=<em class="replaceable"><code>nombre_del_tipo_de_letra
        </code></em>
font8x14=<em class="replaceable"><code>nombre_del_tipo_de_letra</code></em>
font8x8=<em class="replaceable"><code>nombre_del_tipo_de_letra</code></em></pre><p>Aquí, el <em class="replaceable"><code>nombre_del_tipo_de_letra
        </code></em> se toma del directorio <code class="filename">/usr/share/
        syscons/fonts</code>, sin el sufijo <code class="filename">.fnt
        </code>.</p><a id="idp76958672" class="indexterm"></a><a id="idp76959568" class="indexterm"></a><a id="idp76960080" class="indexterm"></a><p>Asegúrese también de configurar los mapas
        de teclado y pantalla correctos para su juego de
        caracteres C por medio de <code class="command">sysinstall</code>
        (<code class="command">/stand/sysinstall</code> en versiones de FreeBSD
        anteriores a la 5.2).
        Una vez dentro de <span class="application">sysinstall
        </span>, seleccione <span class="guimenuitem">Configure
        </span>, y después <span class="guimenuitem">Console
        </span>.  Como alternativa, puede añadir lo
        siguiente en <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">scrnmap=<em class="replaceable"><code>nombre_del_mapa_de_pantalla</code></em>
keymap=<em class="replaceable"><code>nombre_del_mapa_de_teclado</code></em>
keychange="<em class="replaceable"><code>secuencia número_tecla_de_función</code></em>"</pre><p>Aquí, el <em class="replaceable"><code>nombre_del_mapa_de_pantalla
        </code></em> se toma del directorio <code class="filename">/usr/share/
        syscons/scrnmaps</code>, sin el sufijo <code class="filename">.scm
        </code>.  Normalmente es necesario un mapa de pantalla
        (<span class="quote">&#8220;<span class="quote">screenmap</span>&#8221;</span>) con un tipo de letra
        correspondiente para poder extender de 8 a 9 bits la matriz
        de caracteres de una tarjeta VGA en un área
        pseudográfica, es decir, desplazar las letras fuera
        de ese área si el tipo de letra de pantalla usa una
        columna de 8 bits.</p><p>Si tiene habilitado el dæmon <span class="application">moused
        </span> por configurar esto en su <code class="filename">/etc/
        rc.conf</code>:</p><pre class="programlisting">moused_enable="YES"</pre><p>entonces estudie la información sobre el cursor
        del ratón del siguiente párrafo.</p><a id="idp76973008" class="indexterm"></a><p>Por omisión, el cursor del ratón del
        controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a> ocupa el intervalo 0xd0-0xd3 del
        juego de caracteres.  Si su idioma usa este intervalo,
        necesita desplazar el intervalo del cursor fuera de
        él.  En versiones de FreeBSD anteriores a la 5.0,
        introduzca la siguiente línea en la
        configuración del núcleo:</p><pre class="programlisting">options		SC_MOUSE_CHAR=0x03</pre><p>En FreeBSD 4.4 y posteriores, introduzca la siguiente
        línea en <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">mousechar_start=3</pre><p>Aquí, el <em class="replaceable"><code>nombre_del_mapa_de_teclado
        </code></em> se toma del directorio <code class="filename">/usr/share/
        syscons/keymaps</code>, sin el sufijo <code class="filename">.kbd
        </code>.  Si no está seguro de cual mapa de
        teclado usar, puede usar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmap&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdmap</span>(1)</span></a> para probar los mapas
        de teclado sin reiniciar.</p><p>Normalmente se necesita el <code class="literal">keychange</code>
        para programar las teclas de función para que
	coincidan con el tipo de terminal seleccionado, porque las
	secuencias de las teclas de función no se pueden
	definir en el mapa de teclado.</p><p>Asegúrese también de configurar el tipo de
        terminal consola correcto en <code class="filename">/etc/ttys</code>
	para todas las entradas <code class="literal">ttyv*</code>.  Las
	correspondencias predefinidas actualmente son:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Juego de caracteres</th><th>Tipo de terminal</th></tr></thead><tbody><tr><td>ISO-8859-1 o ISO-8859-15</td><td><code class="literal">cons25l1</code></td></tr><tr><td>ISO-8859-2</td><td><code class="literal">cons25l2</code></td></tr><tr><td>ISO-8859-7</td><td><code class="literal">cons25l7</code></td></tr><tr><td>KOI8-R</td><td><code class="literal">cons25r</code></td></tr><tr><td>KOI8-U</td><td><code class="literal">cons25u</code></td></tr><tr><td>CP437 (predeterminada en VGA)</td><td><code class="literal">cons25</code></td></tr><tr><td>US-ASCII</td><td><code class="literal">cons25w</code></td></tr></tbody></table></div><p>Para los idiomas en caracteres anchos o multibyte,
        utilice el port correcto de FreeBSD en su directorio <code class="filename">
	/usr/ports/idioma</code>.
	Algunos ports aparecen como consola mientras que el sistema
	los ve como una vtty serie, por lo tanto debe reservar
	suficientes vtty tanto para X11 como la consola
	pseudoserie.  Aquí tiene una lista parcial de
	aplicaciones para usar otros idiomas en la consola:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Idioma</th><th>Ubicación</th></tr></thead><tbody><tr><td>Chino tradicional (BIG-5)</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/chinese/big5con&#10;&#9;        /pkg-descr">chinese/big5con
	        </a></td></tr><tr><td>Japonés</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/kon2-16dot/pkg-descr">japanese/kon2-16dot</a> o
	        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/mule-freewnn/pkg-descr">japanese/mule-freewnn</a></td></tr><tr><td>Coreano</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/korean/han/pkg-descr">korean/han</a></td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77018192"></a>22.3.6. Configuración de X11</h3></div></div></div><p>Aunque X11 no es parte del Proyecto FreeBSD, hemos incluido
        aquí algo de información para usuarios de FreeBSD.
	Para más detalles, acuda al <a class="link" href="http://www.x.org/" target="_top">sitio web de Xorg</a>
	o del servidor X11 que utilice.</p><p>En <code class="filename">~/.Xresources</code>, puede afinar
        más las opciones de I18N específicas de la
        aplicación (v.g., tipos de letra, menús, etc).
        </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77020496"></a>22.3.6.1. Visualización de los tipos de letra</h4></div></div></div><a id="idp77021136" class="indexterm"></a><p>Instale el servidor <span class="application">Xorg</span>
	  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/xorg-server/pkg-descr">x11-servers/xorg-server</a>
	  o el servidor <span class="application"><span class="trademark">XFree86</span>&#8482;</span>
	  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/XFree86-4-Server/pkg-descr">x11-servers/XFree86-4-Server</a>),
	  y despúes instale los tipos de letra <span class="trademark">TrueType</span>® del idioma.  La
	  configuración de la <span class="quote">&#8220;<span class="quote">locale</span>&#8221;</span> correcta para el
	  idioma debería permitirle ver el idioma seleccionado en
	  menús y similares.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77024720"></a>22.3.6.2. Introducción de caracteres no ingleses</h4></div></div></div><a id="idp77025360" class="indexterm"></a><p>El protocolo Método de Introducción X11
	  (XIM) es un nuevo estándar para todos los clientes
	  X11.  Todas las aplicaciones X11 deberían estar
	  escritas como clientes XIM que reciben entradas de
	  servidores XIM.  Hay varios servidores XIM disponibles
	  para distintos idiomas.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77026640"></a>22.3.7. Configuración de la impresora</h3></div></div></div><p>Hay algunos juegos de caracteres de tipo char de C que
        están normalmente codificados por hardware en las
	impresoras.  Los juegos de caracteres anchos o multibyte
	precisan de una configuración especial y recomendamos
	el uso de <span class="application">apsfilter</span>.
	También puede convertir el documento a los formatos
	<span class="trademark">PostScript</span>® o PDF usando conversores específicos del
	idioma.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77028816"></a>22.3.8. El núcleo y los sistemas de ficheros</h3></div></div></div><p>El sistema de ficheros rápido (FFS) de FreeBSD
        funciona bien a 8 bits, así que se puede usar con
	cualquier juego de caracteres de tipo char de C (vea
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a>), pero no hay almacenado ningún
	nombre de juego de caracteres en el sistema de ficheros; es
	decir, son 8 bits en bruto y no sabe nada acerca del orden de
	codificación.  Oficialmente, FFS no soporta
	todavía ninguna forma de juegos de caracteres anchos o
	multibyte.  Sin embargo, algunos juegos de caracteres anchos
	o multibyte tienen parches independientes para habilitar
	dicho soporte en FFS.  Son solamente soluciones temporales no
	portables o <span class="quote">&#8220;<span class="quote">hacks</span>&#8221;</span>, y hemos decicido no
	incluirlas en el árbol de código fuente.
	Diríjase a los sitios web de los respectivos idiomas
	para encontrar más información y los parches.</p><a id="idp77030992" class="indexterm"></a><a id="idp77031504" class="indexterm"></a><p>El sistema de ficheros <span class="trademark">MS-DOS</span>®de FreeBSD tiene la capacidad
        configurable de convertir entre los juegos de caracteres
	<span class="trademark">MS-DOS</span>®, Unicode y los juegos de caracteres seleccionados del
	sistema de ficheros de FreeBSD.  Vea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a> para
	más detalles.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-compiling"></a>22.4. Compilación de programas con soporte para I18N</h2></div></div></div><p>Muchos ports de FreeBSD han sido portados con soporte para
      I18N.  Algunos de ellos están marcados con -I18N en el
      nombre del port.  Éstos y muchos otros programas tienen
      incorporado soporte para I18N y no necesitan ninguna
      consideración especial.</p><a id="idp77039824" class="indexterm"></a><p>Sin embargo, algunas aplicaciones como <span class="application">MySQL
      </span> necesitan tener el <code class="filename">Makefile</code>
      configurado con el juego de caracteres específico.  Esto
      se hace normalmente en el <code class="filename">Makefile</code> o
      pasando un valor a <span class="application">configure</span> en el
      código fuente.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="lang-setup"></a>22.5. Localización de FreeBSD a idiomas específicos</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ru-localize"></a>22.5.1. Idioma ruso (codificación KOI8-R)</h3></div><div><span class="authorgroup">Contribuido originalmente por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrey</span> <span class="surname">Chernov</span></span>. </span></div></div></div><a id="idp77046096" class="indexterm"></a><p>Para más información sobre la
        codificación KOI8-R, vea las
	<a class="link" href="http://koi8.pp.ru/" target="_top">Referencias KOI8-R (Juego de
	  caracteres rusos para la red)</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77048272"></a>22.5.1.1. Configuración de la <span class="quote">&#8220;<span class="quote">locale</span>&#8221;</span></h4></div></div></div><p>Ponga las siguientes líneas en su fichero
	  <code class="filename">~/.login_conf</code>:</p><pre class="programlisting">me:My account:\
	:charset=KOI8-R:\
	:lang=ru_RU.KOI8-R:</pre><p>Vea anteriormente en este mismo capítulo
	  ejemplos de configuración de las <a class="link" href="#setting-locale" title="22.3.4. Configuración de las &#8220;locales&#8221;">locales</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77051344"></a>22.5.1.2. Configuración de la consola</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>En versiones de FreeBSD anteriores a la 5.0,
	      añada la liguiente línea en el fichero de
	      configuración del núcleo:</p><pre class="programlisting">options		SC_MOUSE_CHAR=0x03</pre><p>En FreeBSD 4.4 y posteriores introduzca la siguiente
	      línea en <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">mousechar_start=3</pre></li><li class="listitem"><p>Utilice las siguientes opciones en
	      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">keymap="ru.koi8-r"
scrnmap="koi8-r2cp866"
font8x16="cp866b-8x16"
font8x14="cp866-8x14"
font8x8="cp866-8x8"</pre></li><li class="listitem"><p>Para cada entrada <code class="literal">ttyv*</code> en
	      <code class="filename">/etc/ttys</code>, utilice <code class="literal">
	      cons25r</code> como el tipo de terminal.</p></li></ul></div><p>Vea anteriormente en este mismo capítulo
	  ejemplos de configuración de la <a class="link" href="#setting-console" title="22.3.5. Configuración de la consola">consola</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77063376"></a>22.5.1.3. Configuración de la impresora</h4></div></div></div><a id="idp77064016" class="indexterm"></a><p>Dado que la mayoría de las impresoras con
	  caracteres rusos tienen un código de página
	  CP866 en hardware, es necesario un filtro de salida
	  especial para convertir de KOI8-R a CP866.  Tal filtro es
	  instalado por omisión como <code class="filename">
	  /usr/libexec/lpr/ru/koi2alt</code>.  Una entrada de
	  impresora rusa <code class="filename">/etc/printcap</code>
	  debería tener este aspecto:</p><pre class="programlisting">lp|Russian local line printer:\
	:sh:of=/usr/libexec/lpr/ru/koi2alt:\
	:lp=/dev/lpt0:sd=/var/spool/output/lpd:lf=/var/log/lpd-errs:</pre><p>Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">printcap</span>(5)</span></a> para una explicación
	  detallada.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77071568"></a>22.5.1.4. Sistema de ficheros <span class="trademark">MS-DOS</span>® y nombres de ficheros en
	  ruso</h4></div></div></div><p>La siguiente entrada <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> de ejemplo habilita
	  el soporte para nombres de fichero en ruso en los sistemas
	  de ficheros <span class="trademark">MS-DOS</span>® montados:</p><pre class="programlisting">/dev/ad0s2      /dos/c  msdos   rw,-Wkoi2dos,-Lru_RU.KOI8-R 0 0</pre><p>La opción <code class="option">-L</code> selecciona el
	  nombre de la <span class="quote">&#8220;<span class="quote">locale</span>&#8221;</span> usada, y <code class="option">-W
	  </code> establece la tabla de conversión de
	  caracteres.  Para usar la opción <code class="option">-W</code>
	  , asegúrese de montar <code class="filename">/usr</code>
	  antes que la partición <span class="trademark">MS-DOS</span>®, porque las tablas
	  de conversión se ubican en <code class="filename">
	  /usr/libdata/msdosfs</code>.  Para más
	  información, vea la página de manual
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdos&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdos</span>(8)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77079120"></a>22.5.1.5. Configuración de X11</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Antes haga la <a class="link" href="#setting-locale" title="22.3.4. Configuración de las &#8220;locales&#8221;">
	      configuración de las <span class="quote">&#8220;<span class="quote">locales</span>&#8221;</span> para
	      la consola</a> como se ha explicado.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a id="russian-note"></a>La <span class="quote">&#8220;<span class="quote">locale
	        </span>&#8221;</span> rusa KOI8-R puede no funcionar con versiones
		antiguas (anteriores a la 3.3) de <span class="application">
		<span class="trademark">XFree86</span>&#8482;</span>.  <span class="application">Xorg
		</span> es ahora la versión predefinida
		del sistema de ventanas X en FreeBSD.  Esto no
		debería ser un problema salvo que esté
		usando una versión antigua de FreeBSD.</p></div></li><li class="listitem"><p>Si utiliza <span class="application">Xorg</span>, instale
              el paquete <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/xorg-fonts-cyrillic/pkg-descr">x11-fonts/xorg-fonts-cyrillic</a>.</p><p>Compruebe la sección <code class="literal">"Files"</code>
	      de su fichero <code class="filename">/etc/X11/xorg.conf</code>.  Se
	      deben añadir las siguientes líneas <span class="emphasis"><em>
	      antes</em></span> de ninguna otra entrada <code class="literal">FontPath
	      </code>:</p><pre class="programlisting">FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/misc"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/75dpi"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/100dpi"</pre><p>Si utiliza un modo de vídeo de alta resolución,
	      intercambie las líneas 75 dpi y 100 dpi.</p></li><li class="listitem"><p>Para activar un teclado ruso, añada lo siguiente
	      a la sección <code class="literal">"Keyboard"</code> de su
	      fichero <code class="filename">XF86Config</code>.</p><p>Para <span class="application"><span class="trademark">XFree86</span>&#8482; 3.X</span>:</p><pre class="programlisting">XkbLayout  "ru"
XkbOptions "grp:caps_toggle"</pre><p>Para <span class="application">Xorg</span> (o
              <span class="application"><span class="trademark">XFree86</span>&#8482; 4.X</span>):</p><pre class="programlisting">Option "XkbLayout"   "us,ru"
Option "XkbOptions"  "grp:toggle"</pre><p>Asegúrese también de que <code class="literal">XkbDisable
	      </code> esté desactivado (comentado) allí.
	      </p><p>Para <code class="literal">grp:caps_toggle</code> la tecla para pasar
	      entre la codificación
	      rusa y la latina será <span class="keycap"><strong>BloqMayús
	      </strong></span>.  La antigua función de <span class="keycap"><strong>
	      BloqMayús</strong></span> todavía está
	      disponible a través de <span class="keycap"><strong>May</strong></span>+<span class="keycap"><strong>BloqMayús</strong></span> (sólamente en modo latino).  Para
	      <code class="literal">grp:toggle</code> la tecla para pasar entre la
	      codificación rusa y la latina será
	      <span class="keycap"><strong>Alt derecha</strong></span>.  <code class="literal">grp:caps_toggle</code>
	      no funciona en <span class="application">Xorg</span> por alguna
	      razón desconocida.</p><p>Si en su teclado dispone de teclas <span class="quote">&#8220;<span class="quote"><span class="trademark">Windows</span>®
	      </span>&#8221;</span>, y observa que algunas teclas no
	      alfanuméricas están mapeadas
	      incorrectamente en el modo ruso, añada la
	      siguiente línea en su fichero <code class="filename">
	      XF86Config</code>.</p><p>Para <span class="application"><span class="trademark">XFree86</span>&#8482; 3.X</span>:
	      </p><pre class="programlisting">XkbVariant "winkeys"</pre><p>Para <span class="application">Xorg</span> (o
              <span class="application"><span class="trademark">XFree86</span>&#8482; 4.X</span>):
	      </p><pre class="programlisting">Option "XkbVariant" ",winkeys"</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El teclado XKB ruso puede no funcionar con
	        versiones antiguas de <span class="application"><span class="trademark">XFree86</span>&#8482;
		</span>, vea la <a class="link" href="#russian-note">
		nota anterior</a> para más
		información.  El teclado XKB ruso puede no
		funcionar tampoco con aplicaciones no localizadas.</p></div></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las aplicaciaones mínimamente localizadas
	    deberían llamar una función
	    <code class="function">XtSetLanguageProc (NULL, NULL, NULL);</code> al
	    principio del programa.</p><p xmlns="http://www.w3.org/1999/xhtml">Vea <a class="link" href="http://koi8.pp.ru/xwin.html" target="_top">KOI8-R para X
	     Window</a> para más instrucciones sobre la
	     localización de aplicaciones X11.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77119824"></a>22.5.2. Localización al chino tradicional para
        Taiwán</h3></div></div></div><a id="idp77120464" class="indexterm"></a><p>El proyecto FreeBSD-Taiwán tiene una Guía de
        chino para FreeBSD en <code class="uri"><a class="uri" href="http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/" target="_top">http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/</a></code> que utiliza muchos ports chinos.  El editor actual
	del <code class="literal">FreeBSD Chinese HOWTO</code> es Shen Chuan-Hsing
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:statue@freebsd.sinica.edu.tw">statue@freebsd.sinica.edu.tw</a>&gt;</code>.
      </p><p>Chuan-Hsing Shen <code class="email">&lt;<a xmlns="" class="email" href="mailto:statue@freebsd.sinica.edu.tw&#10;        ">statue@freebsd.sinica.edu.tw
        </a>&gt;</code> ha creado la
	<a class="link" href="http://netlab.cse.yzu.edu.tw/~statue/cfc/" target="_top">
	Colección de FreeBSD en chino (CFC)</a> usando
	<code class="literal">zh-L10N-tut</code> de FreeBSD-Taiwán.  Los
	paquetes y los guiones están disponibles en
	<code class="uri"><a class="uri" href="ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/" target="_top">ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77125712"></a>22.5.3. Localización al idioma alemán (para todos
        los idiomas ISO 8859-1)</h3></div></div></div><a id="idp77126352" class="indexterm"></a><p>Slaven Rezic <code class="email">&lt;<a xmlns="" class="email" href="mailto:eserte@cs.tu-berlin.de">eserte@cs.tu-berlin.de</a>&gt;</code> ha
        escrito un tutorial de como usar las diéresis en una
	máquina FreeBSD.  El tutorial está disponible en
	<code class="uri"><a class="uri" href="http://www.de.FreeBSD.org/de/umlaute/" target="_top">http://www.de.FreeBSD.org/de/umlaute/</a></code>.
	</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77128912"></a>22.5.4. Localización a los idiomas japonés y
        coreano</h3></div></div></div><a id="idp77129552" class="indexterm"></a><a id="idp77130704" class="indexterm"></a><p>Para el japonés, diríjase a
        <code class="uri"><a class="uri" href="http://www.jp.FreeBSD.org/" target="_top">http://www.jp.FreeBSD.org/</a></code>,
	y para el coreano, acuda a
	<code class="uri"><a class="uri" href="http://www.kr.FreeBSD.org/" target="_top">http://www.kr.FreeBSD.org/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77133520"></a>22.5.5. Documentación sobre FreeBSD en otros idiomas aparte
        del inglés</h3></div></div></div><p>Algunos contribuidores de FreeBSD han traducido partes de
        FreeBSD a otros idiomas.  Están disponibles a
	través de enlaces en el <a class="link" href="http://www.freebsd.org/index.html" target="_top">
	sitio principal</a> o en	<code class="filename">/usr/share/doc
	</code>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cutting-edge"></a>Capítulo 23. Lo último de lo último</h2></div><div><span class="authorgroup">Restructured, reorganized, and parts updated by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Original work by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jordan</span> <span class="surname">Hubbard</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Poul-Henning</span> <span class="surname">Kamp</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">John</span> <span class="surname">Polstra</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Nik</span> <span class="surname">Clayton</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp77147472">23.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#current-stable">23.2. FreeBSD-CURRENT vs. FreeBSD-STABLE</a></span></dt><dt><span class="sect1"><a href="#synching">23.3. Sincronización de su código fuente</a></span></dt><dt><span class="sect1"><a href="#makeworld">23.4. Uso de <code class="command">make world</code></a></span></dt><dt><span class="sect1"><a href="#small-lans">23.5. Redes pequeñas</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp77147472"></a>23.1. Sinopsis</h2></div></div></div><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="current-stable"></a>23.2. FreeBSD-CURRENT vs. FreeBSD-STABLE</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="current"></a>23.2.1. Current</h3></div></div></div><p>Pendiente de Traducción</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="stable"></a>23.2.2. Stable</h3></div></div></div><p>Pendiente de Traducción</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="synching"></a>23.3. Sincronización de su código fuente</h2></div></div></div><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makeworld"></a>23.4. Uso de <code class="command">make world</code></h2></div></div></div><p>Pendiente de Traducción</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="small-lans"></a>23.5. Redes pequeñas</h2></div></div></div><p>Pendiente de Traducción</p></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-communication"></a>Parte IV. Comunicaciones en red</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>FreeBSD es uno de los sistemas operativos más
        utilizados como servidores en red de alto rendimiento.  Los
	siguientes capítulos cubren:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comunicaciones serie</p></li><li class="listitem"><p>PPP y PPP sobre Ethernet</p></li><li class="listitem"><p>Correo electrónico</p></li><li class="listitem"><p>Servidores de red</p></li><li class="listitem"><p>Otros aspectos avanzados de red</p></li></ul></div><p>Estos capítulos están diseñados para
        leerse según van haciendo falta.  No tienen por qué
	leerse en un determinado orden, ni tiene por qué leerlos
	todos antes de poder usar FreeBSD en un entorno de red.</p><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="chapter"><a href="#serialcomms">24. Comunicaciones serie</a></span></dt><dd><dl><dt><span class="sect1"><a href="#serial-synopsis">24.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#serial">24.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#term">24.3. Terminales</a></span></dt><dt><span class="sect1"><a href="#dialup">24.4. Servicio dial-in</a></span></dt><dt><span class="sect1"><a href="#dialout">24.5. Servicio dial-out</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">24.6. Configurando la consola serie</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ppp-and-slip">25. PPP y SLIP</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp78103248">25.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#userppp">25.2. Uso de User PPP</a></span></dt><dt><span class="sect1"><a href="#ppp">25.3. Uso de Kernel PPP</a></span></dt><dt><span class="sect1"><a href="#pppoe">25.4. Uso de <span class="application">PPP</span> sobre Ethernet (PPPoE)</a></span></dt><dt><span class="sect1"><a href="#pppoa">25.5. Uso de <span class="application">PPP</span> sobre ATM (PPPoA)</a></span></dt><dt><span class="sect1"><a href="#slip">25.6. Uso de SLIP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#firewalls">26. Cortafuegos</a></span></dt><dd><dl><dt><span class="sect1"><a href="#firewalls-intro">26.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">27. Correo Electrónico</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mail-synopsis">27.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#mail-using">27.2. Utilización del correo electrónico</a></span></dt><dt><span class="sect1"><a href="#sendmail">27.3. Configuración de <span class="application">sendmail</span></a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">27.4. Sustitución del Agente de Transferencia de Correo</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">27.5. Depuración de Problemas</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">27.6. Conceptos Avanzados</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">27.7. SMTP con UUCP</a></span></dt><dt><span class="sect1"><a href="#outgoing-only">27.8. Configuración para sólamente enviar correo</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">27.9. Utilización del correo con una conexión mediante módem analógico (dial-up)</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">27.10. Autentificación utilizando SMTP</a></span></dt><dt><span class="sect1"><a href="#mail-agents">27.11. Agente de Correo de Usuario</a></span></dt><dt><span class="sect1"><a href="#mail-fetchmail">27.12. Manejo de fetchmail</a></span></dt><dt><span class="sect1"><a href="#mail-procmail">27.13. Uso de procmail</a></span></dt></dl></dd><dt><span class="chapter"><a href="#network-servers">28. Servidores de red</a></span></dt><dd><dl><dt><span class="sect1"><a href="#network-servers-synopsis">28.1. *</a></span></dt></dl></dd><dt><span class="chapter"><a href="#advanced-networking">29. Networking avanzado</a></span></dt><dd><dl><dt><span class="sect1"><a href="#advanced-networking-synopsis">29.1. Resumen</a></span></dt><dt><span class="sect1"><a href="#network-routing">29.2. Pasarelas y <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#network-wireless">29.3. Redes sin cables (<span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>)</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">29.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">29.5. Puenteado</a></span></dt><dt><span class="sect1"><a href="#network-nfs">29.6. NFS</a></span></dt><dt><span class="sect1"><a href="#network-diskless">29.7. Ejecución sin disco duro</a></span></dt><dt><span class="sect1"><a href="#network-isdn">29.8. RDSI</a></span></dt><dt><span class="sect1"><a href="#network-nis">29.9. NIS/YP</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">29.10. DHCP</a></span></dt><dt><span class="sect1"><a href="#network-dns">29.11. DNS</a></span></dt><dt><span class="sect1"><a href="#network-ntp">29.12. NTP</a></span></dt><dt><span class="sect1"><a href="#network-natd">29.13. Traducción de direcciones de red</a></span></dt><dt><span class="sect1"><a href="#network-inetd">29.14. El <span class="quote">&#8220;<span class="quote">Superservidor</span>&#8221;</span> <span class="application">
      inetd</span></a></span></dt><dt><span class="sect1"><a href="#network-plip">29.15. Línea IP paralela (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">29.16. IPv6</a></span></dt><dt><span class="sect1"><a href="#network-atm">29.17. ATM en FreeBSD 5.X</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialcomms"></a>Capítulo 24. Comunicaciones serie</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#serial-synopsis">24.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#serial">24.2. Introducción</a></span></dt><dt><span class="sect1"><a href="#term">24.3. Terminales</a></span></dt><dt><span class="sect1"><a href="#dialup">24.4. Servicio dial-in</a></span></dt><dt><span class="sect1"><a href="#dialout">24.5. Servicio dial-out</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">24.6. Configurando la consola serie</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial-synopsis"></a>24.1. Sinopsis</h2></div></div></div><a id="idp77177040" class="indexterm"></a><p><span class="trademark">UNIX</span>® siempre ha tenido soporte para comunicación
      serie.  De hecho, las primeras máquinas <span class="trademark">UNIX</span>® dependían
      de líneas serie para tener interacción con el usuario. Las
      cosas han cambiado mucho desde esos días cuando la
      <span class="quote">&#8220;<span class="quote">terminal</span>&#8221;</span> promedio consistía de una terminal
      serie de 10-caracteres-por-segundo, impresora y teclado. Este
      capítulo cubrirá algunas de las maneras en las que
      FreeBSD utiliza comunicaciones serie.</p><p>Despues de leer este capítulo, usted entenderá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Como conectar terminales a su sistema
          FreeBSD.</p></li><li class="listitem"><p>Como utilizar un modem para marcar a
          equipos remotos.</p></li><li class="listitem"><p>Como permitir a usuarios remotos entrar
          a su sistema con un modem.</p></li><li class="listitem"><p>Como arrancar su sistema desde una
          consola serie.</p></li></ul></div><p>Antes de leer este capítulo usted debería:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Saber como configurar e instalar un nuevo kernel (<a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>).</p></li><li class="listitem"><p>Entender procesos y permisos <span class="trademark">UNIX</span>® (<a class="xref" href="#basics" title="Capítulo 3. Conceptos básicos de Unix">Capítulo 3, <em>Conceptos básicos de Unix</em></a>).</p></li><li class="listitem"><p>Tener acceso al manual técnico para el
         hardware serie (modem o tarjeta multipuerto) que le gustaría
         utilizar con FreeBSD.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial"></a>24.2. Introducción</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-terminology"></a>24.2.1. Terminología</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">bps</span></dt><dd><a id="idp77188816" class="indexterm"></a><p>Bits por segundo &#8212; la tasa a la cual los datos
	      son transmitidos</p></dd><dt><span class="term">DTE</span></dt><dd><a id="idp77190992" class="indexterm"></a><p>Data Terminal Equipment (Equipo terminal de datos) &#8212;
	      por ejemplo, su computadora</p></dd><dt><span class="term">DCE</span></dt><dd><a id="idp77193040" class="indexterm"></a><p>Data Communications Equipment (Equipo de
	      comunicación de datos) &#8212;  su modem</p></dd><dt><span class="term">RS-232</span></dt><dd><a id="idp77195088" class="indexterm"></a><p>Estándar EIA para hardware de comunicación
	      serie</p></dd></dl></div><p>Cuando se habla de tasa de comunicación de datos,
        ésta sección no usa el término
	<span class="quote">&#8220;<span class="quote">baud</span>&#8221;</span>. Baud se refiere al número de estados de
	transición eléctricos que pueden realizarse en un
	periodo de tiempo, mientras que <span class="quote">&#8220;<span class="quote">bps</span>&#8221;</span> (bits por segundo)
	es el término <span class="emphasis"><em>correcto</em></span> a usar (al menos
	parece no molestar demasiado a los más aferrados).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-cables-ports"></a>24.2.2. Cables y puertos</h3></div></div></div><p>Para conectar un modem o terminal a su sistema FreeBSD
        necesitará un puerto serie en su computadora y el cable
	apropiado para conectar a su dispositivo serie. Si ya está
	familiarizado con su hardware y el cable que requiere, puede
	saltarse esta sección.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables"></a>24.2.2.1. Cables</h4></div></div></div><p>Existen diferentes tipos de cables serie. Los dos tipos
          más comunes para nuestros propósitos son cables
          null-modem y cables RS-232 estándar (<span class="quote">&#8220;<span class="quote">normal</span>&#8221;</span>).
          La documentación de su hardware debería describir
          el tipo de cable requerido.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-null"></a>24.2.2.1.1. Cables null-modem</h5></div></div></div><a id="idp77201744" class="indexterm"></a><p>Un cable null-modem pasa algunas señales, como
	    <span class="quote">&#8220;<span class="quote">tierra</span>&#8221;</span>, normalmente, pero cambia otras
	    señales. Por ejemplo, el pin <span class="quote">&#8220;<span class="quote">envío de
	    datos</span>&#8221;</span> en un extremo va al pin <span class="quote">&#8220;<span class="quote">recepción de
	    datos</span>&#8221;</span> en el otro.</p><p>Si le gusta fabricar sus propios cables, puede construir
            un cable null-modem
            para utilizar con terminales. Esta tabla muestra los nombres
            de señal y números de pin en un conector DB-25.
	    </p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Señal</th><th>Pin #</th><th> </th><th>Pin #</th><th>Señal</th></tr></thead><tbody><tr><td>SG</td><td>7</td><td>conecta a</td><td>7</td><td>SG</td></tr><tr><td>TD</td><td>2</td><td>conecta a</td><td>3</td><td>RD</td></tr><tr><td>RD</td><td>3</td><td>conecta to</td><td>2</td><td>TD</td></tr><tr><td>RTS</td><td>4</td><td>conecta a</td><td>5</td><td>CTS</td></tr><tr><td>CTS</td><td>5</td><td>conecta a</td><td>4</td><td>RTS</td></tr><tr><td>DTR</td><td>20</td><td>conecta a</td><td>6</td><td>DSR</td></tr><tr><td>DCD</td><td>8</td><td> </td><td>6</td><td>DSR</td></tr><tr><td>DSR</td><td>6</td><td>conecta a</td><td>20</td><td>DTR</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Conectar <span class="quote">&#8220;<span class="quote">Data Set Ready</span>&#8221;</span> (DSR) y
              <span class="quote">&#8220;<span class="quote">Data Carrier Detect</span>&#8221;</span> (DCD) intérnamente
              en la capucha del conector, y entonces a <span class="quote">&#8220;<span class="quote">Data
              Terminal Ready</span>&#8221;</span> (DTR) en la capucha remota.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-std"></a>24.2.2.1.2. Cables estándard RS-232C</h5></div></div></div><a id="idp77266896" class="indexterm"></a><p>Un cable serie estándar pasa todas las señales
            RS-232C normalmente. Esto es, el pin <span class="quote">&#8220;<span class="quote">envío de
	    datos</span>&#8221;</span> en un extremo va al pin <span class="quote">&#8220;<span class="quote">envío de
	    datos</span>&#8221;</span> en el otro extremo. Este es el tipo de cable a
	    utilizar para conectar un modem a su sistema FreeBSD, y
	    también es apropiado para algunas terminales.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-ports"></a>24.2.2.2. Puertos</h4></div></div></div><p>Puertos serie son los dispositivos a través de los
          cuales los datos son transferidos entre una computadora FreeBSD
          y la terminal. Esta sección describe los tipos de puertos
          que existen y como son referidos en FreeBSD.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-portkinds"></a>24.2.2.2.1. Tipos de puertos</h5></div></div></div><p>Existen varios tipos de puertos serie. antes de comprar o
            construir un cable, necesita asegurarse que coincida con los
            puertos en su terminal y en su sistema FreeBSD.</p><p>La mayoría de las terminales tienen puertos DB25.
            Computadoras personales, incluyendo PCs corriendo FreeBSD,
            tienen puertos DB25 o DB9. Si tiene una tarjeta multipuertos
            serie para su PC, tal vez tenga puertos RJ-12 o RJ-45.</p><p>Vea la documentación que acompaña su hardware
	    para las especificaciones sobre el tipo de puerto en uso. Una
            inspección visual del puerto también funciona en
            la mayoría de los casos.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-portnames"></a>24.2.2.2.2. Nombres de puerto</h5></div></div></div><p>En FreeBSD, se accesa cada puerto serie a través de
            una entrada en el directorio <code class="filename">/dev</code>. Existen
            dos tipos de entradas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Puertos de llamada-entrante
                son llamados <code class="filename">/dev/ttydN</code>
                donde <em class="replaceable"><code>N</code></em> es el número de
		puerto, iniciando desde cero. Generalmente, los puertos de
                llamada-entrante se utilizan para terminales. Los puertos
                de llamada-entrante requieren que la línea
		serie especifique la señal data carrier detect (DCD)
		para funcionar correctamente.</p></li><li class="listitem"><p>Puertos de llamada-saliente
                son llamados <code class="filename">/dev/cuaaN</code>.
                Usualmente no se utilizan los puertos de llamada-saliente
                para terminales, solo para modems. Puede utilizar el puerto
                de llamada-saliente si el cable serie o la terminal no
                soporta la señal de carrier detect.</p></li></ul></div><p>Si tiene conectada una terminal al primer puerto serie
            (<code class="filename">COM1</code> en <span class="trademark">MS-DOS</span>®), entonces usará
            <code class="filename">/dev/ttyd0</code> para referirse a la terminal. Si
            la terminal está en el segundo puerto serie (también
            conocido como <code class="filename">COM2</code>), utilice
            <code class="filename">/dev/ttyd1</code>, y así sucesivamente.
	    </p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77279696"></a>24.2.3. Configuración del kernel</h3></div></div></div><p>FreeBSD soporta cuatro puertos serie por omisión.
        en el mundo <span class="trademark">MS-DOS</span>® éstos son conocidos como
        <code class="filename">COM1</code>,
        <code class="filename">COM2</code>,
        <code class="filename">COM3</code>, y
        <code class="filename">COM4</code>. FreeBSD actualmente soporta
        tarjetas de interfaz serie <span class="quote">&#8220;<span class="quote">tontas</span>&#8221;</span>, como la
        BocaBoard 1008 y 2016, así como tarjetas multipuerto
        más inteligentes como las fabricadas por Digiboard
        y Stallion Technologies. De cualquier manera, el kernel por
        omisión solo busca por los puertos COM estándares.
	</p><p>Para ver si su kernel reconoce cualquiera de sus puertos serie,
        mire los mensajes mientras el kernel esta arrancando, o utilice el
        comando <code class="command">/sbin/dmesg</code> para repetir los mensajes de
        arranque del kernel. En particular busque por mensajes que inicien
        con el caracter <code class="literal">sio</code>.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para ver solamente los mensajes que contienen
        la palabra <code class="literal">sio</code>, use el comando:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dmesg | grep 'sio'</code></strong></pre></div><p>Por ejemplo, en un sistema con cuatro puertos serie, éstos
        son los mensajes de arranque del kernel específicos de puerto
        serie:</p><pre class="screen">sio0 at 0x3f8-0x3ff irq 4 on isa
sio0: type 16550A
sio1 at 0x2f8-0x2ff irq 3 on isa
sio1: type 16550A
sio2 at 0x3e8-0x3ef irq 5 on isa
sio2: type 16550A
sio3 at 0x2e8-0x2ef irq 9 on isa
sio3: type 16550A</pre><p>Si su kernel no reconoce todos sus puertos serie,
        probablemente necesitará configurar un kernel
        FreeBSD personalizado para su sistema. Para información
        detallada sobre configurar su kernel, por favor vea <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><p>Las líneas de dispositivo relevantes para su fichero
        de configuración del kernel podrín verse de esta
        manera, para FreeBSD 4.X:</p><pre class="programlisting">device		sio0	at isa? port IO_COM1 irq 4
device		sio1	at isa? port IO_COM2 irq 3
device		sio2	at isa? port IO_COM3 irq 5
device		sio3	at isa? port IO_COM4 irq 9</pre><p>y de esta manera, para FreeBSD 5.X:</p><pre class="programlisting">device		sio</pre><p>Puede comentar o remover completamente líneas de
        dispositivos que no tenga en el caso de FreeBSD 4.X;
        para FreeBSD 5.X tiene que editar su fichero
        <code class="filename">/boot/device.hints</code> para configurar
        sus puertos serie. Por favor diríjase a la página
        de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> para mayor información sobre
        puertos serie y configuración de tarjetas multipuertos.
        Tenga cuidado si está utilizando un fichero de
	configuración que fué usado anteriomente para una
	versión diferente de FreeBSD porque las banderas de
	dispositivo y la sintaxis han cambiado entre versiones.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">port IO_COM1</code> es una substitución para
	  <code class="literal">port 0x3f8</code>, <code class="literal">IO_COM2</code> es
	  <code class="literal">0x2f8</code>, <code class="literal">IO_COM3</code> es
	  <code class="literal">0x3e8</code>, y <code class="literal">IO_COM4</code> es
	  <code class="literal">0x2e8</code>, las cuales son direcciones de puerto
	  comunes para sus respectivos puertos serie; interrupciones 4,3,5 y
	  9 son peticiones comunes de líneas de interrupción.
	  Note también que puertos serie regulares
	  <span class="emphasis"><em>no pueden</em></span> compartir interrupciones en PCs con
	  bus ISA (las tarjetas multipuerto tienen electrónicos que
	  les permiten a los 16550A's compartir una o dos líneas de
	  peticiones de interrupción).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77299408"></a>24.2.4. Archivos especiales de dispositivo</h3></div></div></div><p>La mayoría de dispositivos en el kernel son accesados
        a través de <span class="quote">&#8220;<span class="quote">ficheros especiales de dispositivo</span>&#8221;</span>,
        los cuales están localizados en el directorio
	<code class="filename">/dev</code>.  Los dispositivos
	<code class="filename">sio</code> son accesados a través de los
	dispositivos
	<code class="filename">/dev/ttydN</code> (dial-in)
        y <code class="filename">/dev/cuaaN</code>
        (call-out). FreeBSD provee también dispositivos de
	inicialización
        (<code class="filename">/dev/ttyidN</code> y
        <code class="filename">/dev/cuaiaN</code>) y
        dispositivos de bloqueo
        (<code class="filename">/dev/ttyldN</code> y
        <code class="filename">/dev/cualaN</code>).
        Los dispotivos de inicialización son utilizados para
        inicializar los parámetros de comunicación de puerto
        cada vez que un puerto es abierto, como
        <code class="literal">crtscts</code> para modems que utilizan
        señalización <code class="literal">RTS/CTS</code> para
        control de flujo. Los dispositivos de bloqueo son utilizados
        para bloquear banderas en puertos y prevenir que usuarios o
        programas cambien ciertos parámetros; vea las páginas
        de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termios&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">termios</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>, y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> para
        información de las propiedades de terminales, bloqueo
        e inicialización de dispositivos y aplicación de
        opciones de terminal, respectivamente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77311312"></a>24.2.4.1. Creando ficheros de dispositivo especiales</h4></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD 5.0 incluye el sistema de
          ficheros <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> el cual crea automáticamente
          nodos de dispositivos según se necesiten.
          si está corriendo una versión de FreeBSD
          con <code class="literal">devfs</code> habilitado entonces puede
          saltarse esta sección.</p></div><p>Un script de shell llamado <code class="command">MAKEDEV</code>
          en el directorio <code class="filename">/dev</code> administra los
          ficheros especiales de dispositivo. Para utilizar
	  <code class="command">MAKEDEV</code> para crear un fichero especial de
	  dispositivo dial-up para <code class="filename">COM1</code> (port 0),
          <code class="command">cd</code> a <code class="filename">/dev</code> y ejecute
          el comando <code class="command">MAKEDEV ttyd0</code>. De la misma
          manera, para crear ficheros especiales de dispositivo para
          <code class="filename">COM2</code> (port 1), utilice
          <code class="command">MAKEDEV ttyd1</code>.</p><p><code class="command">MAKEDEV</code> no crea solamente el
          fichero especial de dispositivo
          <code class="filename">/dev/ttydN</code>
          también crea los nodos
          <code class="filename">/dev/cuaaN</code>,
          <code class="filename">/dev/cuaiaN</code>,
          <code class="filename">/dev/cualaN</code>,
          <code class="filename">/dev/ttyldN</code>,
          y
          <code class="filename">/dev/ttyidN</code>.</p><p>Despues de crear ficheros especiales de dispositivo nuevos,
          asegúrese de revisar los permisos en los ficheros
          (especialmente los ficheros <code class="filename">/dev/cua*</code>)
          para asegurarse que solamente los usuarios que deben tener
          acceso a esos ficheros especiales de dispositivo puedan leer
          y escribir en ellos &#8212; probablemente no desee permitir
          al usuario promedio utilizar sus modems para marcar al exterior.
          Los permisos por omisión en los ficheros
          <code class="filename">/dev/cua*</code> deberían ser suficientes:
	  </p><pre class="screen">crw-rw----    1 uucp     dialer    28, 129 Feb 15 14:38 /dev/cuaa1
crw-rw----    1 uucp     dialer    28, 161 Feb 15 14:38 /dev/cuaia1
crw-rw----    1 uucp     dialer    28, 193 Feb 15 14:38 /dev/cuala1</pre><p>Estos permisos permiten al usuario <code class="systemitem">uucp</code> y
          usuarios en el grupo <code class="systemitem">dialer</code> utilizar
	  dispositivos call-out.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-hw-config"></a>24.2.5. Configuración de puerto serie</h3></div></div></div><a id="idp77324880" class="indexterm"></a><a id="idp77325520" class="indexterm"></a><p>El dispositivo <code class="filename">ttydN</code>
      (o <code class="filename">cuaaN</code>) es el
      dispositivo regular que usted deseará abrir para sus
      aplicaciones. Cuando un proceso abre el dispositivo, tendrá un
      conjunto por omisión de propiedades de terminal E/S. Puede ver
      estas propiedades con el comando</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -a -f /dev/ttyd1</code></strong></pre><p>Cuando cambia las propiedades de este dispositivo, las propiedades
      son efectivas hasta que el dispositivo es cerrado. Cuando es reabierto
      regresa a las propiedades por omisión. Para realizar cambios
      al conjunto por omisión, usted puede abrir y ajustar las
      propiedades del dispositivo de <span class="quote">&#8220;<span class="quote">estado inicial</span>&#8221;</span> . Por
      ejemplo, para activar el modo <code class="option">CLOCAL</code>,
      comunicación de 8 bits y control de flujo
      <code class="option">XON/XOFF</code> por omisión para
      <code class="filename">ttyd5</code>, teclée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyid5 clocal cs8 ixon ixoff</code></strong></pre><a id="idp77331152" class="indexterm"></a><p>La inicialización para todo el sistema de los
      dispositivos serie es controlada en <code class="filename">/etc/rc.serial</code>.
      Este fichero afecta las propiedades por omisión de
      dispositivos serie.</p><p>Para prevenir que ciertas propiedades sean cambiadas
      por una aplicación, haga ajustes al dispositivo
      <span class="quote">&#8220;<span class="quote">bloquear estado</span>&#8221;</span>. Por ejemplo, para confinar
      la velocidad en <code class="filename">ttyd5</code> a 57600 bps,
      teclée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>stty -f /dev/ttyld5 57600</code></strong></pre><p>Ahora, una aplicación que abra
      <code class="filename">ttyd5</code> y trate de cambiar la velocidad
      del puerto se mantendrá con 57600 bps.</p><a id="idp77344592" class="indexterm"></a><p>Naturalmente, debería crear los dispositivos de  estado
      inicial y bloqueo de estado escribible únicamente para la
      cuenta <code class="systemitem">root</code> .</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="term"></a>24.3. Terminales</h2></div><div><span class="authorgroup">Contribuido por<span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div></div></div><a id="idp77361872" class="indexterm"></a><p>Las terminales proveen una manera conveniente y de bajo coste
      de accesar su sistema FreeBSD cuando no se encuentra en la
      consola de la computadora o en una red conectada. Esta
      sección describe como utilizar terminales con FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-uses"></a>24.3.1. Usos y tipos de terminales</h3></div></div></div><p>Los sistemas originales <span class="trademark">UNIX</span>® no tenín consolas.
        En su lugar la gente se firmaba y corría programas a
	través de terminales conectadas a los puertos serie de la
	computadora. Es bastante similar a usar un modem y un programa de
	terminal para marcar hacia un sistema remoto para hacer trabajo en
	modo texto.</p><p>Las PCs actuales tienen consolas con gráficos de
        alta calidad, pero la habilidad para establecer una sesión en
	un puerto serie todavía existe en casi cualquier sistema
	operativo <span class="trademark">UNIX</span>® al día de hoy; FreeBSD no es la
	excepción.  Utilizando una terminal conectada a un puerto
	serie libre, usted puede accesar y correr cualquier programa de
	texto que podría correr normalmente en la consola o
	en una ventana <code class="command">xterm</code> en el sistema X Window.</p><p>Para el usuario corporativo, se pueden conectar muchas terminales
        a un sistema FreeBSD y ponerlas en los escritorios de sus empleados.
        Para un usuario casero, una computadora de reserva, como una IBM PC
        más antigua o una <span class="trademark">Macintosh</span>®, puede ser una terminal cableada
        a una computadora más poderosa corriendo FreeBSD. Puede
	convertir lo que de otra manera sería una computadora de un
	solo usuario en un poderoso sistema de usuarios múltiples.
	</p><p>Para FreeBSD, existen tres clases de terminales:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="#term-dumb" title="24.3.1.1. Terminales tontas">Terminales tontas</a></p></li><li class="listitem"><p><a class="link" href="#term-pcs" title="24.3.1.2. PCs actuando como terminales">PCs actuando como terminales</a></p></li><li class="listitem"><p><a class="link" href="#term-x" title="24.3.1.3. Terminales X">Terminales X</a></p></li></ul></div><p>Las subsecciones siguientes describen cada tipo.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-dumb"></a>24.3.1.1. Terminales tontas</h4></div></div></div><p>Terminales tontas son piezas de hardware especializadas que
          le permiten conectar a computadoras a través de líneas
          serie. Son llamadas <span class="quote">&#8220;<span class="quote">tontas</span>&#8221;</span> porque solo tienen
          poder computacional suficiente para desplegar, enviar y recibir
          texto. No puede ejecutar ningún programa en ellas. Es la
          computadora a la cual se conectan la que tiene todo el poder para
          correr editores de texto, compiladores, correo electrónico,
          juegos, y demás.</p><p>Existen cientos de tipos de terminales tontas hechas por
          muchos fabricantes, incluyendo VT-100 de Digital Equipment
          Corporation y WY-75 de Wyse. Cualquier tipo funcionará con
          FreeBSD. Algunas terminales superiores pueden incluso desplegar
          gráficos, pero solo ciertos paquetes de software pueden
          tomar ventaja de estas funciones avanzadas.</p><p>Las terminales tontas son populares en ambientes de trabajo
          donde los trabajadores no necesitan acceso a aplicaciones
	  gráficas como las que provee el sistema X Window.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-pcs"></a>24.3.1.2. PCs actuando como terminales</h4></div></div></div><p>Si una <a class="link" href="#term-dumb" title="24.3.1.1. Terminales tontas">terminal tonta</a> tiene
          apenas la habilidad para desplegar, enviar y recibir texto, entonces
          ciertamente cualquier computadora personal de reserva puede ser una
          terminal tonta. Todo lo que necesita es el cable apropiado y
	  algún software de <span class="emphasis"><em>emulación de
	  terminal</em></span> para correr en la computadora.</p><p>Tal configuración es popular en hogares. Por ejemplo, si
          su consorte se encuentra ocupado trabajando en la consola de
	  su sistema FreeBSD, usted puede realizar algún trabajo en
	  modo texto al mismo tiempo desde una computadora personal menos
	  poderosa conectada como una terminal al sistema FreeBSD.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-x"></a>24.3.1.3. Terminales X</h4></div></div></div><p>Las terminales X son el tipo más sofisticado de
          terminal disponible. En lugar de conectar a un puerto serie,
          usualmente se conectan a una red como Ethernet. En lugar de
          ser relegadas a aplicaciones de modo texto pueden desplegar
          aplicaciones X.</p><p>Hemos introducido terminales X solo por complementar. Sin
          embargo, este capítulo <span class="emphasis"><em>no</em></span> cubre
          instalación, configuración o uso de terminales
          X.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-config"></a>24.3.2. Configuración</h3></div></div></div><p>Esta sección describe lo que necesita para configurar en
        su sistema FreeBSD y permitirle habilitar sesiones de entrada en una
        terminal. Asume que ya tiene configurado su kernel para soportar el
        puerto serie al cual la terminal está conectada&#8212;y
        que la tiene conectada.</p><p>Recuerde del <a class="xref" href="#boot" title="Capítulo 12. El proceso de arranque en FreeBSD">Capítulo 12, <em>El proceso de arranque en FreeBSD</em></a> que
        el proceso <code class="command">init</code> es responsable del control
        e inicialización de todos los procesos al inicio del
        sistema. Una de las tareas ejecutadas por
        <code class="command">init</code> es leer el
        fichero <code class="filename">/etc/ttys</code> e iniciar un proceso
        <code class="command">getty</code> en las terminales disponibles.
        El proceso <code class="command">getty</code> es responsable de leer
        un nombre de entrada e iniciar el programa  <code class="command">login</code> .</p><p>Así, para configurar terminales para su sistema
        FreeBSD los siguientes pasos deben hacerse como <code class="systemitem">root</code>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Agregue una línea a <code class="filename">/etc/ttys</code> para
            la entrada en el directorio <code class="filename">/dev</code> para el
	    puerto serie si todavía no se encuentra ahí.</p></li><li class="step"><p>Especifique que <code class="command">/usr/libexec/getty</code> sea
            ejecutado en el puerto, y especifique el tipo apropiado de
            <em class="replaceable"><code>getty</code></em> desde el fichero
            <code class="filename">/etc/gettytab</code> .</p></li><li class="step"><p>Especifique el tipo de terminal por omisión.</p></li><li class="step"><p>Ponga el puerto a <span class="quote">&#8220;<span class="quote">on.</span>&#8221;</span></p></li><li class="step"><p>Especifique si el puerto debe ser o no
	    <span class="quote">&#8220;<span class="quote">seguro.</span>&#8221;</span></p></li><li class="step"><p>Obligue a  <code class="command">init</code> a releer el fichero
	    <code class="filename">/etc/ttys</code> .</p></li></ol></div><p>Como un paso opcional, tal vez desee crear un tipo
        <em class="replaceable"><code>getty</code></em> personalizado para utilizar en el
        paso 2 mediante una entrada en  <code class="filename">/etc/gettytab</code>.
        Este capítulo no explica como realizarlo; por lo que se le
        exhorta a leer las páginas de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a> y
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> para mayor información.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-etcttys"></a>24.3.2.1. Agregando una entrada a <code class="filename">/etc/ttys</code></h4></div></div></div><p>El fichero <code class="filename">/etc/ttys</code> lista todos los
          puertos en su sistema FreeBSD donde quiere permitir logins. Por
          ejemplo, la primera consola virtual <code class="filename">ttyv0</code> tiene
          una entrada en este fichero. Puede firmarse en la consola utilizando
          esta entrada. Este fichero también contiene entradas para las
          otras consolas virtuales, puertos serie y pseudo-ttys. Para una
          terminal conectada por cable, solo liste la entrada <code class="filename">/dev</code>
          del puerto serie sin la parte de <code class="filename">/dev</code> (por ejemplo,
          <code class="filename">/dev/ttyv0</code> debería estar listado como
          <code class="filename">ttyv0</code>).</p><p>Una instalación por omisión de FreeBSD
          incluye un fichero <code class="filename">/etc/ttys</code> con soporte
          para los primeros cuatro puertos serie: <code class="filename">ttyd0</code>
          hasta <code class="filename">ttyd3</code>. Si está conectando una
          terminal a uno de esos puertos, no necesita agregar otra entrada.</p><div class="example"><a id="ex-etc-ttys"></a><div class="example-title">Ejemplo 24.1. Agregando entradas de terminal a
	    <code class="filename">/etc/ttys</code></div><div class="example-contents"><p>Suponga que quisiéramos conectar dos terminales
            al sistema: una Wyse-50 y una vieja IBM PC 286 corriendo
            el software de terminal <span class="application">Procomm</span>
            emulando una terminal VT-100. Conectamos la Wyse al segundo
            puerto serie y la 286 al sexto puerto serie (un puerto
            en una tarjeta multipuerto serie). Las entradas correspondiente
            en el fichero <code class="filename">/etc/ttys</code> se verían
            como esto:</p><pre class="programlisting">ttyd1<a id="co-ttys-line1col1"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>  "/usr/libexec/getty std.38400"<a id="co-ttys-line1col2"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>  wy50<a id="co-ttys-line1col3"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>  on<a id="co-ttys-line1col4"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>  insecure<a id="co-ttys-line1col5"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ttyd5   "/usr/libexec/getty std.19200"  vt100  on  insecure
	  </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col1"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El primer campo normalmente especifica el nombre
                de fichero especial de la terminal como es hallado
                en <code class="filename">/dev</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col2"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El segundo campo es el comando a ejecutar por
                esta línea, el cual es usualmente <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>.
                <code class="command">getty</code> inicializa y abre la línea,
                establece la velocidad, pregunta por un nombre de usuario
                y entonces ejecuta el programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">login</span>(1)</span></a> .</p><p>El programa <code class="command">getty</code> acepta un
                parámetro (opcional) en su línea de
                comando, el tipo <em class="replaceable"><code>getty</code></em>. Un
                tipo <em class="replaceable"><code>getty</code></em> configura características
                en la línea de terminal, como tasa de bps y
                paridad. El programa <code class="command">getty</code> lee
                estas características desde el fichero
                <code class="filename">/etc/gettytab</code>.</p><p>El fichero <code class="filename">/etc/gettytab</code>
                contiene muchas entradas para líneas de terminal
                viejas y nuevas. En la mayoría de los casos, las
                entradas que empiezan con el texto <code class="literal">std</code>
                funcionarán para terminales conectadas físicamente.
                Estas entradas ignoran la paridad.
                Existe una entrada <code class="literal">std</code> por cada
                tasa de bps de 110 a 115200. Por supuesto puede agregar
                sus propias entradas a este fichero. La página de
                manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a> provee mayor información.</p><p>Al establecer el tipo <em class="replaceable"><code>getty</code></em>
                en el fichero <code class="filename">/etc/ttys</code>, asegúrese
                que las propiedades de comunicaciones en la terminal
                concuerden.</p><p>Para nuestro ejemplo, la Wyse-50 no usa paridad
                y conecta a 38400 bps. La 286 PC no usa paridad y
                conecta a 19200 bps.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col3"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El tercer campo es el tipo de terminal usualmente
                conectado a esa línea tty. Para puertos dial-up,
                <code class="literal">unknown</code> o
                <code class="literal">dialup</code> son usados típicamente
                en este campo puesto que los usuarios pueden marcar
                prácticamente con cualquier tipo de terminal o
                de software. Para terminales conectadas físicamente,
                el tipo de terminal no cambia, así que puede
                poner un tipo de terminal real del fichero de base
                de datos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a> en este campo.</p><p>Para nuestro ejemplo, la Wyse-50 utiliza el
                tipo de terminal real mientras que la PC 286
                corriendo <span class="application">Procomm</span> será
                puesta a emular una VT-100. </p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col4"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El cuarto campo especifica si el puerto debe
                habilitarse. Poniendo <code class="literal">on</code> aquí
                provocará que el proceso <code class="command">init</code> inicie
                el programa en el segundo campo, <code class="command">getty</code>.
                Si pone <code class="literal">off</code> en este campo, no habrá
                <code class="command">getty</code>, y por consecuencia ningun login
                en el puerto.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ttys-line1col5"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El último campo es utilizado para especificar
                si el puerto es seguro. Marcar un puerto como seguro
                significa que se confía en él lo suficiente
                para permitir que la cuenta <code class="systemitem">root</code>
                (o cualquier cuenta con un ID de usuario 0) se firme
                desde ese puerto. Los puertos inseguros no permiten
                entradas de <code class="systemitem">root</code>.
                En un puerto inseguro, los usuarios deben firmarse desde
                cuentas sin privilegios y entonces utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
                o un mecanismo similar para acceder a privilegios de
                superusuario.</p><p>Es altamente recomendable que utilize
                <span class="quote">&#8220;<span class="quote">insecure</span>&#8221;</span> incluso para terminales
                que se encuentran detrás de puertas con
                llave. Es muy sencillo entrar y usar <code class="command">su</code> si
                necesita privilegios de superusuario.</p></td></tr></table></div></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-hup"></a>24.3.2.2. Forzar <code class="command">init</code> a que relea
	  <code class="filename">/etc/ttys</code></h4></div></div></div><p>Despues de realizar los cambios necesarios al fichero
          <code class="filename">/etc/ttys</code> debería
          mandar una señal SIGHUP (hangup) al proceso <code class="command">init</code>
          para forzarlo a releer su fichero de configuración.
          Por ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">init</code> siempre es el primer proceso
            que corre en un sistema, por lo tanto siempre tendrá
            el PID 1.</p></div><p>Si todo está puesto correctamente, todos los cables
          en su lugar, y las terminales están encendidas,
          entonces un proceso <code class="command">getty</code> debe estar
          corriendo en cada terminal y debería ver prompts
          de entrada en sus terminales en este punto.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-debug"></a>24.3.3. Determinando errores en su conexión</h3></div></div></div><p>Incluso con la más meticulosa etención al detalle, algo
        puede salir mal mientras se configura una terminal. Esta es una lista de
        síntomas y algunos arreglos sugeridos.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77534672"></a>24.3.3.1. No aparece prompt de login</h4></div></div></div><p>Asegúrese que la terminal está conectada y
          encendida, asegúrese que se encuentra ejecutando un
          software de emulación de terminal en el puerto serie
          correcto.</p><p>Asegúrese que el cable está conectado firmemente
          tanto a la terminal como a la computadora FreeBSD. Asegúrese
          que es el tipo correcto de cable.</p><p>Asegúrese que la terminal y FreeBSD concuerdan en la tasa
          de bps y propiedades de paridad. Si tiene una terminal de desplegado
          de video, asegúrese que los controles de contraste y brillo
          estén encendidos. Si es una terminal de impresión, asegúrese
          que papel y tinta se encuentren en forma.</p><p>Asegúrese que un proceso <code class="command">getty</code> esté
          corriendo y sirviendo la terminal. Por ejemplo, para obtener una lista
          de procesos <code class="command">getty</code> con
          <code class="command">ps</code>, teclée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ps -axww|grep getty</code></strong></pre><p>Debería ver una entrada para la terminal.
          Por ejemplo, el siguiente desplegado muestra que un
          <code class="command">getty</code> está corriendo en el
          segundo puerto serie <code class="literal">ttyd1</code> y está
          utilizando la entrada
          <code class="literal">std.38400</code> en
          <code class="filename">/etc/gettytab</code>:</p><pre class="screen">22189  d1  Is+    0:00.03 /usr/libexec/getty std.38400 ttyd1</pre><p>Si no hay un proceso <code class="command">getty</code> corriendo,
          asegúrese que tiene habilitado el puerto en
          <code class="filename">/etc/ttys</code>.
          Recuerde también ejecutar <code class="command">kill -HUP 1</code>
          despues de modificar el fichero <code class="filename">ttys</code>.</p><p>Si el proceso <code class="command">getty</code> está corriendo
          pero la terminal todavía no despliega un prompt de
          login, o si despliega un prompt pero no le permite escribir,
          su terminal o cable tal vez no soporte inicialización
          por hardware. Trate cambiar la entrada en
          <code class="filename">/etc/ttys</code> de
          <code class="literal">std.38400</code> a
          <code class="literal">3wire.38400</code> recuerde correr
          <code class="command">kill -HUP 1</code> despues de modificar
          <code class="filename">/etc/ttys</code>. La entrada
          <code class="literal">3wire</code> es similar a
          <code class="literal">std</code>, pero ignora la inicialización
          por harware. Tal vez necesite reducir la tasa de baudios
          o habilitar control de flujo por software cuando utilice
          <code class="literal">3wire</code> para prevenir desbordamientos
          de buffer.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77551440"></a>24.3.3.2. Si aparece basura en lugar de un prompt de login</h4></div></div></div><p>Asegúrese que la terminal y FreeBSD concuerdan en la
          tasa de bps y propiedades de paridad. Revise los procesos
          <code class="command">getty</code> para asegurarse que el tipo correcto
          de <em class="replaceable"><code>getty</code></em> está en uso. Si no
          es así, edite <code class="filename">/etc/ttys</code> y ejecute
          <code class="command">kill -HUP 1</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77554128"></a>24.3.3.3. Los caracteres aparecen doble; las contraseñas aparecen cuando se escriben</h4></div></div></div><p>Cambie la terminal (o el software de emulación de
          terminal) de <span class="quote">&#8220;<span class="quote">half duplex</span>&#8221;</span> o <span class="quote">&#8220;<span class="quote">local echo</span>&#8221;</span> a
          <span class="quote">&#8220;<span class="quote">full duplex.</span>&#8221;</span></p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>24.4. Servicio dial-in</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span>. </span></div><div><span class="authorgroup">Adiciones por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div></div></div><a id="idp77560784" class="indexterm"></a><p>Configurar su sistema FreeBSD para servicio dial-in es muy
      similar a conectar terminales excepto que en lugar de lidiar con
      terminales se hace con modems.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77561680"></a>24.4.1. Modems externos vs. internos</h3></div></div></div><p>Los modems externos parecen ser más convenientes para
          dial-up, debido a que los modems externos con frecuencia pueden
          ser configurados semi permanentemente vía parámetros
          almacenados en RAM no volatil y usualmente proveen indicadores
          luminosos que despliegan el estado de señales importantes RS-232.
          Luces parpadeantes impresionan a los visitantes, pero las luces son
          también útiles para ver si un modem se encuentra
          operando adecuádamente.</p><p>Los modems internos usualmente carecen de RAM no volatil,
          entonces su configuración puede estar limitada a
          especificar DIP switches. Si su modem interno cuenta con
          algún indicador luminoso de señales, es probablemente
          dificil observar las luces cuando el sistema está cubierto
          y en su lugar.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77563088"></a>24.4.1.1. Modems y cables</h4></div></div></div><a id="idp77563728" class="indexterm"></a><p>Si se encuentra utilizando un modem externo, entonces
          necesitará por supuesto un cable adecuado. Un cable
          serie estándar RS-232C debe ser suficiente mientras
          todas las señales normales sean cableadas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Transmitted Data (<acronym class="acronym">TD</acronym>)</p></li><li class="listitem"><p>Received Data (<acronym class="acronym">RD</acronym>)</p></li><li class="listitem"><p>Request to Send (<acronym class="acronym">RTS</acronym>)</p></li><li class="listitem"><p>Clear to Send (<acronym class="acronym">CTS</acronym>)</p></li><li class="listitem"><p>Data Set Ready (<acronym class="acronym">DSR</acronym>)</p></li><li class="listitem"><p>Data Terminal Ready (<acronym class="acronym">DTR</acronym>)</p></li><li class="listitem"><p>Carrier Detect (<acronym class="acronym">CD</acronym>)</p></li><li class="listitem"><p>Signal Ground (<acronym class="acronym">SG</acronym>)</p></li></ul></div><p>FreeBSD necesita las señales <acronym class="acronym">RTS</acronym> y
          <acronym class="acronym">CTS</acronym> para control de flujo a velocidades
          mayores a 2400 bps, la señal <acronym class="acronym">CD</acronym> para
          detectar cuando una llamada ha sido respondida o la línea ha
          sido colgada, y la señal <acronym class="acronym">DTR</acronym> para reiniciar el
          modem despues de completar una sesión.
          Algunos cables son hechos sin incluir todas las señales necesarias,
          así que si tiene problemas, como cuando una sesión no
          finaliza cuando la línea es colgada, tal vez el problema se
          deba al cable.</p><p>Como otros sistemas operativos tipo <span class="trademark">UNIX</span>®, FreeBSD utiliza
          las señales de hardware para saber cuando una llamada ha sido
          contestada o una línea ha sido colgada y poder colgar
          y reiniciar el modem despues de una llamada. FreeBSD evita
          enviar comandos al modem o esperar por reportes de estado del
          modem. Si está familiarizado con la conexión de
          modems una PC funcionando como BBS, tal ves esto parezca extraño.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77585744"></a>24.4.2. Consideraciones de interfaces serie</h3></div></div></div><p>FreeBSD soporta interfaces de comunicación  NS8250-,
          NS16450-, NS16550-, y  NS16550A-basado en EIA RS-232C (CCITT V.24).
          Los dispositivos 8250 y 16450 tienen buffers de un solo caracter.
          El dispositivo 16550 brinda un buffer de 16 caracteres, el cual
          permite un mejor desempeño del sistema. (Errores en 16550 simple
          impiden el uso del buffer de 16 caracteres, así que utilice
          16550A si es posible). Debido a que los dispositivos de buffer de
          un solo caracter requieren más trabajo del sistema operativo
          que los dispotivos de buffer de 16 caracteres, las tarjetas de
          interfaz serie basadas en 16550A son mayormente preferidas.
          Si el sistema tiene muchos puertos serie activos o tendrá
          una carga elevada, las tarjetas basadas en 16550A son mejores para
          comunicaciones con baja tasa de error.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77586896"></a>24.4.3. Revisión rápida</h3></div></div></div><a id="idp77587536" class="indexterm"></a><p>Como con las terminales, <code class="command">init</code>
        engendra un proceso <code class="command">getty</code> para cada
        puerto serie configurado para conexiones dial-in.
        Por ejemplo, si un modem está conectado a
        <code class="filename">/dev/ttyd0</code>, el comando
        <code class="command">ps ax</code> podría mostrar esto:</p><pre class="screen"> 4850 ??  I      0:00.09 /usr/libexec/getty V19200 ttyd0</pre><p>Cuando un usuario marca la línea del modem y el modem
        conecta, la línea <acronym class="acronym">CD</acronym> (Carrier Detect)
        es reportada por el modem.
        El kernel
        nota que se ha detectado una portadora y completa la apertura de
        <code class="command">getty</code> del puerto. <code class="command">getty</code>
        manda un prompt <code class="prompt">login:</code> a la velocidad inicial
        de línea especificada. <code class="command">getty</code> observa si
        se reciben caracteres válidos, y, en una configuración
        típica, si encuentra basura (probablemente debido a que la
        velocidad de conexión del modem es diferente a la velocidad
        de <code class="command">getty</code>),  <code class="command">getty</code> trata de
        ajustar la velocidad de la línea hasta que recibe caracteres
        razonables.</p><a id="idp77593680" class="indexterm"></a><p>Despues que el usuario entra su nombre de
        login, <code class="command">getty</code> ejecuta
        <code class="filename">/usr/bin/login</code>, que completa
        la entrada preguntando por la contraseña del usuario y entonces
        inicia el shell del usuario.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77595856"></a>24.4.4. Archivos de configuración</h3></div></div></div><p>Existen tres ficheros de configuración del sistema
        en el directorio <code class="filename">/etc</code> que probablemente
        necesitará editar para permitir acceso de dial-up a su
        sistema FreeBSD. El primero, <code class="filename">/etc/gettytab</code>,
        contiene información de configuración para el
        daemon <code class="filename">/usr/libexec/getty</code>. El segundo,
        <code class="filename">/etc/ttys</code> contiene información que
        le dice a <code class="filename">/sbin/init</code> que dispositivos
        <code class="filename">tty</code> deben tener procesos <code class="command">getty</code>
        corriendo. Por último, puede incluir comandos de inicialización
        de puerto en el script <code class="filename">/etc/rc.serial</code>.</p><p>Existen dos escuelas de pensamiento en relación a modems dial-up
        en <span class="trademark">UNIX</span>®.
        Un grupo gusta de configurar sus modems y sistemas para que sin
        importar a que velocidad un usuario remoto marque, la interfaz local
        RS-232 computadora-a-modem corra a una velocidad fija. El beneficio
        de esta configuración es que el usuario remoto siempre obtiene
        un prompt de login del sistema inmediátamente.
        La desventaja es que el sistema no sabe cual es la tasa de datos
        verdadera del usuario, así que programas a pantalla completa
        como Emacs no ajustarán sus métodos de dibujado de
        pantalla para mejorar sus respuestas en conexiones más lentas.</p><p>La otra escuela configura sus modems de interfaz RS-232 para variar
 	su velocidad basado en la velocidad de conexión del usuario remoto.
        Por ejemplo, conexiones V.32bis (14.4 Kbps) al modem podrían
        hacer al modem correr su interfaz RS-232 a 19.2 Kbps, mientras que
        conexiones 2400 bps hacen correr la interfaz RS-232 del modem a
        2400 bps. Debido a que <code class="command">getty</code> no entiende
        el reporte de velocidad de conexión de cualquier modem,
        <code class="command">getty</code> brinda un mensaje <code class="prompt">login:</code> a una
        velocidad inicial y observa los caracteres que regresan en respuesta.
        Si el usuario recibe basura, se asume que sabe que debe presionar la
        tecla <span class="keycode">Enter</span> hasta que reciba un prompt reconocible.
        Si la tasa de datos no concuerda, <code class="command">getty</code> trata todo
        lo que el usuario escriba como <span class="quote">&#8220;<span class="quote">basura</span>&#8221;</span>, trata yendo a la
        siguiente velocidad y brinda el prompt <code class="prompt">login:</code> de nuevo.
        Este procedimiento puede continuar hasta el cansancio, pero normalmente
        solo toma un teclazo o dos antes que el usuario reciba un prompt
        correcto. Obviamente, esta secuencia de login no parece tan limpia
        como el anterior método de <span class="quote">&#8220;<span class="quote">velocidad fija</span>&#8221;</span>, pero
        un usuario en una conexión de velocidad baja podría
        recibir una respuesta interactiva mejor desde programas a pantalla
        completa.</p><p>Esta sección tratará de dar información de
        configuración balanceada, pero está cargada hacia tener la
        tasa de datos del modem siguiendo la tasa de conexión.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77604816"></a>24.4.4.1. <code class="filename">/etc/gettytab</code></h4></div></div></div><a id="idp77605584" class="indexterm"></a><p><code class="filename">/etc/gettytab</code> es un fichero tipo
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=termcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">termcap</span>(5)</span></a> de información de configuración para
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>. Por favor vea la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>
          para información completa del formato del fichero y la lista
          de capacidades.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77617744"></a>24.4.4.1.1. Configuración de velocidad fija</h5></div></div></div><p>Si está fijando la tasa de comunicación de datos
            de su modem a una velocidad particular, probablemente no necesitará
            ningún cambio a <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77619280"></a>24.4.4.1.2. Configuración de velocidad concordante</h5></div></div></div><p>Necesitará crear una entrada en
            <code class="filename">/etc/gettytab</code> para darle información a
            <code class="command">getty</code> acerca de las velocidades que desea usar
            para su modem. Si tiene un modem 2400 bps, puede probablemente
            utilizar la entrada existente <code class="literal">D2400</code>.</p><pre class="programlisting">#
# Fast dialup terminals, 2400/1200/300 rotary (can start either way)
#
D2400|d2400|Fast-Dial-2400:\
        :nx=D1200:tc=2400-baud:
3|D1200|Fast-Dial-1200:\
        :nx=D300:tc=1200-baud:
5|D300|Fast-Dial-300:\
        :nx=D2400:tc=300-baud:</pre><p>Si tiene un modem de mayor velocidad, probablemente necesite
            agregar una entrada en <code class="filename">/etc/gettytab</code>; aquí
            está una entrada que puede utilizar para un modem 14.4 Kbps
            con una velociad de interfaz máxima de 19.2 Kbps:</p><pre class="programlisting">#
# Additions for a V.32bis Modem
#
um|V300|High Speed Modem at 300,8-bit:\
        :nx=V19200:tc=std.300:
un|V1200|High Speed Modem at 1200,8-bit:\
        :nx=V300:tc=std.1200:
uo|V2400|High Speed Modem at 2400,8-bit:\
        :nx=V1200:tc=std.2400:
up|V9600|High Speed Modem at 9600,8-bit:\
        :nx=V2400:tc=std.9600:
uq|V19200|High Speed Modem at 19200,8-bit:\
        :nx=V9600:tc=std.19200:</pre><p>esto resultará en una conexión de 8 bits, sin paridad.</p><p>El ejemplo de arriba inicia la tasa de comunicaciones a 19.2 Kbps
            (para conexiones V.32bis), entonces cicla a través de 9600 bps
            (para V.32), 2400 bps, 1200 bps, 300 bps, y de vuelta a
            19.2 Kbps. El ciclado de la tasa de comunicaciones es implementado
            con la capacidad <code class="literal">nx=</code> (<span class="quote">&#8220;<span class="quote">siguiente tabla</span>&#8221;</span>).
            Cada una de las líneas usa una entrada
            <code class="literal">tc=</code> (<span class="quote">&#8220;<span class="quote">continuación de tabla</span>&#8221;</span>) para
            recoger el resto de las propiedades <span class="quote">&#8220;<span class="quote">estándar</span>&#8221;</span> para
            una tasa de datos en particular.</p><p>Si tiene un modem 28.8 Kbps y/o quiere tomar ventaja
            de la compresión en un modem 14.4 Kbps, necesita
            utilizar una tasa de comunicaciones mayor a 19.2 Kbps. Aquí
            hay un ejemplo de una entrada <code class="filename">gettytab</code> iniciando
            a 57.6 Kbps:</p><pre class="programlisting">#
# Additions for a V.32bis or V.34 Modem
# Starting at 57.6 Kbps
#
vm|VH300|Very High Speed Modem at 300,8-bit:\
        :nx=VH57600:tc=std.300:
vn|VH1200|Very High Speed Modem at 1200,8-bit:\
        :nx=VH300:tc=std.1200:
vo|VH2400|Very High Speed Modem at 2400,8-bit:\
        :nx=VH1200:tc=std.2400:
vp|VH9600|Very High Speed Modem at 9600,8-bit:\
        :nx=VH2400:tc=std.9600:
vq|VH57600|Very High Speed Modem at 57600,8-bit:\
        :nx=VH9600:tc=std.57600:</pre><p>Si tiene un CPU lento o un sistema muy cargado y no tiene
            puertos serie basados en 16550A, tal vez reciba errores en
            <span class="errorname">sio</span>
            <span class="quote">&#8220;<span class="quote">silo</span>&#8221;</span> a 57.6 Kbps.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dialup-ttys"></a>24.4.4.2. <code class="filename">/etc/ttys</code></h4></div></div></div><a id="idp77649872" class="indexterm"></a><p>La configuración del fichero <code class="filename">/etc/ttys</code>
          fué cubierto en <a class="xref" href="#ex-etc-ttys" title="Ejemplo 24.1. Agregando entradas de terminal a /etc/ttys">Ejemplo 24.1, &#8220;Agregando entradas de terminal a
	    <code class="filename">/etc/ttys</code>&#8221;</a>.
          La configuración para modems es similar pero debemos
          pasar un argumento diferente a <code class="command">getty</code> y
          especificar un tipo diferente de terminal. El formato general
          tanto para configuración de velocidad fija y velocidad
          concordante es:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty <em class="replaceable"><code>xxx</code></em>"   dialup on</pre><p>El primer componente de la línea de arriba es el fichero
          de dispositivo especial para esta entrada &#8212; <code class="literal">ttyd0</code>
          significa que <code class="filename">/dev/ttyd0</code> es el fichero que
          <code class="command">getty</code> estará vigilando. El segundo
          componente <code class="literal">"/usr/libexec/getty
          xxx"</code>
          (<em class="replaceable"><code>xxx</code></em> será reemplazado por la
          capacidad inicial de <code class="filename">gettytab</code>) es el proceso
          que <code class="command">init</code> ejecutará en el dispositivo.
          El tercer componente, <code class="literal">dialup</code>, es el tipo de
          terminal por omisión. El cuarto parámetro,
          <code class="literal">on</code>, le indica a <code class="command">init</code> que
          la línea es operacional. Puede existir un quinto parámetro,
          <code class="literal">secure</code>, pero solo debería ser utilizado para
          terminales que estén físicamente seguras (como la consola
          del sistema).</p><p>El tipo de terminal por omisión (<code class="literal">dialup</code>
          en el ejemplo de arriba) puede depender de preferencias locales.
          <code class="literal">dialup</code> es el tipo de terminal tradicional por
          omisión en líneas dial-up para que los usuarios
          puedan personalizar sus scripts de login para reconocer cuando
          la terminal es <code class="literal">dialup</code> y ajustar sus tipos de
          terminal automáticamente. De toda maneras, el autor encuentra
          más sencillo especificar en su sitio <code class="literal">vt102</code>
          como el tipo de terminal por omisión, puesto que los usuarios
          solo utilizan emulación VT102 en sus sistemas remotos.</p><p>Despues de realizar los cambios a <code class="filename">/etc/ttys</code>,
          puede enviar al proceso <code class="command">init</code> una señal <acronym class="acronym">HUP</acronym>
          para que relea el fichero. Puede utilizar el comando

	</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP 1</code></strong></pre><p>

          para mandar la señal. Si esta es su primera vez instalando el
          sistema, tal vez quiera esperar hasta que su(s) modem(s) estén
          configurados y conectados correctamente antes de señalizar a
          <code class="command">init</code>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77671120"></a>24.4.4.2.1. Configuración de velocidad fija</h5></div></div></div><p>Para una configuración de velocidad
            fija, su entrada <code class="filename">ttys</code> necesita tener una
            entrada de velocidad fija provista en <code class="command">getty</code>.
            Para un modem cuya velocidad de puerto está fijada en
            19.2 Kbps, la entrada <code class="filename">ttys</code> podría
            verse así:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty std.19200"   dialup on</pre><p>Si su modem está fijado a un velocidad de
            datos diferente, sustituya el valor apropiado por
            <code class="literal">std.velocidad</code>
            en lugar de <code class="literal">std.19200</code>. Asegúrese
            de usar un tipo válido listado en
            <code class="filename">/etc/gettytab</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77675344"></a>24.4.4.2.2. Configuración de velocidad concordante</h5></div></div></div><p>En una configuración de velocidad concordante su entrada
            <code class="filename">ttys</code> necesita referenciar el inicio de la entrada
            <span class="quote">&#8220;<span class="quote">auto-baud</span>&#8221;</span> (sic) en
            <code class="filename">/etc/gettytab</code>. Por ejemplo, si agregó la
            entrada sugerida arriba para un modem con velocidad concordante que
            inicia a 19.2 Kbps (la entrada <code class="filename">gettytab</code>
            conteniendo el punto de inicio <code class="literal">V19200</code>), su entrada
            <code class="filename">ttys</code> podría verse como esta:</p><pre class="programlisting">ttyd0   "/usr/libexec/getty V19200"   dialup on</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77679440"></a>24.4.4.3. <code class="filename">/etc/rc.serial</code></h4></div></div></div><a id="idp77680208" class="indexterm"></a><p>Modems de alta velocidad, como V.32, V.32bis, y V.34,
          necesitan usar control de flujo por hardware (<code class="filename">RTS/CTS</code>).
          Puede agregar comandos <code class="command">stty</code> a
          <code class="filename">/etc/rc.serial</code> para activar la bandera
          de control de flujo por hardware en el kernel de FreeBSD para
          los puertos del modem.</p><p>Por ejemplo para activar la bandera <code class="literal">termios</code>
          <code class="varname">crtscts</code> de dispositivos de inicialización
          dial-in y dial-out en el puerto serie #1
          (<code class="filename">COM2</code>), las siguientes líneas
          pueden agregarse a
          <code class="filename">/etc/rc.serial</code>:</p><pre class="programlisting"># Serial port initial configuration
stty -f /dev/ttyid1 crtscts
stty -f /dev/cuaia1 crtscts</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77689808"></a>24.4.5. Propiedades del modem</h3></div></div></div><p>Si tiene un modem cuyos parámetros pueden ser activados
        permanentemente en RAM no volatil, necesitará utilizar un
        programa de terminal (como Telix en <span class="trademark">MS-DOS</span>® o <code class="command">tip</code> en
        FreeBSD) para activar los parámetros.
        Conecte al modem usando la misma velocidad de comunicación
        como velocidad inicial que <code class="command">getty</code> usará y
        configure la RAM no volatil del modem para que concuerde con estos
        requerimientos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">CD</acronym> activado cuando esté conectado</p></li><li class="listitem"><p><acronym class="acronym">DTR</acronym> activado para operación; tirar DTR
	    cuelga la línea y reinicia el modem</p></li><li class="listitem"><p><acronym class="acronym">CTS</acronym> control de flujo de datos transmitidos</p></li><li class="listitem"><p>Deshabilitar control de flujo <acronym class="acronym">XON/XOFF</acronym></p></li><li class="listitem"><p><acronym class="acronym">RTS</acronym> control de flujo de datos recibidos</p></li><li class="listitem"><p>Modo silencioso (sin códigos resultantes)</p></li><li class="listitem"><p>Sin eco de comandos</p></li></ul></div><p>Por favor lea la documentación de su modem para saber
        que comandos y/o switches DIP necesita proporcionarle.</p><p>Pro ejemplo, para activar los parámetros de arriba
        en un modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo, uno podría
        dar estos comandos al modem:</p><pre class="programlisting">ATZ
AT&amp;C1&amp;D2&amp;H1&amp;I0&amp;R2&amp;W</pre><p>Tal vez quiera también tomar esta oportunidad para
        ajustar otras propiedades en el modem, como si utilizará
        compresión V.42bis y/o MNP5.</p><p>El modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo también posee
        switches DIP que necesitan activarse; para otros modems, tal vez pueda
        utilizar estas propiedades como un ejemplo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Switch 1: ARRIBA &#8212; DTR Normal</p></li><li class="listitem"><p>Switch 2: N/A (Códigos resultantes verbales/Códigos resultantes
	    numéricos)</p></li><li class="listitem"><p>Switch 3: ARRIBA &#8212; Suprimir códigos resultantes</p></li><li class="listitem"><p>Switch 4: ABAJO &#8212; No eco, comandos offline</p></li><li class="listitem"><p>Switch 5: ARRIBA &#8212; Auto respuesta</p></li><li class="listitem"><p>Switch 6: ARRIBA &#8212; Detección de señal Normal</p></li><li class="listitem"><p>Switch 7: ARRIBA &#8212; Cargar valores NVRAM por omisión</p></li><li class="listitem"><p>Switch 8: N/A (Modo inteligente/Modo tonto)</p></li></ul></div><p>Códigos resultantes deberían ser deshabilitados
        o suprimidos para modems dial-up para evitar problemas que pueden
        ocurrir si <code class="command">getty</code> erroneamente ofrece un prompt
        <code class="prompt">login:</code> a un modem que se encuentra en modo de
        comandos y el modem hace eco del comando o regresa un código
        resultante. Esta secuencia puede resultar en una conversación
        larga y tonta entre <code class="command">getty</code> y el modem.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77723984"></a>24.4.5.1. Configuración de velocidad fija</h4></div></div></div><p>Para una configuración de velocidad fija necesitará
          configurar el modem para mantener una tasa de datos constante
          modem-a-computadora independiente de la tasa de comunicaciones.
          En un modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo estos comandos
          fijarán la tasa de datos modem-a-computadora a la velocidad
          utilizada para pasar los comandos:</p><pre class="programlisting">ATZ
AT&amp;B1&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77726672"></a>24.4.5.2. Configuración de velocidad concordante</h4></div></div></div><p>Para una configuración de velocidad variable necesitará
          configurar su modem para ajustar la tasa de datos de su puerto serie
          para que coincida con la tasa de llamada entrante. En un modem
          <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo estos comandos
          fijarán la tasa de corrección de errores de datos a la
          velocidad usada para pasar los comandos, pero le permite a la tasa del
          puerto serie variar para conexiones que no corrigen errores:</p><pre class="programlisting">ATZ
AT&amp;B2&amp;W</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77729232"></a>24.4.5.3. Revisando la configuración del modem</h4></div></div></div><p>La mayoría de los modems de alta velocidad brindan
          comandos para ver los parámetros actuales de operación
          del modem en un modo entendible para humanos.
          En el modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>® 14,400 externo, el comando
          <code class="command">ATI5</code> despliega los parámetros que están
          almacenados en la RAM no volatil. Para ver los parámetros reales
          de operación del modem (influenciado por los parámetros
          de los switches DIP del modem), utilice el comando <code class="command">ATZ</code> y
          entonces <code class="command">ATI4</code>.</p><p>Si tiene una marca diferente de modem, revise el manual de
          su modem para ver como checar doblemente los parámetros de
          configuración de su modem.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77733072"></a>24.4.6. Determinando errores</h3></div></div></div><p>Aquí hay unos cuantos pasos que puede seguir para revisar
        en sus sistema el modem dial-up.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77734096"></a>24.4.6.1. Revisando el sistema FreeBSD</h4></div></div></div><p>Conecte su modem a su sistema FreeBSD, arranque el sistema, y,
          si su modem tiene luces de indicación de estado, mire si el
          indicador <acronym class="acronym">DTR</acronym> del modem enciende cuando el prompt
          <code class="prompt">login:</code> aparece en la consola del sistema
          &#8212; si enciende, eso debería significar que FreeBSD ha
          iniciado un proceso <code class="command">getty</code> en el puerto de
          comunicaciones apropiado y está esperando a que el modem
          acepte la llamada.</p><p>Si el indicador <acronym class="acronym">DTR</acronym> no enciende, entre al
          sistema FreeBSD a travás de la consola y ponga un <code class="command">ps
           ax</code> para ver si FreeBSD está tratando de correr
          un proceso <code class="command">getty</code> en el puerto correcto. Debería
          ver líneas como estas entre los procesos desplegados:</p><pre class="screen">  114 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd0
  115 ??  I      0:00.10 /usr/libexec/getty V19200 ttyd1</pre><p>Si ve algo diferente, como esto:</p><pre class="screen">  114 d0  I      0:00.10 /usr/libexec/getty V19200 ttyd0</pre><p>y el modem no ha aceptado una llamada todavía, esto
          significa que <code class="command">getty</code> ha completado su apertura
          en el puerto de comunicaciones. Esto puede indicar un problema
          con el cableado o un modem mal configurado, debido a que
          <code class="command">getty</code> no podría abrir el puerto de
          comunicaciones hasta que un <acronym class="acronym">CD</acronym> (detección
          de señal) sea afirmado por el modem.</p><p>si no ve ningún proceso <code class="command">getty</code> esperando
          para abrir el puerto
          <code class="filename">ttydN</code> deseado,
          revise de nuevo sus entradas en <code class="filename">/etc/ttys</code> para
          ver si existe algún error ahí. También revise
          el fichero de log <code class="filename">/var/log/messages</code> para ver
          si existe algún mensaje de <code class="command">init</code> o de
          <code class="command">getty</code> relacionados a cualquier problema.
          Si existe cualquier mensaje, revise nuevamente los ficheros de
          configuración <code class="filename">/etc/ttys</code> y
          <code class="filename">/etc/gettytab</code>, así como los ficheros
          especiales de dispositivo <code class="filename">/dev/ttydN</code>, por
          cualquier error, entradas faltantes, o ficheros especiales de
          dispositivo faltantes.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77749200"></a>24.4.6.2. Trate de llamar</h4></div></div></div><p>Trate de llamar al sistema; asegúrese de usar 8 bits,
          sin paridad, y 1 bit de parada en el sistema remoto.
          Si no obtiene un prompt inmediatamente, o recibe basura, trate
          presionando <span class="keycode">Enter</span> una vez por segundo.
          Si continua sin ver un prompt de <code class="prompt">login:</code> despues
          de un tiempo, trate enviando un <code class="command">BREAK</code>. Si
          está usando un modem de alta velocidad para realizar la
          marcación, trate marcando de nuevo despues de fijar la
          velociad de interfaz del modem (por medio de <code class="command">AT&amp;B1</code>
          en un modem <span class="trademark">U.S. Robotics</span>® <span class="trademark">Sportster</span>®, por ejemplo).</p><p>Si todavía no puede obtener un prompt de <code class="prompt">login:</code>,
          revise <code class="filename">/etc/gettytab</code> de nuevo y revise nuevamente
          que</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El nombre de capacidad inicial especificado en
              <code class="filename">/etc/ttys</code> para la línea coincida con
              un nombre de una capacidad en <code class="filename">/etc/gettytab</code></p></li><li class="listitem"><p>Cada entrada <code class="literal">nx=</code> coincida con otro
              nombre de capacidad de <code class="filename">gettytab</code></p></li><li class="listitem"><p>Cada entrada <code class="literal">tc=</code> coincida con otro
              nombre de capacidad de <code class="filename">gettytab</code></p></li></ul></div><p>Si marca pero el modem en el sistema FreeBSD no contesta,
          asegúrese que el modem está configurado para
          contestar el teléfono cuando <acronym class="acronym">DTR</acronym> sea
          detectado. Si el modem parece estar configurado correctamente,
          verifique que <acronym class="acronym">DTR</acronym> sea detectado revisando
          las luces indicadoras del modem (si tiene alguna).</p><p>Si ha revisado todo varias veces y todavía no funciona,
          tome un descanso y regrese a eso depues. Si todavía continua
          sin funcionar, tal vez puede mandar un correo electrónico a
          <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">lista de correo para preguntas generales sobre FreeBSD</a> describiendo su modem y su problema, y las buenas
          personas en la lista tratarán de ayudarle.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialout"></a>24.5. Servicio dial-out</h2></div></div></div><a id="idp77761872" class="indexterm"></a><p>Los siguientes son tips para que su equipo pueda conectarse a
      otra computadora mediante el modem. Esto es apropiado para
      establecer una sesión de terminal con un equipo remoto.</p><p>Esto es útil para entrar a una BBS.</p><p>Este tipo de conexión puede ser extremadamente útil
      para obtener un fichero del Internet si tiene problemas con PPP. Si
      necesita mandar por FTP algo y PPP no funciona, utilice la sesión
      de terminal para mandarlo por FTP. Entonces use zmodem para transferirlo
      a su máquina.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77767760"></a>24.5.1. ¿Mi modem Hayes no está soportado, que puedo hacer?</h3></div></div></div><p>En realidad, la página de manual para <code class="command">tip</code> no está
        actualizada. Existe un marcador Hayes genérico incluido. Solo
        utilice <code class="literal">at=hayes</code> en su fichero
        <code class="filename">/etc/remote</code>.</p><p>El controlador Hayes no es lo suficientemente inteligente
        para reconocer algunas de las funciones avanzadas de nuevos
        modems como <code class="literal">BUSY</code>, <code class="literal">NO DIALTONE</code>,
        o <code class="literal">CONNECT 115200</code> y solamente se confundirá.
        Debería apagar esos mensajes cuando utilice <code class="command">tip</code>
        (usando <code class="command">ATX0&amp;W</code>).</p><p>También, la pausa de marcado para <code class="command">tip</code> es
        de 60 segundos. Su modem debe utilizar un poco menos, o de otra manera
        tip pensará que existe un problema de comunicación.
        Trate con <code class="command">ATS7=45&amp;W</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Así como se envía, <code class="command">tip</code> todavía
          no soporta modems Hayes completamente. La solución es
          editar el fichero <code class="filename">tipconf.h</code> en el
          directorio <code class="filename">/usr/src/usr.bin/tip/tip</code>.
          Obviamente necesita las fuentes de la distribución para
          hacer esto.</p><p xmlns="http://www.w3.org/1999/xhtml">Edite la línea <code class="literal">#define HAYES 0</code> a
          <code class="literal">#define HAYES 1</code>. Entonces haga un <code class="command">make</code>
          y <code class="command">make install</code>. Todo funciona bien despues
          de eso.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="direct-at"></a>24.5.2. ¿Como se espera que yo entre estos comandos AT?</h3></div></div></div><a id="idp77778256" class="indexterm"></a><p>Haga lo que se llama una entrada <span class="quote">&#8220;<span class="quote">directa</span>&#8221;</span> en
        su fichero <code class="filename">/etc/remote</code>. Por ejemplo, si su
        modem está conectado al primer puerto serie, <code class="filename">/dev/cuaa0</code>,
        entonces ponga la siguiente línea:</p><pre class="programlisting">cuaa0:dv=/dev/cuaa0:br#19200:pa=none</pre><p>Utilice la tasa más alta de bps que su modem soporte en la
        capacidad br. Entonces, escriba <code class="command">tip cuaa0</code> y estará
        conectado a su modem.</p><p>Si no existe un fichero <code class="filename">/dev/cuaa0</code> en su sistema,
        haga esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV cuaa0</code></strong></pre><p>O use <code class="command">cu</code> como <code class="systemitem">root</code> con el
        siguiente comando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -lline -sspeed</code></strong></pre><p><em class="replaceable"><code>line</code></em> es el puerto serie
        (ejem.<code class="filename">/dev/cuaa0</code>) y
        <em class="replaceable"><code>speed</code></em> es la velocidad
        (ejem.<code class="literal">57600</code>). Cuando termine de meter los
         comandos AT presione <span class="keycap"><strong>~.</strong></span> para salir.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77792976"></a>24.5.3. ¡El signo <code class="literal">@</code> para la capacidad pn no
	funciona!</h3></div></div></div><p>El signo <code class="literal">@</code> en la capacidad número de teléfono
        le dice a tip que busque en <code class="filename">/etc/phones</code> por un
        número de teléfono.
        Pero el signo <code class="literal">@</code> también es un caracter especial
        en ficheros de capacidad como <code class="filename">/etc/remote</code>. Escápelo
        con una diagonal invertida:</p><pre class="programlisting">pn=\@</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77796688"></a>24.5.4. Como puede marcar un número de teléfono. en la línea de comando?</h3></div></div></div><p>Ponga lo que se llama una entrada <span class="quote">&#8220;<span class="quote">generica</span>&#8221;</span> en su
        fichero <code class="filename">/etc/remote</code>. Por ejemplo:</p><pre class="programlisting">tip115200|Dial any phone number at 115200 bps:\
        :dv=/dev/cuaa0:br#115200:at=hayes:pa=none:du:
tip57600|Dial any phone number at 57600 bps:\
        :dv=/dev/cuaa0:br#57600:at=hayes:pa=none:du:</pre><p>Entonces puede hacer cosas como:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tip -115200 5551234</code></strong></pre><p>Si prefiere <code class="command">cu</code> y no <code class="command">tip</code>,
	use una entrada <code class="literal">cu</code>:</p><pre class="programlisting">cu115200|Use cu to dial any number at 115200bps:\
        :dv=/dev/cuaa1:br#57600:at=hayes:pa=none:du:</pre><p>y escriba:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu 5551234 -s 115200</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77803472"></a>24.5.5. ¿Tengo que teclear la tasa de bps cada vez que haga eso?</h3></div></div></div><p>Ponga una entrada para <code class="literal">tip1200</code> o
        <code class="literal">cu1200</code>, pero utilice cualquier tasa bps que sea
        apropiada con la capacidad br.  <code class="command">tip</code> piensa que
        una buena opción por omisión es 1200 bps es por
        eso que busca una entrada <code class="literal">tip1200</code>. Aunque no tiene
        que usar 1200 bps.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77806288"></a>24.5.6. Acceso a un número de equipos a través de un servidor de terminales</h3></div></div></div><p>en lugar de esperar hasta que esté conectado y
        teclear <code class="command">CONNECT &lt;host&gt;</code> cada vez, use
        la capacidad de tip <code class="literal">cm</code>. Por ejemplo, estas
        entradas en <code class="filename">/etc/remote</code>:</p><pre class="programlisting">pain|pain.deep13.com|Forrester's machine:\
        :cm=CONNECT pain\n:tc=deep13:
muffin|muffin.deep13.com|Frank's machine:\
        :cm=CONNECT muffin\n:tc=deep13:
deep13:Gizmonics Institute terminal server:\
        :dv=/dev/cuaa2:br#38400:at=hayes:du:pa=none:pn=5551234:</pre><p>Le permitirá teclear <code class="command">tip pain</code> o
        <code class="command">tip muffin</code> para conectar a los equipos pain
        o muffin, y <code class="command">tip deep13</code> para accesar al servidor
        de terminales.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77810512"></a>24.5.7. ¿Puede Tip tratar más de una línea para cada sitio?</h3></div></div></div><p>Eso es a menudo un problema donde una universidad tiene varias líneas
        de modems y varios miles de estudiantes tratando de usarlas.</p><p>Haga una entrada para su universidad en
        <code class="filename">/etc/remote</code> y use <code class="literal">@</code> para
        la capacidad <code class="literal">pn</code> :</p><pre class="programlisting">big-university:\
        :pn=\@:tc=dialout
dialout:\
        :dv=/dev/cuaa3:br#9600:at=courier:du:pa=none:</pre><p>Entonces liste los números de teléfonos para la universidad en
	<code class="filename">/etc/phones</code>:</p><pre class="programlisting">big-university 5551111
big-university 5551112
big-university 5551113
big-university 5551114</pre><p><code class="command">tip</code> tratará cada uno en el orden listado,
        entonces se rendirá. Si quiere seguir tratando, ejecute <code class="command">tip</code>
        en un ciclo while.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77824080"></a>24.5.8. ¿Porqué tengo que presionar
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>P</strong></span>
        dos veces para mandar un
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>P</strong></span>
        ?</h3></div></div></div><p><span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>P</strong></span> es el caracter de <span class="quote">&#8220;<span class="quote">forzado</span>&#8221;</span> por omisión, usado para
        decirle a <code class="command">tip</code> que el siguiente caracter es un dato literal.
        Puede establecer el caracter de forzado a cualquier otro
        caracter con el escape <code class="command">~s</code>, el cual significa
        <span class="quote">&#8220;<span class="quote">establecer una variable.</span>&#8221;</span></p><p>Escriba
        <code class="command">~sforce=single-char</code>
        seguido por una nueva línea.  <em class="replaceable"><code>single-char</code></em>
        es cualquier caracter. Si no especifica
        <em class="replaceable"><code>single-char</code></em>, entonces el caracter de
        forzado es el caracter nulo, el cual puede
        obtener tecleando
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>2</strong></span>
        o
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Espacio</strong></span>.
        Un buén valor para <em class="replaceable"><code>single-char</code></em> es
        <span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>6</strong></span>, es cual solamente es usado
        en algunos servidores de terminales.</p><p>Puede hacer que el caracter de forzado sea cualquiera
        que usted quiera especificando lo siguiente en su fichero
        <code class="filename">$HOME/.tiprc</code>:</p><pre class="programlisting">force=&lt;single-char&gt;</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77837264"></a>24.5.9. ¿¿De repente todo lo que escribo está en mayúsculas??</h3></div></div></div><p>Debe haber presionado
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>A</strong></span>, el<span class="quote">&#8220;<span class="quote">caracter de mayúsculas</span>&#8221;</span>
        de <code class="command">tip</code>
        especialmente diseñado para personas
        con teclas caps-lock dañadas. Use <code class="command">~s</code> como se ve
        arriba y establezca la variable <code class="literal">raisechar</code> a
        algo razonable. De hecho, puede establecerla a la misma del
        caracter de forzado, si nunca espera utilizar ninguna de estas
        funciones.</p><p>Aquí hay un ejemplo de fichero
        .tiprc perfecto para usuarios de
        <span class="application">Emacs</span> que necesitan teclear
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>2</strong></span>
        y
        <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>A</strong></span>
        con frecuencia:</p><pre class="programlisting">force=^^
raisechar=^^</pre><p>El ^^ es
	<span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>6</strong></span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77862992"></a>24.5.10. ¿Como puedo realizar transferencias de ficheros con <code class="command">tip</code>?</h3></div></div></div><p>Si esta hablando con otro sistema <span class="trademark">UNIX</span>®, puede mandar y recibir
        ficheros con <code class="command">~p</code> (put) y
        <code class="command">~t</code> (take). Estos comandos ejecutan
        <code class="command">cat</code> y <code class="command">echo</code> en el sistema
        remoto para aceptar y envíar ficheros. La sintaxis
        es:</p><div class="cmdsynopsis"><p><code class="command">~p</code>  fichero-local  [fichero-remoto]</p></div><div class="cmdsynopsis"><p><code class="command">~t</code>  fichero-remoto  [fichero-local]</p></div><p>No existe revisión de errores, así que probablemente
        debería usar otro protocolo, como zmodem.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77878864"></a>24.5.11. ¿Como puedo ejecutar zmodem con <code class="command">tip</code>?</h3></div></div></div><p>Para recibir ficheros, inicie el programa de envío en
        el extremo remoto. Entonces escriba <code class="command">~C rz</code> para
        empezar a recibirlos localmente.</p><p>Para enviar ficheros, inicie el programa de recepción
        el extremo remoto. Entonces escriba
        <code class="command">~C sz files</code>
        para enviarlos
        al sistema remoto.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serialconsole-setup"></a>24.6. Configurando la consola serie</h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Kazutaka</span> <span class="surname">YOKOTA</span></span>. </span></div><div><span class="authorgroup">Basado en un documento de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Paul</span></span>. </span></div></div></div><a id="idp77885776" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-intro"></a>24.6.1. Introducción</h3></div></div></div><p>FreeBSD tiene la habilidad de arrancar en un sistema
        con solo una terminal tonta como consola. Tal configuración
        podría ser útil para dos clases de gente:
        administradores de sistema que quieran instalar FreeBSD en máquinas
        que no tienen teclado o monitor conectado, y desarrolladores
        que quieran corregir errores en el kernel o controladores
        de dispositivos.</p><p>Como se describe en <a class="xref" href="#boot" title="Capítulo 12. El proceso de arranque en FreeBSD">Capítulo 12, <em>El proceso de arranque en FreeBSD</em></a>, FreeBSD emplea un
        sistema de arranque de tres estados. Los primeros dos estados se
        encuentran en el código del bloque de arranque el cual es
        almacenado al principio del slice en el disco de arranque. El
        bloque de arranque entonces cargará y ejecutará el
        cargador de arranque (<code class="filename">/boot/loader</code>) como
        la tercera etapa de código.</p><p>Para poder configurar la consola serie debe configurar el
        código del bloque de arranque, el código del cargador
        de arranque y el kernel.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto-fast"></a>24.6.2. Configuracióm de consola serie, versión breve</h3></div></div></div><p>Esta sección asume que está usando la
        configuración por omisión y solo quiere una
        rápida revisión de la configuración de
        la consola serie.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Conecte el cable serie a COM1 y la terminal controladora.</p></li><li class="step"><p>Para ver todos los mensajes de arranque en la consola
            serie escriba el siguiente comando mientras está
            firmado como superusuario:</p><pre class="screen"><code class="prompt">#</code> echo 'console="comconsole"' &gt;&gt; /boot/loader.conf</pre></li><li class="step"><p>Edite <code class="filename">/etc/ttys</code> y cambie
            <code class="literal">dialup</code> a <code class="literal">vt100</code> para la entrada
            <code class="literal">ttyd0</code>. De otra manera una
            contraseña no será requerida para conectar por medio
            de la consola serie, resultando en un agujero de seguridad
            potencial.</p></li><li class="step"><p>Reinicie el sistema para ver si los cambios tuvieron efecto.</p></li></ol></div><p>Si una configuración diferente es requerida, una
        explicación mas detallada existe en
        <a class="xref" href="#serialconsole-howto" title="24.6.3. Configuración de la consola serie">Sección 24.6.3, &#8220;Configuración de la consola serie&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto"></a>24.6.3. Configuración de la consola serie</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Prepare un cable serie.</p><a id="idp77902800" class="indexterm"></a><p>Necesitará ya sea un cable null-modem o un cable
            serie estándar y un adaptador null-modem. Vea
            <a class="xref" href="#serial-cables-ports" title="24.2.2. Cables y puertos">Sección 24.2.2, &#8220;Cables y puertos&#8221;</a> para una discusión
            sobre cables serie.</p></li><li class="step"><p>Desconecte su teclado.</p><p>La mayoría de sistemas PC buscan el teclado durante
            la autoprueba de encendido (POST) y generarán un error
            si el teclado no es detectado. Algunas máquinas se quejan
            fuerte sobre la falta de un teclado y no continuarán
            arrancando hasta que este contectado.</p><p>Si su computadora se queja con este error, pero arranca de
            todos modos, entonces no tiene que hacer nada especial. (Algunas
            máquinas con BIOS Phoenix instalado solo mostrarán
            <span class="errorname">Keyboard failed</span> y continuarán
            arrancando normalmente.)</p><p>Si su computadora se niega a arrancar sin un teclado
            conectado, entonces tendrá que configurar el BIOS para
            que ignore este error (si es posible). Consulte el manual de su
            tarjeta madre para los detalles de como hacer esto.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Poniendo el teclado como <span class="quote">&#8220;<span class="quote">No instalado</span>&#8221;</span> en el
              BIOS <span class="emphasis"><em>no</em></span> significa que no podá usar
              su teclado. Todo lo que hace es decirle al BIOS que no busque
              un teclado al momento de encender, asi no se quejará si
              el teclado no se encuentra conectado. Puede dejar el teclado
              conectado incluso si esta bandera está puesta a
              <span class="quote">&#8220;<span class="quote">No instalado</span>&#8221;</span> y el teclado todaía funcionará.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si su sistema tiene un ratón <span class="trademark">PS/2</span>® es muy probable que
              también tenga que desconectar su ratón junto con
              el teclado. Esto se debe a que los ratones <span class="trademark">PS/2</span>® comparten
              algún hardware con el teclado y dejandolo conectado puede
              ocasionar que el sistema piense que el teclado sigue conectado.
              Se dice que un sistema Gateway 2000 Pentium 90 MHz con un
              AMI BIOS se comporta de esta manera. En general, esto no
              representa un problema puesto que el ratón no es muy
              útil sin el teclado de todas maneras.</p></div></li><li class="step"><p>Conecte una terminal tonta a <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>).</p><p>Si no tiene una terminal tonta, puede utilizar una PC/XT
            vieja con un programa de modem, o el puerto serie en otro
            equipo <span class="trademark">UNIX</span>®. Si no tiene un <code class="filename">COM1</code>
            (<code class="filename">sio0</code>), consiga uno. En este momento,
            no existe manera de seleccionar un puerto diferente a <code class="filename">COM1</code>
            para los bloques de arranque sin recompilar los bloques de
            arranque. Si ya está utilizando <code class="filename">COM1</code> para
            otro dispositivo, necesitará remover temporalmente ese
            dispositivo e instalar un nuevo bloque de arranque y kernel una
            vez que tenga a FreeBSD arriba y funcionando. (Se asume que
            <code class="filename">COM1</code> estará disponible en un
            fichero/computadora/servidor de terminales de todas maneras;
            si realmente necesita <code class="filename">COM1</code> para algo
            más (y no puede cambiar ese algo a
            <code class="filename">COM2</code> (<code class="filename">sio1</code>)),
            entonces probablemente no debería de molestarse con todo
            esto en primer lugar.)</p></li><li class="step"><p>Asegúrese de que el fichero de configuración de
            su kernel tenga las banderas apropiadas activadas para
            <code class="filename">COM1</code> (<code class="filename">sio0</code>).</p><p>Las banderas relevantes son:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">0x10</code></span></dt><dd><p>Habilita el soporte de consola para esta unidad.
                  Las otras banderas de consola son ignoradas a menos que
                  ésta está activada. Actualmente, al menos
                  una unidad puede tener soporte de consola; la primera (en
                  orden de configuración) con esta bandera activada
                  es preferida. Esta opción por si sola no hará
                  del puerto serie una consola. Active la siguiente bandera
                  o utilice la opción <code class="option">-h</code> descrita
                  abajo, junto con esta bandera.</p></dd><dt><span class="term"><code class="literal">0x20</code></span></dt><dd><p>Obliga a esta unidad a ser la consola (a menos que
                  exista otra consola de mayor prioridad), sin importar
                  la opción <code class="option">-h</code> discutida abajo. Esta
                  bandera reemplaza la opción <code class="literal">COMCONSOLE</code>
                  en las versiones 2.<em class="replaceable"><code>X</code></em> de FreeBSD.
                  La bandera <code class="literal">0x20</code> debe ser utilizada junto
                  con la bandera <code class="option">0x10</code>.</p></dd><dt><span class="term"><code class="literal">0x40</code></span></dt><dd><p>Reserva esta unidad (en conjunto con
                  <code class="literal">0x10</code>) y hace esta unidad
                  no disponible para acceso normal. No debería
                  activar esta bandera en la unidad de puerto serie
                  la cual desee utilizar como la consola serie.
                  El único uso de esta bandera es designar
                  la unidad para corección de errore remota
                  del kernel. Revise <span class="quote">&#8220;<span class="quote">El manual del
		  desarrollador</span>&#8221;</span> para mayor información sobre
		  corrección de errores remotamente.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 4.0 o posterior la semántica de
                    la bandera <code class="literal">0x40</code> es ligeramente
		    diferente y existe otra bandera para especificar un puerto
		    serie para corrección de errores remotamente.
		    </p></div></dd></dl></div><p>Ejemplo:</p><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><p>Vea la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> para más
	    detalles.</p><p>Si las banderas no fueron activadas, necesita correr
            UserConfig (en una consola diferente) o recompilar el
            kernel.</p></li><li class="step"><p>Cree <code class="filename">boot.config</code> en el directorio
	    raíz de la partición <code class="literal">a</code> del
	    disco de arranque.</p><p>Este fichero instruirá al código del bloque de
            arranque como le gustaría arrancar el sistema. Para activar
            la consola serie, necesita una o más de las
	    siguientes opciones&#8212; si quiere opciones múltiples
	    inclúyalas todas en la misma línea:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>Cambia entre consola interna y serie. Puede usar
		  esto para cambiar los dispositivos de consola. Por
		  ejemplo, si arranca desde la consola interna
		  (video), puede utilizar <code class="option">-h</code> para dirigir el
		  cargador de arranque y el kernel a que usen el puerto serie
		  como su dispositivo de consola. Alternativamente, si
		  arranca desde el puerto serie, puede utilizar
		  <code class="option">-h</code> para decirle al cargador de arranque y
		  al kernel que usen el video como consola.</p></dd><dt><span class="term"><code class="option">-D</code></span></dt><dd><p>Cambia entre configuración de consola
		  simple y dual.  En la configuración simple la
		  consola será ya sea la consola interna
		  (video) o el puerto serie, dependiendo del estado de la
		  opción <code class="option">-h</code> de arriba.  En la
		  configuración de consola dual, el video y el
                  puerto serie se convertirán en la consola al
		  mismo tiempo, sin importar del estado de la opción
		  <code class="option">-h</code>.  De todas maneras, note que la
		  configuración de consola dual toma efecto
		  solamente mientras el bloque de arranca está
                  corriendo. Una vez que el cargador de arranque toma el
		  control, la consola especificada por la
		  opción <code class="option">-h</code> se convierte en la
		  única consola.</p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>Hace que el bloque de arranque busque el teclado.
                  Si no se encuentra un teclado, la opción
		  <code class="option">-D</code> y <code class="option">-h</code> son activadas
		  automátivamente.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debido a problemas de espacio en la versión
		    actual del bloque de arranque, la opción
		    <code class="option">-P</code> es capaz de detectar unicamente
		    teclados extendidos. Teclados con menos de 101 teclas
		    (y carentes de teclas F11 y F12) no pueden ser
		    detectados. Algunos teclados en laptops puede que no
		    sean correctamente encontrados debido a esta
                    limitación. Si este es el caso con su sistema, debe
                    abandonar el uso de la opción <code class="option">-P</code>.
                    Desafortunádamente no hay una solución para
                    este problema.</p></div></dd></dl></div><p>Utilice ya sea la opción <code class="option">-P</code> para
            seleccionar la consola automáticamente, o la opción
            <code class="option">-h</code> para activar la consola serie.</p><p>Puede incluir otras opciones descritas en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a>
            también.</p><p>Las opciones, excepto por <code class="option">-P</code>, serán
            pasadas al cargador de arranque (<code class="filename">/boot/loader</code>).
            El cargador de arranque determinará si el video interno
            o el puerto serie debería convertirse en la consola
            examinando el estado de la opción <code class="option">-h</code>
            solamente. Esto significa que si especifica la opción
            <code class="option">-D</code> pero no la opción <code class="option">-h</code>
            en <code class="filename">/boot.config</code>, puede utilizar el puerto
            serie como consola solamente durante el bloque de arranque;
            el cargador de arranque usará el video interno como
            consola.</p></li><li class="step"><p>Arranque la máquina.</p><p>Cuando inicia su equipo FreeBSD, los bloques de arranque
            mostrarán los contenidos de <code class="filename">/boot.config</code> a
            la consola. Por ejemplo:</p><pre class="screen">/boot.config: -P
Keyboard: no</pre><p>La segunda línea aparece solamente si pone <code class="option">-P</code>
            en <code class="filename">/boot.config</code> e indica la presencia/ausencia
            del teclado. Estos mensajes van a la consola serie o a la interna,
            o a ambas, dependiendo de la opción en
            <code class="filename">/boot.config</code>.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Opciones</th><th>Mensaje va a</th></tr></thead><tbody><tr><td>ninguna</td><td>consola interna</td></tr><tr><td><code class="option">-h</code></td><td>consola serie</td></tr><tr><td><code class="option">-D</code></td><td>consola serie e interna</td></tr><tr><td><code class="option">-Dh</code></td><td>consola serie e interna</td></tr><tr><td><code class="option">-P</code>, teclado presente</td><td>consola interna</td></tr><tr><td><code class="option">-P</code>, teclado ausente</td><td>consola serie</td></tr></tbody></table></div><p>Despues de los mensajes de arriba, existirá una pausa
            pequeña antes que los bloques de arranque continuen cargando el
            cargador de arranque y antes de que cualquier mensaje posterior
            sea impreso en la consola. Bajo ciertas circunstancias, no necesita
            interrumpir los bloques de arranque, pero tal vez quiera hacerlo
            para asegurarse que las cosas están configuradas
            corréctamente.</p><p>Presione cualquier tecla, diferente a  <span class="keycode">Enter</span>,
            en la consola para interrumpir el proceso de arranque. Los bloques
            de arranque entonces esperarán una entrada para determinar
            como continuar. Debe ver algo como esto:</p><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:</pre><p>Verifique que el mensaje de arriba aparece en la consola
            serie o en la interna o en ambas, de acuerdo a las opciones
            que puso en <code class="filename">/boot.config</code>. Si el mensaje
            aparece en la consola correcta, presione <span class="keycode">Enter</span>
            para continuar el proceso de arranque.</p><p>Si quiere usar la consola serie pero no ve el prompt en la
            terminal serie, algo está mal con su configuración.
            Mientras tanto, entre <code class="option">-h</code> y presione Enter/Return
            (si es posible) para decirle al bloque de arranque (y entonces al
            cargador de arranque y al kernel) que elija el puerto serie como
            consola. Una vez que el sistema arranque, regrese y revise que fué
            lo que estuvo mal.</p></li></ol></div><p>Despues que el cargador de arranque ha cargado y usted se encuentra
        en la tercera etapa del proceso de arranque todavía puede cambiar
        entre la consola interna y la consola serie activando las variables de
        entorno apropiadas en el cargador de arranque.
        Vea <a class="xref" href="#serialconsole-loader" title="24.6.6. Cambiando la consola desde el cargador de arranque">Sección 24.6.6, &#8220;Cambiando la consola desde el cargador de arranque&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-summary"></a>24.6.4. Resumen</h3></div></div></div><p>aquí está el resumen de varias configuraciones
        discutidas en esta sección y la consola seleccionada
        eventualmente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77991760"></a>24.6.4.1. Caso 1: Activó las banderas a 0x10 para
	  <code class="filename">sio0</code></h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Opciones en /boot.config</th><th>Consola durante bloques de arranque</th><th>Consola durante cargador de arranque</th><th>Consola en kernel</th></tr></thead><tbody><tr><td>ninguna</td><td>interna</td><td>interna</td><td>interna</td></tr><tr><td><code class="option">-h</code></td><td>serie</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-D</code></td><td>serie e interna</td><td>interna</td><td>interna</td></tr><tr><td><code class="option">-Dh</code></td><td>serie e interna</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-P</code>, teclado presente</td><td>interna</td><td>interna</td><td>interna</td></tr><tr><td><code class="option">-P</code>, teclado ausente</td><td>serie e interna</td><td>serie</td><td>serie</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78013776"></a>24.6.4.2. Caso 2: Activó las banderas a 0x30 para sio0</h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x30 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Opciones en /boot.config</th><th>Consola durante bloques de arranque</th><th>Consola durante cargador de arranque</th><th>Consola en kernel</th></tr></thead><tbody><tr><td>ninguna</td><td>interna</td><td>interna</td><td>serie</td></tr><tr><td><code class="option">-h</code></td><td>serie</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-D</code></td><td>serie e interna</td><td>interna</td><td>serie</td></tr><tr><td><code class="option">-Dh</code></td><td>serie e interna</td><td>serie</td><td>serie</td></tr><tr><td><code class="option">-P</code>, teclado presente</td><td>interna</td><td>interna</td><td>serie</td></tr><tr><td><code class="option">-P</code>, teclado ausente</td><td>serie e interna</td><td>serie</td><td>serie</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-tips"></a>24.6.5. Consejos para la consola serie</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78036432"></a>24.6.5.1. Configurando un velocidad de puerto serie más rápida</h4></div></div></div><p>Por omisión, la configuración del puerto
          serie es: 9600 baud, 8 bits, sin paridad, y 1 bit de parada.
          Si desea cambiar la velocidad, necesita recompilar al menos los
          bloques de arranque. Agregue la siguiente línea a
          <code class="filename">/etc/make.conf</code> y compile nuevos
          bloques de arranque:</p><pre class="programlisting">BOOT_COMCONSOLE_SPEED=19200</pre><p>Vea <a class="xref" href="#serialconsole-com2" title="24.6.5.2. Usando puertos serie para consola diferentes a sio0">Sección 24.6.5.2, &#8220;Usando puertos serie para consola diferentes a <code class="filename">sio0</code>&#8221;</a> para instrucciones
          detalladas sonre construir e instalar nuevos bloques de
          arranque.</p><p>Si la consola serie está configurada de alguna otra
          manera que arrancando con <code class="option">-h</code>, o si la consola
          serie usada por el kernel es diferente de la usada por los
          bloques de arranque, entonces también debe agregar la
          siguiente opción al fichero de configuración del kernel
          y compilar un nuevo kernel:</p><pre class="programlisting">options CONSPEED=19200</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-com2"></a>24.6.5.2. Usando puertos serie para consola diferentes a <code class="filename">sio0</code></h4></div></div></div><p>Utilizar un puerto serie diferente a <code class="filename">sio0</code>
          como consola requiere cierta recompilación. Si quiere usar
          otro puerto serie por la razón que sea, recompile los
          bloques de arranque, el cargador de arranque y el kernel como
          sigue.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Consiga las fuentes del kernel. (Vea <a class="xref" href="#cutting-edge" title="Capítulo 23. Lo último de lo último">Capítulo 23, <em>Lo último de lo último</em></a>)</p></li><li class="step"><p>Edite <code class="filename">/etc/make.conf</code> y ponga
              <code class="literal">BOOT_COMCONSOLE_PORT</code> a la dirección
              del puerto que quiera usar (0x3F8, 0x2F8, 0x3E8 o 0x2E8).
              Solamente de <code class="filename">sio0</code> hasta
              <code class="filename">sio3</code> (<code class="filename">COM1</code>
              hasta <code class="filename">COM4</code>) pueden usarse; tarjetas
              multipuertos serie no funcionarán.
              No se necesita especificar interrupción.</p></li><li class="step"><p>Cree un fichero personalizado de configuración de kernel
              y agrege las banderas apropiadas para el puerto serie que
              desee utilizar. Por ejemplo, si desea hacer de <code class="filename">sio1</code>
              (<code class="filename">COM2</code>) la consola:</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x10 irq 3</pre><p>o</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x30 irq 3</pre><p>Las banderas de consola para otros puertos serie no deben
              activarse.</p></li><li class="step"><p>Recompile e instale los bloques de arranque y el cargador de arranque:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/boot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li><li class="step"><p>Reconstruya e instale el kernel.</p></li><li class="step"><p>Escriba los bloques de arranque al disco de
              arranque con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> y arranque desde
              el nuevo kernel.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-ddb"></a>24.6.5.3. Accesando DDB Debugger desde la línea serie</h4></div></div></div><p>Si desea entrar al modo kernel debugger desde una consola
          serie (útil para diagnósticos remotos, !pero
          también peligroso si genera un BREAK ilegítimo
          en el puerto serie!) entonces debe compilar con las siguientes
          opciones:</p><pre class="programlisting">options BREAK_TO_DEBUGGER
options DDB</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78066384"></a>24.6.5.4. Obteniendo un prompt de login en la consola serie</h4></div></div></div><p>Aunque esto no es requerido, tal vez quiera obtener
           un prompt de <span class="emphasis"><em>login</em></span> a través de
           una línea serie, ahora que puede ver los mensajes
           de arranque y puede entrar a una sesión en modo
           kernel debug a través de la consola serie. Aquí
           está como hacerlo.</p><p>Abra el fichero <code class="filename">/etc/ttys</code> con un editor
          y localice las líneas:</p><pre class="programlisting">ttyd0 "/usr/libexec/getty std.9600" unknown off secure
ttyd1 "/usr/libexec/getty std.9600" unknown off secure
ttyd2 "/usr/libexec/getty std.9600" unknown off secure
ttyd3 "/usr/libexec/getty std.9600" unknown off secure</pre><p><code class="literal">ttyd0</code> hasta <code class="literal">ttyd3</code>
          corresponde a <code class="filename">COM1</code> hasta
          <code class="filename">COM4</code>. Cambie <code class="literal">off</code> a
          <code class="literal">on</code> para el puerto deseado. Si ha cambiado la
          velocidad del puerto serie, necesita cambiar
          <code class="literal">std.9600</code> para que concuerde con los
          parámetros actuales, ej.
          <code class="literal">std.19200</code>.</p><p>Tal vez tambien desee cambiar el tipo de terminal
          de <code class="literal">unknown</code> al tipo actual de su
          terminal serie.</p><p>Despues de editar el fichero, debe hacer un <code class="command">kill -HUP 1</code>
          para que este cambio surta efecto.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-loader"></a>24.6.6. Cambiando la consola desde el cargador de arranque</h3></div></div></div><p>Secciones anteriores describieron como instalar la consola
        serie manipulando el bloque de arranque. Esta sección muestra
        que puede especificar la consola especificando algunos
	comandos y variables de entorno en el cargador de arranque. Como el
	cargador de arranque es invocado en la tercera etapa del proceso de
	arranque, despues del bloque de arranque, las propiedades en el
	cargador de arranque sobreescribirán las del bloque de
	arranque.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78075344"></a>24.6.6.1. Instalando la consola serie</h4></div></div></div><p>Puede facilmente especificarle al cargador de arranque y al kernel
          que utilicen la consola serie escribiendo solamente una línea
          en <code class="filename">/boot/loader.rc</code>:</p><pre class="programlisting">set console="comconsole"</pre><p>Esto tendrá efecto sin importar las opciones del
          bloque de arranque discutidas en la sección previa.</p><p>Es mejor que ponga la línea de arriba como la primera
          línea en <code class="filename">/boot/loader.rc</code> para ver
          los mensajes de arranque en la consola serie tan pronto
          como sea posible.</p><p>De igual manera, puede especificar la consola interna como:</p><pre class="programlisting">set console="vidconsole"</pre><p>Si no activa la variable de entorno <code class="envar">console</code>,
          el cargador de arranque, y por consecuencia el kernel,
          utilizarán cualquier consola que esté indicada
          por la opción <code class="option">-h</code> en el bloque de
          arranque.</p><p>En versiones 3.2 o posteriores, puede especificar la consola
          en <code class="filename">/boot/loader.conf.local</code> o
          <code class="filename">/boot/loader.conf</code>, en lugar de
          <code class="filename">/boot/loader.rc</code>. En este método su
          <code class="filename">/boot/loader.rc</code> debe verse como:</p><pre class="programlisting">include /boot/loader.4th
start</pre><p>Entonces, puede crear <code class="filename">/boot/loader.conf.local</code> y
          ponerle la siguiente línea.</p><pre class="programlisting">console=comconsole</pre><p>o</p><pre class="programlisting">console=vidconsole</pre><p>Vea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> para mayor información.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Hasta el momento, el cargador de arranque no tiene una opción
            equivalente a la opción <code class="option">-P</code> del bloque
            de arranque, y no existe una manera de seleccionar automáticamente
            la consola interna y la consola serie basandose en la presencia
            del teclado.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78095312"></a>24.6.6.2. Utilizando un puerto serie para la consola diferente a <code class="filename">sio0</code></h4></div></div></div><p>Necesita recompilar el cargador de arranque para usar un puerto
          serie diferente a <code class="filename">sio0</code> para la consola
          serie. Siga el procedimiento descrito en <a class="xref" href="#serialconsole-com2" title="24.6.5.2. Usando puertos serie para consola diferentes a sio0">Sección 24.6.5.2, &#8220;Usando puertos serie para consola diferentes a <code class="filename">sio0</code>&#8221;</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-caveats"></a>24.6.7. Advertencias</h3></div></div></div><p>La idea aquí es permitir a las personas configurar servidores
        dedicados que no requieran hardware de gráficos o teclados
        conectados. Desafortunádamente, mientras la mayoría de
        los sistemas le permitirán arrancar sin un teclado, existen
        bastantes que no le permitirán arrancar sin un adaptador de
        gráficos. Máquinas con BIOS AMI pueden configurarse para
        arrancar sin adaptadores de gráficos instalados cambiando
        simplemente la opción <span class="quote">&#8220;<span class="quote">graphics adapter</span>&#8221;</span> en la
        configuración del CMOS a <span class="quote">&#8220;<span class="quote">Not installed.</span>&#8221;</span></p><p>De cualquier manera, muchas máquinas no soportan esta opción
        y se negarán a arrancar si no tiene algún hardware de
        gráficos instalado en el sistema. Con estas máquinas,
        debe dejar algún tipo de tarjeta gráfica instalada,
        (incluso si solamente es una tarjeta mono barata) aunque no tendrá
        que conectarle un monitor. También puede tratar instalando un
        BIOS AMI.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-and-slip"></a>Capítulo 25. PPP y SLIP</h2></div><div><span class="authorgroup">Reestructurado, reorganizado, y actualizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp78103248">25.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#userppp">25.2. Uso de User PPP</a></span></dt><dt><span class="sect1"><a href="#ppp">25.3. Uso de Kernel PPP</a></span></dt><dt><span class="sect1"><a href="#pppoe">25.4. Uso de <span class="application">PPP</span> sobre Ethernet (PPPoE)</a></span></dt><dt><span class="sect1"><a href="#pppoa">25.5. Uso de <span class="application">PPP</span> sobre ATM (PPPoA)</a></span></dt><dt><span class="sect1"><a href="#slip">25.6. Uso de SLIP</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp78103248"></a>25.1. Sinopsis</h2></div></div></div><a id="ppp-ppp" class="indexterm"></a><a id="ppp-slip" class="indexterm"></a><p>FreeBSD cuenta con un gran numero de formas para conectar una
      computadora a otra.  Para establecer una red o una conección a
      Internet por medio de un módem, o bien, permitir a otras
      computadoras conectarse por medio de este, se requiere del uso de
      PPP o SLIP.  Este capítulo describe en detalle como configurar
      los servicios de comunicación para llevar esto a cabo.</p><p>Una vez que haya leido este capítulo, usted sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Como configurar User PPP.</p></li><li class="listitem"><p>Como configurar Kernel PPP.</p></li><li class="listitem"><p>Como configurar <acronym class="acronym">PPPoE</acronym> (PPP over Ethernet*).
    	</p></li><li class="listitem"><p>Como configurar <acronym class="acronym">PPPoA</acronym> (PPP over ATM*).</p></li><li class="listitem"><p>Como instalar y configurar un cliente y servidor SLIP.</p></li></ul></div><p>N. de T.: En estricto sentido esto se refiere a
      contar con la conexión por medio de un dispositivo Ethernet,
      o bien ATM, pero debido a que usted encontrará estos
      metodos en su sistema, como PPPoE o bien PPPoA, se han
      dejado los conceptos <span class="quote">&#8220;<span class="quote">literales</span>&#8221;</span> del documento original.
      Espero que no sea un problema.</p><p>Antes de leer este capítulo, usted debiese:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Estar familiarizado con la terminología básica de
      redes.</p></li><li class="listitem"><p>Comprender lo básico y el propósito de una
      conección por módem SLIP y/o PPP.</p></li></ul></div><p>Puede ser que usted se pregunte cual es la principal diferencia
      entre User PPP y kernel PPP. La respuesta es sencilla; el método
      User PPP procesa la entrada y salida de datos en userland (ver nota
      siguiente) en lugar de hacerlo en el kernel.
      Esto es algo desgastante, en términos del manejo de datos
      entre userland y el kernel, pero permite, por mucho, un mejor
      desempeño e implementación de PPP.
      User PPP utiliza el dispositivo <code class="filename">tun</code> para
      comunicarse con el mundo exterior, mientras que kernel&#8212;ppp,
      utiliza el dispositivo <code class="filename">ppp</code>.</p><p>En el desarrollo de este capítulo, se hará referencia
      a User PPP, simplemente como <span class="emphasis"><em>ppp</em></span>, a menos de que
      sea necesaria hacer una distinción entre este y otro software
      de PPP, como es el caso de <code class="command">pppd</code>. Así mismo,
      si en el desarrollo del capítulo no se señala lo
      contrario, todos los comandos explicados, deberán ser ejecutados
      como <code class="systemitem">root</code>.</p><p>N. de T. : Cuando se habla de "userland"
      se hace referencia a todo aquello que *no* forma parte del kernel y que
      en el caso de código de programa, se ejecuta en modo usuario, ya
      que el código del kernel se ejecuta en modo kernel, supervisor,
      o bien en modo privilegiado de ejecución. En lo sucesivo este
      término será utilizado tal cual.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="userppp"></a>25.2. Uso de User PPP</h2></div><div><span class="authorgroup">Originalmente contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brian</span> <span class="surname">Somers</span></span>. </span></div><div><span class="authorgroup">Con apoyo de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Nik</span> <span class="surname">Clayton</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Dirk</span> <span class="surname">Frömberg</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Peter</span> <span class="surname">Childs</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78141520"></a>25.2.1. User PPP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78142160"></a>25.2.1.1. Aclaraciones</h4></div></div></div><p>Este documento asume que usted cuenta con lo siguiente:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="ppp-isp" class="indexterm"></a><a id="ppp-ppp2" class="indexterm"></a><p>Una cuenta activa con un Proveedor del Servicio de Internet
          (ISP&#8212;por sus siglas en inglées), que usted
          utliza para conectarse.</p></li><li class="listitem"><p>Adicionalmente, un módem o algún otro
          dispositivo, conectado a su sistema, y configurado
          correctamente, que le permite realizar la conexión
          con su ISP.</p></li><li class="listitem"><p>El número telefónico de su proveedor.</p></li><li class="listitem"><a id="ppp-pap" class="indexterm"></a><a id="ppp-chap" class="indexterm"></a><a id="ppp-unix" class="indexterm"></a><a id="ppp-login" class="indexterm"></a><a id="ppp-password" class="indexterm"></a><p>Su nombre de usuario y contraseña. (Ya sea un nombre
          de usuario y/o contraseña estilo UNIX, o bien para uso
          por medio de PAP o CHAP)</p></li><li class="listitem"><a id="ppp-nameserver" class="indexterm"></a><p>La dirección IP de uno o más servidores
          de nombres (DNS). Normalmente, estos serán provistos
          por su proveedor de Internet. Si su proveedor no le ha
          dado esta información, puede utilizar la opción
          <code class="command">enable dns</code> en su fichero
          <code class="filename">ppp.conf</code>, para indicarle a
          <span class="application">ppp</span> que configure el DNS por
          usted. Esta característica depende del sistema de
          negociación de DNS que mantenga su proveedor de
          Internet.</p></li></ul></div><p>La siguiente información puede ser que haya sido
      provista por su proveedor de servicios de internet, pero
      no es completamente necesaria:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La dirección IP del gateway (pasarela de salida)
          de su PSI. El gateway es la máquina a la cual usted
          se conectará y será la
          <span class="emphasis"><em>ruta por default</em></span>. Si usted no cuenta
          con esta información, puede inventar uno y al intentar
          conectarse, el servidor de su PSI, este nos indicará
          cual es el valor correcto.</p><p>Esta dirección IP, es referida por
          <span class="application">ppp</span> como
	      <code class="literal">HISADDR</code>.</p></li><li class="listitem"><p>La mascara de red (netmask) que debe utilizar. Si su PSI no
          le ha provisto de una, puede utilizar sin problema <code class="systemitem">255.255.255.255</code>.</p></li><li class="listitem"><a id="ppp-statis-ip" class="indexterm"></a><p>Si su PSI, le ha provisto de una dirección de IP
          estática y un nombre de host, puede capturarla. De otra
          forma podemos dejar que el servidor asigne cualquier IP que
          corresponda.</p></li></ul></div><p>Si usted no cuenta con alguna de la información que hemos
      comentado, le recomendamos contactar con su PSI para requerirla.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En el transcurso de la presente sección, algunos
        ejemplos muestran el contenido de archivos de configuración
        los cuales presentan una numeración. Estos números
        sirven como ayuda y referencia a cada línea, pero estos no
        deben de estar presentes en el archivo original. Una sangría
        adecuada, así como espacios adecuados, también son
        de suma importancia.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78171728"></a>25.2.1.2. Preparando el Kernel</h4></div></div></div><p>Como se comento anteriormente, la aplicación
          <span class="application">ppp</span> utiliza el dispositivo
          <code class="filename">tun</code>. Si este dispositivo no ha sido
          compilado dentro del kernel, <span class="application">ppp</span>
          lo cargará como módulo cuando sea requerido. El
          dispositivo tun es dinámico, de tal forma que se
          generara de acuerdo a la demanda que tenga (usted no esta
          limitado por el kernel).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vale la pena hacer notar que el controlador tun, crea los
      dispositivos de acuerdo a sus necesidades, por lo que el comando
      <code class="command">ifconfig -a</code>, no necesariamente mostrará
      los dispositivos <code class="filename">tun</code>.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78175440"></a>25.2.1.3. Verificando el dispositivo <code class="filename">tun</code></h4></div></div></div><p>Bajo circunstancias normales, la mayoría de los usuarios
      sólo utilizaran un dispositivo <code class="filename">tun</code>
	  (<code class="filename">/dev/tun0</code>).  En lo sucesivo podemos hacer
      referencia a <code class="filename">tun0</code> con la expresión
	  <code class="filename">tunN</code> donde  <code class="literal">N</code>
	  es el número que corresponde en su sistema.</p><p>Para instalaciones de FreeBSD que no tienen el habilitado el DEVFS
      la existencia de <code class="filename">tun0</code> debe ser verificada
      (esto no es necesario si se cuenta habilitada la opción DEVFS
      ya que los nodos de dispositivos seán creados en función
      a las necesidades).</p><p>La forma más sencilla de verificar si el dispositivo
      <code class="filename">tun0</code> se encuentra configurado
      correctamente, es la de rehacer el dispositivo. Para hacer esto
      simplemente siga los siguientes pasos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV tun0</code></strong></pre><p>Si usted necesita 16 dispositivos tun en su kernel, deberá
      crearlos. Esto puede hacerse de la siguiente manera:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /dev</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh MAKEDEV tun15</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78184272"></a>25.2.1.4. Configuración de la Resolución de Nombres</h4></div></div></div><a id="ppp-resolver" class="indexterm"></a><a id="ppp-hostname" class="indexterm"></a><a id="ppp-hosts" class="indexterm"></a><p>La resolución es la parte del sistema que busca una
	  dirección IP en los nombres de servidores (host) y
	  viceversa. Puede ser configurado para que busque en "mapas" que
	  describen la IP del servidor en uno de dos lugares, el primero
	  es un archivo llamado <code class="filename">/etc/hosts</code>.
	  Lea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> para más información al
	  respecto. El segundo es el Servicio de Nombres de Dominio de
	  Internet (DNS-Internet Domain Name Service), el cual es una
	  base de datos de distribución. Para mayor información
	  con respecto a los DNS, referirse a dns.</p><p>La resolución de nombres es un sistema que por medio de
	  llamadas, realiza el mapeo de nombres, pero es necesario inidicarle donde
	  debe buscar la información. Para versiones de FreeBSD anteriores
	  a la 5.0, esto es hecho al editar el archivo <code class="filename">/etc/host.conf</code>.
	  La versión 5.0 de FreeBSD utiliza el archivo <code class="filename">/etc/nsswitch.conf</code>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78190672"></a>25.2.1.4.1. Edición del archivo <code class="filename">/etc/host.conf</code></h5></div></div></div><p>Para versiones de FreeBSD anteriores a la 5.0, este archivo
	    debe contener las siguientes dos líneas (en este orden):</p><pre class="programlisting">hosts
bind</pre><p>Esto le indica a la resolución que busque en primer
	    término en el archivo <code class="filename">/etc/hosts</code>, y
	    posteriormente en el DNS, si el nombre no fué localizado</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78197456"></a>25.2.1.4.2. Editando el archivo <code class="filename">/etc/nsswitch.conf</code></h5></div></div></div><p>Para versiones de FreeBSD 5.0 y posteriores, este archivo debe
	    contener, al menos, la siguiente línea:</p><pre class="programlisting">hosts: files, dns</pre><p>Esto le indica a la resolución de nombres, que
	    busque en primer lugar en el archivo <code class="filename">/etc/hosts</code>,
	    y en caso de que el nombre no haya sido localizado, busque en
	    el DNS.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78200016"></a>25.2.1.4.3. Editando el archivo <code class="filename">/etc/hosts</code></h5></div></div></div><p>Este archivo puede contener direcciones IP, así como
	    el nombre de las máquinas de su red local. Como mínimo
	    debe contar con la información de la máquina que
	    correrá ppp. Asumiendo que su ordenador se llama
	    <code class="systemitem">foo.bar.com</code> con la dirección
	    IP <code class="systemitem">10.0.0.1</code>, el archivo
	    <code class="filename">/etc/hosts</code> debiese contener:</p><pre class="programlisting">127.0.0.1	localhost.bar.com	localhost
::1	localhost.bar.com	localhost
10.0.0.1	foo.bar.com		foo</pre><p>Las primeras dos líneas definen el alias del
	    <code class="systemitem">localhost</code>, como sinónimo de la maquina
	    actual. Independientemente de su propia dirección IP, la
	    dirección IP en estas líneas siempre debe ser <code class="systemitem">127.0.0.1</code> y <code class="systemitem">::1</code>.
	    La última línea especifica el nombre <code class="systemitem">
	    foo.bar.com</code> (asi como <code class="systemitem">foo</code> para acortarlo), para
	    la dirección <code class="systemitem">10.0.0.1</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La dirección <code class="systemitem">127.0.0.1</code> y el nombre
		<code class="systemitem">localhost</code> son conocidos como direcciones "loopback"
		las cuales hacen un "loopback" (salto de regreso) a la maquina local.</p></div><p>Si su proveedor de Internet, le asigna una dirección IP
	    fija, asín como un nombre, y usted no lo utiliza como nombre
	    del host, añada esto también al archivo
	    <code class="filename">/etc/hosts</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78213200"></a>25.2.1.4.4. Editando el archivo <code class="filename">/etc/resolv.conf</code></h5></div></div></div><p>El archivo <code class="filename">/etc/resolv.conf</code>, le indica a la
	    resolución de nombres, como comportarse. Normalmente deberá
	    de incluir la(s) siguiente(s) línea(s):</p><pre class="programlisting">domain <em class="replaceable"><code>ejemplo.com</code></em>
nameserver <em class="replaceable"><code>x.x.x.x</code></em>
nameserver <em class="replaceable"><code>y.y.y.y</code></em></pre><p>Donde <em class="replaceable"><code>x.x.x.x</code></em> y
	    <em class="replaceable"><code>y.y.y.y</code></em> deben reemplazarse con las direcciones
	    <acronym class="acronym">IP</acronym> de los servidores DNS, de su
	    <acronym class="acronym">ISP</acronym>.  Puede ser que esta información se la
	    hayan entregado al suscribirse o no, pero una rápida llamada a su
	    <acronym class="acronym">ISP</acronym> debe resolver esto.</p><p>Tambié puede configurar su sistema, de tal forma que
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> provee de un login para su conección por
	    <span class="application">PPP</span>.  Sólo añada:</p><pre class="programlisting">
	  !ppp
	  *.*        /var/log/ppp.log</pre><p>al fichero <code class="filename">/etc/syslog.conf</code>.  En la
	    mayoría de los casos esto funciona bien.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78221776"></a>25.2.1.5. Configuración Automática de
          <span class="application">PPP</span></h4></div></div></div><a id="idp78222672" class="indexterm"></a><p>Ambos, <code class="command">ppp</code> así como <code class="command">pppd</code>
	  (la implementación del kernel para PPP), utilizan la
	  configuración de los archivos localizados en el directorio
	  <code class="filename">/etc/ppp</code>.
	  Ejemplos para ppp, pueden encontrarse en:
	  <code class="filename">/usr/share/examples/ppp/</code>.</p><p>Para efecto de configurar correctamente <code class="command">ppp</code>, es
	  necesario editar varios ficheros, dependiendo de sus necesidades. La
	  manera en que edite dichos archivos, depende en la forma que utilice su
	  PSI (Proveedor de Servicios de Internet) para brindarle conexión,
	  ya sea por medio de una dirección IP estática o bien una IP
	  dinámica (ya sea que cada vez que se conecta obtiene una nueva
	  dirección).</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-staticIP"></a>25.2.1.5.1. PPP y direcciones de IP estáticas (fijas)</h5></div></div></div><a id="idp78235216" class="indexterm"></a><p>Será necesario editar el archivo de configuración;
	  <code class="filename">/etc/ppp/ppp.conf</code>. Y deberá quedar de una
	  manera similar al ejemplo que se describe a continuación.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las líneas que terminan con <code class="literal">:</code>, deben
	      comenzar en la primer columna del archivo &#8212; el resto de las
	      líneas deberán utilizar sangría como se muestra,
	      utilizando espacios o bien el tabulador.  La mayor parte de la
	      información que requiere ingresar aqui, se mostro en el
	      marcado manual anterior.</p></div><pre class="programlisting">1     default:
2       set log Phase Chat LCP IPCP CCP tun command
3       ident user-ppp VERSION (built COMPILATIONDATE)
4       set device /dev/cuaa0
5       set speed 115200
6       set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 5 \
7                 \"\" AT OK-AT-OK ATE1Q0 OK \\dATDT\\T TIMEOUT 40 CONNECT"
8       set timeout 180
9       enable dns
10
11    provider:
12      set phone "(123) 456 7890"
13      set authname foo
14      set authkey bar
15      set login "TIMEOUT 10 \"\" \"\" gin:--gin: \\U word: \\P col: ppp"
16      set timeout 300
17      set ifaddr <em class="replaceable"><code>x.x.x.x</code></em> <em class="replaceable"><code>y.y.y.y</code></em> 255.255.255.255 0.0.0.0
18      add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Línea 1:</span></dt><dd><p>Identifica la entrada por omisión a utilizar.
		  Los comandos descritos en esta parte, serán ejecutados de
		  manera automática cuando se ejecute ppp.</p></dd><dt><span class="term">Línea 2:</span></dt><dd><p>Habilita los par´metros de acceso. Cuando la
		  configuración trabaja sin problemas, esta línea
		  deberá quedar de la siguiente forma:

	          </p><pre class="programlisting">set log phase tun</pre><p>

			  para efecto de evitar avisos masivos del sistema (logs).</p></dd><dt><span class="term">Línea 3:</span></dt><dd><p>Esta línea le indica a PPP como identificarse ante el puerto.
		  PPP se identifica, si tiene algun problema para efecto de establecer
		  la conexión, en esta identificación, PPP provee de
		  cierta información que puede resultar util para detectar el
		  probelma.</p></dd><dt><span class="term">Línea 4:</span></dt><dd><p>Le indica a PPP cual es el dispositivo a utilizar para realizar
		  la conexión, o bien al que esta conectado el módem.
		  El dispositivo <code class="filename">COM1</code> es
		  <code class="filename">/dev/cuaa0</code> y
		  <code class="filename">COM2</code> es
		  <code class="filename">/dev/cuaa1</code>.</p></dd><dt><span class="term">Línea 5:</span></dt><dd><p>Establece la velocidad a utilizar en la conexión.
		  Si la velocidad de 115200 no trabaja correctamente (la cual
		  deberia con cualquier módem normal), intente con una
		  velocidad inferior, como puede ser 38400.</p></dd><dt><span class="term">Líneas 6 y 7:</span></dt><dd><a id="idp78254160" class="indexterm"></a><p>La cadena de inicialización. El modo User PPP, utiliza
		  y espera enviar-recibir, la información utilizando una
		  sintaxis similar a la descrita en el programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chat</span>(8)</span></a>. Favor
		  de consultar la página de ayuda para conocer las opciones
		  de este lenguaje.</p><p>Nota: Este comando continua en la siguiente línea, para
		  facilitar su lectura. Cualquier comando en el archivo
		  <code class="filename">ppp.conf</code> puede utilizar este formato, siempre
		  y cuando el último caracter de la línea sea una
		  diagonal invertida "\".</p></dd><dt><span class="term">Línea 8:</span></dt><dd><p>Establece el tiempo de espera que debe tratar de realizar la
		  conexión. Por omisión se establecen 180 segundos, por
		  lo que esta línea se deja por pura estética.</p></dd><dt><span class="term">Línea 9:</span></dt><dd><p>Esta línea le indica a PPP, que solicite confirmación
		  al puerto, sobre la configuración de la resolución local.
		  Si usted esta corriendo un servidor local de nombres, deberá
		  comentar o eliminar esta línea.</p></dd><dt><span class="term">Línea 10:</span></dt><dd><p>Una línea en blanco, para facilitar la lectura. Las
		  líneas en blanco son ignoradas por PPP.</p></dd><dt><span class="term">Línea 11:</span></dt><dd><p>Identifica el incio de datos para un <span class="quote">&#8220;<span class="quote">proveedor</span>&#8221;</span>
		  determinado, de servicios de internet.  Este podrá ser cambiado
		  por el nombre de su <acronym class="acronym">ISP</acronym>, de tal forma que en lo
		  sucesivo utilice la opción <code class="option">load ISP</code>, para
		  iniciar una sesión.</p></dd><dt><span class="term">Línea 12:</span></dt><dd><p>Indica el numero telefónico del proveedor.
		  Pueden indicarse varios numeros a utilizar, utilizando el signo
		  de dos puntos (<code class="literal">:</code>) o bien la barra
		  (<code class="literal">|</code>) como separador. La diferencia entre
		  estos dos separadores, es detallada en el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>. Pero
		  en resumen, se puede decir que si se desean utilizar varios
		  numeros de manera aleatoria se debe utilizar los dos puntos,
		  pero si se desea siempre utilizar el primer numero y en caso
		  de falla el siguiente y así sucesivamente, se debe utilizar
		  la barra. Es importante que todo lo que se refiere a numeros
		  telefonicos, este entre comillas como se muestra.  Es
		  importante que si piensa usar espacios en los numeros, haga
		  uso de estas comillas (<code class="literal">"</code>).  La falta de
		  estas pueden ocasionar un simple error.</p></dd><dt><span class="term">Líneas 13 y 14:</span></dt><dd><p>Identifica el nombre de usuario y su contraseña. Cuando
		  uno se conecta utilizando un login de tipo Unix, estos valores hacen
		  referencia al comando <code class="command">set login</code>, utilizando las
		  variables \U y \P. Cuando la conexión es utilizando algún
		  metodo como PAP o CHAP, estos valores, son utilizados al momento de la
		  autentificación.</p></dd><dt><span class="term">Línea 15:</span></dt><dd><a id="idp78275280" class="indexterm"></a><a id="idp78275792" class="indexterm"></a><p>Si usted esta utilizando el metodo PAP o CHAP, no habrá
		  un login en este punto, y esta línea deberá ser
		  comentada (utilizando el símbolo <code class="literal">#</code> al
		  principio de la línea) o bien eliminada por completo.
		  Vea la parte
		  <a class="link" href="#userppp-PAPnCHAP" title="25.2.1.5.5. Autentificación por medio de PAP y CHAP">Autentificación con PAP y CHAP
		  </a> para más detalles.</p><p>La cadena de acceso (login), utiliza la misma sintáxis que
          se utiliza en la cadena de marcado. En este ejemplo, la cadena sirve
          para un servicio, en el cual el inicio de sesión se ve algo
          así como lo siguiente:</p><pre class="screen">Proveedor de servicios X
login: <em class="replaceable"><code>foo</code></em>
password: <em class="replaceable"><code>bar</code></em>
protocol: ppp</pre><p>Es recomendable editar el script, para que se ajuste a sus propias
		  necesidades. Cuando cree este script por primera vez, asegurese de
		  haber habilitado la parte que se refiere a al acceso por medio de
		  <span class="quote">&#8220;<span class="quote">chat</span>&#8221;</span>, para efecto de poder dar seguimiento al curso de
		  la conexión y la resolución de la misma.</p></dd><dt><span class="term">Línea 16:</span></dt><dd><a id="idp78281040" class="indexterm"></a><p>Establece el tiempo por defecto en el que se perderá la
		  conexión (en segundos). En este caso la conexión
		  será cortada de forma automática, después de
		  300 segundos de inactividad. Si no desea habilitar esta función
		  establezca este valor en cero o bien utilice el comando en línea
		  <code class="option">-ddial</code>.</p></dd><dt><span class="term">Línea 17:</span></dt><dd><a id="idp78295888" class="indexterm"></a><p>Indica la dirección de la interfaz. La cadena que aparece
		  como <em class="replaceable"><code>x.x.x.x.</code></em>, debe se cambiada por la
		  dirección asignada por su PSI. La línea que aparece como
		  <em class="replaceable"><code>y.y.y.y.</code></em>, debe se substituida por la
		  direcció IP especificada por su PSI, como servidor de salida o
		  pasarela (gateway)(la maquina a la cual se va a conectar). Si su PSI
		  no le ha indicado una dirección de este tipo, puede utilizar
		  <code class="systemitem">10.0.0.2/0</code>. Si usted necesita utilizar
		  una dirección <span class="quote">&#8220;<span class="quote">aleatoria</span>&#8221;</span>, asegurese de crear el
		  fichero <code class="filename">/etc/ppp/ppp.linkup</code>, siguiendo las
		  instrucciones de <a class="link" href="#userppp-dynamicIP" title="25.2.1.5.2. PPP y direcciones de IP Dinámicas (Variables)">PPP y las
		  direcciones de IP Dinámicas</a>, para su llenado. Si esta
		  línea es omitida, <code class="command">ppp</code>, no podrá
		  ejecutarse en el modo <code class="option">-auto</code>.</p></dd><dt><span class="term">Línea 18:</span></dt><dd><p>Añade una ruta por omisión al servidor de salida
		  de su PSI. La palabra especial <code class="literal">HISADDR</code> se
		  reemplaza con la dirección del gateway indicado por su PSI,
		  que esta en la línea 9, de otra forma <code class="literal">HISADDR</code>
		  no será inicializado.</p><p>Si no desea ejecutar <code class="command">ppp</code> en modo
		  <code class="option">-auto</code>, esta línea deberá pasar al
		  archivo <code class="filename">ppp.linkup</code>.</p></dd></dl></div><p>No hay necesidad de editar el archivo <code class="filename">ppp.linkup</code>
	    si usted cuenta con una dirección IP estática y se esta
	    ejecutando ppp en modo <code class="option">-auto</code>, en virtud de que para
	    efecto de realizar la conexión sus mapas de ruteo debe estar
	    correctas. De cualquier forma puede ser que usted desee ejecutar
	    algun programa/comando, posterior a la conexión. Este es
	    explicado con más detalle posteriormente, cuando se vea el
	    ejemplo de sendmail.</p><p>Ejemplo de los archivos de configuración, se pueden
	    encontrar en el directorio; <code class="filename">/usr/share/examples/ppp</code>.
	    </p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-dynamicIP"></a>25.2.1.5.2. PPP y direcciones de IP Dinámicas (Variables)</h5></div></div></div><a id="idp78307280" class="indexterm"></a><a id="idp78308432" class="indexterm"></a><p>Si su proveedor de servicios, no le asigna una dirección de IP
	    fija, será necesario configurar a <code class="command">ppp</code>, de tal
	    forma que al momento de realizar la conexión, negocie tanto la
	    dirección local, como la remota. Esto se lleva a cabo al
	    <span class="quote">&#8220;<span class="quote">adivinar</span>&#8221;</span> una dirección IP y permitiendo a
	    <code class="command">ppp</code> que la establezca correctamente, usando el
	    Protocolo de Configuración de IP (IPCP), una vez que se ha
	    conectado. La configuración que debe tener el archivo
	    <code class="filename">ppp.conf</code>, es la misma que la utilizada en
	    <a class="link" href="#userppp-staticIP" title="25.2.1.5.1. PPP y direcciones de IP estáticas (fijas)">PPP y direcciones de IP fijas</a>,
	    salvo el siguiente cambio:</p><pre class="programlisting">17      set ifaddr 10.0.0.1/0 10.0.0.2/0 255.255.255.255</pre><p>Una vez más, no debe incluir el numero de línea, este
	    sólo es una referencia. Así mismo deberá existir
	    sangrado, de cuando menos 1 espacio.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Línea 17:</span></dt><dd><p>El numero siguiente a la diagonal (<code class="literal">/</code>), es el
		  numero de bits de la dirección en la cual ppp insistirá
		  en conectarse. Puede ser que usted desee utilizar numeros de IP que
		  sean más apropiados, para ajustar a sus necesiadades, pero el
		  ejemplo descrito anteriormente siempre podrá utilizarse.</p><p>El último argumento (<code class="literal">0.0.0.0</code>), le
		  indica a PPP, que inicie las negociaciones, utilizando como
		  dirección <code class="systemitem">0.0.0.0</code>, en lugar de
		  que utilice <code class="systemitem">10.0.0.1</code>, lo cual es
		  necesario con algunos proveedores. No utilice la dirección
		  <code class="literal">0.0.0.0</code> como el primer argumento, para el comando
		  <code class="command">set ifaddr</code>, ya que impide que PPP configure de
		  forma correcta el sistema, cuando se utiliza en modo
		  <code class="option">-auto</code>.</p></dd></dl></div><p>Si usted no esta ejecutando PPP en modo <code class="option">-auto</code>,
	    deberá editar su archivo <code class="filename">/etc/ppp/ppp.linkup</code>.
	    El archivo <code class="filename">ppp.linkup</code>, es utilizado una vez que se
	    ha realizado la conexión. En este punto, <code class="command">ppp</code>
	    habrá negociado una dirección de interfaz, y será
	    posible ahora, añadir las entradas para la las tablas de ruteo:
	    </p><pre class="programlisting">1     provider:
2      add default HISADDR</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Línea 1:</span></dt><dd><p>Al establecer (<code class="command">ppp</code>) una conexión,
		  buscará en <code class="filename">ppp.linkup</code> una entrada, de
		  acuerdo a las siguientes reglas. Primero, tratar de encontrar una
		  entrada que sea igual a la utilizada en el archivo
		  <code class="filename">ppp.conf</code>. Si esto falla, buscar una IP con la
		  dirección de nuestro gateway. Esta entrada es una etiqueta
		  de tipo IP, de cuatro-octetos. Si aun después de esto no se
		  ha detectado la entrada correcta, buscar la entrada
		  <code class="literal">MYADDR</code>.</p></dd><dt><span class="term">Línea 2:</span></dt><dd><p>Esta línea le indica a <code class="command">ppp</code> que
		  añada una ruta por omisión, que este dirigida hacia
		  <code class="literal">HISADDR</code>.
		  <code class="literal">HISADDR</code> será reemplazada, con la IP del
		  gateway, como se negocio por IPCP.</p></dd></dl></div><p>Para ver un detalle más preciso de esto, puede consultar
	    la entrada de <code class="literal">pmdemand</code> en los archivos de ejemplo
	    <code class="filename">/usr/share/examples/ppp/ppp.conf.sample</code> así
	    como <code class="filename">/usr/share/examples/ppp/ppp.linkup.sample</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78356688"></a>25.2.1.5.3. Recibiendo Llamadas Externas</h5></div></div></div><a id="idp78357456" class="indexterm"></a><p>Cuando se configure <span class="application">ppp</span>, para recibir
	    llamadas externas, en una maquina conectada a un LAN (Red de Area Local),
	    debe decidir si se va a permitir el envío de paquetes a la LAN. Si
	    es así, debe asignar un numero de IP de su red local y utilizar el
	    comando <code class="command">enable proxy</code> en el archivo de configuracion
	    <code class="filename">/etc/ppp/ppp.conf</code>. También deberá
	    asegurarse que en su archivo <code class="filename">/etc/rc.conf</code> cuente
	    con la línea:</p><pre class="programlisting">gateway_enable="YES"</pre><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78360528"></a>25.2.1.5.3.1. ?Qué getty utilizar?</h6></div></div></div><p>El enlace
	      Configurando FreeBSD para Servicios de Marcado provee de una buena
              descripció, sobre la configuración de estos servicios,
              basado en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>.</p><p>Una alternativa para el comando <code class="command">getty</code>
	      es <a class="link" href="http://www.leo.org/~doering/mgetty/index.html" target="_top">mgetty
	      </a>, el cual es una versión más inteligente de getty
	      diseñada para servicios de marcado telefonico.</p><p>Una de las principales ventajas de <code class="command">mgetty</code> es
	      que, de hecho <span class="emphasis"><em>platica</em></span> con los modems, esto es,
	      significativo, ya que si el puerto esta desactivado en su
	      <code class="filename">/etc/ttys</code> el modem no responderá el
	      llamado.</p><p>Las últimas versiones de <code class="command">mgetty</code>
	      (de la 0.99beta y sucesivas), también cuentan con soporte
	      para la detección automática de llamados de PPP,
	      permitiendo el acceso a servidores de una manera más sencilla
	      (sin uso de tanto scripts).</p><p>Puede referirse a <a class="link" href="#userppp-mgetty" title="25.2.1.5.4.1. mgetty y AutoPPP">Mgetty y
	      AutoPPP</a> para más información con respecto
	      al comando <code class="command">mgetty</code>.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78371536"></a>25.2.1.5.3.2. Permisos de <span class="application">PPP</span></h6></div></div></div><p>El comando <code class="command">ppp</code> normalmente debe ser ejecutado
	      por root (superusuario). Si de cualquier forma, usted desea permitir
	      que <code class="command">ppp</code> pueda ser ejecutado en modo servidor, por
	      un usuario regular, como se describe a continuación,
	      deberá otorgar los permisos necesarios a ese usuario al
	      añadirlo al grupo <code class="systemitem">network</code>, en el fichero
	      <code class="filename">/etc/groups</code>.</p><p>También será necesario darle acceso a una o
	      más partes del archivo de configuración, haciendo
	      uso del comando <code class="command">allow</code>, como se ve
	      a continuación:</p><pre class="programlisting">allow users fred mary</pre><p>Si el comando es utilizado en la sección
	      <code class="literal">default</code>, esto le dará a el(los)
	      usuario(s) especificado(s),  acceso a todo.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78376656"></a>25.2.1.5.3.3. Shells  de PPP para Usuarios de IP Dinámica</h6></div></div></div><a id="idp78377296" class="indexterm"></a><p>Cree un fichero llamado:
	      <code class="filename">/etc/ppp/ppp-shell</code> y que contenga
	      lo siguiente:</p><pre class="programlisting">#!/bin/sh
IDENT=`echo $0 | sed -e 's/^.*-\(.*\)$/\1/'`
CALLEDAS="$IDENT"
TTY=`tty`

if [ x$IDENT = xdialup ]; then
        IDENT=`basename $TTY`
fi

echo "PPP for $CALLEDAS on $TTY"
echo "Starting PPP for $IDENT"

exec /usr/sbin/ppp -direct $IDENT</pre><p>Este script deberá ser ejecutable. Ahora cree un
	      enláce simbólico llamado <code class="filename">ppp-dialup</code>
	      a este script, utilizando los siguientes comandos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s ppp-shell /etc/ppp/ppp-dialup</code></strong></pre><p>Deberá utilizar este script como
	      <span class="emphasis"><em>shell</em></span> para todos los usuarios que realicen
	      conexión.
		  Este es un ejemplo del fichero <code class="filename">/etc/password</code>
		  para un usuario con acceso a PPP, con nombre de usuario
		  <code class="systemitem">pchilds</code> (recuerde no editar directamente el
		  fichero password, utilice <code class="command">vipw</code>).</p><pre class="programlisting">pchilds:*:1011:300:Peter Childs PPP:/home/ppp:/etc/ppp/ppp-dialup</pre><p>Cree un directorio llamado <code class="filename">/home/ppp</code> que
	      contenga los siguentes archivos de 0 bytes:</p><pre class="screen">-r--r--r--   1 root     wheel           0 May 27 02:23 .hushlogin
-r--r--r--   1 root     wheel           0 May 27 02:22 .rhosts</pre><p>los cuales impiden que <code class="filename">/etc/motd</code> sea
	      desplegado.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78389328"></a>25.2.1.5.3.4. Shells de PPP para Usuarios de IP Estática</h6></div></div></div><a id="idp78394192" class="indexterm"></a><p>Cree el fichero <code class="filename">ppp-shell</code> al igual
	      que el mencionado con anterioridad, y por cada cuenta donde
	      se tenga asignada una IP estática, cree un enlace
	      simbólico al fichero <code class="filename">ppp-shell</code>.</p><p>Por ejemplo, si usted cuenta con tres usuarios que utilicen
	      este servicio; <code class="systemitem">fred</code>, <code class="systemitem">sam</code>
	      y <code class="systemitem">mary</code>, los cuales redirecciona a una red de
	      clase C, habria que hacer lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-fred</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-sam</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /etc/ppp/ppp-shell /etc/ppp/ppp-mary</code></strong></pre><p>Cada uno de los usuarios señalados, deberán
	      de contar con el enlace a su shell-script como se indicó
	      (por ejemplo, el usuario <code class="systemitem">mary</code>, debe contar
	      con su enlace al fichero <code class="filename">/etc/ppp/ppp-mary</code>).</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78401616"></a>25.2.1.5.3.5. Configurando <code class="filename">ppp.conf</code> para Usuarios
	      de IP-Dinámica</h6></div></div></div><p>El archivo <code class="filename">/etc/ppp/ppp.conf</code> deberá
	      contener algo similar a lo siguiente:</p><pre class="programlisting">default:
  set debug phase lcp chat
  set timeout 0

ttyd0:
  set ifaddr 203.14.100.1 203.14.100.20 255.255.255.255
  enable proxy

ttyd1:
  set ifaddr 203.14.100.1 203.14.100.21 255.255.255.255
  enable proxy</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tomar en cuenta el sangrado, ya que es importante.</p></div><p>La sección <code class="literal">default:</code> es cargada
	      para cada sesión. Para cada línea que exista y
	      habilite el marcado, en el fichero <code class="filename">/etc/ttys</code>,
	      se deberá crear una entrada similar a la línea
	      <code class="literal">ttyd0:</code> mencionada arriba. Cada línea
	      debera contar con su propia dirección IP, de sus direcciones
	      IP disponibles para asignar dinámicamente.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78406352"></a>25.2.1.5.3.6. Configurando <code class="filename">ppp.conf</code> para Usuarios
	      de IP Estática</h6></div></div></div><p>Junto con el contenido del fichero de ejemplo
	      <code class="filename">/usr/share/examples/ppp/ppp.conf</code> mencionado
	      anteriormente, deberá agregar una sección para cada
	      usuario asignado estáticamente.
	      Continuaremos con nuestro ejemplo con los usuarios
	      <code class="systemitem">fred</code>, <code class="systemitem">sam</code> y
	      <code class="systemitem">mary</code>.</p><pre class="programlisting">fred:
  set ifaddr 203.14.100.1 203.14.101.1 255.255.255.255

sam:
  set ifaddr 203.14.100.1 203.14.102.1 255.255.255.255

mary:
  set ifaddr 203.14.100.1 203.14.103.1 255.255.255.255</pre><p>El archivo <code class="filename">/etc/ppp/ppp.linkup</code>
	      deberá de contener también información
	      del ruteo, para cada IP estática, si es necesario. Las
	      líneas a continuación añadirán una
	      ruta a la dirección <code class="systemitem">203.14.101.0</code>
	      de clase C, por medio del ppp link del cliente.</p><pre class="programlisting">fred:
  add 203.14.101.0 netmask 255.255.255.0 HISADDR

sam:
  add 203.14.102.0 netmask 255.255.255.0 HISADDR

mary:
  add 203.14.103.0 netmask 255.255.255.0 HISADDR</pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78412112"></a>25.2.1.5.4. Algo más de <code class="command">mgetty</code>, AutoPPP, y
	    Extensiones MS</h5></div></div></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-mgetty"></a>25.2.1.5.4.1. <code class="command">mgetty</code> y AutoPPP</h6></div></div></div><a id="idp78414160" class="indexterm"></a><a id="idp78415056" class="indexterm"></a><a id="idp78415568" class="indexterm"></a><p>Configurando y compilando <code class="command">mgetty</code> con
	      la opción <code class="literal">AUTO_PPP</code> habilitada, permite
	      a <code class="command">mgetty</code> detectar la fase LCP de conexiones PPP
	      y automáticamente enviarlo a un shel de ppp. Aun con esto,
	      y debido a que no se ingresa el nombre de usuario y contraseña,
	      es necesario autntificarse por medio de PAP o CHAP.</p><p>Esta sección asume que el usuaio ha configurado,
	      compilado e instalado correctamente una versión de
	      <code class="command">mgetty</code>, con la opción
	      <code class="literal">Auto_PPP</code> (v0.99beta o posterior).</p><p>Asegurese de que su fichero
	      <code class="filename">/usr/local/etc/mgetty+sendfax/login.conf</code>
	      contiene la siguiente línea en él:</p><pre class="programlisting">/AutoPPP/ -     -		      /etc/ppp/ppp-pap-dialup</pre><p>Esto le indicará a <code class="command">mgetty</code> que ejecute
	      el script <code class="filename">ppp-pap-dialup</code>, para efecto de detectar
	      conexiones de tipo PPP.</p><p>Cree un fichero llamado
	      <code class="filename">/etc/ppp/ppp-pap-dialup</code> que contenga
	      las siguientes líneas (el fichero deberá
	      ser ejecutable):</p><pre class="programlisting">#!/bin/sh
exec /usr/sbin/ppp -direct pap$IDENT</pre><p>Para cada línea de marcado habilitada en
	      <code class="filename">/etc/ttys</code>, cree la entrada
	      correspondiente en <code class="filename">/etc/ppp/ppp.conf</code>.
	      Esto co-existirá pacíficamente con las
	      definiciaones que se hayan hecho, de acuerdo a lo mostrado
	      en la parte de arriba.</p><pre class="programlisting">pap:
  enable pap
  set ifaddr 203.14.100.1 203.14.100.20-203.14.100.40
  enable proxy</pre><p>Cada usuario que ingrese al sistema utilizando este
	      metodo, deberá de contar con su clave de usuario,
	      así como su contraseña, en el archivo
	      <code class="filename">/etc/ppp/ppp.secret</code>, o bien agrege
	      la siguiente opción, para efecto de que se pueda realizar
	      la autentificación por medio de PAP, directamente
	      del fichero <code class="filename">/etc/password</code>.</p><pre class="programlisting">enable passwdauth</pre><p>Si desea asignar una dirección IP fija a
	      algunos usuarios, puede especificar el número como
	      un tercer argumento en el fichero
	      <code class="filename">/etc/ppp/ppp.secrets</code>. Vea el archivo
	      <code class="filename">/usr/share/examples/ppp/ppp.secret.sample</code>
	      para obtener ejemplos más detallados de esto.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78430928"></a>25.2.1.5.4.2. Extensiones de MS</h6></div></div></div><a id="idp78431568" class="indexterm"></a><a id="idp78432080" class="indexterm"></a><a id="idp78432592" class="indexterm"></a><p>Es posible configurar PPP, para efecto de que
	      brinde a DNS y a NetBIOS, direcciones de servidores
	      de nombres de forma automática.</p><p>Para efecto de habilitar estas extensiones con PPP
	      versión 1.x, las siguientes líneas
	      deberán añadirse a la sección relevante
	      de <code class="filename">/etc/ppp/ppp.conf</code>.</p><pre class="programlisting">enable msext
set ns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>Y para versiones de PPP 2 y posteriores:</p><pre class="programlisting">accept dns
set dns 203.14.100.1 203.14.100.2
set nbns 203.14.100.5</pre><p>Esto le indicará a los clientes, las direcciones
	      del servidor primario y secundario y el servidor-host para
	      NetBIOS.</p><p>Si la línea <code class="literal">set dns</code>, es omitida
	      en versiones 2 y posteriores, PPP utilizará los valores
	      que encuentre en <code class="filename">/etc/resolv.conf</code>.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-PAPnCHAP"></a>25.2.1.5.5. Autentificación por medio de PAP y CHAP</h5></div></div></div><a id="idp78438224" class="indexterm"></a><a id="idp78438736" class="indexterm"></a><p>Algunos proveedores de internet tienen su sistema
	    configurado para que cada usuario al conecatrse sean
	    autentificados por medio de PAP o CHAP. Si este es el caso,
	    al momento de realizar la conexion, no aparecerá
	    un <code class="prompt">login:</code>, sino que comenzará a
	    comunicarse PPP inmediatamente.</p><p>El metodo PAP es menos seguro que CHAP, pero la seguridad
	    normalmente no se toma mucho en cuenta en este tipo de
	    conexiones, en funcion de que al enviarse la información
	    de contraseña en texto plano, por medio de una
	    línea serial, no deja mucho espacio para que los
	    crackers <span class="quote">&#8220;<span class="quote">husmeen</span>&#8221;</span>.</p><p>Haciendo referencia a lo que vimos de
	    <a class="link" href="#userppp-staticIP" title="25.2.1.5.1. PPP y direcciones de IP estáticas (fijas)">PPP y Direcciones de IP
	    Fijas</a> o bien <a class="link" href="#userppp-dynamicIP" title="25.2.1.5.2. PPP y direcciones de IP Dinámicas (Variables)">PPP y Direcciones
	    de IP Dinámicas</a>, habría que aplicar los
	    siguientes cambios:</p><pre class="programlisting">7       set login
&#8230;
12      set authname <em class="replaceable"><code>MiNombreDeUsuario</code></em>
13      set authkey <em class="replaceable"><code>MiContraseña</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Línea 7:</span></dt><dd><p>Su PSI normalmente requerirá que usted ingrese
		  al sistema, cuando se utiliza PAP o CHAP. Por esta
		  razón debemos deshabilitar la línea que
		  corresponde a <span class="quote">&#8220;<span class="quote">set login</span>&#8221;</span>.</p></dd><dt><span class="term">Línea 12:</span></dt><dd><p>Esta línea especifíca a PAP/CHAP su nombre
		  de usuario. Usted deberá cambiar el valor a quedar el
		  nombre correcto en el campo;
		  <em class="replaceable"><code>MiNombreDeUsuario</code></em>.</p></dd><dt><span class="term">Línea 13:</span></dt><dd><a id="idp78456784" class="indexterm"></a><p>Esta línea especifíca su contraseña
		  de PAP/CHAP. Es necesario que usted cambie el valor a quedar
		  el dato correcto, en el campo;
		  <em class="replaceable"><code>MiContraseña</code></em>. Quizás
		  sea recomendable que añada una línea a quedar:</p><pre class="programlisting">15      accept PAP</pre><p>o</p><pre class="programlisting">15      accept CHAP</pre><p>la intención de esto es para hacerlo obvio,
		  aunque en realidad PAP y CHAP son aceptadas por
		  omisión.</p></dd></dl></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78460240"></a>25.2.1.5.6. Cambiando la configuración de <code class="command">ppp</code>
	    sobre la marcha (al vuelo)</h5></div></div></div><p>Es posible hablar con el programa <code class="command">ppp</code>
	    mientras se esta ejecutando en segundo plano, pero sólo
	    si se ha habilitado un puerto de diagnóstico. Para
	    hacer esto, añada lo siguiente a su
	    configuración:</p><pre class="programlisting">set server /var/run/ppp-tun<em class="replaceable"><code>%d</code></em> DiagnosticPassword 0177</pre><p>Esto le indicará a PPP que preste
	    atención al socket del dominio-Unix, solicitando a
	    los usuarios su contraseña, antes de permitir el acceso.
	    La variable <code class="literal">%d</code> deberá ser reemplazada
	    por el numero de dispositivo <code class="filename">tun</code> que
	    este utilizando (ej. <code class="filename">tun0</code>).</p><p>Una vez que se a configurado el socket, se puede utilizar
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pppctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pppctl</span>(8)</span></a> en scripts que deseen manipular el programa.
	    </p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="userppp-final"></a>25.2.1.6. Configuración Final del Sistema</h4></div></div></div><a id="idp78466768" class="indexterm"></a><p>Ahora usted cuenta con un <code class="command">ppp</code> configurado,
	  pero es necesario hacer algunas cosas, antes de que este disponible
	  para trabajar. Todas ellas giran entorno a la edición del
	  fichero <code class="filename">/etc/rc.conf</code>.</p><p>En primer lugar es importante que se asegure que ha asignado
	  un nombre a su maquina. Esto se hace asignandolo en la línea
	  de <code class="literal">hostname=</code>, por ejemplo:</p><pre class="programlisting">hostname="foo.ejemplo.com"</pre><p>Si su Proveedor de Servicios de Internet (PSI), le ha
	  provisto de una dirección fija y un nombre de host, es
	  recomendable que utilice este como su
	  <code class="literal">hostname</code>.</p><p>Localice la línea que se refiera a sus dispositivos
	  de red, la cual es <code class="literal">network_interfaces</code>.
      Si desea configurar su sistema para marcar a su PSI a petición,
      asegurese de que el dispositivo <code class="filename">tun0</code> este
      en la lista, de otra forma eliminelo.</p><pre class="programlisting">network_interfaces="lo0 tun0" ifconfig_tun0=</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">La variable <code class="literal">ifconfig_tun0</code> debe permanecer
	    en blanco (vacia), y deberá crearse un fichero llamado
	    <code class="filename">/etc/start_if.tun0</code> que contenga la siguiente
	    línea:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ppp -auto MiSistema</pre><p xmlns="http://www.w3.org/1999/xhtml">Este script se ejecuta cuando se esta configurando la red,
	    inicializando el demonio de ppp de modo automático. Si
	    usted cuenta con una LAN (red de área local), de la cual
	    esta maquina sea la pasarela (gateway), es tambien recomendable
	    que utilice la opción <code class="option">-alias</code>. Referirse
	    a la página de ayuda (man) para mayores detalles.</p></div><p>Especifique el programa router a <code class="literal">NO</code>, con
	  la siguiente línea en su fichero
	  <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">router_enable="NO"</pre><a id="idp78476496" class="indexterm"></a><p>Es importante que el demonio <code class="command">routed</code>
	  no se inicialice por default, en virtud de que
	  <code class="command">routed</code> tiende a eliminar las variables
	  creadas por <code class="command">ppp</code>.</p><p>Probablemente valga la pena asegurarse de que la
	  línea <code class="literal">sendmail_flags</code>, no incluya
	  la opción <code class="option">-q</code>, ya que de ser así
	  <code class="command">sendmail</code> intentará localizar los
	  parámetros de la red de vex en cuando, ocasionando que realice
	  llamados al exterior. Puede intentar esto:</p><pre class="programlisting">sendmail_flags="-bd"</pre><a id="idp78489296" class="indexterm"></a><p>La parte negativa de esta conifguración es que tiene
	  que forzar a <code class="command">sendmail</code> a re-examinar los llamados
	  del servidor de correo, cada vez que <code class="command">ppp</code> realiza
	  una conexión, con el siguiente comando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/sendmail -q</code></strong></pre><p>Puede utilizar el comando <code class="command">!bg</code> en el fichero
	  <code class="filename">ppp.linkup</code> para hacer esto de manera
	  automática:</p><pre class="programlisting">1     provider:
2       delete ALL
3       add 0 0 HISADDR
4       !bg sendmail -bd -q30m</pre><a id="idp78493776" class="indexterm"></a><p>Si usted no desea hacer esto, es posible establecer un
	  <span class="quote">&#8220;<span class="quote">dfilter</span>&#8221;</span> (filtro), para bloquear el tráfico al
	  servidor de salida de correo (SMTP). Favor de referirse a los archivos
	  de ejemplos para mayor detalle al respecto.</p><p>Ahora lo único que queda pendiente de hacerse es
	  reiniciar el equipo. Una vez reiniciado el equipo, puede teclear:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp</code></strong></pre><p>y posteriormente <code class="command">dial proveedor</code> para iniciar
	  la sesión, o bien si desea que <code class="command">ppp</code> inicie la
	  sesión automáticamente, cuando haya una petición de salida
	  (y no haya creado el fichero <code class="filename">start_if.tun0</code>), puede
	  teclear:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -auto proveedor</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78499024"></a>25.2.1.7. Summario</h4></div></div></div><p>A manera de recapitulación, podemos decir que para
	  configurar ppp por primera ocasión, debemos:</p><p>Por parte del Cliente:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Asegurese de que existe el dispositivo <code class="filename">tun</code>
	      dentro de su kernel.</p></li><li class="step"><p>Asegurses de que el dispositivo
	      <code class="filename">tunX</code>, se encuentra
	      disponible, bajo el directorio <code class="filename">/dev</code>.</p></li><li class="step"><p>Cree una entrada en su fichero
	      <code class="filename">/etc/ppp/ppp.conf</code>. Con el fichero de ejemplo
	      <code class="filename">pmdemand</code> debe ser suficiente para la mayoria de
	      proveedores.</p></li><li class="step"><p>Si cuenta con una dirección de IP dinámica, cree
	      una entrada en el fichero <code class="filename">/etc/ppp/ppp.linkup</code>
	      .</p></li><li class="step"><p>Actualice su fichero <code class="filename">/etc/rc.conf</code>.</p></li><li class="step"><p>Cree un archivo script llamado <code class="filename">start_if.tun0</code>
	      si requiere servicio de conexión a solicitud.</p></li></ol></div><p>Por parte del Servidor:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Asegurese de que dentro de su kernel exista el dispositivo
	      <code class="filename">tun</code>.</p></li><li class="step"><p>Asegurses de que el dispositivo
	      <code class="filename">tunX</code>, se encuentra
	      disponible, bajo el directorio <code class="filename">/dev</code>.</p></li><li class="step"><p>Cree una entrada en el fichero <code class="filename">/etc/passwd</code>
	      (usando el programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a>).</p></li><li class="step"><p>Cree un perfil en el directorio home de este usuario, que ejecute
	      <code class="command">ppp -direct direct-server</code> o algo
	      similar.</p></li><li class="step"><p>Cree una entrada en el fichero
	      <code class="filename">/etc/ppp/ppp.conf</code>. El fichero de ejemplo
	      <code class="filename">direct-server</code> debe ser suficiente para
	      darse una idea.</p></li><li class="step"><p>Cree una entrada en el fichero
	      <code class="filename">/etc/ppp/ppp.linkup</code>.</p></li><li class="step"><p>Actualice su fichero <code class="filename">/etc/rc.conf</code>.</p></li></ol></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp"></a>25.3. Uso de Kernel PPP</h2></div><div><span class="authorgroup">Partes originalmente desarrolladas por  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gennady B.</span> <span class="surname">Sorokopud</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Huff</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78527184"></a>25.3.1. Configurando Kernel PPP</h3></div></div></div><a id="idp78527824" class="indexterm"></a><p>Antes de comenzar a configurar PPP en su maquina,
        asegurese de <code class="command">pppd</code> se localiza en
        <code class="filename">/usr/sbin</code> y de que existe el directorio
        <code class="filename">/etc/ppp</code>.</p><p><code class="command">pppd</code> puede trabajar de dos maneras</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Como un <span class="quote">&#8220;<span class="quote">cliente</span>&#8221;</span> &#8212; cuando desea conectar
	    su maquina al mundo exterior utilizando PPP, por medio de una
	    conexión serial o bien una línea de modem.</p></li><li class="listitem"><a id="idp78532432" class="indexterm"></a><p>como un <span class="quote">&#8220;<span class="quote">servidor</span>&#8221;</span> &#8212; cuando su maquina esta
	    conectada a una red y es utilizada para que otras maquinas se
	    conecten utilizando ppp.</p></li></ol></div><p>En ambos casos, será necesario configurar un
        fichero de opciones (<code class="filename">/etc/ppp/options</code> o bien
        <code class="filename">~/.ppprc</code> si se cuenta con más de un
        usuario que utilizará ppp en la misma maquina.</p><p>También deberá de contar con un software para
        hacer la conexión por medio de módem (de
        preferencia kermit), de manera que pueda hacer la conexión
        con un host remoto.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78540112"></a>25.3.2. Uso de <code class="command">pppd</code> como Cliente</h3></div><div><span class="authorgroup">Basedo en información provista por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Trev</span> <span class="surname">Roydhouse</span></span>. </span></div></div></div><a id="idp78542928" class="indexterm"></a><a id="idp78543696" class="indexterm"></a><p>El siguiente archivo de configuración
        <code class="filename">/etc/ppp/options</code> puede utilizarse para
        realizar la conexión a una terminal CISCO, por medio
        de PPP.</p><pre class="programlisting">crtscts         # habilita el flujo de controls de hardware
modem           # línea de control del modem
noipdefault     # el servidor PPP remoto asignará la dirección IP
                # si el servidor no envia una dirección IP durante IPCP
                # remueva esta opción.
passive         # espere por los paquetes LCP
domain ppp.foo.com      # escriba su nombre de dominio aqui

:&lt;remote_ip&gt;    # escriba la IP del host remoto aqui
                # este será utilizado para el ruteo de paquetes por medio
                # de PPP, si no especifica esta opción, cambie la
                # línea a quedar  &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute    # establezca esta opción si el servidor su ruteador
                # por default</pre><p>Para conectarse:</p><a id="idp78545872" class="indexterm"></a><a id="idp78546384" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Realice el llamado al host remoto, utilizando kermit
	    (o cualquier otra aplicación de este tipo), ingrese su
	    nombre de usuario y contraseña (o cualquier info que
	    sea necesaria para habilitar PPP en el host remoto).</p></li><li class="step"><p>Salga de kermit (sin colgar la línea).</p></li><li class="step"><p>Ingrese lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/src/usr.sbin/pppd.new/pppd /dev/tty01 19200</code></strong></pre><p>Asegurese de utilizar el dispositivo y la velocidad adecuados.</p></li></ol></div><p>Ahora su computadora esta conectada por medio de PPP. Si la
        conexión falla, puede añadir la opción
        <code class="option">debug</code> en el fichero <code class="filename">/etc/ppp/options</code>
        de tal forma que pueda verificar la que esta ocurriendo y pueda
        resolver el problema.</p><p>El siguiente script; <code class="filename">/etc/ppp/pppup</code>
        realizará los 3 pasos de forma automática:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre><a id="idp78553168" class="indexterm"></a><p>El fichero <code class="filename">/etc/ppp/kermit.dial</code> es un
        script de kermit, uqe realiza el marcado y negocia la
        autorización necesaria con el host remoto (un ejemplo de
        este script se encuentra al final de este documento).</p><p>Utilice el siguiente script, llamado
        <code class="filename">/etc/ppp/pppdown</code> para desconectar la
        línea PPP:</p><pre class="programlisting">#!/bin/sh
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ X${pid} != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill -TERM ${pid}
fi

ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre><p>Verifique que su PPP aun se esta ejecutando, por medio de
	    <code class="filename">/usr/etc/ppp/ppptest</code>, que deberá verse
	    algo similar a esto:</p><pre class="programlisting">#!/bin/sh
pid=`ps ax| grep pppd |grep -v grep|awk '{print $1;}'`
if [ X${pid} != "X" ] ; then
        echo 'pppd running: PID=' ${pid-NONE}
else
        echo 'No pppd running.'
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre><p>Para colgar el módem, ejecute
	<code class="filename">/etc/ppp/kermit.hup</code>, que deberá
	contener:</p><pre class="programlisting">set line /dev/tty01	; aqui va el dispositivo del modem
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre><p>He aqui un metodo alterno, donde se utiliza <code class="command">chat</code>
	    en lugar de utilizar <code class="command">kermit</code>.</p><p>Los siguientes dos ficheros deben ser suficiente, para realizar
        una conexión por medio de <code class="command">pppd</code>.</p><pre class="programlisting">/dev/cuaa1 115200

crtscts		# habilita el control de flujo por medio de hardware
modem		# línea de control del módem
connect "/usr/bin/chat -f /etc/ppp/login.chat.script"
noipdefault	# el servidor remoto debe asignar la dirección IP.
	        # si el servidor no asigna una IP durante la negociación
                # IPCP , remueva esta línea y espere por los
passive         # paquetes LCP
domain &lt;your.domain&gt;	# aqui va su dominio

:		# escriba la IP del host remoto aqui
                # si no ha especificado la opción noipdefault
                # cambie esta línea a quedar &lt;local_ip&gt;:&lt;remote_ip&gt;

defaultroute	# escriba esto, si desea que el servidor PPP sea su
	            # router por default</pre><p><code class="filename">/etc/ppp/login.chat.script</code>:</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Lo siguiente debe ir en una sola línea.</p></div><pre class="programlisting">ABORT BUSY ABORT 'NO CARRIER' "" AT OK ATDT&lt;numero.de.telefono&gt;
  CONNECT "" TIMEOUT 10 ogin:-\\r-ogin: &lt;nombre.usuario&gt;
  TIMEOUT 5 sword: &lt;contraseña&gt;</pre><p>Una vez que estos ficheros han sido modificados correctamente e
        instalados, todo lo que necesita es ejecutar el comando
	    <code class="command">pppd</code>, algo como:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pppd</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78568144"></a>25.3.3. Uso de <code class="command">pppd</code> como Servidor</h3></div></div></div><p>El fichero <code class="filename">/etc/ppp/options</code> debe
        contener algo similar a lo siguiente:</p><pre class="programlisting">crtscts   # control de flujo por Hardware
netmask 255.255.255.0           # mascara de red (no es requisito)
192.114.208.20:192.114.208.165  # direcciones ip del host local y remoto
                                # la dirección ip local debe ser
                                # diferente a la que le haya asignado a su
                                # dispositivo de red ethernet (u otro)
                                # la dirección ip remota que será
                                # asignada a la maquina remota
domain ppp.foo.com              # su dominio
passive                         # espera por LCP
modem                           # línea de modem</pre><p>El siguiengte script, llamado <code class="filename">/etc/ppp/pppserv</code>
        habilitará <span class="application">pppd</span>, para que actue como
        servidor:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi

# reset ppp interface
ifconfig ppp0 down
ifconfig ppp0 delete

# enable autoanswer mode
kermit -y /etc/ppp/kermit.ans

# run ppp
pppd /dev/tty01 19200</pre><p>Utilice el script <code class="filename">/etc/ppp/pppservdown</code>
        para detener el servidor:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'killing kermit, PID=' ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre><p>El siguiente script de kermit
	    (<code class="filename">/etc/ppp/kermit.ans</code>) habilita/deshabilita
	    el modo de autorespuesta en su módem. Y debe verse algo similar
	    a lo siguiente:</p><pre class="programlisting">set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; cambiar esto a quedar out ATS0=0\13 si desea deshabilitar el modo
                ; de autorespuesta
inp 5 OK
echo \13
exit</pre><p>Un script llamado <code class="filename">/etc/ppp/kermit.dial</code> es
        utilizado para llamar y autentificarse en un host remoto. Es
        necesario que edite este fichero, de acuerdo a sus necesidades.
        Escriba su nombre de usuario (login) y contraseña (password)
        en este fichero, también será necesario cambiar su
        metodo de conexión, de acuerdo a lo que se ajuste a sus
        necesidades.</p><pre class="programlisting">;
; ingrese el dispositivo que esta apuntando a su módem:
;
set line /dev/tty01
;
; escriba la velocidad del módem:
;
set speed 19200
set file type binary            ; full 8 bit file xfer
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; Posteriormente SET CARRIER si es necesario
set dial display on             ; despues SET DIAL si es necesario
set input echo on
set input timeout proceed
set input case ignore
def \%x 0
goto slhup

:slcmd                          ; cambio a modo de comando
echo Put the modem in command mode.
clear                           ; Limpieza del buffer de entrada
pause 1
output +++
input 1 OK\13\10                ; esperar para OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; si el modem no responde Ok, intentar de nuevo

:slhup                          ; colgar el teléfono
clear                           ; Limpieza del buffer de entrada
pause 1
echo Hanging up the phone.
output ath0\13
input 2 OK\13\10
if fail goto slcmd              ; si no hay un OK como respuesta, poner el modem en modo de comando

:sldial                         ; marcar el numero telefonico
pause 1
echo Dialing.
output atdt9,550311\13\10               ; escriba el numero de telefono
assign \%x 0                    ; asignar cero al contador

:look
clear                           ; Limpieza del buffer de entrada
increment \%x                   ; Conteo de segundos
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; login
assign \%x 0                    ; asignar cero al contador
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; Conteo de segundos
clear                           ; Limpieza del buffer de entrada
output \13
;
; escriba su login prompt aqui:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; intentar 10 veces para obtener un login
else goto slhup                 ; colgar y empezar de nuevo si a la decima falla

:sluid
;
; escriba su nombre de usuario:
;
output ppp-login\13
input 1 {Password: }
;
; escriba su contraseña:
;
output ppp-password\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7No dialtone.  Check the telephone line!\7
exit 1

; local variables:
; mode: csh
; comment-start: "; "
; comment-start-skip: "; "
; end:</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoe"></a>25.4. Uso de <span class="application">PPP</span> sobre Ethernet (PPPoE)</h2></div><div><span class="authorgroup">Contribuido (tomado de http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html) por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><a id="idp78652368" class="indexterm"></a><a id="idp78653136" class="indexterm"></a><p>En esta sección veremos como configurar PPP
      sobre una red Ethernet (<acronym class="acronym">PPPoE</acronym>).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78655056"></a>25.4.1. Configurando el kernel</h3></div></div></div><p>Ya no es necesario realizar una configuración especial
        para que nuestro kernel cuente con soporte para PPPoE. Siempre y
        cuando el soporte de redes necesario se encuentre en él,
        <span class="application">ppp</span> se encargará de cargarlo
        de una manera dinámica.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78669136"></a>25.4.2. Editando el fichero <code class="filename">ppp.conf</code></h3></div></div></div><p>He aqui un ejemplo de un fichero de configuración
        <code class="filename">ppp.conf</code> completamente funcional:</p><pre class="programlisting">default:
  set log Phase tun command # puede añadir más dispositivos si lo desea
  set ifaddr 10.0.0.1/0 10.0.0.2/0

nombre_del_proveedor_del_servicio_de_internet:
  set device PPPoE:<em class="replaceable"><code>xl1</code></em> # sustituya xl1 con su dispositivo ethernet
  set authname SuNombreDeUsuario
  set authkey SuContraseña
  set dial
  set login
  add default HISADDR</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78671824"></a>25.4.3. Ejecutando  <span class="application">PPP</span></h3></div></div></div><p>Estando en modo <code class="systemitem">superusuario</code> (root)
        puede ejecutar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -ddial nombre_del_proveedor_de_inet</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78674640"></a>25.4.4. Ejecutando <span class="application">PPP</span> al inicio de sesión</h3></div></div></div><p>Añada las siguientes líneas a su archivo
        <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"	# siempre y cuando desee habilitar nat para su red local
ppp_profile="nombre_del_proveedor_de_inet"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78677072"></a>25.4.5. Diferenciando el uso del Servicio de PPPoE</h3></div></div></div><p>En ocasiones es necesario utilizar una pequeña marca para
        diferenciar el servicio que vamos a utilizar para establecer la
        conexión.  Las marcas (<span class="quote">&#8220;<span class="quote">tags</span>&#8221;</span>)de servicio son
        utilizadas para distinguir entre diferentes servidores de una red,
        a los que nos podemos conectar utilizando PPPoE.</p><p>Su proveedor de internet debe haberle provisto de la
        información necesaria para crear esta marca. Si esto
        no fué así, puede solicitar a su proveedor que
        le brinde esta información.</p><p>Como último recurso, puede intentar el método
        sugerido por el programa
        <a class="link" href="http://www.roaringpenguin.com/pppoe/" target="_top">Roarging Penguin
        PPPoE</a>, que puede encontrarse en la
        <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports"> colección de ports</a>. Al
        utilizar este programa debe tener en mente, que este puede
        desconfigurar su módem por completo, por esta razón
        piense biena antes de utilizarlo. Simplemente instale el programa
        controlador del módem, provisto por su porveedor.
        Posteriormente, debe acceder al menú de <code class="literal">Sistema</code>
         del programa. El nombre de su perfil debe aparecer listado. Que
         normalmente es <span class="emphasis"><em>ISP</em></span>.</p><p>El nombre del perfil (marca del servicio) será utilizada por
        la configuración de PPPoE en el fichero de configuración
        <code class="filename">ppp.conf</code> como el proveedor para la opción
        del comando <code class="command">set device</code> (puede ver la página de
        ayuda <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> para más detalles). Esto debe verse algo
        similar a lo siguiente:</p><pre class="programlisting">set device PPPoE:<em class="replaceable"><code>xl1</code></em>:<em class="replaceable"><code>ISP</code></em></pre><p>No olvide cambiar <em class="replaceable"><code>x11</code></em> por el
        dispositivo Ethernet que este utilizando.</p><p>No olvide cambiar <em class="replaceable"><code>ISP</code></em> por el nombre
        del perfil que le fué descrito anteriormente (por lo general
        el nombre de su Proveedor de Servicio de Internet).</p><p>Para información adicional consulte:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://renaud.waldura.com/doc/freebsd/pppoe/" target="_top">Cheaper
	    Broadband with FreeBSD on DSL</a> por Renauld Waldura.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-3com"></a>25.4.6. Uso de PPPoE en Casa con un Modem Dual ADSL 3Com</h3></div></div></div><p>Este módem no sigue el estandar establecido en el <a class="link" href="http://www.faqs.org/rfcs/rfc2516.html" target="_top">RFC 2516</a>
	    (<span class="emphasis"><em>Un metodo que describe el uso de PPP por medio de un
	    dispositivo Ethernet (PPoE)</em></span>, escrito por L. Mamakos, K. Lidl,
	    J. Evarts, D. Carrel, D. Simone y R. Wheeler). En su lugar, el
	    código de diferentes tipos de paquetes ha sido utilizado
	    para el manejo del entorno Ethernet. Si cree que esto es incorrecto
	    y que se debiera ajustar a las especificaciones de PPPoE, por favor
	    comentelo en <a class="link" href="http://www.3com.com/" target="_top">3Com</a>.</p><p>Para poder hacer que FreeBSD sea capaz de comunicarse con
        este dispositivo, se debe establecer un control de sistema (sysctl).
        Esto puede hacerse de forma automática al momento del
        arranque, editando el fichero <code class="filename">/etc/sysctl.conf</code>:
        </p><pre class="programlisting">net.graph.nonstandard_pppoe=1</pre><p>o bien pude hacerse desde la línea de comandos, para un
        efecto inmediato, por medio del comando
	    <code class="command">sysctl -w net.graph.nonstandard_pppoe=1</code>.</p><p>Desafortunadamente y dado que esto implica una
        configuración general del sistema, por lo que no es
        posible comunicarnos con un dispositivo cliente &#8212; servidor
        que utilice PPPoE y con un módem casero 3Com
        ADSL, al mismo tiempo.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoa"></a>25.5. Uso de <span class="application">PPP</span> sobre ATM (PPPoA)</h2></div></div></div><a id="idp78718672" class="indexterm"></a><a id="idp78719440" class="indexterm"></a><p>Lo siguiente describe como configurar PPP utilizando ATM, alias
      PPPoA.  PPPoA es una alternativa muy común entre proveedores de
      DSL en Europa.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78720976"></a>25.5.1. Uso de PPPoA con un Alcatel Speedtouch USB</h3></div></div></div><p>El soporte bajo FreeBSD para este dispositivo se puede encontrar
        como un port, por que el firmware es distribuido bajo <a class="link" href="http://www.alcatel.com/consumer/dsl/disclaimer_lx.htm" target="_top">
        la licencia de Alcatel</a>.</p><p>Para instalar este software, simplemente utilice la
        <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">colección de ports</a>.  Instale el
        port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a> y siga las
        instrucciones provistas por el port.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78724048"></a>25.5.2. Uso de mpd</h3></div></div></div><p>Puede usar <span class="application">mpd</span> para conectarse a una gran
         variedad de servicios, en particular servicios pptp.  Puede encontrar
         <span class="application">mpd</span> en la colección de ports, bajo
         <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mpd/pkg-descr">net/mpd</a>.</p><p>Primero debe instalar el port, y posteriormente configurar
         <span class="application">mpd</span> para que se ajuste a sus necesidades y
         a la configuración del proveedor.  El port instala un conjunto
         de ficheros de configuración de ejemplo, que estan bien
         documentados en
         <code class="filename">PREFIX/etc/mpd/</code>. Note
         que <span class="emphasis"><em>PREFIX</em></span> se refiere al directorio donde sus
         ports son instalados, que normalmente es en
         <code class="filename">/usr/local</code>.  Una guía completa en formato
         HTML, esta disponible una vez que se ha instalado el port.  Esta se
         localiza en
         <code class="filename">PREFIX/share/mpd/</code>.
         Aqui tenemos un ejemplo simple de configuración para conectarse
         a un servicio ADSL con <span class="application">mpd</span>.  La
         configuración se divide en dos ficheros, primero tenemos el
         fichero <code class="filename">mpd.conf</code>.</p><pre class="programlisting">default:
     load adsl

 adsl:
     new -i ng0 adsl adsl
     set bundle authname <em class="replaceable"><code>usuario</code></em> <a id="co-mpd-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
     set bundle password <em class="replaceable"><code>contraseña</code></em> <a id="co-mpd-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
     set bundle disable multilink

     set link no pap actcomp protocomp
     set link disable chap
     set link accept chap
     set link keep-alive 30 10

     set ipcp no vjcomp
     set ipcp ranges 0.0.0.0/0 0.0.0.0/0

     set iface route default
     set iface disable on-demand
     set iface enable proxy-arp
     set iface idle 0

     open</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>El nombre de usuario para autentificar con su proveedor.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La contraseña para autentificar con su proveedor.</p></td></tr></table></div><p>El fichero <code class="filename">mpd.links</code> contiene información
       a cerca de la, o las conecciones, que desee establecer.  Un ejemplo de
       <code class="filename">mpd.links</code> y que sea acompañante del ejemplo
       anterior, se muestra a continuación.</p><pre class="programlisting">adsl:
     set link type pptp
     set pptp mode active
     set pptp enable originate incoming outcall
     set pptp self 10.0.0.140
     set pptp peer 10.0.0.138</pre><p>La conexión es fácil de inicializarla, al ingresar los
       siguientes comandos como <code class="systemitem">root</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpd -b</code></strong> <em class="replaceable"><code>adsl</code></em></pre><p>El estatus de la conexión la puede ver con el comando.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig ng0</code></strong>
 : flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
      inet 216.136.204.117 --&gt; 204.152.186.171 netmask 0xffffffff</pre><p>Usar <span class="application">mpd</span> es la forma recomendada para
       conectarse con servicios ADSL con FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78752080"></a>25.5.3. Uso de pptpclient</h3></div></div></div><p>También es posible usar FreeBSD para conectarse a otros
         servicios PPPoA por medio de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>.</p><p>Para conectarse por medio de  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a> a un servicio DSL, instale el
         port o paquete y edite el fichero
         <code class="filename">/etc/ppp/ppp.conf</code>.  Debe ser
         <code class="systemitem">root</code> para hacer estas operaciones.  Un ejemplo de
         la sección de <code class="filename">ppp.conf</code>, se muestra a
         continuación.  Para mayor información sobre las
         opciones de <code class="filename">ppp.conf</code>, consulte la página de
         ayuda de <span class="application">ppp</span>; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</p><pre class="programlisting">adsl:
  set log phase chat lcp ipcp ccp tun command
  set timeout 0
  enable dns
  set authname <em class="replaceable"><code>usuario</code></em> <a id="co-pptp-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  set authkey <em class="replaceable"><code>contraseña</code></em> <a id="co-pptp-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
  set ifaddr 0 0
  add default HISADDR</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Nombre de usuario de la cuenta DSL.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La contraseña de su cuenta.</p></td></tr></table></div><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">Debido a que debe poner su contraseña en el fichero
 	    <code class="filename">ppp.conf</code> en texto plano, debe asegurarse que nadie
 	    tenga acceso de lectura a este fichero.  Los siguientes comandos se
 	    aseguran de que el fichero solo pueda se leido por
 	    <code class="systemitem">root</code>.  Ve las páginas de ayuda <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>
 	    y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a> para mayor información.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown root:wheel /etc/ppp/ppp.conf</code></strong>
 <code class="prompt">#</code> <strong class="userinput"><code>chmod 600 /etc/ppp/ppp.conf</code></strong></pre></div><p>Esto abrirá una sesion por medio de PPP con su ruteador DSL.
         Los módems Ethernet DSL cuentan con una dirección IP de
         LAN preconfigurada a la cual se puede conectar.  En el caso del Alcatel
         Speedtouch, esta dirección es <code class="systemitem">10.0.0.138</code>.  La documentación de su equipo
         debe indicarle que dirección utiliza.  Para abrir el
         <span class="quote">&#8220;<span class="quote">tunel</span>&#8221;</span> e iniciar la sesión
         <span class="application">ppp</span>, ejecute el siguiente comando.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pptp dirección proveedor</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Puede añadir un símbolo de ampersand
 	  (<span class="quote">&#8220;<span class="quote">&amp;</span>&#8221;</span>) al final de este comando, ya que
 	  <span class="application">pptp</span> no retorna al shell por default.</p></div><p>Un dispositivo virtual <code class="filename">tun</code> será
         creado, para interactuar con los procesos de
         <span class="application">pptp</span> y <span class="application">ppp</span>.
         Una vez que regrese al shell puede examinar la conexión por
         medio del siguiente comando.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig tun0</code></strong>
 tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
         inet 216.136.204.21 --&gt; 204.152.186.171 netmask 0xffffff00
         Opened by PID 918</pre><p>Si no le es posible conectarse, verifique la configuración de
         su ruteador, que normalmente es accesible por medio de
 	     <span class="application">telnet</span> o de su navegador web. Si aun no puede
 	     conectarse examine la salida que da el comando
 	     <span class="application">pptp</span> y el contenido del fichero de registro
 	     (log) de <span class="application">ppp</span>;
 	     <code class="filename">/var/log/ppp.log</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slip"></a>25.6. Uso de SLIP</h2></div><div><span class="authorgroup">Contribución Original por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Satoshi</span> <span class="surname">Asami</span></span>. </span></div><div><span class="authorgroup">Con comentarios por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Piero</span> <span class="surname">Serini</span></span>. </span></div></div></div><a id="idp78788688" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slipc"></a>25.6.1. Configurando un cliente SLIP</h3></div></div></div><a id="idp78789968" class="indexterm"></a><p>Lo siguiente es una forma de configurar FreeBSD para que utilice
        SLIP, en un red con dirección estática. Para
        direcciones dinámicas (esto es, donde su dirección
        cambia cada vez que se conecta), probablemente sea necesario
        realizar algunos ajustes que complican la configuración.</p><p>En primer término, es necesario determinar a que puerto
        serial esta conectado nuestro módem. Mucha gente opta por}
        contar con un enláce simbólico, tal como
        <code class="filename">/dev//modem</code>, que apunta al nombre
        real del dispositivo,
        <code class="filename">/dev/cuaaN</code>. Esto permite abstenerse de
        usar el nombre real del dispositivo, en caso de que sea necesario
        cambiar de puerto nuestro módem.  Lo cual puede ser de mucha
        ayuda, ya que puede ser un fastidio tener que editar un monton de
        ficheros en <code class="filename">/etc</code> y ficheros de tipo
        <code class="filename">.kermrc</code> en todo el sistema!.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/dev/cuaa0</code> es
	  <code class="filename">COM1</code>, <code class="filename">cuaa1</code> es
	  <code class="filename">COM2</code>, etc.</p></div><p>Asegurese de contar con la siguiente opción en la
        configuración de su kernel:</p><pre class="programlisting">pseudo-device   sl      1</pre><p>Esta opción esta incluida en el archivo del kernel
        <code class="filename">GENERIC</code>, así que no debe haber
        problema, claro esta, a menos que lo haya borrado
        intencionalmente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78801104"></a>25.6.1.1. Cosas Que Tiene Que Hacer Solo Una Vez</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Añada el nombre de su maquina, gateway, servidores
	      de nombre a su fichero <code class="filename">/etc/hosts</code>. Este es
	      un ejemplo de mi fichero:</p><pre class="programlisting">127.0.0.1               localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</pre></li><li class="step"><p>Asegurese de que cuenta con la opción <code class="option">hosts</code>
	      antes de la opción <code class="option">bind</code>, en su fichero
	      <code class="filename">/etc/host.conf</code>.  De lo contrario pueden ocurrir
	      cosas graciosas en su sistema.</p></li><li class="step"><p>Edite el fichero <code class="filename">/etc/rc.conf</code>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Especifique su nombre host al editar la línea que dice:
		  </p><pre class="programlisting">hostname=<span class="quote">&#8220;<span class="quote">minombre.mi.dominio</span>&#8221;</span></pre><p>El nombre completo de su sistema para internet, debe ser
		  escrito en este punto.</p></li><li class="listitem"><p>Añada el dispositivo <code class="filename">sl0</code> a la
		  lista de dispositivos de red, al cambiar la línea que dice:</p><pre class="programlisting">network_interfaces="lo0"</pre><p>a quedar:</p><pre class="programlisting">network_interfaces=<span class="quote">&#8220;<span class="quote">lo0 sl0</span>&#8221;</span></pre></li><li class="listitem"><p>Añada los parámetros de inicialización
		  del dispositivo sl0, al añadir la línea:</p><pre class="programlisting">ifconfig_sl0="inet ${hostname} slip-gateway netmask 0xffffff00 up"</pre></li><li class="listitem"><a id="idp78812752" class="indexterm"></a><p>Especificque cual será su ruteador por omisión
		  al editar la línea:</p><pre class="programlisting">defaultrouter=<span class="quote">&#8220;<span class="quote">NO</span>&#8221;</span></pre><p>a quedar:</p><pre class="programlisting">defaultrouter=<span class="quote">&#8220;<span class="quote">slip-gateway</span>&#8221;</span></pre></li></ol></div></li><li class="step"><p>Edite su fichero <code class="filename">/etc/resolv.conf</code> (si no existe
	      debe crearlo), a que contenga lo siguiente:</p><pre class="programlisting">domain CS.Ejemplo.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre><a id="idp78817232" class="indexterm"></a><a id="idp78817744" class="indexterm"></a><p>Como puede ver, lo anterior define el nombre de host, de su
	      servidor de nombres. Claro esta, el nombre de dominio y las
	      direcciones IP, dependen de su sistema específico.</p></li><li class="step"><p>Establezca la contraseña del superusuario
	      <code class="systemitem">root</code> y de su símil
	      <code class="systemitem">toor</code> (y de cualquier otro usuario
	      que aun no cuente con la misma).</p></li><li class="step"><p>Reinicie su sistema y asegurese que cuenta con el
	      nombre de host (hostname) correcto.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78821584"></a>25.6.1.2. Haciendo una Conexión con SLIP</h4></div></div></div><a id="idp78822224" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Marque el número, teclee en el signo de comando
	      <code class="command">slip</code>, ingrese el nombre y la contraseña.
	      Lo que se requiere ingresar, depende de su sistema. Si utiliza
	      <span class="application">kermit</span>, puede utilizar un script similar
	      al siguiente:</p><pre class="programlisting"># kermit setup
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# El siguiente macro se encarga de llamar e ingresar al sistema
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre><p>Claro esta, que debe cambiar el nombre y contraseñ
	      a quedar de acuerdo a sus necesidades. Después de hacer
	      esto, puede simplemente teclear <code class="command">slip</code> en el
	      símbolo de sistema (prompt) de kermit, para realizar
	      la conexión.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El dejar su contraseña en texto plano, en
	        cualquier parte del sistema, generalmente es una
	        <span class="emphasis"><em>mala</em></span> idea. Hágalo bajo su
	        propio riesgo.</p></div></li><li class="step"><p>Dejé a kermit en ese punto trabajando (puede
	      suspenderlo tecleando
	      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>z</strong></span>) y como <code class="systemitem">root</code>, teclee:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>slattach -h -c -s 115200 /dev/modem</code></strong></pre><p>Si puede hacer <code class="command">ping</code> a cualquier host
	      que se encuentre del otro lado del ruteador, usted esta
	      conectado!. Si esto no funciona, puede intentar como
	      argumento del comando <code class="command">slattach</code>, la
	      opción <code class="option">-a</code> en lugar de utilizar la
	      optción <code class="option">-c</code>.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78849360"></a>25.6.1.3. Como Terminar la Conexión</h4></div></div></div><p>Para terminar la conexión haga lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -INT `cat /var/run/slattach.modem.pid`</code></strong></pre><p>esto terminaraá  <code class="command">slattach</code>.  Recuerde que
	  para hacer esto, usted debe estar firmado como superusuario (root).
	  Posteriormente dirijase a kermit (puede hacer esto con
	  <code class="command">fg</code> si lo envio a segundo plano) y salga (tecleando
	  <code class="command">q</code>).</p><p>La página de ayuda de <code class="command">slattach</code> indica que
	  debe utilizar el comando <code class="command">ifconfig sl0 down</code>, para
	  marcar como terminado el uso del dispositivo, pero tal parece que
	  esto no hace una gran diferencia para mi.
	  (<code class="command">ifconfig sl0</code> da el mismo resultado.)</p><p>En algunas ocasiones, puede que su módem se niegue a
	  cortar la comunicación (el mio lo hace a veces). Si ese es
	  el caso, simplemente inicie de nuevo kermit y vuelva a salir.
	  Normalmente en el segundo intento hay exito.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78854992"></a>25.6.1.4. Problemas Comunes</h4></div></div></div><p>Si esto no funciona, sientase libre de preguntarme. Lo siguiente es
	  una recapitulación de los problemas que más comunmente
	  se presentan:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El no utilizar la opción <code class="option">-c</code> o
	      <code class="option">-a</code> con el comando
	      <code class="command">slattach</code> (Esto debiera se fatal, pero algunos
	      usuarios han reportado que esto ha solucionado sus problemas.</p></li><li class="listitem"><p>Usar la opción <code class="option">s10</code> en vez de usar la
	      opción <code class="option">sl0</code> (puede ser difícil ver la
	      diferencia con algunos tipos de letras).</p></li><li class="listitem"><p>Intente  <code class="command">ifconfig sl0</code> para visualizar
	      el estatus de sus dispositivos de red. Por ejemplo, puede ser que
	      obtenga algo similiar a lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig sl0</code></strong>
sl0: flags=10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 --&gt; 136.152.64.1 netmask ffffff00</pre></li><li class="listitem"><p>También el comando <code class="command">netstat -r</code> le
	      mostrará la tabla de ruteo, en caso de que obtenga el
	      mensaje <span class="quote">&#8220;<span class="quote">no route to te host</span>&#8221;</span>, al hacer
	      <code class="command">ping</code>. Un ejemplo de esto se muestra
	      a continuación:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

(root node)
(root node)

Route Tree for Protocol Family inet:
(root node) =&gt;
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
(root node)</pre><p>Esto es después de que el sistema ha estado conectado
	      por un tiempo. Los numeros pueden variar en su sistema.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips"></a>25.6.2. Estableciendo un Servidor SLIP</h3></div></div></div><a id="idp78866768" class="indexterm"></a><p>Este documento provee sugerencias, para establecer un servidor
        de SLIP, bajo FreeBSD, lo que generalmente significa configurar su
        sistema, para que de manera automática inicie los servicios, al
        firmarse usuarios&#8212;clientes remotos en su sistema.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips-prereqs"></a>25.6.2.1. Prerequisitos</h4></div></div></div><a id="idp78869712" class="indexterm"></a><p>Esta sección es de naturaleza muy técnica, así
	  que contar con antecedentes sobre esto es requerido. Este documento
	  supone que usted cuenta con conocimientos sobre el protocolo de
	  redes TCP/IP, y particularmente, redes y direcciones de nodos, mascaras
	  de red, subneteo, ruteo y protocolos de ruteo, tal como RIP. El
	  configurar servicios SLIP, en un servidor, requiere un conocimiento de
	  estos conceptos, y si usted no esta familiarizado con estos, puede
	  leer una copia, ya sea del libro de Craig Hunt; <span class="emphasis"><em>TCP/IP
	  Networking Administration</em></span>, publicado por O'Reilly &amp;
	  Associates, Inc. (Numero ISBN 0-937175-82-X), o alguno de los libros
	  de Douglas Comer, sobre protocolos TCP/IP.</p><a id="idp78870992" class="indexterm"></a><p>Se da por un hecho, que usted ha instalado y configurado
	  correctamente su(s) módem(s), así como la
	  configuración de su sistema, para efecto de utilizar el
	  mismo para realizar la conexión. Si usted no lo ha hecho,
	  por favor lea el tutorial sobre configuración de estos
      servicios; si cuenta con un navegador para la World-Wide Web,
      puede ver los tutoriales disponibles en <a class="link" href="../../../../index.html" target="_top">http://www.FreeBSD.org/</a>.</p><p>Puede ser que también desee revisar las páginas de
      ayuda (<span class="emphasis"><em>man</em></span>), <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> para información
      referente a los controladores de dispositivos de puertos en serie, y
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>, &amp; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, para
      ver información relevante, sobre la configuración de su
      sistema, para efecto de que acepte  accesos (logins) por medio de un
      módem, y quizás <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> para información
      sobre los parámetros de configuración de puertos en
      serie (tal como <code class="literal">clocal</code>, que se utiliza para
      la conexión directa por medio de puertos seriales).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78882512"></a>25.6.2.2. Echemos un Vistazo</h4></div></div></div><p>En su configuración típica, el desarrollo de
	  FreeBSD como un servidor SLIP, funciona de la siguiente manera:
	  un Usuario SLIP, se conecta del Servidor SLIP FreeBSD e ingresa al
	  sistema con una identificación especial, que utiliza
	  <code class="command">/usr/sbin/sliplogin</code> como shell del usuario. El
	  programa <code class="command">sliplogin</code> busca en el fichero
	  <code class="filename">/etc/sliphome/slip.hosts</code> la línea que
	  haya sido creada especialmente para el usuario, conecta la
	  línea serial a una interfaz SLIP disponible y posteriormente
	  ejecuta el script <code class="filename">/etc/sliphome/slip.login</code>, para
	  configurar la interfaz SLIP.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78885072"></a>25.6.2.2.1. Un Ejemplo de Acceso al Servidor SLIP</h5></div></div></div><p>Por ejemplo si la clave de acceso de un usuario SLIP
	    fuese <code class="systemitem">Shelmerg</code>, la entrada del usuario
	    <code class="systemitem">Shelmerg</code>, en el fichero
	    <code class="filename">/etc/master.passwd</code> se vera algo similar
	    a lo siguiente:</p><pre class="programlisting">Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre><p>Cuando <code class="systemitem">Shelmerg</code> accese al sistema, el
	    comando <code class="command">sliplogin</code>, buscará en el
	    fichero <code class="filename">/etc/sliphome/slip.hosts</code>, una
	    línea, en la cual el ID (identificación) del
	    usuario coincida, por ejemplo, puede ser que en el fichero
	    <code class="filename">/etc/sliphome/slip.hosts</code> exista una
	    línea simliar a la siguiente:</p><pre class="programlisting">Shelmerg        dc-slip sl-helmer       0xfffffc00		  autocomp</pre><p>El comando <code class="command">sliplogin</code> encontrará
	    la línea que coincida, enganchará la línea
	    serial a cualquier interfaz SLIP disponible y posteriormente
	    ejecutará <code class="filename">/etc/sliphome/slip.login</code>
	    de manera similar a:</p><pre class="programlisting">/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre><p>Si todo marcha bien, <code class="filename">/etc/sliphome/slip.login</code>
	    creará una configuración, por medio de
	    <code class="command">ifconfig</code>, para la interfaz SLIP, a la cual
	    <code class="command">sliplogin</code> se ha adjuntado (la interfaz slip 0,
	    que era el primer parámetro dado en la lista de
	    <code class="filename">slip.login</code>), para establecer la
	    dirección local IP (<code class="systemitem">dc-slip</code>), la
	    interfaz de la direción IP Remota (<code class="systemitem">sl-helmer</code>),
	    la submascara de red para la interfaz SLIP (<code class="systemitem">0xfffffc00</code>) y cualquier otra opción
	    adicional (<code class="literal">autocomp</code>). Si algo no va del todo
	    bien, normalmente <code class="command">sliplogin</code> guarda bastante
	    información para depurar, por medio del
	    <code class="literal">demonio</code> (<code class="literal">daemon</code>) syslog, que
	    usualmente guarda dicha infomración en
	    <code class="filename">/var/log/messages</code> (vea la página de
	    ayuda <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> así como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a> y quizas
	    el fichero <code class="filename">/etc/syslog.conf</code>, para ver que
	    es lo que <code class="command">syslogd</code> esta almacenando y donde es
	    que lo almacena.</p><p>OK, basta de ejemplos &#8212; entremos de lleno en la
	    configuración del sistema.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78908368"></a>25.6.2.3. Configuración del Kernel</h4></div></div></div><a id="idp78909008" class="indexterm"></a><p>El kernel de FreeBSD, por omisión, cuenta con 2
	  dispositivos SLIP definidos (<code class="filename">sl0</code> y
	  <code class="filename">sl1</code>); usted puede utilizar
	  <code class="command">netstat -i</code>, para verificar si estos
	  dispositivos se encuentran en el kernel de su sistema.</p><p>Un ejemplo del resultado de <code class="command">netstat -i</code>:</p><pre class="screen">Name  Mtu   Network     Address            Ipkts Ierrs    Opkts Oerrs  Coll
ed0   1500  &lt;Link&gt;0.0.c0.2c.5f.4a         291311     0   174209     0   133
ed0   1500  138.247.224 ivory             291311     0   174209     0   133
lo0   65535 &lt;Link&gt;                            79     0       79     0     0
lo0   65535 loop        localhost             79     0       79     0     0
sl0*  296   &lt;Link&gt;                             0     0        0     0     0
sl1*  296   &lt;Link&gt;                             0     0        0     0     0</pre><p>En este ejemplo vemos que existen dos
	  dispositivos SLIP en el kernel, que son;
	  <code class="filename">sl0</code> y
	  <code class="filename">sl1</code> (el asterisco que aparece después
	  de <code class="literal">sl0</code> y <code class="literal">sl1</code> indica
	  que los dispositivos no estan <span class="quote">&#8220;<span class="quote">trabajando</span>&#8221;</span>.)</p><p>Aun cuando el kernel cuente con los dispositivos, por
	  omisión el kernel de FreeBSD, no viene configurado para
	  enviar paquetes (de hecho su sistema FreeBSD no trabajara como
	  ruteador, por default) esto en base a los requerimientos para
	  Internet, establecidos por los RFCs ( vea 1009 [Requerimentos para
	  Pasarelas (Gateway) en Internet], 1122 [Requerimientos para hosts
	  de Internet &#8212; Capas de comunicación] y quizás
	  1127 [RFC sobre Una Perspectiva de los Requerimientos de Hosts]).
	  Si usted desea que su servidor SLIP sobre FreeBSD, opere como un
	  ruteador, será necesario que edite el fichero
	  <code class="filename">/etc/rc.conf</code> y cambie la opción
	  <code class="literal">gateway_enable</code>, a quedar <code class="option">YES</code>,
	  esto habilitará esta función.</p><p>Será necesario que reinicie su sistema, para efecto de que
	  estos cambios surtan efecto.</p><p>Al verificar su fichero de configuración del kernel
	  (<code class="filename">/sys/i386/conf/GENERIC</code>), podrá
	  notar que cerca del final, hay una línea como la siguiente:</p><pre class="programlisting">pseudo-device sl 2</pre><a id="idp78922320" class="indexterm"></a><p>Esta línea es la que define el numero de
	  dispositivos SLIP disponibles en el kernel; el numero al final
	  de la línea es el numero máximo de conecciones SLIP
	  que puede manejar el servidor simultaneamente.</p><p>Para ayuda con relación a la configuración y
	  compilación del kernel en su sistema FreeBSD, por favor
	  refierase <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a> al apartado
	  correspondiente.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78924112"></a>25.6.2.4. Configuración de Sliplogin</h4></div></div></div><p>Como se menciono anteriormente, existen tres ficheros en el
	  directorio <code class="filename">/etc/sliphome</code>, que son parte de
	  la configuración de <code class="filename">/usr/sbin/sliplogin</code>
      (vea la pagina de ayuda <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sliplogin</span>(8)</span></a> de para ver la ayuda
      del comando <code class="command">sliplogin</code>):
      <code class="filename">slip.hosts</code>, que es el fichero que define a
      los usuarios SLIP, así como sus direcciones IP
      correspondientes; <code class="filename">slip.login</code>, que
      normalmente es utilizado para configurar la interfaz de SLIP; y
      (opcionalmente) <code class="filename">slip.logout</code>, que hace lo opuesto a
      <code class="filename">slip.login</code>, cuando la conexión serial
      ha terminado.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78928592"></a>25.6.2.4.1. Configuració de <code class="filename">slip.hosts</code></h5></div></div></div><p>El fichero <code class="filename">/etc/sliphome/slip.hosts</code>
	    contiene líneas, que al menos cuentan con cuatro partes,
	    separadas por espacios en blanco:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Identificador (nombre) del usuario SLIP</p></li><li class="listitem"><p>Dirección Local (local para el servidor SLIP) de la
	        liga a SLIP</p></li><li class="listitem"><p>Dirección Remota de la liga a SLIP</p></li><li class="listitem"><p>Mascara de red</p></li></ul></div><p>Las direcciones local y remota, pueden ser nombres del host
	    (la resolución de los mismos, es llevada a cabo, por medio de
	    <code class="filename">/etc/hosts</code> o por el servidor de nombres de
	    dominio (DNS), dependiendo de lo que haya especificado en el
	    fichero <code class="filename">/etc/host.conf</code>), y la mascara de red
	    puede ser un nombre, que puede ser resuelto revisando
	    <code class="filename">/etc/networks</code>. En un sistema de ejemplo, el
	    fichero <code class="filename">/etc/sliphome/slip.hosts</code>, puede verse
	    así:</p><pre class="programlisting">#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre><p>Al final de la línea puede ver que existen
	    una o más opciones.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">normal</code> &#8212; sin compresión
	        de los encabezados.</p></li><li class="listitem"><p><code class="option">compress</code> &#8212; compresión de
		   los encabezados.</p></li><li class="listitem"><p><code class="option">autocomp</code> &#8212; compresión
	        automática, si el host remoto lo permite.</p></li><li class="listitem"><p><code class="option">noicmp</code> &#8212; deshabilitar los
	        paquetes ICMP (de tal forma que cualquier paquete enviado
	        por <span class="quote">&#8220;<span class="quote">ping</span>&#8221;</span> seráa rechazado, en lugar de
	        ocupar de su ancho de banda).</p></li></ul></div><a id="idp78945744" class="indexterm"></a><a id="idp78946256" class="indexterm"></a><p>La elección sobre la dirección local y remota
	    depende si usted va a utilizar una conexión TCP/IP dedicada
	    o bien si va a utilizar una conexión por medio de
	    <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span> en su servidor SLIP (no es correcto
	    <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span>, pero es la terminología utilizada
	    en esta sección para describirlo). Si usted no esta seguro
	    que metodo manejar o como asignar la dirección IP, por favor
	    refierase a alguno de los libros sobre TCP/IP, que se
	    mencionan en los Prerequisitos de SLIP (<a class="xref" href="#slips-prereqs" title="25.6.2.1. Prerequisitos">Sección 25.6.2.1, &#8220;Prerequisitos&#8221;</a>)
	    y/o consulte al administrador de IP de su red.</p><a id="idp78948304" class="indexterm"></a><p>Si usted piensa subnetear para los diferentes clientes
	    SLIP, será necesario que la dirección de la
	    subred (subnet), salga de la dirección IP que tenga
	    asignada su red, y el numero de cada cliente, del numero que
	    asigne a su subred. Posteriormente puede que sea necesario, o
	    bien configurar una ruta estática a la subred SLIP, por
	    medio de su servidor SLIP en su ruteador más
	    cercano por IP.</p><a id="idp78949584" class="indexterm"></a><p>De otra forma, si usted piensa utilizar un metodo
	    <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span>, será necesario que a sus
	    clientes SLIP, se les asigne una dirección IP, que se
	    encuentre dentro del rango que este utilizando para su
	    subred Ethernet, y tambié será necesario que
	    haga algunos ajustes en los ficheros script
	    <code class="filename">/etc/sliphome/slip.login</code> y en
	    <code class="filename">/etc/sliphome/slip.logout</code>, para que
	    usen <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a>, para que maneje la tabla ARP del servidor
	    SLIP y llamados del proxy-ARP.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78956752"></a>25.6.2.4.2. <code class="filename">slip.login</code> Configuración</h5></div></div></div><p>El típico fichero <code class="filename">/etc/sliphome/slip.login</code>
	    se ve de la siguiente manera:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre><p>This <code class="filename">slip.login</code> file merely runs
	    <code class="command">ifconfig</code> for the appropriate SLIP interface
	    with the local and remote addresses and network mask of the
	    SLIP interface.</p><p>If you have decided to use the <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span>
	    method (instead of using a separate subnet for your SLIP
	    clients), your <code class="filename">/etc/sliphome/slip.login</code>
	    file will need to look something like this:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# generic login file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# Answer ARP requests for the SLIP client with our Ethernet addr
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre><p>La línea adicional, <code class="command">arp -s $5 00:11:22:33:44:55
	    pub</code> del script <code class="filename">slip.login</code>, crea una
	    entrada ARP en la tabla del servidor SLIP. Esta entrada le indica al
	    servidor SLIP que debe responder con la dirección MAC de su
	    dispositivo Ethernet, cuando cualquier otro nodo IP en la red,
	    solicite información a la IP del cliente SLIP.</p><a id="idp78962768" class="indexterm"></a><p>Al tomar en cuenta el ejemplo anterior, es importante que
	    sustituya la dirección Ethernet MAC (<code class="systemitem">00:11:22:33:44:55</code>), con la dirección
	    que corresponde a su tarjeta de red, o definitivamente su
	    <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span> no va a funcionar!. Para efecto de
	    conocer cual es la dirección MAC del dispositivo
	    Ethernet (tarjeta de red), de su servidor SLIP, puede ejecutar
	    el comando <code class="command">netstat -i</code>, el cual tendrá
	    como resultado algo similar a lo siguiente:</p><pre class="screen">ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</pre><p>Esto indica que la dirección MAC de su
	    dispositivo Ethernet, en este sistema es
	    <code class="systemitem">00:02:c1:28:5f:4a</code>
	    &#8212; los puntos que aparecen en la salida del comando
	    <code class="command">netstat -i</code> deben cambiarse por dos puntos,
	    así mismo deberá de anteponerse un cero, a cada
	    dígito hexadecimal que aparezca sólo (no en pares),
	    de tal forma que convirtamos la dirección en lo que
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a> requiere para trabajar; vea la página de ayuda
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a>, para ver información completa sobre su
	    uso.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Recuerde que cuando cree los ficheros
	      <code class="filename">/etc/sliphome/slip.login</code> y
	      <code class="filename">/etc/sliphome/slip.logout</code>, deben
	      contar con permisos de ejecución
	      (<code class="command">chmod 755 /etc/sliphome/slip.login
	      /etc/sliphome/slip.logout</code>), de otra forma
	      estos scripts no podrán llevar a cabo su función.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78970704"></a>25.6.2.4.3. Configuración de <code class="filename">slip.logout</code></h5></div></div></div><p>El fichero <code class="filename">/etc/sliphome/slip.logout</code>
	    no es indispensable (a menos que vaya a utilizar
	    <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span>), pero si aun así decide crearlo,
	    el siguiente es un ejemplo básico del script
	    <code class="filename">slip.logout</code> :</p><pre class="programlisting">#!/bin/sh -
#
#       slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down</pre><p>Si usted esta utilizando <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span>, es
	    recomendable que le indique a
	    <code class="filename">/etc/sliphome/slip.logout</code>, que desea
	    eliminar la entrada ARP, para el cliente SLIP:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.logout

#
# logout file for a slip line.  sliplogin invokes this with
# the parameters:
#      1        2         3        4          5         6     7-n
#   slipunit ttyspeed loginname local-addr remote-addr mask opt-args
#
/sbin/ifconfig sl$1 down
# Dejar de solicitar respuesta ARP al cliente SLIP
/usr/sbin/arp -d $5</pre><p>El comando <code class="command">arp -d $5</code>, elimina la
	    entrada ARP, que <code class="filename">slip.login</code> de
	    <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span> añadió al cliente SLIP
	    al ingresar al sistema.</p><p>Para esta más seguros: asegurese de que el fichero
	    <code class="filename">/etc/sliphome/slip.logout</code> cuenta con los
	    permisos adecuados para su ejecución, una vez que lo ha
	    creado (ej. <code class="command">chmod 755 /etc/sliphome/slip.logout</code>)
	    .</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78978256"></a>25.6.2.5. Consideraciones sobre el Enrutamiento</h4></div></div></div><a id="idp78978896" class="indexterm"></a><p>Si usted no esta utilizando el metodo <span class="quote">&#8220;<span class="quote">proxy ARP</span>&#8221;</span>,
	  para efecto de rutear los paquetes entre sus clientes SLIP y el
	  resto de la red (y quizás Internet), deberá de
	  hacer una de las siguientes dos acciones, o bien añadir
	  direcciones estáticas, a su(s) ruteador(es) más
	  cercanos, para que se reenvien los paquetes de la subred de sus
	  clientes SLIP, por medio de su servidor SLIP, o bien tendrá
	  que instalar y configurar <code class="command">gated</code> en su servidor
	  SLIP (que corre FreeBSD!), de tal forma que le indique a su(s)
	  ruteador(es), por medio del protocolo correcto, a cerca de su
	  subred SLIP.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78989520"></a>25.6.2.5.1. Direcciones de Enrutamiento Estáticas</h5></div></div></div><a id="idp78990160" class="indexterm"></a><p>Añadir direcciones estáticas de enrutamiento puede
	    ser un problema (o imposible si usted no cuenta con la autoridad
	    para hacerlo...). Si usted cuenta con una red de ruteo-múltiple
	    en su organización, algunos ruteadores, tales como los
	    fabricados por Cisco y Proteon, puede ser que no sea suficiente
	    con el hecho de configurar las rutas estáticas de su subred
	    SLIP, sino que sea necesario indicar que rutas utilizar para
	    informar a cerca de otras rutas, así que algo de experiencia
	    así como determinación para la resolución de
	    problemas serán necesarias para poner la ruta basada-en-
	    ruteo-estático a trabajar.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78991184"></a>25.6.2.5.2. Ejecutando <code class="command">gated</code></h5></div></div></div><a id="idp78992080" class="indexterm"></a><p>Una alternativa para los dolores de cabeza que pueden dar
	    las redes con ruteo estático, es intalar
	    <code class="command">gated</code> en su servidor SLIP bajo FreeBSD
        y configurarlo, para que utilice los protocolos de ruteo apropiados
        (RIP/OSPF/BGP/EGP) para informar a otros ruteadores, a cerca de su
        subred SLIP. Una vez que lo ha compilado e instalado, deberá
        crear el fichero <code class="filename">/etc/gated.conf</code>, que
        configurará a <code class="command">gated</code>; aqui hay un ejemplo,
        similar al que el autor utilizó en un servidor SLIP FreeBSD:
        </p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="command">gated</code> es un software propietario y su
 	    código fuente no estará disponible al público
 	    más (más información en el sitio <a class="link" href="http://www.gated.org/" target="_top">gated</a>). Esta sección
 	    solo existe para asegurarse de la compatibilidad con aquellos que
 	    usan la versió antigua.</p></div><pre class="programlisting">#
# gated configuration file for dc.dsu.edu; for gated version 3.5alpha5
# Only broadcast RIP information for xxx.xxx.yy out the ed Ethernet interface
#
#
# tracing options
#
traceoptions "/var/tmp/gated.output" replace size 100k files 2 general ;

rip yes {
  interface sl noripout noripin ;
  interface ed ripin ripout version 1 ;
  traceoptions route ;
} ;

#
# Turn on a bunch of tracing info for the interface to the kernel:
kernel {
  traceoptions remnants request routes info interface ;
} ;

#
# Propagate the route to xxx.xxx.yy out the Ethernet interface via RIP
#

export proto rip interface ed {
  proto direct {
      <em class="replaceable"><code>xxx.xxx.yy</code></em> mask 255.255.252.0 metric 1; # SLIP connections
  } ;
} ;

#
# Accept routes from RIP via ed Ethernet interfaces

import proto rip interface ed {
  all ;
} ;</pre><a id="idp79001040" class="indexterm"></a><p>En el ejemplo anterior, el fichero de configuración
        <code class="filename">gated.conf</code> transmite información sobre
        la subred SLIP <em class="replaceable"><code>xxx.xxx.yy</code></em>, por medio
        de RIP al dispositivo Ethernet; si usted esta utilizando un
        dispositivo de red, diferente de <code class="filename">ed</code>, será
        necesario que modifique el parámetro <code class="filename">ed</code>
        por el correspondiente. En este ejemplo, el fichero también
        realiza una busqueda por el fichero
        <code class="filename">/var/tmp/gated.output</code>, que es un fichero que nos
        sirve para depurar cualquier error que se presente en
        la actividad de <code class="command">gated</code>; usted puede desactivar la
        opción de depuración (debug), si es que
        <code class="command">gated</code> esta funcionando correctamente. Será
        necesario que modifique <em class="replaceable"><code>xxx.xxx.yy.</code></em>, a quedar
        con la dirección correcta de su subred SLIP (asegurese de
        modificar también la máscara de red, en la cláusula
        <code class="literal">proto direct</code> también).</p><p>Una vez que ha instalado y configurado <code class="command">gated</code> en
	    su sistema, necesitará indicarle a FreeBSD que al iniciar el
	    sistema, ejecute el script para <code class="command">gated</code>, en lugar de
	    ejecutar <code class="command">routed</code>. La forma más fácil de
	    hacer esto, es editar las variables de <code class="varname">route</code> y
	    <code class="varname">router_flags</code>, en el fichero
	    <code class="filename">/etc/rc.conf</code>. Por favor vea la página de
	    ayuda de <code class="command">gated</code>, para ver información sobre
	    los parámetros de la línea&#8212;de&#8212;comandos.</p></div></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="firewalls"></a>Capítulo 26. Cortafuegos</h2></div><div><span class="authorgroup">Texto de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joseph J.</span> <span class="surname">Barbish</span></span>. </span></div><div><span class="authorgroup">Convertido a SGML y actualizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brad</span> <span class="surname">Davis</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#firewalls-intro">26.1. *</a></span></dt></dl></div><a id="idp79014224" class="indexterm"></a><a id="idp79014736" class="indexterm"></a><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-intro"></a>26.1. *</h2></div></div></div><p>Pendiente de traducción</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail"></a>Capítulo 27. Correo Electrónico</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Lloyd</span></span>. </span></div><div><span class="authorgroup">Reescrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#mail-synopsis">27.1. Sinopsis</a></span></dt><dt><span class="sect1"><a href="#mail-using">27.2. Utilización del correo electrónico</a></span></dt><dt><span class="sect1"><a href="#sendmail">27.3. Configuración de <span class="application">sendmail</span></a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">27.4. Sustitución del Agente de Transferencia de Correo</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">27.5. Depuración de Problemas</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">27.6. Conceptos Avanzados</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">27.7. SMTP con UUCP</a></span></dt><dt><span class="sect1"><a href="#outgoing-only">27.8. Configuración para sólamente enviar correo</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">27.9. Utilización del correo con una conexión mediante módem analógico (dial-up)</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">27.10. Autentificación utilizando SMTP</a></span></dt><dt><span class="sect1"><a href="#mail-agents">27.11. Agente de Correo de Usuario</a></span></dt><dt><span class="sect1"><a href="#mail-fetchmail">27.12. Manejo de fetchmail</a></span></dt><dt><span class="sect1"><a href="#mail-procmail">27.13. Uso de procmail</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-synopsis"></a>27.1. Sinopsis</h2></div></div></div><a id="idp79026768" class="indexterm"></a><a id="idp79027280" class="indexterm"></a><p>El <span class="quote">&#8220;<span class="quote">Correo Electrónico</span>&#8221;</span>, o <span class="quote">&#8220;<span class="quote">email</span>&#8221;</span>,
      es una de las formas de comunicación más usadas hoy en
      dia.
      Este capítulo es una introducción básica de
      cómo poner en marcha un servidor de correo en FreeBSD, aunque
      no es una guía completa y se han omitido muchos conceptos
      importantes. Si se necesita información exhaustiva sobre el
      tema puede recurrirse a los libros listados en <a class="xref" href="#bibliography" title="Capítulo 31. Bibliografía">Capítulo 31, <em>Bibliografía</em></a>.</p><p>Después de leer este capítulo usted sabrá:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Qué software está involucrado en el envío y
          recepción de correo electrónico.</p></li><li class="listitem"><p>Dónde se encuentran en FreeBSD los ficheros
          básicos de configuración de
	  <span class="application">sendmail</span>.</p></li><li class="listitem"><p>Cómo bloquear a los <span class="quote">&#8220;<span class="quote">spammers</span>&#8221;</span> y evitar
          el uso no autorizado de su servidor de correo.</p></li><li class="listitem"><p>Cómo instalar y configurar agentes de transferencia de
          correo (MTA) en su sistema, para reemplazar
          <span class="application">sendmail</span>.</p></li><li class="listitem"><p>Cómo resolver problemas comunes en servidores de
          correo.</p></li><li class="listitem"><p>Cómo usar SMTP con UUCP.</p></li><li class="listitem"><p>Cómo usar correo con una conexión dialup.</p></li><li class="listitem"><p>Cómo configurar SMTP con autentificación para
          más seguridad.</p></li></ul></div><p>Antes de leer este capítulo debería usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configurar apropiadamente su conexión de red
	  (<a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>).</p></li><li class="listitem"><p>Configurar apropiadamente la información de DNS de su
	  servidor de correo (<a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>).</p></li><li class="listitem"><p>Saber como instalar software adicional (<a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-using"></a>27.2. Utilización del correo electrónico</h2></div></div></div><a id="idp79042768" class="indexterm"></a><a id="idp79043280" class="indexterm"></a><a id="idp79043792" class="indexterm"></a><p>Existen varios elementos relacionados con el intercambio de correo
      electrónico. A saber:
      <a class="link" href="#mail-mua" title="27.2.1. El Agente de Usuario">El agente de usuario (Mail User Agent o
       MUA)</a>,
      <a class="link" href="#mail-mta" title="27.2.2. Agente de Transporte de Correo">El agente de transporte de correo (Mail
       Transport Agent o MTA)</a>,
      <a class="link" href="#mail-dns" title="27.2.3. Correo electrónico y DNS">El DNS</a>,
      <a class="link" href="#mail-receive" title="27.2.4. Recepción de correo">Las carpetas de correo (Mailboxes)</a>,
       y por supuesto,
      <a class="link" href="#mail-host" title="27.2.5. El Servidor de Correo (Mail Host)">la máquina servidora de correo (mail
        host)</a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-mua"></a>27.2.1. El Agente de Usuario</h3></div></div></div><p>Entre las opciones más conocidas tenemos:
	<span class="application">mutt</span>,
	<span class="application">pine</span>, <span class="application">elm</span>,
	y <code class="command">mail</code>, junto con programas con interfaz
        gráfica del estilo de <span class="application">balsa</span> o
	<span class="application">xfmail</span> por nombrar unos pocos.
        También existen lectores de correo basados en navegadores web.
        Los programas de correo basados en navegadores web
        actúan de pasarela para las transacciones de correo
        electrónico, entregando dichas transacciones al
        <a class="link" href="#mail-host" title="27.2.5. El Servidor de Correo (Mail Host)"><span class="quote">&#8220;<span class="quote">servidor de correo</span>&#8221;</span></a>
        local, llamando a uno de los <a class="link" href="#mail-mta" title="27.2.2. Agente de Transporte de Correo">agentes
        de transporte de correo</a> disponibles en la máquina local,
        o entregando dichas transacciones a un agente de transporte
        remoto utilizando el protocolo <acronym class="acronym">TCP</acronym>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-mta"></a>27.2.2. Agente de Transporte de Correo</h3></div></div></div><a id="idp79069776" class="indexterm"></a><a id="idp79071056" class="indexterm"></a><a id="idp79072336" class="indexterm"></a><a id="idp79073616" class="indexterm"></a><p>FreeBSD viene con <span class="application">sendmail</span> por defecto,
        pero también se soportan otros dæmones, entre los cuales
        se encuentran:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">exim</span>;</p></li><li class="listitem"><p><span class="application">postfix</span>;</p></li><li class="listitem"><p><span class="application">qmail</span>.</p></li></ul></div><p>El agente de transporte de correo normalmente posee dos
        funcionalidades, por un lado se responsabiliza de la recepción
        y por otro se encarga de entregar el correo de salida.
        <span class="emphasis"><em>No</em></span> es responsable de la recolección
        automática de correo mediante la utilización de
        protocolos como <acronym class="acronym">POP</acronym> o <acronym class="acronym">IMAP</acronym>,
        ni se utiliza para que el usuario pueda acceder a las
        carpetas de correo locales.  Para realizar estas otras tareas,
        se necesitan <a class="link" href="#mail-receive" title="27.2.4. Recepción de correo">dæmons</a>
        adicionales.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Versiones antiguas de <span class="application">sendmail</span>
          poseen varios problemas de seguridad que pueden facilitar a un
          atacante el acceso local o remoto a la máquina
          que ejecuta <span class="application">sendmail</span>.
          Para evitar dichos problemas de seguridad se recomienda
          utilizar una versión actualizada de <span class="application">
          sendmail</span>.
          Tiene más opciones a la hora de elegir <acronym class="acronym">
          MTA</acronym> en los <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Ports de
          FreeBSD</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-dns"></a>27.2.3. Correo electrónico y DNS</h3></div></div></div><p>El Sistema de Nombres de Dominio (en inglés DNS) y su
        correspondiente dæmon (llamado <code class="command">named</code>)
        constituyen una parte fundamental del procedimiento
        de entrega de correo electrónico.  Para entregar el correo
        electrónico al destinatario adecuado el dæmon
        servidor de correo busca el sitio remoto dentro del sistema de
        DNS.</p><a id="idp79085776" class="indexterm"></a><p>El <acronym class="acronym">DNS</acronym> es la entidad responsable de asociar
        nombres con direcciones IP, pero además se encarga de
        almacenar información específica relacionada con la
        entrega de correo mediante registros de tipo MX. Los registros MX
        (Mail eXchanger) especifican qué máquina o
        máquinas están encargadas de recibir correo
        electrónico para un determinado nombre de dominio.  En caso
        de no existir ningún registro MX para el dominio del
        destinatario, se busca información almacenada
        en registros de tipo A para enviar el correo al destino final.</p><p>Se pueden consultar los registros MX para cualquier dominio
        utilizando el comando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=host&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">host</span>(1)</span></a>, como se puede observar en el
        siguiente ejemplo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>host -t mx FreeBSD.org</code></strong>
        FreeBSD.org mail is handled (pri=10) by mx1.FreeBSD.org</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-receive"></a>27.2.4. Recepción de correo</h3></div></div></div><a id="idp79090512" class="indexterm"></a><p>La recepción de correo electrónico para su dominio
        se realiza mediante lo que se conoce como la máquina de
        correo (mail host). Ésta máquina recoge todo el correo
        dirigido a su dominio y lo almacena en <code class="filename">mbox</code>
        (el método por defecto para el almacenamiento de correo) o en
        formato Maildir, dependiendo de la configuración de la
        máquina.  Una vez que el correo ha sido almacenado
        con éxito se puede leer en local utilizando aplicaciones como
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a> o como <span class="application">mutt</span>, o de forma remota
        mediante un conjunto de protocolos tales como
        <acronym class="acronym">POP</acronym> o <acronym class="acronym">IMAP</acronym>.  Esto significa que
        si usted va a leer el correo de forma local no necesita instalar
        ningún servidor de <acronym class="acronym">POP</acronym> o
        <acronym class="acronym">IMAP</acronym>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pop-and-imap"></a>27.2.4.1. Acceso a carpetas de correo remotas mediante
          <acronym class="acronym">POP</acronym> e <acronym class="acronym">IMAP</acronym></h4></div></div></div><a id="idp79100752" class="indexterm"></a><a id="idp79101264" class="indexterm"></a><p>Para poder acceder a carpetas de correo de forma remota se
          necesita tener acceso a un servidor de <acronym class="acronym">POP</acronym> o
          <acronym class="acronym">IMAP</acronym>.  Éstos protocolos permiten a los
          usuarios conectarse a sus carpetas de correo desde ubicaciones
          remotas de una forma sencilla.  Aunque ambos, <acronym class="acronym">POP</acronym>
          y <acronym class="acronym">IMAP</acronym>, permiten este acceso remoto
          <acronym class="acronym">IMAP</acronym> ofrece algunas ventajas añadidas,
          algunas de las cuales son:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El acceso mediante <acronym class="acronym">IMAP</acronym> permite almacenar
              los correos en el servidor remoto sin necesidad de extraerlos
			  y tener que almacenarlos en local.</p></li><li class="listitem"><p><acronym class="acronym">IMAP</acronym> soporta actualizaciones concurrentes.</p></li><li class="listitem"><p><acronym class="acronym">IMAP</acronym> resulta ser extremadamente
              útil bajo enlaces de baja velocidad puesto que permite
              a los usuarios recuperar la estructura de los mensajes sin
              necesidad de bajarse todo el contenido.  Además puede
              realizar tareas tales como búsquedas directas en el
              servidor con el fin de minimizar la utilización
              de la red.</p></li></ul></div><p>Para instalar un servidor de <acronym class="acronym">POP</acronym> o de
	  <acronym class="acronym">IMAP</acronym> se deben dar los siguientes pasos:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Seleccionar el servidor <acronym class="acronym">IMAP</acronym> o
	      <acronym class="acronym">POP</acronym> que mejor cumpla a sus necesidades.
	      Los siguientes servidores <acronym class="acronym">POP</acronym> e
	      <acronym class="acronym">IMAP</acronym> son bien conocidos y son firmes
              candidatos para ello:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">qpopper</span>;</p></li><li class="listitem"><p><span class="application">teapop</span>;</p></li><li class="listitem"><p><span class="application">imap-uw</span>;</p></li><li class="listitem"><p><span class="application">courier-imap</span>;</p></li></ul></div></li><li class="step"><p>Instalar el dæmon <acronym class="acronym">POP</acronym> o
	      <acronym class="acronym">IMAP</acronym> de su elección desde
              el árbol de <span class="quote">&#8220;<span class="quote">ports</span>&#8221;</span>.</p></li><li class="step"><p>Modifique donde sea necesario <code class="filename">
              /etc/inetd.conf</code> para que el servidor
	      <acronym class="acronym">POP</acronym> o <acronym class="acronym">IMAP</acronym>
	      se ejecute automáticamente.</p></li></ol></div><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Tenga en cuenta que tanto <acronym class="acronym">POP</acronym>
            como  <acronym class="acronym">IMAP</acronym> transmiten información,
            en especial el usuario y la contraseña, en texto plano.
            Eso significa que si se desea seguridad en la transmisión
            de la información a través de la red se deben
            considerar mecanismos adicionales como por ejemplo el
            encapsulado de la sesión mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>.
            El encapsulado de sesiones se explica en
            <a class="xref" href="#security-ssh-tunneling" title="14.11.8. Túneles SSH">Sección 14.11.8, &#8220;Túneles SSH&#8221;</a>.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="local"></a>27.2.4.2. Acceso a carpetas de correo locales</h4></div></div></div><p>Las carpetas de correo pueden abrirse de forma local utilizando
          un agente de correo de usuario <acronym class="acronym">(MUA)</acronym>
	  en el servidor donde reside la carpeta.  Se suelen usar los
          programas <span class="application">mutt</span> or <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-host"></a>27.2.5. El Servidor de Correo (Mail Host)</h3></div></div></div><a id="idp79139024" class="indexterm"></a><p>El servidor de correo es el nombre que se usa para identificar a
        la máquina responsable de la entrega y
        recepción de correo electrónico dentro de una
        organización.  Ésta máquina puede recibir correo
        de varios usuarios dentro de su dominio.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sendmail"></a>27.3. Configuración de <span class="application">sendmail</span></h2></div><div><span class="authorgroup">Contribuido por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp79142992" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> es el agente de transporte de correo (MTA) por
      defecto de FreeBSD.
      La responsabilidad de <span class="application">sendmail</span> consiste en
      aceptar correo de agentes de correo de usuario (<acronym class="acronym">MUA</acronym>)
      y en entregar dichos correos al agente de transporte de correo
      apropiado, según se especifique en su archivo de
      configuración.  <span class="application">Sendmail</span>
      también acepta conexiones de red provinientes de otros agentes
      de transporte y puede depositar el correo recibido en carpetas locales o
      o entregarlo a otros programas.</p><p><span class="application">sendmail</span> utiliza los siguientes ficheros
      de configuración:</p><a id="idp79146960" class="indexterm"></a><a id="idp79147856" class="indexterm"></a><a id="idp79148752" class="indexterm"></a><a id="idp79149648" class="indexterm"></a><a id="idp79150544" class="indexterm"></a><a id="idp79151440" class="indexterm"></a><a id="idp79152464" class="indexterm"></a><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Filename</th><th>Function</th></tr></thead><tbody><tr><td>
	      <code class="filename">/etc/mail/access</code>
	    </td><td>Base de datos de accesos de <span class="application">sendmail</span></td></tr><tr><td>
	      <code class="filename">/etc/mail/aliases</code>
	    </td><td>Carpeta de alias</td></tr><tr><td>
	      <code class="filename">/etc/mail/local-host-names</code>
	    </td><td>Listados de máquinas para las que
              <span class="application">sendmail</span>acepta correo</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailer.conf</code>
	    </td><td>Configuración del programa de correo</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailertable</code>
	    </td><td>Tabla de entregas de correo</td></tr><tr><td>
	      <code class="filename">/etc/mail/sendmail.cf</code>
	    </td><td>Archivo de configuración principal de
              <span class="application">sendmail</span></td></tr><tr><td>
	      <code class="filename">/etc/mail/virtusertable</code>
	    </td><td>Usuarios virtuales y tablas de dominio</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79176272"></a>27.3.1. <code class="filename">/etc/mail/access</code></h3></div></div></div><p>La base de datos de accesos define qué máquinas o
      direcciones IP  pueden acceder al servidor de correo y quée clase
      de acceso tienen permitido. Las máquinas se listan junto con
      las opciones <code class="option">OK</code>, <code class="option">REJECT</code>,
      <code class="option">RELAY</code> o simplemente junto con un mensaje de error
      que se entrega a la rutina de gestión de excepciones de
      <span class="application">sendmail</span>.
      Las máquinas que se listan junto con la opción
      <code class="option">OK</code>, que es el valor por defecto, tienen permiso
      para enviar correo a la máquina servidora siempre y cuando la
      dirección de correo de destino sea la máquina servidora
      de correo.  Las máquinas listadas junto con la opción
      <code class="option">REJECT</code> tienen el acceso prohibido a
      conexiones de correo electrónico con el servidor.  Por
      último las máquinas que poseen la etiqueta
      <code class="option">RELAY</code> para sus nombres tienen permitido enviar correo
      para cualquier destino a través de la máquina
      servidora de correo.</p><div class="example"><a id="idp79180240"></a><div class="example-title">Ejemplo 27.1. Configuración de la base de datos de acceso de <span class="application">sendmail</span>
        </div><div class="example-contents"><pre class="programlisting">cyberspammer.com                550 We don't accept mail from spammers
FUENTE.DE.CORREO.INDISCRIMINADO@ 550 We don't accept mail from spammers
otra.fuente.de.spam             REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</pre></div></div><br class="example-break" /><p>En el ejemplo se pueden observar cinco entradas.  Los generadores de
     correo que coinciden con la parte izquierda de la tabla se ven afectados
     por la parte acción especificada en la parte derecha.
     Los primeros dos ejemplos emiten un código de error para la
     rutina de excepciones de <span class="application">sendmail</span>.
     El mensaje de error se transmite a la máquina remota cuando
     se recibe un correo que coincide con la parte izquierda de la tabla.
     La siguiente entrada rechaza correo de una determinada máquina
     de internet, <code class="systemitem">otra.fuente.de.spam</code>.
     La siguiente entrada acepta conexiones de correo de la máquina
     <code class="systemitem">okay.cyberspammer.com</code>, lo cual es
     más exacto que la línea de arriba de
     <code class="systemitem">cyberspammer.com</code>.  Las coincidencias
     más completas tienen precedencia sobre las menos
     específicas.  La última entrada permite actuar como
     <span class="quote">&#8220;<span class="quote">relay</span>&#8221;</span> o pasarela de correo electrónico para aquellas
     máquinas que posean una dirección IP que comience por
     <code class="systemitem">128.32</code>.  Éstas máquinas podrían
     enviar correo destinado a otros servidores de correo utilizando el
     nuestro.</p><p>Cuando se actualiza este fichero se debe ejecutar
     <code class="command">make</code> dentro de <code class="filename">/etc/mail/</code>
     para que se actualice la base de datos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79186256"></a>27.3.2. <code class="filename">/etc/mail/aliases</code></h3></div></div></div><p>La base de datos de alias contiene una lista de directorios virtuales
      que son traducidas a otros usuarios, ficheros, programas o incluso otros
      alias.
      A continuación se muestran unos pocos ejemplos de la
      sintáxis que se puede utilizar
      dentro del fichero <code class="filename">/etc/mail/aliases</code>:</p><div class="example"><a id="idp79187792"></a><div class="example-title">Ejemplo 27.2. Mail Aliases</div><div class="example-contents"><pre class="programlisting">root: usuariolocal
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: "|/usr/local/bin/procmail"</pre></div></div><br class="example-break" /><p>El formato del fichero es sencillo; el nombre de la carpeta de
        correo que aparece a la izquierda
        de los dos puntos se traduce al/los destinos de la derecha.
        El primer ejemplo simplemente traduce la carpeta
        <code class="systemitem">root</code>
        a la carpeta <code class="systemitem">usuariolocal</code>, la cual se examina de
        nuevo utilizando la misma base de datos de alias, y si no existe
        ninguna otra coincidencia el mensaje se entrega
        al usuario local <code class="systemitem">usuariolocal</code>.
        En el ejemplo siguiente se muestra una lista de correo.
        Todo correo que se envía a la carpeta <code class="systemitem">ftp-bugs</code> se traduce en un envío para
	tres carpetas locales diferentes: <code class="systemitem">joe</code>,
	<code class="systemitem">eric</code> y <code class="systemitem">paul</code>.
        Es importante señalar que
        también se pueden especificar carpetas remotas mediante la forma
        <code class="literal">usuario@ejemplo.com</code>.  El siguiente ejemplo muestra
        la escritura del correo a un fichero, en este caso en <code class="filename">
        /dev/null</code>.  El último ejemplo muestra el
        envió de correo a un programa; en este caso el mensaje de
        correo se escribe en la entrada estándar del programa
        <code class="filename">/usr/local/bin/procmail</code> utilizando una
        tubería (o <span class="quote">&#8220;<span class="quote"> pipe</span>&#8221;</span>)  de <span class="trademark">UNIX</span>®.</p><p>Cuando se actualiza este fichero se debe ejecutar
     <code class="command">make</code> dentro de <code class="filename">/etc/mail/</code>
     para actualizar la base de datos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79196368"></a>27.3.3. <code class="filename">/etc/mail/local-host-names</code></h3></div></div></div><p>Este archivo es una lista de nombres de máquinas que
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> acepta como nombres locales.
      Se suele utilizar para escribir aquellos dominios o máquinas
      de los cuales <span class="application">sendmail</span> va a recibir correo.
      Por ejemplo, si nuestro servidor de correo
      va a aceptar correo proveniente del dominio <code class="systemitem">ejemplo.com</code> y también de la
      máquina <code class="systemitem">mail.ejemplo.com</code> nuestro
      <code class="filename">local-host-names</code>
      debería ser algo así:</p><pre class="programlisting">ejemplo.com
mail.ejemplo.com</pre><p>Cuando se actualiza este fichero <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> necesita ser
      reiniciado para que tenga en cuenta los cambios.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79210320"></a>27.3.4. <code class="filename">/etc/mail/sendmail.cf</code></h3></div></div></div><p>Archivo de configuración principal de <span class="application">
      sendmail</span>, controla el comportamiento global de
      <span class="application">sendmail</span>, incluyendo cualquier tarea
      desde la reescritura de direcciones de correo electrónico
      hasta la devolución de mensajes de error a los servidores
      de correo remotos.  Es evidente que con un abanico tan diverso el
      fichero de configuración
      acaba por ser bastante complejo y sus detalles quedan fuera de los
      objetivos de esta sección. Afortunadamente este
      fichero raras veces necesita ser modificado, al menos en lo que
      respecta a servidores de correo estándar.
     </p><p>El fichero de configuración principal de <span class="application">
      sendmail</span> se puede construir a partir de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>, es decir,  macros que se utilizan para definir
      características y comportamientos específicos
      de <span class="application">sendmail</span>.  Se ruega al lector consultar
      <code class="filename">/usr/src/contrib/sendmail/cf/README</code> para obtener
      más detalles acerca de las distintas macros que
      se pueden utilizar.</p><p>Cuando se realizan cambios a este fichero
      <span class="application">sendmail</span> debe ser reiniciado para que los
      cambios surtan efecto.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79215440"></a>27.3.5. <code class="filename">/etc/mail/virtusertable</code></h3></div></div></div><p>El fichero <code class="filename">virtusertable</code> asocia direcciones de
      correo pertenecientes a dominios y carpetas virtuales con carpetas
      reales. Estas carpetas pueden ser locales, remotas, alias
      definidos en <code class="filename">/etc/mail/aliases</code> o incluso ficheros.</p><div class="example"><a id="idp79217488"></a><div class="example-title">Ejemplo 27.3. Ejemplo de asociación de correo de dominio virtual</div><div class="example-contents"><pre class="programlisting">root@ejemplo.com                root
postmaster@ejemplo.com          postmaster@noc.ejemplo.net
@ejemplo.com                    joe</pre></div></div><br class="example-break" /><p>En el ejemplo superior se observa una asociación para el
      dominio <code class="systemitem">ejemplo.com</code>.
      Este fichero se procesa de arriba a abajo buscando la primera
      coincidencia. La primera entrada asocia <code class="literal">
      root@ejemplo.com</code> con la carpeta de correo local denominada
      <code class="systemitem">root</code>.  La siguiente entrada asocia
      <code class="literal">postmaster@ejemplo.com</code> con la carpeta
      <code class="systemitem">postmaster</code> situada en la máquina
      <code class="systemitem">noc.ejemplo.net</code>.  Por último, si
      no se ha encontrado ninguna coincidencia para
      <code class="systemitem">ejemplo.com</code> se le asigna la
      última asociación, la cual asocia cualquier mensaje
      de correo proveniente de <code class="systemitem">
      ejemplo.com</code> con la carpeta de
      correo local denominada <code class="systemitem">joe</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-changingmta"></a>27.4. Sustitución del Agente de Transferencia de Correo</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrew</span> <span class="surname">Boothman</span></span>. </span></div><div><span class="authorgroup">Información obtenida de correos escritos por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gregory</span> <span class="surname">Neil Shapiro</span></span>. </span></div></div></div><a id="idp79227984" class="indexterm"></a><p>Como ya se ha comentado FreeBSD viene con <span class="application">
      sendmail</span> ya instalado como agente de transferencia de
      correo por defecto.  De esta forma <span class="application">sendmail</span>
      se encarga de gestionar el correo entrante y saliente.</p><p>No obstante, debido a distintas razones algunos administradores de
      sistemas prefieren utilizar otro MTA.
      Estas razones varían desde simplemente querer probar otros
      programas de transferencia de correo, hasta la necesidad
      de utilizar un determinado programa que hace uso de una función
      específica de un agente determinado.  Por suerte
      cualesquiera que sean estas razones FreeBSD posee un sencillo
      procedimiento para sustituir a
      <span class="application">sendmail</span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79231056"></a>27.4.1. Instalación de un nuevo MTA</h3></div></div></div><p>Existen una amplia gama de MTA alternativos a <span class="application">
        sendmail</span>. Un buen punto de partida es el <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Sistema de Ports de FreeBSD</a>,
        donde se pueden localizar varios.  Por supuesto el usuario tiene
        libertad para utilizar cualquier MTA, siempre y cuando se pueda
        ejecutar en FreeBSD sin problemas.</p><p>Lo primero es instalar el nuevo MTA.  Una vez que está
        instalado normalmente se tiene la oportunidad para decidir si
        realmente cubre las necesidades y también se tiene la
        oportunidad de configurar el nuevo software antes de sustituir a
        <span class="application">sendmail</span>.  El usuario debe tener en cuenta
        que el nuevo MTA puede sobreescribir algunos binarios del sistema como
        por ejemplo <code class="filename">/usr/bin/sendmail</code>.
	En cualquier caso el nuevo software de correo
        suele entrar en funcionamiento con una configuración
        por defecto.</p><p>Por favor, recuerde que se recomienda leer la documentación
        del MTA seleccionado para obtener más
        información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79247056"></a>27.4.2. Desactivación de la aplicación <span class="application">
        sendmail</span></h3></div></div></div><p>El procedimiento utilizado para ejecutar
	<span class="application">sendmail</span> cambió significativamente
        entre las releases 4.5-RELEASE y 4.6-RELEASE.
        De esta forma el procedimiento utilizado para la desactivación
        hoy en día es
        sutílmente distinto al utilizado en dichas distribuciones.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79248720"></a>27.4.2.1. FreeBSD 4.5-STABLE antes de 2002/4/4 y anteriores
	  (Incluyendo 4.5-RELEASE y anteriores)</h4></div></div></div><p>Introducir:</p><pre class="programlisting">sendmail_enable="NO"</pre><p>dentro de <code class="filename">/etc/rc.conf</code>.  Esta variable
          desactiva el servicio de recepción de correo de
	  <span class="application">sendmail</span>,
	  pero salvo que se modifique (ver más adelante) el
          fichero <code class="filename">/etc/mail/mailer.conf</code>
	  <span class="application">sendmail</span> todavía será
          la aplicación elegida para enviar correo
          electrónico.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79252176"></a>27.4.2.2. FreeBSD 4.5-STABLE desde de 2002/4/4
	  (Incluyendo 4.6-RELEASE y posteriores)</h4></div></div></div><p>Para poder desactivar completamente
	  <span class="application">sendmail</span> haga lo siguiente:</p><pre class="programlisting">sendmail_enable="NONE"</pre><p>dentro del fichero <code class="filename">/etc/rc.conf.</code></p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml"> Se desactiva el servicio de correo de salida de
            <span class="application">sendmail</span>.
	    Es importanque que se reemplace con un sistema de entrega de
            correo alternativo que sea totalmente funcional.
            En caso contrario funciones del sistema FreeBSD tales como
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> no podrán entregar sus resultados por
            correo eletrónico tal y como normalmente hacen.
            Varias partes del sistema FreeBSD esperan disponer de un sistema
            de correo funcional compatible con
            sendmail.  Si las aplicaciones continúan utilizando los
            binarios de <span class="application">sendmail</span>
	    para realizar envíos de correo después de su
            desactivación el correo podría ser almacenado en una
            cola inactiva de <span class="application">sendmail</span>, en cuyo caso
            nunca se entregaría.</p></div><p>Si sólo se quiere desactivar el servicio de correo de
          entrada de <span class="application">sendmail</span>, basta con establecer
	  la variable:</p><pre class="programlisting">sendmail_enable="NO"</pre><p>dentro de <code class="filename">/etc/rc.conf</code>.
          En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a> tiene más información sobre
          las opciones de arranque de <span class="application">
          sendmail</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79273040"></a>27.4.3. Ejecución del nuevo MTA en el arranque</h3></div></div></div><p>Existen dos métodos alternativos para ejecutar el nuevo
        MTA en el arranque, dependiendo
        de la versión de FreeBSD que se esté ejecutando.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79274064"></a>27.4.3.1. FreeBSD 4.5-STABLE antes de 2002/4/11
	  (Incluyendo 4.5-RELEASE y anteriores)</h4></div></div></div><p>Se debe añadir un script en
	  <code class="filename">/usr/local/etc/rc.d/</code> cuyo nombre termine en
	  <code class="filename">.sh</code> y que sea ejecutable por
	  <code class="systemitem">root</code>.  El script debe aceptar los
          parámetros <code class="literal">start</code> y
	  <code class="literal">stop</code>.  Cuando el sistema FreeBSD se está
          inicializando, los scripts de arranque
          ejecutarán el siguiente comando:</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh start</pre><p>La misma orden se puede utilizar también para ejecutar
          el servidor de forma manual.
          Cuando el sistema se está reiniciando los scripts del sistema
          ejecutan los ficheros ubicados en
          <code class="filename">/usr/local/etc/rc.d/</code> utilizando la opción
	  <code class="literal">stop</code>, en nuestro caso:</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh stop</pre><p>Dicho comando tambíen se puede utilizar para detener el
          servidor de correo de forma manual cuando el
          sistema FreeBSD se ejecuta con normalidad.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79283792"></a>27.4.3.2. FreeBSD 4.5-STABLE después de 2002/4/11
	  (Incluyendo 4.6-RELEASE y posteriores)</h4></div></div></div><p>Con las últimas versiones de FreeBSD se puede utilizar el
          método anterior pero también se puede
          especificar</p><pre class="programlisting">mta_start_script="nombre_de_fichero"</pre><p>dentro de <code class="filename">/etc/rc.conf</code>, donde
	  <em class="replaceable"><code>nombre_de_fichero</code></em> es el nombre de
          algún script que se ejecuta en tiempo de arranque
          para inicializar el nuevo MTA.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79286608"></a>27.4.4. Sustitución de <span class="application">sendmail</span> como el
        agente de transporte de correo predeterminado.</h3></div></div></div><p>El programa <span class="application">sendmail</span> es tan
        imprescindible y es utilizado por tal multitud de programas en
        los sistemas <span class="trademark">UNIX</span>® que algunos programas simplemente asumen que
        <span class="application">sendmail</span> se encuentra instalado y
        configurado dentro del sistema.
	Por esta razón varios MTAs alternativos proporcionan su propia
        implementación de la interfaz de línea de comandos que
        posée <span class="application">sendmail</span>; esto facilita que se
        puedan utilizar como sustitutos de <span class="application">sendmail</span>
        sin mayores dificultades.</p><p>Por lo tanto si desea utilizar un agente de transporte de correo
        alternativo debe asegurarse de que todo software que intente ejecutar
	binario de <span class="application">sendmail</span> estándar,
        <code class="filename">/usr/bin/sendmail</code>, realmente ejecute el nuevo MTA
        en su lugar. Por fortuna FreeBSD proporciona un sistema llamado
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mailwrapper</span>(8)</span></a> que realiza precisamente esta tarea.</p><p>Cuando <span class="application">sendmail</span> está funcionando
        se debe localizar algo como lo siguiente dentro del fichero
        <code class="filename">/etc/mail/mailer.conf</code>:</p><pre class="programlisting">sendmail	 /usr/libexec/sendmail/sendmail
send-mail	/usr/libexec/sendmail/sendmail
mailq		/usr/libexec/sendmail/sendmail
newaliases	/usr/libexec/sendmail/sendmail
hoststat	/usr/libexec/sendmail/sendmail
purgestat	/usr/libexec/sendmail/sendmail</pre><p>Esto significa que cuando cualquiera de estos comandos
	(por ejemplo <code class="filename">sendmail</code> mísmamente)
        se ejecutan el sistema ejecutará en su lugar una copia del
        el sistema ejecuta en su lugar una copia del <span class="quote">&#8220;<span class="quote">
        mailwrapper</span>&#8221;</span> denominada <code class="filename">sendmail</code>
        que chequea el fichero <code class="filename">mailer.conf</code> y ejecuta
        <code class="filename">/usr/libexec/sendmail/sendmail</code>.
        Este sistema permite cambiar de una forma sencilla los binarios que
        se ejecutan realmente cuando se invocan las funciones de
        <code class="filename">sendmail</code>.</p><p>Si se quiere que ejecutar
        <code class="filename">/usr/local/supermailer/bin/sendmail-compat</code>
	en lugar de <span class="application">sendmail</span> se puede cambiar el
	fichero <code class="filename">/etc/mail/mailer.conf</code> para que contenga
        lo siguiente:</p><pre class="programlisting">sendmail	 /usr/local/supermailer/bin/sendmail-compat
send-mail	/usr/local/supermailer/bin/sendmail-compat
mailq		/usr/local/supermailer/bin/mailq-compat
newaliases	/usr/local/supermailer/bin/newaliases-compat
hoststat	/usr/local/supermailer/bin/hoststat-compat
purgestat	/usr/local/supermailer/bin/purgestat-compat</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79302736"></a>27.4.5. Últimos Pasos</h3></div></div></div><p>Una vez que todo estáconfigurado a su gusto
          hay que matar los procesos de <span class="application">sendmail</span>
          que ya no se necesitan y ejecutar los procesos pertenecientes al
          nuevo software de MTA, o utilizar la opción más
          sencilla: reiniciar la máquina.  Reinicar la máquina
          nos brinda la oportunidad de comprobar que se ha configurado
          correctamente el arranque del sistema para que ejecute de forma
          automática el nuevo MTA.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-trouble"></a>27.5. Depuración de Problemas</h2></div></div></div><a id="idp79305168" class="indexterm"></a><div class="qandaset"><a id="idp79306320"></a><dl><dt>27.5.1. <a href="#idp79306576">?Por qué tengo que utilizar el FQDN para las
          máquinas de mi organización?</a></dt><dt>27.5.2. <a href="#idp79317584">sendmail dice mail
	  loops back to myself (el correo vuelve a mis manos)</a></dt><dt>27.5.3. <a href="#idp79332176">?Cómo puedo ejecutar un servidor de correo
          utilizando una máquina que se conecta a internet
              mediante modem analógico (dial-up) ?</a></dt><dt>27.5.4. <a href="#idp79377360">?Por qué me siguen saliendo mensajes de error
            del tipo Relaying Denied cuando se trata
	    de enviar correo proveniente de otras máquinas?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp79306576"></a><a id="idp79306832"></a><p><strong>27.5.1.</strong></p></td><td align="left" valign="top"><p>?Por qué tengo que utilizar el FQDN para las
          máquinas de mi organización?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Probablemente se deba a que la máquina de correo se
          encuentra en un dominio diferente; si por ejemplo la
          máquina de correo se encuentra en <code class="systemitem">foo.bar.edu</code>
          y se desea alcanzar una máquina llamada
          <code class="systemitem">mumble</code> en el dominio
          <code class="systemitem">bar.edu</code> se tiene que referir a
          ella mediante un nombre de dominio completo
          (<span class="quote">&#8220;<span class="quote">fully-quailified domain name</span>&#8221;</span> o FQDN), en éste
          caso <code class="systemitem">mumble.bar.edu</code> en lugar de
          referirse a ella simplemente como <code class="systemitem">mumble</code>.</p><p>Tradicionalmente, la referencia incompleta era posible
          utilizando <span class="quote">&#8220;<span class="quote">resolvers</span>&#8221;</span> de BSD BIND<a id="idp79311824" class="indexterm"></a>.
	  No obstante la versión de <span class="application">BIND</span>
          que en la actualidad se ofrece con FreeBSD ya no permite por defecto
          el uso de dichas abreviaturas salvo para aquellas máquinas
          que pertenecen al dominio al que su sistema pertenezca.
          Una máquina como <code class="systemitem">mumble</code> será buscada
          como <code class="systemitem">mumble.foo.bar.edu</code> o la
          búsqueda será redireccionada al servidor de dominio
          raíz del DNS.</p><p>Esto es distinto a lo que ocurría en versiones anteriores
          de BIND, donde la búsqueda se producía a través
          de <code class="systemitem">mumble.bar.edu</code> y de
          <code class="systemitem">mumble.edu</code>.  Se recomienda
          consultar a la RFC 1535 para conocer el motivo que se considerara
          una práctica errónea o incluso un agujero de
          seguridad.</p><p>Una buena solución a este problema puede ser
         incluír la siguiente línea

          </p><pre class="programlisting">search foo.bar.edu bar.edu</pre><p>

          en lugar de

          </p><pre class="programlisting">domain foo.bar.edu</pre><p>

          dentro del fichero <code class="filename">/etc/resolv.conf</code>.
          No obstante se debe asegurar de que el orden de
	  búsqueda no se expande más allá del
	  <span class="quote">&#8220;<span class="quote">límite entre la administración local y la administración pública</span>&#8221;</span>,
	  tal y como se le denomina en la RFC 1535.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp79317584"></a><a id="idp79317840"></a><p><strong>27.5.2.</strong></p></td><td align="left" valign="top"><p><span class="application">sendmail</span> dice <span class="errorname">mail
	  loops back to myself</span> (el correo vuelve a mis manos)</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esta pregunta se responde en las FAQ de
	<span class="application">sendmail</span> de la siguiente forma:</p><pre class="programlisting">Estoy obteniendo los siguientes mensajes de error:

553 MX list for domain.net points back to relay.domain.net
554 &lt;user@domain.net&gt;... Local configuration error

¿Cómo puedo solucionar esto?

Usted ha especificado que el correo para el dominio (por ejemplo,
para el dominio dominio.net) sea reenviado a una máquina determinada
(en este caso relay.dominio.net), para lo que se utiliza un registro
de DNS de tipo MX<a id="idp79320528" class="indexterm"></a>,
pero la máquina que actúa de relay no se
reconoce a sí misma como perteneciente al dominio dominio.net.
Se debe añadir dominio.net al fichero /etc/mail/local-host-names,
que recibe el nombre de /etc/sendmail.cw en versiones de sendmail previas
a la 8.10.  Se puede utilizar la macro FEATURE(use_cw_file) para indicar
dónde se encuentra el fichero local-host-names; también se
puede añadir <span class="quote">&#8220;<span class="quote">Cw dominio.net</span>&#8221;</span> directamente
al fichero <code class="filename">/etc/mail/sendmail.cf</code>
         </pre><p>Las FAQ de <span class="application">sendmail</span> se pueden
          encontrar en <code class="uri"><a class="uri" href="http://www.sendmail.org/faq/" target="_top">http://www.sendmail.org/faq/</a></code> y son de lectura
          obligada si se quiere depurar el comportamiento y la
	  configuración de <span class="application">sendmail</span>.
	</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp79332176"></a><a id="idp79332432"></a><p><strong>27.5.3.</strong></p></td><td align="left" valign="top"><p>?Cómo puedo ejecutar un servidor de correo
          utilizando una máquina que se conecta a internet
              mediante modem analógico (dial-up) ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se quiere conectar una máquina FreeBSD dentro de una LAN a
	  Internet.  La máquina FreeBSD será una pasarela de
          correo para dicha LAN.  La conexión mediante PPP<a id="idp79333712" class="indexterm"></a> no es
	  dedicada.</p><p>Existen al menos dos formas distintas de hacerlo.  Una de ellas
          consiste en utilizar UUCP<a id="idp79334736" class="indexterm"></a>.</p><p>Otra forma consiste en hacerse con un servidor de internet a
          tiempo completo para proporcionar servicios de agente de transporte
          secundario para nuestro dominio.  Si por ejemplo el dominio de
          nuestra compañía es <code class="systemitem">ejemplo.com</code>, nuestro proveedor de acceso
          a internet puede instalar lo siguiente en el DNS:</p><pre class="programlisting">ejemplo.com.          MX        10      ejemplo.com.
                      MX        20      ejemplo.net.</pre><p>Nótese que el agente de correo primario es nuestro
           dominio, ejemplo.com, y además se encuentra configurado
           un agente de transporte secundario en la máquina
           ejemplo.net.  En este caso sólamente se debe especificar
           una máquina como receptor final de correo
           (añadiendo <code class="literal">Cw ejemplo.com</code>) al fichero
           <code class="filename">/etc/mail/sendmail.cf</code> de la máquina
           <code class="systemitem">example.com</code>)</p><p>Cuando el <code class="command">sendmail</code> que está enviando
          el correo trata de entregar dicho correo primero intentará
          conectarse con nosotros (<code class="systemitem">ejemplo.com</code>) utilizando el enlace de
          modem.  Lo más probable es que la operación termine
          después de un tiempo de espera debido a que el enlace modem
          esté caído.
          La aplicación <span class="application">sendmail</span>
          automáticamente entregará el correo al servidor
          especificado como agente de transporte de correo secundario
          (segundo registro MX)<a id="idp79340112" class="indexterm"></a>, es decir, entregará el correo a
          nuestro proveedor de servicios de internet (<code class="systemitem">ejemplo.net</code>).  El sitio MX secundario
          tratará de conectarse con nuestra máquina de una forma
          periódica con el objeto de entregar el correo a la
          máquina que actúa como agente servidor de correo
          primario (<code class="systemitem">ejemplo.com</code>).</p><p>Puede ser de mucha utilidad un script de <span class="quote">&#8220;<span class="quote">login</span>&#8221;</span>
          como el que se muestra a continuación:</p><pre class="programlisting">#!/bin/sh
# Ponme en /usr/local/bin/pppmiconexion
( sleep 60 ; /usr/sbin/sendmail -q ) &amp;
/usr/sbin/ppp -direct pppmiconexion</pre><p>Si vamos a crear un script de <span class="quote">&#8220;<span class="quote">login</span>&#8221;</span> separado para
          un usuario determinado se puede utilizar
	  <code class="command">sendmail -qRejemplo.com</code> en lugar del script
          anterior.  Esto obliga a que se procesen
          de forma inmediata todos los correos que se encuentren en la cola de
          <code class="systemitem">ejemplo.com</code>.</p><p>Vamos a dar una vuelta más de tuerca a la
          situación:</p><p>Mensaje robado a la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">lista de correo de Proveedores de Servicios de Internet en FreeBSD</a>.</p><pre class="programlisting">
&gt; Nosotros proporcionamos servicio de MX secundario a un cliente nuestro.
&gt; El cliente se conecta a nuestro servidor varias veces al día
&gt; de  forma automática para recoger sus correos para almacenarlos en
&gt; su servidor MX primario (nosotros no llamamos a su organización
&gt; justo cuando nos llega un correo suyo).
&gt; Nuestro sendmail envía la cola de correos cada 30 minutos. En
&gt; estos momentos nuestro cliente tiene que estar al menos 30 minutos
&gt; conectado para asegurarnos de que todo su correo ha sido enviado al
&gt; servidor MX primario.
&gt;
&gt; ?Existe algún comando que permita indicar a sendmail que
&gt; envíe todos los correos de la cola cuando quiera el cliente?
&gt; El cliente no tiene permisos de superusuario en la máquina que
&gt; alberga nuestro agente de transporte, por supuesto.

En la sección de <span class="quote">&#8220;<span class="quote">privacy flags</span>&#8221;</span> del fichero sendmail.cf
existe una definición como ésta:
Opgoaway,restrictqrun

Basta con eliminar restrictqrun para permitir que usuarios sin permisos de
superusuario arranquen el procesamiento de la cola.
Sería conveniente además que reordenaran los registros MX.
Nosotros somos el primer MX para nuestros clientes.
Además de esto hay que especificar:

# Si somos el mejor MX para una determinada máquina, intenta
# utilizarnos directamente en vez de generar un error de
# configuración local.
OwTrue

en el archivo de configuración de <span class="application">sendmail</span>.
Mediante la configuración anterior,
una organización remota entregará sus correos directamente a
usted, sin necesidad de intentar conectarse primero a través de
la conexión del cliente.  La etiqueta "OwTrue" se necesita para evitar
que <span class="application">sendmail</span> genere un mensaje de error.
A continuación ustedes se encargan de entregar el
correo a su(s) respectivo(s) cliente(s) tal como vienen haciendo.

Esta configuración sólo funciona para
<span class="quote">&#8220;<span class="quote">máquinas individuales</span>&#8221;</span>,
de tal forma que se necesita que el cliente especifique su servidor de correo
mediante entradas de tipo A en el DNS.  En concreto se necesita una entrada de
tipo A en el DNS para el dominio del cliente (<span class="quote">&#8220;<span class="quote">cliente.com</span>&#8221;</span>).
</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp79377360"></a><a id="idp79377616"></a><p><strong>27.5.4.</strong></p></td><td align="left" valign="top"><p>?Por qué me siguen saliendo mensajes de error
            del tipo <span class="errorname">Relaying Denied</span> cuando se trata
	    de enviar correo proveniente de otras máquinas?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>En las instalaciones del sistema FreeBSD por defecto
 	    <span class="application">sendmail</span> se configura para enviar
            correo sólamente desde la máquina en la cual
            se está ejecutando.  Por ejemplo si un servidor
            <acronym class="acronym">POP</acronym> está disponible los usuarios
            serán capaces de consultar su correo desde la universidad,
            el trabajo u otras localizaciones remotas, pero dichos usuarios
            podrán enviar correo desde dichas ubicaciones.
            Es habitual que unos instantes después del envío
            del correo dichos usuarios reciban un mensaje proveniente del
	    <span class="application">MAILER-DAEMON</span> con un error como
	    <span class="errorname">5.7 Relaying Denied</span>.</p><p>Existen varias formas de solventar este problema.  La
            más sencilla consiste en escribir la dirección
            IP de su proveedor de servicios dentro del fichero
 	    <code class="filename">/etc/mail/relay-domains</code>.  Una forma
            rápida de hacerlo sería:
 	  </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "un.isp.ficticio.com" &gt; /etc/mail/relay-domains</code></strong></pre><p>Después de crear o editar dicho fichero se debe
            reiniciar <span class="application">sendmail</span>.  Esto funciona
  	    perfectamente si usted es el administrador del servidor y no
            desea enviar correo localmente o si prefiere utilizar un cliente
            de correo o cualquier otro sistema en otra máquina distinta
            a la que alberga el servidor de correo.  Es muy útil sobre
            todo cuando sólamente se tienen una o dos direcciones de
            correo eletrónico.  Si hay en liza un gran número de
            direcciones de correo, edite el fichero anterior con su editor de
            texto favorito y añada uno a uno los correspondientes
            dominios.</p><pre class="programlisting">un.isp.ficticio.com
otro.isp.ficticio.net
y.otro.isp.ficticio.org
www.ejemplo.org</pre><p>Ahora, cualquier correo enviado a través de su sistema
            por cualquier máquina que se encuentre en este fichero
            (siempre y cuando el usuario tenga una cuenta en nuestro sistema)
            podrá ser enviado con éxito.
	    Es una manera elegante de permitir a los usuarios enviar
            correo eletrónico desde nuestro servidor de correo sin
            permitir al resto del mundo que haga lo mismo (lo que se conoce
            como SPAM).</p></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-advanced"></a>27.6. Conceptos Avanzados</h2></div></div></div><p>La siguiente sección trata conceptos más
      específicos relacionados con la configuración del correo
      y la implantación del servicio de correo en una
      organización.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-config"></a>27.6.1. Configuración Básica</h3></div></div></div><a id="idp79386832" class="indexterm"></a><p>Por defecto debemos ser capaces de enviar correo a máquinas
        externas, siempre y cuando tengamos nuestro <code class="filename">
	/etc/resolv.conf</code> bien configurado o ejecutemos nuestro
        propio servidor de nombres.  Si queremos que el correo para nuestra
        máquina se nos entregue en nuestra propia máquina,
        es decir, a nuestro propio <span class="application">sendmail</span>,
        en lugar de tener que ir a recogerlo al servidor de correo de
        nuestra organización, podemos usar dos métodos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ejecutar nuestro propio servidor de nombres y comprar nuestro
            propio dominio.  Por ejemplo <code class="systemitem">FreeBSD.org</code></p></li><li class="listitem"><p>Conseguir la entrega de correo directa hacia nuestra
            máquina.  Esto se logra entregando el correo a la
            dirección IP que se asocia al nombre de DNS de nuestra
            máquina.  Por ejemplo <code class="systemitem">ejemplo.FreeBSD.org</code>.</p></li></ul></div><a id="idp79391952" class="indexterm"></a><p>Independientemente de la opción elegida para tener entrega
        directa en nuestra máquina debemos poseer una dirección
        IP estática (a diferencia de las direcciones dinámicas,
        que son utilizadas en configuraciones donde se utiliza el protocolo
        PPP).  Si nos encontramos detrás de un cortafuegos se debe
        permitir el tráfico SMTP (puerto 25) hacia nuestra
        máquina. Si además queremos recibir correo directamente
        en nuestra máquina se deben cumplir los siguientes
       requisitos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Asegurar que el registro MX<a id="idp79397840" class="indexterm"></a> de menor numeración de
            nuestro DNS apunta a la dirección IP de nuestra
            máquina.</p></li><li class="listitem"><p>Asegurar que no existe ninguna entrada MX en nuestro DNS para
           nuestra máquina.  Es decir, mientras que el registro MX del
           punto anterior hace referencia al dominio administrativo que
           gestionamos con nuestro servidor de nombres, en este apartado se
           quiere destacar que no debe existir ningún registro MX
           específico para el nombre concreto de nuestra
           máquina.</p></li></ul></div><p>Cumpliendo las dos puntualizaciones anteriores podemos recibir
        correo electrónico mediante entrega directa en nuestra
        máquina.</p><p>Por ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hostname</code></strong>
ejemplo.FreeBSD.org
<code class="prompt">#</code> <strong class="userinput"><code>host ejemplo.FreeBSD.org</code></strong>
ejemplo.FreeBSD.org has address 204.216.27.XX</pre><p>Si se observa esta configuración la entrega directa de
        correo para <code class="email">&lt;<a xmlns="" class="email" href="mailto:su_login@ejemplo.FreeBSD.org">su_login@ejemplo.FreeBSD.org</a>&gt;</code> debería
        funcionar sin problemas (suponiendo que <span class="application">
        sendmail</span> se está ejecutando correctamente en
        <code class="systemitem">ejemplo.FreeBSD.org</code>).</p><p>Si en lugar de lo anterior ve algo como esto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>host ejemplo.FreeBSD.org</code></strong>
ejemplo.FreeBSD.org has address 204.216.27.XX
ejemplo.FreeBSD.org mail is handled (pri=10) by hub.FreeBSD.org</pre><p>Todos los correos enviados a nuestro host (<code class="systemitem">ejemplo.FreeBSD.org</code>) serán recogidos por
	<code class="systemitem">hub</code> bajo el mismo nombre de usuario en lugar de ser
        enviados directamente a nuestra máquina.</p><p>La información anterior se gestiona utilizando el servidor
        de DNS. El registro de DNS que transporta la información
        de encaminamiento de correo eletrónico es el
        registro <span class="emphasis"><em>M</em></span>ail e<span class="emphasis"><em>X</em></span>change.
        Si no existe ningún registro MX el correo se entregará
        a la dirección IP que se obtenga de resolver el nombre
        de dominio que se encuentre a continuación del nombre de
        usuario en la dirección de correo de destino (esto es,
        (después de la @).</p><p>En un cierto momento la entrada MX para <code class="systemitem">freefall.FreeBSD.org</code> tenía este
        aspecto:</p><pre class="programlisting">freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre><p>Como se puede observar, <code class="systemitem">freefall</code> tenía
        varias entradas MX.  El número de MX más bajo es la
        máquina que recibe correo directamente si se encuentra
        disponible; si dicha máquina no está accesible por
        algún motivo las otras máquinas (llamadas también
        <span class="quote">&#8220;<span class="quote">MXs de backup</span>&#8221;</span>) aceptarán los mensajes
        temporalmente, y los transmitirán de nuevo cuando alguna
        máquina perteneciente a alguna entrada MX de numeración
        más baja se encuentre disponible y el proceso se
        repetirá hasta que se alcance la máquina que tenga
        el registro MX más bajo.</p><p>Las organizaciones donde residen los servidores (MX) de backup
        deberían poseer acceso a internet de una forma independiente
        para minimizar el riesgo de pérdida de conectividad.  Nuestro
        ISP o cualquier otra organización independiente debería
        poder proporcionarnos este servicio sin problemas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-domain"></a>27.6.2. Correo para Nuestro Dominio</h3></div></div></div><p>Para establecer un <span class="quote">&#8220;<span class="quote">mailhost</span>&#8221;</span> (servidor de correo)
        en nuestra organización debemos ser capaces de redirigir el
        correo destinado a cualquier máquina de nuestra
        organización hacia nuestro servidor de correo.
        Básicamente queremos <span class="quote">&#8220;<span class="quote">reclamar</span>&#8221;</span> como nuestro
        cualquier correo destinado a cualquier máquina de nuestro
        dominio (en este caso <code class="systemitem">*.FreeBSD.org</code>) y desviarlo a nuestro servidor
        de tal forma que los usuario lean su correo
        utilizando nuestra máquina servidora.</p><a id="idp79421520" class="indexterm"></a><p>Para hacer las cosas lo más sencillas posible se debe crear
        una cuenta de usuario (con el mismo <span class="emphasis"><em>
        nombre de usuario</em></span>) tanto en el servidor de correo como en
        la máquina del usuario o destinatario final del correo.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> puede usarse para ello.</p><p>El servidor de correo debe funcionar como el agente de transporte
        predeterminado para todas las máquinas de nuestra
        organización.  Esto se realiza mediante la siguiente
        configuración del DNS:</p><pre class="programlisting">ejemplo.FreeBSD.org	A	204.216.27.XX		; Workstation
			MX	10 hub.FreeBSD.org	; Mailhost</pre><p>Esta configuración redirigirá el correo para
        cualquier estación de trabajo hacia nuestro servidor de correo
        sin que tengan importancia las direcciones IP asignadas mediante
        el registro de tipo A.  Recordemos que el correo siempre
        se encamina utilizando primero los registros de tipo MX.</p><p>Normalmente no podremos realizar esta configuración salvo
        que estemos ejecutando nuestro propio servidor de DNS
        para nuestro dominio.  Si no es el caso y no es posible ejecutar
        nuestro propio servidor de DNS debemos comunicarnos con nuestro
        proveedor de servicios o con quien pueda proporcionarnos servicio de
        DNS y solicitarle una modificación como la anterior.</p><p>Si además ofrecemos servicios de alojamiento virtual de
        correo la siguiente información puede resultar útil.
        Asumiremos que tenemos un cliente con su propio dominio, por ejemplo
        <code class="systemitem">cliente1.org</code> y queremos que todo el
        correo enviado a <code class="systemitem">cliente1.org</code> sea redirigido hasta nuestro
        servidor de correo, <code class="systemitem">mail.nuestroservidor.com</code>.  La entrada necesaria
        en el DNS debería ser la siguiente:</p><pre class="programlisting">cliente1.org		MX	10	mail.nuestroservidor.com</pre><p>No necesitamos <span class="emphasis"><em>ningún</em></span> registro de tipo
        A para <code class="systemitem">cliente1.org</code> si sólamente queremos
        gestionar el correo para ese dominio.
      </p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tenga en cuenta que un ping a <code class="systemitem">cliente1.org</code> no funcionará a menos
          que exista un registro de tipo A para dicha máquina.
        </p></div><p>La última cosa que debemos realizar en nuestro servidor de
        correo es comunicar a <span class="application">sendmail</span> para
        qué dominios y/o máquinas debe aceptar correo.  Existen
        varias formas en las que se puede realizar esta tarea.
        Cualquiera de las siguiente funcionará:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Añadir las máquinas deseadas al fichero
	  <code class="filename">/etc/mail/local-host-names</code> si se está
          utlizando la macro
	  <code class="literal">FEATURE(use_cw_file)</code>.  Si se está
          utilizando una versión de <span class="application">
          sendmail</span> anterior a la 8.10 el fichero que se debe
	  utilizar es <code class="filename">/etc/sendmail.cw</code>.</p></li><li class="listitem"><p>Añadir la línea <code class="literal">
            Cwsu.servidor.com</code> al fichero
	    <code class="filename">/etc/sendmail.cf</code> o
	    <code class="filename">/etc/mail/sendmail.cf</code> si se está
            utilizando una versión de <span class="application">
            sendmail</span> posterior a la versión 8.10.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-UUCP"></a>27.7. SMTP con UUCP</h2></div></div></div><p>La configuración de <span class="application">sendmail</span> que
      se proporciona con la distribución de FreeBSD está
      diseñada para organizaciones que se conectan directamente a
      internet.  Las organizaciones que deseén enviar y recibir
      sus correos utilizando UUCP deben instalar otro fichero de
      configuración para <span class="application">
      sendmail</span>.</p><p>El ajuste de forma manual del archivo <code class="filename">
      /etc/mail/sendmail.cf</code> es un tema para expertos.
      La versión 8 de <span class="application">sendmail</span> genera
      ficheros de configuración mediante el preprocesador
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>, gracias al que las opciones de configuración se
      pueden escribir utilizando un nivel de abstracción mayor.
      Los archivos de configuración de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> se pueden encontrar
      en <code class="filename">/usr/src/usr.sbin/sendmail/cf</code>.</p><p>Si no se instaló el sistema base con todas las fuentes el
      conjunto de ficheros de configuración de <span class="application">
      sendmail</span> se puede obtener a partir de un paquete de
       fuentes determinado.  Suponiendo que tengamos el CDROM con el
       código fuente de FreeBSD montado se puede ejecutar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat scontrib.?? | tar xzf - -C /usr/src/contrib/sendmail</code></strong></pre><p>Este comando extrae sólamente unos pocos cientos de
      kilobytes. El fichero <code class="filename">README</code> que hay en
      el directorio <code class="filename">cf</code> puede servirle como
      una introducción básica a la configuración
      mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>.</p><p>La mejor forma de soportar la entrega de correo mediante UUCP es
      utilizando la característica <code class="literal">mailertable</code>.
      Esta característica crea una base de datos que
      <span class="application">sendmail</span> utiliza para tomar decisiones de
      encaminamiento.</p><p>En primer lugar creamon el fichero <code class="filename">.mc</code>.
      El directorio <code class="filename">/usr/src/usr.sbin/sendmail/cf/cf</code>
      alberga varios ejemplos del mismo.  Suponiendo que nuestro fichero
      configuración se llama
      <code class="filename">foo.mc</code> para convertir dicho archivo en un fichero
      <code class="filename">sendmail.cf</code> válido basta con ejecutar lo
      siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail/cf/cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make foo.cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp foo.cf /etc/mail/sendmail.cf</code></strong></pre><p>Un fichero <code class="filename">.mc</code> suele tener este aspecto:</p><pre class="programlisting">VERSIONID(`<em class="replaceable"><code>Su número de versión</code></em>') OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <em class="replaceable"><code>su.relay.uucp</code></em>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <em class="replaceable"><code>alias.de.su.servidor</code></em>
Cw    <em class="replaceable"><code>nombredesunodouucp.UUCP</code></em></pre><p>Las líneas que contienen
      <code class="literal">accept_unresolvable_domains</code>,
      <code class="literal">nocanonify</code>, y
      <code class="literal">confDONT_PROBE_INTERFACES</code> prohíben la
      utilización del DNS durante la entrega de correo.
      La cláusula  <code class="literal">UUCP_RELAY</code> es necesaria
      para soportar entrega mediante UUCP.  Lo único que hay que hacer
      es escribir un nombre de máquina en ese punto.
      Dicha máquina debe ser capaz de gestionar las direcciones del
      pseudo-dominio .UUCP; en la mayoría de los casos se escribe en
      este punto el nombre de la máquina perteneciente al proveedor de
      servicios que hace de relay.</p><p>Una vez que tenemos esto configurado se necesita un fichero
      <code class="filename">/etc/mail/mailertable</code>.  Si solamente tenemos un
      enlace con el exterior, que usamos para todos nuestro correos,
      basta una configuración como la que se muestra a
      continuación:</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
.                             uucp-dom:<em class="replaceable"><code>su.relay.uucp</code></em></pre><p>Un ejemplo más complejo puede parecerse al siguiente:</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
.interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
.heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
.                             uucp-dom:</pre><p>Las primeras tres líneas se encargan de manejar casos
      especiales en los que el correo dirigido directamente al dominio no se
      envía a la ruta por defecto sino a algún vecino UUCP para
      acortar el número de saltos involucrados en la entrega de dichos
      correos.
      La siguiente línea gestiona el correo para el dominio ethernet
      local, el cual puede ser entregado utilizando SMTP.  Finalmente los
      vecinos UUCP se mencionan en la notación de pseudo-dominio
      .UUCP para permitir que un
      <code class="literal">vecino UUCP receptor</code>
      de correo pueda sobreescribir las reglas por defecto.  La última
      línea siempre es un punto; se asocia con cualquier otra cosa que
      no ha sido tratada en reglas anteriores y donde se realiza entrega UUCP
      a un vecino UUCP que sirve como pasarela de correo universal para todo
      el mundo.  Todos los nombres de máquinas bajo la clave
      <code class="literal">uucp-dom:</code> deben ser vecinos UUCP válidos, lo
      cual se puede verificar utilizando el comando <code class="literal">
      uuname</code>.</p><p>Recuerde que este fichero debe convertirse en una base de datos DBM
      antes de que usarse.  El comando que se utiliza para realizar esta tarea
      se suele especificar como un comentario al principio del fichero
      <code class="filename">mailertable</code>.  Cada vez que se modifique el fichero
      <code class="filename">mailertable</code> se debe ejecutar dicho comando.</p><p>Un consejo final:  si dudamos sobre una determinada ruta de
      encaminamiento de correo se puede ejecutar <span class="application">
      sendmail</span> con el parámetro <code class="option">-bt</code>.
      Este parámetro ejecuta <span class="application">sendmail</span>
      en <span class="emphasis"><em>modo prueba de direcciones</em></span>;
      simplemente basta con escribir <code class="literal">3,0</code> seguido por la
      dirección de correo de la que queremos comprobar su correcto
      encaminamiento.  La última línea nos dice el agente de
      correo interno que se utiliza, la máquina de destino con que el
      agente será invocado y la dirección (posiblemente
      traducida) de correo.  Se puede abandonar este modo de funcionamiento
      escribiendo <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>D</strong></span>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sendmail -bt</code></strong>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>3,0 prueba@ejemplo.com</code></strong>
canonify           input: foo @ example . com
...
parse            returns: $# uucp-dom $@ <em class="replaceable"><code>su.relay.uucp</code></em> $: prueba &lt; @ ejemplo . com . &gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>^D</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="outgoing-only"></a>27.8. Configuración para sólamente enviar correo</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Moran</span></span>. </span></div></div></div><p>Existen multitud de casos en los que  puede bastarnos con enviar
      nuestro correo a través de una pasarela o relay.  He aquí
      algunos de ellos:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Nuestra computadora es una máquina de escritorio, pero
          queremos ser capaces de utilizar programas como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>.
          Para ello se debería utilizar el relay de nuestro ISP.</p></li><li class="listitem"><p>Nuestra computadora es un servidor que no gestiona correo de
          forma local, si no que necesita pasar todos los correos recibidos
          una pasarela que se encarga de su procesamiento y entrega
          final.</p></li></ul></div><p>Casi cualquier <acronym class="acronym">MTA</acronym> es capaz de actuar como
      pasarela o relay.  Por desgracia configurar un MTA para que sólo
      gestione correo saliente puede ser muy complicado.  Programas del estilo
      de <span class="application">sendmail</span> y <span class="application">
      postfix</span> son demasiado pesados para realizar
      sólamente esta tarea.</p><p>Si además estamos utilizando un servicio de acceso a internet
      típico nuestro contrato puede prohibir explícitamente
      la ejecución de un servidor de correo (o los puertos pueden estar
      filtrados).</p><p>La forma más sencilla de utilizar un servicio de pasarela es
     mediante la instalación del port
     <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/ssmtp/pkg-descr">mail/ssmtp</a>.  Basta con ejecutar el
     siguiente comando como <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/mail/ssmtp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install replace clean</code></strong></pre><p>Una vez que ha sido instalado <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/ssmtp/pkg-descr">mail/ssmtp</a> podemos configurarlo
      mediante un fichero de sólo cuatro líneas ubicado en
      <code class="filename">/usr/local/etc/ssmtp/ssmtp.conf</code>:</p><pre class="programlisting">root=sudireccionrealdecorreo@ejemplo.com
mailhub=mail.ejemplo.com
rewriteDomain=ejemplo.com
hostname=_HOSTNAME_</pre><p>Debemos asegurarnos de que se utiliza una dirección de correo
      real para <code class="systemitem">root</code>.  Se debe introducir nuestra
      pasarela de correo en lugar de <code class="systemitem">
      mail.ejemplo.com</code> (algunos ISP llaman a la pasarela
      <span class="quote">&#8220;<span class="quote">servidor de correo saliente</span>&#8221;</span>  o simplemente
      <span class="quote">&#8220;<span class="quote">servidor SMTP</span>&#8221;</span>).</p><p>Debemos asegurarnos de que se desactiva
      <span class="application">sendmail</span> mediante
      <code class="literal">sendmail_enable="NONE"</code>
      en <code class="filename">/etc/rc.conf</code>.</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/ssmtp/pkg-descr">mail/ssmtp</a> acepta algunas otras
      opciones.  Consulte el fichero de ejemplo que encontrará en
      <code class="filename">/usr/local/etc/ssmtp</code>; consulte también
      la página de manual de <span class="application">ssmtp</span>,
      en la que hay más ejemplos e información al respecto.
      </p><p>Ejecutar <span class="application">ssmtp</span> de esta forma permite que
      cualquier software de nuestra computadora que necesite enviar correo
      funcione sin problemas y a la vez poder cumplir con las normas
      estipuladas en el contrato con nuestro ISP. Al mismo tiempo evitamos el
      uso de nuestro servidor de correo por parte de <span class="quote">&#8220;<span class="quote">
      spammers</span>&#8221;</span>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-dialup"></a>27.9. Utilización del correo con una conexión mediante módem analógico (dial-up)</h2></div></div></div><p>Si se dispone de una dirección IP privada no es necesario
      realizar ningún ajuste a partir de la configuración por
      defecto.  Basta con asignar como nombre de nuestra máquina el
      nombre que tenemos registrado en el DNS y <span class="application">
      sendmail</span> se encargará del resto.</p><p>Por otra parte si utilizamos una conexión temporal a internet
      mediante PPP y se nos asigna una dirección IP
      de forma dinámica, lo más normal es tener nuestras
      carpetas de correo alojadas en el servidor de correo de
      nuestro proveedor de servicios.  Supongamos que el dominio de nuestro
      ISP es <code class="systemitem">ejemplo.net</code> y que nuestro nombre de usuario
      es <code class="systemitem">usuario</code>; además hemos llamado a nuestra
      <code class="systemitem">user</code>, además, hemos llamado a nuestra
      máquina <code class="systemitem">bsd.home</code>, y nuestro ISP nos ha comunicado que
      debemos utilizar como pasarela la máquina <code class="systemitem">relay.ejemplo.net</code>.</p><p>Para recuperar correo de nuestra carpeta de correo se debe instalar
      un agente de recuperación automática de correo.
      <span class="application">fetchmail</span> es una buena elección puesto
      que permite utilizar varios protocolos.  Este programa está
      disponible como un paquete y también desde la colección de
      ports  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/fetchmail/pkg-descr">mail/fetchmail</a>).  Normalmente nuestro
      <acronym class="acronym">ISP</acronym> proporciona <acronym class="acronym">POP</acronym>
      <acronym class="acronym">POP</acronym>.  Si utilizamos <acronym class="acronym">ppp</acronym> a nivel de
      usuario se puede recuperar automáticamente el correo cuando se
      establece la conexión <acronym class="acronym">ppp</acronym> utilizando
      el fichero <code class="filename">/etc/ppp/ppp.linkup</code>:</p><pre class="programlisting">MYADDR:
!bg su user -c fetchmail</pre><p>Si utilizamos <span class="application">sendmail</span> (como se muestra
      más adelante) para entregar correo a cuentas remotas
      probablemente queramos que <span class="application">sendmail</span>
      procese nuestras colas de correo tan pronto como nuestra conexión
      de internet se establezca.  Para ello escriba el siguiente comando tras
      el comando de <code class="command">fetchmail</code> que hemos escrito antes en
      el fichero  <code class="filename">/etc/ppp/ppp.linkup</code>:</p><pre class="programlisting">  !bg su user -c "sendmail -q"</pre><p>Asumiendo que tenemos una cuenta para el usuario
      <code class="systemitem">usuario</code> en <code class="systemitem">bsd.home</code>.  En el directorio <span class="quote">&#8220;<span class="quote">home</span>&#8221;</span>
       del usuario <code class="systemitem">usuario</code> en la máquina
      <code class="systemitem">bsd.home</code> debemos crear un fichero
      <code class="filename">.fetchmailrc</code> con el siguiente contenido:</p><pre class="programlisting">poll ejemplo.net protocol pop3 fetchall pass Secr3To</pre><p>Este fichero debe tener permisos de lectura sólo para el
      propio dueño  ya que contiene la contraseña de acceso
      a nuestra cuenta de POP en nuestro ISP (<code class="literal">
      Secr3To</code>).</p><p>Para poder enviar correo con la cabecera <code class="literal">from:</code>
      correcta, debemos decir a
      <span class="application">sendmail</span> que utilice
      <code class="literal">usuario@ejemplo.net</code> en vez de
      <code class="literal">usuario@bsd.home</code>.  Siguiendo con nuestro ejemplo
      es necesario decirle a <span class="application">sendmail</span> que
      envíe todo el correo a través de la pasarela
      <code class="systemitem">relay.ejemplo.net</code>.</p><p>El siguiente fichero de configuración
      <code class="filename">.mc</code> debe ser suficiente para cumplir
      con las anteriores tareas:</p><pre class="programlisting">VERSIONID(`bsd.home.mc version 1.0')
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`ejemplo.net')dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST', `relay.ejemplo.net')
Dmbsd.home
define(`confDOMAIN_NAME',`bsd.home')dnl
define(`confDELIVERY_MODE',`deferred')dnl</pre><p>En la sección anterior se explica cómo convertir este
      fichero <code class="filename">.mc</code>  en un fichero de
      configuración para <span class="application">sendmail</span>,
      <code class="filename">sendmail.cf</code>. No debemos olvidar
      reiniciar <span class="application">sendmail</span>
      después de mofidificar el fichero <code class="filename">
      sendmail.cf</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-Auth"></a>27.10. Autentificación utilizando SMTP</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">James</span> <span class="surname">Gorham</span></span>. </span></div></div></div><p>La autentificación mediante SMTP puede proporcionarnos
      diversas ventajas.  Añade una capa adicional de seguridad a
      a <span class="application">sendmail</span> y además proporciona a los
      usuarios móviles (usuarios que cambian de máquina)
      la posibilidad de mantener el mismo servidor de correo sin necesidad de
      reconfigurar sus agentes de usuario de correo cada vez que se
      trasladan.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Instalar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>
	  desde los ports.  Se puede encontrar dicho port en
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>.
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a> posée
          varias opciones en tiempo de compilación pero para el
          método en particular  que se va a explicar en esta
          sección basta con asegurarse de seleccionar
          la opción <code class="option">pwcheck</code>.</p></li><li class="step"><p>Después de instalar <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>,
	  edite <code class="filename">/usr/local/lib/sasl/Sendmail.conf</code>
	  (o créelo si no existe) y añada la siguiente
          línea:</p><pre class="programlisting">pwcheck_method: passwd</pre><p>Este método activa la autentificación de
          <span class="application">sendmail</span> contra nuestra base de
	  datos de FreeBSD, <code class="filename">passwd</code>.
          Esto nos evita el problema de tener que crear un nuevo conjunto de
          usuarios y contraseñas  para cada usuario que necesite
          validarse mediante SMTP y además nos permite mantener el
          mismo <span class="quote">&#8220;<span class="quote">login</span>&#8221;</span> y contraseña que los usuarios
          utilizan para acceder a sus cuentas para el acceso al correo
          electrónico.</p></li><li class="step"><p>Editar<code class="filename">/etc/make.conf</code> y añadir las
          siguientes líneas:</p><pre class="programlisting">SENDMAIL_CFLAGS=-I/usr/local/include/sasl1 -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl</pre><p>Estas líneas proporcionan a <span class="application">
        sendmail</span> las opciones de configuración necesarias
	para enlazar con <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl/pkg-descr">cyrus-sasl</a> en
        tiempo de compilación.  Debemos asegurarnos de que <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl/pkg-descr">cyrus-sasl</a> ha sido instalado correctamente
	recompilar <span class="application">sendmail</span>.</p></li><li class="step"><p>Recompile <span class="application">sendmail</span> utilizando el
          siguiente comando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make obj</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre><p>La compilación de <span class="application">sendmail</span> no
          debería dar problemas siempre y cuando
	  <code class="filename">/usr/src</code> no haya cambiado sustancialmente y
          siempre y cuando las bibliotecas compartidas
          necesarias se encuentren disponibles.</p></li><li class="step"><p>Una vez que <span class="application">sendmail</span> se ha compilado
          y reinstalado con correctamente debemos editar el fichero
	  <code class="filename">/etc/mail/freebsd.mc</code> (o el fichero que se
	  utilice como <code class="filename">.mc</code> de referencia.  Hay
          administradores que  escogen utilizar la salida de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hostname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">hostname</span>(1)</span></a>
          como el nombre del fichero <code class="filename">.mc</code> que se utiliza
          para la configuración de sendmail por motivos de
          uniformidad ).  Añada las siguientes líneas a dicho
          fichero:</p><pre class="programlisting">dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confDEF_AUTH_INFO', `/etc/mail/auth-info')dnl</pre><p>Estas opciones configuran los distintos métodos
        de que dispone <span class="application">sendmail</span> para validar a
        los usuarios de correo.  Si se desea utilizar otro método
        distinto a <span class="application">pwcheck</span> por favor consulte
        la documentación.</p></li><li class="step"><p>Para terminar ejecutamos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> mientras nos encontramos
          dentro de <code class="filename">/etc/mail</code>.
	  Este comando trata el fichero <code class="filename">.mc</code> y crea el
          fichero <code class="filename">.cf</code> correspondiente
          (con el mismo nombre que el anterior pero terminado en .cf).
          A continuación se utiliza el comando <code class="command">
          make install restart</code>, el cual copia el fichero .cf
          recién generado al fichero <code class="filename">
          sendmail.cf</code> y a continuación reinicia
          <span class="application">sendmail</span>.
	  Para más información sobre este proceso puede
          consultarse el contenido de
          <code class="filename">/etc/mail/Makefile</code>.</p></li></ol></div><p>Si todo lo anteriormente comentado ha funcionado correctamente
       deberíamos ser capaces de introducir la información de
      nuestro <span class="quote">&#8220;<span class="quote">login</span>&#8221;</span> en nuestro cliente de correo y enviar un
      mensaje de prueba.  Para investigar más a fondo estos temas se
      puede habilitar la opción <code class="option">LogLevel</code> de
      <span class="application">sendmail</span> al valor 13 y observar detenidamente
      el archivo <code class="filename">/var/log/maillog</code> en busca de posibles
      mensajes de error.</p><p>Puede ser necesario añadir las siguientes líneas al
      fichero <code class="filename">/etc/rc.conf</code> de modo que el servicio
      explicado en esta sección se encuentre disponible
      automáticamente desde el arranque:</p><pre class="programlisting">sasl_pwcheck_enable="YES"
sasl_pwcheck_program="/usr/local/sbin/pwcheck"</pre><p>Esto permite que la inicialización de <acronym class="acronym">SMTP_AUTH</acronym> se produzca durante el arranque del sistema.</p><p>Para más información por favor visite la página
      <a class="link" href="http://www.sendmail.org/~ca/email/auth.html" target="_top">
      autentificación <acronym class="acronym">SMTP</acronym></a>
       de <span class="application">sendmail</span>·</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-agents"></a>27.11. Agente de Correo de Usuario</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Silver</span></span>. </span></div></div></div><a id="idp79655504" class="indexterm"></a><p>Un agente de correo de usuario (<acronym class="acronym">MUA</acronym> en
      inglés Mail User Agent) es una aplicación
      que se utiliza para enviar y recibir correo.  Coomo el correo
      electrónico está en constante evolución
      y cada vez se vuelve más complejo y con más opciones,
      los MUAs son cada vez más complejos y potentes.
      Esto permite a los usuarios disponer de mayor flexibilidad y
      funcionalidad.  FreeBSD admite para muchísimos
      agentes de correo de usuario, todos los cuales pueden instalarse
      desde los
      <a class="link" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Ports</a>.  Los usuarios pueden elegir entre
       lientes de correo con interfaz gráfica como
      <span class="application">evolution</span> o <span class="application">balsa</span>
      o entre clientes basados en consola como
      <span class="application">mutt</span>, <span class="application">pine</span>
      o <code class="command">mail</code>, e incluso utilizar interfaces web.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-command"></a>27.11.1. mail</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a> es el agente de correo de usuario
	(<acronym class="acronym">MUA</acronym>) que viene por defecto con FreeBSD.  Es un MUA de
	consola que ofrece toda la funcionalidad básica
        necesaria para enviar y recibir correos, aunque resulta limitado
        limitado en su capacidad para manejar adjuntos y sólamente
	soporta carpetas de correo locales.</p><p>Aunque <code class="command">mail</code> no soporta de forma nativa la
        interacción con servidores de correo mediante
	<acronym class="acronym">POP</acronym> o
	<acronym class="acronym">IMAP</acronym> estas carpetas de correo remotas pueden
	descargarse a un fichero
        <code class="filename">mbox</code> local utilizando una aplicación de
	descarga como <span class="application">fetchmail</span>, que se describe
        en este mismo capítulo en (<a class="xref" href="#mail-fetchmail" title="27.12. Manejo de fetchmail">Sección 27.12, &#8220;Manejo de fetchmail&#8221;</a>).</p><p>Para enviar y recibir correo eletrónico basta con
        ejecutar el comando
	<code class="command">mail</code>. Veamos un ejemplo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail</code></strong></pre><p>El contenido de la carpeta de usuario en el directorio
	<code class="filename">/var/mail</code> se leen
	automáticamente.
	Si la carpeta se encuentra vacía la aplicación termina
	su ejecución con un mensaje que indica que no ha podido
        encontrar correo.  Una vez que la carpeta ha sido
        leída la interfaz de la aplicación entra en
	funcionamiento y se muestra por pantalla un listado de los
        mensajes recuperados.  Los mensajes se numeran
	automáticamente y pueden leerse como se observa en el
        siguiente ejemplo:</p><pre class="screen">Mail version 8.1 6/6/93.  Type ? for help.
"/var/mail/marcs": 3 messages 3 new
&gt;N  1 root@localhost        Mon Mar  8 14:05  14/510   "test"
 N  2 root@localhost        Mon Mar  8 14:05  14/509   "user account"
 N  3 root@localhost        Mon Mar  8 14:05  14/509   "sample"</pre><p>Los mensajes se pueden leer utilizando el comando <span class="keycap"><strong>
      t</strong></span> de <code class="command">mail</code> escribiendo a continuación
	el número del mensaje que queremos leer.
        En este ejemplo vamos a leer el primer correo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>t 1</code></strong>
Message 1:
From root@localhost  Mon Mar  8 14:05:52 2004
X-Original-To: marcs@localhost
Delivered-To: marcs@localhost
To: marcs@localhost
Subject: test
Date: Mon,  8 Mar 2004 14:05:52 +0200 (SAST)
From: root@localhost (Charlie Root)

This is a test message, please reply if you receive it.</pre><p>Como podemos observar en el ejemplo anterior el comando
        <span class="keycap"><strong>t</strong></span> muestra el contenido del correo
	eletrónico con todas sus cabeceras.  Para mostrar el
        listado con todos los correos de nuevo, se debe utilizar la tecla
        <span class="keycap"><strong>h</strong></span>.</p><p>Si el correo eletrónico requiere una contestación
         se puede utilizar la aplicación
	<code class="command">mail</code> para responder utilizando la tecla
	<span class="keycap"><strong>R</strong></span> o <span class="keycap"><strong>r</strong></span>.   La tecla
	<span class="keycap"><strong>R</strong></span> indica a
	<code class="command">mail</code> que conteste sólo al origen (remitente)
	del correo, mientras que la tecla <span class="keycap"><strong>r</strong></span> tanto
        al remitente a los otros usuarios receptores del mensaje original.
        Además ambos comandos se pueden ejecutar escribiendo a
	continuación el número que identifica al mensaje que
        se quiere responder.  Tras esto la respuesta puede redactarse
        , y se debe indicar el final del mensaje mediante un punto
        (<span class="keycap"><strong>.</strong></span>) a continuación de un salto de
	línea.  Veamos un ejemplo:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>R 1</code></strong>
To: root@localhost
Subject: Re: test

<strong class="userinput"><code>Thank you, I did get your email.
.</code></strong>
EOT</pre><p>Para enviar nuevos correos eletrónicos se debe utilizar
        la tecla <span class="keycap"><strong>m</strong></span> seguida de la dirección de
	de correo del destinatario.  Se pueden especificar varios
	destinatarios de correo separando cada dirección de correo
        con una coma ( <span class="keycap"><strong>,</strong></span> ).
        El asunto del mensaje de correo se puede escribir a
	continuación seguido por el cuerpo del mensaje.  El final del
        mensaje se especifica como en el caso anterior, utilizando un
	<span class="keycap"><strong>.</strong></span> tras un saldo de línea y pulsando la
	tecla <span class="quote">&#8220;<span class="quote">enter</span>&#8221;</span>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail root@localhost</code></strong>
Subject: <strong class="userinput"><code>I mastered mail

Now I can send and receive email using mail ... :)
.</code></strong>
EOT</pre><p>Mientras nos encontremos dentro de la <code class="command">mail</code>
        el comando <span class="keycap"><strong>?</strong></span> puede utilizarse para mostrar la
	ayuda en línea aunque la principal fuente de información
        detallda sobre esta aplicación es la página man
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tal y como se ha dicho ya la aplicación <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>
	no fue diseñada originalmente para gestionar adjuntos, por
          lo que su forma de gestionarlos resulta ser extremadamente mala.
          <acronym class="acronym">MUA</acronym> más modernos como <span class="application">
	  mutt</span> gestionan los adjuntos de correo
          de una forma mucho más inteligente.  Si se desea utilizar el
	  comando <code class="command">mail</code> el port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/mpack/pkg-descr">converters/mpack</a> le puede resultar
	  bastante útil.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mutt-command"></a>27.11.2. mutt</h3></div></div></div><p><span class="application">mutt</span> es un agente de correo de usuario
         pequeño pero muy potente, funcional y con excelentes
         características; veamos algunas:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La habilidad de agrupar mensajes en hilos.</p></li><li class="listitem"><p>Soporte de PGP para cifradon y firma digital de correos
	    eletrónicos.</p></li><li class="listitem"><p>Soporte de tipos MIME.</p></li><li class="listitem"><p>Soporte de gestión de correo en formato Maildir.</p></li><li class="listitem"><p>Altamente configurable por el usuario.</p></li></ul></div><p>Toda estas características hacen de
	<span class="application">mutt</span> uno de los agentes de correo
	más avanzados del momento.
	Consulte <code class="uri"><a class="uri" href="http://www.mutt.org" target="_top">http://www.mutt.org</a></code> para más
	información sobre <span class="application">mutt</span>.</p><p>La versión estable de <span class="application">mutt</span> se
        puede instalar usando el port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/mutt/pkg-descr">mail/mutt</a> mientras que la versión de
	desarrollo está en <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/mutt-devel/pkg-descr">mail/mutt-devel</a>.  Una vez que se ha
	instalado el port, <span class="application">mutt</span> puede ejecutarse
	mediante el siguiente comando:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mutt</code></strong></pre><p><span class="application">mutt</span> lee automáticamente el
        contenido de la carpeta de correo del usuario dentro del directorio
	<code class="filename">/var/mail</code> y muestra por pantalla
	su contenido.  Si el directorio está vacío
        <span class="application">mutt</span>
        quedará a la espera de los comandos que pueda pasarle el
	usuario.  En el ejemplo que se muestra a continuación
        puede verse cómo <span class="application">mutt</span> facilita
	la lista de mensajes al usuario:</p><div class="mediaobject"><img src="mail/mutt1.png" /></div><p>Para leer un correo basta con seleccionarlo usando las teclas de cursor, y
        presionando la tecla <span class="keycap"><strong>Enter</strong></span>.  Veamos cómo
	muestra <span class="application">mutt</span> un correo
	electrónico:</p><div class="mediaobject"><img src="mail/mutt2.png" /></div><p>Al igual que ocurre con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>
	<span class="application">mutt</span> permite que los usuarios contesten al
	remitente de cualquier mensaje así como a los demás
        receptores.  Para responder sólo al remitente se puede utilizar
        la tecla <span class="keycap"><strong>r</strong></span>.  Para responder a un grupo, es decir a
	todos los receptores y al remitente del correo
        eletrónico pulse <span class="keycap"><strong>g</strong></span>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">mutt</span> tiene <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>
	  como editor por defecto para crear y responder a los mensajes de
	  correo eletrónico.  Si prefiere emplear otro editor
	  modifique el valor de la variable <code class="literal">editor</code> en
	  <code class="filename">.muttrc</code>.</p></div><p>Para escribir un mensaje de correo presione la tecla
	<span class="keycap"><strong>m</strong></span>.  Después de escribir el asunto
	<span class="application">mutt</span> ejecuta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a> y el cuerpo del
        mensaje puede escribirse. Una vez escrito el correo
        salga de  <code class="command">vi</code> y <span class="application">mutt</span> se
	ejecutará de nuevo mostrando por pantalla un resumen del
	correo que está a punto de ser enviado.  Para enviar ese
	correo hay que pulsar <span class="keycap"><strong>y</strong></span>.  Este es un ejemplo de
	uno de esos resúmenes:</p><div class="mediaobject"><img src="mail/mutt3.png" /></div><p><span class="application">mutt</span> también contiene una amplia
        ayuda a la que se accede desde la mayoría de los
        menús pulsando la tecla <span class="keycap"><strong>?</strong></span>.  La primera
	lína de la pantalla también muestra las teclas de
        método abreviado cuando es posible utilizarlas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pine-command"></a>27.11.3. pine</h3></div></div></div><p><span class="application">pine</span> es una aplicación de correo
        enfocada a los usuarios principiantes o inexpertos pero
        también incluye algunas características avanzadas.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">Se han descubierto en <span class="application">pine</span> varias
	  vulnerabilidades que pueden explotarse de forma remota.
          Esas vulnerabilidades permiten que atacantes remotos puedan ejecutar
	  código como si fueran usuarios locales del sistema
          mediante el envío de correos con un formato determinado.
	  Todos los problemas <span class="emphasis"><em>conocidos</em></span> se han
	  resuelto pero el código de <span class="application">
	  pine</span> está escrito de una forma insegura y el
	  <span class="quote">&#8220;<span class="quote">Security Officer</span>&#8221;</span> de FreeBSD opina que es probable que
          existan todavía vulnerabilidades sin descubrir. Si decide
	  instalar <span class="application">pine</span>
          debe asumir los riesgos que ello puede implicar.</p></div><p>La versión actual de <span class="application">pine</span> se
        puede instalar utilizando el port <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/pine4/pkg-descr">mail/pine4</a>.  Una vez que se ha instalado
        <span class="application">pine</span> se puede ejecutar mediante el siguiente comando:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pine</code></strong></pre><p>La primera vez que se ejecuta <span class="application">pine</span> se
        muestra un mensaje de bienvenida con una pequeña
        introducción a la herramienta junto con una petición del
        equipo de desarrollo de <span class="application">pine</span> en la que se
	solicita que se envíe un correo de forma anónima
        un correo de forma anónima para que puedan hacerse una idea s
	de cuántos usuarios están utilizando
        la herramienta. Para enviar dicho correo hay que presionar la tecla
	<span class="keycap"><strong>Enter</strong></span>, o bien puede pulsar
        la tecla <span class="keycap"><strong>E</strong></span> para salir de la ventana de bienvenida
        sin enviar dicho correo.  A continuación se muestra un ejemplo
	de la página de bienvenida:</p><div class="mediaobject"><img src="mail/pine1.png" /></div><p>Los usuarios disponen de un menú principal, que puede
        navegarse utilizando las flechas.  Este menú proporciona
        atajos para la composición de nuevos correos, para navegar a
	través de las carpetas de correo, e incluso para
        la administración de la libreta de direcciones. Justo debajo
	del menú principal, se muestran las teclas de método
        abreviado (atajos) que pueden utilizarse en cada momento.</p><p>El directorio por defecto que <span class="application">pine</span>
        intenta abrir es <code class="filename">inbox</code>.  Para ver el índice de
	todos los mensajes recibidos pulse la tecla
        <span class="keycap"><strong>I</strong></span> o seleccione la opción de menú
	denominada
        <span class="guimenuitem">MESSAGE INDEX</span> como se muestra a
	continuación:</p><div class="mediaobject"><img src="mail/pine2.png" /></div><p>El índice muestra los mensajes en el directorio actual y
        puede navegarse en él utilizando las teclas
        del cursor.  El mensaje seleccionado se puede leer presionando la
	tecla <span class="keycap"><strong>Enter</strong></span>.</p><div class="mediaobject"><img src="mail/pine3.png" /></div><p>En la captura de pantalla que se muestra a continuación se
        muestra un mensaje de ejemplo.  Las teclas de atajo se muestran
        como referencia en la parte baja de la pantalla.  Un ejemplo de dichas
        teclas de método abreviado es la tecla <span class="keycap"><strong>r</strong></span> que
	permite responder al mensaje que se muestra en dicho momento.</p><div class="mediaobject"><img src="mail/pine4.png" /></div><p>La contestación a un mensaje de correo eletrónico
        en <span class="application">pine</span> se realiza mediante el editor
	<span class="application">pico</span>, que se instala por defecto junto con
        <span class="application">pine</span>.  <span class="application">pico</span>
	permite navegar de forma sencilla por los distintos mensajes de
        correo y es ligeramente más sencilla de manejar
        que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>, sobre todo para los usuarios noveles.  Una vez que se
	ha escrito la réplica al correo se envía pulsando
        la tecla
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>X</strong></span>.  <span class="application">pine</span> pedirá
	confirmación antes de enviarlo.</p><div class="mediaobject"><img src="mail/pine5.png" /></div><p><span class="application">pine</span> puede configurarse utilizando la
	entrada <span class="guimenuitem">SETUP</span> del menú principal.
	Se ruega consultar <code class="uri"><a class="uri" href="http://www.washington.edu/pine/" target="_top">http://www.washington.edu/pine/</a></code>
	para obtener más información.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-fetchmail"></a>27.12. Manejo de fetchmail</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Silver</span></span>. </span></div></div></div><a id="idp79777872" class="indexterm"></a><p><span class="application">fetchmail</span> es un cliente de
      <acronym class="acronym">IMAP</acronym> y <acronym class="acronym">POP</acronym> que permite a
      los usuarios descargar automáticamente el correo de cuentas
      remotas en servidores
      <acronym class="acronym">IMAP</acronym> y <acronym class="acronym">POP</acronym> y almacenarlos
      en carpetas de correo locales; una vez en local, se puede acceder a los
      correos de una forma más sencilla y utilizando multitud de
      programas cliente.
      <span class="application">fetchmail</span> se puede instalar a partir del port
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/fetchmail/pkg-descr">mail/fetchmail</a>.  Veamos algunas de
      sus características más útiles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Suporte de <acronym class="acronym">POP3</acronym>,
	  <acronym class="acronym">APOP</acronym>, <acronym class="acronym">KPOP</acronym>,
	  <acronym class="acronym">IMAP</acronym>, <acronym class="acronym">ETRN</acronym> y
	  <acronym class="acronym">ODMR</acronym>.</p></li><li class="listitem"><p>Puede reenviar correo utilizando <acronym class="acronym">SMTP</acronym> lo que
	  permite que las reglas de filtrado, reenvío y
	  <span class="quote">&#8220;<span class="quote">aliasing</span>&#8221;</span> funcionen correctamente.</p></li><li class="listitem"><p>Se puede ejecutar en modo dæmon comprobar
	  periódicamente el correo entrante.</p></li><li class="listitem"><p>Puede recuperar correo de múltiples carpetas y reenviarlos, en función de la configuración establecida,
          a varios usuarios locales.</p></li></ul></div><p>Queda fuera del objetivo de este documento explicar todas las
      características de
      <span class="application">fetchmail</span> pero algunas de ellas se exponen a
      ontinuación.
      <span class="application">fetchmail</span> usa un fichero de
      configuración denominado
      <code class="filename">.fetchmailrc</code>.  Este fichero incluye
      información sobre el servidor de correo remoto y los datos
      necesarios para poder hacer login en él.  Debido a la naturaleza
      sensible de la información que se almacena en dicho fichero
      se recomienda modificar los permisos para que sea de sólo
      sea legible por su propietario.  Lo conseguirá mediante el
      siguiente comando:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod 600 .fetchmailrc</code></strong></pre><p>El siguiente ejemplo muestra un fichero de configuración
      <code class="filename">.fetchmailrc</code>.
      Este ejemplo sirve para automatizar la descarga del correo de un
      determinado usuario mediante <acronym class="acronym">POP</acronym>.  El fichero de
      configuración hace que
      <span class="application">fetchmail</span> se conecte a <code class="systemitem">ejemplo.com</code> utilizando como nombre de usuario
      <code class="systemitem">joesoap</code> y como contraseña
      <code class="literal">XXX</code>.  En el ejemplo se asume que el usuario
      <code class="systemitem">joesoap</code> también es un usuario válido
      en el sistema local.</p><pre class="programlisting">poll ejemplo.com protocol pop3 username "joesoap" password "XXX"</pre><p>El siguiente ejemplo permite a <span class="application">fetchmail</span>
      conectarse a múltiples servidores
      <acronym class="acronym">POP</acronym> e <acronym class="acronym">IMAP</acronym> y redirige los correos
      a diferentes usuarios locales en función
      de la configuración establecida:</p><pre class="programlisting">poll ejemplo.com proto pop3:
user "joesoap", with password "XXX", is "jsoap" here;
user "andrea", with password "XXXX";
poll ejemplo.net proto imap:
user "john", with password "XXXXX", is "myth" here;</pre><p><span class="application">fetchmail</span> se puede ejecutar en modo
      dæmon mediante el parámetro <code class="option">-d</code> seguido
      seguido por un intervalo de tiempo (expresado en segundos)
      que indica cada cuánto tiempo debe
      <span class="application">fetchmail</span> interrogar a los distintos
      servidores listados en <code class="filename">.fetchmailrc</code>.
      El siguiente ejemplo hace que
      <span class="application">fetchmail</span> interroge cada 60 segundos:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>fetchmail -d 60</code></strong></pre><p>Se puede encontrar más información sobre
      <span class="application">fetchmail</span> en <code class="uri"><a class="uri" href="http://www.catb.org/~esr/fetchmail/" target="_top">http://www.catb.org/~esr/fetchmail/</a></code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-procmail"></a>27.13. Uso de procmail</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Silver</span></span>. </span></div></div></div><a id="idp79829200" class="indexterm"></a><p><span class="application">procmail</span> es una aplicación
      increíblemente potente que se utiliza para filtrar el correo de
      entrada.
      Permite a los usuarios definir <span class="quote">&#8220;<span class="quote">reglas</span>&#8221;</span> que se asocian
      con correos entrantes y que realizan funciones concretas, como
      reencaminar el correo a carpetas o direciones alternativas.
      <span class="application">procmail</span> se puede instalar utilizando el port
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/procmail/pkg-descr">mail/procmail</a>.  Una vez instalado,
      se puede integrar directamente en la mayoría de los
      <acronym class="acronym">MTA</acronym>s; por favor, consulte
      la documentación del <acronym class="acronym">MTA</acronym> que utilice para
      saber más sobre la integración entre ambos.
      Por otro lado <span class="application">procmail</span> se puede integrar
      con el <acronym class="acronym">MTA</acronym> que prefiera de una forma sencilla
      añadiendo la siguiente línea al
      fichero <code class="filename">.forward</code> dentro del directorio home del
      usuario que desée usar <span class="application">
      procmail</span>:</p><pre class="programlisting">"|exec /usr/local/bin/procmail || exit 75"</pre><p>La siguiente sección muestra algunas reglas básicas de
      <span class="application">procmail</span>, junto con una breve
      descripción de las acciones que realizan.
      Estas reglas, y muchas otras se deben insertar dentro del fichero
      <code class="filename">.procmailrc</code> ubicado en el directorio home del
      usuario.</p><p>En la página man de <span class="quote">&#8220;<span class="quote">procmailex</span>&#8221;</span> se explica
      la mayoría de estas reglas.</p><p>Reenvío de todo el correo proveniente de
      <code class="literal">usuario@ejemplo.com</code> hacia la
      dirección externa <code class="literal">correodefiar@ejemplo.com</code>:</p><pre class="programlisting">:0
* ^From.*usuario@ejemplo.com
! correodefiar@ejemplo.com</pre><p>Reenvío de todos los correos que ocupen menos de 1000 bytes
      a la dirección <code class="literal">corredefiar@ejemplo2.com</code>:</p><pre class="programlisting">:0
* &lt; 1000
! correodefiar@ejemplo2.com</pre><p>Envío de todos los correos dirigidos a
      <code class="literal">opcional@ejemplo.com</code>
      hacia una carpeta de correo llamada <code class="filename">opcional</code>:</p><pre class="programlisting">:0
* ^TOopcional@ejemplo.com
opcional</pre><p>Envío de todos los correos con un asunto que contenga la
      palabra <span class="quote">&#8220;<span class="quote">Spam</span>&#8221;</span> al
      dispositivo <code class="filename">/dev/null</code>:</p><pre class="programlisting">:0
^Subject:.*Spam
/dev/null</pre><p>Una útil receta para examinar mensajes de correo provenientes
      de listas de distribución de
      <code class="systemitem">FreeBSD.org</code> y poner cada mensaje en
      el directorio apropiado en función del origen del mensaje:</p><pre class="programlisting">:0
* ^Sender:.owner-freebsd-\/[^@]+@FreeBSD.ORG
{
	LISTNAME=${MATCH}
	:0
	* LISTNAME??^\/[^@]+
	FreeBSD-${MATCH}
}</pre></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-servers"></a>Capítulo 28. Servidores de red</h2></div><div><span class="authorgroup">Reorganizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#network-servers-synopsis">28.1. *</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-servers-synopsis"></a>28.1. *</h2></div></div></div><p>Pendiente de traducción. Este capítulo
      incluye también parte del contenido del  <a class="xref" href="#advanced-networking" title="Capítulo 29. Networking avanzado">Capítulo 29, <em>Networking avanzado</em></a>, <span class="quote">&#8220;<span class="quote">networking</span>&#8221;</span>
      avanzado.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="advanced-networking"></a>Capítulo 29. Networking avanzado</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#advanced-networking-synopsis">29.1. Resumen</a></span></dt><dt><span class="sect1"><a href="#network-routing">29.2. Pasarelas y <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span></a></span></dt><dt><span class="sect1"><a href="#network-wireless">29.3. Redes sin cables (<span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>)</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">29.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">29.5. Puenteado</a></span></dt><dt><span class="sect1"><a href="#network-nfs">29.6. NFS</a></span></dt><dt><span class="sect1"><a href="#network-diskless">29.7. Ejecución sin disco duro</a></span></dt><dt><span class="sect1"><a href="#network-isdn">29.8. RDSI</a></span></dt><dt><span class="sect1"><a href="#network-nis">29.9. NIS/YP</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">29.10. DHCP</a></span></dt><dt><span class="sect1"><a href="#network-dns">29.11. DNS</a></span></dt><dt><span class="sect1"><a href="#network-ntp">29.12. NTP</a></span></dt><dt><span class="sect1"><a href="#network-natd">29.13. Traducción de direcciones de red</a></span></dt><dt><span class="sect1"><a href="#network-inetd">29.14. El <span class="quote">&#8220;<span class="quote">Superservidor</span>&#8221;</span> <span class="application">
      inetd</span></a></span></dt><dt><span class="sect1"><a href="#network-plip">29.15. Línea IP paralela (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">29.16. IPv6</a></span></dt><dt><span class="sect1"><a href="#network-atm">29.17. ATM en FreeBSD 5.X</a></span></dt></dl></div><p>Networking avanzado</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="advanced-networking-synopsis"></a>29.1. Resumen</h2></div></div></div><p>Este capítulo cubre algunos de los servicios de red
          que se usan con más frecuencia en sistemas
          <span class="trademark">UNIX</span>®. Para ser más concretos este capítulo
	  explica cómo definir, ejecutar, probar
          y  mantener todos los servicios de red que utiliza
          FreeBSD.  Se muestran además ejemplos de ficheros de
          configuración que podrá utilizar para sus
          propios quehaceres.</p><p>Después de leer este capítulo habremos
      aprendido:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Los conceptos básicos de pasarelas y
          <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span>.</p></li><li class="listitem"><p>Cómo poner en funcionamiento dispositivos IEEE
          802.11 y <span class="trademark">Bluetooth</span>®.</p></li><li class="listitem"><p>Cómo configurar FreeBSD para que actúe
          como un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>.</p></li><li class="listitem"><p>Cómo poner en funcionamiento un sistema de
          ficheros en red con NFS.</p></li><li class="listitem"><p>Cómo realizar un arranque del sistema por red en
          máquinas sin disco duro.</p></li><li class="listitem"><p>Cómo ejecutar un servidor de información
          en red para compartir cuentas de usuario mediante NIS.</p></li><li class="listitem"><p>Cómo especificar parámetros de
          configuración automática de red utilizando
          DHCP.</p></li><li class="listitem"><p>Cómo ejecutar un servidor de nombres de dominio.</p></li><li class="listitem"><p>Cómo sincronizar la hora y la fecha y ejecutar
          un servidor horario utilizando el protocolo NTP.</p></li><li class="listitem"><p>Cómo ejecutar un servicio de traducción de
          direcciones de red.</p></li><li class="listitem"><p>Cómo gestionar el dæmon
          <span class="application">inetd</span>.</p></li><li class="listitem"><p>Cómo conectar dos computadoras a través de
          PLIP.</p></li><li class="listitem"><p>Cómo habilitar IPv6 en una máquina
          FreeBSD.</p></li><li class="listitem"><p>Cómo configurar ATM sobre FreeBSD 5.X.</p></li></ul></div><p>Antes de leer este capítulo debería usted:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Intentar comprender los conceptos básicos de los
          scripts de <code class="filename">/etc/rc</code>.</p></li><li class="listitem"><p>Familiarizarse con la terminología básica
          de redes.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-routing"></a>29.2. Pasarelas y <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span></h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Coranth</span> <span class="surname">Gryphon</span></span>. </span></div></div></div><a id="idp79888720" class="indexterm"></a><a id="idp79889232" class="indexterm"></a><a id="idp79889744" class="indexterm"></a><p>Para que una máquina sea capaz de encontrar otra
      máquina remota a través de la red debe existir
      mecanismo que describa cómo llegar del origen al destino.
      Este mecanismo se demonina <em class="firstterm">routing</em> o
      <em class="firstterm">encaminamiento</em>.  Una <span class="quote">&#8220;<span class="quote">ruta</span>&#8221;</span>
      es un par definido de direcciones: una dirección de
      <span class="quote">&#8220;<span class="quote">destino</span>&#8221;</span> y una dirección
      de <span class="quote">&#8220;<span class="quote">pasarela</span>&#8221;</span>.  Éste par indica que para llegar a
      dicho <span class="emphasis"><em>destino</em></span> debe efectuarse  una
      comunicación previa con dicha
      <span class="emphasis"><em>pasarela</em></span>.  Exiten tres tipos distintos
      de destinos: máquinas individuales, subredes y
      <span class="quote">&#8220;<span class="quote">por defecto</span>&#8221;</span>.  La <span class="quote">&#8220;<span class="quote">ruta por defecto</span>&#8221;</span>
      se utiliza sólamente cuando no se puede aplicar ninguna
      de las otras rutas existentes.  El tema de las
      rutas por defecto se tratará más adelante con
      más detalle.  También existen tres tipos de
      pasarelas distintas: máquinas individuales, interfaces
      (también llamados <span class="quote">&#8220;<span class="quote">enlaces</span>&#8221;</span>) y direcciones
      hardware de ethernet (direcciones MAC).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79898704"></a>29.2.1. Ejemplo</h3></div></div></div><p>Para ilustrar diferentes aspectos del sistema de
        encaminamiento veamos el siguiente ejemplo obtenido mediante
        <code class="command">netstat</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Destination      Gateway            Flags     Refs     Use     Netif Expire

default          outside-gw         UGSc       37      418      ppp0
localhost        localhost          UH          0      181       lo0
test0            0:e0:b5:36:cf:4f   UHLW        5    63288       ed0     77
10.20.30.255     link#1             UHLW        1     2421
ejemplo.com      link#1             UC          0        0
host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0
host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 =&gt;
host2.ejemplo.com link#1            UC          0        0
224              link#1             UC          0        0</pre><a id="idp79901264" class="indexterm"></a><p>Las primeras dos líneas especifican la ruta por
        defecto (la cual se comenta en la
	<a class="link" href="#network-routing-default" title="29.2.2. Rutas por defecto">siguiente
          sección</a>) y la ruta de <code class="systemitem">máquina
          local</code>.</p><a id="idp79903056" class="indexterm"></a><p>La interfaz (columna <code class="literal">Netif</code>) que
        especifica esta tabla de rutas
	para el destino <code class="literal">localhost</code> se denomina
        <code class="filename">lo0</code>,
	y también se conoce como el dispositivo de <span class="quote">&#8220;<span class="quote">
	loopback</span>&#8221;</span> a de bucle de retorno. Esto viene a decir que
        el tráfico no debe entregarse a la red puesto que
        dicho tráfico va destinado a la misma máquina
        que lo originó.</p><a id="idp79909712" class="indexterm"></a><p>Lo siguiente que podemos observar son las direcciones
        que comienzan por
        <code class="systemitem">0:e0:</code>.  Son direcciones hardware de
	Ethernet, llamadas también se direcciones MAC.
        FreeBSD identifica automáticamente cualquier
        máquina (<code class="systemitem">test0</code> en el ejemplo anterior)
        que se encuentre en la red local y
        crea una ruta del estilo que estamos comentando, para entregar
        el tráfico directamente a través del
        correspondiente interfaz Ethernet, en este caso
        <code class="filename">ed0</code>.  Existe también
        un contador (<code class="literal">Expire</code>) asociado con este tipo
        de rutas que se usa para borrarlas cuando dicho contador expira.
        Las rutas para las máquinas de nuestra propia red de
        de área local se crean dinámicamente
        utilizando el protocolo ARP (Address Resolution Protocol o
        Protocolo de Resolución de Direcciones),
        que se encarga de averiguar la dirección MAC que se
        corresponde con la dirección IP de la máquina
        destino.</p><a id="idp79912912" class="indexterm"></a><p>FreeBSD tambíen utiliza rutas de subred para
        direccionar la subred local (<code class="systemitem">10.20.30.255</code> es la dirección
        de broadcast para la subred
	 <code class="systemitem">10.20.30</code>, y
	  <code class="systemitem">ejemplo.com</code> es el nombre de
        dominio asociado con dicha subred.)
        La notación <code class="literal">link#1</code> se refiere a la
        primera tarjeta Ethernet de la máquina.
        En este tipo de redes no se especifica ningún interfaz
        en el campo de <code class="literal">Netif</code>.</p><p>Las rutas de subredes aparecen cuando se asigna una
        dirección IP a una interfaz, utilizando una
        máscara de red.  También se pueden aprender
        dinámicamente utilizando demonios de encaminamiento,
        como <span class="application">routed</span>.  Por último estas
        rutas pueden crearse manualmente de forma explícita;
         es lo que se conoce con el nombre de rutas estáticas.</p><p>La línea de <code class="literal">host1</code> se refiere a
        nuestra máquina, que el sistema identifica por la
        correspondiente dirección Ethernet de la tarjeta de red.
        FreeBSD sabe que debe utilizar la interfaz de loopback
        (<code class="filename">lo0</code>) en vez de enviar los paquetes a
        a través de red.</p><p>Las dos líneas que comienzan por
        <code class="literal">host2</code> son ejemplos del uso de alias de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> alias (consultar la sección sobre
        Ethernet para averiguar por qué nos podría
        interesar hacer esto.)  El símbolo
        <code class="literal">=&gt;</code> después de la interfaz
	<code class="filename">lo0</code> especifica que no sólo
        estamos utilizando la interfaz de loopback, si no que
        además especifica que se trata de un alias.  Estas rutas
        sólo aparecen en las máquinas que implementan el
        alias, el resto de las máquinas de la subred local
        solamente poseerán una línea
	<code class="literal">link#1</code> para dichas rutas.</p><p>La última línea (destino de subred <code class="systemitem">224</code>) trata sobre encaminamiento
        multicast, que cubriremos en otra sección.</p><p>Finalmente, se pueden observar varios atributos
        relacionados con las rutas en la columna de
        <code class="literal">Flags</code>. A continuación se muestra una
        pequeña tabla con el significado de algunos de esos
        de los atributos o <span class="quote">&#8220;<span class="quote">flags</span>&#8221;</span>.</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>Up: La ruta está activa.</td></tr><tr><td>H</td><td>Host: El destino de la ruta es una única
                máquina.</td></tr><tr><td>G</td><td>Gateway: Envía cualquier cosa para éste
                destino a través de la pasarela especificada,
                la cual decidirá cómo encaminar el paquete
                hasta que eventualmente se alcance el destino.</td></tr><tr><td>S</td><td>Static: Esta ruta se configuró
                manualmente, y no se ha generado de forma
                automática por el sistema.</td></tr><tr><td>C</td><td>Clone: Genera una nueva ruta para la
                máquina a la que nos queremos conectar
                basándose en la ruta actual.  Este tipo de ruta se
                utiliza normalmente en redes locales.</td></tr><tr><td>W</td><td>WasCloned: Indica una ruta que se auto-configuró
                basándose en una ruta de red de área local con
                etiqueta Clone.</td></tr><tr><td>L</td><td>Link: Esta ruta posée referencias a hardware de
	        Ethernet.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-default"></a>29.2.2. Rutas por defecto</h3></div></div></div><a id="idp79933648" class="indexterm"></a><p>Cuando el sistema local necesita realizar una conexión con
        una máquina remota se examina la tabla de rutas para determinar
	si se conoce algún camino para llegar al destino.
        Si la máquina remota pertenece a una subred que sabemos
        cómo alcanzar (rutas clonadas) entonces el sistema comprueba si
	se puede conectar utilizando dicho camino.</p><p>Si todos los caminos conocidos fallan al sistema le queda una
         única opción: la <span class="quote">&#8220;<span class="quote">ruta por defecto</span>&#8221;</span>.
         Esta ruta está constituída por un tipo especial de
         pasarela (normalmente el único <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>
	 presente en la red
         área local) y siempre posée el <span class="quote">&#8220;<span class="quote">flag</span>&#8221;</span>
         <code class="literal">c</code> en el campo de <span class="quote">&#8220;<span class="quote">flags</span>&#8221;</span>.
	 En una LAN, la pasarela es la máquina que posée
         conectividad con el resto de las redes (sea a través de un
         enlace PPP, DSL, cable modem, T1 u otra interfaz de red.)</p><p>Si se configura la ruta por defecto en una máquina que
        está actuando como pasarela hacia el mundo exterior
        la ruta por defecto será el <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>
	que se encuentre en
        posesión del proveedor de servicios de internet (ISP).</p><p>Vamos a examinar un ejemplo que utiliza rutas por defecto.
        A continuación se muestra una configuración bastante
        común:</p><div class="mediaobject"><img src="advanced-networking/net-routing.png" /></div><p>Las máquinas <code class="systemitem">Local1</code> y
	<code class="systemitem">Local2</code> se encuentran en nuestro sitio u
        organización.  <code class="systemitem">Local1</code> se conecta con un ISP
        a través de una conexión de modem PPP.
        El servidor PPP del ISP se conecta a través de una red de
        área local a otra pasarela utilizando una interfaz
        externa.</p><p>Las rutas por defecto para cada una de las máquinas son
        las siguientes:</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Host</th><th>Default Gateway</th><th>Interface</th></tr></thead><tbody><tr><td>Local2</td><td>Local1</td><td>Ethernet</td></tr><tr><td>Local1</td><td>T1-GW</td><td>PPP</td></tr></tbody></table></div><p>Una pregunta bastante frecuente es <span class="quote">&#8220;<span class="quote">?Por
         qué (o cómo) hacer que la máquina
 	 <code class="systemitem">T1-GW</code> sea el <span class="quote">&#8216;<span class="quote">router</span>&#8217;</span> por defecto para
	<code class="systemitem">Local1</code> en vez de que sea el servidor del ISP
          al cual se está conectando?</span>&#8221;</span>.</p><p>Recordemos que, como la interfaz PPP está utilizando una
        dirección de la red local del ISP en nuestro lado de la
        las rutas para cualquier otra máquina en la red local del
        proveedor se generarán de forma automática. De este
        ya sabemos el modo de alcanzar la máquina
        <code class="systemitem">T1-GW</code>, de tal forma que no se necesita un paso
        intermedio para enviar tráfico al servidor del ISP.</p><p>Es frecuente utilizar la dirección <code class="systemitem">X.X.X.1</code> como la dirección de
        la pasarela en la red local.  Siguiendo con el ejemplo anterior, si
        nuestro espacio de direccionamiento local fuera la clase C
        <code class="systemitem">10.20.30</code> y nuestro ISP estuviera
	utilizando <code class="systemitem">10.9.9</code> las rutas por
        defecto serían:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Host</th><th>Default Route</th></tr></thead><tbody><tr><td>Local2 (10.20.30.2)</td><td>Local1 (10.20.30.1)</td></tr><tr><td>Local1 (10.20.30.1, 10.9.9.30)</td><td>T1-GW (10.9.9.1)</td></tr></tbody></table></div><p>Se puede especificar fácilmente la entrada de la
        ruta por defecto utilizando el fichero
        <code class="filename">/etc/rc.conf</code>.  En nuestro ejemplo
        en la máquina <code class="systemitem">Local2</code>, se añadió
        la siguiente línea en dicho fichero:</p><pre class="programlisting">defaultrouter="10.20.30.1"</pre><p>También se puede hacer directamente desde la línea
        de órdenes mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add default 10.20.30.1</code></strong></pre><p>Para obtener más información sobre la
        manipulación de tablas de rutas se ruega consultar
         la página de manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79976144"></a>29.2.3. Máquinas con doble pertenencia (Dual Homed Hosts)</h3></div></div></div><a id="idp79976784" class="indexterm"></a><p>Existe otro tipo de configuración que debemos describir
        y que se produce cuando una máquina se sitúa en dos
        redes distintas al mismo tiempo.  Técnicamente hablando
        cualquier máquina que actúa como pasarela (en el
        caso anterior utilizando un enlace de PPP) pertenece al tipo
        de máquinas con doble pertenencia, pero normalmente el
        término sólo se aplica para describir máquinas
        que se encuentran directamente conectadas con dos redes de área
	local.</p><p>En un caso la máquina posée dos tarjetas de red
        Ethernet, cada una de ellas con una dirección de red
        independiente.  En otro caso la máquina puede tener
        sólo una tarjeta de red, pero utilizar <span class="quote">&#8220;<span class="quote">
	aliasing</span>&#8221;</span> (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>).  El primer caso se utiliza cuando
        se necesita usar dos redes Ethernet al mismo tiempo mientras que el
	segundo caso se utiliza cuando se dispone de un único segmento
        de red físico pero se han definido dos redes lógicas
        distintas</p><p>En cualquier caso la tabla de rutas se construye de tal forma
        que cada subred sepa que la máquina es la pasarela definida
        definida (<span class="quote">&#8220;<span class="quote">inbound route</span>&#8221;</span>) para la otra subred.
	Ésta configuración en la que la máquina
        actúa como <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> entre las dos subredes se
	usa a menudo
        cuando queremos implementar filtrado de paquetes o cortafuegos
	seguridad en un sentido o en ambos.</p><p>Si queremos que dicha máquina encamine paquetes entre las
        dos interfaces es necesario decirle a FreeBSD que active dicha
        funcionalidad.  En la siguiente sección se explica cómo
        hacerlo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dedicated-router"></a>29.2.4. Construcción de un <span class="quote">&#8220;<span class="quote">route</span>&#8221;</span></h3></div></div></div><a id="idp80014800" class="indexterm"></a><p>Un <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> de red, también llamado pasarela o
        <span class="quote">&#8220;<span class="quote">route</span>&#8221;</span>, es simplemente un sistema que reenvía
	paquetes desde un interfaz hacia otro interfaz.  Los estándares
        Internet y el sentido común aplicado a la ingeniería de
        redes impiden que FreeBSD incluya por defecto ésta
	característica. Se puede activar cambiando a
        <code class="literal">YES</code> el valor de la siguiente variable en el fichero
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>:</p><pre class="programlisting">gateway_enable=YES          # Set to YES if this host will be a gateway</pre><p>Esta opción modificará la variable de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> <code class="varname">net.inet.ip.forwarding</code> al valor
	<code class="literal">1</code>.  Si en algún momento se necesita
        detener el <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> de forma temporal basta con
	asignar a dicha
        variable el valor <code class="literal">0</code>. Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> para
        más detalles.</p><p>Nuestro recién activado <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>
        necesita rutas para
        saber a dónde debe enviar el tráfico recibido.
        Si nuestra red es ña se pueden definir rutas estáticas.
        FreeBSD incluye por defecto el dæmon de encaminamiento BSD,
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a>, que admite RIP (versión 1 y versión 2)
	e IRDP.  El paquete <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/zebra/pkg-descr">net/zebra</a> le
	permitirá usar otros protocolos de encaminamiento
	dinámico como BGP v4, OSPF v2 y muchos otros.
        En caso de necesitar características avanzadas de
	gestión puede usted recurrir a productos comerciales como
        <span class="application"><span class="trademark">GateD</span>®</span>.</p><a id="idp80048720" class="indexterm"></a><a id="idp80049232" class="indexterm"></a><a id="idp80049744" class="indexterm"></a><p>Incluso cuando FreeBSD se configura del modo descrito no se
        cumple completamente con los estándares de Internet
        respecto a los <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span>.  Bastará no obstante
	para poder usarse.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80051152"></a>29.2.5. Configuración de rutas estáticas</h3></div><div><span class="authorgroup">Escrito por<span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Al</span> <span class="surname">Hoang</span></span>. </span></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80086736"></a>29.2.5.1. Configuración manual</h4></div></div></div><p>Vamos a suponer que tenemos la siguiente topología de
	  red:</p><pre class="literallayout">
    INTERNET
      | (10.0.0.1/24) Router por defecto para Internet
      |
      |Interfaz xl0
      |10.0.0.10/24
   +------+
   |      | RouterA
   |      | (pasarela FreeBSD)
   +------+
      | Interfaz xl1
      | 192.168.1.1/24
      |
  +--------------------------------+
   Red Interna 1       | 192.168.1.2/24
                       |
                   +------+
                   |      | RouterB
                   |      |
                   +------+
                       | 192.168.2.1/24
                       |
                     Red Interna 2
	</pre><p>En este escenario <code class="systemitem">RouterA</code> es nuestra
          máquina FreeBSD que actúa como pasarela para acceder al
          resto de internet.  Tiene una ruta por defecto que apunta a
	  <code class="systemitem">10.0.0.1</code> que le permite conectarse
          con el mundo exterior.  Vamos a suponer también que
          <code class="systemitem">RouterB</code> se encuentra configurado de forma adecuada
          que sabe cómo llegar a cualquier sitio que necesite.
          Esto es sencillo viendo nuestra topología de red, basta
          con añadir una ruta por defecto en la máquina
          <code class="systemitem">RouterB</code> utilizando
          <code class="systemitem">192.168.1.1</code> como
	  <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>.</p><p>Si observamos la tabla de rutas de
	  <code class="systemitem">RouterA</code> veremos algo como lo siguiente:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -nr</code></strong>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0/24          link#1             UC          0        0    xl0
192.168.1/24       link#2             UC          0        0    xl1</pre><p>Con la tabla de rutas actual <code class="systemitem">RouterA</code>
	  no es capaz de alcanzar la red interna 2.  Esto es así
          porque no posee ninguna ruta para la red
          <code class="systemitem">192.168.2.0/24</code>.  Una forma de
          mitigar esto es añadir de forma manual la ruta que falta.  La
          siguiente orden añade la red interna 2 a la tabla  de rutas
          de la máquina <code class="systemitem">RouterA</code>
          utilizando <code class="systemitem">192.168.1.2</code> como siguiente salto:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>Ahora <code class="systemitem">RouterA</code> puede alcanzar cualquier
          máquina en la red
	  <code class="systemitem">192.168.2.0/24</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80101968"></a>29.2.5.2. Cómo hacer la configuración persistente</h4></div></div></div><p>El ejemplo anterior es perfecto en tanto que resuelve el
          problema de encaminamiento entre redes pero existe un problema.
          La información de encaminamiento desaparecerá si se
          reinicia la máquina.  La forma de evitarlo es
          añadir las rutas estáticas a
          <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting"># Añade la red interna 2 como una ruta estática
static_routes="redinterna2"
route_internalnet2="-net 192.168.2.0/24 192.168.1.2"</pre><p>La variable de configuración
          <code class="literal">static_routes</code> es una lista de cadenas
          separadas por espacios.  Cada cadena identifica un nombre para la
          ruta que se desea definir.  En el ejemplo anterior sólamente
          se dispone de una cadena dentro de la variable
	  <code class="literal">static_routes</code>.
          Esta cadena es <em class="replaceable"><code>redinterna2</code></em>.  A
          continuación se añade otra variable de
          configuración denominada
          <code class="literal">route_redinterna2</code>
	  donde se escriben todos los parámetros de
	  configuración que normalmente utilizaríamos
          normalmente utilizaríamos con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>.
          En el ejemplo que estamos comentando se utilizaría la
          siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>De tal forma que la variable debería contener
          <code class="literal">"-net 192.168.2.0/24 192.168.1.2"</code>.</p><p>Como ya se ha comentado anteriormente podemos especificar
	  más de una cadena en la variable
	  <code class="literal">static_routes</code>.  Esto nos permite crear varias
          rutas estáticas. Las siguientes línas muestran
          un ejemplo donde se añaden rutas estáticas para las
          redes <code class="systemitem">192.168.0.0/24</code>
          y <code class="systemitem">192.168.1.0/24</code> en un
          <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>imaginario:</p><pre class="programlisting">static_routes="red1 red2"
route_red1="-net 192.168.0.0/24 192.168.0.1"
route_red2="-net 192.168.1.0/24 192.168.1.1"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80111312"></a>29.2.6. Propagación de rutas</h3></div></div></div><a id="idp80111952" class="indexterm"></a><p>Ya hemos comentado cómo se definen las rutas para
        el mundo exterior pero no hemos comentado nada sobre cómo
        haremos que el mundo exterior nos encuentre a nosotros.</p><p>También hemos aprendido que las tablas de rutas se
        pueden construír de tal forma que un grupo de tráfico
        (perteneciente a un espacio de direcciones determinado) se
        reenvíe a una máquina específica de la red,
        que se encargará de reenviar los paquetes hacia adentro.</p><p>Cuando se obtiene un espacio de direcciones para la
        organización el proveedor de servicios modifica sus tablas de
        rutas para que todo el tráfico para nuestra subred se encamine
        a través del enlace PPP hasta alcanzarnos.
        Pero ?cómo conocen las organizaciones dispersas
        a través del país que deben enviar los paquetes
        dirigidos a nosotros hacia nuestro ISP?</p><p>Existe un sistema (muy similar al sistema de nombres de
        dominio, DNS) que se encarga de controlar todos los espacios de
        direcciones que se encuentran actualmente repartidos y que
        además define sus puntos de conexión con el
        <span class="quote">&#8220;<span class="quote">backbone</span>&#8221;</span> de internet.  El <span class="quote">&#8220;<span class="quote">backbone</span>&#8221;</span>
	está formado por las principales líneas de
        de comunicacion que se encargan de transportar el tráfico de
        internet a través del país y del mundo entero.
	Cada máquina del <span class="quote">&#8220;<span class="quote">backbone</span>&#8221;</span> dispone de una copia
        de un conjunto maestro de tablas de rutas gracias a las cuales pueden
        dirigir el tráfico para una red particular hacia una
        determinada red de transporte de dicho <span class="quote">&#8220;<span class="quote">backbone</span>&#8221;</span>.
	Una vez en la red de transporte adecuada el tráfico se encamina
        a través de un número indeterminado de redes de
	proveedores de servicio hasta que se alcanza la red de destino
	final.</p><p>Una de las tareas que debe realizar el proveedor de servicio
        servicio consiste en anunciarse a las organizaciones del
        consiste en anunciarse a las organizaciones del
	<span class="quote">&#8220;<span class="quote">backbone</span>&#8221;</span> como el punto de conexión principal
        (y por tanto como el camino de entrada) para alcanzar las redes de
	sus clientes.  Este proceso se denomina propagación de
	rutas.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80120656"></a>29.2.7. Solución de problemas</h3></div></div></div><a id="idp80121296" class="indexterm"></a><p>En algunas ocasiones surgen problemas con la propagación
        de las rutas y algunas organizaciones son incapaces de conectarse con
        nuestra subred. Quizá la orden más útil para
        averiguar dónde se está interrumpiendo el sistema
        de encaminamiento sea <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>.  Se puede usar
        también cuando somos nosotros los que no podemos alcanzar
        alguna red externa (por ejemplo cuando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> falla).</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> se ejecuta pasandole como parámetro el
        nombre de la máquina remota a la que nos queremos
        conectar.  Esta orden muestra por pantalla lás máquinas
        que actúan de pasarela a lo largo del camino.  El proceso
        termina bien porque se alcanza el destino o bien porque algún
        <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> intermedio no puede conectarse con el siguiente
        salto, o lo desconoce.</p><p>Si quiere saber más sobre esto consulte la página
        man de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80131024"></a>29.2.8. Rutas multicast</h3></div></div></div><a id="idp80131664" class="indexterm"></a><p>FreeBSD soporta tanto aplicaciones multicast como encaminamiento
        multicast de forma nativa.  Las aplicaciones multicast no necesitan
        ninguna configuración especial en FreeBSD;  estas aplicaciones
        se ejecutan tal cual.  El encaminamiento multicast necesita para
	ser usado que se compile dicho soporte en el núcleo de
	FreeBSD:</p><pre class="programlisting">options MROUTING</pre><p>Se debe configurar además  el dæmon de
        encaminamiento multicast,  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>, para establecer
	túneles y ejecutar DVMRP utilizando
	<code class="filename">/etc/mrouted.conf</code>.  Se pueden encontrar
        más detalles sobre cómo realizar una
        configuración de multicast en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-wireless"></a>29.3. Redes sin cables (<span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>)</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Eric</span> <span class="surname">Anderson</span></span>. </span></div></div></div><a id="idp80139600" class="indexterm"></a><a id="idp80140112" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80141264"></a>29.3.1. Introducción</h3></div></div></div><p>Puede resultar muy útil el ser capaz de utilizar una
        computadora sin la molestia de tener un cable de red colgando
      de la máquina en todo momento.  FreeBSD puede utilizarse
        como un cliente de <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> e incluso como un
      <span class="quote">&#8220;<span class="quote">punto de acceso</span>&#8221;</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80143184"></a>29.3.2. Modos de operación Wireless</h3></div></div></div><p>Existen dos formas diferentes de configurar dispositivos wireless
        802.11: BSS e IBSS.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80144208"></a>29.3.2.1. Modo BSS</h4></div></div></div><p>El modo BSS es el que se utiliza normalmente.  Este modo
          también se denomina modo infraestructura. En
          esta configuración se conectan un determinado
          número de puntos de acceso a una red cableada. Cada red
          Cada red <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> posée su propio nombre.
          Este nombre es el SSID de la red.</p><p>Los clientes <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> se conectan a estos puntos
          de acceso.  El estándar IEEE 802.11 define el protocolo que
          se utiliza para realizar esta conexión.  Un cliente
	  <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> puede asociarse con una determinada red
          <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> especificando el SSID.
          Un cliente <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> también puede asociarse a
          cualquier red que se encuentre disponible;  basta con no especificar
          ningún SSID.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80147792"></a>29.3.2.2. Modo IBSS</h4></div></div></div><p>El modo IBSS, también conocido como modo ad-hoc, se ha
          diseñado para facilitar las conexiones punto a punto.
          En realidad existen dos tipos distintos de modos ad-hoc.  Uno es
          el modo IBSS, también conocido como modo ad-hoc o modo
          ad-hoc del IEEE.  Este modo se encuentra especificado en el
          estándar IEEE 802.11.  El segundo tipo se denomina modo
          ad-hoc de demostración o modo ad-hoc de Lucent (y algunas
          veces, también se le llama simplemente modo ad-hoc, lo cual
          es bastante confuso).  Este es el modo de funcionamiento
	  antíguo, anterior al estándar 802.11, del modo ad-hoc
          debería utilizarse sólo en instalaciones
          propietarias. No profundizaremos más sobre estos modos de
          funcionamiento.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80149072"></a>29.3.3. Modo infraestructura</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80149712"></a>29.3.3.1. Puntos de acceso</h4></div></div></div><p>Los puntos de acceso son dispositivos de red
         <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> que funcionan de forma equivalente a los
	 <span class="quote">&#8220;<span class="quote">hubs</span>&#8221;</span> o concentradores, permitiendo que varios clientes
         <span class="quote">&#8220;<span class="quote"> wireless</span>&#8221;</span> se comuniquen entre sí.
         A menudo se utilizan varios puntos de acceso para cubrir un
         área determinada como una casa, una oficina u otro tipo de
         localización delimitada.</p><p>Los puntos de acceso poseen típicamente varias
          conexiones de red: la tarjeta <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> y una o
          más tarjetas Ethernet que se utilizan para comunicarse con
          el resto de la red.</p><p>Los puntos de acceso se pueden comprar como tales
          pero también se puede configurar un sistema FreeBSD para
          crear nuestro propio punto de acceso <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>
	  utilizando un determinado tipo de tarjetas <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>
          que poseen tales capacidades de configuración.
          Existe una gran cantidad de fabricantes de hardware que distribuyen
	  puntos de acceso y tarjetas de red <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>, aunque
	  las capacidades de unos y otras varín.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80154320"></a>29.3.3.2. Construcción de un punto de acceso basado en
          FreeBSD</h4></div></div></div><a id="idp80155216" class="indexterm"></a><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80156240"></a>29.3.3.2.1. Requisitos</h5></div></div></div><p>Para crear nuestro propio punto de acceso con FreeBSD
            debemos utilizar un determinado tipo de tarjeta
            <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>.   Por el momento, sólo las tarjetas
	    con el chip Prism nos permiten hacer un punto de acceso.
            También vamos a necesitar una tarjeta para red cableada que
	    sea soportada por el sistema (esto no es muy complicado dada la
	    ingente cantidad de dispositivos de este tipo que funcionan en
	    FreeBSD).  Para este ejemplo vamos a suponer que queremos puentear
            (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a>) todo el tráfico entre la red cableada y la
	    red inalámbrica.</p><p>El uso como punto de acceso <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>
            (también denominado <span class="emphasis"><em>hostap</em></span>)
            funciona mejor con determinadas versiones del <span class="quote">&#8220;<span class="quote">
	    firmware</span>&#8221;</span>.  Las tarjetas con chip Prism2 deben disponer de
	    la versión 1.3.4 (o superior) del <span class="quote">&#8220;<span class="quote">
	    firmware</span>&#8221;</span>.  Los chips Prism2.5 y Prism3 deben disponer de
	    la versión 1.4.9 o superior del <span class="quote">&#8220;<span class="quote">firmware</span>&#8221;</span>.
            Las versiones más antíguas de estos <span class="quote">&#8220;<span class="quote">
	    firmwares</span>&#8221;</span> pueden no funcionar correctamente.  A día
            de hoy la única forma de actualizar el <span class="quote">&#8220;<span class="quote">
	    firmware</span>&#8221;</span> de las tarjetas es usando las herramientas que
	    proporciona el fabricante para <span class="trademark">Windows</span>®.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80162128"></a>29.3.3.2.2. Puesta en marcha del sistema</h5></div></div></div><p>Primero debemos asegurarnos de que el sistema reconoce
            la tarjeta <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
wi0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet6 fe80::202:2dff:fe2d:c938%wi0 prefixlen 64 scopeid 0x7
        inet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255
        ether 00:09:2d:2d:c9:50
        media: IEEE 802.11 Wireless Ethernet autoselect (DS/2Mbps)
        status: no carrier
        ssid ""
        stationname "nodo Wireless FreeBSD"
        channel 10 authmode OPEN powersavemode OFF powersavesleep 100
        wepmode OFF weptxkey 1</pre><p>No se preocupe si no entiende algo de la configuración
            anterior, lo importante es asegurarse de que el sistema muestra
            algo parecido, lo cual nosindicará que la tarjeta
            <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> ha sido correctamente reconocida por
	    FreeBSD.  Si el interfaz inalámbrico no es reconocido
	    correctamente y se está utilizando una tarjeta PC Card
            consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pccardc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pccardc</span>(8)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pccardd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pccardd</span>(8)</span></a>, en las que
	    tiene mucha información al respecto.</p><p>A continuación, para que podamos disponer de
            un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> deberá cargar el módulo
            del kernel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a> por el sencillo procedimiento de
	    ejecutar la siguiente orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload bridge</code></strong></pre><p>No debería aparecer mensaje de error alguno al ejecutar
	    dicha orden. Si apareciera alguno quizás deba compilar
	    el kernel del sistema con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a> incluído.  La
            sección  <a class="link" href="#network-bridging" title="29.5. Puenteado">Bridging</a> de éste
            manual incluye información abundante para llevar a buen
	    puerto esa tarea.</p><p>Una vez que tenemos el soporte de <span class="quote">&#8220;<span class="quote">bridging</span>&#8221;</span>
	    cargado debemos indicar a FreeBSD qué interfaces se desean
	    puentear.  Para ello emplearemos <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge_cfg="wi0,xl0"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding=1</code></strong></pre><p>En FreeBSD 5.2-RELEASE y posteriores se deben emplear las
          siguientes opciones en lugar de las anteriormente expuestas:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge.enable=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge.config="wi0,xl0"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding=1</code></strong></pre><p>Ahora es el momento de configurar la tarjeta de red
           inalámbrica.   La siguiente orden convierte la tarjeta en
	   un punto de acceso:</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 ssid mi_red channel 11 media DS/11Mbps mediaopt hostap up stationname "PA FreeBSD"</code></strong>
         </pre><p>La línea de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> levanta el interfaz
	   <code class="filename">wi0</code>, configura el SSID con el valor de
	   <em class="replaceable"><code>mi_red</code></em> y también  el nombre
           de la estación como
	   <em class="replaceable"><code>FreeBSD</code></em>.  La opción
           <code class="option">media DS/11Mbps</code> configura la tarjeta a 11Mbps.
	   Ésto es necesario para que cualquier valor que se necesite
	   asignar a <code class="option">mediaopt</code> surta efecto.
	   La opción <code class="option">mediaopt hostap</code> sitúa el
           interfaz en modo punto de acceso.  La opción <code class="option">
	   channel 11</code> configura la tarjeta para que use el canal de
	   radio número 11.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a> encontraráa
	   rangos de canales válidos para varios dominios
	   regulatorios.  Por favor, tenga en cuenta que no todos los canales
	   son legales en todos los países.</p><p>Despues de esto deberíamos disponer de un punto de
            acceso completamente funcional y en ejecución.
            Le animamos a consultar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> y
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a> para máss información.</p><p>También le recomemdamos leer la sección sobre
            cifrado que econtrará más adelante.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80220496"></a>29.3.3.2.3. Información de estado</h5></div></div></div><p>Una vez que el punto de acceso estáconfigurado
            resulta interesante poder obtener información acerca de los
            clientes que estén asociados.  La persona encargada de la
	    administración del punto de acceso puede ejecutar cuando
	    estime oportuno lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>wicontrol -l</code></strong>
1 station:
00:09:b7:7b:9d:16  asid=04c0, flags=3&lt;ASSOC,AUTH&gt;, caps=1&lt;ESS&gt;, rates=f&lt;1M,2M,5.5M,11M&gt;, sig=38/15
</pre><p>Lo que aquí se muestra indica que hay una única
           estación asociada y nos suministra sus parámetros.
           Los valores de señal que se muestran se deben tomar
           sólo como indicaciones aproximadas de la fuerza de dicha
           señal.  Su traducción a dBm u otras unidades
	   varía según la versión del <span class="quote">&#8220;<span class="quote">
	   firmware</span>&#8221;</span> de la tarjeta que se use.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80223696"></a>29.3.3.3. Clientes</h4></div></div></div><p>Un cliente <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> es un sistema que se comunica
          con un punto de acceso o directamente con otro cliente
          <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span>.</p><p>Generalmente los clientes <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> sólo
          poseen un dispositivo de red: la tarjeta de red
          inalámbrica.</p><p>Existen varias formas de configurar un cliente <span class="quote">&#8220;<span class="quote">
          wireless</span>&#8221;</span> basadas en los distintos modos
          inalámbricos, normalmente reducidos a BSS (o modo
	  infraestructura, que requiere de un punto de acceso) y el
          modo IBSS (modo ad-hoc, o modo punto a punto).  En nuestro ejemplo
	  usaremos el más famoso de ambos, el BSS, para comunicarnos
	  con un punto de acceso.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80227024"></a>29.3.3.3.1. Requisitos</h5></div></div></div><p>Sólamente existe un requisito real para configurar
          un sistema FreeBSD como cliente inalámbrico: usar una
          tarjeta de red inalámbrica soportada por el sistema.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80228176"></a>29.3.3.3.2. Ejecución de un cliente inalámbrico FreeBSD</h5></div></div></div><p>Para utilizar una red inalámbrica se necesitan
            conocer algunos conceptos básicos de redes
            de redes wireless.  En nuestro ejemplo queremos conectarnos a la
            red inalámbrica <em class="replaceable"><code>mi_red</code></em> y queremos
	    hacerlo con el soporte de cifrado desactivado.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En este ejemplo no se utiliza cifrado,
              lo cual resulta ser bastante peligroso.  En la próxima
              sección aprenderemos cómo activar el sistema de
              cifrado común el los dispositivos
              inalámbricos, por qué resulta importante hacerlo
              y por qué algunas tecnologías de cifrado no son
	      suficientes para protegernos completamente.</p></div><p>Asegúrese de que FreeBSD reconoce su tarjeta de
            red inalámbrica:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
wi0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet6 fe80::202:2dff:fe2d:c938%wi0 prefixlen 64 scopeid 0x7
        inet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255
        ether 00:09:2d:2d:c9:50
        media: IEEE 802.11 Wireless Ethernet autoselect (DS/2Mbps)
        status: no carrier
        ssid ""
        stationname "FreeBSD Wireless node"
        channel 10 authmode OPEN powersavemode OFF powersavesleep 100
        wepmode OFF weptxkey 1</pre><p>A continuación debemos especificar los
            parámetros correctos para nuestra red:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet 192.168.0.20 netmask 255.255.255.0 ssid mi_red</code></strong></pre><p>Sustituya <code class="systemitem">192.168.0.20</code> y
         <code class="systemitem">255.255.255.0</code> con una
         dirección IP y máscara de red que se
         adecúen con el espacio de direccionamiento de la red cableada.
         Recordemos que nuestro punto de acceso está puenteando la red
         inalámbrica y la red de cable, de modo que para el resto de
	 dispositivos de la red el cliente inalábrico se muestra como
	 un elemento más de la red cableada.</p><p>Llegados a este punto deberíamos poder hacer ping a las
         máquinas de la red cableada como si estuviéramos
	 compartiendo el mismo enlace físico cableado.</p><p>Si se presentan problemas con la conexión
            inalámbrica se puede comprobar si la tarjeta <span class="quote">&#8220;<span class="quote">
            wireless</span>&#8221;</span> se encuentra correctamente asociada (conectada)
            con el punto de acceso:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0</code></strong></pre><p>ebería devolver algún tipo de información
         entre la que deberíamos observar la siguiente
         línea:</p><pre class="screen">status: associated</pre><p>Si no aparece la palabra <code class="literal">associated</code> puede ser
         que nos encontremos fuera de la cobertura proporcionada por el punto
         de acceso o puede ser que necesitemos activar el cifrado, aunque
         éstos no son los únicos problemas con los que nos
	 podemos encontrar.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80246480"></a>29.3.3.4. Cifrado</h4></div></div></div><a id="idp80247120" class="indexterm"></a><p>El cifrado, también llamado codificación, de una
        red inalámbrica es un proceso importante porque, a diferencia
        de lo que ocurre con las redes cableadas convencionales, las redes
        inalámbricas no se pueden restringir a un espacio
        físico determinado.  Los datos que viajan a través de
        ondas de radio se difunden a través de las paredes y alcanzan
        a los vecinos más cercanos.  Aquí es donde entra en
        en juego el sistema de cifrado.  El cifrado se emplea para evitar que
        cualquiera pueda examinar los datos enviados a través del
	aire.</p><p>Los dos métodos más comunes para realizar el cifrado
       de datos entre el cliente y el punto de acceso son WEP e
       <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80249808"></a>29.3.3.4.1. WEP</h5></div></div></div><a id="idp80250448" class="indexterm"></a><p>WEP son las siglas de Wired Equivalency Protocol.  WEP es un
        un intento de crear redes inalámbricas al menos tan seguras
        omo las redes cableadas o al menos de seguridad equivalente a dichas
        redes. Por desgracia el sistema WEP es débil y resulta
        bastante sencillo de romper. Esto significa que cuando se transmite
        información de carácter crítico no se debe
        confiar únicamente en este sistema de cifrado.</p><p>No obstante es mejor que no utilizar nada; puede activar WEP en el
        sistema que hace de punto de acceso mediante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet up ssid
              mi_red wepmode on wepkey
              0x1234567890 media DS/11Mbps
              mediaopt hostap</code></strong></pre><p>y en un cliente inalámbrico mediante la siguiente
        orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet 192.168.0.20 netmask 255.255.255.0 ssid mi_red wepmode on wepkey 0x1234567890</code></strong></pre><p>Por favor, tenga un poco de sentido común y reemplace la
        clave <em class="replaceable"><code>0x1234567890</code></em> por otra clave
            menos obvia.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80255056"></a>29.3.3.4.2. IPsec</h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> es una herramienta más robusta y potente para
       cifrar datos que se mueven a través de una red. Es el
       mecanismo más conveniente para asegurar los datos de una red
       inalámbrica.  Tiene más información sobre el
       protocolo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> y cómo utilizarlo en la sección
       <a class="link" href="#ipsec" title="14.10. VPN sobre IPsec">IPsec</a> de este manual.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80258256"></a>29.3.3.5. Herramientas</h4></div></div></div><p>No hay muchas herramientas disponibles si se quiere depurar y
      monitorizar redes inalámbricas pero en el siguiente apartado
      mostraremos cómo utilizar algunas de ellas.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80259280"></a>29.3.3.5.1. El paquete <span class="application">bsd-airtools</span></h5></div></div></div><p>El paquete <span class="application">bsd-airtools</span> es un
      conjunto muy completo de herramientas <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> que se
      pueden utilizar para multitud de tareas, entre las cuales podemos citar
      citar el desciframiento de claves WEP, detección de puntos de
      de acceso, monitorización de la señal de radio, etc.</p><p>El paquete <span class="application">bsd-airtools</span> se puede instalar
      como <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> desde <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/&#10;      net/bsd-airtools/pkg-descr">
      net/bsd-airtools</a>.  La información relacionada con los
      <span class="quote">&#8220;<span class="quote">ports</span>&#8221;</span> puede encontrarse en la sección
      <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a> de este
      manual.</p><p>El programa <code class="command">dstumbler</code> es una herramienta que
      permite descubrir puntos de acceso y entre otras cosas muestra de forma
      gráfica la relación señal / ruido del enlace.
      Si se experimentan problemas para acceder a un determinado punto de
      acceso <code class="command">dstumbler</code> puede ser muy útil.</p><p>Para probar la seguridad de la red inalámbrica se puede usar
      <span class="quote">&#8220;<span class="quote">dweputils</span>&#8221;</span>, concretamente las órdenes <code class="command">
      dwepcrack</code>, <code class="command">dwepdump</code> y <code class="command">
      dwepkeygen</code>.  Estas órdenes permiten determinar hasta
      qué punto la seguridad que ofrece WEP es suficiente para nuestras
      necesidades.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80275152"></a>29.3.3.5.2. Las utilidades <code class="command">wicontrol</code>,
            <code class="command">ancontrol</code> y
            <code class="command">raycontrol</code></h5></div></div></div><p>Mediante estas herramientas se puede controlar el comportamiento de
      la tarjeta de red inalámbrica.  En los ejemplos anteriores se
      ha utilizado <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a> debido a que la tarjeta de red del
      ejemplo utiliza el interfaz <code class="filename">wi0</code>.  Si se
      posée una tarjeta <span class="quote">&#8220;<span class="quote">wireless</span>&#8221;</span> de Cisco dicha tarjeta
      se mostrará en el sistema mediante el interfaz <code class="filename">
      an0</code> y por lo tanto la orden equivalente que se debe usar
      será <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ancontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ancontrol</span>(8)</span></a>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80284240"></a>29.3.3.5.3. <code class="command">ifconfig</code></h5></div></div></div><a id="idp80285008" class="indexterm"></a><p>Con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> se puede utilizar unas cuantas de las opciones
      que se pueden usar con <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>, pero no obstante no
      posée todas las funcionalidades que proporciona
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>.  Se recomienda leer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> para conocer los
      detalles de los parámetros y opciones que admite.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80289232"></a>29.3.3.6. Tarjetas de Red inalámbricas soportadas</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80289872"></a>29.3.3.6.1. Puntos de acceso</h5></div></div></div><p>Las únicas tarjetas que soportan el modo de funcionamiento
      funcionamiento BSS (pueden funcionar como puntos de acceso) son los
      dispositivos basados en el chip Prism 2, 2.5 ó 3. Consulte
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a> para ver una lista completa de ellos.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80296016"></a>29.3.3.6.2. Clientes</h5></div></div></div><p>FreeBSD soporta casi todas las tarjetas inalámbricas 802.11b
      802.11b que se encuentran actualmente en el mercado.  La
      mayoría de las tarjetas basadas en los chips Prism, Spectrum24,
      Spectrum24, Hermes, Aironet y Raylink tambíen funcionan en modo
      IBSS (modos ad-hoc, punto a punto y BSS).</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-bluetooth"></a>29.4. Bluetooth</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Pav</span> <span class="surname">Lucistnik</span></span>. </span></div></div></div><a id="idp80300880" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80301392"></a>29.4.1. Introducción</h3></div></div></div><p>Bluetooth es una tecnología inalámbrica que opera en
        banda de 2.4 GHz (donde no se necesita licencia).  Se trata de una
        tecnología pensada para la creación de redes de
        ámbito personal (de cobertura reducida, normalmente de unos 10
        metros).  Las redes se suelen construir en modo <span class="quote">&#8220;<span class="quote">ad-hoc</span>&#8221;</span>
        utilizando dispositivos heterogéneos como teléfonos
        móviles, dispositivos manuales (<span class="quote">&#8220;<span class="quote">handhelds</span>&#8221;</span>) y
	computadoras portátiles.  A diferencia de otras
        tecnologías inalámbricas como Wi-Fi, Bluetooth ofrece
        perfiles de servicio más detallados; por ejemplo un perfil para
        actuar como un servidor de ficheros basado en FTP, para la
        difusión de ficheros (<span class="quote">&#8220;<span class="quote">file pushing</span>&#8221;</span>), para el
        transporte de voz, para la emulación de línea serie y
        muchos más.</p><p>La pila de Bluetooth en FreeBSD se implementa utilizando el entorno
        de Netgraph (véase <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgraph&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">netgraph</span>(4)</span></a>). La mayoría de los
        dispositivos USB Bluetooth se pueden utilizar mediante el controlador
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_ubt</span>(4)</span></a>. Los dispositivos Bluetooth basados en el chip Broadcom
        BCM2033 están soportados mediante los controladores
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ubtbcmfw&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ubtbcmfw</span>(4)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_bt3c&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_bt3c</span>(4)</span></a>.  Los dispositivos Bluetooth
        basados en la interfaz serie o de Rayos Infrarrojos (UART) se
	controlan mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_h4&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_h4</span>(4)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcseriald&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcseriald</span>(8)</span></a>.
        Este capítulo describe el uso de dispositivos Bluetooth USB.
        El soporte para Bluetooth se encuentra en las versiones de FreeBSD 5.0 y
        posteriores.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80309712"></a>29.4.2. Instalación del dispositivo</h3></div></div></div><p>Por defecto los controladores de los dispositivos Bluetooth se
        encuentran disponibles como módulos del kernel.  Antes de
        enchufar el dispositivo Bluetooth se debe cargar el módulo
        correspondiente dentro del núcleo.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ng_ubt</code></strong></pre><p>Si el dispositivo Bluetooth se encuentra conectado cuando el
        sistema arranca se debe cargar el módulo modificando a tal
	efecto el fichero <code class="filename">/boot/loader.conf</code>.</p><pre class="programlisting">ng_ubt_load="YES"</pre><p>Al conectar el dispositivo Bluetooth aparecerá en la
        consola (o en syslog) la siguiente información:</p><pre class="screen">ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2
ubt0: Interface 0 endpoints: interrupt=0x81, bulk-in=0x82, bulk-out=0x2
ubt0: Interface 1 (alt.config 5) endpoints: isoc-in=0x83, isoc-out=0x3,
      wMaxPacketSize=49, nframes=6, buffer size=294</pre><p>Se debe copiar
        <code class="filename">/usr/share/examples/netgraph/bluetooth/rc.bluetooth</code>
        a algún lugar más conveniente, por ejemplo
        <code class="filename">/etc/rc.bluetooth</code>.  Este script se usa para
        ejecutar y detener la pila Bluetooth del sistema.  Se suele recomendar
	quitar la pila antes de desenchufar el dispositivo pero si no se hace
	no debería producirse ningún desastre.  Cuando se
	arranca la pila aparece un mensaje similar a este:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.bluetooth start ubt0</code></strong>
BD_ADDR: 00:02:72:00:d4:1a
Features: 0xff 0xff 0xf 00 00 00 00 00
&lt;3-Slot&gt; &lt;5-Slot&gt; &lt;Encryption&gt; &lt;Slot offset&gt;
&lt;Timing accuracy&gt; &lt;Switch&gt; &lt;Hold mode&gt; &lt;Sniff mode&gt;
&lt;Park mode&gt; &lt;RSSI&gt; &lt;Channel quality&gt; &lt;SCO link&gt;
&lt;HV2 packets&gt; &lt;HV3 packets&gt; &lt;u-law log&gt; &lt;A-law log&gt; &lt;CVSD&gt;
&lt;Paging scheme&gt; &lt;Power control&gt; &lt;Transparent SCO data&gt;
Max. ACL packet size: 192 bytes
Number of ACL packets: 8
Max. SCO packet size: 64 bytes
Number of SCO packets: 8</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80320208"></a>29.4.3. Interfaz de la controladora de la máquina (HCI)</h3></div></div></div><a id="idp80320848" class="indexterm"></a><p>La interfaz de la Controladora de la Máquina (Host
        Controller Interface) proporciona una interfaz de órdenes
        para la controladora de banda base y para el gestor de enlace,
        y permite acceder al estado del hardware y a los
        registros de control.  Esta interfaz proporciona una capa de
        acceso homogénea para todos los dispositivos Bluetooth
        de banda base. La capa HCI de la máquina intercambia
        órdenes y datos con el firmware del HCI presente en el
        dispositivo Bluetooth. El driver de la capa de transporte de
        la controladora de la máquina
        (es decir, el driver del bus físico) proporciona
        ambas capas de HCI la posibilidad de intercambiar
        información entre ellas.</p><p>Se crea un nodo Netgraph de tipo <span class="emphasis"><em>HCI</em></span>
        para cada dispositivo Bluetooth.  El nodo Netgraph HCI
        se conecta normalmente con el nodo que representa el
        controlador del dispositivo Bluetooth de la máquina
        (sentido de bajada) y con el nodo Netgraph L2CAP en el sentido
        de subida. Todas las operaciones HCI se realizan sobre el
        nodo Netgraph HCI y no  sobre el el nodo que representa al
        dispositivo. El nombre por defecto para el nodo HCI es
        <span class="quote">&#8220;<span class="quote">devicehci</span>&#8221;</span>. Para obtener más detalles,
        por favor consulte la página del manual de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_hci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_hci</span>(4)</span></a>.</p><p>Una de las tareas más importantes que se deben
        realizar es el descubrimiento automático de otros
        dispositivos Bluetooth que se encuentren dentro del radio de
        cobertura. Esta operación se denomina en inglés
        <span class="emphasis"><em>inquiry</em></span> (consulta). Esta operación
        o otras operaciones HCI relacionadas se realizan mediante
        la utilidad <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hccontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hccontrol</span>(8)</span></a>. El siguiente ejemplo muestra
        cómo descubrir dispositivos en pocos segundos.
        Tenga siempre presente que un dispositivo remoto sólo
        contesta a la consulta si se encuentra configurado en modo
        descubrimiento (<span class="emphasis"><em>discoverable mode</em></span>).</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci inquiry</code></strong>
Inquiry result, num_responses=1
Inquiry result #0
       BD_ADDR: 00:80:37:29:19:a4
       Page Scan Rep. Mode: 0x1
       Page Scan Period Mode: 00
       Page Scan Mode: 00
       Class: 52:02:04
       Clock offset: 0x78ef
Inquiry complete. Status: No error [00]</pre><p><code class="literal">BD_ADDR</code> es la dirección
        identificativa única del dispositivo Bluetooth,
        similar a las direcciones MAC de las tarjetas Ethernet. Esta
        dirección se necesita para transmitir otro tipo de
        información a otros dispositivos. Se puede asignar un nombre
        más significativo para los humanos en la variable BD_ADDR.
        El fichero <code class="filename">/etc/bluetooth/hosts</code> contiene
        información relativa a los dispositivos Bluetooth conocidos.
        El siguiente ejemplo muestra cómo obtener un nombre
        significativo para los humanos que fué asignado a un
        dispositivo remoto:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci remote_name_request 00:80:37:29:19:a4</code></strong>
BD_ADDR: 00:80:37:29:19:a4
Name: Pav's T39</pre><p>Si se realiza una consulta (inquiry) sobre el dispositivo
        Bluetooth remoto, dicho dispositivo identificará nuestro
        computador como <span class="quote">&#8220;<span class="quote">nombre.de.su.sistema
          (ubt0)</span>&#8221;</span>. El nombre asignado al dispositivo local se puede
        modificar en cualquier momento.</p><p>El sistema Bluetooth proporciona una conexión punto a punto
        (con sólo dos unidades Bluetooth involucradas) o
        también una conexión punto multipunto. En el
        último caso, la conexión se comparte entre varios
        dispositivos Bluetooth.  El siguiente ejemplo muestra como obtener una
	lista de las conexiones de banda base activas en el dispositivo
        local:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci read_connection_list</code></strong>
Remote BD_ADDR    Handle Type Mode Role Encrypt Pending Queue State
00:80:37:29:19:a4     41  ACL    0 MAST    NONE       0     0 OPEN</pre><p>Resulta útil disponer de un <span class="emphasis"><em>manejador de
          la conexión</em></span> cuando se necesita terminar la
        conexión de banda base. Es importante recalcar que normalmente
        no es necesario realizar esta terminación de forma manual.
        La pila Bluetooth puede concluír  automáticamente las
        conexiones de banda base que se encuentren inactivas.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hccontrol -n ubt0hci disconnect 41</code></strong>
Connection handle: 41
Reason: Connection terminated by local host [0x16]</pre><p>Se ruega consultar la salida de la orden
        <code class="command">hccontrol help</code> para obtener un listado completo de
        las órdenes HCI disponibles. La mayoría de
        estas órdenes no requiren privilegios de superusuario.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80337872"></a>29.4.4. Protocolo de adaptación y de control de enlace a
        nivel lógico (L2CAP)</h3></div></div></div><a id="idp80338512" class="indexterm"></a><p>El protocolo L2CAP (Logical Link Control and Adaptation
        Protocol) proporciona servicios de datos tanto orientados a
        conexión como no orientados a conexión a los protocolos
        de las capas superiores, junto con facilidades de
        multiplexación y de segmentacion y reensamblaje. L2CAP permite
        que los protocolos de capas superiores puedan transmitir y recibir
        paquetes de datos L2CAP de hasta 64 kilobytes de longitud.</p><p>L2CAP se basa en el concepto de <span class="emphasis"><em>canales</em></span>.
        Un canal es una conexión lógica que se sitúa
        sobre la conexión de banda base.  Cada canal se asocia a un
        único protocolo.  Cada paquete L2CAP que se recibe a un canal
        se redirige al protocolo superior correspondiente.  Varios canales
        pueden operar sobre la misma conexión de banda base, pero un
        canal no puede tener asociados más de un protocolo de alto
        nivel.</p><p>Para cada dispositivo Bluetooth se cre un único nodo
        Netgraph de tipo <span class="emphasis"><em>l2cap</em></span>.  El nodo L2CAP se conecta
        normalmente conectado al nodo Netgraph HCI (hacia abajo) y con nodos
        Bluetooth tipo <span class="quote">&#8220;<span class="quote">sockets</span>&#8221;</span> hacia arriba. El nombre por
	defecto para el nodo Netgraph L2CAP es <span class="quote">&#8220;<span class="quote">devicel2cap</span>&#8221;</span>.
        Para obtener más detalles se ruega consultar la página
        del manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_l2cap&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_l2cap</span>(4)</span></a>.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2ping</span>(8)</span></a> le será muy útil para
        hacer ping a otros dispositivos.  Algunas
        implementaciones de Bluetooth no devuelven todos los datos que se
        envían, de tal forma que el valor <span class="emphasis"><em>0 bytes</em></span>
        que se observa a continuación es normal:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>l2ping -a 00:80:37:29:19:a4</code></strong>
0 bytes from 0:80:37:29:19:a4 seq_no=0 time=48.633 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=1 time=37.551 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=2 time=28.324 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=3 time=46.150 ms result=0</pre><p>La herramienta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2control&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2control</span>(8)</span></a> se utiliza para realizar
        varias operaciones sobre los nodos L2CAP.  Este ejemplo muestra
        cómo obtener la lista de conexiones lógicas (canales) y
	la lista de conexiones de banda base (física) que mantiene el
        dispositivo local:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>l2control -a 00:02:72:00:d4:1a read_channel_list</code></strong>
L2CAP channels:
Remote BD_ADDR     SCID/ DCID   PSM  IMTU/ OMTU State
00:07:e0:00:0b:ca    66/   64     3   132/  672 OPEN
<code class="prompt">%</code> <strong class="userinput"><code>l2control -a 00:02:72:00:d4:1a read_connection_list</code></strong>
L2CAP connections:
Remote BD_ADDR    Handle Flags Pending State
00:07:e0:00:0b:ca     41 O           0 OPEN</pre><p>Otra herramienta de diagnóstico interesante es
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=btsockstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">btsockstat</span>(1)</span></a>.  Realiza un trabajo similar a la orden
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">netstat</span>(1)</span></a>, pero en este caso para las estructuras de datos
        relacionadas con el sistema Bluetooth. A continuación se
	muestra la información relativa a la misma conexión
        lógica del ejemplo anterior.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>btsockstat</code></strong>
Active L2CAP sockets
PCB      Recv-Q Send-Q Local address/PSM       Foreign address   CID   State
c2afe900      0      0 00:02:72:00:d4:1a/3     00:07:e0:00:0b:ca 66    OPEN
Active RFCOMM sessions
L2PCB    PCB      Flag MTU   Out-Q DLCs State
c2afe900 c2b53380 1    127   0     Yes  OPEN
Active RFCOMM sockets
PCB      Recv-Q Send-Q Local address     Foreign address   Chan DLCI State
c2e8bc80      0    250 00:02:72:00:d4:1a 00:07:e0:00:0b:ca 3    6    OPEN</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80355408"></a>29.4.5. Protocolo RFCOMM </h3></div></div></div><a id="idp80356176" class="indexterm"></a><p>El protocolo RFCOMM proporciona emulación de puertos serie
        a través del protocolo L2CAP. Este protocolo se basa en el
        estándar de la ETSI denominado TS 07.10. RFCOMM es un
        protoclo de transporte sencillo, con soporte para hasta 9 puertos
        serie RS-232 (EIATIA-232-E).  El protocolo RFCOMM permite hasta 60
        conexiones simultaneas (canales RFCOMM) entre dos dispositivos
        Bluetooth.</p><p>Para los propósitos de RFCOMM, un camino de
        comunicación involucra siempre a dos aplicaciones que se
        ejecutan en dos dispositivos distintos (los extremos de la
        comunicación). Entre ellos existe un segmento que los
        comunica.  RFCOMM pretende cubrir aquellas aplicaciones que utilizan
        los puertos serie de las máquinas donde se ejecutan. El
        segmento de comunicación es un enlace Bluetooth desde un
        dispositivo al otro (conexión directa).</p><p>RFCOMM trata únicamente con la conexión de
        dispositivos directamente, y también con conexiones entre el
        dispositivo y el modem para realizar conexiones de red. RFCOMM puede
        soportar otras configuraciones, tales como módulos que
        se comunican via Bluetooth por un lado y que proporcionan una interfaz
        de red cableada por el otro.</p><p>En FreeBSD el protocolo RFCOMM se implementa utilizando la
        capa de <span class="quote">&#8220;<span class="quote">sockets</span>&#8221;</span> de Bluetooth.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80358736"></a>29.4.6. Enparejamiento de dispositivos</h3></div></div></div><a id="idp80359376" class="indexterm"></a><p>Por defecto, la comunicación Bluetooth no se valida, por lo
        que cualquier dispositivo puede en principio hablar con cualquier
        otro. Un dispositivo Bluetooth (por ejemplo un teléfono
        celular) puede solicitar autenticación para realizar un
        determinado servicio (por ejemplo para el servicio de
        marcación por modem).  La autenticación de Bluetooth
        normalmente se realiza utilizando <span class="emphasis"><em>códigos
          PIN</em></span>.  Un código PIN es una cadena ASCII de hasta
        16 caracteres de longitud.  Los usuarios deben introducir
        el mismo código PIN en ambos dispositivos. Una vez que el
        usuario ha introducido el PIN adecuado ambos dispositivos generan una
        <span class="emphasis"><em>clave de enlace</em></span>. Una vez generada, la clave se
        puede almacenar en el propio dispositivo o en un dispositivo de
        almacenamiento externo.  La siguiente vez que se comuniquen ambos
        dispositivos se reutilizará la misma clave. El procedimiento
        descrito hasta este punto se denomina
        <span class="emphasis"><em>emparejamiento (pairing)</em></span>. Es importante recordar
        que si la clave de enlace se pierde en alguno de los dispositivos
        involucrados se debe volver a ejecutar el procedimiento de
        emparejamiento.</p><p>El dæmon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcsecd</span>(8)</span></a> se encarga de gestionar todas las
        peticiones de autenticación Bluetooth. El archivo de
        configuración predeterminado se denomina
        <code class="filename">/etc/bluetooth/hcsecd.conf</code>. A
        continuación se muestra una sección de ejemplo de un
        teléfono celular con el código PIN arbitrariamente
        fijado al valor <span class="quote">&#8220;<span class="quote">1234</span>&#8221;</span>:
       </p><pre class="programlisting">device {
        bdaddr  00:80:37:29:19:a4;
        name    "Pav's T39";
        key     nokey;
        pin     "1234";
      }</pre><p>No existe ninguna limitación en los códigos PIN a
        excepción de su longitud.  Algunos dispositivos (por ejemplo
        los dispositivos de mano Bluetooth) pueden obligar a escribir un
        número predeterminado de caracteres para el código
        PIN.  La opción <code class="option">-d</code> fuerza al dæmon
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcsecd</span>(8)</span></a> a permanecer ejecutádose en primer plano,
        de tal forma que se puede observar fácilmente lo que ocurre.  Si
	se configura el dispositivo Bluetooth remoto para aceptar el
        procedimiento de emparejamiento y se inicia la conexión con
        dicho dispositivo, el dispositivo remoto debería decir que el
        procedimiento de emparejamiento se ha aceptado y debería
	solicitar el código PIN.  Si se introduce el mismo
        código PIN que se escribió en su momento en el fichero
        <code class="filename">hcsecd.conf</code> el procedimiento de emparejamiento y
        de generación de la clave de enlace debería terminar
        satisfactoriamente.  Por otra parte el procedimiento de emparejamiento
        se puede iniciar en el dispositivo remoto. A continuación
        se muestra un ejemplo de la salida del dæmon
        <code class="command">hcsecd</code>.</p><pre class="programlisting">hcsecd[16484]: Got Link_Key_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', link key doesn't exist
hcsecd[16484]: Sending Link_Key_Negative_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Got PIN_Code_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', PIN code exists
hcsecd[16484]: Sending PIN_Code_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80370896"></a>29.4.7. Protocolo de descubrimiento de servicios (SDP)</h3></div></div></div><a id="idp80371536" class="indexterm"></a><p>El Protocolo de Descubrimiento de Servicios (Service
        Discovery Protocol o SDP) permite a las aplicaciones
        cliente descubrir la existencia de diversos servicios
        proporcionados por uno o varios servidores de aplicaciones,
        junto con los atributos y propiedades de los servicios que se
        ofrecen. Estos atributos de servicio incluyen
        el tipo o clase de servicio ofrecido y el mecanismo o la
        información necesaria para utilizar dichos servicios.</p><p>SDP se basa en una determinada comunicación entre
        un servidor SDP y un cliente SDP.  El servidor mantiene una lista de
        registros de servicios, los cuales describen las
        características de los servicios ofrecidos.  Cada registro
        contiene información sobre un determinado servicio.  Un cliente
        puede recuperar la información de un registro de servicio
        almacenado en un servidor SDP lanzando una petición SDP.  Si el
        cliente o la aplicación asociada con el cliente decide utilizar
	un determinado servicio, debe establecer una conexión
        independiente con el servicio en cuestión.  SDP proporciona un
        mecanismo para el descubrimiento de servicios y sus atributos
	asociados, pero no proporciona ningún mecanismo ni protocolo
        para utilizar dichos servicios.</p><p>Normalmente, un cliente SDP realiza una búsqueda de
        servicios acotada por determinadas características. No obstante
        hay momentos en los que resulta deseable descubrir todos los
        servicios ofrecidos por un servidor SDP sin que pueda existir
        ningún conocimiento previo sobre los registros que pueda
        contener. Este proceso de búsqueda de cualquier servicio
        ofrecido se denomina <span class="emphasis"><em>navegación</em></span> o
	<span class="emphasis"><em>browsing</em></span>.</p><p>El servidor Bluetooth SDP denominado <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a> y el cliente de
        línea de órdenes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpcontrol</span>(8)</span></a> se incluyen en
        la instalación estándar de FreeBSD.  El siguiente ejemplo
        muestra cómo realizar una consulta de navegación
        una consulta de navegación SDP.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sdpcontrol -a 00:01:03:fc:6e:ec browse</code></strong>
Record Handle: 00000000
Service Class ID List:
        Service Discovery Server (0x1000)
Protocol Descriptor List:
        L2CAP (0x0100)
                Protocol specific parameter #1: u/int/uuid16 1
                Protocol specific parameter #2: u/int/uuid16 1

Record Handle: 0x00000001
Service Class ID List:
        Browse Group Descriptor (0x1001)

Record Handle: 0x00000002
Service Class ID List:
        LAN Access Using PPP (0x1102)
Protocol Descriptor List:
        L2CAP (0x0100)
        RFCOMM (0x0003)
                Protocol specific parameter #1: u/int8/bool 1
Bluetooth Profile Descriptor List:
        LAN Access Using PPP (0x1102) ver. 1.0
</pre><p>... y así sucesivamente. Resulta importante resaltar una
        vez más que cada servicio posee una lista de atributos (por
        ejemplo en el canal RFCOMM). Dependiendo de los servicios que se
        quieran utilizar puede resultar necesario anotar algunos de los
        atributos. Algunas implementaciones de Bluetooth no soportan
        navegación de servicios y pueden devolver una lista
        vacía. En este caso se puede intentar buscar algún
        servicio determinado. El ejemplo siguiente muestra cómo buscar
        el servicio OBEX Object Push (OPUSH):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sdpcontrol -a 00:01:03:fc:6e:ec search OPUSH</code></strong></pre><p>En FreeBSD los servicios a clientes Bluetooth se suministran mediante
        el servidor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdpd</code></strong></pre><p>La aplicación local servidora que quiere proporcionar
        servicio Bluetooth a los clientes remotos puede registrar su servicio
	con el dæmon SDP local.  Un ejemplo de dicha aplicación
        Un ejemplo de dicha aplicación lo constituye el dæmon
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>.
        Una vez ejecutado el dæmon registra un servicio LAN de Bluetooth
        en el dæmon SDP local.</p><p>Se puede obtener la lista de servicios registrados con el servidor
        SDP local lanzando una consulta de navegación SDP utilizando
        el canal de control local.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdpcontrol -l browse</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80387024"></a>29.4.8. Acceso telefónico a redes (DUN) y acceso a redes mediante
        perfiles PPP (LAN)</h3></div></div></div><p>El perfil de Acceso Telefónico a Redes (Dial-Up Networking
        o DUN) se utiliza mayoritariamente con modems y teléfonos
        celulares. Los escenarios cubiertos por este perfil se describen a
        continuación:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Utilización de un teléfono celular o un
            modem por una computadora para simular un modem sin cables
            que se conecte a un servidor de acceso telefónico a redes o
            para otros servicios de acceso telefónico relacionados;
          </p></li><li class="listitem"><p>Utilización de un teléfono celular o un
            modem por un computador para recibir llamadas de datos.
            </p></li></ul></div><p>El Acceso a Redes con perfiles PPP (LAN) se puede utilizar en las
        siguientes situaciones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Acceso LAN para un único dispositivo Bluetooth;
           </p></li><li class="listitem"><p>Acceso LAN para múltiples dispositivos
            Bluetooth;
          </p></li><li class="listitem"><p>Conexión de PC a PC (utilizando
            emulación de PPP sobre una línea serie).
          </p></li></ul></div><p>En FreeBSD ambos perfiles se implementan bajo las órdenes
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>, un encapsulador que convierte la
        conexión RFCOMM de Bluetooth en algo que puede ser utilizado
        por PPP.  Antes de que se puedan utilizar los perfiles se debe
        definir una nueva etiqueta PPP en el fichero de configuración
        <code class="filename">/etc/ppp/ppp.conf</code>.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>
        para ver algunos ejemplos.</p><p>En el siguiente ejemplo se va a utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> para
        abrir una conexión RFCOMM con un dispositivo remoto con
        BD_ADDR 00:80:37:29:19:a4 sobre un canal RFCOMM basado en DUN (Dial-Up
        Networking).  El número de canal RFCOMM se obtiene a partir del
        dispositivo remoto a través de SDP.  Es posible especificar el
        canal RFCOMM a mano, en cuyo caso <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> no
        realizará ninguna consulta SDP.  Se puede utilizar la orden
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpcontrol</span>(8)</span></a> para descubrir el canal RFCOMM utilizado en el
        dispositivo remoto.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_pppd -a 00:80:37:29:19:a4 -c -C dun -l rfcomm-dialup</code></strong></pre><p>Para proporcionar el servicio de Acceso a Redes a través de
        PPP (LAN) se debe ejecutar el servidor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a>.  Se debe crear
        una nueva entrada en <code class="filename">/etc/ppp/ppp.conf</code>.  Le
        rogamos que consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> y observe los ejemplos que
        se facilitan. Por último se debe ejecutar el servidor PPP
        RFCOMM sobre un número de canal RFCOMM adecuado.  El servidor
        PPP RFCOMM registrará automáticamente el servicio LAN
        de Bluetooth con el servidor SDP local.  El ejemplo que se muestra a
        continuación describe cómo ejecutar el servidor PPP
        RFCOMM.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_pppd -s -C 7 -l rfcomm-server</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80402128"></a>29.4.9. Perfil OBEX Object Push (OPUSH)</h3></div></div></div><a id="idp80402768" class="indexterm"></a><p>OBEX es un protocolo muy utilizado para transferencias de ficheros
        sencillas entre dispositivos móviles.  Su uso más
        importante se produce en comuncaciones por infrarrojos, donde se
        utiliza para transferencia de ficheros genéricos entre
        portátiles o dispositivos Palm y para enviar tarjetas de visita
        o entradas de la agenda entre teléfonos celulares y otros
        dispositivos con aplicaciones PIM.</p><p>El cliente y el servidor de OBEX se implementan como un paquete
        denominado <span class="application">obexapp</span> disponible como <span class="quote">&#8220;<span class="quote">
        port</span>&#8221;</span> en
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/obexapp/pkg-descr">comms/obexapp</a>.</p><p>El cliente OBEX se utiliza para introducir y para recuperar
        recuperar objetos del servidor OBEX.  Un objeto puede por ejemplo ser
        una tarjeta de visita o una cita.  El cliente OBEX puede obtener un
        número de canal RFCOMM del dispositivo remoto utilizando SDP.
        Esto se hace especificando el nombre del servicio en lugar del
        número de canal RFCOMM.  Los nombres de servicios soportados
        son: IrMC, FTRN y OPUSH. Es posible especificar el canal RFCOMM como
        un número. A continuación se muestra un ejemplo de una
        sesión OBEX donde el objeto que posee la información del
        dispositivo se recupera del teléfono celular y un nuevo objeto
        (la tarjeta de visita) se introduce en el directorio de dicho
        teléfono.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>obexapp -a 00:80:37:29:19:a4 -C IrMC</code></strong>
obex&gt; get
get: remote file&gt; telecom/devinfo.txt
get: local file&gt; devinfo-t39.txt
Success, response: OK, Success (0x20)
obex&gt; put
put: local file&gt; new.vcf
put: remote file&gt; new.vcf
Success, response: OK, Success (0x20)
obex&gt; di
Success, response: OK, Success (0x20)</pre><p>Para proporcionar servicio de OBEX el servidor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a> debe
        estar en funcionamiento. Además se debe crear un directorio
        raíz donde todos los objetos van a ser almacenados.  La ruta
	por defecto para el directorio raíz es <code class="filename">
        /var/spool/obex</code>.   Por último se debe ejecutar el
        servidor OBEX en un número de canal RFCOMM válido.  El
	servidor OBEX registra automáticamente el servicio de Object
	Push con el dæmon SDP local.  El ejemplo que se muestra a
        local. El ejemplo que se muestra a continuación
        continuación describe cómo ejecutar el servidor
	OBEX.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>obexapp -s -C 10</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80417488"></a>29.4.10. Perfil de puerto serie (SP) </h3></div></div></div><p>El perfil de puerto serie (Serial Port o SP) permite que
        dispositivos Bluetooth realicen emulación de RS232 (o
        similar).  El escenario cubierto por este perfil trata con
        con aplicaciones comerciales que utilizan Bluetooth como un sustituto
        sustituto del cable, utilizando una capa de abstracción que
        representa un puerto serie virtual.</p><p>La aplicación <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rfcomm_sppd</span>(1)</span></a> implementa el perfil
        Puerto Serie.  Usa una pseudo tty como abstracción de puerto
	serie virtual.  El ejemplo de más abajo muestra cómo
	conectarse a un servicio de dispositivo remoto de Puerto Serie.
	Observe que no necesita especificarse el canal RFCOMM:
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rfcomm_sppd</span>(1)</span></a> puede obtenerlo del dispotivo remoto via
	SDP.  Si necesita especificarlo por alguna razón
	hágalo en la propia línea de órdenes.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_sppd -a 00:07:E0:00:0B:CA -t /dev/ttyp6</code></strong>
rfcomm_sppd[94692]: Starting on /dev/ttyp6...</pre><p>Una vez conectado el pseudo tty se puede utilizar como un puerto
        serie.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l ttyp6</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80427088"></a>29.4.11. Solución de problemas</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80427728"></a>29.4.11.1. Un dispositivo remoto no puede conectarse</h4></div></div></div><p>Algunos dispositivos Bluetooh antiguos no soportan el cambio de
          cambio de roles. Por defecto,
          roles.  Cuando FreeBSD acepta una nueva conexión por defecto
          intenta realizar un cambio de rol y convertirse en maestro.
          Dispositivos que no son capaces de realizar este cambio no pueden
          conectarse.  Es interesante resaltar que el cambio de roles se
          realiza cuando se está estableciendo una nueva
          conexión de tal forma que no es posible preguntar al
          dispositivo si soporta intercambio de roles.  Existe una
          opción HCI para desactivar el intercambio de roles en la
          parte local.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hccontrol -n ubt0hci write_node_role_switch 0</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80429776"></a>29.4.11.2. Algo va mal ?puedo ver exactamente qué
          está ocurriendo?</h4></div></div></div><p>Sí, se puede.  Utilice el paquete
          <span class="application">hcidump-1.5</span>, que se puede descargar de
          <a class="link" href="http://www.geocities.com/m_evmenkin/" target="_top">aquí</a>.
          La herramienta <span class="application">hcidump</span> es similar a la
          herramienta <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a>. Se puede utilizar para mostrar el
          contenido de los paquetes Bluetooth sobre el terminal y para volcar
          los paquetes Bluetooth a un fichero.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-bridging"></a>29.5. Puenteado</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Steve</span> <span class="surname">Peterson</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80440016"></a>29.5.1. Introducción</h3></div></div></div><a id="idp80440656" class="indexterm"></a><a id="idp80441168" class="indexterm"></a><p>Algunas veces resulta útil dividir una red física
        (como por ejemplo un segmento Ethernet) en dos segmentos de red
        separados, sin tener que crear subredes IP y sin utilizar una pasarela
        para comunicar ambos segmentos.  El dispositivo que realiza esta
        función se denomina <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>.  Un sistema FreeBSD
	con dos interfaces de red puede actuar como un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>
        o puente entre ambas.</p><p>El <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> funciona de tal forma que aprende las
        direcciones de la capa MAC (direcciones Ethernet) de los nodos que se
        encuentran conectados a cada interfaz de red de tal forma que
	sólo se reenvía tráfico entre los segmentos de
        red cuando las direcciones fuente y destino se encuentran separadas en
        segmentos distintos.</p><p>En varios aspectos se puede comparar un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> con
        un <span class="quote">&#8220;<span class="quote">switch</span>&#8221;</span> de pocos puertos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80444880"></a>29.5.2. Situaciones donde el puenteado resulta adecuado</h3></div></div></div><p>Existen al menos dos situaciones típicas donde se puede
        utilizar la funcionalidad proporcionada por los <span class="quote">&#8220;<span class="quote">
        bridges</span>&#8221;</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80446416"></a>29.5.2.1. Tráfico de gran volumen en un segmentos de red</h4></div></div></div><p>La primera situación surge cuando nos encontramos con un
          segmento de red congestionado pero por las razones que sean no
          queremos subdividir la red e interconectar las nuevas subredes
          mediante un <span class="quote">&#8220;<span class="quote">route</span>&#8221;</span>.</p><p>Vamos a considerar un ejemplo de un periódico donde los
          departamentos editoriales y de producción utilizan la misma
          subred.  Los usuarios de la editorial utilizan el servidor
          <code class="systemitem">A</code> como servidor de ficheros y los de
          producción utilizan el servidor <code class="systemitem">B</code>.  Se
          Se utiliza una red Ethernet para conectar ambos departamentos y se
          ha detectado que la alta utilización del enlace está
          ralentizando el funcionamiento de la red.</p><p>Si los usuarios de la editorial pudieran agregarse en un
          segmento de red mientras que los usuarios de producción se
          localizaran en otro se podrían conectar ambos segmentos
	  mediante un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>.  Sólo se utilizará
          el <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> para encaminar tráfico de red
          destinado a interfaces que se encuentren en el <span class="emphasis"><em>
	  otro</em></span> lado del <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>, reduciendo de esta
	  forma la congestión en cada nuevo segmento.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80451024"></a>29.5.2.2. Cortafuegos de filtrado/conformación de tráfico
          </h4></div></div></div><a id="idp80451792" class="indexterm"></a><a id="idp80452304" class="indexterm"></a><p>La segunda situación típica se produce cuando se
          necesita un cortafuegos pero no la Traducción de Direcciones
	  de Red (NAT).</p><p>A continuación se muestra un ejemplo. Una
          pequeña compañía se comunica con su ISP
          utilizando DSL o ISDN. Dicha compañía posee 13
          13 direcciones IP globalmente accesibles delegadas por su ISP y tiene
          10 ordenadores en funcionamiento.  En esta situación un
          un cortafuegos basado en un <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> resulta
	  difícil debido a la distribución del espacio de
          direccionamiento disponible (subnetting).</p><a id="idp80453968" class="indexterm"></a><a id="idp80454608" class="indexterm"></a><a id="idp80455120" class="indexterm"></a><p>Un cortafuegos implementado sobre un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> se
	  puede utilizar en el camino de bajado desde el ISP hasta las
	  oficinas de la compañía sin necesidad de tener en
	  cuenta ningún aspecto relacionado con la
          distribución de las direcciones IP.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80456656"></a>29.5.3. Configuración de un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80457552"></a>29.5.3.1. Selección de la interfaz de red</h4></div></div></div><p>Un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> necesita al menos dos tarjetas de red
	  situadas en dos segmentos de red para su funcionamiento.  Por
          desgracia no todas las interfaces de red pueden usarse para el
	  puenteo.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a>, ahín encontrará
	  más información sobre qué tarjetas puede
	  usar.</p><p>Por favor, instale y pruebe las dos tarjetas de red antes de
          continuar.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80460240"></a>29.5.3.2. Cambios en la configuración del núcleo</h4></div></div></div><a id="idp80460880" class="indexterm"></a><p>Para activar el soporte de <span class="quote">&#8220;<span class="quote">bridging</span>&#8221;</span> en el
	  núcleo añada</p><pre class="programlisting">options BRIDGE</pre><p>al fichero de configuración del núcleo y
          recompile el kernel.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80472016"></a>29.5.3.3. Soporte de cortafuegos</h4></div></div></div><a id="idp80472656" class="indexterm"></a><p>Si se desea utilizar el <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> como un
	  cortafuegos, se debe añadir además la opción
          <code class="literal">IPFIREWALL</code>.  Lea el capílo de
	  firewalls  para obtener
	  información general sobre cómo configurar el
	  bridge para que actúe además como cortafuegos.</p><p>Si además queremos que los paquetes que no sean IP (por
          ejemplo paquetes ARP) puedan atravesar el <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>
          deberemos añadir la opción
          <code class="literal">IPFIREWALL_DEFAULT_TO_ACCEPT</code>.  Tenga en cuenta
          opción modifica el comportamiento del cortafuegos de tal
          forma que por defecto aceptará cualquier paquete.  Hay que
	  tener cuidado para asegurarse de que el comportamiento esperado del
          cortafuegos, que reside en el conjunto de reglas que se hayan
          definido, no se vea afectado por este cambio.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80475856"></a>29.5.3.4. Soporte de conformado de tráfico</h4></div></div></div><p>Si se quiere utilizar el <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> como un
	  conformador de tráfico, es decir, como un elemento capaz de
          adaptar los distintos flujos según determinados patrones, se
          debe añadir la opción
          <code class="literal">DUMMYNET</code> a la configuración del
          núcleo.  Se ruega consultar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dummynet</span>(4)</span></a> para obtener
          más información al respecto.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80478800"></a>29.5.4. Cómo activar el <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span></h3></div></div></div><p>Añadir la línea:</p><pre class="programlisting">net.link.ether.bridge=1</pre><p>en <code class="filename">/etc/sysctl.conf</code> para habilitar el
        soporte de <span class="quote">&#8220;<span class="quote">bridging</span>&#8221;</span> en tiempo de ejecución y la
        línea:</p><pre class="programlisting">net.link.ether.bridge_cfg=<em class="replaceable"><code>if1</code></em>,<em class="replaceable"><code>if2</code></em></pre><p>Para activar el <span class="quote">&#8220;<span class="quote">bridging</span>&#8221;</span> en las interfaces
        especificadas (sustituya
	<em class="replaceable"><code>if1</code></em> y
	<em class="replaceable"><code>if2</code></em> con los nombres de sus interfaces de
        red).  Si deseamos filtrar los paquetes puenteados utilizando
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a>, debemos añadir también:</p><pre class="programlisting">net.link.ether.bridge_ipfw=1</pre><p>En FreeBSD 5.2-RELEASE y posteriores, se debe utilizar las
        siguientes líneas en lugar de las anteriores:</p><pre class="programlisting">net.link.ether.bridge.enable=1
net.link.ether.bridge.config=<em class="replaceable"><code>if1</code></em>,<em class="replaceable"><code>if2</code></em>
net.link.ether.bridge.ipfw=1</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80487248"></a>29.5.5. Información adicional</h3></div></div></div><p>Si queremos ser capaces de conectarnos al <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>
        mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> se puede asignar una dirección IP a
        una de las tarjetas de red del <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>.  Por amplio
	consenso se considera una mala idea asignar más de una
        dirección IP al <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span>.</p><p>Si poseemos varios <span class="quote">&#8220;<span class="quote">bridges</span>&#8221;</span> en nuestra red
        sólamente puede existir un único camino entre
        cualesquiera dos máquinas de nuestra red.
	Técnicamente hablando esto significa que no existe soporte para
        gestión de enlace mediante mecanismos basados en
        árboles de recubrimiento mínimos (<span class="quote">&#8220;<span class="quote">spanning
        tree</span>&#8221;</span>).</p><p>Un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> puede añadir latencia a los tiempos
        de respuesta de la orden <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>, especialmente cuando
        el tráfico tiene que viajar de un segmento de red al
        otro.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nfs"></a>29.6. NFS</h2></div><div><span class="authorgroup">Reorganizado y ampliado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div></div></div><a id="idp80501456" class="indexterm"></a><p>FreeBSD soporta diversos sistemas de ficheros, uno de los
      cuales es el Sistema de Ficheros en Red, tambíen conocido
      por su acrónimo en inglés <acronym class="acronym">NFS</acronym>.
      <acronym class="acronym">NFS</acronym> permite compartir directorios y ficheros a
      través de la red.  Los usuarios del sistema <acronym class="acronym">
      NFS</acronym> pueden acceder a ficheros que se encuentran
      físicamente en máquinas remotas de una forma
      transparente, como si se tratara de ficheros locales.</p><p>He aquí algunos los beneficios más destacados que
      <acronym class="acronym">NFS</acronym> proporciona:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Las estaciones de trabajo locales utilizan menos espacio de
          disco debido a que los datos se encuentran centralizados en un
          único lugar pero pueden ser accedidos y modificados por
          varios usuarios, de tal forma que no es necesario replicar la
          información.</p></li><li class="listitem"><p>Los usuarios no necesitan disponer de un directorio <span class="quote">&#8220;<span class="quote">
	  home</span>&#8221;</span> en cada una de las máquinas de la
          organización.  Los directorios <span class="quote">&#8220;<span class="quote">home</span>&#8221;</span> pueden
          crearse en el servidor de <acronym class="acronym">NFS</acronym> para posteriormente
	  poder acceder a ellos desde cualquier máquina a través
          de la infraestrutura de red.</p></li><li class="listitem"><p>También se pueden compartir a través de la red
          dispositivos de almacenamiento como disqueteras, CDROM y unidades
          ZIP.  Esto puede reducir la inversión en dichos dispositivos
          y mejorar el aprovechamiento del hardware existente en la
          organización.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80516560"></a>29.6.1. Cómo funciona <acronym class="acronym">NFS</acronym></h3></div></div></div><p>El sistema <acronym class="acronym">NFS</acronym> está dividido al menos en
        dos partes principales: un servidor y uno o más clientes.
        Los clientes acceden de forma remota a los datos que se encuentran
        almacenados en el servidor.  Para que el sistema funcione
        correctamente se deben configurar y ejecutar unos cuantos
        procesos.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">En FreeBSD 5.X se ha reemplazado <span class="application">
          portmap</span> por <span class="application">rpcbind</span>.
          de esta forma para los ejemplos que vamos a comentar a
          continuación se recuerda que en FreeBSD 5.X se debe reemplazar
          cualquier instancia de <span class="application">portmap</span> por
          <span class="application">rpcbind</span>.</p></div><p>El servidor de <acronym class="acronym">NFS</acronym> debe ejecutar los siguientes
        dæmones:</p><a id="idp80521040" class="indexterm"></a><a id="idp80522192" class="indexterm"></a><a id="idp80523088" class="indexterm"></a><a id="idp80524112" class="indexterm"></a><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Dæmon</th><th>Descripción</th></tr></thead><tbody><tr><td><span class="application">nfsd</span></td><td>El dæmon<acronym class="acronym">NFS</acronym>, que atiende
                peticiones de clientes <acronym class="acronym">NFS</acronym>.</td></tr><tr><td><span class="application">mountd</span></td><td>El dæmon de montaje de <acronym class="acronym">NFS</acronym>,
                que transporta las peticiones que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsd</span>(8)</span></a> realiza.</td></tr><tr><td><span class="application">portmap</span></td><td> El dæmon portmapper permite que los clientes
                <acronym class="acronym">NFS</acronym> puedan descubrir qué puerto
                está utilizando el servidor de
                <acronym class="acronym">NFS</acronym>.</td></tr></tbody></table></div><p>El cliente también puede ejecutar un dæmon conocido ,
        como <span class="application">nfsiod</span>.  El dæmon
        <span class="application">nfsiod</span> atiende las peticiones provinientes
        del servidor <acronym class="acronym">NFS</acronym>.  Este dæmon  es opcional y
	sirve para mejorar el rendimiento pero no es necesario para el
        funcionamiento correcto del sistema.  Se recomienda consultar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsiod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsiod</span>(8)</span></a> para obtener más información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-configuring-nfs"></a>29.6.2. Configuración de <acronym class="acronym">NFS</acronym></h3></div></div></div><a id="idp80538192" class="indexterm"></a><p>La configuración de <acronym class="acronym">NFS</acronym> es un proceso
        relativamente sencillo.  Para que los procesos anteriormente descritos
        se ejecuten en tiempo de arranque del sistema, basta con realizar
        paqueñas modificaciones en <code class="filename">/etc/rc.conf</code>.
        </p><p>En <code class="filename">/etc/rc.conf</code> del servidor de
        <acronym class="acronym">NFS</acronym> se deben configurar las siguientes opciones:</p><pre class="programlisting">portmap_enable="YES"
nfs_server_enable="YES"
mountd_flags="-r"</pre><p><span class="application">mountd</span> se ejecuta
        automáticamente cuando se activa el servidor
        <acronym class="acronym">NFS</acronym>.</p><p>En el cliente debemos asegurarnos de que se encuentra activada la
        activada la siguiente opción dentro de <code class="filename">
        /etc/rc.conf</code>:</p><pre class="programlisting">nfs_client_enable="YES"</pre><p>El archivo <code class="filename">/etc/exports</code> especifica los
        directorios o sistemas de ficheros que <acronym class="acronym">NFS</acronym> exporta
        al exterior.  Cada línea dentro de <code class="filename">
	/etc/exports/</code> especifia un sistema de ficheros y qué
        máquinas tienen derechos de acceso sobre dicho sistema.
        Además de los derechos de acceso se pueden definir otras
        opciones de acceso, tales como solo lectura o lectura y escritura.
        Existen multitud de opciones que pueden definirse sobre un directorio
        exportable pero en este manual sólo se van a comentar unas
        pocas.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a> para obtener una descripción
        más detallada.</p><p>Aquí se muestran algunos ejemplos de entradas para
        <code class="filename">/etc/exports</code>:</p><a id="idp80551632" class="indexterm"></a><p>El siguiente ejemplo proporciona una idea de cómo exportar
        sistemas de ficheros, aunque los parámetros pueden diferir
        dependiendo de su entorno y su configuración de red.  En dicho
        ejemplo, se  exporta el directorio <code class="filename">/cdromm</code> a tres
        máquinas que se encuentran en el mismo dominio que el servidor
        (de ahí que no se especifique ningún nombre de dominio
        para cada máquina) o que pueden estar dadas de alta en
        <code class="filename">/etc/hosts</code>.  En cualquier caso la opción
        <code class="option">-ro</code> configura el sistema de ficheros de red como
        <span class="quote">&#8220;<span class="quote">sólo lectura</span>&#8221;</span> (<span class="quote">&#8220;<span class="quote">read-only</span>&#8221;</span>).
	Con esta opción los sistemas remotos no serán capaces
        de realizar cambios sobre el sistema de ficheros exportados.</p><pre class="programlisting">/cdrom -ro host1 host2 host3</pre><p>La siguiente línea exporta el directorio
        <code class="filename">/home</code> a tres máquinas utilizando
        direcciones IP.  Esto resulta útil cuando disponemos de una red
        privada pero no disponemos de ningún servidor de
        <acronym class="acronym">DNS</acronym> configurado.  También se podría
        configurar <code class="filename">/etc/hosts</code> para que resolviera
        nombres de máquinas internos; consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> para
        obtener más información al respecto.  La opción
        <code class="option">-alldirs</code> permite que los subdirectorios del
        directorio <code class="filename">/home</code> tambíen se puedan utilizar
        como puntos de montaje.  En otras palabras, esto permite que los
        clientes puedan trabajar sobre los subdirectorios en los que
        estén realmente interesados.</p><pre class="programlisting">/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre><p>La siguiente línea exporta el directorio
        <code class="filename">/a</code> de tal forma que puedan acceder a dicho
        directorio dos máquinas situadas en distintos dominios.  La
        opción  <code class="option">-maproot=root</code> permite que el usuario
        <code class="systemitem">root</code> de la máquina cliente modifique los
        datos del sistema de ficheros en red como si fuera el usuario
        <code class="systemitem">root</code> del servidor.  Si no se especifica la
        opción <code class="option">-maproot=root</code> el usuario
        <code class="systemitem">root</code> del cliente puede no poseer los permisos
        necesarios para realizar modificaciones en el sistema de
	ficheros.</p><pre class="programlisting">/a  -maproot=root  host.example.com box.example.org</pre><p>Para que un cliente pueda acceder al sistema de ficheros exportado
        debe poseer permisos para ello.  Debemos asegurarnos de que el cliente
        se encuentra listado en <code class="filename">/etc/exports</code>.</p><p>Dentro de <code class="filename">/etc/exports</code> cada línea
        representa información de exportación de un sistema de
        ficheros para un determinado conjunto de máquinas.  Una
        máquina sólo  puede aparecer una vez dentro de un
        sistema de ficheros exportable y el archivo sólo puede tener
        una única entrada por defecto.  Por ejemplo, si suponemos que
        <code class="filename">/usr</code> es un único sistema de ficheros la
        siguiente configuración de <code class="filename">/etc/exports</code>
        sería incorrecta:</p><pre class="programlisting">/usr/src   client
/usr/ports client</pre><p>Existe un sistema de ficheros, concretamente
        <code class="filename">/usr</code>, que posee dos líneas con reglas de
        exportación para la misma máquina,
        <code class="systemitem">client</code>. El formato correcto para esta
        situación sería el siguiente:</p><pre class="programlisting">/usr/src /usr/ports  client</pre><p>Las propiedades de un sistemas de ficheros que se exporta al
        exterior deben aparecer agrupadas bajo la misma línea.
        Líneas que no poseen ningún cliente se tratan como si
        tuvieran una única máquina.  Esto limita la forma en que
        pueden configurarse la exportaciones de sistemas de ficheros pero para
        la mayoría de la gente no suele ser un problema.</p><p>El ejemplo que se muestra a continuación es una muestra de
        una lista de exportación correcta, donde <code class="filename">
        /usr</code> y <code class="filename">/exports</code> son sistemas de
        ficheros locales:</p><pre class="programlisting"># Exportar src y ports a cliente01 y cliente02, pero
# solo el cliente01 tiene acceso root
/usr/src /usr/ports -maproot=root    cliente01
/usr/src /usr/ports               cliente02
# Las maquinas cliente tienen acceso root y pueden montar todo lo que aparezca
# en /exports.  Cualquier sistema puede montar /exports/obj en modo
# solo lectura
/exports -alldirs -maproot=root      cliente01 cliente02
/exports/obj -ro</pre><p>Se debe reiniciar el dæmon <span class="application">mountd</span>
        siempre que se modifique el contenido del archivo
        <code class="filename">/etc/exports</code> para que los cambios surtan efecto.
        Esto se realiza enviando la señal HUP al proceso
        <code class="command">mountd</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre><p>También se puede reiniciar FreeBSD para que se cargue la
        nueva configuración pero este mecanismo no resulta necesario
        si se ejecutan las órdenes como
        <code class="systemitem">root</code>, que ponen el servidor de
        <acronym class="acronym">NFS</acronym> de nuevo en funcionamiento.</p><p>En el servidor de <acronym class="acronym">NFS</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>nfsd -u -t -n 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mountd -r</code></strong></pre><p>En el cliente de <acronym class="acronym">NFS</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nfsiod -n 4</code></strong></pre><p>En este punto todo debería estar preparado para
        poder anclar el sistema de ficheros remoto en la máquina
        cliente.  En los siguientes ejemplos el nombre del servidor es
        <code class="systemitem">server</code> y el punto de montaje temporal utilizado
        por el cliente es <code class="systemitem">client</code>.  Si se desea montar el
        sistema de ficheros de forma temporal o simplemente comprobar que la
        configuración funciona sin problemas se puede ejecutar una
        orden como la que se muestra a continuación con permisos
        de <code class="systemitem">root</code> en la máquina cliente:</p><a id="idp80620368" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount server:/home /mnt</code></strong></pre><p>Esta orden ancla el directorio
        <code class="filename">/home</code> del servidor en el directorio
        <code class="filename">/mnt</code> del cliente.  Si todo funciona correctamente
        debería poder entrar en el directorio
        <code class="filename">/mnt</code> del cliente y ver todos los ficheros que se
        encuentran en el directorio <code class="filename">/home</code> del servidor.
        </p><p>Si queremos anclar automáticamente un sistema de ficheros
        remoto cuando la máquina está arrancando se puede
        añadir una línea como la siguiente dentro de
        <code class="filename">/etc/fstab</code>:</p><pre class="programlisting">servidor:/home	/mnt	nfs	rw	0	0</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> comenta todas las opciones disponibles.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80626768"></a>29.6.3. Usos prácticos</h3></div></div></div><p>El protocolo <acronym class="acronym">NFS</acronym> tiene múltiples  usos
        prácticos.  Los más típicos se enumeran a
        continuación:</p><a id="idp80628176" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Compartición de la unidad de CDROM entre varias
            máquinas.  Esto resulta ser más barato y una forma
            más conveniente para instalar software en varias
            máquinas.</p></li><li class="listitem"><p>En grandes redes puede ser más adecuado configurar un
            servidor central de <acronym class="acronym">NFS</acronym> en el cual se
            almacenen todos los <span class="quote">&#8220;<span class="quote">homes</span>&#8221;</span> de los distintos
            usuarios.  Estos directorios se pueden exportar a través de
            la red de tal forma que los usuarios pueden trabajar con el mismo
            directorio independientemente de la máquina que utilicen.
            </p></li><li class="listitem"><p>Varias máquinas pueden poseer el directorio
            <code class="filename">/usr/ports/distfiles</code> compartido.  De
            este modo cuando necesitemos instalar un port en varias
            máquinas, se puede acceder rápidamente a las fuentes
            sin necesidad de bajarlas una vez para cada máquina.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-amd"></a>29.6.4. Anclajes automáticos usando <span class="application">amd</span></h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Wylie</span> <span class="surname">Stilwell</span></span>. </span></div><div><span class="authorgroup">Reescrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><a id="idp80642000" class="indexterm"></a><a id="idp80642512" class="indexterm"></a><p>El dæmon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> (<span class="quote">&#8220;<span class="quote">the automatic mounter
        daemon</span>&#8221;</span>, o dæmon de montaje automático)
	automáticamente ancla un sistema de ficheros remoto cuando se
        tiene que acceder a un fichero perteneciente a dicho sistema. Los
	sistemas de ficheros que permanecen inactivos durante un determinado
        periodo de tiempo son automáticamente desmontados por el mismo
        dæmon.  Este dæmon proporciona una alternativa sencilla a
        la utilización de los montajes permanentes que normalmente se
        especifican a través del fichero <code class="filename">
        /etc/fstab</code>.</p><p><span class="application">amd</span> trabaja actuando como un servidor
        servidor de NFS para los directorios
        <code class="filename">/host</code> y <code class="filename">/net</code>.  Cuando se
        accede a algún fichero ubicado bajo estos directorios
        <span class="application">amd</span> busca el punto de montaje remoto y
        automáticamente lo monta.  El directorio <code class="filename">
        /net</code> se utiliza para anclar sistemas de ficheros remotos
        especificados mediante direcciones IP, mientras que el directorio
        <code class="filename">/host</code> almacena aquellos sistemas de ficheros
        remotos que han sido especificados mediante un nombre de
        máquina.</p><p><span class="application">amd</span> detecta cualquier intento
        de acceder a un fichero dentro del directorio
	<code class="filename">/host/foobar/usr</code> y se encarga de montar
        el sistema de ficheros remoto (<code class="filename">/usr</code>)
        en la máquina, en caso de que no estuviera ya
        anclado.</p><div class="example"><a id="idp80673616"></a><div class="example-title">Ejemplo 29.1. Anclaje de una exportación utilizando
          <span class="application">amd</span></div><div class="example-contents"><p><code class="command">showmount</code> muestra los
          puntos de montaje que posee una máquina remota. Por ejemplo
          para conocer los montajes de un máquina llamada
          <code class="systemitem">foobar</code>, se puede utilizar:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>showmount -e foobar</code></strong>
Exports list on foobar:
/usr                               10.10.10.0
/a                                 10.10.10.0
<code class="prompt">%</code> <strong class="userinput"><code>cd /host/foobar/usr</code></strong></pre></div></div><br class="example-break" /><p>Como se observa en el ejemplo,
        <code class="command">showmount</code> muestra el directorio
        <code class="filename">/usr</code>
        como una exportación.  Cuando se cambia el directorio actual
        al directorio <code class="filename">/host/foobar/usr</code> el dæmon
        <span class="application">amd</span> intenta resolver el nombre
        <code class="systemitem">foobar</code> y automáticamente ancla el sistema
        de ficheros remoto.</p><p>El dæmon <span class="application">amd</span> se puede ejecutar
        a partir de los scripts de inicio, utilizando la siguiente
        línea del archivo de configuración
        <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">amd_enable="YES"</pre><p>Además, <span class="application">amd</span> soporta opciones
        adicionales que pueden definirse mediante la variable
      <code class="varname">amd_flags</code>. Por defecto, la variable
        <code class="varname">amd_flags</code> posee las siguientes opciones:</p><pre class="programlisting">amd_flags="-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map"</pre><p>El archivo <code class="filename">/etc/amd.map</code> define las opciones
        por defecto con las cuales se anclan los sistemas de ficheros
        remotos. El archivo <code class="filename">/etc/amd.conf</code> define algunas
        características avanzadas para el dæmon
        <span class="application">amd</span>.</p><p>Se ruega consultar las páginas del manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> y
        de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">amd.conf</span>(5)</span></a> para obtener más información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nfs-integration"></a>29.6.5. Problemas de integración con otras plataformas</h3></div><div><span class="authorgroup">Escrito por  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">John</span> <span class="surname">Lind</span></span>. </span></div></div></div><p>Determinados adaptadores Ethernet para sistemas basados en
        el bus ISA poseen restricciones que pueden producir serios problemas
        de red, en particular con el protocolo NFS.  Estos problemas no son
        específicos de FreeBSD, pero los sistemas FreeBSD se ven
        afectados por ellos.</p><p>El problema surge casi siempre cuando el sistema (FreeBSD)
        está empotrado dentro de una red compuesta por estaciones de
        trabajo de alto rendimiento, como por ejemplo estaciones de Silicon
        Graphics y de Sun Microsystems.  El montaje del sistema de ficheros
        remoto suele funcionar perfectamente y algunas operaciones sobre el
        el sistema de ficheros pueden tener éxito pero de repente el
        el servidor que no responde a las peticiones del cliente, aunque
        peticiones y respuestas de otros clientes funcionan con normalidad y
        se continúan procesando.  Esto sucede en los sistemas clientes,
        tanto en sistemas FreeBSD como en otras estaciones de trabajo.
        En muchos sistemas, lo único que se puede hacer es resetear
        la máquina de forma abrupta, ya que el bloqueo producido por el
        protocolo NFS no se puede solucionar.</p><p>Aunque la solución <span class="quote">&#8220;<span class="quote">correcta</span>&#8221;</span> consiste en
        obtener un adaptador Ethernet con mayor rendimiento y capacidad,
        todavía se puede aplicar un parche sencillo que puede llegar a
        permitir un funcionamiento sin problemas. Si el sistema FreeBSD
        actúa como servidor de <span class="emphasis"><em>NFS</em></span> se puede
        incluír la opción <code class="option">w=1024</code> cuando el
        ejecute una petición de montaje sobre dicho servidor.  Si FreeBSD
        dicho servidor. Si FreeBSD actúa como cliente de
        <span class="emphasis"><em>NFS</em></span>, se puede ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> con el
        parámetro <code class="option">-r=1024</code>.  Estas opciones se pueden
        especificar en el <code class="filename">/etc/fstab</code> del cliente para que
	entren en funcionamiento cuando se realicen montajes
        automáticos y también se puede utilizar el
	parámetro <code class="option">-o</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> cuando se
        realicen montajes manuales.</p><p>Resulta apropiado resaltar que existe un problema totalmente
        distinto que algunas veces se confunde con el que acabamos de
        describir, que aparece cuando el servidor y los clientes se encuentran
        en redes diferentes. Si nos encontramos en esta situación
        debemos <span class="emphasis"><em>asegurarnos</em></span> de que nuestros <span class="quote">&#8220;<span class="quote">
	routers</span>&#8221;</span> están encaminando correctamente los paquetes
        UDP que genera el protocolo <acronym class="acronym">NFS</acronym> pues en caso
	contrario el sistema no funcionará, independientemente de los
        ajustes que se realicen en el cliente o en el servidor.</p><p>En los siguientes ejemplos <code class="systemitem">fastws</code> es el nombre de
        una estación de trabajo de altas prestaciones y <code class="systemitem">
	freebox</code> es el nombre de un sistema FreeBSD con un adaptador
        Ethernet de bajas prestaciones.  Se pretende además exportar el
        directorio <code class="filename">/sfcompartido</code> (ver <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a>) y
        el directorio <code class="filename">/projecto</code>.  Tenga en cuenta que en
        cualquier caso puede resultar útil definir opciones adicionales
        a las que que se muestran en el siguiente ejemplo, como pueden ser
        <code class="option">hard</code>, <code class="option">soft</code> o
        <code class="option">bg</code>.  Esto dependerá de la aplicación
        que utilice el sistema de ficheros remoto.</p><p>Ejemplos de configuración para el sistema FreeBSD
        (<code class="systemitem">freebox</code>) que actúa como cliente.
        Configuración del archivo
        <code class="filename">/etc/fstab</code> de
        <code class="systemitem">freebox</code>:</p><pre class="programlisting">fastws:/sfcompartido /projecto nfs rw,-r=1024 0 0</pre><p>Orden de ejecución manual para
        <code class="systemitem">freebox</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -r=1024 fastws:/sfcompartido /projecto</code></strong></pre><p>Ejemplos de configuración para el sistema FreeBSD que
        actúa como servidor. Configuración de
        <code class="filename">/etc/fstab</code> de <code class="systemitem">fastws</code>:</p><pre class="programlisting">freebox:/sfcompartido /projecto nfs rw,-w=1024 0 0</pre><p>Orden de ejecución manual para
        <code class="systemitem">fastws</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -w=1024 freebox:/sfcompartido /projecto</code></strong></pre><p>Casi cualquier adaptador Ethernet de 16 bits permite operar sin
        operar sin las restricciones anteriores sobre el tamaño de
        lectura o escritura especificado por defecto.</p><p>Por si alguien estuviera interesado a continuación se
        muestra el error que aparece en estos casos, lo cual explica por
        qué decimos que el error resulta irrecuperable.  NFS trabaja
        típicamente con un tamaño de <span class="quote">&#8220;<span class="quote">bloque</span>&#8221;</span>
        de 8 K (aunque se pueden producir fragmentos de menor
        tamaño).  Debido a que el máximo tamaño de los
        paquetes Ethernet se encuentra alrededor de los 1500 bytes el
        <span class="quote">&#8220;<span class="quote">bloque</span>&#8221;</span> de NFS se trocea en varios paquetes Ethernet
        aunque desde el punto de vista del protocolo NFS se trata como si
        fuese un único paquete.  Los trozos deben reensamblarse en el
        destino y se debe enviar una <span class="emphasis"><em>confirmación</em></span>
        para el bloque recibido.  Las estaciones de trabajo de altas
	prestaciones pueden soltar paquetes NFS de forma contínua uno
        después de otro, lo más juntos posible.  Por otro lado
        en las tarjetas de red más pequeñas y de menor
        capacidad puede ocurrir que un paquete recien llegado a la tarjeta
        sobreescriba información perteneciente a un paquete anterior
        antes de que llegue a ser transmitido completamente, de tal forma que
	al recibirse el bloque NFS no puede ser ni reconstruido ni
        ni reconocido.  Como resultado de este proceso la máquina
        tratará de enviar el mismo paquete transcurridos unos instantes
        de espera, pero se tratarán de enviar de nuevo los 8 K
        que constituyen un bloque NFS, y de esta forma se repetirá el
        el proceso, así hasta el infinito.</p><p>Si se mantiene el tamaño del bloque por debajo del
        tamaño de paquete máximo de Ethernet, podemos asegurar
        que cualquier paquete Ethernet transporta un bloque NFS, el cual
        puede asentirse individualmente, evitando así la
        explosión de paquetes y el eventual bloqueo del sistema.</p><p>Desbordamientos circulares del <span class="quote">&#8220;<span class="quote">buffer</span>&#8221;</span> (<span class="quote">&#8220;<span class="quote">
        overruns</span>&#8221;</span>) pueden producirse si nos encontramos con una
        estación de trabajo de altas prestaciones que envía
        contínuamente mucho tráfico a un sistema convencional,
	pero con tarjetas Ethernet de buena calidad, estos desbordamientos
        resultan altamente improbables para el caso de los tamaños de
	bloque por defecto generados por el sistema NFS.  Cuando se produce un
        desbordamiento, las unidades afectadas se retransmiten, y
        existe una gran probabilidad de que se reciban, se reensamblen
        y se confirmen.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-diskless"></a>29.7. Ejecución sin disco duro</h2></div><div><span class="authorgroup">Actualizado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jean-François</span> <span class="surname">Dockès</span></span>. </span></div><div><span class="authorgroup">Reorganizado y ampliado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Alex</span> <span class="surname">Dupre</span></span>. </span></div></div></div><a id="idp80731984" class="indexterm"></a><a id="idp80732496" class="indexterm"></a><p>Una máquina FreeBSD se puede arrancar a través
      de la red y operar sin que necesite poseer ningún disco,
      utilizando sistemas de ficheros de un servidor de
      <acronym class="acronym">NFS</acronym>. No se necesita realizar ninguna
      modificación al sistema, salvo configurar determinados ficheros.
      Este tipo de sistemas se pueden configurar fácilmente puesto
      que FreeBSD dispone de todos los elementos necesarios:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Existen al menos dos formas de cargar el núcleo
          del sistema operativo a través de la red:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym>: El sistema de <span class="trademark">Intel</span>® conocido como
              Preboot Execution Environment.  Se trata de una especie de
              arranque inteligente a partir de una memoria de sólo
              lectura (ROM) que se encuentra en algunas placas bases y
              tarjetas de red.  Se puede obtener más información
	      en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a>.</p></li><li class="listitem"><p>El port <span class="application">etherboot</span>
	      (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a>)
              genera código de sólo lectura (código ROM)
              que se puede utilizar para arrancar máquinas a
	      través de la red.  Dicho código se puede instalar
              en una memoria de arranque tipo PROM en algunas tarjetas de red
              o se puede cargar en una disquetera (o disco duro), y
              también en un sistema de ficheros <span class="trademark">MS-DOS</span>® que
              esté en ejecución.  Varias tarjetas de red soportan
	      este mecanismo.</p></li></ul></div></li><li class="listitem"><p>Existe un script de ejemplo
	  (<code class="filename">/usr/share/examples/diskless/clone_root</code>) que
          facilita la creación y el mantenimiento del sistema de
          ficheros raíz de la estación de trabajo en el
          servidor.  La configuración de este <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> se
          debe retocar ligeramente pero sirve como punto de partida para
          comenzar rápidamente.</p></li><li class="listitem"><p>Existen ficheros estándar de arranque bajo
          <code class="filename">/etc</code> que dan soporte al arranque de
          máquinas sin disco.</p></li><li class="listitem"><p>El <span class="quote">&#8220;<span class="quote">swapping</span>&#8221;</span>, en caso de ser necesario, se puede
          realizar usando <acronym class="acronym">NFS</acronym> y tambíen
          usando un disco duro local.</p></li></ul></div><p>Existen varias formas de ejecutar una estación de trabajo sin
      discos.  En el proceso se involucran distintos elementos y la
      mayoría se pueden adaptar a las necesidades del usuario.
      A continuación se describen variaciones sobre la
      configuración de un sistema sin discos, haciendo incapié
      en la simplicidad y compatibilidad con los <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> de
      arranque de FreeBSD.  El sistema que vamos a describir tiene las
      siguientes características.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Las estaciones de trabajo sin disco utilizan un sistema
          de ficheros <code class="filename">raíz</code> de sólo lectura
          y un sistema de ficheros compartido, también de
          sólo lectura, bajo <code class="filename">/usr</code>.</p><p>El sistema de ficheros <code class="filename">raíz</code>
          es una copia del sistema raíz estandar de FreeBSD (normalmente
          del sistema raíz del servidor), donde se sobreescriben
          algunos archivos de configuración necesarios para la
          ejecución sin discos y para la configuración local
          específica de la máquina objetivo.</p><p>Las partes del sistema de ficheros
          <code class="filename">raíz</code> que tiene que tener permisos de
          lectura y escritura se superponen con los sistemas de ficheros
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mfs</span>(8)</span></a> (FreeBSD 4.X) o <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>.  Cualquier cambio que se
          produzca en dichas partes se perderá cuando se reinicie el
          sistema.</p></li><li class="listitem"><p>El núcleo se transmite y se carga utilizando
	  <span class="application">etherboot</span> o bien
          <acronym class="acronym">PXE</acronym>, dependiendo del hardware y los mecanismos
          que se soporten.</p></li></ul></div><div xmlns="" class="caution"><h3 class="admontitle">Atención: </h3><p xmlns="http://www.w3.org/1999/xhtml">Como se ha comentado con anterioridad estos sistemas son
        inseguros.  Se debe confinar dentro de una red protegida y el resto
        de las máquinas por defecto no deben confiar en estos
	métodos.</p></div><p>Toda la información que se presenta en esta
      sección se ha probado utilizando FreeBSD 4.9-RELEASE y
      5.2.1-RELEASE.  El texto se encuentra estructurado principalmente para
      utilización en sistemas 4.X.  Se insertan notas para indicar
      cambios producidos en las versiones 5.X.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80756816"></a>29.7.1. Conocimientos previos</h3></div></div></div><p>Configurar estaciones de trabajo sin discos es una
        operación relativamente sencilla pero en la que pueden
        cometerse errores.  Estos errores resultan algunas veces
        difíciles de diagnosticar debido a razones que vamos a
        exponer a continuación. Por ejemplo:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Diferentes opciones de tiempo de compilación pueden
            determinar comportamientos distintos en tiempo de
            ejecución.</p></li><li class="listitem"><p>Los mensajes de error a menudo resultan crípticos o
            incluso no existen.</p></li></ul></div><p>Se se quieren resolver los posibles problemas que puedan surgir
        resulta muy útil conocer el funcionamiento conceptual del
        mecanismo.</p><p>Para que el arranque se produzca exitosamente se deben realizar
        varias operaciones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La máquina necesita obtener algunos
            parámetros iniciales, tales como su dirección IP,
            el fichero ejecutable, el nombre del servidor y la ruta
            raíz.  Esto se realiza utilizando los protocolos
            <acronym class="acronym">DHCP</acronym> o <acronym class="acronym">BOOTP</acronym>.
            <acronym class="acronym">DHCP</acronym> es una extensión compatible del
            protocolo <acronym class="acronym">BOOTP</acronym> y utiliza los mismos
            números de puertos y los mismos formatos de paquete
            básicos.</p><p>Es posible configurar un sistema de tal forma que utilice
            sólamente <acronym class="acronym">BOOTP</acronym>.  En el sistema base de
            FreeBSD se incluye el programa servidor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a>.</p><p>No obstante <acronym class="acronym">DHCP</acronym> posee varias ventajas sobre
            BOOTP (archivos de configuración más limpios,
            posibilidad de ejecutar <acronym class="acronym">PXE</acronym>, junto con otras
	    características  que no se relacionan directamente con el
            tema que estamos tratando tratando) por lo que principalmente se
            va a describir la configuración de <acronym class="acronym">DHCP</acronym>,
            proporcionando ejemplos equivalentes en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a> siempre que
            sea posible.  La configuración de ejemplo se basa en el
            paquete software de <span class="application">ISC DHCP</span> (en el
            servidor de prueba se instaló la versión
            3.0.1.r12).</p></li><li class="listitem"><p>La máquina sin disco necesita transferir uno o varios
            programas a la memoria local.  Para ello se usa
            <acronym class="acronym">TFTP</acronym> o bien <acronym class="acronym">NFS</acronym>.
            La elección entre ambos se produce mediante la
            configuración de la compilación que se produce en
            varios lugares.  Una fuente de error típica aparece cuando
            se especifican ficheros con el protocolo incorrecto:
            <acronym class="acronym">TFTP</acronym> normalmente transfiere todos los ficheros
            desde un único directorio del servidor, de modo que espera
            nombres de ficheros relativos a dicho directorio.  Por otro lado
            <acronym class="acronym">NFS</acronym> necesita recibir rutas de fichero
            absolutas.</p></li><li class="listitem"><p>El kernel y los programas de arranque intermedios deben ser
	    inicializados y ejecutados.  Existen diferencias importantes en
	    este área:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym> carga <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a>, una
                versión modificada de la tercera fase del cargador de
                arranque de FreeBSD.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> obtiene la mayoría de
                los parámetros necesarios para arrancar el sistema
                y los deposita en variables de entorno del kernel antes de
                tranferir el control. En este caso es posible utilizar un
                un núcleo <code class="filename">GENERIC</code>
                .</p></li><li class="listitem"><p><span class="application">etherboot</span> carga directamente el
                directamente el núcleo con menos trabajo previo que
                el método anterior.  Para ello se debe compilar un
                núcleo con ciertas opciones.</p></li></ul></div><p><acronym class="acronym">PXE</acronym> y <span class="application">etherboot</span>
	    funcionan muy bien en los sistemas 4.X.  Dado que los
            núcleos de los sistemas 5.X permiten que el <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>
            realice más tareas, se prefiere usar <acronym class="acronym">
	    PXE</acronym>.</p><p>Si su <acronym class="acronym">BIOS</acronym> y su tarjeta de red soportan
	    <acronym class="acronym">PXE</acronym> lo normal es utilizarlo.  No obstante se
            puede arrancar un sistema 5.X utilizando <span class="application">
	    etherboot</span>.</p></li><li class="listitem"><p>Para acabar la tarea la máquina necesita acceder al
            sistema de ficheros.  En todos los casos se utiliza
            <acronym class="acronym">NFS</acronym>.</p></li></ul></div><p>No olvide consultar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diskless&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">diskless</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80793808"></a>29.7.2. Instrucciones de configuración</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80794576"></a>29.7.2.1. Configuración utilizando <span class="application">ISC
            DHCP</span></h4></div></div></div><a id="idp80795472" class="indexterm"></a><p>El servidor <span class="application">ISC DHCP</span> puede
          responder tanto a peticiones de BOOTP como a peticiones de
            <acronym class="acronym">DHCP</acronym>.</p><p><span class="application">ISC DHCP</span> no forma parte de
          la versión 4.9 de FreeBSD por lo que se debe instalar el port
            <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> o el
          paquete correspondiente.  Por favor, consulte <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a> para obtener
          más información sobre los ports y los
          paquetes.</p><p>Una vez que <span class="application">ISC DHCP</span> se encuentra
          instalado necesita un fichero de configuración para poder
            ejecutarse
          <code class="filename">/usr/local/etc/dhcpd.conf</code>).  A
          continuación se muestra un ejemplo comentado, donde la
          máquina <code class="systemitem">margaux</code> utiliza
          <span class="application">etherboot</span> y
            la máquina <code class="systemitem">corbieres</code> utiliza
          <acronym class="acronym">PXE</acronym>:</p><pre class="programlisting">
default-lease-time 600;
max-lease-time 7200;
authoritative;

option domain-name "example.com";
option domain-name-servers 192.168.4.1;
option routers 192.168.4.1;

subnet 192.168.4.0 netmask 255.255.255.0 {
  use-host-decl-names on; <a id="co-dhcp-host-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.4.255;

  host margaux {
    hardware ethernet 01:23:45:67:89:ab;
    fixed-address margaux.example.com;
    next-server 192.168.4.4; <a id="co-dhcp-next-server"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    filename "/data/misc/kernel.diskless"; <a id="co-dhcp-filename"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
    option root-path "192.168.4.4:/data/misc/diskless"; <a id="co-dhcp-root-path"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
  }
  host corbieres {
    hardware ethernet 00:02:b3:27:62:df;
    fixed-address corbieres.example.com;
    next-server 192.168.4.4;
    filename "pxeboot";
    option root-path "192.168.4.4:/data/misc/diskless";
  }
}
          </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-host-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Esta
              opción indica a
		<span class="application">dhcpd</span> que envíe el
              valor que se encuentra en las declaraciones
                de <code class="literal">host</code> como el nombre de
              máquina para la máquina sin disco.  Otra forma
              de hacer esto sería añadiendo una opción
		<code class="literal">option host-name
                margaux</code> dentro de las
              declaraciones de máquina.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-next-server"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La directiva
               <code class="literal">next-server</code> selecciona el servidor
              de <acronym class="acronym">TFTP</acronym> o de <acronym class="acronym">NFS</acronym>
              que se debe utilizar para cargar el núcleo
              o el fichero cargador del núcleo (por defecto se
              utiliza la misma máquina que actúa como servidor
              de <acronym class="acronym">DHCP</acronym>).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-filename"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La directiva
		<code class="literal">filename</code> define el archivo que
		<span class="application">etherboot</span> o <acronym class="acronym">PXE</acronym>
                cargará en el siguiente paso de ejecución.
                Debe especificarse de acuerdo con el método de
                transferencia seleccionado.
		<span class="application">Etherboot</span> se puede compilar para
		que use <acronym class="acronym">NFS</acronym> o <acronym class="acronym">TFTP</acronym>.  El
                sistema FreeBSD se configura por defecto para <acronym class="acronym">
                NFS</acronym>.
		<acronym class="acronym">PXE</acronym> utiliza <acronym class="acronym">TFTP</acronym> por lo
                que se utiliza una ruta relativa para especificar el nombre del
                fichero (esto puede depender de la configuración del
                servidor de <acronym class="acronym">TFTP</acronym> pero suele ser lo
                normal).  Además <acronym class="acronym">PXE</acronym> no carga el
                núcleo, lo hace <code class="filename">pxeboot</code>.
                Existen otras posibilidades interesantes, como cargar
		<code class="filename">pxeboot</code> desde el directorio
              <code class="filename">/boot</code>
                de una unidad de CD-ROM de FreeBSD (ya que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> puede
               cargar un núcleo
              <code class="filename">GENERIC</code> surge la posibilidad de utilizar
              <acronym class="acronym">PXE</acronym> para arrancar desde una unidad de
              CD-ROM remota).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-root-path"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La opción
		<code class="literal">root-path</code> define la ruta para el
              sistema de ficheros raíz utilizando la notación
              típica de <acronym class="acronym">NFS</acronym>.  Cuando se utiliza
              <acronym class="acronym">PXE</acronym>, es posible dejar la
               dirección IP siempre y cuando no se active la
              opción del núcleo de BOOTP.  El servidor
              <acronym class="acronym">NFS</acronym> será en este caso el mismo que el
              servidor de <acronym class="acronym">TFTP</acronym>.</p></td></tr></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80827600"></a>29.7.2.2. Configuración utilizando BOOTP</h4></div></div></div><a id="idp80828240" class="indexterm"></a><p>A continuación se muestra la configuración
          equivalente utilizando <span class="application">bootpd</span>
	    (reducida a un único cliente).  Esta configuración
	    se debe situar en <code class="filename">/etc/bootptab</code>.</p><p>Por favor, recuerde que  <span class="application">etherboot</span>
            se debe compilar con la opción específica de
	    <code class="literal">NO_DHCP_SUPPORT</code> para que pueda utilizar BOOTP
	    y que <acronym class="acronym">PXE</acronym> <span class="emphasis"><em>requiere</em></span>
          <acronym class="acronym">DHCP</acronym>.  La única ventaja obvia de
            <span class="application">bootpd</span> es que se encuentra disponible en
           el sistema base.</p><pre class="programlisting">
.def100:\
  :hn:ht=1:sa=192.168.4.4:vm=rfc1048:\
  :sm=255.255.255.0:\
  :ds=192.168.4.1:\
  :gw=192.168.4.1:\
  :hd="/tftpboot":\
  :bf="/kernel.diskless":\
  :rp="192.168.4.4:/data/misc/diskless":

margaux:ha=0123456789ab:tc=.def100
          </pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80833744"></a>29.7.2.3. Preparación de un programa de arranque con
	  <span class="application">Etherboot</span></h4></div></div></div><a id="idp80834640" class="indexterm"></a><p><a class="link" href="http://etherboot.sourceforge.net" target="_top">La
            página web de Etherboot
	  </a> contiene
	  <a class="link" href="http://etherboot.sourceforge.net/doc/html/userman/t1.html" target="_top">
	  una amplia documentación</a> enfocada
          principalmente a los sistemas Linux pero en cualquier caso contiene
          información que puede resultar útil.  En los siguientes
          párrafos se describe brevemente como se puede utilizar
          <span class="application">etherboot</span> en un sistema FreeBSD.</p><p>Lo primero es instalar el port o paquete <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a>.  El port de
          <span class="application">etherboot</span> está en
          <code class="filename">/usr/ports/net/etherboot</code>.  Si el árbol
          de ports está instalado en el sistema basta con ejecutar
	  <code class="literal">make</code> en dicho directorio.  Por favor,
          lea  <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a> para saber más sobre los ports y
          los paquetes.</p><p>Se puede modificar la configuración de
          <span class="application">etherboot</span> (por ejemplo, para que use
	  <acronym class="acronym">TFTP</acronym> en lugar de <acronym class="acronym">NFS</acronym>) editando
          el fichero <code class="filename">Config</code> que se encuentra en el
          directorio fuente de <span class="application">etherboot</span>.</p><p>Para nuestros propósitos se utilizará un disquete
          de arranque.  Para utilizar otros métodos (PROM o un
	  programa <span class="trademark">MS-DOS</span>®) por favor consulte la documentación de
	  <span class="application">etherboot</span>.</p><p>Para crear un disco de arranque se debe insertar un disco en la
          unidad de disquetes de la máquina donde se ha instalado
          <span class="application">etherboot</span>, cambiar al directorio
	  <code class="filename">src</code> dentro del árbol de directorios de
          <span class="application">etherboot</span> y teclear:</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>gmake bin32/tipo_de_dispositivo.fd0</code></strong>
	</pre><p><em class="replaceable"><code>tipo_de_dispositivo</code></em> depende del tipo
          de tarjeta Ethernet que se encuentre instalada en la estación
          de trabajo sin disco.  Consulte el fichero
	  <code class="filename">NIC</code> en el mismo directorio para determinar
          cúal es el <em class="replaceable"><code>tipo_de_dispositivo</code></em> que
	  debe usted usar.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80851792"></a>29.7.2.4. Arranque con <acronym class="acronym">PXE</acronym></h4></div></div></div><p>Por defecto el cargador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> carga, valga la
          redundancia, el kernel vía <acronym class="acronym">NFS</acronym>.  El
	  El cargador se puede compilar para que utilice <acronym class="acronym">
          TFTP</acronym> en lugar de <acronym class="acronym">NFS</acronym> especificando la
	  opción <code class="literal">LOADER_TFTP_SUPPORT</code> dentro de
	  <code class="filename">/etc/make.conf</code>.  Observe los comentarios de
	  <code class="filename">/etc/defaults/make.conf</code> (o de
	  <code class="filename">/usr/share/examples/etc/make.conf</code> para
          sistemas 5.X) para saber más detalles.</p><p>Existen otras dos opciones de
          <code class="filename">make.conf</code> no documentadas que pueden
          ser útiles para arrancar una máquina sin disco a
          través del puerto serie:
	  <code class="literal">BOOT_PXELDR_PROBE_KEYBOARD</code> y
	  <code class="literal">BOOT_PXELDR_ALWAYS_SERIAL</code> (esta
          última sólo existe en FreeBSD 5.X).</p><p>Para utilizar <acronym class="acronym">PXE</acronym> cuando arranca la
          máquina normalmente el usuario tiene que seleccionar la
          opción <code class="literal">Boot from network</code> dentro del
          menú de opciones de la <acronym class="acronym">BIOS</acronym> o pulsar un
	  tecla de función cuando la máquina se está
          inicializando.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80859856"></a>29.7.2.5. Configuración de servidores de
          <acronym class="acronym">TFTP</acronym> y de <acronym class="acronym">NFS</acronym></h4></div></div></div><a id="idp80861136" class="indexterm"></a><a id="idp80862288" class="indexterm"></a><p>Si <acronym class="acronym">PXE</acronym> o
	  <span class="application">etherboot</span> se encuentran configurados para
	  utilizar <acronym class="acronym">TFTP</acronym> se necesita activar
	  <span class="application">tftpd</span> en el servidor de ficheros:
          </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Crear un directorio desde el cual el dæmon
              <span class="application">tftpd</span> servirá los
            ficheros, por ejemplo <code class="filename">/tftpboot</code>.</p></li><li class="step"><p>Añadir la siguiente línea a
	      <code class="filename">/etc/inetd.conf</code>:</p><pre class="programlisting">tftp	dgram	udp	wait	root	/usr/libexec/tftpd	tftpd -l -s /tftpboot</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Parece que al menos algunas versiones de
                <acronym class="acronym">PXE</acronym> utilizan la versión
                <acronym class="acronym">TCP</acronym>
                de <acronym class="acronym">TFTP</acronym>.  En este caso se puede
                añadir una segunda línea, donde se reemplace
                <code class="literal">dgram udp</code> por <code class="literal">stream
                tcp</code>.</p></div></li><li class="step"><p>Indicar a <span class="application">inetd</span> que
              vuelva a leer su fichero de configuración:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat
                /var/run/inetd.pid`</code></strong></pre></li></ol></div><p>Se puede situar el directorio
          <code class="filename">tftpboot</code> en cualquier parte del servidor.
          Debe asegurarse de que la localización se encuentra
          correctamente configurada tanto en
          <code class="filename">inetd.conf</code> como en
          <code class="filename">dhcpd.conf</code>.</p><p>En todos los casos también resulta necesario activar el
          sistema de <acronym class="acronym">NFS</acronym> y exportar los sistemas de
          ficheros adecuados, todo ello en el servidor de
          <acronym class="acronym">NFS</acronym>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Añadir lo siguiente a
              <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">nfs_server_enable="YES"</pre></li><li class="step"><p>Exportar el sistema de ficheros donde el directorio
              raíz sin disco se encuentra localizado añadiendo
              lo siguiente a <code class="filename">/etc/exports</code> (ajuste el
              punto de montaje de la unidad y sustituya
              <em class="replaceable"><code>margaux corbieres</code></em> por el
              nombre de las estaciones de trabajo sin disco, según
              corresponda):</p><pre class="programlisting"><em class="replaceable"><code>/data/misc</code></em> -alldirs -ro <em class="replaceable"><code>margaux corbieres</code></em></pre></li><li class="step"><p>Indicar a <span class="application">mountd</span> que vuelva a leer
	      su archivo de configuración.  Si en un primer paso se ha
              configurado la activación automática del sistema de
              <acronym class="acronym">NFS</acronym> en
              <code class="filename">/etc/rc.conf</code> lo mejor es reiniciar para que
              los cambios surtan efecto.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat
                /var/run/mountd.pid`</code></strong></pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80896336"></a>29.7.2.6. Construcción de un kernel sin
          disco</h4></div></div></div><a id="idp80896976" class="indexterm"></a><p>Si se utiliza <span class="application">etherboot</span>, se necesita
          crear un archivo de configuración para el kernel de la
          máquina sin disco que posea las siguientes opciones
          (además de las opciones del núcleo habituales):</p><pre class="programlisting">
options     BOOTP          # Use BOOTP to obtain IP address/hostname
options     BOOTP_NFSROOT  # NFS mount root filesystem using BOOTP info
	</pre><p>Puede resultar interesante utilizar además
          <code class="literal">BOOTP_NFSV3</code>,
	  <code class="literal">BOOT_COMPAT</code> y
          <code class="literal">BOOTP_WIRED_TO</code>
	  (consultar <code class="filename">LINT</code> en 4.X o
	  <code class="filename">NOTES</code> en sistemas 5.X).</p><p>Los nombres de estas opciones son nombres
          históricos y ligeramente confusos ya que permiten un uso
          indistinto tanto de <acronym class="acronym">DHCP</acronym> como de BOOTP dentro del
          núcleo (también resulta posible forzar la
          utilización única de o bien BOOTP o bien de
          <acronym class="acronym">DHCP</acronym>).</p><p>Contruir el núcleo (vea <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>) y copiarlo al lugar especificado
          en el archivo <code class="filename">dhcpd.conf</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cuando se utiliza <acronym class="acronym">PXE</acronym>, la
            construcción del núcleo con las opciones anteriores
            no resulta ser algo estrictamente necesario (aunque se
            recomienda).  Activar dichas opciones provoca un mayor
            tráfico de peticiones de <acronym class="acronym">DHCP</acronym> durante el
            arranque del núcleo, lo que puede dar lugar a
            pequeñas inconsistencias entre los nuevos valores y los
            los valores recuperados por <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> en casos muy
            específicos. La ventaja de utilizarlas consiste en que como
            un efecto colateral se configurará el nombre de la
            máquina. De otro modo tendríamos que configurar dicho
            nombre mediante otro método por ejemplo mediante la
            configuración específica de la máquina cliente
            a través del archivo <code class="filename">rc.conf</code>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para que el núcleo se pueda cargar sin problemas con
	    <span class="application">etherboot</span> en sistemas 5.X dicho
            núcleo tiene que tener compilado el soporte para
            <span class="emphasis"><em>device hints</em></span>.  Para ello normalmente se
            especifica la siguiente opción dentro del fichero
            de configuración del núcleo (consulte los comentarios
            del fichero <code class="filename">NOTES</code>):</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">hints		"GENERIC.hints"</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80909392"></a>29.7.2.7. Preparación del sistema de ficheros
          raíz</h4></div></div></div><a id="idp80910032" class="indexterm"></a><p>Se debe crear un sistema de ficheros raíz en las
          estaciones de trabajo sin disco, concretamente en la
          localización especificada por <code class="literal">root-path</code>
	  dentro de <code class="filename">dhcpd.conf</code>.  Las siguientes secciones
          describen dos formas de hacer esto.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80912336"></a>29.7.2.7.1. Utilización del <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span>
            <code class="filename">clone_root</code></h5></div></div></div><p>Este es el modo más rápido de crear un sistema de
          ficheros raíz, pero actulamente sólo se encuentra
          soportado en FreeBSD 4.X.  El <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> de shell se
	  encuentra en <code class="filename">/usr/share/examples/diskless/clone_root</code>
	  y debe ser configurado al menos para ajustar el lugar donde se
          construirá el sistema de ficheros (concretamente la
          variable <code class="literal">DEST</code>).</p><p>Consulte los comentarios que se encuentran al comienzo del
            <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> para conocer cuales son las instrucciones que
            debe seguir.  Allí se explica cómo se construye el
            sistema de ficheros base y como determinados ficheros se pueden
            sobreescribir de manera selectiva por versiones
            específicas para funcionar sin discos, para toda una subred
            o para una máquina individual.  También allí
            se muestran ejemplos de los ficheros
	    <code class="filename">/etc/fstab</code> y
            <code class="filename">/etc/rc.conf</code> para máquinas sin
            disco.</p><p>Los archivos <code class="filename">README</code> que se encuentran
	    dentro de <code class="filename">/usr/share/examples/diskless</code>
            contienen mucha información de base, que junto con
            el resto de ejemplos dentro del directorio
            <code class="filename">diskless</code> sirven para documentar un
            método de configuración distinto del que se
            utiliza en <code class="filename">clone_root</code> y en los <span class="quote">&#8220;<span class="quote">
	    scripts</span>&#8221;</span> del sistema de <code class="filename">/etc</code>, que resultan ser un tanto
            confusos.  No obstante se pueden utilizar a modo de referencia,
            excepto si se prefiere utilizar el método que se describe
            en ellos, en cuyo caso se necesitará modificar y
            adaptar los <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> de forma adecuada.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80928208"></a>29.7.2.7.2. Utilización del procedimiento estándar de
            <code class="command">make world</code>
	    </h5></div></div></div><p>Este método se puede utilizar tanto en
            FreeBSD 4.X o 5.X y se instalará un sistema completamente
            nuevo (no sólo el sistema de ficheros raíz) dentro de
            <code class="envar">DESTDIR</code>.  Basta con ejecutar el siguiente <span class="quote">&#8220;<span class="quote">
            script</span>&#8221;</span>:</p><pre class="programlisting">#!/bin/sh
export DESTDIR=/data/misc/diskless
mkdir -p ${DESTDIR}
cd /usr/src; make world &amp;&amp; make kernel
cd /usr/src/etc; make distribution</pre><p>Una vez ejecutado puede ser necesario ajustar los ficheros
	    <code class="filename">/etc/rc.conf</code> y
	    <code class="filename">/etc/fstab</code> que se encuentran en
	    <code class="envar">DESTDIR</code> de acuerdo con nuestras necesidades.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80932688"></a>29.7.2.8. Configuración de la partición de
          intercambio</h4></div></div></div><p>En caso de ser necesario se puede acceder a un fichero
          de intercambio (swap) a través del sistema
	  <acronym class="acronym">NFS</acronym>.  Uno de los métodos
          típicamente utilizados para realizar esta tarea ha sido
          retirado de la distribución 5.X.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80934352"></a>29.7.2.8.1. <acronym class="acronym">NFS</acronym> swap en sistemas FreeBSD 4.X</h5></div></div></div><p>La ubicación del fichero de intercambio y su
            tamaño se puede especificar con las opciones
	    FreeBSD-specific 128 y 129 de BOOTP/<acronym class="acronym">DHCP</acronym>.
            A continuación se muestran varios ejemplos de ficheros de
	    de configuración para <span class="application">
	    ISC DHCP 3.0</span> o
            <span class="application">bootpd</span>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Añadir las siguientes líneas al fichero
                <code class="filename">dhcpd.conf</code>:</p><pre class="programlisting">
# Global section
option swap-path code 128 = string;
option swap-size code 129 = integer 32;

host margaux {
  ... # Standard lines, see above
  option swap-path <em class="replaceable"><code>"192.168.4.4:/netswapvolume/netswap"</code></em>;
  option swap-size <em class="replaceable"><code>64000</code></em>;
}
	    </pre><p><code class="literal">swap-path</code> es la ruta al directorio donde
              se instalarán los archivos de intercambio.  Cada
              Cada fichero se denomina
                <code class="filename">swap.direccion-ip-del-cliente</code>.</p><p>Versiones más antiguas de
              <span class="application">dhcpd</span> usaban una sintáxis del
	      estilo de <code class="literal">option option-128 "...</code>, lo cual ya
	      no está soportado.</p><p><code class="filename">/etc/bootptab</code> normalmente
                utiliza la siguiente sintaxis:</p><pre class="programlisting">T128="192.168.4.4:/netswapvolume/netswap":T129=0000fa00</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El tamaño del fichero dedicado a intercambio
	            se debe expresar en <code class="filename">/etc/bootptab</code>
		    en formato hexadecimal.</p></div></li><li class="step"><p>En el servidor de ficheros <acronym class="acronym">NFS</acronym>
                donde va a residir el fichero de <span class="quote">&#8220;<span class="quote">swap</span>&#8221;</span> se debe(n)
		crear dicho(s) fichero(s)</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /volumenintercambiored/intercambiored</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /volumenintercambiored/intercambiored</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero bs=1024 count=64000 of=swap.192.168.4.6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 0600 swap.192.168.4.6</code></strong>
            </pre><p><em class="replaceable"><code>192.168.4.6</code></em> es la dirección IP del cliente sin disco.</p></li><li class="step"><p>En el servidor <acronym class="acronym">NFS</acronym> añadir a
                <code class="filename">/etc/exports</code> la siguiente línea:
                </p><pre class="programlisting">
<em class="replaceable"><code>/volumenintercambiored</code></em>  -maproot=0:10 -alldirs <em class="replaceable"><code>margaux corbieres</code></em>
	    </pre><p>A continuación indicar a
                <span class="application">mountd</span> que vuelva a leer el fichero
                <code class="filename">/etc/exports</code> como se ha indicado
                anteriormente.</p></li></ol></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80957520"></a>29.7.2.8.2. <acronym class="acronym">NFS</acronym> swap en FreeBSD 5.X</h5></div></div></div><p>El núcleo no soporta la activación del
            intercambio a través de <acronym class="acronym">NFS</acronym> en tiempo de
            arranque.  De esta forma la <span class="quote">&#8220;<span class="quote">swap</span>&#8221;</span> se debe activar
	    mediante los <span class="quote">&#8220;<span class="quote">scripts</span>&#8221;</span> montando un sistema de ficheros
            de lectura-escritura y creando y activando el fichero de
            intercambio.  Para crear un fichero de intercambio de un
            determinado tamaño se puede ejecutar lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/ruta/al/fichero/de/intercambio bs=1k count=1 oseek=100000</code></strong></pre><p>Para activar el intercambio se tiene que añadir
            la siguiente línea al fichero de configuración
	    <code class="filename">rc.conf</code>:</p><pre class="programlisting">swapfile=<em class="replaceable"><code>/ruta/al/fichero/de/intercambio</code></em></pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80962640"></a>29.7.2.9. Varios</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80963280"></a>29.7.2.9.1. Ejecución con un <code class="filename">/usr</code> de
            sólo lectura</h5></div></div></div><a id="idp80964304" class="indexterm"></a><p>Si la estación de trabajo sin disco se configura para
            utilizar el sistema X-Window se tiene que ajustar el fichero de
            configuración de xdm debido a que dicho fichero
            sitúa por defecto el fichero de <span class="quote">&#8220;<span class="quote">logs</span>&#8221;</span> de
            errores en el directorio <code class="filename">/usr</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80966736"></a>29.7.2.9.2. Uso de un servidor no-FreeBSD</h5></div></div></div><p>Cuando el servidor del sistema de ficheros raíz no
            ejecuta FreeBSD se tiene que crear un sistema de ficheros
            raíz sobre una máquina FreeBSD para después
            copiarlo al servidor original mediante las órdenes
	    <code class="command">tar</code> o <code class="command">cpio</code>.</p><p>En esta situación algunas veces surgen varios
            problemas relacionados con los dispositivos especiales que
            se encuentran en el directorio
            <code class="filename">/dev</code> debido a los diferentes
            tamaños de los enteros mayor/menor.  Una solución
            para este problema consiste en exportar un directorio del servidor
            no-FreeBSD, montar este directorio en la máquina FreeBSD anterior
            y ejecutar <code class="command">MAKEDEV</code> en dicha máquina para
            crear las entradas de dispositivo correctas (FreeBSD 5.0 y
            posteriores utilizan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> para ubicar nodos de
            dispositivos de forma transparente para el usuario de tal modo que
            la ejecución de <code class="command">MAKEDEV</code>  en estos
            sistemas no sirve para nada).</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-isdn"></a>29.8. RDSI</h2></div></div></div><a id="idp80976464" class="indexterm"></a><p><a class="link" href="http://www.alumni.caltech.edu/~dank/isdn/" target="_top">la
      página de RDSI de Dan Kegel</a> constituye un recurso de
      información bastante bueno sobre la tecnología RDSI
      (ISDN en inglés) y sobre el hardware relacionado.</p><p>A continuación se comenta un esquema rápido sobre
      RDSI:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si usted vive en Europa le puede resultar útil leer la
          sección sobre tarjetas RDSI.</p></li><li class="listitem"><p>Si se prevee utilizar RDSI principalmente para conectarse a
          Internet a través de un Proveedor de Servicios utilizando
          un mecanismo de marcación automática no dedicado
          (dial-up), se puede echar un vistazo a los Adaptadores de
          Terminal.  Dichos adaptadores proporciona la mayor flexibilidad y
          garantiza los mínimos problemas en caso de cambio de
          cambio de proveedor.</p></li><li class="listitem"><p>Si estamos conectados a dos LAN o conectando a Internet con una
          conexión RDSI dedicada puede ser interesante considerar la
          opción de usar un <span class="quote">&#8220;<span class="quote">router/bridge</span>&#8221;</span>
	  único.</p></li></ul></div><p>El coste es un factor importante a la hora de determinar
      qué solución se debe escoger.  Las siguientes opciones se
      encuentran ordenadas desde las más baratas hasta las
      más caras.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-isdn-cards"></a>29.8.1. Tarjetas RDSI</h3></div><div><span class="authorgroup">Escrito por  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hellmuth</span> <span class="surname">Michaelis</span></span>. </span></div></div></div><a id="idp80984656" class="indexterm"></a><p>La implementación de RDSI que posee FreeBSD soporta
        sólamente el estandar DSS1/Q.931 (también conocido como
        Euro-RDSI) utilizando tarjetas pasivas.  A partir de FreeBSD 4.4 se
        soportan también algunas tarjetas activas usando firmware que
        además soporta otros protocolos de señalización;
        esto también sucede con la primera tarjeta RDSI de
        acceso primario (PRI) soportada.</p><p>El software <span class="application">isdn4bsd</span> permite conectar
        con otras pasarelas RDSI utilizando IP sobre HDLC o bien PPP
        PPP síncrono: ambos mediante el uso del PPP del núcleo
        con <code class="literal">isppp</code>, una versión modificada del
        controlador <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sppp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sppp</span>(4)</span></a> o mediante la utilización del PPP de
	entorno de usuario, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.  Si se utiliza <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> de entorno
        de usuario se pueden agrupar dos o mas canales B de RDSI (channel
	bonding).  Existe también software que permite a una
        máquina responder a llamadas de teléfono y algunas
	cosas más como un modem de 300 baudios.</p><p>Cada vez se soportan más tarjetas RDSI bajo FreeBSD y los
        informes existentes muestra que FreeBSD se utiliza con dichas tarjetas de
	forma satisfactoria en toda Europa y también en otras partes del
        mundo.</p><p>Las tarjetas RDSI pasivas soportadas en FreeBSD son principalmente las
        que poseen el chip Infineon (antiguamente Siemens) ISAC/HSCX/IPAC.
        También las tarjetas RDSI con los chips de Cologne (en bus ISA
        exclusivamente), tarjetas PCI con el chip Winbond W6692, algunas
        tarjetas con combinaciones de los chips Tiger 300/320/ISAC y
        también algunas tarjetas basadas en chips propietarios como
        las AVM Fritz! PCI V.1.0 y AVM Fritz! PnP.</p><p>Actualmente las tarjetas RDSI activas soportadas son las
        AVM B1 (ISA y PCI) BRI, y las AVM T1 PCI PRI.</p><p>Se puede consultar
        <code class="filename">/usr/share/examples/isdn/</code> para
        obtener documentación sobre
        <span class="application">isdn4bsd</span> y también
        en <a class="link" href="http://www.freebsd-support.de/i4b/" target="_top">la
        página principal de isdn4bsd</a>, donde hay enlaces de
	ayuda, erratas y mucha más información útil,
        como por ejemplo el <a class="link" href="http://people.FreeBSD.org/~hm/" target="_top">manual de isdn4bsd</a>.</p><p>Si se quiere añadir soporte para un protoclo RDSI distinto
        para una tarjeta RDSI que no se encuentra soportada o para mejorar
        <span class="application">isdn4bsd</span> en algún aspecto por favor
	póngase en contacto con Hellmuth Michaelis.</p><p>Para realizar consultas referentes a la instalación,
        configuración y depuración de problemas relacionados con
        <span class="application">isdn4bsd</span> le recomendamos recurrir a la lista
        de correo <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80999504"></a>29.8.2. Adaptadores de terminal RDSI</h3></div></div></div><p>Los Adaptadores de Terminal (TA), son para RDSI lo que los modems
        son para las líneas de teléfono convencionales.</p><a id="idp81000528" class="indexterm"></a><p>La mayor parte de los TAs utilizan el conjunto de instrucciones AT
        de los modem Hayes y se pueden utilizar en lugar del modem.</p><p>Un TA opera básicamente de igual forma que un modem,
        diferenciándose en que las velocidades de conexión y
        <span class="quote">&#8220;<span class="quote">throughput</span>&#8221;</span> son mucho más grandes.  La
        configuración de <a class="link" href="#ppp" title="25.3. Uso de Kernel PPP">PPP</a> se realiza exactamente igual que para una
        configuración de modem convencional.</p><a id="idp81002704" class="indexterm"></a><p>La ventaja principal de utilizar un TA para conectarse a un
        proveedor de servicios de internet consiste en que se puede usar PPP
        dinámico.  Ya que el espacio de direcciones de IP se está
        direcciones de IP se está convirtiendo cada vez
        convirtiendo en un recurso cada dí más limitado y escaso
        los proveedores ya no desean proporcionar direcciones IP
        estáticas a sus clientes.  No obstante la mayoría de los
        <span class="quote">&#8220;<span class="quote">routers standalone</span>&#8221;</span> no son capaces de adquirir
        direcciones IP dinámicas.</p><p>Los TAs confían completamente en el dæmon de PPP
        que se está ejecutando para proporcionar fiabilidad y
        estabilidad en la conexión.  De esta forma si se tiene
        configurado PPP se puede migrar fácilmente de la
        utilización de modems analógicos al uso de RDSI.  No
        obstante si existía algún problema con PPP antes de
        efectuar la migración dichos problemas persistirán en
        RDSI.</p><p>Si se desea máxima estabilidad se puede utilizar la
        opción <a class="link" href="#ppp" title="25.3. Uso de Kernel PPP">PPP</a>, no el
	<a class="link" href="#userppp" title="25.2. Uso de User PPP">PPP a nivel de usuario</a>.</p><p>Se sabe que los siguientes TAs funcionan con FreeBSD:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Motorola BitSurfer y Bitsurfer Pro</p></li><li class="listitem"><p>Adtran</p></li></ul></div><p>La mayoría de los demás TAs probablemente
        también funcionen puesto que los fabricantes siempre tratan de
        que sus productos puedan aceptar la mayoría de las
        órdenes AT.</p><p>El problema que existe con los TAs es que, como sucede con los
        modems, se necesita tener una buena tarjeta serie instalada en el
        sistema.</p><p>Se recomienda consultar el tutorial <a class="link" href="../../articles/serial-uart/index.html" target="_top">FreeBSD Serial
	Hardware</a> para obtener una comprensión detallada del
        funcionamiento de los dispositivos serie en FreeBSD y para comprender las
        diferencias entre puertos serie síncronos y
        asíncronos.</p><p>Un TA que se ejecuta a través de un puerto serie
        (asíncrono) está limitado a 115.2 Kbs, aunque la
        conexión RDSI sea de 128 Kbs. Para utilizar completamente
        el ancho de banda que RDSI proporciona, se debe conectar el TA a una
        tarjeta serie síncrona.</p><p>No se engañe creyendo que comprando un TA interno
        hará desaparecer los problemas
	síncronos/asíncronos. Los TA internos simplemente
        disponen de un chip de puerto serie instalado de fábrica.
        Lo único que se consigue con estos dispositivos es no tener
        que enchufarlos a la red elétrica ahorrando así un
	enchufe y no tener que comprar un cable serie, pero los problemas
	dichos anteriormente permanecen.</p><p>Una tarjeta asíncrona con un TA resulta ser al menos tan
        rápida como un <span class="quote">&#8220;<span class="quote">router standalone</span>&#8221;</span> y si FreeBSD
        controla dicha tarjeta se puede adaptar más
        fácilmente.</p><p>La elección de una tarjeta síncrona/TA
        versus un <span class="quote">&#8220;<span class="quote">router standalone</span>&#8221;</span> se trata en la
	mayoría de los casos de una cuestión cuasi-religiosa.
        Han existido diversas discusiones sobre este tema en varias listas de
        correo. Nosotros recomendamos que busque información en los
	<a class="link" href="http://www.freebsd.org/search/index.html" target="_top">
        históricos</a> para para poder sopesar los pros y los
        contras que se han esgrimido en tales discusiones.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81021392"></a>29.8.3. <span class="quote">&#8220;<span class="quote">bridges/routers</span>&#8221;</span> RDSI <span class="quote">&#8220;<span class="quote">Stand-alone</span>&#8221;</span></h3></div></div></div><a id="idp81022544" class="indexterm"></a><p>Los <span class="quote">&#8220;<span class="quote">bridges</span>&#8221;</span> o <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span> RDSI no son
      específicos de FreeBSD o de cualquier otro sistema operativo.
        Para una descripción completa de la tecnología de
        <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> y de pasarela de red por favor consulte
        cualquier libro sobre redes.</p><p>En el contexto de esta sección los términos
        <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span>, pasarela y <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> se
	utilizarán indistintamente.</p><p>Según va bajando el coste de los <span class="quote">&#8220;<span class="quote">
        routers/bridges</span>&#8221;</span> RDSI su utilización entre el
        público en general va en aumento.
        Un <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> RDSI es una pequeña caja que se
        conecta directamente a la red Ethernet local y que gestiona sus propias
        conexiones con el <span class="quote">&#8220;<span class="quote">bridge/router</span>&#8221;</span> remoto.  Posee un
        software preconfigurado para comunicarse vía PPP y
        tambíen utilizando otros protocolos de uso común.</p><p>Un router sopota una mayor tasa de paquetes (throughput) que un
        <span class="quote">&#8220;<span class="quote">standalone TA</span>&#8221;</span>, ya que utiliza una conexión RDSI
        síncrona de forma completa.</p><p>El problema principal que surge con los <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span> y
        los <span class="quote">&#8220;<span class="quote">bridges</span>&#8221;</span> RDSI es que la interoperatibilidad entre
        fabricantes muchas veces causa problemas.  Si se está
	planificando conectarse a un proveedor de servicios resulta conveniente
        discutir previamente con ellos las necesidades y requisitos.</p><p>Si se tiene en mente conectar dos segmentos LAN tales como su LAN
        de casa y la LAN de su oficina RDSI proporciona la solución
        más simple y menos costosa de gestionar.  Esto es así
        porque al comprar usted mismo el equipamiento necesario para ambos
        extremos de la conexión tiene usted el control sobre el enlace
        y puede asegurar su correcto funcionamiento.</p><p>Por ejemplo, si queremos conecar una computadora casera o una
        sucursal de la red de oficinas con la oficinal central, se puede
        utilizar una configuración como la que se muestra a
        continuación.</p><div class="example"><a id="idp81038928"></a><div class="example-title">Ejemplo 29.2. Sucursal o red doméstica</div><div class="example-contents"><a id="idp81039568" class="indexterm"></a><p>La red utiliza una topología basada en bus con
          Ethernet tipo 10 base 2 (<span class="quote">&#8220;<span class="quote">thinnet</span>&#8221;</span>).  Se conecta, en
          caso de ser necesario, el <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> a la red cableada
	  mediante un <span class="quote">&#8220;<span class="quote">transceiver</span>&#8221;</span> AUI/10BT.</p><div class="mediaobject"><img src="advanced-networking/isdn-bus.png" alt="10 Base 2 Ethernet" /></div><p>Si nuestra sucursal o red hogar está compuesta
          únicamente por una computadora se puede utilizar un cable
          cruzado de par trenzado para conectar con el <span class="quote">&#8220;<span class="quote">router
	  standalone</span>&#8221;</span> de forma directa.</p></div></div><br class="example-break" /><div class="example"><a id="idp81045456"></a><div class="example-title">Ejemplo 29.3. Oficina central u otra LAN</div><div class="example-contents"><a id="idp81046096" class="indexterm"></a><p>La red utiliza una topología en estrella basada en
          Ethernet de 10 base T (<span class="quote">&#8220;<span class="quote">Par Trenzado</span>&#8221;</span>).</p><div class="mediaobject"><img src="advanced-networking/isdn-twisted-pair.png" alt="ISDN Network Diagram" /></div></div></div><br class="example-break" /><p>Una gran ventaja que poseen la mayoría de los
        <span class="quote">&#8220;<span class="quote">routers/bridges</span>&#8221;</span> es que pueden gestionar al mismo tiempo
        dos conexiones PPP <span class="emphasis"><em>independientes</em></span> destinadas a dos
        organizaciones distintas.  Esta funcionalidad no se proporciona en la
        mayoría de los TAs, excepto para determinados modelos
        (normalmente más caros) que se fabrican con dos puertos serie.
        No confunda esto con la agrupación de canales, MPP, etc.</p><p>Esta característica puede resultar muy útil si, por
        ejemplo, se dispone de una conexión RDSI dedicada con la
        oficina y queremos introducirnos en ella pero no queremos utilizar
        otra línea RDSI en el trabajo.  Un <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> situado
        en las instalaciones de la oficina puede gestionar una
        conexión de canal B dedicada (64 Kpbs) hacia internet y
        utilizar el otro canal B como una conexión de datos
        independiente.  El segundo canal B se puede utilizar para
        marcación remota (<span class="quote">&#8220;<span class="quote">dial-in</span>&#8221;</span> y <span class="quote">&#8220;<span class="quote">
        dial-out</span>&#8221;</span>) o para agrupación dinámica de canales
        (MPP, etc) en conjunción con el primer canal B con el objetivo
        de obtener un mayor ancho de banda.</p><a id="idp81053136" class="indexterm"></a><p>Un <span class="quote">&#8220;<span class="quote">bridge</span>&#8221;</span> Ethernet permite transmitir más
        tráfico aparte del tráfico IP.  Se puede transmitir
        IPX/SPX o cualquier otro protocolo que se esté utilizando.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nis"></a>29.9. NIS/YP</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div><div><span class="authorgroup">Ampliado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Eric</span> <span class="surname">Ogren</span></span> y <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81059664"></a>29.9.1. ?Qué es esto?</h3></div></div></div><a id="idp81060432" class="indexterm"></a><a id="idp81060944" class="indexterm"></a><a id="idp81061456" class="indexterm"></a><a id="idp81061968" class="indexterm"></a><a id="idp81062480" class="indexterm"></a><a id="idp81062992" class="indexterm"></a><a id="idp81063504" class="indexterm"></a><p>NIS, siglas de Network Information Services (Servicios de
        Información de Red), fué un servicio desarrollado por
        Sun Microsystems para centralizar la administración de sistemas
        <span class="trademark">UNIX</span>® (originalmente <span class="trademark">SunOS</span>&#8482;).  Actualmente se considera como un
        estándar de la industria; los principales sistemas tipo <span class="trademark">UNIX</span>®
        (<span class="trademark">Solaris</span>&#8482;, HP-UX, <span class="trademark">AIX</span>®, Linux, NetBSD, OpenBSD, FreeBSD, etc)
        implementan NIS.</p><a id="idp81066704" class="indexterm"></a><p>NIS también se conocía como el servicio de
        páginas amarillas pero debido a problemas legales debidos a
        la propiedad de marcas comerciales, Sun tuvo que cambiar el nombre.
        El antíguo término (<span class="quote">&#8220;<span class="quote">Yellow Pages</span>&#8221;</span> o yp)
	todavía se ve y se utiliza con frecuencia.</p><a id="idp81068240" class="indexterm"></a><p>Se trata de un sistema cliente servidor basado en llamadas RPC que
        permite a un grupo de máquinas que se encuentran definidas
        dentro de un dominio administrativo NIS compartir un conjunto de
        ficheros de configuración.  Esto permite al administrador de
        sistemas por un lado configurar clientes NIS de forma minimalista y
	por otro lado centralizar la gestión de los ficheros de
        configuración en una única ubicación (una sola
        máquina).</p><a id="idp81074000" class="indexterm"></a><p>Se trata de algo similar al sistema de dominio de <span class="trademark">Windows NT</span>®
        aunque la implementación interna no se puede comparar, la
        funcionalidad y el servicio obtenido son similares.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81075536"></a>29.9.2. Términos/procesos que debe usted conocer</h3></div></div></div><p>Existen varios conceptos y varios procesos de usuario que el
        usuario no versado en estos temas suele encontrarse la primera vez que
        se intenta implantar un servicio de NIS en FreeBSD, tanto si se intenta
        configurar un servidor como si se intenta configurar un cliente:</p><a id="idp81076560" class="indexterm"></a><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody><tr><td>NIS domainname</td><td>Un servidor maestro de NIS y todos sus clientes
                (incluyendo a sus servidores esclavos) poseen el mismo nombre
                dominio NIS.  Al igual que ocurre con el nombre de dominio de
                <span class="trademark">Windows NT</span>®, el nombre de dominio de NIS no tiene nada que ver
                con el nombre de dominio de DNS.</td></tr><tr><td><span class="application">portmap</span></td><td>Debe ejecutarse para que se activen las llamadas a
                procedimientos remotos (Remote Procedure Call o RPC)
		que son utilizadas por NIS.  Si
		<span class="application">portmap</span> no se está ejecutando
                no se podrá ejecutar ni clientes ni servidores de
		NIS.</td></tr><tr><td><span class="application">ypbind</span></td><td><span class="quote">&#8220;<span class="quote">Asocia</span>&#8221;</span> un cliente con un servidor NIS.
                Primeramente se lee el nombre de dominio NIS del sistema y
                utilizando RPC se conecta con el servidor.
                <span class="application">ypbind</span> es la parte central de la
                comunicación cliente servidor del sistema NIS;
                si <span class="application">ypbind</span> muere en una
                máquina cliente, dicha máquina no podrá
                acceder al servidor NIS.</td></tr><tr><td><span class="application">ypserv</span></td><td>Debe ejecutarse sólamente en los servidores NIS;
                se trata del proceso servidor de NIS.  Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a>
                muere, el servidor no será capaz de responder a
                peticiones NIS (no obstante, si se definen servidores NIS
                esclavos la situación puede recuperarse).  Existen
                algunas implementaciones de NIS (no es el caso de FreeBSD)
                que no intentan conectarse con otro servidor si el servidor
                con otro servidor si el servidor que se estaba
                que se estaba utilizando muere.  A menudo lo único que
		se puede hacer en estos casos es reiniciar el servidor (el
                proceso o la propia máquina) o el proceso
                <span class="application">ypbind</span> del cliente.</td></tr><tr><td><span class="application">rpc.yppasswdd</span></td><td>Otro proceso que sólo debe ejecutarse en el
                servidor maestro de NIS; se trata de un dæmon que permite
                a los clientes de NIS modificar las contraseñas de los
                usuarios.  Si no se ejecuta este dæmon los usuarios
                tendrán que entrar en el servidor maestro de NIS para
                cambiar sus contraseñas allí.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81098448"></a>29.9.3. ?Cómo funciona?</h3></div></div></div><p>Existen tres tipos de máquinas dentro del entorno
        NIS: los servidores maestros, los servidores esclavos y los clientes
        de NIS.  Los servidores actúan como repositorios centrales para
        almacenamiento de información de configuración.
        Los servidores maestros mantienen una copia maestra de dicha
        información, mientras que los servidores esclavos mantienen
        copias de la información maestra por motivos de redundancia.
        Los servidores se encargan de transmitir la información
        necesaria a los clientes a petición de estos
        últimos.</p><p>De esta forma se pueden compatir mucha información
        contenida en varios archivos.  Los ficheros <code class="filename">
	master.passwd</code>, <code class="filename">group</code> y <code class="filename">
	hosts</code> normalmente se comparten a través de NIS.
        Siempre que un proceso en un cliente necesita información que,
        en caso de no utilizar NIS, se podría recuperar de ficheros
        locales, en este caso se envía una solicitud al servidor NIS con
        el que nos encontramos asociados.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81101008"></a>29.9.3.1. Clases de máquinas</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp81102160" class="indexterm"></a><p><span class="emphasis"><em>Servidor de NIS maestro</em></span>.
              Este servidor, semejante a un controlador de dominio primario de
              <span class="trademark">Windows NT</span>® mantiene todos los archivos que utilizan los
              clientes.  Los ficheros <code class="filename">passwd</code>,
              <code class="filename">group</code> y algunos otros se encuentran
              ubicados en el servidor maestro.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Resulta posible configurar una máquina para que
              actúe como servidor NIS maestro para más de un
              dominio NIS.  No obstante esta configuración no se va a
              tratar en esta introducción, en la cual asumimos un
              entorno NIS de tamaño relativamente
              pequeño.</p></div></li><li class="listitem"><a id="idp81110352" class="indexterm"></a><p><span class="emphasis"><em>Servidores de NIS esclavos</em></span>.
              Semejantes a los controladores de backup de <span class="trademark">Windows NT</span>®,
              los servidores NIS esclavos se utilizan para proporcionar
              redundancia en entornos de trabajo donde la disponibilidad del
              servicio resulta muy importante.  Además se utilizan para
              distribuir la carga que normalmente soporta un servidor
              maestro: los clientes de NIS siempre se asocian con el servidor
              de NIS que posee mejor tiempo de respuesta, y esto
              y esto también incluye a los servidores de NIS
              esclavos.</p></li><li class="listitem"><a id="idp81113040" class="indexterm"></a><p><span class="emphasis"><em>Clientes NIS</em></span>.  Los clientes NIS, de
              forma semejante a las estaciones de trabajo de <span class="trademark">Windows NT</span>®, se
              validan contra un servidor NIS (en el caso de <span class="trademark">Windows NT</span>® se
              validan contra un controlador de dominio) para acceder al
	      sistema.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81116368"></a>29.9.4. Uso de NIS/YP</h3></div></div></div><p>Esta sección trata sobre cómo configurar y poner en
        funcionamiento un entorno de NIS sencillo.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Esta sección supone que se está utilizando
        utilizando FreeBSD 3.3 o posteriores.  Las instrucciones dadas
        aquí <span class="emphasis"><em>probablemente</em></span> funcionen
        también en cualquier versión de FreeBSD superior a la 3.0
        pero no podemos garantizar que esto sea así.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81118416"></a>29.9.4.1. Planificación</h4></div></div></div><p>Vamos a suponer que somos el administrador de un pequeño
          laboratorio de una universidad.  En este laboratorio, compuesto por
          15 máquinas FreeBSD, actualmente no existe ningún punto
          de administración centralizada; cada máquina posee sus
          sus propios <code class="filename">/etc/passwd</code> y <code class="filename">
          /etc/master.passwd</code>.  Estos ficheros se encuentran
          sincronizados el uno con el otro mediante intervención
          manual; por tanto, cuando queramos añadir un usuario a
          nuestro laboratorio tendremos que ejecutar
          <code class="command">adduser</code> en todas las máquinas.
          Claramente esta situación tiene que cambiar, de tal forma que
          hemos decidido crear un dominio NIS en el laboratorio usando dos
          máquinas como servidores NIS.</p><p>La configuración de nuestro laboratorio debería ser
          algo parecido a lo  siguiente:</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nombre de máquina</th><th>Dirección IP</th><th>Papel</th></tr></thead><tbody><tr><td><code class="systemitem">ellington</code></td><td><code class="systemitem">10.0.0.2</code></td><td>servidor NIS maestro</td></tr><tr><td><code class="systemitem">coltrane</code></td><td><code class="systemitem">10.0.0.3</code></td><td>Servidor NIS esclavo</td></tr><tr><td><code class="systemitem">basie</code></td><td><code class="systemitem">10.0.0.4</code></td><td>Estación de trabajo del profesorado</td></tr><tr><td><code class="systemitem">bird</code></td><td><code class="systemitem">10.0.0.5</code></td><td>máquina cliente</td></tr><tr><td><code class="systemitem">cli[1-11]</code></td><td><code class="systemitem">10.0.0.[6-17]</code></td><td>Resto de máquinas clientes</td></tr></tbody></table></div><p>Si se está configurando un esquema de NIS por primera vez
          es una buena idea detenerse a pensar cómo queremos implantar
          el sistema.  Existen varias decisiones que se deben tomar
          independientemente del tamaño de nuestra red.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81142608"></a>29.9.4.1.1. Elección del nombre de dominio NIS</h5></div></div></div><a id="idp81143248" class="indexterm"></a><p>Este nombre puede no ser el <span class="quote">&#8220;<span class="quote">nombre de
            dominio</span>&#8221;</span> al que estamos acostumbrados.  Resulta más
            preciso llamarlo <span class="quote">&#8220;<span class="quote">nombre de dominio NIS</span>&#8221;</span>.
            Cuando un cliente genera peticiones de NIS que llegan a todas las
            máquinas (broadcast) solicitando información se
            incluye el nombre de dominio NIS que tiene configurado.
            De esta forma, varios servidores de dominios distintos situados en
            la misma red pueden discriminar las peticiones recibidas.  Se puede
            pensar en el nombre de dominio NIS como un identificador de grupos
            de máquinas que se encuentran relacionados
            administrativamente de alguna forma.</p><p>Algunas organizaciones eligen utilizar su nombre de dominio de
            Internet como nombre de dominio NIS.  Esto no se recomienda ya que
	    puede causar confusión cuando se intentan depurar problemas
            de red.  El nombre de dominio NIS debería ser un nombre
            único dentro de nuestra red y resulta más
            útil aún si el nombre elegido puede describir de
            alguna forma al conjunto de máquinas que representa.
            Por ejemplo el departamento de arte de la empresa Acme puede
            utilizar como nombre de dominio <span class="quote">&#8220;<span class="quote">acme-art</span>&#8221;</span>.
            En nuestro ejemplo hemos utilizado el nombre
            <code class="literal">test-domain</code>.</p><a id="idp81146704" class="indexterm"></a><p>No obstante algunos sistemas operativos (de forma
            notable <span class="trademark">SunOS</span>&#8482;) utilizan como nombres de dominio nombres de
            Internet.  Si se poseen máquinas con esta
	    restricción no queda más remedio que
            <span class="emphasis"><em>utilizar</em></span> los nombres de dominio de Internet
            como nombres de dominio NIS.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81148496"></a>29.9.4.1.2. Requisitos físicos de los servidores</h5></div></div></div><p>Existen varias cosas que debemos tener en cuenta cuando se
            selecciona una máquina para actuar como servidor NIS.
            Una de las características desafortunadas del servicio de
            páginas amarillas es el alto nivel de dependencia que llegan
            a tener los clientes respecto del servidor de NIS.  Si el cliente
	    no puede contactar con el servidor NIS normalmente la
            máquina se queda en un estado totalmente inutilizable.
            La carencia de información de usuarios y grupos provoca que
            las máquinas se bloqueen.  Con esto en mente debemos
            debemos asegurarnos de escoger un servidor de NIS que no se
            reinicie de forma habitual o uno que no se utilice para
            para desarrollar.  Si se dispone de una red con poca carga
            puede resultar aceptable colocar el servidor de NIS en una
            máquina donde se ejecuten otros servicios pero en todo
            momento se debe tener presente que si por cualquier motivo el
            servidor de NIS quedara inutilizable afectaría a
            <span class="emphasis"><em>todas</em></span> las máquinas de forma
            negativa.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81150160"></a>29.9.4.2. Servidores NIS</h4></div></div></div><p>Las copias canónicas de toda la información que
          mantiene el sistema de páginas amarillas se almacenan en una
          única máquina denominada servidor maestro de NIS.
          Las bases de datos utilizadas para almacenar la información
	  se denominan mapeos NIS.  En FreeBSD estas asociaciones o mapeos se
          almacenan en el directorio <code class="filename">/var/yp/[nombrededominio]</code>
 	  donde <code class="filename">[nombrededominio]</code> es el nombre del dominio
          de NIS que el servidor gestiona.  Un único servidor NIS puede
          gestionar varios dominios al mismo tiempo de forma que resulta
          posible tener varios directorios como el anterior, uno por cada
          dominio soportado.  Cada dominio posee su conjunto de mapeos
          independiente y propio.</p><p>Los servidores maestro y esclavos manejan todas las peticiones de
          a través del dæmon <code class="command">ypserv</code>.
          <code class="command">ypserv</code> se responsabiliza de recibir
          peticiones de los clientes NIS.  Estas peticiones se traducen a una
          ruta dentro del servidor.  Esta ruta localiza un fichero de base de
          datos determinado del servidor de NIS, y finalmente <code class="command">
          ypserv</code> se encarga de transmitir la información de
          dicha base de datos de vuelta al cliente que la
          solicitó.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81174096"></a>29.9.4.2.1. Configuración de un servidor de NIS maestro</h5></div></div></div><a id="idp81174736" class="indexterm"></a><p>La configuración de un servidor de NIS maestro puede
            resultar relativamente sencilla dependiendo de las necesidades que
            se tengan.  FreeBSD viene preconfigurado por defecto con un servicio
	    NIS.  Todo lo que necesitamos es añadir la siguiente
            línea en <code class="filename">/etc/rc.conf</code> y
            FreeBSD se encarga del resto.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><pre class="programlisting">nisdomainname="test-domain"</pre><p>
                Esta línea establece el nombre de dominio NIS como
                <code class="literal">test-domain</code>, cuando se realiza la
                configuración de la red (por ejemplo, después
                de un reinicio).</p></li><li class="step"><pre class="programlisting">nis_server_enable="YES"</pre><p>
                Esta variable indica a FreeBSD que ejecute los procesos
                necesarios para actuar como un servidor de NIS la
                próxima vez que se configure el subsistema de
                red.</p></li><li class="step"><pre class="programlisting">nis_yppasswdd_enable="YES"</pre><p>
                Esto permite activar el dæmon
                <code class="command">rpc.yppasswdd</code> el cual, como se ha
                mencionado anteriormente, permite a los usuarios realizar
                cambios de contraseña desde las máquinas clientes
                de NIS.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dependiendo de la configuración de NIS podemos
              necesitar añadir algunas entradas más.  Consulte
              la <a class="link" href="#network-nis-server-is-client" title="29.9.10. Servidores NIS que actúan también como clientes NIS">sección sobre
                servidores NIS que también actúan como
                clientes</a>, más adelante en el texto, para saber
              más sobre esto.</p></div><p>Una vez hecho esto todo lo que tenemos que hacer es ejecutar
            <code class="command">/etc/netstart</code> como superusuario.  Esta
            orden realiza los pasos de configuración necesarios
            utilizando los valores de las variables definidas en
            <code class="filename">/etc/rc.conf</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81187664"></a>29.9.4.2.2. Inicialización de los mapeos de NIS</h5></div></div></div><a id="idp81188304" class="indexterm"></a><p>Las <span class="emphasis"><em>asociaciones o mapeos de NIS</em></span>
            no son más que ficheros de base de datos.
            Estos ficheros se generan a partir de los ficheros de
            configuración contenidos en el directorio <code class="filename">
            etc/</code> excepto para el caso del fichero <code class="filename">
            etc/master.passwd</code>.  Esto es así por una buena
            razón ya que no suele ser buena idea propagar las
            contraseñas de <code class="systemitem">root</code> y de otras cuentas
            de administración a todos los servidores NIS del dominio.
            servidores NIS del dominio. Así, antes de inicializar los
            mapeos se debe ejecutar:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/master.passwd /var/yp/master.passwd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi master.passwd</code></strong></pre><p>Se deben borrar todas las entradas que hagan referencia a
            cuentas del sistema
            (<code class="systemitem">bin</code>, <code class="systemitem">tty</code>,
	    <code class="systemitem">kmem</code>, <code class="systemitem">games</code>,
            etc), junto con cualquier cuenta que no deseemos que se transmita
            a los clientes NIS (por ejemplo la cuenta de <code class="systemitem">
            root</code> y cualquier otra cuenta con UID 0 (el del
            superusuario)).</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Asegúrese de que
            <code class="filename">/var/yp/master.passwd</code> no se puede leer ni por
            grupos ni por el resto de usuarios (modo 600).  Utilice
            <code class="command">chmod</code> en caso de necesidad.</p></div><a id="idp81198288" class="indexterm"></a><p>Una vez hecho esto es hora de inicializar las asociaciones de
            NIS.  FreeBSD incluye un <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> denominado
            <code class="command">ypinit</code> para realizar esta tarea (consulte su
            página del manual para obtener más
            información).   Recuerde que este <span class="quote">&#8220;<span class="quote">script</span>&#8221;</span> se
            encuentra disponible en la mayoría de los sistemas <span class="trademark">UNIX</span>®,
            pero no en todos.  En sistemas Digital UNIX/Compaq Tru64 UNIX se
            denomina <code class="command">ypsetup</code>.  Debido a que se pretende
            generar asociaciones para un servidor NIS maestro vamos a
            ejecutar <code class="command">ypinit</code> con la opción
            <code class="option">-m</code>.  A modo de ejemplo, suponiendo que todos los
            pasos comentados anteriormente se han realizado con éxito,
            ejecute:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>ypinit -m test-domain</code></strong>
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <strong class="userinput"><code>n</code></strong>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <strong class="userinput"><code>coltrane</code></strong>
next host to add:  <strong class="userinput"><code>^D</code></strong>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <strong class="userinput"><code>y</code></strong>

[..salida de la generacion de mapeos..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</pre><p><code class="command">ypinit</code> debería haber creado el
            fichero <code class="filename">/var/yp/Makefile</code> a partir de
            <code class="filename">/var/yp/Makefile.dist</code>.
            Una vez creado este archivo presupone que se está usando un
            entorno NIS con un único servidor utilizando
            sólamente máquinas FreeBSD.  Debido a que
            <code class="literal">test-domain</code> posee también un servidor
            NIS esclavo se debe editar el fichero <code class="filename">
            var/yp/Makefile</code>:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi
              /var/yp/Makefile</code></strong></pre><p>Se debe comentar la línea que dice:</p><pre class="programlisting">NOPUSH = "True"</pre><p>(si es que no se encuentra ya comentada).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81217744"></a>29.9.4.2.3. Configuración de un servidor NIS
            esclavo</h5></div></div></div><a id="idp81218384" class="indexterm"></a><p>La configuración de un servidor NIS esclavo resulta ser
            incluso más sencilla que la del maestro.  Basta con entrar
            en el servidor esclavo y editar <code class="filename">/etc/rc.conf</code>
            de foma semejante a como se realizó en el apartado
            anterior.  La única diferencia consiste en que ahora debemos
            utilizar la opción <code class="option">-s</code> cuando ejecutemos
            ejecutemos <code class="command">ypinit</code>.  A continuación del
            parámetro <code class="option">-s</code> se debe especificar el nombre
	    del servidor maestro de modo que la orden tendría que ser
            algo parecido a esto:</p><pre class="screen">coltrane<code class="prompt">#</code> <strong class="userinput"><code>ypinit -s ellington test-domain</code></strong>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <strong class="userinput"><code>n</code></strong>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</pre><p>En estos momentos debemos tener un nuevo directorio llamado
	    <code class="filename">/var/yp/test-domain</code>.  Las copias de los
            mapeos del servidor maestro se almacenan en dicho directorio.
            Es nuestra responsabilidad como administradores asegurar que dichas
            copias permanecen actualizadas en todo momento.  La siguiente
            entrada en el archivo <code class="filename">/etc/crontab</code> del
            servidor esclavo se encarga de realizar esta tarea:</p><pre class="programlisting">20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre><p>Estas dos líneas obligan al servidor esclavo a
            sincronizar los mapeos con el servidor maestro.  Estas entradas no
            son obligatorias ya que el servidor maestro siempre intenta
            comunicar cualquier cambio que se produzca en sus asociaciones
            a todos los servidores esclavos ya que la información de,
            esclavos, ya que la información de, por ejemplo,
            contraseñas es de vital importancia para el funcionamiento
            de los sistemas que dependen del servidor.  No obstante es una
            buena idea obligar a que se realicen estos cambios mediante las
            entradas anteriores.  Esto resulta ser incluso más
            importante en redes de sobrecargadas donde las actualizaciones de
            asociaciones pueden algunas veces no llegar a realizarse de forma
            completa.</p><p>A continuación se ejecuta
            <code class="command">/etc/netstart</code> en el servidor esclavo de igual
            de igual forma que se hizo con el servidor maestro; esto relanza
            de nuevo el servidor de NIS.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81226064"></a>29.9.4.3. Clientes NIS</h4></div></div></div><p>Un cliente de NIS establece lo que se conoce con el nombre de
          asociación (bind en inglés) con un servidor NIS
          NIS determinado utilizando el dæmon <code class="command">
	  ypbind</code>.  <code class="command">ypbind</code> comprueba el dominio
          por defecto del sistema (especificado mediante
          <code class="command">domainname</code>) y comienza a enviar peticiones
          RPC a todos los elementos de la red local (broadcast).  Estas
          peticiones especifican el nombre del dominio con el que se quiere
          establecer la asociación.  Si esta petición alcanza una
          petición alcanza un servidor NIS configurado para servir dicho
          dominio el servidor responde a la petición e
          <code class="command">ypbind</code> almacenará la dirección de
          dicho servidor.  Si existen varios servidores disponibles (un maestro
          y varios esclavos, por ejemplo), <code class="command">ypbind</code>
          utilizará la dirección del primero en responder.
          A partir de este punto el cliente dirigirá el resto de sus
          peticiones NIS directamente a la dirección IP almacenada.
          Ocasionalmente <code class="command">ypbind</code> envía un
          <span class="quote">&#8220;<span class="quote">ping</span>&#8221;</span> sobre el servidor para comprobar que en efecto
          se encuentra funcionando.  Si no se recibe contestación al
          ping dentro de un espacio de tiempo determinado
          <code class="command">ypbind</code> marca el dominio como <span class="quote">&#8220;<span class="quote">sin
          asociar</span>&#8221;</span> y comienza de nuevo a inundar la red con la esperanza
          de localizar algún otro servidor NIS.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81230544"></a>29.9.4.3.1. Configuración de un cliente NIS</h5></div></div></div><a id="idp81231184" class="indexterm"></a><p>La configuración de un cliente FreeBSD de NIS resulta ser
            una operación extremadamente sencilla.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Editar el fichero
                <code class="filename">/etc/rc.conf</code> y añadir las
                siguientes líneas para establecer el nombre de dominio
                NIS y para que se ejecute
                <code class="command">ypbind</code> al arranque de la red:</p><pre class="programlisting">nisdomainname="test-domain"
nis_client_enable="YES"</pre></li><li class="step"><p>Para importar todas las entradas de contraseñas del
                servidor de NIS hay que eliminar todas las cuentas de usuario
                de <code class="filename">/etc/master.passwd</code> y utilizar
		<code class="command">vipw</code> para añadir la siguiente
                línea al final de dicho fichero:</p><pre class="programlisting">+:::::::::</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Esta línea permite que cualquiera abra una cuenta
                  en local, siempre que dicha cuenta se encuentre definida en
                  las asociaciones de cuentas y contraseñas del
                  servidor NIS. Existen varias formas de configurar los
                  clientes NIS modificando esta línea.  Consulte la
                  <a class="link" href="#network-netgroups" title="29.9.7. Uso de Netgroups">sección sobre
                    netgroups</a> que se encuentra más adelante en
		  este mismo texto.  Si quiere saber más puede consultar
                  el libro de O'Reilly <code class="literal">Managing NFS and
                    NIS</code>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Se debe mantener al menos una cuenta local (por ejemplo,
                  una cuenta que no se importe a través de NIS) en
                  el fichero <code class="filename">/etc/master.passwd</code> y
                  además dicha cuenta debería ser miembro del
                  grupo <code class="systemitem">wheel</code>.  Si algo va mal con el
                  procedimiento descrito esta cuenta se puede utilizar
                  para entrar en la máquina cliente de forma remota
                  para posteriormente convertirse en superusuario e intentar
                  solucionar el problema.</p></div></li><li class="step"><p>Para importar todas las entradas de grupo posibles del
                servidor NIS se debe añadir la siguiente línea
                al fichero <code class="filename">/etc/group</code>:</p><pre class="programlisting">+:*::</pre></li></ol></div><p>Después de completar estos pasos deberímos ser
	    capaces de ejecutar <code class="command">ypcat passwd</code> y ver la
	    asociación de contraseñas que se encuentra en el
            servidor de NIS</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81271888"></a>29.9.5. Seguridad en NIS</h3></div></div></div><p>En general cualquier usuario remoto puede realizar peticiones de
	RPC a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> y recuperar los contenidos de las asociaciones
        de NIS siempre y cuando el usuario remoto conozca el nombre de
        dominio de NIS.  Para evitar este tipo de transacciones no autorizadas,
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> soporta una característica denominada
        <span class="quote">&#8220;<span class="quote">securenets</span>&#8221;</span> la cual se puede utilizar para limitar el
        acceso a un determinado conjunto de máquinas.  En el arranque
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> intenta cargar la información de
        <span class="quote">&#8220;<span class="quote">securenets</span>&#8221;</span> a partir de un fichero denominado
     	<code class="filename">/var/yp/securenets</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Esta ruta de fichero varía dependiendo del camino
          especificado con la opción <code class="option">-p</code>.  Dicho fichero
          contiene entradas compuestas de, por un lado, un rango de red y por
          otro una máscara de red, separados por espacios en blanco.
          Las líneas que comienzan por <span class="quote">&#8220;<span class="quote">#</span>&#8221;</span> se consideran
          comentarios.  A continuación se muestra un ejemplo de un
          fichero <span class="quote">&#8220;<span class="quote">securenet</span>&#8221;</span>:</p></div><pre class="programlisting"># admitir conexiones desde localhost -- obligatorio
127.0.0.1     255.255.255.255
# admitir conexiones desde cualquier host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# admitir conexiones desde cualquier host
# between 10.0.0.0 to 10.0.15.255
# esto incluye las maquinas en el 'testlab'
10.0.0.0      255.255.240.0</pre><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> recibe una petición de una
        dirección que coincide con alguna de las reglas especificadas
        en el fichero se procesa la petición.  Si no existe ninguna
        coincidencia la petición se rechaza y se graba un mensaje de
        aviso.  Si el archivo
        <code class="filename">/var/yp/securnets</code> no existe
        <code class="command">ypserv</code> acepta conexiones de cualquier
        máquina.</p><p>El programa <code class="command">ypserv</code> también posee soporte
        para el paquete de Wietse Venema denominado <span class="application">
	tcpwrapper</span>.  Este paquete permite utilizar los ficheros
        de configuración de <span class="application">tcpwrapper</span> para
        realizar control de acceso en lugar de utilizar <code class="filename">
	var/yp/securenets</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Aunque ambos mecanismos de control de acceso proporcionan un
          grado de seguridad mayor que no utilizar nada resultan vulnerables
          a ataques de <span class="quote">&#8220;<span class="quote">falsificación de IPs</span>&#8221;</span>.  El
	  cortafuegos de la red donde se implanta el servicio de NIS
          debería encargarse de bloquear el tráfico
          específico de dicho servicio.</p><p xmlns="http://www.w3.org/1999/xhtml">Los servidores que utilizan
          <code class="filename">/var/yp/securenets</code>
          pueden no prestar servicio a clientes NIS legítimos cuando se
          trabaja con implementaciones arcaicas de TCP/IP.   Algunas de estas
          implementaciones ponen a cero todos los bits de máquina
          cuando se realizan broadcast y/o pueden fallar al especificar la
          máscara de red en el mismo caso, por citar algunos
          ejemplos.  Mientras que algunos de estos problemas se pueden
	  solucionar variando la configuración del cliente en otros
          casos podemos vernos obligados a prescindir del cliente en
	  cuestión o a prescindir del fichero <code class="filename">
          var/yp/securenets</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Se desaconseja la utilización de <code class="filename">
          var/yp/securenets</code> en un sistema con una
          implementación arcaica de TCP/IP y puede suponer una
          pérdida de funcionalidad para grandes zonas de la red.</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp81293904" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">La utilización del paquete
          <span class="application">tcpwrapper</span> incrementa la latencia del
          servidor NIS.  El retardo adicional introducido puede ser lo
          suficientemente grande como para causar la expiración de
	  ciertos temporizadores de los programas clientes, especialmente en
          redes muy cargadas o con servidores de NIS lentos.  Si se
          experimentan estos síntomas en varias máquinas
	  clientes, puede ser conveniente convertir dichas máquinas
          en servidores NIS esclavos y obligarlas a asociarse con ellas
          mismas.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81295440"></a>29.9.6. Prohibir el acceso a determinados usuarios</h3></div></div></div><p>En nuestro laboratorio de ejemplo existe una
        máquina denominada <code class="systemitem">basie</code> que
        actúa sólo como una estación de trabajo para el
        profesorado.  No queremos sacar a esta máquina del dominio NIS
        pero nos damos cuenta de que el fichero <code class="filename">passwd</code>
        que se encuentra en el servidor de NIS posee cuentas tanto para
        profesores como para alumnos. ?Qué podemos
        hacer?.</p><p>Existe una forma de prohibir el acceso a determinados usuarios
        sobre una determinada máquina incluso aunque se encuentren dados
        de alta en la base de datos de NIS.  Para realizar esto todo lo que
        debemos hacer es añadir
        <code class="literal">-nombredeusuario</code> al final del
        fichero <code class="filename">/etc/master.passwd</code> en la máquina
        cliente donde <em class="replaceable"><code>nombredeusuario</code></em> es el nombre
        de usuario del usuario al que queremos prohibirle el acceso.
        Esto se debe realizar a poder ser mediante
        <code class="command">vipw</code> ya que <code class="command">vipw</code> realiza
        comprobaciones de seguridad sobre los cambios realizados y
        además se encarga de reconstruir la base de datos de
        contraseñas cuando se termina la edición. Por ejemplo,
        si quisiéramos prohibir el acceso al usuario <code class="systemitem">
        bill</code> a la máquina <code class="systemitem">basie</code>
        haríamos:</p><pre class="screen">basie<code class="prompt">#</code> <strong class="userinput"><code>vipw</code></strong>
<strong class="userinput"><code>[añadimos -bill al final y salimos]</code></strong>
vipw: rebuilding the database...
vipw: done

basie<code class="prompt">#</code> <strong class="userinput"><code>cat /etc/master.passwd</code></strong>

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &amp;:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
+:::::::::
-bill

basie<code class="prompt">#</code></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-netgroups"></a>29.9.7. Uso de Netgroups</h3></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><a id="idp81309904" class="indexterm"></a><p>El método descrito en la sección anterior funciona
        razonablemente bien si las reglas especiales se definen para un
        conjunto pequeño de usuarios y/o máquinas.  En dominios
        admnistrativos grandes puede que se nos <span class="emphasis"><em>olvide</em></span>
        prohibir el acceso a algún usuario en determinadas
        máquinas perdiendo de esta forma el principal beneficio de
        utilizar el servicio de páginas amarillas:<span class="emphasis"><em>
	administración centralizada</em></span>.</p><p>La solución creada por los desarrolladores de NIS se
        denomina <span class="emphasis"><em>netgroups</em></span>.  Su propósito se
        asemeja al concepto de grupos utilizado por los sistemas <span class="trademark">UNIX</span>®.  La
        diferencia principal es la carencia de un identificador
        numérico y la habilidad para definir un <span class="quote">&#8220;<span class="quote">netgroup</span>&#8221;</span>
        que incluye tanto a cuentas de usuario como a otros
        <span class="quote">&#8220;<span class="quote">netgroups</span>&#8221;</span>.</p><p>Los netgroups se desarrollaron para gestionar redes grandes y
        y complejas con cientos de usuarios y máquinas.  Por un lado
        esto es una Cosa Buena si nos encontramos en tal situación
        pero por otro lado esta complejidad añadida hace que sea casi
        imposible de explicar a través de ejemplos sencillos.  El
        ejemplo que va a utilizar en lo que queda de sección
        ilustrará este hecho.</p><p>Vamos a suponer que la exitosa introducción del servicio de
        páginas amarillas en nuestro laboratorio ha llamado la
        atención de nuestros jefes.  Nuestra siguiente tarea consiste en
        extender el dominio de NIS para que cubra otras máquinas del
        campus.  Las tablas que se muestran a continuación contienen los
        nombres de los nuevos usuarios y máquinas junto con una breve
        descripción de ellas.</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre del Usuario/usuarios</th><th>Descripción</th></tr></thead><tbody><tr><td><code class="systemitem">alpha</code>, <code class="systemitem">beta</code></td><td>Empleados normales del departamento de IT</td></tr><tr><td><code class="systemitem">charlie</code>, <code class="systemitem">delta</code></td><td>Los nuevos aprendices del departamento de IT</td></tr><tr><td><code class="systemitem">echo</code>, <code class="systemitem">foxtrott</code>, <code class="systemitem">golf</code>, ...</td><td>Empleados normales</td></tr><tr><td><code class="systemitem">able</code>, <code class="systemitem">baker</code>, ...</td><td>Los actuales internos</td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Nombre de la Máquina(s)</th><th>Descripción</th></tr></thead><tbody><tr><td><code class="systemitem">guerra</code>, <code class="systemitem">muerte</code>,
                <code class="systemitem">hambre</code>,
                <code class="systemitem">peste</code></td><td>Los servidores más
                importantes. Sólo los empleados de IT pueden
                entrar en estas máquinas</td></tr><tr><td><code class="systemitem">orgullo</code>, <code class="systemitem">avaricia</code>,
                <code class="systemitem">envidia</code>, <code class="systemitem">ira</code>,
                <code class="systemitem">lujuria</code>, <code class="systemitem">pereza</code></td><td>Servidores de menor importancia.  Todos los miembros del
                departamento de IT pueden entrar en ellos.</td></tr><tr><td><code class="systemitem">uno</code>, <code class="systemitem">dos</code>,
                <code class="systemitem">tres</code>, <code class="systemitem">cuatro</code>,
                ...</td><td>Estaciones de trabajo ordinarias.  Sólo los
                empleados <span class="emphasis"><em>actuales</em></span> pueden utilizar estas
                máquinas.</td></tr><tr><td><code class="systemitem">trashcan</code></td><td>Una máquina muy vieja sin ningún dato
                dato crítico.  Incluso los internos pueden utilizar
                esta máquina.</td></tr></tbody></table></div><p>Si se trata de implementar estas restricciones a nivel de usuario
        particular tendríamos que añadir una línea
        <code class="literal">-usuario</code> a cada fichero
        <code class="filename">passwd</code> del sistema para cada usuario que tuviera
        prohibido el acceso a dicho sistema.  Si nos olvidamos de una sola
        entrada podrímos tener serios problemas.  Puede ser factible
        realizar esta configuración cuando se instala el servicio pero
        no obstante el riesgo que corremos al mantener este sistema de
	restricciones en el día día es muy alto.  Después
        de todo Murphy era un optimista.</p><p>La gestión de esta situación mediante netgroups
        ofrece varias ventajas.  Cada usuario no tiene que tratarse de una
        forma individualizada; basta con añadir un usuario a uno o
        más netgroups y posteriormente permitir o prohibir el acceso
        para todos los usuarios del netgroup.  Si se añade una nueva
        máquina al servicio de NIS simplemente tendremos que definir
        restricciones de acceso para los netgroups definidos en la
        red.  Si se añade un nuevo usuario bastará con
        añadir dicho usuario a un netgroup existente. Estos cambios son
        independientes unos de otros: se acabó la necesidad de aplicar
        la frase <span class="quote">&#8220;<span class="quote">por cada combinación de usuario y máquina
          haga esto y esto</span>&#8221;</span>.  Si hemos planificado nuestro servicio de
        NIS cuidadosamente, sólo tendremos que modificar un fichero de
        configuración en un determinado servidor para permitir o denegar
        estos accesos.</p><p>El primer paso consiste en la inicialización de la
        asociación o mapeo del netgroup.  La orden de FreeBSD
       <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a> no crea este mapeo por defecto pero una vez creado
        será tenido en cuenta por la implementación de NIS.
       Para crear una asociación vacía simplemente
        escriba:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/netgroup</code></strong></pre><p>y comienze a añadir contenido.  En nuestro ejemplo
        necesitamos al menos cuatro netgroups: empleados de IT,
         aprendices de IT, empleados normales e internos.</p><pre class="programlisting">IT_EMP  (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
INTERNS (,able,test-domain)     (,baker,test-domain)</pre><p><code class="literal">IT_EMP</code>, <code class="literal">IT_APP</code> etc.
        son los nombres de los netgroups.  Cada conjunto delimitado por
        paréntesis define una o más cuentas como pertenecientes
        al netgroup.  Existen tres campos definidos dentro de dichos de dichos
        grupos:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>El nombre de las máquinas donde los siguientes items
            son aplicables.  Si no se especifica un nombre de
            máquina la entrada se aplica a todas las máquinas
            existentes.  Si se especifica una máquina determinada
            entraremos en un mundo lleno de horrores y confusiones así
            que mejor no hacerlo.</p></li><li class="listitem"><p>El nombre de la cuenta que pertenece al netgroup que estamos
            definiendo.</p></li><li class="listitem"><p>El dominio NIS donde reside la cuenta.  Se pueden importar
            cuentas de otros dominios NIS (en caso de que usted pertenezca al
            extraño grupo de personas que gestionan más de un
            dominio NIS.</p></li></ol></div><p>Cada uno de estos campos puede contener comodines.  Consulte
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgroup&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">netgroup</span>(5)</span></a> para obtener más detalles.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp81403088" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">No se deben utilizar nombres de los netgroups superiores
          a ocho caracteres, especialmente si las máquinas de nuestro
          dominio utilizan sistemas operativos variados.  Los nombres son
          sensibles a las mayúsculas/minúsculas: se recomienda
          utilizar nombres en mayúsculas para distinguirlos de los
          usuarios o máquinas.</p><p xmlns="http://www.w3.org/1999/xhtml">Algunos clientes de NIS (distintos de los clientes FreeBSD) no
          pueden gestionar netgroups con un gran número de entradas.
          Por ejemplo algunas versiones antiguas de <span class="trademark">SunOS</span>&#8482; comienzan a
          presentar problemas si un netgroup contiene más de
          <span class="emphasis"><em>quince entradas</em></span>.  Se puede solventar este
          problema creando varios sub-netgroups de como mucho quince usuarios
          y finalmente creando el verdadero netgroup compuesto por los
          sub-netgroups:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre><p xmlns="http://www.w3.org/1999/xhtml">Se puede repetir este proceso si se tienen que definir
          más de 225 usuarios dentro de un único netgroup.</p></div><p>La activación y distribución de nuestro nuevo mapeo
        NIS resulta sencillo:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
ellington<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre><p>Esto genera las tres asociaciones NIS
        <code class="filename">netgroup</code>, <code class="filename">netgroup.byhost</code> y
        <code class="filename">netgroup.byuser</code>.  Utilice <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypcat</span>(1)</span></a> para
        comprobar si el nuevo mapeo NIS se encuentra disponible:</p><pre class="screen">ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byhost</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byuser</code></strong></pre><p>La salida de la primera orden debería parecerse a los
        contenidos del fichero
        <code class="filename">/var/yp/netgroup</code>.  La segunda orden no
        mostrará ninguna salida salvo que se hayan especificado
        netgroups específicos para máquinas.  La tercera orden
        se puede utilizar para obtener la lista de los netgroups a los que
        petenece un determinado usuario.</p><p>La configuración del cliente es bastante simple.  Para
        configurar el servidor <code class="systemitem">guerra</code> se debe ejecutar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> y sustituír la línea</p><pre class="programlisting">+:::::::::</pre><p>por</p><pre class="programlisting">+@IT_EMP:::::::::</pre><p>Ahora sólo se importan los datos para los usuarios
        que se encuentren definidos en el netgroup
        <code class="literal">IT_EMP</code>; dichos datos se importan en la base de datos
        de contraseñas de <code class="systemitem">guerra</code> y sólo se
        permite el acceso a estos usuarios.</p><p>Por desgraciaesta información también se aplica a la
        función <code class="literal">~</code> del shell y a todas las rutinas que
        traducen nombres de usuarios con los correspondientes identificadores
        númericos de usuario (uid).  En otras palabras, la orden
        <code class="command">cd
          ~</code> no va a funcionar, <code class="command">ls
          -l</code> muestra el identificador numérico en lugar del
        nombre de usuario y <code class="command">find . -user joe
          -print</code> produce un error de <span class="errorname">
        No such user</span> (<span class="quote">&#8220;<span class="quote">Usuario desconocido</span>&#8221;</span>).  Para
        solucionar esto debemos importar todas las entradas de usuario en la
        máquina cliente NIS pero sin permitirles el acceso.</p><p>Esto se puede realizar añadiendo otra línea
        al fichero <code class="filename">/etc/master.passwd</code>.  Esta línea
        debería contener lo siguiente:</p><p><code class="literal">+:::::::::/sbin/nologin</code>, lo que significa que se
        <span class="quote">&#8220;<span class="quote">importen todas las entradas pero que se reemplace el shell por
        <code class="filename">/sbin/nologin</code></span>&#8221;</span>.  Se puede sustituir
        cualquier campo de la entrada de contraseñas especificando un
        valor concreto para dicho campo en el fichero local
        local <code class="filename">/etc/master.passwd</code>.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">Asegúrese de que la línea
        <code class="literal">+:::::::::/sbin/nologin</code> se sitúa
          después de
        <code class="literal">+@IT_EMP:::::::::</code>.  Si esto no se cumple todas las
          cuentas de usuario  importadas del servidor NIS poseerán
          <code class="filename">/sbin/nologin</code> como shell de acceso.</p></div><p>Después de este cambio si se introduce un nuevo empleado
        en el departamento de IT basta con cambiar una asociación de
        NIS.  Se podría aplicar una aproximación similar para los
        servidores menos importantes sustituyendo la cadena
        <code class="literal">+:::::::::</code> en las versiones locales del fichero
        <code class="filename">/etc/master.passwd</code> por algo parecido a
        esto:</p><pre class="programlisting">+@IT_EMP:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre><p>Las líneas correspondientes para las estaciones de trabajo
        normales podrían ser:</p><pre class="programlisting">+@IT_EMP:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre><p>Y parece que todos nuestros problemas de gestión han
        desaparecido; hasta que unas semanas más tarde se produce un
        cambio en la política de gestión: el depatamento de IT
        comienza a alquilar interinos.  Los interinos de IT pueden utilizar
        las estaciones de trabajo normales y los servidores menos importantes
        y los aprendices de IT pueden acceder a los servidores principales.
        No nos queda más remedio que añadir un nuevo netgroup
        denominado <code class="literal">IT_INTERN</code> y añadir los nuevos
        interinos de IT a este nuevo grupo y comenzar a cambiar la
        la configuración de cada máquina, una por una...
        Como dice el antiguo proverbio: <span class="quote">&#8220;<span class="quote">Errores en la
          planificación centralizada conllevan grandes quebraderos de
          de cabeza globales</span>&#8221;</span>.</p><p>La habilidad que posee NIS para crear netgroups a partir de otros
        netgroups se puede utilizar para evitar la situación
        anterior.  Una posibilidad consiste en la creación de netgroups
        basados en roles.  Por ejemplo, se podría crear un netgroup
        denominado <code class="literal">BIGSRV</code> para definir las restricciones
        de acceso para los servidores importantes, otro grupo denominado
        <code class="literal">USERBOX</code> para las estaciones de trabajo... Cada uno
        de estos netgroups podría contener los netgroups que pueden
        acceder a dichas máquinas.  Las nuevas entradas para nuestro
        mapeo NIS de netgroups sería algo así:</p><pre class="programlisting">BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP  ITINTERN
USERBOX   IT_EMP  ITINTERN USERS</pre><p>Este método de definir restricciones de acceso funciona
        razonablemente bien si podemos definir grupos de máquinas
        que posean restricciones semejantes.  Por desgracia lo normal es que
        este caso resulta ser una excepción más que una regla.
        En la mayor parte de las ocasiones necesitaremos definir restricciones
        de acceso en función de máquinas individuales.</p><p>Las definiciones de netgroups específicos para determinadas
        máquinas constituyen el segundo método que se puede
        utilizar para gestionar el cambio de política del ejemplo
        que estamos explicando.  En nuestro caso el fichero
        <code class="filename">/etc/master.passwd</code> de cada máquina
        contiene dos líneas que comienzan por
        <span class="quote">&#8220;<span class="quote">+</span>&#8221;</span>.  La primera de ellas añade un netgroup con las
        cuentas que pueden acceder a esa máquina, mientras que la
        segunda añade el resto de cuentas con shell
        el resto de cuentas con shell
        <code class="filename">/sbin/nologin</code>.  Es una buena idea utilizar la
        versión <span class="quote">&#8220;<span class="quote">todo en mayúsculas</span>&#8221;</span> del nombre de
        máquina como el nombre del netgroup.  En otras palabras, las
        líneas deberían ser como la siguiente:</p><pre class="programlisting">+@<em class="replaceable"><code>BOXNAME</code></em>:::::::::
+:::::::::/sbin/nologin</pre><p>Una vez que hemos completado esta tarea para todas las
        máquinas nunca más resultará necesario modificar
        las versiones locales de <code class="filename">/etc/master.passwd</code>.
        Los futuros cambios se pueden gestionar simplemente modificando el
        mapeo o asociación de NIS.  A continuación se muestra un
        mapeo de netgroups para el escenario que se está explicando
        junto con algunas buenas ideas:</p><pre class="programlisting"># Definimos antes que nada los grupos de usuarios
IT_EMP    (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITINTERN  (,kilo,test-domain)     (,lima,test-domain)
D_INTERNS (,able,test-domain)     (,baker,test-domain)
#
# Ahora definimos unos pocos grupos basados en roles
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP    ITINTERN
USERBOX   IT_EMP  ITINTERN  USERS
#
# Y un grupo para tareas especiales
# Permitimos a echo y golf acceso a nuestra maquina-anti-virus
SECURITY  IT_EMP  (,echo,test-domain)  (,golf,test-domain)
#
# netgroups basados en maquinas
# Nuestros servidores principales
GUERRA   BIGSRV
HAMBRE   BIGSRV
# El usuario india necesita acceso a este servidor
PESTE  BIGSRV  (,india,test-domain)
#
# Este es realmente importante y necesita mas restricciones de
# acceso
MUERTE     IT_EMP
#
# La maquina-anti-virus que mencionabamos mas arriba
ONE       SECURITY
#
# Restringimos una maquina a un solo usuario
TWO       (,hotel,test-domain)
# [...otros grupos]</pre><p>Si estamos utilizando algun tipo de base de datos para gestionar
        cuentas de usuario debemos ser capaces de crear la primera parte del
        mapeo utilizando las herramientas proporcionadas por dicho sistema
        de base de datos.   De este modo los nuevos usuarios tendrán
        automáticamente derechos de acceso sobre las máquinas.
        </p><p>Una última, por precaución: puede no ser siempre
        aconsejable utilizar netgroups basados en máquinas.  Si se
        están desplegando, por ejemplo, un par de docenas o
        incluso cientos de máquinas idénticas en laboratorios
        de estudiantes, es mejor utilizar netgroups basados en roles en lugar
        de netgroups basados en máquinas individuales
        para mantener el tamaño de la asociación NIS dentro de
        unos límites razonables.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81480784"></a>29.9.8. Conceptos importantes a tener muy en cuenta</h3></div></div></div><p>Todavía quedan un par de cosas que tendremos que hacer de
        forma distinta a lo comentado hasta ahora en caso de encontrarnos
        dentro de un entorno de NIS.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cada vez que deseemos añadir un usuario a nuestro
            laboratorio debemos añadirlo al servidor NIS maestro
            <span class="emphasis"><em>únicamente</em></span> y es tarea fundamental del
            administrador <span class="emphasis"><em>acordarse de reconstruir los mapeos
            NIS</em></span>.  Si nos olvidamos de esto el nuevo usuario
            será incapaz de acceder a ninguna máquina excepto al
            servidor NIS.  Por ejemplo, si necesitáramos
            añadir el nuevo usuario <code class="systemitem">jsmith</code> al
            laboratorio tendríamos que ejecutar lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd jsmith</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make test-domain</code></strong></pre><p>Se puede ejecutar también <code class="command">adduser
              jsmith</code> en lugar de
            <code class="command">pw useradd jsmith</code>.</p></li><li class="listitem"><p><span class="emphasis"><em>No introduzca las cuentas de administración
            dentro de los mapeos de NIS</em></span>.  No es buena idea
            propagar cuentas y contraseñas de administración a
            máquinas donde residen usuarios que normalmente no
            deberían poder acceder a dichas cuentas.</p></li><li class="listitem"><p><span class="emphasis"><em>Mantenga el servidor maestro y esclavo de NIS
            seguros y minimize el tiempo de interrupción del
            servicio</em></span>.  Si alguien fuera capaz de comprometer la
            integridad de estas máquinas o de apagarlas los usuarios
            del dominio no podrían acceder a sus cuentas en
            ningún sistema.</p><p>Esto es la debilidad principal de cualquier sistema de
          administración centralizada.  Si no se protegen los servidores
          NIS tendremos frente a nosotros a una horda de usuarios bastante
          enfadados.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81490512"></a>29.9.9. Compatibilidad con NIS v1</h3></div></div></div><p> El servicio <span class="application">ypserv</span> de FreeBSD puede servir
        también a clientes NIS v1.  La implementación de NIS de
        FreeBSD sólo utiliza el protocolo NIS v2 aunque otras
        implementaciones incluyen soporte para el protocolo v1 por razones de
        compatibilidad con sistemas antiguos.  Los dæmones
        <span class="application">ypbind</span> suministrados con estos sistemas
        tratan de establecer una asociación con un servidor NIS
        versión 1 aunque puede que nunca la lleguen a utilizar (y
        pueden continuar realizando búsquedas mediante broadcast incluso
	cuando reciben una respuesta de un servidor versión 2).
        Tenga muy presente que mientras se soportan las llamadas normales de
	clientes v1, la versión de <span class="application">ypserv</span>
        actualmente suministrada no gestiona peticiones de transferencia de
        mapeos a través de la versión 1; en consecuencia no se
        puede utilizar como maestro o esclavo junto con servidores de NIS
        antiguos que sólo soporten el protocolo v1.  Por suerte quedan
        muy pocos servidores de este estilo en funcionamiento hoy en
	día.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nis-server-is-client"></a>29.9.10. Servidores NIS que actúan también como clientes
        NIS</h3></div></div></div><p>Se debe tener cuidado cuando se ejecuta
            <span class="application">ypserv</span> en un entorno multi-servidor
            donde las máquinas servidoras actúan
            también como máquinas clientes de NIS.  Normalmente
	    es una buena idea obligar a los servidores a que se asocien con
            ellos mismos mejor que permitirles emitir peticiones de
            asociación en broadcast, lo que posiblemente
	    terminará con los servidores asociados entre sí.
            Se pueden producir extraños fallos si un servidor del que
	    dependen otros deja de funcionar.  Puede darse que los contadores
	    de todos los clientes expiren e intenten asociarse a otro
	    servidor, pero el retardo puede ser considerable y los fallos
	    todavía podrín persistir debido a que los servidores
            se asocian contínuamente los unos a los otros.</p><p>Se puede obligar a una máquina a asociarse con un
            servidor en particular ejecutando
            <code class="command">ypbind</code> con la opción
            <code class="option">-S</code>.  Si no se quiere ejecutar esto manualmente
            cada vez que se reinice el servidor NIS se puede
            puede añadir la siguiente línea al fichero
            <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">nis_client_enable="YES"	# ejecuta tambien el soft cliente
nis_client_flags="-S <em class="replaceable"><code>NIS domain</code></em>,<em class="replaceable"><code>server</code></em>"</pre><p>Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypbind</span>(8)</span></a> para obtener más información.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81502672"></a>29.9.11. Formatos de contraseñas</h3></div></div></div><a id="idp81503312" class="indexterm"></a><p>Uno de los problemas más comunes que se encuentra la gente
            a la hora de implantar un servicio de NIS es la compatibilidad del
            formato de las contraseñas.  Si nuestro servidor de NIS
            utiliza contraseñas cifradas mediante DES sólo
            podrá aceptar clientes que utilicen DES.  Por ejemplo, si
            poseemos clientes de NIS <span class="trademark">Solaris</span>&#8482; en nuestra red casi seguro que
            necesitaremos utilizar contraseñas cifradas mediante
            DES.</p><p>Para comprobar qué formato utilizan los servidores y los
            clientes, se puede mirar en
            <code class="filename">/etc/login.conf</code>.  Si la máquina se
            configura para utilizar cifrado de contraseñas mediante
            DES, entonces la clase por defecto debe poseer una entrada como la
            siguiente:</p><pre class="programlisting">default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[Se han omitido otras entradas]</pre><p>Otros posibles valores para característica de
            <code class="literal">passwd_format</code> pueden ser
            <code class="literal">blf</code> y <code class="literal">md5</code> (para utilizar los
            algoritmos Blowfish y MD5 respectivamente).</p><p>Se debe reconstruir la base de datos de acceso siempre que se
        modifique el fichero
        <code class="filename">/etc/login.conf</code> mediante la ejecución
        de la siguiente orden como <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El formato de las contraseñas que ya se encuentran
              definidas en <code class="filename">/etc/master.passwd</code> no
              se actualizará hasta que el usuario cambie su
              contraseña, después de que se haya reconstruido la
	      base de datos de tipos de acceso.</p></div><p>A continuación para asegurarse de que las
        contraseñas se cifran con el formato seleccionado
            también debemos comprobar que la variable
            <code class="literal">crypt_default</code> dentro del fichero
            <code class="filename">/etc/auth.conf</code> da preferencia al formato de
            contraseña elegido.  Por ejemplo cuando se utilizan
            contraseñas cifradas con DES la entrada debe ser:</p><pre class="programlisting">crypt_default	=	des blf md5</pre><p>Si se realizan los pasos anteriores en cada una de las
        máquinas clientes y servidoras de nuestro entorno NIS podemos
        asegurar que todas utilizan el mismo formato de contraseña
        dentro de nuestra red.  Si se presentan problemas de validación
        con determinados usuarios en una determinada máquina cliente se
        puede empezar a investigar sobre el asunto.  Recuerde: si se quiere
        desplegar un servicio de páginas amarillas sobre un entorno de
        red heterogéneo probablemente se deba utilizar DES en todos los
        sistemas puesto que DES es el mínimo común
            denominador.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dhcp"></a>29.10. DHCP</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Greg</span> <span class="surname">Sutter</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81524432"></a>29.10.1. ?Qué es DHCP?</h3></div></div></div><a id="idp81525072" class="indexterm"></a><a id="idp81526224" class="indexterm"></a><p>DHCP, el Protocolo de Configuración Dinamica de
        Máquinas (<span class="quote">&#8220;<span class="quote">Dynamic Host Configuration Protocol</span>&#8221;</span>),
        especifica un método para configurar dinámicamente los
	parámetros de red necesarios para que un sistema pueda
        comunicarse efectivamente.  FreeBSD utiliza la implementación de
	DHCP proporcionada por el Internet Software Consortium (ISC) de tal
        forma que toda la información relativa a la configuración
        de DHCP se basa en la distribución proporcionada por el
        ISC.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81527888"></a>29.10.2. Contenido de esta seccións</h3></div></div></div><p>Esta sección describe tanto los componentes de la parte
        servidora como los componentes de la parte cliente del sistema DHCP del
        ISC.  El programa cliente, denominado forma parte por defecto de los
        sistemas FreeBSD y el programa servidor se puede instalar a partir del
        <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  Las principales
        fuentes de información son las páginas de manual
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a> junto
        con las referencias que se muestran a continuación en esta misma
        sección.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81532240"></a>29.10.3. Cómo funciona</h3></div></div></div><a id="idp81532880" class="indexterm"></a><p>Cuando el cliente de DHCP, <code class="command">dhclient</code>, se ejecuta
        en una máquina cliente, valga la redundancia, comienza a enviar
        peticiones <span class="quote">&#8220;<span class="quote">broadcast</span>&#8221;</span> solicitando información de
        configuración.  Por defecto estas peticiones se realizan contra
        el puerto UDP 68.  El servidor responde a través del puerto
        UDP 67 proporcionando al cliente una dirección IP junto con
        otros parámetros relevantes para el correcto funcionamiento del
        sistema en la red, tales como la máscara de red, el <span class="quote">&#8220;<span class="quote">
        router</span>&#8221;</span> por defecto y los servidores de DNS.  Toda esta
        información se <span class="quote">&#8220;<span class="quote">presta</span>&#8221;</span> y es válida
        sólo durante un determinado período de tiempo
        (configurado por el administrador del servidor de DHCP).  De esta forma
        direcciones IP asignadas a clientes que ya no se encuentran conectados
        a la red pueden ser reutilizadas al pasar determinado periodo de
        tiempo.</p><p>Los clientes de DHCP pueden obtener una gran cantidad de
        información del servidor.  Se puede encontrar una lista completa
        en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81536592"></a>29.10.4. Integración dentro de los sistemas FreeBSD</h3></div></div></div><p>FreeBSD se integra totalmente con el cliente DHCP del ISC, <code class="command">
        dhclient</code>.  Este soporte se proporciona tanto en el proceso de
        instalación como en la instalación por defecto del
        sistema base obviando la necesidad de poseer un conocimiento detallado
        de aspectos relacionados con la configuración de redes siempre y
        cuando se disponga de servicio de DHCP en la red dada.
        <code class="command">dhclient</code> se incluye en todas las distribuciones de
        FreeBSD desde la versión 3.2.</p><a id="idp81538384" class="indexterm"></a><p><span class="application">sysinstall</span> soporta DHCP.  Cuando se
          configura la interfaz de red la primera pregunta es:  <span class="quote">&#8220;<span class="quote">
          ?Quiere intentar configurar el interfaz mediante
          DHCP?</span>&#8221;</span>.  Si se responde afirmativamente se ejecutará
          <code class="command">dhclient</code> y si tiene éxito se
          procede con los siguientes pasos de configuración rellenandose
          automáticamente las variables de arranque necesarias para
          completar la configuración de la red.</p><p>Existen dos cosas que se deben realizar de tal forma que nuestro
          sistema utilice la configuración de red mediante DHCP al
          arrancar:</p><a id="idp81578192" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Asegurarse de que el dispositivo <code class="filename">
              bpf</code> se encuentra compilado en el kernel.  Para ello
              basta añadir <code class="literal">device bpf</code>
              (<code class="literal">pseudo-device bpf</code> en los sistemas
              FreeBSD 4.X) al fichero de configuración del kernel y
              recompilarlo e instalarlo.  Para más información
              sobre la construcción de núcleos consulte <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><p>El dispositivo <code class="filename">bpf</code> se encuentra
              activado por defecto dentro del fichero de configuración
              del núcleo (<code class="filename">GENERIC</code> que
              encontrará en su sistema FreeBSD de forma que si no se
	      está utilizando un fichero de configuración del
              núcleo específico (hecho a medida y/o por usted) no
              es necesario crear uno nuevo y se puede utilizar directamente
              <code class="filename">GENERIC</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para aquellas personas especialmente preocupadas por la
                seguridad debemos advertir de que el dispositivo <code class="filename">
                bpf</code> es el dispositivo que las aplicaciones de
                captura de paquetes utilizan para acceder a los mismos (aunque
                dichas aplicaciones deben ser ejecutadas como
                  <code class="systemitem">root</code>).  DHCP
                  <span class="emphasis"><em>requiere</em></span> la presencia de
                  <code class="filename">bpf</code> pero si la seguridad del sistema
                es más importante que la configuración
                  automática de la red no se recomienda instalar
                  <code class="filename">bpf</code> en el núcleo.</p></div></li><li class="listitem"><p>Editar el fichero <code class="filename">/etc/rc.conf</code> para
              para incluir lo siguiente:</p><pre class="programlisting">ifconfig_fxp0="DHCP"</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Asegúrese de sustituir <code class="literal">fxp0</code> con
                el nombre de interfaz que desea que se configure
                  dinámicamente, como se describe en <a class="xref" href="#config-network-setup" title="11.1. Configuración de Tarjetas de Red">Sección 11.1, &#8220;Configuración de Tarjetas de Red&#8221;</a>.</p></div><p>Si se utiliza una ubicación distinta para
              <code class="command">dhclient</code> o si se desea añadir opciones
              adicionales a <code class="command">dhclient</code> se puede
              incluir, adaptándolo a las condiciones particulares de
              cada usuario, lo siguiente:</p><pre class="programlisting">dhcp_program="/sbin/dhclient"
dhcp_flags=""</pre></li></ul></div><a id="idp81595600" class="indexterm"></a><p>El servidor de DHCP (<span class="application">dhcpd</span>) forma
          parte del <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  Este <span class="quote">&#8220;<span class="quote">
          port</span>&#8221;</span> también contiene la documentación de ISC
	  DHCP.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81603024"></a>29.10.5. Ficheros</h3></div></div></div><a id="idp81603664" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/dhclient.conf</code></p><p><code class="command">dhclient</code> necesita un fichero de
                configuración denominado
                <code class="filename">/etc/dhclient.conf</code>.  Normalmente este
                fichero  sólo contiene comentarios de forma que las
                opciones que se definen por defecto son razonablemente
                inocuas.  Este fichero de configuración se describe
                en la página de manual de
                <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient</code></p><p><code class="command">dhclient</code> se encuentra enlazado de
                forma estática y reside en <code class="filename">/sbin</code>.
                La página de manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> proporciona
                más información sobre la orden
                <code class="command">dhclient</code>.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient-script</code></p><p><code class="command">dhclient-script</code> es el <span class="quote">&#8220;<span class="quote">
	    script</span>&#8221;</span> de configuración del cliente de DHCP
            específico de FreeBSD.  Tiene todos los detalles en
            <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient-script</span>(8)</span></a> pero no necesita hacer ninguna
            modificación en él para que todo funcione
            correctamente.</p></li><li class="listitem"><p><code class="filename">/var/db/dhclient.leases</code></p><p>El cliente de DHCP mantiene una base de datos de
            préstamos en este fichero que se escribe de forma semejante
            a un <span class="quote">&#8220;<span class="quote">log</span>&#8221;</span>.  En <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.leases</span>(5)</span></a> puede
	    consultar una explicación ligeramente más
	    detallada.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81615824"></a>29.10.6. Lecturas recomendadas</h3></div></div></div><p>El protocolo DHCP se describe completamente en
        <a class="link" href="http://www.freesoft.org/CIE/RFC/2131/" target="_top">RFC 2131</a>.
        También tiene más información en
        <a class="link" href="http://www.dhcp.org/" target="_top">dhcp.org</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dhcp-server"></a>29.10.7. Instalación y configuración de un servidor de
	  DHCP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81618896"></a>29.10.7.1. Qué temas se tratan en esta sección</h4></div></div></div><p>Esta sección proporciona información sobre
	    cómo configurar un sistema FreeBSD de forma que actúe
            como un servidor de DHCP utilizando la implementación
              proporcionada por el Internet Software Consortium
              (ISC).</p><p>La parte servidora del paquete proporcionado por el ISC no
            se instala por defecto en los sistemas FreeBSD pero se puede
	    intalar como <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> desde <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  Consulte <a class="xref" href="#ports" title="Capítulo 4. Instalación de aplicaciones: «packages» y ports">Capítulo 4, <em>Instalación de aplicaciones: «packages» y ports</em></a> si necesita saber más sobre la
            Colección de <span class="quote">&#8220;<span class="quote">ports</span>&#8221;</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81622096"></a>29.10.7.2. Instalación del servidor DHCP</h4></div></div></div><a id="idp81622736" class="indexterm"></a><p>Para configurar un sistema FreeBSD como servidor de DHCP debe
            asegurarse de que el dispositivo <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a> está compilado
            dentro del núcleo. Para ello basta añadir
            <code class="literal">device bpf</code> (<code class="literal">
	    pseudo-device bpf</code> en FreeBSD 4.X) al fichero de
            configuración del núcleo y reconstruir el mismo.
            Si necesita saber más sobre el proceso de compilar e
            instalar el núcleo consulte <a class="xref" href="#kernelconfig" title="Capítulo 8. Configuración del kernel de FreeBSD">Capítulo 8, <em>Configuración del kernel de FreeBSD</em></a>.</p><p>El dispositivo <code class="filename">bpf</code> ya se encuentra
            activado en el fichero de configuración
              <code class="filename">GENERIC</code> del núcleo que se facilita
            con FreeBSD de tal forma que no resulta imprescindible crear un
            núcleo a medida para ejecutar DHCP.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para aquellas personas especialmente preocupadas por la
                seguridad debemos advertir de que el dispositivo
                <code class="filename">bpf</code> es el dispositivo que las
                aplicaciones de captura de paquetes utilizan para acceder a
                los mismos (aunque dichas aplicaciones deben ser ejecutadas
                como <code class="systemitem">root</code>).  DHCP
                  <span class="emphasis"><em>requiere</em></span> la presencia de
                  <code class="filename">bpf</code> pero si la seguridad del sistema
                es más importante que la configuración
                automática de la red no se recomienda instalar
                  <code class="filename">bpf</code> en el núcleo.</p></div><p>El siguiente paso consiste en editar el fichero de ejemplo
	    <code class="filename">dhcpd.conf</code> que se crea al instalar el
            <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>. Por defecto el
            fichero se llama
	    <code class="filename">/usr/local/etc/dhcpd.conf.sample</code>,
            así que se debe copiar este fichero a
	    <code class="filename">/usr/local/etc/dhcpd.conf</code> y a
              continuación realizar todos los cambios sobre este
              último.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81636944"></a>29.10.7.3. Configuración del servidor de DHCP</h4></div></div></div><a id="idp81637584" class="indexterm"></a><p>El fichero <code class="filename">dhcpd.conf</code> se compone
              de un conjunto de declaraciones que hacen referencia a
              máquinas y a subredes.  Esto se entenderá mejor
              mediante el siguiente ejemplo:</p><pre class="programlisting">option domain-name "ejemplo.com";<a id="domain-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
option domain-name-servers 192.168.4.100;<a id="domain-name-servers"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
option subnet-mask 255.255.255.0;<a id="subnet-mask"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>

default-lease-time 3600;<a id="default-lease-time"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
max-lease-time 86400;<a id="max-lease-time"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ddns-update-style none;<a id="ddns-update-style"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<a id="range"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
  option routers 192.168.4.1;<a id="routers"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<a id="hardware"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
  fixed-address mailhost.ejemplo.com;<a id="fixed-address"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Esta opción especifica el dominio que se proporciona
                a los clientes y que dichos clientes utilizan como dominio de
                búsqueda por defecto.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">resolv.conf</span>(5)</span></a>
                si necesita más información sobre qué
		significa el dominio de búsqueda.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name-servers"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Esta opción especifica la lista de servidores de DNS
                (seperados por comas) que deben utilizar los clientes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#subnet-mask"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La máscara de red que se proporciona a los clientes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#default-lease-time"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Un cliente puede solicitar un determinado tiempo de vida
                para el préstamo.  En caso contrario el servidor asigna
                un tiempo de vida por defecto mediante este valor (expresado en
                segundos).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#max-lease-time"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Este es el máximo tiempo que el servidor puede
                utilizar para realizar préstamos a los clientes.  Si un
                cliente solicita un tiempo mayor como máximo se
                  responderá con el valor aquí configurado,
                  ignorándose la petición de tiempo del
                  cliente.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ddns-update-style"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Esta opción especifica si el servidor de DHCP debe
                intentar actualizar el servidor de DNS cuando se acepta o se
                libera un préstamo.  En la implementación
                  proporcionada por el ISC esta opción es
                  <span class="emphasis"><em>obligatoria</em></span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#range"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Esto indica qué direcciones IP se pueden utilizar
                para ser prestadas a los clientes que las soliciten.  Las
                direcciones IP pertenecientes a este rango, incluyendo los
                extremos, se pueden entregar a los clientes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#routers"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Declara cúal es la pasarela por defecto que se
                  proporcionará a los clientes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#hardware"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Especifica la dirección MAC de una máquina,
	        de tal forma que el servidor de DHCP pueda identificar a la
                máquina cuando realice una petición.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#fixed-address"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Especifica que la máquina cliente debería
	        obtener siempre la misma dirección IP.  Recuerde
                que se puede utilizar un nombre de máquina para esto
                ya que el servidor de DHCP resolverá el nombre por
                sí mismo antes de devolver la información al
                cliente.</p></td></tr></table></div><p>Una vez que se ha acabado de configurar el fichero
	    <code class="filename">dhcpd.conf</code> se puede proceder con la
              ejecución del servidor mediante la siguiente
              orden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/isc-dhcpd.sh start</code></strong></pre><p>Si posteriormente se necesitan realizar cambios en la
            configuración anterior tenga en cuenta que el envío
            de la señál <code class="literal">SIGHUP</code> a la
              aplicación <span class="application">dhcpd</span>
              <span class="emphasis"><em>no</em></span> provoca que se lea de nuevo la
              configuración como suele ocurrir en la mayoría de
	      los dæmones.  Tendrá que enviar la señal
              <code class="literal">SIGTERM</code> para parar el proceso y
              posteriormente relanzar el dæmon utilizando la orden
              anterior.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81670608"></a>29.10.7.4. Ficheros</h4></div></div></div><a id="idp81671248" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcpd</code></p><p><span class="application">dhcpd</span> se encuentra
                  enlazado de forma estática y reside en el directorio
                  <code class="filename">/usr/local/sbin</code>.  La página de
		 manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcpd</span>(8)</span></a> que se instala con el <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span>
                 le proporcionará más información sobre
                  <span class="application">dhcpd</span>.</p></li><li class="listitem"><p><code class="filename">/usr/local/etc/dhcpd.conf</code></p><p><span class="application">dhcpd</span> necesita un fichero de
                configuración,   <code class="filename">
		/usr/local/etc/dhcpd.conf</code>.  Este fichero contiene
                toda la información relevante que se quiere proporcionar
                a los clientes que la  soliciten, junto con información
		relacionada con el funcionamiento del servidor.  Este fichero
                de configuración se describe en la página del
                manual  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.conf</span>(5)</span></a> que instala el <span class="quote">&#8220;<span class="quote">
		port</span>&#8221;</span>.</p></li><li class="listitem"><p><code class="filename">/var/db/dhcpd.leases</code></p><p>El servidor de DHCP mantiene una base de datos de
                  préstamos o alquileres dentro de este fichero, que
                  presenta un formato de fichero de <span class="quote">&#8220;<span class="quote">log</span>&#8221;</span>.  La
		  página del manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.leases</span>(5)</span></a> que se
                  instala con el <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> proporciona una
		  descripción ligeramente más larga.</p></li><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcrelay</code></p><p><span class="application">dhcrelay</span> se utiliza en
                entornos de red avanzados donde un servidor de DHCP
                reenvía una petición de un cliente hacia otro
                servidor de DHCP que se encuentra localizado en otra subred.
                Si se necesita esta funcionalidad se debe instalar el
                <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  La
                  página del manual <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcrelay</span>(8)</span></a> proporcionada por
                  el <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> contiene más detalles sobre
                  esto.</p></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dns"></a>29.11. DNS</h2></div><div><span class="authorgroup">Enviado por  <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81697232"></a>29.11.1. Resumen</h3></div></div></div><a id="idp81697872" class="indexterm"></a><p>FreeBSD utiliza por defecto una versión de BIND (Berkeley
        Internet Name Domain) que proporciona la implementación
	más común del protocolo de DNS.  DNS es el protocolo a
        través del cual los nombres de máquinas se asocian con
        direcciones IP y viceversa.  Por ejemplo una consulta preguntando por
        <code class="systemitem">www.FreeBSD.org</code> recibe una respuesta con la
        dirección IP del servidor web del Proyecto FreeBSD, mientras que
        una pregunta sobre <code class="systemitem">ftp.FreeBSD.org</code> recibe como
	respuesta la dirección IP correspondiente al servidor de FTP.
        El proceso inverso sucede de una forma similar.  Una pregunta
        relativa a una determinada dirección IP se resuelve al nombre de
        la máquina que la posee.  No se necesita ejecutar un servidor de
        DNS para poder realizar consultas y búsquedas de DNS.</p><a id="idp81703760" class="indexterm"></a><p>El DNS se coordina de forma distribuida a través de
        Internet utilizando un sistema en cierta forma complejo de servidores
        de nombres raíz autorizados y mediante otros servidores de
        nombres de menor escala que se encargan de replicar la
        información de dominios individuales con el objetivo de mejorar
        los tiempos de respuesta de búsquedas reiteradas de la misma
        información.</p><p>
        Este documento hace referencia a la versión estable BIND 8.X.
        BIND 9.X se puede instalar a través del <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span>
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/bind9/pkg-descr">net/bind9</a>.</p><p>
        El protocolo de DNS se encuentra definido en la RFC1034 y la RFC1035.
      </p><p>
        El <a class="link" href="http://www.isc.org/" target="_top">
        Internet Software Consortium (www.isc.org)</a> se encarga de
        de mantener el software de BIND.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81707216"></a>29.11.2. Terminología</h3></div></div></div><p>Para comprender este documento se deben definir los siguientes
        términos:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Término</th><th>Definición</th></tr></thead><tbody><tr><td>DNS directo (Forward DNS)</td><td>Asociación de nombres de máquinas con
	        direcciones IP</td></tr><tr><td>Origen</td><td>Se refiere al dominio cubierto por un determinado fichero
                de zona</td></tr><tr><td><span class="application">named</span>, BIND, servidor
                    de nombres (name server)</td><td>Nombres típicos que hacen referencia al paquete
                    servidor de nombres de BIND de FreeBSD</td></tr><tr><td>
		<a id="idp81719376" class="indexterm"></a>
		Resolver</td><td>Un proceso del sistema que utilizan las aplicaciones para
                hacer preguntas al servidor de nombres.</td></tr><tr><td>
		<a id="idp81721168" class="indexterm"></a>
		DNS inverso (Reverse DNS)</td><td>Lo contrario de lo que realiza el DNS directo;
                    asocia direcciones IP con nombres de máquinas</td></tr><tr><td>
		<a id="idp81722832" class="indexterm"></a>
		Zona Raíz</td><td>El comienzo de la jerarquía de zonas de Internet.
                Todas las zonas surgen a partir de una zona raíz de
                forma similar a como todos los directorios de un sistema de
                ficheros se encuentran a partir de un directorio raíz
		inicial.</td></tr><tr><td>Zona</td><td>Un dominio individual, subdominio o porción del
                    DNS que se encuentra administrado por la misma autoridad.</td></tr></tbody></table></div><a id="idp81725648" class="indexterm"></a><p>Ejemplos de zonas:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="systemitem">.</code> es la zona raíz</p></li><li class="listitem"><p><code class="systemitem">org.</code> es una zona localizada bajo la zona
            raíz</p></li><li class="listitem"><p><code class="systemitem">ejemplo.org</code> es una zona localizada bajo la
            zona <code class="systemitem">org.</code></p></li><li class="listitem"><p><code class="systemitem">foo.ejemplo.org.</code> es un subdominio o una zona
            ubicada bajo la zona <code class="systemitem">ejemplo.org.</code></p></li><li class="listitem"><p>
            <code class="systemitem">1.2.3.in-addr.arpa</code> es una zona que referencia a
            a todas las direcciones IP que se encuentran dentro del espacio de
            direcciones de 3.2.1.*.</p></li></ul></div><p>Como se puede observar la parte más específica de una
        máquina aparece más a la izquierda.  Por ejemplo
        <code class="systemitem">ejemplo.org</code> es más específico que
            <code class="systemitem">org.</code> y del mismo modo <code class="systemitem">org.</code> es
        más específico que la zona raíz.  El formato de
        cada parte del nombre de la máquina es muy similar al formato
        de un sistema de ficheros: el directorio
            <code class="filename">/dev</code> se encuentra dentro del directorio
        raíz, y así sucesivamente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81751888"></a>29.11.3. Razones para ejecutar un servidor de nombres</h3></div></div></div><p>Los servidores de nombres normalmente son de dos tipos:
            autoritarios y de cache.</p><p>Se necesita un servidor de nombres autoritario cuando:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>uno quiere proporcionar información de DNS al resto del
            mundo respondiendo con información autoritaria a las
            consultas recibidas.</p></li><li class="listitem"><p>un dominio, por ejemplo
            <code class="systemitem">ejemplo.org</code>, está  registrado y se
            necesita añadir nombres de máquinas bajo dicho
            dominio.</p></li><li class="listitem"><p>un bloque de direcciones IP necesita entradas de DNS inversas
            (de IP a nombre de máquina).</p></li><li class="listitem"><p>un servidor de nombres de <span class="quote">&#8220;<span class="quote">backup</span>&#8221;</span>, llamado
	    esclavo, debe responder a consultas cuando el servidor primario se
            encuentre caído o inaccesible.</p></li></ul></div><p>Se necesita un servidor caché cuando:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>un servidor de DNS local puede responder más
            rápidamente de lo que se haría si se tuviera que
            preguntar al servidor de nombres externo.</p></li><li class="listitem"><p>se desea reducir el tráfico global de red (se ha
            llegado a comprobar que el tráfico de DNS supone un 5% o
            más del total del tráfico que circula por
            Internet).</p></li></ul></div><p>Cuando se pregunta por <code class="systemitem">www.FreeBSD.org</code> el <span class="quote">&#8220;<span class="quote">
        resolver</span>&#8221;</span> normalmente pregunta al servidor de nombres del ISP
        de nivel superior y se encarga de recibir la respuesta.  Si se utiliza
        un servidor de DNS caché local la pregunta sólo se dirige
        una única vez hacia el exterior.  Dicha pregunta la realiza el
        servidor caché.  Posteriores consultas sobre el mismo nombres
        son respondidas directamente por este servidor.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81765328"></a>29.11.4. Cómo funciona</h3></div></div></div><p>En FreeBSD el dæmon de BIND se denomina
	<span class="application">named</span> por razones obvias.</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Fichero</th><th>Descripción</th></tr></thead><tbody><tr><td><span class="application">named</span></td><td>El dæmon de BIND</td></tr><tr><td><code class="command">ndc</code></td><td>El programa de control del dæmon</td></tr><tr><td><code class="filename">/etc/namedb</code></td><td>El directorio donde se almacena la información de
                las zonas de BIND</td></tr><tr><td><code class="filename">/etc/namedb/named.conf</code></td><td>El archivo de configuración del dæmon</td></tr></tbody></table></div><p>
        Los ficheros de zonas se encuentran normalmente bajo el directorio
        <code class="filename">/etc/namedb</code> y contienen la información
        que proporciona el servidor de nombres al resto de máquinas de
        Internet.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81779920"></a>29.11.5. Ejecución de BIND</h3></div></div></div><a id="idp81780560" class="indexterm"></a><p>
        Debido a que BIND se instala por defecto la configuración
            resulta ser bastante sencilla.
      </p><p>
        Para asegurarnos de que el dæmon se ejecuta al inicio del
         sistema se deben añadir las siguientes modificaciones en
        <code class="filename">/etc/rc.conf</code>:
      </p><pre class="programlisting">named_enable="YES"</pre><p>Para arrancar el dæmon de forma manual (una vez
        configurado)</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndc start</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81784784"></a>29.11.6. Ficheros de configuración</h3></div></div></div><a id="idp81785424" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81786576"></a>29.11.6.1. Uso de <code class="command">make-localhost</code></h4></div></div></div><p>Asegúrese de hacer los siguiente
        </p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/namedb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sh make-localhost</code></strong></pre><p>para que se cree el archivo de zona inversa
          <code class="filename">/etc/namedb/localhost.rev</code> de forma apropiada.
        </p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81790544"></a>29.11.6.2. <code class="filename">/etc/namedb/named.conf</code></h4></div></div></div><pre class="programlisting">// $FreeBSD$
//
// Consulte la pÃ¡gina man de named(8) para mÃ¡s detalles.  tiene
// alguna vez la necesidad de configurar un servidor primario
// asegÃºree de que entiende a la perfecciÃ³n los detalles peliagudos
// del funcionamiento del DNS.  Si hay errores, incluso triviales,
// puede sufrir pÃ©rdidas de conectividad ogenerar cantidades ingentes
// de trÃ¡fico inÃºtil hacia o desde Interne

options {
        directory "/etc/namedb";

// AdemÃ¡s de con la lÃ¡usula "forwarders" puedeobligar a su servidor
// de nombres a que nunca lance bÃºsquedas por su cuenta sino que
// se las pida a sus "forwarders". Esto se hace del siguiente modo:
//
//      forward only;

// Si su proveedor de acceso tiene a su alcance un servidor DNS
// escriba aquÃ­ su direcciÃ³n IP y descomente la lÃ­neaPodrÃ¡ usar
// su cachÃ© y por lo tanto reducir el trÃ¡fico DNS de Internet.
//

/*
        forwarders {
                127.0.0.1;
        };
*/</pre><p>
          Tal y como se dice en los comentarios del ejemplo para beneficiarnos
          de la caché se puede activar <code class="literal">forwarders</code>.
          En circunstancias normales un servidor de nombres busca de forma
          recursiva a través de Internet tratando de localizar un
          servidor de nombres que sea capaz de responder una determinada
          pregunta.  Si se activa esta opción por defecto se pasa a
          preguntar primero al servidor de nombres especificado (servidor o
          servidores) pudiendo aprovecharse de la información de
	  caché que dicho servidor tuviera disponible.  Si el servidor
          de nivel superior al nuestro se encuentra congestionado puede
          merecer la pena la activación de esta característica de
          <span class="quote">&#8220;<span class="quote">redirección</span>&#8221;</span> ya que se puede disminuir la carga
          de tráfico que dicho servidor tiene que soportar.</p><div xmlns="" class="warning"><h3 class="admontitle">Aviso: </h3><p xmlns="http://www.w3.org/1999/xhtml">La dirección IP <code class="systemitem">127.0.0.1</code> <span class="emphasis"><em>no</em></span> funciona
          aí.  Se debe cambiar esta dirección IP por un
          servidor de nombres válido.</p></div><pre class="programlisting">        /*
	 * Si hay un cortafuegos entre usted y los servidores de
	 * nombres que quiere consultar tendrÃ¡ que descoentar la
	 * siguiente directiva, "query-source".  Las versiones
	 * anteriores de BIND siempre hacÃ­an sus consultas a travÃ©s
	 * del puerto 53 pero BIND 8.1 utiliza por defecto un puerto no
	 * privilegiado.
         */
        // query-source address * port 53;

        /*
	 * Si lo va a ejecutar en un "cajÃ³n de arena" (o "sandbox")
	 * tendrÃ¡ que declarar una uicaciÃ³n diferente para el
	 * fichero de volcado de named.
         */
        // dump-file "s/named_dump.db";
};

// Nota: lo siguiente serÃ¡ incluÃ­do en futuras versiones.
/*
host { any; } {
        topology {
                127.0.0.0/8;
        };
};
*/

// La configuraciÃ³n de secundarios se explica de modo secillo a
// partir de aquÃ­.
//
// Si activa un servidor de nombres local no olvide incluÃ­r
// 127.0.0.1 en su /etc/resolv.conf para que sea ese servidor el
// primero al que se consulte.
// AsegÃºrese tambiÃ©n de activarlo en /etc/rc.con

zone "." {
        type hint;
        file "named.root";
};

zone "0.0.127.IN-ADDR.ARPA" {
        type master;
        file "localhost.rev";
};

zone
"0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.INT" {
        type master;
        file "localhost.rev";
};

// Nota: No use las direcciones IP que se muestran aquÃ­, son falsas
// y sÃ³lo se usancomo demostraciÃ³n y para una mejor comprensiÃ³n.
//
// Ejemplo de entradas en la configuraciÃ³n de secundarios.  Puede ser
// conveniente convertirse en secundario al menos del dominio en cuya
// zona estÃ¡ su dominio.  Cnsulte con su administrador de red para
// que le facilite la direcciÃ³n IP del servidor primario.
//
// No olvide incluÃ­r la zona del bucle inverso (IN-ADDR.ARPA).  (Son
// los primeros bytes de la direcciÃ³n IP correspondiente, en orden
// inverso, con ".IN-ADDR.ARPA" al final.)
//
// Antes de configurar una zona primara asegÃºresede haber comprendido
// completamente cÃ³mo funcionan DNS y BIND.  Hay errores que no son
// visibles fÃ¡cilmente.  La configuraciÃ³n de un secundario es, por
// el contrario, muchÃ­simo mÃ¡s sencilla.
//
// Nota: No se limite a copiar los ejemplos de mÃ¡s arriba. :-)
// Utilice nombres y direcciones reales.
//
// ADVERTENCIA: FreeBSD ejecuta bind en un sandbok (observe los
// parÃ¡meros de named (named_flags) en rc.conf).  El directorio que
// contiene las zonas secundarias debe tener permisos de escritura
// para bind.  Le sugerimos la siguiente secuencia de órdenes:
//
//      mkdir /etc/namedb/s
//      chown bind:bind /etc/namedb/s
//      chmod 750 /etc/namedb/s</pre><p>Si quiere más información sobre cómo
	  ejecutar BIND en un <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span> consulte
	  <a class="link" href="#network-named-sandbox" title="29.11.8. Ejecución de named en una &#8220; Sandbox&#8221;">Ejecución de named en
          un sandbox</a>.
	</p><pre class="programlisting">/*
zone "ejemplo.com" {
        type slave;
        file "s/ejemplo.com.bak";
        masters {
                192.168.1.1;
        };
};

zone "0.168.192.in-addr.arpa" {
        type slave;
        file "s/0.168.192.in-addr.arpa.bak";
        masters {
                192.168.1.1;
        };
};
*/</pre><p>Dentro del fichero <code class="filename">named.conf</code> se muestran
          ejemplos de entradas de esclavo tanto para las zonas directas como
          para las inversas.</p><p>Para cada nueva zona administrada se debe crear una entrada de
          zona dentro del fichero
	  <code class="filename">named.conf</code></p><p>Por ejemplo la entrada de zona más simple para el dominio
	  <code class="systemitem">ejemplo.org</code> puede ser algo como
          esto:</p><pre class="programlisting">zone "ejemplo.org" {
	type master;
	file "ejemplo.org";
};</pre><p>Esta zona es una zona maestra ( observe la línea de
          <code class="option">type</code>, y mantiene la información de la zona en
          <code class="filename">/etc/namedb/ejemplo.org</code> tal como se indica en la
          línea de <code class="option">file</code>.</p><pre class="programlisting">zone "ejemplo.org" {
	type slave;
	file "ejemplo.org";
};</pre><p>En el caso del esclavo la información de la zona se
          transmite desde el servidor de nombres maestro y se almacena en el
          fichero especificado.  Cuando el servidor maestro <span class="quote">&#8220;<span class="quote">
	  muere</span>&#8221;</span> o no puede ser alcanzado el servidor de nombres esclavo
          puede responder a las peticiones debido a que posee la
          información de la zona.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81814864"></a>29.11.6.3. Ficheros de zona</h4></div></div></div><p>
          A continuación se muestra un fichero de una zona maestra para
          el dominio <code class="systemitem">ejemplo.org</code>, que se encuentra ubicado en
          <code class="filename">/etc/namedb/ejemplo.org</code>:</p><pre class="programlisting">$TTL 3600

example.org. IN SOA ns1.ejemplo.org. admin.ejemplo.org. (
                        5               ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        86400 )         ; Minimum TTL

; DNS Servers
@       IN NS           ns1.ejemplo.org.
@       IN NS           ns2.ejemplo.org.

; Machine Names
localhost       IN A    127.0.0.1
ns1             IN A    3.2.1.2
ns2             IN A    3.2.1.3
mail            IN A    3.2.1.10
@               IN A    3.2.1.30

; Aliases
www             IN CNAME        @

; MX Record
@               IN MX   10      mail.ejemplo.org.</pre><p>
          Tenga muy en cuenta que todo nombre de máquina que termina en
          <span class="quote">&#8220;<span class="quote">.</span>&#8221;</span> es tratado como si fuera un nombre de
          máquina completo mientras que cualquier otro nombre sin el
          <span class="quote">&#8220;<span class="quote">.</span>&#8221;</span> final se trata como una referencia relativa al
          dominio de origen de la zona. Por ejemplo <code class="literal">www</code> se
	  traduce a <code class="literal">www + origen</code>.  En nuestro fichero de
          zona ficticio nuestro origen es <code class="systemitem">ejemplo.org</code> de forma
          que <code class="literal">www</code> se convierte en <code class="systemitem">
          www.ejemplo.org</code>
        </p><p>
          El formato de un fichero de zona es el siguiente:
        </p><pre class="programlisting">nombrederegistro IN tipodeentrada valor</pre><a id="idp81825104" class="indexterm"></a><p>
          Los registros de DNS que más se utilizan son:
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SOA</span></dt><dd><p>Comienzo de Zona con Autoridad (Start Of zone Authority)</p></dd><dt><span class="term">NS</span></dt><dd><p>Un servidor de nombres con autoridad para una
              una determinada zona</p></dd><dt><span class="term">A</span></dt><dd><p>Una dirección IP de una máquina</p></dd><dt><span class="term">CNAME</span></dt><dd><p>El nombre canónico de una máquina para definir un alias</p></dd><dt><span class="term">MX</span></dt><dd><p>mail exchanger</p></dd><dt><span class="term">PTR</span></dt><dd><p>Un puntero a un nombre de dominio (utilizados para
              definir el DNS inverso)
	      </p></dd></dl></div><pre class="programlisting">
ejemplo.org. IN SOA ns1.ejemplo.org. admin.ejemplo.org. (
                        5               ; Serial
                        10800           ; Refresh after 3 hours
                        3600            ; Retry after 1 hour
                        604800          ; Expire after 1 week
                        86400 )         ; Minimum TTL of 1 day</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="systemitem">ejemplo.org.</code></span></dt><dd><p>el nomre de dominio, también el origen para
              el fichero de zona</p></dd><dt><span class="term"><code class="systemitem">ns1.ejemplo.org.</code></span></dt><dd><p>el servidor de nombres
                    primario/autoritario para esta zona</p></dd><dt><span class="term"><code class="literal">admin.ejemplo.org.</code></span></dt><dd><p>la persona responsable de esta zona; observe que
              la dirección de correo electrónico aparece con la @
              sustituida por un punto.  (<code class="email">&lt;<a xmlns="" class="email" href="mailto:admin@ejemplo.org">admin@ejemplo.org</a>&gt;</code> se
              escribe <code class="literal">admin.ejemplo.org</code>)</p></dd><dt><span class="term"><code class="literal">5</code></span></dt><dd><p>el número de serie del fichero.  Este
                número se debe incrementar cada vez que se modifique
                el fichero de zona.  Muchos administradores prefieren un
                formato expresado del siguiente modo <code class="literal">
		aaaammddss</code>.  2001041002 significa (según dicho
                formato) que el fichero se modificó por última
		vez el 04/10/2001 y se indica con los dos últimos
                dígitos (02) que es la segunda vez en el día que
                se ha modificado el fichero.  El número de serie es
		importante ya que para avisar a los servidores de nombres
                esclavos de que se ha actualizado la zona.</p></dd></dl></div><pre class="programlisting">
@       IN NS           ns1.ejemplo.org.</pre><p>
          Esta es una entrada de tipo <code class="varname">NS</code>.  Cada servidor de
          nombres que contesta de forma autoritaria a las consultas de un
          determinado dominio debe tener una de estas entradas.  El caracter
          <code class="literal">@</code> se sustituye por <code class="systemitem">ejemplo.org.</code>, es decir, se sustituye
          por el origen.
        </p><pre class="programlisting">
localhost       IN A    127.0.0.1
ns1             IN A    3.2.1.2
ns2             IN A    3.2.1.3
mail            IN A    3.2.1.10
@               IN A    3.2.1.30</pre><p>
          El registro de tipo A hace referencia a nombres de máquinas .
          Como puede verse  más arriba <code class="systemitem">
          ns1.ejemplo.org</code> se resuelve a <code class="systemitem">3.2.1.2</code>.  Vemos que se utiliza otra vez el
          origen <code class="literal">@</code>, que significa que <code class="systemitem">
          ejemplo.org</code> se resuelve a <code class="systemitem">3.2.1.30</code>.
        </p><pre class="programlisting">
www             IN CNAME        @</pre><p>
          Los registros de nombres canónicos se utilizan normalmente
          como alias de máquinas.  En el ejemplo
          <code class="systemitem">www</code> es un alias de <code class="systemitem">ejemplo.org</code>
          (<code class="systemitem">3.2.1.30</code>).
          <code class="varname">CNAME</code>s se puede utilizar para proporcionar alias
          de nombres de máquinas, o también para proporcionar un
          mecanismo de vuelta cíclica (<span class="quote">&#8220;<span class="quote">round robin</span>&#8221;</span>)
          de un nombre de máquina mapeado a un determinado conjunto de
          máquinas intercambiables.</p><a id="idp81863120" class="indexterm"></a><pre class="programlisting">
@               IN MX   10      mail.ejemplo.org.</pre><p>
          El registro <code class="varname">MX</code> indica qué servidores de
          correo se encargan de recibir correos para esta zona.
          <code class="systemitem">mail.example.org</code> es el nombre del
          servidor de correo y 10 significa la prioridad de dicho
          servidor.
        </p><p>
          Se pueden especificar varios servidores de correo con prioridades de,
          por ejemplo,3, 2 y 1.  Un servidor de correo que intenta entregar
          correo para el dominio <code class="systemitem">ejemplo.org</code> primero intentará
          contactar con el servidor especificado en el registro MX de mayor
          prioridad, después con el siguiente y así sucesivamente
          hasta que lo logre entregar.
        </p><p>
          Para los ficheros de zona de in-addr.arpa (DNS inverso) se utiliza
          el mismo formato excepto que se especifican registros
          <code class="varname">PTR</code> en lugar de registros
              <code class="varname">A</code> o <code class="varname">CNAME</code>.
        </p><pre class="programlisting">$TTL 3600

1.2.3.in-addr.arpa. IN SOA ns1.ejemplo.org. admin.ejemplo.org. (
                        5               ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        3600 )          ; Minimum

@       IN NS   ns1.ejemplo.org.
@       IN NS   ns2.ejemplo.org.

2       IN PTR  ns1.ejemplo.org.
3       IN PTR  ns2.ejemplo.org.
10      IN PTR  mail.ejemplo.org.
30      IN PTR  ejemplo.org.</pre><p>
         Este fichero proporciona las asociaciones de direcciones IP con
         nombres de máquinas adecuadas para nuestro dominio ficticio.
        </p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81869264"></a>29.11.7. Servidor de nombres de cache</h3></div></div></div><a id="idp81869904" class="indexterm"></a><p>
        Un servidor de nombres de tipo caché es un servidor de nombres
        que no es autoritario para ninguna zona. Simplemente realiza consultas
        por sí mismo y recuerda las respuestas para futuros usos.
        Para configura uno de estos servidores se configura el servidor de la
        forma habitual pero se omite la inclusión de zonas.
      </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-named-sandbox"></a>29.11.8. Ejecución de <span class="application">named</span> en una <span class="quote">&#8220;<span class="quote">
        Sandbox</span>&#8221;</span></h3></div></div></div><a id="idp81872976" class="indexterm"></a><a id="idp81874128" class="indexterm"></a><p>Para obtener una mayor seguridad se puede ejecutar
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> como un usuario sin privilegios y configurarlo mediante
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a> dentro del directorio especificado como el directorio
        del <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span>.   Esto hace que cualquier cosa que se
	encuentre fuera de dicho directorio resulte inaccesible para el
        dæmon <span class="application">named</span>.  En caso de que se
        comprometiera la seguridad de <span class="application">named</span> esta
        restricción puede ayudar a limitar el daño sufrido.
        FreeBSD dispone por defecto de un usuario y un grupo destinado a este
        uso: <code class="systemitem">bind</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Hay quien recomienda que en lugar de configurar
        <span class="application">named</span> con <code class="command">chroot</code> es mejor
        configurarlo dentro de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  En esta sección no se va
        a explicar esa alternativa.</p></div><p>Debido a que <span class="application">named</span> no va a poder
        acceder a nada que se encuentre fuera del directorio <span class="quote">&#8220;<span class="quote">
        sandbox</span>&#8221;</span> (y esto incluye cosas tales como bibliotecas
        compartidas, <span class="quote">&#8220;<span class="quote">sockets</span>&#8221;</span> de <span class="quote">&#8220;<span class="quote">log</span>&#8221;</span>, etc) se
	debe efectuar una serie de cambios para que <span class="application">
        named</span> pueda funcionar con normalidad.  En la siguiente
	lista se supone que la ruta del <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span> es
        <code class="filename">/etc/namedb</code> y que no se ha modificado
        anteriormente dicho directorio.  Por favor, ejecute los pasos que se
        muestran a continuación:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cree todos los directorios que
            <span class="application">named</span> espera tener a su
	    disposición:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/namedb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p bin dev etc var/tmp var/run master slave</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown bind:bind slave var/*</code></strong><a id="chown-slave"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#chown-slave"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p><span class="application">named</span> sólamente necesita
                escribir en estos directorios así que eso es todo lo que
                debemos crear.</p></td></tr></table></div></li><li class="listitem"><p>Reorganizar y crear los archivos de configuración de
            zona básicos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/localtime etc</code></strong><a id="localtime"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>mv named.conf etc &amp;&amp; ln -sf etc/named.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv named.root master</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>sh make-localhost &amp;&amp; mv localhost.rev localhost-v6.rev master</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat &gt; master/named.localhost
$ORIGIN localhost.
$TTL 6h
@	IN	SOA	localhost. postmaster.localhost. (
			1	; serial
			3600	; refresh
			1800	; retry
			604800	; expiration
			3600 )	; minimum
	IN	NS	localhost.
	IN	A		127.0.0.1
^D</code></strong></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#localtime"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Esto permite que <span class="application">named</span> pueda
                escribir al archivo de log la hora correcta a través
                del <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a></p></td></tr></table></div></li><li class="listitem"><p>Si está usando una versión de FreeBSD anterior a
            4.9-RELEASE se debe construir una copia estáticamente
            enlazada de <span class="application">named-xfer</span> y copiarla dentro
            del directorio del <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libisc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make all</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make all</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/libexec/named-xfer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make NOSHARED=yes all</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp named-xfer /etc/namedb/bin &amp;&amp; chmod 555 /etc/namedb/bin/named-xfer</code></strong><a id="clean-cruft"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></pre><p>Despueés de instalar la versión estática
	    de <code class="command">named-xfer</code> se deben realizar algunas tareas
            de limpieza para evitar dejar copias de bibliotecas o de programas
            en nuestros ficheros de fuentes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libisc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/lib/libbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/libexec/named-xfer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#clean-cruft"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>En algunas ocasiones este paso puede fallar.  Si es su caso
                ejecute lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src &amp;&amp; make cleandir &amp;&amp; make cleandir</code></strong></pre><p>y borre su directorio <code class="filename">/usr/obj</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rm -fr /usr/obj &amp;&amp; mkdir /usr/obj</code></strong></pre><p>Esto limpia cualquier <span class="quote">&#8220;<span class="quote">impureza</span>&#8221;</span> del
		  árbol de fuentes y si se repiten los pasos anteriores
		  todo debería funcionar.</p></td></tr></table></div><p>Si se está usando FreeBSD version 4.9-RELEASE o posterior
            el ejecutable de <code class="command">named-xfer</code> del directorio
	    <code class="filename">/usr/libexec</code> ya se encuentra
            enlazado estáticamente y se puede utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cp</span>(1)</span></a> para
            copiarlo directamente en nuestro <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span>.</p></li><li class="listitem"><p>Cree el fichero <code class="filename">dev/null</code> de tal forma
            que <span class="application">named</span> pueda verlo y pueda escribir
            sobre él:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/namedb/dev &amp;&amp; mknod null c 2 2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 666 null</code></strong></pre></li><li class="listitem"><p>Enlace simbólicamente <code class="filename"> /var/run/ndc</code>
	    con <code class="filename">/etc/namedb/var/run/ndc</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -sf /etc/namedb/var/run/ndc /var/run/ndc</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Esto simplemente evita el tener que especificar la
	      opción <code class="option">-c</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndc</span>(8)</span></a> cada vez que se
	      ejecute.  Dado que los contenidos de /var/run se borran al
              inicio del sistema, si se piensa que esto puede resultar
              útil, se puede añadir esta orden al <span class="quote">&#8220;<span class="quote">
              crontab</span>&#8221;</span> del usuario root utilizando la opción
                  <code class="option">@reboot</code>.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">crontab</span>(5)</span></a> para
              saber más información sobre esto.</p></div></li><li class="listitem"><p>Configure <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> para que cree un <span class="quote">&#8220;<span class="quote">socket</span>&#8221;</span>
	     de <code class="filename">log</code> adicional de tal forma que
	    <span class="application">named</span> pueda escribir sobre él.
            Añada <code class="literal">-l
                  /etc/namedb/dev/log</code> a la variable
	    <code class="varname">syslogd_flags</code> dentro del fichero
	    <code class="filename">/etc/rc.conf</code>.</p></li><li class="listitem"><p>Reorganice la ejecución de las aplicaciones
            <span class="application">named</span> y
            <code class="command">chroot</code> para que se ejecuten dentro
            del <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span> añadiendo lo siguiente al
	    fichero<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">named_enable="YES"
named_flags="-u bind -g bind -t /etc/namedb /etc/named.conf"</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Recuerde que el fichero de configuración
	      <em class="replaceable"><code>/etc/named.conf</code></em> tiene una ruta
              completa <span class="emphasis"><em>que comienza en el directorio del
              <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span></em></span>; por ejemplo, en la
              línea superior el fichero que aparece es en realidad
              <code class="filename">/etc/namedb/etc/named.conf</code>.</p></div></li></ul></div><p>El siguiente paso consiste en editar el fichero
	<code class="filename">/etc/namedb/etc/named.conf</code> de tal forma que
         <span class="application">named</span> pueda conocer qué zonas cargar
         y donde encontrarlas en disco.  A continuación se muestra un
         ejemplo comentado (cualquier cosa que no se comenta en el ejemplo es
         porque resulta igual que la configuración del servidor de DNS
         del caso normal):</p><pre class="programlisting">options {
        directory "/";<a id="directory"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
        named-xfer "/bin/named-xfer";<a id="named-xfer"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
        version "";		// No muestra la versiÃn de BIND
        query-source address * port 53;
};
// ndc control socket
controls {
        unix "/var/run/ndc" perm 0600 owner 0 group 0;
};
// A partir de aquÃ­van las zonas:
zone "localhost" IN {
        type master;
        file "master/named.localhost";<a id="master"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
        allow-transfer { localhost; };
        notify no;
};
zone "0.0.127.in-addr.arpa" IN {
        type master;
        file "master/localhost.rev";
        allow-transfer { localhost; };
        notify no;
};
zone "0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.int" {
	type master;
	file "master/localhost-v6.rev";
	allow-transfer { localhost; };
	notify no;
};
zone "." IN {
        type hint;
        file "master/named.root";
};
zone "private.example.net" in {
        type master;
        file "master/private.example.net.db";
	allow-transfer { 192.168.10.0/24; };
};
zone "10.168.192.in-addr.arpa" in {
        type slave;
        masters { 192.168.10.2; };
        file "slave/192.168.10.db";<a id="slave"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
};</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#directory"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La línea que contiene
	    <code class="literal">directory</code> se especifica como
	    <code class="filename">/</code>, ya que todos los ficheros que
	    <span class="application">named</span> necesita se encuentran dentro de
            este directorio (recuerde que esto es equivalente al fichero
            <code class="filename">/etc/namedb</code> de un usuario
            <span class="quote">&#8220;<span class="quote">normal</span>&#8221;</span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#named-xfer"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Especifica la ruta completa para el binario
	    <code class="command">named-xfer</code> binary (desde el marco de referencia
            de <span class="application">named</span>).  Esto resulta necesario ya
            que por defecto <span class="application">named</span> se compila de tal
            forma que trata de localizar
            <code class="command">named-xfer</code> dentro de
	    <code class="filename">/usr/libexec</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#master"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Especifica el nombre del fichero
          (relativo a la línea
          (relativo a la línea ) <code class="literal">directory</code> anterior)
	  donde <span class="application">named</span> puede encontrar el fichero de
          zona para esta zona.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#slave"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Especifica el nombre del fichero
	  (relativo a la líena <code class="literal">directory</code> anterior)
          donde <span class="application">named</span> debería escribir una
          copia del archivo de zona para esta zona después de
          recuperarla exitosamente desde el servidor maestro.  Este es el
          motivo por el que en las etapas de configuración anteriores
          necesitábamos cambiar la propiedad del directorio
          <code class="filename">slave</code> al grupo
                <code class="systemitem">bind</code>.</p></td></tr></table></div><p>Después de completar los pasos anteriores reinicie el
        servidor o reinicie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> y ejecute <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>
        asegurándose de que se utilicen las nuevas opciones
        especificadas en <code class="varname">syslogd_flags</code> y
        <code class="varname">named_flags</code>.  En estos momentos deberíamos
        estar ejecutando una copia de <span class="application">named</span> dentro
        de un <span class="quote">&#8220;<span class="quote">sandbox</span>&#8221;</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82014672"></a>29.11.9. Seguridad</h3></div></div></div><p>Aunque BIND es la implementación de DNS más
         utilizada existe siempre el asunto relacionado con la seguridad.  De
         vez en cuando se encuentran agujeros de seguridad y
         vulnerabilidades.</p><p>
        Es una buena idea suscribirse a <a class="link" href="http://www.cert.org/" target="_top">CERT</a> y a <a class="link" href="../handbook/eresources.html#ERESOURCES-MAIL" target="_top">freebsd-security-notifications</a>
        para estar al día de los problemas de seguridad relacionados
        con <span class="application">named</span>.</p><div xmlns="" class="tip"><h3 class="admontitle">Sugerencia: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si surge un problema nunca está de más
        actualizar los fuentes y recompilar los ejecutables desde dichas
        fuentes.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82018128"></a>29.11.10. Lecturas recomendadas</h3></div></div></div><p>
        Las páginas del manual de BIND/named:
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndc</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">named.conf</span>(5)</span></a>
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.isc.org/products/BIND/" target="_top">Página oficial
            de ISC Bind</a></p></li><li class="listitem"><p><a class="link" href="http://www.nominum.com/getOpenSourceResource.php?id=6" target="_top">
	  Preguntas más frecuentes sobre BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.oreilly.com/catalog/dns4/" target="_top">Libro de O'Reilly
            "DNS and BIND", cuarta edición</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1034.txt" target="_top">RFC1034
	    - Nombre de Dominio - Conceptos y Características</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1035.txt" target="_top">RFC1035
	      - Nombres de Domninio - Implementación y
	    Especificación</a></p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ntp"></a>29.12. NTP</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Hukins</span></span>. </span></div></div></div><a id="idp82038480" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82038992"></a>29.12.1. Resumen</h3></div></div></div><p>Según pasa el tiempo el reloj de un computador está
        expuesto a ligeros desplazamientos.  NTP (Protocolo de Hora
        en Red, en inglés <span class="quote">&#8220;<span class="quote">Network Time Protocol</span>&#8221;</span>) es
        un protocolo que permite asegurar la exactitud de nuestro reloj.</p><p>Existen varios servicios de internet que confían y se pueden
        beneficiar de relojes de computadores precisos.  Por ejemplo un
        servidor web puede recibir peticiones de un determinado fichero si ha
        sido modificado posteriormente a una determinada fecha u hora.
        Servicios como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> ejecutan órdenes en determinados
        instantes.  Si el reloj no se encuentra ajustado estas órdenes
        pueden ejecutarse fuera de la hora prevista.</p><a id="idp82041552" class="indexterm"></a><p>FreeBSD viene con el servidor NTP <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> que se puede utilizar
        para preguntar a otros servidores NTP, de tal forma que podemos
        ajustar nuestro reloj según la hora de otros servidores e
        incluso proporcionar servicio de hora nosotros mismos.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82044112"></a>29.12.2. Elección de los servidores de hora adecuados</h3></div></div></div><a id="idp82044752" class="indexterm"></a><p>Para sincronizar nuestro reloj necesitamos comunicarnos con uno o
         más servidores NTP.  El administrador de nuestra red o nuestro
         proveedor de servicios de Internet muy posiblemente hayan configurado
         algún servidor NTP para estos propósitos.  Consulte la
         documentación de que disponga.  Existe una <a class="link" href="http://www.eecis.udel.edu/~mills/ntp/servers.html" target="_top">lista de
         servidores NTP públicamente accesibles</a> que se pueden
         utilizar para buscar un servidor NTP que se encuentre
         geográficamente próximo.  Asegúrese de que conoce
         la política de uso de estos servidores públicos ya que
	 en algunos casos es necesario pedir permiso al administrador antes de
         de poder utilizarlos, principalmente por motivos
         estadísticos.</p><p>Le recomendamos seleccionar servidores NTP que no se encuentren
        conectados entre sí por si alguno de los servidores que use
	sea inaccesible o su reloj se averíe. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> utiliza las
        respuestas que recibe de otros servidores de una forma inteligente.
        servidores de una forma inteligente (Tiene a hacer más caso a
        los más fiables.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82048208"></a>29.12.3. Configuración de la máquina</h3></div></div></div><a id="idp82048848" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82050000"></a>29.12.3.1. Configuración básica</h4></div></div></div><a id="idp82050640" class="indexterm"></a><p>Si sólamente deseamos sincronizar nuestro reloj cuando
          se arranca la máquina se puede utilizar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>.
          Esto puede ser adecuado en algunas máquinas de escritorio que
          se reinician frecuentemente y donde la sincronización no suele
          ser un objetivo prioritario pero normalmente la mayoría de las
          máquinas deberían ejecutar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>.</p><p>La utilización de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> en tiempo de arranque
          es también una buena idea incluso para las máquinas que
          ejecutan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>.  El programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> modifica el reloj de
          forma gradual, mientras que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> ajusta directamente el
          reloj sin importar que tamaño tenga la diferencia de tiempo
          existente entre la máquina y el servidor de tiempo de
          referencia.</p><p>Para activar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> en tiempo de arranque, añada
	  <code class="literal">ntpdate_enable="YES"</code> al fichero
	  <code class="filename">/etc/rc.conf</code>.  También es necesario
          especificar todos los servidores que deseamos utilizar para
          realizar el proceso de sincronización y cualquier
          parámetro que deseemos pasar a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>
          utilizando la variable <code class="varname">ntpdate_flags</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82068176"></a>29.12.3.2. Configuración general</h4></div></div></div><a id="idp82068816" class="indexterm"></a><p>NTP se configura mediante el archivo
	  <code class="filename">/etc/ntp.conf</code> utilizando el formato descrito en
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a>.  A continuación se muestra un sencillo
          ejemplo:</p><pre class="programlisting">server ntplocal.ejemplo.com prefer
server timeserver.ejemplo.org
server ntp2a.ejemplo.net

driftfile /var/db/ntp.drift</pre><p>La opción <code class="literal">server</code> especifica qué
          servidores se van a utilizar, especificando un servidor por
          línea.  Si se especifica un servidor con el argumento
          <code class="literal">prefer</code>, como en <code class="systemitem">ntplocal.ejemplo.com</code> dicho servidor se prefiere
          sobre los demás.  No obstante la respuesta de su servidor
          preferido se descartará si difiere sustancialmente de la
          respuesta recibida por parte del resto de los servidores
          especificados; en caso contrario sólo se tendrá en
          cuenta la respuesta del servidor preferido sin importar la
	  información suministrada por el resto.  El argumento
          <code class="literal">prefer</code> se utiliza normalmente en servidores NTP
          altamente precisos, como aquellos que poseen hardware de tiempo
          específico.</p><p>La opción <code class="literal">driftfile</code> especifica
	  qué fichero se utiliza para almacenar el desplazamiento de
          la fracuencia de reloj de la máquina.  El programa
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> utiliza este valor para automáticamente
          compensar el desvío que experimenta de forma natural el reloj
          de la máquina, permitiendo mantener una precisión
          acotada incluso cuando se pierde la comunicación con el resto
          de referencias externas.</p><p>La opción <code class="literal">driftfile</code> especifica
	  qué fichero se utiliza para almacenar la información
          sobre espuestas anteriores de servidores NTP.  Este fichero
          contiene información útil para la implementación
          de NTP.  No debería ser modificada por ningún otro
          proceso.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82076752"></a>29.12.3.3. Control de acceso al servidor NTP</h4></div></div></div><p>Por defecto nuestro servidor de NTP puede ser accedido por
          cualquier máquina de Internet.  La opción
          <code class="literal">restrict</code> se puede utilizar para controlar
          controlar qué máquinas pueden acceder al
          servicio.</p><p>Si queremos denegar el acceso a todas las máquinas
          existentes basta con añadir la siguiente línea a
	  <code class="filename">/etc/ntp.conf</code>:</p><pre class="programlisting">restrict default ignore</pre><p>Si sólo queremos permitir el acceso al servicio de hora
          a las máquinas de nuestra red y al menos tiempo nos queremos
          asegurar de que dichos clientes no pueden a su vez configurar la
          hora del servidor o utilizarse ellos mismos como nuevos servidores
          de hora basta con añadir lo siguiente en lugar de lo
          anterior:</p><pre class="programlisting">restrict 192.168.1.0 mask 255.255.255.0 notrust nomodify notrap</pre><p>donde <code class="systemitem">192.168.1.0</code> es la
          dirección IP de nuestra red y <code class="systemitem">255.255.255.0</code> es la máscara de
	  red.</p><p><code class="filename">/etc/ntp.conf</code> puede contener varias
          opciones de tipo <code class="literal">restrict</code>.  Para más
          detalles consulte la sección <code class="literal">Soporte de Control de
          Acceso</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82083920"></a>29.12.4. Ejecución del servidor de NTP</h3></div></div></div><p>Para asegurarnos de que el servidor de NTP se ejecuta en tiempo de
        arranque se debe añadir la línea <code class="literal">
        xntpd_enable="YES"</code> al fichero
	<code class="filename">/etc/rc.conf</code>.  Si deseamos pasar opciones
        adicionales a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> se puede modificar la variable
        <code class="varname">xntpd_flags</code> del fichero
	<code class="filename">/etc/rc.conf</code>.</p><p>Para ejecutar el servidor sin reiniciar la máquina ejecute
	<code class="command">ntpd</code> junto con todos aquellos parámetros que
        haya especificado en la variable de arranque
        <code class="varname">xntpd_flags</code> del fichero
	<code class="filename">/etc/rc.conf</code>.  Por ejemplo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ntpd -p /var/run/ntpd.pid</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bajo FreeBSD 5.X se han renombrado algunas opciones del
          fichero <code class="filename">/etc/rc.conf</code>.  Se debe reemplazar
          cualquier aparición <code class="literal">xntpd</code> por
          por <code class="literal">ntpd</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82112336"></a>29.12.5. Utilización de ntpd junto con una conexión temporal
        a Internet</h3></div></div></div><p>El programa <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> no necesita una conexión
        permanente a Internet para poder funcionar correctamente.  No obstante
        si la conexión a Internet se encuentra configurada con
        marcación bajo demanda es una buena idea impedir que el
        tráfico de NTP lance una marcación automática o
        que mantenga la conexión viva.  Si se utiliza el PPP de
        entorno de usuario se pueden utilizar las directivas
        <code class="literal">filter</code> dentro del fichero
        <code class="filename">/etc/ppp/ppp.conf</code> para evitar esto. Por
        ejemplo:</p><pre class="programlisting"> set filter dial 0 deny udp src eq 123
 # Evita que el trÃ¡fico NTP inice una llamada saliente
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 Evita que el trÃ¡ficoNTP entrante mantenga abierta la conexiÃ³n
 set filter alive 1 deny udp dst eq 123
 Evita que el trÃ¡fico NTP saliente mantenga abierta la conexiÃ³n
 set filter alive 2 permit 0/0 0/0</pre><p>Para ás detalles consulte la sección
        <code class="literal">PACKET FILTERING</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> y los ejemplos que
        se encuentran en
	<code class="filename">/usr/share/examples/ppp/</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Algunos proveedores de acceso a Internet bloquean paquetes que
          utilizan números de puertos bajos impidiendo que los paquetes
          de vuelta alcancen nuestra máquina.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82122320"></a>29.12.6. Información adicional</h3></div></div></div><p>Hay documentación sobre el servidor NTP en formato HTML en
        <code class="filename">/usr/share/doc/ntp/</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-natd"></a>29.13. Traducción de direcciones de red</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natoverview"></a>29.13.1. Overview</h3></div></div></div><a id="idp82131536" class="indexterm"></a><p>El dæmon de FreeBSD que se encarga de traducir direcciones de
        red,  más conocido como <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>, es un dæmon que
        acepta paquetes IP, modifica la dirección IP fuente de dichos
        paquetes y los reinyecta en el flujo de paquetes IP de salida.
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> ejecuta este proceso modificando la dirección de
        origen y el puerto de tal forma que cuando se reciben paquetes de
        contestación <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> es capaz de determinar el destino
        real y reenviar el paquete a dicho destino.</p><a id="idp82135120" class="indexterm"></a><a id="idp82135632" class="indexterm"></a><p>El uso más común de NAT es para Compartir la
        Conexión a Internet.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natsetup"></a>29.13.2. Configuración</h3></div></div></div><p>Debido al pequeño espacio de direccionamiento que se
        encuentra actualmente disponible en IPv4 y debido también al
        gran aumento que se está produciendo en cuanto a número
        de usuarios de líneas de conexión a Internet de alta
        velocidad como cable o DSL la gente necesita utilizar cada vez
        más la salida de Compartición de
        Conexión a Internet.  La característica de poder conectar
        varios computadores a través de una única conexión
        y una única dirección IP hacen de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> una
	elección razonable.</p><p>Cada vez con más frecuencia un usuario típico
        dispone de una máquina conectada mediante cable o DSL pero
        desearía utilizar dicha máquina como un <span class="quote">&#8220;<span class="quote">
	router</span>&#8221;</span> de acceso para el resto de los ordenadores de su red
        de área local.</p><p>Para poder hacerlo la máquina (FreeBSD por supuesto) debe
         configurarse para actuar como pasarela.  Debe tener al menos dos
         tarjetas de red, una para conectarse a la red de área local y
         la otra para conectarse con el <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> de acceso a
         Internet.  Todas las máquinas de la LAN se conectan entre
         sí mediante un <span class="quote">&#8220;<span class="quote">hub</span>&#8221;</span> o un <span class="quote">&#8220;<span class="quote">
	 switch</span>&#8221;</span>.</p><div class="mediaobject"><img src="advanced-networking/natd.png" alt="Topología de la Red" /></div><p>Una configuración como esta se utiliza frecuentemente para
        compartir el acceso a Internet.  Una de las máquinas de la
        <acronym class="acronym">LAN</acronym> está realmente conectada a Internet.
        El resto de las máquinas acceden a Internet utilizando como
        <span class="quote">&#8220;<span class="quote">pasarela</span>&#8221;</span> la máquina inicial.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdkernconfiguration"></a>29.13.3. Configuración</h3></div></div></div><a id="idp82158288" class="indexterm"></a><p>Se deben añadir las siguientes opciones al fichero de
        configuración del núcleo:</p><pre class="programlisting">options IPFIREWALL
options IPDIVERT</pre><p>Además, según se prefiera, se pueden añadir
        también las siguientes:</p><pre class="programlisting">options IPFIREWALL_DEFAULT_TO_ACCEPT
options IPFIREWALL_VERBOSE</pre><p>Lo que viene a continuación se tiene que definir en
        <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">gateway_enable="YES"
firewall_enable="YES"
firewall_type="OPEN"
natd_enable="YES"
natd_interface="<em class="replaceable"><code>fxp0</code></em>"
natd_flags=""</pre><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>gateway_enable="YES"</td><td>Configura la máquina para que actúe como
	        <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> o pasarela de red.  Se puede conseguir
                  lo mismo ejecutando
                <code class="command">sysctl net.inet.ip.forwarding=1</code>.</td></tr><tr><td>firewall_enable="YES"</td><td>Activa las reglas de cortafuegos que se encuentran
               definidas por defecto en
               <code class="filename">/etc/rc.firewall</code> y que entran en
               funcionamiento en el arranque del sistema.</td></tr><tr><td>firewall_type="OPEN"</td><td>Especifica un conjunto de reglas de cortafuegos que
                permite el acceso a todos los paquetes que se reciban.
                Consulte <code class="filename">/etc/rc.firewall</code> para obtener
                información sobre el resto de tipos de reglas que se
                pueden configurar.</td></tr><tr><td>natd_interface="fxp0"</td><td>Indica qué interfaz se utiliza para reenviar
                paquetes (la interfaz que se conecta a Internet).</td></tr><tr><td>natd_flags=""</td><td>Define cualesquiera otras opciones que se deseen
                proporcionar a <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> en tiempo de arranque.</td></tr></tbody></table></div><p>Si se definen las opciones anteriores, en el arranque del sistema
        el fichero <code class="filename">/etc/rc.conf</code> configurará las
        variables de tal forma que se ejecutaría
        <code class="command">natd -interface fxp0</code>.  Evidentemente esta orden
        también se puede ejecutar de forma manual.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">También es posible utilizar un fichero de
	  configuración para <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> en caso de que deseemos
          especificar muchos parámetros de arranque. Tendremos que
          declarar la ubicación del fichero de configuración
	  mediante la inclusión de lo siguiente en
          <code class="filename">/etc/rc.conf</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">natd_flags="-f /etc/natd.conf"</pre><p xmlns="http://www.w3.org/1999/xhtml">El fichero <code class="filename">/etc/natd.conf</code> debe contener una
          lista de opciones de configuración una opción por
          línea.  Por ejemplo, en el caso que se comenta en la siguiente
          sección se utilizaría un fichero de
          configuración con la siguiente información:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">redirect_port tcp 192.168.0.2:6667 6667
redirect_port tcp 192.168.0.3:80 80</pre><p xmlns="http://www.w3.org/1999/xhtml">Para obtener más información sobre el fichero de
          configuración se puede consultar la opción
          <code class="option">-f</code> que se describe en la página del manual de
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>.</p></div><p>Cada máquina (y cada interfaz) que se encuentra conectada
        a la LAN debe poseer una dirección IP perteneciente al espacio
        de direcciones IP privado tal y como se define en <a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1918.txt" target="_top">RFC 1918</a> y debe
        poseer como pasarela por defecto la dirección IP de la
        interfaz interna (la interfaz que se conecta a la LAN) de la
        máquina que ejecuta
            <span class="application">natd</span>.</p><p>Por ejemplo los clientes <code class="systemitem">A</code> y
        <code class="systemitem">B</code> se encuentran en la LAN utilizando las direcciones
        IP <code class="systemitem">Â192.168.0.2</code> y
        <code class="systemitem">192.168.0.3</code>, respectivamente.  La
        máquina que ejecuta <span class="application">natd</span> posee la
        dirección IP <code class="systemitem">192.168.0.1</code> en la interfaz que se conecta a la
        LAN.  El <span class="quote">&#8220;<span class="quote">router</span>&#8221;</span> por defecto tanto de <code class="systemitem">A</code>
        omo de <code class="systemitem">B</code> se establece al valor
        <code class="systemitem">192.168.0.1</code>.  La interfaz externa de la
	máquina que ejecuta <span class="application">natd</span>, la interfaz
        que se conecta con Internet, no necesita de ninguna
        especial en relación con el tema que estamos tratando en esta
        sección.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdport-redirection"></a>29.13.4. Redirección de puertos</h3></div></div></div><p>El incoveniente que se presenta con la utilización de
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> es que los clientes de la LAN no son accesibles desde
        Internet.  Dichos clientes pueden establecer conexiones con el
        exterior pero no pueden recibir intentos de conexión desde
        pueden recibir intentos de conexion desde Internet.  Esto supone un
        gran problema cuando se quieren ejecutar servicios de acceso global
        en una o varias máquinas de la red LAN.  Una forma sencilla de
        solucionar parcialmente este problemma consiste en redirigir
        determinados puertos en el servidor <span class="application">natd</span>
	hacia determinadas máquinas de la LAN.</p><p>Supongamos por ejemplo que en <code class="systemitem">A</code> se ejecuta un
        servidor de IRC y que en <code class="systemitem">B</code> se ejecuta un servidor
        web.  Para que funcione lo que hemos comentado anteriormente se tienen
        que redirigir las conexiones recibidas en los puertos 6667 (IRC) y
        80 (web) a dichas máquinas, respectivamente.</p><p>Se debe pasar la opción <code class="option">-redirect_port</code> a
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> con los valores apropiados.  La sintaxis es como
        sigue:</p><pre class="programlisting">  -redirect_port proto IPdestino:PUERTOdestino[-PUERTOdestino]
                 [aliasIP:]aliasPUERTO[-aliasPUERTO]
		 [IPremota[:PUERTOremoto[-PUERTOremoto]]]</pre><p>Continuando con el ejemplo anterior los valores serían:</p><pre class="programlisting">    -redirect_port tcp 192.168.0.2:6667 6667
    -redirect_port tcp 192.168.0.3:80 80</pre><p>
        Esto redirigirá los puertos <span class="emphasis"><em>tcp</em></span> adecuados
            a las máquinas situadas en la LAN.</p><p>La opción <code class="option">-redirect_port</code> se puede
        utilizar para indicar rangos de puertos en vez de puertos
        individuales.  Por ejemplo, <em class="replaceable"><code>tcp
        192.168.0.2:2000-3000 2000-3000</code></em> redirige todas las
        conexiones recibidas desde los puertos 2000 al 3000 a los puertos
        puertos 2000 a 3000 de la máquina
            <code class="systemitem">A</code>.</p><p>Estas opciones se pueden utilizar cuando se ejecute
        directamente <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> se pueden situar en la variable
        <code class="literal">natd_flags=""</code> en
        <code class="filename">/etc/rc.conf</code> y también se pueden pasar
        mediante un archivo de configuración.</p><p>Para obtener más información sobre opciones de
        configuración por favor consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdaddress-redirection"></a>29.13.5. Redirección de direcciones</h3></div></div></div><a id="idp82222416" class="indexterm"></a><p>La redirección de direcciones es una característica
        útil si se dispone de varias direcciones IP pero todas ellas se
        ubican en una única máquina.  Gracias a esto
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> puede asignar a cada cliente de la red LAN su propia
        dirección IP externa.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> reescribe los paquetes que
        salen de la red LAN con la dirección IP externa adecuada y
        redirige todo el tráfico recibido de vuelta al cliente en
        función de la dirección IP de destino: esto se conoce
        como NAT estático.  Por ejemplo las direcciones IP
        <code class="systemitem">128.1.1.1</code>,
        <code class="systemitem">128.1.1.2</code> y
        <code class="systemitem">128.1.1.3</code> pertenecen al <span class="quote">&#8220;<span class="quote">
        router</span>&#8221;</span> <span class="application">natd</span>.
        <code class="systemitem">128.1.1.1</code> se puede utilizar como la
        dirección IP externa del
        <span class="application">natd</span>, mientras que
        <code class="systemitem">128.1.1.2</code> y
        <code class="systemitem">128.1.1.3</code> se redirigen a los
            clientes <code class="systemitem">A</code> y <code class="systemitem">B</code>, respectivamente.</p><p>La sintaxis de la opción
            <code class="option">-redirect_address</code> es la siguiente:</p><pre class="programlisting">-redirect_address IPlocal IPpública</pre><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>IPlocal</td><td>La dirección IP interna del cliente de la LAN.</td></tr><tr><td>IPpública</td><td>La dirección IP externa que se corresponde con un
                determinado cliente de la LAN.</td></tr></tbody></table></div><p>En nuestro ejemplo esta opción se especificaría de la
        siguiente forma:</p><pre class="programlisting">-redirect_address 192.168.0.2 128.1.1.2
-redirect_address 192.168.0.3 128.1.1.3</pre><p>De forma semejante a la opción
        <code class="option">-redirect_port</code> estos argumentos se pueden especificar
        directamente sobre la variable
        <code class="literal">natd_flags=""</code> del fichero
        <code class="filename">/etc/rc.conf</code> o también se pueden pasar
        vía archivo de configuración de
        <span class="application">natd</span>.  Si se utiliza redirección
        de direcciones ya no es necesario utilizar redirección de
        puertos ya que todos los paquetes que se reciben en una determinada
        dirección IP son redirigidos a la máquina
        especificada.</p><p>Las direcciones IP externas de la máquina que ejecuta
        <span class="application">natd</span> se deben activar y deben formar
        parte de un alias configurado sobre la interfaz externa que se conecta
        a Internet.  Consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> para aprender a
        hacerlo.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-inetd"></a>29.14. El <span class="quote">&#8220;<span class="quote">Superservidor</span>&#8221;</span> <span class="application">
      inetd</span></h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-overview"></a>29.14.1. Resumen</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> se conoce como el <span class="quote">&#8220;<span class="quote">Super Servidor de
        Internet</span>&#8221;</span> debido a que gestiona las conexiones de
        varios dæmones.  Los dæmones son programas que
	proporcionan servicios de red.
        <span class="application">inetd</span> actúa como un servidor de
        servidor de gestión de otros dæmones.  Cuando
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> recibe una conexión se determina qué
        dæmon debería responder a dicha conexión, se lanza
	un proceso que ejecuta dicho dæmon y se le entrega el <span class="quote">&#8220;<span class="quote">
	socket</span>&#8221;</span>.  La ejecución de una única instancia de
        <span class="application">inetd</span> reduce la carga del sistema en
        comparación con lo que significaría ejecutar cada uno de
        los dæmones que gestiona de forma individual.</p><p><span class="application">inetd</span> se utiliza principalmente para
         lanzar procesos que albergan a otros dæmones pero
         <span class="application">inetd</span> también se utiliza para
         gestionar determinados protocolos triviales como
         <span class="application">chargen</span>,
            <span class="application">auth</span> y
            <span class="application">daytime</span>.</p><p>Esta sección trata la configuración básica de
        <span class="application">inetd</span> a través de sus opciones de
        línea de órdenes y utilizando su fichero de
            configuración, denominado
            <code class="filename">/etc/inetd.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-settings"></a>29.14.2. Configuraciones</h3></div></div></div><p><span class="application">inetd</span> se inicializa a través
        del fichero <code class="filename">/etc/rc.conf</code> en tiempo de
        arranque.  La opción <code class="literal">inetd_enable</code> posee el
        valor <code class="literal">NO</code> por defecto, pero a menudo la
        aplicación <span class="application">sysinstall</span> la activa
        cuando se utiliza la configuración de perfil de seguridad
        medio.
	Estableciendo </p><pre class="programlisting">inetd_enable="YES"</pre><p> o
	</p><pre class="programlisting">inetd_enable="NO"</pre><p> dentro de
	<code class="filename">/etc/rc.conf</code> se puede activar o desactivar la
        la ejecución de
        <span class="application">inetd</span> en el arranque del
	sistema.</p><p>Se pueden además aplicar distintas opciones de
        línea de órdenes mediante la opción
        <code class="literal">inetd_flags</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-cmdline"></a>29.14.3. Opciones de línea de órdenes</h3></div></div></div><p><span class="application">sinopsis de inetd</span>:</p><p><code class="option">     inetd [-d] [-l] [-w] [-W] [-c máximo] [-C tasa] [-a dirección | nombre_de_host]
           [-p nombre_de_fichero] [-R tasa] [fichero de configuración ]</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-d</span></dt><dd><p>Activa la depuración.</p></dd><dt><span class="term">-l</span></dt><dd><p>Activa el <span class="quote">&#8220;<span class="quote">logging</span>&#8221;</span> de las conexiones
	      efectuadas con écute.</p></dd><dt><span class="term">-w</span></dt><dd><p>Activa el recubrimiento de TCP para servicios
                  externos (activado por defecto).</p></dd><dt><span class="term">-W</span></dt><dd><p>Activa el recubrimiento de TCP para los servicios
              internos, ejecutados directamente por el dæmon
              <span class="application">inetd</span> (activado por defecto).</p></dd><dt><span class="term">-c máximo</span></dt><dd><p>Especifica el máximo número de invocaciones
              simultáneas de cada servicio; el valor por defecto es
              ilimitado.  Se puede sobreescribir para cada servicio utilizando
              la opción <code class="option">max-child</code>.</p></dd><dt><span class="term">-C tasa</span></dt><dd><p>Especifica el máximo número de veces que se
              puede llamar a un servicio desde un dirección IP
              determinada por minuto; el valor por defecto es ilimitado.  Se
              puede redefinir para cada servicio utilizando la opción
	      <code class="option">max-connections-per-ip-per-minute</code>.</p></dd><dt><span class="term">-R tasa</span></dt><dd><p>Especifica el máximo número de veces que se
              puede invocar un servicio en un minuto; el valor por defecto es
              256.  Un valor de 0 permite un número ilimitado de
              llamadas.</p></dd><dt><span class="term">-a</span></dt><dd><p>Especifica una dirección IP a la cual se asocia y
              sobre la cual se queda esperando recibir conexiones.  Puede
              declararse también un nombre de máquina, en cuyo
              caso se utilizará la dirección (o direcciones si
	      hay más de una) IPv4 o IPv6 que estén tras dicho
              nombre.  Normalmente se usa un nombre de
              máquina cuando <span class="application">inetd</span> se
              ejecuta dentro de un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>, en cuyo caso el nombre de
              máquina se corresponde con el entorno
              <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.</p><p>Cuando se desea asociarse tanto a direcciones IPv4 como a
              direcciones IPv6 y se utiliza un nombre de máquina se
              necesita una entrada para cada protocolo (IPv4 o IPv6) para cada
              servicio que se active a través de <code class="filename">
              /etc/inetd.conf</code>.  Por ejemplo un servicio basado en
              TCP necesitaría dos entradas, una utilizando
              <code class="literal">tcp4</code> para el protocolo IPv4 y otra con
              <code class="literal">tcp6</code> para las conexiones a través del
              procolo de red IPv6.</p></dd><dt><span class="term">-p</span></dt><dd><p>Especifica un fichero alternativo en el cual se guarda el
              ID del proceso.</p></dd></dl></div><p>Estas opciones se pueden declarar dentro de las variables
	<code class="literal">inetd_flags</code> del fichero
	<code class="filename">/etc/rc.conf</code>.  Por defecto
	<code class="literal">inetd_flags</code> tiene el valor <code class="literal">-wW</code>,
	lo que activa el recubrimiento de TCP para los servicios internos y
        externos de <span class="application">inetd</span>.  Los usuarios inexpertos
        no suelen introducir estos parámetros y por ello ni siquiera
        necesitan especificarse dentro de <code class="filename">
        /etc/rc.conf</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un servicio externo es un dæmon que se ejecuta fuera de
          <span class="application">inetd</span> y que se lanza cuando se recibe
          un intento de conexión.  Un servicio interno es un servicio
          que <span class="application">inetd</span> puede servir directamente sin
          necesidad de lanzar nuevos procesos.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-conf"></a>29.14.4. <code class="filename">inetd.conf</code></h3></div></div></div><p>La configuración de
        <span class="application">inetd</span> se realiza a través del
        ficherode configuración <code class="filename">
	/etc/inetd.conf</code>.</p><p>Cuando se realiza una modificación en el fichero
	<code class="filename">/etc/inetd.conf</code> se debe obligar a
        <span class="application">inetd</span> a releer dicho fichero de
        configuración, lo cual se realiza enviando una señal
        <span class="quote">&#8220;<span class="quote">HANGUP</span>&#8221;</span> al proceso <span class="application">inetd</span>
        como se muestra a continuación:</p><div class="example"><a id="network-inetd-hangup"></a><div class="example-title">Ejemplo 29.4. Envío de una señal HANGUP a
	  <span class="application">inetd</span></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></div></div><br class="example-break" /><p>Cada línea del fichero de configuración especifica un
        dæmon individual.  Los comentarios se preceden por el
        caracter <span class="quote">&#8220;<span class="quote">#</span>&#8221;</span>.  El formato del fichero de
        configuración <code class="filename">/etc/inetd.conf</code> es el
	siguiente:</p><pre class="programlisting">service-name
socket-type
protocol
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute]]
user[:group][/login-class]
server-program
server-program-arguments</pre><p>A continuación se muestra una entrada de ejemplo para el
        dæmon <span class="application">ftpd</span> para IPv4:</p><pre class="programlisting">ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">service-name</span></dt><dd><p>Este es el nombre del servicio que proporciona un
              determinado dæmon.  Se debe corresponder con el nombre del
              nombre de servicio que se declara en el fichero
	      <code class="filename">/etc/services</code>.  Este fichero determina sobre
              qué puerto debe ponerse a escuchar
              <span class="application">inetd</span>.  Si se crea un nuevo servicio
              se debe especificar primero en
              <code class="filename">/etc/services</code>.</p></dd><dt><span class="term">socket-type</span></dt><dd><p>Puede ser <code class="literal">stream</code>,
	      <code class="literal">dgram</code>, <code class="literal">raw</code> o
	      <code class="literal">seqpacket</code>.  <code class="literal">stream</code>
	      se debe utilizar obligatoriamente para dæmones orientados
              a conexión (dæmones TCP) mientras que
	      <code class="literal">dgram</code> se utiliza en dæmones basados en
              el protocolo de transporte UDP.</p></dd><dt><span class="term">protocol</span></dt><dd><p>Uno de los siguientes:</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Protocolo</th><th>Explicación</th></tr></thead><tbody><tr><td>tcp, tcp4</td><td>TCP IPv4</td></tr><tr><td>udp, udp4</td><td>UDP IPv4</td></tr><tr><td>tcp6</td><td>TCP IPv6</td></tr><tr><td>udp6</td><td>UDP IPv6</td></tr><tr><td>tcp46</td><td>TCP IPv4 e IPv6 al mismo tiempo</td></tr><tr><td>udp46</td><td>UDP IPv4 e IPv6 al mismo tiempo</td></tr></tbody></table></div></dd><dt><span class="term">{wait|nowait}[/max-child[/max-connections-per-ip-per-minute]]</span></dt><dd><p><code class="option">wait|nowait</code> indica si el dæmon puede
              gestionar su propio <span class="quote">&#8220;<span class="quote">socket</span>&#8221;</span> o no.  Los <span class="quote">&#8220;<span class="quote">
              sockets</span>&#8221;</span> de tipo <code class="option">dgram</code> deben utilizar
              obigatoriamente la opción <code class="option">wait</code> mientras
	      que los dæmones basados en <span class="quote">&#8220;<span class="quote">sockets</span>&#8221;</span> de tipo
              <span class="quote">&#8220;<span class="quote">stream</span>&#8221;</span>, los cuales se implementan normalmente
              mediante hilos, debería utilizar la opción
              <code class="option">nowait</code>. La opción
              <code class="option">wait</code> normalmente entrega varios <span class="quote">&#8220;<span class="quote">
              sockets</span>&#8221;</span> a un único dæmon, mientras que la
	      opción <code class="option">nowait</code> lanza un dæmon
              <span class="quote">&#8220;<span class="quote">hijo</span>&#8221;</span> por cada nuevo <span class="quote">&#8220;<span class="quote">
	      socket</span>&#8221;</span>.</p><p>El número máximo de dæmones <span class="quote">&#8220;<span class="quote">
	      hijo</span>&#8221;</span> que puede lanzar
	      <span class="application">inetd</span> se puede especificar mediante
              la opción <code class="option">max-child</code>.  Si se necesita por
              ejemplo un límite de diez instancias para un dæmon
              en particular se puede especificar el valor
              <code class="literal">10</code> justo después de la opción
              <code class="option">nowait</code>.</p><p>Además de <code class="option">max-child</code> se puede activar
              otra opción para limitar en número máximo de
              conexiones que se aceptan desde un determinado lugar mediante la
              opción
              <code class="option">max-connections-per-ip-per-minute</code>.
              Esta opción hace justo lo que su nombre indica.  Un
              valor de, por ejemplo, diez en esta opción
	      limitaría cualquier máquina remota a un
              máximo de diez intentos de conexión por
              minuto.  Esto resulta útil para prevenir un consumo
              incontrolado de recursos y ataques de Denegación de
              Servicio (<span class="quote">&#8220;<span class="quote">Denial of Service</span>&#8221;</span> o DoS) sobre nuestra
              máquina.</p><p>Cuando se especifica este campo las opciones
              <code class="option">wait</code> o <code class="option">nowait</code> son
	      obligatorias  <code class="option">max-child</code> y
	      <code class="option">max-connections-per-ip-per-minute</code> son
	      opcionales.</p><p>Un dæmon de tipo <span class="quote">&#8220;<span class="quote">stream</span>&#8221;</span> sin la
              opción <code class="option">max-child</code> y sin la opción
              <code class="option">max-connections-per-ip-per-minute</code>
              simplemente especificaría la opción
	      <code class="literal">nowait</code>.</p><p>El mismo dæmon con el límite máximo de
              diez dæmones <span class="quote">&#8220;<span class="quote">hijos</span>&#8221;</span> sería:
	      <code class="literal">nowait/10</code>.</p><p>La misma configuración con un límite
              de veinte conexiones por dirección IP por minuto y un
              máximo total de diez dæmones <span class="quote">&#8220;<span class="quote">hijos</span>&#8221;</span>
	      sería:
	      <code class="literal">nowait/10/20</code>.</p><p>Todas estas opciones son utilizadas por el dæmon
                  <span class="application">fingerd</span> que se muestra a
                  continuación a modo de ejemplo:</p><pre class="programlisting">finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre></dd><dt><span class="term">user</span></dt><dd><p>Este es el nombre de usuario con el que debería
              ejecutarse un determinado dæmon.  Normalmente los
              dæmones se suelen ejectar con permisos de
              <code class="systemitem">root</code>.  Por motivos de seguridad, resulta
              bastante común encontrarse con algunos servidores que se
              ejecutan bajo el usuario <code class="systemitem">daemon</code> o incluso
              por el usuario menos privilegiado de todos que es el usuario
              <code class="systemitem">nobody</code>.</p></dd><dt><span class="term">server-program</span></dt><dd><p>La ruta completa de la localización del dæmon
              que se quiere ejecutar cuando se recibe un intento de
              conexión.  Si el dæmon  es un servicio
              proporcionado por el propio <span class="application">inetd</span> se
              debe utilizar la opcion <code class="option">internal</code> en su
              lugar.</p></dd><dt><span class="term">server-program-arguments</span></dt><dd><p>Esto funciona en conjunción con
	      <code class="option">server-program</code>, ya que especifica los
               argumentos, comenzando por
               <code class="literal">argv[0]</code>, que se pasan al dæmon
               cuando se le invoca.  Si la línea de órdenes es
               <code class="command">mydaemon -d</code>, <code class="literal">midæmon
                -d</code> debería ser el valor de la opción
                <code class="option">server-program-arguments</code>. Si el
               dæmon es un servicio interno se debe utilizar la
               utilizar la opción <code class="option">internal</code> en lugar de
               la que estamos comentando.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-security"></a>29.14.5. Seguridad</h3></div></div></div><p>Dependiendo del perfil de seguridad establecido cuando se
        instaló el sistema FreeBSD  varios dæmones de
        <span class="application">inetd</span> pueden estar desactivados o
        activados.  Si no se necesita un dæmon determinado, <span class="emphasis"><em>
        no lo active</em></span>.  Especifique un <span class="quote">&#8220;<span class="quote">#</span>&#8221;</span> al
	comienzo de la línea del dæmon que quiere desactivar y
        envíe una señal <a class="link" href="#network-inetd-hangup" title="Ejemplo 29.4. Envío de una señal HANGUP a inetd">hangup</a> a
        <span class="application">inetd</span>.  No se aconseja ejecutar algunos
        dæmones determinados (un caso típico es
        <span class="application">fingerd</span>) porque pueden proporcionar
        información valiosa para un atacante.</p><p>Algunos dæmones no presentan ninguna característica de
        seguridad y poseen grandes o incluso no poseen tiempos de
        expiración para los intentos de conexión.  Esto permite
        que un atacante sature los recursos de nuestra máquina
        realizando intentos de conexión a una tasa relativamente baja
        contra uno de estos ingenuos dæmones.  Pueder ser una buena
        idea protegerse de esto utilizando las opciones
   	<code class="option">max-connections-per-ip-per-minute</code> y <code class="option">
	max-child</code> para este tipo de dæmones.</p><p>El recubrimiento de TCP está activado por defecto tal y como
        ya se ha comentado anteriormente.  Consulte la página
        del manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> para obtener más
        información sobre cómo aplicar restricciones
        relacionadas con TCP a los dæmones invocados por
        <span class="application">inetd</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-misc"></a>29.14.6. Varios</h3></div></div></div><p><span class="application">daytime</span>,
	<span class="application">time</span>,
	<span class="application">echo</span>,
	<span class="application">discard</span>,
	<span class="application">chargen</span> y
	<span class="application">auth</span> son servicios que
        <span class="application">inetd</span> proporciona de forma
        interna y propia.</p><p>El servicio <span class="application">auth</span> proporciona
        servicios de identificación a través de la red
	(<span class="application">ident</span>,
            <span class="application">identd</span>) y se puede configurar
            hasta en cierto grado.</p><p>Consulte la página del manual de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> si quiere
        conocer todos los detalles.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-plip"></a>29.15. Línea IP paralela (PLIP)</h2></div></div></div><a id="idp82412752" class="indexterm"></a><a id="idp82413264" class="indexterm"></a><p>PLIP nos permite configurar TCP/IP a través del puerto
      paralelo.  Es útil para conectar máquinas que no poseen
      tarjetas de red, o para instalar FreeBSD en ciertos viejos modelos de
      portátiles.  En esta sección se explica lo
      siguiente:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Construcción de un cable paralelo (laplink).</p></li><li class="listitem"><p>Conexión de dos computadores utilizando PLIP.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-create-parallel-cable"></a>29.15.1. Construcción de un cable paralelo</h3></div></div></div><p>Se puede comprar un cable paralelo en cualquier tienda de
         componentes informáticos. No obstante si no es posible
         comprarlo o simplemente queremos saber cómo hacerlo
         nosotros mismos, en la siguiente tabla mostramos como hacer un cable
         de impresora paralelo.</p><div class="table"><a id="idp82421456"></a><div class="table-title">Tabla 29.1. Cableado de una conexión de cable paralelo para redes</div><div class="table-contents"><table summary="Cableado de una conexión de cable paralelo para redes" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Nombre-A</th><th>Extremo-A</th><th>Extremo-B</th><th>Descr.</th><th>Post/Bit</th></tr></thead><tbody><tr><td><div class="literallayout"><p>DATA0<br />
-ERROR</p></div></td><td><div class="literallayout"><p>2<br />
15</p></div></td><td><div class="literallayout"><p>15<br />
2</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x01<br />
1/0x08</p></div></td></tr><tr><td><div class="literallayout"><p>DATA1<br />
+SLCT</p></div></td><td><div class="literallayout"><p>3<br />
13</p></div></td><td><div class="literallayout"><p>13<br />
3</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x02<br />
1/0x10</p></div></td></tr><tr><td><div class="literallayout"><p>DATA2<br />
+PE</p></div></td><td><div class="literallayout"><p>4<br />
12</p></div></td><td><div class="literallayout"><p>12<br />
4</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x04<br />
1/0x20</p></div></td></tr><tr><td><div class="literallayout"><p>DATA3<br />
-ACK</p></div></td><td><div class="literallayout"><p>5<br />
10</p></div></td><td><div class="literallayout"><p>10<br />
5</p></div></td><td>Strobe</td><td><div class="literallayout"><p>0/0x08<br />
1/0x40</p></div></td></tr><tr><td><div class="literallayout"><p>DATA4<br />
BUSY</p></div></td><td><div class="literallayout"><p>6<br />
11</p></div></td><td><div class="literallayout"><p>11<br />
6</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x10<br />
1/0x80</p></div></td></tr><tr><td>GND</td><td>18-25</td><td>18-25</td><td>GND</td><td>-</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-plip-setup"></a>29.15.2. Configuración de PLIP</h3></div></div></div><p>En primer lugar debemos tener en nuesras manos un cable <span class="quote">&#8220;<span class="quote">
         laplink</span>&#8221;</span>.  A continuación se debe comprobar que ambos
         sistemas poseen núcleos con soporte para el controlador
	 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep lp /var/run/dmesg.boot</code></strong>
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port</pre><p>El puerto paralelo debe ser un puerto controlado por alguna <span class="quote">&#8220;<span class="quote">
        irq</span>&#8221;</span>.  En FreeBSD 4.X se debería tener un línea
        como la siguiente en el fichero de configuración del
        kernel:</p><pre class="programlisting">device ppc0 at isa? irq 7</pre><p>En FreeBSD 5.X el fichero
	<code class="filename">/boot/device.hints</code> debe contener las siguientes
        líneas:</p><pre class="programlisting">hint.ppc.0.at="isa"
hint.ppc.0.irq="7"</pre><p>A continuación se debe comprobar que el fichero de
        configuración del núcleo posee una línea con
        <code class="literal">device plip</code> o también puede
        comprobar si se ha cargado el módulo del núcleo
        <code class="filename">plip.ko</code>.  Tanto en un caso como en el otro, cuando
        se ejecute <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> debería aparecer el interfaz de
        red paralelo.  En FreeBSD 4.X se muestra algo parecido a
        lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0</code></strong>
lp0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</pre><p>y en FreeBSD 5.X:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0</code></strong>
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</pre><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">El nombre del dispositivo utilizado para la interfaz
        paralela es distinto en FreeBSD 4.X
	(<code class="filename">lpX</code>)
	y en FreeBSD 5.X
	(<code class="filename">plipX</code>).</p></div><p>Enchufe el cable <span class="quote">&#8220;<span class="quote">laplink</span>&#8221;</span> en los interfaces de ambos
        computadores.</p><p>Configure los parámetros de la interfaz de red en ambas
        máquinas como <code class="systemitem">root</code>.  Por ejemplo, si
        queremos conectar la máquina <code class="systemitem">host1</code>
            ejecutando FreeBSD 4.X con la máquina
            <code class="systemitem">host2</code> que ejecuta FreeBSD 5.X:</p><pre class="programlisting">                 host1 &lt;-----&gt; host2
Dirección IP 10.0.0.1      10.0.0.2</pre><p>Configure la interfaz de <code class="systemitem">host1</code> así:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0 10.0.0.1 10.0.0.2</code></strong></pre><p>Configure la interfaz de <code class="systemitem">host2</code> por medio de:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0 10.0.0.2 10.0.0.1</code></strong></pre><p>Tras esto debería disponerse de una conexión
        totalmente funcional.  Por favor, consulte <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lp</span>(4)</span></a> y <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>
        si quiere saber más.</p><p>Además se debe añadir ambas máquinas al
	fichero <code class="filename">/etc/hosts</code>:</p><pre class="programlisting">127.0.0.1               localhost.mi.dominio localhost
10.0.0.1                host1.mi.dominio host1
10.0.0.2                host2.mi.dominio</pre><p>Para comprobar que efectivamente la conexión funciona se
            puede probar a hacer un ping desde cada máquina.  Por
            ejemplo en la máquina <code class="systemitem">host1</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig lp0</code></strong>
lp0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000
<code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Internet:
Destination        Gateway          Flags     Refs     Use      Netif Expire
host2              host1              UH          0       0       lp0
<code class="prompt">#</code> <strong class="userinput"><code>ping -c 4 host2</code></strong>
PING host2 (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- host2 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>29.16. IPv6</h2></div><div><span class="authorgroup">Texto original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Reestructurado y ampliado por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>IPv6 (también conocido como IPng o <span class="quote">&#8220;<span class="quote">IP de nueva
      generación</span>&#8221;</span>) es la nueva versión del conocido
      protocolo de red IP, tambíen llamado IPv4.  Como sucede con el
      resto de los sistemas *BSD FreeBSD proporciona una implementación
      de referencia que desarrolla el proyecto japonés
      <acronym class="acronym">KAME</acronym>.  FreeBSD dispone de todo lo necesario para
      experimentar con el nuevo protocolo de red.  Esta sección se
      centra en conseguir configurar y ejecutar correctamente el protocolo
      IPv6.</p><p>Al comienzo de los años 90 la gente comenzó a
      preocuparse por el rápido consumo del espacio de direcciones
      de IPv4.  Dada la expansión actual de Internet existen dos
      preocupaciones principales:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Agotamiento de las direcciones disponibles.  Actualmente
          no se trata del principal problema debido al uso generalizado del
          del espacio de direccionamiento privado
          (<code class="systemitem">10.0.0.0/8</code>,
          <code class="systemitem">192.168.0.0/24</code>, etc.) junto con
	  <acronym class="acronym">NAT</acronym>.</p></li><li class="listitem"><p>El número de entradas de las tablas de rutas comenzaba a
          ser imposible de manejar.  Esto todavia es un problema
          prioritario.</p></li></ul></div><p>IPv6 trata de resolver estos problemas y algunos más de la
      siguiente forma:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>IPv6 posee un espacio de direccionamiento de 128 bits.  En otras
          palabras, en teoría existen
	  340,282,366,920,938,463,463,374,607,431,768,211,456
          direcciones disponibles.  Esto significa que existen
	  aproximadamente 6.67 * 10^27 direcciones IPv6 por metro cuadrado
	  disponibles para todo el planeta Tierra.</p></li><li class="listitem"><p>Los <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span> sólo almacenan direcciones de
	  red agregadas así que se reduce el número de entradas
          para cada tabla de rutas a un promedio de 8192.</p></li></ul></div><p>Existen además muchas otras caracterísiticas
      interesantes que IPv6 proporciona, como:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Autoconfiguración de direcciones (<a class="link" href="http://www.ietf.org/rfc/rfc2462.txt" target="_top">RFC2462</a>)</p></li><li class="listitem"><p>Direcciones anycast (<span class="quote">&#8220;<span class="quote">una-de-varias</span>&#8221;</span>)</p></li><li class="listitem"><p>Soporte de direcciones multicast predefinido</p></li><li class="listitem"><p>IPsec (Seguridad en IP)</p></li><li class="listitem"><p>Estructura de la cabecera simplificada</p></li><li class="listitem"><p>IP móvil</p></li><li class="listitem"><p>Mecanismos de traducción de IPv6 a IPv4 (y viceversa)</p></li></ul></div><p>Si quiere saber más sobre IPv6 le recomendamos que
      consulte:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Resumen de IPv6 en <a class="link" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">playground.sun.com</a></p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li><li class="listitem"><p><a class="link" href="http://www.6bone.net" target="_top">6bone.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82510672"></a>29.16.1. Conceptos básicos sobre las direcciones IPv6</h3></div></div></div><p>Existen varios tipos distintos de direcciones IPv6: Unicast,
        Anycast y Multicast.</p><p>Las direcciones unicast son direcciones bien conocidas.  Un
        paquete que se envía a una dirección unicast
        deberín llega a la interfaz identificada por dicha
        dirección.</p><p>Las direcciones anycast son sintácticamente indistinguibles
        de las direcciones unicast pero sirven para identificar a un
        <span class="emphasis"><em>conjunto</em></span> de interfaces.  Un paquete destinado a
        una dirección anycast llega a la interfaz
        <span class="quote">&#8220;<span class="quote">más cercana</span>&#8221;</span> (en términos de
        métrica de <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span>).  Las direcciones anycast
        sólo se pueden utilizar en <span class="quote">&#8220;<span class="quote">routers</span>&#8221;</span>.</p><p>Las direcciones multicast identifican un grupo de interfaces.
        Un paquete destinado a una dirección multicast llega a todos los
        los interfaces que se encuentran agrupados bajo dicha
        dirección.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Las direcciones IPv4 de tipo broadcast
          (normalmente <code class="systemitem">xxx.xxx.xxx.255</code>) se expresan en
          IPv6 mediante direcciones multicast.</p></div><div class="table"><a id="idp82515536"></a><div class="table-title">Tabla 29.2. Direcciones IPv6 reservadas</div><div class="table-contents"><table summary="Direcciones IPv6 reservadas" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Dirección IPv6</th><th>Longitud del Prefijo (Bits)</th><th>Descripción</th><th>Notas</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 bits</td><td>sin especificar</td><td>como <code class="systemitem">0.0.0.0</code> en Pv4</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 bits</td><td>dirección de bucle local (loopback)</td><td>como las <code class="systemitem">127.0.0.1</code> en
		IPv4</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 bits</td><td>direcciónes IPv6 compatibles con IPv4</td><td>Los 32 bits más bajos contienen una
	        dirección IPv4.  También se denominan direcciones
                <span class="quote">&#8220;<span class="quote">empotradas.</span>&#8221;</span></td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 bits</td><td>direcciones IPv6 mapeadas a IPv4</td><td>Los 32 bits más bajos contienen una
	        dirección IPv4.  Se usan para representar direcciones
                IPv4 mediante direcciones IPv6.</td></tr><tr><td><code class="systemitem">fe80::</code> -
		<code class="systemitem">feb::</code></td><td>10 bits</td><td>direcciones link-local</td><td>equivalentes a la dirección de loopback de
	        IPv4</td></tr><tr><td><code class="systemitem">fec0::</code> -
		<code class="systemitem">fef::</code></td><td>10 bits</td><td>direcciones site-local</td><td>Equivalentes al direccionamiento privado de IPv4</td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 bits</td><td>multicast</td><td> </td></tr><tr><td><code class="systemitem">001</code> (base
		2)</td><td>3 bits</td><td>direcciones unicast globales</td><td>Todas las direcciones IPv6 globales se asignan a partir de
                este espacio. Los primeros tres bits siempre son
                <span class="quote">&#8220;<span class="quote">001</span>&#8221;</span>.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82567760"></a>29.16.2. Lectura de las direcciones IPv6</h3></div></div></div><p>La forma canónica que se utiliza para representar
        direcciones IPv6 es: <code class="systemitem">x:x:x:x:x:x:x:x</code>, donde cada
	<span class="quote">&#8220;<span class="quote">x</span>&#8221;</span> se considera un valor hexadecimal de 16 Bit.
        Por ejemplo
	<code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code></p><p>A menudo una dirección posee alguna subcadena de varios
        ceros consecutivos de forma que se puede abreviar dicha cadena
        (sólo una vez, para evitar ambigúedades) mediante
        <span class="quote">&#8220;<span class="quote">::</span>&#8221;</span>.  También se pueden omitir los ceros a la
        ceros a la izquierda dentro de un valor
        <span class="quote">&#8220;<span class="quote">x</span>&#8221;</span>. Por ejemplo
	<code class="systemitem">fe80::1</code> se corresponde con la forma
	canónica
	<code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>.</p><p>Una tercera forma de escribir direciones IPv6 es utilizando la
        ya tradicional notación decimal de IPv4 pero
        sólamente para los 32 bits más bajos de la
        dirección IPv6.  Por ejemplo
	<code class="systemitem">2002::10.0.0.1</code> se correspondería
	con la  representation hexadecimal canónica
	<code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	la cual es equivalente también a escribir <code class="systemitem">2002::a00:1</code>.</p><p>A estas alturas el lector debería ser capaz de comprender
            lo siguiente:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre><p><code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code>
	es una dirección link-local autoconfigurada.  Se construye a
        partir de la dirección MAC de la tarjeta de red.</p><p>Si quiere saber más sobre la estructura de las
            direcciones IPv6 puede consultar <a class="link" href="http://www.ietf.org/rfc/rfc3513.txt" target="_top">RFC3513</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82580816"></a>29.16.3. Establecimiento de conectividad</h3></div></div></div><p>Actualmente existen cuatro formas distintas de conectarse
        con otras máquinas y redes IPv6:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Unirse a la red experimental denominada 6bone</p></li><li class="listitem"><p>Obtener una red IPv6 a través de nuestro proveedor de
            acceso a Internet.  Consulte a su proveedor de servicios para
            para más información.</p></li><li class="listitem"><p>Encapsulación de IPv6 sobre IPv4 (<a class="link" href="http://www.ietf.org/rfc/rfc3068.txt" target="_top">RFC3068</a>)</p></li><li class="listitem"><p>Utilización del <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/freenet6/pkg-descr">net/freenet6</a> si se dispone de una
            de una conexión de marcación por modem.</p></li></ul></div><p>Vamos a explicar cómo conectarse al 6bone ya que parece ser
        la forma más utilizada en la actualidad.</p><p>En primer lugar se recomienda consultar el sitio web de
        <a class="link" href="http://www.6bone.net/" target="_top">6bone</a> para saber
        cuál es la conexión del 6bone (físicamente)
	más próxima.  Se debe escribir a la persona responsable
        de ese nodo y con un poco de suerte dicha persona responderá con
        con un conjunto de instrucciones y pasos a seguir para establecer la
        la conexión con ellos y a través de ellos con el resto
        de los nodos IPv6 que forman parte del 6bone.  Normalmente esta
        conexión se establece usando túneles GRE (gif).</p><p>Veamos un ejemplo típico de configuración de un
        de un túnel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gif&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gif</span>(4)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 create</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0</code></strong>
gif0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1280
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 tunnel MI_DIRECCIÓn_IPV4  SU_DIRECCIÓn_IPV4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 inet6 alias DIRECCIÓn_DE-SALIDA_IPv6_DEL_TÚNEL_ASIGNADO</code></strong></pre><p>Sustituya las palabras en mayúsculas por la
        información recibida del nodo 6bone al que nos queremos
        conectar.</p><p>La orden anterior establece el túnel.  Compruebe que el
        túnel funciona correctamente mediante <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>.
        Haga un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping6&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping6</span>(8)</span></a> a <code class="systemitem">ff02::1%gif0</code>.  Deberíamos recibir
        recibir <span class="quote">&#8220;<span class="quote">dos</span>&#8221;</span> respuestas.</p><div xmlns="" class="note"><h3 class="admontitle">Nota: </h3><p xmlns="http://www.w3.org/1999/xhtml">Para que el lector no se quede pensando en el significado
          significado de la dirección <code class="systemitem">ff02:1%gif0</code> le podemos decir que se trata de
          de una dirección IPv6 multicast de tipo link-local.
          <code class="literal">%gif0</code> no forma parte del protocolo IPv6 como tal
          sino que se trata de un detalle de implementación relacionado
          con las direcciones link-local y se añade para especificar la
          interfaz de salida que se debe utilizar para enviar los paquetes de
          <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping6&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping6</span>(8)</span></a>.  Como estamos haciendo ping a una dirección
          multicast a la que se unen todos los interfaces pertenecientes al
          mismo enlace debería responder al ping tanto nuestro propio
          interfaz como el interfaz remoto.</p></div><p>A continuación se configura la ruta por defecto hacia
        nuestro enlace 6bone; observe que es muy semejante a lo que hay que
        hacer en IPv4:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -inet6 default -interface gif0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ping6 -n MI_UPLINK</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>traceroute6 www.jp.FreeBSD.org</code></strong>
(3ffe:505:2008:1:2a0:24ff:fe57:e561) from 3ffe:8060:100::40:2, 30 hops max, 12 byte packets
     1  atnet-meta6  14.147 ms  15.499 ms  24.319 ms
     2  6bone-gw2-ATNET-NT.ipv6.tilab.com  103.408 ms  95.072 ms *
     3  3ffe:1831:0:ffff::4  138.645 ms  134.437 ms  144.257 ms
     4  3ffe:1810:0:6:290:27ff:fe79:7677  282.975 ms  278.666 ms  292.811 ms
     5  3ffe:1800:0:ff00::4  400.131 ms  396.324 ms  394.769 ms
     6  3ffe:1800:0:3:290:27ff:fe14:cdee  394.712 ms  397.19 ms  394.102 ms</pre><p>Esta captura de pantalla variará dependiendo de la
        localización de la máquina.  Tras seguir estos pasos
	deberíamos poder alcanzar el sitio IPv6 de <a class="link" href="http://www.kame.net" target="_top">www.kame.net</a> y ver la tortuga
         bailarina, que es una imagen animada que sólo se muestra cuando
         se accede al servidor web utilizando el protocolo IPv6 (para
         ellos se encesita utilizar un navegador web que soporte IPv6,
         IPv6, por ejemplo <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a> o
         <span class="application">Konqueror</span>, que forma parte de
	 <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/kdebase3/pkg-descr">x11/kdebase3</a>, o también
	 con <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/epiphany/pkg-descr">www/epiphany</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82611664"></a>29.16.4. DNS en el mundo IPv6</h3></div></div></div><p>Existen dos tipos de registros de DNS para IPv6.  No
        obstante el IETF ha declarado los registros A6 y CNAME como registros
        para uso experimental.  Los registros de tipo AAAA son los
        únicos estandar a día de hoy.</p><p>La utilización de registros de tipo AAAA es muy
        sencilla.  Se asocia el nombre de la máquina con la
            dirección IPv6 de la siguiente forma:</p><pre class="programlisting">NOMBREDEMIMÁQUINA AAAA   MIDIRECCIÓNIPv6</pre><p>De igual forma que en IPv4 se utilizan los registros de tipo
        A.  En caso de no poder administrar su propia zona de
        <acronym class="acronym">DNS</acronym> se puede pedir esta configuración  a su
        proveedor de servicios.  Las versiones actuales de
        <span class="application">bind</span> (versiones 8.3 y 9) y el
        <span class="quote">&#8220;<span class="quote">port</span>&#8221;</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/djbdns/pkg-descr">dns/djbdns</a>
        (con el parche de IPv6 correspondiente) soportan los registros de tipo
        AAAA.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-atm"></a>29.17. ATM en FreeBSD 5.X</h2></div><div><span class="authorgroup">Escrito por <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Harti</span> <span class="surname">Brandt</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82618320"></a>29.17.1. Configuración de IP clásico sobre ATM (PVCs)</h3></div></div></div><p>IP clásico sobre ATM (<acronym class="acronym">CLIP</acronym>) es el
        método más sencillo de utilizar ATM con IP.  Se puede
        utilizar con conexiones conmutadas (SVC) y con conexiones
        permanentes (PVCs).  En esta sección se describe cómo
        configurar una red basada en PVCs.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82619728"></a>29.17.1.1. Configuraciones en red mallada completa</h4></div></div></div><p>El primer método para configurar <acronym class="acronym">CLIP</acronym>
          con PVCs consiste en conectar unas máquinas con otras mediante
          circuitos PVC dedicados.  Aunque la configuración parece
          sencilla llega a resultar imposible de manejar cuando se posee un
          número grande de máquinas.  El ejemplo que se muestra
          a continuación supone que nuestra red posee cuatro
          máquinas y que cada una se conecta a la red ATM mediante una
          tarjeta de red ATM.  El primer paso consiste en planificar las
          direcciones IP y las conexiones ATM que se van a configurar en las
          máquinas.</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Máquina</th><th>Dirección IP</th></tr></thead><tbody><tr><td><code class="systemitem">hostA</code></td><td><code class="systemitem">192.168.173.1</code></td></tr><tr><td><code class="systemitem">hostB</code></td><td><code class="systemitem">192.168.173.2</code></td></tr><tr><td><code class="systemitem">hostC</code></td><td><code class="systemitem">192.168.173.3</code></td></tr><tr><td><code class="systemitem">hostD</code></td><td><code class="systemitem">192.168.173.4</code></td></tr></tbody></table></div><p>Para construir una red completamente mallada necesitamos una
          conexión ATM entre cada par de máquinas:</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Máquinas</th><th>Pareja VPI.VCI</th></tr></thead><tbody><tr><td><code class="systemitem">hostA</code> - <code class="systemitem">hostB</code></td><td>0.100</td></tr><tr><td><code class="systemitem">hostA</code> - <code class="systemitem">hostC</code></td><td>0.101</td></tr><tr><td><code class="systemitem">hostA</code> - <code class="systemitem">hostD</code></td><td>0.102</td></tr><tr><td><code class="systemitem">hostB</code> - <code class="systemitem">hostC</code></td><td>0.103</td></tr><tr><td><code class="systemitem">hostB</code> - <code class="systemitem">hostD</code></td><td>0.104</td></tr><tr><td><code class="systemitem">hostC</code> - <code class="systemitem">hostD</code></td><td>0.105</td></tr></tbody></table></div><p>Los valores VPI y VCI en cada extremo de la conexión
          pueden ser diferentes pero por simplicidad suponemos que son
          iguales.  A continuación necesitamos configurar las
          interfaces ATM en cada máquina:</p><pre class="screen">hostA<code class="prompt">#</code> ifconfig hatm0 192.168.173.1 up
hostB<code class="prompt">#</code> ifconfig hatm0 192.168.173.2 up
hostC<code class="prompt">#</code> ifconfig hatm0 192.168.173.3 up
hostD<code class="prompt">#</code> ifconfig hatm0 192.168.173.4 up</pre><p>Suponiendo que la interfaz ATM es
	  <code class="filename">hatm0</code> en todas las máquinas.  Ahora
          necesitamos configurar los PVCs en las máquinas (suponemos que
          ya se han configurado de forma correcta en el <span class="quote">&#8220;<span class="quote">switch</span>&#8221;</span>
          ATM, para lo cual puede ser necesario consultar el manual del
          <span class="quote">&#8220;<span class="quote">switch</span>&#8221;</span>).</p><pre class="screen">hostA<code class="prompt">#</code> atmconfig natm add 192.168.173.2 hatm0 0 100 llc/snap ubr
hostA<code class="prompt">#</code> atmconfig natm add 192.168.173.3 hatm0 0 101 llc/snap ubr
hostA<code class="prompt">#</code> atmconfig natm add 192.168.173.4 hatm0 0 102 llc/snap ubr

hostB<code class="prompt">#</code> atmconfig natm add 192.168.173.1 hatm0 0 100 llc/snap ubr
hostB<code class="prompt">#</code> atmconfig natm add 192.168.173.3 hatm0 0 103 llc/snap ubr
hostB<code class="prompt">#</code> atmconfig natm add 192.168.173.4 hatm0 0 104 llc/snap ubr

hostC<code class="prompt">#</code> atmconfig natm add 192.168.173.1 hatm0 0 101 llc/snap ubr
hostC<code class="prompt">#</code> atmconfig natm add 192.168.173.2 hatm0 0 103 llc/snap ubr
hostC<code class="prompt">#</code> atmconfig natm add 192.168.173.4 hatm0 0 105 llc/snap ubr

hostD<code class="prompt">#</code> atmconfig natm add 192.168.173.1 hatm0 0 102 llc/snap ubr
hostD<code class="prompt">#</code> atmconfig natm add 192.168.173.2 hatm0 0 104 llc/snap ubr
hostD<code class="prompt">#</code> atmconfig natm add 192.168.173.3 hatm0 0 105 llc/snap ubr</pre><p>Por supuesto que se pueden utilizar otras especificaciones
          de tráfico siempre y cuando las tarjetas de red las
          soporten.  En este caso la especificación del tipo de
          tráfico se completa con los parámetros del
	  tráfico.  Puede acceder a la ayuda de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atmconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atmconfig</span>(8)</span></a>
          así:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atmconfig help natm add</code></strong></pre><p>y por supuesto en la página de manual de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atmconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atmconfig</span>(8)</span></a>.</p><p>Se puede crear la misma configuración utilizando el
	  fichero <code class="filename">/etc/rc.conf</code>. Para la máquina
	  <code class="systemitem">hostA</code> sería algo así:</p><pre class="programlisting">network_interfaces="lo0 hatm0"
ifconfig_hatm0="inet 192.168.173.1 up"
natm_static_routes="hostB hostC hostD"
route_hostB="192.168.173.2 hatm0 0 100 llc/snap ubr"
route_hostC="192.168.173.3 hatm0 0 101 llc/snap ubr"
route_hostD="192.168.173.4 hatm0 0 102 llc/snap ubr"</pre><p>El estado de todas las rutas
          <acronym class="acronym">CLIP</acronym> se puede obtener en todo momento
	  con:</p><pre class="screen">hostA<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm show</code></strong></pre></div></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="appendices"></a>Parte V. Apéndices</h1></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="chapter"><a href="#mirrors">30. Cómo obtener FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mirrors-ftp">30.1. Servidores FTP</a></span></dt><dt><span class="sect1"><a href="#cvsup">30.2. Uso de CVSup</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bibliography">31. Bibliografía</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp82705360">31.1. Libros y revistas específicas sobre FreeBSD</a></span></dt><dt><span class="sect1"><a href="#idp82723920">31.2. Guías de usuario</a></span></dt><dt><span class="sect1"><a href="#idp82741968">31.3. Guías de administrador</a></span></dt><dt><span class="sect1"><a href="#idp82757584">31.4. Guías de programadores</a></span></dt><dt><span class="sect1"><a href="#idp82774608">31.5. El sistema operativo por dentro</a></span></dt><dt><span class="sect1"><a href="#idp82791504">31.6. Referencia de seguridad</a></span></dt><dt><span class="sect1"><a href="#idp82796240">31.7. Referencia de hardware</a></span></dt><dt><span class="sect1"><a href="#idp82805712">31.8. Historia de UNIX</a></span></dt><dt><span class="sect1"><a href="#idp82831952">31.9. Diarios y revistas</a></span></dt></dl></dd><dt><span class="appendix"><a href="#eresources">A. Recursos en Internet</a></span></dt><dd><dl><dt><span class="sect1"><a href="#eresources-mail">A.1. Listas de correo</a></span></dt><dt><span class="sect1"><a href="#eresources-news">A.2. Grupos de noticias de Usenet</a></span></dt><dt><span class="sect1"><a href="#eresources-web">A.3. Servidores WWW</a></span></dt><dt><span class="sect1"><a href="#eresources-email">A.4. Direcciones de correo electrónico</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">A.5. Cuentas shell</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pgpkeys">32. PGP keys</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp83281744">32.1. Responsables</a></span></dt><dt><span class="sect1"><a href="#idp83285200">32.2. Miembros del Core Team</a></span></dt></dl></dd><dt><span class="index"><a href="#idp83322320">Índice</a></span></dt></dl></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirrors"></a>Capítulo 30. Cómo obtener FreeBSD</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#mirrors-ftp">30.1. Servidores FTP</a></span></dt><dt><span class="sect1"><a href="#cvsup">30.2. Uso de CVSup</a></span></dt></dl></div><p>Cómo obtener FreeBSD</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-ftp"></a>30.1. Servidores FTP</h2></div></div></div><p> </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="cvsup"></a>30.2. Uso de CVSup</h2></div></div></div><p> </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-install"></a>30.2.1. Instalación</h3></div></div></div><p> </p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-mirrors"></a>30.2.2. Servidores</h3></div></div></div><p> </p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-refuse-file"></a>30.2.2.1. El fichero <code class="filename">refuse</code></h4></div></div></div><p> </p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bibliography"></a>Capítulo 31. Bibliografía</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp82705360">31.1. Libros y revistas específicas sobre FreeBSD</a></span></dt><dt><span class="sect1"><a href="#idp82723920">31.2. Guías de usuario</a></span></dt><dt><span class="sect1"><a href="#idp82741968">31.3. Guías de administrador</a></span></dt><dt><span class="sect1"><a href="#idp82757584">31.4. Guías de programadores</a></span></dt><dt><span class="sect1"><a href="#idp82774608">31.5. El sistema operativo por dentro</a></span></dt><dt><span class="sect1"><a href="#idp82791504">31.6. Referencia de seguridad</a></span></dt><dt><span class="sect1"><a href="#idp82796240">31.7. Referencia de hardware</a></span></dt><dt><span class="sect1"><a href="#idp82805712">31.8. Historia de UNIX</a></span></dt><dt><span class="sect1"><a href="#idp82831952">31.9. Diarios y revistas</a></span></dt></dl></div><p>Aunque las páginas del manual proveen la referencia definitiva
   para partes individuales del sistema operativo FreeBSD, son notorias por
   no ilustrar como poner todas las piezas juntas para hacer que todo el
   sistema operativo funcione fácilmente. Debido a esto, no hay
   sustituto para un buen libro de administración de sistemas UNIX y un
   buen manual de usuario.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82705360"></a>31.1. Libros y revistas específicas sobre FreeBSD</h2></div></div></div><p><span class="emphasis"><em>Libros y revistas internacionales:</em></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://freebsd.csie.nctu.edu.tw/~jdli/book.html" target="_top">Usando
            FreeBSD</a> (en Chino).</p></li><li class="listitem"><p>FreeBSD for PC 98'ers (en japonés), publicado por SHUWA System
	  Co, LTD.  ISBN 4-87966-468-5 C3055 P2900E.</p></li><li class="listitem"><p>FreeBSD (en japonés), publicado por CUTT.  ISBN 4-906391-22-2
	  C3055 P2400E.</p></li><li class="listitem"><p><a class="link" href="http://www.shoeisha.co.jp/pc/index/shinkan/97_05_06.htm" target="_top">Introducción
          completa a FreeBSD</a> (en japonés), publicado por
          <a class="link" href="http://www.shoeisha.co.jp/" target="_top">Shoeisha Co., Ltd</a>.
          ISBN 4-88135-473-6 P3600E.</p></li><li class="listitem"><p><a class="link" href="http://www.ascii.co.jp/pb/book1/shinkan/detail/1322785.html" target="_top">Kit personal del
          principiante UNIX FreeBSD</a> (en japonés), publicado por
          <a class="link" href="http://www.ascii.co.jp/" target="_top">ASCII</a>.  ISBN 4-7561-1733-3 P3000E.</p></li><li class="listitem"><p>Manual FreeBSD (traducción del japonés), publicado por <a class="link" href="http://www.ascii.co.jp/" target="_top">ASCII</a>.  ISBN 4-7561-1580-2
	  P3800E.</p></li><li class="listitem"><p>FreeBSD mit Methode (en alemán), publicado por Computer und
	  Literatur Verlag/Vertrieb Hanser, 1998.  ISBN 3-932311-31-0.</p></li><li class="listitem"><p><a class="link" href="http://www.pc.mycom.co.uk/FreeBSD/install-manual.html" target="_top">Manual de
          instalación y utilización de FreeBSD</a> (en japonés),
          publicado por
          <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">Mainichi Communications Inc.</a>.</p></li></ul></div><p><span class="emphasis"><em>Libros y revistas en inglés:</em></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.cdrom.com/titles/freebsd/bsdcomp_bkx.phtml" target="_top">
            The Complete FreeBSD</a>, publicado por <a class="link" href="http://www.cdrom.com/" target="_top">Walnut Creek CDROM</a>.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82723920"></a>31.2. Guías de usuario</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    User's Reference Manual</em></span>.  O'Reilly &amp; Associates,
	  Inc., 1994. ISBN 1-56592-075-9</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    User's Supplementary Documents</em></span>. O'Reilly &amp;
	  Associates, Inc., 1994. ISBN 1-56592-076-7</p></li><li class="listitem"><p><span class="emphasis"><em>UNIX in a Nutshell</em></span>.  O'Reilly &amp;
	  Associates, Inc., 1990. ISBN 093717520X</p></li><li class="listitem"><p>Mui, Linda.  <span class="emphasis"><em>What You Need To Know When You Can't Find Your
          UNIX System Administrator</em></span>.  O'Reilly &amp;
	  Associates, Inc., 1995. ISBN 1-56592-104-6</p></li><li class="listitem"><p>La <a class="link" href="http://www-wks.acs.ohio-state.edu/" target="_top">Ohio State
	    University</a> ha escrito un <a class="link" href="http://www-wks.acs.ohio-state.edu/unix_course/unix.html" target="_top">Curso de
            introducción a UNIX</a> disponible en línea en
            formato HTML y postscript.</p></li><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/" target="_top">Jpman Project, Japan
	    FreeBSD Users Group</a>.  <a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/urm.html" target="_top">FreeBSD User's
	    Reference Manual</a> (traducción japonesa). <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">Mainichi Communications
	    Inc.</a>, 1998.  ISBN4-8399-0088-4 P3800E.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82741968"></a>31.3. Guías de administrador</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Albitz, Paul and Liu, Cricket.  <span class="emphasis"><em>DNS and
	    BIND</em></span>, 2nd Ed. O'Reilly &amp; Associates, Inc., 1997.
	  ISBN 1-56592-236-0</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    System Manager's Manual</em></span>.  O'Reilly &amp; Associates,
	  Inc., 1994.  ISBN 1-56592-080-5</p></li><li class="listitem"><p>Costales, Brian, et al.  <span class="emphasis"><em>Sendmail</em></span>, 2nd Ed.
	  O'Reilly &amp; Associates, Inc., 1997. ISBN 1-56592-222-0</p></li><li class="listitem"><p>Frisch, Æleen.  <span class="emphasis"><em>Essential System
	    Administration</em></span>, 2nd Ed. O'Reilly &amp; Associates,
	  Inc., 1995.  ISBN 1-56592-127-5</p></li><li class="listitem"><p>Hunt, Craig.  <span class="emphasis"><em>TCP/IP Network
	    Administration</em></span>.  O'Reilly &amp; Associates, Inc., 1992.
	  ISBN 0-937175-82-X</p></li><li class="listitem"><p>Nemeth, Evi.  <span class="emphasis"><em>UNIX System Administration
	    Handbook</em></span>.  2nd Ed. Prentice Hall, 1995.  ISBN
          0131510517</p></li><li class="listitem"><p>Stern, Hal <span class="emphasis"><em>Managing NFS and NIS</em></span> O'Reilly
	  &amp; Associates, Inc., 1991.  ISBN 0-937175-75-7</p></li><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/" target="_top">Jpman Project, Japan
	    FreeBSD Users Group</a>.  <a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/sam.html" target="_top">FreeBSD System
	    Administrator's Manual</a> (traducción japonesa). <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">Mainichi Communications
	    Inc.</a>, 1998.  ISBN4-8399-0109-0 P3300E.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82757584"></a>31.4. Guías de programadores</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Asente, Paul.  <span class="emphasis"><em>X Window System Toolkit</em></span>.
	  Digital Press.  ISBN 1-55558-051-3</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    Programmer's Reference Manual</em></span>. O'Reilly &amp;
	  Associates, Inc., 1994.  ISBN 1-56592-078-3</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    Programmer's Supplementary Documents</em></span>.  O'Reilly &amp;
	  Associates, Inc., 1994.  ISBN 1-56592-079-1</p></li><li class="listitem"><p>Harbison, Samuel P. and Steele, Guy L. Jr.  <span class="emphasis"><em>C: A
	    Reference Manual</em></span>.  4rd ed. Prentice Hall, 1995.
	  ISBN 0-13-326224-3</p></li><li class="listitem"><p>Kernighan, Brian and Dennis M. Ritchie.  <span class="emphasis"><em>The C
	    Programming Language.</em></span>.  PTR Prentice Hall, 1988.
	  ISBN 0-13-110362-9</p></li><li class="listitem"><p>Lehey, Greg.  <span class="emphasis"><em>Porting UNIX Software</em></span>.
	  O'Reilly &amp; Associates, Inc., 1995.  ISBN 1-56592-126-7</p></li><li class="listitem"><p>Plauger, P. J. <span class="emphasis"><em>The Standard C Library</em></span>.
	  Prentice Hall, 1992.  ISBN 0-13-131509-9</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>Advanced Programming in the UNIX
	    Environment</em></span>.  Reading, Mass. : Addison-Wesley, 1992
	  ISBN 0-201-56317-7</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>UNIX Network
	    Programming</em></span>.  2nd Ed, PTR Prentice Hall, 1998.  ISBN
	  0-13-490012-X</p></li><li class="listitem"><p>Wells, Bill.  &#8220;Writing Serial Drivers for UNIX&#8221;.
	  <span class="emphasis"><em>Dr. Dobb's Journal</em></span>. 19(15), December 1994.
	  pp68-71, 97-99.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82774608"></a>31.5. El sistema operativo por dentro</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Andleigh, Prabhat K.  <span class="emphasis"><em>UNIX System
	    Architecture</em></span>.  Prentice-Hall, Inc., 1990.  ISBN
          0-13-949843-5</p></li><li class="listitem"><p>Jolitz, William.  &#8220;Porting UNIX to the 386&#8221;.
	  <span class="emphasis"><em>Dr. Dobb's Journal</em></span>.  January 1991-July
	  1992.</p></li><li class="listitem"><p>Leffler, Samuel J., Marshall Kirk McKusick, Michael J Karels and
	  John Quarterman <span class="emphasis"><em>The Design and Implementation of the
	    4.3BSD UNIX Operating System</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1989.  ISBN 0-201-06196-1</p></li><li class="listitem"><p>Leffler, Samuel J., Marshall Kirk McKusick, <span class="emphasis"><em>The Design
	    and Implementation of the 4.3BSD UNIX Operating System: Answer
	    Book</em></span>.  Reading, Mass. : Addison-Wesley, 1991.  ISBN
          0-201-54629-9</p></li><li class="listitem"><p>McKusick, Marshall Kirk, Keith Bostic, Michael J Karels, and
	  John Quarterman.  <span class="emphasis"><em>The Design and Implementation of the
	    4.4BSD Operating System</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1996.  ISBN 0-201-54979-4</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>TCP/IP Illustrated, Volume 1:
	    The Protocols</em></span>.  Reading, Mass. : Addison-Wesley,
	  1996.  ISBN 0-201-63346-9</p></li><li class="listitem"><p>Schimmel, Curt.  <span class="emphasis"><em>Unix Systems for Modern
	    Architectures</em></span>.  Reading, Mass. : Addison-Wesley, 1994.
	  ISBN 0-201-63338-8</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>TCP/IP Illustrated, Volume 3:
	    TCP for Transactions, HTTP, NNTP and the UNIX Domain
	    Protocols</em></span>.  Reading, Mass. : Addison-Wesley, 1996.
	  ISBN 0-201-63495-3</p></li><li class="listitem"><p>Vahalia, Uresh.  <span class="emphasis"><em>UNIX Internals -- The New
	    Frontiers</em></span>.  Prentice Hall, 1996.  ISBN
          0-13-101908-2</p></li><li class="listitem"><p>Wright, Gary R. and W. Richard Stevens.  <span class="emphasis"><em>TCP/IP
	    Illustrated, Volume 2: The Implementation</em></span>. Reading,
	  Mass. : Addison-Wesley, 1995.  ISBN 0-201-63354-X</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82791504"></a>31.6. Referencia de seguridad</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cheswick, William R. and Steven M. Bellovin. <span class="emphasis"><em>Firewalls
	    and Internet Security: Repelling the Wily Hacker</em></span>.
	  Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-63357-4</p></li><li class="listitem"><p>Garfinkel, Simson and Gene Spafford.  <span class="emphasis"><em>Practical UNIX
	    Security</em></span>.  2nd Ed. O'Reilly &amp; Associates, Inc.,
	  1996.  ISBN 1-56592-148-8</p></li><li class="listitem"><p>Garfinkel, Simson.  <span class="emphasis"><em>PGP Pretty Good
	    Privacy</em></span> O'Reilly &amp; Associates, Inc., 1995.  ISBN
          1-56592-098-8</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82796240"></a>31.7. Referencia de hardware</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Anderson, Don and Tom Shanley.  <span class="emphasis"><em>Pentium Processor
	    System Architecture</em></span>.  2nd Ed. Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-40992-5</p></li><li class="listitem"><p>Ferraro, Richard F.  <span class="emphasis"><em>Programmer's Guide to the EGA,
	    VGA, and Super VGA Cards</em></span>.  3rd ed. Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-62490-7</p></li><li class="listitem"><p>La corporación Intel publica documentación sobre sus CPUs,
          chipsets y estándares en su  <a class="link" href="http://developer.intel.com/" target="_top">web para desarrolladores</a>,
	  normalmente en archivos con formato PDF.</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>80486 System Architecture</em></span>.
	  3rd ed. Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-40994-1</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>ISA System Architecture</em></span>.
	  3rd ed. Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-40996-8</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>PCI System Architecture</em></span>.
	  3rd ed. Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-40993-3</p></li><li class="listitem"><p>Van Gilluwe, Frank.  <span class="emphasis"><em>The Undocumented PC</em></span>.
	  Reading, Mass: Addison-Wesley Pub. Co., 1994.  ISBN
	  0-201-62277-7</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82805712"></a>31.8. Historia de UNIX</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Lion, John <span class="emphasis"><em>Lion's Commentary on UNIX, 6th Ed. With
	    Source Code</em></span>.  ITP Media Group, 1996.  ISBN
	  1573980137</p></li><li class="listitem"><p>Raymond, Eric S.  <span class="emphasis"><em>The New Hacker's Dictionary, 3rd
	    edition</em></span>.  MIT Press, 1996.  ISBN
	  0-262-68092-0.  Also known as the <a class="link" href="http://www.ccil.org/jargon/jargon.html" target="_top">Jargon
	    File</a></p></li><li class="listitem"><p>Salus, Peter H.  <span class="emphasis"><em>A quarter century of UNIX</em></span>.
	  Addison-Wesley Publishing Company, Inc., 1994.  ISBN
	  0-201-54777-5</p></li><li class="listitem"><p>Simon Garfinkel, Daniel Weise, Steven Strassmann. <span class="emphasis"><em>The
	    UNIX-HATERS Handbook</em></span>.  IDG Books Worldwide, Inc.,
	  1994.  ISBN 1-56884-203-1</p></li><li class="listitem"><p>Don Libes, Sandy Ressler <span class="emphasis"><em>Life with UNIX</em></span>
	  &#8212; special edition.  Prentice-Hall, Inc., 1989.  ISBN
          0-13-536657-7</p></li><li class="listitem"><p><span class="emphasis"><em>The BSD family tree</em></span>.  1997.  <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/FreeBSD-current/src/share/misc/bsd-family-tree" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/FreeBSD-current/src/share/misc/bsd-family-tree</a>
          o <a class="link" href="file://localhost/usr/share/misc/bsd-family-tree" target="_top">local</a> on a FreeBSD-current
          machine.</p></li><li class="listitem"><p><span class="emphasis"><em>The BSD Release Announcements collection</em></span>.
	  1997.  <a class="link" href="http://www.de.FreeBSD.org/de/ftp/releases/" target="_top">http://www.de.FreeBSD.org/de/ftp/releases/</a></p></li><li class="listitem"><p><span class="emphasis"><em>Networked Computer Science Technical Reports
	    Library</em></span>.  <a class="link" href="http://www.ncstrl.org/" target="_top">http://www.ncstrl.org/</a></p></li><li class="listitem"><p><span class="emphasis"><em>Antiguas releases BSD procedentes del Computer Systems Research
	  Group (CSRG)</em></span>.  <a class="link" href="http://www.mckusick.com/csrg/" target="_top">http://www.mckusick.com/csrg/</a>:
          El paquete de 4 CDs cubre todas las versiones de BSD desde la 1BSD hasta la
          4.4BSD y 4.4BSD-Lite2 (pero no la 2.11BSD, desafortunadamente). El último
          disco contiene el código fuente final y los archivos SCCS.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp82831952"></a>31.9. Diarios y revistas</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>The C/C++ Users Journal</em></span>.  R&amp;D
	  Publications Inc.  ISSN 1075-2838</p></li><li class="listitem"><p><span class="emphasis"><em>Sys Admin &#8212; The Journal for UNIX System
	    Administrators</em></span> Miller Freeman, Inc., ISSN
	  1061-2688</p></li></ul></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources"></a>Apéndice A. Recursos en Internet</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#eresources-mail">A.1. Listas de correo</a></span></dt><dt><span class="sect1"><a href="#eresources-news">A.2. Grupos de noticias de Usenet</a></span></dt><dt><span class="sect1"><a href="#eresources-web">A.3. Servidores WWW</a></span></dt><dt><span class="sect1"><a href="#eresources-email">A.4. Direcciones de correo electrónico</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">A.5. Cuentas shell</a></span></dt></dl></div><p>La velocidad del desarrollo de FreeBSD hace imposible el uso de
    medios impresos como forma de seguir los últimos desarrollos.
    Los recursos
    electrónicos son la mejor, y con frecuencia la única,
    manera de estar
    informados de los últimos avances. Dado que FreeBSD es sacado adelante
    mediante el trabajo de voluntarios la propia comunidad de usuarios
    suele ejercer las funciones de lo que sería un
    <span class="quote">&#8220;<span class="quote">departamento de soporte técnico</span>&#8221;</span>,
    siendo el correo electrónico y USENET la manera más efectiva
    de contactar con esa comunidad.</p><p>Las formas de contacto con la comunidad de usuarios de FreeBSD están
    detalladas a continuación. Si usted sabe de algún otro medio que no figure
    aquí envíelo por favor a <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">lista de correo del proyecto de documentación de FreeBSD</a>para que pueda ser incluída.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-mail"></a>A.1. Listas de correo</h2></div></div></div><p>Aunque la práctica totalidad de los desarrolladores de FreeBSD
      léen USENET no podemos garantizar de modo rotundo que recibiremos
      sus dudas rápidamente (o siquiera que las recibamos) si usted las
      envía a uno de los grupos de <code class="literal">comp.unix.bsd.freebsd.*</code>.
      Enviando sus dudas a la lista de correo apropiada cumplirá dos objetivos,
      llegar a los desarrolladores y a una audiencia específica, lo que le
      asegurará la mejor (o al menos la más rápida) respuesta.</p><p>Las normas de las diversas listas están al principio de éste
      documento. <span class="emphasis"><em>Por favor, léa las normas antes de suscribirse
      o enviar correo a ninguna lista</em></span>. Muchos suscriptores de
      nuestras listas reciben varios cientos de mensajes relacionados con
      FreeBSD cada día y estableciendo las normas de uso de las listas
      intentamos mantener alto el interés de los mensajes que en ella
      circulan. Bajarlo haría fallar a las listas de correo como un
      medio de comunicación efectivo para el proyecto.</p><p>Todas las listas de correo son archivadas y se pueden hacer búsquedas
     en ellas desde el servidor WWW de FreeBSD usando
     <a class="link" href="../../../../search/index.html" target="_top">éste enlace</a>.
      El archivo ofrece la posibilidad de usar palabras clave, lo que lo
      convierte en una excelente manera de buscar respuestas a preguntas
      frecuentes y debería ser consultado antes de enviar ninguna duda.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-summary"></a>A.1.1. Índice de listas</h3></div></div></div><p><span class="emphasis"><em>Listas generales:</em></span>Las siguientes son listas
        generales de suscripción libre (y muy recomendable):</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Lista</th><th>Propósito</th></tr></thead><tbody><tr><td>cvs-all</td><td>Cambios realizados en el árbol de código de FreeBSD</td></tr><tr><td>freebsd-advocacy</td><td>Proselitismo de FreeBSD</td></tr><tr><td>freebsd-announce</td><td>Sucesos importantes e hitos del proyecto</td></tr><tr><td>freebsd-arch</td><td>Debates de arquitectura y diseños</td></tr><tr><td>freebsd-bugs</td><td>Informes de errores</td></tr><tr><td>freebsd-chat</td><td>Temas no técnicos relacionados con la
                comunidad FreeBSD.</td></tr><tr><td>freebsd-config</td><td>Desarrollo de herramientas de instalación
                y configuración de FreeBSD</td></tr><tr><td>freebsd-current</td><td>Debates acerca del uso de
		FreeBSD-current</td></tr><tr><td>freebsd-isp</td><td>Consultas de Proveedores de Servicios de
                Internet que usan FreeBSD</td></tr><tr><td>freebsd-jobs</td><td>Oportunidades de trabajo y consultoría
                bajo FreeBSD</td></tr><tr><td>freebsd-newbies</td><td>Actividades y discusiones de nuevos usuarios
                de FreeBSD</td></tr><tr><td>freebsd-policy</td><td>Decisiones estratégicas del Core Team
                de FreeBSD. Bajo volumen y
                sólo lectura</td></tr><tr><td>freebsd-questions</td><td>Preguntas de usuarios y soporte
                    técnico</td></tr><tr><td>freebsd-stable</td><td>Debates acerca del uso de
                FreeBSD-stable</td></tr><tr><td>freebsd-test</td><td>Un sitio al que mandar sus mensajes de prueba en
                lugar de a una de las demás listas</td></tr></tbody></table></div><p><span class="emphasis"><em>Listas Técnicas:</em></span> Las siguientes listas
        son para debates técnicos. Debería leer cuidadosamente las normas
        de cada lista antes de suscribirse o enviar correos, dado que hay
        normas estrictas en cuanto a su uso y contenidos.</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Lista</th><th>Propósito</th></tr></thead><tbody><tr><td>freebsd-afs</td><td>Porte de  AFS a FreeBSD</td></tr><tr><td>freebsd-alpha</td><td>Porte FreeBSD a Alpha</td></tr><tr><td>freebsd-arm</td><td>Porte de FreeBSD para procesadores ARM</td></tr><tr><td>freebsd-atm</td><td>Uso de redes ATM con FreeBSD</td></tr><tr><td>freebsd-audit</td><td>Proyecto de auditoría del código fuente</td></tr><tr><td>freebsd-binup</td><td>Diseño y desarrollo del sistema de actualización binaria</td></tr><tr><td>freebsd-cluster</td><td>Uso de  FreeBSD en entornos cluster</td></tr><tr><td>freebsd-database</td><td>Debates sobre uso de bases de datos y su
                desarrollo bajo FreeBSD</td></tr><tr><td>freebsd-doc</td><td>Creación de documentación sobre FreeBSD</td></tr><tr><td>freebsd-emulation</td><td>Emulación de otros sistemas como
                Linux/DOS/Windows</td></tr><tr><td>freebsd-firewire</td><td>Debates técnicos sobre Firewire
	        (iLink, IEEE 1394)</td></tr><tr><td>freebsd-fs</td><td>Sistemas de ficheros</td></tr><tr><td>freebsd-hackers</td><td>Debates técnicos generales</td></tr><tr><td>freebsd-hardware</td><td>Debates generales sobre harware y su uso en
                FreeBSD</td></tr><tr><td>freebsd-i18n</td><td>Internacionalización de FreeBSD</td></tr><tr><td>freebsd-ia64</td><td>Porte de FreeBSD a los próximos sistemas IA64 de
                Intel</td></tr><tr><td>freebsd-ipfw</td><td>Debates técnicos sobre el rediseño del código
                del cortafuegos IP</td></tr><tr><td>freebsd-isdn</td><td>Desarrolladores de RDSI</td></tr><tr><td>freebsd-java</td><td>Desarrolladores de Java y personas portando
                los JDK a FreeBSD</td></tr><tr><td>freebsd-libh</td><td>La segunda generación del sistema de instalación
                 y paquetes</td></tr><tr><td>freebsd-mobile</td><td>Debates sobre equipos portátiles</td></tr><tr><td>freebsd-mozilla</td><td>Porte de mozilla a FreeBSD</td></tr><tr><td>freebsd-multimedia</td><td>Aplicaciones multimedia</td></tr><tr><td>freebsd-new-bus</td><td>Debates técnicos sobre la arquitectura de bus</td></tr><tr><td>freebsd-net</td><td>Debates sobre el código fuente de Redes y TCP/IP</td></tr><tr><td>freebsd-platforms</td><td>Específica sobre plataformas de arquitectura
                no Intel</td></tr><tr><td>freebsd-ports</td><td>Debates sobre la colección de ports</td></tr><tr><td>freebsd-ppc</td><td>Porte de FreeBSD a PowerPC</td></tr><tr><td>freebsd-qa</td><td>Debates sobre Control de Calidad,
                generalmente al salir una nueva release</td></tr><tr><td>freebsd-realtime</td><td>Desarrollo de extensiones en
                tiempo real en FreeBSD</td></tr><tr><td>freebsd-scsi</td><td>El subsistema SCSI</td></tr><tr><td>freebsd-security</td><td>Temas de seguridad</td></tr><tr><td>freebsd-security-notifications</td><td>Avisos de seguridad</td></tr><tr><td>freebsd-small</td><td>Uso de FreeBSD en aplicaciones
                embebidas</td></tr><tr><td>freebsd-smp</td><td>Debates sobre diseño de Multiproceso
                [A]Simétrico</td></tr><tr><td>freebsd-sparc</td><td>Porte de FreeBSD a sistemas Sparc</td></tr><tr><td>freebsd-standards</td><td>Cumplimiento de las normas C99 y POSIX
                en FreeBSD</td></tr><tr><td>freebsd-tokenring</td><td>Soporte de  Token Ring en FreeBSD</td></tr></tbody></table></div><p><span class="emphasis"><em>Listas limitadas:</em></span>Las siguientes listas son
        para una audiencia más especializada (e interesada)y probablemente no
        son de interés para el público en general. Es una buena idea tener una
        presencia estable en las listas técnicas antes de suscribirse a alguna
        de las limitadas, de modo que se pueda entender la etiqueta de
        la comunicación que en ellas se usa.</p><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Lista</th><th>Propósito</th></tr></thead><tbody><tr><td>freebsd-core</td><td>FreeBSD Core Team</td></tr><tr><td>freebsd-hubs</td><td>Mantenimiento de mirrors (mantenimiento
		de infraestructuras)</td></tr><tr><td>freebsd-install</td><td>Desarrollo de la Instalación</td></tr><tr><td>freebsd-user-groups</td><td>Coordinación de grupos de usuarios</td></tr><tr><td>freebsd-www</td><td>Mantenimiento de <a class="link" href="../../../../index.html" target="_top">www.FreeBSD.org</a></td></tr></tbody></table></div><p><span class="emphasis"><em>Listas Compendio:</em></span>La mayoría de las listas citadas
        son accesibles como compendio. Los nuevos mensajes enviados a la lista
        son guardados y enviados como un único correo cuando el archivo llega
        a un tamaño cercano a los 100 Kb. Las listas accesibles como compendio
        son:</p><div class="informaltable"><table border="0"><colgroup><col /></colgroup><thead><tr><th>Lista</th></tr></thead><tbody><tr><td>freebsd-afs-digest</td></tr><tr><td>freebsd-alpha-digest</td></tr><tr><td>freebsd-chat-digest</td></tr><tr><td>freebsd-current-digest</td></tr><tr><td>freebsd-cvs-all-digest</td></tr><tr><td>freebsd-database-digest</td></tr><tr><td>freebsd-hackers-digest</td></tr><tr><td>freebsd-ia64-digest</td></tr><tr><td>freebsd-isdn-digest</td></tr><tr><td>freebsd-java-digest</td></tr><tr><td>freebsd-questions-digest</td></tr><tr><td>freebsd-security-digest</td></tr><tr><td>freebsd-sparc-digest</td></tr><tr><td>freebsd-stable-digest</td></tr><tr><td>freebsd-test-digest</td></tr></tbody></table></div><p><span class="emphasis"><em>Listas CVS:</em></span>Las siguientes listas son para gente
        interesada en llevar un seguimiento de los mensajes en el registro
        para conocer los cambios hechos en las diferentes áreas del
        árbol de código fuente. Son listas <span class="emphasis"><em>de sólo lectura</em></span>
        y no se debe enviar correo a ellas.</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Lista</th><th>Área de código</th><th>Descripción de área de código (código fuente)</th></tr></thead><tbody><tr><td>cvs-all</td><td>/usr/src</td><td>Todos los cambios al árbol de código (superconjunto)</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-subscribe"></a>A.1.2. Cómo suscribirse</h3></div></div></div><p>Todas las listas de correo están en <code class="systemitem">FreeBSD.org</code>, de manera que para enviar correo
          a la lista <span class="quote">&#8220;<span class="quote">nombredelista</span>&#8221;</span> simplemente hay que escribir
          a &lt;<em class="replaceable"><code>nombredelista</code></em>@FreeBSD.org&gt;.
          Desde ahí será redistribuído a los miembros de la lista de correo a
          lo largo y ancho del mundo.</p><p>Para suscribirse a una lista envíe un correo a <code class="email">&lt;<a xmlns="" class="email" href="mailto:majordomo@FreeBSD.org">majordomo@FreeBSD.org</a>&gt;</code>
        incluyendo </p><pre class="programlisting">subscribe &lt;listname&gt; [&lt;optional address&gt;]</pre><p>
        en el cuerpo del mensaje. Por ejemplo, para suscribirse a
	<code class="literal">freebsd-announce</code> usted haría esto:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail majordomo@FreeBSD.org</code></strong>
subscribe freebsd-announce
^D</pre><p>Si quisiera suscribirse bajo otro nombre o enviar una petición
        de suscripción para una lista de correo local (un sistema muy eficiente
        si dispone de varias personas interesadas que tengan cuentas de correo
        en un mismo servidor ¡esto nos facilita mucho el trabajo!) ésto
        es lo que debe hacer:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail majordomo@FreeBSD.org</code></strong>
subscribe freebsd-announce local-announce@ejemplo.com
^D</pre><p>Por último, también es posible desuscribirse
        de una lista, obtener una lista de los suscriptores de una lista u
        obtener una lista de las listas de correo disponibles enviando
        otro tipo de mensajes de control a majordomo. Para obtener una lista
        completa de las órdenes disponibles haga esto:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail majordomo@FreeBSD.org</code></strong>
help
^D</pre><p>De nuevo quisiéramos pedirle que procure mantener
        los debates de las listas técnicas dentro de temas técnicos. Si lo
        único que usted quiere es recibir avisos importantes le
        sugerimos que se suscriba a freebsd-announce, que está
        pensada para tener un tráfico muy bajo.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-charters"></a>A.1.3. Normas de las listas</h3></div></div></div><p><span class="emphasis"><em>Todas</em></span> las listas de correo de FreeBSD tienen
        ciertas normas elementales que han de ser respetadas por cualquiera
        que las use. Quien no se atenga a ellas recibirá hasta dos (2)
        advertencias escritas del Postmaster de FreeBSD <code class="email">&lt;<a xmlns="" class="email" href="mailto:postmaster@FreeBSD.org">postmaster@FreeBSD.org</a>&gt;</code>,
        después de las cuales, a la tercera falta, el suscriptor será
        borrado de todas las listas de correo de FreeBSD y filtrado
        para evitar futuros envíos. Lamentamos que esas normas y medidas
        sean necesarias, pero la Internet de hoy es, según parece,
        un entorno bastante conflictivo, y mucha gente no se
        da cuenta de cuán frágiles son algunos de sus mecanismos.</p><p>Normas a respetar:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>El tema de cualquier envío debe atenerse al fin básico
            de la lista a la que se escribe, esto es, si la lista es sobre
            temas de debate técnico sus envíos deberían versar
            sobre temas técnicos. Enviar mensajes irrelevantes o insultos
            sólo sirve para deteriorar el valor de la lista de correo para
            sus miembros y no será tolerado. Para discusiones libres sin un
            tema en particular está la lista de correo freebsd-chat
            <code class="email">&lt;<a xmlns="" class="email" href="mailto:freebsd-chat@FreeBSD.org">freebsd-chat@FreeBSD.org</a>&gt;</code>, que es libremente accesible
            y hecha para éste propósito.</p></li><li class="listitem"><p>No se debería enviar el mismo mensaje a más de dos listas,
            y sólamente a 2 cuando exista una necesidad manifiesta de escribir
            a ambas listas. Hay una gran cantidad de personas suscritas a más
            de una lista y excepto para las mezclas más esotéricas (digamos
            "-stable &amp; -scsi") no hay razón para enviar un mensaje a
            más de una lista al mismo tiempo. Si le envían un mensaje en
            el que aparecen múltiples listas de correo en la línea "Cc"
            de la cabecera, dicha línea debe ser recortada
            antes de que envíe una respuesta. <span class="emphasis"><em>Usted es el
            <span class="emphasis"><em>responsable</em></span> de sus propios envíos
            cruzados, independientemente de quién fuese el
            remitente original.</em></span></p></li><li class="listitem"><p>No están admitidos los ataques personales ni la blasfemia
            (dentro del contexto o como argumento) y eso incluye tanto a
            usuarios como a desarrolladores. Violaciones graves de la
            netiqueta, como reenviar o extractar mensajes privados
            sin permiso ni visos de tenerlo, está mal visto, aunque no
            prohibido específicamente. Sin embargo, hay pocos casos
            en los que algo así encaje en la temática de una lista,
            por lo cual lo más probable es recibir una advertencia
            (o ser expulsado) tan sólo a causa de ello.</p></li><li class="listitem"><p>El anuncio de productos o servicios no relacionados con
            FreeBSD están estrictamente prohibidas y conllevarán
            la inmediata expulsión de la lista si queda demostrado
            que el autor está practicando el <span class="quote">&#8220;<span class="quote">spam</span>&#8221;</span>
            o envío de correo no solicitado.</p></li></ul></div><p><span class="emphasis"><em>Normas de las listas individuales:</em></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">FREEBSD-AFS</span></dt><dd><p><span class="emphasis"><em>Sistema de Ficheros Andrew</em></span></p><p>Ésta lista es para debates sobre el porte y uso de AFS, de
	      CMU/Transarc</p></dd><dt><span class="term">FREEBSD-ANNOUNCE</span></dt><dd><p><span class="emphasis"><em>Sucesos importantes / hitos</em></span></p><p>Ésta es la lista de correo para gente interesada
              en recibir exclusivamente avisos de sucesos importantes dentro
              de FreeBSD. Ésto incluye anuncios sobre SNAPSHOTS y otras
              versiones. Puede incluír también peticiones de voluntarios, etc.
              Es una lista de bajo volumen y estrictamente moderada.</p></dd><dt><span class="term">FREEBSD-ARCH</span></dt><dd><p><span class="emphasis"><em>Debates sobre arquitectura
                y diseño</em></span></p><p>Ésta lista es para debates sobre
              la arquitectura de FreeBSD. Los mensajes deberían
              mantenerse dentro del ámbito técnico
              para el que fué creada la lista. Serían
              ejemplos de temas aptos para ésta lista:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Como reorganizar el sistema de construcción
                 ("build") para poder tener varios procesos de
                 construcción personalizados funcionando simultáneamente.</p></li><li class="listitem"><p>Qué se necesita arreglar en el VFS para que funcionen
                  las capas de Heidemann.</p></li><li class="listitem"><p>Cómo cambiar el dispositivo de control de
                  interfaces para que sea posible utilizar los
                  mismos controladores directamente en la mayoría
                  de los buses y arquitecturas.</p></li><li class="listitem"><p>Cómo escribir un controlador de red.</p></li></ul></div></dd><dt><span class="term">FREEBSD-AUDIT</span></dt><dd><p><span class="emphasis"><em>Proyecto de auditoría
              del código fuente</em></span></p><p>Ésta es la lista de correo del proyecto
              de auditoría del código fuente
              de FreeBSD. Aunque en principio fué puesta
              en marcha para cambios motivados por la seguridad su
              ámbito fué ampliado a la revisión de cualquier
              cambio en el código.</p><p>En ésta lista circula una gran cantidad de
              parches y probablemente no sea de interés para el
              típico usuario de FreeBSD. Las discusiones de
              seguridad que no estén relacionadas con una parte
              específica del código deben tener lugar en
              freebsd-security. Por otra parte se ruega a todos
              los desarrolladores que envíen sus parches
              a ésta lista para su revisión, especialmente
              si atañen a una parte del sistema donde un error
              pudiera afectar seriamente a la integridad del sistema.</p></dd><dt><span class="term">FREEBSD-BINUP</span></dt><dd><p><span class="emphasis"><em>Proyecto de Actualización Binaria de FreeBSD</em></span></p><p>Ésta lista existe para facilitar el
             debate sobre el sistema de actualizacion binaria
             o <span class="application">binup</span>.
              Características de diseño, detalles de implementación,
              parches, informes de error, informes de estado, peticiones
              de características, <span class="quote">&#8220;<span class="quote">commit logs</span>&#8221;</span> y en general todo lo
              relacionado con <span class="application">binup</span> es
              bienvenido.</p></dd><dt><span class="term">FREEBSD-BUGS</span></dt><dd><p><span class="emphasis"><em>Informe de errores</em></span></p><p>Ésta es la lista de correo para informar de
              errores en FreeBSD. Siempre que sea posible los
              errores deberían ser enviados mediante
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>
	      o el <a class="link" href="../../../../send-pr.html" target="_top">interfaz
		WEB</a></p></dd><dt><span class="term">FREEBSD-CHAT</span></dt><dd><p><span class="emphasis"><em>Temas no técnicos relacionados
                con la comunidad FreeBSD</em></span></p><p>Ésta lista contiene todos los mensajes
              sobre información no técnica y social,
              contenidos que no tienen cabida en las demás listas.
              Eso incluye discusiones sobre si
              Julio Iglesias parece una gárgola,
              sobre si escribir o no en mayúsculas, quién
              está bebiendo demasiado café,
              dónde se elabora la mejor cerveza,
              quién está fabricando
              cerveza en su sótano y así
              sucesivamente.
              Pueden hacerse anuncios sobre actos importantes (como
              próximas fiestas, congresos, bodas, nacimientos,
              nuevos trabajos, etc.), pero las respuestas deben
              ser dirigidas a ésta misma lista.</p></dd><dt><span class="term">FREEBSD-CORE</span></dt><dd><p><span class="emphasis"><em>FreeBSD Core Team</em></span></p><p>Ésta es la lista de correo interna para uso de
              los miembros del Core Team. Los mensajes pueden
              ser enviados a ésta lista cuando un problema serio
              relacionado con FreeBSD necesite un estudio o arbitraje
              de alto nivel.</p></dd><dt><span class="term">FREEBSD-CURRENT</span></dt><dd><p><span class="emphasis"><em>Debates sobre el uso de
              FreeBSD-current</em></span></p><p>Ésta es la lista de correo para usuarios de freebsd-current.
              Esto incluye advertencias sobre nuevas características
              a ser incluídas en -current que afecten a todos los
              usuarios e instrucciones paso por paso que deben ser seguidas
              para mantener una instalación -current. Cualquier usuario de
              <span class="quote">&#8220;<span class="quote">current</span>&#8221;</span> debería suscribirse a
              ésta lista. Ésta es una lista de correo técnica
              en la que se esperan contenidos estrictamente técnicos.</p></dd><dt><span class="term">FREEBSD-CURRENT-DIGEST</span></dt><dd><p><span class="emphasis"><em>Debates sobre el uso de
		FreeBSD-current</em></span></p><p>Éste es el compendio de la lista
              freebsd-current. Consiste en que todos los mensajes
              enviados a freebsd-current son empaquetados y enviados
              periódicamente como un solo mensaje. Ésta lista es de
              <span class="emphasis"><em>Sólo-Lectura</em></span> y no debería
              recibir correo.</p></dd><dt><span class="term">FREEBSD-DOC</span></dt><dd><p><span class="emphasis"><em>Proyecto de Documentación</em></span></p><p>Ésta lista de correo está destinada a
              discusiones relacionadas con cuestiones y proyectos
              relacionados con la creación de documentación
              de FreeBSD. Los miembros de ésta lista son llamados
              <span class="quote">&#8220;<span class="quote">El Proyecto de Documentación de FreeBSD</span>&#8221;</span>.
              La lista es abierta; ¡suscríbase y contribuya!.</p></dd><dt><span class="term">FREEBSD-FIREWIRE</span></dt><dd><p><span class="emphasis"><em>Firewire (iLink, IEEE 1394)</em></span></p><p>Ésta lista de correo es para debates sobre
              diseño e implementación del subsistema
              Firewire(también conocido como IEEE
              o iLink) en FreeBSD. Los temas incluyen de modo
              específico los <span class="quote">&#8220;<span class="quote">standards</span>&#8221;</span>, dispositivos
              de bus y sus protocolos, adaptación de placas
              base, tarjetas y chips y la arquitectura e
              implementación de código para soporte nativo.</p></dd><dt><span class="term">FREEBSD-FS</span></dt><dd><p><span class="emphasis"><em>Sistemas de ficheros</em></span></p><p>Debates acerca del sistema de ficheros de FreeBSD.
              Ésta es una lista de correo técnica en la que se espera
              un contenido estríctamente técnico.</p></dd><dt><span class="term">FREEBSD-GNOME</span></dt><dd><p><span class="emphasis"><em>GNOME</em></span></p><p>Debates acerca del Entorno de Escritorio GNOME
              para sistemas de ficheros FreeBSD. Ésta es una lista
              de correo técnica en la que se espera un contenido
              estrictamente técnico.</p></dd><dt><span class="term">FREEBSD-IPFW</span></dt><dd><p><span class="emphasis"><em>Cortafuegos IP</em></span></p><p>Éste es el foro de discusión técnica
              dedicado al rediseño del código del cortafuegos IP
              de FreeBSD. Ésta es una lista de correo técnica
              en la que se espera un contenido exclusivamente técnico.</p></dd><dt><span class="term">FREEBSD-IA64</span></dt><dd><p><span class="emphasis"><em>Porte de  FreeBSD a IA64</em></span></p><p>Ésta es una lista de correo técnica para
             personas que están trabajando en el porte de
             FreeBSD a la plataforma IA-64 de Intel, para
             intercambiar problemas y soluciones alternativas.
             Cualquier persona interesada en seguir las discusiones
             técnicas es bienvenida.</p></dd><dt><span class="term">FREEBSD-ISDN</span></dt><dd><p><span class="emphasis"><em>Comunicaciones RDSI</em></span></p><p>Ésta es la lista de correo para quienes participan
              en el desarrollo del soporte RDSI para FreeBSD.</p></dd><dt><span class="term">FREEBSD-JAVA</span></dt><dd><p><span class="emphasis"><em>Desarrollo Java</em></span></p><p>Ésta es la lista de correo sobre el desarrollo
              de aplicaciones Java importantes para FreeBSD y el
              porte y mantenimiento de los JDK.</p></dd><dt><span class="term">FREEBSD-HACKERS</span></dt><dd><p><span class="emphasis"><em>Debates técnicos</em></span></p><p>Éste es un foro de debate técnico
              relacionado con FreeBSD. Ésta es la lista de correo
              técnica primaria. Es para personas que están
              trabajando en FreeBSD, solucionando problemas o
              para discutir soluciones alternativas. Las personas
              interesadas en seguir las discusiones técnicas
              también son bienvenidas. Ésta es una lista de
              correo técnica en la cual se espera un contenido
              estrictamente técnico.</p></dd><dt><span class="term">FREEBSD-HACKERS-DIGEST</span></dt><dd><p><span class="emphasis"><em>Technical discussions</em></span></p><p>Éste es el compendio de la lista de correo
              freebsd-hackers. Consiste en que todo el correo enviado
              a freebsd-hackers es empaquetado y enviado en un
              sólo mensaje. Ésta lista es de <span class="emphasis"><em>Sólo Lectura</em></span>
              y no se debería enviar correo a ella.</p></dd><dt><span class="term">FREEBSD-HARDWARE</span></dt><dd><p><span class="emphasis"><em>Discusiones generales sobre hardware
                y FreeBSD</em></span></p><p>Discusiones generales sobre tipos de hardware
              que funciona en FreeBSD, diferentes problemas y
              sugerencias sobre qué comprar y
              qué no.</p></dd><dt><span class="term">FREEBSD-HUBS</span></dt><dd><p><span class="emphasis"><em>Réplicas</em></span></p><p>Avisos y discusiones para personas que administran
              sitios réplica.</p></dd><dt><span class="term">FREEBSD-INSTALL</span></dt><dd><p><span class="emphasis"><em>Discusiones sobre
              la instalación</em></span></p><p>Ésta lista de correo es para discusiones sobre
              el desarrollo de la instalación de FreeBSD en
              próximas versiones.</p></dd><dt><span class="term">FREEBSD-ISP</span></dt><dd><p><span class="emphasis"><em>Cuestiones de Proveedores
		de Servicios de Internet</em></span></p><p>Ésta lista de correo es para debates
              sobre temas relevantes para Proveedores de Servicios
              de Internet (ISP) que usan FreeBSD. Es una lista de
              correo técnica y en ella se esperan contenidos
              estríctamente técnicos.</p></dd><dt><span class="term">FREEBSD-NEWBIES</span></dt><dd><p><span class="emphasis"><em>Debates sobre actividades de los
              novatos</em></span></p><p>Cubrimos todas las actividades de los novatos que
              no quedan cubiertas por ninguna de las otras, incluyendo:
              aprendizaje autodidacta y técnicas de
              resolución de problemas, búsqueda y uso
              de recursos y peticiones de ayuda, cómo usar
              las listas de correo y qué lista usar,
              charla en general, meter la pata, jactarse,
              compartir ideas, historias, soporte moral (pero no
              técnico) e implicación en la comunidad FreeBSD.
              Usamos freebsd-questions para enviar nuestros problemas
              y peticiones de soporte y usamos freebsd-newbies para
              conocer a gente que está haciendo lo mismo que
              nosotros cuando éramos novatos.</p></dd><dt><span class="term">FREEBSD-PLATFORMS</span></dt><dd><p><span class="emphasis"><em>Porte a plataformas no Intel</em></span></p><p>Cuestiones sobre plataformas diversas, debates
              generales, y propuestas para portes de FreeBSD para
              plataformas no Intel. Es una lista de correo técnica
              y en ella se esperan contenidos estríctamente
              técnicos.</p></dd><dt><span class="term">FREEBSD-POLICY</span></dt><dd><p><span class="emphasis"><em>Decisiones de funcionamiento
              interno del Core Team</em></span></p><p>Es una lista de sólo lectura y bajo volumen destinada
              a la toma de decisiones de funcionamento interno del Core
              Team de FreeBSD.</p></dd><dt><span class="term">FREEBSD-PORTS</span></dt><dd><p><span class="emphasis"><em>Debates sobre <span class="quote">&#8220;<span class="quote">ports</span>&#8221;</span></em></span></p><p>Debates acerca de la <span class="quote">&#8220;<span class="quote">colección de ports</span>&#8221;</span>
              (<code class="filename">/usr/ports</code>)de FreeBSD, propuestas de
              aplicaciones a portar, modificaciones a la infraestructura
              de ports y coordinación general de esfuerzos.
              Ésta es una lista de correo técnica en la cual se
              esperan contenidos exclusivamente técnicos.</p></dd><dt><span class="term">FREEBSD-QUESTIONS</span></dt><dd><p><span class="emphasis"><em>Preguntas de los usuarios</em></span></p><p>Ésta es la lista de correo para preguntas sobre
              FreeBSD. No debería enviar preguntas del estilo de
              <span class="quote">&#8220;<span class="quote">cómo hacer</span>&#8221;</span> a las listas técnicas salvo
              que el contenido sea claramente técnico.</p></dd><dt><span class="term">FREEBSD-QUESTIONS-DIGEST</span></dt><dd><p><span class="emphasis"><em>Preguntas de los usuarios</em></span></p><p>Éste es el compendio de la lista de correo
              freebsd-questions. Consiste en que todos los mensajes
              enviados a freebsd-questions son empaquetados y enviados
              en un único mensaje.</p></dd><dt><span class="term">FREEBSD-SCSI</span></dt><dd><p><span class="emphasis"><em>Subsistema SCSI</em></span></p><p>Ésta es la lista de correo para la gente que
              está trabajando en el subsistema SCSI de FREEBSD.
              Ésta es una lista de correo técnica en la cual
              se esperan contenidos puramente técnicos.</p></dd><dt><span class="term">FREEBSD-SECURITY</span></dt><dd><p><span class="emphasis"><em>Cuestiones de seguridad</em></span></p><p>Cuestiones de seguridad informática (DES,
              Kerberos, problemas de seguridad conocidos y sus
              soluciones, etc.) Ésta es una lista de correo
              técnica en la que se esperan contenidos puramente
              técnicos.</p></dd><dt><span class="term">FREEBSD-SECURITY-NOTIFICATIONS</span></dt><dd><p><span class="emphasis"><em>Avisos de seguridad</em></span></p><p>Avisos de problemas de seguridad en FreeBSD y
              sus soluciones. Ésta no es una lista de discusión.
              La lista de discusión es freebsd-security.</p></dd><dt><span class="term">FREEBSD-SMALL</span></dt><dd><p><span class="emphasis"><em>Uso de FreeBSD en
              aplicaciones embebidas</em></span></p><p>En ésta lista se debaten temas relacionados con
              instalaciones de FreeBSD inusualmente pequeñas
              y embebidas. Ésta es una lista de correo técnica
              en la cual se esperan contenidos estrictamente
              técnicos.</p></dd><dt><span class="term">FREEBSD-STABLE</span></dt><dd><p><span class="emphasis"><em>Debates sobre el uso de
		FreeBSD-stable</em></span></p><p>Ésta es la lista de correo para los usuarios de
              freebsd-stable. Incluye avisos sobre nuevas
              características a incluír en -stable que afectan
              a los usuarios e instrucciones paso por paso para
              permanecer usando la versión -stable. Cualquiera que
              utilice FreeBSD <span class="quote">&#8220;<span class="quote">stable</span>&#8221;</span> debería
              suscribirse a ésta lista. Ésta es una lista
              técnica en la que se esperan contenidos
              puramente técnicos.</p></dd><dt><span class="term">FREEBSD-STANDARDS</span></dt><dd><p><span class="emphasis"><em>Cumplimiento de C99 &amp; POSIX</em></span></p><p>Éste es el foro para debates técnicos
              relacionadas con el Cumplimiento de las normas C99 y
              POSIX en FreeBSD.</p></dd><dt><span class="term">FREEBSD-USER-GROUPS</span></dt><dd><p><span class="emphasis"><em>Lista de coordinación de
              de grupos de usuarios</em></span></p><p>Ésta es la lista de correo de los coordinadores de
              los grupos locales de usuarios para discutir cuestiones
              entre ellos o con personas elegidas del Core Team.
              Ésta lista de correo debería estar limitada a
              resúmenes de reuniones y coordinación de proyectos
              que atañen a los Grupos de Usuarios.</p></dd><dt><span class="term">FREEBSD-VENDORS</span></dt><dd><p><span class="emphasis"><em>VENDORS</em></span></p><p>Debates para la coordinación entre
              el Proyecto FreeBSD y Distribuidores de software y
              hardware para FreeBSD.</p></dd></dl></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-news"></a>A.2. Grupos de noticias de Usenet</h2></div></div></div><p>Además de los dos grupos de noticias específicos
      de FreeBSD hay muchos otros en los cuales se habla sobre
      FreeBSD o son de algún modo interesantes para usuarios
      de FreeBSD.Hay un  <a class="link" href="http://minnie.tuhs.org/BSD-info/bsdnews_search.html" target="_top">archivo
	donde hacer búsquedas</a> donde pueden encontrarse
        algunos de esos grupos de noticias por cortesía
        de Warren Toomey <code class="email">&lt;<a xmlns="" class="email" href="mailto:wkt@cs.adfa.edu.au">wkt@cs.adfa.edu.au</a>&gt;</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83113040"></a>A.2.1. Grupos de noticias específicos sobre BSD</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.unix.bsd.freebsd.announce" target="_top">comp.unix.bsd.freebsd.announce</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.bsd.freebsd.misc" target="_top">comp.unix.bsd.freebsd.misc</a></p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83116240"></a>A.2.2. Otros grupos de noticias interesantes sobre Unix</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.unix" target="_top">comp.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.questions" target="_top">comp.unix.questions</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.admin" target="_top">comp.unix.admin</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.programmer" target="_top">comp.unix.programmer</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.shell" target="_top">comp.unix.shell</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.user-friendly" target="_top">comp.unix.user-friendly</a></p></li><li class="listitem"><p><a class="link" href="news:comp.security.unix" target="_top">comp.security.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.sources.unix" target="_top">comp.sources.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.advocacy" target="_top">comp.unix.advocacy</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.misc" target="_top">comp.unix.misc</a></p></li><li class="listitem"><p><a class="link" href="news:comp.bugs.4bsd" target="_top">comp.bugs.4bsd</a></p></li><li class="listitem"><p><a class="link" href="news:comp.bugs.4bsd.ucb-fixes" target="_top">comp.bugs.4bsd.ucb-fixes</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.bsd" target="_top">comp.unix.bsd</a></p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83143248"></a>A.2.3. Sistema X Window</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.windows.x.i386unix" target="_top">comp.windows.x.i386unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x" target="_top">comp.windows.x</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.apps" target="_top">comp.windows.x.apps</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.announce" target="_top">comp.windows.x.announce</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.intrinsics" target="_top">comp.windows.x.intrinsics</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.motif" target="_top">comp.windows.x.motif</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.pex" target="_top">comp.windows.x.pex</a></p></li><li class="listitem"><p><a class="link" href="news:comp.emulators.ms-windows.wine" target="_top">comp.emulators.ms-windows.wine</a></p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-web"></a>A.3. Servidores WWW</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="../../../../index.html" target="_top">http://www.FreeBSD.org/</a>
	  &#8212; Servidor Central.</p></li><li class="listitem"><p><a class="link" href="http://www.au.FreeBSD.org/" target="_top">http://www.au.FreeBSD.org/</a> &#8212; Australia/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.au.FreeBSD.org/" target="_top">http://www2.au.FreeBSD.org/</a> &#8212; Australia/2.</p></li><li class="listitem"><p><a class="link" href="http://www3.au.FreeBSD.org/" target="_top">http://www3.au.FreeBSD.org/</a> &#8212; Australia/3.</p></li><li class="listitem"><p><a class="link" href="http://freebsd.itworks.com.au/" target="_top">http://freebsd.itworks.com.au/</a> &#8212; Australia/4.</p></li><li class="listitem"><p><a class="link" href="http://www.br.FreeBSD.org/www.freebsd.org/" target="_top">http://www.br.FreeBSD.org/www.freebsd.org/</a> &#8212; Brasil/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.br.FreeBSD.org/www.freebsd.org/" target="_top">http://www2.br.FreeBSD.org/www.freebsd.org/</a> &#8212; Brasil/2.</p></li><li class="listitem"><p><a class="link" href="http://www3.br.FreeBSD.org/" target="_top">http://www3.br.FreeBSD.org/</a> &#8212; Brasil/3.</p></li><li class="listitem"><p><a class="link" href="http://www.bg.FreeBSD.org/" target="_top">http://www.bg.FreeBSD.org/</a> &#8212; Bulgaria.</p></li><li class="listitem"><p><a class="link" href="http://www.ca.FreeBSD.org/" target="_top">http://www.ca.FreeBSD.org/</a> &#8212; Canadá/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.ca.FreeBSD.org/" target="_top">http://www2.ca.FreeBSD.org/</a> &#8212; Canadá/2.</p></li><li class="listitem"><p><a class="link" href="http://www3.ca.FreeBSD.org/" target="_top">http://www3.ca.FreeBSD.org/</a> &#8212; Canadá/3.</p></li><li class="listitem"><p><a class="link" href="http://www.cn.FreeBSD.org/" target="_top">http://www.cn.FreeBSD.org/</a> &#8212; China.</p></li><li class="listitem"><p><a class="link" href="http://www.cz.FreeBSD.org/" target="_top">http://www.cz.FreeBSD.org/</a> &#8212; República Checa.</p></li><li class="listitem"><p><a class="link" href="http://www.dk.FreeBSD.org/" target="_top">http://www.dk.FreeBSD.org/</a> &#8212; Dinamarca.</p></li><li class="listitem"><p><a class="link" href="http://www.ee.FreeBSD.org/" target="_top">http://www.ee.FreeBSD.org/</a> &#8212; Estonia.</p></li><li class="listitem"><p><a class="link" href="http://www.fi.FreeBSD.org/" target="_top">http://www.fi.FreeBSD.org/</a> &#8212; Finlandia.</p></li><li class="listitem"><p><a class="link" href="http://www.fr.FreeBSD.org/" target="_top">http://www.fr.FreeBSD.org/</a> &#8212; Francia.</p></li><li class="listitem"><p><a class="link" href="http://www.de.FreeBSD.org/" target="_top">http://www.de.FreeBSD.org/</a> &#8212; Alemania/1.</p></li><li class="listitem"><p><a class="link" href="http://www1.de.FreeBSD.org/" target="_top">http://www1.de.FreeBSD.org/</a> &#8212; Alemania/2.</p></li><li class="listitem"><p><a class="link" href="http://www2.de.FreeBSD.org/" target="_top">http://www2.de.FreeBSD.org/</a> &#8212; Alemania/3.</p></li><li class="listitem"><p><a class="link" href="http://www.gr.FreeBSD.org/" target="_top">http://www.gr.FreeBSD.org/</a> &#8212; Grecia.</p></li><li class="listitem"><p><a class="link" href="http://www.hu.FreeBSD.org/" target="_top">http://www.hu.FreeBSD.org/</a> &#8212; Hungría.</p></li><li class="listitem"><p><a class="link" href="http://www.is.FreeBSD.org/" target="_top">http://www.is.FreeBSD.org/</a> &#8212; Islandia.</p></li><li class="listitem"><p><a class="link" href="http://www.ie.FreeBSD.org/" target="_top">http://www.ie.FreeBSD.org/</a> &#8212; Irlanda.</p></li><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/www.FreeBSD.org/" target="_top">http://www.jp.FreeBSD.org/www.FreeBSD.org/</a> &#8212; Japón.</p></li><li class="listitem"><p><a class="link" href="http://www.kr.FreeBSD.org/" target="_top">http://www.kr.FreeBSD.org/</a> &#8212; Corea/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.kr.FreeBSD.org/" target="_top">http://www2.kr.FreeBSD.org/</a> &#8212; Corea/2.</p></li><li class="listitem"><p><a class="link" href="http://www.lv.FreeBSD.org/" target="_top">http://www.lv.FreeBSD.org/</a> &#8212; Letonia.</p></li><li class="listitem"><p><a class="link" href="http://rama.asiapac.net/freebsd/" target="_top">http://rama.asiapac.net/freebsd/</a> &#8212; Malasia.</p></li><li class="listitem"><p><a class="link" href="http://www.nl.FreeBSD.org/" target="_top">http://www.nl.FreeBSD.org/</a> &#8212; Holanda/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.nl.FreeBSD.org/" target="_top">http://www2.nl.FreeBSD.org/</a> &#8212; Holanda/2.</p></li><li class="listitem"><p><a class="link" href="http://www.no.FreeBSD.org/" target="_top">http://www.no.FreeBSD.org/</a> &#8212; Noruega.</p></li><li class="listitem"><p><a class="link" href="http://www.nz.FreeBSD.org/" target="_top">http://www.nz.FreeBSD.org/</a> &#8212; Nueva Zelanda.</p></li><li class="listitem"><p><a class="link" href="http://www.pl.FreeBSD.org/" target="_top">http://www.pl.FreeBSD.org/</a> &#8212; Polonia/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.pl.FreeBSD.org/" target="_top">http://www2.pl.FreeBSD.org/</a> &#8212; Polonia/2.</p></li><li class="listitem"><p><a class="link" href="http://www.pt.FreeBSD.org/" target="_top">http://www.pt.FreeBSD.org/</a> &#8212; Portugal/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.pt.FreeBSD.org/" target="_top">http://www2.pt.FreeBSD.org/</a> &#8212; Portugal/2.</p></li><li class="listitem"><p><a class="link" href="http://www3.pt.FreeBSD.org/" target="_top">http://www3.pt.FreeBSD.org/</a> &#8212; Portugal/3.</p></li><li class="listitem"><p><a class="link" href="http://www.ro.FreeBSD.org/" target="_top">http://www.ro.FreeBSD.org/</a> &#8212; Rumanía.</p></li><li class="listitem"><p><a class="link" href="http://www.ru.FreeBSD.org/" target="_top">http://www.ru.FreeBSD.org/</a> &#8212; Rusia/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.ru.FreeBSD.org/" target="_top">http://www2.ru.FreeBSD.org/</a> &#8212; Rusia/2.</p></li><li class="listitem"><p><a class="link" href="http://www3.ru.FreeBSD.org/" target="_top">http://www3.ru.FreeBSD.org/</a> &#8212; Rusia/3.</p></li><li class="listitem"><p><a class="link" href="http://www4.ru.FreeBSD.org/" target="_top">http://www4.ru.FreeBSD.org/</a> &#8212; Rusia/4.</p></li><li class="listitem"><p><a class="link" href="http://freebsd.s1web.com/" target="_top">http://freebsd.s1web.com/</a> &#8212; Singapur.</p></li><li class="listitem"><p><a class="link" href="http://www.sk.FreeBSD.org/" target="_top">http://www.sk.FreeBSD.org/</a> &#8212; República Eslovaca.</p></li><li class="listitem"><p><a class="link" href="http://www.si.FreeBSD.org/" target="_top">http://www.si.FreeBSD.org/</a> &#8212; Eslovenia.</p></li><li class="listitem"><p><a class="link" href="http://www.es.FreeBSD.org/" target="_top">http://www.es.FreeBSD.org/</a> &#8212; España.</p></li><li class="listitem"><p><a class="link" href="http://www.za.FreeBSD.org/" target="_top">http://www.za.FreeBSD.org/</a> &#8212; Sudáfrica/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.za.FreeBSD.org/" target="_top">http://www2.za.FreeBSD.org/</a> &#8212; Sudáfrica/2.</p></li><li class="listitem"><p><a class="link" href="http://www.se.FreeBSD.org/" target="_top">http://www.se.FreeBSD.org/</a> &#8212; Suecia.</p></li><li class="listitem"><p><a class="link" href="http://www.ch.FreeBSD.org/" target="_top">http://www.ch.FreeBSD.org/</a> &#8212; Suiza.</p></li><li class="listitem"><p><a class="link" href="http://www.tw.FreeBSD.org/www.freebsd.org/data/" target="_top">http://www.tw.FreeBSD.org/www.freebsd.org/data/</a> &#8212; Taiwan.</p></li><li class="listitem"><p><a class="link" href="http://www.tr.FreeBSD.org/" target="_top">http://www.tr.FreeBSD.org/</a> &#8212; Turquía.</p></li><li class="listitem"><p><a class="link" href="http://www.ua.FreeBSD.org/www.freebsd.org/" target="_top">http://www.ua.FreeBSD.org/www.freebsd.org/</a> &#8212; Ucrania/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.ua.FreeBSD.org/" target="_top">http://www2.ua.FreeBSD.org/</a> &#8212; Ucrania/2.</p></li><li class="listitem"><p><a class="link" href="http://www4.ua.FreeBSD.org/" target="_top">http://www4.ua.FreeBSD.org/</a> &#8212; Ucrania/Crimea.</p></li><li class="listitem"><p><a class="link" href="http://www.uk.FreeBSD.org/" target="_top">http://www.uk.FreeBSD.org/</a> &#8212; Reino Unido/1.</p></li><li class="listitem"><p><a class="link" href="http://www2.uk.FreeBSD.org/" target="_top">http://www2.uk.FreeBSD.org/</a> &#8212; Reino Unido/2.</p></li><li class="listitem"><p><a class="link" href="http://www3.uk.FreeBSD.org/" target="_top">http://www3.uk.FreeBSD.org/</a> &#8212; Reino Unido/3.</p></li><li class="listitem"><p><a class="link" href="http://www6.FreeBSD.org/" target="_top">http://www6.FreeBSD.org/</a> &#8212; USA/Oregón.</p></li><li class="listitem"><p><a class="link" href="http://www2.FreeBSD.org/" target="_top">http://www2.FreeBSD.org/</a> &#8212; USA/Tejas.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-email"></a>A.4. Direcciones de correo electrónico</h2></div></div></div><p>Los siguientes grupos de usuarios de FreeBSD provéen
      a sus miembros de direcciones de correo. Dichos administradores
      se reservan el derecho de retirar el uso de la dirección si
      se abusa de ella de cualquier manera.</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Dominio</th><th>Recursos que se suministran</th><th>Grupo de Usuarios</th><th>Administrador</th></tr></thead><tbody><tr><td>ukug.uk.FreeBSD.org</td><td>Sólo redirección</td><td><code class="email">&lt;<a xmlns="" class="email" href="mailto:freebsd-users@uk.FreeBSD.org">freebsd-users@uk.FreeBSD.org</a>&gt;</code></td><td>Lee Johnston
	      <code class="email">&lt;<a xmlns="" class="email" href="mailto:lee@uk.FreeBSD.org">lee@uk.FreeBSD.org</a>&gt;</code></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-shell"></a>A.5. Cuentas shell</h2></div></div></div><p>Los siguientes grupos de usuarios facilitan cuentas shell a
      gente que apoya activamente el proyecto FreeBSD. Sus respectivos
      administradores se reservan el derecho de cancelar la cuenta y
      si se abusa de ella de algún modo.</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Servidor</th><th>Tipo de acceso</th><th>Servicios que se ofrecen</th><th>Administrador</th></tr></thead><tbody><tr><td>storm.uk.FreeBSD.org</td><td>SSH only</td><td>CVS de sólo lectura, espacio web personal,
              correo electrónico</td><td>Brian Somers</td></tr><tr><td>dogma.freebsd-uk.eu.org</td><td>Telnet/FTP/SSH</td><td>Correo electrónico, espacio web,
              FTP Anónimo</td><td>Lee Johnston
		<code class="email">&lt;<a xmlns="" class="email" href="mailto:lee@uk.FreeBSD.org">lee@uk.FreeBSD.org</a>&gt;</code></td></tr></tbody></table></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkeys"></a>Capítulo 32. PGP keys</h2></div></div></div><div class="toc"><div class="toc-title">Tabla de contenidos</div><dl class="toc"><dt><span class="sect1"><a href="#idp83281744">32.1. Responsables</a></span></dt><dt><span class="sect1"><a href="#idp83285200">32.2. Miembros del Core Team</a></span></dt></dl></div><p>En caso de que necesites verificar una firma o enviar un mail
        encriptado a alguno de los responsables o miembros del core team,
        aquí tienes una serie de claves para uso.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp83281744"></a>32.1. Responsables</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83282384"></a>32.1.1. Responsable de Seguridad de FreeBSD <code class="email">&lt;<a xmlns="" class="email" href="mailto:security-officer@freebsd.org">security-officer@freebsd.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
FreeBSD Security Officer &lt;security-officer@freebsd.org&gt;
Fingerprint = 41 08 4E BB DB 41 60 71  F9 E5 0E 98 73 AF 3F 11

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.3i

mQCNAzF7MY4AAAEEAK7qBgPuBejER5HQbQlsOldk3ZVWXlRj54raz3IbuAUrDrQL
h3g57T9QY++f3Mot2LAf5lDJbsMfWrtwPrPwCCFRYQd6XH778a+l4ju5axyjrt/L
Ciw9RrOC+WaPv3lIdLuqYge2QRC1LvKACIPNbIcgbnLeRGLovFUuHi5z0oilAAUR
tDdGcmVlQlNEIFNlY3VyaXR5IE9mZmljZXIgPHNlY3VyaXR5LW9mZmljZXJAZnJl
ZWJzZC5vcmc+iQCVAwUQMX6yrOJgpPLZnQjrAQHyowQA1Nv2AY8vJIrdp2ttV6RU
tZBYnI7gTO3sFC2bhIHsCvfVU3JphfqWQ7AnTXcD2yPjGcchUfc/EcL1tSlqW4y7
PMP4GHZp9vHog1NAsgLC9Y1P/1cOeuhZ0pDpZZ5zxTo6TQcCBjQA6KhiBFP4TJql
3olFfPBh3B/Tu3dqmEbSWpuJAJUDBRAxez3C9RVb+45ULV0BAak8A/9JIG/jRJaz
QbKom6wMw852C/Z0qBLJy7KdN30099zMjQYeC9PnlkZ0USjQ4TSpC8UerYv6IfhV
nNY6gyF2Hx4CbEFlopnfA1c4yxtXKti1kSN6wBy/ki3SmqtfDhPQ4Q31p63cSe5A
3aoHcjvWuqPLpW4ba2uHVKGP3g7SSt6AOYkAlQMFEDF8mz0ff6kIA1j8vQEBmZcD
/REaUPDRx6qr1XRQlMs6pfgNKEwnKmcUzQLCvKBnYYGmD5ydPLxCPSFnPcPthaUb
5zVgMTjfjS2fkEiRrua4duGRgqN4xY7VRAsIQeMSITBOZeBZZf2oa9Ntidr5PumS
9uQ9bvdfWMpsemk2MaRG9BSoy5Wvy8VxROYYUwpT8Cf2iQCVAwUQMXsyqWtaZ42B
sqd5AQHKjAQAvolI30Nyu3IyTfNeCb/DvOe9tlOn/o+VUDNJiE/PuBe1s2Y94a/P
BfcohpKC2kza3NiW6lLTp00OWQsuu0QAPc02vYOyseZWy4y3Phnw60pWzLcFdemT
0GiYS5Xm1o9nAhPFciybn9j1q8UadIlIq0wbqWgdInBT8YI/l4f5sf6JAJUDBRAx
ezKXVS4eLnPSiKUBAc5OBACIXTlKqQC3B53qt7bNMV46m81fuw1PhKaJEI033mCD
ovzyEFFQeOyRXeu25Jg9Bq0Sn37ynISucHSmt2tUD5W0+p1MUGyTqnfqejMUWBzO
v4Xhp6a8RtDdUMBOTtro16iulGiRrCKxzVgEl4i+9Z0ZiE6BWlg5AetoF5n3mGk1
lw==
=ipyA
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83283792"></a>32.1.2. Warner Losh</h3></div></div></div><pre class="programlisting">
Warner Losh &lt;imp@village.org&gt;
	aka &lt;imp@freebsd.org&gt;
Fingerprint = D4 31 FD B9 F7 90 17 E8 37 C5 E7 7F CF A6 C1 B9
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.2

mQCNAzDzTiAAAAEEAK8D7KWEbVFUrmlqhUEnAvphNIqHEbqqT8s+c5f5c2uHtlcH
V4mV2TlUaDSVBN4+/D70oHmZc4IgiQwMPCWRrSezg9z/MaKlWhaslc8YT6Xc1q+o
EP/fAdKUrq49H0QQbkQk6Ks5wKW6v9AOvdmsS6ZJEcet6d9G4dxynu/2qPVhAAUR
tCBNLiBXYXJuZXIgTG9zaCA8aW1wQHZpbGxhZ2Uub3JnPokAlQMFEDM/SK1VLh4u
c9KIpQEBFPsD/1n0YuuUPvD4CismZ9bx9M84y5sxLolgFEfP9Ux196ZSeaPpkA0g
C9YX/IyIy5VHh3372SDWN5iVSDYPwtCmZziwIV2YxzPtZw0nUu82P/Fn8ynlCSWB
5povLZmgrWijTJdnUWI0ApVBUTQoiW5MyrNN51H3HLWXGoXMgQFZXKWYiQCVAwUQ
MzmhkfUVW/uOVC1dAQG3+AP/T1HL/5EYF0ij0yQmNTzt1cLt0b1e3N3zN/wPFFWs
BfrQ+nsv1zw7cEgxLtktk73wBGM9jUIdJu8phgLtl5a0m9UjBq5oxrJaNJr6UTxN
a+sFkapTLT1g84UFUO/+8qRB12v+hZr2WeXMYjHAFUT18mp3xwjW9DUV+2fW1Wag
YDKJAJUDBRAzOYK1s1pi61mfMj0BARBbA/930CHswOF0HIr+4YYUs1ejDnZ2J3zn
icTZhl9uAfEQq++Xor1x476j67Z9fESxyHltUxCmwxsJ1uOJRwzjyEoMlyFrIN4C
dE0C8g8BF+sRTt7VLURLERvlBvFrVZueXSnXvmMoWFnqpSpt3EmN6TNaLe8Cm87a
k6EvQy0dpnkPKokAlQMFEDD9Lorccp7v9qj1YQEBrRUD/3N4cCMWjzsIFp2Vh9y+
RzUrblyF84tJyA7Rr1p+A7dxf7je3Zx5QMEXosWL1WGnS5vC9YH2WZwv6sCU61gU
rSy9z8KHlBEHh+Z6fdRMrjd9byPf+n3cktT0NhS23oXB1ZhNZcB2KKhVPlNctMqO
3gTYx+Nlo6xqjR+J2NnBYU8p =7fQV
-----END PGP PUBLIC KEY BLOCK-----</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp83285200"></a>32.2. Miembros del Core Team</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83285840"></a>32.2.1. Satoshi Asami</h3></div></div></div><pre class="programlisting">
Satoshi Asami &lt;asami@cs.berkeley.edu&gt;
          aka &lt;asami@FreeBSD.ORG&gt;
Fingerprint = EB 3C 68 9E FB 6C EB 3F  DB 2E 0F 10 8F CE 79 CA

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.2

mQCNAzPVyoQAAAEEAL7W+kipxB171Z4SVyyL9skaA7hG3eRsSOWk7lfvfUBLtPog
f3OKwrApoc/jwLf4+Qpdzv5DLEt/6Hd/clskhJ+q1gMNHyZ5ABmUxrTRRNvJMTrb
3fPU3oZj7sL/MyiFaT1zF8EaMP/iS2ZtcFsbYOqGeA8E/58uk4NA0SoeCNiJAAUR
tCVTYXRvc2hpIEFzYW1pIDxhc2FtaUBjcy5iZXJrZWxleS5lZHU+iQCVAwUQM/AT
+EqGN2HYnOMZAQF11QP/eSXb2FuTb1yX5yoo1Im8YnIk1SEgCGbyEbOMMBznVNDy
5g2TAD0ofLxPxy5Vodjg8rf+lfMVtO5amUH6aNcORXRncE83T10JmeM6JEp0T6jw
zOHKz8jRzygYLBayGsNIJ4BGxa4LeaGxJpO1ZEvRlNkPH/YEXK5oQmq9/DlrtYOJ
AEUDBRAz42JT8ng6GBbVvu0BAU8nAYCsJ8PiJpRUGlrz6rxjX8hqM1v3vqFHLcG+
G52nVMBSy+RZBgzsYIPwI5EZtWAKb22JAJUDBRAz4QBWdbtuOHaj97EBAaQPA/46
+NLUp+Wubl90JoonoXocwAg88tvAUVSzsxPXj0lvypAiSI2AJKsmn+5PuQ+/IoQy
lywRsxiQ5GD7C72SZ1yw2WI9DWFeAi+qa4b8n9fcLYrnHpyCY+zxEpu4pam8FJ7H
JocEUZz5HRoKKOLHErzXDiuTkkm72b1glmCqAQvnB4kAlQMFEDPZ3gyDQNEqHgjY
iQEBFfUEALu2C0uo+1Z7C5+xshWRYY5xNCzK20O6bANVJ+CO2fih96KhwsMof3lw
fDso5HJSwgFd8WT/sR+Wwzz6BAE5UtgsQq5GcsdYQuGI1yIlCYUpDp5sgswNm+OA
bX5a+r4F/ZJqrqT1J56Mer0VVsNfe5nIRsjd/rnFAFVfjcQtaQmjiQCVAwUQM9uV
mcdm8Q+/vPRJAQELHgP9GqNiMpLQlZig17fDnCJ73P0e5t/hRLFehZDlmEI2TK7j
Yeqbw078nZgyyuljZ7YsbstRIsWVCxobX5eH1kX+hIxuUqCAkCsWUY4abG89kHJr
XGQn6X1CX7xbZ+b6b9jLK+bJKFcLSfyqR3M2eCyscSiZYkWKQ5l3FYvbUzkeb6K0
IVNhdG9zaGkgQXNhbWkgPGFzYW1pQEZyZWVCU0QuT1JHPg==
=39SC
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83286992"></a>32.2.2. Jonathan M. Bresler</h3></div></div></div><pre class="programlisting">
Jonathan M. Bresler &lt;jmb@FreeBSD.org&gt;
f16    Fingerprint16 = 31 57 41 56 06 C1 40 13  C5 1C E3 E5 DC 62 0E FB

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: PGPfreeware 5.0i for non-commercial use

mQCNAzG2GToAAAEEANI6+4SJAAgBpl53XcfEr1M9wZyBqC0tzpie7Zm4vhv3hO8s
o5BizSbcJheQimQiZAY4OnlrCpPxijMFSaihshs/VMAz1qbisUYAMqwGEO/T4QIB
nWNo0Q/qOniLMxUrxS1RpeW5vbghErHBKUX9GVhxbiVfbwc4wAHbXdKX5jjdAAUR
tCVKb25hdGhhbiBNLiBCcmVzbGVyIDxqbWJARnJlZUJTRC5PUkc+iQCVAwUQNbtI
gAHbXdKX5jjdAQHamQP+OQr10QRknamIPmuHmFYJZ0jU9XPIvTTMuOiUYLcXlTdn
GyTUuzhbEywgtOldW2V5iA8platXThtqC68NsnN/xQfHA5xmFXVbayNKn8H5stDY
2s/4+CZ06mmJfqYmONF1RCbUk/M84rVT3Gn2tydsxFh4Pm32lf4WREZWRiLqmw+J
AJUDBRA0DfF99RVb+45ULV0BAcZ0BACCydiSUG1VR0a5DBcHdtin2iZMPsJUPRqJ
tWvP6VeI8OFpNWQ4LW6ETAvn35HxV2kCcQMyht1kMD+KEJz7r8Vb94TS7KtZnNvk
2D1XUx8Locj6xel5c/Lnzlnnp7Bp1XbJj2u/NzCaZQ0eYBdP/k7RLYBYHQQln5x7
BOuiRJNVU4kAlQMFEDQLcShVLh4uc9KIpQEBJv4D/3mDrD0MM9EYOVuyXik3UGVI
8quYNA9ErVcLdt10NjYc16VI2HOnYVgPRag3Wt7W8wlXShpokfC/vCNt7f5JgRf8
h2a1/MjQxtlD+4/Js8k7GLa53oLon6YQYk32IEKexoLPwIRO4L2BHWa3GzHJJSP2
aTR/Ep90/pLdAOu/oJDUiQCVAwUQMqyL0LNaYutZnzI9AQF25QP9GFXhBrz2tiWz
2+0gWbpcGNnyZbfsVjF6ojGDdmsjJMyWCGw49XR/vPKYIJY9EYo4t49GIajRkISQ
NNiIz22fBAjT2uY9YlvnTJ9NJleMfHr4dybo7oEKYMWWijQzGjqf2m8wf9OaaofE
KwBX6nxcRbKsxm/BVLKczGYl3XtjkcuJAJUDBRA1ol5TZWCprDT5+dUBATzXA/9h
/ZUuhoRKTWViaistGJfWi26FB/Km5nDQBr/Erw3XksQCMwTLyEugg6dahQ1u9Y5E
5tKPxbB69eF+7JXVHE/z3zizR6VL3sdRx74TPacPsdhZRjChEQc0htLLYAPkJrFP
VAzAlSlm7qd+MXf8fJovQs6xPtZJXukQukPNlhqZ94kAPwMFEDSH/kF4tXKgazlt
bxECfk4AoO+VaFVfguUkWX10pPSSfvPyPKqiAJ4xn8RSIe1ttmnqkkDMhLh00mKj
lLQuSm9uYXRoYW4gTS4gQnJlc2xlciA8Sm9uYXRoYW4uQnJlc2xlckBVU2kubmV0
PokAlQMFEDXbdSkB213Sl+Y43QEBV/4D/RLJNTrtAqJ1ATxXWv9g8Cr3/YF0GTmx
5dIrJOpBup7eSSmiM/BL9Is4YMsoVbXCI/8TqA67TMICvq35PZU4wboQB8DqBAr+
gQ8578M7Ekw1OAF6JXY6AF2P8k7hMcVBcVOACELPT/NyPNByG5QRDoNmlsokJaWU
/2ls4QSBZZlb
=zbCw
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83288144"></a>32.2.3. Andrey A. Chernov</h3></div></div></div><pre class="programlisting">
Andrey A. Chernov &lt;ache@FreeBSD.org&gt;
       aka &lt;ache@nagual.pp.ru&gt;
Key fingerprint = 33 03 9F 48 33 7B 4A 15  63 48 88 0A C4 97 FD 49

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.3ia

mQCNAiqUMGQAAAEEAPGhcD6A2Buey5LYz0sphDLpVgOZc/bb9UHAbaGKUAGXmafs
Dcb2HnsuYGgX/zrQXuCi/wIGtXcZWB97APtKOhFsZnPinDR5n/dde/mw9FnuhwqD
m+rKSL1HlN0z/Msa5y7g16760wHhSR6NoBSEG5wQAHIMMq7Q0uJgpPLZnQjrAAUT
tCVBbmRyZXkgQS4gQ2hlcm5vdiA8YWNoZUBuYWd1YWwucHAucnU+iQCVAwUQM2Ez
u+JgpPLZnQjrAQEyugP8DPnS8ixJ5OeuYgPFQf5sy6l+LrB6hyaS+lgsUPahWjNY
cnaDmfda/q/BV5d4+y5rlQe/pjnYG7/yQuAR3jhlXz8XDrqlBOnW9AtYjDt5rMfJ
aGFTGXAPGZ6k6zQZE0/YurT8ia3qjvuZm3Fw4NJrHRx7ETHRvVJDvxA6Ggsvmr20
JEFuZHJleSBBLiBDaGVybm92IDxhY2hlQEZyZWVCU0Qub3JnPokAlQMFEDR5uVbi
YKTy2Z0I6wEBLgED/2mn+hw4/3peLx0Sb9LNx//NfCCkVefSf2G9Qwhx6dvwbX7h
mFca97h7BQN4GubU1Z5Ffs6TeamSBrotBYGmOCwvJ6S9WigF9YHQIQ3B4LEjskAt
pcjU583y42zM11kkvEuQU2Gde61daIylJyOxsgpjSWpkxq50fgY2kLMfgl/ftCZB
bmRyZXkgQS4gQ2hlcm5vdiA8YWNoZUBuaWV0enNjaGUubmV0PokAlQMFEDR5svDi
YKTy2Z0I6wEBOTQD/0OTCAXIjuak363mjERvzSkVsNtIH9hA1l0w6Z95+iH0fHrW
xXKT0vBZE0y0Em+S3cotLL0bMmVE3F3D3GyxhBVmgzjyx0NYNoiQjYdi+6g/PV30
Cn4vOO6hBBpSyI6vY6qGNqcsawuRtHNvK/53MpOfKwSlICEBYQimcZhkci+EtCJB
bmRyZXkgQS4gQ2hlcm5vdiA8YWNoZUBuYWd1YWwucnU+iQCVAwUQMcm5HeJgpPLZ
nQjrAQHwvQP9GdmAf1gdcuayHEgNkc11macPH11cwWjYjzA2YoecFMGV7iqKK8QY
rr1MjbGXf8DAG8Ubfm0QbI8Lj8iG3NgqIru0c72UuHGSn/APfGGG0AtPX5UK/k7B
gI0Ca2po6NA5nrSp8tDsdEz/4gyea84RXl2prtTf5Jj07hflbRstGXK0MkFuZHJl
eSBBLiBDaGVybm92LCBCbGFjayBNYWdlIDxhY2hlQGFzdHJhbC5tc2suc3U+iQCV
AwUQMCsAo5/rGryoL8h3AQHq1QQAidyNFqA9hvrmMcjpY7csJVFlGvj574Wj4GPa
o3pZeuQaMBmsWqaXLYnWU/Aldb6kTz6+nRcQX50zFH0THSPfApwEW7yybSTI5apJ
mWT3qhKN2vmLNg2yNzhqLTzHLD1lH3i1pfQq8WevrNfjLUco5S/VuekTma/osnzC
Cw7fQzCJAJUDBRAwKvwoa1pnjYGyp3kBARihBACoXr3qfG65hFCyKJISmjOvaoGr
anxUIkeDS0yQdTHzhQ+dwB1OhhK15E0Nwr0MKajLMm90n6+Zdb5y/FIjpPriu8dI
rlHrWZlewa88eEDM+Q/NxT1iYg+HaKDAE171jmLpSpCL0MiJtO0i36L3ekVD7Hv8
vffOZHPSHirIzJOZTYkAlQMFEDAau6zFLUdtDb+QbQEBQX8D/AxwkYeFaYxZYMFO
DHIvSk23hAsjCmUA2Uil1FeWAusb+o8xRfPDc7TnosrIifJqbF5+fcHCG5VSTGlh
Bhd18YWUeabf/h9O2BsQX55yWRuB2x3diJ1xI/VVdG+rxlMCmE4ZR1Tl9x+Mtun9
KqKVpB39VlkCBYQ3hlgNt/TJUY4riQCVAwUQMBHMmyJRltlmbQBRAQFQkwP/YC3a
hs3ZMMoriOlt3ZxGNUUPTF7rIER3j+c7mqGG46dEnDB5sUrkzacpoLX5sj1tGR3b
vz9a4vmk1Av3KFNNvrZZ3/BZFGpq3mCTiAC9zsyNYQ8L0AfGIUO5goCIjqwOTNQI
AOpNsJ5S+nMAkQB4YmmNlI6GTb3D18zfhPZ6uciJAJUCBRAwD0sl4uW74fteFRkB
AWsAA/9NYqBRBKbmltQDpyK4+jBAYjkXBJmARFXKJYTlnTgOHMpZqoVyW96xnaa5
MzxEiu7ZWm5oL10QDIp1krkBP2KcmvfSMMHb5aGCCQc2/P8NlfXAuHtNGzYiI0UA
Iwi8ih/S1liVfvnqF9uV3d3koE7VsQ9OA4Qo0ZL2ggW+/gEaYIkAlQMFEDAOz6qx
/IyHe3rl4QEBIvYD/jIr8Xqo/2I5gncghSeFR01n0vELFIvaF4cHofGzyzBpYsfA
+6pgFI1IM+LUF3kbUkAY/2uSf9U5ECcaMCTWCwVgJVO+oG075SHEM4buhrzutZiM
1dTyTaepaPpTyRMUUx9ZMMYJs7sbqLId1eDwrJxUPhrBNvf/w2W2sYHSY8cdiQCV
AwUQMAzqgHcdkq6JcsfBAQGTxwQAtgeLFi2rhSOdllpDXUwz+SS6bEjFTWgRsWFM
y9QnOcqryw7LyuFmWein4jasjY033JsODfWQPiPVNA3UEnXVg9+n8AvNMPO8JkRv
Cn1eNg0VaJy9J368uArio93agd2Yf/R5r+QEuPjIssVk8hdcy/luEhSiXWf6bLMV
HEA0J+OJAJUDBRAwDUi+4mCk8tmdCOsBAatBBACHB+qtW880seRCDZLjl/bT1b14
5po60U7u6a3PEBkY0NA72tWDQuRPF/Cn/0+VdFNxQUsgkrbwaJWOoi0KQsvlOm3R
rsxKbn9uvEKLxExyKH3pxp76kvz/lEWwEeKvBK+84Pb1lzpG3W7u2XDfi3VQPTi3
5SZMAHc6C0Ct/mjNlYkAlQMFEDAMrPD7wj+NsTMUOQEBJckD/ik4WsZzm2qOx9Fw
erGq7Zwchc+Jq1YeN5PxpzqSf4AG7+7dFIn+oe6X2FcIzgbYY+IfmgJIHEVjDHH5
+uAXyb6l4iKc89eQawO3t88pfHLJWbTzmnvgz2cMrxt94HRvgkHfvcpGEgbyldq6
EB33OunazFcfZFRIcXk1sfyLDvYE
=1ahV
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83289296"></a>32.2.4. Jordan K. Hubbard</h3></div></div></div><pre class="programlisting">
Jordan K. Hubbard &lt;jkh@FreeBSD.org&gt;
Fingerprint = 3C F2 27 7E 4A 6C 09 0A  4B C9 47 CD 4F 4D 0B 20

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.3ia

mQCNAzFjX0IAAAEEAML+nm9/kDNPp43ZUZGjYkm2QLtoC1Wxr8JulZXqk7qmhYcQ
jvX+fyoriJ6/7ZlnLe2oG5j9tZOnRLPvMaz0g9CpW6Dz3nkXrNPkmOFV9B8D94Mk
tyFeRJFqnkCuqBj6D+H8FtBwEeeTecSh2tJ0bZZTXnAMhxeOdvUVW/uOVC1dAAUR
tCNKb3JkYW4gSy4gSHViYmFyZCA8amtoQEZyZWVCU0Qub3JnPokBFQMFEDXCTXQM
j46yp4IfPQEBwO8IAIN0J09AXBf86dFUTFGcAMrEQqOF5IL+KGorAjzuYxERhKfD
ZV7jA+sCQqxkWfcVcE20kVyVYqzZIkio9a5zXP6TwA247JkPt54S1PmMDYHNlRIY
laXlNoji+4q3HP2DfHqXRT2859rYpm/fG/v6pWkos5voPKcZ2OFEp9W+Ap88oqw+
5rx4VetZNJq1Epmis4INj6XqNqj85+MOOIYE+f445ohDM6B/Mxazd6cHFGGIR+az
VjZ6lCDMLjzhB5+FqfrDLYuMjqkMTR5z9DL+psUvPlCkYbQ11NEWtEmiIWjUcNJN
GCxGzv5bXk0XPu3ADwbPkFE2usW1cSM7AQFiwuyJAJUDBRAxe+Q9a1pnjYGyp3kB
AV7XA/oCSL/Cc2USpQ2ckwkGpyvIkYBPszIcabSNJAzm2hsU9Qa6WOPxD8olDddB
uJNiW/gznPC4NsQ0N8Zr4IqRX/TTDVf04WhLmd8AN9SOrVv2q0BKgU6fLuk979tJ
utrewH6PR2qBOjAaR0FJNk4pcYAHeT+e7KaKy96YFvWKIyDvc4kAlQMFEDF8ldof
f6kIA1j8vQEBDH4D/0Zm0oNlpXrAE1EOFrmp43HURHbij8n0Gra1w9sbfo4PV+/H
U8ojTdWLy6r0+prH7NODCkgtIQNpqLuqM8PF2pPtUJj9HwTmSqfaT/LMztfPA6PQ
csyT7xxdXl0+4xTDl1avGSJfYsI8XCAy85cTs+PQwuyzugE/iykJO1Bnj/paiQCV
AwUQMXvlBvUVW/uOVC1dAQF2fQP/RfYC6RrpFTZHjo2qsUHSRk0vmsYfwG5NHP5y
oQBMsaQJeSckN4n2JOgR4T75U4vS62aFxgPLJP3lOHkU2Vc7xhAuBvsbGr5RP8c5
LvPOeUEyz6ZArp1KUHrtcM2iK1FBOmY4dOYphWyWMkDgYExabqlrAq7FKZftpq/C
BiMRuaw=
=C/Jw
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83290448"></a>32.2.5. Poul-Henning Kamp</h3></div></div></div><pre class="programlisting">
Poul-Henning Kamp &lt;phk@FreeBSD.org&gt;
Fingerprint = A3 F3 88 28 2F 9B 99 A2  49 F4 E2 FA 5A 78 8B 3E

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.3ia

mQCNAzAdpMIAAAEEALHDgrFUwhZtb7PbXg3upELoDVEUPFRwnmpJH1rRqyROUGcI
ooVe7u+FQlIs5OsXK8ECs/5Wpe2UrZSzHvjwBYOND5H42YtI5UULZLRCo5bFfTVA
K9Rpo5icfTsYihrzU2nmnycwFMk+jYXyT/ZDYWDP/BM9iLjj0x9/qQgDWPy9AAUR
tCNQb3VsLUhlbm5pbmcgS2FtcCA8cGhrQEZyZWVCU0Qub3JnPokAlQMFEDQQ0aZ1
u244dqP3sQEBu4ID/jXFFeJgs2MdTDNOZM/FbfDhI4qxAbYUsqS3+Ra16yd8Wd/A
jV+IHJE2NomFWl8UrUjCGinXiwzPgK1OfFJrS9Og1wQLvAl0X84BA8MTP9BQr4w7
6I/RbksgUSrVCIO8MJwlydjSPocWGBeXlVjbZxXzyuJk7H+TG+zuI5BuBcNIiQCV
AwUQMwYr2rNaYutZnzI9AQHiIQP/XxtBWFXaBRgVLEhRNpS07YdU+LsZGlLOZehN
9L4UnJFHQQPNOpMey2gF7Y95aBOw5/1xS5vlQpwmRFCntWsm/gqdzK6rulfr1r5A
y94LO5TAC6ucNu396Y4vo1TyD1STnRC466KlvmtQtAtFGgXlORWLL9URLzcRFd1h
D0yXd9aJAJUDBRAxfo19a1pnjYGyp3kBAQqyA/4v64vP3l1F0Sadn6ias761hkz/
SMdTuLzILmofSCC4o4KWMjiWJHs2Soo41QlZi1+xMHzV32JKiwFlGtPHqL+EHyXy
Q4H3vmf9/1KF+0XCaMtgI0wWUMziPSTJK8xXbRRmMDK/0F4TnVVaUhnmf+h5K7O6
XdmejDTa0X/NWcicmIkAlQMFEDF8lef1FVv7jlQtXQEBcnwD/0ro1PpUtlkLmreD
tsGTkNa7MFLegrYRvDDrHOwPZH152W2jPUncY+eArQJakeHiTDmJNpFagLZglhE0
bqJyca+UwCXX+6upAclWHEBMg2byiWMMqyPVEEnpUoHM1sIkgdNWlfQAmipRBfYh
2LyCgWvR8CbtwPYIFvUmGgB3MR87iQCVAwUQMUseXB9/qQgDWPy9AQGPkwP/WEDy
El2Gkvua9COtMAifot2vTwuvWWpNopIEx0Ivey4aVbRLD90gGCJw8OGDEtqFPcNV
8aIiy3fYVKXGZZjvCKd7zRfhNmQn0eLDcymq2OX3aPrMc2rRlkT4Jx425ukR1gsO
qiQAgw91aWhY8dlw/EKzk8ojm52x4VgXaBACMjaJAJUDBRAxOUOg72G56RHVjtUB
AbL4A/9HOn5Qa0lq9tKI/HkSdc5fGQD/66VdCBAb292RbB7CS/EM07MdbcqRRYIa
0+0gwQ3OdsWPdCVgH5RIhp/WiC+UPkR1cY8N9Mg2kTwJfZZfNqN+BgWlgRMPN27C
OhYNl8Q33Nl9CpBLrZWABF44jPeT0EvvTzP/5ZQ7T75EsYKYiYkAlQMFEDDmryQA
8tkJ67sbQQEBPdsEALCj6v1OBuJLLJTlxmmrkqAZPVzt5QdeO3Eqa2tcPWcU0nqP
vHYMzZcZ7oFg58NZsWrhSQQDIB5e+K65Q/h6dC7W/aDskZd64jxtEznX2kt0/MOr
8OdsDis1K2f9KQftrAx81KmVwW4Tqtzl7NWTDXt44fMOtibCwVq8v2DFkTJy
=JKbP
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83291600"></a>32.2.6. Rich Murphey</h3></div></div></div><pre class="programlisting">
Rich Murphey &lt;rich@FreeBSD.org&gt;
fingerprint = AF A0 60 C4 84 D6 0C 73  D1 EF C0 E9 9D 21 DB E4

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.2

mQCNAy97V+MAAAEEALiNM3FCwm3qrCe81E20UOSlNclOWfZHNAyOyj1ahHeINvo1
FBF2Gd5Lbj0y8SLMno5yJ6P4F4r+x3jwHZrzAIwMs/lxDXRtB0VeVWnlj6a3Rezs
wbfaTeSVyh5JohEcKdoYiMG5wjATOwK/NAwIPthB1RzRjnEeer3HI3ZYNEOpAAUR
tCRSaWNoIE11cnBoZXkgPHJpY2hAbGFtcHJleS51dG1iLmVkdT6JAJUDBRAve15W
vccjdlg0Q6kBAZTZBACcNd/LiVnMFURPrO4pVRn1sVQeokVX7izeWQ7siE31Iy7g
Sb97WRLEYDi686osaGfsuKNA87Rm+q5F+jxeUV4w4szoqp60gGvCbD0KCB2hWraP
/2s2qdVAxhfcoTin/Qp1ZWvXxFF7imGA/IjYIfB42VkaRYu6BwLEm3YAGfGcSw==
=QoiM
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83317456"></a>32.2.7. John Polstra</h3></div></div></div><pre class="programlisting">
John D. Polstra &lt;jdp@polstra.com&gt;
Fingerprint = 54 3A 90 59 6B A4 9D 61  BF 1D 03 09 35 8D F6 0D

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.2

mQCNAzMElMEAAAEEALizp6ZW9QifQgWoFmG3cXhzQ1+Gt+a4S1adC/TdHdBvw1M/
I6Ok7TC0dKF8blW3VRgeHo4F3XhGn+n9MqIdboh4HJC5Iiy63m98sVLJSwyGO4oM
dkEGyyCLxqP6h/DU/tzNBdqFzetGtYvU4ftt3RO0a506cr2CHcdm8Q+/vPRJAAUR
tCFKb2huIEQuIFBvbHN0cmEgPGpkcEBwb2xzdHJhLmNvbT6JAJUDBRAzBNBE9RVb
+45ULV0BAWgiA/0WWO3+c3qlptPCHJ3DFm6gG/qNKsY94agL/mHOr0fxMP5l2qKX
O6a1bWkvGoYq0EwoKGFfn0QeHiCl6jVi3CdBX+W7bObMcoi+foqZ6zluOWBC1Jdk
WQ5/DeqQGYXqbYjqO8voCScTAPge3XlMwVpMZTv24u+nYxtLkE0ZcwtY9IkAlQMF
EDMEt/DHZvEPv7z0SQEBXh8D/2egM5ckIRpGz9kcFTDClgdWWtlgwC1iI2p9gEhq
aufy+FUJlZS4GSQLWB0BlrTmDC9HuyQ+KZqKFRbVZLyzkH7WFs4zDmwQryLV5wkN
C4BRRBXZfWy8s4+zT2WQD1aPO+ZsgRauYLkJgTvXTPU2JCN62Nsd8R7bJS5tuHEm
7HGmiQCVAwUQMwSvHB9/qQgDWPy9AQFAhAQAgJ1AlbKITrEoJ0+pLIsov3eQ348m
SVHEBGIkU3Xznjr8NzT9aYtq4TIzt8jplqP3QoV1ka1yYpZf0NjvfZ+ffYp/sIaU
wPbEpgtmHnVWJAebMbNs/Ad1w8GDvxEt9IaCbMJGZnHmfnEqOBIxF7VBDPHHoJxM
V31K/PIoYsHAy5w=
=cHFa
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83318608"></a>32.2.8. Guido van Rooij</h3></div></div></div><pre class="programlisting">
Guido van Rooij &lt;guido@gvr.win.tue.nl&gt;
Fingerprint = 16 79 09 F3 C0 E4 28 A7  32 62 FA F6 60 31 C0 ED

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.2

mQCNAzGeO84AAAEEAKKAY91Na//DXwlUusr9GVESSlVwVP6DyH1wcZXhfN1fyZHq
SwhMCEdHYoojQds+VqD1iiZQvv1RLByBgj622PDAPN4+Z49HjGs7YbZsUNuQqPPU
wRPpP6ty69x1hPKq1sQIB5MS4radpCM+4wbZbhxv7l4rP3RWUbNaYutZnzI9AAUR
tCZHdWlkbyB2YW4gUm9vaWogPGd1aWRvQGd2ci53aW4udHVlLm5sPokAlQMFEDMG
Hcgff6kIA1j8vQEBbYgD/jm9xHuUuY+iXDkOzpCXBYACYEZDV913MjtyBAmaVqYo
Rh5HFimkGXe+rCo78Aau0hc57fFMTsJqnuWEqVt3GRq28hSK1FOZ7ni9/XibHcmN
rt2yugl3hYpClijo4nrDL1NxibbamkGW/vFGcljS0jqXz6NDVbGx5Oo7HBByxByz
iQCVAwUQMhmtVjt/x7zOdmsfAQFuVQQApsVUTigT5YWjQA9Nd5Z0+a/oVtZpyw5Z
OljLJP3vqJdMa6TidhfcatjHbFTve5x1dmjFgMX/MQTd8zf/+Xccy/PX4+lnKNpP
eSf1Y4aK+E8KHmBGd6GzX6CIboyGYLS9e3kGnN06F2AQtaLyJFgQ71wRaGuyKmQG
FwTn7jiKb1aJAJUDBRAyEOLXPt3iN6QQUSEBATwQA/9jqu0Nbk154+Pn+9mJX/YT
fYR2UqK/5FKCqgL5Nt/Deg2re0zMD1f8F9Dj6vuAAxq8hnOkIHKlWolMjkRKkzJi
mSPEWl3AuHJ31k948J8it4f8kq/o44usIA2KKVMlI63Q/rmNdfWCyiYQEVGcRbTm
GTdZIHYCOgV5dOo4ebFqgYkAlQMFEDIE1nMEJn15jgpJ0QEBW6kEAKqN8XSgzTqf
CrxFXT07MlHhfdbKUTNUoboxCGCLNW05vf1A8F5fdE5i14LiwkldWIzPxWD+Sa3L
fNPCfCZTaCiyGcLyTzVfBHA18MBAOOX6JiTpdcm22jLGUWBf/aJK3yz/nfbWntd/
LRHysIdVp29lP5BF+J9/Lzbb/9LxP1taiQCVAwUQMgRXZ44CzbsJWQz9AQFf7gP/
Qa2FS5S6RYKG3rYanWADVe/ikFV2lxuM1azlWbsmljXvKVWGe6cV693nS5lGGAjx
lbd2ADwXjlkNhv45HLWFm9PEveO9Jjr6tMuXVt8N2pxiX+1PLUN9CtphTIU7Yfjn
s6ryZZfwGHSfIxNGi5ua2SoXhg0svaYnxHxXmOtH24iJAJUDBRAyAkpV8qaAEa3W
TBkBARfQBAC+S3kbulEAN3SI7/A+A/dtl9DfZezT9C4SRBGsl2clQFMGIXmMQ/7v
7lLXrKQ7U2zVbgNfU8smw5h2vBIL6f1PyexSmc3mz9JY4er8KeZpcf6H0rSkHl+i
d7TF0GvuTdNPFO8hc9En+GG6QHOqbkB4NRZ6cwtfwUMhk2FHXBnjF4kAlQMFEDH5
FFukUJAsCdPmTQEBe74EAMBsxDnbD9cuI5MfF/QeTNEG4BIVUZtAkDme4Eg7zvsP
d3DeJKCGeNjiCWYrRTCGwaCWzMQk+/+MOmdkI6Oml+AIurJLoHceHS9jP1izdP7f
N2jkdeJSBsixunbQWtUElSgOQQ4iF5kqwBhxtOfEP/L9QsoydRMR1yB6WPD75H7V
iQCVAwUQMZ9YNGtaZ42Bsqd5AQH0PAQAhpVlAc3ZM/KOTywBSh8zWKVlSk3q/zGn
k7hJmFThnlhH1723+WmXE8aAPJi+VXOWJUFQgwELJ6R8jSU2qvk2m1VWyYSqRKvc
VRQMqT2wjss0GE1Ngg7tMrkRHT0il7E2xxIb8vMrIwmdkbTfYqBUhhGnsWPHZHq7
MoA1/b+rK7CJAJUDBRAxnvXh3IDyptUyfLkBAYTDA/4mEKlIP/EUX2Zmxgrd/JQB
hqcQlkTrBAaDOnOqe/4oewMKR7yaMpztYhJs97i03Vu3fgoLhDspE55ooEeHj0r4
cOdiWfYDsjSFUYSPNVhW4OSruMA3c29ynMqNHD7hpr3rcCPUi7J2RncocOcCjjK2
BQb/9IAUNeK4C9gPxMEZLokAlQMFEDGeO86zWmLrWZ8yPQEBEEID/2fPEUrSX3Yk
j5TJPFZ9MNX0lEo7AHYjnJgEbNI4pYm6C3PnMlsYfCSQDHuXmRQHAOWSdwOLvCkN
F8eDaF3M6u0urgeVJ+KVUnTz2+LZoZs12XSZKCte0HxjbvPpWMTTrYyimGezH79C
mgDVjsHaYOx3EXF0nnDmtXurGioEmW1J
=mSvM
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83319760"></a>32.2.9. Peter Wemm</h3></div></div></div><pre class="programlisting">
Peter Wemm &lt;peter@FreeBSD.org&gt;
       aka &lt;peter@spinner.dialix.com&gt;
       aka &lt;peter@haywire.dialix.com&gt;
       aka &lt;peter@perth.dialix.oz.au&gt;
Key fingerprint = 47 05 04 CA 4C EE F8 93  F6 DB 02 92 6D F5 58 8A

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.3ia

mQCNAy9/FJwAAAEEALxs9dE9tFd0Ru1TXdq301KfEoe5uYKKuldHRBOacG2Wny6/
W3Ill57hOi2+xmq5X/mHkapywxvy4cyLdt31i4GEKDvxpDvEzAYcy2n9dIup/eg2
kEhRBX9G5k/LKM4NQsRIieaIEGGgCZRm0lINqw495aZYrPpO4EqGN2HYnOMZAAUT
tCVQZXRlciBXZW1tIDxwZXRlckBoYXl3aXJlLmRpYWxpeC5jb20+iQCVAwUQMwWT
cXW7bjh2o/exAQEFkQP+LIx5zKlYp1uR24xGApMFNrNtjh+iDIWnxxb2M2Kb6x4G
9z6OmbUCoDTGrX9SSL2Usm2RD0BZfyv9D9QRWC2TSOPkPRqQgIycc11vgbLolJJN
eixqsxlFeKLGEx9eRQCCbo3dQIUjc2yaOe484QamhsK1nL5xpoNWI1P9zIOpDiGJ
AJUDBRAxsRPqSoY3Ydic4xkBAbWLA/9q1Fdnnk4unpGQsG31Qbtr4AzaQD5m/JHI
4gRmSmbj6luJMgNG3fpO06Gd/Z7uxyCJB8pTst2a8C/ljOYZxWT+5uSzkQXeMi5c
YcI1sZbUpkHtmqPW623hr1PB3ZLA1TIcTbQW+NzJsxQ1Pc6XG9fGkT9WXQW3Xhet
AP+juVTAhLQlUGV0ZXIgV2VtbSA8cGV0ZXJAcGVydGguZGlhbGl4Lm96LmF1PokA
lQMFEDGxFCFKhjdh2JzjGQEB6XkD/2HOwfuFrnQUtdwFPUkgtEqNeSr64jQ3Maz8
xgEtbaw/ym1PbhbCk311UWQq4+izZE2xktHTFClJfaMnxVIfboPyuiSF99KHiWnf
/Gspet0S7m/+RXIwZi1qSqvAanxMiA7kKgFSCmchzas8TQcyyXHtn/gl9v0khJkb
/fv3R20btB5QZXRlciBXZW1tIDxwZXRlckBGcmVlQlNELm9yZz6JAJUDBRAxsRJd
SoY3Ydic4xkBAZJUA/4i/NWHz5LIH/R4IF/3V3LleFyMFr5EPFY0/4mcv2v+ju9g
brOEM/xd4LlPrx1XqPeZ74JQ6K9mHR64RhKR7ZJJ9A+12yr5dVqihe911KyLKab9
4qZUHYi36WQu2VtLGnw/t8Jg44fQSzbBF5q9iTzcfNOYhRkSD3BdDrC3llywO7Ql
UGV0ZXIgV2VtbSA8cGV0ZXJAc3Bpbm5lci5kaWFsaXguY29tPokAlQMFEDGxEi1K
hjdh2JzjGQEBdA4EAKmNFlj8RF9HQsoI3UabnvYqAWN5wCwEB4u+Zf8zq6OHic23
TzoK1SPlmSdBE1dXXQGS6aiDkLT+xOdeewNs7nfUIcH/DBjSuklAOJzKliXPQW7E
kuKNwy4eq5bl+j3HB27i+WBXhn6OaNNQY674LGaR41EGq44Wo5ATcIicig/z
=gv+h
-----END PGP PUBLIC KEY BLOCK-----</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83320912"></a>32.2.10. Jörg Wunsch</h3></div></div></div><pre class="programlisting">
Type Bits/KeyID    Date       User ID
pub  1024/76A3F7B1 1996/04/27 Joerg Wunsch &lt;joerg_wunsch@uriah.heep.sax.de&gt;
            Key fingerprint = DC 47 E6 E4 FF A6 E9 8F  93 21 E0 7D F9 12 D6 4E
                              Joerg Wunsch &lt;joerg_wunsch@interface-business.de&gt;
                              Joerg Wunsch &lt;j@uriah.heep.sax.de&gt;
                              Joerg Wunsch &lt;j@interface-business.de&gt;

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: 2.6.3ia

mQCNAzGCFeAAAAEEAKmRBU2Nvc7nZy1Ouid61HunA/5hF4O91cXm71/KPaT7dskz
q5sFXvPJPpawwvqHPHfEbAK42ZaywyFp59L1GaYj87Pda+PlAYRJyY2DJl5/7JPe
ziq+7B8MdvbX6D526sdmcR+jPXPbHznASjkx9DPmK+7TgFujyXW7bjh2o/exAAUR
tC1Kb2VyZyBXdW5zY2ggPGpvZXJnX3d1bnNjaEB1cmlhaC5oZWVwLnNheC5kZT6J
AJUDBRA0FFkBs1pi61mfMj0BAfDCA/oCfkjrhvRwRCpSL8klJ1YDoUJdmw+v4nJc
pw3OpYXbwKOPLClsE7K3KCQscHel7auf91nrekAwbrXv9Clp0TegYeAQNjw5vZ9f
L6UZ5l3fH8E2GGA7+kqgNWs1KxAnG5GdUvJ9viyrWm8dqWRGo+loDWlZ12L2OgAD
fp7jVZTI1okAlQMFEDQPrLoff6kIA1j8vQEB2XQEAK/+SsQPCT/X4RB/PBbxUr28
GpGJMn3AafAaA3plYw3nb4ONbqEw9tJtofAn4UeGraiWw8nHYR2DAzoAjR6OzuX3
TtUV+57BIzrTPHcNkb6h8fPuHU+dFzR+LNoPaGJsFeov6w+Ug6qS9wa5FGDAgaRo
LHSyBxcRVoCbOEaS5S5EiQCVAwUQM5BktWVgqaw0+fnVAQGKPwP+OiWho3Zm2GKp
lEjiZ5zx3y8upzb+r1Qutb08jr2Ewja04hLg0fCrt6Ad3DoVqxe4POghIpmHM4O4
tcW92THQil70CLzfCxtfUc6eDzoP3krD1/Gwpm2hGrmYA9b/ez9+r2vKBbnUhPmC
glx5pf1IzHU9R2XyQz9Xu7FI2baOSZqJAJUDBRAyCIWZdbtuOHaj97EBAVMzA/41
VIph36l+yO9WGKkEB+NYbYOz2W/kyi74kXLvLdTXcRYFaCSZORSsQKPGNMrPZUoL
oAKxE25AoCgl5towqr/sCcu0A0MMvJddUvlQ2T+ylSpGmWchqoXCN7FdGyxrZ5zz
xzLIvtcio6kaHd76XxyJpltCASupdD53nEtxnu8sRrQxSm9lcmcgV3Vuc2NoIDxq
b2VyZ193dW5zY2hAaW50ZXJmYWNlLWJ1c2luZXNzLmRlPokAlQMFEDIIhfR1u244
dqP3sQEBWoID/RhBm+qtW+hu2fqAj9d8CVgEKJugrxZIpXuCKFvO+bCgQtogt9EX
+TJh4s8UUdcFkyEIu8CT2C3Rrr1grvckfxvrTgzSzvtYyv1072X3GkVY+SlUMBMA
rdl1qNW23oT7Q558ajnsaL065XJ5m7HacgTTikiofYG8i1s7TrsEeq6PtCJKb2Vy
ZyBXdW5zY2ggPGpAdXJpYWguaGVlcC5zYXguZGU+iQCVAwUQMaS91D4gHQUlG9CZ
AQGYOwQAhPpiobK3d/fz+jWrbQgjkoO+j39glYGXb22+6iuEprFRs/ufKYtjljNT
NK3B4DWSkyIPawcuO4Lotijp6jke2bsjFSSashGWcsJlpnwsv7EeFItT3oWTTTQQ
ItPbtNyLW6M6xB+jLGtaAvJqfOlzgO9BLfHuA2LY+WvbVW447SWJAJUDBRAxqWRs
dbtuOHaj97EBAXDBA/49rzZB5akkTSbt/gNd38OJgC+H8N5da25vV9dD3KoAvXfW
fw7OxIsxvQ/Ab+rJmukrrWxPdsC+1WU1+1rGa4PvJp/VJRDes2awGrn+iO7/cQoS
IVziC27JpcbvjLvLVcBIiy1yT/RvJ+87a3jPRHt3VFGcpFh4KykxxSNiyGygl4kA
lQMFEDGCUB31FVv7jlQtXQEB5KgD/iIJZe5lFkPr2B/Cr7BKMVBot1/JSu05NsHg
JZ3uK15w4mVtNPZcFi/dKbn+qRM6LKDFe/GF0HZD/ZD1FJt8yQjzF2w340B+F2GG
EOwnClqZDtEAqnIBzM/ECQQqH+6Bi8gpkFZrFgg5eON7ikqmusDnOlYStM/CBfgp
SbR8kDmFtCZKb2VyZyBXdW5zY2ggPGpAaW50ZXJmYWNlLWJ1c2luZXNzLmRlPokA
lQMFEDHioSdlYKmsNPn51QEByz8D/10uMrwP7MdaXnptd1XNFhpaAPYTVAOcaKlY
OGI/LLR9PiU3FbqXO+7INhaxFjBxa0Tw/p4au5Lq1+Mx81edHniJZNS8tz3I3goi
jIC3+jn2gnVAWnK5UZUTUVUn/JLVk/oSaIJNIMMDaw4J9xPVVkb+Fh1A+XqtPsVa
YESrNp0+iQCVAwUQMwXkzcdm8Q+/vPRJAQEA4QQAgNNX1HFgXrMetDb+w6yEGQDk
JCDAY9b6mA2HNeKLQAhsoZl4HwA1+iuQaCgo3lyFC+1Sf097OUTs74z5X1vCedqV
oFw9CxI3xuctt3pJCbbN68flOlnq0WdYouWWGlFwLlh5PEy//VtwX9lqgsizlhzi
t+fX6BT4BgKi5baDhrWJAJUDBRAyCKveD9eCJxX4hUkBAebMA/9mRPy6K6i7TX2R
jUKSl2p5oYrXPk12Zsw4ijuktslxzQhOCyMSCGK2UEC4UM9MXp1H1JZQxN/DcfnM
7VaUt+Ve0wZ6DC9gBSHJ1hKVxHe5XTj26mIr4rcXNy2XEDMK9QsnBxIAZnBVTjSO
LdhqqSMp3ULLOpBlRL2RYrqi27IXr4kAlQMFEDGpbnd1u244dqP3sQEBJnQD/RVS
Azgf4uorv3fpbosI0LE3LUufAYGBSJNJnskeKyudZkNkI5zGGDwVneH/cSkKT4OR
ooeqcTBxKeMaMuXPVl30QahgNwWjfuTvl5OZ8orsQGGWIn5FhqYXsKkjEGxIOBOf
vvlVQ0UbcR0N2+5F6Mb5GqrXZpIesn7jFJpkQKPU
=97h7
-----END PGP PUBLIC KEY BLOCK-----</pre></div></div></div><div class="index"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83322320"></a>Índice</h2></div></div></div><div class="index"><div class="indexdiv"><h3>Símbolos</h3><dl><dt>.k5login, <a class="indexterm" href="#idp73859792">Ficheros de configuración de usuario: .k5login y .k5users</a></dt><dt>.k5users, <a class="indexterm" href="#idp73859792">Ficheros de configuración de usuario: .k5login y .k5users</a></dt><dt>.rhosts, <a class="indexterm" href="#idp75945552">Dump y Restore</a></dt><dt>/boot/kernel.old, <a class="indexterm" href="#kernelconfig-building">Compilación e instalación de un kernel personalizado</a></dt><dt>/etc/gettytab, <a class="indexterm" href="#idp77604816">/etc/gettytab</a></dt><dt>/etc/group, <a class="indexterm" href="#users-groups">Grupos</a></dt><dt>/etc/login.conf, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>/etc/mail/access, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/mail/aliases, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/mail/local-host-names, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/mail/mailer.conf, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/mail/mailertable, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/mail/sendmail.cf, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/mail/virtusertable, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>/etc/remote, <a class="indexterm" href="#direct-at">¿Como se espera que yo entre estos comandos AT?</a></dt><dt>/etc/ttys, <a class="indexterm" href="#dialup-ttys">/etc/ttys</a></dt><dt>/usr/bin/login, <a class="indexterm" href="#idp77586896">Revisión rápida</a></dt><dt>/usr/share/skel, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>10 base 2, <a class="indexterm" href="#idp81021392">&#8220;bridges/routers&#8221; RDSI &#8220;Stand-alone&#8221;</a></dt><dt>10 base T, <a class="indexterm" href="#idp81021392">&#8220;bridges/routers&#8221; RDSI &#8220;Stand-alone&#8221;</a></dt><dt>386BSD, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a>, <a class="indexterm" href="#relnotes">En qué consiste el FreeBSD que distribuimos</a></dt><dt>386BSD Patchkit, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>4.3BSD-Lite, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>4.4BSD-Lite, <a class="indexterm" href="#nutshell">Bienvenido a FreeBSD</a>, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>802.11 (ver Redes sin cables)</dt></dl></div><div class="indexdiv"><h3>A</h3><dl><dt>Abacus, <a class="indexterm" href="#idp69461712">Abacus</a></dt><dt>AbiWord, <a class="indexterm" href="#idp69290192">AbiWord</a></dt><dt>ACL, <a class="indexterm" href="#fs-acl">Listas de control de acceso a sistemas de ficheros</a></dt><dt>Acrobat Reader, <a class="indexterm" href="#idp69366736">Acrobat Reader®</a></dt><dt>address redirection, <a class="indexterm" href="#network-natdaddress-redirection">Redirección de direcciones</a></dt><dt>adduser, <a class="indexterm" href="#users-adduser">adduser</a>, <a class="indexterm" href="#adm-setup">Configuración a nivel de administrador
	      </a></dt><dt>Advertencias de seguridad en FreeBSD, <a class="indexterm" href="#security-advisories">FreeBSD Security Advisories</a></dt><dt>Agentes de Correo de Usuario, <a class="indexterm" href="#mail-agents">Agente de Correo de Usuario</a></dt><dt>AIX, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>Alpha, <a class="indexterm" href="#idp62975312">FreeBSD/alpha</a>, <a class="indexterm" href="#idp65498064">Estructura de discos en Alpha</a>, <a class="indexterm" href="#idp65682000">Arranque en Alpha</a>, <a class="indexterm" href="#idp66687312">El arranque de FreeBSD/alpha</a></dt><dt>Alpha BIOS, <a class="indexterm" href="#idp62975312">FreeBSD/alpha</a></dt><dt>Amanda, <a class="indexterm" href="#backups-programs-amanda">Amanda</a></dt><dt>amd, <a class="indexterm" href="#network-amd">Anclajes automáticos usando amd</a></dt><dt>anti-aliased fonts, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a></dt><dt>Apache, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>apagado, <a class="indexterm" href="#boot-shutdown">Secuencia de apagado</a></dt><dt>aplicaciones</dt><dd><dl><dt>Maple, <a class="indexterm" href="#linuxemu-maple">Instalación de Maple&#8482;</a></dt><dt>Mathematica, <a class="indexterm" href="#linuxemu-mathematica">Instalación de Mathematica®</a></dt><dt>MATLAB, <a class="indexterm" href="#linuxemu-matlab">Instalación de MATLAB®</a></dt><dt>Oracle, <a class="indexterm" href="#linuxemu-oracle">Instalación de Oracle®</a></dt><dt>SAP R/3, <a class="indexterm" href="#sapr3">Instalación de SAP® R/3®</a></dt></dl></dd><dt>APM, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>ARC, <a class="indexterm" href="#idp62975312">FreeBSD/alpha</a></dt><dt>ASCII, <a class="indexterm" href="#idp76859344">Codificaciones</a></dt><dt>AT&amp;T, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>Ataques de denegación de
         servicio (DoS), <a class="indexterm" href="#idp73188816">Ataques de denegación de servicio</a></dt><dt>Ataques DoS (ver Denegación de servicio (DoS))</dt><dt>AUDIT, <a class="indexterm" href="#audit-synopsis">*</a></dt><dt>Auditoría de eventos de seguridad (ver MAC)</dt><dt>automatic mounter daemon, <a class="indexterm" href="#network-amd">Anclajes automáticos usando amd</a></dt><dt>AutoPPP, <a class="indexterm" href="#userppp-mgetty">mgetty y AutoPPP</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>backup software</dt><dd><dl><dt>dump / restore, <a class="indexterm" href="#idp75945552">Dump y Restore</a></dt></dl></dd><dt>BGP, <a class="indexterm" href="#network-dedicated-router">Construcción de un &#8220;route&#8221;</a></dt><dt>bibliotecas compartidas, <a class="indexterm" href="#idp70961488">Cómo instalar bibliotecas compartidas adicionales</a></dt><dt>binary compatibility</dt><dd><dl><dt>BSD/OS, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>Linux, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>NetBSD, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>SCO, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>SVR4, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt></dl></dd><dt>BIND, <a class="indexterm" href="#mail-trouble">Depuración de Problemas</a>, <a class="indexterm" href="#idp81697232">Resumen</a></dt><dd><dl><dt>caching name server, <a class="indexterm" href="#idp81869264">Servidor de nombres de cache</a></dt><dt>configuration files, <a class="indexterm" href="#idp81784784">Ficheros de configuración</a></dt><dt>running in a sandbox, <a class="indexterm" href="#network-named-sandbox">Ejecución de named en una &#8220;
        Sandbox&#8221;</a></dt><dt>starting, <a class="indexterm" href="#idp81779920">Ejecución de BIND</a></dt></dl></dd><dt>BIOS, <a class="indexterm" href="#install-drive-bios-numbering">Numeración de unidades desde el punto de vista de la BIOS</a></dt><dd><dl><dt>Sistema Básico de Entrada/Salida, <a class="indexterm" href="#boot-introduction">El problema que representa arrancar el sistema</a></dt></dl></dd><dt>bits-por-second, <a class="indexterm" href="#serial-terminology">Terminología</a></dt><dt>Blue Mountain Arts, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>Bluetooth, <a class="indexterm" href="#network-bluetooth">Bluetooth</a></dt><dt>BOOTP</dt><dd><dl><dt>diskless operation, <a class="indexterm" href="#idp80827600">Configuración utilizando BOOTP</a></dt></dl></dd><dt>bridge, <a class="indexterm" href="#idp80440016">Introducción</a></dt><dt>BSD Copyright, <a class="indexterm" href="#goals">Objetivos del Proyecto FreeBSD</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>cajas de arena sandboxes, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>cargador, <a class="indexterm" href="#boot-loader-flow">Flujo del programa cargador</a></dt><dt>cargador de clase en
        ejecución, <a class="indexterm" href="#idp72296528">?Cómo funciona?</a></dt><dt>cargador-de-arranque (boot-loader), <a class="indexterm" href="#boot-loader">Etapa tres, /boot/loader (cargador de arranque)</a></dt><dt>CDROM</dt><dd><dl><dt>creación, <a class="indexterm" href="#creating-cds">Creación y uso de medios ópticos (CD)</a></dt><dt>grabar, <a class="indexterm" href="#burncd">burncd</a></dt></dl></dd><dt>CDROMs</dt><dd><dl><dt>creación cd CD arrancables, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>grabar, <a class="indexterm" href="#cdrecord">cdrecord</a></dt></dl></dd><dt>CHAP, <a class="indexterm" href="#idp78142160">Aclaraciones</a>, <a class="indexterm" href="#userppp-staticIP">PPP y direcciones de IP estáticas (fijas)</a>, <a class="indexterm" href="#userppp-PAPnCHAP">Autentificación por medio de PAP y CHAP</a></dt><dt>Chino tradicional</dt><dd><dl><dt>codificación BIG-5, <a class="indexterm" href="#usr-setup">Configuración a nivel de usuario</a></dt></dl></dd><dt>chpass, <a class="indexterm" href="#users-chpass">chpass</a></dt><dt>chroot, <a class="indexterm" href="#network-named-sandbox">Ejecución de named en una &#8220;
        Sandbox&#8221;</a></dt><dt>Cisco, <a class="indexterm" href="#idp78540112">Uso de pppd como Cliente</a></dt><dt>clase de sesión, <a class="indexterm" href="#adm-setup">Configuración a nivel de administrador
	      </a></dt><dt>clases de sesión, <a class="indexterm" href="#idp76884688">Métodos de configuración de las &#8220;
	  locales&#8221;</a></dt><dt>Coda, <a class="indexterm" href="#disks-virtual">Sistemas de ficheros en red, memoria y respaldados en fichero</a></dt><dt>codificaciones, <a class="indexterm" href="#idp76859344">Codificaciones</a></dt><dt>códigos de idioma, <a class="indexterm" href="#idp76845648">Códigos de idioma y país</a></dt><dt>códigos de país, <a class="indexterm" href="#idp76845648">Códigos de idioma y país</a></dt><dt>Colaboradores, <a class="indexterm" href="#development">El modelo de desarrollo de FreeBSD</a></dt><dt>colección de ports, <a class="indexterm" href="#linuxemu-libs-port">Instalación usando el port linux_base</a></dt><dt>committers, <a class="indexterm" href="#development">El modelo de desarrollo de FreeBSD</a></dt><dt>compatibilidad binaria</dt><dd><dl><dt>Linux, <a class="indexterm" href="#linuxemu-synopsis">Sinopsis</a></dt></dl></dd><dt>compatibilidad binaria con Linux, <a class="indexterm" href="#linuxemu-synopsis">Sinopsis</a></dt><dt>compilers</dt><dd><dl><dt>C, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>C++, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>Fortran, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt></dl></dd><dt>compresión, <a class="indexterm" href="#floppies-compress">?Puedo comprimir mis respaldos?</a></dt><dt>Computer Systems Research Group (CSRG), <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a>, <a class="indexterm" href="#relnotes">En qué consiste el FreeBSD que distribuimos</a></dt><dt>comsat, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>concatenación de discos, <a class="indexterm" href="#vinum-access-bottlenecks">Cuellos de Botella en el Acceso</a></dt><dt>Concurrent Versions System (ver CVS)</dt><dt>configuración del cargador, <a class="indexterm" href="#boot-loader-flow">Flujo del programa cargador</a></dt><dt>consola, <a class="indexterm" href="#consoles-intro">La consola</a>, <a class="indexterm" href="#boot-singleuser">Modo monousuario</a></dt><dt>consola virtual, <a class="indexterm" href="#consoles">Consolas virtuales y terminales</a></dt><dt>contabilidad</dt><dd><dl><dt>espacio en disco, <a class="indexterm" href="#quotas">Cuotas en sistemas de ficheros</a></dt></dl></dd><dt>Contabilidad de procesos, <a class="indexterm" href="#security-accounting">Contabilidad de procesos</a></dt><dt>Contraseñas de un solo uso, <a class="indexterm" href="#one-time-passwords">Contraseñas de un solo uso</a></dt><dt>core team, <a class="indexterm" href="#development">El modelo de desarrollo de FreeBSD</a></dt><dt>coredumpsize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>correo</dt><dd><dl><dt>recepción, <a class="indexterm" href="#mail-receive">Recepción de correo</a></dt></dl></dd><dt>correo electónico, <a class="indexterm" href="#mail-synopsis">Sinopsis</a></dt><dt>cortafuegos, <a class="indexterm" href="#firewalls">Cortafuegos</a></dt><dt>cpio, <a class="indexterm" href="#idp75998800">cpio</a></dt><dt>cputime, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>crypt, <a class="indexterm" href="#crypt">DES, MD5 y Crypt</a></dt><dt>cu, <a class="indexterm" href="#headless-install">Instalación de FreeBSD en un sistema sin monitor o
	teclado</a></dt><dt>cuaa, <a class="indexterm" href="#serial-hw-config">Configuración de puerto serie</a></dt><dt>cuentas</dt><dd><dl><dt>añadir, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>cambiar contraseña, <a class="indexterm" href="#users-passwd">passwd</a></dt><dt>daemon, <a class="indexterm" href="#users-system">Cuentas de sistema</a></dt><dt>eliminar, <a class="indexterm" href="#users-rmuser">rmuser</a></dt><dt>grupos, <a class="indexterm" href="#users-groups">Grupos</a></dt><dt>limitar, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>modificar, <a class="indexterm" href="#users-modifying">Modificación de cuentas</a></dt><dt>nobody, <a class="indexterm" href="#users-system">Cuentas de sistema</a></dt><dt>operator, <a class="indexterm" href="#users-system">Cuentas de sistema</a></dt><dt>sistema, <a class="indexterm" href="#users-system">Cuentas de sistema</a></dt><dt>superusuario (root), <a class="indexterm" href="#users-superuser">La cuenta superusuario</a></dt><dt>usuario, <a class="indexterm" href="#users-user">Cuentas de usuario</a></dt></dl></dd><dt>cuotas, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>cuotas de disco, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a>, <a class="indexterm" href="#quotas">Cuotas en sistemas de ficheros</a></dt><dd><dl><dt>límites, <a class="indexterm" href="#idp76347984">Configuración de límites de cuota</a></dt><dt>revisando, <a class="indexterm" href="#idp76382416">Revisión de los límites de cuota y
        uso de disco</a></dt><dt>revisión, <a class="indexterm" href="#idp76329552">Configuración del sistema para habilitar
       cuotas de disco</a></dt></dl></dd><dt>CVS</dt><dd><dl><dt>repository, <a class="indexterm" href="#development">El modelo de desarrollo de FreeBSD</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>DCE, <a class="indexterm" href="#serial-terminology">Terminología</a></dt><dt>default route, <a class="indexterm" href="#idp78801104">Cosas Que Tiene Que Hacer Solo Una Vez</a>, <a class="indexterm" href="#idp79898704">Ejemplo</a>, <a class="indexterm" href="#network-routing-default">Rutas por defecto</a></dt><dt>Denegacion de servicio (DoS), <a class="indexterm" href="#security-intro">Introducción</a></dt><dt>DES, <a class="indexterm" href="#crypt">DES, MD5 y Crypt</a></dt><dt>device nodes, <a class="indexterm" href="#troubleshooting">Problemas habituales</a></dt><dt>device.hints, <a class="indexterm" href="#device-hints">Device Hints</a></dt><dt>DGA, <a class="indexterm" href="#video-interface">Cómo determinar las características de video</a></dt><dt>DHCP</dt><dd><dl><dt>configuration files, <a class="indexterm" href="#idp81603024">Ficheros</a>, <a class="indexterm" href="#idp81670608">Ficheros</a></dt><dt>dhcpd.conf, <a class="indexterm" href="#idp81636944">Configuración del servidor de DHCP</a></dt><dt>diskless operation, <a class="indexterm" href="#idp80794576">Configuración utilizando ISC
            DHCP</a></dt><dt>installation, <a class="indexterm" href="#idp81622096">Instalación del servidor DHCP</a></dt><dt>requirements, <a class="indexterm" href="#idp81536592">Integración dentro de los sistemas FreeBSD</a></dt><dt>server, <a class="indexterm" href="#idp81536592">Integración dentro de los sistemas FreeBSD</a></dt></dl></dd><dt>dial-in service, <a class="indexterm" href="#dialup">Servicio dial-in</a></dt><dt>dial-out service, <a class="indexterm" href="#dialout">Servicio dial-out</a></dt><dt>Dirección IP estática, <a class="indexterm" href="#idp78142160">Aclaraciones</a></dt><dt>direcciones estáticas, <a class="indexterm" href="#idp78989520">Direcciones de Enrutamiento Estáticas</a></dt><dt>directorio esqueleto, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>directorios, <a class="indexterm" href="#permissions">Permisos</a></dt><dt>discos</dt><dd><dl><dt>añadir, <a class="indexterm" href="#disks-adding">Añadir discos</a></dt><dt>cifrado, <a class="indexterm" href="#disks-encrypting">Cifrado de particiones de disco</a></dt><dt>desconectar un disco de memoria, <a class="indexterm" href="#idp76266448">Desconexión del sistema de un disco de memoria</a></dt><dt>file-backed (4.X), <a class="indexterm" href="#disks-vnconfig">Sistema de ficheros basado en fichero en FreeBSD 4.X</a></dt><dt>file-backed (5.X), <a class="indexterm" href="#disks-mdconfig">Sistemas de ficheros basados en fichero en
        FreeBSD 5.X</a></dt><dt>memoria, <a class="indexterm" href="#disks-virtual">Sistemas de ficheros en red, memoria y respaldados en fichero</a></dt><dt>sistemas de ficheros en memoria (4.X), <a class="indexterm" href="#disks-md-freebsd4">Sistemas de ficheros basados en memoria en FreeBSD 4.X</a></dt><dt>sistemas de ficheros en memoria (5.X), <a class="indexterm" href="#disks-md-freebsd5">sistemas de ficheros basados en memoria en
        FreeBSD 5.X</a></dt><dt>virtuales, <a class="indexterm" href="#disks-virtual">Sistemas de ficheros en red, memoria y respaldados en fichero</a></dt></dl></dd><dt>discos flexibles, <a class="indexterm" href="#floppies-using">?Puedo utilizar disquetes para respaldar mis datos?</a></dt><dt>discos virtuales, <a class="indexterm" href="#disks-virtual">Sistemas de ficheros en red, memoria y respaldados en fichero</a></dt><dt>Disk Mirroring, <a class="indexterm" href="#GEOM-mirror">RAID1 - Replicación</a></dt><dt>disklabel, <a class="indexterm" href="#idp76089168">Antes del desastre</a>, <a class="indexterm" href="#idp76101712">Después del desastre</a></dt><dt>diskless operation, <a class="indexterm" href="#network-diskless">Ejecución sin disco duro</a></dt><dd><dl><dt>/usr read-only, <a class="indexterm" href="#idp80963280">Ejecución con un /usr de
            sólo lectura</a></dt><dt>kernel configuration, <a class="indexterm" href="#idp80896336">Construcción de un kernel sin
          disco</a></dt></dl></dd><dt>diskless workstation, <a class="indexterm" href="#network-diskless">Ejecución sin disco duro</a></dt><dt>DNS, <a class="indexterm" href="#idp78430928">Extensiones de MS</a>, <a class="indexterm" href="#mail-using">Utilización del correo electrónico</a>, <a class="indexterm" href="#mail-domain">Correo para Nuestro Dominio</a>, <a class="indexterm" href="#idp81697232">Resumen</a></dt><dd><dl><dt>records, <a class="indexterm" href="#idp81814864">Ficheros de zona</a></dt></dl></dd><dt>DNS Server, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>domain (nombre de dominio), <a class="indexterm" href="#idp78801104">Cosas Que Tiene Que Hacer Solo Una Vez</a></dt><dt>DOS, <a class="indexterm" href="#install-floppies">Preparación del medio de arranque</a>, <a class="indexterm" href="#install-drive-bios-numbering">Numeración de unidades desde el punto de vista de la BIOS</a>, <a class="indexterm" href="#idp77028816">El núcleo y los sistemas de ficheros</a></dt><dt>DSL, <a class="indexterm" href="#idp80451024">Cortafuegos de filtrado/conformación de tráfico
          </a></dt><dt>DSP, <a class="indexterm" href="#troubleshooting">Problemas habituales</a></dt><dt>DTE, <a class="indexterm" href="#serial-terminology">Terminología</a></dt><dt>dual homed hosts, <a class="indexterm" href="#idp79976144">Máquinas con doble pertenencia (Dual Homed Hosts)</a></dt><dt>dump, <a class="indexterm" href="#idp75945552">Dump y Restore</a></dt><dt>DVD</dt><dd><dl><dt>DVD+RW, <a class="indexterm" href="#idp75710032">Uso de un DVD+RW</a></dt><dt>DVD-RW, <a class="indexterm" href="#idp75727568">Uso de un DVD-RW</a></dt><dt>DVD-Video, <a class="indexterm" href="#idp75698128">Grabación de un DVD de vídeo</a></dt><dt>grabar, <a class="indexterm" href="#creating-dvds">Crear y utilizar medios ópticos (DVDs)</a></dt></dl></dd><dt>Dynamic Host Configuration Protocol (ver DHCP)</dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>editores, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>editores de texto, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>editors</dt><dd><dl><dt>ee, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>emacs, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>vi, <a class="indexterm" href="#editors">Editores de texto</a></dt></dl></dd><dt>ee, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>electronic mail (ver email)</dt><dt>ELF, <a class="indexterm" href="#idp72296528">?Cómo funciona?</a></dt><dd><dl><dt>marcado, <a class="indexterm" href="#idp72296528">?Cómo funciona?</a></dt></dl></dd><dt>emacs, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>email, <a class="indexterm" href="#mail-synopsis">Sinopsis</a></dt><dd><dl><dt>cambio de mta, <a class="indexterm" href="#mail-changingmta">Sustitución del Agente de Transferencia de Correo</a></dt><dt>configuration, <a class="indexterm" href="#mail-config">Configuración Básica</a></dt><dt>Depuración de problemas, <a class="indexterm" href="#mail-trouble">Depuración de Problemas</a></dt></dl></dd><dt>enlaces simbólicos, <a class="indexterm" href="#idp70961488">Cómo instalar bibliotecas compartidas adicionales</a></dt><dt>Etherboot, <a class="indexterm" href="#idp80833744">Preparación de un programa de arranque con
	  Etherboot</a></dt><dt>Ethernet, <a class="indexterm" href="#idp78928592">Configuració de slip.hosts</a></dt><dd><dl><dt>dirección MAC, <a class="indexterm" href="#idp78956752">slip.login Configuración</a></dt><dt>MAC address, <a class="indexterm" href="#idp71032784">Cómo obtener una contraseña de Mathematica®</a>, <a class="indexterm" href="#idp79898704">Ejemplo</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>fdisk, <a class="indexterm" href="#disks-adding">Añadir discos</a></dt><dt>ficheros rc, <a class="indexterm" href="#boot-rc">Configuración-Fuente(rc)</a></dt><dt>filesize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>finger, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>Firefox, <a class="indexterm" href="#idp69207248">Firefox</a></dt><dt>firewall, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a>, <a class="indexterm" href="#idp80451024">Cortafuegos de filtrado/conformación de tráfico
          </a>, <a class="indexterm" href="#idp80472016">Soporte de cortafuegos</a></dt><dt>fix-it floppies, <a class="indexterm" href="#idp76089168">Antes del desastre</a></dt><dt>fonts, <a class="indexterm" href="#idp71042896">Ejecución del «frontend» de Mathematica®
        través de una red</a></dt><dd><dl><dt>anti-aliased, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a></dt><dt>spacing, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a></dt><dt>TrueType, <a class="indexterm" href="#truetype">Tipos TrueType®</a></dt></dl></dd><dt>Fonts</dt><dd><dl><dt>LCD screen, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a></dt></dl></dd><dt>Free Software Foundation, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a>, <a class="indexterm" href="#relnotes">En qué consiste el FreeBSD que distribuimos</a>, <a class="indexterm" href="#basics-info">Ficheros de información GNU: info</a></dt><dt>FreeBSD Project</dt><dd><dl><dt>development model, <a class="indexterm" href="#development">El modelo de desarrollo de FreeBSD</a></dt><dt>goals, <a class="indexterm" href="#goals">Objetivos del Proyecto FreeBSD</a></dt><dt>history, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt></dl></dd><dt>FreshMeat, <a class="indexterm" href="#ports-finding-applications">Cómo encontrar aplicaciones</a></dt><dt>FreshPorts, <a class="indexterm" href="#ports-finding-applications">Cómo encontrar aplicaciones</a></dt><dt>FTP</dt><dd><dl><dt>anonymous, <a class="indexterm" href="#ftpanon">FTP anónimo</a>, <a class="indexterm" href="#network-services">Configuración de servicios de red</a></dt><dt>modo pasivo, <a class="indexterm" href="#install-media">Elección del medio de instalación</a></dt><dt>via a HTTP proxy, <a class="indexterm" href="#install-media">Elección del medio de instalación</a></dt></dl></dd><dt>FTP servers, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>gated, <a class="indexterm" href="#idp78928592">Configuració de slip.hosts</a>, <a class="indexterm" href="#idp78991184">Ejecutando gated</a></dt><dt>gateway, <a class="indexterm" href="#network-routing">Pasarelas y &#8220;routers&#8221;</a></dt><dt>GEOM, <a class="indexterm" href="#GEOM-synopsis">Sinopsis</a>, <a class="indexterm" href="#GEOM-striping">RAID0 - Distribución por bandas</a>, <a class="indexterm" href="#GEOM-mirror">RAID1 - Replicación</a></dt><dt>GEOM Disk Framework (ver GEOM)</dt><dt>getty, <a class="indexterm" href="#idp77586896">Revisión rápida</a></dt><dt>GNOME, <a class="indexterm" href="#x11-wm-gnome-about">Acerca de GNOME</a></dt><dd><dl><dt>anti-aliased fonts, <a class="indexterm" href="#x11-wm-gnome-antialias">Tipos «Anti-aliased» en GNOME</a></dt></dl></dd><dt>GNU Compiler Collection, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>GNU General Public License (GPL), <a class="indexterm" href="#goals">Objetivos del Proyecto FreeBSD</a></dt><dt>GNU Lesser General Public License (LGPL), <a class="indexterm" href="#goals">Objetivos del Proyecto FreeBSD</a></dt><dt>GNU toolchain, <a class="indexterm" href="#idp70983504">Instalar binarios ELF Linux</a></dt><dt>GnuCash, <a class="indexterm" href="#idp69439440">GnuCash</a></dt><dt>Gnumeric, <a class="indexterm" href="#idp69447760">Gnumeric</a></dt><dt>GQview, <a class="indexterm" href="#idp69405392">GQview</a></dt><dt>grabadora de CD</dt><dd><dl><dt>ATAPI, <a class="indexterm" href="#idp75475024">Introducción</a></dt><dt>controlador ATAPI/CAM, <a class="indexterm" href="#idp75475024">Introducción</a></dt></dl></dd><dt>Grabadora de CD</dt><dd><dl><dt>controlador ATAPI/CAM, <a class="indexterm" href="#atapicam">Uso del controlador ATAPI/CAM</a></dt></dl></dd><dt>Greenman, David, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>Grimes, Rod, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>grupos, <a class="indexterm" href="#users-groups">Grupos</a></dt><dt>gv, <a class="indexterm" href="#idp69374160">gv</a></dt><dt>gzip, <a class="indexterm" href="#floppies-compress">?Puedo comprimir mis respaldos?</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>HCI, <a class="indexterm" href="#idp80320208">Interfaz de la controladora de la máquina (HCI)</a></dt><dt>horizontal scan rate, <a class="indexterm" href="#idp68610896">Antes de empezar</a></dt><dt>hostname, <a class="indexterm" href="#idp78184272">Configuración de la Resolución de Nombres</a></dt><dt>hosts, <a class="indexterm" href="#idp78184272">Configuración de la Resolución de Nombres</a></dt><dt>HP-UX, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>Hubbard, Jordan, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>I/O port, <a class="indexterm" href="#troubleshooting">Problemas habituales</a></dt><dt>ICMP_BANDLIM, <a class="indexterm" href="#idp73188816">Ataques de denegación de servicio</a></dt><dt>IEEE, <a class="indexterm" href="#idp76035024">pax</a></dt><dt>ifconfig, <a class="indexterm" href="#idp80284240">ifconfig</a></dt><dt>IKE, <a class="indexterm" href="#idp74219216">Paso 2: Asegurar el enlace</a></dt><dt>image scanners, <a class="indexterm" href="#scanners">Escáneres de imágenes</a></dt><dt>IMAP, <a class="indexterm" href="#mail-using">Utilización del correo electrónico</a>, <a class="indexterm" href="#pop-and-imap">Acceso a carpetas de correo remotas mediante
          POP e IMAP</a></dt><dt>impresoras, <a class="indexterm" href="#idp77063376">Configuración de la impresora</a></dt><dt>imprimir, <a class="indexterm" href="#idp70709072">Sinopsis</a></dt><dt>inicio, <a class="indexterm" href="#boot-synopsis">Sinopsis</a></dt><dt>init, <a class="indexterm" href="#boot-introduction">El problema que representa arrancar el sistema</a>, <a class="indexterm" href="#boot-init">Init: inicialización del proceso de control</a></dt><dt>instalación, <a class="indexterm" href="#install-synopsis">Sinopsis</a></dt><dt>installation</dt><dd><dl><dt>floppies, <a class="indexterm" href="#idp66884432">Creación de disquetes de instalación</a></dt><dt>from MS-DOS, <a class="indexterm" href="#install-msdos">Instalación desde una partición MS-DOS®</a></dt><dt>from QIC/SCSI Tape, <a class="indexterm" href="#idp66918352">Creación de una cinta de instalación</a></dt><dt>headless (serial console), <a class="indexterm" href="#headless-install">Instalación de FreeBSD en un sistema sin monitor o
	teclado</a></dt><dt>network</dt><dd><dl><dt>Ethernet, <a class="indexterm" href="#idp66928848">Before Installing over a Network</a></dt><dt>FTP, <a class="indexterm" href="#install-media">Elección del medio de instalación</a>, <a class="indexterm" href="#install-ftp">Creación de un sitio FTP local a partir de un disco de
        instalación de FreeBSD</a></dt><dt>NFS, <a class="indexterm" href="#idp66940240">Antes de instalar via NFS</a></dt><dt>parallel (PLIP), <a class="indexterm" href="#idp66928848">Before Installing over a Network</a></dt><dt>serial (SLIP or PPP), <a class="indexterm" href="#idp66928848">Before Installing over a Network</a></dt></dl></dd><dt>troubleshooting, <a class="indexterm" href="#install-trouble">Solución de problemas</a></dt></dl></dd><dt>Intel i810 graphic chipset, <a class="indexterm" href="#idp68677712">Configuración de chipsets gráficos Intel®
          i810</a></dt><dt>internacionalización (ver localización)</dt><dt>Internet connection sharing, <a class="indexterm" href="#network-natoverview">Overview</a></dt><dt>Internet Software Consortium (ISC), <a class="indexterm" href="#idp81524432">?Qué es DHCP?</a></dt><dt>IP masquerading, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a>, <a class="indexterm" href="#network-natoverview">Overview</a></dt><dt>IP subnet, <a class="indexterm" href="#idp80440016">Introducción</a></dt><dt>IPCP, <a class="indexterm" href="#userppp-dynamicIP">PPP y direcciones de IP Dinámicas (Variables)</a></dt><dt>IPsec, <a class="indexterm" href="#ipsec">VPN sobre IPsec</a></dt><dd><dl><dt>AH, <a class="indexterm" href="#idp74064848">Qué es IPsec</a></dt><dt>ESP, <a class="indexterm" href="#idp74064848">Qué es IPsec</a></dt><dt>políticas de seguridad, <a class="indexterm" href="#idp74219216">Paso 2: Asegurar el enlace</a></dt></dl></dd><dt>IPX/SPX, <a class="indexterm" href="#idp81021392">&#8220;bridges/routers&#8221; RDSI &#8220;Stand-alone&#8221;</a></dt><dt>IRQ, <a class="indexterm" href="#troubleshooting">Problemas habituales</a></dt><dt>ISA, <a class="indexterm" href="#sound-device">Configuración del sistema </a></dt><dt>ISDN, <a class="indexterm" href="#idp80451024">Cortafuegos de filtrado/conformación de tráfico
          </a></dt><dd><dl><dt>cards, <a class="indexterm" href="#network-isdn-cards">Tarjetas RDSI</a></dt><dt>stand-alone bridges/routers, <a class="indexterm" href="#idp81021392">&#8220;bridges/routers&#8221; RDSI &#8220;Stand-alone&#8221;</a></dt></dl></dd><dt>ISO 9660, <a class="indexterm" href="#idp75475024">Introducción</a></dt><dt>ISP, <a class="indexterm" href="#idp78142160">Aclaraciones</a>, <a class="indexterm" href="#userppp-staticIP">PPP y direcciones de IP estáticas (fijas)</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>jails, <a class="indexterm" href="#jails">Jaulas</a></dt><dt>jerarquía de directorios, <a class="indexterm" href="#dirstructure">Estructura de directorios</a></dt><dt>JMA Wired, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>Jolitz, Bill, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt>KDE, <a class="indexterm" href="#x11-wm-kde">KDE</a></dt><dd><dl><dt>display manager, <a class="indexterm" href="#x11-wm-kde-kdm">El gestor de pantalla de KDE</a></dt></dl></dd><dt>Kerberos5</dt><dd><dl><dt>Centro de distribución de llaves, <a class="indexterm" href="#idp73738960">Configuración de un KDC Heimdal</a></dt><dt>configurar clientes, <a class="indexterm" href="#idp73824080">Kerberos con un cliente
	  Heimdal</a></dt><dt>habilitación de servicios, <a class="indexterm" href="#idp73782736">Creación de un servidor
	  Kerberos con servicios
          Heimdal</a></dt><dt>historia, <a class="indexterm" href="#idp73724496">Historia</a></dt><dt>limitaciones y deficiencias, <a class="indexterm" href="#idp73936336">Mitigación de limitaciones encontradas en
	  Kerberos</a></dt><dt>recursos externos, <a class="indexterm" href="#idp73991632">Recursos y más información</a></dt><dt>solución de problemas, <a class="indexterm" href="#idp73880528">Kerberos Sugerencias, trucos y
	   solución de problemas</a></dt></dl></dd><dt>KerberosIV, <a class="indexterm" href="#securing-root-and-staff">Asegurar la cuenta root y las
        cuentas administrativas</a>, <a class="indexterm" href="#idp73250256">Otros aspectos del acceso con Kerberos y SSH</a></dt><dd><dl><dt>encendido inicial, <a class="indexterm" href="#idp73575248">Puesta en marcha del sistema</a></dt><dt>instalación, <a class="indexterm" href="#idp73499472">Instalación de KerberosIV</a></dt></dl></dd><dt>kermit, <a class="indexterm" href="#idp78540112">Uso de pppd como Cliente</a></dt><dt>kernel, <a class="indexterm" href="#boot-introduction">El problema que representa arrancar el sistema</a></dt><dd><dl><dt>compilación / instalación, <a class="indexterm" href="#kernelconfig-building">Compilación e instalación de un kernel personalizado</a></dt><dt>Compilar un kernel a medida, <a class="indexterm" href="#idp70106704">Sinopsis</a></dt><dt>configuración, <a class="indexterm" href="#idp78908368">Configuración del Kernel</a></dt><dt>configuration, <a class="indexterm" href="#sound-device">Configuración del sistema </a>, <a class="indexterm" href="#network-natdkernconfiguration">Configuración</a></dt><dt>configuration file, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>drivers / modules / subsystems, <a class="indexterm" href="#kernelconfig-modules">Controladores del kernel, subsistemas y módulos</a></dt><dt>interacción de arranque, <a class="indexterm" href="#boot-kernel">Interacción con el kernel durante el arranque</a></dt><dt>NOTES, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>opciones de arranque, <a class="indexterm" href="#boot-kernel-bootflags">Opciones de arranque del kernel</a></dt></dl></dd><dt>kernel options</dt><dd><dl><dt>cpu, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>ident, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>LINUX, <a class="indexterm" href="#linuxemu-lbc-install">Instalación</a></dt><dt>machine, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>MSDOSFS, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>NFS, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>NFS_ROOT, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>options BRIDGE, <a class="indexterm" href="#idp80460240">Cambios en la configuración del núcleo</a></dt><dt>SMP, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt></dl></dd><dt>kernel.old, <a class="indexterm" href="#boot-loader-examples">Ejemplos de uso del cargador</a></dt><dt>KLD (objeto cargable del kernel), <a class="indexterm" href="#linuxemu-lbc-install">Instalación</a></dt><dt>KOffice, <a class="indexterm" href="#idp69279056">KOffice</a></dt><dt>Konqueror, <a class="indexterm" href="#idp69238992">Konqueror</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>L2CAP, <a class="indexterm" href="#idp80337872">Protocolo de adaptación y de control de enlace a
        nivel lógico (L2CAP)</a></dt><dt>LCD screen, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a></dt><dt>LCP, <a class="indexterm" href="#userppp-mgetty">mgetty y AutoPPP</a></dt><dt>limitar a los usuarios, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dd><dl><dt>coredumpsize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>cputime, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>cuotas, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>filesize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>maxproc, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>memorylocked, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>memoryuse, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>openfiles, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>sbsize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>stacksize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt></dl></dd><dt>límite duro, <a class="indexterm" href="#idp76347984">Configuración de límites de cuota</a></dt><dt>límite suave, <a class="indexterm" href="#idp76347984">Configuración de límites de cuota</a></dt><dt>línea de órdenes, <a class="indexterm" href="#shells">Shells</a></dt><dt>Linux, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dd><dl><dt>binarios ELF, <a class="indexterm" href="#idp70983504">Instalar binarios ELF Linux</a></dt><dt>instalación de bibliotecas Linux, <a class="indexterm" href="#idp70947792">Instalación de bibliotecas de ejecución Linux</a></dt></dl></dd><dt>LISA, <a class="indexterm" href="#idp76084048">?Cuál es el mejor programa de respaldos?</a></dt><dt>locale, <a class="indexterm" href="#using-localization">Uso de la localización</a>, <a class="indexterm" href="#startup-file">Método de los ficheros de inicio de los
	    intérpretes de órdenes</a></dt><dt>locales, <a class="indexterm" href="#necessarylocales">Locales necesarios</a>, <a class="indexterm" href="#idp76884688">Métodos de configuración de las &#8220;
	  locales&#8221;</a></dt><dt>localización, <a class="indexterm" href="#idp76835536">?Qué es I18N/L10N?</a></dt><dd><dl><dt>Alemán, <a class="indexterm" href="#idp77125712">Localización al idioma alemán (para todos
        los idiomas ISO 8859-1)</a></dt><dt>Chino tradicional, <a class="indexterm" href="#idp77119824">Localización al chino tradicional para
        Taiwán</a></dt><dt>Coreano, <a class="indexterm" href="#idp77128912">Localización a los idiomas japonés y
        coreano</a></dt><dt>Japonés, <a class="indexterm" href="#idp77128912">Localización a los idiomas japonés y
        coreano</a></dt><dt>Ruso, <a class="indexterm" href="#ru-localize">Idioma ruso (codificación KOI8-R)</a></dt></dl></dd><dt>login name, <a class="indexterm" href="#idp78142160">Aclaraciones</a></dt><dt>loopback device, <a class="indexterm" href="#idp79898704">Ejemplo</a></dt><dt>ls, <a class="indexterm" href="#permissions">Permisos</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MAC, <a class="indexterm" href="#mac-synopsis">Sinopsis</a></dt><dt>MacOS, <a class="indexterm" href="#idp73339728">Generación una sola contraseña de un solo
        uso</a></dt><dt>MAKEDEV, <a class="indexterm" href="#serial-hw-config">Configuración de puerto serie</a></dt><dt>Mandatory Access Control (ver MAC)</dt><dt>mapa de pantalla, <a class="indexterm" href="#setting-console">Configuración de la consola</a></dt><dt>mapa de teclado, <a class="indexterm" href="#setting-console">Configuración de la consola</a></dt><dt>maxproc, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>MD5, <a class="indexterm" href="#crypt">DES, MD5 y Crypt</a></dt><dt>mecanismo de arranque (bootstrap), <a class="indexterm" href="#boot-synopsis">Sinopsis</a></dt><dt>medios de cinta, <a class="indexterm" href="#backups-tapebackups">Creación y uso de cintas de datos</a></dt><dd><dl><dt>AIT, <a class="indexterm" href="#idp75850576">AIT</a></dt><dt>cintas DDS (4mm), <a class="indexterm" href="#backups-tapebackups-4mm">4mm (DDS: Digital Data Storage)</a></dt><dt>cintas Exabyte (8mm), <a class="indexterm" href="#backups-tapebackups-8mm">8mm (Exabyte)</a></dt><dt>cintas QIC, <a class="indexterm" href="#backups-tapebackups-4mm">4mm (DDS: Digital Data Storage)</a></dt><dt>DLT, <a class="indexterm" href="#backups-tapebackups-dlt">DLT</a></dt><dt>QIC-150, <a class="indexterm" href="#backups-tapebackups-qic">QIC</a></dt></dl></dd><dt>memory protection, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>memorylocked, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>memoryuse, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>mencoder, <a class="indexterm" href="#video-mencoder">mencoder</a></dt><dt>Método de introducción X11
	  (XIM), <a class="indexterm" href="#idp77024720">Introducción de caracteres no ingleses</a></dt><dt>mgetty, <a class="indexterm" href="#userppp-mgetty">mgetty y AutoPPP</a></dt><dt>MiContraseña, <a class="indexterm" href="#userppp-PAPnCHAP">Autentificación por medio de PAP y CHAP</a></dt><dt>Microsoft Windows, <a class="indexterm" href="#install-drive-bios-numbering">Numeración de unidades desde el punto de vista de la BIOS</a></dt><dt>MIME, <a class="indexterm" href="#setting-locale">Configuración de las &#8220;locales&#8221;
        </a>, <a class="indexterm" href="#startup-file">Método de los ficheros de inicio de los
	    intérpretes de órdenes</a></dt><dt>MIT, <a class="indexterm" href="#idp73499472">Instalación de KerberosIV</a></dt><dt>modem, <a class="indexterm" href="#idp77563088">Modems y cables</a>, <a class="indexterm" href="#idp78540112">Uso de pppd como Cliente</a>, <a class="indexterm" href="#idp80999504">Adaptadores de terminal RDSI</a></dt><dt>módem, <a class="indexterm" href="#slips-prereqs">Prerequisitos</a></dt><dt>modo de arranque mono-usuario, <a class="indexterm" href="#boot-loader-examples">Ejemplos de uso del cargador</a></dt><dt>modo mono-usuario, <a class="indexterm" href="#boot-singleuser">Modo monousuario</a></dt><dt>modo multi-usuario, <a class="indexterm" href="#boot-multiuser">Modo multiusuario</a></dt><dt>mount, <a class="indexterm" href="#headless-install">Instalación de FreeBSD en un sistema sin monitor o
	teclado</a>, <a class="indexterm" href="#idp76101712">Después del desastre</a></dt><dt>mountd, <a class="indexterm" href="#idp80516560">Cómo funciona NFS</a></dt><dt>moused, <a class="indexterm" href="#setting-console">Configuración de la consola</a></dt><dt>Mozilla, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a>, <a class="indexterm" href="#idp69180112">Mozilla</a></dt><dt>MPlayer</dt><dd><dl><dt>making, <a class="indexterm" href="#video-mplayer-building">Compilación de MPlayer</a></dt><dt>use, <a class="indexterm" href="#video-mplayer-using">Uso de MPlayer</a></dt></dl></dd><dt>MS-DOS, <a class="indexterm" href="#idp73339728">Generación una sola contraseña de un solo
        uso</a></dt><dt>multi-user facilities, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>multicast</dt><dd><dl><dt>options MROUTING, <a class="indexterm" href="#idp80131024">Rutas multicast</a></dt></dl></dd><dt>MX record, <a class="indexterm" href="#mail-trouble">Depuración de Problemas</a>, <a class="indexterm" href="#mail-config">Configuración Básica</a>, <a class="indexterm" href="#idp81814864">Ficheros de zona</a></dt><dt>MySQL, <a class="indexterm" href="#l10n-compiling">Compilación de programas con soporte para I18N</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>nameserver, <a class="indexterm" href="#idp78801104">Cosas Que Tiene Que Hacer Solo Una Vez</a></dt><dt>natd, <a class="indexterm" href="#network-natoverview">Overview</a></dt><dt>Net/2, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>NetBIOS, <a class="indexterm" href="#idp78430928">Extensiones de MS</a></dt><dt>NetBSD, <a class="indexterm" href="#relnotes">En qué consiste el FreeBSD que distribuimos</a>, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>Netcraft, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>netgroups, <a class="indexterm" href="#network-netgroups">Uso de Netgroups</a></dt><dt>network address
            translation, <a class="indexterm" href="#idp80451024">Cortafuegos de filtrado/conformación de tráfico
          </a></dt><dt>newfs, <a class="indexterm" href="#idp76101712">Después del desastre</a></dt><dt>NFS, <a class="indexterm" href="#disks-virtual">Sistemas de ficheros en red, memoria y respaldados en fichero</a>, <a class="indexterm" href="#idp76396880">Cuotas en NFS</a>, <a class="indexterm" href="#network-nfs">NFS</a></dt><dd><dl><dt>configuration, <a class="indexterm" href="#network-configuring-nfs">Configuración de NFS</a></dt><dt>diskless operation, <a class="indexterm" href="#idp80859856">Configuración de servidores de
          TFTP y de NFS</a></dt><dt>export examples, <a class="indexterm" href="#network-configuring-nfs">Configuración de NFS</a></dt><dt>mounting, <a class="indexterm" href="#network-configuring-nfs">Configuración de NFS</a></dt><dt>server, <a class="indexterm" href="#idp80516560">Cómo funciona NFS</a></dt><dt>uses, <a class="indexterm" href="#idp80626768">Usos prácticos</a></dt></dl></dd><dt>nfsd, <a class="indexterm" href="#idp80516560">Cómo funciona NFS</a></dt><dt>NIS, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dd><dl><dt>client, <a class="indexterm" href="#idp81101008">Clases de máquinas</a></dt><dt>client configuration, <a class="indexterm" href="#idp81230544">Configuración de un cliente NIS</a></dt><dt>domainname, <a class="indexterm" href="#idp81142608">Elección del nombre de dominio NIS</a></dt><dt>domains, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>maps, <a class="indexterm" href="#idp81187664">Inicialización de los mapeos de NIS</a></dt><dt>master server, <a class="indexterm" href="#idp81101008">Clases de máquinas</a></dt><dt>password formats, <a class="indexterm" href="#idp81502672">Formatos de contraseñas</a></dt><dt>server configuration, <a class="indexterm" href="#idp81174096">Configuración de un servidor de NIS maestro</a></dt><dt>slave server, <a class="indexterm" href="#idp81101008">Clases de máquinas</a>, <a class="indexterm" href="#idp81217744">Configuración de un servidor NIS
            esclavo</a></dt></dl></dd><dt>NOTES, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>Novell, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>ntalk, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>NTP, <a class="indexterm" href="#network-ntp">NTP</a></dt><dd><dl><dt>choosing servers, <a class="indexterm" href="#idp82044112">Elección de los servidores de hora adecuados</a></dt><dt>configuration, <a class="indexterm" href="#idp82048208">Configuración de la máquina</a></dt><dt>ntp.conf, <a class="indexterm" href="#idp82068176">Configuración general</a></dt><dt>ntpd, <a class="indexterm" href="#idp82038992">Resumen</a></dt></dl></dd><dt>ntpdate, <a class="indexterm" href="#idp82050000">Configuración básica</a></dt><dt>null modem cable, <a class="indexterm" href="#headless-install">Instalación de FreeBSD en un sistema sin monitor o
	teclado</a></dt><dt>null-modem cable, <a class="indexterm" href="#term-cables-null">Cables null-modem</a>, <a class="indexterm" href="#serialconsole-howto">Configuración de la consola serie</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>OBEX, <a class="indexterm" href="#idp80402128">Perfil OBEX Object Push (OPUSH)</a></dt><dt>office suite</dt><dd><dl><dt>KOffice, <a class="indexterm" href="#idp69279056">KOffice</a></dt><dt>OpenOffice.org, <a class="indexterm" href="#idp69317840">OpenOffice.org</a></dt></dl></dd><dt>opciones de kernel</dt><dd><dl><dt>FAST_IPSEC, <a class="indexterm" href="#idp74064848">Qué es IPsec</a></dt><dt>IPSEC, <a class="indexterm" href="#idp74064848">Qué es IPsec</a>, <a class="indexterm" href="#idp74219216">Paso 2: Asegurar el enlace</a></dt><dt>IPSEC_DEBUG, <a class="indexterm" href="#idp74064848">Qué es IPsec</a></dt><dt>IPSEC_ESP, <a class="indexterm" href="#idp74064848">Qué es IPsec</a></dt></dl></dd><dt>OpenBSD, <a class="indexterm" href="#relnotes">En qué consiste el FreeBSD que distribuimos</a>, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>openfiles, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>OpenOffice.org, <a class="indexterm" href="#idp69317840">OpenOffice.org</a></dt><dt>OpenSSH, <a class="indexterm" href="#openssh">OpenSSH</a></dt><dd><dl><dt>cliente, <a class="indexterm" href="#idp74356304">Cliente SSH</a></dt><dt>configuración, <a class="indexterm" href="#idp74383568">Configuración</a></dt><dt>copia segura, <a class="indexterm" href="#idp74365648">Copia segura</a></dt><dt>habilitar, <a class="indexterm" href="#idp74346320">Habilitar sshd</a></dt><dt>túneles, <a class="indexterm" href="#security-ssh-tunneling">Túneles SSH</a></dt></dl></dd><dt>OpenSSL</dt><dd><dl><dt>generación de certificados, <a class="indexterm" href="#idp74014928">Generación de certificados</a></dt></dl></dd><dt>Opera, <a class="indexterm" href="#idp69230032">Opera</a></dt><dt>OS/2, <a class="indexterm" href="#idp75231696">Dedicado</a></dt><dt>OSPF, <a class="indexterm" href="#network-dedicated-router">Construcción de un &#8220;route&#8221;</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>packages, <a class="indexterm" href="#ports-synopsis">Sinopsis</a></dt><dd><dl><dt>deleting, <a class="indexterm" href="#idp68139216">Eliminar un package</a></dt><dt>installing, <a class="indexterm" href="#idp68071120">Instalar un package</a></dt></dl></dd><dt>páginas de manual, <a class="indexterm" href="#basics-man">Páginas de manual</a></dt><dt>Pair Networks, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>pairing, <a class="indexterm" href="#idp80358736">Enparejamiento de dispositivos</a></dt><dt>PAP, <a class="indexterm" href="#idp78142160">Aclaraciones</a>, <a class="indexterm" href="#userppp-staticIP">PPP y direcciones de IP estáticas (fijas)</a>, <a class="indexterm" href="#userppp-PAPnCHAP">Autentificación por medio de PAP y CHAP</a></dt><dt>Parallel Line IP, <a class="indexterm" href="#network-plip">Línea IP paralela (PLIP)</a></dt><dt>partición raíz, <a class="indexterm" href="#idp76101712">Después del desastre</a></dt><dt>particiones, <a class="indexterm" href="#disk-organization">Organización de disco</a>, <a class="indexterm" href="#disks-adding">Añadir discos</a></dt><dt>particiones BSD, <a class="indexterm" href="#idp75181520">Uso de sysinstall(8)</a></dt><dt>passwd, <a class="indexterm" href="#users-passwd">passwd</a></dt><dt>password, <a class="indexterm" href="#idp78142160">Aclaraciones</a></dt><dt>pax, <a class="indexterm" href="#idp76035024">pax</a></dt><dt>PCI, <a class="indexterm" href="#sound-device">Configuración del sistema </a></dt><dt>PDF</dt><dd><dl><dt>viewing, <a class="indexterm" href="#idp69366736">Acrobat Reader®</a>, <a class="indexterm" href="#idp69374160">gv</a>, <a class="indexterm" href="#idp69388368">Xpdf</a></dt></dl></dd><dt>peligrosamente dedicadas, <a class="indexterm" href="#disk-organization">Organización de disco</a></dt><dt>periodo de gracia, <a class="indexterm" href="#idp76382416">Revisión de los límites de cuota y
        uso de disco</a></dt><dt>permisos, <a class="indexterm" href="#permissions">Permisos</a></dt><dd><dl><dt>symbolic, <a class="indexterm" href="#idp67108176">Permisos simbólicos</a></dt></dl></dd><dt>permisos de fichero, <a class="indexterm" href="#permissions">Permisos</a></dt><dt>personalización del kernel, <a class="indexterm" href="#linuxemu-kernel-tuning">Personalización del kernel</a></dt><dt>Personalización del kernel, <a class="indexterm" href="#kerneltuning">Personalización del kernel</a></dt><dt>Physical Address Extensions
	    (PAE)</dt><dd><dl><dt>large memory, <a class="indexterm" href="#idp70641104">Configuraciones con grandes cantidades de memoria
	  (PAE)</a></dt></dl></dd><dt>pkg_add, <a class="indexterm" href="#idp68071120">Instalar un package</a></dt><dt>pkg_delete, <a class="indexterm" href="#idp68139216">Eliminar un package</a></dt><dt>PLIP, <a class="indexterm" href="#network-plip">Línea IP paralela (PLIP)</a></dt><dt>POP, <a class="indexterm" href="#mail-using">Utilización del correo electrónico</a>, <a class="indexterm" href="#pop-and-imap">Acceso a carpetas de correo remotas mediante
          POP e IMAP</a></dt><dt>Portaudit, <a class="indexterm" href="#security-portaudit">Monitorización de fallos de seguridad de aplicaciones</a></dt><dt>portmanager, <a class="indexterm" href="#portmanager">Actualización de ports con portmanager</a></dt><dt>portmap, <a class="indexterm" href="#idp80516560">Cómo funciona NFS</a>, <a class="indexterm" href="#idp81075536">Términos/procesos que debe usted conocer</a></dt><dt>portmaster, <a class="indexterm" href="#portmaster">Actualización de ports con portmaster</a></dt><dt>ports, <a class="indexterm" href="#ports-synopsis">Sinopsis</a></dt><dd><dl><dt>disk-space, <a class="indexterm" href="#ports-disk-space">Los ports y el espacio en disco</a></dt><dt>installing, <a class="indexterm" href="#ports-skeleton">Instalación de ports</a></dt><dt>removing, <a class="indexterm" href="#ports-removing">Cómo desinstalar ports</a></dt><dt>upgrading, <a class="indexterm" href="#ports-upgrading">Actualización de ports</a></dt></dl></dd><dt>portupgrade, <a class="indexterm" href="#portupgrade">Actualización de ports con portupgrade</a></dt><dt>POSIX, <a class="indexterm" href="#idp76035024">pax</a>, <a class="indexterm" href="#setting-locale">Configuración de las &#8220;locales&#8221;
        </a></dt><dt>PostScript</dt><dd><dl><dt>viewing, <a class="indexterm" href="#idp69374160">gv</a></dt></dl></dd><dt>PPP, <a class="indexterm" href="#idp78103248">Sinopsis</a>, <a class="indexterm" href="#idp78142160">Aclaraciones</a>, <a class="indexterm" href="#mail-trouble">Depuración de Problemas</a>, <a class="indexterm" href="#idp80999504">Adaptadores de terminal RDSI</a></dt><dd><dl><dt>cliente, <a class="indexterm" href="#idp78540112">Uso de pppd como Cliente</a></dt><dt> con dirección IP fija, <a class="indexterm" href="#userppp-staticIP">PPP y direcciones de IP estáticas (fijas)</a></dt><dt>con direcciones IP dinámica, <a class="indexterm" href="#userppp-dynamicIP">PPP y direcciones de IP Dinámicas (Variables)</a></dt><dt>configuración, <a class="indexterm" href="#idp78221776">Configuración Automática de
          PPP</a>, <a class="indexterm" href="#userppp-final">Configuración Final del Sistema</a></dt><dt>Extensiones Microsoft, <a class="indexterm" href="#idp78430928">Extensiones de MS</a></dt><dt>kernel PPP, <a class="indexterm" href="#idp78527184">Configurando Kernel PPP</a></dt><dt>recibiendo
	  llamdas externas, <a class="indexterm" href="#idp78356688">Recibiendo Llamadas Externas</a></dt><dt>servidor, <a class="indexterm" href="#idp78527184">Configurando Kernel PPP</a></dt><dt>sobre ATM, <a class="indexterm" href="#pppoa">Uso de PPP sobre ATM (PPPoA)</a></dt><dt>sobre Ethernet, <a class="indexterm" href="#pppoe">Uso de PPP sobre Ethernet (PPPoE)</a></dt><dt>user PPP, <a class="indexterm" href="#userppp-staticIP">PPP y direcciones de IP estáticas (fijas)</a></dt></dl></dd><dt>PPP shells, <a class="indexterm" href="#idp78376656">Shells  de PPP para Usuarios de IP Dinámica</a>, <a class="indexterm" href="#idp78389328">Shells de PPP para Usuarios de IP Estática</a></dt><dt>PPPoA (ver PPP, sobre ATM)</dt><dt>PPPoE (ver PPP, sobre Ethernet)</dt><dt>preemptive multitasking, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>pw, <a class="indexterm" href="#users-pw">pw</a>, <a class="indexterm" href="#adm-setup">Configuración a nivel de administrador
	      </a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>racoon, <a class="indexterm" href="#idp74219216">Paso 2: Asegurar el enlace</a></dt><dt>RAID</dt><dd><dl><dt>CCD, <a class="indexterm" href="#ccd">Configuración de controlador de disco
	  concatenado (CCD)</a></dt><dt>hardware, <a class="indexterm" href="#raid-hard">RAID por Hardware</a></dt><dt>software, <a class="indexterm" href="#ccd">Configuración de controlador de disco
	  concatenado (CCD)</a>, <a class="indexterm" href="#vinum">El administrador de volúmenes Vinum</a></dt><dt>Software, <a class="indexterm" href="#vinum-intro">Los Discos son Demasiado Pequeños</a></dt><dt>Vinum, <a class="indexterm" href="#vinum">El administrador de volúmenes Vinum</a></dt></dl></dd><dt>RAID-1, <a class="indexterm" href="#vinum-data-integrity">Integridad de Datos</a></dt><dt>rc files</dt><dd><dl><dt>rc.serial, <a class="indexterm" href="#serial-hw-config">Configuración de puerto serie</a>, <a class="indexterm" href="#idp77679440">/etc/rc.serial</a></dt></dl></dd><dt>RDSI, <a class="indexterm" href="#network-isdn">RDSI</a></dt><dt>Red privada virtual (ver VPN)</dt><dt>Redes por TCP/IP, <a class="indexterm" href="#idp78928592">Configuració de slip.hosts</a></dt><dt>redes TCP/IP, <a class="indexterm" href="#slips-prereqs">Prerequisitos</a></dt><dt>Registro Maestro de Arranque (RMA), <a class="indexterm" href="#boot-boot0">RMA, /boot/boot0</a></dt><dt>registro MX, <a class="indexterm" href="#mail-dns">Correo electrónico y DNS</a></dt><dt>Réplica de discos, <a class="indexterm" href="#vinum-data-integrity">Integridad de Datos</a></dt><dt>resolver, <a class="indexterm" href="#idp78184272">Configuración de la Resolución de Nombres</a>, <a class="indexterm" href="#idp81707216">Terminología</a></dt><dt>respaldo en discos flexibles, <a class="indexterm" href="#floppies-using">?Puedo utilizar disquetes para respaldar mis datos?</a></dt><dt>restore, <a class="indexterm" href="#idp75945552">Dump y Restore</a></dt><dt>reverse DNS, <a class="indexterm" href="#idp81707216">Terminología</a></dt><dt>RFCOMM, <a class="indexterm" href="#idp80355408">Protocolo RFCOMM </a></dt><dt>RIP, <a class="indexterm" href="#idp78991184">Ejecutando gated</a>, <a class="indexterm" href="#network-dedicated-router">Construcción de un &#8220;route&#8221;</a></dt><dt>rlogind, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>rmuser, <a class="indexterm" href="#users-rmuser">rmuser</a></dt><dt>root file system</dt><dd><dl><dt>diskless operation, <a class="indexterm" href="#idp80909392">Preparación del sistema de ficheros
          raíz</a></dt></dl></dd><dt>root zone, <a class="indexterm" href="#idp81707216">Terminología</a></dt><dt>routed, <a class="indexterm" href="#userppp-final">Configuración Final del Sistema</a></dt><dt>router, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a>, <a class="indexterm" href="#network-dedicated-router">Construcción de un &#8220;route&#8221;</a>, <a class="indexterm" href="#idp80451024">Cortafuegos de filtrado/conformación de tráfico
          </a></dt><dt>routing, <a class="indexterm" href="#network-routing">Pasarelas y &#8220;routers&#8221;</a></dt><dt>routing propagation, <a class="indexterm" href="#idp80111312">Propagación de rutas</a></dt><dt>RPM, <a class="indexterm" href="#installingnecessaryrpms">Instalación de los RPM necesarios</a></dt><dt>RS-232C cables, <a class="indexterm" href="#serial-terminology">Terminología</a>, <a class="indexterm" href="#term-cables-std">Cables estándard RS-232C</a></dt><dt>rshd, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>sbsize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>scp, <a class="indexterm" href="#idp74365648">Copia segura</a></dt><dt>scripts de inicio, <a class="indexterm" href="#consoles-login">La entrada a FreeBSD</a></dt><dt>SCSI, <a class="indexterm" href="#install-drive-bios-numbering">Numeración de unidades desde el punto de vista de la BIOS</a></dt><dt>SDL, <a class="indexterm" href="#video-interface">Cómo determinar las características de video</a></dt><dt>SDP, <a class="indexterm" href="#idp80370896">Protocolo de descubrimiento de servicios (SDP)</a></dt><dt>seguridad, <a class="indexterm" href="#security">Seguridad</a></dt><dd><dl><dt>asegurar FreeBSD, <a class="indexterm" href="#securing-freebsd">Asegurar FreeBSD</a></dt><dt>Ataques DoS (ver Denegación de servicios (DoS))</dt><dt>compromiso de cuentas, <a class="indexterm" href="#security-intro">Introducción</a></dt><dt>Contraseñas de un solo uso, <a class="indexterm" href="#one-time-passwords">Contraseñas de un solo uso</a></dt><dt>cortafuegos, <a class="indexterm" href="#firewalls">Cortafuegos</a></dt><dt>crypt, <a class="indexterm" href="#crypt">DES, MD5 y Crypt</a></dt><dt>OpenSSH, <a class="indexterm" href="#openssh">OpenSSH</a></dt><dt>OpenSSL, <a class="indexterm" href="#openssl">OpenSSL</a></dt><dt>puertas traseras, <a class="indexterm" href="#security-intro">Introducción</a></dt></dl></dd><dt>sendmail, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a>, <a class="indexterm" href="#userppp-final">Configuración Final del Sistema</a>, <a class="indexterm" href="#sendmail">Configuración de sendmail</a></dt><dt>serial communications, <a class="indexterm" href="#serial-synopsis">Sinopsis</a></dt><dt>serial console, <a class="indexterm" href="#headless-install">Instalación de FreeBSD en un sistema sin monitor o
	teclado</a>, <a class="indexterm" href="#serialconsole-setup">Configurando la consola serie</a></dt><dt>servidor de correo, <a class="indexterm" href="#mail-host">El Servidor de Correo (Mail Host)</a></dt><dt>Servidor de tipos de letra True Type de
	  X11, <a class="indexterm" href="#idp77020496">Visualización de los tipos de letra</a></dt><dt>Servidor DNS, <a class="indexterm" href="#idp78142160">Aclaraciones</a></dt><dt>setkey, <a class="indexterm" href="#idp74219216">Paso 2: Asegurar el enlace</a></dt><dt>shells, <a class="indexterm" href="#shells">Shells</a></dt><dt>Shells Bourne, <a class="indexterm" href="#shells">Shells</a></dt><dt>Sistema de cola LPD, <a class="indexterm" href="#idp70709072">Sinopsis</a></dt><dt>sistema de ficheros</dt><dd><dl><dt>ISO 9660, <a class="indexterm" href="#idp75475024">Introducción</a></dt></dl></dd><dt>sistema de ficheros raíz, <a class="indexterm" href="#mount-unmount">Montaje y desmontaje de sistemas de ficheros</a></dt><dt>sistemas de ficheros</dt><dd><dl><dt>desmontar, <a class="indexterm" href="#disks-umount">La orden umount</a></dt><dt>HFS, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>ISO 9660, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>Joliet, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>montaje, <a class="indexterm" href="#disks-mount">La orden mount</a></dt><dt>montaje con fstab, <a class="indexterm" href="#disks-fstab">El fichero fstab</a></dt><dt>snapshots, <a class="indexterm" href="#snapshots">Instantáneas (&#8220;snapshots&#8221;) de sistemas
      de ficheros</a></dt></dl></dd><dt>slices, <a class="indexterm" href="#disk-organization">Organización de disco</a>, <a class="indexterm" href="#disks-adding">Añadir discos</a></dt><dt>SLIP, <a class="indexterm" href="#idp78103248">Sinopsis</a>, <a class="indexterm" href="#slip">Uso de SLIP</a>, <a class="indexterm" href="#idp78908368">Configuración del Kernel</a>, <a class="indexterm" href="#idp78928592">Configuració de slip.hosts</a></dt><dd><dl><dt>cliente, <a class="indexterm" href="#slipc">Configurando un cliente SLIP</a></dt><dt>conectando con, <a class="indexterm" href="#idp78821584">Haciendo una Conexión con SLIP</a></dt><dt>enrutamiento, <a class="indexterm" href="#idp78978256">Consideraciones sobre el Enrutamiento</a></dt><dt>servidor, <a class="indexterm" href="#slips">Estableciendo un Servidor SLIP</a></dt></dl></dd><dt>SMTP, <a class="indexterm" href="#userppp-final">Configuración Final del Sistema</a>, <a class="indexterm" href="#mail-config">Configuración Básica</a></dt><dt>software de respaldo</dt><dd><dl><dt>Amanda, <a class="indexterm" href="#backups-programs-amanda">Amanda</a></dt><dt>cpio, <a class="indexterm" href="#idp75998800">cpio</a></dt><dt>pax, <a class="indexterm" href="#idp76035024">pax</a></dt><dt>tar, <a class="indexterm" href="#idp75973200">tar</a></dt></dl></dd><dt>Solaris, <a class="indexterm" href="#idp72296528">?Cómo funciona?</a>, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>Sony Japan, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>Sophos Anti-Virus, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>sound cards, <a class="indexterm" href="#sound-device">Configuración del sistema </a></dt><dt>source code, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>spreadsheet</dt><dd><dl><dt>Abacus, <a class="indexterm" href="#idp69461712">Abacus</a></dt><dt>Gnumeric, <a class="indexterm" href="#idp69447760">Gnumeric</a></dt></dl></dd><dt>SRM, <a class="indexterm" href="#idp62975312">FreeBSD/alpha</a></dt><dt>SSH</dt><dd><dl><dt>sshd, <a class="indexterm" href="#ssh-login">Activar el acceso al sistema mediante SSH</a></dt></dl></dd><dt>ssh, <a class="indexterm" href="#idp73250256">Otros aspectos del acceso con Kerberos y SSH</a></dt><dt>sshd, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>stacksize, <a class="indexterm" href="#users-limiting">Limitar a los usuarios</a></dt><dt>Striping, <a class="indexterm" href="#GEOM-striping">RAID0 - Distribución por bandas</a></dt><dt>striping de discos, <a class="indexterm" href="#vinum-access-bottlenecks">Cuellos de Botella en el Acceso</a></dt><dt>su, <a class="indexterm" href="#securing-root-and-staff">Asegurar la cuenta root y las
        cuentas administrativas</a>, <a class="indexterm" href="#idp75181520">Uso de sysinstall(8)</a></dt><dt>subnet, <a class="indexterm" href="#network-routing">Pasarelas y &#8220;routers&#8221;</a>, <a class="indexterm" href="#idp79898704">Ejemplo</a></dt><dt>Subversion (ver SVN)</dt><dt>SunOS, <a class="indexterm" href="#idp81142608">Elección del nombre de dominio NIS</a></dt><dt>Supervalu, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>SVN</dt><dd><dl><dt>repository, <a class="indexterm" href="#development">El modelo de desarrollo de FreeBSD</a></dt></dl></dd><dt>Symmetric Multi-Processing (SMP), <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>sysctl, <a class="indexterm" href="#idp73151056">Asegurar el Kernel, dispositivos en bruto y el sistema
          sistema de ficheros</a></dt><dt>sysinstall, <a class="indexterm" href="#setting-console">Configuración de la consola</a>, <a class="indexterm" href="#idp81536592">Integración dentro de los sistemas FreeBSD</a></dt><dd><dl><dt>añadir discos, <a class="indexterm" href="#idp75181520">Uso de sysinstall(8)</a></dt></dl></dd><dt>sysutils/cdrtools, <a class="indexterm" href="#idp75475024">Introducción</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>tar, <a class="indexterm" href="#floppies-compress">?Puedo comprimir mis respaldos?</a>, <a class="indexterm" href="#idp75973200">tar</a></dt><dt>TCP Wrappers, <a class="indexterm" href="#tcpwrappers">TCP Wrappers</a></dt><dt>TCP/IP networking, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>tcpwrapper, <a class="indexterm" href="#idp81271888">Seguridad en NIS</a></dt><dt>TELEHOUSE America, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>telnetd, <a class="indexterm" href="#idp73104720">Asegurar servidores que se ejecutan como
          root
          y binarios SUID/SGID</a></dt><dt>terminales, <a class="indexterm" href="#consoles">Consolas virtuales y terminales</a></dt><dt>terminals, <a class="indexterm" href="#term">Terminales</a></dt><dt>TeX, <a class="indexterm" href="#printing-intro-why">?Por qué utilizar una cola de impresión?</a></dt><dt>TFTP</dt><dd><dl><dt>diskless operation, <a class="indexterm" href="#idp80859856">Configuración de servidores de
          TFTP y de NFS</a></dt></dl></dd><dt>The GIMP, <a class="indexterm" href="#idp69302224">The GIMP</a></dt><dt>timeout, <a class="indexterm" href="#userppp-staticIP">PPP y direcciones de IP estáticas (fijas)</a></dt><dt>Tipos TrueType, <a class="indexterm" href="#truetype">Tipos TrueType®</a></dt><dt>trabajos de impresión, <a class="indexterm" href="#printing-intro-spooler">Introducción</a></dt><dt>traceroute, <a class="indexterm" href="#idp80120656">Solución de problemas</a></dt><dt>transporte</dt><dd><dl><dt>exim, <a class="indexterm" href="#mail-mta">Agente de Transporte de Correo</a></dt><dt>postfix, <a class="indexterm" href="#mail-mta">Agente de Transporte de Correo</a></dt><dt>qmail, <a class="indexterm" href="#mail-mta">Agente de Transporte de Correo</a></dt><dt>sendmail, <a class="indexterm" href="#mail-mta">Agente de Transporte de Correo</a></dt></dl></dd><dt>Tru64 UNIX, <a class="indexterm" href="#idp81187664">Inicialización de los mapeos de NIS</a></dt><dt>ttyd, <a class="indexterm" href="#serial-hw-config">Configuración de puerto serie</a></dt><dt>TV cards, <a class="indexterm" href="#tvcard">Configuración de tarjetas de TV</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>U.C. Berkeley, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a>, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a>, <a class="indexterm" href="#relnotes">En qué consiste el FreeBSD que distribuimos</a></dt><dt>UDP, <a class="indexterm" href="#idp81532240">Cómo funciona</a></dt><dt>Unicode, <a class="indexterm" href="#idp77028816">El núcleo y los sistemas de ficheros</a></dt><dt>UNIX, <a class="indexterm" href="#permissions">Permisos</a></dt><dt>Unix, <a class="indexterm" href="#idp78142160">Aclaraciones</a></dt><dt>USB</dt><dd><dl><dt>discos, <a class="indexterm" href="#usb-disks">Dispositivos de almacenamiento USB</a></dt></dl></dd><dt>USENET, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>users</dt><dd><dl><dt>large sites running FreeBSD, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt></dl></dd><dt>Uso de fetchmail, <a class="indexterm" href="#mail-fetchmail">Manejo de fetchmail</a></dt><dt>Uso de procmail, <a class="indexterm" href="#mail-procmail">Uso de procmail</a></dt><dt>UUCP, <a class="indexterm" href="#mail-trouble">Depuración de Problemas</a></dt></dl></div><div class="indexdiv"><h3>V</h3><dl><dt>variables de entorno, <a class="indexterm" href="#shells">Shells</a></dt><dt>vertical scan rate, <a class="indexterm" href="#idp68610896">Antes de empezar</a></dt><dt>vi, <a class="indexterm" href="#editors">Editores de texto</a></dt><dt>video packages, <a class="indexterm" href="#video-ports">Ports y packages relacionados con el vídeo</a></dt><dt>video ports, <a class="indexterm" href="#video-ports">Ports y packages relacionados con el vídeo</a></dt><dt>Vinum, <a class="indexterm" href="#vinum-intro">Los Discos son Demasiado Pequeños</a></dt><dd><dl><dt>concatenación, <a class="indexterm" href="#vinum-access-bottlenecks">Cuellos de Botella en el Acceso</a></dt><dt>réplicas, <a class="indexterm" href="#vinum-data-integrity">Integridad de Datos</a></dt><dt>striping, <a class="indexterm" href="#vinum-access-bottlenecks">Cuellos de Botella en el Acceso</a></dt></dl></dd><dt>vipw, <a class="indexterm" href="#adm-setup">Configuración a nivel de administrador
	      </a></dt><dt>virtual memory, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>VPN, <a class="indexterm" href="#idp74064848">Qué es IPsec</a></dt><dd><dl><dt>creación, <a class="indexterm" href="#idp74102992">El escenario: dos redes, conectadas por Internet, que
        queremos que se comporten como una sola</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>Walnut Creek CDROM, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>Weathernews, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>web browsers</dt><dd><dl><dt>Mozilla (ver Mozilla)</dt></dl></dd><dt>web servers, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>WEP, <a class="indexterm" href="#idp80249808">WEP</a></dt><dt>wheel, <a class="indexterm" href="#securing-root-and-staff">Asegurar la cuenta root y las
        cuentas administrativas</a></dt><dt>widescreen flatpanel configuration, <a class="indexterm" href="#idp68692176">Añadir una pantalla panorámica a nuestro sistema</a></dt><dt>Williams, Nate, <a class="indexterm" href="#intro-history">Breve historia de FreeBSD</a></dt><dt>Windows, <a class="indexterm" href="#idp73339728">Generación una sola contraseña de un solo
        uso</a></dt><dt>Windows NT, <a class="indexterm" href="#idp81059664">?Qué es esto?</a></dt><dt>wireless networking, <a class="indexterm" href="#network-wireless">Redes sin cables (&#8220;wireless&#8221;)</a></dt><dd><dl><dt>encryption, <a class="indexterm" href="#idp80246480">Cifrado</a></dt><dt>Punto de acceso, <a class="indexterm" href="#idp80154320">Construcción de un punto de acceso basado en
          FreeBSD</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>X</h3><dl><dt>X Display Manager, <a class="indexterm" href="#idp68809808">Descripción</a></dt><dt>X Window System, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dd><dl><dt>(ver también XFree86)</dt><dt>Accelerated-X, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt><dt>XFree86, <a class="indexterm" href="#os-overview">?Qué puede hacer FreeBSD?</a></dt></dl></dd><dt>X11, <a class="indexterm" href="#x-config">Configuración de X11</a></dt><dt>X11 tuning, <a class="indexterm" href="#idp68616400">Configurar X11</a></dt><dt>XML, <a class="indexterm" href="#antialias">Tipos Anti-Aliasing</a></dt><dt>Xorg, <a class="indexterm" href="#x-config">Configuración de X11</a></dt><dt>xorg.conf, <a class="indexterm" href="#idp68616400">Configurar X11</a></dt><dt>Xpdf, <a class="indexterm" href="#idp69388368">Xpdf</a></dt><dt>XVideo, <a class="indexterm" href="#video-interface">Cómo determinar las características de video</a></dt></dl></div><div class="indexdiv"><h3>Y</h3><dl><dt>Yahoo!, <a class="indexterm" href="#idp62521808">?Quién usa FreeBSD?</a></dt><dt>yellow pages (ver NIS)</dt></dl></div><div class="indexdiv"><h3>Z</h3><dl><dt>zip drive, <a class="indexterm" href="#kernelconfig-config">El fichero de configuración</a></dt><dt>zones</dt><dd><dl><dt>examples, <a class="indexterm" href="#idp81707216">Terminología</a></dt></dl></dd></dl></div></div></div></div><div class="colophon"><h1 class="title"><a id="colophon"></a>Colofón</h1><p>Este libro es el resultado del trabajo de cientos de colaboradores
    del <span class="quote">&#8220;<span class="quote">Proyecto de Documentación de FreeBSD</span>&#8221;</span>.  El texto
    esta escrito en SGML de acuerdo al DTD DocBook y es formateado
    automáticamente en diferentes formatos de presentación
    usando <span class="application">Jade</span>, una herramienta DSSSL de
    software libre.  Se han usado las hojas de estilo DSSSL de Norm Walsh
    con personalización de niveles para las instrucciones de
    presentación de Jade.  La versión impresa de este
    documento no hubiese sido posible sin los programas
    <span class="application">TeX</span> de Donald Knuth,
    <span class="application">LaTeX</span> de Leslie Lamport y
    <span class="application">JadeTeX</span> de Sebastian Rahtz.</p></div></div></body></html>