<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>28.6. Geavanceerde onderwerpen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="mail.html" title="Hoofdstuk 28. Elektronische mail" /><link rel="prev" href="mail-trouble.html" title="28.5. Problemen oplossen" /><link rel="next" href="SMTP-UUCP.html" title="28.7. SMTP met UUCP" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.6. Geavanceerde onderwerpen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mail-trouble.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 28. Elektronische mail</th><td width="20%" align="right"> <a accesskey="n" href="SMTP-UUCP.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-advanced"></a>28.6. Geavanceerde onderwerpen</h2></div></div></div><p>De volgende sectie behandelt meer ervaren onderwerpen zoals
      mailinstellingen en het instellen van mail voor het gehele domein.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-config"></a>28.6.1. Basisinstellingen</h3></div></div></div><a id="idp85798864" class="indexterm"></a><p>Het verzenden van email naar externe hosts zou onmiddellijk
	moeten werken, zolang <code class="filename">/etc/resolv.conf</code> is
	aangemaakt of zolang er een nameserver wordt gedraaid.  Indien
	het gewenst is dat mail voor de host aan de MTA (bijvoorbeeld
	<span class="application">sendmail</span>) geleverd dient te worden op
	de FreeBSD-host, zijn er twee methoden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Draai een eigen nameserver op een eigen domein,
	    bijvoorbeeld <code class="systemitem">FreeBSD.org</code></p></li><li class="listitem"><p>Zorg ervoor dat mail direct aan de host geleverd wordt.
	    Dit wordt gedaan door mail direct aan de huidige DNS-naam
	    voor de machine, bijvoorbeeld <code class="systemitem">
	      example.FreeBSD.org</code>, te leveren.</p></li></ul></div><a id="idp85808208" class="indexterm"></a><p>Onafhankelijk van de hierboven gekozen methode, dient de
	host, om er direct mail aan geleverd te krijgen, een permanent
	statisch IP-adres te hebben (niet een dynamisch adres, zoals dat
	bij de meeste PPP-inbelverbindingen het geval is).  Indien er
	een firewall actief is, dient het SMTP-verkeer naar de host door
	te geven.  Indien het gewenst is dat de host direct mail
	ontvangt, dient één van de twee onderstaande
	dingen geregeld te zijn:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Zorg ervoor dat de (laagstgenummerde) MX-regel<a id="idp85809872" class="indexterm"></a> in het
	    DNS naar het IP-adres van de host wijst.</p></li><li class="listitem"><p>Zorg ervoor dat er geen MX-regel in het DNS is voor de
	    host.</p></li></ul></div><p>Met elk van de bovenstaanden kan mail direct op de host
	ontvangen worden.</p><p>Probeer dit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hostname</code></strong>
example.FreeBSD.org
<code class="prompt">#</code> <strong class="userinput"><code>host example.FreeBSD.org</code></strong>
example.FreeBSD.org has address 204.216.27.XX</pre><p>Indien dit verschijnt, zal mail die direct naar
	<code class="email">&lt;yourlogin@example.FreeBSD.org&gt;</code> zonder
	problemen moeten werken (aangenomen dat
	<span class="application">sendmail</span> correct werkt op
	<code class="systemitem">example.FreeBSD.org</code>).</p><p>Indien in plaats daarvan zoiets als dit verschijnt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>host example.FreeBSD.org</code></strong>
example.FreeBSD.org has address 204.216.27.XX
example.FreeBSD.org mail is handled (pri=10) by hub.FreeBSD.org</pre><p>zal alle mail die naar de host (<code class="systemitem">
	  example.FreeBSD.org</code>) verzameld worden op <code class="systemitem">hub
	  </code> onder dezelfde gebruikersnaam in plaats van direct
	naar de host verstuurd te worden.</p><p>Bovenstaande informatie wordt door de DNS-server afgehandeld.  De
	DNS-regel die informatie over het routen van mail bevat is de
	<span class="emphasis"><em>M</em></span>ail e<span class="emphasis"><em>X</em></span>change regel.  Indien
	er geen MX-regel is, zal mail direct aan de host worden afgeleverd door
	middel van het IP-adres.</p><p>De MX-regel voor <code class="systemitem">freefall.FreeBSD.org
	  </code> zag er eens als volgt uit:</p><pre class="programlisting">freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre><p>Te zien is dat <code class="systemitem">freefall</code> vele MX-regels had.
	Het laagste MX-getal hoort bij de host die de mail direct
	ontvangt indien beschikbaar; indien het om een of andere reden
	niet beschikbaar is, accepteren de anderen (soms <span class="quote">&#8220;<span class="quote">
	  reserve-MXs</span>&#8221;</span> genoemd) tijdelijk berichten en geven ze
	die door wanneer een lager-genummerde host beschikbaar is, om
	uiteindelijk aan de laagstgenummerde host af te leveren.</p><p>Alternatieve MX-sites zouden andere Internetverbindingen dan
	die van de host moeten hebben om het nuttigst te zijn.  De
	internetprovider of een andere vriendelijke site zouden geen
	problemen moeten hebben met het leveren van deze dienst.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-domain"></a>28.6.2. Mail voor het domein</h3></div></div></div><p>Om een <span class="quote">&#8220;<span class="quote">mailhost</span>&#8221;</span> (ook bekend als een
	mailserver) te installeren, is het nodig om mail die verzonden
	wordt naar de verschillende werkstations ernaar toe te leiden.

	In principe dient alle mail voor elke hostnaam in het domein (in
	dit geval <code class="systemitem">*.FreeBSD.org</code>) geclaimd
	te worden en naar de mailserver omgeleid te worden zodat
	gebruikers hun mail op de hoofdmailserver kunnen ontvangen.</p><a id="idp85829584" class="indexterm"></a><p>Het gemakkelijkste is het indien er een gebruikersaccount
	met dezelfde <span class="emphasis"><em>gebruikersnaam</em></span> op beide
	machines bestaat.  Hiervoor dient <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> gebruikt te
	worden.</p><p>De mailhost die het meest gebruikt zal worden is de
	toegewezen mailuitwisselaar voor elk werkstation in het netwerk.
	Dit wordt in de DNS-instellingen als volgt gedaan:</p><pre class="programlisting">example.FreeBSD.org	A	204.216.27.XX	; werkstation
		MX	10	hub.FreeBSD.org	; mailhost</pre><p>Dit zal mail voor het werkstation naar de mailhost leiden
	onafhankelijk van waar de A-regel naar toe wijst.  De mail wordt
	naar de MX-host verzonden.</p><p>Om dit te doen is het nodig om een eigen DNS-server te
	draaien.  Neem, indien dit niet het geval is of het niet
	mogelijk is om een eigen DNS-server te draaien, contact op met
	degene die de DNS levert.</p><p>De volgende informatie is nuttig indien email virtueel gehost
	wordt.  In dit voorbeeld wordt aangenomen dat er een klant is
	met een eigen domein, in dit geval <code class="systemitem">
	  customer1.org</code>, en dat alle mail voor <code class="systemitem">customer1.org</code> naar de mailhost
	<code class="systemitem">mail.myhost.com</code> verzonden dient te
	worden.  De regel in het DNS dient er als volgt uit te zien:</p><pre class="programlisting">customer1.org		MX	10	mail.myhost.com</pre><p>Het is <span class="emphasis"><em>niet</em></span> nodig om een A-regel voor
	<code class="systemitem">customer1.org</code> te hebben als
	er voor dat domein alleen email afgehandeld dient te worden.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Let erop dat <code class="systemitem">customer1.org</code>
	  pingen niet werkt tenzij er een A-regel voor bestaat.</p></div><p>Als laatste dient <span class="application">sendmail</span> op de
	mailhost te weten voor welke domeinen en/of hostnamen het mail
	dient te accepteren.  Er bestaan enkele verschillende manieren
	om dit te doen.  Elk van de volgende manieren zal werken:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Voeg de hosts toe aan het bestand <code class="filename">
	      /etc/mail/local-host-names</code> indien <code class="literal">
	      FEATURE(use_cw_literal)</code>.  Indien er een versie
	    van <span class="application">sendmail</span> wordt gebruikt die
	    ouder is dan 8.10, is het te gebruiken bestand <code class="filename">
	      /etc/sendmail.cw</code>.</p></li><li class="listitem"><p>Voeg een regel met <code class="literal">Cwyour.host.com</code>
	    toe aan <code class="filename">/etc/sendmail.cf</code> of aan
	    <code class="filename">/etc/mail/sendmail.cf</code> indien versie
	    8.10 of nieuwer van <span class="application">sendmail</span>
	    wordt gebruikt.</p></li></ul></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mail-trouble.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="SMTP-UUCP.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">28.5. Problemen oplossen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 28.7. SMTP met UUCP</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>