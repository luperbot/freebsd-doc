<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>17.17. Problemen oplossen met het MAC-raamwerk</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="mac.html" title="Hoofdstuk 17. Verplichte Toegangscontrole (MAC)" /><link rel="prev" href="mac-userlocked.html" title="17.16. Gebruikers afsluiten" /><link rel="next" href="audit.html" title="Hoofdstuk 18. Security Event Auditing" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">17.17. Problemen oplossen met het MAC-raamwerk</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mac-userlocked.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 17. Verplichte Toegangscontrole (MAC)</th><td width="20%" align="right"> <a accesskey="n" href="audit.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-troubleshoot"></a>17.17. Problemen oplossen met het MAC-raamwerk</h2></div></div></div><a id="idp78986448" class="indexterm"></a><p>Tijdens de ontwikkeling hebben een aantal gebruikers problemen
      aangegeven met normale instellingen.  Hieronder worden een aantal
      van die problemen beschreven:</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78987344"></a>17.17.1. De optie <code class="option">multilabel</code> kan niet ingeschakeld
	worden op <code class="filename">/</code></h3></div></div></div><p>De vlag <code class="option">multilabel</code> blijft niet ingeschakeld
	op de rootpartitie (<code class="filename">/</code>)!</p><p>Het lijkt er inderdaad op dat een paar procent van de
	gebruikers dit probleem heeft.  Nadere analyse van het probleem
	doet vermoeden dat deze zogenaamde <span class="quote">&#8220;<span class="quote">bug</span>&#8221;</span> het
	resultaat is van òfwel onjuiste documentatie òfwel
	verkeerde interpretatie van de documentatie.  Hoe het probleem
	ook is ontstaan, met de volgende stappen is het te verhelpen:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Wijzig <code class="filename">/etc/fstab</code> en stel de
	    rootpartitie in op <code class="option">ro</code> voor alleen-lezen.</p></li><li class="step"><p>Herstart in enkele-gebruikersmodus.</p></li><li class="step"><p>Draai <code class="command">tunefs</code> <code class="option">-l enable</code> op
	    <code class="filename">/</code>.</p></li><li class="step"><p>Herstart in normale modus.</p></li><li class="step"><p>Draai <code class="command">mount</code> <code class="option">-urw</code>
	    <code class="filename">/</code> en wijzig <code class="option">ro</code> terug
	    in <code class="option">rw</code> in <code class="filename">/etc/fstab</code> en
	    start het systeem opnieuw.</p></li><li class="step"><p>Controleer de uitvoer van <code class="command">mount</code> om
	    zeker te zijn dat <code class="option">multilabel</code> juist is
	    ingesteld op het rootbestandssysteem.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79009104"></a>17.17.2. X11-server start niet na <acronym class="acronym">MAC</acronym></h3></div></div></div><p>Na het instellen van een beveiligde omgeving met
	<acronym class="acronym">MAC</acronym> start X niet meer!</p><p>Dit kan komen door de <acronym class="acronym">MAC</acronym>-beleidseenheid
	<code class="literal">partition</code> of door een verkeerde labeling van
	een van de <acronym class="acronym">MAC</acronym>-labeling beleidseenheden.
	Probeer als volgt te debuggen:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Controleer de foutmelding.  Als de gebruiker in de
	    klasse <code class="literal">insecure</code> zit, kan de
	    beleidseenheid <code class="literal">partition</code> het probleem
	    zijn.  Zet de klasse voor de gebruiker terug naar de klasse
	    <code class="literal">default</code> en herbouw de database met het
	    commando <code class="command">cap_mkdb</code>.  Ga naar stap twee als
	    hiermee het probleem niet is opgelost.</p></li><li class="step"><p>Controleer de labelbeleidseenheden nog een keer.  Stel
	    zeker dat het beleid voor de bewuste gebruiker, de
	    X11-applicatie, en de onderdelen van <code class="filename">/dev</code> juist zijn ingesteld.</p></li><li class="step"><p>Als geen van beide methodes het probleem oplossen, stuur
	    dan de foutmelding en een beschrijving van de omgeving naar
	    de TrustedBSD-discussielijsten van de <a class="link" href="http://www.TrustedBSD.org" target="_top">TrustedBSD</a>
	    website of naar de <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">FreeBSD algemene vragen mailinglijst</a> mailinglijst.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79018192"></a>17.17.3. Error: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=_secure_path&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">_secure_path</span>(3)</span></a> cannot stat
	<code class="filename">.login_conf</code></h3></div></div></div><p>Bij het wisselen van de gebruiker <code class="systemitem">root</code>
	naar een andere gebruiker in het systeem, verschijnt de
	foutmelding
	<span class="errorname">_secure_path: unable to state .login_conf</span>.</p><p>Deze melding komt meestal voor als de gebruiker een hogere
	labelinstelling heeft dan de gebruiker waarnaar wordt
	gewisseld.  Als bijvoorbeeld gebruiker <code class="systemitem">joe</code>
	een standaardlabel <code class="option">biba/low</code> heeft, dan kan
	gebruiker <code class="systemitem">root</code>, die een label
	<code class="option">biba/high</code> heeft, de thuismap van
	<code class="systemitem">joe</code> niet zien.  Dit gebeurt zonder
	rekening te houden met de mogelijkheid dat
	<code class="systemitem">root</code> met <code class="command">su</code> de
	identiteit van <code class="systemitem">joe</code> heeft aangenomen.  In
	dit scenario staat het integriteitsmodel van Biba niet toe dat
	<code class="systemitem">root</code> objecten kan zien van een lager
	integriteitsniveau.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79030096"></a>17.17.4. De gebruikersnaam <code class="systemitem">root</code> is
	stuk!</h3></div></div></div><p>In normale, of zelfs in enkelegebruikersmodus, wordt
	<code class="systemitem">root</code> niet herkend.  Het commando
	<code class="command">whoami</code> geeft 0 (nul) terug en
	<code class="command">su</code> heeft als resultaat <span class="errorname">who are
	  you?</span>.  Wat is er aan de hand?</p><p>Dit kan gebeuren als een labelbeleid is uitgeschakeld,
	òfwel door <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> òf doordat de
	beleidsmodule niet meer is geladen.  Als de beleidseenheid
	(tijdelijk) is uitgeschakeld dan moet de database met
	aanmeldmogelijkheden opnieuw worden ingesteld, waarbij de optie
	<code class="option">label</code> wordt verwijderd.  Er dient voor te
	worden zorggedragen dat het bestand
	<code class="filename">login.conf</code> wordt ontdaan van alle opties
	met <code class="option">label</code>, waarna de database opnieuw gebouwd
	kan worden met <code class="command">cap_mkdb</code>.</p><p>Dit kan ook gebeuren als een beleid toegang verhinderd tot
	het bestand of de database <code class="filename">master.passwd</code>.
	Meestal wordt dit veroorzaakt door een beheerder die het bestand
	veranderd onder een label welke conflicteert met het globale
	beleid dat gebruikt wordt op het systeem.  In deze gevallen
	wordt de gebruikersinformatie gelezen door het systeem en wordt
	de toegang geblokkeerd omdat het bestand het nieuwe label erft.
	Zet het beleid uit door middel van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> en alles zou
	weer normaal moeten zijn.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mac-userlocked.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="mac.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="audit.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">17.16. Gebruikers afsluiten </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> Hoofdstuk 18. Security Event Auditing</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>