<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.2. De inetd &#8220;Super-Server&#8221;</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="network-servers.html" title="Hoofdstuk 29. Netwerkdiensten" /><link rel="prev" href="network-servers.html" title="Hoofdstuk 29. Netwerkdiensten" /><link rel="next" href="network-nfs.html" title="29.3. Netwerkbestandssysteem (NFS)" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.2. De <span class="application">inetd</span>
      <span class="quote">&#8220;<span class="quote">Super-Server</span>&#8221;</span></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-servers.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 29. Netwerkdiensten</th><td width="20%" align="right"> <a accesskey="n" href="network-nfs.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-inetd"></a>29.2. De <span class="application">inetd</span>
      <span class="quote">&#8220;<span class="quote">Super-Server</span>&#8221;</span></h2></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div><div><span class="authorgroup">Bijgewerkt door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="othername">The FreeBSD Documentation Project</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-overview"></a>29.2.1. Overzicht</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> wordt soms de
	<span class="quote">&#8220;<span class="quote">Internet Super-Server</span>&#8221;</span> genoemd, omdat het
	verbindingen voor meerdere diensten beheert.  Als door
	<span class="application">inetd</span> een verbinding wordt ontvangen,
	bepaalt die voor welk programma de verbinding bedoeld is,
	splitst het dat proces af en delegeert de socket (het programma
	wordt gestart met de socket van de dienst als zijn
	standaardinvoer, -uitvoer en -foutbeschrijvingen).  Het draaien
	van <span class="application">inetd</span> voor servers die niet veel
	gebruikt worden kan de algehele werklast verminderen in
	vergelijking met het draaien van elke daemon individueel in
	stand-alone modus.</p><p><span class="application">inetd</span> wordt primair gebruikt om
	andere daemons aan te roepen, maar het handelt een aantal
	triviale protocollen direct af, zoals
	<span class="application">chargen</span>,
	<span class="application">auth</span> en
	<span class="application">daytime</span>.</p><p>In deze paragraaf worden de basisinstellingen van
	<span class="application">inetd</span> behandeld met de opties vanaf
	de commandoregel en met het instellingenbestand
	<code class="filename">/etc/inetd.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-settings"></a>29.2.2. Instellingen</h3></div></div></div><p><span class="application">inetd</span> wordt gestart door het
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>-systeem.  De
	optie <code class="literal">inetd_enable</code> staat standaard op
	<code class="literal">NO</code>, maar kan tijdens de installatie door
	<span class="application">sysinstall</span> worden aangezet.  Door het
	plaatsen van</p><pre class="programlisting">inetd_enable="YES"</pre><p>of</p><pre class="programlisting">inetd_enable="NO"</pre><p>in <code class="filename">/etc/rc.conf</code> wordt
	<span class="application">inetd</span> bij het opstarten van een
	systeem wel of niet ingeschakeld.  Het commando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd rcvar</code></strong></pre><p>kan gedraaid worden om de huidige effectieve instellingen
	weer te geven.</p><p>Dan kunnen er ook nog een aantal commandoregelopties aan
	<span class="application">inetd</span> meegegeven worden met de optie
	<code class="literal">inetd_flags</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-cmdline"></a>29.2.3. Commandoregelopties</h3></div></div></div><p>Zoals de meeste serverdaemons heeft
	<span class="application">inetd</span> een aantal opties die
	doorgegeven kunnen worden om het gedrag aan te passen.  Zie de
	handleidingpagina <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> voor een volledige lijst van de
	opties.</p><p>Opties kunnen door middel van de optie
	<code class="literal">inetd_flags</code> in
	<code class="filename">/etc/rc.conf</code> aan
	<span class="application">inetd</span> worden doorgegeven.  Standaard
	staat <code class="literal">inetd_flags</code> ingesteld op
	<code class="literal">-wW -C 60</code>, dat TCP-wrapping aanzet voor de
	diensten van <span class="application">inetd</span>, en voorkomt dat
	elk enkelvoudig IP-adres enige dienst meer dan 60 keer per
	minuut opvraagt.</p><p>Ook al worden er hieronder rate-limiting opties besproken,
	beginnende gebruikers kunnen blij zijn met het feit dat deze
	parameters gewoonlijk niet hoeven te worden aangepast.  Deze
	opties kunnen interessant zijn wanneer er een buitensporige
	hoeveelheid verbindingen worden opgezet.  Een volledige lijst
	van opties staat in de hulppagina <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-c maximum</span></dt><dd><p>Geeft het maximale aantal gelijktijdige verzoeken voor
	      iedere dienst aan.  De standaard is ongelimiteerd.  Kan
	      per dienst ter zijde geschoven worden met de parameter
	      <code class="option">max-child</code>.</p></dd><dt><span class="term">-C rate</span></dt><dd><p>Geeft het maximale aantal keren aan dat een dienst
	      vanaf een bepaald IP-adres per minuut aangeroepen kan
	      worden.  Kan per dienst ter zijde geschoven worden met de
	      parameter
	      <code class="option">max-connections-per-ip-per-minute</code>.</p></dd><dt><span class="term">-R rate</span></dt><dd><p>Geeft het maximale aantal keren aan dat een dienst
	      per minuut aangeroepen kan worden.  De standaard is 256.
	      De instelling <code class="literal">0</code> geeft aan dat er geen
	      limiet is.</p></dd><dt><span class="term">-s maximum</span></dt><dd><p>Specificeert het maximaal aantal keer per minuut dat
	      een dienst aangeroepen kan worden vanuit een enkelvoudig
	      IP-adres; de standaard is onbeperkt.  Kan worden
	      overstemd op een per-dienst-basis met de parameter
	      <code class="option">max-child-per-ip</code>.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-conf"></a>29.2.4. <code class="filename">inetd.conf</code></h3></div></div></div><p>De instellingen van <span class="application">inetd</span>
	worden beheerd in <code class="filename">/etc/inetd.conf</code>.</p><p>Als er een wijziging wordt aangebracht in
	<code class="filename">/etc/inetd.conf</code>, dan kan
	<span class="application">inetd</span> gedwongen worden om de
	instellingen opnieuw in te lezen door dit commando te draaien:</p><div class="example"><a id="network-inetd-reread"></a><div class="example-title">Voorbeeld 29.1. Het instellingenbestand van <span class="application">inetd</span>
	  herladen</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd reload</code></strong></pre></div></div><br class="example-break" /><p>Iedere regel in het bestand met instellingen heeft
	betrekking op een individuele daemon.  Commentaar wordt vooraf
	gegaan door een <code class="literal">#</code>.  De opmaak van elke regel
	van <code class="filename">/etc/inetd.conf</code> is als volgt:</p><pre class="programlisting">service-name
socket-type
protocol
{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]
user[:group][/login-class]
server-program
server-program-arguments</pre><p>Een voorbeeldregel voor de daemon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a> met IPv4 kan
	eruit zien als:</p><pre class="programlisting">ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">service-name</span></dt><dd><p>Dit is de dienstnaam van een daemon.  Die moet
	      overeenkomen met een dienst uit
	      <code class="filename">/etc/services</code>.  Hiermee kan de
	      poort waarop <span class="application">inetd</span> moet
	      luisteren aangegeven worden.  Als er een nieuwe dienst
	      wordt gemaakt, moet die eerst in
	      <code class="filename">/etc/services</code> gezet worden.</p></dd><dt><span class="term">socket-type</span></dt><dd><p>Dit is <code class="literal">stream</code>,
	      <code class="literal">dgram</code>, <code class="literal">raw</code> of
	      <code class="literal">seqpacket</code>.  <code class="literal">stream</code>
	      moet gebruikt worden voor verbindingsgebaseerde
	      TCP-daemons, terwijl <code class="literal">dgram</code> wordt
	      gebruikt voor daemons die gebruik maken van het
	      transportprotocol <acronym class="acronym">UDP</acronym>.</p></dd><dt><span class="term">protocol</span></dt><dd><p>Een van de volgende:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Protocol</th><th>Toelichting</th></tr></thead><tbody><tr><td>tcp, tcp4</td><td>TCP IPv4</td></tr><tr><td>udp, udp4</td><td>UDP IPv4</td></tr><tr><td>tcp6</td><td>TCP IPv6</td></tr><tr><td>udp6</td><td>UDP IPv6</td></tr><tr><td>tcp46</td><td>Zowel TCP IPv4 als v6</td></tr><tr><td>udp46</td><td>Zowel UDP IPv4 als v6</td></tr></tbody></table></div></dd><dt><span class="term">{wait|nowait}[/max-child[/max-connections-per-ip-per-minute[/max-child-per-ip]]]</span></dt><dd><p><code class="option">wait|nowait</code> geeft aan of de daemon
	      die door <span class="application">inetd</span> wordt
	      aangesproken zijn eigen sockets kan afhandelen of niet.
	      <code class="option">dgram</code> sockettypen moeten de optie
	      <code class="option">wait</code> gebruiken, terwijl streamsocket
	      daemons, die meestal multi-threaded zijn, de optie
	      <code class="option">nowait</code> horen te gebruiken.
	      <code class="option">wait</code> geeft meestal meerdere sockets aan
	      een daemon, terwijl <code class="option">nowait</code> een kinddaemon
	      draait voor iedere nieuwe socket.</p><p>Het maximum aantal kinddaemons dat
	      <span class="application">inetd</span> mag voortbrengen kan
	      ingesteld worden met de optie <code class="option">max-child</code>.
	      Als een limiet van tien instanties van een bepaalde
	      daemon gewenst is, dan zou er <code class="literal">/10</code>
	      achter <code class="option">nowait</code> gezet worden.  Door
	      <code class="literal">/0</code> wordt een onbeperkt aantal kinderen
	      toegestaan.</p><p>Naast <code class="option">max-child</code> zijn er nog twee
	      andere opties waarmee het maximale aantal verbindingen van
	      een bepaalde plaats naar een daemon ingesteld kan worden.
	      <code class="option">max-connections-per-ip-per-minute</code> beperkt
	      het aantal verbindingen per minuut voor enig IP-adres, een
	      waarde van tien betekent hier dat er van ieder IP-adres
	      maximaal tien verbindingen naar een bepaalde dienst tot
	      stand gebracht kunnen worden.
	      <code class="option">max-child-per-ip</code> beperkt het aantal
	      kindprocessen dat namens enig IP-adres op enig moment
	      gestart kan worden.  Deze opties kunnen zijn nuttig om
	      bedoeld en onbedoeld buitensporig bronnengebruik van en
	      Denial of Service (DoS) aanvallen op een machine te
	      voorkomen.</p><p>In dit veld is één van
	      <code class="option">wait</code> of <code class="option">nowait</code>
	      verplicht.  <code class="option">max-child</code>,
	      <code class="option">max-connections-per-ip-per-minute</code> en
	      <code class="option">max-child-per-ip</code> zijn optioneel.</p><p>Een stream-type multi-threaded daemon zonder
	      één van de limieten
	      <code class="option">max-child</code>,
	      <code class="option">max-connections-per-ip-per-minute</code> of
	      <code class="option">max-child-per-ip</code> is eenvoudigweg:
	      <code class="literal">nowait</code>.</p><p>Dezelfde daemon met een maximale limiet van tien
	      daemons zou zijn: <code class="literal">nowait/10</code>.</p><p>Dezelfde instellingen met een limiet van twintig
	      verbindingen per IP-adres per minuut en een totaal maximum
	      van tien kinddaemons zou zijn:
	      <code class="literal">nowait/10/20</code>.</p><p>Deze opties worden allemaal gebruikt door de
	      standaardinstellingen van de daemon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fingerd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fingerd</span>(8)</span></a>:</p><pre class="programlisting">finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre><p>Als afsluiting, een voorbeeld in dit veld met een
	      maximum van 100 kinderen in totaal, met een maximum van 5
	      voor enig IP-adres zou zijn:
	      <code class="literal">nowait/100/0/5</code>.</p></dd><dt><span class="term">user</span></dt><dd><p>Dit is de gebruikersnaam waar een daemon onder
	      draait.  Daemons draaien meestal als de gebruiker
	      <code class="systemitem">root</code>.  Om veiligheidsredenen draaien
	      sommige daemons onder de gebruiker
	      <code class="systemitem">daemon</code> of de gebruiker met de minste
	      rechten: <code class="systemitem">nobody</code>.</p></dd><dt><span class="term">server-program</span></dt><dd><p>Het volledige pad van de daemon die uitgevoerd moet
	      worden als er een verbinding wordt ontvangen.  Als de
	      daemon een dienst is die door
	      <span class="application">inetd</span> intern wordt geleverd,
	      dan moet de optie <code class="option">internal</code> gebruikt
	      worden.</p></dd><dt><span class="term">server-program-arguments</span></dt><dd><p>Deze optie werkt samen met de optie
	      <code class="option">server-program</code> en hierin worden de
	      argumenten ingesteld, beginnend met
	      <code class="literal">argv[0]</code>, die bij het starten aan de
	      daemon worden meegegeven.  Als
	      <code class="command">mijndaemon -d</code> de commandoregel is,
	      dan zou <code class="literal">mijndaemon -d</code> de waarde van
	      <code class="option">server-program-arguments</code> zijn.  Hier
	      geldt ook dat als de daemon een interne dienst is, hier
	      de optie <code class="option">internal</code> moet worden.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-security"></a>29.2.5. Beveiliging</h3></div></div></div><p>Afhankelijk van keuzes gemaakt tijdens de installatie,
	kunnen veel van de diensten van <span class="application">inetd</span>
	standaard ingeschakeld zijn.  Het is verstandig te overwegen om
	een daemon dat niet noodzakelijk is uit te schakelen.  Plaats
	een <code class="literal">#</code> voor de daemon in
	<code class="filename">/etc/inetd.conf</code> en <a class="link" href="network-inetd.html#network-inetd-reread" title="Voorbeeld 29.1. Het instellingenbestand van inetd herladen">herlaad vervolgens de
	instellingen van inetd</a>.  Sommige daemons, zoals
	<span class="application">fingerd</span>, zijn wellicht helemaal niet
	gewenst omdat ze informatie geven die nuttig kan zijn voor een
	aanvaller.</p><p>Sommige daemons zijn zich niet echt bewust van beveiliging
	en hebben lange of niet bestaande timeouts voor
	verbindingspogingen.  Hierdoor kan een aanvaller langzaam veel
	verbindingen maken met een daemon en zo beschikbare bronnen
	verzadigen.  Het is verstandig voor die daemons de limietopties
	<code class="option">max-connections-per-ip-per-minute</code>,
	<code class="option">max-child</code> of <code class="option">max-child-per-ip</code>
	te gebruiken als ze naar uw smaak teveel verbindingen hebben.</p><p>TCP-wrapping staat standaard aan.  Er staat meer informatie
	over het zetten van TCP-restricties op de verschillende daemons
	die door <span class="application">inetd</span> worden aangesproken
	in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-misc"></a>29.2.6. Allerlei</h3></div></div></div><p><span class="application">daytime</span>,
	<span class="application">time</span>,
	<span class="application">echo</span>,
	<span class="application">discard</span>,
	<span class="application">chargen</span> en
	<span class="application">auth</span> zijn allemaal interne diensten
	van <span class="application">inetd</span>.</p><p>De dienst <span class="application">auth</span> biedt
	identiteitsnetwerkdiensten en is tot op een bepaald niveau
	instelbaar, terwijl de anderen eenvoudigweg aan of uit staan.</p><p>Meer diepgaande informatie staat in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-servers.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="network-nfs.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">Hoofdstuk 29. Netwerkdiensten </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 29.3. Netwerkbestandssysteem (NFS)</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>