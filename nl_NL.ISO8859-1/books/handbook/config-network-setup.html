<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12.8. Netwerkkaarten instellen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="config-tuning.html" title="Hoofdstuk 12. Instellingen en optimalisatie" /><link rel="prev" href="configtuning-rcd.html" title="12.7. Gebruik van rc met FreeBSD" /><link rel="next" href="configtuning-virtual-hosts.html" title="12.9. Virtuele hosts" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.8. Netwerkkaarten instellen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-rcd.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 12. Instellingen en optimalisatie</th><td width="20%" align="right"> <a accesskey="n" href="configtuning-virtual-hosts.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config-network-setup"></a>12.8. Netwerkkaarten instellen</h2></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp75220048" class="indexterm"></a><p>Het is tegenwoordig nauwelijks voorstelbaar dat een computer
      geen netwerkverbinding heeft.  Het toevoegen en instellen van een
      netwerkkaart is een gebruikelijke taak voor een
      FreeBSD-beheerder.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75221584"></a>12.8.1. Het juiste stuurprogramma vinden</h3></div></div></div><a id="idp75222224" class="indexterm"></a><p>Voor het zoeken begint, moet duidelijk zijn om welke kaart
	het gaat, welke chip erop zit en of het een PCI- of ISA-kaart
	is.  FreeBSD ondersteunt vele kaarten.  Op de Hardware
	Compatibiliteitslijst voor de betreffende uitgave staan de
	kaarten die ondersteund worden.</p><p>Als duidelijk is dat een kaart ondersteund wordt, moet
	vastgesteld worden wat het geschikte stuurprogramma is.  In het
	bestand <code class="filename">/usr/src/sys/conf/NOTES</code> staat een
	lijst van stuurprogramma's voor netwerkinterfaces met wat
	informatie over de ondersteunde chipsets of kaarten.  In geval
	van twijfel biedt de hulppagina voor het stuurprogramma
	(<code class="command">man</code>) vaak uitkomst.  In het algemeen bevat
	deze meer informatie over de ondersteunde hardware en mogelijke
	problemen die kunnen optreden.</p><p>Als een veelgebruikte kaart gebruikt wordt, hoeft meestal
	niet ver gezocht te worden.  Stuurprogramma's voor
	veelvoorkomende netwerkinterfaces zijn al aanwezig in de
	algemene kernel <code class="filename">GENERIC</code>.  In dat geval
	wordt zo'n kaart al gevonden bij het opstarten, bijvoorbeeld met
	het volgende bericht:</p><pre class="screen">dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
miibus0: &lt;MII bus&gt; on dc0
bmtphy0: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus0
bmtphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc0: Ethernet address: 00:a0:cc:da:da:da
dc0: [ITHREAD]
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
miibus1: &lt;MII bus&gt; on dc1
bmtphy1: &lt;BCM5201 10/100baseTX PHY&gt; PHY 1 on miibus1
bmtphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: Ethernet address: 00:a0:cc:da:da:db
dc1: [ITHREAD]</pre><p>In dit voorbeeld zitten er twee kaarten in het systeem die
	het stuurprogramma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dc</span>(4)</span></a> gebruiken.</p><p>Als het stuurprogramma voor een NIC geen onderdeel is van de
	kernel <code class="filename">GENERIC</code>, dan dient het juiste
	stuurprogramma voor die NIC geladen te worden.  Dit kan op twee
	manieren:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>De meest eenvoudige manier is het laden van een
	    kernelmodule voor een netwerkkaart met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> of
	    automatisch tijdens het opstarten van het systeem door de
	    benodigde regel toe te voegen aan
	    <code class="filename">/boot/loader.conf</code>.  Niet alle
	    NIC-stuurprogramma's zijn als module beschikbaar.  Zo zijn
	    er bijvoorbeeld geen modules beschikbaar voor
	    ISA-kaarten.</p></li><li class="listitem"><p>Ondersteuning voor een kaart kan ook in de kernel
	    gecompileerd worden.  In
	    <code class="filename">/usr/src/sys/conf/NOTES</code>,
	    <code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	    en de hulppagina van het stuurprogramma is na te lezen wat
	    er in het kernelinstellingenbestand moet staan.  In <a class="xref" href="kernelconfig.html" title="Hoofdstuk 9. De FreeBSD-kernel instellen">Hoofdstuk 9, <em>De FreeBSD-kernel instellen</em></a> staat meer informatie over het
	    compileren van een eigen kernel.  Als een netwerkkaart al
	    bij het opstarten wordt herkend door de kernel
	    <code class="filename">GENERIC</code>, is er geen reden om een andere
	    kernel te bouwen.</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-network-ndis"></a>12.8.1.1. Gebruik maken van <span class="trademark">Windows</span>®
	  NDIS-stuurprogramma's</h4></div></div></div><a id="idp75238224" class="indexterm"></a><a id="idp75238736" class="indexterm"></a><a id="idp75239248" class="indexterm"></a><a id="idp75240272" class="indexterm"></a><a id="idp75240784" class="indexterm"></a><a id="idp75241808" class="indexterm"></a><p>Helaas zijn er nog steeds veel leveranciers die geen
	  schema's leveren voor stuurprogramma's aan de open-source
	  gemeenschap, omdat ze deze informatie beschouwen als
	  handelsgeheimen.  Als gevolg daarvan hebben de ontwikkelaars
	  van FreeBSD en andere projecten twee keuzes: zelf de
	  stuurprogramma's ontwikkelen door een langdurig en pijnlijk
	  proces van de huidige stuurprogramma's te ontcijferen, of door
	  gebruik te maken van de huidige binaire bestanden voor het
	  <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® platform.  De meeste ontwikkelaars,
	  inclusief diegeen die gekoppeld zijn aan FreeBSD, hebben voor het
	  laatste gekozen.</p><p>Dankzij de bijdragen van Bill Paul (wpaul) is er
	  <span class="quote">&#8220;<span class="quote">native</span>&#8221;</span> ondersteuning
	  voor de Network Driver Interface Specification (NDIS).  De
	  FreeBSD NDISulator (ook wel bekend als Project Evil) neemt een
	  binair <span class="trademark">Windows</span>® stuurprogramma en doet net alsof deze in een
	  <span class="trademark">Windows</span>® systeem draait.  Omdat het stuurprogramma
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> een <span class="trademark">Windows</span>® binary gebruikt; draait het alleen
	  op <span class="trademark">i386</span>&#8482;- en amd64-systemen.  PCI, CardBus, PCMCIA (PC-Card) en
	  USB-apparaten worden ondersteund.</p><p>Om de NDISulator te gebruiken zijn drie dingen nodig:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>De bronbestanden van de kernel</p></li><li class="listitem"><p>Een <span class="trademark">Windows</span>® XP stuurprogramma (met de extensie
	      <code class="filename">.SYS</code>)</p></li><li class="listitem"><p>Een instellingenbestand van het <span class="trademark">Windows</span>® XP
	      stuurprogramma (met de extensie
	      <code class="filename">.INF</code>)</p></li></ol></div><p>Lokaliseer de bestanden voor uw specifieke kaart.  Over
	  het algemeen kunnen deze gevonden worden op de bijgeleverde
	  CD's of op de website van de leverancier.  In de volgende
	  voorbeelden maken we gebruik van
	  <code class="filename">W32DRIVER.SYS</code> en
	  <code class="filename">W32DRIVER.INF</code>.</p><p>De bit-breedte van het stuurprogramma moet overeenkomen met die
	  van het stuurprogramma.  Gebruik voor FreeBSD/i386 een 32-bits <span class="trademark">Windows</span>®
	  stuurprogramma.  Voor FreeBSD/amd64 is een 64-bits <span class="trademark">Windows</span>®
	  stuurprogramma nodig.</p><p>De volgende stap is het compileren van het binaire
	  stuurprogramma in een laadbare kernelmodule.  Gebruik <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a>
	  als <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndisgen /pad/naar/W32DRIVER.INF
/pad/naar/W32DRIVER.SYS</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a> is interactief en vraagt om extra informatie als
	  het dat nodig heeft.  Een nieuwe kernel-module wordt in de huidige map
	  geschreven.  Gebruik <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> om de nieuwe module te
	  laden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ./W32DRIVER_SYS.ko</code></strong></pre><p>Naast de gegenereerde kernelmodule, moeten ook de modules
	  <code class="filename">ndis.ko</code> en
	  <code class="filename">if_ndis.ko</code> geladen worden.  Dit zou
	  automatisch moeten gebeuren als er een module geladen wordt
	  dit afhankelijk is van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a>.  Als ze handmatig
	  ingeladen moeten worden gebruik dan de volgende
	  commando's:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>kldload if_ndis</code></strong></pre><p>Het eerste commando laadt de stuurprogrammawrapper voor de
	  NDIS miniport, de tweede laadt de daadwerkelijke
	  netwerkinterface.</p><p>Controleer nu <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> om te zien of er ergens fouten
	  voorkomen.  Als alles goed gegaan is ziet u ongeveer het
	  volgende:</p><pre class="screen">ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</pre><p>Vanaf dit moment kan de <code class="filename">ndis0</code>
	  net zo gebruikt worden als elke andere netwerkkaart (bv.
	  <code class="filename">dc0</code>).</p><p>Het systeem kan geconfigureerd worden zodat de
	  NDIS-modules automatisch gestart worden tijdens het opstarten
	  van het systeem, net zoals bij andere modules.  Kopieer eerst
	  de gegenereerde module <code class="filename">W32DRIVER_SYS.ko</code> naar
	  de map <code class="filename">/boot/modules</code>.
	  Voeg daarna de volgende regel toe aan
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">W32DRIVER_SYS_load="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75277520"></a>12.8.2. De netwerkkaart instellen</h3></div></div></div><a id="idp75278160" class="indexterm"></a><p>Nadat een geschikt stuurprogramma geladen is, moet de kaart
	nog ingesteld worden.  Mogelijk is dit al gebeurd door
	<span class="application">sysinstall</span> tijdens de
	installatie.</p><p>Om de instellen van de netwerkkaarten weer te geven:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig</code></strong>
dc0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
        status: active
dc1: flags=8802&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:db
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        media: Ethernet 10baseT/UTP
        status: no carrier
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        options=3&lt;RXCSUM,TXCSUM&gt;
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x4
        inet6 ::1 prefixlen 128
        nd6 options=3&lt;PERFORMNUD,ACCEPT_RTADV&gt;</pre><p>In dit voorbeeld werden de volgende apparaten
	weergegeven:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">dc0</code>: de eerste
	    Ethernet-interface;</p></li><li class="listitem"><p><code class="filename">dc1</code>: de tweede
	    Ethernet-interface;</p></li><li class="listitem"><p><code class="filename">lo0</code>: het
	    loopback-apparaat;</p></li></ul></div><p>FreeBSD gebruikt de naam van het stuurprogramma gevolgd door
	een nummer voor de volgorde waarop de kaarten gedetecteerd zijn
	bij het opstarten.  <code class="filename">sis2</code> is de derde
	netwerkkaart in het systeem die het stuurprogramma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sis</span>(4)</span></a>
	gebruikt.</p><p>In het vorige voorbeeld is het apparaat
	<code class="filename">dc0</code> volledig operationeel.  Dit blijkt
	uit de volgende indicatoren:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="literal">UP</code> betekent dat de kaart ingesteld is
	    en klaar is voor gebruik;</p></li><li class="listitem"><p>De kaart heeft een Internet (<code class="literal">inet</code>)
	    adres (in dit geval <code class="systemitem">192.168.1.3</code>);</p></li><li class="listitem"><p>Het heeft een geldig subnetmasker
	    (<code class="literal">netmask</code>; <code class="systemitem">0xffffff00</code> is hetzelfde als
	    <code class="systemitem">255.255.255.0</code>);</p></li><li class="listitem"><p>Het heeft een geldig broadcastadres (in dit geval
	    <code class="systemitem">192.168.1.255</code>);</p></li><li class="listitem"><p>Het MAC-adres van de kaart (<code class="literal">ether</code>) is
	    <code class="systemitem">00:a0:cc:da:da:da</code>;</p></li><li class="listitem"><p>De fysieke mediaselectie staat in autoselectiemodus
	    (<code class="literal">media: Ethernet autoselect (100baseTX
	      &lt;full-duplex&gt;)</code>).
	    <code class="filename">dc1</code> is ingesteld om met
	    <code class="literal">10baseT/UTP</code>-media te werken.  Meer
	    informatie over de mogelijke mediatypes staan in de
	    hulppagina's voor het betreffende stuurprogramma.</p></li><li class="listitem"><p>De status van de verbinding (<code class="literal">status</code>)
	    is <code class="literal">active</code>, dat wil zeggen dat de drager
	    is gevonden.  Bij <code class="filename">dc1</code>staat echter
	    <code class="literal">status: no carrier</code>.  Dit is normaal als
	    er geen Ethernetkabel in de kaart gestoken is.</p></li></ol></div><p>Als de uitvoer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> er ongeveer zoals hieronder
	uitziet, dan is de netwerkkaart nog niet ingesteld:</p><pre class="screen">dc0: flags=8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=80008&lt;VLAN_MTU,LINKSTATE&gt;
        ether 00:a0:cc:da:da:da
        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
        status: active</pre><p>Om de kaart in te stellen zijn
	<code class="systemitem">root</code>-rechten nodig.  De netwerkkaart kan
	vanaf de console worden ingesteld met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>, maar dan
	moet dat na elke herstart herhaald worden.  Daarom wordt het
	vrijwel altijd in <code class="filename">/etc/rc.conf</code>
	gezet.</p><p>In <code class="filename">/etc/rc.conf</code> moet voor elke
	netwerkkaart in een systeem een regel toegevoegd worden.  In het
	huidige voorbeeld zou dat het volgende kunnen zijn:</p><pre class="programlisting">ifconfig_dc0="inet 192.168.1.3 netmask 255.255.255.0"
ifconfig_dc1="inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP"</pre><p><code class="filename">dc0</code>, <code class="filename">dc1</code>,
	enzovoort, moeten vervangen worden door de correcte
	stuurprogramma's voor de netwerkkaarten, zo ook de
	<acronym class="acronym">IP</acronym>-adressen.  In de handleiding van het
	stuurprogramma en van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> staan meer details over
	de mogelijke opties en in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> staat meer informatie
	over <code class="filename">/etc/rc.conf</code>.</p><p>Als het netwerk al is ingesteld tijdens het installeren van
	FreeBSD staan er al enkele regels met betrekking tot de
	netwerkkaart(en) in <code class="filename">/etc/rc.conf</code>.  Het is
	dus handig <code class="filename">/etc/rc.conf</code> te controleren
	voordat er regels toegevoegd worden.</p><p>Ook <code class="filename">/etc/hosts</code> moet worden gewijzigd om
	de namen en <acronym class="acronym">IP</acronym> adressen van verschillende
	machines op het lokale netwerk, als ze er nog niet in staan.
	Meer informatie staat in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> en
	<code class="filename">/usr/share/examples/etc/hosts</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als internettoegang nodig is met dit apparaat, kan
	  het zijn dat de default gateway en de naamserver handmatig
	  moeten worden ingesteld:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'defaultrouter="your_default_router"' &gt;&gt; /etc/rc.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>echo 'nameserver your_DNS_server' &gt;&gt; /etc/resolv.conf</code></strong></pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75331536"></a>12.8.3. Testen en problemen oplossen</h3></div></div></div><p>Als de veranderingen in <code class="filename">/etc/rc.conf</code>
	zijn gemaakt, moet het systeem opnieuw gestarten worden (of
	moeten nauwkeurig alle daemons gestart of herstart worden).
	Veranderingen aan de interface(s) worden dan toegepast en dan
	kan er controleerd worden of herstarten goed werkt zonder
	foutmeldingen.  Als alternatief kan ook het netwerk systeem
	herstart worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service netif restart</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als er ook een default gateway ingesteld is in het
	  <code class="filename">/etc/rc.conf</code> bestand, moet ook onderstaand
	  command worden gegeven:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service routing restart</code></strong></pre></div><p>Zodra het netwerk systeem is herstart, moeten de netwerk
	interfaces opnieuw getest worden.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75336272"></a>12.8.3.1. Testen van de netwerkkaart</h4></div></div></div><a id="idp75336912" class="indexterm"></a><p>Om te controleren of een ethernet kaart goed geconfigureerd
	  is, moeten er twee dingen gedaan worden.  Allereerst, ping de
	  interface zelf, en daarna een andere machine op het LAN.</p><p>Test eerst de lokale interface:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.3</code></strong>
PING 192.168.1.3 (192.168.1.3): 56 data bytes
64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms
64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms
64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms
64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms
64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms

--- 192.168.1.3 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms</pre><p>Nu kan er een andere machine op het LAN gepinged worden:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.2</code></strong>
PING 192.168.1.2 (192.168.1.2): 56 data bytes
64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms
64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms
64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms
64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms
64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms

--- 192.168.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms</pre><p>Dit kan ook worden geprobeerd met de machine naam in plaats
	  van met <code class="systemitem">192.168.1.2</code> als dit
	  geconfigureerd is in <code class="filename">/etc/hosts</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75342800"></a>12.8.3.2. Problemen oplossen</h4></div></div></div><a id="idp75343440" class="indexterm"></a><p>Het testen en zoeken van problemen is altijd een
	  pijnpunt, welke verminderd kan worden door een aantal
	  simpele dingen eerst te controleren.  Is de netwerkkabel
	  ingestoken?  Zijn de netwerk instellingen correct opgegeven?
	  Is de firewall goed geconfigureerd?  Is de netwerkkaart
	  ondersteund door FreeBSD?  Controleer altijd de hardware notities
	  voordat er een probleem rapport wordt verstuurd.  Update naar
	  de laatste -STABLE versie, en controleer de mailing lijsten en
	  misschien zelfs het internet.</p><p>Als de kaart werkt, maar de prestaties zijn slecht, dan kan
	  het de moeite waard zijn om <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a> door te nemen.
	  Incorrecte netwerkinstellingen kunnen ook tot langzame
	  verbindingen leiden.</p><p>Soms kunnen enkele <span class="errorname">device timeouts</span>
	  optreden.  Met sommige kaarten is dit normaal gedrag.  Maar als
	  dit continu gebeurt of storend is, is het verstandig uit te
	  zoeken of er geen sprake is van een hardwareconfict tussen de
	  netwerkkaart en een ander apparaat.  Ook dient nogmaals de
	  bekabeling gecontroleerd te worden.  Misschien zit er niets
	  anders op dan een andere netwerkkaart te gebruiken.</p><p>Het is ook mogelijk dat er <span class="errorname">watchdog
	    timeout</span> foutmeldingen optreden.  Als eerste moet
	  dan de netwerkkabel gecontroleerd worden.  Veel kaarten hebben
	  een PCI-slot nodig dat Bus Mastering ondersteunt.  Sommige
	  oudere moederborden hebben maar één PCI-slot
	  waarmee dit kan (meestal slot 0).  In de documentatie van de
	  netwerkkaart en het moederbord is na te gaan of dit het
	  probleem is.</p><p><span class="errorname">No route to host</span> meldingen treden op
	  als het systeem niet in staat is om een pakket naar de
	  eindbestemming te routeren.  Dit kan gebeuren als er geen
	  standaardroute aangegeven is of als er een kabel niet verbonden
	  is.  De uitvoer van <code class="command">netstat -rn</code> moet
	  gecontroleerd worden of er een geldige route is naar de
	  bestemming.  Mocht dit niet het geval zijn, dan staat er meer
	  informatie in <a class="xref" href="advanced-networking.html" title="Hoofdstuk 31. Geavanceerde netwerken">Hoofdstuk 31, <em>Geavanceerde netwerken</em></a>.</p><p><span class="errorname">ping: sendto: Permission denied</span>
	  foutmeldingen worden vaak veroorzaakt door een verkeerd
	  ingestelde firewall.  Als de kernel <code class="command">ipfw</code>
	  activeert bij het opstarten zonder dat er firewallregels zijn
	  gedefiniëerd, is het standaardbeleid om alle verkeer te
	  weigeren, zelfs pings!  In <a class="xref" href="firewalls.html" title="Hoofdstuk 30. Firewalls">Hoofdstuk 30, <em>Firewalls</em></a> staat meer
	  informatie.</p><p>Er kan ook sprake zijn van onvoldoende prestaties doordat de
	  instelling van de mediaselectie niet optimaal is.  In dergelijke
	  gevallen is het mogelijk om de mediaselectie niet als
	  <code class="literal">autoselect</code> in te stellen, maar expliciet aan
	  te geven wat de mediaselectie moet zijn, bijvoorbeeld
	  10baseT/UTP voor twisted pair.  Hoewel dit voor de meeste
	  hardware helpt, kan het zijn dat de problemen blijven.  Dan
	  moeten nogmaals de netwerkinstellingen gecontroleerd worden en
	  geeft de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a> handleiding wellicht meer
	  informatie.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-rcd.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="configtuning-virtual-hosts.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">12.7. Gebruik van rc met FreeBSD </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 12.9. Virtuele hosts</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>