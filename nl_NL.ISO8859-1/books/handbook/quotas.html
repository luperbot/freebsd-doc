<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>19.15. Bestandssysteemquota</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="disks.html" title="Hoofdstuk 19. Opslag" /><link rel="prev" href="snapshots.html" title="19.14. Snapshots van bestandssystemen" /><link rel="next" href="disks-encrypting.html" title="19.16. Schijfpartities versleutelen" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.15. Bestandssysteemquota</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="snapshots.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 19. Opslag</th><td width="20%" align="right"> <a accesskey="n" href="disks-encrypting.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="quotas"></a>19.15. Bestandssysteemquota</h2></div></div></div><a id="idp80463696" class="indexterm"></a><a id="idp80464848" class="indexterm"></a><p>Quota zijn een optionele mogelijkheid van het
      besturingssysteem om de hoeveelheid schijfruimte en/of het aantal
      bestanden dat gebruikers of leden van een groep per
      bestandssysteem mogen gebruiken te beperken.  Dit wordt het
      meeste gebruikt op timesharing-systemen waar het wenselijk is om
      het aantal bronnen dat elke gebruiker of groep van gebruikers mag
      gebruiken te beperken.  Dit voorkomt dat één
      gebruiker of groep van gebruikers alle beschikbare schijfruimte
      in beslag neemt.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80465744"></a>19.15.1. Schijfquota inschakelen</h3></div></div></div><p>Controleer alvorens te proberen om schijfquota te
	gebruiken of quota ingesteld zijn in de kernel.  Dit gebeurt
	door het toevoegen van de volgende regel aan het
	kernelinstellingenbestand:</p><pre class="programlisting">options QUOTA</pre><p>De standaardkernel <code class="filename">GENERIC</code> heeft deze
	optie niet aanstaan, dus is het nodig om een eigen kernel in te
	stellen, te bouwen en te installeren om gebruik te kunnen maken
	van schijfquota.  Meer informatie over het instellen van de
	kernel staat in <a class="xref" href="kernelconfig.html" title="Hoofdstuk 9. De FreeBSD-kernel instellen">Hoofdstuk 9, <em>De FreeBSD-kernel instellen</em></a>.</p><p>Vervolgens dienen schijfquota aangezet te worden in
	<code class="filename">/etc/rc.conf</code>.  Op FreeBSD 7.X en eerder wordt
	deze regel toegevoegd:</p><pre class="programlisting">enable_quotas="YES"</pre><p>Voeg op FreeBSD 8.0-RELEASE en nieuwer in plaats daarvan deze
	regel toe:</p><pre class="programlisting">quota_enable="YES"</pre><a id="idp80470352" class="indexterm"></a><p>Voor fijnere controle over de opstartquota zijn extra
	instellingsvariabelen beschikbaar.  Normaalgesproken wordt de
	integriteit van de quota van elk bestandssysteem tijdens het
	opstarten door <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> gecontroleerd.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a> verzekert dat de gegevens in de
	quotadatabase een juiste afspiegeling vormen van de gegevens op
	het bestandssysteem.  Dit proces neemt erg veel tijd in beslag
	en beïnvloedt de tijd die een systeem nodig heeft om op te
	starten significant.  Om deze stap over te slaan, bestaat een
	variabele in <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">check_quotas="NO"</pre><p>Als laatste dient <code class="filename">/etc/fstab</code> bewerkt
	te worden om schijfquota per bestandssysteem aan te zetten.
	Hier kunnen gebruiker- of groepquota of beide worden aangezet
	voor alle bestandssystemen.</p><p>Om quota per gebruiker op een bestandssysteem aan te
	zetten, dient de optie <code class="option">userquota</code> aan het
	optieveld toegevoegd te worden aan de regel in
	<code class="filename">/etc/fstab</code> voor het bestandssysteem waar
	quota worden aangezet.  Bijvoorbeeld:</p><pre class="programlisting">/dev/da1s2g   /home    ufs rw,userquota 1 2</pre><p>Analoog, om groepquota aan te zetten, dient de optie
	<code class="option">groupquota</code> in plaats van
	<code class="option">userquota</code> gebruikt te worden.  Om zowel
	gebruikers- als groepsquota aan te zetten, dient de regel als
	volgt veranderd te worden:</p><pre class="programlisting">/dev/da1s2g   /home    ufs rw,userquota,groupquota 1 2</pre><p>Standaard worden de quotabestanden opgeslagen in de
	hoofdmap van het bestandssysteem onder de namen
	<code class="filename">quota.user</code> en
	<code class="filename">quota.group</code> voor respectievelijk
	gebruikers- en groepsquota.  Meer informatie staat in
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>.  Alhoewel de hulppagina <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> vermeld
	dat een alternatieve plaats voor de quotabestanden
	gespecificeerd kan worden, wordt dit niet aangeraden omdat de
	verschillende quotagereedschappen dit niet juist schijnen af te
	handelen.</p><p>Hier aangekomen dient het systeem opnieuw opgestart te
	worden met de nieuwe kernel.  <code class="filename">/etc/rc</code>
	voert automatisch de juiste commando's uit om de initiële
	quotabestanden aan te maken voor alle quota die in
	<code class="filename">/etc/fstab</code> zijn aangezet.  Het is dus niet
	nodig om handmatig quotabestanden met lengte nul aan te
	maken.</p><p>Tijdens normale bewerkingen moet het niet nodig zijn om de
	commando's <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaon&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaon</span>(8)</span></a> of
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaoff&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaoff</span>(8)</span></a> handmatig te draaien.  Lees wel de betreffende
	hulppagina's om bekend te raken met de werking ervan.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80493264"></a>19.15.2. Quotalimieten instellen</h3></div></div></div><a id="idp80493904" class="indexterm"></a><p>Indien het systeem ingesteld voor gebruik van quota,
	controleer dan of ze echt aanstaan.  Een eenvoudige
	manier om dit te doen is de volgende:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>quota -v</code></strong></pre><p>Er hoort een eenregelige samenvatting te verschijnen over
	het schijfgebruik en de huidige quotalimieten voor elk
	bestandssysteem waarop quota aanstaan.</p><p>Nu kunnen quotalimieten toegewezen worden met
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.</p><p>Er zijn verschillende opties om grenzen te stellen aan de
	hoeveelheid schijfruimte die een gebruiker of groep mag
	toewijzen en het aantal bestanden dat ze mogen aanmaken.
	Toewijzingen kunnen begrensd worden met betrekking tot
	schijfruimte (blokquota) of het aantal bestanden (inode-quota)
	of een combinatie van beide.  Elk van deze limieten is op zijn
	beurt weer opgesplitst in twee categoriën: harde en zachte
	limieten.</p><a id="idp80498384" class="indexterm"></a><p>Een harde limiet mag niet overschreden worden.  Indien een
	gebruiker de harde limiet bereikt, mag deze geen verdere
	toewijzingen maken op het betreffende bestandssysteem.  Indien
	een gebruiker bijvoorbeeld een harde limiet heeft van 500 kB
	op een bestandssysteem en er 490 kB van gebruikt, kan deze
	nog slechts 10 kB toewijzen.  Een poging om 11 kB toe
	te wijzen zal mislukken.</p><a id="idp80499280" class="indexterm"></a><p>Zachte limieten kunnen voor een beperkte tijd overschreden
	worden.  Deze periode staat bekend als de gratieperiode, die
	standaard een week bedraagt.  Als een gebruiker de zachte
	limiet langer dan de gratieperiode overschrijdt, verandert de
	zachte limiet in een harde limiet en zijn er geen verdere
	toewijzingen toegestaan.  Als de gebruiker onder de zachte
	limiet komt, wordt de gratieperiode opnieuw ingesteld.</p><p>Het volgende is een voorbeeld van een mogelijk gebruik van
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.  Als het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> gestart
	wordt, wordt de tekstverwerker opgestart die door de
	omgevingsvariabele <code class="envar">EDITOR</code> gespecificeerd is, of
	de tekstverwerker <span class="application">vi</span> als de
	variabele <code class="envar">EDITOR</code> niet is ingesteld.  Nu kunnen
	de quotalimieten bewerkt worden.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -u test</code></strong></pre><pre class="programlisting">Quotas for user test:
/usr: kbytes in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: kbytes in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</pre><p>Normaalgesproken worden er twee regels weergegeven voor elk
	bestandssysteem waarvoor quota gelden: één regel
	voor de bloklimieten, en één voor de
	inode-limieten.  Om de quotalimieten te veranderen dient de
	waarde ervan veranderd te worden.  Om bijvoorbeeld de
	bloklimiet van een gebruiker te veranderen van een zachte
	limiet van 50 en een harde limiet van 75 in een zachte limiet
	van 500 en een harde limiet van 600, dient het volgende
	veranderd te worden:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 50, hard = 75)</pre><p>In:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 500, hard = 600)</pre><p>De nieuwe quotalimieten gelden zodra de tekstverwerker
	verlaten wordt.</p><p>Soms is het gewenst om quotalimieten in te stellen op een
	aantal UID's.  Dit kan gedaan worden door de optie
	<code class="option">-p</code> van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a> te gebruiken.  Wijs
	eerst de gewenste quotalimiet aan een gebruiker toe en draai
	daarna <code class="command">edquota -p protogebruiker
	  beginuid-einduid</code>.  Indien bijvoorbeeld gebruiker
	<code class="systemitem">test</code> de gewenste quotalimieten heeft, kan
	het volgende commando gebruikt worden om deze quotalimieten te
	dupliceren voor UID's 10.000 tot en met 19.999:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -p test 10000-19999</code></strong></pre><p>Meer informatie staat in de hulppagina voor
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80515280"></a>19.15.3. Quotalimieten en schijfgebruik controleren</h3></div></div></div><a id="idp80516048" class="indexterm"></a><p>Zowel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> als <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> kunnen gebruikt
	worden om de quotalimieten en het schijfgebruik te controleren.
	Het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> kan gebruikt worden om de quota van
	zowel individuele gebruikers als groepen en het schijfgebruik
	te controleren.  Een gebruiker mag alleen de eigen quota en de
	quota van een groep waarvan deze lid is controleren.  Alleen de
	beheerder mag alle gebruikers- en groepsquota bekijken.  Het
	commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> kan gebruikt worden om een overzicht
	te krijgen van alle quota en gebruik van bestandssystemen
	waarvan quota aanstaan.</p><p>Het volgende is een mogelijke uitvoer van het commando
	<code class="command">quota -v</code> voor een gebruiker die
	quotalimieten heeft op twee bestandssystemen.</p><pre class="programlisting">Disk quotas for user test (uid 1002):
     Filesystem  usage    quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</pre><a id="idp80521936" class="indexterm"></a><p>Voor het bestandssysteem <code class="filename">/usr</code> in
	bovenstaand voorbeeld overschrijdt deze gebruiker de zachte
	limiet van 50 kB momenteel met 15 kB en heeft deze 5
	dagen van de gratieperiode over.  De asterisk,
	<code class="literal">*</code> geeft aan dat de gebruiker momenteel de
	quotalimiet overschrijdt.</p><p>Normaalgesproken worden bestandssystemen waarvan de
	gebruiker geen schijfruimte gebruikt niet weergegeven in de
	uitvoer van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>, zelfs niet als er de gebruiker een
	quotalimiet heeft voor dat bestandssysteem.  De optie
	<code class="option">-v</code> geeft deze bestandssystemen weer, zoals het
	bestandssysteem <code class="filename">/usr/var</code> in bovenstaand
	voorbeeld.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80530000"></a>19.15.4. Quota over NFS</h3></div></div></div><a id="idp80530640" class="indexterm"></a><p>Quota worden afgedwongen door het quota-subsysteem op de
	NFS-server.  De daemon <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.rquotad&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.rquotad</span>(8)</span></a> stelt
	quota-informatie beschikbaar aan het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> op
	de NFS-cliënts, wat de gebruikers op deze machines in
	staat stelt hun quota-statistieken in te zien.</p><p><code class="command">rpc.rquotad</code> dient als volgt in
	<code class="filename">/etc/inetd.conf</code> aangezet te worden:</p><pre class="programlisting">rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</pre><p>Vervolgens dient <code class="command">inetd</code> opnieuw gestart
	te worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service inetd restart</code></strong></pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="snapshots.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="disks-encrypting.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">19.14. Snapshots van bestandssystemen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 19.16. Schijfpartities versleutelen</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>