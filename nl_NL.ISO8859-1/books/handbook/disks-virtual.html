<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>19.13. Netwerk-, geheugen-, en bestandsgebaseerde bestandssystemen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="disks.html" title="Hoofdstuk 19. Opslag" /><link rel="prev" href="backup-basics.html" title="19.12. Back-upbeginselen" /><link rel="next" href="snapshots.html" title="19.14. Snapshots van bestandssystemen" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.13. Netwerk-, geheugen-, en bestandsgebaseerde
      bestandssystemen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="backup-basics.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 19. Opslag</th><td width="20%" align="right"> <a accesskey="n" href="snapshots.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-virtual"></a>19.13. Netwerk-, geheugen-, en bestandsgebaseerde
      bestandssystemen</h2></div><div><span class="authorgroup">Geherstructureerd en verbeterd door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp80341200" class="indexterm"></a><a id="idp80341712" class="indexterm"></a><p>Naast de schijven die fysiek in de computer zitten,
      diskettes, CD's, harde schijven, enzovoort, worden er ook andere
      vormen van schijven door FreeBSD begrepen: de <em class="firstterm">virtuele
	schijven</em>.</p><a id="idp80343632" class="indexterm"></a><a id="idp80344144" class="indexterm"></a><a id="idp80344656" class="indexterm"></a><p>Dit omvat netwerkbestandssystemen zoals het <a class="link" href="network-nfs.html" title="29.3. Netwerkbestandssysteem (NFS)">Network File System</a> en Coda,
      geheugengebaseerde bestandssystemen en bestandsgebaseerde
      bestandssystemen.</p><p>Nagelang de gebruikte versie van FreeBSD, zijn er andere
      gereedschappen voor het aanmaken en gebruiken van
      bestandsgebaseerde en geheugengebaseerde bestandssystemen.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Gebruik <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a> om de apparaatnodes transparant voor
	de gebruiker toe te wijzen.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mdconfig"></a>19.13.1. Bestandsgebaseerd bestandssysteem</h3></div></div></div><a id="idp80349520" class="indexterm"></a><p>Met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> kunnen geheugenschijven, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>,
	ingesteld worden en aangezet worden.  Om
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> te gebruiken, moet de module <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	geladen worden of ondersteuning aan het
	kernelinstellingenbestand toegevoegd worden:</p><pre class="programlisting">device md</pre><p>Het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> ondersteunt drie types
	geheugen-gebaseerde virtuele schijven: geheugenschijven die met
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> toegewezen zijn, geheugenschijven die een
	bestand als basis gebruiken en geheugenschijven die swapruimte
	als basis gebruiken.  Een mogelijk gebruik is het aankoppelen
	van een beeld van een diskette of CD dat in een bestand bewaard
	wordt.</p><p>Om een bestaand beeld van een bestandssysteem aan te
	koppelen:</p><div class="example"><a id="idp80365136"></a><div class="example-title">Voorbeeld 19.3. <code class="command">mdconfig</code> gebruiken om een bestaand
	  beeld van een bestandssysteem aan te koppelen</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f schijfbeeld -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0 /mnt</code></strong></pre></div></div><br class="example-break" /><p>Om een nieuw beeld van een bestandssysteem aan te maken met
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>:</p><div class="example"><a id="idp80368976"></a><div class="example-title">Voorbeeld 19.4. Nieuwe bestandsgebaseerde schijf aanmaken met
	  <code class="command">mdconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=nieuwbeeld bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f nieuwbeeld -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -w md0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs md0a</code></strong>
/dev/md0a: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.25MB, 80 blks, 192 inodes.
super-block backups (for fsck -b #) at:
 160, 2720, 5280, 7840
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0a       4710    4  4330     0%    /mnt</pre></div></div><br class="example-break" /><p>Indien het eenheidsnummer niet met de optie
	<code class="option">-u</code> gespecificeerd wordt, gebruikt
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> de automatische toewijzing van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> om
	een ongebruikt apparaat te selecteren.  De naam van het
	toegewezen apparaat wordt op stdout weergegeven als
	<code class="filename">md4</code>.  Meer details staan in de
	hulppagina van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>.</p><p>Het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> is erg nuttig, hoewel het
	veel opdrachten vergt om een bestandsgebaseerd bestandssysteem
	aan te maken.  FreeBSD wordt met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> geleverd.  Dit
	programma stelt een <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>-schijf in door gebruik te maken
	van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>, zet er een bestandssysteem op door gebruik
	te maken van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> en koppel het aan door gebruik te
	maken van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Om hetzelfde bestandssysteembeeld als
	hierboven aan te maken en aan te koppelen:</p><div class="example"><a id="idp80383824"></a><div class="example-title">Voorbeeld 19.5. Instellen en aankoppelen van een bestandsgebaseerde
	  schijf met <code class="command">mdmfs</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=nieuwbeeld bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdmfs -F nieuwbeeld -s 5m md0 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4718    4  4338     0%    /mnt</pre></div></div><br class="example-break" /><p>Als de optie <code class="option">md</code> zonder eenheidsnummer
	gebruikt wordt, gebruikt <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> de automatische
	toewijzing van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> om automatisch een ongebruikt
	apparaat te selecteren.  Meer details staan in de hulppagina
	van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd5"></a>19.13.2. Geheugengebaseerd bestandssysteem</h3></div></div></div><a id="idp80399696" class="indexterm"></a><p>Voor een geheugen gebaseerd bestands systeem moet normaal
	gesproken <span class="quote">&#8220;<span class="quote">wisselbestand geheugen</span>&#8221;</span> gebruikt worden.
	Gebruik maken van wisselbestand geheugen wil niet perse zeggen
	dat de geheugen schijf direct in het wisselbestand gezet wordt,
	maar dat het bestand naar het wisselbestand geschreven kan worden
	indien nodig.  Het is ook mogelijk om <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a> gebaseerde
	geheugen schijven te maken, maar door hiervan gebruik te maken
	kan het gebeuren dat het systeem crashed als de kernel uit het
	geheugen loopt.</p><div class="example"><a id="idp80402384"></a><div class="example-title">Voorbeeld 19.6. Nieuwe geheugengebaseerde schijf aanmaken met
	  <code class="command">mdconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t swap -s 5m -u 1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -U md1</code></strong>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
	using 4 cylinder groups of 1.27MB, 81 blks, 192 inodes.
	with soft updates
super-block backups (for fsck -b #) at:
 160, 2752, 5344, 7936
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md1 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4718    4  4338     0%    /mnt</pre></div></div><br class="example-break" /><div class="example"><a id="idp80406864"></a><div class="example-title">Voorbeeld 19.7. Nieuwe geheugengebaseerde schijf aanmaken met
	  <code class="command">mdmfs</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdmfs -s 5m md2 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80409808"></a>19.13.3. Geheugenschijf van het systeem afkoppelen</h3></div></div></div><a id="idp80410448" class="indexterm"></a><p>Als een geheugen- of bestandsgebaseerd bestandssysteem
	niet gebruikt wordt, dienen alle bronnen aan het systeem
	vrijgegeven te worden.  Koppel als eerste het bestandssysteem
	af, gebruikt daarna <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> om de schijf van een
	systeem los te koppelen en de bronnen vrij te geven.</p><p>Om bijvoorbeeld alle bronnen die door
	<code class="filename">/dev/md4</code> gebruikt worden los te koppelen
	en vrij te geven:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4
	</code></strong></pre><p>Het is mogelijk om de informatie over ingestelde <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	apparaten weer te geven door gebruik te maken van
	<code class="command">mdconfig -l</code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="backup-basics.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="snapshots.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">19.12. Back-upbeginselen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 19.14. Snapshots van bestandssystemen</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>