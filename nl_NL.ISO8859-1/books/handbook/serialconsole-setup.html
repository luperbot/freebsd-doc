<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>26.6. Seriële console opzetten</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="serialcomms.html" title="Hoofdstuk 26. Seriële communicatie" /><link rel="prev" href="dialout.html" title="26.5. Uitbeldienst" /><link rel="next" href="ppp-and-slip.html" title="Hoofdstuk 27. PPP en SLIP" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.6. Seriële console opzetten</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dialout.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 26. Seriële communicatie</th><td width="20%" align="right"> <a accesskey="n" href="ppp-and-slip.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serialconsole-setup"></a>26.6. Seriële console opzetten</h2></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Kazutaka</span> <span class="surname">YOKOTA</span></span>. </span></div><div><span class="authorgroup">Gebaseerd op een document van <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Paul</span></span>. </span></div></div></div><div xmlns="" class="warning"><h3 class="admontitle">Waarschuwing: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vanaf FreeBSD 8.0 zijn de seriële poorten
	hernoemd van
	<code class="filename">/dev/cuadN</code> naar
	<code class="filename">/dev/cuauN</code> en
	van
	<code class="filename">/dev/ttydN</code> naar
	<code class="filename">/dev/ttyuN</code>.
	FreeBSD 7.X gebruikers moeten de documentatie aanpassen naar
	deze wijzigingen.</p></div><a id="idp84293072" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-intro"></a>26.6.1. Inleiding</h3></div></div></div><p>FreeBSD biedt de mogelijkheid om op een systeem op te starten
	met slechts een domme terminal en een seriële poort als
	console.  Dit soort opstellingen is handig voor twee soorten
	mensen:  voor systeembeheerders die FreeBSD willen installeren op
	machines die geen toetsenbord of beeldscherm hebben en voor
	ontwikkelaars die de kernel of apparaatstuurprogramma's willen
	debuggen.</p><p>Zoals beschreven in <a class="xref" href="boot.html" title="Hoofdstuk 13. Het FreeBSD opstartproces">Hoofdstuk 13, <em>Het FreeBSD opstartproces</em></a>, gebruikt FreeBSD
	drie fasen voor het opstarten.  De eerste twee fasen bevinden
	zich in de code van het opstartblok dat zich aan het begin van
	de opstartslice van FreeBSD op de opstartschijf bevindt.  Het
	opstartblok laadt vervolgens de opstartlader
	(<code class="filename">/boot/loader</code>) en draait als de code van
	de derde fase.</p><p>Om de seriële console gereed te maken moeten de code
	in het opstartblok, de code van de opstartlader en de kernel
	worden ingesteld.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto-fast"></a>26.6.2. De seriële console instellen, korte versie</h3></div></div></div><p>Deze sectie neemt aan dat de standaard opstelling wordt
	gebruikt en dat een kort overzicht voor het opzetten van de
	seriële console gewenst is.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Verbind de seriële kabel met
	    <code class="filename">COM1</code> en de leidende
	    terminal;</p></li><li class="step"><p>Om alle opstartmeldingen op de seriële console te
	    zien, dient het volgende commando als supergebruiker
	    uitgevoerd te worden:</p><pre class="screen"><code class="prompt">#</code> echo 'console="comconsole"' &gt;&gt; /boot/loader.conf</pre></li><li class="step"><p>Bewerk <code class="filename">/etc/ttys</code> en wijzig
	    <code class="literal">off</code> in <code class="literal">on</code> en
	    <code class="literal">dialup</code> in <code class="literal">vt100</code> voor
	    de regel <code class="filename">ttyu0</code>.  Indien dit niet
	    gebeurt is er geen wachtwoord nodig om met de seriële
	    console te verbinden, wat tot een mogelijk beveiligingslek
	    leidt;</p></li><li class="step"><p>Start het systeem opnieuw op om te zien of de
	    veranderingen effect hebben.</p></li></ol></div><p>Indien een andere instelling nodig is, is er een
	diepgaandere uitleg over instellingen beschikbaar in
	<a class="xref" href="serialconsole-setup.html#serialconsole-howto" title="26.6.3. De seriële console instellen">Paragraaf 26.6.3, &#8220;De seriële console instellen&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-howto"></a>26.6.3. De seriële console instellen</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Bereid een seriële kabel voor.</p><a id="idp84315216" class="indexterm"></a><p>Benodigd zijn een nulmodem-kabel òf een
	    standaard seriële kabel samen met een
	    nulmodem-adapter.  Zie <a class="xref" href="serial.html#serial-cables-ports" title="26.2.2. Kabels en poorten">Paragraaf 26.2.2, &#8220;Kabels en poorten&#8221;</a> voor een beschrijving
	    van seriële kabels.</p></li><li class="step"><p>Ontkoppel het toetsenbord.</p><p>De meeste PC-systemen zoeken naar het toetsenbord
	    tijdens de Power-On Self-Test (POST) en geven een
	    foutmelding als het toetsenbord niet is gevonden.  Sommige
	    systemen klagen luid over het ontbreken van een toetsenbord
	    en gaan niet verder met opstarten totdat het is
	    aangesloten.</p><p>Indien de computer klaagt over de fout, maar desondanks
	    opstart, is het niet nodig iets speciaals te doen.  Sommige
	    machines waarop Phoenix BIOS is geïnstalleerd melden
	    enkel <span class="errorname">Toetsenbord faalde</span> en gaan
	    normaal door met opstarten.</p><p>Indien de machine weigert zonder toetsenbord op te
	    starten dient het BIOS ingesteld te worden zodat het deze
	    fout negeert (als het dit kan).  Raadpleeg het handboek van
	    het moederbord voor verdere aanwijzingen.</p><div xmlns="" class="tip"><h3 class="admontitle">Tip: </h3><p xmlns="http://www.w3.org/1999/xhtml">Stel het toetsenbord in op <span class="quote">&#8220;<span class="quote">Niet
		geïnstalleerd</span>&#8221;</span> in de BIOS-instellingen.  Het
	      is dan nog steeds mogelijk om het toetsenbord te
	      gebruiken.  Dit zorgt er alleen voor dat het BIOS niet
	      naar een toetsenbord zoekt tijdens het aanzetten.  Het
	      BIOS dient niet te klagen als het toetsenbord ontbreekt.
	      Het is mogelijk om het toetsenbord aangesloten te laten,
	      zelfs als deze vlag is ingesteld op <span class="quote">&#8220;<span class="quote">Niet
		geïnstalleerd</span>&#8221;</span> en het toetsenbord werkt nog
	      steeds.  Kijk, als de bovenstaande optie niet in het BIOS
	      aanwezig is, naar een optie <span class="quote">&#8220;<span class="quote">Halt on Error</span>&#8221;</span>.
	      Het instellen van deze optie op <span class="quote">&#8220;<span class="quote">All but
		keyboard</span>&#8221;</span> of zelfs op <span class="quote">&#8220;<span class="quote">No Errors</span>&#8221;</span>
	      zal hetzelfde effect hebben.</p></div><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als een systeem een <span class="trademark">PS/2</span>®-muis heeft, is het goed
	      mogelijk dat naast het toetsenbord ook de muis
	      losgekoppeld moet worden.  Dit komt doordat <span class="trademark">PS/2</span>®-muizen
	      wat hardware met het toetsenbord delen.  Als de muis
	      aangesloten blijft, kan het zoeken naar het toetsenbord
	      als resultaat hebben dat het toetsenbord er nog steeds
	      is.  Een Gateway 2000 Pentium 90 MHz systeem met een
	      AMI BIOS schijnt zich op deze manier te gedragen.  Over
	      het algemeen is dit geen probleem aangezien een muis
	      zonder toetsenbord sowieso weinig nut heeft.</p></div></li><li class="step"><p>Sluit een domme terminal aan op
	    <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>).</p><p>Indien er geen domme terminal aanwezig is, kan een oude
	    PC met een modemprogramma of de seriële poort van een
	    andere <span class="trademark">UNIX</span>® machine gebruikt worden.  Indien er geen
	    <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>) aanwezig is dient deze
	    geregeld te worden.  Op dit moment is er geen manier om een
	    andere poort dan <code class="filename">COM1</code> voor de
	    opstartblokken te selecteren, afgezien van deze opnieuw te
	    compileren.  Indien <code class="filename">COM1</code> al voor
	    een ander apparaat gebruikt wordt, verwijder dat apparaat
	    dan tijdelijk en installeer een nieuw opstartblok en een
	    nieuwe kernel zodra FreeBSD werkt.  Er wordt aangenomen dat
	    <code class="filename">COM1</code> sowieso beschikbaar is op een
	    bestands-/reken-/terminalserver.  Als
	    <code class="filename">COM1</code> ècht voor iets anders
	    nodig is (en het niet mogelijk is om dat op
	    <code class="filename">COM2</code>
	    (<code class="filename">sio1</code>) over te zetten), is het
	    sowieso al onverstandig om hiermee bezig te zijn.)</p></li><li class="step"><p>Controleer of het instellingenbestand van de kernel de
	    juiste vlaggen ingesteld heeft voor
	    <code class="filename">COM1</code>
	    (<code class="filename">sio0</code>).</p><p>Relevante vlaggen zijn:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">0x10</code></span></dt><dd><p>Zet console-ondersteuning voor deze eenheid aan.
		  De andere consolevlaggen worden genegeerd tenzij deze
		  is aangezet.  Momenteel kan ten hoogste
		  één eenheid console-ondersteuning
		  hebben.  De eerste (in de volgorde van het
		  instellingenbestand) waarvan deze vlag is aangezet
		  heeft de voorkeur.  Deze optie zelf maakt de
		  seriële poort geen console.  Stel de volgende
		  vlag in of gebruik de onderstaande optie
		  <code class="option">-h</code> samen met deze vlag.</p></dd><dt><span class="term"><code class="literal">0x20</code></span></dt><dd><p>Dwingt deze eenheid om de console te zijn (tenzij
		  er een andere console met hogere prioriteit is),
		  ongeacht de onderstaande optie <code class="option">-h</code>.
		  De vlag <code class="literal">0x20</code> dient samen met de
		  vlag <code class="option">0x10</code> gebruikt te worden.</p></dd><dt><span class="term"><code class="literal">0x40</code></span></dt><dd><p>Reserveert deze eenheid (in samenwerking met
		  <code class="literal">0x10</code>) en maakt de eenheid
		  ontoegankelijk voor normale toegang.  Deze vlag dient
		  niet aangezet te worden op de seriële poort van
		  de eenheid die als seriële console gebruikt gaat
		  worden.  De enige functie van deze vlag is de eenheid
		  voor het debuggen van de kernel op afstand aan te
		  merken.  Zie het <a class="link" href="../../../../doc/nl_NL.ISO8859-1/books/developers-handbook/index.html" target="_top">Ontwikkelaarshandboek</a>
		  voor meer informatie over debuggen op afstand.</p></dd></dl></div><p>Voorbeeld:</p><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><p>Zie de hulppagina <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> voor meer details.</p><p>Indien de vlaggen niet waren ingesteld, dient
	    UserConfig gedraaid te worden (op een andere console) of de
	    kernel opnieuw gecompileerd te worden.</p></li><li class="step"><p>Maak <code class="filename">boot.config</code> aan in de
	    hoofdmap van de partitie <code class="literal">a</code> van de
	    opstartschijf.</p><p>Dit bestand instrueert de code op het opstartblok hoe
	    het systeem opgestart dient te worden.  Om de seriële
	    console te activeren, zijn één of meer van de
	    volgende opties nodig.  Indien meerdere opties gewenst
	    zijn, dienen ze allemaal op dezelfde regel te staan:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-h</code></span></dt><dd><p>Wisselt tussen de interne en de seriële
		  console.  Indien bijvoorbeeld vanaf de interne
		  (video)console opgestart wordt, kan
		  <code class="option">-h</code> gebruikt worden om het
		  console-apparaat van de opstartlader en de kernel om
		  te leiden naar de seriële console.  Indien vanaf
		  de seriële poort opgestart wordt, kan
		  <code class="option">-h</code> gebruikt worden om de
		  opstartlader en de kernel het videoscherm als console
		  te laten gebruiken.</p></dd><dt><span class="term"><code class="option">-D</code></span></dt><dd><p>Wisselt tussen opstellingen met een enkele en een
		  dubbele console.  In opstellingen met een enkele
		  console is de console òfwel de interne console
		  (videoscherm) òfwel de seriële poort,
		  afhankelijk van bovenstaande optie
		  <code class="option">-h</code>.  In opstellingen met een dubbele
		  console worden zowel het videoscherm als de
		  seriële poort tegelijkertijd console, ongeacht
		  de toestand van de optie <code class="option">-h</code>.  De
		  opstelling met een dubbele console heeft alleen
		  effect als het opstartblok draait.  Zodra de
		  opstartlader het overneemt, wordt de console die met
		  de optie <code class="option">-h</code> gespecificeerd is de
		  enige console.</p></dd><dt><span class="term"><code class="option">-P</code></span></dt><dd><p>Zorgt ervoor dat het opstartblok naar het
		  toetsenbord zoekt.  Als er geen toetsenbord wordt
		  gevonden, worden de opties <code class="option">-D</code> en
		  <code class="option">-h</code> automatisch ingesteld.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vanwege ruimtebeperkingen in de huidige versie
		    van het opstartblok, is de optie
		    <code class="option">-P</code> alleen in staat om uitgebreide
		    toetsenborden te detecteren.  Toetsenborden met
		    minder dan 101 toetsen (en zonder de toetsen F11 en
		    F12) worden mogelijk niet gedetecteerd.
		    Toetsenborden op sommige laptops worden vanwege
		    deze beperking mogelijk niet correct gevonden.
		    Indien dit het geval is met een systeem, vermijd
		    dan de optie <code class="option">-P</code>.  Helaas is er
		    geen mogelijkheid om dit probleem te
		    omzeilen.</p></div></dd></dl></div><p>Gebruik om de console automatisch te selecteren
	    òfwel de optie <code class="option">-P</code> òfwel de
	    optie <code class="option">-h</code> om de seriële console te
	    activeren.</p><p>De andere opties beschreven in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> kunnen ook
	    gebruikt worden.</p><p>De opties, behalve <code class="option">-P</code>, worden aan de
	    opstartlader (<code class="filename">/boot/loader</code>
	    doorgegeven.  De opstartlader bepaalt of de interne
	    videopoort of de seriële poort de console wordt door
	    enkel naar de toestand van de optie <code class="option">-h</code> te
	    kijken.  Dit betekent dat als de optie <code class="option">-D</code>,
	    maar niet de optie <code class="option">-h</code> in
	    <code class="filename">/boot.config</code> gespecificeerd wordt, de
	    seriële poort alleen tijdens het opstartblok als
	    console gebruikt kan worden, de opstartlader gebruikt het
	    interne videoscherm als console.</p></li><li class="step"><p>Start de machine op.</p><p>Als FreeBSD gestart wordt, tonen de opstartblokken de
	    inhoud van <code class="filename">/boot.config</code> op de
	    console.  Bijvoorbeeld:</p><pre class="screen">/boot.config: -P
Keyboard: no</pre><p>De tweede regel verschijnt alleen als
	    <code class="option">-P</code> in <code class="filename">/boot.config</code>
	    staat en aangegeven wordt of het toetsenbord aanwezig of
	    afwezig is.  Deze berichten gaan of naar de seriële of
	    interne console of naar beide, afhankelijk van de optie in
	    <code class="filename">/boot.config</code>.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Opties</th><th>Bericht gaat naar</th></tr></thead><tbody><tr><td>geen</td><td>interne console</td></tr><tr><td><code class="option">-h</code></td><td>seriële console</td></tr><tr><td><code class="option">-D</code></td><td>seriële en interne consoles</td></tr><tr><td><code class="option">-Dh</code></td><td>seriële en interne consoles</td></tr><tr><td><code class="option">-P</code>, toetsenbord aanwezig</td><td>interne console</td></tr><tr><td><code class="option">-P</code>, toetsenbord afwezig</td><td>seriële console</td></tr></tbody></table></div><p>Na de bovenstaande berichten is er een korte pauze
	    voordat de opstartblokken doorgaan met het laden van de
	    opstartlader en voordat er verdere berichten op de console
	    worden afgebeeld.  Normaalgesproken hoeven de
	    opstartblokken niet onderbroken te worden, maar het kan
	    gedaan worden om er zeker van te zijn dat alles goed is
	    ingesteld.</p><p>Om het opstartproces te onderbreken, kan op elke andere
	    toets dan <span class="keycap"><strong>Enter</strong></span> gedrukt worden.  De
	    opstartblokken vragen dan om verdere actie.  Er verschijnt
	    iets als het volgende:</p><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:</pre><p>Controleer of de bovenstaande boodschap naar de
	    seriële of interne console of beide gaat, naar gelang
	    de opties in <code class="filename">/boot.config</code>.  Indien de
	    boodschap op de juiste console verschijnt kan op
	    <span class="keycap"><strong>Enter</strong></span> gedrukt worden om het opstartproces
	    voort te zetten.</p><p>Als de seriële console gewenst is maar de prompt
	    niet op de seriële terminal verschijnt, is er iets mis
	    met de instellingen.  Voer in de tussentijd
	    <code class="option">-h</code> in en druk op <span class="keycap"><strong>Enter</strong></span> of
	    <span class="keycap"><strong>Return</strong></span> (indien mogelijk) om aan het
	    opstartblok (en vervolgens de opstartlader en de kernel) te
	    vertellen dat de seriële poort console moet worden.
	    Controleer als het systeem draait wat er verkeerd
	    ging.</p></li></ol></div><p>Nadat de opstartlader is geladen en het derde stadium van
	het opstartproces bereikt is, kan er nog steeds gewisseld
	worden tussen de interne console en de seriële console
	door de juiste omgevingsvariabelen in de opstartlader in te
	stellen.  Zie <a class="xref" href="serialconsole-setup.html#serialconsole-loader" title="26.6.6. De console vanuit de opstartlader veranderen">Paragraaf 26.6.6, &#8220;De console vanuit de opstartlader veranderen&#8221;</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-summary"></a>26.6.4. Samenvatting</h3></div></div></div><p>Hieronder volgt een samenvatting van de verschillende
	instellingen die in deze sectie en de uiteindelijk gekozen
	console beschreven zijn.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84408400"></a>26.6.4.1. Geval 1: vlaggen ingesteld op 0x10 voor
	  <code class="filename">sio</code></h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x10 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="left">Opties in /boot.config</th><th align="left">Console tijdens de opstartblokken</th><th align="left">Console tijdens de opstartlader</th><th align="left">Console in kernel</th></tr></thead><tbody><tr><td>niets</td><td>intern</td><td>intern</td><td>intern</td></tr><tr><td><code class="option">-h</code></td><td>serieel</td><td>serieel</td><td>serieel</td></tr><tr><td><code class="option">-D</code></td><td>serieel en intern</td><td>intern</td><td>intern</td></tr><tr><td><code class="option">-Dh</code></td><td>serieel en intern</td><td>serieel</td><td>serieel</td></tr><tr><td><code class="option">-P</code>, toetsenbord aanwezig</td><td>intern</td><td>intern</td><td>intern</td></tr><tr><td><code class="option">-P</code>, toetsenbord afwezig</td><td>serieel en intern</td><td>serieel</td><td>serieel</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84430928"></a>26.6.4.2. Geval 2: vlaggen ingesteld op 0x30 voor
	  <code class="filename">sio</code></h4></div></div></div><pre class="programlisting">device sio0 at isa? port IO_COM1 flags 0x30 irq 4</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Opties in /boot.config</th><th>Console tijdens de opstartblokken</th><th>Console tijdens de opstartlader</th><th>Console in kernel</th></tr></thead><tbody><tr><td>niets</td><td>intern</td><td>intern</td><td>serieel</td></tr><tr><td><code class="option">-h</code></td><td>serieel</td><td>serieel</td><td>serieel</td></tr><tr><td><code class="option">-D</code></td><td>serieel en intern</td><td>intern</td><td>serieel</td></tr><tr><td><code class="option">-Dh</code></td><td>serieel en intern</td><td>serieel</td><td>serieel</td></tr><tr><td><code class="option">-P</code>, toetsenbord aanwezig</td><td>intern</td><td>intern</td><td>serieel</td></tr><tr><td><code class="option">-P</code>, toetsenbord afwezig</td><td>serieel en intern</td><td>serieel</td><td>serieel</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-tips"></a>26.6.5. Tips voor de seriële console</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84453968"></a>26.6.5.1. Een hogere snelheid voor de seriële poort
	  instellen</h4></div></div></div><p>Standaard zijn de instellingen van de seriële poort:
	  9600 baud, 8 bits, geen pariteit, en 1 stopbit.  Indien het
	  wenselijk is om de snelheid te veranderen, zijn de volgened
	  opties beschikbaar:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Hercompileer de opstart blokken met
	      <code class="varname">BOOT_COMCONSOLE_SPEED</code> ingesteld op de
	      nieuwe console snelheid.  Zie <a class="xref" href="serialconsole-setup.html#serialconsole-com2" title="26.6.5.2. Een andere seriële poort dan sio0 voor de console gebruiken">Paragraaf 26.6.5.2, &#8220;Een andere seriële poort dan
	  <code class="filename">sio0</code> voor de console
	  gebruiken&#8221;</a>
	      voor gedetailleerde instructies over het bouwen en
	      installeren van nieuwe opstartblokken.</p><p>Als de seriële poort anders is gespecificeerd dan
	      met <code class="option">-h</code> bij het opstarten, of als de
	      seriële console die gebruikt wordt door de kernel
	      anders is dan die gebruikt wordt door de opstart blokken,
	      dan moet de volgende optie aan het kernel instellingen
	      bestand worden toegevoegd en moet de kernel opnieuw
	      gecompileerd worden:</p><pre class="programlisting">options CONSPEED=19200</pre></li><li class="listitem"><p>Gebruik de <code class="option">-S</code> opstartoptie van de
	      kernel.  De optie <code class="option">-S</code> kan worden
	      toegevoegd aan het bestand
	      <code class="filename">/boot.config</code>.  Zie de handleiding
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> voor een beschrijving over hoe opties kunnen
	      worden toegevoegd aan <code class="filename">/boot.conf</code>, en
	      welke opties ondersteund worden.</p></li><li class="listitem"><p>Zet de <code class="varname">comconsole_speed</code> optie in
	      het <code class="filename">/boot/loader.conf</code> bestand.</p><p>Deze optie is ervan afhankelijk dat de
	      <code class="varname">console</code>, <code class="varname">boot_serial</code>
	      en <code class="varname">boot_multicons</code> ingesteld staan in
	      <code class="filename">/boot/loader.conf</code>.  Een voorbeeld
	      van hoe <code class="varname">comconsole_speed</code> gebruikt kan
	      worden om de console snelheid aan te passen:</p><pre class="programlisting">boot_multicons="YES"
boot_serial="YES"
console_speed="115200"
console="comconsole,vidconsole"</pre></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-com2"></a>26.6.5.2. Een andere seriële poort dan
	  <code class="filename">sio0</code> voor de console
	  gebruiken</h4></div></div></div><p>Het gebruik van een andere poort dan
	  <code class="filename">sio</code> vergt wat hercompileren.  Indien
	  het gewenst is om een andere seriële poort te gebruiken,
	  hercompileer dan de opstartblokken, de opstartlader en de
	  kernel als volgt:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>De broncode van de kernel moet beschikbaar zijn.
	      Zie <a class="xref" href="updating-upgrading.html" title="Hoofdstuk 24. FreeBSD updaten en upgraden">Hoofdstuk 24, <em>FreeBSD updaten en upgraden</em></a>;</p></li><li class="step"><p>Bewerk <code class="filename">/etc/make.conf</code> en stel
	      <code class="literal">BOOT_COMCONSOLE_PORT</code> in op het adres
	      van de te gebruiken poort (0x3F8, 0x2F8, 0x3E8 of 0x2E8).
	      Alleen <code class="filename">sio0</code> tot en met
	      <code class="filename">sio3</code>
	      (<code class="filename">COM1</code> tot en met
	      <code class="filename">COM4</code>) zijn te gebruiken.
	      Seriële kaarten met meerdere poorten werken niet.
	      Interrupts instellen is niet nodig;</p></li><li class="step"><p>Maak een aangepast kernelinstellingenbestand aan en
	      voeg de juiste vlaggen toe voor de te gebruiken
	      seriële poort.  Als bijvoorbeeld
	       <code class="filename">sio1</code>
	      (<code class="filename">COM2</code>) de console moet
	      worden:</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x10 irq 3</pre><p>Alternatief:</p><pre class="programlisting">device sio1 at isa? port IO_COM2 flags 0x30 irq 3</pre><p>Stel de consolevlaggen voor de andere seriële
	      poorten niet in;</p></li><li class="step"><p>Hercompileer en installeer de opstartblokken en de
	      opstartlader:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/boot</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre></li><li class="step"><p>Herbouw en installeer de kernel;</p></li><li class="step"><p>Schrijf de opstartblokken met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=disklabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">disklabel</span>(8)</span></a> naar
	      de opstartschijf en start met de nieuwe kernel op.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-ddb"></a>26.6.5.3. De debugger DDB gebruiken via de seriële
	  verbinding</h4></div></div></div><p>Als het wenselijk is om vanuit de seriële console in
	  de kerneldebugger te vallen - nuttig voor diagnose op
	  afstand, maar ook gevaarlijk indien een onbedoelde BREAK op
	  de seriële poort wordt gegenereerd! - compileer de
	  kernel dan met de volgende opties:</p><pre class="programlisting">options BREAK_TO_DEBUGGER
options DDB</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84491856"></a>26.6.5.4. Een aanmeldprompt op de seriële console
	  krijgen</h4></div></div></div><p>Hoewel dit niet nodig is, kan het gewenst zijn om een
	  <span class="emphasis"><em>aanmeld</em></span>prompt over de seriële lijn
	  te krijgen, nu het mogelijk is om opstartboodschappen te zien
	  en de kerneldebugsessie door de seriële console betreden
	  kan worden.  Hier volgt hoe het te doen.</p><p>Open het bestand <code class="filename">/etc/ttys</code> met een
	  tekstverwerker en zoek de volgende regels:</p><pre class="programlisting">ttyu0 "/usr/libexec/getty std.9600" unknown off secure
ttyu1 "/usr/libexec/getty std.9600" unknown off secure
ttyu2 "/usr/libexec/getty std.9600" unknown off secure
ttyu3 "/usr/libexec/getty std.9600" unknown off secure</pre><p><code class="filename">ttyu0</code> tot en met
	  <code class="filename">ttyu3</code> komen overeen met
	  <code class="filename">COM1</code> tot en met
	  <code class="filename">COM4</code>.  Wijzig <code class="literal">off</code>
	  in <code class="literal">on</code> voor de gewenste poort.  Als de
	  snelheid van de seriële poort is gewijzigd, wijzig dan
	  <code class="literal">std.9600</code> zodat het met de huidige
	  instelling overeenkomt, bijvoorbeeld
	  <code class="literal">std.19200</code>.</p><p>Het kan ook wenselijk zijn om het terminaltype te
	  wijzigen van <code class="literal">unknown</code> naar het eigenlijke
	  type van de seriële terminal.</p><p>Voer <code class="literal">kill -HUP 1</code> uit na het wijzigen
	  van het bestand om de wijzigingen actief te maken.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-loader"></a>26.6.6. De console vanuit de opstartlader veranderen</h3></div></div></div><p>De vorige secties beschreven hoe de seriële console
	ingesteld kan worden door het instellen van het opstartblok.
	Deze sectie toont dat het mogelijk is om de console te
	specificeren door het invoeren van enkele opdrachten en
	omgevingsvariabelen in de opstartlader.  Aangezien de
	opstartlader tijdens het derde stadium van het opstartproces
	wordt geactiveerd, na het opstartblok, overheersen de
	instellingen in de opstartlader de instellingen in het
	opstartblok.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84509008"></a>26.6.6.1. De seriële console instellen</h4></div></div></div><p>Het is mogelijk om de opstartlader en de kernel gebruik te
	  laten maken van de seriële console door slechts
	  één regel naar
	  <code class="filename">/boot/loader.conf</code> te schrijven:</p><pre class="programlisting">console="comconsole"</pre><p>Dit heeft effect ongeacht de instellingen in het
	  opstartblok die in de vorige sectie zijn besproken.</p><p>Het is verstandig om bovenstaande regel de eerste regel
	  van <code class="filename">/boot/loader.conf</code> te maken om de
	  opstartboodschappen zo vroeg mogelijk op de seriële
	  console te kunnen zien.</p><p>Evenzo kan de interne videoconsole worden gespecificeerd
	  met:</p><pre class="programlisting">console="vidconsole"</pre><p>Indien de omgevingsvariabele <code class="envar">console</code> van
	  de opstartlader niet ingesteld wordt, gebruikt de
	  opstartlader, en vervolgens de kernel, de console die door de
	  optie <code class="option">-h</code> in het opstartblok wordt
	  aangegeven.</p><p>De console kan worden gespecificeerd in
	  <code class="filename">/boot/looader.conf.local</code> of in
	  <code class="filename">/boot/loader.conf</code>.</p><p>Zie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> voor meer informatie.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Momenteel heeft de opstartlader een optie die gelijk is
	    aan de optie <code class="option">-P</code> van het opstartblok en is
	    er geen voorziening om automatisch de interne console en de
	    seriële console te selecteren afhankelijk van de
	    aanwezigheid van een toetsenbord.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84530000"></a>26.6.6.2. Een andere seriële poort dan
	  <code class="filename">sio</code> voor de console
	  gebruiken</h4></div></div></div><p>Compileer de opstartlader opnieuw om een andere
	  seriële poort dan <code class="filename">sio</code> voor de
	  seriële console te gebruiken.  Volg de procedure zoals
	  beschreven in <a class="xref" href="serialconsole-setup.html#serialconsole-com2" title="26.6.5.2. Een andere seriële poort dan sio0 voor de console gebruiken">Paragraaf 26.6.5.2, &#8220;Een andere seriële poort dan
	  <code class="filename">sio0</code> voor de console
	  gebruiken&#8221;</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-caveats"></a>26.6.7. Valkuilen</h3></div></div></div><p>De doelstelling van dit stuk is beheerders in staat te
	stellen om toegewijde servers te installeren die geen grafische
	hardware of aangesloten toetsenborden nodig hebben.  Hoewel de
	meeste systemen zonder toetsenbord opstarten, zijn er helaas
	aardig wat die niet zonder een grafische adapter opstarten.
	Machines met een AMI BIOS kunnen ingesteld worden om zonder
	grafische adapter op te starten door de instelling
	<span class="quote">&#8220;<span class="quote">graphics adapter</span>&#8221;</span> in de CMOS-instellingen te
	wijzigen in <span class="quote">&#8220;<span class="quote">Not installed</span>&#8221;</span>.</p><p>De meeste systemen ondersteunen deze optie echter niet en
	weigeren om zonder weergavehardware op te starten.  Voor deze
	machines is het nodig om een of andere grafische kaart in een
	systeem te laten (zelfs al is het een aftandse monochrome
	kaart) hoewel het niet nodig is om een beeldscherm aan te
	sluiten.  Ook kan geprobeerd worden om een AMI BIOS te
	installeren.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dialout.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="serialcomms.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="ppp-and-slip.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">26.5. Uitbeldienst </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> Hoofdstuk 27. PPP en SLIP</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>