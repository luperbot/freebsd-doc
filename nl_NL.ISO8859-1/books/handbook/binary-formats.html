<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>4.12. Binaire formaten</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="basics.html" title="Hoofdstuk 4. UNIX® beginselen" /><link rel="prev" href="basics-devices.html" title="4.11. Apparaten en apparaatnodes" /><link rel="next" href="basics-more-information.html" title="4.13. Meer informatie" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.12. Binaire formaten</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="basics-devices.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 4. <span class="trademark">UNIX</span>® beginselen</th><td width="20%" align="right"> <a accesskey="n" href="basics-more-information.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>4.12. Binaire formaten</h2></div></div></div><p>Om te kunnen begrijpen waarom FreeBSD gebruik maakt van
      het <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a> formaat, is het belangrijk op de hoogte zijn
      van de drie <span class="quote">&#8220;<span class="quote">dominante</span>&#8221;</span> uitvoerbare formaten voor
      <span class="trademark">UNIX</span>®:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>Het oudste en <span class="quote">&#8220;<span class="quote">klassieke</span>&#8221;</span> <span class="trademark">UNIX</span>® object
	  formaat.  Het gebruikt een korte en compacte kop met een
	  magisch nummer aan het begin dat veel gebruikt wordt
	  om het formaat aan te geven (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> geeft meer
	  details).  Het bevat drie laadbare segmenten: .tekst, .data
	  en .bss, een symbolentabel en een stringtabel.</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>Het SVR3 object formaat.  De kop bestaat uit een
	  sectietabel, dus er kunnen meer dan alleen .tekst, .data,
	  en .bss secties zijn.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>De opvolger van <acronym class="acronym">COFF</acronym>, heeft
	  meerdere secties en 32-bit of 64-bit als mogelijke waarden.
	  Één nadeel: <acronym class="acronym">ELF</acronym> was ook
	  ontworpen met de aanname dat er maar één
	  ABI per systeemarchitectuur zou zijn.  Deze aanname is
	  eigenlijk redelijk incorrect, zelfs niet in de
	  commerciële SYSV wereld (die op zijn minst drie ABIs
	  heeft: SRV4, Solaris en SCO).</p><p>FreeBSD probeert om dit probleem heen te werken door
	  een hulpprogramma te leveren voor het
	  <span class="emphasis"><em>brandmerken</em></span> van een bekend
	  <acronym class="acronym">ELF</acronym> uitvoerbaar bestand met informatie
	  over de ABI waar hij mee kan werken.  In <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>
	  staat meer informatie.</p></li></ul></div><p>FreeBSD komt uit het <span class="quote">&#8220;<span class="quote">klassieke</span>&#8221;</span> kamp en gebruikt
      het <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> formaat, een technologie die zich bewezen heeft
      door meerdere generaties van BSD versies heen, tot het begin van
      de 3.X versies.  Alhoewel het al mogelijk was om
      <acronym class="acronym">ELF</acronym> programma's en kernels te bouwen en te
      draaien op een FreeBSD systeem , verzette FreeBSD zich eerst tegen de
      druk om over te schakelen naar <acronym class="acronym">ELF</acronym> als
      standaard formaat.  Waarom?  Toen het <span class="trademark">Linux</span>® kamp hun pijnlijke
      wissel maakte naar <acronym class="acronym">ELF</acronym>, was dat niet zozeer
      om van het <code class="filename">a.out</code> formaat af te komen, maar
      meer omdat van het op de inflexibele jump-tabel gebaseerde
      gedeelde bibliotheekmechanisme af te komen, die het maken van
      gedeelde bibliotheken erg moeilijk maakte voor bedrijven en
      ontwikkelaars.  Omdat de <acronym class="acronym">ELF</acronym> hulprogramma's
      een oplossing voor het gedeelde bibliotheek probleem waren en
      algemeen gezien werden als een <span class="quote">&#8220;<span class="quote">stap vooruit</span>&#8221;</span>,
      werd de migratie geaccepteerd als noodzakelijk kwaad en werd de
      wissel uitgevoerd.  Het gedeelde bibliotheek mechanisme van FreeBSD
      is meer gebaseerd op het gedeelde bibliotheek mechanisme van
      Sun's <span class="trademark">SunOS</span>&#8482; en daardoor erg makkelijk te gebruiken.</p><p>Waarom zijn er zoveel verschillende formaten?</p><p>In het duistere donkere verleden was er simpele hardware.
      Deze simpele hardware ondersteunde een simpel klein systeem.
      <code class="filename">a.out</code> was volledig adequaat voor de taak om
      binaire bestanden op dat simpele systeem te vertegenwoordigen
      (een PDP-11).  Toen mensen <span class="trademark">UNIX</span>® van deze machine gingen porten,
      behielden ze het <code class="filename">a.out</code> formaat omdat het
      voldeed voor de vroege ports van <span class="trademark">UNIX</span>® naar architecturen
      als Motorola 68k, VAXen, enzovoort.</p><p>Toen besloot een slimme hardware engineer dat als hij de
      software kon forceren om wat simpele truckjes te doen, hij in
      staat was om een paar onderdelen van het ontwerp af te schaven,
      waardoor zijn processorcore sneller kon draaien.  Terwijl men
      probeerde om het met deze nieuwe vorm van hardware te laten
      werken (vandaag de dag beter bekend als <acronym class="acronym">RISC</acronym>),
      was <code class="filename">a.out</code> te beperkt voor deze hardware.
      Dus werden er vele formaten ontworpen om betere prestaties te
      krijgen uit deze hardware dan het simpele formaat
      <code class="filename">a.out</code> kon leveren.  Toen werden
      <acronym class="acronym">COFF</acronym>, <acronym class="acronym">ECOFF</acronym> en een paar
      andere duistere formaten uitgevonden en werden de limieten
      verkend, waarna men besloot om zich te richten op
      <acronym class="acronym">ELF</acronym>.</p><p>Daarnaast werden programma's groter en bleven schijven (en
      fysiek geheugen) relatief klein, zodat het concept van een
      gedeelde bibliotheek werd geboren.  Het VM systeem werd ook meer
      verfijnd.  Terwijl al deze verbeteringen bereikt werden door het
      <code class="filename">a.out</code> formaat, werd het nut met elke nieuwe
      eigenschap verder uitgerekt.  Daarnaast wilde men dingen
      dynamisch laden tijdens het starten of delen weggooien nadat het
      programma zijn intiële code had gedraaid om te blijven
      hangen in het hoofdgeheugen en in de wisselbestanden.  Talen
      werden verder verfijnd en men wilde dat code automatisch werd
      aangeroepen voor main.  Er werden veel hacks gedaan in het
      <code class="filename">a.out</code> formaat om alles mogelijk te maken en
      dit werkte ook enige tijd.  Na verloop van tijd was
      <code class="filename">a.out</code> niet meer in staat om alle problemen
      te adresseren zonder toenemende overhead in code en
      complexibiliteit.  Hoewel <acronym class="acronym">ELF</acronym> veel van deze
      problemem verhielp, was het moeilijk om te wisselen naar een
      systeem dat compleet anders werkte.  Dus moest
      <acronym class="acronym">ELF</acronym> wachten totdat het pijnlijker was om
      <code class="filename">a.out</code> te behouden dan het te migreren naar
      <acronym class="acronym">ELF</acronym>.</p><p>Met het verstrijken van de tijd, werden de bouwprogramma's
      die FreeBSD heeft afgeleid van hun bouwprogramma's (vooral de
      assembler en de loader) ontwikkeld in twee parallel lopende
      takken.  De FreeBSD tree voegde gedeelde bibliotheken toe en heeft
      wat bugs opgelost.  De mensen van GNU die deze programma's hebben
      geschreven, hebben ze herschreven en simpelere ondersteuning
      toegevoegd voor het bouwen van cross-compilers, waarbij
      verschillende formaten zo nodig ingevoegd konden worden,
      enzovoort.  Omdat veel mensen cross-compilers wilden bouwen die
      gericht waren op FreeBSD, hadden die pech, omdat de oudere broncode
      van FreeBSD voor <span class="application">as</span> en
      <span class="application">ld</span> niet opgewassen was tegen deze
      taak.  De nieuwe GNU programmaketen
      (<span class="application">binutils</span>) ondersteunt
      cross-compiling, <acronym class="acronym">ELF</acronym>, gedeelde bibliotheken,
      C++ extensies, enzovoort.  Daarnaast leveren veel
      leverancierds <acronym class="acronym">ELF</acronym> binaire bestanden en is het
      goed voor FreeBSD om het te draaien.</p><p><acronym class="acronym">ELF</acronym> heeft meer expressiemogelijkheden dan
      <code class="filename">a.out</code> en geeft meer
      uitbreidingsmogelijkheden aan het basissysteem.  De
      <acronym class="acronym">ELF</acronym> hulpprogramma's worden beter onderhouden
      en geven de mogelijkheid tot ondersteuning voor cross compilatie,
      wat voor veel mensen belangrijk is.  <acronym class="acronym">ELF</acronym> is
      misschien iets trager dan <code class="filename">a.out</code>, maar
      het meten daarvan kan vrij lastig zijn.  Er zijn ook ontelbare
      verschillen tussen de twee in hoe ze pages opslaan,
      initiële code verwerken, enzovoort.  Geen van allen zijn ze
      erg belangrijk, maar er zijn verschillen.  Na verloop van tijd
      verdwijnt de ondersteuning voor <code class="filename">a.out</code> uit de
      <code class="filename">GENERIC</code> kernel en uiteindelijk ook helemaal
      uit de kernel als de noodzaak voor <code class="filename">a.out</code>
      gebaseerde programma's voorbij is.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="basics-devices.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="basics-more-information.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">4.11. Apparaten en apparaatnodes </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 4.13. Meer informatie</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>