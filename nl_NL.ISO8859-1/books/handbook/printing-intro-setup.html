<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>10.3. Standaardinstallatie</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="printing.html" title="Hoofdstuk 10. Afdrukken" /><link rel="prev" href="printing-intro-spooler.html" title="10.2. Inleiding" /><link rel="next" href="printing-advanced.html" title="10.4. Geavanceerde printerinstallatie" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">10.3. Standaardinstallatie</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="printing-intro-spooler.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 10. Afdrukken</th><td width="20%" align="right"> <a accesskey="n" href="printing-advanced.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-setup"></a>10.3. Standaardinstallatie</h2></div></div></div><p>Om printers met het <span class="application">LPD</span>
      wachtrijsysteem te kunnen gebruiken, dienen zowel de
      printerhardware als de <span class="application">LPD</span> software
      geïnstalleerd te worden.  Dit document beschrijft deze
      installatie in twee stappen:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>In het onderdeel <a class="link" href="printing-intro-setup.html#printing-simple" title="10.3.1. Eenvoudige printerinstallatie">Eenvoudige
	    printerinstallatie</a> staat hoe een printer moet worden
	  aangesloten, hoe <span class="application">LPD</span> er mee kan
	  communiceren en hoe tekstbestanden afgedrukt kunnen
	  worden.</p></li><li class="listitem"><p>In <a class="link" href="printing-advanced.html" title="10.4. Geavanceerde printerinstallatie">Geavanceerde
	    printerinstallatie</a> staat beschreven hoe een scala
	  aan bestandsformaten afgedrukt kan worden, hoe voorbladen
	  kunnen worden afgedrukt en hoe statistieken van de printer
	  kunnen worden bijgehouden.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-simple"></a>10.3.1. Eenvoudige printerinstallatie</h3></div></div></div><p>Nu wordt toegelicht hoe de printerhardware en de
	<span class="application">LPD</span> software ingesteld moeten worden
	om een printer te kunnen gebruiken.  Het behandelt de
	basis:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="printing-intro-setup.html#printing-hardware" title="10.3.1.1. Hardware-instellingen">Hardware-instellingen</a>
	    geeft een aantal aanwijzingen voor het aansluiten van een
	    printer op een poort van een computer.</p></li><li class="listitem"><p><a class="link" href="printing-intro-setup.html#printing-software" title="10.3.1.2. Software-instellingen">Software-instellingen</a>
	    toont hoe het instellingenbestand
	    (<code class="filename">/etc/printcap</code>) voor het
	    <span class="application">LPD</span>-systeem moet worden
	    opgezet.</p></li></ul></div><p>Hoe een printer geïnstalleerd moet worden die via een
	netwerkprotocol gegevens ontvangt, in plaats van een
	seriële of parallelle poort, staat in <a class="link" href="printing-advanced.html#printing-advanced-network-net-if" title="10.4.3.2. Printers met netwerkinterfaces">Printers met
	  netwerkinterfaces</a>.</p><p>Hoewel dit onderdeel <span class="quote">&#8220;<span class="quote">Eenvoudige
	  printerinstallatie</span>&#8221;</span> heet, is het redelijk complex.  De
	printer met de computer en het
	<span class="application">LPD</span>-systeem laten samenwerken is het
	moeilijkste.  De geavanceerde opties, zoals voorbladen en
	statistieken, zijn relatief makkelijk als de printer eenmaal
	werkt.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-hardware"></a>10.3.1.1. Hardware-instellingen</h4></div></div></div><p>Hier worden de verschillende manieren waarop een printer
	  op een computer kan worden aangesloten beschreven.  Het
	  bespreekt de soorten poorten en kabels en de
	  kernelinstellingen die nodig kunnen zijn om FreeBSD met een
	  printer te laten communiceren.</p><p>Als een printer al is aangesloten en succesvol is
	  gebruikt onder een ander besturingssysteem, dan kan
	  waarschijnlijk verder gelezen worden in <a class="link" href="printing-intro-setup.html#printing-software" title="10.3.1.2. Software-instellingen">Software-instellingen</a>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-ports"></a>10.3.1.1.1. Poorten en kabels</h5></div></div></div><p>De printers die tegenwoordig voor PC's verkocht worden
	    hebben eigenlijk altijd een van de volgende drie
	    poorten:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Seriële</em></span><a id="idp72815952" class="indexterm"></a> poort, ook
		bekend als RS-232- of COM-poorten, gebruiken een
		seriële poort op een computer om gegevens naar een
		printer te sturen.  Seriële poorten zijn heel
		gebruikelijk in de computerindustrie en kabels zijn
		eenvoudig verkrijgbaar en makkelijk te maken.
		Seriële poorten hebben soms speciale kabels
		nodig en vereisen soms het instellen van ingewikkelde
		communicatieparameters.  De meeste seriële poorten
		hebben een maximale doorvoersnelheid van
		115.200 bps waardoor het afdrukken van grote
		grafische afdrukopdrachten erg onpraktisch
		wordt.</p></li><li class="listitem"><p><span class="emphasis"><em>Parallelle</em></span><a id="idp72817616" class="indexterm"></a> poorten
		gebruiken een parallelle poort op een computer om
		gegevens naar een printer te sturen.  Parallelle
		poorten zijn gebruikelijk in de PC-markt en zijn
		sneller dan RS-232 serieel.  Kabels zijn goed
		verkrijgbaar, maar moeilijker handmatig te
		vervaardigen.  Meestal zijn er geen
		communicatieparameters bij parallelle poorten, wat het
		instellen erg eenvoudig maakt.</p><p>Parallelle poorten staan ook wel bekend als
		<span class="quote">&#8220;<span class="quote">Centronics</span>&#8221;</span><a id="idp72819024" class="indexterm"></a> poorten, genoemd naar het
		soort aansluiting op de printer.</p></li><li class="listitem"><p>USB<a id="idp72824784" class="indexterm"></a> poorten, genoemd naar de Universal Serial
		Bus, kunnen zelfs op nog hogere snelheid werken dan
		parallelle of RS-232 seriële poorten.  De
		kabels zijn eenvoudig en goedkoop.  USB is voor
		afdrukken superieur aan RS-232 Serieel en Parallel,
		maar wordt op <span class="trademark">UNIX</span>®-systemen niet altijd goed
		ondersteund.  Een van de manieren om dit te omzeilen is
		de aanschaf van een printer met zowel een USB als een
		parallelle poort, zoals veel printers die
		hebben.</p></li></ul></div><p>Over het algemeen kunnen parallelle poorten
	    meestal in één richting communiceren (van
	    computer naar printer), terwijl seriële en USB
	    poorten in twee richtingen kunnen communiceren.
	    Nieuwere parallelle poorten (EPP en ECP) en printers kunnen
	    onder FreeBSD in beide richtingen communiceren, mits een
	    IEEE-1284 gekeurde kabel wordt gebruikt.</p><a id="idp72826832" class="indexterm"></a><p>Tweewegcommunicatie met een printer over een
	    parallelle poort verloopt meestal op een van de volgende
	    twee manieren.  De eerste manier is door gebruik te maken
	    van een op maat gemaakt stuurprogramma voor FreeBSD dat de
	    taal spreekt die door de printer wordt gebruikt.  Dit geldt
	    meestal voor inkjet printers en er kan dan gebruikt gemaakt
	    worden van rapportagemogelijkheden over bijvoorbeeld
	    inktniveaus en andere statusinformatie.  De tweede methode
	    wordt gebruikt als een printer <span class="trademark">PostScript</span>®
	    ondersteunt.</p><p><span class="trademark">PostScript</span>®-taken zijn eigenlijk programma's die
	    naar de printer worden gestuurd.  Het hoeft zelfs niet in
	    een afdruk te resulteren; het resultaat van de opdracht kan
	    direct weer naar de computer worden gestuurd.  <span class="trademark">PostScript</span>®
	    gebruikt ook tweewegcommunicatie om een computer op de
	    hoogte te stellen van opgetreden fouten, zoals fouten in
	    het <span class="trademark">PostScript</span>®-programma of vastgelopen papier.
	    Gebruikers kunnen dit soort informatie handig vinden.  De
	    beste manier om bij een <span class="trademark">PostScript</span>®-printer effectief bij
	    te houden wat het printergebruik is, vraagt om
	    tweewegcommunicatie: de printer wordt gevraagd om het
	    totaal aantal afgedrukt pagina's, de afdrukopdracht wordt
	    verzonden en vervolgens wordt nogmaals om het totaal aantal
	    afgedrukte pagina's gevraagd.  Het verschil van deze
	    getallen geeft het aantal afgedrukte pagina's van de
	    afdrukopdracht van de betreffende gebruiker.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-parallel"></a>10.3.1.1.2. Parallelle poorten</h5></div></div></div><p>Om een printer met een parallelle poort aan te
	    sluiten, moet een Centronics kabel de printer met de
	    computer verbinden.  De instructies die geleverd zijn bij
	    de printer, de computer of beide, moeten voldoende zijn
	    om dit te verduidelijken.</p><p>Onthoud op welke parallelle poort de printer is
	    aangesloten.  De eerste parallelle poort heet onder FreeBSD
	    <code class="filename">ppc0</code>, de tweede
	    <code class="filename">ppc1</code>, enzovoort.  De
	    benaming voor de printer gaat analoog: <code class="filename">/dev/lpt0</code> voor de printer op
	    de eerste parallelle poort enzovoort.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-serial"></a>10.3.1.1.3. Seriële poorten</h5></div></div></div><p>Gebruik de juiste seriële kabel om een printer met
	    een seriële poort op een computer aan te sluiten.
	    De instructies die geleverd zijn bij de printer, de
	    computer of beide, moeten voldoende zijn om dit te
	    verduidelijken.</p><p>Als onduidelijk is wat de <span class="quote">&#8220;<span class="quote">juiste seriële
	      kabel</span>&#8221;</span> is, kan een van onderstaande opties geprobeerd
	    worden:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Een <span class="emphasis"><em>modem</em></span>kabel verbindt elke
		pin van de stekker aan het ene eind direct met de
		corresponderende pin van de stekker aan het andere
		eind.  Dit type kabel heet ook wel een
		<span class="quote">&#8220;<span class="quote">DTE-naar-DCE</span>&#8221;</span>-kabel.</p></li><li class="listitem"><p>Een <span class="emphasis"><em>null-modem</em></span><a id="idp72846800" class="indexterm"></a> kabel verbindt
		enkele pinnetjes direct, verwisselt andere
		(bijvoorbeeld van verstuur gegevens naar ontvang
		gegevens) en sluit sommige draden kort in de stekker.
		Dit type kabel heet ook wel een
		<span class="quote">&#8220;<span class="quote">DTE-to-DTE</span>&#8221;</span>-kabel.</p></li><li class="listitem"><p>Een
		<span class="emphasis"><em>seriële printer</em></span>kabel, nodig
		bij sommige ongebruikelijke printers, is als een
		null-modem kabel, maar stuurt sommige signalen naar hun
		tegenhangers in plaats van ze intern kort te
		sluiten.</p></li></ul></div><a id="idp72849360" class="indexterm"></a><a id="idp72849872" class="indexterm"></a><a id="idp72850384" class="indexterm"></a><p>Het is ook nodig de communicatieparameters voor de
	    printer in te stellen, meestal via het bedieningspaneel of
	    middels DIP-schakelaars op de printer.  Selecteer de
	    hoogste <code class="literal">bps</code> (bits per seconde, soms
	    <span class="emphasis"><em>baud</em></span>) die zowel door de computer als
	    de printer wordt ondersteund.  Kies 7 of 8 data bits.
	    Geen, even of oneven pariteit en 1 of 2 stop bits.
	    Selecteer ook het flow-control protocol: ofwel geen, ofwel
	    XON/XOFF (ook bekend als <span class="quote">&#8220;<span class="quote">in-band</span>&#8221;</span> of
	    <span class="quote">&#8220;<span class="quote">software</span>&#8221;</span>) flow-control.  Onthoud deze
	    instellingen voor de hier op volgende
	    software-instellingen.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-software"></a>10.3.1.2. Software-instellingen</h4></div></div></div><p>Nu wordt beschreven welke software-instellingen nodig
	  zijn om onder FreeBSD af te drukken met behulp van het
	  wachtrijsysteem <span class="application">LPD</span>.</p><p>Een overzicht van de te doorlopen stappen:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Maak, indien nodig, de kernel geschikt voor de poort
	      die door de printer wordt gebruikt.  In <a class="link" href="printing-intro-setup.html#printing-kernel" title="10.3.1.2.1. Kernelinstellingen">Kernelinstellingen</a> is
	      te lezen hoe dit gedaan kan worden.</p></li><li class="step"><p>Stel de communicatievorm voor de parallelle poort in,
	      als gebruik wordt gemaakt van een parallelle printer.  In
	      <a class="link" href="printing-intro-setup.html#printing-parallel-port-mode" title="10.3.1.3. Communicatietype instellen voor een parallelle poort">Communicatietype
	      instellen voor een parallelle poort</a> staan de
	      details.</p></li><li class="step"><p>Test of het besturingssysteem gegevens naar de
	      printer kan sturen.  In <a class="link" href="printing-intro-setup.html#printing-testing" title="10.3.1.4. Printercommunicatie controleren">Printercommunicatie
		controleren</a> staat een aantal suggesties.</p></li><li class="step"><p>Stel <span class="application">LPD</span> in voor de
	      printer door <code class="filename">/etc/printcap</code> aan te
	      passen.  Dat wordt later in het hoofdstuk
	      beschreven.</p></li></ol></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-kernel"></a>10.3.1.2.1. Kernelinstellingen</h5></div></div></div><p>Het besturingssysteem is gecompileerd om met een
	    beperkte verzameling apparaten te kunnen werken.  De
	    seriële en parallelle poorten zijn onderdeel van
	    deze verzameling.  Daarom kan het nodig zijn om
	    ondersteuning voor een extra seriële of parallelle
	    poort toe te voegen als een kernel hier nog niet voor is
	    ingesteld.</p><p>Om te achterhalen of de huidige kernel een
	    seriële poort ondersteunt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep sioN /var/run/dmesg.boot</code></strong></pre><p>Hier is <em class="replaceable"><code>N</code></em> het aantal
	    seriële poorten, beginnende bij nul.  Als de uitvoer
	    op het volgende lijkt, dan wordt de poort door de kernel
	    ondersteund:</p><pre class="screen">sio2 at port 0x3e8-0x3ef irq 5 on isa
sio2: type 16550A</pre><p>Om te achterhalen of de kernel een parallelle poort
	    ondersteunt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep ppcN /var/run/dmesg.boot</code></strong></pre><p>Hier is <em class="replaceable"><code>N</code></em> het aantal
	    parallelle poorten beginnende bij nul.  Als de uitvoer er
	    ongeveer als volgt uit ziet, dan wordt de poort door de
	    kernel ondersteund:</p><pre class="screen">ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/8 bytes threshold</pre><p>Het kan nodig zijn een kernel aan te passen om het
	    besturingssysteem in staat te stellen een parallelle of
	    seriële poort die voor een printer wordt gebruikt te
	    herkennen en te gebruiken.</p><p>In het onderdeel over kernelinstellingen staat meer
	    informatie om ondersteuning voor een seriële poort toe
	    te voegen.  Lees de betreffende <span class="emphasis"><em>en</em></span> de
	    volgende sectie om ondersteuning voor een parallelle poort
	    toe te voegen.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-parallel-port-mode"></a>10.3.1.3. Communicatietype instellen voor een parallelle poort</h4></div></div></div><p>Wanneer een parallelle poort wordt gebruikt, kan
	  worden aangegeven of FreeBSD voor de printer
	  interrupt-gestuurde of <span class="quote">&#8220;<span class="quote">polled</span>&#8221;</span> communicatie
	  moet gebruiken.  Het generieke printerapparaatstuurprogramma
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>) onder FreeBSD gebruikt het systeem <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppbus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppbus</span>(4)</span></a>.
	  Dit bestuurt de chipset van de poort met het stuurprogramma
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppc</span>(4)</span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>De <span class="emphasis"><em>interrupt-gestuurde</em></span>
	      methode is standaard in de GENERIC kernel.  In dit
	      geval gebruikt het besturingssysteem een IRQ om te
	      bepalen of de printer klaar is om gegevens te ontvangen.</p></li><li class="listitem"><p>Bij de <span class="emphasis"><em>polled</em></span> methode vraagt
	      het besturingssysteem met vaste intervallen aan de
	      printer of deze klaar is om gegevens te ontvangen.  Als
	      de printer antwoordt met <span class="quote">&#8220;<span class="quote">klaar</span>&#8221;</span>, stuurt
	      de kernel meer gegevens.</p></li></ul></div><p>De interrupt-gestuurde methode is meestal iets sneller,
	  maar gebruikt een kostbaar IRQ-nummer.  Van sommige HP
	  printers wordt beweerd dat ze niet goed werken in
	  interruptmodus, schijnbaar door een (nog niet begrepen)
	  timing-probleem.  Deze printers moeten gebruik maken van de
	  polled methode.  Gebruik de methode die werkt.  Sommige
	  printers werken met beide methodes, maar zijn tergend
	  langzaam in de interrupt modus.</p><p>Het communicatietype kan op twee manieren worden
	  ingesteld: door de kernel in te stellen of door gebruik te
	  maken van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a>.</p><p><span class="emphasis"><em>Het communicatietype instellen door de kernel
	    aan te passen:</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Pas het kernelinstellingenbestand aan.  Zoek naar
	      een <code class="literal">ppc0</code> ingang.  Gebruik
	      <code class="literal">ppc1</code> voor het opzetten van een
	      tweede parallelle poort.  Gebruik
	      <code class="literal">ppc2</code> voor de derde poort,
	      enzovoort.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Als u gebruik wilt maken van de interrupt
		  gestuurde modus, bewerk dan de regel
		  hieronder:</p><pre class="programlisting">hint.ppc.0.irq="<em class="replaceable"><code>N</code></em>"</pre><p>Het kernelinstellingenbestand moet ook het
		  stuurprogramma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppc</span>(4)</span></a> bevatten:</p><pre class="screen">device ppc</pre></li><li class="listitem"><p>Om gebruik te maken van polled modus verwijder
		  dan het volgende regel uit
		  <code class="filename">/boot/device.hints</code>:</p><pre class="programlisting">hint.ppc.0.irq="<em class="replaceable"><code>N</code></em>"</pre><p>In sommige gevallen is het onder FreeBSD niet
		  voldoende om een poort in polled modus te zetten.
		  In veel gevallen komt dat door het stuurprogramma
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a>.  Dit is in staat om apparaten te
		  testen en aan te sluiten en kan zodoende het
		  communicatietype van de printer wijzigen.  Raadpleeg
		  de instellingen voor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> om dit probleem te
		  verhelpen.</p></li></ul></div></li><li class="step"><p>Sla het bestand op.  Maak en installeer de nieuwe
	      kernel en herstart de computer.  In <a class="link" href="kernelconfig.html" title="Hoofdstuk 9. De FreeBSD-kernel instellen">De FreeBSD-kernel instellen</a>
	      staan meer details.</p></li></ol></div><p><span class="emphasis"><em>Communicatietype instellen met</em></span>
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Typ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -i -d /dev/lptN</code></strong></pre><p>om <code class="literal">lptN</code> op
	      interrupt-gestuurde modus in te stellen.</p></li><li class="step"><p>Typ:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -p -d /dev/lptN</code></strong></pre><p>om <code class="literal">lptN</code> op
	      polled modus in te stellen.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -p -d /dev/lptN</code></strong></pre></li></ol></div><p>Zet deze commando's in het bestand
	  <code class="filename">/etc/rc.local</code> zodat het
	  communicatietype juist wordt ingesteld bij het opstarten.
	  In <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a> staat meer informatie.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-testing"></a>10.3.1.4. Printercommunicatie controleren</h4></div></div></div><p>Voor het instellen van het wachtrijsysteem, is het
	  verstandig te controleren of het besturingssysteem gegevens
	  naar een printer kan versturen.  Het is een stuk
	  makkelijker om problemen met printercommunicatie en het
	  wachtrijsysteem apart op te lossen.</p><p>De printer wordt getest door er tekst naar toe te
	  sturen.  Voor printers die direct tekens kunnen afdrukken
	  is het programma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> handig: het genereert alle
	  96 afdrukbare ASCII-tekens op 96 regels.</p><a id="idp72929616" class="indexterm"></a><p>Voor <span class="trademark">PostScript</span>® (of andere op taal gebaseerde)
	  printers, is een meer geavanceerde test nodig.  Een
	  eenvoudig <span class="trademark">PostScript</span>®-programma zoals het volgende
	  volstaat:</p><pre class="programlisting">%!PS
100 100 moveto 300 300 lineto stroke
310 310 moveto /Helvetica findfont 12 scalefont setfont
(Werkt dit?) show
showpage</pre><p>Bovenstaande <span class="trademark">PostScript</span>®-code kan in een bestand
	  worden opgeslagen en in de voorbeelden in de volgende
	  paragrafen gebruikt worden.</p><a id="idp72933328" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als in dit document wordt gesproken over een
	    printertaal, wordt uitgegaan van een taal als
	    <span class="trademark">PostScript</span>® en niet PCL van HP.  Hoewel PCL zeer
	    functioneel is, kan het direct platte tekst afdrukken
	    door gebruik te maken van escape-tekens.  <span class="trademark">PostScript</span>® kan
	    niet direct platte tekst afdrukken.  Voor dat soort
	    printertalen zijn speciale aanpassingen nodig.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-checking-parallel"></a>10.3.1.4.1. Parallelle printer controleren</h5></div></div></div><a id="idp72936656" class="indexterm"></a><p>In deze sectie wordt beschreven hoe te controleren of
	    FreeBSD kan communiceren met een printer die op een
	    parallelle poort is aangesloten.</p><p><span class="emphasis"><em>Voer de volgende stappen uit om een printer
	      op een parallelle poort te testen:</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> naar <code class="systemitem">root</code>.</p></li><li class="step"><p>Stuur gegevens naar de printer.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Gebruik <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> als de printer platte
		    tekst af kan drukken:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptest &gt; /dev/lptN</code></strong></pre><p>Hier is <em class="replaceable"><code>N</code></em> het
		    nummer van de parallelle poort, beginnende bij
		    nul.</p></li><li class="listitem"><p>Als de printer <span class="trademark">PostScript</span>® of een andere
		    printertaal begrijpt, stuur dan een klein
		    programma naar de printer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat &gt; /dev/lptN</code></strong></pre><p>Geef het programma regel voor regel
		    <span class="emphasis"><em>heel nauwkeurig</em></span> in.  Een
		    regel kan niet worden gewijzigd als er op
		    <code class="literal">RETURN</code> of
		    <code class="literal">ENTER</code> is gedrukt.  Geef na het
		    afronden van de invoer voor het programma het
		    einde-van-invoer-teken.  Dit is meestal
		    <code class="literal">CONTROL+D</code>.</p><p>Het programma kan ook in een bestand worden
		    opgeslagen:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat bestand &gt; /dev/lptN</code></strong></pre><p>Hier is <em class="replaceable"><code>bestand</code></em> de
		    naam van het bestand waarin het programma is
		    opgeslagen dat naar een printer gestuurd kan
		    worden.</p></li></ul></div></li></ol></div><p>Nu moet er iets worden afgedrukt.  Tekst die er niet
	    goed uitziet is geen probleem.  Dit wordt later
	    gerepareerd.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-checking-serial"></a>10.3.1.4.2. Seriële printer controleren</h5></div></div></div><a id="idp72965584" class="indexterm"></a><p>In deze sectie wordt beschreven hoe te controleren of
	    FreeBSD kan communiceren met een printer die op een
	    seriële poort is aangesloten.</p><p><span class="emphasis"><em>Voer de volgende stappen uit om een printer
	      op de seriële poort te testen:</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> naar <code class="systemitem">root</code>.</p></li><li class="step"><p>Voeg de volgende regel toe aan
		<code class="filename">/etc/remote</code>:</p><pre class="programlisting">printer:dv=<code class="filename">/dev/poort</code>:br#<em class="replaceable"><code>bps-snelheid</code></em>:pa=<em class="replaceable"><code>pariteit</code></em></pre><a id="idp72976464" class="indexterm"></a><a id="idp72977232" class="indexterm"></a><a id="idp72978000" class="indexterm"></a><p>Hier is <em class="replaceable"><code>poort</code></em> de
		apparaatingave voor de seriële poort
		(<code class="literal">ttyu0</code>, <code class="literal">ttyu1</code>,
		enzovoort), <em class="replaceable"><code>bps-snelheid</code></em>
		is het aantal bits per seconde waarop de printer
		communiceert en <em class="replaceable"><code>pariteit</code></em>
		is de pariteit die door de printer wordt vereist
		(<code class="literal">even</code>, <code class="literal">odd</code>,
		<code class="literal">none</code> of <code class="literal">zero</code>).</p><p>Hier volgt een voorbeeldregel voor een printer
		verbonden met een seriële lijn op de derde
		seriële poort op 19200 bps, zonder
		pariteit:</p><pre class="programlisting">printer:dv=<code class="filename">/dev/ttyu2</code>:br#19200:pa=none</pre></li><li class="step"><p>Maak verbinding met de printer met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tip printer</code></strong></pre><p>Als dit niet werkt, pas dan
		<code class="filename">/etc/remote</code> opnieuw aan en
		probeer gebruik te maken van <code class="filename">/dev/cuaaN</code>
		in plaats van <code class="filename">/dev/ttyuN</code>.</p></li><li class="step"><p>Stuur gegevens naar de printer.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Gebruik <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> als de printer platte
		    tekst af kan drukken:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>$lptest</code></strong></pre></li><li class="listitem"><p>Als de printer <span class="trademark">PostScript</span>® of een andere
		    printertaal begrijpt, stuur dan een klein
		    programma naar de printer.  Geef het programma
		    regel voor regel <span class="emphasis"><em>heel
		    nauwkeurig</em></span> in.  Backspace of andere
		    speciale toetsen kunnen een speciale betekenis
		    hebben voor de printer.  Het kan ook nodig zijn
		    een speciaal einde-van-invoer-teken te geven
		    zodat de printer weet dat het gehele programma
		    ontvangen is.  Druk voor <span class="trademark">PostScript</span>®-printers
		    <code class="literal">CONTROL+D</code>.</p><p>Het programma kan ook in een bestand worden
		    opgeslagen:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>&gt;bestand</code></strong></pre><p>Hier is <em class="replaceable"><code>bestand</code></em> de
		    naam van het bestand waarin het programma is
		    opgeslagen.  Nadat <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> het bestand heeft
		    verstuurd kan het juiste einde-van-invoer-teken
		    ingegeven worden.</p></li></ul></div></li></ol></div><p>Nu moet er iets worden afgedrukt.  Tekst die er niet
	    goed uitziet is geen probleem.  Dit wordt later
	    gerepareerd.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-printcap"></a>10.3.1.5. De wachtrij aanzetten:
	  <code class="filename">/etc/printcap</code></h4></div></div></div><p>Op dit punt moet de printer zijn aangesloten, de kernel
	  ingesteld zijn om met de printer te communiceren (indien
	  nodig) en is het mogelijk eenvoudige gegevens naar de printer
	  te sturen.  Nu kan <span class="application">LPD</span> ingesteld
	  worden zodat de toegang tot de printer wordt geregeld.</p><p><span class="application">LPD</span> wordt ingesteld door het
	  bestand <code class="filename">/etc/printcap</code> aan te passen.
	  Het wachtrijsysteem <span class="application">LPD</span> leest
	  dit bestand iedere keer dat het systeem wordt aangeroepen
	  zodat wijzigingen direct van toepassing zijn.</p><a id="idp73005264" class="indexterm"></a><p>De opmaak van het bestand <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">printcap</span>(5)</span></a> is voor de
	  hand liggend.  Met een willekeurige tekstverwerker kunnen
	  wijzigen in <code class="filename">/etc/printcap</code> aangebracht
	  worden.  De opmaak is identiek aan die van andere bestanden
	  die voor dergelijke instellingen worden gebruik, zoals
	  <code class="filename">/usr/share/misc/termcap</code> en
	  <code class="filename">/etc/remote</code>.  In <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cgetent&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">cgetent</span>(3)</span></a> staat
	  een uitgebreid overzicht van dit formaat.</p><p>De vereenvoudigde instellingen bestaan uit de volgende
	  stappen:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Kies een naam (en een paar handige aliassen) voor de
	      printer en voeg ze toe aan
	      <code class="filename">/etc/printcap</code>.  In <a class="link" href="printing-intro-setup.html#printing-naming" title="10.3.1.5.1. Printernaamgeving">Printernaamgeving</a>
	      staat meer informatie over het toekennen van een naam aan
	      een printer.</p></li><li class="step"><p>Het afdrukken van voorbladen<a id="idp73016528" class="indexterm"></a> (standaard) kan uitgezet
	      worden met de optie <code class="literal">sh</code>.  In <a class="link" href="printing-intro-setup.html#printing-no-header-pages" title="10.3.1.5.2. Voorbladen onderdrukken">Voorbladen
		onderdrukken</a> staat meer informatie.</p></li><li class="step"><p>Maak een wachtrijmap aan en specificeer de locatie
	      door middel van de optie <code class="literal">sd</code>.  In
	      <a class="link" href="printing-intro-setup.html#printing-spooldir" title="10.3.1.5.3. Wachtrijmap aanmaken">Wachtrijmap
		aanmaken</a> staat meer informatie.</p></li><li class="step"><p>Bepaal welke ingave in <code class="filename">/dev</code> voor de printer wordt
	      gebruikt en geef dit in <code class="filename">/etc/printcap</code>
	      aan door gebruik te maken van de optie
	      <code class="literal">lp</code>.  In <a class="link" href="printing-intro-setup.html#printing-device" title="10.3.1.5.4. Printerapparaat identificeren">Printerapparaat
	      identificeren</a> staat meer informatie.  Als de
	      printer is aangesloten op een seriële poort moeten
	      de communicatieparameters worden ingesteld met de optie
	      <code class="literal">ms#</code>.  Dit wordt beschreven in <a class="link" href="printing-intro-setup.html#printing-commparam" title="10.3.1.5.5. Communicatieparameters voor het wachtrijsysteem instellen">Communicatieparameters
		voor het wachtrijsysteem instellen</a>.</p></li><li class="step"><p>Installeer een filter voor platte tekst.  In <a class="link" href="printing-intro-setup.html#printing-textfilter" title="10.3.1.5.6. Tekstfilter installeren">Tekstfilter
		installeren</a> staan details.</p></li><li class="step"><p>Test de instellingen door iets met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> af te
	      drukken.  Details staan in <a class="link" href="printing-intro-setup.html#printing-trying" title="10.3.1.5.8. Printer uitproberen">Printer uitproberen</a> en
	      <a class="link" href="printing-troubleshooting.html" title="10.7. Problemen oplossen">Problemen
		oplossen</a>.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Op taal gebaseerde printers, zoals
	    <span class="trademark">PostScript</span>®-printers, kunnen niet direct platte tekst
	    afdrukken.  De vereenvoudigde instellingen, zoals hierboven
	    beschreven en hieronder verder beschreven, gaan er van uit
	    dat alleen bestanden naar een printer worden gestuurd die
	    de printer begrijpt.</p></div><p>Gebruikers verwachten vaak dat ze platte tekst naar
	  printers op een systeem kunnen sturen.  Programma's die
	  <span class="application">LPD</span> gebruiken om af te drukken
	  gaan hier ook vaak van uit.  Als een dergelijke printer wordt
	  geïnstalleerd en het moet mogelijk zijn zowel
	  afdrukopdrachten in de printertaal als in platte tekst naar
	  een printer te sturen, dan is het zeer aan te raden een extra
	  stap in deze vereenvoudigde opzet in te voegen: installeer
	  een conversieprogramma dat automatisch platte tekst omzet in
	  <span class="trademark">PostScript</span>® (of een andere printertaal).  In <a class="link" href="printing-advanced.html#printing-advanced-if-conversion" title="10.4.1.2. Platte tekst op PostScript®-printers afdrukken">Platte tekst
	  op <span class="trademark">PostScript</span>®-printers afdrukken</a> staat hoe dit in
	  zijn werk gaat.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-naming"></a>10.3.1.5.1. Printernaamgeving</h5></div></div></div><p>De eerste (makkelijke) stap is het kiezen van een naam
	    voor een printer.  Het maakt niet uit of een naam
	    functioneel of grappig is, aangezien ook een aantal
	    aliassen aan een printer toegekend kunnen worden.</p><p>Ten minste één van de printers die in
	    <code class="filename">/etc/printcap</code> worden genoemd moet het
	    alias <code class="literal">lp</code> hebben.  Dit is de
	    standaardnaam voor de printer.  Als gebruikers de
	    omgevingsvariabele <code class="envar">PRINTER</code> niet ingesteld
	    hebben en ook geen printernaam specificeren als ze
	    <span class="application">LPD</span> gebruiken, dan wordt
	    standaard de printer <code class="literal">lp</code> gebruikt.</p><p>Het is verder gebruikelijk om het laatste alias zo te
	    kiezen dat het een volledige beschrijving van de printer
	    is, inclusief merk en model.</p><p>Als een naam en een aantal aliassen zijn gekozen,
	    kunnen ze aan <code class="filename">/etc/printcap</code> worden
	    toegevoegd.  De naam van een printer wordt in de meest
	    linker kolom geplaatst.  Scheid ieder alias met een
	    verticale streep en plaats een dubbele punt achter het
	    laatste alias.</p><p>In het volgende voorbeeld is de beginsituatie een
	    uitgekleed <code class="filename">/etc/printcap</code> waarin twee
	    printers worden gedefinieerd (een Diablo 630 lijnprinter
	    en een Panasonic KX-P4455
	    <span class="trademark">PostScript</span>®-laserprinter):</p><pre class="programlisting">#
#  /etc/printcap voor host rose
#
rattan|line|diablo|lp|Diablo 630 Line Printer:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:</pre><p>In dit voorbeeld heet de eerste printer
	    <code class="literal">rattan</code> en heeft de volgende aliassen:
	    <code class="literal">line</code>, <code class="literal">diablo</code>,
	    <code class="literal">lp</code> en <code class="literal">Diablo 630 Line
	    Printer</code>.  Omdat deze printer het alias
	    <code class="literal">lp</code> heeft, is het de standaard printer.
	    De tweede printer heet <code class="literal">bamboo</code> en heeft
	    de aliassen <code class="literal">ps</code>, <code class="literal">PS</code>,
	    <code class="literal">S</code>, <code class="literal">panasonic</code> en
	    <code class="literal">Panasonic KX-P4455 PostScript v51.4</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-no-header-pages"></a>10.3.1.5.2. Voorbladen onderdrukken</h5></div></div></div><a id="idp73092560" class="indexterm"></a><p>Het wachtrijsysteem <span class="application">LPD</span>
	    drukt standaard een <span class="emphasis"><em>voorblad</em></span> af voor
	    elke afdrukopdracht.  Het voorblad bevat de gebruikersnaam
	    van de gebruiker die de afdrukopdracht gaf, de computer
	    waar de opdracht is gegeven en, in mooie grote letters, de
	    naam van de afdrukopdracht.  Het nadeel hiervan is dat al
	    deze extra tekst het debuggen van de eenvoudige
	    printerinstallatie bemoeilijkt.  Daarom wordt het afdrukken
	    van voorbladen onderdrukt.</p><p>Om voorbladen te onderdrukken, wordt de optie
	    <code class="literal">sh</code> toegevoegd voor de relevante printer
	    in <code class="filename">/etc/printcap</code>.  Hieronder staat een
	    voorbeeld van <code class="filename">/etc/printcap</code> met de
	    optie <code class="literal">sh</code>:</p><pre class="programlisting">#
#  /etc/printcap voor host rose - nergens worden voorbladen afgedrukt
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:</pre><p>Het juiste formaat is gebruikt: de eerste regel begint
	    in de meest linker kolom, volgende regels springen in.
	    Elke regel eindigt met een backslash, behalve de
	    laatste.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-spooldir"></a>10.3.1.5.3. Wachtrijmap aanmaken</h5></div></div></div><a id="idp73098576" class="indexterm"></a><a id="idp73099088" class="indexterm"></a><p>De volgende stap in deze eenvoudige opzet is het
	    aanmaken van een <span class="emphasis"><em>wachtrijmap</em></span>.  Dit is
	    een map waar afdrukopdrachten geplaatst worden totdat ze
	    worden afgedrukt.  Ook wordt er een aantal bestanden
	    geplaatst die nodig zijn voor het functioneren van het
	    wachtrijsysteem.</p><p>Vanwege het veranderlijke karakter van wachtrijmappen
	    is het gebruikelijk om deze mappen onder
	    <code class="filename">/var/spool</code> te
	    plaatsen.  Het is niet nodig om een reservekopie van de
	    inhoud van deze mappen te maken.  Ze kunnen eenvoudigweg
	    opnieuw worden aangemaakt met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkdir&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mkdir</span>(1)</span></a>.</p><p>Het is ook gebruikelijk om de naam van de map overeen te
	    laten komen met die van de printer, zoals onder is
	    weergegeven:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/printernaam</code></strong></pre><p>Als er veel printers zijn aangesloten op een netwerk,
	    is het beter de wachtrijmappen aan te maken in een enkele
	    map die speciaal wordt gebruikt voor afdrukken met
	    <span class="application">LPD</span>.  In dit voorbeeld wordt dat
	    gedaan voor de printers <code class="literal">rattan</code> en
	    <code class="literal">bamboo</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd/bamboo</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Als de afdrukopdrachten privé moeten blijven,
	      dan is het belangrijk de wachtrijmap niet algemeen
	      toegankelijk te maken.  Wachtrijmappen moeten eigendom
	      zijn van gebruiker <code class="systemitem">daemon</code> en groep
	      <code class="systemitem">daemon</code>.  Uitsluitend deze gebruiker
	      en groep moeten de map kunnen lezen, schrijven en
	      doorzoeken.  We doen dit voor onze voorbeeldprinters:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/bamboo</code></strong></pre></div><p>Tenslotte moet <span class="application">LPD</span> verteld
	    worden dat deze mappen bestaan.  Dit kan met het bestand
	    <code class="filename">/etc/printcap</code>.  De locatie van de
	    wachtrijmap wordt opgegeven met de optie
	    <code class="literal">sd</code>:</p><pre class="programlisting">#
#  /etc/printcap voor host rose - wachtrijmappen toegevoegd
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:</pre><p>De naam van de printer staat in de eerste kolom, maar
	    alle andere regels die de printer beschrijven worden
	    ingesprongen en elke regel eindigt met een
	    backslash.</p><p>Als geen wachtrijmap wordt opgegeven met
	    <code class="literal">sd</code>, dan wordt standaard
	    <code class="filename">/var/spool/lpd</code>
	    gebruikt.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-device"></a>10.3.1.5.4. Printerapparaat identificeren</h5></div></div></div><p>In de sectie <a class="link" href="printing-intro-setup.html#printing-hardware" title="10.3.1.1. Hardware-instellingen">Hardware-instellingen</a>
	    is bepaald welke poort en ingang in de map <code class="filename">/dev</code>
	    door FreeBSD worden gebruikt om met een printer te
	    communiceren.  Nu moet <span class="application">LPD</span> dit
	    ook weten.  Als het wachtrijsysteem een afdrukopdracht
	    krijgt, opent het het relevante apparaat namens het
	    filterprogramma (dat verantwoordelijk is voor het sturen van
	    gegevens naar een printer).</p><p>Geef de locatie van de ingang in
	    <code class="filename">/dev</code> op in
	    <code class="filename">/etc/printcap</code> door gebruik te maken
	    van de optie <code class="literal">lp</code>.</p><p>In het huidige voorbeeld wordt aangenomen dat
	    <code class="literal">rattan</code> op de eerste parallelle poort is
	    aangesloten en <code class="literal">bamboo</code> op de zesde
	    seriële poort.  Hier volgen de toevoegingen voor
	    <code class="filename">/etc/printcap</code>:</p><pre class="programlisting">#
#  /etc/printcap voor host rose - bepaald welke apparaten te gebruiken
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\
        :lp=<code class="filename">/dev/lpt0</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:</pre><p>Als voor een printer de optie <code class="literal">lp</code>
	    niet wordt gebruikt in <code class="filename">/etc/printcap</code>,
	    dan gebruikt <span class="application">LPD</span> standaard
	    <code class="filename">/dev/lp</code>.  Momenteel
	    bestaat <code class="filename">/dev/lp</code> niet
	    in FreeBSD.</p><p>Als de te installeren printer is aangesloten op een
	    parallelle poort, dan staan verdere instructies in <a class="link" href="printing-intro-setup.html#printing-textfilter" title="10.3.1.5.6. Tekstfilter installeren">Tekstfilter
	    installeren</a>.  In andere gevallen kunnen de
	    instructies in de volgende paragraaf gevold worden.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-commparam"></a>10.3.1.5.5. Communicatieparameters voor het wachtrijsysteem
	    instellen</h5></div></div></div><a id="idp73136720" class="indexterm"></a><p>Voor printers die zijn aangesloten op een seriële
	    poort kan <span class="application">LPD</span> de bps-snelheid,
	    pariteit en andere seriële communicatie parameters
	    instellen voor het filterprogramma dat gegevens naar een
	    printer stuurt.  Dit is gunstig omdat:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>De verschillende communicatieparameters
		uitgeprobeerd kunnen worden door
		<code class="filename">/etc/printcap</code> aan te passen.  Het
		is niet nodig het filterprogramma opnieuw te
		compileren;</p></li><li class="listitem"><p>Het wachtrijsysteem kan hetzelfde filter gebruiken
		voor verschillende printers die mogelijk verschillende
		seriële communicatie-instellingen hebben.</p></li></ul></div><p>Met de volgende opties in
	    <code class="filename">/etc/printcap</code> kunnen seriële
	    communicatieparameters worden ingesteld voor het apparaat
	    waar <code class="literal">lp</code> naar verwijst:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">br#bps-snelheid</code></span></dt><dd><p>Stelt de communicatiesnelheid van het apparaat in
		  op <em class="replaceable"><code>bps-snelheid</code></em>, waarbij
		  <em class="replaceable"><code>bps-snelheid</code></em> de waarde
		  50, 75, 110, 134, 150, 200, 300, 600, 1200, 1800,
		  2400, 4800, 9600, 19200, 38400, 57600 of 115200
		  bits-per-seconde kan aannemen.</p></dd><dt><span class="term"><code class="literal">ms#stty-modus</code></span></dt><dd><p>Bepaalt de opties voor het geval het
		  printerapparaat een terminal is.  In <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a>
		  staat uitleg over de beschikbare opties.</p></dd></dl></div><p>Als <span class="application">LPD</span> het apparaat opent
	    dat met <code class="literal">lp</code> is opgegeven, worden de
	    eigenschappen van het apparaat bepaald door de optie
	    <code class="literal">ms#</code>.  Met name van belang zijn de modi
	    <code class="literal">parenb</code>, <code class="literal">parodd</code>,
	    <code class="literal">cs5</code>, <code class="literal">cs6</code>,
	    <code class="literal">cs7</code>, <code class="literal">cs8</code>,
	    <code class="literal">cstopb</code>, <code class="literal">crtscts</code> en
	    <code class="literal">ixon</code>.  Deze worden uitgelegd in
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a>.</p><p>Nu wordt de voorbeeldprinter op de zesde seriële
	    poort aangepast.  De bps-snelheid wordt ingesteld op 38400.
	    Als modus wordt gekozen: geen pariteit met
	    <code class="literal">-parenb</code>, 8-bit tekens met
	    <code class="literal">cs8</code>, geen modemcontrole met
	    <code class="literal">clocal</code> en hardware flow-control met
	    <code class="literal">crtscts</code>:</p><pre class="programlisting">bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-textfilter"></a>10.3.1.5.6. Tekstfilter installeren</h5></div></div></div><a id="idp73165648" class="indexterm"></a><p>Nu kan <span class="application">LPD</span> verteld worden
	    welke tekstfilters gebruikt moeten worden bij het versturen
	    van afdrukopdrachten.  Een <span class="emphasis"><em>tekstfilter</em></span>
	    is een programma dat <span class="application">LPD</span>
	    aanroept als het een afdrukopdracht krijgt.  Wanneer
	    <span class="application">LPD</span> het tekstfilter aanroept,
	    wordt de standaard invoer van het filter gekoppeld aan de
	    afdrukopdracht en de standaard uitvoer aan het
	    printerapparaat dat door de optie <code class="literal">lp</code>
	    is opgegeven.  Er wordt aangenomen dat het filter van
	    standaard invoer leest, vervolgens de nodige handelingen
	    uitvoert en het resultaat naar de standaard uitvoer
	    schrijft, zodat het afgedrukt wordt.  In <a class="link" href="printing-advanced.html#printing-advanced-filters" title="10.4.1.1. Hoe filters werken">Filters</a> staat
	    meer informatie over het tekstfilter.</p><p>Voor deze eenvoudige printerinstallatie kan het
	    tekstfilter een klein shellscript zijn dat
	    <code class="command">/bin/cat</code> aanroept om de afdrukopdracht
	    naar de printer te sturen.  FreeBSD wordt geleverd met een
	    ander filter, <code class="filename">lpf</code>, dat backspaces en
	    onderlijnde tekst afhandelt voor printers die hier niet mee
	    overweg kunnen.  Natuurlijk kan elk filter gebruikt worden
	    dat gewenst is.  Het filter <code class="command">lpf</code> wordt
	    uitgebreid beschreven in <a class="link" href="printing-advanced.html#printing-advanced-lpf" title="10.4.1.6. lpf: een tekstfilter">lpf: een
	      tekstfilter</a>.</p><p>Nu wordt eerst het shellscript
	    <code class="filename">/usr/local/libexec/if-simple</code> gemaakt
	    dat als simpel tekstfilter dient.  Plaats de volgende tekst
	    in het bestand met een tekstverwerker naar keuze:</p><pre class="programlisting">#!/bin/sh
#
# if-simple - Eenvoudig tekstfilter voor lpd
# Geïnstalleerd in /usr/local/libexec/if-simple
#
# Kopieert eenvoudigweg stdin naar stdout.
# Filterargumenten worden genegeerd.

/bin/cat &amp;&amp; exit 0
exit 2</pre><p>Zorg dat het bestand uitvoerbaar is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 555 /usr/local/libexec/if-simple</code></strong></pre><p>Zorg dat <span class="application">LPD</span> het filter
	    gebruikt door dit aan te geven met de optie
	    <code class="literal">if</code> in
	    <code class="filename">/etc/printcap</code>.  Nu volgt hoe dit te
	    doen voor de twee printers uit het voorbeeld:</p><pre class="programlisting">#
#  /etc/printcap voor host rose - met tekstfilter
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=<code class="filename">/var/spool/lpd/rattan</code>:\ :lp=<code class="filename">/dev/lpt0</code>:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=<code class="filename">/var/spool/lpd/bamboo</code>:\
        :lp=<code class="filename">/dev/ttyu5</code>:ms#-parenb cs8 clocal crtscts:\
        :if=<code class="filename">/usr/local/libexec/if-simple</code>:</pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Een kopie van het script
	      <code class="filename">if-simple</code> staat in de map <code class="filename">/usr/share/examples/printing</code>.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73184720"></a>10.3.1.5.7. <span class="application">LPD</span> aanzetten</h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpd</span>(8)</span></a> wordt gestart vanuit
	    <code class="filename">/etc/rc</code> door de variabele
	    <code class="literal">lpd_enable</code>.  Standaard staat deze
	    variabele op <code class="literal">NO</code>.  Als dit nog niet is
	    gedaan, voeg dan de volgende regel toe aan
	    <code class="filename">/etc/rc.conf</code> en herstart de
	    computer:</p><pre class="programlisting">lpd_enable="YES"</pre><p>Of voer het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpd</span>(8)</span></a> uit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lpd</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-trying"></a>10.3.1.5.8. Printer uitproberen</h5></div></div></div><p>Nu volgt het laatste onderdeel van de eenvoudige
	    <span class="application">LPD</span> installatie.  Helaas zijn
	    felicitaties nog niet gepast.  De printer moet worden
	    getest en eventuele problemen moeten worden opgelost.  Om
	    de installatie te testen kan iets afgedrukt worden.
	    Afdrukken gaat met het commando <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>.  Dit stuurt
	    een opdracht naar een printer.</p><p>Het programma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> is te combineren met het
	    programma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> uit <a class="link" href="printing-intro-setup.html#printing-testing" title="10.3.1.4. Printercommunicatie controleren">Printercommunicatie
	      controleren </a> om tekst te genereren.</p><p><span class="emphasis"><em>Om de eenvoudige installatie van
	      <span class="application">LPD</span> te testen:</em></span></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptest 20 5 | lpr -Pprinternaam</code></strong></pre><p>Hier is <em class="replaceable"><code>printernaam</code></em> de naam
	    van een printer (of een alias) die in
	    <code class="filename">/etc/printcap</code> wordt genoemd.  De
	    standaard printer kan worden getest door bij het aanroepen
	    van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> de optie <code class="option">-P</code> weg te laten.
	    Nogmaals: test een <span class="trademark">PostScript</span>®-printer door een
	    <span class="trademark">PostScript</span>®-programma naar een printer te sturen en maak
	    geen gebruik van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>.  Dit kan door het
	    programma in een bestand op te slaan en de volgende
	    commandoregel uit te voeren: <code class="command">lpr
	      bestand</code>.</p><p>Voor een <span class="trademark">PostScript</span>®-printer moet het resultaat van
	    het programma verschijnen.  Als gebruik wordt gemaakt van
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> ziet het resultaat er ongeveer zo uit:</p><pre class="screen">!"#$%&amp;'()*+,-./01234
"#$%&amp;'()*+,-./012345
#$%&amp;'()*+,-./0123456
$%&amp;'()*+,-./01234567
%&amp;'()*+,-./012345678</pre><p>Om de printer uitvoeriger te testen kunnen grotere
	    programma's geprobeerd worden (voor taalgebaseerde
	    printers) of kan <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> aangeroepen worden met
	    andere argumenten.  Bijvoorbeeld: <code class="command">lptest 80
	      60</code>, drukt 60 regels af met elk 80 karakters.</p><p>Als de printer niet werkt, lees dan verder in <a class="link" href="printing-troubleshooting.html" title="10.7. Problemen oplossen">Problemen
	      oplossen</a>.</p></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="printing-intro-spooler.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="printing.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="printing-advanced.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">10.2. Inleiding </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 10.4. Geavanceerde printerinstallatie</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>