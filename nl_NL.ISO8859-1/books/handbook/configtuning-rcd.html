<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>12.7. Gebruik van rc met FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="config-tuning.html" title="Hoofdstuk 12. Instellingen en optimalisatie" /><link rel="prev" href="configtuning-cron.html" title="12.6. cron instellen" /><link rel="next" href="config-network-setup.html" title="12.8. Netwerkkaarten instellen" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">12.7. Gebruik van rc met FreeBSD</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configtuning-cron.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 12. Instellingen en optimalisatie</th><td width="20%" align="right"> <a accesskey="n" href="config-network-setup.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-rcd"></a>12.7. Gebruik van rc met FreeBSD</h2></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp75049168" class="indexterm"></a><p>Sinds 2002 gebruikt FreeBSD het NetBSD <code class="filename">rc.d</code>
      systeem bij het opstarten van het systeem.  Veel van de bestanden
      in <code class="filename">/etc/rc.d</code> zijn scripts voor
      basisdiensten die werken met de opties <code class="option">start</code>,
      <code class="option">stop</code> en <code class="option">restart</code>, analoog aan
      hoe diensten die via een port of pakket zijn geïnstalleerd
      gestart worden met de scripts in
      <code class="filename">/usr/local/etc/rc.d</code>.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> kan
      bijvoorbeeld als volgt herstart worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service restart</code></strong></pre><p>Deze procedure is vrijwel gelijk voor andere diensten.
      Uiteraard worden diensten meestal automatisch tijdens het
      opstarten van de computer gestart zoals in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> staat.
      Om de Network Address Translation daemon bij het opstarten te
      laten starten is de volgende regel in
      <code class="filename">/etc/rc.conf</code> bijvoorbeeld voldoende:</p><pre class="programlisting">natd_enable="YES"</pre><p>Als er reeds een <code class="literal">natd_enable="NO"</code> regel is,
      kan <code class="literal">NO</code> gewoon in <code class="literal">YES</code>
      veranderd worden.  De rc scripts starten, voor zover nodig,
      automatisch andere afhankelijke diensten.</p><p>Omdat het <code class="filename">rc.d</code> systeem in eerste
      instantie bedoeld is om diensten te starten en stoppen bij het
      opstarten en afsluiten van het systeem, werken de standaardopties
      <code class="option">start</code>, <code class="option">stop</code> en
      <code class="option">restart</code> alleen als de juiste variabelen in
      <code class="filename">/etc/rc.conf</code> zijn ingesteld.  Het commando
      <code class="command">sshd restart</code> alleen dan als
      <code class="varname">sshd_enable</code> de waarde <code class="literal">YES</code>
      heeft in <code class="filename">/etc/rc.conf</code>.  Als er een dienst
      gestart, gestopt of herstart moet worden, ongeacht de definities
      in <code class="filename">/etc/rc.conf</code>, moet het commando
      voorafgegaan worden door <span class="quote">&#8220;<span class="quote">one</span>&#8221;</span>.  Dus om
      <code class="command">sshd</code> te herstarten ongeacht
      de instellingen in <code class="filename">/etc/rc.conf</code>, voldoet het
      volgende commando:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service sshd onerestart</code></strong></pre><p>Het is eenvoudig te controleren of een dienst is ingeschakeld
      is in <code class="filename">/etc/rc.conf</code> door het bijpassende
      <code class="filename">rc.d</code>-script uit te voeren met de optie
      <code class="option">rcvar</code>.  Voor <code class="command">sshd</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service sshd rcvar</code></strong>
# sshd
$sshd_enable=YES</pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">De tweede regel (<code class="literal"># sshd</code>) is de
	uitvoer van <code class="command">sshd</code>, geen
	<code class="systemitem">root</code>-console.</p></div><p>De optie <code class="option">status</code> wordt gebruikt om vast te
      stellen of een dienst gestart is.  Om bijvoorbeeld te controleren
      of <code class="command">sshd</code> gestart is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service sshd status</code></strong>
sshd is running as pid 433.</pre><p>In sommige gevallen is het ook mogelijk om een dienst te
      herstarten met de optie <code class="option">reload</code>.  Dan wordt er
      getracht een signaal te sturen aan een individuele dienst, waarbij
      de dienst de bestanden met instellingen opnieuw in moet lezen.
      Meestal komt dit neer op het verzenden van het signaal
      <code class="literal">SIGHUP</code>.  Deze optie wordt niet door alle
      diensten ondersteund.</p><p>Het <span class="application">rc.d</span>-systeem wordt niet alleen
      gebruikt voor netwerkdiensten, maar ook voor het merendeel van de
      systeemstart.  In dit kader is bijvoorbeeld het bestand
      <code class="filename">bgfsck</code> interessant.  Als dit script wordt
      uitgevoerd, wordt de volgende boodschap getoond:</p><pre class="screen">Starting background file system checks in 60 seconds.</pre><p>Dit script wordt dus gebruikt voor bestandssysteemcontrole in
      de achtergrond, hetgeen alleen tijdens de systeemstart
      gebeurt.</p><p>Veel systeemdiensten zijn afhankelijk van andere diensten om
      correct te kunnen functioneren.  Zo starten NIS en andere
      RPC-gebaseerde diensten niet als de dienst
      <code class="command">rpcbind</code> (portmapper) nog niet draait.  Om dit
      te stroomlijnen wordt informatie over afhankelijkheden en andere
      metagegevens ingevoegd in het commentaar bovenaan het
      opstartscript.  Deze commentaarregels worden vervolgens tijdens de
      systeemstart met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> verwerkt om zo vast te stellen in
      welke volgorde de systeemdiensten gestart moeten worden.</p><p>De volgende woorden moeten in alle opstartscripts staan (ze
      zijn benodigd door <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a> om het opstartscript te
      activeren):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">PROVIDE</code>: geeft aan in welke diensten
	  dit bestand voorziet.</p></li><li class="listitem"><p><code class="literal">REQUIRE</code>: geeft aan welke andere
	  diensten vereist zijn voor deze dienst.  Dit script wordt
	  uitgevoerd <span class="emphasis"><em>na</em></span> de aangegeven
	  diensten.</p></li><li class="listitem"><p><code class="literal">BEFORE</code>: geeft diensten aan die
	  afhankelijk zijn van deze dienst.  Dit bestand wordt
	  uitgevoerd <span class="emphasis"><em>vóór</em></span> de
	  aangegeven diensten.</p></li></ul></div><p>Met deze methode kan een systeembeheerder gemakkelijk
      systeemdiensten besturen, zonder gedoe met
      <span class="quote">&#8220;<span class="quote">runlevels</span>&#8221;</span> zoals bij sommige andere <span class="trademark">UNIX</span>®
      systemen.</p><p>Meer informatie over het <code class="filename">rc.d</code>-systeem
      staat in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a>.  Als u geïnteresseerd
      bent in het schrijven van uw eigen
      <code class="filename">rc.d</code>-script of om de huidige scripts te
      verbeteren is wellicht <a class="link" href="../../../../doc/nl_NL.ISO8859-1/articles/rc-scripting" target="_top">dit
	artikel</a> interessant.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configtuning-cron.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="config-tuning.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="config-network-setup.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">12.6. <code class="command">cron</code> instellen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 12.8. Netwerkkaarten instellen</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>