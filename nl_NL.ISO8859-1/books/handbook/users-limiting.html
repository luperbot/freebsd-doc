<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>14.7. Gebruikers beperken</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="users.html" title="Hoofdstuk 14. Gebruikers- en basisaccountbeheer" /><link rel="prev" href="users-modifying.html" title="14.6. Accounts wijzigen" /><link rel="next" href="users-groups.html" title="14.8. Groepen" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">14.7. Gebruikers beperken</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="users-modifying.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 14. Gebruikers- en basisaccountbeheer</th><td width="20%" align="right"> <a accesskey="n" href="users-groups.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>14.7. Gebruikers beperken</h2></div></div></div><a id="idp76655440" class="indexterm"></a><a id="idp76655952" class="indexterm"></a><p>Bij het hebben van gebruikers komt wellicht ook de gedachte
      aan het beperken van de mogelijkheden op een systeem.  FreeBSD
      biedt een aantal mogelijkheden waarmee een beheerder de
      hoeveelheid systeembronnen die een gebruiker kan aanwenden kan
      beperken.  Die beperkingen zijn onderverdeeld in twee onderdelen:
      schijfquota en andere beperkingen voor bronnen.</p><a id="idp76657616" class="indexterm"></a><a id="idp76658128" class="indexterm"></a><a id="idp76659280" class="indexterm"></a><p>Schijfquota beperken het schijfgebruik voor gebruikers en ze
      bieden een mogelijkheid om dat gebruik snel te controleren zonder
      het iedere keer te hoeven berekenen.  Quota worden besproken in
      <a class="xref" href="quotas.html" title="19.15. Bestandssysteemquota">Paragraaf 19.15, &#8220;Bestandssysteemquota&#8221;</a>.</p><p>De overige beperking van bronnen omvat het beperken van het
      gebruik van CPU, geheugen en andere bronnen die gebruikers tot
      hun beschikking hebben.  Die worden ingesteld in aanmeldklassen
      en worden hieronder beschreven.</p><a id="idp76660944" class="indexterm"></a><p>Aanmeldklassen worden ingesteld in
      <code class="filename">/etc/login.conf</code>.  De precieze semantiek
      wordt niet behandeld in dit handboek, maar die staat beschreven
      in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.  Hier is het voldoende aan te geven dat
      iedere gebruiker wordt toegewezen aan een aanmeldklasse
      (standaard <code class="literal">default</code>) en dat iedere
      aanmeldklasse verbonden is met een groep aanmeldmogelijkheden
      (login capability).  Een aanmeldmogelijkheid is een
      <code class="literal">naam=waarde</code>
      paar, waar <em class="replaceable"><code>naam</code></em> een bekende eigenschap
      is en <em class="replaceable"><code>waarde</code></em> een arbitraire string is
      die wordt verwerkt afhankelijk van de naam.  Het instellen van
      aanmeldklassen en -mogelijkheden is een redelijk eenvoudig proces
      en wordt ook beschreven in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Een systeem leest de instellingen uit normaal gesproken
	<code class="filename">/etc/login.conf</code> niet direct, maar leest
	het databasebestand <code class="filename">/etc/login.conf.db</code>
	welke snellere opzoekmogelijkheden biedt.
	<code class="filename">/etc/login.conf.db</code> kan met het volgende
	commando gemaakt worden uit
	<code class="filename">/etc/login.conf</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre></div><p>Beperkingen van bronnen verschillen van standaard
      aanmeldmogelijkheden op twee manieren.  Ten eerste is er voor
      iedere beperking een zachte en een harde limiet.  Een zachte
      (huidige) limiet kan door een gebruiker of applicatie aangepast
      worden, maar mag niet hoger zijn dan de harde limiet.  De laatste
      kan door een gebruiker verlaagd worden, maar nooit verhoogd.
      Deze verschillen worden veroorzaakt door de specifieke
      behandeling van de beperkingen, niet door de implementatie van
      het aanmeldmogelijkheden raamwerk, dat wil zeggen dat ze niet
      <span class="emphasis"><em>echt</em></span> bijzondere aanmeldmogelijkheden
      zijn.</p><p>Hieronder worden de meest gebruikte beperkingen op bronnen
      beschreven.  De overige mogelijkheden, samen met alle andere
      aanmeldmogelijkheden, staat beschreven in
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp76704848" class="indexterm"></a><a id="idp76705360" class="indexterm"></a><p>De limiet op de grootte van een corebestand dat wordt
	    gemaakt door een programma is, om verschillende redenen,
	    ondergeschikt aan andere beperkingen op het gebied van
	    schijfgebruik (bijvoorbeeld <code class="literal">filesize</code> of
	    schijfquota).  Desalniettemin wordt deze instelling vaak
	    gebruikt als een minder zware methode voor het beheersen
	    van het gebruik van schijfruimte.  Omdat gebruikers niet
	    hun eigen corebestanden maken en ze vaak niet verwijderen,
	    kan deze instelling helpen te voorkomen dat een schijf vol
	    loopt in het geval een groot programma (bijvoorbeeld
	    <span class="application">emacs</span>) zou crashen.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp76713168" class="indexterm"></a><a id="idp76713680" class="indexterm"></a><p>Dit is de maximale hoeveelheid processortijd die een
	    proces van een gebruiker mag gebruiken.  Processen die meer
	    bronnen gebruiken worden afgeschoten door de kernel.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dit is een beperking op de CPU
	      <span class="emphasis"><em>tijd</em></span> die wordt gebruikt, niet op
	      een percentage van de CPU, zoals wordt getoond in
	      sommige velden door <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.  Een
	      limiet op de laatste is op het moment van schrijven
	      niet mogelijk en zou ook redelijk waardeloos zijn:
	      een compiler &#8211; waarschijnlijk een legitieme taak
	      &#8211; kan makkelijk gedurende enige tijd bij 100% van
	      een CPU gebruiken.</p></div></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp76719440" class="indexterm"></a><a id="idp76719952" class="indexterm"></a><p>Dit is de maximale grootte voor een bestand waar een
	    gebruiker eigenaar van kan zijn.  Anders dan bij <a class="link" href="quotas.html" title="19.15. Bestandssysteemquota">schijfquota</a> is deze limiet van
	    toepassing op individuele bestanden en niet op alle
	    bestanden samen waarvan een gebruiker eigenaar is.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp76723280" class="indexterm"></a><a id="idp76723792" class="indexterm"></a><p>Dit is het maximale aantal processen dat een gebruiker
	    mag draaien.  Hieronder vallen zowel processen die op de
	    voorgrond draaien als op de achtergrond.  Om duidelijke
	    reden kan deze waarde niet groter zijn dan de ingestelde
	    systeemlimiet voor <code class="varname">kern.maxproc</code> met
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  Het te laag zetten van deze instelling kan
	    de productiviteit van een gebruiker schaden: vaak is het
	    zinvol om meerdere keren aangemeld te zijn of om pipelines
	    uit te voeren.  Sommige taken, zoals het compileren van een
	    groot programma, brengen ook meerdere processen voort
	    (bijvoorbeeld <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a> en andere
	    tussentijdse preprocessors).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp76733520" class="indexterm"></a><a id="idp76734032" class="indexterm"></a><p>Dit is de maximale hoeveelheid geheugen die een proces
	    mag claimen om te locken in het hoofdgeheugen (zie
	    bijvoorbeeld <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).  Sommige systeemkritische
	    programma's, zoals <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, locken in het
	    hoofdgeheugen, zodat in het geval dat ze uitgewisseld moeten worden,
	    ze niet bijdragen aan dit uitwisselen indien er problemen
	    zijn.</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp76738384" class="indexterm"></a><a id="idp76738896" class="indexterm"></a><p>Dit is de maximale hoeveelheid geheugen die een proces
	    op enig moment mag gebruiken.  Hieronder vallen zowel
	    hoofdgeheugen als het gebruik van het wisselbestand.  Deze
	    limiet vangt niet al het geheugengebruik af, maar het is
	    een prima begin.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp76741840" class="indexterm"></a><a id="idp76742352" class="indexterm"></a><p>Dit is het maximale aantal bestanden dat een proces
	    open mag hebben.  In FreeBSD representeren bestanden ook
	    sockets en IPC kanalen.  Deze limiet mag dus niet te laag
	    gezet worden.  De limiet voor het systeem staat ingesteld
	    in <code class="varname">kern.maxfiles</code> van
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp76746320" class="indexterm"></a><a id="idp76746832" class="indexterm"></a><p>Dit is de limiet op de hoeveelheid netwerkgeheugen, en
	    dus mbufs, die een gebruiker ter beschikking staan.  Deze
	    waarde komt voort uit het antwoord op een DoS aanval
	    waarmee veel sockets werden gemaakt, maar het kan in het
	    algemeen gebruikt worden om de hoeveelheid
	    netwerkcommunicatie te limiteren.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><a id="idp76753872" class="indexterm"></a><a id="idp76754384" class="indexterm"></a><p>Dit is de maximale grootte voor een stack van een
	    proces.  Deze instelling alleen is niet genoeg om de
	    hoeveelheid geheugen die een programma mag gebruiken te
	    beperken.  Daarom moet deze limiet samen met andere
	    limieten gebruikt worden.</p></dd></dl></div><p>Er zijn nog een aantal dingen belangrijk bij het instellen
      bronbeperkingen.  Hierna worden een aantal algemene tips,
      suggesties en commentaren gegeven.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Processen die bij het opstarten van een systeem gestart
	  worden vanuit <code class="filename">/etc/rc</code> worden toegewezen
	  aan de aanmeldklasse <code class="literal">daemon</code>.</p></li><li class="listitem"><p>Hoewel de <code class="filename">/etc/login.conf</code> die bij
	  een systeem zit een goede bron is voor redelijke waardes voor
	  de meeste limieten, kan alleen de beheerder van een machine
	  de echt juiste waarden kennen.  Het te hoog instellen van een
	  limiet kan een systeem kwetsbaar maken voor misbruik, terwijl
	  het te laag instellen van limieten de productiviteit te veel
	  kan hinderen.</p></li><li class="listitem"><p>Gebruikers van het X Window systeem (X11) horen
	  waarschijnlijk meer bronnen toegewezen te krijgen dan andere
	  gebruikers.  X11 gebruikt zelf al meer bronnen, maar het
	  moedigt gebruikers ook aan om meerdere programma's
	  tegelijkertijd te draaien.</p></li><li class="listitem"><p>Het is belangrijk niet te vergeten dat veel limieten
	  betrekking hebben op individuele processen en niet op een
	  hele gebruiker.  Het instellen van bijvoorbeeld
	  <code class="varname">openfiles</code> op 50, betekent dat ieder proces
	  dat een gebruiker draait 50 open bestanden mag hebben.  Het
	  totale aantal bestanden dat een gebruiker dus open kan hebben
	  is het product van de waarde van <code class="literal">openfiles</code>
	  en de waarde van <code class="literal">maxproc</code>.  Dit geldt ook
	  voor het gebruik van geheugen.</p></li></ul></div><p>Meer informatie over bronbeperkingen en aanmeldklassen in het
      algemeen staan in de relevante hulppagina's: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="users-modifying.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="users.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="users-groups.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">14.6. Accounts wijzigen </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 14.8. Groepen</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>