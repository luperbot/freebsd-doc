<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>8.7. Scanners</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="multimedia.html" title="Hoofdstuk 8. Multimedia" /><link rel="prev" href="mythtv.html" title="8.6. MythTV" /><link rel="next" href="kernelconfig.html" title="Hoofdstuk 9. De FreeBSD-kernel instellen" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">8.7. Scanners</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mythtv.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 8. Multimedia</th><td width="20%" align="right"> <a accesskey="n" href="kernelconfig.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="scanners"></a>8.7. Scanners</h2></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp72075856" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72076368"></a>8.7.1. Inleiding</h3></div></div></div><p>In FreeBSD is toegang tot scanners mogelijk met
	<span class="application">SANE</span> (Scanner Access Now
	Easy) <acronym class="acronym">API</acronym> uit de FreeBSD Portscollectie.
	<span class="application">SANE</span> gebruikt ook een aantal FreeBSD
	apparaatstuurprogramma's om toegang te krijgen tot de hardware
	van de scanner.</p><p>FreeBSD ondersteunt SCSI en USB scanners.  Het is van belang te
	controleren of een scanner door <span class="application">SANE</span>
	wordt ondersteund voordat er instellingen worden gemaakt.
	<span class="application">SANE</span> heeft een lijst met <a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">ondersteunde
	  apparaten</a> waarin gekeken kan worden of een scanner
	wordt ondersteund en wat de status voor ondersteuning is.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72080592"></a>8.7.2. Kernel instellen</h3></div></div></div><p>Zoals hierboven al is aangegeven, worden zowel SCSI als
	USB-scanners ondersteund.  Afhankelijk van de gebruikte
	scannerinterface zijn verschillende apparaatstuurprogramma's
	nodig.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="scanners-kernel-usb"></a>8.7.2.1. USB-interface</h4></div></div></div><p>In de <code class="filename">GENERIC</code> kernel zitten
	  standaard de apparaatstuurprogramma's die nodig zijn voor
	  ondersteuning van USB-scanners.  In het geval wordt besloten
	  tot het maken van een aangepaste kernel, dan dienen de
	  volgende regels in het kernelinstellingenbestand te worden
	  opgenomen:</p><pre class="programlisting">device usb
device uhci
device ohci
device uscanner
device ehci</pre><p>Na een herstart met de juiste kernel kan de USB-scanner
	  aangesloten worden.  Een regel die de detectie van uw scanner
	  aangeeft zou in de berichtenbuffer van het systeem
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) moeten verschijnen:</p><pre class="screen">ugen0.2: &lt;EPSON&gt; at usbus0</pre><p>Deze berichten geven aan dat de scanner
	  <code class="filename">/dev/ugen0.2</code> als apparaatknooppunt gebruikt.
	  Voor dit voorbeeld was een <span class="trademark">EPSON
  Perfection</span>® 1650 USB-scanner
	  gebruikt.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72090704"></a>8.7.2.2. SCSI interface</h4></div></div></div><p>Als een scanner een SCSI interface heeft, is het
	  belangrijk te weten welk SCSI controllerbord gebruikt gaat
	  worden.  Afhankelijk van de gebruikte SCSI chipset, dient het
	  bestand met kernelinstellingen aangepast te worden.  De
	  <code class="filename">GENERIC</code> kernel ondersteunt de meest
	  voorkomende SCSI controllers.  In het bestand
	  <code class="filename">NOTES</code> is de juiste instelling te vinden
	  die toegevoegd moet worden aan het bestand met
	  kernelinstellingen.  Naast het toevoegen van het juiste
	  SCSI-adapter stuurprogramma, dienen ook de volgende regels
	  opgenomen te worden in het kernelinstellingenbestand:</p><pre class="programlisting">device scbus
device pass</pre><p>Als de kernel juist gecompileerd en geïnstalleerd is,
	  horen de apparaten tijdens het opstarten zichtbaar te zijn in
	  de systeemberichtbuffer:</p><pre class="screen">pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</pre><p>Als een scanner niet aan staat tijdens het opstarten, is
	  het nog mogelijk handmatig detectie te forceren door de
	  SCSI-bus te laten scannen met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol rescan all</code></strong>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</pre><p>In het bovenstaande geval zal de scanner ongeveer als
	  volgt verschijnen in de lijst met SCSI-apparaten:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</pre><p>Meer details over SCSI-apparaten staan in de hulppagina's
	  voor <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scsi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">scsi</span>(4)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72103632"></a>8.7.3. SANE instellen</h3></div></div></div><p>Het <span class="application">SANE</span> systeem is opgesplitst
	in twee delen: de backends (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>) en de
	frontends (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).  Het deel
	met de backends zorgt voor de toegang tot de scanner zelf.  In
	de lijst met door <span class="application">SANE</span> <a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">ondersteunde
	  apparaten</a> staat welk backend welke scanner(s)
	ondersteunt.  Het is echt nodig het juiste backend vast te
	stellen, omdat het anders bijzonder lastig wordt een scanner
	aan de praat te krijgen.  Het deel met frontends levert een
	grafische scaninterface
	(<span class="application">xscanimage</span>).</p><p>De eerste stap is om de port of het pakket <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a> te
	installeren.  Daarna kan met het commando
	<code class="command">sane-find-scanner</code> gecontroleerd worden welke
	scanner er door het <span class="application">SANE</span> systeem is
	gedetecteerd:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</pre><p>In de uitvoer is te lezen welk type interface en welk
	apparaatknooppunt worden gebruikt om de scanner met een systeem
	te verbinden.  Het merk en het model worden wellicht niet
	getoond, maar dat is ook niet echt van belang.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Sommige USB-scanners verlangen dat er firmware wordt
	  geladen.  Dit wordt uitgelegd in de hulppagina van het
	  backend.  Het is ook van belang <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane-find-scanner&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sane-find-scanner</span>(1)</span></a> en
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">sane</span>(7)</span></a> te lezen.</p></div><p>Hierna kan gecontroleerd worden of de scanner ook te zien
	is voor een scanner-frontend.  Er zit bij de
	<span class="application">SANE</span> backends een standaard
	hulpprogramma <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a>.  Met dit commando kunnen de
	apparaten zichtbaar gemaakt worden en kan vanaf de
	commandoregel gescand worden.  Met de optie <code class="option">-L</code>
	kunnen de scannerapparaten getoond worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</pre><p>Of, met bijvoorbeeld de USB-scanner die in <a class="xref" href="scanners.html#scanners-kernel-usb" title="8.7.2.1. USB-interface">Paragraaf 8.7.2.1, &#8220;USB-interface&#8221;</a> wordt gebruikt:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device 'epson2:libusb:/dev/usb:/dev/ugen0.2' is a Epson GT-8200 flatbed scanner</pre><p>Deze uitvoer komt van een FreeBSD 8.X systeem, het item
	<code class="literal">'epson2:libusb:/dev/usb:/dev/ugen0.2'</code> geeft de naam
	van het backend (<code class="literal">epson2</code>) en het apparaatknooppunt
	(<code class="literal">/dev/ugen0.2</code>) dat door onze scanner wordt
	gebruikt.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">De afwezigheid van uitvoer of een bericht dat aangeeft dat
	  er geen scanners zijn aangetroffen, betekent dat
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> niet in staat is een scanner te
	  identificeren.  Als dit gebeurt, dient het instellingenbestand
	  voor het backend aangepast te worden en dient daar de juiste
	  instelling gemaakt te worden.  De map <code class="filename">/usr/local/etc/sane.d/</code> bevat
	  alle bestanden met instellingen voor de backends.  Het is
	  bekend dat dit identificatieprobleem optreedt bij bepaalde
	  USB-scanners.</p><p xmlns="http://www.w3.org/1999/xhtml">De USB-scanner die in <a class="xref" href="scanners.html#scanners-kernel-usb" title="8.7.2.1. USB-interface">Paragraaf 8.7.2.1, &#8220;USB-interface&#8221;</a>
	  wordt gebruikt, wordt in FreeBSD 8.X prima gedetecteerd en werkt
	  daar, maar in eerdere versies van FreeBSD (waar <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a> wordt
	  gebruikt) toont het de volgende informatie met
	  <code class="command">sane-find-scanner</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</pre><p xmlns="http://www.w3.org/1999/xhtml">De bovenstaande uitvoer geeft aan dat de scanner juist is
	  gedetecteerd, dat het de USB-interface gebruikt en is
	  aangesloten op het apparaatknooppunt
	  <code class="filename">/dev/uscanner0</code>.  Nu kan gecontroleerd
	  worden of de scanner juist wordt geïdentificeerd:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</pre><p xmlns="http://www.w3.org/1999/xhtml">Omdat in het bovenstaande voorbeeld de scanner niet wordt
	  geïdentificeerd, dient het bestand
	  <code class="filename">/usr/local/etc/sane.d/epson2.conf</code>
	  gewijzigd te worden.  De gebruikte scanner is een
	  <span class="trademark">EPSON
  Perfection</span>® 1650, dus in dit geval dient voor de scanner
	  het backend <code class="literal">epson2</code> gebruikt te worden.  Het
	  is van belang om het commentaar in de instellingenbestanden van
	  de backends te lezen.  Het aanpassen van regels is eenvoudig:
	  plaats een commentaarkarakter voor alle regels voor andere
	  interfaces dan die nodig zijn weg (in dit geval worden alle
	  regels die beginnen met het woord <code class="literal">scsi</code>
	  uitgeschakeld, omdat er een USB-interface wordt gebruiken), en
	  dan kan onderaan het bestand een regel met de gebruikte
	  interface en apparaatknooppunt geplaatst worden:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">usb /dev/uscanner0</pre><p xmlns="http://www.w3.org/1999/xhtml">Het is aan te raden de opmerkingen te lezen in het bestand
	  met instellingen voor het backend en ook de hulppagina, omdat
	  daarin meer details en de correcte syntaxis te vinden zijn.  Nu
	  kan gecontroleerd worden of de scanner wèl juist wordt
	  geïdentificeerd:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</pre><p xmlns="http://www.w3.org/1999/xhtml">De USB-scanner is geïdentificeerd.  Het is niet
	  belangrijk dat het merk en model niet overeenkomen met de
	  scanner.  Het belangrijkste is het veld
	  <code class="literal">`epson:/dev/uscanner0'</code>, dat de
	  juiste benamingen voor het backend en het apparaatknooppunt
	  aangeeft.</p></div><p>Als <code class="command">scanimage -L</code> in staat is een scanner
	goed te zien, dan zijn de instellingen compleet.  Er kan nu met
	het apparaat gescand worden.</p><p>Hoewel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> in staat is om vanaf de
	commandoregel te scannen, is het aan te raden beelden te
	scannen vanuit de grafische gebruikersinterface.
	<span class="application">SANE</span> heeft een eenvoudige, maar
	efficiënte grafische interface:
	<span class="application">xscanimage</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).</p><p><span class="application">Xsane</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a>) is een ander
	populair grafisch scanfrontend, dat geavanceerde
	mogelijkheden biedt, zoals meerdere scanmodi (fotokopie, fax,
	enzovoort), kleurcorrectie, batchscannen, enzovoort.  Beide
	applicaties zijn als plug-in voor
	<span class="application">GIMP</span> te gebruiken.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72144464"></a>8.7.4. Andere gebruikers toegang tot de scanner geven</h3></div></div></div><p>Alle voorgaande taken zijn uitgevoerd met
	<code class="systemitem">root</code> rechten, maar het is wellicht ook
	nodig dat andere gebruikers de scanner kunnen gebruiken.  Dan
	heeft een gebruiker lees- en schrijfrechten nodig op de
	apparaatknooppunt voor een scanner.  Onze USB-scanner gebruikt
	bijvoorbeeld apparaatknooppunt <code class="filename">/dev/ugen0.2</code> wat in
	feite slechts een symbolische koppeling is naar het echte
	apparaatknooppunt genaamd <code class="filename">/dev/usb/0.2.0</code> (een blik
	op de inhoud van de map <code class="filename">/dev</code>
	bevestigt dit).  Zowel de symbolische koppeling als het
	apparaatknooppunt zijn van respectievelijk de groepen
	<code class="systemitem">wheel</code> en
	<code class="systemitem">operator</code>.  Door de gebruiker
	<code class="systemitem"><em class="replaceable"><code>joe</code></em></code> aan deze groepen toe
	te voegen kan hij de scanner zien, maar vanwege duidelijke
	veiligheidsredenen dient het toevoegen van een gebruiker aan elke groep
	met zorg te gebeuren, vooral aan de groep <code class="systemitem">wheel</code>.
	Een betere oplossing is om een specifieke groep aan te maken voor het
	gebruik van USB-apparaten en de scanner toegankelijk te maken voor leden
	van deze groep.</p><p>We zullen dus bijvoorbeeld een groep genaamd
	<code class="systemitem"><em class="replaceable"><code>usb</code></em></code> gebruiken.  De
	eerste stap is het aanmaken van deze groep met behulp van het commando
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupadd usb</code></strong></pre><p>Hierna moeten we de symbolische koppeling
	<code class="filename">/dev/ugen0.2</code> aanmaken en het apparaatknooppunt
	<code class="filename">/dev/usb/0.2.0</code> met de juiste schrijfpermissies
	toegankelijk maken voor de groep <code class="systemitem">usb</code>
	(<code class="literal">0660</code> of <code class="literal">0664</code>), omdat standaard
	alleen de eigenaar van deze bestanden (<code class="systemitem">root</code>)
	ernaar kan schrijven.  Dit alles wordt gedaan door de volgende regels
	aan <code class="filename">/etc/devfs.rules</code> toe te voegen:</p><pre class="programlisting">[system=5]
add path ugen0.2 mode 0660 group usb
add path usb/0.2.0 mode 0666 group usb</pre><p>Nu dienen er alleen nog gebruikers aan de groep
	<code class="systemitem"><em class="replaceable"><code>usb</code></em></code> toegevoegd te
	worden om toegang tot de scanner toe te staan:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod usb -m joe</code></strong></pre><p>Lees voor meer details de handleidingpagina van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mythtv.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="multimedia.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="kernelconfig.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">8.6. MythTV </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> Hoofdstuk 9. De FreeBSD-kernel instellen</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>