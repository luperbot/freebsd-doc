<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>4.3. Rechten</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="basics.html" title="Hoofdstuk 4. UNIX® beginselen" /><link rel="prev" href="consoles.html" title="4.2. Virtuele consoles en terminals" /><link rel="next" href="dirstructure.html" title="4.4. Mappenstructuur" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.3. Rechten</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="consoles.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 4. <span class="trademark">UNIX</span>® beginselen</th><td width="20%" align="right"> <a accesskey="n" href="dirstructure.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="permissions"></a>4.3. Rechten</h2></div></div></div><a id="idp69037776" class="indexterm"></a><p>FreeBSD, direct afgeleid van BSD <span class="trademark">UNIX</span>®, is gebaseerd op
      verschillende belangrijke <span class="trademark">UNIX</span>® concepten.  Het meest bekende is
      dat FreeBSD een multi-user systeem is.  Het systeem kan meerdere
      gebruikers behandelen die tegelijkertijd totaal verschillende
      dingen doen.  Het systeem is verantwoordelijk voor het netjes
      delen en beheren voor aanvragen voor hardware, randapparatuur,
      geheugen en cpu tijd tussen elke gebruiker.</p><p>Omdat het systeem in staat is om meerdere gebruikers te
      ondersteunen, heeft alles wat door het systeem beheerd wordt een
      set van rechten die aangeeft wie mag lezen, schrijven en de
      bron mag uitvoeren.  Deze rechten zijn opgeslagen in drie
      octetten, die weer in drie stukjes onderverdeeld zijn:
      één voor de eigenaar van het bestand,
      één voor de groep waar het bestand toe behoort en
      één voor de overigen.  De numerieke weergave werkt
      als volgt:</p><a id="idp69040080" class="indexterm"></a><a id="idp69040592" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Waarde</th><th>Recht</th><th>Maprecht</th></tr></thead><tbody><tr><td>0</td><td>Niet lezen, niet schrijven, niet uitvoeren</td><td><code class="literal">---</code></td></tr><tr><td>1</td><td>Niet lezen, niet schrijven,  uitvoeren</td><td><code class="literal">--x</code></td></tr><tr><td>2</td><td>Niet lezen, schrijven, niet uitvoeren</td><td><code class="literal">-w-</code></td></tr><tr><td>3</td><td>Niet lezen, schrijven, uitvoeren</td><td><code class="literal">-wx</code></td></tr><tr><td>4</td><td>Lezen, niet schrijven, niet uitvoeren</td><td><code class="literal">r--</code></td></tr><tr><td>5</td><td>Lezen, niet schrijven, uitvoeren</td><td><code class="literal">r-x</code></td></tr><tr><td>6</td><td>Lezen, schrijven, niet uitvoeren</td><td><code class="literal">rw-</code></td></tr><tr><td>7</td><td>Lezen, schrijven, uitvoeren</td><td><code class="literal">rwx</code></td></tr></tbody></table></div><a id="idp69066320" class="indexterm"></a><a id="idp69066960" class="indexterm"></a><p>De <code class="option">-l</code> optie kan gebruikt worden met
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> om een lange lijst met de inhoud van een map te zien
      die een kolom heeft met informatie over bestandsrechten voor de
      eigenaar, groep en de rest.  <code class="command">ls -l</code> in een
      willekeurige map kan het volgende laten zien:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ls -l</code></strong>
total 530
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 myfile
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 otherfile
-rw-r--r--  1 root  wheel    7680 Sep  5 12:31 email.txt
...</pre><p>Zo ziet de eerste kolom van <code class="command">ls -l</code>
      eruit:</p><pre class="screen">-rw-r--r--</pre><p>Het eerste (meest linkse) karakter geeft aan of dit een
      reguliere bestand is, een map, een speciaal karakter
      component(!), een socket of een andere pseudo-file component(!).
      In dit geval betekent de <code class="literal">-</code> dat het een
      regulier bestand is.  De volgende drie karakters,
      <code class="literal">rw-</code> in dit voorbeeld, geven de rechten voor de
      eigenaar van het bestand.  De drie karakters
      <code class="literal">r--</code> erna geven de rechten van voor de groep van
      het bestand.  De overige drie karakters <code class="literal">r--</code>
      tonen de rechten voor alle overige gebruikers.  Een streepje betekent dat
      de rechten uitgeschakeld zijn.  In het geval van dit bestand zijn de
      rechten zo ingesteld dat de eigenaar kan lezen en schrijven naar
      het bestand, de groep het bestand kan lezen, en alle overige
      gebruikers kunnen ook het bestand lezen.  Volgens de tabel hierboven
      worden de rechten <code class="literal">644</code>, waar de cijfers de drie
      stukjes van de rechten aangeven.</p><p>Dit is allemaal leuk en aardig, maar hoe controleert het
      systeem dan rechten voor apparaten?  FreeBSD behandelt de meeste
      hardware apparaten als bestanden die door programma's kunnen
      worden geopend en gelezen, en waar data naar toe kan worden
      geschreven, net zoals elk ander bestand.  Deze speciale apparaat
      bestanden worden bewaard in de map
      <code class="filename">/dev</code>.</p><p>Mappen worden ook behandeld als bestanden.  Ze hebben lees,
      schrijf en uitvoerbare rechten.  De uitvoerbare vlag voor een map
      heeft een klein verschil qua betekenis dan die voor gewone
      bestanden.  Als een map als uitvoerbaar gemarkeerd is, betekent
      het dat erin gekeken mag worden.  Het is dus mogelijk om te
      wisselen naar de map met <code class="command">cd</code> (wissel van map).
      Dit betekent ook dat in de map bestanden benaderd kunnen worden
      waarvan de naam bekend is.  Dit is natuurlijk afhankelijk van de
      rechten op het bestand zelf.</p><p>In het bijzonder, om een lijst van de map te kunnen maken,
      moet een gebruiker leesrechten op de map hebben.  Om een bestand
      te verwijderen zijn de naam van het bestand en schrijf
      <span class="emphasis"><em>en</em></span> uitvoerrechten op de map nodig waarin het
      bestand zich bevindt.</p><p>Er zijn meer rechtenvlaggen, maar die worden slechts gebruikt
      in speciale gevallen, zoals bij setuid binaries en sticky mappen.
      Meer informatie over bestandsrechten en hoe die aangepast kunnen
      worden staat in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69081680"></a>4.3.1. Symbolische rechten</h3></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp69084112" class="indexterm"></a><p>Symbolische rechten, soms ook wel symbolische expressies,
	gebruiken karakters in plaats van octale getallen om rechten
	aan bestanden en mappen te geven.  Symbolische expressies
	gebruiken de volgende opbouw: (wie) (actie) (permissies), waar
	de volgende waardes beschikbaar zijn:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Optie</th><th>Letter</th><th>Vertegenwoordigt</th></tr></thead><tbody><tr><td>(wie)</td><td>u</td><td>Gebruiker</td></tr><tr><td>(wie)</td><td>g</td><td>Groepseigenaar</td></tr><tr><td>(wie)</td><td>o</td><td>Overigen</td></tr><tr><td>(wie)</td><td>a</td><td>Iedereen (<span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span>)</td></tr><tr><td>(actie)</td><td>+</td><td>Rechten toevoegen</td></tr><tr><td>(actie)</td><td>-</td><td>Rechten verwijderen</td></tr><tr><td>(actie)</td><td>=</td><td>Stel deze rechten in</td></tr><tr><td>(recht)</td><td>r</td><td>Lezen</td></tr><tr><td>(recht)</td><td>w</td><td>Schrijven</td></tr><tr><td>(recht)</td><td>x</td><td>Uitvoeren</td></tr><tr><td>(recht)</td><td>t</td><td>Sticky bit</td></tr><tr><td>(recht)</td><td>s</td><td>Verander UID of GID</td></tr></tbody></table></div><p>Deze waardes worden gebruikt met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>, net zoals
	eerder, alleen nu met letters.  Het volgende commando kan
	gebruikt worden om de overige gebruikers toegang tot
	<em class="replaceable"><code>BESTAND</code></em> te ontzeggen:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go= BESTAND</code></strong></pre><p>Er kan een door komma's gescheiden lijst geleverd worden als
	meer dan één wijziging aan een bestand moet worden
	uitgevoerd.  Het volgende commando past de rechten voor de groep
	en de <span class="quote">&#8220;<span class="quote">wereld</span>&#8221;</span> aan door de schrijfrechten te
	ontnemen om daarna iedereen uitvoerrechten te geven:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go-w,a+x BESTAND</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69120976"></a>4.3.2. FreeBSD bestandsvlaggen</h3></div><div><span class="authorgroup">Geschreven door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Naast de bestandsrechten die hiervoor zijn besproken,
	biedt FreeBSD ondersteuning voor <span class="quote">&#8220;<span class="quote">bestandsvlaggen.</span>&#8221;</span>
	Deze vlaggen bieden een aanvullend beveiligingsniveau en
	controle over bestanden, maar niet over mappen.</p><p>Bestandsvlaggen voegen een extra niveau van controle over
	bestanden, waardoor verzekerd kan worden dat in sommige
	gevallen zelfs <code class="systemitem">root</code> een bestand niet kan
	verwijderen of wijzigen.</p><p>Bestandsvlaggen worden gewijzigd met het hulpprogramma
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>, dat een eenvoudige interface heeft.  Om
	bijvoorbeeld de systeemvlag niet verwijderdbaar in te stellen
	op het bestand <code class="filename">file1</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags sunlink file1</code></strong></pre><p>Om de vlag niet verwijderbaar weer te verwijderen kan het
	voorgaande commando met <span class="quote">&#8220;<span class="quote">no</span>&#8221;</span> voor
	<code class="option">sunlink</code> worden uitgevoerd:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags nosunlink file1</code></strong></pre><p>Om de vlaggen op een bestand te bekijken, kan het <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>
	commando met de vlaggen <code class="option">-lo</code> gebruikt worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -lo file1</code></strong></pre><p>De uitvoer hoort er ongeveer als volgt uit te zien:</p><pre class="programlisting">-rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 file1</pre><p>Een aantal vlaggen kan alleen ingesteld of verwijderd
	worden door de gebruiker <code class="systemitem">root</code>.  In andere
	gevallen kan de eigenaar van een bestand vlaggen instellen.
	Meer informatie voor beheerders staat in <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> en
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chflags</span>(2)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69135696"></a>4.3.3. De <code class="literal">setuid</code>-, <code class="literal">setgid</code>-, en <code class="literal">klevende</code> toestemmingen</h3></div><div><span class="authorgroup">Bijgedragen door <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Buiten de toestemmingen die reeds besproken zijn, zijn er
	nog drie specifieke instellingen waarvan alle beheerders kennis
	dienen te hebben.  Dit zijn de <code class="literal">setuid</code>-,
	<code class="literal">setgid</code>-, en <code class="literal">sticky</code>
	toestemmingen.</p><p>Deze instellingen zijn belangrijk voor sommige
	<span class="trademark">UNIX</span>®-bewerkingen omdat ze functionaliteit bieden die
	normaliter niet aan normale gebruikers wordt gegeven.  Om ze te
	begrijpen, dient ook het verschil tussen de echte gebruikers-ID
	en de effectieve gebruikers-ID opgemerkt te worden.</p><p>De echte gebruikers-ID is de <acronym class="acronym">UID</acronym> die het
	proces start of bezit.  De effectieve <acronym class="acronym">UID</acronym> is
	de gebruikers-ID waaronder het proces draait.  Bijvoorbeeld, het
	gereedschap <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> draait met de echte gebruikers-ID van
	de gebruiker die het wachtwoord verandert; echter, om de
	database met wachtwoorden te manipuleren, draait het met de
	effectieve ID van de gebruiker <code class="systemitem">root</code>.  Dit
	is wat normale gebruikers in staat stelt om hun wachtwoorden te
	veranderen zonder een fout <span class="errorname">Permission
	  Denied</span> te zien.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">De <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>-optie <code class="literal">nosuid</code> zorgt
	  ervoor dat deze binairen zwijgend falen.  Dit houdt in dat ze
	  niet worden uitgevoerd zonder ooit de gebruiker op de hoogte
	  te stellen.  Deze optie is ook niet geheel betrouwbaar
	  aangezien een <code class="literal">nosuid</code>-wrapper dit volgens de
	  handleidingpagina <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> kan omzeilen.</p></div><p>De setuid-toestemming kan aangezet worden door het cijfer
	vier (4) voor een toestemmingenverzameling te plaatsen zoals te
	zien is in het volgende voorbeeld:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 4755 suidvoorbeeld.sh</code></strong></pre><p>De toestemmingen op het bestand
	<code class="filename">suidvoorbeeld.sh</code> dienen er nu als volgt uit
	te zien:</p><pre class="programlisting">-rwsr-xr-x   1 trhodes  trhodes    63 Aug 29 06:36 suidvoorbeeld.sh</pre><p>Het zou in dit voorbeeld te zien moeten zijn dat een
	<code class="literal">s</code> nu deel is van de toestemmingenverzameling
	bestemd voor de bestandseigenaar, en de uitvoerbare bit
	vervangt.  Dit staat gereedschappen toe die verhoogde
	toestemmingen nodig hebben, zoals <code class="command">passwd</code>.</p><p>Open twee terminals om dit in real-time te zien.  Start op
	het ene het proces <code class="command">passwd</code> als een normale
	gebruiker.  Controleer de procestabel terwijl het op een nieuw
	wachtwoord wacht en kijk naar de gebruikersinformatie van het
	commando <code class="command">passwd</code>.</p><p>In terminal A:</p><pre class="screen">Changing local password for trhodes
Old Password:</pre><p>In terminal B:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ps aux | grep passwd</code></strong></pre><pre class="screen">trhodes  5232  0.0  0.2  3420  1608   0  R+    2:10AM   0:00.00 grep passwd
root     5211  0.0  0.2  3620  1724   2  I+    2:09AM   0:00.01</pre><p>Zoals boven vermeld, wordt <code class="command">passwd</code> door
	een normale gebruiker gedraaid, maar gebruikt het de effectieve
	<acronym class="acronym">UID</acronym> van <code class="systemitem">root</code>.</p><p>De <code class="literal">setgid</code>-toestemming voert dezelfde
	functie uit als de <code class="literal">setuid</code>-toestemming;
	behalve dat het de groepsinstellingen verandert.  Wanneer een
	applicatie of gereedschap met deze instelling wordt gedraaid,
	krijgt het de toestemmingen gebaseerd op de groep die het
	bestand bezit, niet op de gebruiker die het proces startte.</p><p>Om de <code class="literal">setgid</code>-toestemming op een bestand
	aan te zetten, dient een voorlopende twee (2) aan het commando
	<code class="command">chmod</code> gegeven te worden zoals in het volgende
	voorbeeld:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 2755 sgidvoorbeeld.sh</code></strong></pre><p>De nieuwe instelling kan zoals hierboven bekeken worden,
	merk op dat de <code class="literal">s</code> nu in het veld bestemd voor
	de instellingen van de  groepstoestemmingen staat:</p><pre class="programlisting">-rwxr-sr-x   1 trhodes  trhodes    44 Aug 31 01:49 sgidvoorbeeld.sh</pre><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">In deze voorbeelden zal het shellscript niet met een
	  andere <acronym class="acronym">EUID</acronym> of effectief gebruikers-ID
	  draaien, zelfs al is het shellscript uitvoerbaar.  Dit is
	  omdat shellscripts geen toegang hebben tot de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setuid&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">setuid</span>(2)</span></a>-systeemaanroepen.</p></div><p>De eerste twee speciale toestemmingsbits die we besproken
	hebben (de toestemmingsbits <code class="literal">setuid</code> en
	<code class="literal">setgid</code>) kunnen de systeemveiligheid verlagen,
	door verhoogde toestemmingen toe te staan.  Er is een derde bit
	voor speciale toestemmingen die de veiligheid van een systeem
	kan verhogen: de <code class="literal">klevende bit</code>.</p><p>De <code class="literal">klevende bit</code>, wanneer deze op een map
	is ingesteld, staat alleen het verwijderen van bestanden toe
	door de eigenaar van die bestanden.  Deze
	toestemmingenverzameling is nuttig om het verwijderen van
	bestanden in publieke mappen, zoals <code class="filename">/tmp</code>, door gebruikers die het
	bestand niet bezitten te voorkomen.  Zet een één
	(1) voor de toestemming om deze toestemming te gebruiken.
	Bijvoorbeeld:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 1777 /tmp</code></strong></pre><p>Het effect kan nu met het commando <code class="command">ls</code>
	bekeken worden:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -al / | grep tmp</code></strong></pre><pre class="screen">drwxrwxrwt  10 root  wheel         512 Aug 31 01:49 tmp</pre><p>De toestemming <code class="literal">klevende bit</code> is te
	onderscheiden met de <code class="literal">t</code> aan het einde van de
	verzameling.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="consoles.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="basics.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="dirstructure.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">4.2. Virtuele consoles en terminals </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 4.4. Mappenstructuur</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>