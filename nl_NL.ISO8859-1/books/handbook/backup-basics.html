<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>19.12. Back-upbeginselen</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD handboek" /><link rel="up" href="disks.html" title="Hoofdstuk 19. Opslag" /><link rel="prev" href="backup-strategies.html" title="19.11. Back-up strategieën" /><link rel="next" href="disks-virtual.html" title="19.13. Netwerk-, geheugen-, en bestandsgebaseerde bestandssystemen" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.12. Back-upbeginselen</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="backup-strategies.html">Terug</a> </td><th width="60%" align="center">Hoofdstuk 19. Opslag</th><td width="20%" align="right"> <a accesskey="n" href="disks-virtual.html">Volgende</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-basics"></a>19.12. Back-upbeginselen</h2></div></div></div><p>De drie grote back-upprogramma's zijn <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80181840"></a>19.12.1. Dump en Restore</h3></div></div></div><a id="idp80182480" class="indexterm"></a><a id="idp80183632" class="indexterm"></a><a id="idp80188496" class="indexterm"></a><p>De traditionele back-upprogramma's voor <span class="trademark">UNIX</span>® zijn
	<code class="command">dump</code> en <code class="command">restore</code>.  Deze
	zien het station als een verzameling van schijfblokken, onder
	de abstracties van bestanden, koppelingen en mappen die door de
	bestandssystemen worden aangemaakt.  In tegenstelling tot andere
	back-upprogramma's, verzorgt <code class="command">dump</code> een
	back-up van een compleet bestandssysteem op een apparaat.  Het
	is niet in staat om slechts een gedeelte van een bestandssysteem
	of een mapstructuur die meer dan één
	bestandssysteem in beslag neemt te back-uppen.  Het commando
	<code class="command">dump</code> schrijft geen bestanden en
	mappen naar band, maar de rauwe gegevensblokken waaruit de
	bestanden en mappen bestaan.  Wanneer het gebruikt wordt om
	gegevens te extraheren, slaat <code class="command">restore</code>
	tijdelijke bestanden standaard op in <code class="filename">/tmp/</code>
	&#8212; als u werkt vanaf een herstelschijf met een kleine map
	<code class="filename">/tmp</code>, moet u wellicht de
	omgevingsvariabele <code class="envar">TMPDIR</code> op een map met meer
	vrije ruimte instellen zodat de restore kan slagen.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Indien <code class="command">dump</code> op een hoofdmap wordt
	  gebruikt, wordt er geen back-up gemaakt van <code class="filename">/home
	  </code>, <code class="filename">/usr</code> of van de vele andere
	  mappen, aangezien dit typisch koppelpunten voor andere
	  bestandssystemen of symbolische koppelingen binnen deze
	  bestandssystemen zijn.</p></div><p><code class="command">dump</code> bevat eigenaardigheden die uit de
	begintijd in Versie 6 van AT&amp;T <span class="trademark">UNIX</span>® (circa 1975) zijn
	overgebleven.  De standaardparameters zijn geschikt voor banden
	met 9 sporen (6.250 bpi), niet voor de media met hoge dichtheid
	die vandaag beschikbaar zijn (tot 62.182 ftpi).  Deze
	standaardwaarden dienen op de opdrachtregel overschreven te
	worden om de capaciteit van de huidige bandstations te
	benutten.</p><a id="idp80216784" class="indexterm"></a><p>Het is ook mogelijk om gegevens met
	<code class="command">rdump</code> en <code class="command">rrestore</code> over
	een netwerk naar een bandstation dat aan een andere computer
	gekoppeld is te back-uppen.  Beide programma's maken gebruik
	van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcmd&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">rcmd</span>(3)</span></a> en <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a> om toegang tot het
	bandstation op afstand te krijgen.  De gebruiker die de back-up
	uitvoert moet vermeld staat in het bestand
	<code class="filename">.rhosts</code> op de computer op afstand.  De
	argumenten die aan <code class="command">rdump</code> en
	<code class="command">rrestore</code> gegeven worden dienen geschikt te
	zijn voor gebruik op de computer op afstand.  Als
	<code class="command">rdump</code> gebruikt wordt om een dump te maken
	van een FreeBSD computer naar een Exabyte-bandstation dat
	met een Sun-computer genaamd <code class="systemitem">komodo</code> verbonden
	is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</code></strong></pre><p>Let op: er kleven veiligheidsbezwaren aan het toestaan van
	authenticatie met <code class="filename">.rhosts</code>.  De situatie
	dient goed geëvalueerd te worden.</p><p>Het is ook mogelijk om <code class="command">dump</code> en
	<code class="command">restore</code> op een veiligere manier via
	<code class="command">ssh</code> te gebruiken.</p><div class="example"><a id="idp80225488"></a><div class="example-title">Voorbeeld 19.1. Het gebruik van <code class="command">dump</code> via
	  <span class="application">ssh</span></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \
	  doelgebruiker@doelmachine.example.com dd of=/mijngrotebestanden/dump-usr-10.gz</code></strong></pre></div></div><br class="example-break" /><p>Ook kan de ingebouwde manier van <code class="command">dump</code>
	gebruikt worden, door de omgevingsvariabele <code class="envar">RSH</code>
	in te stellen:</p><div class="example"><a id="idp80228944"></a><div class="example-title">Voorbeeld 19.2. Het gebruik van <code class="command">dump</code> via
	  <span class="application">ssh</span> met ingestelde
	  <code class="envar">RSH</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>env RSH=/usr/bin/ssh /sbin/dump -0uan -f doelgebruiker@doelmachine.example.com:/dev/sa0 /usr</code></strong></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80231760"></a>19.12.2. <code class="command">tar</code></h3></div></div></div><a id="idp80232528" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> stamt ook uit de tijd van Versie 6 van AT&amp;T
	<span class="trademark">UNIX</span>® (circa 1975).  Het werkt samen met het bestandssysteem.
	<code class="command">tar</code> schrijft bestanden en mappen naar band
	en ondersteunt niet het volledige scala aan opties dat
	beschikbaar is met <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>, maar <code class="command">tar</code>
	heeft niet de ongebruikelijke opdrachtpijplijn nodig die
	<code class="command">cpio</code> gebruikt.</p><a id="idp80237520" class="indexterm"></a><p>Om <code class="command">tar</code> toe te passen op een Exabyte-bandstation
	die met een Sun genaamd <code class="systemitem">komodo</code> verbonden
	is:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar cf - . | rsh komodo dd of=tape-device obs=20b</code></strong></pre><p>Indien de veiligheid van back-uppen over een netwerk een
	punt is, dient gebruik te worden gemaakt van het commando
	<code class="command">ssh</code> en niet van
	<code class="command">rsh</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80241744"></a>19.12.3. <code class="command">cpio</code></h3></div></div></div><a id="idp80242512" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> is het originele <span class="trademark">UNIX</span>® bandprogramma voor
	magnetische media om bestanden uit te wisselen.
	<code class="command">cpio</code> heeft opties (naast vele anderen) om
	byte-swapping uit te voeren, een aantal verschillende
	archiefformaten te schrijven en de gegevens over een pijplijn
	naar andere programma's te voeren.  Deze laatste optie maakt
	<code class="command">cpio</code> een uitstekende keuze voor
	installatiemedia.  <code class="command">cpio</code> weet niet hoe het
	door een mapstructuur moet lopen.  Er dient een lijst met
	bestanden door <code class="filename">stdin</code> aangeleverd te
	worden.</p><a id="idp80246864" class="indexterm"></a><p><code class="command">cpio</code> biedt geen ondersteuning voor
	back-ups over het netwerk.  Er kan gebruik worden gemaakt van
	een pijplijn en <code class="command">rsh</code> om de gegevens naar een
	banddrive op afstand te sturen.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>for f in maplijst;  do</code></strong>
<strong class="userinput"><code>find $f &gt;&gt; back-up.lijst</code></strong>
<strong class="userinput"><code>done</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpio -v -o --format=newc &lt; back-up.lijst | ssh gebruiker@host "cat &gt; back-upapparaat"</code></strong></pre><p>Hier is <em class="replaceable"><code>maplijst</code></em> een lijst van
	de mappen waarvan een back-up gemaakt dient te worden,
	<em class="replaceable"><code>gebruiker</code></em>@<em class="replaceable"><code>host</code></em>
	de gebruiker/hostnaam-combinatie die de back-ups uitvoert, en
	<em class="replaceable"><code>back-upapparaat</code></em> het apparaat waar de
	back-ups naar toe geschreven te worden (bijvoorbeeld
	<code class="filename">/dev/nsa0</code>).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80261712"></a>19.12.4. <code class="command">pax</code></h3></div></div></div><a id="idp80262480" class="indexterm"></a><a id="idp80263760" class="indexterm"></a><a id="idp80264400" class="indexterm"></a><a id="idp80264912" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a> is het antwoord van IEEE en <span class="trademark">POSIX</span>® op
	<code class="command">tar</code> en <code class="command">cpio</code>.  In de loop
	der jaren zijn de verscheidene versies van
	<code class="command">tar</code> en <code class="command">cpio</code> licht
	incompatibel geworden.  Dus in plaats van dit uit te vechten en
	ze volledig te standaardiseren, heeft <span class="trademark">POSIX</span>® een nieuw
	archiveringsprogramma gemaakt.  <code class="command">pax</code> poogt om
	veel van de verscheidene formaten van <code class="command">cpio</code>
	en <code class="command">tar</code> te lezen en te schrijven, met daarbij
	nog nieuwe, eigen formaten.  De commandoverzameling lijkt meer
	op die van <code class="command">cpio</code> dan op die van
	<code class="command">tar</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-programs-amanda"></a>19.12.5. <span class="application">Amanda</span></h3></div></div></div><a id="idp80272208" class="indexterm"></a><a id="idp80273488" class="indexterm"></a><p><span class="application">Amanda</span> (Advanced Maryland
	Network Disk Archiver) is een client/server-back-upsysteem, in
	plaats van een enkel programma.  Een
	<span class="application">Amanda</span> server back-upt elk aantal
	computers dat een <span class="application">Amanda</span> client en
	een netwerkverbinding met de <span class="application">Amanda</span>
	server heeft naar een enkel bandstation.  Een veelvoorkomend
	probleem bij bedrijven met een groot aantal schijven is dat de
	tijd die nodig is om de gegevens direct naar band te back-uppen
	langer is dan de tijd die voor de taak gereserveerd is.
	<span class="application">Amanda</span> lost dit probleem op.
	<span class="application">Amanda</span> kan gebruik maken van een
	<span class="quote">&#8220;<span class="quote">tussenschijf</span>&#8221;</span> om verschillende bestandssystemen
	tegelijkertijd te back-uppen.
	<span class="application">Amanda</span> maakt
	<span class="quote">&#8220;<span class="quote">archiefverzamelingen</span>&#8221;</span> aan, een groep banden die
	gedurende een tijd gebruikt wordt om volledige back-ups te
	maken van alle bestandssystemen die in het
	instellingenbestand van <span class="application">Amanda</span>
	vermeld staan.  De <span class="quote">&#8220;<span class="quote">archiefverzameling</span>&#8221;</span> bevat
	ook incrementele (of differentiële) back-ups van alle
	bestandssystemen.  Voor het herstellen van een beschadigd
	bestandssysteem zijn de meest recente volledige back-up en de
	incrementele back-ups nodig.</p><p>Het instellingenbestand biedt verfijnde controle over de
	back-ups en het netwerkverkeer door
	<span class="application">Amanda</span>.
	<span class="application">Amanda</span> kan elk bovenstaand
	back-upprogramma gebruiken om de gegevens naar de band te
	schijven.  <span class="application">Amanda</span> is òf als
	port òf als package beschikbaar.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80284624"></a>19.12.6. Nietsdoen</h3></div></div></div><p><span class="quote">&#8220;<span class="quote">Nietsdoen</span>&#8221;</span> is geen computerprogramma, maar de
	de meest gebruikte back-upstrategie.  Er zijn geen
	initiële kosten.  Er is geen back-upschema om te volgen.
	Zeg gewoon nee.  Als er iets met gegevens gebeurt, lach erom en
	leef ermee!</p><p>Als tijd en gegevens weinig tot niets waard zijn, is
	<span class="quote">&#8220;<span class="quote">Nietsdoen</span>&#8221;</span> het meest geschikte back-upprogramma.
	Maar wees bedacht, <span class="trademark">UNIX</span>® is een nuttig stuk gereedschap en er
	is zo maar binnen zes maanden een verzameling bestanden die
	wèl van waarde is.</p><p><span class="quote">&#8220;<span class="quote">Nietsdoen</span>&#8221;</span> is de juiste back-upmethode voor
	<code class="filename">/usr/obj</code> en andere mapstructuren die zo
	opnieuw aangemaakt kunnen worden.  Een voorbeeld zijn de
	bestanden waaruit de HTML- of <span class="trademark">PostScript</span>® versie van dit
	Handboek bestaan.  Deze documentformaten zijn vanuit
	XML-invoerbestanden aangemaakt.  Het back-uppen van de HTML-
	of <span class="trademark">PostScript</span>® bestanden is niet nodig.  Van de XML-bestanden
	dient regelmatig een back-up gemaakt te worden.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80297808"></a>19.12.7. Welk back-upprogramma is het beste?</h3></div></div></div><a id="idp80298448" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.  <span class="emphasis"><em>Punt uit.</em></span>.  Elizabeth
	D. Zwicky heeft stresstesten op alle hierboven besproken
	back-upprogramma's uitgevoerd.  De heldere keuze voor het
	behouden van alle gegevens en alle eigenaardigheden van <span class="trademark">UNIX</span>®
	bestandssystemen is <code class="command">dump</code>.  Elizabeth heeft
	bestandssystemen aangemaakt met een grote verscheidenheid aan
	ongewone omstandigheden (en enkele minder ongebruikelijke) en
	heeft elk programma getest door een back-up van die
	bestandssystemen uit te voeren en ze te herstellen.  De
	eigenaardigheden omvatten bestanden met gaten, bestanden met
	gaten en een blok nullen, bestanden met vreemde tekens in hun
	namen, onleesbare en onschrijfbare bestanden, apparaten,
	bestanden waarvan de grootte verandert tijdens het back-uppen,
	bestanden die aangemaakt/verwijderd worden tijdens het
	back-uppen en meer.  Ze presenteerde de resultaten op LISA V in
	oktober 1991.  Zie <a class="link" href="http://www.coredumps.de/doc/dump/zwicky/testdump.doc.html" target="_top">torture-testing
	  Backup and Archive Programs</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80301904"></a>19.12.8. Noodterugzetprocedure</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80306768"></a>19.12.8.1. Vóór de ramp</h4></div></div></div><p>Er zijn slechts vier stappen om te volgen bij het
	  voorbereiden op elke ramp die voor kan komen.</p><a id="idp80307792" class="indexterm"></a><p>Het schijflabel van elke schijf dient afgedrukt te worden
	  (bijvoorbeeld met <code class="command">bsdlabel da0 | lpr</code>), de
	  bestandssysteemtabel (<code class="filename">/etc/fstab</code>) en
	  alle opstartboodschappen, alles in tweevoud.</p><a id="idp80309584" class="indexterm"></a><p>Ten tweede dient een <span class="quote">&#8220;<span class="quote">livefs</span>&#8221;</span> CD-ROM gebrandt te
	  worden.  Deze CD-ROM biedt ondersteuning voor het opstarten in een
	  FreeBSD <span class="quote">&#8220;<span class="quote">livefs</span>&#8221;</span> reddingsmodus die gebruiker in staat stelt
	  om vele taken uit te voeren zoals het draaien van <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> en
	  meer.  Een livefs CD-beeld voor
	  FreeBSD/i386 9.3-RELEASE is beschikbaar op <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/9.3/FreeBSD-9.3-RELEASE-i386-livefs.iso" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/ISO-IMAGES/9.3/FreeBSD-9.3-RELEASE-i386-livefs.iso</a></code>.</p><div xmlns="" class="note"><h3 class="admontitle">Opmerking: </h3><p xmlns="http://www.w3.org/1999/xhtml">Livefs CD-beelden zijn niet beschikbaar voor
	    FreeBSD 10.1-RELEASE en nieuwer.  Naast de beelden voor
	    CDROM-installaties kunnen ook beelden voor flash-drive-installaties
	    gebruikt worden om een systeem te redden.  Het
	    <span class="quote">&#8220;<span class="quote">memstick</span>&#8221;</span>-beelden voor
	    FreeBSD/i386 10.1-RELEASE is beschikbaar op <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-i386-memstick.img" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/10.1/FreeBSD-10.1-RELEASE-i386-memstick.img</a></code>.</p></div><p>Ten derde dienen regelmatig back-upbanden aangemaakt te
	  worden.  Alle veranderingen die na de laatste back-up zijn
	  gemaakt kunnen onherroepelijk verloren zijn gegaan.  De
	  back-upbanden dienen beveiligd te worden tegen
	  overschrijven.</p><p>Ten vierde dienen de <span class="quote">&#8220;<span class="quote">livefs</span>&#8221;</span> CD-ROM die in stap twee
	  gemaakt is en de back-upbanden getest te worden.  Van de handelingen
	  dienen aantekeningen gemaakt te worden.  De aantekeningen, de
	  CD-ROM, de afdrukken en de back-upbanden dienen
	  gezamenlijk bewaard te worden.  Tijdens het herstellen kunnen
	  de notities ervoor zorgen dat de back-upbanden vernietigd
	  worden.  Hoe?  In plaats van <code class="command">tar xvf
	    /dev/sa0</code> kan per ongeluk <code class="command">tar cvf
	    /dev/sa0</code> worden ingetypt, waardoor de back-upband
	  overschreven wordt.</p><p>Als extra veiligheidsmaatregel dienen telkens een
	  <span class="quote">&#8220;<span class="quote">livefs</span>&#8221;</span> CD-ROM en twee back-upbanden gemaakt te worden.
	  Eén van deze banden dient op een plaats op afstand
	  bewaard te worden.  Zo'n plaats is NIET de kelder van het
	  zelfde kantoorgebouw.  Een aantal bedrijven in het World
	  Trade Center heeft deze les op de harde manier geleerd.  Zo'n
	  plaats dient fysiek gescheiden te zijn van de computers en de
	  schijven door een significante afstand.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80324304"></a>19.12.8.2. Na de ramp</h4></div></div></div><p>De hamvraag is: heeft de hardware het overleefd?  Er zijn
	  regelmatig back-ups gemaakt, dus zorgen over de software
	  zijn niet nodig.</p><p>Indien hardware beschadigd is, dienen kapotte onderdelen
	  vervangen te worden voordat gepoogd wordt om een computer te
	  gebruiken.</p><p>Plaats de <span class="quote">&#8220;<span class="quote">livefs</span>&#8221;</span> CD-ROM in de CD-ROM drive indien
	  de hardware in orde is en start de computer op.  Het originele
	  installatiemenu wordt op het scherm getoond.  Kies het land van
	  toepassing en kies daarna <span class="guimenuitem">Fixit -- Repair mode with
	    CDROM/DVD/floppy</span> en kies het item
	  <span class="guimenuitem">CDROM/DVD -- Use the live filesystem
	    CDROM/DVD</span>. <code class="command">restore</code> en de andere
	  benodigde programma's staan in <code class="filename">/mnt2/rescue</code>.</p><p>Herstel elk bestandssysteem apart.</p><a id="idp80328528" class="indexterm"></a><a id="idp80329168" class="indexterm"></a><a id="idp80329680" class="indexterm"></a><a id="idp80330320" class="indexterm"></a><p>Probeer de rootpartitie van de eerste schijf aan te
	  koppelen (bijvoorbeeld <code class="command">mount /dev/da0a
	  /mnt</code>).  Als het schijflabel beschadigd is, gebruik
	  dan <code class="command">bsdlabel</code> om de schijf opnieuw te
	  partitioneren en te labelen zodat deze overeenkomt met het
	  afgedrukte en bewaarde label.  Gebruik voor het opnieuw
	  aanmaken van de bestandssystemen <code class="command">newfs</code>.
	  Koppel de rootpartitie van de schijf opnieuw aan voor lezen
	  en schrijven (<code class="command">mount -u -o rw /mnt</code>).
	  Gebruik voor het herstellen van de gegevens van dit
	  bestandssysteem het back-upprogramma en de back-upbanden
	  (bijvoorbeeld <code class="command">restore vrf /dev/sa0</code>).
	  Koppel nu het bestandssysteem af (bijvoorbeeld
	  <code class="command">umount /mnt</code>).  Herhaal dit voor elk
	  beschadigd bestandssysteem.</p><p>Back-up de gegevens naar nieuwe banden als het systeem
	  weer draait.  De omstandigheden die verantwoordelijk waren
	  voor de crash of het gegevensverlies kunnen weer voorkomen.
	  Nu een extra uur investeren, kan later grote zorgen
	  besparen.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="backup-strategies.html">Terug</a> </td><td width="20%" align="center"><a accesskey="u" href="disks.html">Omhoog</a></td><td width="40%" align="right"> <a accesskey="n" href="disks-virtual.html">Volgende</a></td></tr><tr><td width="40%" align="left" valign="top">19.11. Back-up strategieën </td><td width="20%" align="center"><a accesskey="h" href="index.html">Begin</a></td><td width="40%" align="right" valign="top"> 19.13. Netwerk-, geheugen-, en bestandsgebaseerde
      bestandssystemen</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>