<?xml version="1.0" encoding="iso-8859-1"?>
<!--
     The FreeBSD Documentation Project
     The FreeBSD Danish Documentation Project

     $FreeBSD$
     Original revision: 1.22
-->
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="da">
  <info><title xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD kvikstart Guide</title>
    

    <authorgroup xmlns:xlink="http://www.w3.org/1999/xlink">
      <author xmlns:xlink="http://www.w3.org/1999/xlink"><personname xmlns:xlink="http://www.w3.org/1999/xlink"><firstname xmlns:xlink="http://www.w3.org/1999/xlink">Alfred</firstname><surname xmlns:xlink="http://www.w3.org/1999/xlink">Perlstein</surname></personname><affiliation xmlns:xlink="http://www.w3.org/1999/xlink">
	  <address xmlns:xlink="http://www.w3.org/1999/xlink"><email xmlns:xlink="http://www.w3.org/1999/xlink">alfred@FreeBSD.org</email></address>
	</affiliation></author>
    </authorgroup>

    <legalnotice xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="trademarks" role="trademarks">
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">FreeBSD is a registered trademark of
  the FreeBSD Foundation.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Intel, Celeron, Centrino, Core, EtherExpress, i386,
  i486, Itanium, Pentium, and Xeon are trademarks or registered
  trademarks of Intel Corporation or its subsidiaries in the United
  States and other countries.</para>
      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <quote xmlns:xlink="http://www.w3.org/1999/xlink">&#8482;</quote> or the
  <quote xmlns:xlink="http://www.w3.org/1999/xlink">®</quote> symbol.</para>
    </legalnotice>

    <pubdate xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</pubdate>

    <releaseinfo xmlns:xlink="http://www.w3.org/1999/xlink">$FreeBSD$</releaseinfo>

    <abstract xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Denne artikel viser metoden hvorved man kan få maskiner til
	at installere FreeBSD ved hjælp af <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Intel</trademark> PXE metoden
	til at boote en maskine over et netværk.</para>

      <para xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"><emphasis xmlns:xlink="http://www.w3.org/1999/xlink">Dansk version af Laust S. Jespersen
  <email xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">Laust@doc.freebsd.dk</email>.</emphasis></para>
    </abstract>
  </info>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="introduction">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Introduktion</title>

    <warning xmlns:xlink="http://www.w3.org/1999/xlink">
      <para xmlns:xlink="http://www.w3.org/1999/xlink">Denne procedure vil gøre <quote xmlns:xlink="http://www.w3.org/1999/xlink">Serveren</quote>
	både usikker og farlig. Det er bedst bare at holde
	<quote xmlns:xlink="http://www.w3.org/1999/xlink">Serveren</quote> på sin egen hub og ikke på
	nogen måde tilgængelig for andre maskiner end
	<quote xmlns:xlink="http://www.w3.org/1999/xlink">klienterne</quote>.</para>
    </warning>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Terminologi:</para>

    <informaltable xmlns:xlink="http://www.w3.org/1999/xlink" frame="none">
      <tgroup xmlns:xlink="http://www.w3.org/1999/xlink" cols="2">

	<tbody xmlns:xlink="http://www.w3.org/1999/xlink">
	  <row xmlns:xlink="http://www.w3.org/1999/xlink">
	    <entry xmlns:xlink="http://www.w3.org/1999/xlink">Server:</entry>
	    <entry xmlns:xlink="http://www.w3.org/1999/xlink">Maskinen der tilbyder netboot og installations
	      muligheder.</entry>
	  </row>

	  <row xmlns:xlink="http://www.w3.org/1999/xlink">
	    <entry xmlns:xlink="http://www.w3.org/1999/xlink">Klient:</entry>
	    <entry xmlns:xlink="http://www.w3.org/1999/xlink">Maskinen der skal have FreeBSD installeret på
	      sig.</entry>
	  </row>
	</tbody>
      </tgroup>
    </informaltable>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Kræver: Klienter der understøtter <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Intel</trademark> PXE
      netboot muligheden, en Ethernet forbindelse.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Lad mig gerne vide hvis du falder over noget du har
      problemer med, eller forslag til yderligere dokumentation.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Hvis du skal bruge nogen til at træne/implementere et
      specifikt netinstallations system for dig, så send mig
      venligst en e-mail så vi kan diskutere vilkår.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Jeg vil også gerne takke Paul Saab og John Baldwin for, at
      lave det meste af programmeringsarbejdet på pxeboot,
      interfacet til <trademark xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" class="registered">Intel</trademark> PXE (netboot) systemet.</para>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="server-config">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Server Konfiguration</title>

    <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Installér DHCP: Installér <package xmlns:xlink="http://www.w3.org/1999/xlink">net/isc-dhcp3</package> du kan bruge denne
	  config fil <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="dhcpd.conf">
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">dhcpd.conf</filename></link>, put den ind i
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/local/etc/</filename>.</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Slå tftp til:</para>

	<procedure xmlns:xlink="http://www.w3.org/1999/xlink">
	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Lav mappen <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/tftpboot</filename></para>
	  </step>

	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Tilføj denne linie til din
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/inetd.conf</filename>:</para>

<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">tftp    dgram   udp     wait    nobody  /usr/libexec/tftpd    tftpd /usr/tftpboot</programlisting>
	  </step>
	</procedure>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Slå NFS til:</para>

	<procedure xmlns:xlink="http://www.w3.org/1999/xlink">
	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Tilføj dette til
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/rc.conf</filename>:</para>

	    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">nfs_server_enable="YES"</programlisting>
	  </step>

	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Tilføj dette til
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/etc/exports</filename>:</para>

	    <programlisting xmlns:xlink="http://www.w3.org/1999/xlink">/usr -alldirs -ro</programlisting>
	  </step>
	</procedure>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Genstart for at slå de nye services til eller
	  start dem manuelt.</para>
      </step>
    </procedure>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="bootstrap-config">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Bootstrap opsætning</title>

    <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Download bootfiler: Download
	  <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="ftp://snapshots.jp.freebsd.org/pub/FreeBSD/snapshots/i386/4-LATEST/floppies/kern.flp">
	  kern.flp</link> og <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="ftp://snapshots.jp.freebsd.org/pub/FreeBSD/snapshots/i386/4-LATEST/floppies/mfsroot.flp">
	  mfsroot.flp</link> floppy imagesne.</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Opsætning af ftp/pxe-boot mappen:</para>

	<procedure xmlns:xlink="http://www.w3.org/1999/xlink">
	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Put pxeboot i boot mappen:</para>

	    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">rm -rf /usr/obj/*</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cd /usr/src/sys/boot</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">make</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cp /usr/src/sys/boot/i386/pxeldr/pxeboot /usr/tftpboot</userinput></screen>
	  </step>

	  <step xmlns:xlink="http://www.w3.org/1999/xlink">
	    <para xmlns:xlink="http://www.w3.org/1999/xlink">Mount <filename xmlns:xlink="http://www.w3.org/1999/xlink">kern.flp</filename> filen ved
	      hjælp af vndevice og kopier dens indhold til
	      <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/tftpboot</filename>:</para>

	    <screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vnconfig vn0 kern.flp</userinput>    # associer et vndevice med filen
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /dev/vn0 /mnt</userinput>      # mount det
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cp -R /mnt /usr/tftpboot</userinput> # kopier indholdet til /usr/tftpboot
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">umount /mnt</userinput>              # unmount det
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vnconfig -u vn0</userinput>          # disassocier vndevicet fra filen</screen>
	  </step>
	</procedure>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Kompiler en tilpasset kernel for klienterne (for at
	  undgå device konfigurations skærmen ved boot) og
	  put den i <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/tftpboot</filename>.</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Lav en speciel <filename xmlns:xlink="http://www.w3.org/1999/xlink">loader.rc</filename> og
	  installer det i
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/tftpboot/boot/loader.rc</filename> så den
	  ikke prompter for den anden disk, her er <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="loader.rc">min</link>.</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Pak installeren og hjælpeprogrammerne fra mfsroot
	  disken ud og dekomprimer dem, put dem ned
	  i<filename xmlns:xlink="http://www.w3.org/1999/xlink">/usr/tftpboot</filename> også:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vnconfig vn0 mfsroot.flp</userinput>         # associer et vndevice med filen
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /dev/vn0 /mnt</userinput>              # mount det
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cp /mnt/mfsroot.gz /usr/tftpboot</userinput> # kopier indholdet til /usr/tftpboot
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">umount /mnt</userinput>                      # unmount det
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vnconfig -u vn0</userinput>                  # disassocier vndevicet fra filen
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cd /usr/tftpboot</userinput>                 # skift mappe til pxeboot mappen
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">gunzip mfsroot.gz</userinput>                # dekomprimer mfsroot</screen>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Lav dit sysinstall script
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">install.cfg</filename>, du kan bruge <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="install.cfg">mit</link> som en skabelon, men du er
	  nød til at editere det.</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Kopier sysinstall scriptet ind i det udpakkede og
	  dekomprimerede mfsroot image:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink"><prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cd /usr/tftpboot</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vnconfig vn0 mfsroot</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">mount /dev/vn0 /mnt</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">cp install.cfg /mnt</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">umount /mnt</userinput>
<prompt xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">#</prompt> <userinput xmlns:xlink="http://www.w3.org/1999/xlink">vnconfig -u vn0</userinput></screen>
      </step>
    </procedure>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="install-setup">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Installations opsætning</title>

    <procedure xmlns:xlink="http://www.w3.org/1999/xlink">
      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Put installations filerne i en mappe der kan nås
	via NFS på Serveren.  Lav en mappe der svarer til 'nfs'
	direktivet i <filename xmlns:xlink="http://www.w3.org/1999/xlink">install.cfg</filename> filen og lav et
	spejl af FreeBSD installations filerne der, du skal have det
	til at se ud nogenlunde sådan her:</para>

	<screen xmlns:xlink="http://www.w3.org/1999/xlink">ABOUT.TXT       TROUBLE.TXT     compat20        floppies        ports
ERRATA.TXT      UPGRADE.TXT     compat21        games           proflibs
HARDWARE.TXT    XF86336         compat22        info            src
INSTALL.TXT     bin             compat3x        kern.flp
LAYOUT.TXT      catpages        crypto          manpages
README.TXT      cdrom.inf       dict            mfsroot.flp
RELNOTES.TXT    compat1x        doc             packages</screen>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Kopier de komprimerede pakker ind i packages/All mappen
	  under <filename xmlns:xlink="http://www.w3.org/1999/xlink">nfs</filename>.</para>
      </step>

      <step xmlns:xlink="http://www.w3.org/1999/xlink">
	<para xmlns:xlink="http://www.w3.org/1999/xlink">Vær sikker på, at du har en
	  <filename xmlns:xlink="http://www.w3.org/1999/xlink">INDEX</filename> fil gjort klar i packages mappen.
	  Du kan lave dine egne <filename xmlns:xlink="http://www.w3.org/1999/xlink">INDEX</filename> notater
	  sådan her:</para>

	<programlisting xmlns:xlink="http://www.w3.org/1999/xlink">alfred-1.0||/|Alfred install bootstrap||alfred@FreeBSD.org||||</programlisting>

	<para xmlns:xlink="http://www.w3.org/1999/xlink">Så kan du installere tilpassede pakker, specielt
	  din egen tilpassede post-install pakke.</para>
      </step>
    </procedure>
  </sect1>

  <sect1 xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="custom-postinst-package">
    <title xmlns:xlink="http://www.w3.org/1999/xlink">Tilpasset Post-Install Pakke</title>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Du kan bruge scriptet <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="pkgmaker.sh"><filename xmlns:xlink="http://www.w3.org/1999/xlink">pkgmaker.sh </filename></link> til
      at lave en tilpasset pakke til post install. Ideen er at have
      den til at installere og konfigurere de specielle ting du vil have
      gjort.  <filename xmlns:xlink="http://www.w3.org/1999/xlink">pkgmaker</filename> Køres i mappen
      ovenover den pakke du ønsker at lave med det ene argument
      fra pakken (f. eks mypkg) som så vil lave en mypkg.tgz som
      du så kan inkludere i din sysinstall pakke.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Inde i din mappe med tilpassede pakker vil du have en fil kaldet
      <filename xmlns:xlink="http://www.w3.org/1999/xlink">PLIST</filename> som indeholder alle de filer du
      ønsker at installere og få inkorporeret i din
      pakke.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Du vil også ønske dig at have nogle filer
      kaldet <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="pre"><filename xmlns:xlink="http://www.w3.org/1999/xlink">pre</filename></link> og
      <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="post"><filename xmlns:xlink="http://www.w3.org/1999/xlink">post</filename></link> i den mappe,
      disse er shell scripts som du vil eksekverer før og efter
      din pakke er installeret.</para>

    <para xmlns:xlink="http://www.w3.org/1999/xlink">Siden denne pakke er i din <filename xmlns:xlink="http://www.w3.org/1999/xlink">install.cfg</filename>
      fil burde den blive kørt og lave den sidste konfiguration
      for dig.</para>
  </sect1>
</article>
