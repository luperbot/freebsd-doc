<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3. Dernière préparation</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Ponts filtrants" /><link rel="up" href="index.html" title="Ponts filtrants" /><link rel="prev" href="filtering-bridges-how.html" title="2. Comment l'installer" /><link rel="next" href="filtering-bridges-enabling.html" title="4. Activer le pont" /><link rel="copyright" href="trademarks.html" title="Note légale" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3. Dernière préparation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="filtering-bridges-how.html">Précédent</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="filtering-bridges-enabling.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="filtering-bridges-finalprep"></a>3. Dernière préparation</h2></div></div></div><p>Avant de redémarrer afin de charger le nouveau noyau ou les
      modules nécessaires (selon la méthode d'installation
      précédemment retenue), vous devez faire quelques
      modifications dans le fichier
      de configuration <code class="filename">/etc/rc.conf</code>.  La règle de
      défaut du coupe-feu est de rejeter tous les paquets IP.  Au
      départ nous configurerons un coupe-feu &#8220;ouvert&#8221;, afin
      de vérifier son fonctionnement sans problème relatif au
      filtrage de paquet (dans le cas où vous faite cela à
      distance, une telle configuration vous évitera de rester
      isolé du réseau).  Ajoutez les lignes suivantes dans
      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">firewall_enable="YES"
firewall_type="open"
firewall_quiet="YES"
firewall_logging="YES"</pre><p>La première ligne activera le coupe-feu (et chargera le module
      <code class="filename">ipfw.ko</code> s'il n'est pas compilé dans le
      noyau), la seconde le configurera dans le mode
      &#8220;ouvert&#8221; (comme expliqué dans
      <code class="filename">/etc/rc.firewall</code>), la troisième ligne rendra
      le chargement des règles silencieux (sans affichage) et la
      quatrième activera le support de trace d'activité
      du coupe-feu.</p><p>Au sujet de la configuration des interfaces réseau, la
      méthode la plus utilisée est d'assigner une adresse
      IP à une seule des cartes réseau, mais le pont
      fonctionnera à l'identique si les deux
      interfaces ou aucune n'ont d'adresse IP configurée.  Dans le
      dernier cas (sans adresse IP) la machine faisant office de pont
      sera toujours cachée et inaccessible depuis le réseau:
      pour la configurer, vous devez vous attacher depuis la console ou
      à travers une troisième interface réseau
      séparée du pont.  Parfois, durant
      le démarrage du système, certains programmes ont
      besoin d'accéder au réseau, par exemple pour la
      résolution de noms: dans ce cas il
      est nécessaire d'assigner une adresse IP à
      l'interface externe (celle connectée à l'Internet
      où le serveur <acronym class="acronym">DNS</acronym>
      réside), puisque le pont sera activé à la
      fin de la procédure de démarrage.  Cela signifie que
      l'interface <code class="filename">fxp0</code> (dans notre cas) doit
      être mentionnée dans la section concernant ifconfig
      du fichier <code class="filename">/etc/rc.conf</code>, mais pas
      <code class="filename">xl0</code>.  Assigner une adresse IP aux deux
      cartes réseau n'a pas beaucoup de sens, à moins que,
      durant la procédure de démarrage, des applications
      devront accéder à des
      services sur les deux segments Ethernet.</p><p>Il y a une autre chose importante à savoir.  Quand on utilise
      l'IP sur Ethernet, il y a en fait deux protocoles Ethernet
      utilisés: l'un est l'IP, l'autre est l'<acronym class="acronym">ARP</acronym>.
      <acronym class="acronym">ARP</acronym> effectue la conversion de l'adresse IP d'un
      hôte en son adresse Ethernet (couche <acronym class="acronym">MAC</acronym>).
      Afin d'autoriser la communication entre deux hôtes
      séparés par le
      pont, il est nécessaire que le pont transmette les paquets
      <acronym class="acronym">ARP</acronym>.  Un tel protocole n'est pas inclus dans la
      couche IP, puisque qu'il n'apparaît qu'avec l'utilisation de l'IP
      sur Ethernet.  Le coupe-feu de FreeBSD filtre exclusivement la
      couche IP et donc tous les paquets non-IP (<acronym class="acronym">ARP</acronym>
      compris) seront transmis sans être filtrés, même
      si le coupe-feu est configuré pour ne rien laisser passer.</p><p>Il est maintenant temps de redémarrer le système et de
      l'utiliser comme auparavant: il y aura de nouveaux messages
      concernant le pont et le coupe-feu, mais le pont ne sera pas
      activé et le coupe-feu, étant en mode &#8220;ouvert&#8221;,
      n'interdira aucune opération.</p><p>Si il y a un quelconque problème, vous devriez le corriger
      maintenant avant de continuer.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="filtering-bridges-how.html">Précédent</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="filtering-bridges-enabling.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">2. Comment l'installer </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 4. Activer le pont</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>