<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>FreeBSD et les polices de caractères</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="imdave@synet.net Mercredi 7 Aout 1996 Ce document décrit les différents fichiers de polices de caractères qui peuvent être utilisés avec FreeBSD et le pilote syscons, X11, GhostScript et Groff. Des exemples immédiatement applicables sont donnés pour passer l'affichage à la console en mode 80x60 et pour se servir des polices &#8220;Type 1&#8221; avec les programmes d'application précités. Version française de Frédéric Haby frederic.haby@mail.dotcom.fr." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="fr" class="article" lang="fr"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp61442128"></a>FreeBSD et les polices de caractères</h1></div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="subtitle"><em>Un guide utilisateur</em></h3></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Dave</span> <span class="surname">Bodenstab</span></h3></div></div></div><div>Version: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div>   par .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Résumé</div><p><code class="email">&lt;<a xmlns="" class="email" href="mailto:imdave@synet.net">imdave@synet.net</a>&gt;</code></p><p>Mercredi 7 Aout 1996</p><p>Ce document décrit les différents fichiers de polices de caractères
        qui peuvent être utilisés avec FreeBSD et le pilote syscons, X11,
        GhostScript et Groff. Des exemples immédiatement applicables sont donnés
        pour passer l'affichage à la console en mode 80x60 et pour se servir des
        polices &#8220;Type 1&#8221; avec les programmes d'application
        précités.</p><p><span class="emphasis"><em>Version française de Frédéric Haby
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:frederic.haby@mail.dotcom.fr">frederic.haby@mail.dotcom.fr</a>&gt;</code>.</em></span></p></div></div></div><hr /></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#idp61803088">1. Introduction</a></span></dt><dt><span class="sect1"><a href="#idp61813712">2. Terminologie élémentaire</a></span></dt><dt><span class="sect1"><a href="#idp61864528">3. Quels formats de polices de caractères puis-je utiliser?</a></span></dt><dt><span class="sect1"><a href="#idp61937488">4. Configurer une console virtuelle en mode 80x60 lignes</a></span></dt><dt><span class="sect1"><a href="#idp61992272">5. X11 et les polices &#8220;Type 1&#8221;</a></span></dt><dt><span class="sect1"><a href="#idp62201296">6. Utiliser les polices &#8220;Type 1&#8221; avec GhostScript</a></span></dt><dt><span class="sect1"><a href="#idp62249040">7. Utiliser les polices &#8220;Type 1&#8221; avec Groff</a></span></dt><dt><span class="sect1"><a href="#idp62420688">8. Peut-on utiliser des polices &#8220;True Type&#8221;?</a></span></dt><dt><span class="sect1"><a href="#idp62461008">9. Où peut-on trouver des polices supplémentaires?</a></span></dt><dt><span class="sect1"><a href="#idp62496336">10. D'autres questions</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp61803088"></a>1. Introduction</h2></div></div></div><p>Il y a de nombreuses sources de polices de caractères disponibles,
      et l'on peut se demander comment les utiliser avec FreeBSD. La
      réponse peut être obtenue en détaillant attentivement la
      documentation du composant voulu. Cela peut prendre beaucoup de
      temps, ce guide essaie donc de fournir un raccourci pour les autres
      personnes que cela intéresserait.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp61813712"></a>2. Terminologie élémentaire</h2></div></div></div><p>Il y a de nombreux formats de polices de caractères avec chacun
      son propre suffixe de nom de fichier. Quelques uns d'entre eux
      seront discutés dans ce document:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">.pfa</code>, <code class="filename">.pfb</code></span></dt><dd><p>Polices PostScript &#8220;Type 1&#8221;.
          <code class="filename">.pfa</code> est le format <span class="emphasis"><em>A</em></span>scii
          et <code class="filename">.pfb</code> le format
          <span class="emphasis"><em>B</em></span>inaire.</p></dd><dt><span class="term"><code class="filename">.afm</code></span></dt><dd><p>Le fichier de dimensions d'une police
            &#8220;Type 1&#8221;.</p></dd><dt><span class="term"><code class="filename">.pfm</code></span></dt><dd><p>Le fichier de dimensions pour l'impression d'une police
            &#8220;Type 1&#8221;.</p></dd><dt><span class="term"><code class="filename">.ttf</code></span></dt><dd><p>Police &#8220;True Type&#8221;.</p></dd><dt><span class="term"><code class="filename">.fot</code></span></dt><dd><p>Référence indirecte à une police &#8220;True Type&#8221; (ce
            n'est pas la police elle-même).</p></dd><dt><span class="term"><code class="filename">.fon</code>, <code class="filename">.fnt</code></span></dt><dd><p>Police de caractères &#8220;bitmap&#8221; pour affichage à
            l'écran.</p></dd></dl></div><p>Les fichiers <code class="filename">.fot</code> sont employés par Windows un
      peu de la même façon que des liens symboliques vers le fichiers de police
      &#8220;True Type&#8221; (<code class="filename">.ttf</code>). Les fichiers
      <code class="filename">.fon</code> sont aussi utilisés par Windows. Je ne
      connais pas de moyen de se servir de ces fichiers avec FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp61864528"></a>3. Quels formats de polices de caractères puis-je utiliser?</h2></div></div></div><p>Le format de fichier de police de caractères utile dépend de
      l'application. FreeBSD lui-même n'utilise pas de police de
      caractères. Ce sont les programmes d'application et/ou les pilotes
      qui se servent éventuellement de ces fichiers. Voici un petit tableau
      associant application/pilote de périphérique et suffixe des fichiers de
      police de caractères:</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th> </th><th><code class="filename">.fnt</code></th><th><code class="filename">.pfa</code></th><th><code class="filename">.pfb</code></th><th><code class="filename">.ttf</code></th><th><code class="filename">.afm</code></th></tr></thead><tbody><tr><td>Pilote <code class="filename">syscons</code></td><td>Oui</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td><span class="application">GhostScript</span></td><td> </td><td>Oui</td><td>Oui</td><td>Oui</td><td> </td></tr><tr><td>X11</td><td> </td><td>Oui</td><td>Oui</td><td> </td><td> </td></tr><tr><td><span class="application">Groff</span></td><td> </td><td>Oui</td><td> </td><td> </td><td>Oui</td></tr><tr><td><span class="application">Povray</span></td><td> </td><td> </td><td> </td><td>Oui</td><td> </td></tr></tbody></table></div><p>Le suffixe <code class="filename">.fnt</code> est assez fréquemment utilisé.
      Je soupçonne que lorsque quelqu'un veut créer un fichier de police de
      caractères spécialisé pour son application, il choisit la plupart du temps
      ce suffixe. Il y a donc des chances pour que des fichiers avec ce
      suffixe n'aient pas tous le même format; en particulier, les fichiers
      <code class="filename">.fnt</code> utilisés par le pilote syscons de FreeBSD
      n'auront peut-être pas le même format qu'un fichier
      <code class="filename">.fnt</code> utilisé dans l'environnement DOS/Windows. Je
      n'ai jamais essayé d'utiliser d'autres fichiers <code class="filename">.fnt</code>
      que ceux fournis avec FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp61937488"></a>4. Configurer une console virtuelle en mode 80x60 lignes</h2></div></div></div><p>Il faut d'abord charger une police de caractères 8x8. Le fichier
      <code class="filename">/etc/sysconfig</code><a href="#ftn.idp61942224" class="footnote" id="idp61942224"><sup class="footnote">[1]</sup></a> doit donc contenir les lignes:</p><pre class="programlisting">
# choose font 8x8 from /usr/share/syscons/fonts/* (or NO for default)
font8x8=/usr/share/syscons/fonts/cp437-8x8.fnt
    </pre><p>La commande pour changer de mode d'affichage est
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>vidcontrol VGA_80x60</code></strong></pre></div><p>Différents programmes en mode plein-écran, tel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>,
      doivent pouvoir déterminer la taille actuelle de l'écran. Elle peut être
      configurée avec
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a>:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>stty crt rows 60 columns 80</code></strong></pre></div><p>Pour rendre cela moins fastidieux, ces commandes peuvent être
      introduites dans une procédure exécutée au démarrage du système. Voici une
      façon de le faire:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Modifiez <code class="filename">/etc/sysconfig</code> comme expliqué plus
          haut,</p></li><li class="listitem"><p>Ajoutez les lignes suivantes à
          <code class="filename">/etc/rc.local</code>:</p><pre class="programlisting">
for tty in /dev/ttyv?
do
  vidcontrol VGA_80x60 &lt;$tty &gt;/dev/null 2&lt;&amp;1
done
        </pre></li><li class="listitem"><p>Ajoutez les lignes suivantes à
          <code class="filename">/etc/profile</code>:</p><pre class="programlisting">
TTYNAME=`basename \`tty\``
if expr "$TTYNAME" : 'ttyv' &gt; /dev/null
then
  stty crt rows 60 columns 80
fi
        </pre></li></ol></div><p>Références:
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp61992272"></a>5. X11 et les polices &#8220;Type 1&#8221;</h2></div></div></div><p>X11 peut employer les formats de police de caractères
      <code class="filename">.pfa</code> et <code class="filename">.pfb</code>. Il y a une
      référence croisée de chaque fichier sur son nom X11 par l'intermédiaire du
      fichier <code class="filename">fonts.dir</code> de chaque répertoire.</p><p>Il y a déjà un répertoire appelé <code class="filename">Type1</code>. La façon
      la plus immédiate d'ajouter une police de caractères est de la mettre dans
      ce répertoire. Une meilleure manière de procéder est de mettre toutes les
      nouvelle polices dans un répertoire distinct et d'utiliser un lien
      symbolique sur ces nouvelles polices. Il est alors plus facile de
      distinguer ses propres polices de celles qui sont fournies d'origine. Par
      exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Créer un repertoire pour les fichiers de police de
          caractères.</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>mkdir -p /usr/local/share/fonts/type1</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>cd /usr/local/share/fonts/type1</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Y mettre les fichiers <code class="filename">.pfa</code>,
          <code class="filename">.pfb</code> et <code class="filename">.afm</code>. On peut aussi
          vouloir y conserver les fichiers <code class="filename">README</code> et autres
          documentations concernant les polices de caractères.</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cp /cdrom/fonts/atm/showboat/showboat.pfb .</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>cp /cdrom/fonts/atm/showboat/showboat.afm .</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Tenir à jour un index pour créer les références croisées
          sur les polices.</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>echo showboat - InfoMagic CICA, Dec 1994, /fonts/atm/showboat &gt;&gt;INDEX</code></strong></pre></div></li></ul></div><p>Pour pouvoir maintenant utiliser une nouvelle police de caractères, il
      faut mettre le fichier à disposition, et mettre à jour le fichier des
      noms de polices. Les noms de police X11 se présentent comme suit:</p><pre class="programlisting">
-bitstream-charter-medium-r-normal-xxx-0-0-0-0-p-0-iso8859-1
     |        |      |    |   |     |  | | | | | |    \    \
     |        |      |    |   |     \  \ \ \ \ \ \     +----+- jeu de caractères
     |        |      |    |   \      \  \ \ \ \ \ +- largeur moyenne
     |        |      |    |    \      \  \ \ \ \ +- espacement
     |        |      |    \     \      \  \ \ \ +- résolution verticale
     |        |      |     \     \      \  \ \ +- résolution horizontale
     |        |      |      \     \      \  \ +- points
     |        |      |       \  largeur   \  +- pixels
     |        |      |        \            \
   casse   famille graisse inclinaison style supplémentaire
    </pre><p>Il faut créer un nouveau nom pour chaque nouvelle police. Si la
      documentation qui l'accompagne vous donne quelques informations, elle
      peut servir de base pour définir ce nom. Si vous n'avez aucune
      information, vous pouvez utiliser la commande
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strings&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">strings</span>(1)</span></a> sur le fichier de police. Par
      exemple:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>strings showboat.pfb | more</code></strong></pre></div><pre class="programlisting">
%!FontType1-1.0: Showboat 001.001
%%CreationDate: 1/15/91 5:16:03 PM
%%VMusage: 1024 45747
% Generated by Fontographer 3.1
% Showboat
 1991 by David Rakowski.  Alle Rechte Vorbehalten.
FontDirectory/Showboat known{/Showboat findfont dup/UniqueID known{dup
/UniqueID get 4962377 eq exch/FontType get 1 eq and}{pop false}ifelse
{save true}{false}ifelse}{false}ifelse
12 dict begin
/FontInfo 9 dict dup begin
 /version (001.001) readonly def
 /FullName (Showboat) readonly def
 /FamilyName (Showboat) readonly def
 /Weight (Medium) readonly def
 /ItalicAngle 0 def
 /isFixedPitch false def
 /UnderlinePosition -106 def
 /UnderlineThickness 16 def
 /Notice (Showboat
 1991 by David Rakowski.  Alle Rechte Vorbehalten.) readonly def
end readonly def
/FontName /Showboat def
--stdin--
    </pre><p>A partir de ces informations, le nom pourrait être:</p><pre class="programlisting">
-type1-Showboat-medium-r-normal-decorative-0-0-0-0-p-0-iso8859-1
    </pre><p>Les composantes de ce nom sont:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Casse</span></dt><dd><p>Appelons simplement toutes nos nouvelles polices
            <code class="literal">type1</code>.</p></dd><dt><span class="term">Famille</span></dt><dd><p>Le nom de la police.</p></dd><dt><span class="term">Graisse</span></dt><dd><p>Normal, gras, médium, semi-gras, etc. D'après les résultats
            de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=strings&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">strings</span>(1)</span></a> ci-dessus, la police a une
            graisse <span class="emphasis"><em>médium</em></span>.</p></dd><dt><span class="term">Inclinaison</span></dt><dd><p><span class="emphasis"><em>r</em></span>oman, <span class="emphasis"><em>i</em></span>talique ou
            <span class="emphasis"><em>o</em></span>blique. Comme
            <span class="emphasis"><em>ItaliqueAngle</em></span> vaut 0, nous utiliserons
            <span class="emphasis"><em>roman</em></span>.</p></dd><dt><span class="term">Largeur</span></dt><dd><p>Normale, large, condensée, étendue, etc. Jusqu'à ce que nous la
            déterminions à l'usage, nous supposerons qu'elle est
            <span class="emphasis"><em>normale</em></span>.</p></dd><dt><span class="term">Style supplémentaire</span></dt><dd><p>Habituellement non renseigné, mais nous nous en servons pour
            indiquer que la police contient des majuscules décoratives.</p></dd><dt><span class="term">Espacement</span></dt><dd><p>Proportionnel ou fixe. Comme <span class="emphasis"><em>isFixedPitch</em></span>
            est faux, nous utilisons <span class="emphasis"><em>Proportionnel</em></span>.</p></dd></dl></div><p> Tous ces noms sont arbitraires, mais il faut essayer de rester
      compatible avec les conventions existantes. Une police est connue d'une
      application X11 sous un nom qui peut éventuellement comporter des
      caractères de substitution, il faut donc choisir un nom significatif. On
      peut commencer en utilisant simplement:</p><pre class="programlisting">
...-normal-r-normal-...-p-...
    </pre><p>comme nom, puis se servir de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xfontsel&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xfontsel</span>(1)</span></a> pour visualiser la police et
      affiner son nom en fonction de ce à quoi elle ressemble.</p><p>Donc, pour compléter notre exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Rendre la police accessible à X11</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts/Type1</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ln -s /usr/local/share/fonts/type1/showboat.pfb .</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Editer <code class="filename">fonts.scale</code> et
          <code class="filename">fonts.dir</code> pour y ajouter une ligne décrivant la
          nouvelle police et incrémenter le nombre de polices qui est défini en
          première ligne</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>ex fonts.dir</code></strong>
<strong class="userinput"><code>:1p</code></strong>
<strong class="userinput"><code>25</code></strong>
<strong class="userinput"><code>:1c</code></strong>
<strong class="userinput"><code>26</code></strong>
<strong class="userinput"><code>.</code></strong>
<strong class="userinput"><code>:$a</code></strong>
<strong class="userinput"><code>showboat.pfb -type1-showboat-medium-r-normal-decorative-0-0-0-0-p-0-iso8859-1</code></strong>
<strong class="userinput"><code>.</code></strong>
<strong class="userinput"><code>:wq</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em><code class="filename">fonts.scale</code> et
          <code class="filename">fonts.dir</code> sont apparemment
          identiques</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cp fonts.dir fonts.scale</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Informer X11 des modifications</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Visualiser la nouvelle police</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>xfontsel -pattern -type1-*</code></strong></pre></div></li></ul></div><p>Références: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xfontsel&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xfontsel</span>(1)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a>, <span class="emphasis"><em>The X Window System
      in a Nutshell</em></span>, <a class="link" href="http://www.ora.com" target="_top">O'Reilly &amp;
      Associates</a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp62201296"></a>6. Utiliser les polices &#8220;Type 1&#8221; avec GhostScript</h2></div></div></div><p>GhostScript référence les polices via son fichier
      <code class="filename">Fontmap</code>. Il doit donc être modifié de la même façon
      que le fichier X11 <code class="filename">fonts.dir</code>. GhostScript peut
      utiliser des fichiers de police de caractères aux formats
      <code class="filename">.pfa</code> ou <code class="filename">.pfb</code>. Voici comment nous
      utiliserions la police de l'exemple précédent avec GhostScript:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Mettre la police dans le répertoire des polices de
          GhostScript</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /usr/local/share/ghostscript/fonts</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ln -s /usr/local/share/fonts/type1/showboat.pfb .</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Editer le fichier <code class="filename">Fontmap</code> pour que
          GhostScript ait connaissance de la nouvelle police</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /usr/local/share/ghostscript/4.01</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ex Fontmap</code></strong>
<strong class="userinput"><code>:$a</code></strong>
<strong class="userinput"><code>/Showboat        (showboat.pfb) ; % From CICA /fonts/atm/showboat</code></strong>
<strong class="userinput"><code>:wq</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Utiliser GhostScript pour visualiser la
          police</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>gs prfont.ps</code></strong></pre></div><pre class="programlisting">
Aladdin Ghostscript 4.01 (1996-7-10)
Copyright (C) 1996 Aladdin Enterprises, Menlo Park, CA.  All rights
reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Loading Times-Roman font from /usr/local/share/ghostscript/fonts/tir_____.pfb...
 /1899520 581354 1300084 13826 0 done.
        </pre><div class="informalexample"><pre class="screen"><code class="prompt">GS&gt;</code> <strong class="userinput"><code>Showboat DoFont</code></strong></pre></div><pre class="programlisting">
Loading Showboat font from /usr/local/share/ghostscript/fonts/showboat.pfb...
 1939688 565415 1300084 16901 0 done.
&gt;&gt;showpage, press &lt;return&gt; to continue&lt;&lt;
&gt;&gt;showpage, press &lt;return&gt; to continue&lt;&lt;
&gt;&gt;showpage, press &lt;return&gt; to continue&lt;&lt;
        </pre><div class="informalexample"><pre class="screen"><code class="prompt">GS&gt;</code> <strong class="userinput"><code>quit</code></strong></pre></div></li></ul></div><p>Références: <code class="filename">fonts.txt</code> de la distribution de
      GhostScript 4.01.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp62249040"></a>7. Utiliser les polices &#8220;Type 1&#8221; avec Groff</h2></div></div></div><p>Maintenant que nous pouvons utiliser la nouvelle police avec X11 et
      GhostScript, comment faire pour s'en servir aussi avec groff? Tout
      d'abord, comme nous nous occupons de polices PostScript
      &#8220;Type 1&#8221;, le périphérique groff à utiliser est
      <code class="filename">ps</code>. Il faut créer un fichier de police pour
      chaque police utilisée par groff. Le nom d'une police groff se résume à un
      fichier dans le répertoire
      <code class="filename">/usr/share/groff_font/devps</code>. Dans notre exemple, ce
      pourrait être <code class="filename">/usr/share/groff_font/devps/SHOWBOAT</code>.
      Il faut créer ce fichier avec les outils fournis par groff.</p><p>Le premier outil est <code class="filename">afmtodit</code>. Il n'est pas
      normalement installé et doit donc être extrait de la distribution sous
      forme de sources. Je me suis aperçu qu'il fallait modifier la première
      ligne du fichier, voici donc ce que j'ai fait:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cp /usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.pl /tmp</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ex /tmp/afmtodit.pl</code></strong>
<strong class="userinput"><code>:1c</code></strong>
<strong class="userinput"><code>#!/usr/bin/perl -P-</code></strong>
<strong class="userinput"><code>.</code></strong>
<strong class="userinput"><code>:wq</code></strong></pre></div><p>Cet outil crée le fichier de police groff à partir du fichier de
      dimensions de la police (suffixe <code class="filename">.afm</code>). Pour
      continuer avec notre exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>De nombreux fichiers <code class="filename">.afm</code> sont au
          format Mac... avec des lignes terminées par des ^M</em></span></p><p>Il faut les convertir au style Unix avec des lignes terminées par
          des ^J</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>cat /usr/local/share/fonts/type1/showboat.afm |</code></strong>
       <strong class="userinput"><code>tr '\015' '\012' &gt;showboat.afm</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Créons maintenant le fichier de police
          groff</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /usr/share/groff_font/devps</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>/tmp/afmtodit.pl -d DESC -e text.enc /tmp/showboat.afm generate/textmap SHOWBOAT</code></strong></pre></div></li></ul></div><p>La police peut maintenant être référencée par le nom SHOWBOAT.</p><p>Si l'on utilise GhostScript pour piloter les imprimantes du système,
      il n'y a rien d'autre à faire. Si, par contre, l'on utilise de vraies
      imprimantes PostScript, il faut alors charger la police sur l'imprimante
      pour pouvoir l'utiliser (à moins que l'imprimante ne dispose de la police
      &#8220;showboat&#8221; en interne ou sur une disquette de polices
      accessible). La dernière étape consiste à créer la police chargeable.
      L'outil <code class="filename">pfbtops</code> est utilisé pour créer le format
      <code class="filename">.pfa</code> de la police et le fichier
      <code class="filename">download</code> est modifié pour faire référence à la
      nouvelle police. Le fichier <code class="filename">download</code> doit indiquer le
      nom interne de la police. Ce nom peut être facilement connu à l'aide du
      fichier de police groff, comme le montre l'exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Créer le fichier de police
          <code class="filename">.pfa</code></em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>fgrep internalname SHOWBOAT</code></strong>
internalname Showboat</pre></div></li><li class="listitem"><p><span class="emphasis"><em>Dire à groff qu'il faut charger la
          police</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>ex download</code></strong>
<strong class="userinput"><code>:$a</code></strong>
<strong class="userinput"><code>Showboat      showboat.pfa</code></strong>
<strong class="userinput"><code>.</code></strong>
<strong class="userinput"><code>:wq</code></strong></pre></div></li></ul></div><p>Pour tester la police:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>cat &gt;exemple.t &lt;&lt;EOF</code></strong>
<strong class="userinput"><code>.sp 5</code></strong>
<strong class="userinput"><code>.ps 15</code></strong>
<strong class="userinput"><code>C'est un exemple de police Showboat:</code></strong>
<strong class="userinput"><code>.br</code></strong>
<strong class="userinput"><code>.ps 48</code></strong>
<strong class="userinput"><code>.vs (\n(.s+2)p</code></strong>
<strong class="userinput"><code>.sp</code></strong>
<strong class="userinput"><code>.ft SHOWBOAT</code></strong>
<strong class="userinput"><code>ABCDEFGHI</code></strong>
<strong class="userinput"><code>.br</code></strong>
<strong class="userinput"><code>JKLMNOPQR</code></strong>
<strong class="userinput"><code>.br</code></strong>
<strong class="userinput"><code>STUVWXYZ</code></strong>
<strong class="userinput"><code>.sp</code></strong>
<strong class="userinput"><code>.ps 16</code></strong>
<strong class="userinput"><code>.vs (\n(.s+2)p</code></strong>
<strong class="userinput"><code>.fp 5 SHOWBOAT</code></strong>
<strong class="userinput"><code>.ft 5</code></strong>
<strong class="userinput"><code>Utilisée comme première lettre d'un paragraphe. Cela ressemblera à:</code></strong>
<strong class="userinput"><code>.sp50p</code></strong>
<strong class="userinput"><code>\s(48\f5V\s0\fRoici la première phrase d'un paragraphe qui utilise</code></strong>
<strong class="userinput"><code>la police showboat pour sa première lettre. Il faut augmenter</code></strong>
<strong class="userinput"><code>l'espacement vertical pour laisser de la place pour la première</code></strong>
<strong class="userinput"><code>lettre.</code></strong>
<strong class="userinput"><code>EOF</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>groff -Tps exemple.t &gt;exemple.ps</code></strong></pre></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Pour utiliser GhostScript/GhostView</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>ghostview exemple.ps</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Pour l'imprimer</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>lpr -Ppostscript exemple.ps</code></strong></pre></div></li></ul></div><p>Références:
      <code class="filename">/usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.man</code>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff_font&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">groff_font</span>(5)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff_char&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">groff_char</span>(5)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pfbtops&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pfbtops</span>(1)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp62420688"></a>8. Peut-on utiliser des polices &#8220;True Type&#8221;?</h2></div></div></div><p>Le format de police &#8220;True Type&#8221; est utilisée par Windows,
      Windows 95 et le Macintosh. Il est assez répandu et il y a de nombreuses
      polices de ce format disponibles.</p><p>Malheureusement, je connais peu d'applications qui puissent utiliser
      ce format: GhostScript et Povray viennent à l'esprit. Le support par
      GhostScript est, d'après la documentation, assez rudimentaire et il y a
      des chances que le résultat soit moins bon qu'avec les polices
      &#8220;Type 1&#8221;.  Povray version 3 est aussi capable d'utiliser des
      des polices &#8220;True Type&#8221;, mais je doute que beaucoup de
      personnes créent des documents sous forme de pages générées par lancer de
      rayon :-).</p><p>Il est difficile d'utiliser une police &#8220;True Type&#8221; avec
      groff parce que groff a besoin d'un fichier de description de la police,
      et je ne connais pas d'outil pour déterminer les dimensions d'une police
      &#8220;True Type&#8221;. De plus, il faudrait charger la police sur les
      imprimantes PostScript avec le format approprié et, de nouveau, groff ne
      peut gérer de cette façon les polices &#8220;True Type&#8221;.</p><p>Cette situation plutôt désolante changera peut-être bientôt. Le
      <a class="link" href="http://www.freetype.org" target="_top">Projet FreeType</a> développe
      actuellement un ensemble d'utilitaire FreeType:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le serveur de polices <code class="filename">xfsft</code> pour X11 peut
        gérer les polices &#8220;TrueType&#8221; en plus des polices
        ordinaires. Bien que ce soit encore une version béta, elle a la
        réputation d'être à peu près utilisable. Voyez
        <a class="link" href="http://www.dcs.ed.sc.uk/home/jec/programs/xfsft" target="_top">la page de
          Juliusz Chroboczek</a> pour plus d'informations. Il y a des
        instructions de portage sous FreeBSD sur
        <a class="link" href="http://math.missouri.edu/~stephen/software" target="_top">la page
        logicielle de Stephen Montgomery</a>.</p></li><li class="listitem"><p><code class="filename">xfstt</code> est un autre serveur X11, disponible
        sur <a class="link" href="ftp://sunsite.unc.edu/pub/Linux/X11/fonts" target="_top">ftp://sunsite.unc.edu/pub/Linux/X11/fonts</a>.</p></li><li class="listitem"><p>Il y a un programme appelé <code class="filename">ttf2bdf</code> qui peut
          créer des fichiers BDF utilisables en environnement X à partir de
          fichiers &#8220;TrueType&#8221;. Les binaires pour Linux sont censés
          être disponibles sur
          <a class="link" href="ftp://crl.nmsu.edu/CLR/multiling/General/" target="_top">ftp://crl.nmsu.edu/CLR/multiling/General/</a>.</p></li><li class="listitem"><p>Pour les personnes qui ont besoin de polices &#8220;True
          Type&#8221; asiatiques, il peut valoir la peine de jetter un coup
          d'oeil au serveur de polices <code class="filename">XTT</code>. Il y a des
          informations sur <code class="filename">XTT</code> à l'adresse:
          <a class="link" href="http://hawk.ise.chuo-u.ac.jp/student/person/tshiozak/study/freebsd-at-random/x-tt/index-en.html" target="_top">http://hawk.ise.chuo-u.ac.jp/student/person/tshiozak/study/freebsd-at-random/x-tt/index-en.html</a>.</p></li><li class="listitem"><p>et d'autres ...</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp62461008"></a>9. Où peut-on trouver des polices supplémentaires?</h2></div></div></div><p>Il y a de nombreuses polices disponibles sur l'Internet. Elles sont
      soit complètement gratuites ou en &#8220;partagiciel&#8221;. Il y a aussi
      de nombreux CD-ROMs peux onéreux qui contiennent beaucoup de polices.
      Voici quelques sites Internet (au mois d'Août 1996):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.winsite.com" target="_top">ftp://ftp.winsite.com</a>
          (auparavant CICA),</p></li><li class="listitem"><p><a class="link" href="http://www.simtel.net/" target="_top">http://www.simtel.net/</a>,</p></li><li class="listitem"><p><a class="link" href="ftp://ftp.coast.net/" target="_top">ftp://ftp.coast.net/</a>,</p></li><li class="listitem"><p><a class="link" href="http://af-pc-plloyd.ecel.uwa.edu.au/fonts/index.html" target="_top">http://af-pc-plloyd.ecel.uwa.edu.au/fonts/index.html</a>,</p></li><li class="listitem"><p><a class="link" href="http://www.esselte.com/letraset/index.html" target="_top">http://www.esselte.com/letraset/index.html</a>,</p></li><li class="listitem"><p><a class="link" href="http://www.inil.com/users/elfring/esf.htm" target="_top">http://www.inil.com/users/elfring/esf.htm</a>.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp62496336"></a>10. D'autres questions</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Que sont que les fichiers <code class="filename">.pfm</code>?</p></li><li class="listitem"><p>Peut-on générer des fichiers <code class="filename">.afm</code> à partir de
          fichiers <code class="filename">.pfa</code> ou
          <code class="filename">.pfb</code>?</p></li><li class="listitem"><p>Comment générer des fichiers de correspondance de caractères pour
          groff pour les polices PostScript dont les caractères ont des noms qui
          ne sont pas standard?</p></li><li class="listitem"><p>Les périphériques <code class="filename">xditview</code> et
          <code class="filename">devX??</code> peuvent-ils être configurés pour
          accéder aux nouvelles polices?</p></li><li class="listitem"><p>Il serait bien d'avoir des exemples d'utilisation de polices
          &#8220;True Type&#8221; avec GhostScript et Povray.</p></li></ul></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp61942224" class="footnote"><p><a href="#idp61942224" class="para"><sup class="para">[1] </sup></a>N.d.T.:
      <code class="filename">/etc/rc.conf</code> dans les versions récentes de
      FreeBSD.</p></div></div></div></body></html>