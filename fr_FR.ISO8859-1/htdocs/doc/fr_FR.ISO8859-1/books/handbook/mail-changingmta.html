<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>28.4. Changer votre agent de transfert de courrier</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="mail.html" title="Chapitre 28. Courrier électronique" /><link rel="prev" href="sendmail.html" title="28.3. Configuration de sendmail" /><link rel="next" href="mail-trouble.html" title="28.5. Dépannage" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">28.4. Changer votre agent de transfert de courrier</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="sendmail.html">Précédent</a> </td><th width="60%" align="center">Chapitre 28. Courrier électronique</th><td width="20%" align="right"> <a accesskey="n" href="mail-trouble.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-changingmta"></a>28.4. Changer votre agent de transfert de courrier</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrew</span> <span class="surname">Boothman</span></span>. </span></div><div><span class="authorgroup">Information provenant de courriers électroniques
	    écrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gregory</span> <span class="surname">Neil Shapiro</span></span>. </span></div></div></div><a id="idp84106704" class="indexterm"></a><p>Comme mentionné précédemment,
      FreeBSD est fournit avec <span class="application">sendmail</span>
      comme agent de transfert du courrier (MTA - Mail Transfert
      Agent).  Il est donc par défaut
      en charge de votre courrier sortant et entrant.</p><p>Cependant, pour une variété de raison,
      certains administrateurs système désirent
      changer le MTA de leur système.  Ces raisons vont de la
      simple envie d'essayer un autre agent au besoin d'une fonction
      ou ensemble spécifique qui dépend d'un autre gestionnaire de
      courrier.  Heureusement, quelle qu'en soit la raison, FreeBSD
      rend le changement aisé.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84109008"></a>28.4.1. Installer un nouveau MTA</h3></div></div></div><p>Vous avez un vaste choix d'agent disponible.  Un bon
	point de départ est le <a class="link" href="ports.html" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des
	logiciels portés de FreeBSD</a> où vous pourrez
	en trouver un grand nombre.
	Bien évidemment vous êtes libres
	d'utiliser n'importe quel agent de n'importe quelle origine,
	dès que vous pouvez le faire fonctionner sous FreeBSD.</p><p>Commencez par installer votre nouvel agent.  Une fois ce
	dernier installé, il vous donne une chance de décider s'il
	remplit vraiment vos besoins, et vous donne l'opportunité
	de configurer votre nouveau logiciel avant de remplacer
	<span class="application">sendmail</span>.  Quand vous faites cela,
	vous devez être sûr que l'installation du nouveau
	logiciel ne tentera pas de remplacer des binaires du système
	comme <code class="filename">/usr/bin/sendmail</code>.  Sinon, votre
	nouveau logiciel sera mis en service avant d'avoir pu
	le configurer.</p><p>Veuillez vous référer à la documentation de l'agent choisi
	pour de l'information sur comment configurer le logiciel que
	vous avez choisi.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84116432"></a>28.4.2. Désactiver <span class="application">sendmail</span></h3></div></div></div><p>La procédure utilisée pour lancer
	<span class="application">sendmail</span> a changé de façon
	significative entre la 4.5-RELEASE et la 4.6-RELEASE.
	Par conséquent, la procédure utilisée pour
	la désactiver est légèrement
	différente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84118096"></a>28.4.2.1. FreeBSD 4.5-STABLE d'avant le 2002/4/4 et plus ancienne
	  (y compris 4.5-RELEASE et précédentes)</h4></div></div></div><p>Ajoutez:</p><pre class="programlisting">sendmail_enable="NO"</pre><p>dans <code class="filename">/etc/rc.conf</code>.  Cela
	    désactivera le service de courrier entrant de
	    <span class="application">sendmail</span> mais si
	    <code class="filename">/etc/mail/mailer.conf</code> (voir plus bas)
	    n'est pas modifié, <span class="application">sendmail</span>
	    sera toujours utilisé pour envoyer du courrier
	    électronique.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84121552"></a>28.4.2.2. FreeBSD 4.5-STABLE d'après le 2002/4/4
	  (y compris 4.6-RELEASE et suivantes)</h4></div></div></div><p>Afin de complètement désactiver
	  <span class="application">sendmail</span> vous devez utiliser</p><pre class="programlisting">sendmail_enable="NONE"</pre><p>dans <code class="filename">/etc/rc.conf.</code></p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous désactivez le service d'envoi de courrier de
	    <span class="application">sendmail</span> de cette manière, il
	    est important que vous le remplaciez par un système de
	    courrier alternatif fonctionnant parfaitement.  Si vous
	    choisissez de ne pas le faire, des fonctions du système
	    comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> ne seront pas en mesure de délivrer
	    leur résultat par courrier électronique comme elles
	    s'attendent normalement à le faire.  De nombreux
	    composants de votre système s'attendent à
	    avoir un système
	    compatible à <span class="application">sendmail</span> en
	    fonctionnement.  Si des applications continuent à utiliser
	    les binaires de <span class="application">sendmail</span> pour
	    essayer d'envoyer du courrier électronique après la
	    désactivation, le courrier pourra aller dans une file
	    d'attente inactive, et pourra n'être jamais
	    livré.</p></div><p>Si vous voulez uniquement désactiver le service de
	  réception de courrier de <span class="application">sendmail</span>
	  vous devriez fixer</p><pre class="programlisting">sendmail_enable="NO"</pre><p>dans <code class="filename">/etc/rc.conf</code>.  Plus
	  d'information sur les options de démarrage de
	  <span class="application">sendmail</span> est disponible à partir
	  de la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84130384"></a>28.4.3. Lancement de votre nouvel agent au démarrage</h3></div></div></div><p>Vous pourrez avoir le choix entre deux méthodes pour
	lancer votre nouvel agent au démarrage, encore une fois en
	fonction de la version de FreeBSD dont vous disposez.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84131408"></a>28.4.3.1. FreeBSD 4.5-STABLE d'avant le 2002/4/11
	  (y compris 4.5-RELEASE et précédentes)</h4></div></div></div><p>Ajouter une procédure dans
	  <code class="filename">/usr/local/etc/rc.d/</code> qui
	  se termine en <code class="filename">.sh</code> et qui est
	  exécutable par <code class="systemitem">root</code>.  La
	  procédure devrait accepter les paramètres
	  <code class="literal">start</code> et <code class="literal">stop</code>.
	  Au moment du démarrage les procédures
	  système exécuteront la commande</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh start</pre><p>que vous pouvez également utiliser pour démarrer le
	  serveur.  Au moment de l'arrêt du système, les
	  procédures système utiliseront l'option
	  <code class="literal">stop</code> en exécutant la commande</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh stop</pre><p>que vous pouvez également utiliser manuellement pour
	  arrêter le serveur quand le système est en
	  fonctionnement.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84140880"></a>28.4.3.2. FreeBSD 4.5-STABLE d'après le 2002/4/11
	  (y compris 4.6-RELEASE et suivantes)</h4></div></div></div><p>Avec les versions suivantes de FreeBSD, vous pouvez
	  utiliser la méthode ci-dessus ou fixer</p><pre class="programlisting">mta_start_script="nomfichier"</pre><p>dans <code class="filename">/etc/rc.conf</code>, où
	  <em class="replaceable"><code>nomfichier</code></em> est le nom
	  d'une procédure que vous voulez exécuter
	  au démarrage pour lancer votre agent.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84143696"></a>28.4.4. Remplacer <span class="application">sendmail</span> comme
	gestionnaire du courrier du système par
	défaut</h3></div></div></div><p>Le programme <span class="application">sendmail</span> est tellement
	omniprésent comme logiciel standard sur les
	systèmes <span class="trademark">UNIX</span>® que certains programmes supposent qu'il est tout
	simplement déjà installé et configuré.
	Pour cette raison, de nombreux agents alternatifs fournissent
	leur propre implémentation compatible avec l'interface en
	ligne de commande de <span class="application">sendmail</span>;
	cela facilite leur utilisation comme remplaçant pour
	<span class="application">sendmail</span>.</p><p>Donc, si vous utilisez un programme alternatif, vous
	devrez vérifier que le logiciel essayant d'exécuter
	les binaires standards de <span class="application">sendmail</span>
	comme <code class="filename">/usr/bin/sendmail</code> exécute
	réellement l'agent que vous avez choisi à la place.
	Heureusement, FreeBSD fournit un système appelé
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mailwrapper</span>(8)</span></a> qui remplit ce travail pour vous.</p><p>Quand <span class="application">sendmail</span> fonctionne tel
	qu'il a été installé, vous
	trouverez quelque chose comme ce qui suit dans
	<code class="filename">/etc/mail/mailer.conf</code>:</p><pre class="programlisting">sendmail	 /usr/libexec/sendmail/sendmail
send-mail	/usr/libexec/sendmail/sendmail
mailq		/usr/libexec/sendmail/sendmail
newaliases	/usr/libexec/sendmail/sendmail
hoststat	/usr/libexec/sendmail/sendmail
purgestat	/usr/libexec/sendmail/sendmail</pre><p>Cela signifie que lorsque l'une des commandes courantes
	(comme <code class="filename">sendmail</code> lui-même) est
	lancée, le système invoque en fait une copie de
	&#8220;mailwrapper&#8221; appelée
	<code class="filename">sendmail</code>, qui lit
	<code class="filename">mailer.conf</code> et
	exécute <code class="filename">/usr/libexec/sendmail/sendmail</code>
	à la place.  Ce système rend aisé le changement
	des binaires qui sont réellement exécutés
	quand les fonctions de <code class="filename">sendmail</code> par
	défaut sont invoquées.</p><p>Donc si vous avez voulu que
	<code class="filename">/usr/local/supermailer/bin/sendmail-compat</code>
	soit lancé en place de <span class="application">sendmail</span>,
	vous pourrez modifier <code class="filename">/etc/mail/mailer.conf</code>
	de cette façon:</p><pre class="programlisting">sendmail	 /usr/local/supermailer/bin/sendmail-compat
send-mail	/usr/local/supermailer/bin/sendmail-compat
mailq		/usr/local/supermailer/bin/mailq-compat
newaliases	/usr/local/supermailer/bin/newaliases-compat
hoststat	/usr/local/supermailer/bin/hoststat-compat
purgestat	/usr/local/supermailer/bin/purgestat-compat</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84159184"></a>28.4.5. Pour en terminer</h3></div></div></div><p>Une fois que vous avez tout configuré de la façon
	  dont vous le désirez, vous devriez soit tuer les processus de
	  <span class="application">sendmail</span> dont vous n'avez plus
	  besoin et lancer les processus appartenant à votre
	  nouveau logiciel, ou tout simplement redémarrer.  Le
	  redémarrage vous donnera l'opportunité de vous assurer
	  que vous avez correctement configuré votre système
	  pour le lancement automatique de votre nouvel agent au
	  démarrage.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sendmail.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="mail.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="mail-trouble.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">28.3. Configuration de <span class="application">sendmail</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 28.5. Dépannage</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>