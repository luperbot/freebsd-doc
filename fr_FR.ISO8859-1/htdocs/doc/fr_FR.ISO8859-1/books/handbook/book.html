<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>Manuel FreeBSD</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><meta name="description" content="Bienvenue à FreeBSD! Ce manuel décrit l'installation et l'utilisation quotidienne de FreeBSD 8.4-RELEASE, FreeBSD 9.3-RELEASE et FreeBSD 10.1-RELEASE. Ce manuel est en constante évolution et il est le résultat du travail de nombreuses personnes. Par conséquent, certaines sections peuvent prendre de l'âge et demandent à être mises à jour. Si vous voulez participer à ce projet, envoyez un courrier électronique à la liste de diffusion du groupe de documentation de FreeBSD. La dernière version anglaise de ce document est disponible sur le site Web de FreeBSD (les versions antérieures de ce manuel peuvent être obtenues auprès de http://docs.FreeBSD.org/doc/). Il peut être aussi téléchargé dans divers formats et options de compression depuis le serveur FTP FreeBSD ou l'un des nombreux sites miroirs. Si vous préférez avoir une version imprimée du manuel, vous pouvez en acquérir une auprès de FreeBSD Mall. Vous pouvez aussi faire des recherches dans le Manuel. N.d.T.: Contactez Marc Fonvieille blackend@FreeBSD.org si vous voulez collaborer à la traduction." /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div xml:lang="fr" class="book" lang="fr"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp61462608"></a>Manuel FreeBSD</h1></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="author"><h3 class="author"><span class="orgname">Groupe de Documentation FreeBSD</span></h3></div></div><div>Version: <a href="https://svnweb.freebsd.org/changeset/doc/"><span class="svnref"></span></a></div><div><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 1995-2015 Groupe de Documentation FreeBSD</p></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="legalnotice"></a><p class="legalnotice-title"><strong>Copyright</strong></p><p>Redistribution and use in source (XML DocBook) and 'compiled'
    forms (XML, HTML, PDF, PostScript, RTF and so forth) with or without
    modification, are permitted provided that the following conditions are
    met:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Redistributions of source code (XML DocBook) must retain the
        above copyright notice, this list of conditions and the following
        disclaimer as the first lines of this file unmodified.</p></li><li class="listitem"><p>Redistributions in compiled form (transformed to other DTDs,
        converted to PDF, PostScript, RTF and other formats) must
        reproduce the above copyright notice, this list of conditions and
        the following disclaimer in the documentation and/or other
        materials provided with the distribution.</p></li></ol></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION
      PROJECT "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,
      BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
      FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
      THE FREEBSD DOCUMENTATION PROJECT BE LIABLE FOR ANY DIRECT, INDIRECT,
      INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
      OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
      ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
      TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
      USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
      DAMAGE.</p></div></div></div><div><div xmlns="http://www.w3.org/1999/xhtml" class="legalnotice"><a id="trademarks"></a><p>FreeBSD is a registered trademark of
  the FreeBSD Foundation.</p><p>3Com and HomeConnect are registered
  trademarks of 3Com Corporation.</p><p>3ware is a registered
  trademark of 3ware Inc.</p><p>ARM is a registered trademark of ARM
  Limited.</p><p>Adaptec is a registered trademark of
  Adaptec, Inc.</p><p>Adobe, Acrobat, Acrobat Reader, Flash and
  PostScript are either registered trademarks or trademarks of Adobe
  Systems Incorporated in the United States and/or other
  countries.</p><p>Apple, AirPort, FireWire,
  iMac, iPhone, iPad,
  Mac, Macintosh, Mac OS,
  Quicktime, and TrueType are trademarks of Apple Inc.,
  registered in the U.S. and other countries.</p><p>Sound Blaster is a trademark of
  Creative Technology Ltd. in the United States and/or other
  countries.</p><p>CVSup is a registered trademark of
  John D. Polstra.</p><p>Heidelberg, Helvetica,
  Palatino, and Times Roman are either registered trademarks or
  trademarks of Heidelberger Druckmaschinen AG in the U.S. and other
  countries.</p><p>IBM, AIX, OS/2,
  PowerPC, PS/2, S/390, and ThinkPad are
  trademarks of International Business Machines Corporation in the
  United States, other countries, or both.</p><p>IEEE, POSIX, and 802 are registered
  trademarks of Institute of Electrical and Electronics Engineers,
  Inc. in the United States.</p><p>Intel, Celeron, Centrino, Core, EtherExpress, i386,
  i486, Itanium, Pentium, and Xeon are trademarks or registered
  trademarks of Intel Corporation or its subsidiaries in the United
  States and other countries.</p><p>Intuit and Quicken are registered
  trademarks and/or registered service marks of Intuit Inc., or one of
  its subsidiaries, in the United States and other countries.</p><p>Linux is a registered trademark of
  Linus Torvalds.</p><p>LSI Logic, AcceleRAID, eXtremeRAID,
  MegaRAID and Mylex are trademarks or registered trademarks of LSI
  Logic Corp.</p><p>M-Systems and DiskOnChip are
  trademarks or registered trademarks of M-Systems Flash Disk
  Pioneers, Ltd.</p><p>Microsoft, IntelliMouse, MS-DOS,
  Outlook, Windows, Windows Media and Windows NT are either
  registered trademarks or trademarks of Microsoft Corporation in the
  United States and/or other countries.</p><p>Motif, OSF/1, and UNIX are
  registered trademarks and IT DialTone and The Open Group are
  trademarks of The Open Group in the United States and other
  countries.</p><p>Oracle is a registered trademark
  of Oracle Corporation.</p><p>RealNetworks, RealPlayer, and
  RealAudio are the registered trademarks of RealNetworks,
  Inc.</p><p>Red Hat, RPM, are trademarks or
  registered trademarks of Red Hat, Inc. in the United States and
  other countries.</p><p>Sun, Sun Microsystems, Java, Java
  Virtual Machine, JDK, JRE, JSP, JVM, Netra, OpenJDK,
  Solaris, StarOffice, SunOS
  and VirtualBox are trademarks or registered trademarks of
  Sun Microsystems, Inc. in the United States and other countries.</p><p>MATLAB is a registered trademark
  of The MathWorks, Inc.</p><p>SpeedTouch is a trademark of
  Thomson.</p><p>U.S. Robotics and Sportster are
  registered trademarks of U.S. Robotics Corporation.</p><p>VMware is a trademark of VMware,
  Inc.</p><p>Waterloo Maple and Maple are
  trademarks or registered trademarks of Waterloo Maple Inc.</p><p>Mathematica is a registered
  trademark of Wolfram Research, Inc.</p><p>XFree86 is a trademark of The
  XFree86 Project, Inc.</p><p>Ogg Vorbis and Xiph.Org are trademarks
  of Xiph.Org.</p><p>Many of the designations used by
  manufacturers and sellers to distinguish their products are claimed
  as trademarks.  Where those designations appear in this document,
  and the FreeBSD Project was aware of the trademark claim, the
  designations have been followed by the <span class="quote">« <span class="quote">&#8482;</span> »</span> or the
  <span class="quote">« <span class="quote">®</span> »</span> symbol.</p></div></div><div>   par .</div><div><div xmlns="http://www.w3.org/1999/xhtml" class="abstract"><div class="abstract-title">Résumé</div><p>Bienvenue à FreeBSD!  Ce manuel décrit l'installation
	et l'utilisation quotidienne de <span class="emphasis"><em>FreeBSD
	8.4-RELEASE</em></span>, <span class="emphasis"><em>FreeBSD
	9.3-RELEASE</em></span> et <span class="emphasis"><em>FreeBSD
	10.1-RELEASE</em></span>.
	Ce manuel est en
        <span class="emphasis"><em>constante évolution</em></span> et il est le
	résultat du travail de
	nombreuses personnes.  Par conséquent, certaines
	sections peuvent prendre de l'âge et demandent à être
        mises à jour.  Si vous voulez participer à ce projet,
        envoyez un courrier électronique à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">liste de diffusion du groupe de documentation de FreeBSD</a>.  La
        dernière version anglaise de ce document est disponible sur le
        <a class="link" href="http://www.FreeBSD.org/" target="_top">site Web de
	FreeBSD</a> (les versions antérieures de ce manuel
	peuvent être obtenues auprès de <code class="uri"><a class="uri" href="http://docs.FreeBSD.org/doc/" target="_top">http://docs.FreeBSD.org/doc/</a></code>).
	Il peut être aussi
	téléchargé dans divers
	formats et options de compression depuis le
        <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc" target="_top">serveur FTP
        FreeBSD</a> ou l'un des nombreux <a class="link" href="#mirrors-ftp" title="A.2. Sites FTP">sites
        miroirs</a>.  Si vous préférez avoir une version
	imprimée du manuel, vous pouvez en acquérir une
	auprès
	de <a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD Mall</a>.
	Vous pouvez aussi
        <a class="link" href="../../../../search/index.html" target="_top">faire des
        recherches dans le Manuel</a>.</p><p>N.d.T.: Contactez Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code> si vous voulez
	collaborer à la traduction.</p></div></div></div><div class="docformatnavi">
      [
      <a href="index.html">Multiples pages HTML</a>
      /
      
	  Page HTML unique
	
      ]
    </div><hr /></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="preface"><a href="#book-preface">Préface</a></span></dt><dt><span class="part"><a href="#getting-started">I. Pour commencer</a></span></dt><dd><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="sect1"><a href="#introduction-synopsis">1.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. Bienvenue à FreeBSD!</a></span></dt><dt><span class="sect1"><a href="#history">1.3. A propos du Projet FreeBSD</a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">2. Installer FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install-synopsis">2.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#install-hardware">2.2. Matériel nécessaire</a></span></dt><dt><span class="sect1"><a href="#install-pre">2.3. Tâches de pré-installation</a></span></dt><dt><span class="sect1"><a href="#install-start">2.4. Débuter l'installation</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">2.5. Présentation de sysinstall</a></span></dt><dt><span class="sect1"><a href="#install-steps">2.6. Allouer l'espace disque</a></span></dt><dt><span class="sect1"><a href="#install-choosing">2.7. Choisir ce que l'on va installer</a></span></dt><dt><span class="sect1"><a href="#install-media">2.8. Choisir votre support d'installation</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">2.9. Procéder à l'installation</a></span></dt><dt><span class="sect1"><a href="#install-post">2.10. Post-installation</a></span></dt><dt><span class="sect1"><a href="#install-trouble">2.11. Dépannage</a></span></dt><dt><span class="sect1"><a href="#install-advanced">2.12. Guide avancé d'installation</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">2.13. Préparer votre propre support d'installation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bsdinstall">3. Installer FreeBSD 9.<em class="replaceable"><code>X</code></em> et versions
      suivantes</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bsdinstall-synopsis">3.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-hardware">3.2. Matériel nécessaire</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-pre">3.3. Tâches de pré-installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-start">3.4. Lancer l'installation</a></span></dt><dt><span class="sect1"><a href="#using-bsdinstall">3.5. Présentation de <span class="application">bsdinstall</span></a></span></dt><dt><span class="sect1"><a href="#bsdinstall-netinstall">3.6. Installation à partir du réseau</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-partitioning">3.7. Allouer l'espace disque</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-final-warning">3.8. Procéder à l'installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-post">3.9. Post-Installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-install-trouble">3.10. Dépannage</a></span></dt><dt><span class="sect1"><a href="#using-live-cd">3.11. Utilisation du CD Live</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basics">4. Quelques bases d'UNIX</a></span></dt><dd><dl><dt><span class="sect1"><a href="#basics-synopsis">4.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#consoles">4.2. Consoles virtuelles &amp; terminaux</a></span></dt><dt><span class="sect1"><a href="#permissions">4.3. Permissions</a></span></dt><dt><span class="sect1"><a href="#dirstructure">4.4. Organisation de l'arborescence des répertoires</a></span></dt><dt><span class="sect1"><a href="#disk-organization">4.5. Organisation des disques</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">4.6. Monter et démonter des systèmes de fichiers</a></span></dt><dt><span class="sect1"><a href="#basics-processes">4.7. Processus</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">4.8. Daemons, signaux, et comment tuer un processus</a></span></dt><dt><span class="sect1"><a href="#shells">4.9. Interpréteurs de commandes - &#8220;Shells&#8221;</a></span></dt><dt><span class="sect1"><a href="#editors">4.10. Editeurs de texte</a></span></dt><dt><span class="sect1"><a href="#basics-devices">4.11. Périphériques et fichiers spéciaux de
      périphérique</a></span></dt><dt><span class="sect1"><a href="#binary-formats">4.12. Le format des fichiers binaires</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">4.13. Pour plus d'information</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ports">5. Installer des applications: les logiciels pré-compilés
    et les logiciels portés</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ports-synopsis">5.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#ports-overview">5.2. Généralités sur l'installation de logiciels</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">5.3. Trouver votre application</a></span></dt><dt><span class="sect1"><a href="#packages-using">5.4. Utiliser le système des logiciels
      pré-compilés</a></span></dt><dt><span class="sect1"><a href="#ports-using">5.5. Utiliser le catalogue des logiciels portés</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">5.6. Activités de post-installation</a></span></dt><dt><span class="sect1"><a href="#ports-broken">5.7. Que faire avec les logiciels portés ne fonctionnant
      pas?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#x11">6. Le système X Window</a></span></dt><dd><dl><dt><span class="sect1"><a href="#x11-synopsis">6.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#x-understanding">6.2. Comprendre X</a></span></dt><dt><span class="sect1"><a href="#x-install">6.3. Installer X11</a></span></dt><dt><span class="sect1"><a href="#x-config">6.4. Configuration d'X11</a></span></dt><dt><span class="sect1"><a href="#x-fonts">6.5. Utilisation des polices de caractères sous X11</a></span></dt><dt><span class="sect1"><a href="#x-xdm">6.6. Le gestionnaire de procédures de connexions graphiques
      - &#8220;X Display Manager&#8221;</a></span></dt><dt><span class="sect1"><a href="#x11-wm">6.7. Environnements de travail</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#common-tasks">II. Tâches courantes</a></span></dt><dd><dl><dt><span class="chapter"><a href="#desktop">7. Bureautique</a></span></dt><dd><dl><dt><span class="sect1"><a href="#desktop-synopsis">7.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">7.2. Navigateurs</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">7.3. Productivité</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">7.4. Lecteurs de document</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">7.5. Finance</a></span></dt><dt><span class="sect1"><a href="#desktop-summary">7.6. Résumé</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multimedia">8. Multimédia</a></span></dt><dd><dl><dt><span class="sect1"><a href="#multimedia-synopsis">8.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#sound-setup">8.2. Configurer une carte son</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">8.3. Fichiers MP3</a></span></dt><dt><span class="sect1"><a href="#video-playback">8.4. Lecture des Vidéos</a></span></dt><dt><span class="sect1"><a href="#tvcard">8.5. Configuration des cartes TV</a></span></dt><dt><span class="sect1"><a href="#scanners">8.6. Scanners</a></span></dt></dl></dd><dt><span class="chapter"><a href="#kernelconfig">9. Configurer le noyau de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#kernelconfig-synopsis">9.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-custom-kernel">9.2. Pourquoi compiler un noyau sur mesure?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">9.3. Compiler et installer un noyau sur mesure</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">9.4. Le fichier de configuration</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">9.5. Si quelque chose se passe mal</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printing">10. Imprimer</a></span></dt><dd><dl><dt><span class="sect1"><a href="#printing-synopsis">10.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">10.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">10.3. Configuration de base</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">10.4. Configuration avancée de l'imprimante</a></span></dt><dt><span class="sect1"><a href="#printing-using">10.5. Using Printers ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">10.6. Alternatives to the Standard Spooler ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">10.7. Troubleshooting ** Traduction en Cours **</a></span></dt></dl></dd><dt><span class="chapter"><a href="#linuxemu">11. Compatibilité binaire avec Linux</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linuxemu-synopsis">11.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">11.2. Installation</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematica">11.3. Installer <span class="trademark">Mathematica</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-maple">11.4. Installer <span class="trademark">Maple</span>&#8482;</a></span></dt><dt><span class="sect1"><a href="#linuxemu-matlab">11.5. Installer <span class="trademark">MATLAB</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">11.6. Installer <span class="trademark">Oracle</span>®</a></span></dt><dt><span class="sect1"><a href="#sapr3">11.7. Installer <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-advanced">11.8. Sujets avancés</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#system-administration">III. Administration Système</a></span></dt><dd><dl><dt><span class="chapter"><a href="#config-tuning">12. Configuration et optimisation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#config-synopsis">12.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#configtuning-initial">12.2. Configuration initiale</a></span></dt><dt><span class="sect1"><a href="#configtuning-core-configuration">12.3. Configuration principale</a></span></dt><dt><span class="sect1"><a href="#configtuning-appconfig">12.4. Configuration des applications</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">12.5. Démarrer des services</a></span></dt><dt><span class="sect1"><a href="#configtuning-cron">12.6. Configuration de l'utilitaire
      <code class="command">cron</code></a></span></dt><dt><span class="sect1"><a href="#configtuning-rcd">12.7. Utilisation du système rc sous FreeBSD</a></span></dt><dt><span class="sect1"><a href="#config-network-setup">12.8. Configuration des cartes réseaux</a></span></dt><dt><span class="sect1"><a href="#configtuning-virtual-hosts">12.9. Hôtes virtuels</a></span></dt><dt><span class="sect1"><a href="#configtuning-configfiles">12.10. Fichiers de configuration</a></span></dt><dt><span class="sect1"><a href="#configtuning-sysctl">12.11. Optimisation avec sysctl</a></span></dt><dt><span class="sect1"><a href="#configtuning-disk">12.12. Optimiser les disques</a></span></dt><dt><span class="sect1"><a href="#configtuning-kernel-limits">12.13. Optimisation des limitations du noyau</a></span></dt><dt><span class="sect1"><a href="#adding-swap-space">12.14. Ajouter de l'espace de pagination</a></span></dt><dt><span class="sect1"><a href="#acpi-overview">12.15. Gestion de l'énergie et des ressources</a></span></dt><dt><span class="sect1"><a href="#ACPI-debug">12.16. Utiliser et déboguer l'<acronym class="acronym">ACPI</acronym>
      sous FreeBSD</a></span></dt></dl></dd><dt><span class="chapter"><a href="#boot">13. Processus de démarrage de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#boot-synopsis">13.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">13.2. Le problème du démarrage</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">13.3. Le gestionnaire de démarrage et les étapes de
      démarrage</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">13.4. Interaction avec le noyau au démarrage</a></span></dt><dt><span class="sect1"><a href="#device-hints">13.5. &#8220;Device Hints&#8221;&#8212;Paramétrage des
      périphériques</a></span></dt><dt><span class="sect1"><a href="#boot-init">13.6. Init: Initialisation de la gestion des processus</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">13.7. Séquence d'arrêt du système</a></span></dt></dl></dd><dt><span class="chapter"><a href="#users">14. Gestion des comptes et des utilisateurs</a></span></dt><dd><dl><dt><span class="sect1"><a href="#users-synopsis">14.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#users-introduction">14.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#users-superuser">14.3. Le compte super-utilisateur</a></span></dt><dt><span class="sect1"><a href="#users-system">14.4. Comptes système</a></span></dt><dt><span class="sect1"><a href="#users-user">14.5. Comptes utilisateur</a></span></dt><dt><span class="sect1"><a href="#users-modifying">14.6. Modifier des comptes</a></span></dt><dt><span class="sect1"><a href="#users-limiting">14.7. Mettre en place des restrictions pour les utilisateurs</a></span></dt><dt><span class="sect1"><a href="#users-groups">14.8. Groupes</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">15. Sécurité</a></span></dt><dd><dl><dt><span class="sect1"><a href="#security-synopsis">15.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#security-intro">15.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">15.3. Securing FreeBSD ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#crypt">15.4. DES, MD5, et chiffrement</a></span></dt><dt><span class="sect1"><a href="#one-time-passwords">15.5. Mots de passe non réutilisables</a></span></dt><dt><span class="sect1"><a href="#tcpwrappers">15.6. L'encapsuleur TCP (<span class="quote">« <span class="quote">TCP Wrappers</span> »</span>)</a></span></dt><dt><span class="sect1"><a href="#kerberosIV">15.7. Kerberos</a></span></dt><dt><span class="sect1"><a href="#kerberos5">15.8. <span class="application">Kerberos5</span> ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#openssl">15.9. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">15.10. IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">15.11. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">15.12. Listes de contrôle d'accès au système de
      fichiers</a></span></dt><dt><span class="sect1"><a href="#security-portaudit">15.13. Surveillance des problèmes de sécurité
      relatifs aux programmes tierce-partie</a></span></dt><dt><span class="sect1"><a href="#security-advisories">15.14. Avis de sécurité de FreeBSD</a></span></dt><dt><span class="sect1"><a href="#security-accounting">15.15. Comptabilité des processus</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jails">16. Environnements jail</a></span></dt><dd><dl><dt><span class="sect1"><a href="#jails-synopsis">16.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#jails-terms">16.2. Termes relatifs aux environnements jail</a></span></dt><dt><span class="sect1"><a href="#jails-intro">16.3. Introduction</a></span></dt><dt><span class="sect1"><a href="#jails-build">16.4. Création et contrôle de l'environnement
      jail</a></span></dt><dt><span class="sect1"><a href="#jails-tuning">16.5. Optimisation et administration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mac">17. Mandatory Access Control ** Traduction en Cours **</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mac-synopsis">17.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#mac-glossary">17.2. Key Terms in this Chapter</a></span></dt><dt><span class="sect1"><a href="#mac-initial">17.3. Explanation of MAC</a></span></dt><dt><span class="sect1"><a href="#mac-understandlabel">17.4. Understanding MAC Labels</a></span></dt><dt><span class="sect1"><a href="#mac-modules">17.5. Module Configuration</a></span></dt><dt><span class="sect1"><a href="#mac-bsdextended">17.6. The MAC bsdextended Module</a></span></dt><dt><span class="sect1"><a href="#mac-ifoff">17.7. The MAC ifoff Module</a></span></dt><dt><span class="sect1"><a href="#mac-portacl">17.8. The MAC portacl Module</a></span></dt><dt><span class="sect1"><a href="#mac-labelingpolicies">17.9. MAC Policies with Labeling Features</a></span></dt><dt><span class="sect1"><a href="#mac-partition">17.10. The MAC partition Module</a></span></dt><dt><span class="sect1"><a href="#mac-mls">17.11. The MAC Multi-Level Security Module</a></span></dt><dt><span class="sect1"><a href="#mac-biba">17.12. The MAC Biba Module</a></span></dt><dt><span class="sect1"><a href="#mac-lomac">17.13. The MAC LOMAC Module</a></span></dt><dt><span class="sect1"><a href="#mac-implementing">17.14. Implementing a Secure Environment with MAC</a></span></dt><dt><span class="sect1"><a href="#MAC-examplehttpd">17.15. Another Example: Using MAC to Constrain a Web Server</a></span></dt><dt><span class="sect1"><a href="#mac-troubleshoot">17.16. Troubleshooting the MAC Framework</a></span></dt></dl></dd><dt><span class="chapter"><a href="#audit">18. Audit des événements relatifs à la
    sécurité du système</a></span></dt><dd><dl><dt><span class="sect1"><a href="#audit-synopsis">18.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#audit-inline-glossary">18.2. Mots-clés</a></span></dt><dt><span class="sect1"><a href="#audit-config">18.3. Configuration de l'audit</a></span></dt><dt><span class="sect1"><a href="#audit-administration">18.4. Travailler avec les traces d'audit</a></span></dt></dl></dd><dt><span class="chapter"><a href="#disks">19. Stockage des données</a></span></dt><dd><dl><dt><span class="sect1"><a href="#disks-synopsis">19.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#disks-naming">19.2. Noms des périphériques</a></span></dt><dt><span class="sect1"><a href="#disks-adding">19.3. Ajouter des disques</a></span></dt><dt><span class="sect1"><a href="#raid">19.4. RAID</a></span></dt><dt><span class="sect1"><a href="#usb-disks">19.5. Périphériques de stockage USB</a></span></dt><dt><span class="sect1"><a href="#creating-cds">19.6. Création et utilisation de supports optiques
      (CDs)</a></span></dt><dt><span class="sect1"><a href="#creating-dvds">19.7. Création et utilisation de supports optiques
      (DVDs)</a></span></dt><dt><span class="sect1"><a href="#floppies">19.8. Création et utilisation de disquettes</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">19.9. Créer et utiliser les bandes magnétiques</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">19.10. Sauvegardes sur disquettes</a></span></dt><dt><span class="sect1"><a href="#backup-strategies">19.11. Stratégies de sauvegarde</a></span></dt><dt><span class="sect1"><a href="#backup-basics">19.12. Sauvegardes</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">19.13. Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></span></dt><dt><span class="sect1"><a href="#snapshots">19.14. Instantané (&#8220;Snapshot&#8221;) d'un système de fichiers</a></span></dt><dt><span class="sect1"><a href="#quotas">19.15. Quotas d'utilisation des disques</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">19.16. Chiffrer les partitions d'un disque</a></span></dt><dt><span class="sect1"><a href="#swap-encrypting">19.17. Chiffrage de l'espace de pagination</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GEOM">20. GEOM: architecture modulaire de gestion des disques</a></span></dt><dd><dl><dt><span class="sect1"><a href="#GEOM-synopsis">20.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#GEOM-intro">20.2. Introduction à GEOM</a></span></dt><dt><span class="sect1"><a href="#GEOM-striping">20.3. RAID0 - <span class="quote">« <span class="quote">Striping</span> »</span></a></span></dt><dt><span class="sect1"><a href="#GEOM-mirror">20.4. RAID1 - <span class="quote">« <span class="quote">mirroring</span> »</span></a></span></dt><dt><span class="sect1"><a href="#geom-ggate">20.5. Périphériques réseau <span class="quote">« <span class="quote">GEOM
      Gate</span> »</span></a></span></dt><dt><span class="sect1"><a href="#geom-glabel">20.6. Ajouter un label à un disque</a></span></dt></dl></dd><dt><span class="chapter"><a href="#vinum-vinum">21. Le gestionnaire de volume Vinum</a></span></dt><dd><dl><dt><span class="sect1"><a href="#vinum-synopsis">21.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#vinum-intro">21.2. Les disques sont trop petits</a></span></dt><dt><span class="sect1"><a href="#idp79520976">21.3. Les goulots d'étranglement d'accès aux
      données</a></span></dt><dt><span class="sect1"><a href="#idp79543504">21.4. Intégrité des données</a></span></dt><dt><span class="sect1"><a href="#vinum-objects">21.5. Objets Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-examples">21.6. Quelques exemples</a></span></dt><dt><span class="sect1"><a href="#idp79644368">21.7. Appellation des objets</a></span></dt><dt><span class="sect1"><a href="#vinum-config">21.8. Configuration de Vinum</a></span></dt></dl></dd><dt><span class="chapter"><a href="#virtualization">22. Virtualisation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#virtualization-synopsis">22.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#virtualization-guest">22.2. FreeBSD comme système d'exploitation
      invité</a></span></dt><dt><span class="sect1"><a href="#virtualization-host">22.3. FreeBSD comme système d'exploitation hôte</a></span></dt></dl></dd><dt><span class="chapter"><a href="#l10n">23. Localisation - Utilisation et configuration de l'I18N/L10N</a></span></dt><dd><dl><dt><span class="sect1"><a href="#l10n-synopsis">23.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">23.2. Les bases</a></span></dt><dt><span class="sect1"><a href="#using-localization">23.3. Utiliser la localisation</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">23.4. Compiler des programmes I18N</a></span></dt><dt><span class="sect1"><a href="#lang-setup">23.5. Localiser FreeBSD pour des langues spécifiques</a></span></dt></dl></dd><dt><span class="chapter"><a href="#updating-upgrading">24. Mise à jour de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#updating-upgrading-synopsis">24.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-freebsdupdate">24.2. Mise à jour de FreeBSD</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-portsnap">24.3. Portsnap: un outil de mise à jour du catalogue des
      logiciels portés</a></span></dt><dt><span class="sect1"><a href="#current-stable">24.4. Suivre une branche de développement</a></span></dt><dt><span class="sect1"><a href="#synching">24.5. Synchroniser vos sources</a></span></dt><dt><span class="sect1"><a href="#makeworld">24.6. Recompiler le système</a></span></dt><dt><span class="sect1"><a href="#small-lan">24.7. Suivre les mises à jour pour plusieurs machines</a></span></dt></dl></dd><dt><span class="chapter"><a href="#dtrace">25. DTrace</a></span></dt><dd><dl><dt><span class="sect1"><a href="#dtrace-synopsis">25.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#dtrace-implementation">25.2. Des différences de mise en oeuvre</a></span></dt><dt><span class="sect1"><a href="#dtrace-enable">25.3. Activer la prise en charge de DTrace</a></span></dt><dt><span class="sect1"><a href="#dtrace-using">25.4. Utiliser DTrace</a></span></dt><dt><span class="sect1"><a href="#dtrace-language">25.5. Le langage D</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#network-communication">IV. Réseau</a></span></dt><dd><dl><dt><span class="chapter"><a href="#serialcomms">26. Serial Communications ** Traduction en Cours **</a></span></dt><dd><dl><dt><span class="sect1"><a href="#serial-synopsis">26.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#serial">26.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#term">26.3. Terminals</a></span></dt><dt><span class="sect1"><a href="#dialup">26.4. Dial-in Service</a></span></dt><dt><span class="sect1"><a href="#dialout">26.5. Dial-out Service</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">26.6. Setting Up the Serial Console</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ppp-and-slip">27. PPP et SLIP</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ppp-and-slip-synopsis">27.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#userppp">27.2. Using User PPP ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#ppp">27.3. Utiliser PPP intégré au noyau</a></span></dt><dt><span class="sect1"><a href="#pppoe">27.4. Utiliser PPP sur Ethernet (PPPoE)</a></span></dt><dt><span class="sect1"><a href="#pppoa">27.5. Utiliser <span class="application">PPP</span> sur ATM (PPPoA)</a></span></dt><dt><span class="sect1"><a href="#slip">27.6. Utiliser SLIP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">28. Courrier électronique</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mail-synopsis">28.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#mail-using">28.2. Utilisation du courrier électronique</a></span></dt><dt><span class="sect1"><a href="#sendmail">28.3. Configuration de <span class="application">sendmail</span></a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">28.4. Changer votre agent de transfert de courrier</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">28.5. Dépannage</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">28.6. Sujets avancés</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">28.7. SMTP avec UUCP</a></span></dt><dt><span class="sect1"><a href="#outgoing-only">28.8. Configuration pour l'envoi seul</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">28.9. Utiliser le courrier électronique avec une connexion
      temporaire</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">28.10. Authentification SMTP</a></span></dt><dt><span class="sect1"><a href="#mail-agents">28.11. Clients de messagerie</a></span></dt><dt><span class="sect1"><a href="#mail-fetchmail">28.12. Utiliser fetchmail</a></span></dt><dt><span class="sect1"><a href="#mail-procmail">28.13. Utiliser procmail</a></span></dt></dl></dd><dt><span class="chapter"><a href="#network-servers">29. Serveurs réseau</a></span></dt><dd><dl><dt><span class="sect1"><a href="#network-servers-synopsis">29.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#network-inetd">29.2. Le &#8220;super-serveur&#8221;
      <span class="application">inetd</span></a></span></dt><dt><span class="sect1"><a href="#network-nfs">29.3. Système de fichiers réseau (NFS)</a></span></dt><dt><span class="sect1"><a href="#network-nis">29.4. Services d'information réseau (NIS/YP)</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">29.5. Configuration réseau automatique (DHCP)</a></span></dt><dt><span class="sect1"><a href="#network-dns">29.6. Serveurs de noms (<acronym class="acronym">DNS</acronym>)</a></span></dt><dt><span class="sect1"><a href="#network-apache">29.7. Serveur HTTP Apache</a></span></dt><dt><span class="sect1"><a href="#network-ftp">29.8. Protocole de transfert de fichiers (FTP)</a></span></dt><dt><span class="sect1"><a href="#network-samba">29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</a></span></dt><dt><span class="sect1"><a href="#network-ntp">29.10. Synchronisation de l'horloge avec NTP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#firewalls">30. Firewalls ** Traduction en Cours **</a></span></dt><dd><dl><dt><span class="sect1"><a href="#firewalls-intro">30.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#firewalls-concepts">30.2. Firewall Concepts</a></span></dt><dt><span class="sect1"><a href="#firewalls-apps">30.3. Firewall Packages</a></span></dt><dt><span class="sect1"><a href="#firewalls-pf">30.4. The OpenBSD Packet Filter (PF) and
      <acronym class="acronym">ALTQ</acronym></a></span></dt><dt><span class="sect1"><a href="#firewalls-ipf">30.5. The IPFILTER (IPF) Firewall</a></span></dt><dt><span class="sect1"><a href="#firewalls-ipfw">30.6. IPFW</a></span></dt></dl></dd><dt><span class="chapter"><a href="#advanced-networking">31. Administration réseau avancée</a></span></dt><dd><dl><dt><span class="sect1"><a href="#advanced-networking-synopsis">31.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#network-routing">31.2. Passerelles et routes</a></span></dt><dt><span class="sect1"><a href="#network-wireless">31.3. Réseau sans fil</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">31.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">31.5. Bridging</a></span></dt><dt><span class="sect1"><a href="#network-diskless">31.6. Système sans disque dur</a></span></dt><dt><span class="sect1"><a href="#network-isdn">31.7. ISDN</a></span></dt><dt><span class="sect1"><a href="#network-natd">31.8. Translation d'adresses</a></span></dt><dt><span class="sect1"><a href="#network-plip">31.9. IP sur liaison parallèle (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">31.10. IPv6</a></span></dt><dt><span class="sect1"><a href="#network-atm">31.11. ATM (<span class="quote">« <span class="quote">Asynchronous Transfer Mode</span> »</span>)</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#appendices">V. Annexes</a></span></dt><dd><dl><dt><span class="appendix"><a href="#mirrors">A. Se procurer FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mirrors-cdrom">A.1. Editeurs de CD-ROMs et DVDs</a></span></dt><dt><span class="sect1"><a href="#mirrors-ftp">A.2. Sites FTP</a></span></dt><dt><span class="sect1"><a href="#anoncvs">A.3. CVS anonyme</a></span></dt><dt><span class="sect1"><a href="#ctm">A.4. Utiliser CTM</a></span></dt><dt><span class="sect1"><a href="#cvsup">A.5. Utiliser CVSup</a></span></dt><dt><span class="sect1"><a href="#portsnap">A.6. Utiliser Portsnap</a></span></dt><dt><span class="sect1"><a href="#cvs-tags">A.7. Etiquettes CVS</a></span></dt><dt><span class="sect1"><a href="#mirrors-afs">A.8. Sites AFS</a></span></dt><dt><span class="sect1"><a href="#mirrors-rsync">A.9. Sites rsync</a></span></dt></dl></dd><dt><span class="appendix"><a href="#bibliography">B. Bibliographie</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bibliography-freebsd">B.1. Livres &amp; magazines consacrés à FreeBSD</a></span></dt><dt><span class="sect1"><a href="#bibliography-userguides">B.2. Manuels d'utilisation</a></span></dt><dt><span class="sect1"><a href="#bibliography-adminguides">B.3. Manuels d'administration</a></span></dt><dt><span class="sect1"><a href="#bibliography-programmers">B.4. Manuels de programmation</a></span></dt><dt><span class="sect1"><a href="#bibliography-osinternals">B.5. &#8220;Internes&#8221; du système d'exploitation</a></span></dt><dt><span class="sect1"><a href="#bibliography-security">B.6. Ouvrages de référence en matière de sécurité</a></span></dt><dt><span class="sect1"><a href="#bibliography-hardware">B.7. Ouvrages de référence sur le matériel</a></span></dt><dt><span class="sect1"><a href="#bibliography-history">B.8. Histoire d'<span class="trademark">UNIX</span>®</a></span></dt><dt><span class="sect1"><a href="#bibliography-journals">B.9. Revues et journaux</a></span></dt></dl></dd><dt><span class="appendix"><a href="#eresources">C. Ressources sur Internet</a></span></dt><dd><dl><dt><span class="sect1"><a href="#eresources-mail">C.1. Listes de diffusion</a></span></dt><dt><span class="sect1"><a href="#eresources-news">C.2. Forums de discussion</a></span></dt><dt><span class="sect1"><a href="#eresources-web">C.3. Serveurs World Wide Web</a></span></dt><dt><span class="sect1"><a href="#eresources-email">C.4. Adresses électroniques</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">C.5. Comptes</a></span></dt></dl></dd><dt><span class="appendix"><a href="#pgpkeys">D. Clés Open<acronym class="acronym">PGP</acronym></a></span></dt><dd><dl><dt><span class="sect1"><a href="#pgpkeys-officers">D.1. Officiers</a></span></dt></dl></dd></dl></dd><dt><span class="glossary"><a href="#freebsd-glossary">Glossaire FreeBSD</a></span></dt><dt><span class="index"><a href="#idp88175312">Index</a></span></dt></dl></div><div class="list-of-figures"><div class="toc-title">Liste des illustrations</div><dl><dt>2.1. <a href="#boot-loader-menu">Menu du chargeur FreeBSD</a></dt><dt>2.2. <a href="#install-dev-probe">Résultats typiques de la détection du
	  matériel</a></dt><dt>2.3. <a href="#config-country">Menu de sélection du pays</a></dt><dt>2.4. <a href="#sysinstall-exit">Quitter sysinstall</a></dt><dt>2.5. <a href="#sysinstall-main3">Sélection de l'entrée Usage dans le menu
	principal de sysinstall</a></dt><dt>2.6. <a href="#main-doc">Sélectionner le menu de documentation</a></dt><dt>2.7. <a href="#docmenu1">Menu de documentation de sysinstall</a></dt><dt>2.8. <a href="#sysinstall-keymap">Menu principal de sysinstall</a></dt><dt>2.9. <a href="#sysinstall-keymap-menu">Menu des tables de clavier de sysinstall</a></dt><dt>2.10. <a href="#sysinstall-options">Menu principal de sysinstall</a></dt><dt>2.11. <a href="#options">Options de sysinstall</a></dt><dt>2.12. <a href="#sysinstall-standard">Commencer une installation standard</a></dt><dt>2.13. <a href="#sysinstall-fdisk-drive1">Sélection du disque pour FDisk</a></dt><dt>2.14. <a href="#sysinstall-fdisk1">Partitions Fdisk typiques avant édition</a></dt><dt>2.15. <a href="#sysinstall-fdisk2">Partionnement Fdisk utilisant l'intégralité du
	  disque</a></dt><dt>2.16. <a href="#sysinstall-bootmgr">Menu du gestionnaire de démarrage de sysinstall</a></dt><dt>2.17. <a href="#sysinstall-fdisk-drive2">Quitter la sélection de disque</a></dt><dt>2.18. <a href="#sysinstall-label">L'éditeur Disklabel de sysinstall</a></dt><dt>2.19. <a href="#sysinstall-label2">L'éditeur Disklabel de sysinstall en mode
	  automatique</a></dt><dt>2.20. <a href="#sysinstall-label-add">Espace libre pour la partition racine</a></dt><dt>2.21. <a href="#sysinstall-label-add2">Edition de la taille de la partition racine</a></dt><dt>2.22. <a href="#sysinstall-label-type">Choisir le type de la partition racine</a></dt><dt>2.23. <a href="#sysinstall-label-mount">Choisir le point de montage de la partition racine</a></dt><dt>2.24. <a href="#sysinstall-label4">Editeur Disklabel de sysinstall</a></dt><dt>2.25. <a href="#distribution-set1">Choix de l'ensemble de distribution</a></dt><dt>2.26. <a href="#distribution-set2">Confirmer le choix de la distribution</a></dt><dt>2.27. <a href="#choose-media">Choisir le support d'installation</a></dt><dt>2.28. <a href="#ed-config1">Sélection d'un périphérique Ethernet</a></dt><dt>2.29. <a href="#ed-config2">Configuration réseau pour ed0</a></dt><dt>2.30. <a href="#inetd-edit">Edition d'<code class="filename">inetd.conf</code></a></dt><dt>2.31. <a href="#anon-ftp2">Configuration par défaut du FTP anonyme</a></dt><dt>2.32. <a href="#anon-ftp4">Edition du message de bienvenue du FTP</a></dt><dt>2.33. <a href="#nfs-server-edit">Edition du fichier <code class="filename">exports</code></a></dt><dt>2.34. <a href="#saver-options">Options de configuration de la console système</a></dt><dt>2.35. <a href="#saver-select">Options de l'économiseur d'écran</a></dt><dt>2.36. <a href="#saver-timeout">Délai de l'économiseur d'écran</a></dt><dt>2.37. <a href="#saver-exit">Sortie de la configuration de la console système</a></dt><dt>2.38. <a href="#set-timezone-region">Choisissez votre région</a></dt><dt>2.39. <a href="#set-timezone-country">Sélectionnez votre pays</a></dt><dt>2.40. <a href="#set-timezone-locality">Sélectionnez votre fuseau horaire</a></dt><dt>2.41. <a href="#mouse-protocol">Sélectionner la configuration du protocole de la souris</a></dt><dt>2.42. <a href="#set-mouse-protocol">Configurer le protocole de la souris</a></dt><dt>2.43. <a href="#config-mouse-port">Configuration du port de la souris</a></dt><dt>2.44. <a href="#set-mouse-port">Choisir le port de la souris</a></dt><dt>2.45. <a href="#test-daemon">Activer le &#8220;daemon&#8221; - gestionnaire de la
	  souris</a></dt><dt>2.46. <a href="#test-mouse-daemon">Tester le gestionnaire de la souris</a></dt><dt>2.47. <a href="#package-category">Sélection d'une catégorie de logiciels
	  pré-compilés</a></dt><dt>2.48. <a href="#package-select">Sélection des logiciels pré-compilés</a></dt><dt>2.49. <a href="#package-install">Installation des logiciels pré-compilés</a></dt><dt>2.50. <a href="#package-install-confirm">Confirmation de l'installation de logiciels pré-compilés</a></dt><dt>2.51. <a href="#add-user2">Sélectionner l'ajout d'utilisateur</a></dt><dt>2.52. <a href="#add-user3">Ajout de l'information utilisateur</a></dt><dt>2.53. <a href="#add-user4">Quitter la gestion des utilisateurs et des groupes</a></dt><dt>2.54. <a href="#final-main">Quitter l'installation</a></dt><dt>2.55. <a href="#network-configuration">Configuration réseau</a></dt><dt>2.56. <a href="#mta-selection">Sélection du MTA par défaut</a></dt><dt>2.57. <a href="#Ntpdate-config">Configuration de ntpdate</a></dt><dt>2.58. <a href="#Network-configuration-cont">Configuration réseau suite</a></dt><dt>3.1. <a href="#bsdinstall-boot-loader-menu">Menu du chargeur FreeBSD</a></dt><dt>3.2. <a href="#bsdinstall-dev-probe">Résultats typiques de la détection du
	  matériel</a></dt><dt>3.3. <a href="#bsdinstall-choose-mode">Sélection du mode d'utilisation du support
	  d'installation</a></dt><dt>3.4. <a href="#bsdinstall-keymap-select-default">Changement de la table de clavier</a></dt><dt>3.5. <a href="#bsdinstall-config-keymap">Menu de sélection de la table de clavier</a></dt><dt>3.6. <a href="#bsdinstall-config-hostname">Configuration du nom de machine</a></dt><dt>3.7. <a href="#bsdinstall-config-components">Sélection des composants à installer</a></dt><dt>3.8. <a href="#bsdinstall-netinstall-notify">Installation à partir du réseau</a></dt><dt>3.9. <a href="#bsdinstall-netinstall-mirror">Sélection d'un miroir</a></dt><dt>3.10. <a href="#bsdinstall-part-guided-manual">Sélection du partitionnement guidé ou manuel</a></dt><dt>3.11. <a href="#bsdinstall-part-guided-disk">Sélection parmi plusieurs disques</a></dt><dt>3.12. <a href="#bsdinstall-part-entire-part">Sélection de l'intégralité du disque ou d'une
	  partition</a></dt><dt>3.13. <a href="#bsdinstall-part-review">Vérification des partitions créés</a></dt><dt>3.14. <a href="#bsdinstall-part-manual-create">Créer manuellement les partitions</a></dt><dt>3.15. <a href="#bsdinstall-part-manual-partscheme">Créer manuellement les partitions</a></dt><dt>3.16. <a href="#bsdinstall-part-manual-addpart">Créer manuellement les partitions</a></dt><dt>3.17. <a href="#bsdinstall-final-confirmation">Confirmation finale</a></dt><dt>3.18. <a href="#bsdinstall-distfile-fetching">Récupération des fichiers de distribution</a></dt><dt>3.19. <a href="#bsdinstall-distfile-verify">Vérification des fichiers de distribution</a></dt><dt>3.20. <a href="#bsdinstall-distfile-extract">Décompression des fichiers de distribution</a></dt><dt>3.21. <a href="#bsdinstall-post-set-root-passwd">Saisie du mot de passe <code class="systemitem">root</code></a></dt><dt>3.22. <a href="#bsdinstall-configure-net-interface">Choix d'une interface réseau</a></dt><dt>3.23. <a href="#bsdinstall-wireless-scan">Recherche des points d'accès sans-fil</a></dt><dt>3.24. <a href="#bsdinstall-wireless-accesspoints">Sélection d'un réseau sans-fil</a></dt><dt>3.25. <a href="#bsdinstall-wireless-wpa2">Configuration WPA2</a></dt><dt>3.26. <a href="#bsdinstall-configure-net-ipv4">Sélection d'un fonctionnement réseau en IPv4</a></dt><dt>3.27. <a href="#bsdinstall-net-ipv4-dhcp">Sélection de la configuration IPv4 avec DHCP</a></dt><dt>3.28. <a href="#bsdinstall-net-ipv4-static">Configuration IPv4 en statique</a></dt><dt>3.29. <a href="#bsdinstall-net-ipv6">Sélection d'un réseau IPv6</a></dt><dt>3.30. <a href="#bsdinstall-net-ipv6-slaac">Sélection de la configuration IPv6 SLAAC</a></dt><dt>3.31. <a href="#bsdinstall-net-ipv6-static">Configuration IPv6 en statique</a></dt><dt>3.32. <a href="#bsdinstall-net-dns-config">Configuration du DNS</a></dt><dt>3.33. <a href="#bsdinstall-local-utc">Sélection d'une horloge locale ou UTC</a></dt><dt>3.34. <a href="#bsdinstall-timezone-region">Sélectionner une région</a></dt><dt>3.35. <a href="#bsdinstall-timezone-country">Sélection d'un pays</a></dt><dt>3.36. <a href="#bsdinstall-timezone-zone">Sélection d'un fuseau horaire</a></dt><dt>3.37. <a href="#bsdinstall-timezone-confirmation">Confirmation du fuseau horaire</a></dt><dt>3.38. <a href="#bsdinstall-config-serv">Sélection de services supplémentaires à activer</a></dt><dt>3.39. <a href="#bsdinstall-config-crashdump">Activer les crash dumps</a></dt><dt>3.40. <a href="#bsdinstall-add-user1">Ajout de comptes utilisateur</a></dt><dt>3.41. <a href="#bsdinstall-add-user2">Entrée des informations utilisateur</a></dt><dt>3.42. <a href="#bsdinstall-add-user3">Quitter la gestion des utilisateurs et des
	  groupes</a></dt><dt>3.43. <a href="#bsdinstall-final-config">Configuration finale</a></dt><dt>3.44. <a href="#bsdinstall-final-modification-shell">Configuration manuelle</a></dt><dt>3.45. <a href="#bsdinstall-final-main">Achever l'installation</a></dt><dt>21.1. <a href="#vinum-concat">Organisation par concaténation</a></dt><dt>21.2. <a href="#vinum-striped">Organisation segmentée</a></dt><dt>21.3. <a href="#vinum-raid5-org">Organisation RAID-5</a></dt><dt>21.4. <a href="#vinum-simple-vol">Un simple volume Vinum</a></dt><dt>21.5. <a href="#vinum-mirrored-vol">Un volume Vinum en mode miroir</a></dt><dt>21.6. <a href="#vinum-striped-vol">Un volume Vinum segmenté</a></dt><dt>21.7. <a href="#vinum-raid10-vol">Un volume Vinum en mode miroir segmenté</a></dt></dl></div><div class="list-of-tables"><div class="toc-title">Liste des tableaux</div><dl><dt>2.1. <a href="#idp63230544">Exemple d'inventaire de périphériques</a></dt><dt>2.2. <a href="#idp66155088">Partitionnement du premier disque</a></dt><dt>2.3. <a href="#idp66185424">Partitionnement pour les disques suivants</a></dt><dt>2.4. <a href="#idp66944848">Noms des images ISO FreeBSD
	      6.<em class="replaceable"><code>X</code></em> et
	      7.<em class="replaceable"><code>X</code></em> et leurs
	      significations</a></dt><dt>3.1. <a href="#idp67576784">Tables de partitionnement</a></dt><dt>4.1. <a href="#basics-dev-codes">Codes des périphériques disques</a></dt><dt>18.1. <a href="#event-selection">Classes d'événements par défaut</a></dt><dt>18.2. <a href="#event-prefixes">Prefixes pour les classes d'audit</a></dt><dt>19.1. <a href="#disk-naming-physical-table">Conventions de nom pour les disques physiques</a></dt><dt>21.1. <a href="#vinum-comparison">Organisations de plex Vinum</a></dt><dt>31.1. <a href="#idp85363664">Câblage d'un câble parallèle pour
	  réseau</a></dt><dt>31.2. <a href="#idp85458000">Adresses IPv6 réservées</a></dt></dl></div><div class="list-of-examples"><div class="toc-title">Liste des exemples</div><dl><dt>2.1. <a href="#idp65727952">Utilisation d'une partition existante</a></dt><dt>2.2. <a href="#idp65732304">Redimensionner une partition existante</a></dt><dt>3.1. <a href="#idp67225936">Utilisation d'une partition existante</a></dt><dt>3.2. <a href="#idp67230800">Réduire une partition existante</a></dt><dt>3.3. <a href="#bsdinstall-part-manual-splitfs">Création d'un système traditionnel de partitions pour
	  systèmes de fichiers séparés</a></dt><dt>4.1. <a href="#basics-disk-slice-part">Exemples d'appellation de disques, tranches et
      partitions</a></dt><dt>4.2. <a href="#basics-concept-disk-model">Modèle conceptuel d'un disque</a></dt><dt>5.1. <a href="#idp69011536">Télécharger un logiciel pré-compilé
	  à la main puis l'installer localement</a></dt><dt>12.1. <a href="#idp75298384">Créer un fichier de pagination sous FreeBSD</a></dt><dt>13.1. <a href="#boot-boot0-example">Ecran de <code class="filename">boot0</code></a></dt><dt>13.2. <a href="#boot-boot2-example">Ecran de <code class="filename">boot2</code></a></dt><dt>13.3. <a href="#boot-insecure-console">Une console non sécurisée dans
	  <code class="filename">/etc/ttys</code></a></dt><dt>14.1. <a href="#idp76018512">Ajouter un utilisateur sous FreeBSD</a></dt><dt>14.2. <a href="#idp76045264">Suppression interactive de compte avec <code class="command">rmuser</code></a></dt><dt>14.3. <a href="#idp76058320"><code class="command">chpass</code> interactif par le super-utilisateur</a></dt><dt>14.4. <a href="#idp76060368"><code class="command">chpass</code> interactif par un utilisateur ordinaire</a></dt><dt>14.5. <a href="#idp76076752">Modifier votre mot de passe</a></dt><dt>14.6. <a href="#idp76078544">Modifier le mot de passe d'un autre utilisateur en tant
	  que super-utilisateur</a></dt><dt>14.7. <a href="#idp76198096">Ajouter un groupe en utilisant pw(8)</a></dt><dt>14.8. <a href="#idp76241104">Ajouter quelqu'un dans un groupe en utilisant
	pw(8)</a></dt><dt>14.9. <a href="#idp76252752">Utilisation de id(1) pour déterminer
	l'appartenance à un groupe</a></dt><dt>15.1. <a href="#idp77051728">Utiliser SSH pour créer un tunnel
	  sécurisé pour SMTP</a></dt><dt>19.1. <a href="#idp78606032">Utiliser dump(8) sur <span class="application">ssh</span></a></dt><dt>19.2. <a href="#idp78610000">Utiliser <code class="command">dump</code> sur <span class="application">ssh</span>
	avec la variable <code class="envar">RSH</code> positionnée</a></dt><dt>19.3. <a href="#idp78743504">Procédure de création d'une disquette
	    de démarrage</a></dt><dt>19.4. <a href="#idp78803280">Utilisation de <code class="command">mdconfig</code> pour monter
	  une image d'un système de fichiers</a></dt><dt>19.5. <a href="#idp78811600">Création d'un nouveau disque sauvegardé sur
	  fichier avec <code class="command">mdconfig</code></a></dt><dt>19.6. <a href="#idp78830672">Création et montage d'un disque sauvegardé
	  sur fichier avec <code class="command">mdmfs</code></a></dt><dt>19.7. <a href="#idp78849360">Création d'un disque mémoire avec
	  <code class="command">mdconfig</code></a></dt><dt>19.8. <a href="#idp78853840">Création d'un disque mémoire avec
	  <code class="command">mdmfs</code></a></dt><dt>28.1. <a href="#idp82062032">Configuration de la base de données d'accès
	de <span class="application">sendmail</span></a></dt><dt>28.2. <a href="#idp82068944">Exemple de base de données d'alias</a></dt><dt>28.3. <a href="#idp82102736">Exemple de correspondance de domaine virtuel de
	courrier</a></dt><dt>29.1. <a href="#network-inetd-reread">Recharger le fichier de configuration
	  d'<span class="application">inetd</span></a></dt><dt>29.2. <a href="#idp82964304">Monter un systèmes de fichiers exporté
	  avec <span class="application">amd</span></a></dt><dt>31.1. <a href="#idp85208528">Réseau d'agence ou à domicile</a></dt><dt>31.2. <a href="#idp85217616">Siège social ou autre réseau</a></dt><dt>A.1. <a href="#idp86218320">Récupérer quelque chose de -CURRENT (ls(1)):</a></dt><dt>A.2. <a href="#idp86223312">Utiliser SSH pour récupérer
	    l'arborescence <code class="filename">src/</code>:</a></dt><dt>A.3. <a href="#idp86225872">Récupérer la version 6-STABLE de
	    ls(1):</a></dt><dt>A.4. <a href="#idp86243152">Générer la liste des différences
	    concernant ls(1) (sous forme de &#8220;diffs
	    unifiés&#8221;) entre différentes versions de FreeBSD</a></dt><dt>A.5. <a href="#idp86248016">Savoir quels autres noms de modules peuvent
	    être utilisés:</a></dt></dl></div><div class="preface"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="book-preface"></a>Préface</h1></div></div></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><h2 class="title"><a id="preface-audience"></a>Public visé</h2><p>Le nouveau venu à FreeBSD constatera que la première
    section de ce livre guide l'utilisateur à travers le processus
    d'installation de FreeBSD, et présente progressivement les concepts
    et les conventions qui sont les fondements d'<span class="trademark">UNIX</span>®.  Travailler avec cette
    section demande un peu plus que le simple désire d'explorer, et
    la capacité d'assimiler de nouveaux concepts quand ils sont
    présentés.</p><p>Une fois que vous en êtes arrivé là, la seconde,
    bien plus grande, section du Manuel est une référence
    complète de tous les sujets qui intéressent les
    administrateurs systèmes de FreeBSD.  Certains de ces chapitres
    peuvent vous recommander d'effectuer des lectures préliminaires, cela
    est noté dans le synopsis au début de chaque chapitre.</p><p>Pour une liste de sources d'informations complémentaires,
    veuillez consulter <a class="xref" href="#bibliography" title="Annexe B. Bibliographie">Annexe B, <em>Bibliographie</em></a>.</p><h2 class="title"><a id="preface-changes-from2"></a>Modifications
    depuis la Seconde Edition</h2><p>Cette seconde édition est le point culminant de plus de
    deux ans de travail pour les membres du Groupe de Documentation de
    FreeBSD.  Ce qui suit présente les changements principaux
    de cette nouvelle édition:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#config-tuning" title="Chapitre 12. Configuration et optimisation">Chapitre 12, <em>Configuration et optimisation</em></a>, le chapitre
	<span class="quote">« <span class="quote">Configuration et optimisation</span> »</span>, a
	été augmenté avec des informations
	nouvelles sur la gestion ACPI des ressources et de
	l'énergie, sur l'utilitaire système
	<code class="command">cron</code>, et sur d'autres d'options
	supplémentaires d'optimisation du noyau.</p></li><li class="listitem"><p><a class="xref" href="#security" title="Chapitre 15. Sécurité">Chapitre 15, <em>Sécurité</em></a>, le chapitre
	<span class="quote">« <span class="quote">Sécurité</span> »</span>, a été
	augmenté avec de nouvelles informations sur les
	réseaux privés virtuels (VPNs), les listes de
	contrôle d'accès au système de fichiers
	(ACLs), et sur les avis de sécurité.</p></li><li class="listitem"><p><a class="xref" href="#mac" title="Chapitre 17. Mandatory Access Control ** Traduction en Cours **">Chapitre 17, <em>Mandatory Access Control ** Traduction en Cours **</em></a>, <span class="quote">« <span class="quote">Le contrôle
	d'accès obligatoire</span> »</span> (MAC) est un nouveau
	chapitre ajouté avec cette édition.  Il explique
	ce qu'est le MAC et comment ce mécanisme peut
	être utilisé pour sécuriser un
	système FreeBSD.</p></li><li class="listitem"><p><a class="xref" href="#disks" title="Chapitre 19. Stockage des données">Chapitre 19, <em>Stockage des données</em></a>, le chapitre <span class="quote">« <span class="quote">Stockage des
	données</span> »</span>, a bénéficié de
	l'ajout de nouvelles sections concernant les
	périphériques de stockage USB, les
	instantanés de systèmes de fichiers, les quotas
	d'utilisation des disques, les systèmes de fichiers
	réseaux et sauvegardés sur fichier, et le
	chiffrage de partitions.</p></li><li class="listitem"><p><a class="xref" href="#vinum-vinum" title="Chapitre 21. Le gestionnaire de volume Vinum">Chapitre 21, <em>Le gestionnaire de volume Vinum</em></a>, <span class="quote">« <span class="quote">Vinum</span> »</span>,
	est un nouveau chapitre apparaissant avec cette
	édition.  Il décrit l'utilisation de Vinum, un
	gestionnaire de volume qui permet la création de
	disques logiques indépendants du
	périphérique, et l'utilisation de
	systèmes RAID-0, RAID-1 et RAID-5 logiciels.</p></li><li class="listitem"><p>Une section dépannage a été
	ajoutée au chapitre <a class="xref" href="#ppp-and-slip" title="Chapitre 27. PPP et SLIP">Chapitre 27, <em>PPP et SLIP</em></a>, PPP
	et SLIP.</p></li><li class="listitem"><p><a class="xref" href="#mail" title="Chapitre 28. Courrier électronique">Chapitre 28, <em>Courrier électronique</em></a>, le chapitre <span class="quote">« <span class="quote">Courrier
	électronique</span> »</span>, bénéficie de
	nouvelles sections sur l'utilisation d'agents de transfert de
	courrier alternatifs, sur l'authentification SMTP, l'UUCP,
	<span class="application">fetchmail</span>,
	<span class="application">procmail</span>, et d'autres sujets
	avancés.</p></li><li class="listitem"><p><a class="xref" href="#network-servers" title="Chapitre 29. Serveurs réseau">Chapitre 29, <em>Serveurs réseau</em></a>, le chapitre
	<span class="quote">« <span class="quote">Serveurs réseau</span> »</span>, apparaît avec
	cette édition.  Ce chapitre traite de la configuration
	du serveur HTTP <span class="application">Apache</span>, de
	<span class="application">ftpd</span>, et celle d'un serveur pour
	clients <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® à l'aide de
	<span class="application">Samba</span>.  Certaines sections du
	chapitre <a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>,
	<span class="quote">« <span class="quote">Administration réseau avancée</span> »</span> ont
	été déplacées vers ce nouveau
	chapitre.</p></li><li class="listitem"><p><a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>, le chapitre
	<span class="quote">« <span class="quote">Administration réseau avancée</span> »</span> a
	été complété avec des informations
	sur l'utilisation des périphériques <span class="trademark">Bluetooth</span>®
	sous FreeBSD, la configuration de réseaux sans fil, et sur
	le mode de transfert réseau asynchrone (ATM).</p></li><li class="listitem"><p>Un glossaire a été ajouté pour
	centraliser les définitions des termes techniques
	employés tout au long de cet ouvrage.</p></li><li class="listitem"><p>La présentation des tableaux et des figures a
	été améliorée.</p></li></ul></div><h2 class="title"><a id="preface-changes"></a>Modifications depuis
    la Première Edition</h2><p>La seconde édition est le point culminant de deux ans de
      travail pour les membres du Groupe de Documentation de FreeBSD.
      Ce qui suit présente les changements principaux de cette nouvelle
      édition:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un sommaire complet a été ajouté.</p></li><li class="listitem"><p>Toutes les figures ASCII ont été remplacées
	  par des graphiques.</p></li><li class="listitem"><p>Un synopsis standard a été ajouté à
	  chaque chapitre pour donner un rapide résumé des
	  informations contenues par ce dernier et ce qu'est sensé
	  connaître le lecteur.</p></li><li class="listitem"><p>Le contenu a été réorganisé de
	  façon logique en trois parties: &#8220;Pour commencer&#8221;,
	  &#8220;L'Administration Système&#8221;, et
	  &#8220;Annexes&#8221;.</p></li><li class="listitem"><p>Le <a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a> (&#8220;Installer FreeBSD&#8221;) fut
	  complètement réécrit avec de nombreuses photos
	  d'écrans pour rendre le texte plus facile à comprendre
	  pour les nouveaux utilisateurs.</p></li><li class="listitem"><p>Le <a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a> (&#8220;Quelques bases d'<span class="trademark">UNIX</span>®&#8221;) a
	  été augmenté pour contenir des informations
	  additionnelles sur les processus, daemons et signaux.</p></li><li class="listitem"><p>Le <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a> (&#8220;Installer des applications&#8221;) a
	  été augmenté pour contenir des informations
	  complémentaires sur la gestion des applications
	  pré-compilées.</p></li><li class="listitem"><p>Le <a class="xref" href="#x11" title="Chapitre 6. Le système X Window">Chapitre 6, <em>Le système X Window</em></a> (&#8220;Le système X Window&#8221;) a
	  complètement été réécrit en
	  insistant sur l'utilisation de technologies modernes d'environnement
	  de travail comme <span class="application">KDE</span> et
	  <span class="application">GNOME</span> sous <span class="trademark">XFree86</span>&#8482; 4.X.</p></li><li class="listitem"><p>Le <a class="xref" href="#boot" title="Chapitre 13. Processus de démarrage de FreeBSD">Chapitre 13, <em>Processus de démarrage de FreeBSD</em></a> (&#8220;Le processus de démarrage de
	  FreeBSD&#8221;) a été augmenté.</p></li><li class="listitem"><p>Le <a class="xref" href="#disks" title="Chapitre 19. Stockage des données">Chapitre 19, <em>Stockage des données</em></a> (&#8220;Stockage des données&#8221;) fut
	  réécrit à partir de ce qui était à
	  l'origine deux chapitres séparés &#8220;Disques&#8221; et
	  &#8220;Sauvegardes&#8221;.  Nous pensons que le sujet est plus facile à
	  appréhender quand il est présenté en un seul
	  chapitre.  Une section sur RAID (matériel et logiciel) fut
	  également ajoutée.</p></li><li class="listitem"><p>Le <a class="xref" href="#serialcomms" title="Chapitre 26. Serial Communications ** Traduction en Cours **">Chapitre 26, <em>Serial Communications ** Traduction en Cours **</em></a> (&#8220;Communications série&#8221;) a
	  été complètement réorganisé et mis
	  à jour pour FreeBSD 4.X/5.X.</p></li><li class="listitem"><p>Le <a class="xref" href="#ppp-and-slip" title="Chapitre 27. PPP et SLIP">Chapitre 27, <em>PPP et SLIP</em></a> (&#8220;PPP et SLIP&#8221;) a été
	  sensiblement mis à jour.</p></li><li class="listitem"><p>Plusieurs nouvelles sections ont été ajouté
	  au <a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a> (&#8220;Administration réseau
	  avancée&#8221;).</p></li><li class="listitem"><p>Le <a class="xref" href="#mail" title="Chapitre 28. Courrier électronique">Chapitre 28, <em>Courrier électronique</em></a> (&#8220;Courrier électronique&#8221;) fut
	  augmenté pour inclure plus d'informations au sujet de la
	  configuration de <span class="application">sendmail</span>.</p></li><li class="listitem"><p>Le <a class="xref" href="#linuxemu" title="Chapitre 11. Compatibilité binaire avec Linux">Chapitre 11, <em>Compatibilité binaire avec Linux</em></a> (&#8220;Compatibilité <span class="trademark">Linux</span>®&#8221;) a
	  été augmenté pour inclure des informations sur
	  l'installation d'<span class="application"><span class="trademark">Oracle</span>®</span> et
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.</p></li><li class="listitem"><p>Les nouveaux sujets suivants sont abordés dans cette
	  seconde édition:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Configuration et optimisation (<a class="xref" href="#config-tuning" title="Chapitre 12. Configuration et optimisation">Chapitre 12, <em>Configuration et optimisation</em></a>).</p></li><li class="listitem"><p>Multimédia (<a class="xref" href="#multimedia" title="Chapitre 8. Multimédia">Chapitre 8, <em>Multimédia</em></a>)</p></li></ul></div></li></ul></div><h2 class="title"><a id="preface-overview"></a>Organisation de cet
  ouvrage</h2><p>Ce livre est divisé en cinq parties logiquement distinctes.  Le
    première section, <span class="emphasis"><em>Pour commencer</em></span>, couvre
    l'installation et les bases de l'utilisation de FreeBSD.  On
    s'attend à ce que le lecteur suive ces chapitres dans l'ordre,
    sautant éventuellement les chapitres traitant de sujets familiers.
    La seconde section <span class="emphasis"><em>Tâches courantes</em></span>,
    couvre les fonctionnalités de FreeBSD fréquemment
    utilisées.  Cette section, ainsi que toutes les sections
    suivantes, peuvent être lues dans n'importe quel ordre.
    Chaque chapitre débute
    avec un synopsis succinct qui décrit ce dont parle le chapitre et ce
    qu'on s'attend à ce que le lecteur sache déjà.  Cela en
    vue de permettre au lecteur occasionnel de se rendre directement aux
    chapitres qui l'intéresse.  La troisième section,
    <span class="emphasis"><em>Administration système</em></span>, traite des
    sujets concernant l'administration.  La quatrième section,
    <span class="emphasis"><em>Réseaux</em></span>, couvre le domaine des
    réseaux et des serveurs.  La cinquième section
    contient des
    annexes d'information de référence.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#introduction" title="Chapitre 1. Introduction">Chapitre 1, <em>Introduction</em></a>, Introduction</em></span></span></dt><dd><p>Présente FreeBSD à un nouvel utilisateur.  Il
	  décrit l'histoire du projet FreeBSD, ses objectifs, son mode de
	  développement.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a>, Installation</em></span></span></dt><dd><p>Guide un utilisateur à travers le processus
	  d'installation.  Quelques sujets d'installation avancée, comme
	  l'installation avec une console série, sont aussi
	  couverts.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a>, Quelques bases d'<span class="trademark">UNIX</span>®</em></span></span></dt><dd><p>Couvre les commandes et fonctionnalités de base du
	  système d'exploitation FreeBSD.  Si vous êtes familier
	  avec <span class="trademark">Linux</span>® ou un autre type d'<span class="trademark">UNIX</span>® alors vous pouvez probablement
	  passer ce chapitre.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>, Installer des applications</em></span></span></dt><dd><p>Couvre l'installation de logiciels tiers avec l'innovant
	  &#8220;Catalogue de logiciels portés&#8221; de FreeBSD et les
	  logiciels pré-compilés.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#x11" title="Chapitre 6. Le système X Window">Chapitre 6, <em>Le système X Window</em></a>, Le système X Window</em></span></span></dt><dd><p>Décrit le système X Window en général
	  et l'utilisation d'X11 sur FreeBSD en particulier.  Décrit
	  également les environnements de travail comme
	  <span class="application">KDE</span> et
	  <span class="application">GNOME</span>.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#desktop" title="Chapitre 7. Bureautique">Chapitre 7, <em>Bureautique</em></a>, Bureautique</em></span></span></dt><dd><p>Liste les applications de bureautique courantes, comme
	  les navigateurs Web et les suites de bureautique, et
	  décrit comment les installer sous FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#multimedia" title="Chapitre 8. Multimédia">Chapitre 8, <em>Multimédia</em></a>,
	Multimédia</em></span></span></dt><dd><p>Montre comment installer le support du son et de la
	  vidéo pour votre système.  Décrit
	  également quelques applications audio et
	  vidéo.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>, Configurer le noyau de
	FreeBSD</em></span></span></dt><dd><p>Explique pour quelles raisons vous devriez configurer un
	  nouveau noyau et fournit des instructions
	  détaillées pour la configuration, la
	  compilation et l'installation d'un noyau sur mesures.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#printing" title="Chapitre 10. Imprimer">Chapitre 10, <em>Imprimer</em></a>,
	Impression</em></span></span></dt><dd><p>Décrit la gestion des imprimantes sous FreeBSD, y
	  compris les informations sur les pages d'en-tête, la
	  comptabilisation de l'usage et la configuration de
	  base.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#linuxemu" title="Chapitre 11. Compatibilité binaire avec Linux">Chapitre 11, <em>Compatibilité binaire avec Linux</em></a>, Compatibilité
	binaire avec <span class="trademark">Linux</span>®</em></span></span></dt><dd><p>Décrit les caractéristiques de la
	  compatibilité <span class="trademark">Linux</span>® sous FreeBSD.  Fournit
	  également les instructions détaillées
	  de l'installation de plusieurs applications <span class="trademark">Linux</span>® populaires
	  comme <span class="application"><span class="trademark">Oracle</span>®</span>,
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> et
	  <span class="application"><span class="trademark">Mathematica</span>®</span>.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#config-tuning" title="Chapitre 12. Configuration et optimisation">Chapitre 12, <em>Configuration et optimisation</em></a>, Configuration et
        optimisation</em></span></span></dt><dd><p>Décrit les paramètres disponibles pour les
	  administrateurs systèmes afin d' optimiser les performances
	  d'un système FreeBSD.  Décrit également les
	  différents fichiers de configuration utilisés dans
	  FreeBSD et où les trouver.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#boot" title="Chapitre 13. Processus de démarrage de FreeBSD">Chapitre 13, <em>Processus de démarrage de FreeBSD</em></a>, Processus de démarrage de
        FreeBSD</em></span></span></dt><dd><p>Décrit le processus de démarrage de FreeBSD et
	  explique comment contrôler ce processus avec des options de
	  configuration.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#users" title="Chapitre 14. Gestion des comptes et des utilisateurs">Chapitre 14, <em>Gestion des comptes et des utilisateurs</em></a>, Gestion des comptes et des
        utilisateurs</em></span></span></dt><dd><p>Décrit la création et la manipulation des comptes
	  utilisateur.  Traite également des limitations de ressources
	  qui peuvent être appliquées aux utilisateurs et des
	  autres tâches de gestion des comptes.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#security" title="Chapitre 15. Sécurité">Chapitre 15, <em>Sécurité</em></a>, Sécurité</em></span></span></dt><dd><p>Décrit différents outils disponibles pour vous
	  aider à sécuriser votre système FreeBSD, dont
	  Kerberos, IPsec et OpenSSH.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#jails" title="Chapitre 16. Environnements jail">Chapitre 16, <em>Environnements jail</em></a>, Environnements
	jails</em></span></span></dt><dd><p>Décrit l'organisation des environnements jail, et
	  les améliorations apportées par ces
	  environnements par rapport au support chroot traditionnel de
	  FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mac" title="Chapitre 17. Mandatory Access Control ** Traduction en Cours **">Chapitre 17, <em>Mandatory Access Control ** Traduction en Cours **</em></a>, Contrôle
	d'accès mandataire</em></span></span></dt><dd><p>Explique ce qu'est le contrôle d'accès
	  mandataire (MAC) et comment ce mécanisme peut
	  être utilisé pour sécuriser un
	  système FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#audit" title="Chapitre 18. Audit des événements relatifs à la sécurité du système">Chapitre 18, <em>Audit des événements relatifs à la
    sécurité du système</em></a>, Audit des
	événements relatifs à la
	sécurité</em></span></span></dt><dd><p>Décrit ce qu'est l'audit
	  d'événements sous FreeBSD, comment cette
	  fonctionnalité peut être installée,
	  configurée et comment les audits peuvent être
	  examinés et surveillés.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#disks" title="Chapitre 19. Stockage des données">Chapitre 19, <em>Stockage des données</em></a>, Stockage des données</em></span></span></dt><dd><p>Décrit comment gérer les supports de stockage et les
	  systèmes de fichiers avec FreeBSD.  Cela inclut les disques
	  physiques, les systèmes RAID, les supports optiques et bandes,
	  les disques mémoires, et les systèmes de fichiers
	  réseau.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#GEOM" title="Chapitre 20. GEOM: architecture modulaire de gestion des disques">Chapitre 20, <em>GEOM: architecture modulaire de gestion des disques</em></a>, GEOM</em></span></span></dt><dd><p>Décrit ce qu'est le système GEOM sous FreeBSD
	  et comment configurer les différents niveaux de RAID
	  supportés.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#vinum-vinum" title="Chapitre 21. Le gestionnaire de volume Vinum">Chapitre 21, <em>Le gestionnaire de volume Vinum</em></a>, Vinum</em></span></span></dt><dd><p>Décrit comment utiliser Vinum, un gestionnaire de
	  volume logique qui permet d'avoir des disques logiques
	  indépendants du périphérique, et le
	  RAID-0, RAID-1 et RAID-5 logiciel.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#virtualization" title="Chapitre 22. Virtualisation">Chapitre 22, <em>Virtualisation</em></a>, Virtualisation</em></span></span></dt><dd><p>Décrit ce que les systèmes de
	  virtualisation apportent, et comment ils peuvent être
	  utilisés avec FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#l10n" title="Chapitre 23. Localisation - Utilisation et configuration de l'I18N/L10N">Chapitre 23, <em>Localisation - Utilisation et configuration de l'I18N/L10N</em></a>, Localisation</em></span></span></dt><dd><p>Décrit comment utiliser FreeBSD avec des langues
	autres que l'anglais.  Couvre la localisation du système et des
	applications.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#updating-upgrading" title="Chapitre 24. Mise à jour de FreeBSD">Chapitre 24, <em>Mise à jour de FreeBSD</em></a>, Questions
	avancées</em></span></span></dt><dd><p>Explique les différences entre FreeBSD-STABLE,
	FreeBSD-CURRENT et les versions de publication;.
	Décrit quel type d'utilisateurs pourrait tirer profit
	de suivre un système de développement et
	présente le processus.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#serialcomms" title="Chapitre 26. Serial Communications ** Traduction en Cours **">Chapitre 26, <em>Serial Communications ** Traduction en Cours **</em></a>, Communications série</em></span></span></dt><dd><p>Explique comment connecter terminaux et modems à votre
	  système FreeBSD aussi bien pour les connexions entrantes que
	  sortantes.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#ppp-and-slip" title="Chapitre 27. PPP et SLIP">Chapitre 27, <em>PPP et SLIP</em></a>, PPP et SLIP</em></span></span></dt><dd><p>Décrit comment utiliser PPP, SLIP ou PPP sur Ethernet pour
	  se connecter à des systèmes distants à l'aide de
	  FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mail" title="Chapitre 28. Courrier électronique">Chapitre 28, <em>Courrier électronique</em></a>, Courrier électronique</em></span></span></dt><dd><p>Explique les différents composants d'un serveur de
	  courrier et plonge dans la configuration de base du serveur de
	  courrier le plus populaire:
	<span class="application">sendmail</span>.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#network-servers" title="Chapitre 29. Serveurs réseau">Chapitre 29, <em>Serveurs réseau</em></a>, Serveurs
	réseau</em></span></span></dt><dd><p>Fournit des instructions détaillées et des
	  exemples de fichiers de configuration pour configurer votre
	  machine FreeBSD comme serveur de fichiers, serveur de noms de
	  domaine, serveur d'information réseau, ou comme serveur
	  de synchronisation d'horloge.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#firewalls" title="Chapitre 30. Firewalls ** Traduction en Cours **">Chapitre 30, <em>Firewalls ** Traduction en Cours **</em></a>, Coupe-feux</em></span></span></dt><dd><p>Explique la philosophie des coupe-feux logiciels et
	  fournit des informations détaillées sur la
	  configuration des différents coupe-feux disponibles
	  pour FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>,
	Administration réseau avancée</em></span></span></dt><dd><p>Décrit de nombreux sujets sur l'utilisation
	  réseau, dont le partage d'une connexion Internet avec
	  d'autres ordinateurs sur votre réseau local, routage,
	  réseaux sans-fils, <span class="trademark">Bluetooth</span>®, ATM, IPv6, et bien
	  plus.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#mirrors" title="Annexe A. Se procurer FreeBSD">Annexe A, <em>Se procurer FreeBSD</em></a>, Se procurer FreeBSD </em></span></span></dt><dd><p>Enumère les différentes sources pour obtenir FreeBSD
	  sur CDROM ou DVD, ainsi que les différents sites Internet qui
	  vous permettent de télécharger et d'installer FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#bibliography" title="Annexe B. Bibliographie">Annexe B, <em>Bibliographie</em></a>, Bibliographie </em></span></span></dt><dd><p>Cet ouvrage aborde de nombreux sujets cela peut vous
	  laisser sur votre faim et à la recherche de plus de
	  détails.  La bibliographie énumère d'excellents
	  ouvrages qui sont référencés dans le texte.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#eresources" title="Annexe C. Ressources sur Internet">Annexe C, <em>Ressources sur Internet</em></a>, Ressources sur Internet</em></span></span></dt><dd><p>Décrit les nombreux forums disponibles pour les
	  utilisateurs de FreeBSD pour poster des questions et engager des
	  conversations techniques au sujet de FreeBSD.</p></dd><dt><span class="term"><span class="emphasis"><em><a class="xref" href="#pgpkeys" title="Annexe D. Clés OpenPGP">Annexe D, <em>Clés Open<acronym class="acronym">PGP</acronym></em></a>, Clés PGP</em></span></span></dt><dd><p>Liste les clés PGP de nombreux développeurs
	FreeBSD.</p></dd></dl></div><h2 class="title"><a id="preface-conv"></a>Conventions utilisées
    dans ce livre</h2><p>Pour fournir un texte logique et facile à lire, plusieurs
      conventions sont respectées tout au long du livre.</p><h3 class="title"><a id="preface-conv-typographic"></a>Conventions
    typographiques</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>Italique</em></span></span></dt><dd><p>Une police de caractères <span class="emphasis"><em>italique</em></span> est
	  utilisée pour les noms de fichiers, les URLs, le texte à
	  mettre en valeur et la première utilisation de termes
	  techniques.</p></dd><dt><span class="term"><code class="literal">Police de caractères à chasse fixe</code></span></dt><dd><p>Une police de caractères à
	    <code class="literal">chasse fixe</code>
	    est utilisée pour les messages d'erreurs, les commandes, les
	    variables d'environnement, les noms des logiciels portés,
	    les noms d'hôtes, les noms d'utilisateurs, les noms de
	    groupes, les noms de périphériques, les variables et
	    les morceaux de code source.</p></dd><dt><span class="term"><span class="application">Caractères gras</span></span></dt><dd><p>Des caractères <span class="application">gras</span> sont
	  utilisés pour les applications, les commandes et les
	  touches.</p></dd></dl></div><h3 class="title"><a id="preface-conv-commands"></a>Utilisation du clavier</h3><p>Les touches sont représentées en <span class="keycap"><strong>gras</strong></span>
    pour ressortir du texte.  Les combinaisons de touches qui sont
    sensées être tapées simultanément sont
    représentées avec `<code class="literal">+</code>' entre chaque touche,
    comme par exemple:</p><p>
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Del</strong></span>
  </p><p>Indiquant que l'utilisateur devra appuyer simultanément
    sur les touches <span class="keycap"><strong>Ctrl</strong></span>, <span class="keycap"><strong>Alt</strong></span>, et
    <span class="keycap"><strong>Del</strong></span>.</p><p>Les touches qui sont sensées être tapées en
    séquence seront séparées par une virgule, par
    exemple:</p><p>
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>X</strong></span>,
    <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>S</strong></span>
  </p><p>Signifiera que l'on on attend à ce que l'utilisateur tape les
    touches <span class="keycap"><strong>Ctrl</strong></span> et <span class="keycap"><strong>X</strong></span> simultanément et
    ensuite tape <span class="keycap"><strong>Ctrl</strong></span> et <span class="keycap"><strong>S</strong></span>
    simultanément.</p><h3 class="title"><a id="preface-conv-examples"></a>Exemples</h3><p>Les exemples commençant par <code class="filename">E:\&gt;</code>
    indiquent une commande <span class="trademark">MS-DOS</span>®.  Sauf indication contraire, on peut
    exécuter ces commandes depuis une fenêtre &#8220;d'invite de
    commande&#8221; dans un environnement <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® moderne.</p><pre class="screen"><code class="prompt">E:\&gt;</code> <strong class="userinput"><code>tools\fdimage floppies\kern.flp A:</code></strong></pre><p>Les exemples commençant par <code class="prompt">#</code> indiquent que la
    commande doit être lancée en tant que super-utilisateur sous
    FreeBSD.  Vous pouvez ouvrir une session en tant que
    <code class="systemitem">root</code> pour taper cette commande, ou ouvrir une
    session sous votre compte normal et utiliser
    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> pour obtenir les privilèges de
    super-utilisateur.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=kern.flp of=/dev/fd0</code></strong></pre><p>Les exemples commençant par <code class="prompt">%</code> indiquent une commande
    qui devrait être lancée par un utilisateur normal.  Sauf
    indication contraire, la syntaxe de l'interpréteur de commandes
    C-shell est utilisée pour configurer les variables d'environnement et
    autres commandes de l'interpréteur.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong></pre><h2 class="title"><a id="preface-acknowledgements"></a>Remerciements</h2><p>L'ouvrage que vous avez en main représente les efforts de
    plusieurs centaines de personnes dans le monde.  Qu'ils aient
    envoyé des corrections de fautes de frappe, ou soumis des
    chapitres entiers, toutes les contributions ont été
    utiles.</p><p>Plusieurs entreprises ont supporté le développement de ce
    document en payant des auteurs à travailler à plein temps
    dessus, en payant pour la publication etc...  En particulier, BSDi
    (rachetée plus tard par <a class="link" href="http://www.windriver.com" target="_top">Wind
    River Systems</a>) a payé à temps plein des membres du
    Groupe de Documentation de FreeBSD à l'amélioration de ce
    livre menant ainsi à la publication de la première version
    imprimée en Mars 2000 (ISBN 1-57176-241-8).  Wind River Systems a
    ensuite payé plusieurs auteurs supplémentaires pour apporter
    un certain nombre d'améliorations à l'infrastructure de
    publication et à l'ajout de chapitres.  Ce travail a abouti à
    la publication de la deuxième édition imprimée
    en Novembre 2001 (ISBN 1-57176-303-1).  En 2003-2004, <a class="link" href="http://www.freebsdmall.com" target="_top">FreeBSD Mall, Inc</a>, a
    payé plusieurs auteurs pour travailler sur
    l'amélioration de ce manuel en vue de la publication de la
    troisième édition papier.</p></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="getting-started"></a>Partie I. Pour commencer</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>Cette partie du Manuel FreeBSD est destinée aux nouveaux
	venus à FreeBSD, utilisateurs et administrateurs.  Ces
	chapitres:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Vous présenteront FreeBSD.</p></li><li class="listitem"><p>Vous guideront à travers le processus
	    d'installation.</p></li><li class="listitem"><p>Vous apprendront quelques bases et fondements d'<span class="trademark">UNIX</span>®.</p></li><li class="listitem"><p>Vous montreront comment installer la profusion d'applications
	    tiers disponibles pour FreeBSD.</p></li><li class="listitem"><p>Vous présenteront X, le système de
	    fenêtrage d'<span class="trademark">UNIX</span>®, et détailleront comment configurer
	    un environnement de travail qui vous rendra plus productif.</p></li></ul></div><p>Nous avons essayé de limiter le nombre de
        références dans le
        texte à un minimum afin que vous puissiez lire cette section du
	Manuel du début jusqu'à la fin avec le moins de mouvements
	de pages possibles.</p><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="sect1"><a href="#introduction-synopsis">1.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. Bienvenue à FreeBSD!</a></span></dt><dt><span class="sect1"><a href="#history">1.3. A propos du Projet FreeBSD</a></span></dt></dl></dd><dt><span class="chapter"><a href="#install">2. Installer FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install-synopsis">2.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#install-hardware">2.2. Matériel nécessaire</a></span></dt><dt><span class="sect1"><a href="#install-pre">2.3. Tâches de pré-installation</a></span></dt><dt><span class="sect1"><a href="#install-start">2.4. Débuter l'installation</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">2.5. Présentation de sysinstall</a></span></dt><dt><span class="sect1"><a href="#install-steps">2.6. Allouer l'espace disque</a></span></dt><dt><span class="sect1"><a href="#install-choosing">2.7. Choisir ce que l'on va installer</a></span></dt><dt><span class="sect1"><a href="#install-media">2.8. Choisir votre support d'installation</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">2.9. Procéder à l'installation</a></span></dt><dt><span class="sect1"><a href="#install-post">2.10. Post-installation</a></span></dt><dt><span class="sect1"><a href="#install-trouble">2.11. Dépannage</a></span></dt><dt><span class="sect1"><a href="#install-advanced">2.12. Guide avancé d'installation</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">2.13. Préparer votre propre support d'installation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bsdinstall">3. Installer FreeBSD 9.<em class="replaceable"><code>X</code></em> et versions
      suivantes</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bsdinstall-synopsis">3.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-hardware">3.2. Matériel nécessaire</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-pre">3.3. Tâches de pré-installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-start">3.4. Lancer l'installation</a></span></dt><dt><span class="sect1"><a href="#using-bsdinstall">3.5. Présentation de <span class="application">bsdinstall</span></a></span></dt><dt><span class="sect1"><a href="#bsdinstall-netinstall">3.6. Installation à partir du réseau</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-partitioning">3.7. Allouer l'espace disque</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-final-warning">3.8. Procéder à l'installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-post">3.9. Post-Installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-install-trouble">3.10. Dépannage</a></span></dt><dt><span class="sect1"><a href="#using-live-cd">3.11. Utilisation du CD Live</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basics">4. Quelques bases d'UNIX</a></span></dt><dd><dl><dt><span class="sect1"><a href="#basics-synopsis">4.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#consoles">4.2. Consoles virtuelles &amp; terminaux</a></span></dt><dt><span class="sect1"><a href="#permissions">4.3. Permissions</a></span></dt><dt><span class="sect1"><a href="#dirstructure">4.4. Organisation de l'arborescence des répertoires</a></span></dt><dt><span class="sect1"><a href="#disk-organization">4.5. Organisation des disques</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">4.6. Monter et démonter des systèmes de fichiers</a></span></dt><dt><span class="sect1"><a href="#basics-processes">4.7. Processus</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">4.8. Daemons, signaux, et comment tuer un processus</a></span></dt><dt><span class="sect1"><a href="#shells">4.9. Interpréteurs de commandes - &#8220;Shells&#8221;</a></span></dt><dt><span class="sect1"><a href="#editors">4.10. Editeurs de texte</a></span></dt><dt><span class="sect1"><a href="#basics-devices">4.11. Périphériques et fichiers spéciaux de
      périphérique</a></span></dt><dt><span class="sect1"><a href="#binary-formats">4.12. Le format des fichiers binaires</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">4.13. Pour plus d'information</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ports">5. Installer des applications: les logiciels pré-compilés
    et les logiciels portés</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ports-synopsis">5.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#ports-overview">5.2. Généralités sur l'installation de logiciels</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">5.3. Trouver votre application</a></span></dt><dt><span class="sect1"><a href="#packages-using">5.4. Utiliser le système des logiciels
      pré-compilés</a></span></dt><dt><span class="sect1"><a href="#ports-using">5.5. Utiliser le catalogue des logiciels portés</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">5.6. Activités de post-installation</a></span></dt><dt><span class="sect1"><a href="#ports-broken">5.7. Que faire avec les logiciels portés ne fonctionnant
      pas?</a></span></dt></dl></dd><dt><span class="chapter"><a href="#x11">6. Le système X Window</a></span></dt><dd><dl><dt><span class="sect1"><a href="#x11-synopsis">6.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#x-understanding">6.2. Comprendre X</a></span></dt><dt><span class="sect1"><a href="#x-install">6.3. Installer X11</a></span></dt><dt><span class="sect1"><a href="#x-config">6.4. Configuration d'X11</a></span></dt><dt><span class="sect1"><a href="#x-fonts">6.5. Utilisation des polices de caractères sous X11</a></span></dt><dt><span class="sect1"><a href="#x-xdm">6.6. Le gestionnaire de procédures de connexions graphiques
      - &#8220;X Display Manager&#8221;</a></span></dt><dt><span class="sect1"><a href="#x11-wm">6.7. Environnements de travail</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="introduction"></a>Chapitre 1. Introduction</h2></div><div><span class="authorgroup">Restructuré, réorganisé, et parties
	  réécrites par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#introduction-synopsis">1.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#nutshell">1.2. Bienvenue à FreeBSD!</a></span></dt><dt><span class="sect1"><a href="#history">1.3. A propos du Projet FreeBSD</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="introduction-synopsis"></a>1.1. Synopsis</h2></div></div></div><p>Merci de votre intérêt pour FreeBSD!  Le chapitre suivant
      traite de divers aspects concernant le projet FreeBSD,
      comme son histoire, ses objectifs, son mode de développement, et
      d'autres.
    </p><p>Après la lecture de ce chapitre, vous connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment FreeBSD est lié aux autres systèmes
	  d'exploitation.</p></li><li class="listitem"><p>L'histoire du Projet FreeBSD.</p></li><li class="listitem"><p>Les objectifs du Projet FreeBSD.</p></li><li class="listitem"><p>Les bases du mode de développement open-source de
	  FreeBSD.</p></li><li class="listitem"><p>Et bien sûr: l'origine du nom &#8220;FreeBSD&#8221;.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="nutshell"></a>1.2. Bienvenue à FreeBSD!</h2></div></div></div><a id="idp62537168" class="indexterm"></a><p>FreeBSD est une système d'exploitation basé sur
      4.4BSD-Lite2 pour les ordinateurs à base d'architecture Intel (x86 et <span class="trademark">Itanium</span>®), AMD64,
      les ordinateurs DEC <span class="trademark">Alpha</span>&#8482;, et Sun <span class="trademark">UltraSPARC</span>®.  Le portage pour d'autres architectures est
      également
      en cours.
      Pour
      connaître l'histoire du projet, lisez <a class="link" href="#history" title="1.3. A propos du Projet FreeBSD">Un court historique de FreeBSD</a>.  Pour
      avoir une description de la version la plus récente, allez
      à la section <a class="link" href="#relnotes" title="1.3.4. A propos de cette version">A propos de cette
      version</a>.  Si vous voulez contribuer d'une façon ou
      d'une autre au projet FreeBSD (code, matériel,
      dons), voyez s'il vous plaît à la
      section <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributing/index.html" target="_top">Contribuer
      à FreeBSD</a>.
    </p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="os-overview"></a>1.2.1. Que peut faire FreeBSD?</h3></div></div></div><p>FreeBSD dispose de nombreuses caractéristiques remarquables.
	Parmi lesquelles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp62559440" class="indexterm"></a><p><span class="emphasis"><em>Multi-tâche préemptif</em></span> avec
	    ajustement dynamique des priorités pour garantir un partage
	    équilibré et fluide de l'ordinateur entre les
	    applications et les utilisateurs et cela même sous les
	    charges les plus importantes.</p></li><li class="listitem"><a id="idp62565200" class="indexterm"></a><p><span class="emphasis"><em>Accès multi-utilisateurs</em></span> qui permet
	    à de nombreuses personnes d'utiliser en même temps un
	    système FreeBSD à des fins très
	    différentes.  Cela signifie, par exemple, que des
	    périphériques tels que les imprimantes ou les
	    lecteurs
	    de bandes peuvent être partagés entre tous les
	    utilisateurs sur le système ou sur le réseau et que
	    des limitations d'utilisation des ressources peuvent être
	    appliquées à des utilisateurs ou groupes
	    d'utilisateurs, protégeant ainsi les ressources
	    systèmes critiques d'une sur-utilisation.</p></li><li class="listitem"><a id="idp62575184" class="indexterm"></a><p><span class="emphasis"><em>Réseau TCP/IP</em></span> complet dont le
	    support de standards industriels comme SCTP, DHCP, NFS,
	    NIS, PPP, SLIP, IPsec, et IPv6.  Cela signifie que votre machine FreeBSD peut
	    coopérer facilement avec d'autres systèmes ou
	    être utilisée comme serveur d'entreprise, fournissant
	    des fonctions essentielles comme NFS (accès aux fichiers en
	    réseau) et le service de courrier électronique, ou
	    encore l'accès de votre entreprise à l'Internet
	    grâce aux services WWW, FTP, et aux fonctionnalités de
	    routage et de coupe-feu (sécurité).</p></li><li class="listitem"><a id="idp62579280" class="indexterm"></a><p><span class="emphasis"><em>La protection de la mémoire</em></span>
	    garantit que les applications (ou les utilisateurs) ne
	    peuvent interférer entre eux.  Une application qui plante
	    n'affectera en rien les autres.</p></li><li class="listitem"><p>FreeBSD est un système d'exploitation
	    <span class="emphasis"><em>32-bits</em></span> (<span class="emphasis"><em>64-bits</em></span> sur
	     l'architecture Alpha, <span class="trademark">Itanium</span>®, AMD64, et <span class="trademark">UltraSPARC</span>®) et a été conçu comme
	     tel dès le début.</p></li><li class="listitem"><a id="idp62589392" class="indexterm"></a><p>Le <span class="emphasis"><em>Système X Window</em></span> (X11R7),
	    standard industriel, fournit une interface graphique à
	    l'utilisateur (Graphical User Interface - GUI), moyennant
	    l'achat d'une carte VGA ordinaire et d'un moniteur, et est
	    livré avec l'intégralité de son code
	    source.</p></li><li class="listitem"><a id="idp62594256" class="indexterm"></a><a id="idp62605392" class="indexterm"></a><a id="idp62607824" class="indexterm"></a><a id="idp62610896" class="indexterm"></a><a id="idp62613456" class="indexterm"></a><p><span class="emphasis"><em>Compatibilité binaire</em></span> avec de
	    nombreux programmes compilés pour Linux, SCO, SVR4, BSDI
	    et NetBSD.</p></li><li class="listitem"><p>Des milliers d'applications <span class="emphasis"><em>prêtes à
	    l'emploi</em></span> sont disponibles grâce au catalogue des
	    logiciels portés (ports) et au catalogue des logiciels
	    <span class="emphasis"><em>pré-compilés</em></span> (packages).
	    Pourquoi chercher sur l'Internet alors que tout est
	    là?.</p></li><li class="listitem"><p>Des milliers d'applications <span class="emphasis"><em>faciles à
	    porter</em></span> sont disponibles sur l'Internet.  FreeBSD
	    est compatible au niveau du code source avec les systèmes
	    <span class="trademark">UNIX</span>® commerciaux les plus répandus et donc la plupart des
	    applications exigent peu, sinon aucune modification, pour
	    les compiler.</p></li><li class="listitem"><a id="idp62626896" class="indexterm"></a><p><span class="emphasis"><em>Mémoire virtuelle</em></span> à la
	    demande et &#8220;cache unifié pour les disques et la
	    mémoire virtuelle&#8221; cela permet de répondre aux
	    besoins des applications gourmandes en mémoire tout en
	    garantissant le temps de réponse aux autres
	    utilisateurs.</p></li><li class="listitem"><a id="idp62630992" class="indexterm"></a><p>Support du <span class="emphasis"><em>traitement symétrique
	    multiprocesseurs</em></span> (SMP).</p></li><li class="listitem"><a id="idp62646992" class="indexterm"></a><a id="idp62650704" class="indexterm"></a><a id="idp62653904" class="indexterm"></a><p>Des outils complets de développement
	    <span class="emphasis"><em>C</em></span>, <span class="emphasis"><em>C++</em></span>, et
	    <span class="emphasis"><em>Fortran</em></span>.  De
	    nombreux autres langages pour la recherche de pointe et le
	    développement sont aussi disponibles dans les catalogues des
	    logiciels portés et pré-compilés.</p></li><li class="listitem"><a id="idp62661840" class="indexterm"></a><p>La disponibilité <span class="emphasis"><em>Code source</em></span> de
	    l'intégralité du système vous donne un
	    contrôle total sur votre environnement.  Pourquoi être
	    prisonnier d'une solution propriétaire et dépendant de
	    votre fournisseur alors que vous pouvez avoir un véritable
	    système ouvert?</p></li><li class="listitem"><p>Une <span class="emphasis"><em>documentation en ligne</em></span> très
	    complète.</p></li><li class="listitem"><p><span class="emphasis"><em>Et beaucoup d'autres choses encore!</em></span></p></li></ul></div><a id="idp62677712" class="indexterm"></a><a id="idp62679248" class="indexterm"></a><a id="idp62681040" class="indexterm"></a><p>FreeBSD est basé sur la version 4.4BSD-Lite2 du
	  &#8220;Computer Systems Research Group&#8221; (CSRG) de
	  l'Université de Californie à Berkeley et continue
	  la tradition de développement renommée des
	  systèmes BSD.  En plus de l'excellent travail fourni par le
	  CSRG, le Projet FreeBSD a investi des milliers d'heures de travail
	  pour optimiser le système pour arriver aux meilleures
	  performances et au maximum de fiabilité sous la charge d'un
	  environnement de production.  Alors que la plupart des géants
	  dans le domaine des systèmes d'exploitation pour PC
	  s'acharnent encore à obtenir de telles possibilités,
          performances et fiabilité, FreeBSD peut les offrir
	  <span class="emphasis"><em>dès maintenant</em></span>!</p><p>La seule limite aux domaines d'application auxquels FreeBSD peut
          satisfaire est votre propre imagination.  Du développement
          de logiciels à la production robotisée, de la gestion
	  de stocks à la correction d'azimut pour les antennes
	  satellites; si un <span class="trademark">UNIX</span>® commercial peut le faire, il y a de
	  très fortes chances que FreeBSD le puisse aussi! FreeBSD
	  bénéficie aussi de centaines d'applications de haute
	  qualité développées par les
          centres de recherche et les universités du monde entier,
	  souvent disponibles gratuitement ou presque.  Il existe aussi des
	  applications commerciales et leur nombre croît de jour en
	  jour.</p><p>Comme le code source de FreeBSD lui-même est globalement
          disponible, le système peut aussi être adapté sur
	  mesure à un point pratiquement jamais atteint pour des
	  applications ou des projets particuliers, d'une façon qui
	  serait habituellement impossible avec les systèmes
	  d'exploitation commerciaux de la plupart des principaux fournisseurs.
	  Voici juste quelques exemples d'applications pour lesquelles FreeBSD
	  est utilisé:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Services Internet:</em></span> les
	    fonctionnalités réseau TCP/IP robustes qu'inclut
	    FreeBSD en font la plate-forme idéale pour un
	    éventail de services Internet, tels que:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a id="idp62699344" class="indexterm"></a><p>Serveurs FTP</p></li><li class="listitem"><a id="idp62702672" class="indexterm"></a><p>Serveurs World Wide Web (standard ou sécurisé
	        [SSL])</p></li><li class="listitem"><p>Routage IPv4 et IPv6</p></li><li class="listitem"><a id="idp62707920" class="indexterm"></a><a id="idp62709328" class="indexterm"></a><a id="idp62710480" class="indexterm"></a><p>Coupe-feux et passerelles de traduction d'adresses
	        (&#8220;IP masquerading&#8221;)</p></li><li class="listitem"><a id="idp62714704" class="indexterm"></a><p>Serveurs de courrier électronique</p></li><li class="listitem"><a id="idp62729168" class="indexterm"></a><p>Serveurs de News USENET (forums de discussion) ou
	        Bulletin Board Systems (BBS)</p></li><li class="listitem"><p>Et plus...</p></li></ul></div><p>Avec FreeBSD, vous pouvez facilement commencer petit
	    avec un PC 386 à bas prix et évoluer jusqu'à un
	    quadri-processeurs Xeon avec stockage RAID au fur et à mesure
	    que votre entreprise s'agrandit.</p></li><li class="listitem"><p><span class="emphasis"><em>Education:</em></span> Etes-vous étudiant en
            informatique ou dans un domaine d'ingénierie
	    apparenté?  Il n'y a pas de meilleur moyen pour
	    étudier les systèmes d'exploitation, l'architecture
	    des ordinateurs et les réseaux que l'expérience
	    directe et de &#8220;derrière la coulisse&#8221; que FreeBSD
	    peut vous apporter.  Il y a aussi un grand nombre d'outils
	    mathématiques, graphiques et de Conception Assistée
            par Ordinateur qui en font un outil très utile pour ceux qui
            s'intéressent aux ordinateurs essentiellement pour faire un
	    <span class="emphasis"><em>autre</em></span> travail!</p></li><li class="listitem"><p><span class="emphasis"><em>Recherche:</em></span> Avec le code source de la
            totalité du système disponible, FreeBSD est un
	    excellent outil de recherche sur les systèmes d'exploitation
	    tout autant que pour d'autres branches de l'informatique.  Le fait
	    que FreeBSD soit librement disponible rend aussi possible
	    l'échange d'idées et le développement
	    partagé entre groupes éloignés sans avoir
	    à se préoccuper de problèmes de licence
	    particulières ou de restrictions à ce qui pourrait
	    être discuté sur des forums ouverts.</p></li><li class="listitem"><a id="idp62743632" class="indexterm"></a><a id="idp62745040" class="indexterm"></a><p><span class="emphasis"><em>Réseau:</em></span> Il vous faut un nouveau
	    routeur? Un serveur de domaine (DNS)?  Un coupe-feu pour tenir les
	    gens à l'écart de votre réseau interne?
	    FreeBSD peut facilement faire de votre vieux 386 ou 486
	    inutilisé qui traîne dans un coin un routeur
	    évolué avec des fonctionnalités
	    sophistiquées de filtrage de paquets.</p></li><li class="listitem"><a id="idp62748368" class="indexterm"></a><a id="idp62750288" class="indexterm"></a><p><span class="emphasis"><em>Station de travail X Window:</em></span> FreeBSD est
	    un excellent choix pour faire un terminal X peu coûteux,i
	    en utilisant le serveur X11 librement disponible.
	    Au contraire d'un
	    terminal X, FreeBSD permet d'exécuter localement, si
	    désiré, un grand nombre d'applications,
	    déchargeant ainsi le serveur central.  FreeBSD peut
	    même démarrer &#8220;sans disque&#8221;, ce qui permet
	    de concevoir des postes de travail individuels moins chers et plus
	    faciles à administrer.</p></li><li class="listitem"><a id="idp62756048" class="indexterm"></a><p><span class="emphasis"><em>Développement de logiciel:</em></span> Le
	    système FreeBSD de base inclut un environnement de
	    développement complet dont les compilateur et
	    débogueur GNU C/C++ réputés.</p></li></ul></div><p>FreeBSD est disponible sous forme de code source ou binaire sur
	CDROM, DVD ou par ftp anonyme, Voyez <a class="xref" href="#mirrors" title="Annexe A. Se procurer FreeBSD">Annexe A, <em>Se procurer FreeBSD</em></a> pour plus de
	détails.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp62769488"></a>1.2.2. Qui utilise FreeBSD?</h3></div></div></div><a id="idp62771024" class="indexterm"></a><p>FreeBSD est utilisé par certains des plus importants sites
      	sur l'Internet, parmi lesquels:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp62780240" class="indexterm"></a><p><a class="link" href="http://www.yahoo.com/" target="_top">Yahoo!</a></p></li><li class="listitem"><a id="idp62784208" class="indexterm"></a><p><a class="link" href="http://www.apache.org/" target="_top">Apache</a></p></li><li class="listitem"><a id="idp62788176" class="indexterm"></a><p><a class="link" href="http://www.bluemountain.com/" target="_top">Blue Mountain
	    Arts</a></p></li><li class="listitem"><a id="idp62792016" class="indexterm"></a><p><a class="link" href="http://www.pair.com/" target="_top">Pair
	    Networks</a></p></li><li class="listitem"><a id="idp62797520" class="indexterm"></a><p><a class="link" href="http://www.sony.co.jp/" target="_top">Sony
	    Japan</a></p></li><li class="listitem"><a id="idp62803664" class="indexterm"></a><p><a class="link" href="http://www.netcraft.com/" target="_top">Netcraft</a>
	    </p></li><li class="listitem"><a id="idp62816208" class="indexterm"></a><p><a class="link" href="http://www.wni.com/" target="_top">Weathernews</a>
	</p></li><li class="listitem"><a id="idp62819920" class="indexterm"></a><p><a class="link" href="http://www.supervalu.com/" target="_top">Supervalu</a></p></li><li class="listitem"><a id="idp62824144" class="indexterm"></a><p><a class="link" href="http://www.telehouse.com/" target="_top">TELEHOUSE
	    America</a></p></li><li class="listitem"><a id="idp62827472" class="indexterm"></a><p><a class="link" href="http://www.sophos.com/" target="_top">Sophos
	    Anti-Virus</a></p></li><li class="listitem"><a id="idp62830288" class="indexterm"></a><p><a class="link" href="http://www.jmawired.com/" target="_top">JMA Wired</a></p></li></ul></div><p>et de nombreux autres.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="history"></a>1.3. A propos du Projet FreeBSD</h2></div></div></div><p>La section suivante fournit des informations générales
      sur le projet, dont un court historique, les objectifs du projet, et le
      mode de développement du projet.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="intro-history"></a>1.3.1. Un court historique de FreeBSD</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jordan</span> <span class="surname">Hubbard</span></span>. </span></div></div></div><a id="idp62845136" class="indexterm"></a><a id="idp62854608" class="indexterm"></a><a id="idp62855376" class="indexterm"></a><a id="idp62856912" class="indexterm"></a><a id="idp62858448" class="indexterm"></a><p>Le projet FreeBSD a vu le jour au début de 1993, en partie
	comme extension du &#8220;Kit de mise à jour non officiel de
	386BSD&#8221; des trois derniers coordinateurs du kit de mise à
	jour : Nate Williams, Rod Grimes et moi-même.</p><a id="idp62866256" class="indexterm"></a><p>Notre objectif de départ était de fournir une
	distribution intermédiaire de 386BSD pour corriger un certain
	nombre de problèmes que le mécanisme du kit de mise
	à jour ne permettait pas de résoudre.  Certains d'entre
	vous se rappellent peut-être que l'intitulé de travail
	d'origine du projet était &#8220;386 BSD 0.5&#8221; ou
	&#8220;386BSD Interim&#8221; en référence à ce
	problème.</p><a id="idp62868432" class="indexterm"></a><p>386BSD était le système d'exploitation de Bill
	Jolitz, qui souffrait assez sévèrement à ce
	moment-là d'avoir été négligé
	pendant presque un an.  Comme le kit de mise à jour enflait de plus en
	plus inconfortablement au fil des jours, nous avons
	décidé à l'unanimité qu'il fallait faire
	quelque chose et aider Bill en fournissant cette distribution
	provisoire de &#8220;remise à plat&#8221;.  Ces projets se sont
	brutalement interrompus lorsque Bill a décidé de retirer
	son aval au projet sans dire clairement ce qui serait fait à la
	place.</p><a id="idp62870736" class="indexterm"></a><a id="idp62871888" class="indexterm"></a><p>Il ne nous a pas fallu longtemps pour décider que l'objectif
	restait valable, même sans l'adhésion de Bill, et nous
	avons donc adopté le nom &#8220;FreeBSD&#8221;, une proposition
	de David Greenman.  Nos objectifs de départ ont
	été définis après avoir consulté
	les utilisateurs du moment du système et, dès qu'il est
	devenu clair que le projet était parti pour devenir un jour
	éventuellement réalité, nous avons contacté
	Walnut Creek CDROM dans l'optique d'améliorer la distribution de
	FreeBSD pour le grand nombre de ceux qui n'avaient pas la chance de
	pouvoir accéder facilement à l'Internet.  Non seulement
	Walnut Creek CDROM a adopté l'idée de distribuer FreeBSD
	sur CDROM, mais a été jusqu'à fournir au projet
	une machine pour travailler et une connexion rapide à l'Internet.
	Sans le degré pratiquement sans précédent de
	confiance de Walnut Creek CDROM en ce qui n'était alors qu'un
	projet totalement inconnu, il y a peu de chance que FreeBSD ait
	été aussi loin, aussi vite, que là où il en
	est aujourd'hui.</p><a id="idp62875600" class="indexterm"></a><a id="idp62877648" class="indexterm"></a><a id="idp62879696" class="indexterm"></a><a id="idp62881744" class="indexterm"></a><a id="idp62891728" class="indexterm"></a><p>La première version sur CDROM (et sur l'ensemble du Net) fut
	FreeBSD 1.0, parue en Décembre 1993.  Elle reposait sur la bande
	4.3BSD-Lite (&#8220;Net/2&#8221;) de l'Université de Californie
	à Berkeley, avec de nombreux composants venant aussi de 386BSD et
	de la &#8220;Free Software Foundation&#8221;.  Ce fut un succès
	honnête pour une version initiale, qui fut suivi par le franc
	succès de la version 1.1 de FreeBSD, publiée en Mai
	1994.</p><a id="idp62894032" class="indexterm"></a><a id="idp62895312" class="indexterm"></a><a id="idp62896592" class="indexterm"></a><a id="idp62898000" class="indexterm"></a><p>A peu près à cette époque, des nuages
	menaçants et inattendus apparurent lorsque commença la
	bataille juridique entre Novell et l'U.C. Berkeley autour du statut
	légal de la bande Net/2 de Berkeley.  Dans les termes de
	l'accord, l'U.C. Berkeley concédait qu'une grande partie de Net/2
	était du code &#8220;protégé&#8221; et
	propriété de Novell, qui l'avait à son tour
	racheté à AT&amp;T quelque temps auparavant.  Berkeley
	obtint en retour la &#8220;bénédiction&#8221; de Novell
	que 4.4BSD-Lite soit, lorsqu'il vit finalement le jour,
	déclaré non protégé et que tous les
	utilisateurs de Net/2 soit fortement incités à migrer.
	Cela incluait FreeBSD, et l'on donna au projet jusqu'à Juillet
	1994 pour mettre un  terme à son propre produit basé sur
	Net/2.  Selon les termes de cet accord, une dernière livraison
	était autorisée avant le délai final; ce fut
	FreeBSD 1.1.5.1.</p><p>FreeBSD s'attela alors à la tâche difficile de
	littéralement se réinventer à partir de fragments
	totalement nouveaux et assez incomplets de 4.4BSD-Lite.  Les versions
	&#8220;Lite&#8221; étaient légères
	(&#8220;light&#8221;) en partie parce que le CSRG avait retiré
	de gros morceaux du code nécessaires pour que l'on puisse
	effectivement en faire un système qui démarre (pour
	différentes raisons légales) et parce que le portage pour
	Intel de la version 4.4 était très partiel.  Il fallu au
	projet jusqu'à Novembre 1994 pour terminer cette étape de
	transition et que FreeBSD 2.0 paraisse sur l'Internet et sur CDROM
	(fin Décembre).  Bien qu'elle fut encore assez rugueuse aux
	angles, cette livraison obtint un succès significatif et fut
	suivie par la version 2.0.5 de FreeBSD, plus fiable et facile à
	installer, en Juin 1995.</p><p>Nous avons publié FreeBSD 2.1.5 en Août 1996, et il
	s'avéra suffisamment populaire chez les fournisseurs
	d'accès et les utilisateurs professionnels pour qu'une nouvelle
	version sur la branche 2.1-STABLE soit justifiée.  Ce fut la
	version FreeBSD 2.1.7.1, parue en Février 1997 et qui marque la
	fin de 2.1-STABLE comme branche principale de développement.
	Dès lors, il n'y aurait plus que des améliorations quant
	à la sécurité et autres corrections de bogues
	critiques sur cette branche, (RELENG_2_1_0), passée en phase de
	maintenance.</p><p>La branche FreeBSD 2.2 fut créée à partir de
	la branche principale de développement (&#8220;-CURRENT&#8221;)
	en Novembre 1996 en tant que branche RELENG_2_2, et la première
	version complète (2.2.1) parut en Avril 1997.  Il y eut d'autres
	versions sur la branche 2.2 à l'été et à
	l'automne 97, la dernière (2.2.8) parut en Novembre 1998.  La
	première version officielle 3.0 sortira en Octobre 1998 et
	annoncera le début de la fin pour la branche 2.2.</p><p>Il y eut la création de nouvelles branches le 20 Janvier
	1999, donnant une branche 4.0-CURRENT et une branche 3.X-STABLE.  De
	cette dernière il y eut la version 3.1 livrée le 15
	Février 1999, la version 3.2 livrée le 15 Mai
	1999, la 3.3 le 16 Septembre 1999, la 3.4 le 20 Décembre 1999 et
	la 3.5 le 24 Juin 2000, qui fut suivit quelques jours plus tard
	par une mise à jour mineure 3.5.1 pour rajouter quelques
	correctifs de sécurité de dernière minute sur
	Kerberos.  Cela sera la dernière version de la la branche 3.X
	à paraître.</p><p>Le 13 Mars 2000 a vu l'apparition d'une nouvelle branche:
	la branche 4.X-STABLE.
	Il y a eu plusieurs versions
	jusqu'ici: la 4.0-RELEASE est sortie en Mars 2000, et la
	dernière version, la 4.11-RELEASE est sortie
	en Janvier 2005.</p><p>La tant attendue 5.0-RELEASE a été
	annoncée le 19 Janvier 2003.  Etant le point
	culminant de près de trois ans de travail, cette
	version a engagé FreeBSD sur la voie d'un support
	avancé des systèmes multiprocesseurs et des
	&#8220;threads&#8221;, et a introduit le support des
	plateformes <span class="trademark">UltraSPARC</span>® et <code class="literal">ia64</code>.  Cette version fut suivie
	de la 5.1 en Juin 2003.  La dernier version 5.X issue de la
	branche -CURRENT fut la 5.2.1-RELEASE présentée
	en Février 2004.</p><p>La branche RELENG_5 créée en Août
	2004, suivie par la 5.3-RELEASE, marque le début de
	la branche 5-STABLE.  La version la plus récente, la
	9.3-RELEASE, est sortie en Septembre 2013.  Il
	n'est pas prévu de publier d'autres versions de la
	branche RELENG_5.</p><p>La branche RELENG_6 a été
	créée en Juillet 2005.  La version 6.0-RELEASE,
	la première version issue de la branche 6.X a
	été rendue publique en Novembre 2005.  La
	version la plus récente, la 10.1-RELEASE, est
	sortie en Janvier 2014.  De nouvelles versions sont
	prévues pour la branche RELENG_6.</p><p>Pour le moment, les projets de développement à long terme continuent
	à se faire dans la branche (tronc) 7.X-CURRENT, et des
	&#8220;instantanées&#8221; de la 7.X sur CDROM (et, bien
	sûr, sur le net) sont continuellement mises à disposition
	sur le <a class="link" href="ftp://current.FreeBSD.org/pub/FreeBSD/snapshots/" target="_top">serveur
	d'instantané</a> pendant l'avancement des travaux.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="goals"></a>1.3.2. Les objectifs du projet FreeBSD</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jordan</span> <span class="surname">Hubbard</span></span>. </span></div></div></div><a id="idp62917712" class="indexterm"></a><p>L'objectif du projet FreeBSD est de fournir du logiciel qui puisse
	être utilisé à n'importe quelle fin et sans aucune
	restriction.  Nombre d'entre nous sont impliqués de façon
	significative dans le code (et dans le projet) et ne refuseraient
	certainement pas une petite compensation financière de temps
	à autre, mais ce n'est certainement pas dans nos intentions
	d'insister là dessus.  Nous croyons que notre première et
	principale &#8220;mission&#8221; est de fournir du code à tout le
	monde, pour n'importe quel projet, de façon à ce qu'il
	soit utilisé le plus possible et avec le maximum d'avantages.
	C'est, nous le pensons, l'un des objectifs les plus fondamentaux du
	Logiciel Libre et l'un de ceux que nous soutenons avec
	enthousiasme.</p><a id="idp62921168" class="indexterm"></a><a id="idp62931664" class="indexterm"></a><a id="idp62933712" class="indexterm"></a><p>Le code de l'arborescence des sources, qui est régi par la
	Licence Publique GNU (&#8220;GNU Public License&#8221; - GPL)
	ou la Licence Publique GNU pour les Bibliothèques (&#8220;GNU
	Library Public License&#8221; - GLPL) impose
	légèrement plus de contraintes, bien que plutôt
	liées à une disponibilité plus grande qu'au
	contraire, comme c'est généralement le cas. En raison des
	complications supplémentaires qui peuvent résulter de
	l'utilisation commerciale de logiciels GPL, nous essayons, cependant de
	remplacer ces derniers par des logiciels soumis à la licence BSD
	qui est plus souple, chaque fois que c'est possible.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="development"></a>1.3.3. Le mode de développement de FreeBSD</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Satoshi</span> <span class="surname">Asami</span></span>. </span></div></div></div><a id="idp62942672" class="indexterm"></a><p>Le développement de FreeBSD est un processus très
	ouvert et très souple, c'est littéralement le
	résultat de contributions de centaines de personnes dans le monde
	entier, ce que reflète notre <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributors/article.html" target="_top">liste des
	participants</a>.  L'infrastructure de développement de FreeBSD permet à ces centaines de développeurs de collaborer via l'Internet.  Nous sommes toujours à l'affût de
	nouveaux développeurs et de nouvelles idées, et ceux que
	s'impliquer de plus près intéresse n'ont besoin que de
	contacter la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">liste de diffusion pour les discussions techniques sur FreeBSD</a>.  La <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">liste de diffusion pour les annonces relatives à FreeBSD</a> est aussi disponible pour
	ceux qui veulent faire connaître aux autres utilisateurs de
	FreeBSD les principaux domaines de développement en cours.</p><p>Quelques points utiles à connaître à propos du
	projet FreeBSD et de son processus de développement, que vous
	travailliez indépendamment ou en collaboration
	étroite:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Les archives CVS<a id="development-cvs-repository"></a></span></dt><dd><a id="idp62971344" class="indexterm"></a><a id="idp62974416" class="indexterm"></a><p>L'arborescence centrale des sources de FreeBSD est
	      gérée sous <a class="link" href="http://ximbiot.com/cvs/wiki/" target="_top">CVS</a>
	      (Concurrent Version System), un système librement
	      disponible de gestion de version des sources qui est livré
	      avec FreeBSD.  Les
	      <a class="link" href="http://www.freebsd.org/cgi/cvsweb.cgi" target="_top">archives
	      CVS</a> principales sont sur une machine à Santa Clara
	      CA, USA, d'où elles sont répliquées sur de
	      nombreuses machines miroir à travers le monde.
	      L'arborescence CVS qui contient les branches <a class="link" href="#current" title="24.4.1. Se synchroniser avec la version -CURRENT de FreeBSD">-CURRENT</a> et <a class="link" href="#stable" title="24.4.2. Se synchroniser avec la version -STABLE de FreeBSD">-STABLE</a> peut
	      facilement être dupliquée sur votre propre machine.
	      Reportez-vous à la section
	      <a class="link" href="#synching" title="24.5. Synchroniser vos sources">Synchroniser votre arborescence des
	      sources</a> pour plus d'informations sur la façon de
              procéder.</p></dd><dt><span class="term">La liste des personnes autorisées, les
	    &#8220;committers&#8221;<a id="development-committers"></a></span></dt><dd><a id="idp62995664" class="indexterm"></a><p>Les personnes autorisées
	      (<em class="firstterm">committers</em>) sont celles qui ont les droits
	      en <span class="emphasis"><em>écriture</em></span> sur l'arborescence CVS, et
	      sont autorisées à faire des modifications dans
	      les sources de FreeBSD (le terme &#8220;committer&#8221; vient de
	      la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> <code class="command">commit</code>, que l'on
	      utilise pour reporter des modifications dans les archives CVS).
	      La meilleure façon de proposer des modifications pour
	      qu'elles soient validées par les &#8220;committers&#8221;
	      est d'utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>.  S'il semble
	      y avoir un problème dans ce système, vous pouvez
	      aussi les joindre en envoyant un courrier électronique à
	      liste de diffusion pour les <span class="foreignphrase"><em class="foreignphrase">committers</em></span> de FreeBSD.</p></dd><dt><span class="term">L'équipe de base de FreeBSD<a id="development-core"></a></span></dt><dd><a id="idp63008336" class="indexterm"></a><p><em class="firstterm">L'équipe de base de FreeBSD</em>
	      serait l'équivalent du comité de direction si le
	      Projet FreeBSD était une entreprise.  La
	      responsabilité principale de l'équipe de base est de
	      s'assurer que le projet, dans son ensemble, fonctionne
	      correctement et va dans la bonne direction.  Proposer à des
	      développeurs impliqués et responsables de rejoindre
	      notre groupe de personnes autorisées est une des fonctions
	      de l'équipe de base, ainsi que le recrutement de nouveaux
	      membres de l'équipe de base quand d'autres s'en vont.
	      L'actuelle équipe de base a été élu
	      à partir d'un ensemble de &#8220;committers&#8221;
	      candidats en Juillet 2006.  Des élections ont lieu tous les
	      2 ans.</p><p>Certains membres de l'équipe de base ont aussi leur
	      propre domaine de responsabilité, ce qui signifie qu'il
	      leur est dévolu de veiller à ce qu'une partie
	      significative du système satisfasse aux
	      fonctionnalités annoncées.  Pour une liste
	      complète des développeurs FreeBSD et de leurs
	      domaines de responsabilité, veuillez consulter la <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributors/article.html" target="_top">liste des
	      participants au projet</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La plupart des membres de l'équipe de base sont
                volontaires en ce qui concerne le développement de
		FreeBSD et ne retirent aucun profit financier du projet, donc
                &#8220;implication&#8221; ne doit pas être compris
                &#8220;support garanti&#8221;.  La comparaison
		précédente avec un comité directeur n'est
		pas tout à fait exacte, et il serait plus juste de dire
		que ce sont des gens qui ont sacrifié leur vie à
		FreeBSD contre toute raison!</p></div></dd><dt><span class="term">Contributions extérieures</span></dt><dd><a id="idp63026768" class="indexterm"></a><p>Enfin, mais certainement pas des moindres, le groupe le plus
	      important de développeurs est constitué par les
              utilisateurs eux-mêmes qui nous fournissent de façon
	      quasi régulière leur retour d'expérience et
	      leurs corrections de bogues.  Le principal moyen d'entrer en
	      contact avec le développement plus
	      décentralisé de FreeBSD est de s'inscrire sur la
	      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">liste de diffusion pour les discussions techniques sur FreeBSD</a> où ces questions sont abordées.
	      Voyez <a class="xref" href="#eresources" title="Annexe C. Ressources sur Internet">Annexe C, <em>Ressources sur Internet</em></a> pour plus d'informations
	      concernant les diverses listes de discussion
	      FreeBSD.</p><p>La <em class="citetitle"><a class="link" href="../../../../doc/en_US.ISO8859-1/articles/contributors/article.html" target="_top">liste</a></em>
	     de ceux qui ont contribué au projet est longue et en
	     augmentation, pourquoi donc ne pas vous y joindre et contribuer
	     à quelque chose en retour dès aujourd'hui?</p><p>Fournir du code n'est pas la seule manière de contribuer
             au projet; pour avoir une liste plus complète de ce qu'il y
             a à faire, voyez s'il vous plaît le <a class="link" href="../../../../index.html" target="_top">site du projet
	     FreeBSD</a>.</p></dd></dl></div><p>En résumé, notre modèle de développement
	est organisé comme un ensemble relâché de cercles
	concentriques.  Ce modèle centralisé est en place pour la
	commodité des <span class="emphasis"><em>utilisateurs</em></span> de FreeBSD, qui
	disposent ainsi d'un moyen facile de suivre l'évolution d'une
	base de code centrale, et non pour tenir à l'écart
	d'éventuels participants!  Nous souhaitons fournir un
	système d'exploitation stable avec un nombre conséquent de
	<a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">programmes d'application</a> cohérents
	que les utilisateurs puissent facilement installer et employer &#8212; c'est
	un modèle qui fonctionne très bien pour cela.</p><p>Tout ce que nous attendons de ceux qui se joindraient à nous
	pour développer FreeBSD est un peu de la même implication
	que les développeurs actuels ont vis-à-vis de sa
	réussite continue!</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="relnotes"></a>1.3.4. A propos de cette version</h3></div></div></div><a id="idp63047760" class="indexterm"></a><a id="idp63049808" class="indexterm"></a><a id="idp63064272" class="indexterm"></a><a id="idp63065936" class="indexterm"></a><a id="idp63067344" class="indexterm"></a><a id="idp63068368" class="indexterm"></a><p>FreeBSD est une version librement disponible et incluant tout le
	code source basé sur 4.4BSD-Lite2 pour les ordinateurs à
	architectures Intel <span class="trademark">i386</span>&#8482;, <span class="trademark">i486</span>&#8482;, <span class="trademark">Pentium</span>®, <span class="trademark">Pentium</span>® Pro, <span class="trademark">Celeron</span>®, <span class="trademark">Pentium</span>® II,
	<span class="trademark">Pentium</span>® III, <span class="trademark">Pentium</span>® 4 (ou compatible), <span class="trademark">Xeon</span>&#8482;, DEC <span class="trademark">Alpha</span>&#8482; et systèmes basés sur <span class="trademark">UltraSPARC</span>® de Sun.  Il est basé
	essentiellement sur du logiciel du groupe CSRG de l'Université
	de Californie à Berkeley, avec des additions venant de NetBSD,
	OpenBSD, 386BSD, et de la &#8220;Free Software Foundation&#8221;.</p><p>Depuis la publication de FreeBSD 2.0 fin 1994, les
	performances, fonctionnalités et la stabilité de FreeBSD
	ont été améliorées de façon
	spectaculaire.  La plus grosse modification est un gestionnaire de
	mémoire virtuelle totalement revu qui comprend un cache commun
	au disque et à la mémoire virtuelle, qui n'améliore
	pas seulement les performances, mais diminue aussi l'occupation de la
	mémoire, de telle sorte qu'une configuration avec 5 MO devienne un
	minimum acceptable.  D'autres ajouts concernent le support
	intégral des clients et serveurs NIS, le support des transactions
	TCP, les connexions PPP à la demande, le support
	intégré DHCP, un sous-système SCSI
	amélioré, support ISDN, support pour l'ATM, FDDI, les
	cartes &#8220;Fast et Gigabit Ethernet&#8221; (1000 Mbit), un meilleur
	support des derniers contrôleurs Adaptec et des milliers de
	corrections de bogues.</p><p>En plus du système lui-même, FreeBSD offre un nouveau
	catalogue de logiciels portés (&#8220;ports&#8221;) qui inclut
	des milliers de programmes habituellement demandés.  A l'heure
	où sont écrites ces lignes il y avait plus de
	24,000 logiciels portés!  La liste va des serveurs HTTP
	(WWW) aux jeux, langages, éditeurs et presque tout ce qui existe
	entre.  Le catalogue complet des logiciels demande près de 440 Mo
	d'espace disque, les portages se présentant sous forme de
	&#8220;delta&#8221; avec les sources d'origine.  Cela rend leur mise
	à jour bien plus facile, et diminue de façon sensible
	l'espace nécessaire par rapport à l'ancien catalogue 1.0.
	Pour compiler un logiciel porté, il vous suffit d'aller dans le
	répertoire du programme que vous désirez
	installer, de taper <code class="command">make install</code>, et de laisser le
	système faire le reste.  La distribution originale
	complète de chaque logiciel est chargée dynamiquement
	depuis le CDROM ou un site FTP proche, il vous suffit de disposer de
	suffisamment d'espace disque pour compiler le logiciel que vous voulez.
	Presque tous les logiciels sont aussi fournis sous forme
	pré-compilée (&#8220;package&#8221;&#8212;paquetage) qui peut être
	installé avec une seule commande (<code class="command">pkg_add</code>), si
	vous ne voulez pas les compiler à partir des sources.  Plus
	d'information sur les paquetages et les logiciels portés
	peut être trouvée dans le <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>.</p><p>Il y a un certain nombre d'autres documents qui vous serons
	peut-être très utiles à l'installation et à
	l'utilisation de FreeBSD, que vous pouvez maintenant trouver dans le
	répertoire <code class="filename">/usr/share/doc</code> de n'importe
	quelle machine sous une version récente de FreeBSD.  Vous pouvez
	consulter les manuels localement disponibles avec n'importe quel
	navigateur HTML aux URLs suivantes:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Le Manuel FreeBSD</span></dt><dd><p><a class="link" href="file://localhost/usr/share/doc/handbook/index.html" target="_top"><code class="filename">/usr/share/doc/handbook/index.html</code></a></p></dd><dt><span class="term">La FAQ de FreeBSD</span></dt><dd><p><a class="link" href="file://localhost/usr/share/doc/faq/index.html" target="_top"><code class="filename">/usr/share/doc/faq/index.html</code></a></p></dd></dl></div><p>Vous pouvez aussi consulter les exemplaires originaux (et les plus
	souvent mis à jour) sur <a class="link" href="http://www.FreeBSD.org/" target="_top">http://www.FreeBSD.org</a>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install"></a>Chapitre 2. Installer FreeBSD</h2></div><div><span class="authorgroup">Restructuré, réorganisé, et en partie
	  réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Le guide de sysinstall, les copies d'écrans, et la
	  plupart du texte sont de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Randy</span> <span class="surname">Pratt</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#install-synopsis">2.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#install-hardware">2.2. Matériel nécessaire</a></span></dt><dt><span class="sect1"><a href="#install-pre">2.3. Tâches de pré-installation</a></span></dt><dt><span class="sect1"><a href="#install-start">2.4. Débuter l'installation</a></span></dt><dt><span class="sect1"><a href="#using-sysinstall">2.5. Présentation de sysinstall</a></span></dt><dt><span class="sect1"><a href="#install-steps">2.6. Allouer l'espace disque</a></span></dt><dt><span class="sect1"><a href="#install-choosing">2.7. Choisir ce que l'on va installer</a></span></dt><dt><span class="sect1"><a href="#install-media">2.8. Choisir votre support d'installation</a></span></dt><dt><span class="sect1"><a href="#install-final-warning">2.9. Procéder à l'installation</a></span></dt><dt><span class="sect1"><a href="#install-post">2.10. Post-installation</a></span></dt><dt><span class="sect1"><a href="#install-trouble">2.11. Dépannage</a></span></dt><dt><span class="sect1"><a href="#install-advanced">2.12. Guide avancé d'installation</a></span></dt><dt><span class="sect1"><a href="#install-diff-media">2.13. Préparer votre propre support d'installation</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-synopsis"></a>2.1. Synopsis</h2></div></div></div><a id="idp63131216" class="indexterm"></a><p>FreeBSD est fourni avec un programme d'installation en mode texte,
      facile d'emploi, appelé <span class="application">sysinstall</span>.
      C'est le programme d'installation par défaut de FreeBSD, bien que
      les vendeurs soient libres de fournir leur propre suite
      d'installation s'ils le désirent.  Ce chapitre décrit
      comment
      utiliser <span class="application">sysinstall</span> pour installer
      FreeBSD.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment créer les disquettes d'installation de
	  FreeBSD.</p></li><li class="listitem"><p>Comment FreeBSD attribue, et subdivise votre disque
	  dur.</p></li><li class="listitem"><p>Comment lancer <span class="application">sysinstall</span>.</p></li><li class="listitem"><p>Les questions que <span class="application">sysinstall</span>
	  vous posera, ce qu'elles signifient, et comment y
	  répondre.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Lire la liste du matériel supporté fournie avec la
	  version de FreeBSD que vous allez installer, et vérifier que
	  votre matériel est supporté.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">En général, ces instructions d'installation sont
	écrites pour l'architecture <span class="trademark">i386</span>&#8482; (&#8220;compatible PC&#8221;).
	Où elles seront applicables, les instructions spécifiques
	à d'autres plateformes (par exemple Alpha) seront
	indiquées.  Bien que ce guide soit maintenu à jour
	autant que possible, vous pourrez constater des
	différences mineures entre le programme d'installation
	et ce qui est montré ici.  Il est aussi
	suggéré d'utiliser ce chapitre comme un guide
	général plutôt comme un manuel
	d'installation à suivre à la ligne
	près.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-hardware"></a>2.2. Matériel nécessaire</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-hardware-minimal"></a>2.2.1. Configuration minimale</h3></div></div></div><p>La configuration minimale pour installer FreeBSD varie avec
	la version de FreeBSD et l'architecture matérielle
	concernée.</p><p>Des informations au sujet de la configuration minimale
	sont disponibles dans les notes d'installation
	présentes sur la page d'<a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Information
	des versions</a> du site de FreeBSD.  Un résumé
	de ces informations est présenté dans les
	sections suivantes.  En fonction de la méthode
	d'installation de FreeBSD que vous avez choisie, vous pourrez
	avoir besoin d'un lecteur de disquette, d'un lecteur de CDROM
	supporté, et dans certains cas d'une carte
	réseau.  Cela sera abordé dans la <a class="xref" href="#install-floppies" title="2.3.7. Préparer les supports de démarrage">Section 2.3.7, « Préparer les supports de démarrage »</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63169232"></a>2.2.1.1. Architectures FreeBSD/i386 et FreeBSD/pc98</h4></div></div></div><p>FreeBSD/i386 et FreeBSD/pc98 nécessitent un processeur
	  486 ou plus performant et au moins 24 Mo de RAM.  Vous
	  aurez également besoin d'au moins 150 Mo
	  d'espace libre sur un disque dur pour l'installation la plus
	  réduite.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans le cas d'anciennes configurations, la plupart du
	    temps, il sera plus important d'avoir plus de RAM et plus
	    d'espace disque que d'avoir un processeur plus
	    rapide.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63172944"></a>2.2.1.2. Architecture FreeBSD/alpha</h4></div></div></div><a id="idp63174480" class="indexterm"></a><p>Pour installer FreeBSD/alpha, une plate-forme
	  supportée sera nécessaire (voir <a class="xref" href="#install-hardware-supported" title="2.2.2. Matériel supporté">Section 2.2.2, « Matériel supporté »</a>) ainsi qu'un disque
	  dédié à FreeBSD.  Il n'est pas, pour le
	  moment, possible de partager un disque avec un autre
	  système d'exploitation.  Ce disque devra être
	  raccordé à un contrôleur SCSI
	  supporté par le firmware SRM ou devra être un
	  disque IDE en supposant que votre machine permet le
	  démarrage à partir de disques IDE.</p><a id="idp63177424" class="indexterm"></a><a id="idp63178832" class="indexterm"></a><a id="idp63180112" class="indexterm"></a><p>Vous aurez besoin du firmware SRM pour votre
	  plate-forme.  Dans certains cas, il est possible de basculer
	  entre AlphaBIOS (ou ARC) et SRM.  Dans d'autres cas, il sera
	  nécessaire de récupérer un nouveau
	  firmware sur le site du constructeur.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le support pour l'architecture Alpha cesse avec
	    FreeBSD 7.0.  Les versions
	    FreeBSD 6.<em class="replaceable"><code>X</code></em> sont les
	    dernières proposant le support de cette
	    architecture.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63185104"></a>2.2.1.3. FreeBSD/amd64</h4></div></div></div><p>Il existe deux classes de processeurs en mesure
	  d'utiliser FreeBSD/amd64.  La première est
	  composée des processeurs AMD64, dont les processeurs
	  <span class="trademark">AMD Athlon</span>&#8482;64, <span class="trademark">AMD Athlon</span>&#8482;64-FX, <span class="trademark">AMD Opteron</span>&#8482; et
	  suivants.</p><p>La seconde classe de processeurs pouvant utiliser
	  FreeBSD/amd64 comprend les processeurs basés sur
	  l'architecture <span class="trademark">Intel</span>® EM64T.  Comme par exemple, les
	  familles de processeur <span class="trademark">Intel</span>® <span class="trademark">Core</span>&#8482; 2 Duo, Quad,
	  et Extreme et la série des processeurs
	  <span class="trademark">Intel</span>® <span class="trademark">Xeon</span>&#8482; 3000, 5000, et 7000.</p><p>Si vous avez une machine basée sur le circuit
	  nVidia nForce3 Pro-150, vous <span class="emphasis"><em>devez</em></span>
	  désactiver l'option IO APIC dans le BIOS de votre
	  machine.  Si vous n'avez pas la possibilité de le
	  faire, vous devrez désactiver à la place
	  l'ACPI.  Il existe un certain nombre de bogues dans le
	  circuit Pro-150 pour lesquels nous n'avons toujours pas
	  trouvé de solution.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63211344"></a>2.2.1.4. Architecture FreeBSD/sparc64</h4></div></div></div><p>Pour installer FreeBSD/sparc64, une plate-forme
	  supportée sera nécessaire (voir <a class="xref" href="#install-hardware-supported" title="2.2.2. Matériel supporté">Section 2.2.2, « Matériel supporté »</a>).</p><p>Vous aurez besoin d'un disque dédié pour
	  FreeBSD/sparc64.  Il n'est pas, pour le moment, possible de
	  partager un disque avec un autre système
	  d'exploitation.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-hardware-supported"></a>2.2.2. Matériel supporté</h3></div></div></div><p>Une liste du matériel supporté est
	disponible avec chaque version de FreeBSD dans la liste de
	compatibilité matérielle.  Ce document peut
	être généralement trouvé sous la
	forme d'un fichier nommé
	<code class="filename">HARDWARE.TXT</code>, sur la racine d'un CDROM ou
	le répertoire d'un FTP de distribution ou dans le menu
	de documentation de <span class="application">sysinstall</span>.  Ce
	fichier énumère, pour une architecture
	donnée, quels sont les périphériques
	supportés par chaque version de FreeBSD.  La liste du
	matériel supporté par chaque version et
	architecture peut également être trouvée
	sur la page d'<a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Information
	sur les versions</a> du site Web de FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-pre"></a>2.3. Tâches de pré-installation</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-inventory"></a>2.3.1. Inventoriez votre ordinateur</h3></div></div></div><p>Avant d'installer FreeBSD vous devriez faire l'inventaire des
        composants de votre ordinateur.  Les routines d'installation de
	FreeBSD afficheront ces composants (disques durs, cartes
	réseaux, lecteurs de CDROM et ainsi de suite) avec leur type et
	leur constructeur.  FreeBSD essaiera également de
	déterminer la configuration correcte pour ces
	périphériques, ce qui inclut les
	informations sur les IRQs et l'utilisation des ports d'E/S.  En
	raison des caprices du matériel PC ce processus n'est pas
	toujours complètement réussi, et vous pourrez avoir
	besoin de corriger
	FreeBSD dans sa détection de votre configuration.</p><p>Si vous avez déjà un autre système
	d'exploitation installé,
        tel que <span class="trademark">Windows</span>® ou Linux, c'est une bonne idée d'utiliser les
	moyens que proposent ces systèmes d'exploitation pour voir
	comment votre matériel est actuellement configuré.
	Si vous n'êtes pas sûr des réglages
	utilisés par une carte
	d'extension, vous pouvez les trouver imprimés sur la carte
	elle-même.  Des valeurs d'IRQ courantes sont 3, 5 et 7, et les
	ports d'E/S sont normalement inscrits en hexadécimal, comme par
	exemple 0x330.</p><p>Nous vous recommandons de prendre note de ces informations
        avant d'installer FreeBSD.  Il pourra être utile d'utiliser une
	table comme celle-ci:</p><div class="table"><a id="idp63230544"></a><div class="table-title">Tableau 2.1. Exemple d'inventaire de périphériques</div><div class="table-contents"><table summary="Exemple d'inventaire de périphériques" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nom du Périphérique</th><th>IRQ</th><th>Port(s) d'E/S</th><th>Notes</th></tr></thead><tbody><tr><td>Premier disque dur</td><td>N/A</td><td>N/A</td><td>40 Go, fabriqué par Seagate, premier disque IDE
		maître</td></tr><tr><td>CDROM</td><td>N/A</td><td>N/A</td><td>Premier disque IDE esclave</td></tr><tr><td>Second disque dur</td><td>N/A</td><td>N/A</td><td>20 Go, fabriqué par IBM, second disque IDE
		maître</td></tr><tr><td>Premier contrôleur IDE</td><td>14</td><td>0x1f0</td><td> </td></tr><tr><td>Carte réseau</td><td>N/A</td><td>N/A</td><td><span class="trademark">Intel</span>® 10/100</td></tr><tr><td>Modem</td><td>N/A</td><td>N/A</td><td><span class="trademark">3Com</span>® 56K faxmodem, sur COM1</td></tr><tr><td>&#8230;</td><td class="auto-generated"> </td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></tbody></table></div></div><br class="table-break" /><p>Une fois l'inventaire des composants présents dans
	votre ordinateur effectué, vous devez vérifier
	s'ils correspondent au matériel nécessaire
	à l'installation de la version de FreeBSD que vous voulez
	utiliser.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp63285328"></a>2.3.2. Sauvegardez vos données</h3></div></div></div><p>Si l'ordinateur sur lequel vous allez installer FreeBSD
	contient des données importantes alors assurez vous que vous les
	avez sauvegardées, et que vous avez testé ces sauvegardes
	avant d'installer FreeBSD.  Le programme d'installation de FreeBSD
	vous sollicitera avant d'écrire sur votre disque,
	mais une fois que ce processus aura été lancé,
	il ne pourra être annulé.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-where"></a>2.3.3. Où installer FreeBSD?</h3></div></div></div><p>Si vous voulez que FreeBSD utilise tout votre disque, alors
	il n'y rien de particulier à ajouter à ce niveau
	là &#8212; vous pouvez passer cette section.</p><p>Cependant, si FreeBSD doit coexister avec d'autres systèmes
	d'exploitation alors vous avez besoin de comprendre
	approximativement comment les données sont disposées
	sur le disque, et comment cela vous affecte.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-where-i386"></a>2.3.3.1. Organisation des disques pour l'architecture FreeBSD/i386</h4></div></div></div><p>Le disque d'un PC peut être divisé en portions
	indépendantes.
	Ces portions sont appelées <em class="firstterm">partitions</em>.
	Comme FreeBSD possède en interne également des partitions, cette
	appellation peut rapidement être une source de confusion,
	aussi ces portions de disque sont appelées
	<span class="quote">« <span class="quote">tranches de disque</span> »</span> (disk slices) ou tout
	simplement tranche (slice) sous FreeBSD.  Par exemple,
	l'utilitaire FreeBSD <code class="command">fdisk</code> qui agit sur les
	partitions PC, fait référence aux slices
	plutôt qu'aux partitions.
	De par sa conception le PC ne supporte que quatre partitions par
	disque.  Ces partitions sont appelées
	<em class="firstterm">partitions primaires</em>.  Pour contourner cette
	limitation et autoriser plus de quatre partitions, un nouveau type de
	partition a été créé, la
	<em class="firstterm">partition étendue</em>.
	Un disque ne pourra contenir qu'une seule partition étendue.
	Des partitions spéciales, appelées
	<em class="firstterm">partitions logiques</em>, peuvent être
	créées
	à l'intérieur de la partition étendue.</p><p>Chaque partition a un <em class="firstterm">identifiant de
	partition</em>, qui est un nombre utilisé pour identifier
	le type de donnée présent sur la partition.
	Les partitions de
	FreeBSD ont l'identifiant <code class="literal">165</code>.</p><p>En général, chaque système d'exploitation
	que vous utilisez identifiera les partitions d'une manière
	particulière.  Par
	exemple, DOS, et ses descendants, comme <span class="trademark">Windows</span>®, associe à
	chaque partition primaire et logique <em class="firstterm">une lettre
	appelée lecteur</em>, en commençant avec
	<code class="filename">C:</code>.</p><p>FreeBSD doit être installé sur une partition primaire.
	FreeBSD peut conserver toutes ses données, y compris tous les
	fichiers que vous créez, sur cette partition.  Cependant, si
	vous avez de multiples disques, alors vous pouvez créer une
	partition FreeBSD sur tous ou certains d'entre eux.  Quand vous
	installez FreeBSD, vous devez avoir une partition disponible.
	Cela pourrait être une partition vierge que vous avez
	préparé, ou une partition existante qui contient
	des données dont vous n'avez plus besoin.</p><p>Si vous utilisez déjà toutes les partitions sur
	tous vos disques, alors vous devrez libérer l'une d'elle pour
	FreeBSD à
	l'aide des outils fournis par les autre systèmes d'exploitation
	(e.g. <code class="command">fdisk</code> sous DOS ou <span class="trademark">Windows</span>®).</p><p>Si vous avez une partition disponible alors vous pouvez
	l'utiliser.  Cependant, vous aurez peut être besoin de diminuer
	une ou plusieurs de vos partitions existantes en premier
	lieu.</p><p>Une installation minimale de FreeBSD prend aussi peu que
	100 Mo d'espace disque.  Cependant c'est vraiment une installation
	<span class="emphasis"><em>minimale</em></span>, ne laissant presque aucun espace
	pour vos propres fichiers.  Un minimum plus réaliste est 250 Mo
	sans environnement graphique, et 350 Mo ou plus si vous désirez
	une interface graphique.  Si vous avez l'intention d'installer
	beaucoup d'applications alors vous aurez besoin de plus
	d'espace.</p><p>Vous pouvez utiliser un outil commercial comme
	<span class="application"><span class="trademark">PartitionMagic</span>®</span> ou un outil libre comme <span class="application">GParted</span> pour redimensionner
	vos partitions et faire de la place à FreeBSD.
	Le répertoire
	<code class="filename">tools</code> sur le CDROM contient deux logiciels
	libres qui peuvent se charger de cette tâche,
	<span class="application">FIPS</span> et <span class="application">PResizer</span>.
	La documentation pour deux de ces programmes se trouve dans le
	même répertoire.
	<span class="application">FIPS</span>, <span class="application">PResizer</span>,
	et <span class="application"><span class="trademark">PartitionMagic</span>®</span> peuvent
	redimensionner les partitions <acronym class="acronym">FAT16</acronym> et
	<acronym class="acronym">FAT32</acronym>&#8212; utilisées sous <span class="trademark">MS-DOS</span>®
	jusqu'à <span class="trademark">Windows</span>® ME.
	Les logiciels <span class="application"><span class="trademark">PartitionMagic</span>®</span> et
	<span class="application">GParted</span> fonctionne également avec
	les partitions <acronym class="acronym">NTFS</acronym>.
	<span class="application">GParted</span> est disponible sur
	plusieurs CD Live Linux, comme <a class="link" href="http://www.sysresccd.org/" target="_top">SystemRescueCD</a>.</p><p>Des problèmes ont été
	rapportés concernant le redimensionnement des
	partitions <span class="trademark">Microsoft</span>® Vista.  Il est recommandé
	d'avoir un CDROM de Vista sous la main quand l'on tente une
	telle opération.  Comme pour toute tâche de
	maintenance des disques, il est fortement conseillé de
	disposer d'un ensemble de sauvegardes à jour.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Une utilisation incorrecte de ces outils peut détruire les
	  données sur votre disque.  Soyez sûr d'avoir des
	  sauvegardes récentes et qui fonctionnent avant d'utiliser ces
	  outils.</p></div><div class="example"><a id="idp65727952"></a><div class="example-title">Exemple 2.1. Utilisation d'une partition existante</div><div class="example-contents"><p>Supposez que vous avez un ordinateur avec un seul disque
	  de 4 Go qui a déjà une version de <span class="trademark">Windows</span>®
	  installée, et que
	  vous avez divisé ce disque en deux lecteurs
	  <code class="filename">C:</code> et <code class="filename">D:</code>,
	  chacun de 2 Go.  Vous avez 1Go de donnée sur
	  <code class="filename">C:</code> et 0.5 Go sur
	  <code class="filename">D:</code>.</p><p>Cela signifie que vous avez deux partitions sur ce disque,
	  une par lecteur.  Vous pouvez transférer toutes les
	  données de
	  <code class="filename">D:</code> vers <code class="filename">C:</code>,
	  ce qui libérera la partition pour FreeBSD.</p></div></div><br class="example-break" /><div class="example"><a id="idp65732304"></a><div class="example-title">Exemple 2.2. Redimensionner une partition existante</div><div class="example-contents"><p>Supposez que vous avez un ordinateur avec un seul disque
	  de 4 Go qui a déjà une version de <span class="trademark">Windows</span>®
	  installée.  Quand vous avez installé <span class="trademark">Windows</span>® vous
	  avez créé une seule grande
	  partition, vous donnant un lecteur <code class="filename">C:</code>
	  de 4 Go.  Vous utilisez actuellement un espace de 1.5 GB, et
	  vous désirez 2 Go pour FreeBSD.</p><p>Afin d'installer FreeBSD vous devrez soit:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Sauvegarder vos données <span class="trademark">Windows</span>®, et ensuite
	      réinstaller <span class="trademark">Windows</span>®, en utilisant qu'une partition de 2 Go
	      à l'installation.</p></li><li class="listitem"><p>Soit utiliser un des outils comme
	      <span class="application"><span class="trademark">PartitionMagic</span>®</span>, décrits plus
	      haut, pour redimensionner votre partition <span class="trademark">Windows</span>®</p></li></ol></div></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65739472"></a>2.3.3.2. Organisation des disques pour l'architecture Alpha</h4></div></div></div><a id="idp65740112" class="indexterm"></a><p>Vous aurez besoin d'un disque dédié pour FreeBSD
	  sur un Alpha.  Il n'est pas possible de partager un disque avec un
	  autre système d'exploitation pour le moment.  Selon le type de
	  machine Alpha dont vous disposez, ce disque peut soit être un
	  disque SCSI ou un disque IDE, dès l'instant que votre machine
	  est capable de démarrer depuis ce disque.</p><p>Suivant les conventions des manuels de Digital / Compaq,
	  toute entrée SRM sera donnée en majuscule.  SRM n'est
	  pas sensible à la casse des caractères.</p><p>Pour déterminer les noms et les types de disques
	  présent dans votre machine, utilisez la commande <code class="literal">SHOW
	  DEVICE</code> à l'invite de la console SRM:</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>SHOW DEVICE</code></strong>
dka0.0.0.4.0               DKA0           TOSHIBA CD-ROM XM-57  3476
dkc0.0.0.1009.0            DKC0                       RZ1BB-BS  0658
dkc100.1.0.1009.0          DKC100             SEAGATE ST34501W  0015
dva0.0.0.0.1               DVA0
ewa0.0.0.3.0               EWA0              00-00-F8-75-6D-01
pkc0.7.0.1009.0            PKC0                  SCSI Bus ID 7  5.27
pqa0.0.0.4.0               PQA0                       PCI EIDE
pqb0.0.1.4.0               PQB0                       PCI EIDE</pre><p>Cet exemple provient d'une machine &#8220;Digital Personal
	  Workstation 433au&#8221; et fait apparaître trois disques
	  attachés à la machine.  Le premier est un lecteur de
	  CDROM appelé <code class="filename">DKA0</code> et les deux
	  autres sont des disques dur nommés respectivement
	  <code class="filename">DKC0</code> et
	  <code class="filename">DKC100</code>.</p><p>Les disques avec des noms de la forme
	  <code class="filename">DKx</code> sont des disques SCSI.  Par
	  exemple <code class="filename">DKA100</code> correspond à un
	  disque SCSI situé sur le premier bus SCSI (A) et avec pour
	  identifiant 1, tandis que <code class="filename">DKC300</code>
	  correspond à un disque SCSI situé sur le
	  troisième bus (C) et
	  ayant l'identifiant 3.  Le nom de périphérique
	  <code class="filename">PKx</code> correspond au contrôleur SCSI.
	  Comme le montre le résultat de la commande <code class="literal">SHOW
	  DEVICE</code>, les lecteurs de CDROM SCSI sont traités
	  comme n'importe quel disque dur SCSI.</p><p>Les disque IDE ont des noms du type
	  <code class="filename">DQx</code> et
	  <code class="filename">PQx</code> correspond au contrôleur IDE
	  associé.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65760592"></a>2.3.4. Connaître la configuration de votre réseau</h3></div></div></div><p>Si vous avez l'intention d'utiliser un réseau pour
	votre installation de FreeBSD (par exemple, si vous allez
	installer à partir d'un site FTP, ou d'un serveur NFS), alors
	vous devez connaître votre configuration réseau.  On vous
	demandera ces informations durant l'installation afin que
	FreeBSD puisse se connecter au réseau pour terminer
	l'installation.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65761616"></a>2.3.4.1. Connexion par réseau Ethernet, ou modem Cable/DSL</h4></div></div></div><p>Si vous vous connectez à un réseau Ethernet, ou que
	  vous avez une connexion Internet par câble ou DSL utilisant une carte Ethernet, alors vous
	  aurez besoin des informations suivantes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Adresse IP</p></li><li class="listitem"><p>Adresse IP de la passerelle par défaut</p></li><li class="listitem"><p>Nom de l'hôte</p></li><li class="listitem"><p>Adresses IP du serveur DNS</p></li><li class="listitem"><p>Masque de sous-réseau</p></li></ol></div><p>Si vous ne connaissez pas ces informations, alors
	  adressez-vous à votre administrateur système ou votre
	  fournisseur d'accès.  Ils peuvent vous dire que ces
	  informations sont assignées automatiquement par
	  l'intermédiaire
	  de <em class="firstterm">DHCP</em>.  Si c'est le cas prenez en
	  note.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65767888"></a>2.3.4.2. Connexion par modem</h4></div></div></div><p>Si vous vous connectez à un fournisseur d'accès
	  en utilisant un
	  modem classique alors vous pouvez toujours installer FreeBSD en
	  utilisant Internet, cela prendra juste beaucoup de temps.</p><p>Vous devrez connaître:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Le numéro de téléphone de connexion
	      à votre fournisseur d'accès</p></li><li class="listitem"><p>Le port COM: le port auquel votre modem est connecté</p></li><li class="listitem"><p>Le nom d'utilisateur et le mot de passe de votre
	      compte Internet</p></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65805136"></a>2.3.5. Vérifier l'Errata</h3></div></div></div><p>Bien que le projet FreeBSD s'efforce de s'assurer que chaque
	version de FreeBSD soit aussi stable que possible, des bogues
	peuvent parfois exister.  Il est très rare que ces bogues
	affectent le processus d'installation.  Dès que ces
	problèmes sont découverts et corrigés, ils
	sont notés dans l'<a class="link" href="http://www.FreeBSD.org/releases/10.1R/errata.html" target="_top">Errata de FreeBSD</a>, présent sur le
	site web de FreeBSD.  Vous devriez vérifier l'errata avant
	l'installation afin d'être sûr qu'il n'y a pas de
	problème de dernière minute à prendre
	en compte.</p><p>Les informations sur chaque version, y compris les errata,
	peuvent être trouvé dans la section <a class="link" href="../../../../releases/index.html" target="_top">d'information sur les
	différentes
	versions</a> située sur le <a class="link" href="../../../../index.html" target="_top">site web de FreeBSD</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65808208"></a>2.3.6. Obtenir les fichiers d'installation de FreeBSD</h3></div></div></div><p>Le processus d'installation de FreeBSD peut installer
	FreeBSD à partir de fichiers placés dans
	les endroits suivants:</p><div class="itemizedlist"><div class="itemizedlist-title">Un média local</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un CDROM ou un DVD</p></li><li class="listitem"><p>Une partition DOS sur le même ordinateur</p></li><li class="listitem"><p>Une bande SCSI ou QIC</p></li><li class="listitem"><p>Des disquettes</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Le réseau</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un site FTP, en passant par un coupe-feu, ou en
	    utilisant un proxy HTTP si nécessaire</p></li><li class="listitem"><p>Un serveur NFS</p></li><li class="listitem"><p>Une connexion dédiée parallèle
	    ou série</p></li></ul></div><p>Si vous avez acheté FreeBSD sur CD ou DVD alors vous
	disposez déjà de ce que vous avez besoin,
	et vous devriez passer à la section suivante
	(<a class="xref" href="#install-floppies" title="2.3.7. Préparer les supports de démarrage">Section 2.3.7, « Préparer les supports de démarrage »</a>).</p><p>Si vous n'avez pas récupéré les fichiers
	d'installation de FreeBSD vous devriez aller directement à la
	<a class="xref" href="#install-diff-media" title="2.13. Préparer votre propre support d'installation">Section 2.13, « Préparer votre propre support d'installation »</a> qui explique comment se
	préparer à installer FreeBSD à partir d'une des
	solutions données ci-dessus.  Après avoir lu cette
	section, vous devrez revenir ici, et continuer la lecture avec la
	<a class="xref" href="#install-floppies" title="2.3.7. Préparer les supports de démarrage">Section 2.3.7, « Préparer les supports de démarrage »</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-floppies"></a>2.3.7. Préparer les supports de démarrage</h3></div></div></div><p>Le processus d'installation de FreeBSD est lancé en
	démarrant votre ordinateur dans l'installateur de
	FreeBSD&#8212;ce n'est pas un programme que vous exécutez
	à partir d'un autre système d'exploitation.  Votre
	ordinateur démarre normalement en utilisant le système
	d'exploitation installé sur votre disque dur, mais il peut
	également être configuré pour
	utiliser une disquette &#8220;bootable&#8221;.
	La plupart des ordinateurs modernes peuvent
	également démarrer à partir d'un CDROM
	présent dans le lecteur de CDROM.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous avez FreeBSD sur CDROM ou DVD (soit un que vous
	  avez acheté, soit préparez vous-même),
	  et que votre ordinateur vous permet de démarrer sur le lecteur
	  de CDROM ou DVD (typiquement une option du BIOS appelée
	  &#8220;Boot Order&#8221; ou équivalent) alors vous pouvez
	  passer cette section.
	  Les CDROMs ou DVDs de FreeBSD sont bootable et peuvent
	  être utilisés pour installer FreeBSD sans autre
	  préparation.</p></div><p>Pour créer les images des disquettes de démarrage,
	suivez les étapes suivantes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Obtenir les images des disquettes de démarrage</strong></p><p>Les images des disquettes de démarrage sont disponibles
	    sur votre média d'installation dans le répertoire
	    <code class="filename">floppies/</code> et peuvent également être
	    téléchargées par FTP depuis le
	    répertoire <code class="filename">floppies</code>,
	    <code class="literal">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/&lt;arch&gt;/&lt;version&gt;-RELEASE/floppies/</code>.
	    Remplacez <em class="replaceable"><code>&lt;arch&gt;</code></em> et
	    <em class="replaceable"><code>&lt;version&gt;</code></em> avec
	    respectivement l'architecture et le numéro de
	    version que vous désirez installer.  Par exemple,
	    les images de disquettes de démarrage de
	    FreeBSD/i386 10.1-RELEASE sont
	    disponibles à partir de l'adresse
	    <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/floppies/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/floppies/</a></code>.</p><p>Les images de disquettes ont l'extension
	    <code class="filename">.flp</code>.  Le répertoire
	    <code class="filename">floppies/</code> contient un certain nombre
	    d'images différentes, et celles que vous devrez utiliser
	    dépendent de la version de FreeBSD que vous allez
	    installer, et
	    dans certains cas, du matériel sur lequel vous effectuez
	    l'installation.
	    Dans la plupart des cas vous aurez besoin
	    de quatre disquettes: <code class="filename">boot.flp</code>,
	    <code class="filename">kern1.flp</code>,
	    <code class="filename">kern2.flp</code>, et
	    <code class="filename">kern3.flp</code>.  Consultez
	    <code class="filename">README.TXT</code> dans le même
	    répertoire pour une information actualisée
	    sur ces images de disquette.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Votre programme FTP doit utiliser le <span class="emphasis"><em>mode
	      binaire</em></span> pour télécharger ces images.
	      Quelques navigateurs sont connus pour employer le mode
	      <span class="emphasis"><em>texte</em></span> (ou
	      <span class="emphasis"><em>ASCII</em></span>), ce qui sera manifeste si vous
	      ne pouvez démarrer depuis ces images.</p></div></li><li class="step"><p class="title"><strong>Préparer les disquettes</strong></p><p>Vous devez préparer une disquette par fichier que vous
	    avez dû télécharger.  Il est impératif
	    que ces disquettes soient exemptes de défauts.
	    La manière la plus simple de
	    tester cela est de les formater soi-même.  Ne faites pas
	    confiance aux disquettes préformatées.
	    L'utilitaire de formatage <span class="trademark">Windows</span>® n'indiquera pas la
	    présence de blocs défectueux, il les
	    marquera simplement comme étant
	    &#8220;défectueux&#8221; et les ignorera.  Il est
	    recommandé d'utiliser des disquettes neuves si l'on
	    choisit cette méthode d'installation.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous essayez d'installer FreeBSD et que le
	      programme d'installation &#8220;plante&#8221;, se bloque,
	      ou présente d'autres dysfonctionnements,
	      les premières choses
	      à suspecter sont les disquettes.  Essayez de copier les
	      images sur des disquettes neuves et essayez encore.</p></div></li><li class="step"><p class="title"><strong>Ecrire les fichiers image sur les disquettes</strong></p><p>Les fichiers <code class="filename">.flp</code> ne sont
	    <span class="emphasis"><em>pas</em></span> des fichiers que vous pouvez copier
	    directement sur une disquette.  Ce sont des
	    images du contenu complet de disquettes.  Cela signifie que
	    vous <span class="emphasis"><em>ne pouvez pas</em></span> simplement copier
	    les fichiers d'un disque vers un autre.
	    Vous devez utilisez des outils
	    spécifiques pour écrire directement les images sur
	    les disquettes.</p><a id="idp65842512" class="indexterm"></a><p>Si vous créez ces disquettes depuis un ordinateur
	    fonctionnant sous <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®, alors nous fournissons pour
	    faire cela un outil appelé <code class="command">fdimage</code>.</p><p>Si vous utilisez les images présentes sur le CDROM, et
	    que votre lecteur CDROM est <code class="filename">E:</code>,
	    alors vous devez procéder comme suit:</p><pre class="screen"><code class="prompt">E:\&gt;</code> <strong class="userinput"><code>tools\fdimage floppies\boot.flp A:</code></strong></pre><p>Répétez cette commande pour chaque fichier
	    <code class="filename">.flp</code>, en remplaçant la disquette
	    à chaque fois, en étant sûr de noter sur
	    les disquettes le nom du fichier copié.
	    Ajuster la ligne de commande selon
	    l'endroit où vous avez placé les fichiers
	    <code class="filename">.flp</code>.  Si vous n'avez pas de CDROM,
	    alors <code class="command">fdimage</code> peut être
	    téléchargé de
	    puis le <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/tools/" target="_top">répertoire
	    <code class="filename">tools</code></a> sur le site FTP de
	    FreeBSD.</p><p>Si vous créez les disquettes depuis un système
	    <span class="trademark">UNIX</span>® (comme par exemple un autre système FreeBSD) vous
	    pouvez
	    utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> pour écrire les fichiers
	    image directement sur les disquettes.  Sous FreeBSD, vous
	    lanceriez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=boot.flp of=/dev/fd0</code></strong></pre><p>Sous FreeBSD, <code class="filename">/dev/fd0</code> correspond au
	    premier lecteur de disquettes ( le lecteur
	    <code class="filename">A:</code>).  <code class="filename">/dev/fd1</code> serait
	    le lecteur <code class="filename">B:</code>, et ainsi de suite.
	    D'autres variantes d'<span class="trademark">UNIX</span>® peuvent avoir des noms différents
	    pour les lecteurs de disquettes, et vous devrez consulter la
	    documentation du système si besoin est.</p></li></ol></div><p>Vous êtes maintenant prêt à commencer
	l'installation de FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-start"></a>2.4. Débuter l'installation</h2></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Par défaut, le processus d'installation ne modifiera rien
	sur le(s) disque(s) dur(s) jusqu'à ce que vous voyiez le message
	suivant.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="literallayout">Last Chance: Are you SURE you want continue the installation?

If you're running this on a disk with data you wish to save then WE
STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

We can take no responsibility for lost disk contents!</pre><p xmlns="http://www.w3.org/1999/xhtml">L'installation peut être quittée à tout
	moment avant
	l'avertissement final sans changer le contenu du disque dur.  Si
	vous avez mal configuré quelque chose, vous pouvez
	juste éteindre
	l'ordinateur avant l'étape finale sans aucun risque.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-starting"></a>2.4.1. Démarrage</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-starting-i386"></a>2.4.1.1. Démarrage pour l'architecture <span class="trademark">i386</span>&#8482;</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Commencez avec votre ordinateur éteint.</p></li><li class="step"><p>Allumez l'ordinateur.  En démarrant il devrait afficher
	    une option pour entrer dans le menu de configuration du
	    système, ou BIOS, généralement à
	    l'aide des touches
	    <span class="keycap"><strong>F2</strong></span>, <span class="keycap"><strong>F10</strong></span>, <span class="keycap"><strong>Suppr</strong></span>,
	    ou
	    <span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>S</strong></span>.  Employez ce qui est indiqué à
	    l'écran.  Dans
	    certains cas votre ordinateur peut afficher une image pendant
	    son démarrage.  Typiquement, l'appui sur
	    <span class="keycap"><strong>Esc</strong></span> effacera l'image et vous permettra de
	    voir les messages de démarrage.</p></li><li class="step"><p>Trouvez le paramètre qui contrôle à
	    partir de quel
	    périphérique le système démarre.
	    Cela est généralement nommé &#8220;Boot
	    Order&#8220; (ordre de démarrage) et habituellement sous
	    la forme d'une liste de périphériques, comme
	    <code class="literal">Floppy</code>, <code class="literal">CDROM</code>,
	    <code class="literal">First Hard Disk</code>, et ainsi de suite.</p><p>Si vous avez dû préparer des disquettes
	    de démarrage, assurez-vous alors que le lecteur de
	    disquettes est sélectionné.  Si vous
	    démarrez depuis le CDROM alors vérifiez que c'est
	    celui-ci qui est sélectionné à la place.
	    En cas de doute, vous devriez consulter le manuel fourni
	    avec votre ordinateur, et/ou sa carte mère.</p><p>Effectuez les changements, ensuite sauvez et quittez.
	    L'ordinateur devrait maintenant redémarrer.</p></li><li class="step"><p>Si vous avez dû préparer des disquettes de
	    démarrage, comme décrit dans la
	    <a class="xref" href="#install-floppies" title="2.3.7. Préparer les supports de démarrage">Section 2.3.7, « Préparer les supports de démarrage »</a> alors l'une d'elles sera la
	    première disquette de démarrage,
	    probablement celle contenant <code class="filename">boot.flp</code>.
	    Introduisez cette disquette dans votre lecteur.</p><p>Si vous démarrez depuis le CDROM, alors vous devrez
	    allumer votre ordinateur, et insérer le CDROM à
	    la première occasion.</p><p>Si votre ordinateur démarre comme à
	    l'accoutumé, et charge le système d'exploitation
	    existant, alors soit:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Les disques (CDROM ou disquette) n'ont pas
		été insérés assez tôt
		dans le processus de démarrage.
		Laissez-les, et essayez de redémarrer votre
		ordinateur.</p></li><li class="listitem"><p>Soit les changements du BIOS, plus tôt, n'ont pas
	        fonctionné correctement.  Vous devriez refaire cette
		étape jusqu'à obtenir la bonne option.</p></li><li class="listitem"><p>Soit votre BIOS ne supporte pas le
	      démarrage à partir du support
	      désiré.</p></li></ol></div></li><li class="step"><p>FreeBSD démarrera.  Si vous démarrez depuis
	    le CDROM vous verrez un affichage similaire à ceci (information sur la version omise):</p><pre class="screen">Booting from CD-Rom...
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.01
Console: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\</pre><p>Si vous démarrez depuis une disquette, vous verrez un
	    affichage similaire à ceci (information sur la version omise):</p><pre class="screen">Booting from Floppy...
Uncompressing ... done

BTX loader 1.00  BTX version is 1.01
Console: internal video/keyboard
BIOS drive A: is disk0
BIOS drive C: is disk1
BIOS 639kB/261120kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/kernel text=0x277391 data=0x3268c+0x332a8 |

Insert disk labelled "Kernel floppy 1" and press any key...</pre><p>Suivez ces instructions en retirant la disquette
	  <code class="filename">boot.flp</code>, puis insérez la disquette
	  <code class="filename">kern1.flp</code> et enfin appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span>.  Démarrez sur la
	  première disquette; quand on vous le demande,
	  insérez les autres disquettes.</p></li><li class="step"><p>Que vous démarriez à partir
	    de disquettes ou de CDROM, le processus de démarrage
	    vous amènera au menu du chargeur FreeBSD:</p><div class="figure"><a id="boot-loader-menu"></a><div class="figure-title">Figure 2.1. Menu du chargeur FreeBSD</div><div class="figure-contents"><div class="mediaobject"><img src="install/boot-loader-menu.png" alt="Menu du chargeur FreeBSD" /></div></div></div><br class="figure-break" /><p>Attendez dix secondes, ou appuyez sur
	    <span class="keycap"><strong>Entrée</strong></span>.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65961168"></a>2.4.1.2. Démarrage pour l'architecture Alpha</h4></div></div></div><a id="idp65961808" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Commencez avec votre ordinateur éteint.</p></li><li class="step"><p>Allumez votre ordinateur et attendez l'invite de
	    commande du moniteur de démarrage.</p></li><li class="step"><p>Si vous avez dû préparer des disquettes de
	    démarrage, comme décrit dans la
	    <a class="xref" href="#install-floppies" title="2.3.7. Préparer les supports de démarrage">Section 2.3.7, « Préparer les supports de démarrage »</a> alors l'une d'elles sera la
	    première disquette de démarrage,
	    probablement celle contenant <code class="filename">boot.flp</code>.
	    Introduisez cette disquette dans votre lecteur et tapez les
	    commandes suivantes pour démarrer la disquette (en
	    remplaçant le nom de votre lecteur de disquette si
	    nécessaire):</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>BOOT DVA0 -FLAGS '' -FILE ''</code></strong></pre><p>Si vous démarrez depuis le CDROM, insérez
	    le CDROM dans
	    son lecteur et tapez la commande suivante pour démarrer
	    l'installation (en remplaçant le nom du lecteur de CDROM si
	    nécessaire par celui approprié):</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>BOOT DKA0 -FLAGS '' -FILE ''</code></strong></pre></li><li class="step"><p>FreeBSD démarrera.  Si vous démarrez depuis une
	  disquette, au bout d'un moment vous verrez le message:</p><pre class="screen">Insert disk labelled "Kernel floppy 1" and press any key...</pre><p>Suivez ces instructions en retirant la disquette
	    <code class="filename">boot.flp</code>, puis insérez la disquette
	    <code class="filename">kern1.flp</code> et enfin appuyez sur
	    <span class="keycap"><strong>Entrée</strong></span>.</p></li><li class="step"><p>Que vous démarriez à partir
	    de disquettes ou du CDROM, le processus de démarrage
	    vous amènera au point suivant:</p><pre class="screen">Hit [Enter] to boot immediately, or any other key for command prompt.
Booting [kernel] in 9 seconds... _</pre><p>Attendez dix secondes, ou appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span>.  Cela lancera le menu de
	  configuration du noyau.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65980496"></a>2.4.1.3. Démarrage pour l'architecture <span class="trademark">SPARC64</span>®</h4></div></div></div><p>La plupart des systèmes <span class="trademark">SPARC64</span>® sont
	  configurés pour démarrer automatiquement
	  à partir du disque dur.  Pour installer FreeBSD, vous
	  devez démarrer à partir du réseau ou
	  à partir d'un CDROM, ce qui nécessitera un
	  passage par le PROM (OpenFirmware).</p><p>Pour cela, redémarrez le système, et
	  attendez l'affichage des messages de démarrage.  En
	  fonction du modèle, vous devriez voir quelque chose
	  comme ce qui suit:</p><pre class="screen">Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</pre><p>Si votre système tente de démarrer
	  à partir du disque dur en cet endroit, vous devrez
	  alors appuyer sur <span class="keycap"><strong>L1</strong></span>+<span class="keycap"><strong>A</strong></span>
	  ou <span class="keycap"><strong>Stop</strong></span>+<span class="keycap"><strong>A</strong></span>
	  sur le clavier, ou envoyer un <code class="command">BREAK</code> par
	  l'intermédiaire de la console série (en
	  utilisant par exemple <code class="command">~#</code> sous <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>
	  ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>) pour obtenir l'invite PROM.  Elle ressemble
	  à ceci:</p><pre class="screen"><code class="prompt">ok     </code><a id="prompt-single"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">ok {0} </code><a id="prompt-smp"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#prompt-single"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>C'est l'invite utilisée sur les
		systèmes avec un seul CPU.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#prompt-smp"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>C'est l'invite utilisée sur les
		systèmes SMP, le chiffre indiquant le nombre de
		CPU actifs.</p></td></tr></table></div><p>En ce point, placez le CDROM dans le lecteur, et
	  à l'invite PROM, tapez <code class="command">boot
	  cdrom</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="view-probe"></a>2.4.2. Examen des résultats de la détection du
	matériel</h3></div></div></div><p>La dernière centaine de lignes qui a été
	affichée à l'écran
        est stockée et peut être relue.</p><p>Pour relire le tampon, appuyez sur
	<span class="keycap"><strong>Arrêt Défil</strong></span>.
	Cela activera le défilement de l'affichage.  Vous pouvez alors
	utiliser les touches fléchées, ou
	<span class="keycap"><strong>PageUp</strong></span> et
	<span class="keycap"><strong>PageDown</strong></span> pour visualiser les résultats.
	Appuyer à nouveau sur <span class="keycap"><strong>Arrêt Défil</strong></span>
	pour revenir dans le mode normal.</p><p>Faites cela maintenant, pour relire le texte qui a
	défilé en dehors de l'écran quand le noyau
	effectuait la détection du matériel.  Vous verrez
	quelque chose de semblable à la <a class="xref" href="#install-dev-probe" title="Figure 2.2. Résultats typiques de la détection du matériel">Figure 2.2, « Résultats typiques de la détection du
	  matériel »</a>, bien que le texte sera différent
	en fonction des périphériques que vous avez dans votre
	ordinateur.</p><div class="figure"><a id="install-dev-probe"></a><div class="figure-title">Figure 2.2. Résultats typiques de la détection du
	  matériel</div><div class="figure-contents"><pre class="screen">avail memory = 253050880 (247120K bytes)
Preloaded elf kernel "kernel" at 0xc0817000.
Preloaded mfs_root "/mfsroot" at 0xc0817084.
md0: Preloaded image &lt;/mfsroot&gt; 4423680 bytes at 0xc03ddcd4

md1: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1:&lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;iSA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: &lt;VIA 83C572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
pci0: &lt;unknown card&gt; (vendor=0x1106, dev=0x3040) at 7.3
dc0: &lt;ADMtek AN985 10/100BaseTX&gt; port 0xe800-0xe8ff mem 0xdb000000-0xeb0003ff ir
q 11 at device 8.0 on pci0
dc0: Ethernet address: 00:04:5a:74:6b:b5
miibus0: &lt;MII bus&gt; on dc0
ukphy0: &lt;Generic IEEE 802.3u media interface&gt; on miibus0
ukphy0: 10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xec00-0xec1f irq 9 at device 10.
0 on pci0
ed0 address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
orm0; &lt;Option ROM&gt; at iomem 0xc0000-0xc7fff on isa0
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq6 drq2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5&#8221; drive&gt; on fdc0 drive 0
atkbdc0: &lt;keyboard controller (i8042)&gt; at port 0x60-0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0c3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags-0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1: at port 0x2f8-0x2ff irq3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
plip0: &lt;PLIP network interface&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master using UDMA33
acd0: CD-RW &lt;LITE-ON LTR-1210B&gt; at ata1-slave PIO4
Mounting root from ufs:/dev/md0c
/stand/sysinstall running as init on vty0</pre></div></div><br class="figure-break" /><p>Vérifiez les résultats de la détection
	soigneusement pour s'assurer que FreeBSD a trouvé tous les
	périphériques que vous
	attendiez.  Si un périphérique n'a pas été
	trouvé, il ne sera alors pas affiché.
	Un <a class="link" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">noyau
	personnalisé</a> vous permet d'ajouter le support
	pour des périphériques qui ne sont pas
	présents dans le noyau <code class="filename">GENERIC</code>,
	comme les cartes son.</p><p>Pour FreeBSD 6.2 et les versions suivantes, après
	la détection des périphériques, vous
	verrez l'écran correspondant à la <a class="xref" href="#config-country" title="Figure 2.3. Menu de sélection du pays">Figure 2.3, « Menu de sélection du pays »</a>.  Utilisez les touches
	fléchées pour choisir un pays, une
	région, ou un groupe.  Appuyez ensuite sur la touche
	<span class="keycap"><strong>Enter</strong></span>, pour sélectionner votre pays et
	votre table de clavier.  Il est facile de quitter le programme
	<span class="application">sysinstall</span> et de recommencer
	à nouveau.</p><div class="figure"><a id="config-country"></a><div class="figure-title">Figure 2.3. Menu de sélection du pays</div><div class="figure-contents"><div class="mediaobject"><img src="install/config-country.png" alt="Menu de sélection du pays" /></div></div></div><br class="figure-break" /><div class="figure"><a id="sysinstall-exit"></a><div class="figure-title">Figure 2.4. Quitter sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/sysinstall-exit.png" alt="Quitter sysinstall" /></div></div></div><br class="figure-break" /><p>Utilisez les touches fléchées pour sélectionner
	<span class="guimenuitem">Exit Install</span> dans le menu principal
	d'installation.  Le message suivant apparaîtra:</p><pre class="screen">                      User Confirmation Requested
         Are you sure you wish to exit? The system will reboot
           (be sure to remove any floppies/CDs/DVDs from the drives).

                            [ Yes ]    No</pre><p>Le programme d'installation redémarrera à nouveau si le
	CDROM est resté dans le lecteur et que
	<span class="guibutton">[ Yes ]</span> est sélectionné.</p><p>Si vous démarrez à partir de disquettes, il sera
	nécessaire
	de retirer la disquette <code class="filename">boot.flp</code> avant de
	redémarrer.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-sysinstall"></a>2.5. Présentation de sysinstall</h2></div></div></div><p>L'utilitaire <span class="application">sysinstall</span> est l'application
      d'installation fournie par le projet FreeBSD.  C'est une
      application pour la console et qui est divisée en un certain nombre
      de menus et d'écrans que vous pouvez utiliser pour configurer et
      contrôler le processus d'installation.</p><p>Le système de menu de <span class="application">sysinstall</span>
      est contrôlé à l'aide des touches
      fléchées, <span class="keycap"><strong>Entrée</strong></span>,
      <span class="keycap"><strong>Tab</strong></span>,
      <span class="keycap"><strong>Espace</strong></span> et d'autres touches.  Une description
      détaillée de ces touches, et de ce qu'elles font,
      se trouve dans les informations d'utilisation de
      <span class="application">sysinstall</span>.</p><p>Pour voir ces informations, assurez-vous que l'entrée
      <span class="guimenuitem">Usage</span> est surlignée et que le bouton
      <span class="guibutton">[Select]</span> est sélectionné, comme
      montré dans
      la <a class="xref" href="#sysinstall-main3" title="Figure 2.5. Sélection de l'entrée Usage dans le menu principal de sysinstall">Figure 2.5, « Sélection de l'entrée Usage dans le menu
	principal de sysinstall »</a>, ensuite appuyez sur
      <span class="keycap"><strong>Entrée</strong></span>.</p><p>Les instructions sur l'utilisation du système de menu seront
      affichées. Après les avoir lues, appuyez sur
      <span class="keycap"><strong>Entrée</strong></span> pour revenir au menu principal.</p><div class="figure"><a id="sysinstall-main3"></a><div class="figure-title">Figure 2.5. Sélection de l'entrée Usage dans le menu
	principal de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/main1.png" alt="Sélection de l'entrée Usage dans le menu principal de sysinstall" /></div></div></div><br class="figure-break" /><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="select-doc"></a>2.5.1. Sélectionner le menu de documentation</h3></div></div></div><p>Depuis le menu principal, sélectionnez
	<span class="guimenuitem">Doc</span> avec les touches fléchées
	  et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="main-doc"></a><div class="figure-title">Figure 2.6. Sélectionner le menu de documentation</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-doc.png" alt="Sélectionner le menu de documentation" /></div></div></div><br class="figure-break" /><p>Cela affichera le menu de documentation.</p><div class="figure"><a id="docmenu1"></a><div class="figure-title">Figure 2.7. Menu de documentation de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/docmenu1.png" alt="Menu de documentation de sysinstall" /></div></div></div><br class="figure-break" /><p>Il est important de lire la documentation fournie.</p><p>Pour voir un document, sélectionnez-le avec les touches
	fléchées et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.
	Quand vous
	avez terminé la lecture d'un document, l'appui sur
	<span class="keycap"><strong>Entrée</strong></span> vous ramènera au menu de
	documentation.</p><p>Pour revenir au menu principal d'installation, sélectionnez
	<span class="guimenuitem">Exit</span> avec les touches fléchées
	et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="keymap"></a>2.5.2. Sélectionner le menu des tables de clavier</h3></div></div></div><p>Pour changer le type de clavier, utilisez les touches
	fléchées pour sélectionner
	<span class="guimenuitem">Keymap</span>
	depuis le menu et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.
	Ceci est nécessaire seulement si vous utilisez un
	clavier non-standard ou non-américain.</p><div class="figure"><a id="sysinstall-keymap"></a><div class="figure-title">Figure 2.8. Menu principal de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-keymap.png" alt="Menu principal de sysinstall" /></div></div></div><br class="figure-break" /><p>Une table de clavier différente peut être choisie en
	sélectionnant l'élément du menu en utilisant
	les touches fléchées et en appuyant sur
	<span class="keycap"><strong>Espace</strong></span>. Appuyer à nouveau sur
	<span class="keycap"><strong>Espace</strong></span> désélectionnera
	l'élément.
	Une fois terminé, choisissez <span class="guibutton">[ OK ]</span> en utilisant les touches
	fléchées et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><p>Seule une liste partielle est montrée dans cet exemple.
	Utiliser <span class="guibutton">[ Cancel ]</span> en appuyant sur <span class="keycap"><strong>Tab</strong></span> sélectionnera la table de clavier par
	défaut et ramènera au menu principal
	d'installation.</p><div class="figure"><a id="sysinstall-keymap-menu"></a><div class="figure-title">Figure 2.9. Menu des tables de clavier de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/keymap.png" alt="Menu des tables de clavier de sysinstall" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="viewsetoptions"></a>2.5.3. Ecran des options d'installation</h3></div></div></div><p>Sélectionner <span class="guimenuitem">Options</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="sysinstall-options"></a><div class="figure-title">Figure 2.10. Menu principal de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-options.png" alt="Menu principal de sysinstall" /></div></div></div><br class="figure-break" /><div class="figure"><a id="options"></a><div class="figure-title">Figure 2.11. Options de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/options.png" alt="Options de sysinstall" /></div></div></div><br class="figure-break" /><p>Les valeurs par défaut sont généralement
	parfaites pour la
	plupart des utilisateurs et ne nécessitent pas d'être
	modifiées.  Le nom de la version variera en fonction de
	la version que l'on installe.</p><p>La description de l'élément
	sélectionné apparaîtra en bas de
	l'écran surlignée en bleu.  Notez qu'une des options est
	<span class="guimenuitem">Use Defaults</span> pour réinitialiser
	toutes les options à leur valeur de départ.</p><p>Appuyez sur <span class="keycap"><strong>F1</strong></span> pour lire l'écran d'aide
	à propos des diverses options.</p><p>L'appui sur <span class="keycap"><strong>Q</strong></span> ramènera au menu principal
	d'installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="start-install"></a>2.5.4. Commencer une installation standard</h3></div></div></div><p>L'installation <span class="guimenuitem">Standard</span> est
	l'option recommandée pour ceux qui sont nouveaux à
	<span class="trademark">UNIX</span>® ou FreeBSD.
	Utilisez les touches fléchées pour sélectionner
	<span class="guimenuitem">Standard</span> et ensuite appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour débuter
	l'installation.</p><div class="figure"><a id="sysinstall-standard"></a><div class="figure-title">Figure 2.12. Commencer une installation standard</div><div class="figure-contents"><div class="mediaobject"><img src="install/main-std.png" alt="Commencer une installation standard" /></div></div></div><br class="figure-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-steps"></a>2.6. Allouer l'espace disque</h2></div></div></div><p>Votre première tâche est d'allouer de l'espace disque
      à FreeBSD, et labéliser cet espace de sorte que
      <span class="application">sysinstall</span> puisse le préparer.  Afin de
      faire cela vous devez savoir comment FreeBSD s'attend à trouver
      l'information sur le disque.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-drive-bios-numbering"></a>2.6.1. La numérotation des disques par le BIOS</h3></div></div></div><p>Avant que vous installiez et configuriez FreeBSD sur votre
	système, il y a un sujet important dont vous devriez être
	conscient, particulièrement si vous avez plusieurs disques
	durs.</p><a id="idp66069456" class="indexterm"></a><a id="idp66069968" class="indexterm"></a><p>Dans un PC utilisant un système d'exploitation
	dépendant du
	BIOS comme <span class="trademark">MS-DOS</span>® ou <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, le BIOS est capable de
	modifier l'ordre normal des disques, et le système
	d'exploitation suivra le changement.  Ceci permet à
	l'utilisateur de démarrer depuis un disque autre que le
	prétendu &#8220;premier disque maître&#8221;.  C'est
	particulièrement commode pour les utilisateurs qui ont
	trouvé
	que la manière la plus simple et la moins onéreuse de
	sauvegarder un système est d'acheter un second disque dur
	identique, et d'exécuter des copies régulières
	du premier disque
	vers le second en utilisant <span class="application">Ghost</span> ou
	<span class="application">XCOPY</span>.  Alors, si le premier disque
	tombe en panne, ou est attaqué par un virus, ou corrompu par un
	défaut du système d'exploitation, on peut facilement
	y faire
	face en demandant au BIOS de permuter logiquement les disques.
	C'est comme si l'on échangeait les câbles sur les disques,
	mais sans avoir à ouvrir le boîtier.</p><a id="idp66077392" class="indexterm"></a><a id="idp66077904" class="indexterm"></a><p>Des systèmes plus onéreux avec des contrôleurs
	SCSI incluent
	souvent des extensions de BIOS permettant aux disques SCSI
	d'être réorganisés dans un mode semblable et cela
	jusqu'à sept disques.</p><p>Un utilisateur qui est accoutumé à tirer profit de ces
	caractéristiques pourra s'étonner quant aux
	résultats inattendus
	obtenus sous FreeBSD.  FreeBSD n'utilise pas le BIOS, et ne
	connaît pas &#8220;la table logique des disques du BIOS&#8221;.
	Cela peut mener à des situations relativement
	déconcertantes,
	particulièrement quand les disques sont physiquement identiques,
	et que ce sont également des clones au niveau des
	données.</p><p>Quand vous utilisez FreeBSD, veillez à rétablir la
	numérotation naturelle des disques dans le BIOS, et
	laissez-là telle quelle.  Si vous devez inverser les
	disques, alors faites-le mais au niveau matériel en ouvrant
	votre boîtier et en
	déplaçant les cavaliers et les câbles.</p><div class="sidebar"><div xmlns="" class="titlepage"><div><div><div xmlns="http://www.w3.org/1999/xhtml" class="-title"></div></div></div></div><p>Bill transforme une vieille machine Wintel en une nouvelle
	  machine FreeBSD pour Fred.  Bill installe un disque SCSI comme
	  unité de disque SCSI zéro et install
	  FreeBSD dessus.</p><p>Fred commence à utiliser le système, mais
	  après plusieurs
	  jours remarque que le vieux disque SCSI signale de nombreuses
	  erreurs logiciels et en fait part à Bill.</p><p>Quelques jours après, Bill décide qu'il est
	  temps de s'occuper de ce problème, il va donc chercher un
	  disque SCSI identique dans la &#8220;réserve à
	  disques&#8221;.  Un contrôle de la surface indique que le
	  disque fonctionne correctement, aussi Bill installe ce disque comme
	  unité SCSI numéro quatre et effectue une copie
	  à l'identique du disque zéro sur le
	  disque quatre.  Maintenant que le nouveau disque est installé
	  et fonctionne parfaitement, Bill décide que ce serait une
	  bonne idée de commencer à l'utiliser, aussi
	  utilise-t-il une fonction dans le BIOS SCSI pour réordonner
	  les disques durs pour faire démarrer le système
	  à partir de l'unité SCSI
	  quatre.  FreeBSD démarre et fonctionne correctement.</p><p>Fred continue son travail pendant quelques jours, et
	  bientôt Bill et Fred décident qu'il est temps pour une
	  nouvelle aventure &#8212; temps pour mettre à jour vers une version
	  plus récente de FreeBSD.  Bill retire le disque SCSI
	  zéro parce qu'il était un peu capricieux et le
	  remplace par un autre identique provenant de la
	  &#8220;réserve à disques&#8221;.
	  Bill installe alors la nouvelle version de FreeBSD sur le
	  nouveau disque SCSI en utilisant les magiques disquettes
	  d'installation par FTP de Fred.  L'installation se passe
	  bien.</p><p>Fred utilise la nouvelle version de FreeBSD pendant
	  quelques jours, et certifie qu'elle est suffisamment stable pour
	  être utilisée dans le département
	  d'ingénierie.  Il est temps
	  de transférer tout son travail depuis l'ancienne version.
	  Alors Fred monte l'unité SCSI quatre (la dernière
	  copie de l'ancienne version de FreeBSD).  Fred est accablé
	  de constater que rien de son précieux travail n'est
	  présent sur l'unité SCSI quatre.</p><p>Ou sont passées les données?</p><p>Quand Bill à fait une copie parfaite du disque
	  SCSI zéro originel sur l'unité SCSI quatre,
	  l'unité quatre est devenue le &#8220;nouveau clone&#8221;.
	  Quand Bill a réordonné le
	  BIOS SCSI pour qu'il puisse démarrer sur l'unité
	  SCSI quatre, il était juste en train de se tromper.
	  FreeBSD tournait toujours sur l'unité SCSI zéro.
	  Faire de tels changements dans le BIOS fera qu'une partie ou tout
	  le code de démarrage et de chargement sera
	  lue sur le disque sélectionné par le
	  BIOS, mais quand les pilotes du noyau de FreeBSD prendrons le
	  contrôle, la numérotation des disques par le BIOS sera
	  ignorée, et FreeBSD reprendra la numérotation
	  normale des disques.
	  Dans l'illustration actuelle, le système a continué
	  d'opérer sur l'unité SCSI zéro d'origine,
	  et toutes les données de Fred se trouvaient là
	  et non pas sur l'unité SCSI
	  quatre.  Le fait que le système semblait fonctionner sur
	  l'unité quatre n'était juste qu'une impression due aux
	  attentes de nos utilisateurs.</p><p>Nous sommes heureux d'annoncer qu'aucun octet n'a
	  été détruit ou endommagé
	  durant la découverte de ce phénomène.
	  L'ancienne unité SCSI zéro a été
	  récupérée sur une pile de
	  disques au rebut, et tout le travail de Fred lui a
	  été rendu
	  (et Bill sait désormais qu'il peut compter jusqu'à
	  zéro).</p><p>Bien que cela soit des disques SCSI qui furent utilisés
	  dans cet exemple, le concept s'applique de la même
	  manière aux disques IDE.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="main-fdisk"></a>2.6.2. Création des tranches - &#8220;slices&#8221; en utilisant
	FDisk</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Aucun changement que vous faites à ce niveau de
	  l'installation ne sera écrit sur le disque.  Si vous pensez
	  que vous avez fait une erreur et que vous voulez recommencer,
	  vous pouvez utiliser les menus pour quitter
	  <span class="application">sysinstall</span> et essayer encore ou
	  appuyez sur <span class="keycap"><strong>U</strong></span> pour utiliser l'option
	  <span class="guimenuitem">Undo</span>.  Si
	  vous êtes perdu et ne voyez pas comment quitter, vous pouvez
	  toujours éteindre votre ordinateur.</p></div><p>Après avoir choisi de commencer une installation standard
      <span class="application">sysinstall</span> affichera ce message:</p><pre class="screen">                                 Message
 In the next menu, you will need to set up a DOS-style ("fdisk")
 partitioning scheme for your hard disk. If you simply wish to devote
 all disk space to FreeBSD (overwriting anything else that might be on
 the disk(s) selected) then use the (A)ll command to select the default
 partitioning scheme followed by a (Q)uit. If you wish to allocate only
 free space to FreeBSD, move to a partition marked "unused" and use the
 (C)reate command.
                                [  OK  ]

                      [ Press enter or space ]</pre><p>Appuyez sur <span class="keycap"><strong>Entrée</strong></span> comme demandé.
	On vous affichera alors une liste de tous les disques durs que le noyau
	a trouvés durant la détection des
	périphériques.  La <a class="xref" href="#sysinstall-fdisk-drive1" title="Figure 2.13. Sélection du disque pour FDisk">Figure 2.13, « Sélection du disque pour FDisk »</a> présente l'exemple d'un
	système avec deux disques IDE.  Ils ont été
	appelés <code class="filename">ad0</code> et
	<code class="filename">ad2</code>.</p><div class="figure"><a id="sysinstall-fdisk-drive1"></a><div class="figure-title">Figure 2.13. Sélection du disque pour FDisk</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-drive1.png" alt="Sélection du disque pour FDisk" /></div></div></div><br class="figure-break" /><p>Vous pourriez vous demander pourquoi
	<code class="filename">ad1</code> n'est pas listé ici.
	Pourquoi est-il manquant?</p><p>Considérez ce qu'il se produirait si vous aviez deux disques
	durs IDE, un en tant que maître sur le premier contrôleur
	IDE, et un autre en tant que maître sur le second
	contrôleur IDE.  Si FreeBSD numérotait ces derniers
	comme il les a trouvés, en tant
	que <code class="filename">ad0</code> et <code class="filename">ad1</code>
	alors tout devrait fonctionner.</p><p>Mais si vous ajoutiez un troisième disque, en tant que
	disque esclave sur le premier contrôleur IDE, ce serait
	maintenant <code class="filename">ad1</code>, et
	l'<code class="filename">ad1</code> précédent deviendrait
	<code class="filename">ad2</code>.
	Puisque les noms de périphériques
	(comme <code class="filename">ad1s1a</code>) sont utilisés pour
	trouver les systèmes de fichiers, vous pouvez soudainement
	découvrir que certains de vos systèmes de fichiers
	n'apparaissent plus correctement, et vous devrez modifier votre
	configuration de FreeBSD.</p><p>Pour s'affranchir de cela, le noyau peut être
	configuré pour nommer les périphériques IDE en
	fonction de l'endroit où ils
	sont placés, et non pas en fonction de l'ordre dans lequel ils
	ont été trouvés.  Avec cet arrangement le
	disque maître sur le
	second contrôleur IDE sera <span class="emphasis"><em>toujours</em></span>
	<code class="filename">ad2</code>, même s'il n'y a aucun disque
	<code class="filename">ad0</code> ou
	<code class="filename">ad1</code>.</p><p>Cette configuration est celle par défaut du noyau de
	FreeBSD, c'est pourquoi notre exemple montre
	<code class="filename">ad0</code> et <code class="filename">ad2</code>.
	La machine sur laquelle furent prises les captures d'écran avait
	des disques IDE sur les canaux maîtres de chaque
	contrôleur IDE, et aucun disque esclave.</p><p>Vous devrez choisir le disque sur lequel vous désirez
	installer FreeBSD, et ensuite appuyer sur <span class="guibutton">[ OK ]</span>.
	<span class="application">FDisk</span> démarrera, avec un écran
	semblable à celui montré sur la <a class="xref" href="#sysinstall-fdisk1" title="Figure 2.14. Partitions Fdisk typiques avant édition">Figure 2.14, « Partitions Fdisk typiques avant édition »</a>.</p><p>L'affichage de <span class="application">FDisk</span> est
	séparé en trois parties.</p><p>La première partie, occupant les deux premières
	lignes de l'écran, montre les détails au sujet du
	disque actuellement sélectionné, dont son nom sous
	FreeBSD, sa géométrie, et la
	taille du disque.</p><p>La deuxième partie montre les tranches qui sont actuellement
	présentes sur le disque, où elles débutent et
	se terminent, leur
	taille, le nom que leur donne FreeBSD, et leur description et
	sous-type.  Cette exemple montre deux petites tranches
	inutilisées, qui sont les conséquences de l'arrangement du
	disque sous PC.  Il montre également une grande tranche de type
	<acronym class="acronym">FAT</acronym>, qui est presque certainement le lecteur
	<code class="filename">C:</code> sous <span class="trademark">MS-DOS</span>® / <span class="trademark">Windows</span>®, et une tranche
	étendue, qui doit contenir d'autres lecteurs pour <span class="trademark">MS-DOS</span>® /
	<span class="trademark">Windows</span>®.</p><p>La troisième partie affiche les commandes disponibles dans
	<span class="application">FDisk</span>.</p><div class="figure"><a id="sysinstall-fdisk1"></a><div class="figure-title">Figure 2.14. Partitions Fdisk typiques avant édition</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-edit1.png" alt="Partitions Fdisk typiques avant édition" /></div></div></div><br class="figure-break" /><p>Ce que vous allez faire maintenant dépend de comment vous
	voulez diviser votre disque.</p><p>Si vous voulez utiliser tout le disque pour FreeBSD (ce qui
	effacera toutes les autres données sur votre disque quand vous
	confirmerez, plus tard dans le processus d'installation, que vous
	voulez que <span class="application">sysinstall</span> continue) alors
	vous pouvez appuyer sur <span class="keycap"><strong>A</strong></span>, ce qui correspond à
	l'option <span class="guimenuitem">Use Entire Disk</span> (utiliser
	l'intégralité du disque).  Les tranches existantes seront
	supprimées, et remplacées par une petite zone
	étiquetée
	<code class="literal">unused</code> (encore une fois, une particularité de
	l'organisation des disques sous PC), et ensuite une grande
	tranche pour FreeBSD.  Si vous faites cela vous devriez
	sélectionner la tranche FreeBSD nouvellement
	créée en utilisant
	les touches fléchées, et appuyer sur
	<span class="keycap"><strong>S</strong></span> pour
	marquer la tranche comme pouvant être démarrable.
	L'écran sera
	alors semblable à la <a class="xref" href="#sysinstall-fdisk2" title="Figure 2.15. Partionnement Fdisk utilisant l'intégralité du disque">Figure 2.15, « Partionnement Fdisk utilisant l'intégralité du
	  disque »</a>.  Notez
	le <code class="literal">A</code> dans la colonne
	<code class="literal">Flags</code>, qui indique que cette tranche est
	<span class="emphasis"><em>active</em></span>, et sera démarrable.</p><p>Si vous supprimez une tranche existante pour faire de la
	place pour FreeBSD alors vous devriez sélectionner la tranche en
	utilisant les touches fléchées, et ensuite appuyer sur
	<span class="keycap"><strong>D</strong></span>.  Vous pouvez alors appuyer sur
	<span class="keycap"><strong>C</strong></span>, on vous demandera la taille de la tranche
	que vous désirez créer.  Entrez la taille requise et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span>.  La valeur par
	défaut dans cette boîte de dialogue
	représente la tranche la plus grande possible que vous
	pouvez créer, qui peut être le plus grand bloc
	d'espace contiguë non alloué ou la taille de
	l'intégralité du disque dur.</p><p>Si vous avez déjà fait de la place pour FreeBSD
	(peut-être
	en utilisant un outil comme <span class="application"><span class="trademark">PartitionMagic</span>®</span>®) alors vous pouvez appuyer sur
	<span class="keycap"><strong>C</strong></span> pour créer une nouvelle tranche.  Encore une
	fois, vous serez sollicité pour entrer la taille de la tranche
	que vous désirez créer.</p><div class="figure"><a id="sysinstall-fdisk2"></a><div class="figure-title">Figure 2.15. Partionnement Fdisk utilisant l'intégralité du
	  disque</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-edit2.png" alt="Partionnement Fdisk utilisant l'intégralité du disque" /></div></div></div><br class="figure-break" /><p>Une fois terminé, appuyez sur <span class="keycap"><strong>Q</strong></span>.  Vos
	modifications seront sauvegardées dans
	<span class="application">sysinstall</span>, mais ne seront pas
	encore inscrites sur le disque.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bootmgr"></a>2.6.3. Installer un gestionnaire de démarrage</h3></div></div></div><p>Vous avez maintenant la possibilité d'installer un
	gestionnaire de démarrage.  En général, vous
	devriez installer
	le gestionnaire de démarrage de FreeBSD si:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Vous avez plus d'un disque, et vous avez installé
	    FreeBSD sur un disque autre que le premier.</p></li><li class="listitem"><p>Vous avez installé FreeBSD à côté
	    d'un autre système
	    d'exploitation sur le même disque, et vous voulez pouvoir
	    choisir de lancer soit FreeBSD soit l'autre système
	    d'exploitation au démarrage de votre ordinateur.</p></li></ul></div><p>Si FreeBSD sera le seul système d'exploitation sur
	cette machine, installé sur le premier disque dur,
	alors le gestionnaire de démarrage
	<span class="guimenuitem">Standard</span> suffira.
	Sélectionnez <span class="guimenuitem">None</span> si vous
	utilisez un gestionnaire de démarrage tiers capable de
	démarrer FreeBSD.</p><p>Faites votre choix, et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="sysinstall-bootmgr"></a><div class="figure-title">Figure 2.16. Menu du gestionnaire de démarrage de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/boot-mgr.png" alt="Menu du gestionnaire de démarrage de sysinstall" /></div></div></div><br class="figure-break" /><p>L'écran d'aide, obtenu par l'appui sur <span class="keycap"><strong>F1</strong></span>,
	discute des problèmes qui peuvent être
	rencontrés quand on
	essaye de partager un disque entre plusieurs systèmes
	d'exploitation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66139216"></a>2.6.4. Création de tranches - &#8220;slices&#8221; sur un
	autre disque</h3></div></div></div><p>S'il y a plus d'un disque, on reviendra à l'écran de
	sélection des disques après la sélection du
	gestionnaire de
	démarrage.  Si vous souhaitez installer FreeBSD sur plus d'un
	disque, alors vous pouvez choisir un autre disque ici et
	répéter le processus en utilisant
	<span class="application">FDisk</span>.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous installez FreeBSD sur un disque différent de
	  votre premier disque, alors le gestionnaire de démarrage
	  de FreeBSD doit être installé sur les deux disques.</p></div><div class="figure"><a id="sysinstall-fdisk-drive2"></a><div class="figure-title">Figure 2.17. Quitter la sélection de disque</div><div class="figure-contents"><div class="mediaobject"><img src="install/fdisk-drive2.png" alt="Quitter la sélection de disque" /></div></div></div><br class="figure-break" /><p>La touche <span class="keycap"><strong>Tab</strong></span> permet de basculer entre le
	dernier disque sélectionné, <span class="guibutton">[ OK ]</span>, et
	<span class="guibutton">[ Cancel ]</span>.</p><p>Appuyez sur <span class="keycap"><strong>Tab</strong></span> une fois pour basculer sur
	<span class="guibutton">[ OK ]</span>, ensuite appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour
	continuer l'installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdlabeleditor"></a>2.6.5. Créer des partitions en utilisant
	<span class="application">Disklabel</span></h3></div></div></div><p>Vous devez maintenant créer des partitions à
	l'intérieur de
	chaque tranche que vous venez de créer.  Rappelez-vous que
	chaque partition est représentée par une lettre, depuis
	<code class="literal">a</code> jusqu'à <code class="literal">h</code>, et que les
	partitions <code class="literal">b</code>, <code class="literal">c</code>, et
	<code class="literal">d</code> ont par convention des significations
	particulières que vous devriez respecter.</p><p>Certaines applications peuvent tirer avantage d'un
	partionnement particulier, tout spécialement si vous organisez
	vos partitions sur plus d'un disque.  Cependant, pour votre
	première installation de FreeBSD, vous ne devriez ne pas trop
	attacher d'importance à la façon dont vous divisez
	votre disque.
	Il est plus important que vous installiez FreeBSD et commenciez
	à apprendre à l'utiliser.  Vous pouvez toujours
	réinstaller
	FreeBSD pour modifier votre partionnement quand vous serez plus
	familier avec le système d'exploitation.</p><p>Cette organisation présente quatre partitions&#8212;une pour
	l'espace de pagination, et trois pour les systèmes de
	fichiers.</p><div class="table"><a id="idp66155088"></a><div class="table-title">Tableau 2.2. Partitionnement du premier disque</div><div class="table-contents"><table summary="Partitionnement du premier disque" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Partition</th><th>Système de fichiers</th><th>Taille</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">a</code></td><td><code class="filename">/</code></td><td>512 Mo</td><td>C'est le système de fichiers racine.  Tous les
		autres systèmes de fichiers seront montés sous ce
		dernier.  512 Mo est une taille raisonnable pour ce
		système de fichiers.  Vous ne devrez pas stocker trop de
		données dessus, comme une installation habituelle de
		FreeBSD prendra environ 128 Mo.  La place restante est pour les
		données temporaires, et laisse également de
		l'espace si les futures version de FreeBSD nécessitent
		plus de place dans <code class="filename">/</code></td></tr><tr><td><code class="literal">b</code></td><td>N/A</td><td>2-3 x RAM</td><td><p>L'espace de pagination du système
		  est placé
		  sur la partition <code class="literal">b</code>.  Choisir la bonne quantité
		  d'espace de pagination peut s'avérer être tout un
		  art.  Un bon principe est de prendre un espace de
		  pagination égal à deux ou trois fois la
		  mémoire
		  physique disponible sur le système (RAM).  Vous devrez
		  également avoir au moins 64 Mo d'espace de pagination,
		  donc si vous avez moins de 32 Mo de RAM dans votre
		  ordinateur fixez la taille de l'espace de pagination à
		  64 Mo.</p><p>

		  Si vous avez plus d'un disque alors vous pouvez
		  mettre de l'espace de pagination sur chaque disque.
		  FreeBSD utilisera alors chaque disque pour la
		  pagination, ce qui accélérera le processus de
		  pagination.  Dans ce cas calculez la quantité d'espace
		  dont vous avez besoin (e.g., 128 Mo), et divisez-la par
		  le nombre de disques que vous avez (e.g., deux disques)
		  pour obtenir la quantité à mettre sur chaque
		  disque,
		  dans cet exemple, 64 Mo d'espace de pagination par
		  disque.</p></td></tr><tr><td><code class="literal">e</code></td><td><code class="filename">/var</code></td><td>256 Mo à 1024nbsp;Mo</td><td>Le répertoire <code class="filename">/var</code> contient
		des fichiers variant constamment; fichiers de traces, et
		autre fichiers d'administration.  Beaucoup de ces
		fichiers sont lus et écrits de façon intensive
		durant le
		fonctionnement de FreeBSD.  Mettre ces fichiers sur un
		autre système de fichiers permet à FreeBSD
		d'optimiser l'accès à ces fichiers sans affecter
		les autres fichiers d'autres répertoires n'ayant pas
		les même conditions d'accès.</td></tr><tr><td><code class="literal">f</code></td><td><code class="filename">/usr</code></td><td>Le reste du disque (au moins 2nbsp;Go)</td><td>Tous vos autres fichiers seront normalement stockés
		dans <code class="filename">/usr</code>, et ses
		sous-répertoires.</td></tr></tbody></table></div></div><br class="table-break" /><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les valeurs ci-dessus sont données à titre
	  d'exemple et ne devraient être utilisées que
	  par des utilisateurs expérimentés.  Les
	  utilisateurs sont encouragés à utiliser le
	  partitionnement automatique appelé <code class="literal">Auto
	  Defaults</code> par l'éditeur de partition de
	  FreeBSD.</p></div><p>Si vous installez FreeBSD sur plus d'un disque alors vous
	devez également créer des partitions sur les autres
	tranches que vous avez configurées.
	La manière la plus simple est de créer
	deux partitions sur chaque disque, une pour l'espace de
	pagination, et une autre pour le système de fichiers.</p><div class="table"><a id="idp66185424"></a><div class="table-title">Tableau 2.3. Partitionnement pour les disques suivants</div><div class="table-contents"><table summary="Partitionnement pour les disques suivants" width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Partition</th><th>Système de fichiers</th><th>Taille</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">b</code></td><td>N/A</td><td>Voir description</td><td>Comme déjà discuté,
		vous pouvez répartir l'espace de
		pagination sur chaque disque.  Même si la partition
		<code class="literal">a</code> est libre, les conventions nous dictent
		que l'espace de pagination doit rester sur la partition
		<code class="literal">b</code>.</td></tr><tr><td><code class="literal">e</code></td><td>/disque<em class="replaceable"><code>n</code></em></td><td>le reste du disque</td><td>Le reste du disque est utilisé en une seule grande
		partition.  Cela pourrait facilement être la partition
		<code class="literal">a</code>, au lieu de la partition
		<code class="literal">e</code>.  Cependant, conventionnellement la
		partition <code class="literal">a</code> sur une tranche est
		réservée au système de fichiers racine
		(<code class="filename">/</code>).  Vous n'êtes pas obligé
		de suivre cette convention mais
		<span class="application">sysinstall</span> le fait, et donc
		la suivre rendra l'installation plus claire.  Vous
		pouvez choisir de monter ce système de fichiers
		n'importe où; cet exemple suggère que vous les
		montiez en tant que répertoires
		<code class="filename">/disquen</code>,
		où
		<em class="replaceable"><code>n</code></em> est un nombre qui change
		pour chaque disque.  Mais vous pouvez choisir une autre
		organisation si vous le préférez.</td></tr></tbody></table></div></div><br class="table-break" /><p>Après avoir choisi votre partitionnement vous pouvez
	maintenant le créer en utilisant
	<span class="application">sysinstall</span>.
	Vous verrez ce message:</p><pre class="screen">                                 Message
 Now, you need to create BSD partitions inside of the fdisk
 partition(s) just created. If you have a reasonable amount of disk
 space (200MB or more) and don't have any special requirements, simply
 use the (A)uto command to allocate space automatically. If you have
 more specific needs or just don't care for the layout chosen by
 (A)uto, press F1 for more information on manual layout.

                                [  OK  ]
                          [ Press enter or space ]</pre><p>Appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour lancer
	l'éditeur de
	partition de FreeBSD, appelé
	<span class="application">Disklabel</span>.</p><p>La <a class="xref" href="#sysinstall-label" title="Figure 2.18. L'éditeur Disklabel de sysinstall">Figure 2.18, « L'éditeur Disklabel de sysinstall »</a> présente l'affichage
	que l'on obtient quand on lance pour la première fois
	<span class="application">Disklabel</span>.  L'écran est
	divisé en trois parties.</p><p>Les premières lignes affichent le nom du disque sur lequel
	vous êtes en train de travailler, et la tranche qui contient les
	partitions que vous êtes en train de créer (à cet
	endroit <span class="application">Disklabel</span> nomme cela
	<code class="literal">Partition name</code>, nom de partition, plutôt que
	le nom slice).  Cet écran montre également la
	quantité d'espace libre dans la tranche; c'est à
	dire l'espace qui a été
	mis de côté dans la tranche, et qui n'a pas
	été encore attribué
	à une partition.</p><p>Le centre de l'écran présente les partitions qui
	ont été créées, le nom du système
	de fichiers que chaque partition
	contient, leur taille, et des options concernant la création du
	système de fichiers.</p><p>Le bas de l'écran donne les combinaisons de touches valides
	dans <span class="application">Disklabel</span>.</p><div class="figure"><a id="sysinstall-label"></a><div class="figure-title">Figure 2.18. L'éditeur Disklabel de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-ed1.png" alt="L'éditeur Disklabel de sysinstall" /></div></div></div><br class="figure-break" /><p><span class="application">Disklabel</span> peut automatiquement
	créer des partitions pour vous et leur assigner des tailles par
	défaut.  Les tailles par défaut sont
	déterminées à l'aide d'un algorithme
	interne basé sur la taille du disque.  Essayez cette
	fonction en appuyant sur
	<span class="keycap"><strong>A</strong></span>.  Vous verrez un affichage semblable à celui
	donné par la <a class="xref" href="#sysinstall-label2" title="Figure 2.19. L'éditeur Disklabel de sysinstall en mode automatique">Figure 2.19, « L'éditeur Disklabel de sysinstall en mode
	  automatique »</a>.  En fonction de
	la taille de votre disque, les valeurs par défaut peuvent
	être ou non appropriées.
	Cela n'a pas d'importance, car vous n'êtes
	pas obligé d'accepter ces valeurs.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le partionnement par défaut assigne
	    au répertoire <code class="filename">/tmp</code> sa propre partition
	    plutôt que d'appartenir à la partition
	    <code class="filename">/</code>.  Cela permet d'éviter de remplir la
	    partition <code class="filename">/</code> avec des fichiers
	    temporaires.</p></div><div class="figure"><a id="sysinstall-label2"></a><div class="figure-title">Figure 2.19. L'éditeur Disklabel de sysinstall en mode
	  automatique</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-auto.png" alt="L'éditeur Disklabel de sysinstall en mode automatique" /></div></div></div><br class="figure-break" /><p>Si vous décidez de ne pas utiliser les partitions
	par défaut
	et vous désirez les remplacer par les vôtres, utilisez les touches
	fléchées pour sélectionner la
	première partition, et appuyez sur <span class="keycap"><strong>D</strong></span> pour
	l'effacer.  Répétez cela pour effacer toutes les
	partitions suggérées.</p><p>Pour créer la première partition
	(<code class="literal">a</code>, montée en
	<code class="filename">/</code> &#8212; racine), assurez-vous que la tranche du
	disque correcte en haut de l'écran est sélectionnée,
	et appuyez sur
	<span class="keycap"><strong>C</strong></span>.  Une boîte de dialogue s'affichera et vous
	demandera la taille de la nouvelle partition (comme montré sur
	la <a class="xref" href="#sysinstall-label-add" title="Figure 2.20. Espace libre pour la partition racine">Figure 2.20, « Espace libre pour la partition racine »</a>).  Vous pouvez entrer
	la taille sous la forme du nombre de blocs disque que vous
	voulez utiliser, ou sous forme d'un nombre suivi
	soit par <code class="literal">M</code> pour mégaoctets,
	<code class="literal">G</code> pour gigaoctets, ou soit par
	<code class="literal">C</code> pour cylindres.</p><div class="figure"><a id="sysinstall-label-add"></a><div class="figure-title">Figure 2.20. Espace libre pour la partition racine</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root1.png" alt="Espace libre pour la partition racine" /></div></div></div><br class="figure-break" /><p>La taille par défaut proposée créera une partition qui
	occupera le reste de la tranche.  Si vous utilisez les tailles
	de partitions comme décrit dans l'exemple précédent, alors effacez la
	valeur proposée en utilisant <span class="keycap"><strong>Backspace</strong></span>,
	et ensuite tapez <strong class="userinput"><code>512M</code></strong>,
	comme présenté sur la <a class="xref" href="#sysinstall-label-add2" title="Figure 2.21. Edition de la taille de la partition racine">Figure 2.21, « Edition de la taille de la partition racine »</a>.  Puis appuyez sur <span class="guibutton">[ OK ]</span>.</p><div class="figure"><a id="sysinstall-label-add2"></a><div class="figure-title">Figure 2.21. Edition de la taille de la partition racine</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root2.png" alt="Edition de la taille de la partition racine" /></div></div></div><br class="figure-break" /><p>Après avoir choisi la taille de la partition on vous
	demandera si cette partition contiendra un système de fichiers
	ou de l'espace de pagination.
	La boîte de dialogue est présentée dans
	la <a class="xref" href="#sysinstall-label-type" title="Figure 2.22. Choisir le type de la partition racine">Figure 2.22, « Choisir le type de la partition racine »</a>.  Cette première
	partition contiendra un système de fichiers, vérifiez
	donc que <span class="guimenuitem">FS</span>
	est sélectionné et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="sysinstall-label-type"></a><div class="figure-title">Figure 2.22. Choisir le type de la partition racine</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-fs.png" alt="Choisir le type de la partition racine" /></div></div></div><br class="figure-break" /><p>Finalement, comme vous créez un système de
	fichiers, vous devez indiquer à
	<span class="application">Disklabel</span> où le
	système de fichiers sera monté.
	La boîte de dialogue est
	montrée sur la <a class="xref" href="#sysinstall-label-mount" title="Figure 2.23. Choisir le point de montage de la partition racine">Figure 2.23, « Choisir le point de montage de la partition racine »</a>.  Le
	point de montage du système de fichiers racine est
	<code class="filename">/</code>, tapez donc <strong class="userinput"><code>/</code></strong>, et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="sysinstall-label-mount"></a><div class="figure-title">Figure 2.23. Choisir le point de montage de la partition racine</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-root3.png" alt="Choisir le point de montage de la partition racine" /></div></div></div><br class="figure-break" /><p>L'affichage sera mis à jour pour montrer la partition
	nouvellement créée.  Vous devrez répéter
	cette procédure pour les
	autres partitions.  Quand vous créerez la partition de l'espace
	de pagination, on ne vous demandera pas de point de montage pour
	le système de fichiers, étant donné que les
	partitions de pagination ne sont jamais montées.
	Quand vous créez la dernière
	partition <code class="filename">/usr</code>, vous pouvez laisser la
	taille suggérée telle qu'elle, pour utiliser le
	reste de la tranche.</p><p>Votre dernier écran de l'éditeur DiskLabel de FreeBSD
	apparaîtra semblable à la
	<a class="xref" href="#sysinstall-label4" title="Figure 2.24. Editeur Disklabel de sysinstall">Figure 2.24, « Editeur Disklabel de sysinstall »</a>, bien que vos valeurs puissent
	être différentes.  Appuyez sur
	<span class="keycap"><strong>Q</strong></span> pour terminer.</p><div class="figure"><a id="sysinstall-label4"></a><div class="figure-title">Figure 2.24. Editeur Disklabel de sysinstall</div><div class="figure-contents"><div class="mediaobject"><img src="install/disklabel-ed2.png" alt="Editeur Disklabel de sysinstall" /></div></div></div><br class="figure-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-choosing"></a>2.7. Choisir ce que l'on va installer</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="distset"></a>2.7.1. Sélectionner l'ensemble de distribution</h3></div></div></div><p>Décider quel ensemble de distribution installer
	dépendra en
	grande partie de l'utilisation prévue du système et de la
	quantité d'espace disque disponible.
	Les options prédéfinies
	vont de l'installation la plus petite possible à l'installation
	de la totalité des éléments disponibles.
	Ceux qui sont nouveaux
	à <span class="trademark">UNIX</span>® et/ou FreeBSD devraient presque certainement choisir une
	de ces options prédéfinies.  Personnaliser un ensemble de
	distribution est normalement réservé à
	l'utilisateur plus expérimenté.</p><p>Appuyez sur <span class="keycap"><strong>F1</strong></span> pour plus d'informations
	sur les options des ensembles de distribution et sur ce qu'ils
	contiennent.  Une fois la lecture de l'aide terminée, l'appui
	sur <span class="keycap"><strong>Entrée</strong></span> ramènera au menu de
	sélection des distributions.</p><p>Si une interface graphique utilisateur est
	désirée alors un
	ensemble de distribution qui est précédé par un
	<code class="literal">X</code> devra être choisi.  La configuration
	du serveur X et la sélection d'un environnement de
	travail doivent être effectuées après
	l'installation de FreeBSD.  Plus d'information concernant la
	configuration d'un serveur X peut être trouvé
	dans le <a class="xref" href="#x11" title="Chapitre 6. Le système X Window">Chapitre 6, <em>Le système X Window</em></a>.</p><p><span class="application">Xorg</span> est la version d'X11
	qui sera installée par défaut.</p><p>Si la compilation d'un noyau personnalisé est prévue,
	sélectionnez une option qui inclut le code source.  Pour plus
	d'information sur l'intérêt d'un noyau personnalisé
	ou comment compiler un noyau personnalisé voir le <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><p>A l'évidence, le système le plus versatile est celui
	qui inclut tout.  S'il y a l'espace disque adéquat, choisissez
	<span class="guimenuitem">All</span> comme montré sur la <a class="xref" href="#distribution-set1" title="Figure 2.25. Choix de l'ensemble de distribution">Figure 2.25, « Choix de l'ensemble de distribution »</a> en utilisant les touches
	fléchées et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.
	S'il y a un problème quant à l'espace disque
	considérez l'utilisation d'une option plus appropriée
	à la situation.  Ne vous tracassez pas au sujet des choix d'ensembles, comme les autres ensembles de distribution peuvent
	être ajoutés après l'installation.</p><div class="figure"><a id="distribution-set1"></a><div class="figure-title">Figure 2.25. Choix de l'ensemble de distribution</div><div class="figure-contents"><div class="mediaobject"><img src="install/dist-set.png" alt="Choix de l'ensemble de distribution" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portscol"></a>2.7.2. Installer le catalogue des logiciels portés - &#8220;Ports
      collection&#8221;</h3></div></div></div><p>Après le choix de l'ensemble de distribution
	désiré, l'opportunité d'installer le catalogue
	des logiciels portés pour FreeBSD se présente.
	Le catalogue des logiciels portés est une
	méthode simple et commode pour installer des logiciels.  Le
	catalogue des logiciels portés ne contient pas le code source
	nécessaire pour compiler le logiciel.  A la place, c'est un ensemble de
	fichiers qui automatise le téléchargement, la
	compilation et l'installation de logiciels tierce-partie.  Le <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a> discute de
	l'utilisation du catalogue des logiciels portés.</p><p>Le programme d'installation ne vérifie pas si vous avez
	l'espace requis.  Sélectionnez cette option uniquement si vous
	disposez de l'espace disque adéquat.  Sous
	FreeBSD 10.1, le catalogue des logiciels portés
	occupe environ 440 Mo d'espace disque.  Vous pouvez
	sans risque envisager une plus grande valeur pour les versions
	de FreeBSD plus récentes.</p><pre class="screen">                         User Confirmation Requested
 Would you like to install the FreeBSD ports collection?

 This will give you ready access to over 24,000 ported software packages,
 at a cost of around 440 Mo of disk space when "clean" and possibly much
 more than that if a lot of the distribution tarballs are loaded
 (unless you have the extra CDs from a FreeBSD CD/DVD distribution
 available and can mount it on /cdrom, in which case this is far less
 of a problem).

 The ports collection is a very valuable resource and well worth having
 on your /usr partition, so it is advisable to say Yes to this option.

 For more information on the ports collection &amp; the latest ports,
 visit:
     http://www.FreeBSD.org/ports

                              [ Yes ]     No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> avec les touches
	fléchées pour installer le catalogue des logiciels
	portés ou <span class="guibutton">[ No ]</span> pour passer cette
	option.  Appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour continuer.
	Le menu de sélection de l'ensemble de distribution
	réapparaîtra.</p><div class="figure"><a id="distribution-set2"></a><div class="figure-title">Figure 2.26. Confirmer le choix de la distribution</div><div class="figure-contents"><div class="mediaobject"><img src="install/dist-set2.png" alt="Confirmer le choix de la distribution" /></div></div></div><br class="figure-break" /><p>Si vous êtes satisfait avec les options, sélectionnez
	<span class="guimenuitem">Exit</span> avec les touches fléchées,
	vérifiez que <span class="guibutton">[ OK ]</span> est surligné, et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour continuer.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-media"></a>2.8. Choisir votre support d'installation</h2></div></div></div><p>Si vous installez à partir d'un CDROM ou DVD, utilisez les touches
      fléchées pour sélectionner <span class="guimenuitem">Install from
      a FreeBSD CD/DVD</span>.
      Vérifiez que <span class="guibutton">[ OK ]</span> est surligné, puis
      appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour procéder à
      l'installation.</p><p>Pour les autre méthodes d'installation, sélectionnez
      l'option appropriée et suivez les instructions.</p><p>Appuyez sur <span class="keycap"><strong>F1</strong></span> pour afficher l'aide en ligne
      pour le support d'installation.  Appuyez sur
      <span class="keycap"><strong>Entrée</strong></span> pour revenir au menu de
      sélection du support.</p><div class="figure"><a id="choose-media"></a><div class="figure-title">Figure 2.27. Choisir le support d'installation</div><div class="figure-contents"><div class="mediaobject"><img src="install/media.png" alt="Choisir le support d'installation" /></div></div></div><br class="figure-break" /><div xmlns="" class="note"><h3 class="admontitle">Modes d'installation par FTP: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp66301264" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Il y a trois modes d'installation par FTP, vous pouvez
	choisir parmi: FTP actif, FTP passif, ou par l'intermédiaire d'un
	proxy HTTP.</p><div xmlns="http://www.w3.org/1999/xhtml" class="variablelist"><dl class="variablelist"><dt><span class="term">FTP actif: <span class="guimenuitem">Install from an FTP
	      server</span></span></dt><dd><p>Cette option fera que tous les transferts FTP
	      utiliseront le mode &#8220;actif&#8221;.  Cela ne
	      fonctionnera pas à travers un coupe-feu, mais fonctionnera
	      souvent avec de vieux serveurs FTP ne supportant pas le
	      mode passif.  Si votre connexion se bloque avec le mode
	      passif (mode par défaut), essayez le mode actif!</p></dd><dt><span class="term">FTP passif: <span class="guimenuitem">Install from an FTP server through a
	      firewall</span></span></dt><dd><a id="idp66306512" class="indexterm"></a><p>Cette option demande à <span class="application">sysinstall</span> d'utiliser le mode
	      &#8220;passif&#8221; pour toutes les opérations FTP.  Cela
	      permet à l'utilisateur de traverser les coupes-feu qui
	      n'acceptent pas les connexions entrantes sur des ports
	      TCP aléatoires.</p></dd><dt><span class="term">FTP par l'intermédiaire d'un proxy HTTP:
	    <span class="guimenuitem">Install from an FTP server through a http
	    proxy</span></span></dt><dd><a id="idp66309840" class="indexterm"></a><p>Cette option demande à <span class="application">sysinstall</span> d'utiliser le protocole
	      HTTP (comme pour un navigateur web) pour se connecter à un
	      proxy pour toutes les opérations FTP.  Le proxy traduira
	      toutes les requêtes et les transmettra au serveur FTP.
	      Cela permet aux utilisateurs de traverser les coupes-feu
	      qui n'autorisent pas les connexions FTP, mais offrent un
	      proxy HTTP.  Dans ce cas, vous devez préciser le proxy en
	      plus du serveur FTP.</p></dd></dl></div><p xmlns="http://www.w3.org/1999/xhtml">Pour un serveur proxy FTP, vous devriez normalement donner
	le nom du serveur que vous désirez comme partie du nom
	d'utilisateur, après le signe &#8220;@&#8221;.  Le serveur proxy
	&#8220;simulera&#8221; le serveur réel.  Par exemple, en
	supposant que vous voulez installer à partir de <code class="systemitem">ftp.FreeBSD.org</code>, en utilisant le serveur proxy
	FTP <code class="systemitem">foo.example.com</code>, écoutant sur
	le port 1234.</p><p xmlns="http://www.w3.org/1999/xhtml">Dans ce cas, rendez-vous dans le menu d'options, et fixez le
	nom d'utilisateur FTP (&#8220;username&#8221;) à
	<code class="literal">ftp@ftp.FreeBSD.org</code>, et le mot de passe
	(&#8220;password&#8221;) à votre adresse émail.
	Comme support
	d'installation, vous spécifiez FTP (ou FTP passif, si le proxy
	le supporte), et l'URL
	<code class="literal">ftp://foo.example.com:1234/pub/FreeBSD</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Puisque le répertoire <code class="filename">/pub/FreeBSD</code> de
	<code class="systemitem">ftp.FreeBSD.org</code> est traduit par le
	proxy en <code class="systemitem">foo.example.com</code>, vous êtes
	en mesure d'installer depuis <span class="emphasis"><em>cette</em></span> machine
	(qui ira chercher les fichiers sur <code class="systemitem">ftp.FreeBSD.org</code> quand l'installation
	réclamera des fichiers).</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-final-warning"></a>2.9. Procéder à l'installation</h2></div></div></div><p>L'installation peut être maintenant effectuée si
      désirée.  C'est également la dernière
      chance pour annuler l'installation et
      empêcher l'écriture sur le disque dur.</p><pre class="screen">                       User Confirmation Requested
 Last Chance! Are you SURE you want to continue the installation?

 If you're running this on a disk with data you wish to save then WE
 STRONGLY ENCOURAGE YOU TO MAKE PROPER BACKUPS before proceeding!

 We can take no responsibility for lost disk contents!

                             [ Yes ]    No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> et appuyez sur
      <span class="keycap"><strong>Entrée</strong></span> pour poursuivre.</p><p>La durée de l'installation variera en fonction de la
      distribution choisie, du support d'installation, et de
      la vitesse de l'ordinateur.  Une série de messages sera
      affichée
      pour indiquer la progression de l'installation.</p><p>L'installation est achevée quand le message suivant est
      affiché:</p><pre class="screen">                               Message

Congratulations! You now have FreeBSD installed on your system.

We will now move on to the final configuration questions.
For any option you do not wish to configure, simply select No.

If you wish to re-enter this utility after the system is up, you may
do so by typing: /usr/sbin/sysinstall .

                                 [ OK ]

                      [  Press enter or space  ]</pre><p>Appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour poursuivre avec les
      configurations de post-installation.</p><p>Sélectionner <span class="guibutton">[ No ]</span> et appuyer sur
      <span class="keycap"><strong>Entrée</strong></span> annulera l'installation et aucun
      changement ne sera fait à votre système.  Le message suivant
      apparaîtra:</p><pre class="screen">                                Message
Installation complete with some errors.  You may wish to scroll
through the debugging messages on VTY1 with the scroll-lock feature.
You can also choose "No" at the next prompt and go back into the
installation menus to retry whichever operations have failed.

                                 [ OK ]</pre><p>Ce message est généré parce que
      rien n'a été installé.
      L'appui sur <span class="keycap"><strong>Entrée</strong></span> ramènera au menu
      principal d'installation pour quitter l'installation.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-post"></a>2.10. Post-installation</h2></div></div></div><p>La configuration de diverses options suit l'installation.  Une
      option peut être configurée en accédant aux options de
      configuration avant de redémarrer le nouveau système
      FreeBSD ou après l'installation en utilisant la commande
      <code class="command">sysinstall</code> et en sélectionnant
      <span class="guimenuitem">Configure</span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inst-network-dev"></a>2.10.1. Configuration réseau</h3></div></div></div><p>Si vous avez précédemment configuré
	PPP pour une installation par FTP, cet écran n'apparaîtra
	pas et peut être
	configuré plus tard comme décrit ci-dessus.</p><p>Pour une information détaillée sur les
	réseaux locaux et la configuration de FreeBSD en
	passerelle/routeur référez-vous au
	chapitre <a class="link" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Administration
	réseau avancée</a>.</p><pre class="screen">                      User Confirmation Requested
   Would you like to configure any Ethernet or SLIP/PPP network devices?

                             [ Yes ]   No</pre><p>Pour configurer un périphérique réseau,
	sélectionnez <span class="guibutton">[ Yes ]</span> et appuyez
	sur <span class="keycap"><strong>Entrée</strong></span>.
	Sinon, sélectionnez <span class="guibutton">[ No ]</span> pour
	continuer.</p><div class="figure"><a id="ed-config1"></a><div class="figure-title">Figure 2.28. Sélection d'un périphérique Ethernet</div><div class="figure-contents"><div class="mediaobject"><img src="install/ed0-conf.png" alt="Sélection d'un périphérique Ethernet" /></div></div></div><br class="figure-break" /><p>Sélectionnez l'interface à configurer avec les touches
	fléchées et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><pre class="screen">                      User Confirmation Requested
       Do you want to try IPv6 configuration of the interface?

                              Yes   [ No ]</pre><p>Dans ce réseau local privé l'actuel protocole
	Internet (<acronym class="acronym">IPv4</acronym>) était suffisant et <span class="guibutton">[ No ]</span>
	a été sélectionné
	avec les touches fléchées et suivie
	d'<span class="keycap"><strong>Entrée</strong></span>.</p><p>Si vous êtes connecté à une
	réseau (<acronym class="acronym">IPv6</acronym>), existant avec un
	serveur <acronym class="acronym">RA</acronym>, alors
	choisissez <span class="guibutton">[ Yes ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  Cela prendra plusieurs secondes pour
	rechercher des serveurs RA.</p><pre class="screen">                             User Confirmation Requested
        Do you want to try DHCP configuration of the interface?

                              Yes   [ No ]</pre><p>Si DHCP (&#8220;Dynamic Host Configuration Protocol&#8221;)
	n'est pas requis sélectionnez <span class="guibutton">[ No ]</span>
	à l'aide des touches fléchées et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><p>Sélectionner <span class="guibutton">[ Yes ]</span> exécutera
	<span class="application">dhclient</span>, et en cas de succès,
	complétera l'information de configuration du réseau
	automatiquement.
	Référez-vous à la <a class="xref" href="#network-dhcp" title="29.5. Configuration réseau automatique (DHCP)">Section 29.5, « Configuration réseau automatique (DHCP) »</a> pour
	plus d'information.</p><p>L'écran de configuration réseau suivant montre la
	configuration du périphérique Ethernet pour un
	système qui sera
	passerelle pour un réseau local.</p><div class="figure"><a id="ed-config2"></a><div class="figure-title">Figure 2.29. Configuration réseau pour ed0</div><div class="figure-contents"><div class="mediaobject"><img src="install/ed0-conf2.png" alt="Configuration réseau pour ed0" /></div></div></div><br class="figure-break" /><p>Utilisez <span class="keycap"><strong>Tab</strong></span> pour choisir les champs
	d'information et compléter avec l'information
	appropriée:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Host - &#8220;Hôte&#8221;</span></dt><dd><p>Le nom complet de la machine, e.g. <code class="systemitem">k6-2.exemple.com</code>
	      dans ce cas.</p></dd><dt><span class="term">Domain - &#8220;Domaine&#8221;</span></dt><dd><p>Le nom du domaine auquel appartient votre machine, e.g.
	      <code class="systemitem">exemple.com</code> dans le cas présent.</p></dd><dt><span class="term">IPv4 Gateway - &#8220;Passerelle IPv4&#8221;</span></dt><dd><p>L'adresse IP de l'hôte transmettant les paquets aux
	      destinations non-locales.  Vous devez complétez cela seulement si la
	      machine est un noeud sur le réseau.  <span class="emphasis"><em>Laissez ce
	      champ vide</em></span> si la machine est destinée à
	      être la passerelle vers l'Internet pour le
	      réseau.  La passerelle (&#8220;gateway&#8221;)
	      IPv4 est également connue sous le nom de
	      passerelle par défaut ou route par
	      défaut.</p></dd><dt><span class="term">Name server - &#8220;Serveur de Noms&#8221;</span></dt><dd><p>L'adresse IP de votre serveur DNS local.  Il n'y a pas
	      de serveur DNS local sur ce réseau local privé aussi
	      l'adresse IP du serveur DNS du fournisseur d'accès
	      (<code class="systemitem">208.163.10.2</code>) fut utilisée.</p></dd><dt><span class="term">IPv4 address - &#8220;Adresse IPv4&#8221;</span></dt><dd><p>L'adresse IP employée pour cette interface fut
	      <code class="systemitem">192.168.0.1</code></p></dd><dt><span class="term">Netmask - &#8220;Masque de sous-réseau&#8221;</span></dt><dd><p>Le bloc d'adresse utilisé pour ce réseau local
	      est le bloc <code class="systemitem">192.168.0.0</code> - <code class="systemitem">192.168.0.255</code>) avec un
	      masque de sous-réseau de <code class="systemitem">255.255.255.0</code>.</p></dd><dt><span class="term">Extra options to ifconfig - &#8220;Options
	    supplémentaires pour ifconfig&#8221;</span></dt><dd><p>Toutes options d'<code class="command">ifconfig</code>
	      spécifiques aux
	      interfaces que vous voudriez ajouter.  Il n'y en avait
	      aucune dans ce cas-ci.</p></dd></dl></div><p>Utilisez <span class="keycap"><strong>Tab</strong></span> pour sélectionner <span class="guibutton">[ OK ]</span>
	une fois terminé et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><pre class="screen">                      User Confirmation Requested
        Would you like to Bring Up the ed0 interface right now?

                             [ Yes ]   No</pre><p>La sélection de <span class="guibutton">[ Yes ]</span> suivie
	d'<span class="keycap"><strong>Entrée</strong></span> rendra l'accès réseau
	de la machine opérationnel.  Cependant, cela
	ne n'accomplit pas grand chose durant l'installation puisque
	la machine a encore besoin d'être
	redémarrée.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="gateway"></a>2.10.2. Configurer la passerelle</h3></div></div></div><pre class="screen">                       User Confirmation Requested
       Do you want this machine to function as a network gateway?

                              [ Yes ]    No</pre><p>Si la machine jouera le rôle de passerelle pour le
	réseau local et transmettra les paquets entre machines alors
	sélectionnez <span class="guibutton">[ Yes ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  Si la machine est un noeud sur le
	réseau alors sélectionnez <span class="guibutton">[ No ]</span> et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour continuer.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inetd-services"></a>2.10.3. Configurer les services Internet</h3></div></div></div><pre class="screen">                      User Confirmation Requested
Do you want to configure inetd and the network services that is provides?

                               Yes   [ No ]</pre><p>Si <span class="guibutton">[ No ]</span> est sélectionné,
	divers services tel que <span class="application">telnetd</span> ne seront
	pas activés.  Cela signifie que des utilisateurs à
	distance ne pourront pas se connecter par l'intermédiaire de
	<span class="application">telnet</span> à cette machine.  Les
	utilisateurs locaux seront toujours en mesure d'accéder
	à des machines distantes avec
	<span class="application">telnet</span>.</p><p>Ces services peuvent être activés après
	l'installation en éditant <code class="filename">/etc/inetd.conf</code>
	avec votre éditeur
	de texte favori.  Voir la <a class="xref" href="#network-inetd-overview" title="29.2.1. Généralités">Section 29.2.1, « Généralités »</a> pour
	plus d'information.</p><p>Choisissez <span class="guibutton">[ Yes ]</span> si vous souhaitez
	configurer ces services pendant l'installation.  Une
	confirmation supplémentaire s'affichera:</p><pre class="screen">                      User Confirmation Requested
The Internet Super Server (inetd) allows a number of simple Internet
services to be enabled, including finger, ftp and telnetd.  Enabling
these services may increase risk of security problems by increasing
the exposure of your system.

With this in mind, do you wish to enable inetd?

                             [ Yes ]   No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> pour
	continuer.</p><pre class="screen">                      User Confirmation Requested
inetd(8) relies on its configuration file, /etc/inetd.conf, to determine
which of its Internet services will be available.  The default FreeBSD
inetd.conf(5) leaves all services disabled by default, so they must be
specifically enabled in the configuration file before they will
function, even once inetd(8) is enabled.  Note that services for
IPv6 must be seperately enabled from IPv4 services.

Select [Yes] now to invoke an editor on /etc/inetd.conf, or [No] to
use the current settings.

                             [ Yes ]   No</pre><p>Le choix <span class="guibutton">[ Yes ]</span> permettra d'ajouter
	des services en supprimant le <code class="literal">#</code> au début
	d'une ligne.</p><div class="figure"><a id="inetd-edit"></a><div class="figure-title">Figure 2.30. Edition d'<code class="filename">inetd.conf</code></div><div class="figure-contents"><div class="mediaobject"><img src="install/edit-inetd-conf.png" alt="Edition d'inetd.conf" /></div></div></div><br class="figure-break" /><p>Après avoir ajouté les services
	désirés, l'appui sur
	<span class="keycap"><strong>Echap</strong></span> affichera un menu qui permettra de
	quitter et sauver les changements.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ssh-login"></a>2.10.4. Autoriser les ouvertures de session SSH</h3></div></div></div><a id="idp66415440" class="indexterm"></a><pre class="screen">                      User Confirmation Requested
                  Would you like to enable SSH login?
                           Yes        [  No  ]</pre><p>Sélectionner <span class="guibutton">[ Yes ]</span> activera <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>, le
	programme <span class="quote">« <span class="quote">daemon</span> »</span> pour
	<span class="application">OpenSSH</span>.  Cela permettra
	l'ouverture à distance de sessions
	sécurisées sur votre machine.  Pour plus
	d'information au sujet d'<span class="application">OpenSSH</span>
	voir la <a class="xref" href="#openssh" title="15.11. OpenSSH">Section 15.11, « OpenSSH »</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ftpanon"></a>2.10.5. FTP anonyme</h3></div></div></div><a id="idp66420944" class="indexterm"></a><pre class="screen">                      User Confirmation Requested
 Do you want to have anonymous FTP access to this machine?

                              Yes    [ No ]</pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="deny-anon"></a>2.10.5.1. Interdire l'accès FTP anonyme</h4></div></div></div><p>Choisir le <span class="guibutton">[ No ]</span> par défaut et
	  appuyer sur <span class="keycap"><strong>Entrée</strong></span> permettra toujours aux
	  utilisateurs ayant des comptes avec mot de passe d'utiliser
	  FTP pour accéder à la machine.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ftpallow"></a>2.10.5.2. Autoriser l'accès FTP anonyme</h4></div></div></div><p>N'importe qui peut accéder à votre machine si vous
	  choisissez d'autoriser les connexions par FTP anonyme.  Les
	  implications au niveau de la sécurité devraient
	  être
	  considérées avant d'activer cette option.  Pour plus
	  d'information sur la sécurité voir le <a class="xref" href="#security" title="Chapitre 15. Sécurité">Chapitre 15, <em>Sécurité</em></a>.</p><p>Pour autoriser le FTP anonyme, utilisez les touches
	  fléchées pour sélectionner
	  <span class="guibutton">[ Yes ]</span> et appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span>.
	  Une confirmation supplémentaire
	  apparaîtra:</p><pre class="screen">                       User Confirmation Requested
 Anonymous FTP permits un-authenticated users to connect to the system
 FTP server, if FTP service is enabled.  Anonymous users are
 restricted to a specific subset of the file system, and the default
 configuration provides a drop-box incoming directory to which uploads
 are permitted.  You must separately enable both inetd(8), and enable
 ftpd(8) in inetd.conf(5) for FTP services to be available.  If you
 did not do so earlier, you will have the opportunity to enable inetd(8)
 again later.

 If you want the server to be read-only you should leave the upload
 directory option empty and add the -r command-line option to ftpd(8)
 in inetd.conf(5)

 Do you wish to continue configuring anonymous FTP?

                          [ Yes ]         No</pre><p>Ce message vous indique que le servec FTP devra
	  également être activé dans le fichier
	  <code class="filename">/etc/inetd.conf</code> si vous voulez
	  autoriser les connexions FTP anonymes, voir la <a class="xref" href="#inetd-services" title="2.10.3. Configurer les services Internet">Section 2.10.3, « Configurer les services Internet »</a>.  Sélectionnez <span class="guibutton">[ Yes ]</span> et
	  appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour continuer;
	  l'écran suivant (ou semblable)
	  apparaîtra:</p><div class="figure"><a id="anon-ftp2"></a><div class="figure-title">Figure 2.31. Configuration par défaut du FTP anonyme</div><div class="figure-contents"><div class="mediaobject"><img src="install/ftp-anon1.png" alt="Configuration par défaut du FTP anonyme" /></div></div></div><br class="figure-break" /><p>Utilisez la touche <span class="keycap"><strong>Tab</strong></span> pour choisir les
	  champs d'information et compléter avec l'information
	  appropriée:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">UID</span></dt><dd><p>L'ID utilisateur que vous voulez affecter
		à l'utilisateur du FTP anonyme.  Tous les
		fichiers chargés sur le serveur appartiendront
		à cet ID.</p></dd><dt><span class="term">Group - <span class="quote">« <span class="quote">Groupe</span> »</span></span></dt><dd><p>Le groupe auquel appartiendra l'utilisateur du FTP
		anonyme.</p></dd><dt><span class="term">Comment - <span class="quote">« <span class="quote">Commentaire</span> »</span></span></dt><dd><p>La chaîne de caractères
		décrivant cet utilisateur dans le fichier
		<code class="filename">/etc/passwd</code>.</p></dd><dt><span class="term">FTP Root Directory - <span class="quote">« <span class="quote">Répertoire racine
	      FTP</span> »</span></span></dt><dd><p>L'emplacement où seront conservés
		les fichiers du FTP anonyme.</p></dd><dt><span class="term">Upload Subdirectory - <span class="quote">« <span class="quote">Sous-répertoire
	      de téléchargement</span> »</span></span></dt><dd><p>L'emplacement où seront stockés les
		fichiers téléchargés sur le
		serveur par les utilisateurs du FTP anonyme.</p></dd></dl></div><p>Le répertoire racine du FTP sera placé dans
	  <code class="filename">/var</code> par défaut.  Si vous n'avez pas de
	  place à cet endroit pour les besoins prévus du FTP, le
	  répertoire <code class="filename">/usr</code> pourra être
	  utilisé en
	  configurant le répertoire racine FTP à
	  <code class="filename">/usr/ftp</code>.</p><p>Quand vous êtes satisfait de ces valeurs, appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span> pour continuer.</p><pre class="screen">                          User Confirmation Requested
         Create a welcome message file for anonymous FTP users?

                              [ Yes ]    No</pre><p>Si vous sélectionnez <span class="guibutton">[ Yes ]</span> et
	  appuyez sur <span class="keycap"><strong>Entrée</strong></span>, un éditeur sera
	  automatiquement lancé vous permettant d'éditer le
	  message.</p><div class="figure"><a id="anon-ftp4"></a><div class="figure-title">Figure 2.32. Edition du message de bienvenue du FTP</div><div class="figure-contents"><div class="mediaobject"><img src="install/ftp-anon2.png" alt="Edition du message de bienvenue du FTP" /></div></div></div><br class="figure-break" /><p>C'est un éditeur de texte appelé
	  <code class="command">ee</code>.
	  Utilisez les instructions pour modifier le message ou
	  faites-le plus tard en utilisant l'éditeur de texte de votre
	  choix.  Notez l'emplacement/le nom du fichier au bas de
	  l'écran.</p><p>Appuyez sur <span class="keycap"><strong>Echap</strong></span> et une boîte de
	  dialogue apparaîtra avec l'option <span class="guimenuitem">a) leave
	  editor</span> sélectionnée.  Appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span> pour quitter et continuer.
	  Appuyez à nouveau sur <span class="keycap"><strong>Entrée</strong></span>
	  pour sauvegarder les modifications si vous en avez
	  fait.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfsconf"></a>2.10.6. Configurer le système de fichiers réseau -
	NFS</h3></div></div></div><p>Le système de fichiers réseau (NFS) permet le
	partage de fichiers à travers un réseau.  Une machine
	peut être configurée en serveur, client, ou les deux.
	Référez-vous à la <a class="xref" href="#network-nfs" title="29.3. Système de fichiers réseau (NFS)">Section 29.3, « Système de fichiers réseau (NFS) »</a> pour plus d'information.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nsf-server-options"></a>2.10.6.1. Serveur NFS</h4></div></div></div><pre class="screen">                       User Confirmation Requested
 Do you want to configure this machine as an NFS server?

                              Yes    [ No ]</pre><p>S'il n'y a aucun de besoin de serveur NFS,
	  sélectionnez <span class="guibutton">[ No ]</span> et appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span>.</p><p>Si <span class="guibutton">[ Yes ]</span> est choisi, un message
	  apparaîtra indiquant que le fichier
	  <code class="filename">exports</code> doit être
	  créé.</p><pre class="screen">                               Message
Operating as an NFS server means that you must first configure an
/etc/exports file to indicate which hosts are allowed certain kinds of
access to your local file systems.
Press [Enter] now to invoke an editor on /etc/exports
                               [ OK ]</pre><p>Appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour continuer.  Un
	  éditeur de texte sera lancé pour permettre la
	  création et
	  l'edition du fichier <code class="filename">exports</code>.</p><div class="figure"><a id="nfs-server-edit"></a><div class="figure-title">Figure 2.33. Edition du fichier <code class="filename">exports</code></div><div class="figure-contents"><div class="mediaobject"><img src="install/nfs-server-edit.png" alt="Edition du fichier exports" /></div></div></div><br class="figure-break" /><p>Suivez les instructions pour ajouter les systèmes de
	  fichiers à exporter maintenant ou plus tard en utilisant
	  l'éditeur de texte de votre choix.  Notez le nom/l'emplacement
	  au bas de l'écran de l'éditeur.</p><p>Appuyez sur <span class="keycap"><strong>Echap</strong></span> et une boîte de
	  dialogue apparaîtra avec l'option <span class="guimenuitem">a) leave
	  editor</span> sélectionnée.  Appuyez sur
	  <span class="keycap"><strong>Entrée</strong></span> pour quitter et continuer.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfs-client-options"></a>2.10.6.2. Client NFS</h4></div></div></div><p>Le client NFS permet à votre machine
	  d'accéder à des serveurs NFS.</p><pre class="screen">                       User Confirmation Requested
 Do you want to configure this machine as an NFS client?

                              Yes   [ No ]</pre><p>Avec les touches fléchées, sélectionnez
	  <span class="guibutton">[ Yes ]</span> ou
	  <span class="guibutton">[ No ]</span> selon vos besoins et appuyez
	  sur <span class="keycap"><strong>Entrée</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="console"></a>2.10.7. Configuration de la console système</h3></div></div></div><p>Ils y a plusieurs options disponibles pour personnaliser la
	console système.</p><pre class="screen">                      User Confirmation Requested
       Would you like to customize your system console settings?

                              [ Yes ]  No</pre><p>Pour visualiser et configurer ces options, sélectionnez
	<span class="guibutton">[ Yes ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="saver-options"></a><div class="figure-title">Figure 2.34. Options de configuration de la console système</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver1.png" alt="Options de configuration de la console système" /></div></div></div><br class="figure-break" /><p>Une option généralement utilisée est
	l'économiseur d'écran.
	Utilisez les touches fléchées pour sélectionner
	<span class="guimenuitem">Saver</span> et appuyez ensuite sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="saver-select"></a><div class="figure-title">Figure 2.35. Options de l'économiseur d'écran</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver2.png" alt="Options de l'économiseur d'écran" /></div></div></div><br class="figure-break" /><p>Sélectionnez l'économiseur d'écran
	désiré en utilisant les
	touches fléchées et puis appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.
	Le menu de configuration de la console système
	réapparaîtra.</p><p>L'intervalle de temps par défaut est de 300 secondes.  Pour
	changer cet intervalle de temps, sélectionnez
	<span class="guimenuitem">Saver</span> à nouveau.  Au menu de
	configuration de l'économiseur d'écran,
	sélectionnez
	<span class="guimenuitem">Timeout</span> en utilisant les touches
	fléchées et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.
	Une boîte de dialogue apparaîtra:</p><div class="figure"><a id="saver-timeout"></a><div class="figure-title">Figure 2.36. Délai de l'économiseur d'écran</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver3.png" alt="Délai de l'économiseur d'écran" /></div></div></div><br class="figure-break" /><p>La valeur peut être changée, ensuite
	sélectionnez <span class="guibutton">[ OK ]</span>
	et appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour retourner au menu de
	configuration de la console système.</p><div class="figure"><a id="saver-exit"></a><div class="figure-title">Figure 2.37. Sortie de la configuration de la console système</div><div class="figure-contents"><div class="mediaobject"><img src="install/console-saver4.png" alt="Sortie de la configuration de la console système" /></div></div></div><br class="figure-break" /><p>En sélectionnant <span class="guimenuitem">Exit</span> et en
	appuyant sur <span class="keycap"><strong>Entrée</strong></span> on poursuivra avec les
	options de post-installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="timezone"></a>2.10.8. Réglage du fuseau horaire</h3></div></div></div><p>Régler le fuseau horaire sur votre machine lui permettra de
	corriger automatiquement tout changement horaire régional et
	d'exécuter d'autres fonctions liées au fuseau horaire
	correctement.</p><p>L'exemple présenté est pour une machine
	située dans le
	fuseau horaire oriental des Etats-Unis.  Vos choix changeront en
	fonction de votre position géographique.</p><pre class="screen">                      User Confirmation Requested
          Would you like to set this machine's time zone now?

                            [ Yes ]   No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour régler le fuseau
	horaire.</p><pre class="screen">                       User Confirmation Requested
 Is this machine's CMOS clock set to UTC? If it is set to local time
 or you don't know, please choose NO here!

                              Yes   [ No ]</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span>
	ou <span class="guibutton">[ No ]</span> en fonction de la configuration
	de l'horloge de la machine et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="set-timezone-region"></a><div class="figure-title">Figure 2.38. Choisissez votre région</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone1.png" alt="Choisissez votre région" /></div></div></div><br class="figure-break" /><p>La région appropriée est sélectionnée
	en utilisant les touches fléchées, puis en appuyant sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="set-timezone-country"></a><div class="figure-title">Figure 2.39. Sélectionnez votre pays</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone2.png" alt="Sélectionnez votre pays" /></div></div></div><br class="figure-break" /><p>Sélectionnez le pays approprié en utilisant les
	touches fléchées et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="set-timezone-locality"></a><div class="figure-title">Figure 2.40. Sélectionnez votre fuseau horaire</div><div class="figure-contents"><div class="mediaobject"><img src="install/timezone3.png" alt="Sélectionnez votre fuseau horaire" /></div></div></div><br class="figure-break" /><p>Le fuseau horaire approprié est sélectionné
	en utilisant les touches fléchées et en appuyant sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><pre class="screen">                            Confirmation
            Does the abbreviation 'EDT' look reasonable?

                            [ Yes ]   No</pre><p>Confirmez que l'abréviation pour le fuseau horaire est
	correcte.  Si cela semble bon, appuyez sur <span class="keycap"><strong>Enter</strong></span>
	pour continuer avec la configuration de post-installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxcomp"></a>2.10.9. Compatibilité Linux</h3></div></div></div><pre class="screen">                      User Confirmation Requested
          Would you like to enable Linux binary compatibility?

                            [ Yes ]   No</pre><p>La sélection de <span class="guibutton">[ Yes ]</span> et l'appui
	sur <span class="keycap"><strong>Entrée</strong></span> permettra d'exécuter des
	logiciels Linux sous FreeBSD.  L'installation ajoutera les logiciels
	pré-compilés appropriés pour la
	compatibilité Linux.</p><p>Si l'on installe par FTP, la machine devra être
	connectée à l'Internet.  Parfois un site FTP distant
	n'aura pas tous les ensembles de distributions comme la
	compatibilité binaire Linux.  Cela peut être
	installé plus tard si nécessaire.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mouse"></a>2.10.10. Configuration de la souris</h3></div></div></div><p>Cette option vous permettra de copier-coller du texte dans
	la console et les programmes utilisateur avec une souris 3
	boutons.  Si vous utilisez une souris 2 boutons,
	référez-vous à
	la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=moused&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">moused</span>(8)</span></a>, après l'installation pour des
	détails sur l'émulation du troisième bouton.
	Cet exemple décrit
	la configuration d'une souris non-USB (comme une souris PS/2
	ou sur port COM):</p><pre class="screen">                      User Confirmation Requested
         Does this system have a PS/2, serial, or bus mouse?

                            [ Yes ]   No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> pour une souris
	PS/2 ou série, ou <span class="guibutton">[ No ]</span> pour une souris USB et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="mouse-protocol"></a><div class="figure-title">Figure 2.41. Sélectionner la configuration du protocole de la souris</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse1.png" alt="Sélectionner la configuration du protocole de la souris" /></div></div></div><br class="figure-break" /><p>Utilisez les touches fléchées pour sélectionner
	<span class="guimenuitem">Type</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="set-mouse-protocol"></a><div class="figure-title">Figure 2.42. Configurer le protocole de la souris</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse2.png" alt="Configurer le protocole de la souris" /></div></div></div><br class="figure-break" /><p>La souris utilisée dans cet exemple est de type PS/2, aussi
	la valeur par défaut <span class="guimenuitem">Auto</span> était
	appropriée.  Pour changer le protocole, utilisez les touches
	fléchées pour sélectionner une autre option.
	Vérifiez que <span class="guibutton">[ OK ]</span> est surligné puis appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour quitter ce menu.</p><div class="figure"><a id="config-mouse-port"></a><div class="figure-title">Figure 2.43. Configuration du port de la souris</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse3.png" alt="Configuration du port de la souris" /></div></div></div><br class="figure-break" /><p>Utilisez les touches fléchées pour sélectionner
	<span class="guimenuitem">Port</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="set-mouse-port"></a><div class="figure-title">Figure 2.44. Choisir le port de la souris</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse4.png" alt="Choisir le port de la souris" /></div></div></div><br class="figure-break" /><p>Ce système avait une souris PS/2, aussi la valeur par
	défaut <span class="guimenuitem">PS/2</span> était
	appropriée.  Pour changer le port, utilisez les touches
	fléchées et puis appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="test-daemon"></a><div class="figure-title">Figure 2.45. Activer le &#8220;daemon&#8221; - gestionnaire de la
	  souris</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse5.png" alt="Activer le &#8220;daemon&#8221; - gestionnaire de la souris" /></div></div></div><br class="figure-break" /><p>Finalement, utilisez les touches fléchées
	pour sélectionner <span class="guimenuitem">Enable</span>, et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour activer et
	tester le gestionnaire de la souris.</p><div class="figure"><a id="test-mouse-daemon"></a><div class="figure-title">Figure 2.46. Tester le gestionnaire de la souris</div><div class="figure-contents"><div class="mediaobject"><img src="install/mouse6.png" alt="Tester le gestionnaire de la souris" /></div></div></div><br class="figure-break" /><p>Déplacez la souris sur l'écran et vérifiez
	que le curseur répond correctement.  Si c'est le
	cas, sélectionnez <span class="guibutton">[ Yes ]</span>
	et appuyez sur <span class="keycap"><strong>Enter</strong></span>.  Si ce n'est pas
	le cas, la souris n'a pas été configurée
	correctement &#8212; sélectionnez <span class="guibutton">[ No ]</span>
	et essayez d'utiliser des options de configuration
	différentes.</p><p>Sélectionnez
	<span class="guimenuitem">Exit</span> avec les touches fléchées
	et appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour continuer la
	configuration de post-installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="packages"></a>2.10.11. Installer des logiciels pré-compilés -
      &#8220;packages&#8221;</h3></div></div></div><p>Les &#8220;packages&#8221; sont des logiciels
	pré-compilés
	et sont une manière commode d'installer des programmes.</p><p>L'installation d'un logiciel pré-compilé est
	présenté comme illustration.
	Des logiciels pré-compilés supplémentaires
	peuvent être également ajoutés à ce
	moment-là si désiré.  Après
	l'installation <code class="command">sysinstall</code> peut être
	utilisé pour ajouter des logiciels pré-compilés
	supplémentaires.</p><pre class="screen">                     User Confirmation Requested
 The FreeBSD package collection is a collection of hundreds of
 ready-to-run applications, from text editors to games to WEB servers
 and more. Would you like to browse the collection now?

                            [ Yes ]   No</pre><p>La sélection de <span class="guibutton">[ Yes ]</span> et
	l'appui sur <span class="keycap"><strong>Entrée</strong></span> seront suivis par les
	écrans de sélection des logiciels
	pré-compilés:</p><div class="figure"><a id="package-category"></a><div class="figure-title">Figure 2.47. Sélection d'une catégorie de logiciels
	  pré-compilés</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-cat.png" alt="Sélection d'une catégorie de logiciels pré-compilés" /></div></div></div><br class="figure-break" /><p>Seuls les logiciels du support d'installation sont
	disponibles pour être installés à
	n'importe quel moment.</p><p>Tous les logiciels disponibles seront affichés si
	<span class="guimenuitem">All</span> est sélectionné ou
	vous pouvez choisir une catégorie particulière.
	Faites votre sélection en
	utilisant les touches fléchées puis appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><p>Un menu s'affichera en montrant tous les logiciels
	pré-compilés disponibles pour la catégorie
	sélectionnée:</p><div class="figure"><a id="package-select"></a><div class="figure-title">Figure 2.48. Sélection des logiciels pré-compilés</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-sel.png" alt="Sélection des logiciels pré-compilés" /></div></div></div><br class="figure-break" /><p>L'interpréteur de commande <span class="application">bash</span>
	apparaît sélectionné.  Choisissez autant de
	logiciels que désiré
	en les surlignant et en appuyant sur la touche
	<span class="keycap"><strong>Espace</strong></span>.  Une courte description de chaque
	logiciel apparaîtra dans le coin inférieur gauche de
	l'écran.</p><p>En appuyant sur la touche <span class="keycap"><strong>Tab</strong></span> on basculera
	entre le dernier logiciel pré-compilé, <span class="guibutton">[ OK ]</span>, et
	<span class="guibutton">[ Cancel ]</span>.</p><p>Quand vous avez fini de marquer les logiciels
	pré-compilés
	pour l'installation, appuyez sur <span class="keycap"><strong>Tab</strong></span> une
	nouvelle fois pour basculer sur <span class="guibutton">[ OK ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour revenir au menu de sélection
	des logiciels pré-compilés.</p><p>Les touches fléchées gauche et droite basculeront
	également entre <span class="guibutton">[ OK ]</span> et <span class="guibutton">[ Cancel ]</span>.
	Cette méthode peut être utilisée pour
	sélectionner <span class="guibutton">[ OK ]</span> et ensuite appuyer sur
	<span class="keycap"><strong>Entrée</strong></span> pour retourner au menu de
	sélection des
	logiciels pré-compilés.</p><div class="figure"><a id="package-install"></a><div class="figure-title">Figure 2.49. Installation des logiciels pré-compilés</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-install.png" alt="Installation des logiciels pré-compilés" /></div></div></div><br class="figure-break" /><p>Utilisez la touche <span class="keycap"><strong>Tab</strong></span> et les touches fléchées pour sélectionner
	<span class="guibutton">[ Install ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  Vous devrez alors confirmer que vous
	voulez installer les logiciels pré-compilés:</p><div class="figure"><a id="package-install-confirm"></a><div class="figure-title">Figure 2.50. Confirmation de l'installation de logiciels pré-compilés</div><div class="figure-contents"><div class="mediaobject"><img src="install/pkg-confirm.png" alt="Confirmation de l'installation de logiciels pré-compilés" /></div></div></div><br class="figure-break" /><p>Sélectionner <span class="guibutton">[ OK ]</span> et l'appui sur
	<span class="keycap"><strong>Entrée</strong></span> lancera l'installation des logiciels.
	Des messages d'installation apparaîtront jusqu'à la fin de
	l'installation.  Prenez note des éventuels messages
	d'erreur.</p><p>La configuration se poursuit après que les logiciels
	pré-compilés soient installés.  Si vous
	ne choisissez aucun logiciel, et souhaitez retourner à la
	configuration finale, sélectionnez
	<span class="guibutton">Install</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="addusers"></a>2.10.12. Ajouter des Utilisateurs/Groupes</h3></div></div></div><p>Vous devriez ajouter au moins un utilisateur pendant
	l'installation de sorte que vous puissiez utiliser le système
	sans être attaché en tant que <code class="systemitem">root</code>.
	La partition racine est généralement petite et utiliser
	des applications en tant que <code class="systemitem">root</code> peut
	rapidement la remplir.  Un plus grand danger est signalé
	ci-dessous:</p><pre class="screen">                     User Confirmation Requested
 Would you like to add any initial user accounts to the system? Adding
 at least one account for yourself at this stage is suggested since
 working as the "root" user is dangerous (it is easy to do things which
 adversely affect the entire system).

                            [ Yes ]   No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour continuer avec l'ajout d'un
	utilisateur.</p><div class="figure"><a id="add-user2"></a><div class="figure-title">Figure 2.51. Sélectionner l'ajout d'utilisateur</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser1.png" alt="Sélectionner l'ajout d'utilisateur" /></div></div></div><br class="figure-break" /><p>Sélectionnez <span class="guimenuitem">User</span> avec les touches
	fléchées et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="add-user3"></a><div class="figure-title">Figure 2.52. Ajout de l'information utilisateur</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser2.png" alt="Ajout de l'information utilisateur" /></div></div></div><br class="figure-break" /><p>Les descriptions suivantes apparaîtront dans la partie
	inférieure de l'écran au fur et à mesure que les
	éléments seront sélectionnés avec
	<span class="keycap"><strong>Tab</strong></span> pour aider dans l'entrée
	des informations nécessaires:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Login ID - &#8220;Indentifiant&#8221;</span></dt><dd><p>L'identifiant du nouvel utilisateur (obligatoire).</p></dd><dt><span class="term">UID</span></dt><dd><p>L'identifiant numérique pour cet utilisateur (laisser
	      tel quel pour le choix automatique).</p></dd><dt><span class="term">Group - &#8220;Groupe&#8221;</span></dt><dd><p>Le nom du groupe pour cet utilisateur (laisser
	      tel quel pour le choix automatique).</p></dd><dt><span class="term">Password - &#8220;Mot de passe&#8221;</span></dt><dd><p>Le mot de passe pour cet utilisateur (compléter ce
	      champ avec précaution!).</p></dd><dt><span class="term">Full name - &#8220;Nom complet&#8221;</span></dt><dd><p>Le nom complet de l'utilisateur (commentaire).</p></dd><dt><span class="term">Member groups - &#8220;Membre des groupes&#8221;</span></dt><dd><p>Les groupes auxquels appartient l'utilisateur (i.e.
	      dont il a les droits accès).</p></dd><dt><span class="term">Home directory - &#8220;Répertoire
	    d'utilisateur&#8221;</span></dt><dd><p>Le répertoire de l'utilisateur (laisser
	      tel quel pour le choix automatique).</p></dd><dt><span class="term">Login shell - &#8220;L'interpréteur de
	    commande&#8221;</span></dt><dd><p>L'interpréteur de commande de l'utilisateur (laisser
	      tel quel pour le choix automatique, i.e.
	      <code class="filename">/bin/sh</code>).</p></dd></dl></div><p>On a changé l'interpréteur de commande
	<code class="filename">/bin/sh</code> pour
	<code class="filename">/usr/local/bin/bash</code> afin d'utiliser
	<span class="application">bash</span> qui a été installé
	précédemment sous forme de logiciel
	pré-compilé.  N'essayez pas d'utiliser un
	interpréteur de commande qui n'existe pas ou vous ne serez pas
	en mesure d'ouvrir de session.  L'interpréteur de
	commande le plus commun dans le monde BSD est
	l'interpréteur C shell, qui peut être
	spécifié à l'aide de
	<code class="filename">/bin/tcsh</code>.</p><p>L'utilisateur a aussi été ajouté au groupe
	<code class="systemitem">wheel</code> pour qu'il puisse devenir
	super-utilisateur avec les privilèges de
	<code class="systemitem">root</code>.</p><p>Quand vous êtes satisfait, appuyez sur <span class="guibutton">[ OK ]</span> et le menu
	de gestion des utilisateurs et des groupes
	réapparaîtra:</p><div class="figure"><a id="add-user4"></a><div class="figure-title">Figure 2.53. Quitter la gestion des utilisateurs et des groupes</div><div class="figure-contents"><div class="mediaobject"><img src="install/adduser3.png" alt="Quitter la gestion des utilisateurs et des groupes" /></div></div></div><br class="figure-break" /><p>Des groupes peuvent également être ajoutés
	à ce moment si des besoins spécifiques sont connus.
	Sinon, cela pourra être
	fait en utilisant <code class="command">sysinstall</code> quand
	l'installation sera achevée.</p><p>Quand vous en avez terminé avec l'ajout d'utilisateurs,
	sélectionnez <span class="guimenuitem">Exit</span> avec les touches
	fléchées et appuyez sur <span class="keycap"><strong>Entrée</strong></span>
	pour continuer l'installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rootpass"></a>2.10.13. Définir le mot de passe de <code class="systemitem">root</code></h3></div></div></div><pre class="screen">                        Message
 Now you must set the system manager's password.
 This is the password you'll use to log in as "root".

                         [ OK ]

               [ Press enter or space ]</pre><p>Appuyez sur <span class="keycap"><strong>Entrée</strong></span> pour définir le
	mot de passe de <code class="systemitem">root</code>.</p><p>Le mot de passe devra être saisi deux fois correctement.
	Inutile de dire, que vous devez vous assurer d'avoir un moyen
	de retrouver le mot de passe si vous l'oubliez.  Notez que le
	mot de passe que vous taperez ne s'affichera pas, il ne sera
	pas non plus remplacé par des astérisques.</p><pre class="screen">New password:
Retype new password :</pre><p>L'installation continuera après que le mot de passe ait
	été entré avec succès.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="exit-inst"></a>2.10.14. Quitter l'installation</h3></div></div></div><p>Si vous devez configurer des <a class="link" href="#network-services" title="2.10.15. Configuration des services réseaux supplémentaires">services
	réseau supplémentaires</a> ou toute autre
	configuration, vous pouvez le faire à ce moment-là
	ou après l'installation en
	utilisant <code class="command">sysinstall</code>.</p><pre class="screen">                     User Confirmation Requested
 Visit the general configuration menu for a chance to set any last
 options?

                              Yes   [ No ]</pre><p>Sélectionnez <span class="guibutton">[ No ]</span> avec les touches
	fléchées et appuyez sur <span class="keycap"><strong>Entrée</strong></span>
	pour retourner au menu principal d'installation.</p><div class="figure"><a id="final-main"></a><div class="figure-title">Figure 2.54. Quitter l'installation</div><div class="figure-contents"><div class="mediaobject"><img src="install/mainexit.png" alt="Quitter l'installation" /></div></div></div><br class="figure-break" /><p>Sélectionnez <span class="guibutton">[X Exit Install]</span> avec les
	touches fléchées et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  On vous demandera de confirmer
	votre désir de quitter l'installation:</p><pre class="screen">                     User Confirmation Requested
 Are you sure you wish to exit? The system will reboot (be sure to
 remove any floppies/CDs/DVDs from the drives).

                            [ Yes ]   No</pre><p>Sélectionnez <span class="guibutton">[ Yes ]</span> et retirez la
	disquette si vous avez démarré depuis le lecteur de
	disquette.
	Le lecteur de CDROM est verrouillé jusqu'au redémarrage
	de la machine.  Le lecteur de CDROM est alors
	déverrouillé et le CDROM
	peut être retiré du lecteur (rapidement).</p><p>Le système redémarrera aussi faites attention
	à tout message d'erreur qui pourrait apparaître, voir
	la <a class="xref" href="#freebsdboot" title="2.10.16. Démarrage de FreeBSD">Section 2.10.16, « Démarrage de FreeBSD »</a> pour plus de
	détails.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-services"></a>2.10.15. Configuration des services réseaux
	supplémentaires</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>La configuration des services réseaux peut
	être une tâche intimidante pour les nouveaux
	utilisateurs s'ils ne possèdent pas de connaissances
	dans ce domaine.  L'accès réseau, y compris
	l'Internet, est un élément essentiel de tout
	système d'exploitation moderne, c'est le cas de FreeBSD;
	il en résulte, qu'il est très utile de
	comprendre un peu les capacités réseau
	étendues de FreeBSD.  Effectuer cette configuration lors
	de l'installation garantira que les utilisateurs ont une
	compréhension des divers services qui leur sont
	disponibles.</p><p>Les services réseaux sont des programmes qui
	acceptent des entrées depuis n'importe quel endroit du
	réseau.  De nombreux efforts sont fait pour s'assurer
	que ces programmes ne feront rien de &#8220;nocif&#8221;.
	Malheureusement, les programmeurs ne sont pas parfait et par
	le passé il y a eu des cas où des bogues dans
	les services réseaux ont été
	exploités par des personnes malveillantes pour faire de
	mauvaises choses.  Il est donc important que vous n'activiez
	que les services dont vous avez besoin.  Dans le doute, il
	vaut mieux que vous n'activiez pas un service réseau
	avant que vous ne vous rendiez compte que vous en avez
	réellement besoin.  Vous pouvez toujours l'activer plus
	tard en relançant <span class="application">sysinstall</span>
	ou en utilisant les options fournies par le fichier
	<code class="filename">/etc/rc.conf</code>.</p><p>Sélectionner <span class="guimenu">Networking</span> fera
	apparaître un menu similaire au suivant:</p><div class="figure"><a id="network-configuration"></a><div class="figure-title">Figure 2.55. Configuration réseau</div><div class="figure-contents"><div class="mediaobject"><img src="install/net-config-menu1.png" alt="Configuration réseau" /></div></div></div><br class="figure-break" /><p>La première option,
	<span class="guimenuitem">Interfaces</span>, a été
	précédemment abordée dans la <a class="xref" href="#inst-network-dev" title="2.10.1. Configuration réseau">Section 2.10.1, « Configuration réseau »</a>, aussi cette option peut
	être ignorée sans risque.</p><p>La sélection de l'option
	<span class="guimenuitem">AMD</span> ajoute le support de
	l'utilitaire de montage automatique <acronym class="acronym">BSD</acronym>.
	Il est généralement employé en
	conjonction avec le protocole <acronym class="acronym">NFS</acronym> (voir
	plus bas) pour monter automatiquement les systèmes de
	fichiers distants.  Aucune configuration particulière
	n'est ici nécessaire.</p><p>La ligne suivante est l'option <span class="guimenuitem">AMD
	Flags</span>.  Quand elle est
	sélectionnée, un menu s'affichera pour que vous
	puissiez saisir les paramètres spécifiques
	à <acronym class="acronym">AMD</acronym>.  Le menu affiche
	déjà un ensemble d'options par
	défaut:</p><pre class="screen">-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map</pre><p>L'option <code class="option">-a</code> fixe l'emplacement de
	montage par défaut qui est ici
	<code class="filename">/.amd_mnt</code>.  L'option
	<code class="option">-l</code> spécifie le fichier journal par
	défaut, cependant quand <code class="literal">syslogd</code> est
	utilisé toutes les traces seront envoyées au
	&#8220;daemon&#8221; gérant les journaux
	systèmes.  Le répertoire <code class="filename">/host</code> est employé pour
	monter un système de fichiers exporté par une
	machine distante, tandis que le répertoire <code class="filename">/net</code> est utilisé pour
	monter un système de fichiers exporté à
	partir d'une adresse <acronym class="acronym">IP</acronym>.  Le fichier
	<code class="filename">/etc/amd.map</code> définit les options
	par défaut pour les exportations
	<acronym class="acronym">AMD</acronym>.</p><a id="idp66685520" class="indexterm"></a><p>L'option <span class="guimenuitem">Anon FTP</span> autorise les
	connexions <acronym class="acronym">FTP</acronym> anonymes.
	Sélectionnez cette option pour faire de la machine un
	serveur <acronym class="acronym">FTP</acronym> anonyme.  Soyez cependant
	conscient des risques de sécurité
	impliqués avec cette option.  Un autre menu sera
	affiché pour expliquer les risques au niveau de la
	sécurité et la configuration en
	détail.</p><p>Le menu de configuration
	<span class="guimenuitem">Gateway</span> paramétrera la
	machine pour agir en passerelle comme expliqué
	précédemment.  Cela peut être
	utilisé pour désactiver l'option
	<span class="guimenuitem">Gateway</span> si vous l'avez
	sélectionné accidentellement durant le processus
	d'installation.</p><p>L'option <span class="guimenuitem">Inetd</span> peut être
	utilisée pour configurer ou complètement
	désactiver le &#8220;daemon&#8221; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> comme
	exposé plus haut.</p><p>L'option <span class="guimenuitem">Mail</span> est
	employée pour configurer l'agent de transfert du
	courrier électronique (&#8220;MTA&#8221;) par
	défaut du système.  Choisir cette option fera
	afficher le menu suivant:</p><div class="figure"><a id="mta-selection"></a><div class="figure-title">Figure 2.56. Sélection du MTA par défaut</div><div class="figure-contents"><div class="mediaobject"><img src="install/mta-main.png" alt="Sélection du MTA par défaut" /></div></div></div><br class="figure-break" /><p>On vous propose ici un choix de <acronym class="acronym">MTA</acronym>
	à installer et à utiliser par défaut.  Un
	<acronym class="acronym">MTA</acronym> n'est ni plus ni moins qu'un serveur de
	courrier électronique qui délivre le courrier
	électronique aux utilisateurs sur le système ou
	sur l'Internet.</p><p>Sélectionner <span class="guimenuitem">Sendmail</span>
	installera le serveur <span class="application">sendmail</span> qui
	est celui par défaut sous FreeBSD. L'option
	<span class="guimenuitem">Sendmail local</span> fera en sorte que
	<span class="application">sendmail</span> soit le
	<acronym class="acronym">MTA</acronym> par défaut, mais
	désactivera sa capacité à recevoir du
	courrier électronique en provenance de l'Internet.  Les
	autres options, <span class="guimenuitem">Postfix</span> et
	<span class="guimenuitem">Exim</span> agissent de façon
	similaire à <span class="guimenuitem">Sendmail</span>.  Dans
	les deux cas le courrier électronique sera
	également distribué; cependant, certains
	utilisateurs, préfèrent ces alternatives au
	<acronym class="acronym">MTA</acronym>
	<span class="application">sendmail</span>.</p><p>Après la sélection d'un
	<acronym class="acronym">MTA</acronym>, ou avoir choisi de ne pas
	sélectionner de MTA, le menu de configuration du
	réseau apparaîtra avec l'option suivante qui est
	<span class="guimenuitem">NFS client</span>.</p><p>L'option <span class="guimenuitem">NFS client</span> configurera
	le système pour communiquer avec un serveur via
	<acronym class="acronym">NFS</acronym>.  Un serveur <acronym class="acronym">NFS</acronym>
	rend disponible à d'autres serveurs des systèmes
	de fichiers par l'intermédiaire du protocole
	<acronym class="acronym">NFS</acronym>.  Si c'est une machine
	indépendante, cette option peut rester
	désactivée.  Ce système peut demander
	plus de configuration ultérieurement, consultez la
	<a class="xref" href="#network-nfs" title="29.3. Système de fichiers réseau (NFS)">Section 29.3, « Système de fichiers réseau (NFS) »</a> pour plus d'informations sur la
	configuration du client et du serveur.</p><p>Sous cette option se trouve l'option <span class="guimenuitem">NFS
	server</span>, vous permettant de configurer le
	système comme serveur <acronym class="acronym">NFS</acronym>.  Ceci
	ajoute l'information nécessaire pour démarrer
	les services d'appel de procédures distantes
	(<acronym class="acronym">RPC</acronym>).  Les RPC sont utilisées pour
	coordonner les connexions entre machines et programmes.</p><p>L'option suivante est <span class="guimenuitem">Ntpdate</span>,
	qui traite de la synchronisation de l'horloge.  Quand cette
	option est sélectionnée, un menu semblable au
	suivant apparaît:</p><div class="figure"><a id="Ntpdate-config"></a><div class="figure-title">Figure 2.57. Configuration de ntpdate</div><div class="figure-contents"><div class="mediaobject"><img src="install/ntp-config.png" alt="Configuration de ntpdate" /></div></div></div><br class="figure-break" /><p>A partir de ce menu, sélectionnez le serveur le
	plus proche de chez vous.  En choisir un proche rendra la
	synchronisation plus précise qu'avec un serveur
	éloigné qui pourra présenter plus de
	délais dans la connexion.</p><p>L'option suivante est la sélection de
	<acronym class="acronym">PCNFSD</acronym>.  Cette option installera le
	paquetage <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pcnfsd/pkg-descr">net/pcnfsd</a>.
	C'est un programme très utile qui fournit des services
	d'authentification pour les systèmes qui sont dans
	l'incapacité de fournir leur propre service
	d'authentification, comme le système d'exploitation
	<span class="trademark">MS-DOS</span>® de Microsoft.</p><p>Maintenant vous devez faire défiler l'écran
	vers le bas pour voir les autres option:</p><div class="figure"><a id="Network-configuration-cont"></a><div class="figure-title">Figure 2.58. Configuration réseau suite</div><div class="figure-contents"><div class="mediaobject"><img src="install/net-config-menu2.png" alt="Configuration réseau suite" /></div></div></div><br class="figure-break" /><p>Les utilitaires <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpcbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpcbind</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.statd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.statd</span>(8)</span></a>, et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.lockd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.lockd</span>(8)</span></a> sont utilisés pour les appels de
	procédures distantes (<acronym class="acronym">RPC</acronym>).
	L'utilitaire <code class="command">rpcbind</code> gère la
	communication entre serveurs et clients
	<acronym class="acronym">NFS</acronym>, et est nécessaire aux serveurs
	<acronym class="acronym">NFS</acronym> pour fonctionner correctement.  Le
	&#8220;daemon&#8221; <span class="application">rpc.statd</span>
	interagit avec le &#8220;daemon&#8221;
	<span class="application">rpc.statd</span> d'autres machines pour
	fournir une possibilité de surveiller l'état des
	communications.  Le rapport est généralement
	conservé dans le fichier
	<code class="filename">/var/db/statd.status</code>.  La dernière
	option proposée ici est l'option
	<span class="guimenuitem">rpc.lockd</span>, qui, quand elle est
	sélectionnée, fournira des services de
	verrouillage des fichiers.  Cela est habituellement
	utilisé avec <span class="application">rpc.statd</span> pour
	surveiller quelles machines demandent des verrous et la
	fréquence de ces demandes.  Alors que ces options sont
	parfaites pour le déboguage, elles ne sont pas
	nécessaires pour le bon fonctionnement des serveurs et
	clients <acronym class="acronym">NFS</acronym>.</p><p>En parcourant la liste, l'option suivante est
	<span class="guimenuitem">Routed</span>, qui est le
	&#8220;daemon&#8221; de routage.  L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a>
	gère les tables de routage réseau, repère
	les routeurs multicast, et fournit sur demande une copie des
	tables de routage à toute machine connectée sur
	le réseau.  Ceci est principalement utilisé pour
	les machines jouant le rôle de passerelle pour le
	réseau local.  Quand cette option est
	sélectionnée, un menu apparaîtra demandant
	l'emplacement par défaut de l'utilitaire.  Cet
	emplacement par défaut est déjà
	défini pour vous, et peut être acquitté
	avec la touche <span class="keycap"><strong>Entrée</strong></span>.  Vous sera
	alors présenté un nouveau menu, demandant cette
	fois les paramètres à passer à
	<span class="application">routed</span>.  Par défaut:
	<code class="option">-q</code> qui devrait apparaître sur
	l'écran.</p><p>La ligne suivante est l'option
	<span class="guimenuitem">Rwhod</span>, qui quand elle est
	sélectionnée, lancera le &#8220;daemon&#8221;
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rwhod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rwhod</span>(8)</span></a> à l'initialisation du système.
	L'utilitaire <code class="command">rwhod</code> diffuse les messages
	système sur le réseau
	régulièrement, ou les collecte quand il est dans
	le mode &#8220;consumer&#8221;.  Plus d'informations peuvent
	être obtenues dans les pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruptime&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ruptime</span>(1)</span></a>
	et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rwho&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rwho</span>(1)</span></a>.</p><p>L'option suivante dans la liste est le
	&#8220;daemon&#8221; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a>.  C'est le serveur de
	connexions sécurisées pour
	<span class="application">OpenSSH</span> et est hautement
	recommandé à la place de
	<span class="application">telnet</span> et des serveurs
	<acronym class="acronym">FTP</acronym>.  Le serveur
	<span class="application">sshd</span> est employé pour
	créer une connexion sécurisée d'une
	machine vers une autre en utilisant des connexions
	cryptées.</p><p>Enfin, il y a l'option <span class="guimenuitem">TCP
	Extensions</span>.  Celle-ci active les extensions
	<acronym class="acronym">TCP</acronym> comme définies dans les
	<acronym class="acronym">RFC</acronym> 1323 et
	<acronym class="acronym">RFC</acronym> 1644.  Alors que cela peut sur
	certaines machines rendre les connexions plus rapides, cela
	peut également être à l'origine de pertes
	de connexion.  Cette option n'est pas recommandée pour
	les serveurs, mais peut être bénéfique
	pour les machines individuelles.</p><p>Une fois que vous avez configuré les services
	réseaux, vous pouvez remonter l'écran
	jusqu'à la toute première option qui est
	<span class="guimenuitem">X Exit</span> et poursuivre avec la section
	de configuration suivante ou tout simplement quitter
	<span class="application">sysinstall</span> en sélectionnant
	deux fois à suite <span class="guimenuitem">X Exit</span>
	puis <span class="guibutton">[X Exit Install]</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdboot"></a>2.10.16. Démarrage de FreeBSD</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdboot-i386"></a>2.10.16.1. Démarrage de FreeBSD sur FreeBSD/i386</h4></div></div></div><p>Si tout s'est bien passé, vous verrez des messages
	défiler à l'écran et vous arriverez à
	l'invite de session.  Vous pouvez
	visualiser ces messages en appuyant sur
	<span class="keycap"><strong>Arrêt-défil</strong></span> et en utilisant les touches
	<span class="keycap"><strong>PgUp</strong></span> et <span class="keycap"><strong>PgDn</strong></span>.  En appuyant à
	nouveau sur <span class="keycap"><strong>Arrêt-défil</strong></span> on retournera
	à l'invite.</p><p>L'intégralité des messages peut de pas être
	affichée (limitation du tampon) mais peut être
	visualisée depuis la ligne
	de commande après l'ouverture d'une session en tapant
	<code class="command">dmesg</code> à l'invite.</p><p>Attachez-vous au système en utilisant le nom d'utilisateur
	et le mot de passe définis durant l'installation (<code class="systemitem">rpratt</code>, dans
	cet exemple).  Evitez d'ouvrir des sessions en tant que
	<code class="systemitem">root</code> excepté quand cela est
	nécessaire.</p><p>Messages de démarrage typiques (information sur la version omise):</p><pre class="screen">Copyright (c) 1992-2002 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.

Timecounter "i8254"  frequency 1193182 Hz
CPU: AMD-K6(tm) 3D processor (300.68-MHz 586-class CPU)
  Origin = "AuthenticAMD"  Id = 0x580  Stepping = 0
  Features=0x8001bf&lt;FPU,VME,DE,PSE,TSC,MSR,MCE,CX8,MMX&gt;
  AMD Features=0x80000800&lt;SYSCALL,3DNow!&gt;
real memory  = 268435456 (262144K bytes)
config&gt; di sn0
config&gt; di lnc0
config&gt; di le0
config&gt; di ie0
config&gt; di fe0
config&gt; di cs0
config&gt; di bt0
config&gt; di aic0
config&gt; di aha0
config&gt; di adv0
config&gt; q
avail memory = 256311296 (250304K bytes)
Preloaded elf kernel "kernel" at 0xc0491000.
Preloaded userconfig_script "/boot/kernel.conf" at 0xc049109c.
md0: Malloc disk
Using $PIR table, 4 entries at 0xc00fde60
npx0: &lt;math processor&gt; on motherboard
npx0: INT 16 interface
pcib0: &lt;Host to PCI bridge&gt; on motherboard
pci0: &lt;PCI bus&gt; on pcib0
pcib1: &lt;VIA 82C598MVP (Apollo MVP3) PCI-PCI (AGP) bridge&gt; at device 1.0 on pci0
pci1: &lt;PCI bus&gt; on pcib1
pci1: &lt;Matrox MGA G200 AGP graphics accelerator&gt; at 0.0 irq 11
isab0: &lt;VIA 82C586 PCI-ISA bridge&gt; at device 7.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;VIA 82C586 ATA33 controller&gt; port 0xe000-0xe00f at device 7.1 on pci0
ata0: at 0x1f0 irq 14 on atapci0
ata1: at 0x170 irq 15 on atapci0
uhci0: &lt;VIA 83C572 USB controller&gt; port 0xe400-0xe41f irq 10 at device 7.2 on pci0
usb0: &lt;VIA 83C572 USB controller&gt; on uhci0
usb0: USB revision 1.0
uhub0: VIA UHCI root hub, class 9/0, rev 1.00/1.00, addr 1
uhub0: 2 ports with 2 removable, self powered
chip1: &lt;VIA 82C586B ACPI interface&gt; at device 7.3 on pci0
ed0: &lt;NE2000 PCI Ethernet (RealTek 8029)&gt; port 0xe800-0xe81f irq 9 at
device 10.0 on pci0
ed0: address 52:54:05:de:73:1b, type NE2000 (16 bit)
isa0: too many dependant configs (8)
isa0: unexpected small tag 14
fdc0: &lt;NEC 72065B or clone&gt; at port 0x3f0-0x3f5,0x3f7 irq 6 drq 2 on isa0
fdc0: FIFO enabled, 8 bytes threshold
fd0: &lt;1440-KB 3.5" drive&gt; on fdc0 drive 0
atkbdc0: &lt;keyboard controller (i8042)&gt; at port 0x60-0x64 on isa0
atkbd0: &lt;AT Keyboard&gt; flags 0x1 irq 1 on atkbdc0
kbd0 at atkbd0
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: model Generic PS/2 mouse, device ID 0
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
sc0: &lt;System console&gt; at flags 0x1 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
sio0 at port 0x3f8-0x3ff irq 4 flags 0x10 on isa0
sio0: type 16550A
sio1 at port 0x2f8-0x2ff irq 3 on isa0
sio1: type 16550A
ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/15 bytes threshold
ppbus0: IEEE1284 device found /NIBBLE
Probing for PnP devices on ppbus0:
plip0: &lt;PLIP network interface&gt; on ppbus0
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port
ppi0: &lt;Parallel I/O&gt; on ppbus0
ad0: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata0-master using UDMA33
ad2: 8063MB &lt;IBM-DHEA-38451&gt; [16383/16/63] at ata1-master using UDMA33
acd0: CDROM &lt;DELTA OTC-H101/ST3 F/W by OIPD&gt; at ata0-slave using PIO4
Mounting root from ufs:/dev/ad0s1a
swapon: adding /dev/ad0s1b as swap device
Automatic boot in progress...
/dev/ad0s1a: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1a: clean, 48752 free (552 frags, 6025 blocks, 0.9% fragmentation)
/dev/ad0s1f: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1f: clean, 128997 free (21 frags, 16122 blocks, 0.0% fragmentation)
/dev/ad0s1g: FILESYSTEM CLEAN; SKIPPING CHECKS
/dev/ad0s1g: clean, 3036299 free (43175 frags, 374073 blocks, 1.3% fragmentation)
/dev/ad0s1e: filesystem CLEAN; SKIPPING CHECKS
/dev/ad0s1e: clean, 128193 free (17 frags, 16022 blocks, 0.0% fragmentation)
Doing initial network setup: hostname.
ed0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 192.168.0.1 netmask 0xffffff00 broadcast 192.168.0.255
        inet6 fe80::5054::5ff::fede:731b%ed0 prefixlen 64 tentative scopeid 0x1
        ether 52:54:05:de:73:1b
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x8
        inet6 ::1 prefixlen 128
        inet 127.0.0.1 netmask 0xff000000
Additional routing options: IP gateway=YES TCP keepalive=YES
routing daemons:.
additional daemons: syslogd.
Doing additional network setup:.
Starting final network daemons: creating ssh RSA host key
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
cd:76:89:16:69:0e:d0:6e:f8:66:d0:07:26:3c:7e:2d root@k6-2.example.com
 creating ssh DSA host key
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
f9:a1:a9:47:c4:ad:f9:8d:52:b8:b8:ff:8c:ad:2d:e6 root@k6-2.example.com.
setting ELF ldconfig path: /usr/lib /usr/lib/compat /usr/X11R6/lib
/usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
starting standard daemons: inetd cron sshd usbd sendmail.
Initial rc.i386 initialization:.
rc.i386 configuring syscons: blank_time screensaver moused.
Additional ABI support: linux.
Local package initilization:.
Additional TCP options:.

FreeBSD/i386 (k6-2.example.com) (ttyv0)

login: rpratt
Password:</pre><p>La génération des clés RSA et DSA peut
	prendre du temps sur les machines lentes.
	Cela ne se produit qu'au premier démarrage
	d'une nouvelle installation.  Les démarrages suivants seront
	plus rapides.</p><p>Si le serveur X a été configuré et
	l'environnement de travail par défaut choisi, il peut
	être lancé en tapant
	<code class="command">startx</code> sur la ligne de commande.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66751824"></a>2.10.16.2. Démarrage de FreeBSD sur FreeBSD/alpha</h4></div></div></div><a id="idp66752464" class="indexterm"></a><p>Une fois la procédure d'installation terminée,
	  vous serez en mesure de démarrer FreeBSD en tapant quelque
	  chose comme ceci à l'invite SRM:</p><pre class="screen">&gt;&gt;&gt;<strong class="userinput"><code>BOOT DKC0</code></strong></pre><p>Cela demande au firmware de démarrer sur le disque
	  indiqué.  Pour faire démarrer FreeBSD automatiquement
	  dans le futur, utilisez ces commandes:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET BOOT_OSFLAGS A</code></strong>
<code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET BOOT_FILE ''</code></strong>
<code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET BOOTDEF_DEV DKC0</code></strong>
<code class="prompt">&gt;&gt;&gt;</code> <strong class="userinput"><code>SET AUTO_ACTION BOOT</code></strong></pre><p>Les messages de démarrage seront semblables (mais pas
	identiques) à ceux produits par le démarrage de FreeBSD
	sur <span class="trademark">i386</span>&#8482;.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="shutdown"></a>2.10.17. Arrêt de FreeBSD</h3></div></div></div><p>Il est important d'arrêter proprement le système
	d'exploitation.  N'appuyez pas directement sur votre bouton de
	marche-arrêt.  Tout d'abord, devenez super-utilisateur en tapant
	<code class="command">su</code> sur la ligne de commande et en entrant le
	mot de passe de <code class="systemitem">root</code>.  Cela ne fonctionnera
	que si l'utilisateur est membre du groupe
	<code class="systemitem">wheel</code>.  Sinon, ouvrez une session en tant
	que <code class="systemitem">root</code> et utilisez <code class="command">shutdown -h
	now</code>.</p><pre class="screen">The operating system has halted.
Please press any key to reboot.</pre><p>On peut arrêter la machine sans risques après la que
	commande d'arrêt ait été effectuée et que le
	message &#8220;Please press any key to reboot&#8221; (Veuillez appuyez
	sur une touche pour redémarrer) apparaît.  Si une touche
	est enfoncée plutôt que d'arrêter l'ordinateur, le
	système redémarrera.</p><p>Vous pouvez également utiliser la combinaison de touches
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Suppr</strong></span>, cependant cela n'est pas
	recommandé pour une utilisation normale.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-trouble"></a>2.11. Dépannage</h2></div></div></div><a id="idp66786384" class="indexterm"></a><p>La section suivante couvre le dépannage de base de
      l'installation, les problèmes courants qui ont été
      rapportés.  Il y a aussi un ensemble de questions-réponses
      pour les personnes désirant
      un double démarrage FreeBSD et <span class="trademark">MS-DOS</span>® ou <span class="trademark">Windows</span>®.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66788944"></a>2.11.1. Que faire si quelque chose se passe mal</h3></div></div></div><p>En raison des nombreuses limitations de l'architecture PC,
	il est impossible que la détection du matériel soit
	à 100% fiable, cependant, il y a quelques petites choses que
	vous pouvez faire si cela échoue.</p><p>Vérifiez la <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">liste du matériel supporté</a> pour
	votre version de FreeBSD pour être sûr que votre
	matériel est bien supporté.</p><p>Si votre matériel est supporté et que vous
	expérimentez
	toujours des blocages ou autres problèmes, vous devrez
	compiler un <a class="link" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">noyau
	personnalisé</a>.  Cela permettra d'ajouter le
	support pour les périphériques qui ne sont pas
	présent dans le noyau <code class="filename">GENERIC</code>.  Le
	noyau présent sur les disques de démarrage est
	configuré de telle façon qu'il supposera que la
	plupart des périphériques seront dans leur
	configuration d'usine en termes d'IRQs, d'adresses d'E/S, et
	canaux de DMA.  Si votre matériel a été
	reconfiguré vous devrez très probablement
	éditer le fichier de configuration du noyau et de le
	recompiler pour indiquer à FreeBSD où
	trouver les choses.</p><p>Il est également possible que la détection d'un
	périphérique absent provoque plus tard l'échec
	de la détection d'un périphérique présent.
	Dans ce cas, les pilotes de périphériques
	conflictuels devraient être désactivés.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Quelques problèmes d'installation peuvent être
	  évités ou allégés en mettant à
	  jour le firmware de divers composants matériels, en
	  particulier la carte mère.  Le firmware de la
	  carte mère peut également être
	  désigné par le terme
	  <acronym class="acronym">BIOS</acronym> et la plupart des constructeurs de
	  cartes mères ou d'ordinateur ont un site web où peuvent
	  être trouvées les mises à jour et les
	  informations de mises à jour.</p><p xmlns="http://www.w3.org/1999/xhtml">La plupart des fabricants déconseillent fortement de
	  mettre à jour le <acronym class="acronym">BIOS</acronym> de la carte
	  mère à moins d'avoir une bonne raison de le faire,
	  ce qui pourrait probablement être une mise à jour
	  critique si l'on peut dire.
	  Le processus de mise à jour <span class="emphasis"><em>peut</em></span> mal se
	  passer, causant des dommages permanents au circuit contenant
	  le <acronym class="acronym">BIOS</acronym>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66795472"></a>2.11.2. Traiter les partitions <span class="trademark">MS-DOS</span>® existantes</h3></div></div></div><a id="idp66796624" class="indexterm"></a><p>De nombreux utilisateurs veulent installer FreeBSD sur des
	<acronym class="acronym">PC</acronym>s qui fonctionnent sous un système d'exploitation de <span class="trademark">Microsoft</span>®.
	Dans ce cas, FreeBSD dispose d'un utilitaire connu sous le nom de
	<span class="application">FIPS</span>.  Cette utilitaire peut
	être trouvé dans le répertoire
	<code class="filename">tools</code> du CD-ROM d'installation, ou
	téléchargé à partir des différents
	<a class="link" href="#mirrors" title="Annexe A. Se procurer FreeBSD">miroirs	FreeBSD</a>.</p><p>L'utilitaire <span class="application">FIPS</span> vous permet de
	scinder en deux une partition <span class="trademark">MS-DOS</span>® existante, tout en
	préservant le contenu de la partition originale et vous
	permettant d'installer FreeBSD sur la partition ainsi
	créée.
	Vous devez défragmenter tout d'abord votre partition
	<span class="trademark">MS-DOS</span>® en utilisant l'utilitaire <span class="trademark">Windows</span>®
	<span class="application">Défragmenteur de disque</span> (allez
	dans l'Explorateur, clic-droit sur le disque dur, et choisissez
	de défragmenter votre disque dur) ou les
	<span class="application">Norton Disk Tools</span>.  Vous pouvez
	ensuite lancer le programme
	<span class="application">FIPS</span>.  Il vous demandera le
	reste des informations dont il a besoin, suivez juste les
	instructions à l'écran.  Ensuite, vous
	pouvez redémarrer et installer FreeBSD sur la tranche
	libre.  Voyez le menu <span class="guimenuitem">Distributions</span>
	pour avoir une estimation de l'espace libre dont vous
	aurez besoin pour le type d'installation que vous
	désirez.</p><p>Il existe également un produit
	très utile de chez <a class="link" href="http://www.powerquest.com/" target="_top">PowerQuest</a> appelé
	<span class="application"><span class="trademark">PartitionMagic</span>®</span>.  Cette
	application a bien plus de fonctionnalités que
	<span class="application">FIPS</span>, et est fortement
	recommandée si vous projetez d'ajouter/retirer
	régulièrement des systèmes d'exploitation.
	Cependant ce programme n'est pas gratuit, et si vous projetez
	d'installer FreeBSD et ensuite le laisser
	installé, <span class="application">FIPS</span> sera
	probablement parfait pour vous.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66810576"></a>2.11.3. Utilisation des systèmes de fichiers <span class="trademark">MS-DOS</span>® et <span class="trademark">Windows</span>®</h3></div></div></div><p>Pour le moment, FreeBSD, ne supporte pas les systèmes
	de fichiers compressés avec l'application
	<span class="application">Double Space&#8482;</span>.  Par
	conséquent, le système de fichiers doit
	être décompressé avant que FreeBSD ne puisse
	accéder aux données.  Cela peut être
	fait en lançant l'<span class="application">Agent de
	compression</span> situé dans le menu
	<span class="guimenuitem">Démarrer</span>&gt;
	<span class="guimenuitem">Programmes</span> &gt;
	<span class="guimenuitem">Outils Système</span>.</p><p>FreeBSD supporte les systèmes de fichiers <span class="trademark">MS-DOS</span>®
	(parfois appelés systèmes de fichiers FAT).  La
	commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> greffe ce type de
	système de fichiers sur l'arborescence
	déjà existante permettant ainsi l'accès
	au contenu du système de fichiers.  La commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> n'est, en général, pas
	invoquée directement; au lieu de cela, elle est
	appelée par le système via une ligne du fichier
	<code class="filename">/etc/fstab</code> pour par un appel à
	l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> avec les paramètres
	adéquates.</p><p>Une entrée typique de
	<code class="filename">/etc/fstab</code> sera:</p><pre class="programlisting">/dev/ad0sN  /dos  msdosfs rw  0	0</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour que cela fonctionne, il faut que le
	  répertoire <code class="filename">/dos</code> existe déjà.
	  Pour plus de détails au sujet du format de
	  <code class="filename">/etc/fstab</code>, consultez la page de manuel
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>.</p></div><p>Un appel à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> pour un système de
	fichiers <span class="trademark">MS-DOS</span>® ressemblera à:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t msdosfs /dev/ad0s1 /mnt</code></strong></pre><p>Dans cet exemple, le système de fichiers <span class="trademark">MS-DOS</span>®
	est situé sur la première partition du premier
	disque dur.  Votre situation peut être
	différente, contrôlez les sorties des commandes
	<code class="command">dmesg</code> et <code class="command">mount</code>.
	Elles doivent fournir suffisamment d'information pour donner
	une idée de l'organisation des partitions.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD peut numéroter les tranches (par exemple les
	  partitions <span class="trademark">MS-DOS</span>®) différemment des autres
	  systèmes d'exploitation.  En particulier, les
	  partitions <span class="trademark">MS-DOS</span>® étendues sont
	  généralement affectées d'un
	  numéro de tranche supérieur à celui des
	  partitions primaires <span class="trademark">MS-DOS</span>®.  L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>
	  peut aider à déterminer les tranches qui
	  appartiennent à FreeBSD et celles appartenant à
	  d'autres systèmes d'exploitation.</p></div><p>Les partitions NTFS peuvent également être
	  montées d'une manière similaire en employant
	  la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_ntfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_ntfs</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66838736"></a>2.11.4. Questions et réponses de dépannage</h3></div></div></div><div class="qandaset"><a id="idp66839376"></a><dl><dt>2.11.4.1. <a href="#idp66839632">Mon système se bloque au niveau de la
	      détection du matériel lors du
	      démarrage, ou se comporte de manière
	      étrange lors de l'installation, ou le lecteur de
	      disquette n'est pas détecté.</a></dt><dt>2.11.4.2. <a href="#idp66844112">Je tente de démarrer à partir du
	      disque dur pour la première fois après
	      l'installation de FreeBSD, le noyau est chargé et
	      détecte mon matériel, mais s'arrête
	      avec un message du type:</a></dt><dt>2.11.4.3. <a href="#idp66858192">J'essaye de démarrer à partir du
	      disque dur pour la première fois après
	      l'installation de FreeBSD, mais l'invite du gestionnaire de
	      démarrage n'affiche que F? et
	      la procédure de démarrage ne va pas plus
	      loin.</a></dt><dt>2.11.4.4. <a href="#idp66862928">Le système trouve ma carte réseau
	      ed(4), mais je continue à avoir des erreurs
	      de dépassement des délais
	      d'attente.</a></dt><dt>2.11.4.5. <a href="#idp66877904">Quand sysinstall est
	      utilisé dans un terminal X11, la police de
	      caractères jaune sur fond gris-clair peut
	      être difficile à lire.  Existe-t-il un
	      moyen d'obtenir un contraste plus élevé pour cette application?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp66839632"></a><a id="idp66839888"></a><p><strong>2.11.4.1.</strong></p></td><td align="left" valign="top"><p>Mon système se bloque au niveau de la
	      détection du matériel lors du
	      démarrage, ou se comporte de manière
	      étrange lors de l'installation, ou le lecteur de
	      disquette n'est pas détecté.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD utilise de manière
	      intensive le système ACPI sur les plateformes
	      i386, amd64 et ia64 s'il est détecté au
	      démarrage pour aider à la détection
	      du matériel.  Malheureusement, des bogues
	      persistent dans le pilote ACPI, et sur les cartes
	      mères et leur BIOS.  L'utilisation de l'ACPI peut
	      être désactivé en fixant le
	      paramètre <code class="literal">hint.acpi.0.disabled</code>
	      pour le chargeur:</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>Ce paramètre est réinitialisé
	      à chaque démarrage du système, il
	      est donc nécessaire d'ajouter
	      <code class="literal">hint.acpi.0.disabled="1"</code> au fichier
	      <code class="filename">/boot/loader.conf</code>.  Plus
	      d'information au sujet du chargeur peut être
	      trouvée dans la <a class="xref" href="#boot-synopsis" title="13.1. Synopsis">Section 13.1, « Synopsis »</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66844112"></a><a id="idp66844368"></a><p><strong>2.11.4.2.</strong></p></td><td align="left" valign="top"><p>Je tente de démarrer à partir du
	      disque dur pour la première fois après
	      l'installation de FreeBSD, le noyau est chargé et
	      détecte mon matériel, mais s'arrête
	      avec un message du type:</p><pre class="screen">changing root device to ad1s1a panic: cannot mount root</pre><p>Qu'est-ce qui ne va pas?  Que puis-je faire?</p><p>Que représente la ligne
	      <code class="literal">bios_drive:interface(unit,partition)kernel_name</code>
	      qui est affichée comme message d'aide?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Il existe un problème de longue date dans le
	      cas où le disque de démarrage n'est pas le
	      premier disque du système.  Le BIOS utilise un
	      modèle de numérotation des disques
	      différent de celui de FreeBSD, et déterminer
	      quel numéro correspond avec quoi est relativement
	      compliqué.</p><p>Si le disque de démarrage n'est pas le
	      premier disque du système, FreeBSD peut avoir besoin
	      d'aide pour le trouver.  Nous sommes en
	      général en face de deux situations et dans
	      ces deux cas vous devez indiquer à FreeBSD où
	      se trouve le système de fichiers racine.  Cela se
	      fait en précisant le numéro du disque
	      BIOS, le type de disque et le numéro FreeBSD de
	      disque pour ce type de disque.</p><p>La première situation correspond au cas
	      où vous disposez de deux disques IDE,
	      configurés chacun en maître sur leur bus
	      IDE respectif, et que vous désirez
	      démarrer FreeBSD à partir du second disque.
	      Le BIOS voit ces disques en tant que disque 0 et disque
	      1, tandis que FreeBSD en tant que
	      <code class="filename">ad0</code> et
	      <code class="filename">ad1</code>.</p><p>FreeBSD se trouve sur le disque BIOS numéro 1
	      qui est de type <code class="literal">ad</code> alors que le
	      numéro de disque pour FreeBSD sera le 2, aussi vous
	      utiliserez la syntaxe:</p><pre class="screen"><strong class="userinput"><code>1:ad(2,a)kernel</code></strong></pre><p>Notez que si vous avez un esclave sur le bus
	      primaire, ce qui précède n'est pas
	      nécessaire (et est en fait erroné).</p><p>Le deuxième cas concerne le démarrage
	      à partir d'un disque SCSI quand on dispose d'un
	      ou plusieurs disques IDE dans le système.  Dans
	      ce cas, le numéro de disque FreeBSD est
	      inférieur au numéro de disque BIOS.  Si
	      vous avez deux disques IDE en plus du disque SCSI, le
	      disque SCSI sera le disque BIOS numéro 2, de type
	      <code class="literal">da</code> et sera vu en tant que disque 0
	      par FreeBSD, aussi vous utiliserez la syntaxe:</p><pre class="screen"><strong class="userinput"><code>2:da(0,a)kernel</code></strong></pre><p>pour indiquer à FreeBSD que vous voulez
	      démarrer à partir du disque BIOS
	      numéro 2, qui est le premier disque SCSI du
	      système.  Si vous n'avez qu'un seul disque IDE,
	      vous utiliseriez à la place
	      <code class="literal">1:</code>.</p><p>Une fois que vous avez déterminé les
	      valeurs correctes à employer, vous pouvez ajouter
	      dans le fichier <code class="filename">/boot.config</code>
	      à l'aide d'un éditeur de textes la
	      commande que vous auriez tapé.  A moins d'une
	      instruction contraire, FreeBSD utilisera le contenu de ce
	      fichier comme réponses par défaut à
	      l'invite <code class="literal">boot:</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66858192"></a><a id="idp66858448"></a><p><strong>2.11.4.3.</strong></p></td><td align="left" valign="top"><p>J'essaye de démarrer à partir du
	      disque dur pour la première fois après
	      l'installation de FreeBSD, mais l'invite du gestionnaire de
	      démarrage n'affiche que <code class="literal">F?</code> et
	      la procédure de démarrage ne va pas plus
	      loin.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>La géométrie du disque dur n'a pas
	      été correctement configurée dans
	      l'éditeur de partitions quand vous avez
	      installé FreeBSD.  Retournez dans l'éditeur
	      de partitions et indiquez la géométrie
	      réelle de votre disque dur.  Vous devez
	      réinstaller complètement FreeBSD avec la
	      bonne géométrie.</p><p>Si vous ne parvenez pas à déterminer
	      la géométrie de votre disque, voici une
	      astuce: créez une petite partition DOS au
	      début du disque et installez ensuite FreeBSD.  Le
	      programme d'installation verra la partition DOS et
	      tentera d'en déduire la géométrie
	      correcte, ce qui fonctionne
	      généralement.</p><p>L'astuce suivante n'est plus conseillée, mais
	      est conservée comme
	      référence:</p><div class="blockquote"><blockquote class="blockquote"><p>Si vous montez un serveur ou une station de
		travail complètement dédiés
		à FreeBSD pour lesquels vous n'avez que faire
		(dans le futur) d'une compatibilité avec DOS,
		<span class="trademark">Linux</span>®, ou tout autre système d'exploitation,
		vous avez également l'option d'utiliser
		l'intégralité du disque
		(<span class="guimenuitem">A</span> dans l'éditeur de
		partition), en sélectionnant l'option
		non-standard pour laquelle FreeBSD occupe
		entièrement le disque du premier jusqu'au
		dernier secteur.  Cela laissera de côté
		toutes les considérations au sujet de la
		géométrie du disque, mais c'est quelque
		peu limitatif à moins que vous n'ayez pas
		l'intention d'utiliser autre chose que FreeBSD sur ce
		disque.</p></blockquote></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66862928"></a><a id="idp66863184"></a><p><strong>2.11.4.4.</strong></p></td><td align="left" valign="top"><p>Le système trouve ma carte réseau
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a>, mais je continue à avoir des erreurs
	      de dépassement des délais
	      d'attente.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Votre carte utilise probablement une IRQ
	      différente de celle spécifiée dans
	      le fichier <code class="filename">/boot/device.hints</code>.  Le
	      pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> n'utilise pas la configuration
	      <span class="quote">« <span class="quote">soft</span> »</span> par défaut (les valeurs
	      entrées à l'aide de EZSETUP sous DOS),
	      mais utilisera la configuration logicielle si vous
	      précisez la valeur <code class="literal">-1</code> pour les
	      paramètres de l'interface en question.</p><p>Positionnez le cavalier sur la carte pour une
	      configuration <span class="quote">« <span class="quote">hard</span> »</span> (en modifiant les
	      paramètres du noyau si nécessaire), ou
	      spécifiez l'IRQ en tant que <code class="literal">-1</code>
	      en fixant le paramètre
	      <code class="literal">hint.ed.0.irq="-1"</code>.  Cela demandera
	      au noyau d'utiliser la configuration logicielle.</p><p>Une autre possibilité est que votre carte
	      utilise l'IRQ 9, qui est partagée avec l'IRQ 2 et
	      est une cause fréquente de problèmes (tout
	      particulièrement dans le cas où vous avez
	      une carte VGA utilisant l'IRQ 2!).  Vous ne devriez pas
	      utiliser les IRQs 2 et 9 autant que possible.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp66877904"></a><a id="idp66878160"></a><p><strong>2.11.4.5.</strong></p></td><td align="left" valign="top"><p>Quand <span class="application">sysinstall</span> est
	      utilisé dans un terminal X11, la police de
	      caractères jaune sur fond gris-clair peut
	      être difficile à lire.  Existe-t-il un
	      moyen d'obtenir un contraste<a id="idp66879056" class="indexterm"></a> plus élevé pour cette application?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Si vous avez déjà installé X11
	      et que les couleurs par défaut choisies par
	      <span class="application">sysinstall</span> rendent le texte
	      illisible lors de l'utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xterm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xterm</span>(1)</span></a> ou
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rxvt&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rxvt</span>(1)</span></a>, ajouter la ligne suivante à votre
	      fichier <code class="filename">~/.Xdefaults</code> pour obtenir
	      un fond gris plus foncé: <code class="literal">XTerm*color7:
	      #c0c0c0</code></p></td></tr></tbody></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-advanced"></a>2.12. Guide avancé d'installation</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><p>Cette section décrit comment installer FreeBSD dans des cas
      exceptionnels.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="headless-install"></a>2.12.1. Installer FreeBSD sur un système sans moniteur ou sans
	clavier</h3></div></div></div><a id="idp66892624" class="indexterm"></a><a id="idp66893776" class="indexterm"></a><p>Ce type d'installation est appelé &#8220;headless
	install&#8221; (installation sans écran), parce que la machine
	sur laquelle vous êtes en train d'installer FreeBSD soit n'a pas
	de moniteur, soit n'a même pas de sortie VGA.  Comment est-ce
	possible, allez-vous demander? En utilisant une console série.
	Une console série est en quelques mots l'utilisation d'une autre
	machine comme écran et clavier pour un autre système.
	Pour cela, suivez juste les étapes de création des
	disquettes d'installation, expliquées dans <a class="xref" href="#install-floppies" title="2.3.7. Préparer les supports de démarrage">Section 2.3.7, « Préparer les supports de démarrage »</a>.</p><p>Pour modifier ces disquettes afin de démarrer
	à travers une console série, suivez les
	étapes suivantes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Configurer les disquettes de démarrage pour
	    démarrer à travers la console
	    série</strong></p><a id="idp66896336" class="indexterm"></a><p>Si vous deviez démarrer avec les disquettes que vous
	      venez de faire, FreeBSD démarrerait dans son mode
	      d'installation normal.  Nous voulons que FreeBSD démarre
	      sur la console série pour notre installation.  Pour faire
	      cela, vous devez monter la disquette
	      <code class="filename">boot.flp</code> sur votre système FreeBSD en
	      utilisant la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/fd0 /mnt</code></strong></pre><p>Maintenant que vous avez la disquette montée, vous
	      devez vous rendre dans le répertoire <code class="filename">/mnt</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /mnt</code></strong></pre><p>C'est à cet endroit que vous devez configurer la
	      disquette pour démarrer sur la console série.
	      Vous devez créer un fichier appelé
	      <code class="filename">boot.config</code>
	      contenant la ligne <code class="literal">/boot/loader -h</code>.
	      Tout ceci provoque le passage d'une option au chargeur
	      pour démarrer sur la console série.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/boot/loader -h" &gt; boot.config</code></strong></pre><p>Maintenant que vous avez votre disquette correctement
	      configurée, vous devez démonter la disquette en
	      utilisant la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong></pre><p>Maintenant vous pouvez retirer la disquette de son
	      lecteur.</p></li><li class="step"><p class="title"><strong>Connecter votre câble null-modem</strong></p><a id="idp66915792" class="indexterm"></a><p>Vous devez maintenant connecter un <a class="link" href="#term-cables-null" title="26.2.2.1.1. Null-modem Cables">câble null-modem</a>
	      entre les deux machines.  Connectez juste le câble sur le
	      port série des deux machines.  <span class="emphasis"><em>Un câble
	      série normal ne conviendra pas ici</em></span>, vous avez
	      besoin d'un câble null-modem parce certains fils sont
	      croisés à l'intérieur.</p></li><li class="step"><p class="title"><strong>Démarrer l'installation</strong></p><p>Il est maintenant temps de lancer l'installation.
	      Mettez la disquette <code class="filename">boot.flp</code> dans le
	      lecteur de la machine que vous allez installer sans
	      moniteur et clavier, et allumez la machine.</p></li><li class="step"><p class="title"><strong>Connexion à la machine sans moniteur ni
	      clavier</strong></p><a id="idp66924240" class="indexterm"></a><p>Maintenant vous devez vous connecter à cette machine
	      à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l /dev/cuad0</code></strong></pre></li></ol></div><p>Voilà!  Vous devriez maintenant pouvoir contrôler la machine sans
	moniteur et sans clavier à travers votre session
	<code class="command">cu</code>.  On vous demandera d'insérer la disquette
	<code class="filename">kern1.flp</code>, et ensuite on vous proposera
	de choisir le type de terminal à utiliser.
	Sélectionnez la
	console couleur FreeBSD et effectuez votre installation!</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-diff-media"></a>2.13. Préparer votre propre support d'installation</h2></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour éviter les répétitions, &#8220;disque
	FreeBSD&#8221;
	dans ce contexte signifie un CDROM ou DVD FreeBSD que vous avez
	acheté, ou produit vous-même.</p></div><p>Il peut y avoir quelques situations dans lesquelles vous devez
      créer votre propre support et/ou source d'installation de FreeBSD.
      Cela pourrait être un support physique, comme une bande, ou une
      source que <span class="application">sysinstall</span> pourrait employer
      pour récupérer les fichiers, comme un site FTP local, ou une
      partition <span class="trademark">MS-DOS</span>®.</p><p>Par exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Vous avez beaucoup de machines connectées sur votre
	  réseau
	  local, et un seul disque FreeBSD.  Vous voulez créer un site
	  FTP local utilisant le contenu du disque FreeBSD, et ensuite
	  faire utiliser ce site FTP local par vos machines plutôt que
	  de se connecter à l'Internet.</p></li><li class="listitem"><p>Vous avez un disque FreeBSD, et FreeBSD ne reconnaît pas
	  votre lecteur de CD/DVD, mais <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>® oui.  Vous voulez
	  copier les fichiers d'installation de FreeBSD sur une
	  partition DOS sur le même ordinateur, et ensuite installer
	  FreeBSD en utilisant ces fichiers.</p></li><li class="listitem"><p>L'ordinateur sur lequel vous voulez installer n'a pas de
	  lecteur de CD/DVD, ou de carte réseau, mais vous pouvez
	  connecter un câble série ou parallèle de
	  &#8220;type
	  Laplink&#8221; sur un ordinateur qui lui dispose d'un lecteur
	  de CD/DVD ou d'une carte réseau.</p></li><li class="listitem"><p>Vous voulez créer une bande qui peut être
	  utilisée pour installer FreeBSD.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-cdrom"></a>2.13.1. Créer un CDROM d'installation</h3></div></div></div><p>Comme élément de chaque nouvelle version, le
	projet FreeBSD met à disposition au moins deux images de CDROM
	(&#8220;images ISO&#8221;) par architecture supportée.  Ces images peuvent être inscrites
	(&#8220;gravées&#8221;)	sur CDs si vous disposez d'un
	graveur de CD, et puis être utilisées pour installer
	FreeBSD.  Si vous avez un graveur de CD, et comme la bande
	passante est bon marché, alors c'est la méthode
	la plus simple pour installer FreeBSD.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Télécharger les bonnes images ISO</strong></p><p>Les images ISO de chaque version peuvent être
	    téléchargées à partir de
	    <code class="filename">ftp://ftp.FreeBSD.org/pub/FreeBSD/ISO-IMAGES-arch/version</code>
	    ou du miroir le plus proche.  Remplacez
	    <em class="replaceable"><code>arch</code></em> et
	    <em class="replaceable"><code>version</code></em> par les valeurs
	    appropriées.</p><p>Ce répertoire contiendra normalement les images
	    suivantes:</p><div class="table"><a id="idp66944848"></a><div class="table-title">Tableau 2.4. Noms des images ISO FreeBSD
	      6.<em class="replaceable"><code>X</code></em> et
	      7.<em class="replaceable"><code>X</code></em> et leurs
	      significations</div><div class="table-contents"><table summary="Noms des images ISO FreeBSD&#10;&#9;      6.X et&#10;&#9;      7.X et leurs&#10;&#9;      significations" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom du fichier</th><th>Contenu</th></tr></thead><tbody><tr><td><code class="filename">version-RELEASE-arch-bootonly.iso</code></td><td>Tout ce dont vous avez besoin pour
		    démarrer un noyau FreeBSD et lancer
		    l'interface d'installation.  Les fichiers
		    d'installation doivent être
		    récupérés par FTP ou à
		    partir d'une autre source
		    supportée.</td></tr><tr><td><code class="filename">version-RELEASE-arch-disc1.iso</code></td><td>Tout ce dont vous avez besoin pour installer
		    FreeBSD et incorpore un système de fichiers
		    <span class="quote">« <span class="quote">live</span> »</span>, qui est utilisé avec
		    la fonction de <span class="quote">« <span class="quote">Repair</span> »</span> de
		    <span class="application">sysinstall</span>.</td></tr><tr><td><code class="filename">version-RELEASE-arch-disc2.iso</code></td><td>Autant de logiciels
		    tiers pré-compilés que l'espace sur
		    le disque le permet.</td></tr><tr><td><code class="filename">version-RELEASE-arch-docs.iso</code></td><td>La documentation FreeBSD.</td></tr></tbody></table></div></div><br class="table-break" /><p>Vous <span class="emphasis"><em>devez</em></span> télécharger soit
	    l'image ISO bootonly (si elle existe), soit l'image du disque numéro un.  Ne
	    télécharger pas les deux, étant donné
	    que le disque numéro un contient tout le contenu de
	    l'image ISO bootonly.</p><p>Utilisez l'ISO bootonly si votre accès Internet est bon
	    marché.  Elle vous laissera installer FreeBSD, et vous
	    pourrez ensuite installer des logiciels tiers en les
	    téléchargeant en employant le système de
	    logiciels pré-compilés/logiciels portés
	    (voir le <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>) si nécessaire.</p><p>Utilisez l'image du disque numéro un si vous
	    voulez installer FreeBSD avec
	    également une bonne sélection de logiciels
	    tiers.</p><p>Les images des autres disques sont utiles, mais pas
	    indispensables, tout particulièrement si vous disposez
	    d'un accès Internet à haut débit.</p></li><li class="step"><p class="title"><strong>Graver les CDs</strong></p><p>Vous devez ensuite graver les images de CD.  Si vous
	    faites cela à partir d'un autre système FreeBSD
	    consultez alors la <a class="xref" href="#creating-cds" title="19.6. Création et utilisation de supports optiques (CDs)">Section 19.6, « Création et utilisation de supports optiques
      (CDs) »</a> pour plus
	    d'informations (en particulier les <a class="xref" href="#burncd" title="19.6.3. burncd">Section 19.6.3, « burncd »</a>
	    et <a class="xref" href="#cdrecord" title="19.6.4. cdrecord">Section 19.6.4, « cdrecord »</a>).</p><p>Si vous le faites à partir d'une autre plate-forme alors
	    vous devrez utiliser les utilitaires existants pour
	    commander votre graveur de CD sur cette plate-forme.  Les
	    images fournies le sont dans le standard ISO qui est
	    supporté par de nombreuses applications de gravure
	    de CD.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous vous intéressez à la
	  réalisation d'une version sur mesure de FreeBSD,
	  veuillez consulter l'<a class="link" href="../../../../doc/en_US.ISO8859-1/articles/releng" target="_top">article sur la création des
	  versions</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-ftp"></a>2.13.2. Création d'un site FTP local avec le disque FreeBSD</h3></div></div></div><a id="idp66966992" class="indexterm"></a><p>Les disques FreeBSD sont présentés comme le site FTP.
	Cela rend très facile la création d'un site FTP local qui
	peut être utilisé par d'autres machines de votre
	réseau lors de l'installation de FreeBSD.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Sur l'ordinateur FreeBSD qui hébergera le site FTP,
	    soyez sûr que le CDROM est dans la lecteur, et monté en
	    <code class="filename">/cdrom</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong></pre></li><li class="step"><p>Créez un compte pour le FTP anonyme dans
	    <code class="filename">/etc/passwd</code>.  Faites cela en éditant
	    <code class="filename">/etc/passwd</code> avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> et en
	    ajoutant cette ligne:</p><pre class="programlisting">ftp:*:99:99::0:0:FTP:/cdrom:/nonexistent</pre></li><li class="step"><p>Vérifiez que le service FTP est activé dans
	    <code class="filename">/etc/inetd.conf</code>.</p></li></ol></div><p>N'importe qui avec un accès réseau à votre
	machine peut désormais choisir un support de type FTP et taper
	<strong class="userinput"><code>ftp://votre machine</code></strong>
	après avoir sélectionné
	&#8220;Other&#8221; dans le menu des sites FTP durant
	l'installation.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si la version du support de démarrage (des
	  disquettes en général) pour vos clients FTP
	  n'est pas exactement la même que celle du site FTP
	  local, alors <span class="application">sysinstall</span> ne vous
	  laissera pas achever l'installation.  Si les versions ne sont
	  pas identiques mais que vous désirez forcer
	  l'installation, vous devez vous rendre dans le menu
	  <span class="guimenu">Options</span> et changer le nom de la
	  distribution pour <span class="guimenuitem">any</span>.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette approche est correcte pour une machine qui est sur votre
	  réseau local, et qui est protégée par votre
	  coupe-feu.  Offrir un accès FTP à d'autres machines sur
	  Internet (et non sur votre réseau local) expose votre
	  ordinateur à l'attention de crackers et autres
	  indésirables.  Nous recommandons fortement de suivre de bonnes
	  pratiques de sécurité si vous
	  faites cela.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp66995408"></a>2.13.3. Création de disquettes d'installation</h3></div></div></div><a id="idp66996048" class="indexterm"></a><p>Si vous devez installer à partir de disquettes (ce que nous
	suggérons de ne <span class="emphasis"><em>pas</em></span> faire), soit en raison
	d'un matériel non supporté, soit que vous aimez vous
	compliquer la vie, vous devez d'abord préparer des disquettes
	pour l'installation.</p><p>Il vous faudra au minimum autant de disquettes 1.44 Mo
	  que nécessaire pour y mettre tous les fichiers du
	  répertoire <code class="filename">base</code> (distribution de base).
	  Si vous préparez ces disquettes sous DOS, alors elles
	  <span class="emphasis"><em>doivent</em></span> être formatées en utilisant
	  la commande <span class="trademark">MS-DOS</span>® <code class="command">FORMAT</code>.  Si vous utilisez
	  <span class="trademark">Windows</span>®, utilisez l'Explorateur pour formater les disquettes
	  (clic-droit sur le lecteur <code class="filename">A:</code> , et
	  sélectionnez &#8220;Formater&#8221;).</p><p>Ne faites <span class="emphasis"><em>pas</em></span> confiance aux
	  disquettes préformatées en usine.  Reformatez-les
	  vous-même, de façon à être sûr.
	  Nos utilisateurs nous ont, dans le passé, signalé de
	  nombreux problèmes dus à des disquettes
	  incorrectement formatées, ce qui explique pourquoi nous
	  insistons autant maintenant.</p><p>Si vous créez les disquettes sur une autre machine
	  FreeBSD, ce n'est toujours pas une mauvaise idée de les
	  formatter, bien que vous n'ayez pas besoin de mettre un
	  système de fichiers <span class="trademark">MS-DOS</span>® sur chaque disquette.  Vous pouvez
	  utiliser les commandes <code class="command">bsdlabel</code> et
	  <code class="command">newfs</code> pour y mettre un système de fichier
	  UFS à la place, comme le montre la séquence de commandes
	  suivantes (pour une disquette 3.5" de 1.44 Mo):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdformat -f 1440 fd0.1440</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -w fd0.1440 floppy3</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -t 2 -u 18 -l 1 -i 65536 /dev/fd0</code></strong></pre><p>Vous pouvez alors les monter et y écrire comme sur
	  n'importe quel autre système de fichiers.</p><p>Après avoir formatter les disquettes, vous devrez y copier
	  les fichiers.  Les fichiers de la distribution sont scindés en
	  morceaux de taille telle que cinq d'entre eux tiendront sur une
	  disquette 1.44 Mo ordinaire.  Préparez les disquettes les unes
	  après les autres, en y mettant sur chacune autant de fichiers
	  que vous pouvez, jusqu'à ce que vous ayez recopié
	  toutes les
	  distributions que vous voulez installer.  Chaque distribution
	  doit avoir son propre sous-répertoire sur la disquette, e.g.:
	  <code class="filename">a:\base\base.aa</code>,
	  <code class="filename">a:\base\base.ab</code>, et ainsi de suite.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le fichier <code class="filename">base.inf</code> doit
	    également être présent sur la
	    première disquette de l'ensemble
	    <code class="filename">base</code> puisqu'il est lu par le
	    programme d'installation pour déterminer le nombre
	    de fichiers à rechercher lors de la
	    récupération et l'assemblage de la
	    distribution.</p></div><p>Une fois que vous êtes à l'écran de
	  sélection du support
	  d'installation, sélectionnez <span class="guimenuitem">Floppy</span> (disquette)
	  et vous aurez ensuite des indications sur la marche à
	  suivre.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="install-msdos"></a>2.13.4. Installation depuis une partition <span class="trademark">MS-DOS</span>®</h3></div></div></div><a id="idp67048016" class="indexterm"></a><p>Pour préparer l'installation depuis une partition <span class="trademark">MS-DOS</span>®,
	  copiez les fichiers de la distribution dans un répertoire
	  appelé <code class="filename">freebsd</code> dans le répertoire
	  racine de cette partition.  Par exemple,
	  <code class="filename">c:\freebsd</code>.  L'arborescence des
	  répertoires du CDROM ou du site FTP doit être
	  partiellement reproduite dans ce répertoire, aussi nous
	  suggérons
	  l'utilisation de la commande DOS <code class="command">xcopy</code> si
	  vous copiez à partir d'un CDROM.  Par exemple, pour
	  préparer une installation minimale de FreeBSD:</p><pre class="screen"><code class="prompt">C:\&gt;</code> <strong class="userinput"><code>md c:\freebsd</code></strong>
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>xcopy e:\bin c:\freebsd\bin\ /s</code></strong>
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>xcopy e:\manpages c:\freebsd\manpages\ /s</code></strong></pre><p>En supposant que <code class="filename">C:</code> est l'endroit
	  où vous avez de l'espace libre et que votre CDROM soit
	  monté sur <code class="filename">E:</code>.</p><p>Si vous n'avez pas de lecteur de CDROM, vous pouvez
	  télécharger la distribution depuis <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/" target="_top">ftp.FreeBSD.org</a>.
	  Chaque distribution est dans son propre répertoire; par
	  exemple la distribution <span class="emphasis"><em>base</em></span>
	  peut être trouvée dans le répertoire <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/10.1-RELEASE/base/" target="_top">10.1/base/</a>.</p><p>Copiez chaque distribution que vous voulez installer
	  depuis la partition <span class="trademark">MS-DOS</span>® (et pour laquelle vous avez de
	  l'espace libre) dans <code class="filename">c:\freebsd</code> &#8212;
	  la distribution <code class="literal">BIN</code> n'est que le minimum
	  obligatoire.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67062608"></a>2.13.5. Création d'une bande d'installation</h3></div></div></div><a id="idp67063248" class="indexterm"></a><p>Installer à partir de bandes est probablement la
	  méthode
	  la plus simple, mis à part l'installation en ligne avec FTP ou
	  depuis le CDROM.  Le programme d'installation s'attend à ce
	  que les fichiers soient simplement archivés sur la bande.
	  Après avoir récupéré tous les fichiers
	  des distributions qui vous intéressent, archivez-les avec
	  <code class="command">tar</code> sur la bande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /freebsd/distdir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar cvf /dev/rwt0 dist1 ... dist2</code></strong></pre><p>Quand vous installez, vous devez vous assurer qu'il y a
	  assez de place dans un répertoire temporaire (que vous pourrez
	  choisir) pour y mettre le contenu <span class="emphasis"><em>entier</em></span>
	  de la bande que vous avez créée.  En raison de
	  l'accès non-aléatoire des bandes, cette méthode
	  exige un espace de
	  stockage temporaire important.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Au moment d'installer, la bande doit être dans le lecteur
	    <span class="emphasis"><em>avant</em></span> de démarrer avec la disquette.
	    Sinon les tests risquent de ne pas la trouver.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67069008"></a>2.13.6. Avant d'installer via le réseau</h3></div></div></div><a id="idp67069648" class="indexterm"></a><a id="idp67071184" class="indexterm"></a><a id="idp67072720" class="indexterm"></a><p>Il y a trois types d'installation réseau disponibles. Par
	  Ethernet (un contrôleur Ethernet standard), par
	  port série (SLIP ou PPP), ou par port parallèle (PLIP
	  (câble laplink)).</p><p>Pour une installation réseau la plus rapide
	  possible, une carte Ethernet est toujours un bon choix!
	  FreeBSD supporte la plupart des cartes Ethernet PC
	  courantes; une liste des cartes supportées (et leur
	  paramétrage requis) est fournie dans la liste de
	  compatibilité matérielle de chaque version de
	  FreeBSD.  Si vous utilisez une des cartes Ethernet PCMCIA
	  supportée, assurez-vous qu'elle soit en place
	  <span class="emphasis"><em>avant</em></span> d'allumer le portable!  FreeBSD
	  ne supporte pas, malheureusement, actuellement l'insertion
	  à chaud des cartes PCMCIA pendant
	  l'installation.</p><p>Vous devrez aussi connaître votre adresse IP sur
	  le réseau, le masque de réseau pour votre
	  classe d'adresses, et le nom de votre machine.  Si vous
	  installez par l'intermédiaire d'une connexion PPP et
	  que vous n'avez pas d'IP fixe, ne prenez pas peur, l'adresse
	  IP peut être dynamiquement assignée par votre
	  fournisseur d'accès.  Votre administrateur
	  système peut vous dire quelles valeurs utiliser pour
	  votre configuration réseau particulière.  Si
	  vous devez référencer d'autres machines par
	  leur nom plutôt que par leurs adresses IP, vous devrez
	  aussi connaître un serveur de noms et peut-être
	  l'adresse d'une passerelle (si vous utilisez PPP, c'est
	  l'adresse IP de votre fournisseur d'accès) pour
	  accéder à ce serveur.  Si vous voulez
	  installer par FTP via un proxy HTTP, vous aurez
	  également besoin de l'adresse du proxy.  Si vous
	  n'avez pas les réponses à toutes ou la plupart
	  de ces questions, alors vous devriez vraiment en discuter
	  avec votre administrateur système ou votre
	  fournisseur d'accès <span class="emphasis"><em>avant</em></span>
	  d'essayer ce type d'installation.</p><p>Le support SLIP est assez rudimentaire, et essentiellement
	  limité aux lignes directes, comme un câble série
	  entre un
	  ordinateur portable et un autre ordinateur.  La liaison devra
	  être directe car l'installation par SLIP n'offre pas la
	  possibilité de se connecter par téléphone; cette
	  fonctionnalité est fournie par l'utilitaire PPP, qu'il faut
	  utiliser de préférence à SLIP chaque fois que
	  c'est possible.</p><p>Si vous utilisez un modem, PPP est presque certainement
	  votre seul choix.  Veillez à avoir sous la main les
	  informations concernant votre fournisseur d'accès car vous en
	  aurez besoin assez tôt dans la procédure
	  d'installation.</p><p>Si vous utilisez PAP ou CHAP pour vous connecter à votre
	  fournisseur d'accès (en d'autres termes, si vous pouvez vous
	  connecter au fournisseur d'accès sous <span class="trademark">Windows</span>® sans utiliser de
	  script), alors tout ce que vous aurez à faire est de taper
	  <code class="command">dial</code> à l'invite de
	  <span class="application">ppp</span>.  Sinon, vous devrez savoir comment se
	  connecter à votre fournisseur d'accès en utilisant
	  les &#8220;commandes AT&#8221; propres à votre modem, car le
	  programme d'appel PPP ne fournit qu'un émulateur de terminal
	  très simplifié.  Veuillez vous reporter aux sections
	  concernant ppp utilisateur du <a class="link" href="#userppp" title="27.2. Using User PPP ** Traduction en Cours **">Manuel</a> et de la <a class="link" href="../../../../doc/en_US.ISO8859-1/books/faq/ppp.html" target="_top">FAQ</a> pour plus d'informations.
	  Si vous avez des problèmes, connectez-vous directement à
	  l'écran avec la commande <code class="command">set log local
	  ...</code>.</p><p>Si vous disposez d'une liaison directe à une autre machine
	  FreeBSD (2.0-R ou ultérieure), vous pourrez envisager
	  d'installer avec un câble &#8220;laplink&#8221; sur le port
	  parallèle.  La vitesse de transmission sur le port
	  parallèle
	  est plus importante que celle que l'on obtient habituellement
	  avec une liaison série (jusqu'à 50 Koctets/sec), ce qui
	  accélère l'installation.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67105104"></a>2.13.6.1. Avant d'installer par NFS</h4></div></div></div><a id="idp67105744" class="indexterm"></a><p>L'installation NFS est assez directe.  Copiez simplement
	    les fichiers de la distribution FreeBSD que vous voulez
	    quelque part sur un serveur NFS et ensuite mentionnez-le
	    au moment de sélectionner le support
	    NFS.</p><p>Si le serveur n'accepte que les accès sur les
	    &#8220;ports privilégiés&#8221; (ce qui est
	    généralement le
	    cas par défaut sur les stations de travail Sun), vous devrez
	    préciser l'option <code class="literal">NFS Secure</code> dans le menus des <span class="guimenu">Options</span> avant de
	    procéder à l'installation.</p><p>Si vous avez une carte Ethernet de mauvaise qualité qui
	    souffre de vitesses de transfert très faibles, vous devrez
	    peut-être aussi positionner l'option
	    <code class="literal">NFS Slow</code>.</p><p>Pour que l'installation NFS fonctionne, le serveur doit
	    pouvoir monter des sous-répertoires, par exemple, si le
	    répertoire
	    pour votre distribution de FreeBSD 10.1 est:
	    <code class="filename">ziggy:/usr/archive/stuff/FreeBSD</code>, alors
	    <code class="systemitem">ziggy</code> devra autoriser le montage de
	    <code class="filename">/usr/archive/stuff/FreeBSD</code>, et non
	    seulement de <code class="filename">/usr</code> ou
	    <code class="filename">/usr/archive/stuff</code>.</p><p>Dans le fichier <code class="filename">/etc/exports</code> de
	    FreeBSD, on contrôle cela avec l'option
	    <code class="option">-alldirs</code>.  D'autres serveurs NFS peuvent
	    avoir d'autres conventions.  Si le serveur vous envoie des
	    messages <span class="errorname">permission denied</span>, alors il est
	    probable que vous n'avez pas activé correctement cette
	    fonctionnalité.</p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall"></a>Chapitre 3. Installer FreeBSD 9.<em class="replaceable"><code>X</code></em> et versions
      suivantes</h2></div><div><span class="authorgroup">Restructuré, réorganisé, et en partie
	  réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Le guide de sysinstall, les copies d'écrans, et la
	  plupart du texte sont de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Randy</span> <span class="surname">Pratt</span></span>. </span></div><div><span class="authorgroup">Mis à jour pour bsdinstall par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gavin</span> <span class="surname">Atkinson</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Warren</span> <span class="surname">Block</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#bsdinstall-synopsis">3.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-hardware">3.2. Matériel nécessaire</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-pre">3.3. Tâches de pré-installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-start">3.4. Lancer l'installation</a></span></dt><dt><span class="sect1"><a href="#using-bsdinstall">3.5. Présentation de <span class="application">bsdinstall</span></a></span></dt><dt><span class="sect1"><a href="#bsdinstall-netinstall">3.6. Installation à partir du réseau</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-partitioning">3.7. Allouer l'espace disque</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-final-warning">3.8. Procéder à l'installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-post">3.9. Post-Installation</a></span></dt><dt><span class="sect1"><a href="#bsdinstall-install-trouble">3.10. Dépannage</a></span></dt><dt><span class="sect1"><a href="#using-live-cd">3.11. Utilisation du CD Live</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-synopsis"></a>3.1. Synopsis</h2></div></div></div><a id="idp67146960" class="indexterm"></a><p>FreeBSD est fourni avec un programme d'installation en mode
      texte facile d'emploi.  FreeBSD 9.0-RELEASE et les versions
      suivantes utilisent un programme d'installation appelé
      <span class="application">bsdinstall</span>, alors que les versions
      précédentes à FreeBSD 9.0-RELEASE emploient
      <span class="application">sysinstall</span> pour l'installation.  Ce
      chapitre décrit l'utilisation de
      <span class="application">bsdinstall</span>.  Celle de
      <span class="application">sysinstall</span> est abordée dans la <a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a>.</p><p>Après la lecture de ce chapitre, vous connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment créer un support d'installation de FreeBSD.</p></li><li class="listitem"><p>Comment FreeBSD subdivise et accède aux disques
	  durs.</p></li><li class="listitem"><p>Comment lancer
	  <span class="application">bsdinstall</span>.</p></li><li class="listitem"><p>Les questions que <span class="application">bsdinstall</span>
	  vous posera, ce qu'elles signifient, et comment y
	  répondre.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Lire la liste du matériel supporté fournie avec la
	  version de FreeBSD que vous allez installer, et vérifier que
	  votre matériel est supporté.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Par défaut, ces instructions d'installation sont
	écrites pour l'architecture <span class="trademark">i386</span>&#8482; (<span class="quote">« <span class="quote">compatible
	PC</span> »</span>).  Où elles seront applicables, les instructions
	spécifiques à d'autres plateformes seront indiquées.  Vous
	pourrez constater des différences mineures entre le programme
	d'installation et ce qui est montré ici, il est donc suggéré
	d'utiliser ce chapitre comme un guide général plutôt comme un
	manuel d'installation à suivre à la ligne près.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-hardware"></a>3.2. Matériel nécessaire</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-hardware-minimal"></a>3.2.1. Configuration minimale</h3></div></div></div><p>La configuration minimale pour installer FreeBSD varie avec
	la version de FreeBSD et l'architecture matérielle
	concernée.</p><p>Des informations sur cette configuration sont données dans
	les sections suivantes.  En fonction de la méthode que vous
	avez choisie pour installer FreeBSD, vous pourrez avoir besoin
	d'un lecteur de CDROM supporté, et dans certains cas d'une
	carte réseau.  Cela sera abordé dans la <a class="xref" href="#bsdinstall-installation-media" title="3.3.5. Préparer le support d'installation">Section 3.3.5, « Préparer le support d'installation »</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67160784"></a>3.2.1.1. Architecture FreeBSD/i386</h4></div></div></div><p>FreeBSD/i386 nécessite un processeur 486 ou plus
	  performant et au moins 64 Mo de RAM.  Au moins un
	  1.1 Go d'espace libre sur le disque dur est nécessaire
	  pour l'installation la plus réduite.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Sur d'anciens ordinateurs, augmenter la RAM et
	    l'espace disque est en général plus efficace dans
	    l'amélioration des performances que l'installation d'un
	    processeur plus rapide.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67175120"></a>3.2.1.2. Architecture FreeBSD/amd64</h4></div></div></div><p>Il existe deux classes de processeurs en mesure
	  d'utiliser FreeBSD/amd64.  La première est
	  composée des processeurs AMD64, comprenant les processeurs
	  <span class="trademark">AMD Athlon</span>&#8482;64, <span class="trademark">AMD Athlon</span>&#8482;64-FX, <span class="trademark">AMD Opteron</span>&#8482; et
	  suivants.</p><p>La seconde classe de processeurs pouvant utiliser
	  FreeBSD/amd64 comprend les processeurs basés sur
	  l'architecture <span class="trademark">Intel</span>® EM64T.  Comme par exemple, les
	  familles de processeurs <span class="trademark">Intel</span>® <span class="trademark">Core</span>&#8482; 2 Duo,
	  Quad, et Extreme, et la série des processeurs
	  <span class="trademark">Intel</span>® <span class="trademark">Xeon</span>&#8482; 3000, 5000, et 7000, et enfin les
	  processeurs <span class="trademark">Intel</span>® <span class="trademark">Core</span>&#8482; i3, i5 et i7.</p><p>Si vous avez une machine basée sur le circuit nVidia
	  nForce3 Pro-150, vous <span class="emphasis"><em>devez</em></span> désactiver
	  l'option IO APIC dans le BIOS de votre machine.  Si vous
	  n'avez pas la possibilité de le faire, vous devrez
	  désactiver à la place l'ACPI.  Il existe un certain nombre
	  de bogues dans le circuit Pro-150 pour lesquels nous n'avons
	  toujours pas trouvé de solution.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67181776"></a>3.2.1.3. Architecture FreeBSD/powerpc <span class="trademark">Apple</span>®
	  <span class="trademark">Macintosh</span>®</h4></div></div></div><p>Tous les systèmes <span class="trademark">Apple</span>® <span class="trademark">Macintosh</span>® de type <span class="quote">« <span class="quote">New
	  World</span> »</span> avec l'USB intégré sont supportés.  Un
	  fonctionnement multi-processeurs est supporté sur les
	  machines dotées de plusieurs processeurs.</p><p>Un noyau 32bits ne peut utiliser que les 2 premiers Go
	  de RAM.  Le <span class="trademark">FireWire</span>® n'est supporté que sur les PowerMac
	  bleu et blanc.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67186256"></a>3.2.1.4. Architecture FreeBSD/sparc64</h4></div></div></div><p>Les systèmes supportés par FreeBSD/sparc64 sont
	  listés sur la page du projet <a class="link" href="http://www.freebsd.org/platforms/sparc.html" target="_top">FreeBSD/sparc64</a>.</p><p>Un disque dur dédié sera nécessaire pour
	  FreeBSD/sparc64.  Il n'est pas, pour l'instant, possible
	  de partager un disque dur avec un autre système
	  d'exploitation.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-hardware-supported"></a>3.2.2. Matériel supporté</h3></div></div></div><p>Le matériel et les architectures supportés par une version
	de FreeBSD sont listés dans la liste de compatibilité matérielle.
	Généralement nommé <code class="filename">HARDWARE.TXT</code>, ce
	document peut être trouvé sur la racine du support
	d'installation.  La liste du matériel supporté peut également
	être trouvée sur la page d'<a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">Information
	sur les versions</a> du site Web de FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-pre"></a>3.3. Tâches de pré-installation</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67191632"></a>3.3.1. Sauvegardez vos données</h3></div></div></div><p>Sauvegardez toutes les données importantes présentes sur
	l'ordinateur sur lequel FreeBSD sera installé.  Testez ces
	sauvegardes avant de poursuivre.  Le programme d'installation
	de FreeBSD vous sollicitera avant d'écrire sur le disque, mais
	une fois le processus lancé, il ne sera pas possible de
	revenir en arrière.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-where"></a>3.3.2. Où installer FreeBSD?</h3></div></div></div><p>Si FreeBSD sera le seul système d'exploitation installé, et
	qu'il utilisera l'intégralité du disque dur, vous pouvez
	passer cette section.  Mais si FreeBSD doit partager le disque
	avec d'autres systèmes d'exploitation, une connaissance de
	l'organisation des disques durs sera utile pendant
	l'installation.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-where-i386"></a>3.3.2.1. Organisation des disques pour les architectures
	  FreeBSD/i386 et FreeBSD/amd64</h4></div></div></div><p>Les disques durs peuvent être divisés en plusieurs
	  portions.  Ces portions sont appelées
	  <span class="emphasis"><em>partitions</em></span>.</p><p>Il existe deux manières pour diviser un disque en
	  partitions.  Le <span class="emphasis"><em>Master Boot Record</em></span>
	  (<acronym class="acronym">MBR</acronym>)
	  traditionnel contient une table de partitions définissant
	  jusqu'à quatre <span class="emphasis"><em>partitions primaires</em></span>.
	  (Pour des raisons historiques, FreeBSD appelle les partitions
	  primaires <span class="emphasis"><em>slices</em></span> ou
	  <span class="emphasis"><em>tranches</em></span>.)  Une limite à quatre
	  partitions est handicapant dans le cas de gros disques durs,
	  aussi une de ces partitions peut devenir une
	  <span class="emphasis"><em>partition étendue</em></span>.  Plusieurs
	  <span class="emphasis"><em>partitions logiques</em></span> pourront alors
	  être créées dans la partition étendue.  Cela peut sembler un
	  peu lourd, c'est le cas.</p><p>La <span class="emphasis"><em>table de partitionnement GUID</em></span>
	  (<span class="emphasis"><em>GUID Partition Table</em></span> ou
	  <acronym class="acronym">GPT</acronym>) est une méthode nouvelle et plus
	  simple pour partitionner un disque.  <acronym class="acronym">GPT</acronym>
	  est bien plus polyvalente que la table de partitionnement
	  MBR traditionnelle.  Les implémentations classiques de
	  <acronym class="acronym">GPT</acronym> autorisent jusqu'à 128 partitions par
	  disque, supprimant ainsi le recours à des solutions
	  problématiques comme les partitions logiques.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains anciens systèmes d'exploitation comme
	    <span class="trademark">Windows</span>® XP ne sont pas compatibles avec le système
	    de partitions <acronym class="acronym">GPT</acronym>.  Si FreeBSD sera amené
	    à partager un disque avec un tel système d'exploitation,
	    un partitionnement <acronym class="acronym">MBR</acronym> sera alors
	    nécessaire.</p></div><p>Le chargeur d'amorçage de FreeBSD a besoin soit d'une
	  partition primaire soit d'une partition
	  <acronym class="acronym">GPT</acronym> (Consulter <a class="xref" href="#boot" title="Chapitre 13. Processus de démarrage de FreeBSD">Chapitre 13, <em>Processus de démarrage de FreeBSD</em></a>
	  pour plus d'information sur le processus d'amorçage de
	  FreeBSD).  Si toutes les partitions primaires ou
	  <acronym class="acronym">GPT</acronym> sont déjà utilisées, l'une d'entre
	  elles devra être libérée pour FreeBSD.</p><p>Une installation minimale de FreeBSD nécessite 1 Go
	  d'espace disque.  Cependant, c'est vraiment une installation
	  <span class="emphasis"><em>minimale</em></span>, ne laissant presque aucun
	  espace libre.  Un minimum plus réaliste est 3 Go sans
	  environnement graphique, et 5 Go ou plus si une
	  interface graphique sera utilisée.  Les applications
	  tierce-partie auront besoin de plus de place.</p><p>De nombreux <a class="link" href="http://en.wikipedia.org/wiki/List_of_disk_partitioning_software" target="_top">
	  outils de partionnement gratuits et commerciaux</a>
	  existent.  <a class="link" href="http://gparted.sourceforge.net/livecd.php" target="_top">GParted
	  Live</a> est un CD Live gratuit qui comprend l'éditeur de
	  partition <span class="application">GParted</span>.
	  <span class="application">GParted</span> est également disponible
	  sur d'autres CDs Live Linux.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les applications de partitionnement de disques peuvent
	    détruire les données.  Effectuez une sauvegarde complète et
	    vérifiez son intégrité avant de modifier les partitions du
	    disque.</p></div><p>Redimensionner des partitions <span class="trademark">Microsoft</span>® Vista
	  peut être complexe.  Un CDROM d'installation de Vista peut
	  être utile quand on tente une telle opération.</p><div class="example"><a id="idp67225936"></a><div class="example-title">Exemple 3.1. Utilisation d'une partition existante</div><div class="example-contents"><p>Soit un ordinateur sous <span class="trademark">Windows</span>® avec un seul disque
	    de 40 Go qui a été divisé en deux partitions de
	    20 Go.  <span class="trademark">Windows</span>® les appelle
	    <code class="filename">C:</code> et
	    <code class="filename">D:</code>.  La partition
	    <code class="filename">C:</code> contient 10 Go de
	    données, et la partition <code class="filename">D:</code>
	    5 Go de données.</p><p>Déplacer les données de <code class="filename">D:</code>
	    vers <code class="filename">C:</code> libérera la deuxième
	    partition pour FreeBSD.</p></div></div><br class="example-break" /><div class="example"><a id="idp67230800"></a><div class="example-title">Exemple 3.2. Réduire une partition existante</div><div class="example-contents"><p>Soit un ordinateur sous <span class="trademark">Windows</span>® disposant d'un seul
	    disque de 40 Go sur lequel il y a une seule grande
	    partition occupant tout le disque.  <span class="trademark">Windows</span>® fait
	    apparaître cette partition de 40 Go comme un seul
	    lecteur <code class="filename">C:</code>.  15 Go d'espace est
	    utilisé.  L'objectif est de limiter <span class="trademark">Windows</span>® à une
	    partition de 20 Go, et avoir une autre partition de
	    20 Go pour FreeBSD.</p><p>Il y a deux façons de procéder:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Sauvegardez vos données <span class="trademark">Windows</span>®.  Puis
		réinstaller <span class="trademark">Windows</span>®, en utilisant une partition de
		20 G à l'installation.</p></li><li class="listitem"><p>Utiliser un outil de redimensionnement de
		partition comme <span class="application">GParted</span>
		pour réduire la partition <span class="trademark">Windows</span>® et créer une
		nouvelle partition dans l'espace libéré pour
		FreeBSD.</p></li></ol></div></div></div><br class="example-break" /><p>Disposer de différentes partitions contenant chacune un
	  système d'exploitation différent permet de lancer au choix
	  un de ces systèmes.  Une autre méthode qui permet
	  l'exécution simultanée de plusieurs systèmes d'exploitation
	  est abordée dans le <a class="xref" href="#virtualization" title="Chapitre 22. Virtualisation">Chapitre 22, <em>Virtualisation</em></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-collect-network-information"></a>3.3.3. Récupérer les informations relatives au réseau</h3></div></div></div><p>Certaines méthodes d'installation de FreeBSD requièrent une
	connexion réseau pour télécharger des fichiers.  Pour se
	connecter à un réseau Ethernet (ou à un modem câble ou ADSL
	avec une interface Ethernet), le programme d'installation
	demandera certaines informations au sujet du réseau.</p><p>Le protocole <span class="emphasis"><em><acronym class="acronym">DHCP</acronym></em></span>
	est communément utilisé pour fournir une configuration réseau
	automatique.  Si la configuration par <acronym class="acronym">DHCP</acronym>
	n'est pas possible, les informations relatives au réseau
	pourront être obtenu auprès de l'administrateur réseau ou du
	fournisseur d'accès:</p><div class="orderedlist"><div class="orderedlist-title">Information réseau</div><ol class="orderedlist" type="1"><li class="listitem"><p>Adresse <acronym class="acronym">IP</acronym></p></li><li class="listitem"><p>Masque de sous-réseau</p></li><li class="listitem"><p>Adresse <acronym class="acronym">IP</acronym> de la passerelle par
	    défaut</p></li><li class="listitem"><p>Nom de domaine du réseau local</p></li><li class="listitem"><p>Adresse(s) <acronym class="acronym">IP</acronym> du serveur
	    <acronym class="acronym">DNS</acronym></p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67252048"></a>3.3.4. Vérifier l'Errata FreeBSD</h3></div></div></div><p>Bien que le projet FreeBSD s'efforce de s'assurer que chaque
	version de FreeBSD soit aussi stable que possible, des bogues
	peuvent parfois exister.  Il est très rare que ces bogues
	affectent le processus d'installation.  Dès que ces problèmes
	sont découverts et corrigés, ils sont notés dans l'<a class="link" href="../../../../releases/10.1R/errata.html" target="_top">Errata
	de FreeBSD</a>, présent sur le site Web de FreeBSD.  Vous
	devriez vérifier l'errata avant l'installation afin d'être sûr
	qu'il n'y a pas de problème pouvant affecter
	l'installation.</p><p>Les informations sur chaque version, y compris les errata,
	peuvent être trouvés dans la section d'<a class="link" href="../../../../releases/index.html" target="_top">information sur
	les différentes versions</a> située sur le <a class="link" href="../../../../index.html" target="_top">site web de
	FreeBSD</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-installation-media"></a>3.3.5. Préparer le support d'installation</h3></div></div></div><p>Une installation de FreeBSD est lancée en démarrant
	l'ordinateur avec un CD, DVD, ou clé USB d'installation de
	FreeBSD.  Le programme d'installation n'est pas un programme qui
	peut être exécuté à partir d'un autre système
	d'exploitation.</p><p>En plus des supports standards d'installation qui
	contiennent une copie de l'ensemble des fichiers
	d'installation de FreeBSD, il existe une variante dite
	<span class="emphasis"><em>bootonly</em></span>.  Le support d'installation
	bootonly ne comprend pas les fichiers d'installation, mais les
	téléchargera à partir du réseau lors de l'installation.  Le CD
	d'installation bootonly est donc plus petit, et réduit la
	bande passante utilisée lors de l'installation en ne
	téléchargeant que les fichiers nécessaires.</p><p>Des exemplaires des supports d'installation de FreeBSD sont
	disponibles sur le <a class="link" href="../../../../where.html#download" target="_top">site Web de
	FreeBSD</a>.  Téléchargez également le fichier
	<code class="filename">CHECKSUM.SHA256</code> à partir du même
	répertoire et utilisez-le pour contrôler l'intégralité des
	fichiers en calculant une <em class="firstterm">somme de
	contrôle</em> ou <em class="firstterm">checksum</em>.  FreeBSD
	fournit <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a> à cet effet, les autres systèmes
	d'exploitation proposent des outils similaires.  Comparez la
	somme de contrôle calculée avec celle donnée dans le fichier
	<code class="filename">CHECKSUM.SHA256</code>.  Les sommes de contrôle
	doivent être identiques.  Si une des sommes ne correspond pas,
	le fichier est corrompu et devra être téléchargé à
	nouveau.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous avez déjà une copie de FreeBSD sur CDROM, DVD, ou
	  clé USB, cette section peut être ignorée.</p></div><p> Les images CD et DVD de FreeBSD sont des fichiers ISO
	<span class="quote">« <span class="quote">bootable</span> »</span>.  Seul un CD ou DVD est nécessaire
	pour l'installation.  Gravez l'image ISO sur un CD ou DVD en
	utilisant un logiciel de gravure disponible pour votre système
	d'exploitation actuel.  Sous FreeBSD, la gravure est possible
	avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a> du logiciel porté <code class="filename">sysutils/cdrtools</code>, installé à partir du
	catalogue des logiciels portés.</p><p>Pour créer une clé USB bootable, suivez les étapes
	suivantes:</p><div class="procedure"><a id="bsdinstall-installation-media-memory-stick"></a><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Obtenir l'image de la clé USB</strong></p><p>Les images de clés USB pour FreeBSD 9.0-RELEASE et
	    versions ultérieures peuvent être téléchargées à partir du
	    répertoire <code class="filename">ISO-IMAGES/</code> à l'adresse
	    <code class="literal">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/<em class="replaceable"><code>arch</code></em>/<em class="replaceable"><code>arch</code></em>/ISO-IMAGES/<em class="replaceable"><code>version</code></em>/FreeBSD-<em class="replaceable"><code>version</code></em>-RELEASE-<em class="replaceable"><code>arch</code></em>-memstick.img</code>.
	    Remplacer <em class="replaceable"><code>arch</code></em> et
	    <em class="replaceable"><code>version</code></em> par respectivement
	    l'architecture et le numéro de version que vous voulez
	    installer.  Par exemple, les images de clés USB Pour
	    FreeBSD/i386 9.0-RELEASE sont disponibles à
	    partir de <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/9.0/FreeBSD-9.0-RELEASE-i386-memstick.img" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/releases/i386/i386/ISO-IMAGES/9.0/FreeBSD-9.0-RELEASE-i386-memstick.img</a>.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un chemin de répertoire différent est utilisé pour
	      FreeBSD 8.<em class="replaceable"><code>X</code></em> et les versions
	      antérieures.  Des informations sur le téléchargement et
	      l'installation de
	      FreeBSD 8.<em class="replaceable"><code>X</code></em> et des versions
	      antérieures sont données dans le <a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a>.</p></div><p>L'image de la clé USB a l'extension
	    <code class="filename">.img</code>.  Le répertoire
	    <code class="filename">ISO-IMAGES/</code> contient un certain
	    nombre d'images différentes, et celle à employer dépend de
	    la version de FreeBSD à installer, et dans certains cas, du
	    matériel cible de l'installation.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avant de continuer, <span class="emphasis"><em>sauvegardez</em></span>
	      les données présentes sur la clé USB, en effet
	      l'écriture de l'image <span class="emphasis"><em>détruira</em></span>
	      toutes les données.</p></div></li><li class="step"><p class="title"><strong>Ecrire le fichier image sur la clé USB</strong></p><div class="procedure"><a id="idp67283024"></a><div class="procedure-title">Procédure 3.1. Utiliser FreeBSD pour écrire l'image</div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'exemple ci-dessous prend
		<code class="filename">/dev/da0</code> comme périphérique cible
		sur lequel l'image sera écrite.  Vérifiez que le
		périphérique utilisé comme cible est bien le bon, ou
		vous risquer de détruire les données
		existantes.</p></div><ul class="procedure"><li class="step"><p class="title"><strong>Ecrire l'image avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a></strong></p><p>Le fichier <code class="filename">.img</code> n'est
		<span class="emphasis"><em>pas</em></span> un
		fichier classique.  C'est une
		<span class="emphasis"><em>image</em></span> de l'intégralité du contenu
		de la clé.  Il <span class="emphasis"><em>ne peut pas</em></span> être
		simplement copié comme n'importe quel fichier, mais
		doit être écrit directement sur le périphérique cible
		avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=FreeBSD-9.0-RELEASE-i386-memstick.img of=/dev/<em class="replaceable"><code>da0</code></em> bs=64k</code></strong></pre></li></ul></div><div class="procedure"><a id="idp67294544"></a><div class="procedure-title">Procédure 3.2. Utiliser <span class="trademark">Windows</span>® pour écrire l'image</div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Assurez-vous de préciser le bon lecteur comme
		cible, ou vous risquez d'écraser et détruire les
		données existantes.</p></div><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Récupérer <span class="application">Image Writer for
		  <span class="trademark">Windows</span>®</span></strong></p><p><span class="application">Image Writer for
		<span class="trademark">Windows</span>®</span> est une application gratuite
		pour écrire une image sur une clé USB.  Téléchargez-la
		depuis <code class="uri"><a class="uri" href="https://launchpad.net/win32-image-writer/" target="_top"></a></code>
		et décompressez-la dans un répertoire.</p></li><li class="step"><p class="title"><strong>Ecrire l'image avec Image Writer</strong></p><p>Double-cliquez sur l'icone
		<span class="application">Win32DiskImager</span> pour lancer
		le programme.  Vérifez que le lecteur affiché sous
		<code class="computeroutput">Device</code> est celui de
		la clé USB.  Cliquer sur l'icone répertoire et
		sélectionner l'image à écrire sur la clé.  Cliquer sur
		<span class="guibutton">[ Save ]</span> pour
		accepter le nom du fichier image.  Vérifiez que tout
		est correct, et qu'il n'y a pas de répertoires
		présents sur la clé USB ouverts dans d'autres
		fenêtres.  Puis quand tout est prêt, cliquer sur
		<span class="guibutton">[ Write ]</span> pour écrire
		le fichier image sur la clé USB.</p></li></ol></div></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'installation à partir de disquettes n'est plus
	  supportée.</p></div><p>Vous êtes maintenant prêt à commencer l'installation de
	FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-start"></a>3.4. Lancer l'installation</h2></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Par défaut, le processus d'installation ne modifiera rien
	sur le(s) disque(s) dur(s) jusqu'à ce que vous voyiez le
	message suivant:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="literallayout">Your changes will now be written to disk.  If you
have chosen to overwrite existing data, it will
be PERMANENTLY ERASED. Are you sure you want to
commit your changes?</pre><p xmlns="http://www.w3.org/1999/xhtml">L'installation peut être quittée à tout moment avant
	l'avertissement final sans changer le contenu du disque dur.
	Si vous avez mal configuré quelque chose, vous pouvez juste
	éteindre l'ordinateur avant ce point sans aucun risque.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-starting"></a>3.4.1. Démarrage</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-starting-i386"></a>3.4.1.1. Démarrage pour les architectures <span class="trademark">i386</span>&#8482; et
	  amd64</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Si vous avez préparé une clé USB
	      <span class="quote">« <span class="quote">bootable</span> »</span>, comme décrit dans la <a class="xref" href="#bsdinstall-installation-media" title="3.3.5. Préparer le support d'installation">Section 3.3.5, « Préparer le support d'installation »</a>, branchez
	      alors votre clé USB avant d'allumer l'ordinateur.</p><p>Si vous démarrez depuis le CDROM, alors vous devrez
	      allumer votre ordinateur, et insérer le CDROM à la
	      première occasion.</p></li><li class="step"><p>Configurez votre machine pour qu'elle démarre soit à
	      partir du CDROM ou de l'USB, en fonction du support
	      utilisé pour l'installation.  Le <acronym class="acronym">BIOS</acronym>
	      permet la sélection d'un périphérique de démarrage
	      spécifique.  La plupart des systèmes proposent également
	      la sélection du périphérique d'amorçage au démarrage,
	      généralement en appuyant sur <span class="keycap"><strong>F10</strong></span>,
	      <span class="keycap"><strong>F11</strong></span>, <span class="keycap"><strong>F12</strong></span>, ou encore
	      <span class="keycap"><strong>Escape</strong></span>.</p></li><li class="step"><p>Si votre ordinateur démarre comme à l'accoutumée et,
	      et charge le système d'exploitation existant, alors
	      soit:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Les disques n'ont pas été insérés suffisamment
		  tôt lors du processus de démarrage.  Laissez-les, et
		  essayez de redémarrer votre ordinateur.</p></li><li class="listitem"><p>Soit les modifications du <acronym class="acronym">BIOS</acronym>
		  effectuées juste avant n'ont pas fonctionné
		  correctement.  Vous devrez repasser par cette étape
		  jusqu'à trouver la bonne option.</p></li><li class="listitem"><p>Soit votre <acronym class="acronym">BIOS</acronym> ne supporte
		  pas l'amorçage à partir du support désiré.  Le <a class="link" href="http://www.plop.at/en/bootmanager.html" target="_top">gestionnaire
		  de démarrage Plop</a> peut être utilisé pour
		  démarrer les anciens ordinateurs à partir de
		  supports comme un CD ou une clé USB.</p></li></ol></div></li><li class="step"><p>FreeBSD démarre.  Si vous démarrez à partir du CDROM
	      vous verrez un affichage similaire à ceci (information
	      sur la version omise):</p><pre class="screen">Booting from CD-ROM...
645MB medium detected
CD Loader 1.2

Building the boot loader arguments
Looking up /BOOT/LOADER... Found
Relocating the loader and the BTX
Starting the BTX loader

BTX loader 1.00 BTX version is 1.02
Consoles: internal video/keyboard
BIOS CD is cd0
BIOS drive C: is disk0
BIOS drive D: is disk1
BIOS 636kB/261056kB available memory

FreeBSD/i386 bootstrap loader, Revision 1.1

Loading /boot/defaults/loader.conf
/boot/kernel/kernel text=0x64daa0 data=0xa4e80+0xa9e40 syms=[0x4+0x6cac0+0x4+0x88e9d]
\</pre></li><li class="step"><p>Le chargeur FreeBSD est alors affiché:</p><div class="figure"><a id="bsdinstall-boot-loader-menu"></a><div class="figure-title">Figure 3.1. Menu du chargeur FreeBSD</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-boot-loader-menu.png" alt="Menu du chargeur FreeBSD" /></div></div></div><br class="figure-break" /><p>Attendez dix secondes, ou appuyez sur
	      <span class="keycap"><strong>Entrée</strong></span>.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67372496"></a>3.4.1.2. Démarrage pour l'architecture <span class="trademark">Macintosh</span>®
	  <span class="trademark">PowerPC</span>®</h4></div></div></div><p>Sur la plupart des machines, maintenir
	  la touche <span class="keycap"><strong>C</strong></span> enfoncée lors du démarrage
	  provoquera l'amorçage du CD.  Sinon appuyez sur
	  <span class="keycap"><strong>Command</strong></span>+<span class="keycap"><strong>Option</strong></span>+<span class="keycap"><strong>O</strong></span>+<span class="keycap"><strong>F</strong></span>,
	  ou
	  <span class="keycap"><strong>Windows</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>O</strong></span>+<span class="keycap"><strong>F</strong></span>
	  dans le cas des claviers non-<span class="trademark">Apple</span>®.  A l'invite
	  <code class="prompt">0 &gt;</code>, entrez:</p><pre class="screen"><strong class="userinput"><code>boot cd:,\ppc\loader cd:0</code></strong></pre><p>Pour les machines Xserve sans clavier, consultez le
	  <a class="link" href="http://support.apple.com/kb/TA26930" target="_top">site de
	  support d'<span class="trademark">Apple</span>®</a> au sujet du démarrage avec Open
	  Firmware.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67381840"></a>3.4.1.3. Démarrage pour l'architecture <span class="trademark">SPARC64</span>®</h4></div></div></div><p>La plupart des systèmes <span class="trademark">SPARC64</span>® sont
	  configurés pour démarrer automatiquement
	  à partir du disque dur.  Pour installer FreeBSD, vous
	  devez démarrer à partir du réseau ou
	  à partir d'un CDROM, ce qui nécessitera un
	  passage par le <acronym class="acronym">PROM</acronym>
	  (OpenFirmware).</p><p>Pour cela, redémarrez le système, et
	  attendez l'affichage des messages de démarrage.  En
	  fonction du modèle, vous devriez voir quelque chose
	  comme ce qui suit:</p><pre class="screen">Sun Blade 100 (UltraSPARC-IIe), Keyboard Present
Copyright 1998-2001 Sun Microsystems, Inc.  All rights reserved.
OpenBoot 4.2, 128 MB memory installed, Serial #51090132.
Ethernet address 0:3:ba:b:92:d4, Host ID: 830b92d4.</pre><p>Si votre système tente de démarrer
	  à partir du disque dur à cet endroit, vous devrez
	  alors appuyer sur <span class="keycap"><strong>L1</strong></span>+<span class="keycap"><strong>A</strong></span>
	  ou <span class="keycap"><strong>Stop</strong></span>+<span class="keycap"><strong>A</strong></span>
	  sur le clavier, ou envoyer un <code class="command">BREAK</code> par
	  l'intermédiaire de la console série (en utilisant par
	  exemple <code class="command">~#</code> sous <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a> ou
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>) pour obtenir l'invite <acronym class="acronym">PROM</acronym>.
	  Cela ressemble à ceci:</p><pre class="screen"><code class="prompt">ok  </code><a id="bsdinstall-prompt-single"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">ok {0} </code><a id="bsdinstall-prompt-smp"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#bsdinstall-prompt-single"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>C'est l'invite utilisée sur les systèmes avec un
	      seul CPU.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#bsdinstall-prompt-smp"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>C'est l'invite utilisée sur les systèmes SMP, le
	      chiffre indiquant le nombre de CPU actifs.</p></td></tr></table></div><p>En ce point, placez le CDROM dans le lecteur, et
	  à l'invite <acronym class="acronym">PROM</acronym>, tapez <code class="command">boot
	  cdrom</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-view-probe"></a>3.4.2. Examen des résultats de la détection du
	matériel</h3></div></div></div><p>La dernière centaine de lignes qui a été affichée à
	l'écran est stockée et peut être relue.</p><p>Pour relire le tampon, appuyez sur <span class="keycap"><strong>Arrêt
	Défil</strong></span>.  Cela activera le défilement de l'affichage.
	Vous pouvez alors utiliser les touches fléchées, ou
	<span class="keycap"><strong>PageUp</strong></span> et <span class="keycap"><strong>PageDown</strong></span> pour
	visualiser les résultats.  Appuyer à nouveau sur <span class="keycap"><strong>Arrêt
	Défil</strong></span> pour revenir dans le mode normal.</p><p>Faites cela maintenant, pour relire le texte qui a défilé
	en dehors de l'écran quand le noyau effectuait la détection du
	matériel.  Vous verrez quelque chose de semblable à la <a class="xref" href="#bsdinstall-dev-probe" title="Figure 3.2. Résultats typiques de la détection du matériel">Figure 3.2, « Résultats typiques de la détection du
	  matériel »</a>, bien que le texte sera
	différent en fonction des périphériques que vous avez dans
	votre ordinateur.</p><div class="figure"><a id="bsdinstall-dev-probe"></a><div class="figure-title">Figure 3.2. Résultats typiques de la détection du
	  matériel</div><div class="figure-contents"><pre class="screen">Copyright (c) 1992-2011 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD is a registered trademark of The FreeBSD Foundation.
FreeBSD 9.0-RELEASE #0 r225473M: Sun Sep 11 16:07:30 BST 2011
    root@psi:/usr/obj/usr/src/sys/GENERIC amd64
CPU: Intel(R) Core(TM)2 Duo CPU     T9400  @ 2.53GHz (2527.05-MHz K8-class CPU)
  Origin = "GenuineIntel"  Id = 0x10676  Family = 6  Model = 17  Stepping = 6
  Features=0xbfebfbff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CLFLUSH,DTS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE&gt;
  Features2=0x8e3fd&lt;SSE3,DTES64,MON,DS_CPL,VMX,SMX,EST,TM2,SSSE3,CX16,xTPR,PDCM,SSE4.1&gt;
  AMD Features=0x20100800&lt;SYSCALL,NX,LM&gt;
  AMD Features2=0x1&lt;LAHF&gt;
  TSC: P-state invariant, performance statistics
real memory  = 3221225472 (3072 MB)
avail memory = 2926649344 (2791 MB)
Event timer "LAPIC" quality 400
ACPI APIC Table: &lt;TOSHIB A0064   &gt;
FreeBSD/SMP: Multiprocessor System Detected: 2 CPUs
FreeBSD/SMP: 1 package(s) x 2 core(s)
 cpu0 (BSP): APIC ID:  0
 cpu1 (AP): APIC ID:  1
ioapic0: Changing APIC ID to 1
ioapic0 &lt;Version 2.0&gt; irqs 0-23 on motherboard
kbd1 at kbdmux0
acpi0: &lt;TOSHIB A0064&gt; on motherboard
acpi0: Power Button (fixed)
acpi0: reservation of 0, a0000 (3) failed
acpi0: reservation of 100000, b6690000 (3) failed
Timecounter "ACPI-safe" frequency 3579545 Hz quality 850
acpi_timer0: &lt;24-bit timer at 3.579545MHz&gt; port 0xd808-0xd80b on acpi0
cpu0: &lt;ACPI CPU&gt; on acpi0
ACPI Warning: Incorrect checksum in table [ASF!] - 0xFE, should be 0x9A (20110527/tbutils-282)
cpu1: &lt;ACPI CPU&gt; on acpi0
pcib0: &lt;ACPI Host-PCI bridge&gt; port 0xcf8-0xcff on acpi0
pci0: &lt;ACPI PCI bus&gt; on pcib0
vgapci0: &lt;VGA-compatible display&gt; port 0xcff8-0xcfff mem 0xff400000-0xff7fffff,0xe0000000-0xefffffff irq 16 at device 2.0 on pci0
agp0: &lt;Intel GM45 SVGA controller&gt; on vgapci0
agp0: aperture size is 256M, detected 131068k stolen memory
vgapci1: &lt;VGA-compatible display&gt; mem 0xffc00000-0xffcfffff at device 2.1 on pci0
pci0: &lt;simple comms&gt; at device 3.0 (no driver attached)
em0: &lt;Intel(R) PRO/1000 Network Connection 7.2.3&gt; port 0xcf80-0xcf9f mem 0xff9c0000-0xff9dffff,0xff9fe000-0xff9fefff irq 20 at device 25.0 on pci0
em0: Using an MSI interrupt
em0: Ethernet address: 00:1c:7e:6a:ca:b0
uhci0: &lt;Intel 82801I (ICH9) USB controller&gt; port 0xcf60-0xcf7f irq 16 at device 26.0 on pci0
usbus0: &lt;Intel 82801I (ICH9) USB controller&gt; on uhci0
uhci1: &lt;Intel 82801I (ICH9) USB controller&gt; port 0xcf40-0xcf5f irq 21 at device 26.1 on pci0
usbus1: &lt;Intel 82801I (ICH9) USB controller&gt; on uhci1
uhci2: &lt;Intel 82801I (ICH9) USB controller&gt; port 0xcf20-0xcf3f irq 19 at device 26.2 on pci0
usbus2: &lt;Intel 82801I (ICH9) USB controller&gt; on uhci2
ehci0: &lt;Intel 82801I (ICH9) USB 2.0 controller&gt; mem 0xff9ff800-0xff9ffbff irq 19 at device 26.7 on pci0
usbus3: EHCI version 1.0
usbus3: &lt;Intel 82801I (ICH9) USB 2.0 controller&gt; on ehci0
hdac0: &lt;Intel 82801I High Definition Audio Controller&gt; mem 0xff9f8000-0xff9fbfff irq 22 at device 27.0 on pci0
pcib1: &lt;ACPI PCI-PCI bridge&gt; irq 17 at device 28.0 on pci0
pci1: &lt;ACPI PCI bus&gt; on pcib1
iwn0: &lt;Intel(R) WiFi Link 5100&gt; mem 0xff8fe000-0xff8fffff irq 16 at device 0.0 on pci1
pcib2: &lt;ACPI PCI-PCI bridge&gt; irq 16 at device 28.1 on pci0
pci2: &lt;ACPI PCI bus&gt; on pcib2
pcib3: &lt;ACPI PCI-PCI bridge&gt; irq 18 at device 28.2 on pci0
pci4: &lt;ACPI PCI bus&gt; on pcib3
pcib4: &lt;ACPI PCI-PCI bridge&gt; at device 30.0 on pci0
pci5: &lt;ACPI PCI bus&gt; on pcib4
cbb0: &lt;RF5C476 PCI-CardBus Bridge&gt; at device 11.0 on pci5
cardbus0: &lt;CardBus bus&gt; on cbb0
pccard0: &lt;16-bit PCCard bus&gt; on cbb0
isab0: &lt;PCI-ISA bridge&gt; at device 31.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
ahci0: &lt;Intel ICH9M AHCI SATA controller&gt; port 0x8f58-0x8f5f,0x8f54-0x8f57,0x8f48-0x8f4f,0x8f44-0x8f47,0x8f20-0x8f3f mem 0xff9fd800-0xff9fdfff irq 19 at device 31.2 on pci0
ahci0: AHCI v1.20 with 4 3Gbps ports, Port Multiplier not supported
ahcich0: &lt;AHCI channel&gt; at channel 0 on ahci0
ahcich1: &lt;AHCI channel&gt; at channel 1 on ahci0
ahcich2: &lt;AHCI channel&gt; at channel 4 on ahci0
acpi_lid0: &lt;Control Method Lid Switch&gt; on acpi0
battery0: &lt;ACPI Control Method Battery&gt; on acpi0
acpi_button0: &lt;Power Button&gt; on acpi0
acpi_acad0: &lt;AC Adapter&gt; on acpi0
acpi_toshiba0: &lt;Toshiba HCI Extras&gt; on acpi0
acpi_tz0: &lt;Thermal Zone&gt; on acpi0
attimer0: &lt;AT timer&gt; port 0x40-0x43 irq 0 on acpi0
Timecounter "i8254" frequency 1193182 Hz quality 0
Event timer "i8254" frequency 1193182 Hz quality 100
atkbdc0: &lt;Keyboard controller (i8042)&gt; port 0x60,0x64 irq 1 on acpi0
atkbd0: &lt;AT Keyboard&gt; irq 1 on atkbdc0
kbd0 at atkbd0
atkbd0: [GIANT-LOCKED]
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: model GlidePoint, device ID 0
atrtc0: &lt;AT realtime clock&gt; port 0x70-0x71 irq 8 on acpi0
Event timer "RTC" frequency 32768 Hz quality 0
hpet0: &lt;High Precision Event Timer&gt; iomem 0xfed00000-0xfed003ff on acpi0
Timecounter "HPET" frequency 14318180 Hz quality 950
Event timer "HPET" frequency 14318180 Hz quality 450
Event timer "HPET1" frequency 14318180 Hz quality 440
Event timer "HPET2" frequency 14318180 Hz quality 440
Event timer "HPET3" frequency 14318180 Hz quality 440
uart0: &lt;16550 or compatible&gt; port 0x3f8-0x3ff irq 4 flags 0x10 on acpi0
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
ppc0: cannot reserve I/O port range
est0: &lt;Enhanced SpeedStep Frequency Control&gt; on cpu0
p4tcc0: &lt;CPU Frequency Thermal Control&gt; on cpu0
est1: &lt;Enhanced SpeedStep Frequency Control&gt; on cpu1
p4tcc1: &lt;CPU Frequency Thermal Control&gt; on cpu1
Timecounters tick every 1.000 msec
hdac0: HDA Codec #0: Realtek ALC268
hdac0: HDA Codec #1: Lucent/Agere Systems (Unknown)
pcm0: &lt;HDA Realtek ALC268 PCM #0 Analog&gt; at cad 0 nid 1 on hdac0
pcm1: &lt;HDA Realtek ALC268 PCM #1 Analog&gt; at cad 0 nid 1 on hdac0
usbus0: 12Mbps Full Speed USB v1.0
usbus1: 12Mbps Full Speed USB v1.0
usbus2: 12Mbps Full Speed USB v1.0
usbus3: 480Mbps High Speed USB v2.0
ugen0.1: &lt;Intel&gt; at usbus0
uhub0: &lt;Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus0
ugen1.1: &lt;Intel&gt; at usbus1
uhub1: &lt;Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus1
ugen2.1: &lt;Intel&gt; at usbus2
uhub2: &lt;Intel UHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus2
ugen3.1: &lt;Intel&gt; at usbus3
uhub3: &lt;Intel EHCI root HUB, class 9/0, rev 2.00/1.00, addr 1&gt; on usbus3
uhub0: 2 ports with 2 removable, self powered
uhub1: 2 ports with 2 removable, self powered
uhub2: 2 ports with 2 removable, self powered
uhub3: 6 ports with 6 removable, self powered
ugen2.2: &lt;vendor 0x0b97&gt; at usbus2
uhub8: &lt;vendor 0x0b97 product 0x7761, class 9/0, rev 1.10/1.10, addr 2&gt; on usbus2
ugen1.2: &lt;Microsoft&gt; at usbus1
ada0 at ahcich0 bus 0 scbus1 target 0 lun 0
ada0: &lt;Hitachi HTS543225L9SA00 FBEOC43C&gt; ATA-8 SATA 1.x device
ada0: 150.000MB/s transfers (SATA 1.x, UDMA6, PIO 8192bytes)
ada0: Command Queueing enabled
ada0: 238475MB (488397168 512 byte sectors: 16H 63S/T 16383C)
ada0: Previously was known as ad4
ums0: &lt;Microsoft Microsoft 3-Button Mouse with IntelliEyeTM, class 0/0, rev 1.10/3.00, addr 2&gt; on usbus1
SMP: AP CPU #1 Launched!
cd0 at ahcich1 bus 0 scbus2 target 0 lun 0
cd0: &lt;TEAC DV-W28S-RT 7.0C&gt; Removable CD-ROM SCSI-0 device
cd0: 150.000MB/s transfers (SATA 1.x, ums0: 3 buttons and [XYZ] coordinates ID=0
UDMA2, ATAPI 12bytes, PIO 8192bytes)
cd0: cd present [1 x 2048 byte records]
ugen0.2: &lt;Microsoft&gt; at usbus0
ukbd0: &lt;Microsoft Natural Ergonomic Keyboard 4000, class 0/0, rev 2.00/1.73, addr 2&gt; on usbus0
kbd2 at ukbd0
uhid0: &lt;Microsoft Natural Ergonomic Keyboard 4000, class 0/0, rev 2.00/1.73, addr 2&gt; on usbus0
Trying to mount root from cd9660:/dev/iso9660/FREEBSD_INSTALL [ro]...</pre></div></div><br class="figure-break" /><p>Vérifiez les résultats de la détection pour s'assurer que
	FreeBSD a trouvé tous les périphériques que vous attendiez.  Si
	un périphérique n'a pas été trouvé, il ne sera alors pas
	affiché.  Les <a class="link" href="#kernelconfig-custom-kernel" title="9.2. Pourquoi compiler un noyau sur mesure?">modules du noyau</a> vous
	permettent d'ajouter le support pour des périphériques qui ne
	sont pas présents dans le noyau
	<code class="filename">GENERIC</code>.</p><p>Après la détection du matériel, apparaîtra l'écran
	<a class="xref" href="#bsdinstall-choose-mode" title="Figure 3.3. Sélection du mode d'utilisation du support d'installation">Figure 3.3, « Sélection du mode d'utilisation du support
	  d'installation »</a>.  Le support
	d'installation peut être utilisé de trois manières
	différentes: pour installer FreeBSD, comme "CD live", ou tout
	simplement pour obtenir un accès à un interpréteur de
	commandes sous FreeBSD.  Utilisez les touches fléchées pour
	sélectionner une de ces options, et <span class="keycap"><strong>Enter</strong></span>
	pour valider le choix.</p><div class="figure"><a id="bsdinstall-choose-mode"></a><div class="figure-title">Figure 3.3. Sélection du mode d'utilisation du support
	  d'installation</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-choose-mode.png" alt="Sélection du mode d'utilisation du support d'installation" /></div></div></div><br class="figure-break" /><p>Sélectionner <span class="guibutton">[ Install ]</span>
	permettra d'entrer dans le programme d'installation.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-bsdinstall"></a>3.5. Présentation de <span class="application">bsdinstall</span></h2></div></div></div><p><span class="application">bsdinstall</span> est un programme
      d'installation en mode texte de FreeBSD écrit par
      Nathan Whitehorn <code class="email">&lt;<a xmlns="" class="email" href="mailto:nwhitehorn@FreeBSD.org">nwhitehorn@FreeBSD.org</a>&gt;</code> et introduit en 2011 sous
      FreeBSD 9.0.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le programme <span class="application">pc-sysinstall</span> de
	Kris Moore <code class="email">&lt;<a xmlns="" class="email" href="mailto:kmoore@FreeBSD.org">kmoore@FreeBSD.org</a>&gt;</code> est présent dans <a class="link" href="http://pcbsd.org" target="_top">PC-BSD</a>, et peut également
	être utilisé pour <a class="link" href="http://wiki.pcbsd.org/index.php/Use_PC-BSD_Installer_to_Install_FreeBSD" target="_top">
	installer FreeBSD</a>.  Parfois confondu avec
	<span class="application">bsdinstall</span>, ces deux programmes
	n'ont pas de rapport.</p></div><p>Le système de menu de <span class="application">bsdinstall</span>
      est contrôlé à l'aide des touches fléchées,
      <span class="keycap"><strong>Entrée</strong></span>, <span class="keycap"><strong>Tab</strong></span>,
      <span class="keycap"><strong>Espace</strong></span>, et quelques autres touches.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-keymap"></a>3.5.1. Sélectionner le menu des tables de clavier</h3></div></div></div><p>En fonction de la console utilisée,
	<span class="application">bsdinstall</span> peut, au départ,
	demander de choisir un clavier non-standard.</p><div class="figure"><a id="bsdinstall-keymap-select-default"></a><div class="figure-title">Figure 3.4. Changement de la table de clavier</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-keymap-select-default.png" alt="Changement de la table de clavier" /></div></div></div><br class="figure-break" /><p>Si <span class="guibutton">[ YES ]</span> est
	sélectionné, le menu suivant de sélection du clavier sera
	affiché. Sinon, le menu de sélection n'apparaîtra pas, et une
	table de clavier par défaut sera utilisée.</p><div class="figure"><a id="bsdinstall-config-keymap"></a><div class="figure-title">Figure 3.5. Menu de sélection de la table de clavier</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-keymap.png" alt="Menu de sélection de la table de clavier" /></div></div></div><br class="figure-break" /><p>Choisissez la table qui est la plus proche du clavier
	attaché au système en utilisant les flèches haut et bas et en
	appuyant sur <span class="keycap"><strong>Entrée</strong></span>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un appui sur <span class="keycap"><strong>Echap</strong></span> provoquera
	  l'utilisation de la table par défaut.  Choisir
	  <span class="guimenuitem">United States of America
	  ISO-8859-1</span> est également conseillé si le choix
	  n'est pas clair.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-hostname"></a>3.5.2. Configurer le nom de la machine</h3></div></div></div><p>Ensuite, <span class="application">bsdinstall</span> demandera
        le nom de machine à donner au nouveau système.</p><div class="figure"><a id="bsdinstall-config-hostname"></a><div class="figure-title">Figure 3.6. Configuration du nom de machine</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-hostname.png" alt="Configuration du nom de machine" /></div></div></div><br class="figure-break" /><p>Le nom de machine entré doit être un nom de machine
	complet comme <code class="systemitem">machine3.example.com</code></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-components"></a>3.5.3. Choisir les composants à installer</h3></div></div></div><p>Ensuite, <span class="application">bsdinstall</span> demandera
	de choisir les composants optionnels à installer.</p><div class="figure"><a id="bsdinstall-config-components"></a><div class="figure-title">Figure 3.7. Sélection des composants à installer</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-components.png" alt="Sélection des composants à installer" /></div></div></div><br class="figure-break" /><p>Décider quels composants installer dépendra principalement
	de l'utilisation prévue du système et de l'espace disque
	disponible.  Le noyau FreeBSD et les utilitaires de base (formant
	ensemble le <span class="quote">« <span class="quote">système de base</span> »</span>) sont toujours
	installés.</p><p>Selon le type d'installation, certains de ces composants
	peuvent ne pas apparaître.</p><div class="itemizedlist"><div class="itemizedlist-title">Composants optionnels</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">doc</code> - Documentation supplémentaire
	    d'un intérêt principalement historique.  La documentation
	    fournie par le projet de documentation FreeBSD pourra être
	    installée plus tard.</p></li><li class="listitem"><p><code class="literal">games</code> - Plusieurs jeux BSD
	    classiques, dont <span class="application">fortune</span>,
	    <span class="application">rot13</span>, et d'autres.</p></li><li class="listitem"><p><code class="literal">lib32</code> - Bibliothèques de
	    compatibilité pour l'exécution d'applications 32bits sur
	    une version 64bits de FreeBSD.</p></li><li class="listitem"><p><code class="literal">ports</code> - Le catalogue des logiciels
	    portés pour FreeBSD.</p><p>Le catalogue des logiciels portés est une méthode
	    simple et commode pour installer des logiciels.  Le
	    catalogue des logiciels portés ne contient pas le code
	    source nécessaire pour compiler le logiciel.  A la place,
	    c'est un ensemble de fichiers qui automatise le
	    téléchargement, la compilation et l'installation de
	    logiciels tierce-partie.  Le <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>
	    discute de l'utilisation du catalogue des logiciels
	    portés.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le programme d'installation ne vérifie pas si vous
	      avez l'espace requis.  Sélectionnez cette option
	      uniquement si vous disposez de l'espace disque adéquat.
	      Sous FreeBSD 9.0, le catalogue des logiciels portés
	      occupe environ 440 Mo d'espace disque.  Vous
	      pouvez sans risque envisager une plus grande valeur pour
	      les versions de FreeBSD plus récentes.</p></div></li><li class="listitem"><p><code class="literal">src</code> - Code source du système.</p><p>FreeBSD est livré avec le code source complet du noyau et
	    du système de base.  Bien que n'étant pas requis pour la
	    majorité des applications, il peut être nécessaire pour
	    compiler certains logiciels (par exemple, les pilotes de
	    périphériques ou les modules du noyau), ou pour développer
	    FreeBSD.</p><p>L'arborescence complète des sources demande 1 Go
	    d'espace disque, et la recompilation du système FreeBSD
	    complet nécessite 5 Go d'espace
	    supplémentaire.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-netinstall"></a>3.6. Installation à partir du réseau</h2></div></div></div><p>Le support d'installation <span class="emphasis"><em>bootonly</em></span> ne
      contient pas de copie des fichiers d'installation.  Lorsqu'une
      méthode d'installation de type <span class="emphasis"><em>bootonly</em></span> est
      utilisée, les fichiers doivent être récupérés par
      l'intermédiaire d'une connexion réseau.</p><div class="figure"><a id="bsdinstall-netinstall-notify"></a><div class="figure-title">Figure 3.8. Installation à partir du réseau</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-netinstall-files.png" alt="Installation à partir du réseau" /></div></div></div><br class="figure-break" /><p>Après que la connexion réseau ait été configurée comme
      montré dans <a class="xref" href="#bsdinstall-config-network-dev" title="3.9.2. Configuration du réseau">Section 3.9.2, « Configuration du réseau »</a>, un
      site miroir est sélectionné.  Les sites miroirs maintiennent des
      copies des fichiers FreeBSD.  Choisissez un site miroir situé dans
      la même région du monde que l'ordinateur sur lequel FreeBSD doit
      être installé.  Les fichiers peuvent être récupérés plus
      rapidement quand le miroir est proche de l'ordinateur cible, et
      les temps d'installation réduits.</p><div class="figure"><a id="bsdinstall-netinstall-mirror"></a><div class="figure-title">Figure 3.9. Sélection d'un miroir</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-netinstall-mirrorselect.png" alt="Sélection d'un miroir" /></div></div></div><br class="figure-break" /><p>L'installation se poursuivra comme si les fichiers
      d'installation étaient présents en local.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-partitioning"></a>3.7. Allouer l'espace disque</h2></div></div></div><p>Il existe trois manières pour allouer l'espace disque pour
      FreeBSD.  Le partionnement guidé (<span class="emphasis"><em>Guided</em></span>) fixe
      automatiquement les partitions disque, alors que le
      partionnement manuel (<span class="emphasis"><em>Manual</em></span>) permet aux
      utilisateurs avancés de créer des partitions sur mesures.
      Enfin, il y a la possibilité de lancer un interpréteur de
      commandes dans lequel les programmes en ligne de commande comme
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>, et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> pourront être
      utilisés directement.</p><div class="figure"><a id="bsdinstall-part-guided-manual"></a><div class="figure-title">Figure 3.10. Sélection du partitionnement guidé ou manuel</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-manual.png" alt="Sélection du partitionnement guidé ou manuel" /></div></div></div><br class="figure-break" /><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-guided"></a>3.7.1. Partitionnement guidé</h3></div></div></div><p>Si plusieurs disques sont connectés, choisissez celui sur
	lequel FreeBSD doit être installé.</p><div class="figure"><a id="bsdinstall-part-guided-disk"></a><div class="figure-title">Figure 3.11. Sélection parmi plusieurs disques</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-guided-disk.png" alt="Sélection parmi plusieurs disques" /></div></div></div><br class="figure-break" /><p>L'intégralité ou juste une portion du disque peut être
	allouée pour FreeBSD.  Si
	<span class="guibutton">[ Entire Disk ]</span> est
	sélectionné, une partition recouvrant la totalité du disque
	est créée.  Sélectionner
	<span class="guibutton">[ Partition ]</span> créé une
	partition dans l'espace inutilisé du disque.</p><div class="figure"><a id="bsdinstall-part-entire-part"></a><div class="figure-title">Figure 3.12. Sélection de l'intégralité du disque ou d'une
	  partition</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-entire-part.png" alt="Sélection de l'intégralité du disque ou d'une partition" /></div></div></div><br class="figure-break" /><p>Une fois les partitions créés, vérifiez attentivement le
	résultat.  Si une erreur a été faite, sélectionner
	<span class="guibutton">[ Revert ]</span> permettra de
	revenir au partionnement de départ, ou
	<span class="guibutton">[ Auto ]</span> créera les
	partitions FreeBSD automatiquement.  Les partitions peuvent être
	créées, modifiées, ou supprimées manuellement.  Quand le
	partionnement est correct, sélectionner
	<span class="guibutton">[ Finish ]</span> pour poursuivre
	l'installation.</p><div class="figure"><a id="bsdinstall-part-review"></a><div class="figure-title">Figure 3.13. Vérification des partitions créés</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-review.png" alt="Vérification des partitions créés" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-part-manual"></a>3.7.2. Partitionnement manuel</h3></div></div></div><p>Le partionnement manuel envoie directement dans l'éditeur
	de partitions.</p><div class="figure"><a id="bsdinstall-part-manual-create"></a><div class="figure-title">Figure 3.14. Créer manuellement les partitions</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-create.png" alt="Créer manuellement les partitions" /></div></div></div><br class="figure-break" /><p>Sélectionner un disque (<code class="filename">ada0</code> dans
	cet exemple) et <span class="guibutton">[ Create ]</span>
	permet d'afficher un menu pour le choix du type de
	<span class="emphasis"><em>table de partitionnement</em></span>.</p><div class="figure"><a id="bsdinstall-part-manual-partscheme"></a><div class="figure-title">Figure 3.15. Créer manuellement les partitions</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-partscheme.png" alt="Créer manuellement les partitions" /></div></div></div><br class="figure-break" /><p>Le partionnement <acronym class="acronym">GPT</acronym> est généralement
	le choix le plus approprié pour les ordinateurs de type PC.
	Les systèmes d'exploitation anciens ne sont pas compatibles
	avec <acronym class="acronym">GPT</acronym> et peuvent nécessiter à la place
	un partitionnement de type <acronym class="acronym">MBR</acronym>.  Les autres
	systèmes de partitionnement sont en général utilisés pour les
	ordinateurs anciens ou particuliers.</p><div class="table"><a id="idp67576784"></a><div class="table-title">Tableau 3.1. Tables de partitionnement</div><div class="table-contents"><table summary="Tables de partitionnement" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Abbréviation</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">APM</td><td align="left"><a class="link" href="http://support.apple.com/kb/TA21692" target="_top">Table
		de partion Apple, utilisée par le <span class="trademark">PowerPC</span>®
		<span class="trademark">Macintosh</span>®.</a></td></tr><tr><td align="left">BSD</td><td align="left">Partitions BSD (<span class="emphasis"><em>BSD Labels</em></span>)
		sans MBR, parfois appelé <span class="emphasis"><em>dangerously
		dedicated mode</em></span> ou <span class="quote">« <span class="quote">mode
		dédié</span> »</span>.  Consulter la page de manuel
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>.</td></tr><tr><td align="left">GPT</td><td align="left"><a class="link" href="http://en.wikipedia.org/wiki/GUID_Partition_Table" target="_top">Table
		de partition GUID.</a></td></tr><tr><td align="left">MBR</td><td align="left"><a class="link" href="http://en.wikipedia.org/wiki/Master_boot_record" target="_top">Master
		Boot Record.</a></td></tr><tr><td align="left">PC98</td><td align="left"><a class="link" href="http://en.wikipedia.org/wiki/Pc9801" target="_top">Variante
		du MBR, utilisée par les ordinateurs de type NEC
		PC-98.</a></td></tr><tr><td align="left">VTOC8</td><td align="left"><span class="emphasis"><em>Volume Table Of Contents</em></span>,
		utilisé par les ordinateurs Sun SPARC64 et
		UltraSPARC.</td></tr></tbody></table></div></div><br class="table-break" /><p>Après avoir choisi et créé le partitionnement,
	sélectionner à nouveau
	<span class="guibutton">[ Create ]</span> créera les
	nouvelles partitions.</p><div class="figure"><a id="bsdinstall-part-manual-addpart"></a><div class="figure-title">Figure 3.16. Créer manuellement les partitions</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-part-manual-addpart.png" alt="Créer manuellement les partitions" /></div></div></div><br class="figure-break" /><p>Une installation standard de FreeBSD avec
	<acronym class="acronym">GPT</acronym> utilise au moins trois
	partitions:</p><div class="itemizedlist"><div class="itemizedlist-title">Partitionnement <acronym class="acronym">GPT</acronym> standard sous
	  FreeBSD</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">freebsd-boot</code> - Code de démarrage
	    FreeBSD.</p></li><li class="listitem"><p><code class="literal">freebsd-ufs</code> - Une système de
	    fichiers UFS FreeBSD.</p></li><li class="listitem"><p><code class="literal">freebsd-swap</code> - Espace de pagination
	    pour FreeBSD.</p></li></ul></div><p>Un autre type de partition qui vaut la peine d'être
	mentionné <code class="literal">freebsd-zfs</code>, employé pour des
	partitions qui contiendront un système de fichiers FreeBSD ZFS.
	Voir linkend="filesystems-zfs" .  La page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpart&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpart</span>(8)</span></a> liste d'autres types de partitions disponibles
	pour <acronym class="acronym">GPT</acronym>.</p><p>Des partitions avec plusieurs systèmes de fichiers peuvent
	être utilisées, certaines personnes peuvent préférer une
	organisation plus traditionnelle avec des partitions séparées
	pour les systèmes de fichiers <code class="filename">/</code>,
	<code class="filename">/var</code>, <code class="filename">/tmp</code>, et
	<code class="filename">/usr</code>.  Consulter <a class="xref" href="#bsdinstall-part-manual-splitfs" title="Exemple 3.3. Création d'un système traditionnel de partitions pour systèmes de fichiers séparés">Exemple 3.3, « Création d'un système traditionnel de partitions pour
	  systèmes de fichiers séparés »</a>, pour un
	exemple.</p><p>Les tailles peuvent être entrées avec les abréviations
	courantes: <span class="emphasis"><em>K</em></span> for kilooctet,
	<span class="emphasis"><em>M</em></span> pour mégaoctets, ou
	<span class="emphasis"><em>G</em></span> pour gigaoctets.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un alignement correct des secteurs sur le disque permet
	  de meilleures performances, et créer des partitions de
	  tailles multiples de 4K permet de s'assurer de l'alignement
	  sur les disques à secteur de 512 octets ou 4 Koctets.
	  Généralement, employer des tailles de partition qui sont des
	  multiples d'1M ou 1G est le moyen le plus simple de garantir
	  que chaque partition débute sur un multiple de 4K.  Une
	  exception: à présent, la partition
	  <span class="emphasis"><em>freebsd-boot</em></span> ne devrait pas dépasser
	  512K en raison de limitations du code de démarrage.</p></div><p>Un point de montage est nécessaire si cette partition
	contiendra un système de fichiers.  Si une seule partition UFS
	unique sera créée, le point de montage devra être
	<code class="filename">/</code>.</p><p>Un <span class="emphasis"><em>label</em></span> est également demandé.  Un
	label (ou étiquette) est le nom par lequel la partition sera
	connue.  Les noms ou numéros de disques peuvent varier si le
	disque est connecté à un contrôleur ou port différent, mais le
	label de partition ne changera pas.  Se référer aux labels
	plutôt qu'aux noms de disques et numéros de partitions dans
	les fichiers comme <code class="filename">/etc/fstab</code> rend le
	système plus tolérant aux changements de matériel.  Les labels
	GPT apparaissent dans le répertoire
	<code class="filename">/dev/gpt/</code> lorsqu'un disque est attaché au
	système.  Les autres systèmes de partitionnement présentent
	d'autres possibilités au niveau des labels, et leur labels
	apparaissent sous différentes répertoires dans
	<code class="filename">/dev/</code>.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Employez un label unique pour chaque système de fichiers
	  pour éviter les conflits avec les labels identiques.
	  Quelques lettres du nom du l'ordinateur, de son rôle, ou de
	  son emplacement peuvent être ajoutées au label.  Par
	  exemple, <code class="literal">labroot</code> ou
	  <code class="literal">rootfs-lab</code> pour la partition UFS racine
	  de l'ordinateur du laboratoire.</p></div><div class="example"><a id="bsdinstall-part-manual-splitfs"></a><div class="example-title">Exemple 3.3. Création d'un système traditionnel de partitions pour
	  systèmes de fichiers séparés</div><div class="example-contents"><p>Pour une organisation traditionnelle de partitions dans
	  laquelle les répertoires <code class="filename">/</code>,
	  <code class="filename">/var</code>, <code class="filename">/tmp</code>, et
	  <code class="filename">/usr</code> sont des systèmes de fichiers
	  séparés ayant chacun leur propre partition, créer une table
	  de partition GPT, puis créer les partitions comme montré
	  ci-après.  Les tailles de partitions indiquées sont celles
	  typiques pour un disque de 20G.  Si plus d'espace est
	  disponible sur le disque cible, une partition de pagination
	  ou une partition <code class="filename">/var</code> plus importantes
	  peuvent être utiles.  Les labels utilisés ici sont préfixés
	  par <code class="literal">ex</code> pour <span class="quote">« <span class="quote">exemple</span> »</span>, mais
	  le lecteur peut utiliser un autre label unique comme décrit
	  plus haut.</p><p>Par défaut, le programme <code class="filename">gptboot</code> de
	  FreeBSD s'attend à ce que la première partition UFS trouvée soit la
	  partition <code class="filename">/</code>.</p><div class="informaltable"><table border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Type de partition</th><th>Taille</th><th>Point de montage</th><th>Label</th></tr></thead><tbody><tr><td><code class="literal">freebsd-boot</code></td><td><code class="literal">512K</code></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/</code></td><td><code class="literal">exrootfs</code></td></tr><tr><td><code class="literal">freebsd-swap</code></td><td><code class="literal">4G</code></td><td> </td><td><code class="literal">exswap</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">2G</code></td><td><code class="filename">/var</code></td><td><code class="literal">exvarfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td><code class="literal">1G</code></td><td><code class="filename">/tmp</code></td><td><code class="literal">extmpfs</code></td></tr><tr><td><code class="literal">freebsd-ufs</code></td><td>valeur proposée par défaut (le reste du
		disque)</td><td><code class="filename">/usr</code></td><td><code class="literal">exusrfs</code></td></tr></tbody></table></div></div></div><br class="example-break" /><p>Après la création des partitions, sélectionnez
	<span class="guibutton">[ Finish ]</span> pour poursuivre
	l'installation.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-final-warning"></a>3.8. Procéder à l'installation</h2></div></div></div><p>C'est la dernière chance pour annuler l'installation et
      empêcher l'écriture sur le disque dur.</p><div class="figure"><a id="bsdinstall-final-confirmation"></a><div class="figure-title">Figure 3.17. Confirmation finale</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-final-confirmation.png" alt="Confirmation finale" /></div></div></div><br class="figure-break" /><p>Sélectionner <span class="guibutton">[ Commit ]</span> et
      appuyer sur <span class="keycap"><strong>Enter</strong></span> pour poursuivre.  Si des
      modifications doivent être effectuées, choisir
      <span class="guibutton">[ Back ]</span> pour retourner dans
      l'éditeur de partitions.
      <span class="guibutton">[ Revert &amp; Exit ]</span>
      fera quitter le programme d'installation sans qu'aucun
      changement n'ait été appliqué au disque dur.</p><p>La durée de l'installation variera en fonction de la
      distribution choisie, du support d'installation, et de la
      vitesse de l'ordinateur.  Une série de messages sera affichée
      pour indiquer la progression de l'installation.</p><p>En premier lieu, le programme d'installation écrira la table
      de partitions sur le disque, et effectuera un
      <code class="command">newfs</code> pour initialiser les partitions.</p><p>Si l'installation se fait par le réseau,
      <span class="application">bsdinstall</span> téléchargera alors les
      fichiers de distribution requis.</p><div class="figure"><a id="bsdinstall-distfile-fetching"></a><div class="figure-title">Figure 3.18. Récupération des fichiers de distribution</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-distfile-fetching.png" alt="Récupération des fichiers de distribution" /></div></div></div><br class="figure-break" /><p>Ensuite, l'intégrité des fichiers de distribution est
      vérifiée, pour s'assurer qu'ils n'ont pas été corrompus durant
      le téléchargement ou leur lecture à partir du support
      d'installation.</p><div class="figure"><a id="bsdinstall-distfile-verify"></a><div class="figure-title">Figure 3.19. Vérification des fichiers de distribution</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-distfile-verifying.png" alt="Vérification des fichiers de distribution" /></div></div></div><br class="figure-break" /><p>Enfin, les fichiers contrôlés sont décompressés sur le
      disque.</p><div class="figure"><a id="bsdinstall-distfile-extract"></a><div class="figure-title">Figure 3.20. Décompression des fichiers de distribution</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-distfile-extracting.png" alt="Décompression des fichiers de distribution" /></div></div></div><br class="figure-break" /><p>Une fois que tous les fichiers de distribution sélectionnés
      ont été décompressés, <span class="application">bsdinstall</span>
      passera directement aux étapes de post-installation (Voir <a class="xref" href="#bsdinstall-post" title="3.9. Post-Installation">Section 3.9, « Post-Installation »</a>).</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-post"></a>3.9. Post-Installation</h2></div></div></div><p>La configuration de diverses options suit une installation
      réussie de FreeBSD.  Une option peut être configurée en retournant
      dans les options de configuration à partir du menu final avant
      de démarrer sur le système FreeBSD tout nouvellement
      installé.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-post-root"></a>3.9.1. Définir le mot de passe de <code class="systemitem">root</code></h3></div></div></div><p>Le mot de passe de l'utilisateur <code class="systemitem">root</code> doit être défini.  Notez
	que lors de la saisie du mot de passe, les caractères tapés ne
	sont pas affichés sur l'écran.  Après sa saisie, le mot de
	passe devra être entré une deuxième fois.  Cela permet
	d'éviter les erreurs de frappe.</p><div class="figure"><a id="bsdinstall-post-set-root-passwd"></a><div class="figure-title">Figure 3.21. Saisie du mot de passe <code class="systemitem">root</code></div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-post-root-passwd.png" alt="Saisie du mot de passe root" /></div></div></div><br class="figure-break" /><p>L'installation se poursuivra après que le mot de passe ait
	été entré avec succès.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-config-network-dev"></a>3.9.2. Configuration du réseau</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans le cas d'une installation de type
	  <span class="emphasis"><em>bootonly</em></span> si la configuration réseau a
	  déjà été effectuée cette partie sera alors passée.</p></div><p>Une liste de l'ensemble des interfaces réseaux trouvées
	sur l'ordinateur sera affichée.  Sélectionner celle à
	configurer.</p><div class="figure"><a id="bsdinstall-configure-net-interface"></a><div class="figure-title">Figure 3.22. Choix d'une interface réseau</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface.png" alt="Choix d'une interface réseau" /></div></div></div><br class="figure-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-configure-net-wireless"></a>3.9.2.1. Configuration d'une interface réseau sans-fil</h4></div></div></div><p>Si une interface réseau sans-fil est choisie, les
	  paramètres d'identification et de sécurité sans-fil doivent
	  être entrés pour permettre la connexion au réseau.</p><p>Les réseaux sans-fil sont identifiés par un
	  <span class="emphasis"><em>Service Set Identifier</em></span>, ou
	  <acronym class="acronym">SSID</acronym>.  Le <acronym class="acronym">SSID</acronym> est un
	  nom court et unique donné à chaque réseau.</p><p>La plupart des réseaux sans-fil chiffrent les données
	  transmises afin de les protéger d'une écoute non-autorisée.
	  Le chiffrement <acronym class="acronym">WPA2</acronym> est fortement
	  recommandé.  Les chiffrements de types plus anciens, comme
	  le <acronym class="acronym">WEP</acronym>, n'offrent que peu de
	  sécurité.</p><p>La première étape pour se connecter à un réseau sans-fil
	  est de rechercher les points d'accès sans-fil.</p><div class="figure"><a id="bsdinstall-wireless-scan"></a><div class="figure-title">Figure 3.23. Recherche des points d'accès sans-fil</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-wireless-scan.png" alt="Recherche des points d'accès sans-fil" /></div></div></div><br class="figure-break" /><p>Les <acronym class="acronym">SSIDs</acronym> trouvés durant la recherche
	  sont affichés, suivis par une description des types de
	  chiffrement disponibles pour chaque réseau.  Si le
	  <acronym class="acronym">SSID</acronym> désiré n'apparaît pas dans la liste,
	  sélectionner <span class="guibutton">[ Rescan ]</span>
	  pour rechercher à nouveau.  Si le réseau désiré n'apparaît
	  toujours pas, vérifiez qu'il n'y a pas de problèmes
	  d'antenne ou essayez de rapprocher l'ordinateur du point
	  d'accès.  Rescannez après chaque modification.</p><div class="figure"><a id="bsdinstall-wireless-accesspoints"></a><div class="figure-title">Figure 3.24. Sélection d'un réseau sans-fil</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-wireless-accesspoints.png" alt="Sélection d'un réseau sans-fil" /></div></div></div><br class="figure-break" /><p>Les informations de chiffrement pour se connecter au
	  réseau choisi sont saisies après la sélection du réseau.
	  Avec <acronym class="acronym">WPA2</acronym>, seul un mot de passe
	  (également connu sous le nom de <span class="emphasis"><em>Pre-Shared
	  Key</em></span>, ou <acronym class="acronym">PSK</acronym>) est nécessaire.
	  Les caractères tapés dans la boîte de saisie apparaissent
	  sous la forme d'astérisques pour plus de sécurité.</p><div class="figure"><a id="bsdinstall-wireless-wpa2"></a><div class="figure-title">Figure 3.25. Configuration WPA2</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-wireless-wpa2setup.png" alt="Configuration WPA2" /></div></div></div><br class="figure-break" /><p>La configuration du réseau se poursuit après la
	  sélection du réseau sans-fil et l'entrée des informations de
	  connexion.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-ipv4"></a>3.9.2.2. Configuration du réseau en IPv4</h4></div></div></div><p>Indiquez si un réseau en IPv4 sera utilisé.  C'est le
	  type de réseau le plus courant.</p><div class="figure"><a id="bsdinstall-configure-net-ipv4"></a><div class="figure-title">Figure 3.26. Sélection d'un fonctionnement réseau en IPv4</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv4.png" alt="Sélection d'un fonctionnement réseau en IPv4" /></div></div></div><br class="figure-break" /><p>Il existe deux méthodes de configuration IPv4.
	  En <span class="emphasis"><em><acronym class="acronym">DHCP</acronym></em></span> l'interface réseau sera
	  configurée automatiquement, c'est la méthode préférée.  Une
	  configuration <span class="emphasis"><em>statique</em></span> requiert la
	  saisie manuelle des informations de configuration du
	  réseau.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">N'entrez pas de paramètres réseau au hasard, cela ne
	    fonctionnera pas.  Récupérez les paramètres affichés dans
	    <a class="xref" href="#bsdinstall-collect-network-information" title="3.3.3. Récupérer les informations relatives au réseau">Section 3.3.3, « Récupérer les informations relatives au réseau »</a>
	    auprès de l'administrateur réseau ou du fournisseur
	    d'accès.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-net-ipv4-dhcp-config"></a>3.9.2.2.1. Configuration réseau IPv4 avec DHCP</h5></div></div></div><p>Si un serveur DHCP est disponible, sélectionner
	    <span class="guibutton">[ Yes ]</span> pour configurer
	    automatiquement l'interface réseau.</p><div class="figure"><a id="bsdinstall-net-ipv4-dhcp"></a><div class="figure-title">Figure 3.27. Sélection de la configuration IPv4 avec DHCP</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv4-dhcp.png" alt="Sélection de la configuration IPv4 avec DHCP" /></div></div></div><br class="figure-break" /></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-net-ipv4-static-config"></a>3.9.2.2.2. Configuration réseau IPv4 en statique</h5></div></div></div><p>La configuration en statique de l'interface réseau
	    demande la saisie d'informations relative à la
	    configuration IPv4.</p><div class="figure"><a id="bsdinstall-net-ipv4-static"></a><div class="figure-title">Figure 3.28. Configuration IPv4 en statique</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv4-static.png" alt="Configuration IPv4 en statique" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">IP Address</code> - L'adresse IPv4
		entrée à la main devant être assignée à cette
		ordinateur.  Cette adresse doit être unique et ne
		pas être déjà utilisée par un autre équipement sur le
		réseau local.</p></li><li class="listitem"><p><code class="literal">Subnet Mask</code> - Le masque de
		sous-réseau utilisé par le réseau local.  En général,
		c'est <code class="literal">255.255.255.0</code>.</p></li><li class="listitem"><p><code class="literal">Default Router</code> - L'adresse IP
		du routeur par défaut pour ce réseau.  En général
		c'est l'adresse du routeur ou tout autre équipement
		réseau qui connecte le réseau local à l'Internet.
		Egalement désigné sous le terme de <span class="emphasis"><em>passerelle
		par défaut</em></span>.</p></li></ul></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-ipv6"></a>3.9.2.3. Configuration du réseau en IPv6</h4></div></div></div><p>L'IPv6 est une nouvelle méthode de configuration réseau.
	  Si l'IPv6 est disponible et désiré, choisir
	  <span class="guibutton">[ Yes ]</span> pour le
	  sélectionner.</p><div class="figure"><a id="bsdinstall-net-ipv6"></a><div class="figure-title">Figure 3.29. Sélection d'un réseau IPv6</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv6.png" alt="Sélection d'un réseau IPv6" /></div></div></div><br class="figure-break" /><p>Un réseau IPv6 peut également être configuré suivant
	  deux méthodes. <span class="emphasis"><em><acronym class="acronym">SLAAC</acronym>
	  </em></span>, ou <span class="emphasis"><em>autoconfiguration sans
	  état</em></span> (<span class="emphasis"><em>StateLess Address
	  AutoConfiguration</em></span>), configurera automatiquement
	  et correctement l'interface réseau.  La configuration
	  <span class="emphasis"><em>statique</em></span>, quant à elle, demande la
	  saisie manuelle des informations réseau.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-net-ipv6-slaac-config"></a>3.9.2.3.1. Autoconfiguration sans état IPv6</h5></div></div></div><p>La méthode <acronym class="acronym">SLAAC</acronym> permet à un
	    composant réseau IPv6 de demander les informations de
	    configuration automatique à un routeur local.  Consulter
	    <a class="link" href="http://tools.ietf.org/html/rfc4862" target="_top">RFC4862</a>
	    pour plus d'information.</p><div class="figure"><a id="bsdinstall-net-ipv6-slaac"></a><div class="figure-title">Figure 3.30. Sélection de la configuration IPv6 SLAAC</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-slaac.png" alt="Sélection de la configuration IPv6 SLAAC" /></div></div></div><br class="figure-break" /></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-net-ipv6-static-config"></a>3.9.2.3.2. Configuration réseau IPv6 en statique</h5></div></div></div><p>La configuration en statique de l'interface réseau
	    demande la saisie des information de configuration du
	    réseau IPv6.</p><div class="figure"><a id="bsdinstall-net-ipv6-static"></a><div class="figure-title">Figure 3.31. Configuration IPv6 en statique</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-interface-ipv6-static.png" alt="Configuration IPv6 en statique" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">IPv6 Address</code> - L'adresse
		<acronym class="acronym">IP</acronym> entrée à la main devant être
		assignée à cette ordinateur.  Cette adresse doit être
		unique et ne pas être déjà utilisée par un autre
		équipement sur le réseau local.</p></li><li class="listitem"><p><code class="literal">Default Router</code> - L'adresse IPv6
		du routeur par défaut pour ce réseau.  En général
		c'est l'adresse du routeur ou tout autre équipement
		réseau qui connecte le réseau local à l'Internet.
		Egalement désigné sous le terme de <span class="emphasis"><em>passerelle
		par défaut</em></span>.</p></li></ul></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-net-dns"></a>3.9.2.4. Configuration du <acronym class="acronym">DNS</acronym></h4></div></div></div><p>Le système de résolution <span class="emphasis"><em>Domain Name
	  System</em></span> (or
	  <span class="emphasis"><em><acronym class="acronym">DNS</acronym></em></span>) convertit les
	  noms de machine en adresses réseau et inversement.  Si la
	  méthode du <acronym class="acronym">DHCP</acronym> ou du
	  <acronym class="acronym">SLAAC</acronym> a été utilisée pour configurer
	  automatiquement la carte réseau, les valeurs de
	  configuration du système de résolution de noms
	  (<code class="literal">Resolver Configuration</code>) pourront déjà
	  être présentes.  Dans le cas contraire, entrer le nom de
	  domaine du réseau local dans le champ
	  <code class="literal">Search</code>.  <code class="literal">DNS #1</code> et
	  <code class="literal">DNS #2</code> sont les adresses
	  <acronym class="acronym">IP</acronym> des serveurs <acronym class="acronym">DNS</acronym>
	  locaux.  Au moins un serveur <acronym class="acronym">DNS</acronym> est
	  nécessaire.</p><div class="figure"><a id="bsdinstall-net-dns-config"></a><div class="figure-title">Figure 3.32. Configuration du DNS</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-configure-network-ipv4-dns.png" alt="Configuration du DNS" /></div></div></div><br class="figure-break" /></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-timezone"></a>3.9.3. Réglage du fuseau horaire</h3></div></div></div><p>Régler le fuseau horaire sur votre machine lui permettra de
	corriger automatiquement tout changement horaire régional et
	d'exécuter d'autres fonctions liées au fuseau horaire
	correctement.</p><p>L'exemple présenté est pour une machine
	située dans le fuseau horaire oriental des Etats-Unis.  Vos
	choix changeront en fonction de votre position
	géographique.</p><div class="figure"><a id="bsdinstall-local-utc"></a><div class="figure-title">Figure 3.33. Sélection d'une horloge locale ou UTC</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-set-clock-local-utc.png" alt="Sélection d'une horloge locale ou UTC" /></div></div></div><br class="figure-break" /><p>Selectionner <span class="guibutton">[ Yes ]</span>
	ou <span class="guibutton">[ No ]</span> en fonction de la
	configuration de l'horloge de la machine et appuyer sur
	<span class="keycap"><strong>Entrée</strong></span>.  Si vous ne savez pas si le système
	est réglé sur l'horaire UTC ou local, sélectionnez
	<span class="guibutton">[ No ]</span> pour choisir le fuseau
	local utilisé généralement.</p><div class="figure"><a id="bsdinstall-timezone-region"></a><div class="figure-title">Figure 3.34. Sélectionner une région</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-region.png" alt="Sélectionner une région" /></div></div></div><br class="figure-break" /><p>La région appropriée est choisie en utilisant les touches
	fléchées puis en appuyant sur <span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="bsdinstall-timezone-country"></a><div class="figure-title">Figure 3.35. Sélection d'un pays</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-country.png" alt="Sélection d'un pays" /></div></div></div><br class="figure-break" /><p>Sélectionner le pays approprié en utilisant les touches
	fléchées et appuyer sur <span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="bsdinstall-timezone-zone"></a><div class="figure-title">Figure 3.36. Sélection d'un fuseau horaire</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-zone.png" alt="Sélection d'un fuseau horaire" /></div></div></div><br class="figure-break" /><p>Le fuseau horaire approprié est choisie en utilisant les
	touches fléchées, puis en appuyant sur
	<span class="keycap"><strong>Entrée</strong></span>.</p><div class="figure"><a id="bsdinstall-timezone-confirmation"></a><div class="figure-title">Figure 3.37. Confirmation du fuseau horaire</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-timezone-confirm.png" alt="Confirmation du fuseau horaire" /></div></div></div><br class="figure-break" /><p>Confirmez que l'abréviation pour le fuseau horaire est
	correcte.  Si cela semble bon, appuyez sur
	<span class="keycap"><strong>Entrée</strong></span> pour continuer avec la configuration
	de post-installation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-sysconf"></a>3.9.4. Sélection des services à activer</h3></div></div></div><p>Des services système supplémentaires qui seront lancés au
	démarrage peuvent être activés.  Tous ces services sont
	optionnels.</p><div class="figure"><a id="bsdinstall-config-serv"></a><div class="figure-title">Figure 3.38. Sélection de services supplémentaires à activer</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-services.png" alt="Sélection de services supplémentaires à activer" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><div class="itemizedlist-title">Services supplémentaires</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">sshd</code> - démon <span class="emphasis"><em>Secure
	    Shell</em></span> (<acronym class="acronym">SSH</acronym>) pour l'accès à
	    distance sécurisé.</p></li><li class="listitem"><p><code class="literal">moused</code> - permet l'utilisation de
	    la souris en console.</p></li><li class="listitem"><p><code class="literal">ntpd</code> - démon du protocole d'heure
	    réseau (<span class="emphasis"><em>Network Time Protocol</em></span>)
	    (<acronym class="acronym">NTP</acronym>) pour la synchronisation
	    automatique de l'horloge.</p></li><li class="listitem"><p><code class="literal">powerd</code> - utilitaire de contrôle de
	    la gestion de l'énergie du système pour le contrôle de la
	    consommation en énergie.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-crashdump"></a>3.9.5. Activation des crash dumps</h3></div></div></div><p><span class="application">bsdinstall</span> vous demandera si
	la sauvegarde de l'état de la mémoire lors d'un plantage
	(<span class="emphasis"><em>crash dump</em></span>) doit être activée sur le
	système.  Activer les crash dumps peut s'avérer très utile
	pour déboguer les problèmes, aussi les utilisateurs sont
	encouragés à activer les crash dumps dès que c'est possible.
	Sélectionner <span class="guibutton">[ Yes ]</span> pour les
	activer, ou <span class="guibutton">[ No ]</span> pour
	poursuivre sans l'activation des crash dumps.</p><div class="figure"><a id="bsdinstall-config-crashdump"></a><div class="figure-title">Figure 3.39. Activer les crash dumps</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-config-crashdump.png" alt="Activer les crash dumps" /></div></div></div><br class="figure-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-addusers"></a>3.9.6. Ajouter des utilisateurs</h3></div></div></div><p>Ajouter au moins un utilisateur lors de l'installation
	permet l'utilisation du système sans être attaché en tant que
	<code class="systemitem">root</code>.  Quand on
	utilise une session <code class="systemitem">root</code>, il n'existe aucune limite
	ou protection quant à ce qui peut être fait.  Ouvrir une
	session en tant qu'utilisateur normal est plus sûr et plus
	sécurisé.</p><p>Sélectionner <span class="guibutton">[ Yes ]</span> pour
	ajouter de nouveaux utilisateurs.</p><div class="figure"><a id="bsdinstall-add-user1"></a><div class="figure-title">Figure 3.40. Ajout de comptes utilisateur</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-adduser1.png" alt="Ajout de comptes utilisateur" /></div></div></div><br class="figure-break" /><p>Saisissez les informations pour l'utilisateur à
	ajouter.</p><div class="figure"><a id="bsdinstall-add-user2"></a><div class="figure-title">Figure 3.41. Entrée des informations utilisateur</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-adduser2.png" alt="Entrée des informations utilisateur" /></div></div></div><br class="figure-break" /><div class="itemizedlist"><div class="itemizedlist-title">Informations utilisateur</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Username</code> - Le nom d'utilisateur ou
	    identifiant que l'utilisateur entrera pour ouvrir une
	    session.  Souvent la première lettre de leur prénom
	    associé à leur nom.</p></li><li class="listitem"><p><code class="literal">Full name</code> - Le nom complet de
	    l'utilisateur.</p></li><li class="listitem"><p><code class="literal">Uid</code> - L'identifiant numérique pour
	    cet utilisateur.  En général, ce champ est laissé vide de
	    façon à ce que le système assigne par lui-même une
	    valeur.</p></li><li class="listitem"><p><code class="literal">Login group</code> - Le groupe de
	    l'utilisateur.  Généralement laissé vide pour accepter le
	    choix par défaut.</p></li><li class="listitem"><p><code class="literal">Invite <em class="replaceable"><code>user</code></em> into
	    other groups?</code> - Groupes supplémentaires pour
	    lesquels l'utilisateur sera également ajouté comme
	    membre.</p></li><li class="listitem"><p><code class="literal">Login class</code> - Généralement laissé
	    vide pour accepter la valeur par défaut.</p></li><li class="listitem"><p><code class="literal">Shell</code> - L'interpréteur de commande
	    de l'utilisateur.  Dans l'exemple, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span></a> a été
	    choisi.</p></li><li class="listitem"><p><code class="literal">Home directory</code> - Le répertoire de
	    l'utilisateur.  La valeur par défaut est, en général,
	    correcte.</p></li><li class="listitem"><p><code class="literal">Home directory permissions</code> - Les
	    permissions sur le répertoire utilisateur.  La valeur par
	    défaut est, en général, correcte.</p></li><li class="listitem"><p><code class="literal">Use password-based authentication?</code>
	    - En général <code class="literal">yes</code>.</p></li><li class="listitem"><p><code class="literal">Use an empty password?</code> -
	    En général <code class="literal">no</code>.</p></li><li class="listitem"><p><code class="literal">Use a random password?</code> - En général
	    <code class="literal">no</code>.</p></li><li class="listitem"><p><code class="literal">Enter password</code> - Le mot de passe
	    pour cet utilisateur.  Les caractères tapés n'apparaîtront
	    pas sur l'écran.</p></li><li class="listitem"><p><code class="literal">Enter password again</code> - Le mot de
	    passe doit à nouveau être saisi pour vérification.</p></li><li class="listitem"><p><code class="literal">Lock out the account after
	    creation?</code> - En général
	    <code class="literal">no</code>.</p></li></ul></div><p>Après avoir tout saisi, un résumé est affiché, et le
	système demande si c'est correct.  Si une erreur a été faite
	durant la saisie, entrez <code class="literal">no</code> et recommencez.
	Si tout est correct, entrez <code class="literal">yes</code> pour créer
	ce nouvel utilisateur.</p><div class="figure"><a id="bsdinstall-add-user3"></a><div class="figure-title">Figure 3.42. Quitter la gestion des utilisateurs et des
	  groupes</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-adduser3.png" alt="Quitter la gestion des utilisateurs et des groupes" /></div></div></div><br class="figure-break" /><p>S'il y a d'autres utilisateurs à ajouter, répondez
	<code class="literal">yes</code> à la question <code class="literal">Add another
	user?</code>.  Entrez <code class="literal">no</code> pour terminer
	l'ajout d'utilisateurs et continuer l'installation.</p><p>Pour plus d'information sur l'ajout d'utilisateurs et leur
	gestion, consultez <a class="xref" href="#users-synopsis" title="14.1. Synopsis">Section 14.1, « Synopsis »</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-final-conf"></a>3.9.7. Configuration finale</h3></div></div></div><p>Après avoir tout installé et configuré, une dernière
	chance de modifier les réglages est proposée.</p><div class="figure"><a id="bsdinstall-final-config"></a><div class="figure-title">Figure 3.43. Configuration finale</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-finalconfiguration.png" alt="Configuration finale" /></div></div></div><br class="figure-break" /><p>Utilisez ce menu pour effectuer des changements ou toute
	configuration supplémentaire avant de terminer
	l'installation.</p><div class="itemizedlist"><div class="itemizedlist-title">Options de configuration finale</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Add User</code> - Décrit dans la
	    <a class="xref" href="#bsdinstall-addusers" title="3.9.6. Ajouter des utilisateurs">Section 3.9.6, « Ajouter des utilisateurs »</a>.</p></li><li class="listitem"><p><code class="literal">Root Password</code> - Décrit dans la
	    <a class="xref" href="#bsdinstall-post-root" title="3.9.1. Définir le mot de passe de root">Section 3.9.1, « Définir le mot de passe de <code class="systemitem">root</code> »</a>.</p></li><li class="listitem"><p><code class="literal">Hostname</code> - Décrit dans la
	    <a class="xref" href="#bsdinstall-hostname" title="3.5.2. Configurer le nom de la machine">Section 3.5.2, « Configurer le nom de la machine »</a>.</p></li><li class="listitem"><p><code class="literal">Network</code> - Décrit dans la
	    <a class="xref" href="#bsdinstall-config-network-dev" title="3.9.2. Configuration du réseau">Section 3.9.2, « Configuration du réseau »</a>.</p></li><li class="listitem"><p><code class="literal">Services</code> - Décrit dans la
	    <a class="xref" href="#bsdinstall-sysconf" title="3.9.4. Sélection des services à activer">Section 3.9.4, « Sélection des services à activer »</a>.</p></li><li class="listitem"><p><code class="literal">Time Zone</code> - Décrit dans la
	    <a class="xref" href="#bsdinstall-timezone" title="3.9.3. Réglage du fuseau horaire">Section 3.9.3, « Réglage du fuseau horaire »</a>.</p></li><li class="listitem"><p><code class="literal">Handbook</code> - Télécharge et installe
	    le Manuel FreeBSD (celui que vous êtes actuellement en train
	    de lire).</p></li></ul></div><p>Une fois la configuration finale achevée, sélectionnez
	<span class="guibutton">Exit</span> pour quitter
	l'installation.</p><div class="figure"><a id="bsdinstall-final-modification-shell"></a><div class="figure-title">Figure 3.44. Configuration manuelle</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-final-modification-shell.png" alt="Configuration manuelle" /></div></div></div><br class="figure-break" /><p><span class="application">bsdinstall</span> demandera s'il y a
	des éléments supplémentaires à configurer avant le redémarrage
	sur le nouveau système.  Sélectionner
	<span class="guibutton">[ Yes ]</span> pour quitter vers un
	interpréteur de commande, ou
	<span class="guibutton">[ No ]</span> pour passer à la
	dernière étape d'installation.</p><div class="figure"><a id="bsdinstall-final-main"></a><div class="figure-title">Figure 3.45. Achever l'installation</div><div class="figure-contents"><div class="mediaobject"><img src="bsdinstall/bsdinstall-mainexit.png" alt="Achever l'installation" /></div></div></div><br class="figure-break" /><p>Si d'autre configuration ou une configuration
	spécifique est nécessaire, choisir
	<span class="guibutton">[ Live CD ]</span> permettra
	de démarrer dans le mode du CD Live.</p><p>Lorsque l'installation est achevée, sélectionnez
	<span class="guibutton">[ Reboot ]</span> pour redémarrer
	l'ordinateur et démarrer le nouveau système FreeBSD.  N'oubliez
	pas de retire le CD, DVD ou la clé USB d'installation de FreeBSD
	ou l'ordinateur risque de redémarrer dessus à nouveau.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-freebsdboot"></a>3.9.8. Démarrage et arrêt de FreeBSD</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-freebsdboot-i386"></a>3.9.8.1. Démarrage de FreeBSD/i386</h4></div></div></div><p>Lors du démarrage de FreeBSD, de nombreux messages
	  d'information sont affichés.  La plupart défileront et
	  disparaîtront de l'écran, c'est normal.  Une fois que le
	  système a achevé son démarrage, une invite de session est
	  affichée.  Les messages qui ont défilé hors de l'écran
	  peuvent être à nouveau visualisés en appuyant sur
	  <span class="keycap"><strong>Scroll-Lock</strong></span> (ou <span class="keycap"><strong>Arrêt
	  défil</strong></span>) pour activer le <span class="emphasis"><em>défilement arrière
	  du tampon des messages</em></span>.  Les touches
	  <span class="keycap"><strong>PgUp</strong></span>, <span class="keycap"><strong>PgDn</strong></span>, et les touches
	  fléchées pourront être utilisées pour remonter dans les
	  messages.  L'appui à nouveau sur
	  <span class="keycap"><strong>Scroll-Lock</strong></span> déverrouillera l'écran et fera
	  revenir à l'affichage normal.</p><p>A l'invite <code class="prompt">login:</code>, saisissez le nom
	  d'utilisateur ajouté lors de l'installation, <code class="systemitem">asample</code> dans l'exemple.
	  Evitez d'ouvrir des sessions en tant que <code class="systemitem">root</code> excepté quand cela est
	  nécessaire.</p><p>Le tampon des messages examiné ci-dessus est limité en
	  taille, aussi tout les messages peuvent ne pas être
	  visibles.  Après l'ouverture d'une session, la plupart
	  d'entre eux peuvent être visualisés à partir de la ligne de
	  commande en tapant <code class="command">dmesg | less</code> à
	  l'invite.  Appuyez sur <span class="keycap"><strong>q</strong></span> pour retourner à
	  l'invite de commande après la visualisation.</p><p>Messages de démarrage typiques (information sur la
	  version omise):</p><pre class="screen">Copyright (c) 1992-2011 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
        The Regents of the University of California. All rights reserved.
FreeBSD is a registered trademark of The FreeBSD Foundation.

    root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC amd64
CPU: Intel(R) Core(TM)2 Duo CPU     E8400  @ 3.00GHz (3007.77-MHz K8-class CPU)
  Origin = "GenuineIntel"  Id = 0x10676  Family = 6  Model = 17  Stepping = 6
  Features=0x783fbff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,MMX,FXSR,SSE,SSE2&gt;
  Features2=0x209&lt;SSE3,MON,SSSE3&gt;
  AMD Features=0x20100800&lt;SYSCALL,NX,LM&gt;
  AMD Features2=0x1&lt;LAHF&gt;
real memory  = 536805376 (511 MB)
avail memory = 491819008 (469 MB)
Event timer "LAPIC" quality 400
ACPI APIC Table: &lt;VBOX   VBOXAPIC&gt;
ioapic0: Changing APIC ID to 1
ioapic0 &lt;Version 1.1&gt; irqs 0-23 on motherboard
kbd1 at kbdmux0
acpi0: &lt;VBOX VBOXXSDT&gt; on motherboard
acpi0: Power Button (fixed)
acpi0: Sleep Button (fixed)
Timecounter "ACPI-fast" frequency 3579545 Hz quality 900
acpi_timer0: &lt;32-bit timer at 3.579545MHz&gt; port 0x4008-0x400b on acpi0
cpu0: &lt;ACPI CPU&gt; on acpi0
pcib0: &lt;ACPI Host-PCI bridge&gt; port 0xcf8-0xcff on acpi0
pci0: &lt;ACPI PCI bus&gt; on pcib0
isab0: &lt;PCI-ISA bridge&gt; at device 1.0 on pci0
isa0: &lt;ISA bus&gt; on isab0
atapci0: &lt;Intel PIIX4 UDMA33 controller&gt; port 0x1f0-0x1f7,0x3f6,0x170-0x177,0x376,0xd000-0xd00f at device 1.1 on pci0
ata0: &lt;ATA channel 0&gt; on atapci0
ata1: &lt;ATA channel 1&gt; on atapci0
vgapci0: &lt;VGA-compatible display&gt; mem 0xe0000000-0xe0ffffff irq 18 at device 2.0 on pci0
em0: &lt;Intel(R) PRO/1000 Legacy Network Connection 1.0.3&gt; port 0xd010-0xd017 mem 0xf0000000-0xf001ffff irq 19 at device 3.0 on pci0
em0: Ethernet address: 08:00:27:9f:e0:92
pci0: &lt;base peripheral&gt; at device 4.0 (no driver attached)
pcm0: &lt;Intel ICH (82801AA)&gt; port 0xd100-0xd1ff,0xd200-0xd23f irq 21 at device 5.0 on pci0
pcm0: &lt;SigmaTel STAC9700/83/84 AC97 Codec&gt;
ohci0: &lt;OHCI (generic) USB controller&gt; mem 0xf0804000-0xf0804fff irq 22 at device 6.0 on pci0
usbus0: &lt;OHCI (generic) USB controller&gt; on ohci0
pci0: &lt;bridge&gt; at device 7.0 (no driver attached)
acpi_acad0: &lt;AC Adapter&gt; on acpi0
atkbdc0: &lt;Keyboard controller (i8042)&gt; port 0x60,0x64 irq 1 on acpi0
atkbd0: &lt;AT Keyboard&gt; irq 1 on atkbdc0
kbd0 at atkbd0
atkbd0: [GIANT-LOCKED]
psm0: &lt;PS/2 Mouse&gt; irq 12 on atkbdc0
psm0: [GIANT-LOCKED]
psm0: model IntelliMouse Explorer, device ID 4
attimer0: &lt;AT timer&gt; port 0x40-0x43,0x50-0x53 on acpi0
Timecounter "i8254" frequency 1193182 Hz quality 0
Event timer "i8254" frequency 1193182 Hz quality 100
sc0: &lt;System console&gt; at flags 0x100 on isa0
sc0: VGA &lt;16 virtual consoles, flags=0x300&gt;
vga0: &lt;Generic ISA VGA&gt; at port 0x3c0-0x3df iomem 0xa0000-0xbffff on isa0
atrtc0: &lt;AT realtime clock&gt; at port 0x70 irq 8 on isa0
Event timer "RTC" frequency 32768 Hz quality 0
ppc0: cannot reserve I/O port range
Timecounters tick every 10.000 msec
pcm0: measured ac97 link rate at 485193 Hz
em0: link state changed to UP
usbus0: 12Mbps Full Speed USB v1.0
ugen0.1: &lt;Apple&gt; at usbus0
uhub0: &lt;Apple OHCI root HUB, class 9/0, rev 1.00/1.00, addr 1&gt; on usbus0
cd0 at ata1 bus 0 scbus1 target 0 lun 0
cd0: &lt;VBOX CD-ROM 1.0&gt; Removable CD-ROM SCSI-0 device
cd0: 33.300MB/s transfers (UDMA2, ATAPI 12bytes, PIO 65534bytes)
cd0: Attempt to query device size failed: NOT READY, Medium not present
ada0 at ata0 bus 0 scbus0 target 0 lun 0
ada0: &lt;VBOX HARDDISK 1.0&gt; ATA-6 device
ada0: 33.300MB/s transfers (UDMA2, PIO 65536bytes)
ada0: 12546MB (25694208 512 byte sectors: 16H 63S/T 16383C)
ada0: Previously was known as ad0
Timecounter "TSC" frequency 3007772192 Hz quality 800
Root mount waiting for: usbus0
uhub0: 8 ports with 8 removable, self powered
Trying to mount root from ufs:/dev/ada0p2 [rw]...
Setting hostuuid: 1848d7bf-e6a4-4ed4-b782-bd3f1685d551.
Setting hostid: 0xa03479b2.
Entropy harvesting: interrupts ethernet point_to_point kickstart.
Starting file system checks:
/dev/ada0p2: FILE SYSTEM CLEAN; SKIPPING CHECKS
/dev/ada0p2: clean, 2620402 free (714 frags, 327461 blocks, 0.0% fragmentation)
Mounting local file systems:.
vboxguest0 port 0xd020-0xd03f mem 0xf0400000-0xf07fffff,0xf0800000-0xf0803fff irq 20 at device 4.0 on pci0
vboxguest: loaded successfully
Setting hostname: machine3.example.com.
Starting Network: lo0 em0.
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        options=3&lt;RXCSUM,TXCSUM&gt;
        inet6 ::1 prefixlen 128
        inet6 fe80::1%lo0 prefixlen 64 scopeid 0x3
        inet 127.0.0.1 netmask 0xff000000
        nd6 options=21&lt;PERFORMNUD,AUTO_LINKLOCAL&gt;
em0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=9b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM&gt;
        ether 08:00:27:9f:e0:92
        nd6 options=29&lt;PERFORMNUD,IFDISABLED,AUTO_LINKLOCAL&gt;
        media: Ethernet autoselect (1000baseT &lt;full-duplex&gt;)
        status: active
Starting devd.
Starting Network: usbus0.
DHCPREQUEST on em0 to 255.255.255.255 port 67
DHCPACK from 10.0.2.2
bound to 192.168.1.142 -- renewal in 43200 seconds.
add net ::ffff:0.0.0.0: gateway ::1
add net ::0.0.0.0: gateway ::1
add net fe80::: gateway ::1
add net ff02::: gateway ::1
ELF ldconfig path: /lib /usr/lib /usr/lib/compat /usr/local/lib
32-bit compatibility ldconfig path: /usr/lib32
Creating and/or trimming log files.
Starting syslogd.
No core dumps found.
Clearing /tmp (X related).
Updating motd:.
Configuring syscons: blanktime.
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
10:a0:f5:af:93:ae:a3:1a:b2:bb:3c:35:d9:5a:b3:f3 root@machine3.example.com
The key's randomart image is:
+--[RSA1 1024]----+
|    o..          |
|   o . .         |
|  .   o          |
|       o         |
|    o   S        |
|   + + o         |
|o . + *          |
|o+ ..+ .         |
|==o..o+E         |
+-----------------+
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
7e:1c:ce:dc:8a:3a:18:13:5b:34:b5:cf:d9:d1:47:b2 root@machine3.example.com
The key's randomart image is:
+--[ DSA 1024]----+
|       ..     . .|
|      o  .   . + |
|     . ..   . E .|
|    . .  o o . . |
|     +  S = .    |
|    +  . = o     |
|     +  . * .    |
|    . .  o .     |
|      .o. .      |
+-----------------+
Starting sshd.
Starting cron.
Starting background file system checks in 60 seconds.

Thu Oct  6 19:15:31 MDT 2011

FreeBSD/amd64 (machine3.example.com) (ttyv0)

login:</pre><p>La génération des clés RSA et DSA peut prendre du temps
	  sur les machines lentes.  Cela ne se produit qu'au premier
	  démarrage d'une nouvelle installation, et seulement si
	  <span class="application">sshd</span> a été configuré pour
	  démarrer automatiquement.  Les démarrages suivants seront
	  plus rapides.</p><p>FreeBSD n'installe pas d'environnement graphique par
	  défaut, mais de nombreux sont disponibles.  Consultez <a class="xref" href="#x11" title="Chapitre 6. Le système X Window">Chapitre 6, <em>Le système X Window</em></a> pour plus d'information.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bsdinstall-shutdown"></a>3.9.9. Arrêt de FreeBSD</h3></div></div></div><p>Arrêter proprement un ordinateur sous FreeBSD aide à protéger
	les données et même le matériel de tout dommage.  Ne coupez
	pas directement l'alimentation.  Si l'utilisateur est membre
	du groupe <code class="systemitem">wheel</code>,
	passez en super-utilisateur en tapant <code class="command">su</code>
	sur la ligne de commande et en entrant le mot de passe de
	<code class="systemitem">root</code>.  Sinon, ouvrez
	une session en tant que <code class="systemitem">root</code> et utilisez la commande
	<code class="command">shutdown -p now</code>.  Le système se fermera
	proprement et s'éteindra lui-même.</p><p>La combinaison de touches
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Del</strong></span>
	peut être employée pour redémarrer le système, mais n'est pas
	recommandée en utilisation normale.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bsdinstall-install-trouble"></a>3.10. Dépannage</h2></div></div></div><a id="idp67969488" class="indexterm"></a><p>La section suivante couvre le dépannage basique de
      l'installation, comme les problèmes courants rencontrés.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67971024"></a>3.10.1. Que faire si quelque chose se passe mal</h3></div></div></div><p>En raison des nombreuses limitations de l'architecture PC,
	il est impossible que la détection du matériel soit à 100%
	fiable, cependant, il y a quelques petites choses que vous
	pouvez faire si cela échoue.</p><p>Vérifiez la <a class="link" href="http://www.FreeBSD.org/releases/index.html" target="_top">liste
	du matériel supporté</a> de votre version de FreeBSD pour être
	sûr que votre matériel est bien supporté.</p><p>Si votre matériel est supporté et que vous expérimentez
	toujours des blocages ou autres problèmes, vous devrez
	compiler un <a class="link" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">noyau
	personnalisé</a>.  Cela permettra d'ajouter le support pour
	les périphériques qui ne sont pas présents dans le noyau
	<code class="filename">GENERIC</code>.  Le noyau présent sur les
	disques de démarrage est configuré de telle façon qu'il
	supposera que la plupart des périphériques seront dans leur
	configuration d'usine en termes d'IRQs, d'adresses d'E/S, et
	canaux de DMA.  Si votre matériel a été reconfiguré vous
	devrez très probablement éditer le fichier de configuration du
	noyau et de le recompiler pour indiquer à FreeBSD où trouver les
	choses.</p><p>Il est également possible que la détection d'un
	périphérique absent provoque plus tard l'échec de la détection
	d'un périphérique présent.  Dans ce cas, les pilotes de
	périphériques conflictuels devraient être désactivés.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Quelques problèmes d'installation peuvent être évités ou
	  allégés en mettant à jour le firmware de divers composants
	  matériels, en particulier la carte mère.  Le firmware de la
	  carte mère peut également être désigné par le terme
	  <acronym class="acronym">BIOS</acronym>.  La plupart des constructeurs de
	  cartes mères ou d'ordinateur disposent d'un site web où
	  peuvent être trouvées les mises à jour et les informations
	  de mises à jour.</p><p xmlns="http://www.w3.org/1999/xhtml">Les fabricants déconseillent fortement de mettre à jour
	  le <acronym class="acronym">BIOS</acronym> de la carte mère à moins d'avoir
	  une bonne raison de le faire, comme une mise à jour
	  critique.  Le processus de mise à jour
	  <span class="emphasis"><em>peut</em></span> mal se passer, laissant un
	  <acronym class="acronym">BIOS</acronym> incomplet et l'ordinateur
	  inutilisable.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp67977552"></a>3.10.2. Questions et réponses de dépannage</h3></div></div></div><div class="qandaset"><a id="idp67978192"></a><dl><dt>3.10.2.1. <a href="#idp67978448">Mon système se bloque au démarrage pendant la
	      détection du matériel, ou se comporte de manière étrange
	      lors de l'installation.</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp67978448"></a><a id="idp67978704"></a><p><strong>3.10.2.1.</strong></p></td><td align="left" valign="top"><p>Mon système se bloque au démarrage pendant la
	      détection du matériel, ou se comporte de manière étrange
	      lors de l'installation.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>FreeBSD utilise de manière intensive le système ACPI
	      sur les plateformes i386, amd64 et ia64 s'il est détecté
	      au démarrage pour aider à la détection du matériel.
	      Malheureusement, des bogues persistent dans le pilote
	      ACPI, et sur les cartes mères et leur
	      <acronym class="acronym">BIOS</acronym>.  L'ACPI peut être désactivé en
	      positionnant le paramètre
	      <code class="literal">hint.acpi.0.disabled</code> pour le chargeur
	      de démarrage:</p><pre class="screen"><strong class="userinput"><code>set hint.acpi.0.disabled="1"</code></strong></pre><p>Ce paramètre est réinitialisé à chaque démarrage du
	      système, il est donc nécessaire d'ajouter
	      <code class="literal">hint.acpi.0.disabled="1"</code> au fichier
	      <code class="filename">/boot/loader.conf</code>.  Plus
	      d'information au sujet du chargeur peut être trouvée
	      dans la <a class="xref" href="#boot-synopsis" title="13.1. Synopsis">Section 13.1, « Synopsis »</a>.</p></td></tr></tbody></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-live-cd"></a>3.11. Utilisation du CD Live</h2></div></div></div><p>Un CD <span class="quote">« <span class="quote">live</span> »</span> de FreeBSD est disponible sur le même
      CD contenant le programme d'installation.  C'est utile pour ceux
      qui se demandent si FreeBSD est le bon choix et désirent tester
      certaines fonctionnalités avant l'installation.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les points suivants devront être pris en compte lors de
	l'utilisation du CD live:</p><div xmlns="http://www.w3.org/1999/xhtml" class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Pour utiliser le système, une authentification est
	    nécessaire.  Le nom d'utilisateur est <code class="systemitem">root</code>, sans mot de
	    passe.</p></li><li class="listitem"><p>Etant donné que le système s'exécute directement à
	    partir du CD, le système sera bien plus lent que s'il était
	    installé sur un disque dur.</p></li><li class="listitem"><p>Le CD live propose une invite de commande et pas
	    d'interface graphique.</p></li></ul></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics"></a>Chapitre 4. Quelques bases d'UNIX</h2></div><div><span class="authorgroup">Réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chris</span> <span class="surname">Shumway</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#basics-synopsis">4.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#consoles">4.2. Consoles virtuelles &amp; terminaux</a></span></dt><dt><span class="sect1"><a href="#permissions">4.3. Permissions</a></span></dt><dt><span class="sect1"><a href="#dirstructure">4.4. Organisation de l'arborescence des répertoires</a></span></dt><dt><span class="sect1"><a href="#disk-organization">4.5. Organisation des disques</a></span></dt><dt><span class="sect1"><a href="#mount-unmount">4.6. Monter et démonter des systèmes de fichiers</a></span></dt><dt><span class="sect1"><a href="#basics-processes">4.7. Processus</a></span></dt><dt><span class="sect1"><a href="#basics-daemons">4.8. Daemons, signaux, et comment tuer un processus</a></span></dt><dt><span class="sect1"><a href="#shells">4.9. Interpréteurs de commandes - &#8220;Shells&#8221;</a></span></dt><dt><span class="sect1"><a href="#editors">4.10. Editeurs de texte</a></span></dt><dt><span class="sect1"><a href="#basics-devices">4.11. Périphériques et fichiers spéciaux de
      périphérique</a></span></dt><dt><span class="sect1"><a href="#binary-formats">4.12. Le format des fichiers binaires</a></span></dt><dt><span class="sect1"><a href="#basics-more-information">4.13. Pour plus d'information</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-synopsis"></a>4.1. Synopsis</h2></div></div></div><p>Le chapitre suivant couvrira les commandes et fonctionnalités
     de base du système d'exploitation FreeBSD.  La plupart de ces
     informations sera valable pour n'importe quel système
     d'exploitation <span class="trademark">UNIX</span>®.  Soyez libre de passer ce chapitre si vous
     êtes familier avec ces informations.  Si vous êtes nouveau
     à
     FreeBSD, alors vous voudrez certainement lire attentivement ce
     chapitre.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment utiliser les &#8220;consoles virtuelles&#8221;
	  de FreeBSD.</p></li><li class="listitem"><p>Comment les permissions des fichiers d'<span class="trademark">UNIX</span>®
	  fonctionnent ainsi que l'utilisation des indicateurs de
	  fichiers sous FreeBSD.</p></li><li class="listitem"><p>L'architecture par défaut du système de
	  fichiers sous FreeBSD.</p></li><li class="listitem"><p>L'organisation des disques sous FreeBSD.</p></li><li class="listitem"><p>Comment monter et démonter des systèmes de
	  fichier.</p></li><li class="listitem"><p>Ce que sont les processus, daemons et signaux.</p></li><li class="listitem"><p>Ce qu'est un interpréteur de commande, et comment
	  changer votre environnement de session par
	  défaut.</p></li><li class="listitem"><p>Comment utiliser les éditeurs de texte de base.</p></li><li class="listitem"><p>Ce que sont les périphériques et les
	  fichiers spéciaux de périphérique.</p></li><li class="listitem"><p>Quel est le format des binaires utilisé sous
	  FreeBSD.</p></li><li class="listitem"><p>Comment lire les pages de manuel pour plus
	  d'information.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="consoles"></a>4.2. Consoles virtuelles &amp; terminaux</h2></div></div></div><a id="idp68014288" class="indexterm"></a><a id="idp68014928" class="indexterm"></a><p>FreeBSD peut être utilisé de diverses façons.
      L'une d'elles est en tapant des commandes sur un terminal
      texte.  Une bonne partie de la flexibilité et de la puissance
      d'un système d'exploitation <span class="trademark">UNIX</span>® est directement
      disponible sous vos mains en utilisant FreeBSD de cette manière.
      Cette section décrit ce que sont les &#8220;terminaux&#8221; et
      les &#8220;consoles&#8221;, et comment les utiliser sous
      FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-intro"></a>4.2.1. La console</h3></div></div></div><a id="idp68017104" class="indexterm"></a><p>Si vous n'avez pas configuré FreeBSD pour lancer
	automatiquement un environnement graphique au démarrage, le
	système vous présentera une invite d'ouverture de session
	après son démarrage, juste après la fin des
	procédures de démarrage.  Vous verrez quelque chose
	de similaire à:</p><pre class="screen">Additional ABI support:.
Local package initialization:.
Additional TCP options:.

Fri Sep 20 13:01:06 EEST 2002

FreeBSD/i386 (pc3.example.org) (ttyv0)

login:</pre><p>Les messages pourront être différents sur votre
	système, mais cela devrait y ressembler.  Les deux
	dernières lignes sont celles qui nous intéressent
	actuellement.  La seconde de ces lignes nous donne:</p><pre class="programlisting">FreeBSD/i386 (pc3.example.org) (ttyv0)</pre><p>Cette ligne contient quelques éléments d'information
	sur le système que vous venez de démarrer.  Vous
	êtes en train de lire une console &#8220;FreeBSD&#8221;,
	tournant sur un processeur Intel ou compatible de la famille
	x86<a href="#ftn.idp68019408" class="footnote" id="idp68019408"><sup class="footnote">[1]</sup></a>.  Le nom de cette machine (chaque machine <span class="trademark">UNIX</span>®
	a un nom) est <code class="systemitem">pc3.example.org</code>, et vous
	regardez actuellement sa console système&#8212;le terminal
	<code class="filename">ttyv0</code>.</p><p>Et enfin, la dernière ligne est toujours:</p><pre class="programlisting">login:</pre><p>C'est le moment où vous êtes supposé
	taper votre &#8220;nom d'utilisateur&#8221; pour vous
	attacher au système FreeBSD.  La section suivante décrit
	comment procéder.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-login"></a>4.2.2. Ouvrir une session sur un système FreeBSD</h3></div></div></div><p>FreeBSD est un système multi-utilisateur,
	multi-processeur.  C'est la description formelle qui est
	habituellement donnée pour un système qui peut
	être utilisé par différentes personnes,
	qui exécutent simultanément de nombreux programmes sur une
	machine individuelle.</p><p>Chaque système multi-utilisateur a besoin d'un moyen pour
	distinguer un &#8220;utilisateur&#8221; du reste.  Sous
	FreeBSD (et sous tous les systèmes de type <span class="trademark">UNIX</span>®),
	cela est effectué en demandant à chaque utilisateur de
	&#8220;s'attacher&#8221; au système avant d'être en
	mesure d'exécuter des programmes.  Chaque utilisateur
	possède un nom unique (le nom d'utilisateur) et une clé
	secrète personnelle (le mot de passe).  FreeBSD demandera ces
	deux éléments avant d'autoriser un utilisateur à
	lancer un programme.</p><a id="idp68025808" class="indexterm"></a><p>Juste après que FreeBSD ait démarré et
	en ait terminé avec l'exécution des procédures de
	démarrage<a href="#ftn.idp68026576" class="footnote" id="idp68026576"><sup class="footnote">[2]</sup></a>, il présentera une invite et demandera un nom
	d'utilisateur valide:</p><pre class="screen">login:</pre><p>Pour cet exemple, supposons que votre nom d'utilisateur
	est <code class="systemitem">john</code>.  Tapez
	<code class="systemitem">john</code> à cette invite puis appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  Alors vous devrez être
	invité à entrer un &#8220;mot de passe&#8221;:</p><pre class="screen">login: <strong class="userinput"><code>john</code></strong>
Password:</pre><p>Tapez maintenant le mot de passe de <code class="systemitem">john</code>,
	et appuyez sur <span class="keycap"><strong>Entrée</strong></span>.  Le mot de passe
	<span class="emphasis"><em>n'est pas affiché!</em></span>  Vous n'avez pas à
	vous préoccuper de cela maintenant.  Il suffit de penser que
	cela est fait pour des raisons de sécurité.</p><p>Si vous avez tapé correctement votre mot de passe,
	vous devriez être maintenant attaché
	au système et prêt à essayer toutes les commandes
	disponibles.</p><p>Vous devriez voir apparaître le <acronym class="acronym">MOTD</acronym>
	ou message du jour suivi de l'invite de commande (un
	caractère <code class="literal">#</code>, <code class="literal">$</code>, ou
	<code class="literal">%</code>).  Cela indique que vous avez ouvert
	avec succès une session sous FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-virtual"></a>4.2.3. Consoles multiples</h3></div></div></div><p>Exécuter des commandes <span class="trademark">UNIX</span>® dans une console est bien
	beau, mais FreeBSD peut exécuter plusieurs programmes
	à la fois.  Avoir une seule console sur laquelle les commandes
	peuvent être tapées serait un peu du gaspillage quand
	un système d'exploitation comme FreeBSD peut exécuter des
	dizaines de programmes en même temps.  C'est ici que des
	&#8220;consoles virtuelles&#8221; peuvent être vraiment
	utiles.</p><p>FreeBSD peut être configuré pour présenter
	de nombreuses consoles virtuelles.  Vous pouvez basculer
	d'une console virtuelle à une autre en utilisant une
	combinaison de touches sur votre clavier.  Chaque console
	a son propre canal de sortie, et FreeBSD prend soin de
	rediriger correctement les entrées au clavier et la sortie
	vers écran quand vous basculez d'une console virtuelle à
	la suivante.</p><p>Des combinaisons de touches spécifiques ont
	été réservées par FreeBSD pour le
	basculement entre consoles<a href="#ftn.idp68041040" class="footnote" id="idp68041040"><sup class="footnote">[3]</sup></a>.  Vous pouvez utiliser
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span>,
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span>,
	jusqu'à
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F8</strong></span>
	pour basculer vers une console virtuelle différente sous
	FreeBSD.</p><p>Quand vous basculez d'une console à une autre, FreeBSD
	prend soin de sauvegarder et restaurer la sortie d'écran.
	Il en résulte l'&#8220;illusion&#8221; d'avoir plusieurs
	écrans et claviers &#8220;virtuels&#8221; que vous pouvez
	utiliser pour taper des commandes pour FreeBSD.  Les
	programmes que vous lancez sur une console virtuelle ne
	cessent pas de tourner quand cette console n'est plus visible.
	Ils continuent de s'exécuter quand vous avez
	basculé vers une console virtuelle différente.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-ttys"></a>4.2.4. Le fichier <code class="filename">/etc/ttys</code></h3></div></div></div><p>La configuration par défaut de FreeBSD démarre avec huit
	consoles virtuelles.  Cependant ce n'est pas un paramétrage
	fixe, et vous pouvez aisément personnaliser votre installation
	pour démarrer avec plus ou moins de consoles virtuelles.  Le
	nombre et les paramétrages des consoles virtuelles sont
	configurés dans le fichier
	<code class="filename">/etc/ttys</code>.</p><p>Vous pouvez utiliser le fichier
	<code class="filename">/etc/ttys</code> pour configurer les consoles
	virtuelles de FreeBSD.  Chaque ligne non-commentée dans ce fichier
	(les lignes qui ne débutent pas par le caractère
	<code class="literal">#</code>) contient le paramétrage d'un terminal ou
	d'une console virtuelle.  La version par défaut de ce
	fichier livrée avec FreeBSD configure neuf consoles virtuelles,
	et en active huit.  Ce sont les lignes commençant avec le terme
	<code class="literal">ttyv</code>:</p><pre class="programlisting"># name  getty                           type    status          comments
#
ttyv0   "/usr/libexec/getty Pc"         cons25  on  secure
# Virtual terminals
ttyv1   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv2   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv3   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv4   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv5   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv6   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv7   "/usr/libexec/getty Pc"         cons25  on  secure
ttyv8   "/usr/X11R6/bin/xdm -nodaemon"  xterm   off secure</pre><p>Pour une description détaillée de chaque colonne
	de ce fichier et toutes les options que vous pouvez utiliser
	pour configurer les consoles virtuelles, consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-singleuser"></a>4.2.5. Console en mode mono-utilisateur</h3></div></div></div><p>Une description détaillée de ce qu'est
	<span class="quote">« <span class="quote">le mode mono-utilisateur</span> »</span> peut être
	trouvée dans <a class="xref" href="#boot-singleuser" title="13.6.2. Mode mono-utilisateur">Section 13.6.2, « Mode mono-utilisateur »</a>.  Il est
	important de noter qu'il n'y a qu'une console de disponible
	quand vous exécutez FreeBSD en mode mono-utilisateur.  Il n'y
	a aucune console virtuelle de disponible.  Le paramétrage de
	la console en mode mono-utilisateur peut être
	également trouvé dans le fichier
	<code class="filename">/etc/ttys</code>.  Recherchez la ligne qui
	commence avec le mot <code class="literal">console</code>:</p><pre class="programlisting"># name  getty                           type    status          comments
#
# If console is marked "insecure", then init will ask for the root password
# when going to single-user mode.
console none                            unknown off secure</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Comme l'indiquent les commentaires au-dessus de la ligne
	  <code class="literal">console</code>, vous pouvez éditer cette ligne
	  et changer <code class="literal">secure</code> pour
	  <code class="literal">insecure</code>.  Si vous faites cela, quand
	  FreeBSD démarrera en mode mono-utilisateur, il demandera le
	  mot de passe de <code class="systemitem">root</code>.</p><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Cependant faites attention quand vous modifiez
	  cela pour <code class="literal">insecure</code>.</em></span>  Si vous
	  oubliez le mot de passe de <code class="systemitem">root</code>, le
	  démarrage en mode mono-utilisateur sera condamné.
	  Il est encore possible, mais cela pourra être relativement
	  compliqué pour quelqu'un qui n'est pas à l'aise avec le
	  processus de démarrage de FreeBSD et les programmes entrant
	  en jeu.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="consoles-vidcontrol"></a>4.2.6. Modifier la résolution de la console</h3></div></div></div><p>La résolution (ou encore le mode vidéo) de
	la console FreeBSD peut être réglée à
	1024x768, 1280x1024, ou tout autre résolution
	supportée par le circuit graphique et le moniteur.
	Pour utiliser une résolution vidéo
	différente vous devez en premier lieu recompiler votre
	noyau en ajoutant deux options supplémentaires:</p><pre class="programlisting">options VESA
options SC_PIXEL_MODE</pre><p>Une fois votre noyau recompilé avec ces deux
	options, vous pouvez déterminer quels sont les modes
	vidéo supportés par votre matériel en
	utilisant l'outil <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>.  Pour obtenir une liste
	des modes supportés, tapez la ligne suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol -i mode</code></strong></pre><p>La sortie de cette commande est une liste des modes
	vidéo que supporte votre matériel.  Vous pouvez
	ensuite décider d'utiliser un nouveau mode en le
	passant à la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a> tout en ayant
	les droits de <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>vidcontrol MODE_279</code></strong></pre><p>Si le nouveau mode vidéo est satisfaisant, il peut
	être activé au démarrage de manière
	permanente en le configurant dans le fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">allscreens_flags="MODE_279"</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="permissions"></a>4.3. Permissions</h2></div></div></div><a id="idp68081104" class="indexterm"></a><p>FreeBSD, étant un descendant direct de l'<span class="trademark">UNIX</span>® BSD, est
      basé sur plusieurs concepts clés d'<span class="trademark">UNIX</span>®.  Le premier,
      et le plus prononcé, est le fait que FreeBSD est un
      système d'exploitation multi-utilisateurs.  Le système
      peut gérer plusieurs utilisateurs travaillant tous
      simultanément sur des tâches complètement
      indépendantes.  Le système est responsable du partage
      correct et de la gestion des requêtes pour les
      périphériques matériels, la mémoire,
      et le temps CPU de façon équitable entre chaque
      utilisateur.</p><p>Puisque le système est capable de supporter des utilisateurs
      multiples, tout ce que le système gère possède un
      ensemble de permissions définissant qui peut écrire, lire,
      et exécuter la ressource.  Ces permissions sont stockées
      sous forme de trois octets divisés en trois parties, une pour le
      propriétaire du fichier, une pour le groupe auquel appartient le
      fichier, et une autre pour le reste du monde.
      Cette représentation numérique fonctionne comme
      ceci:</p><a id="idp68083408" class="indexterm"></a><a id="idp68083920" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Valeur</th><th>Permission</th><th>Contenu du répertoire</th></tr></thead><tbody><tr><td>0</td><td>Pas d'accès en lecture, pas d'accès en
	      écriture,
	      pas d'accès en exécution</td><td><code class="literal">---</code></td></tr><tr><td>1</td><td>Pas d'accès en lecture, pas d'accès en
	      écriture, exécution</td><td><code class="literal">--x</code></td></tr><tr><td>2</td><td>Pas d'accès en lecture, écriture, pas
	      d'accès en exécution</td><td><code class="literal">-w-</code></td></tr><tr><td>3</td><td>Pas d'accès en lecture, écriture,
	      exécution</td><td><code class="literal">-wx</code></td></tr><tr><td>4</td><td>Lecture, pas d'accès en écriture, pas
	      d'accès en exécution</td><td><code class="literal">r--</code></td></tr><tr><td>5</td><td>Lecture, pas d'accès en écriture,
	      exécution</td><td><code class="literal">r-x</code></td></tr><tr><td>6</td><td>Lecture, écriture, pas d'accès en
	      exécution</td><td><code class="literal">rw-</code></td></tr><tr><td>7</td><td>Lecture, écriture, exécution</td><td><code class="literal">rwx</code></td></tr></tbody></table></div><a id="idp68109904" class="indexterm"></a><a id="idp68110800" class="indexterm"></a><p>Vous pouvez utiliser l'option <code class="option">-l</code> avec la
      commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> pour afficher le contenu du répertoire
      sous forme une longue et détaillée qui inclut une colonne
      avec des informations sur les permissions d'accès des fichiers
      pour le propriétaire, le groupe, et le reste du monde.
      Par exemple un <code class="command">ls -l</code> dans un répertoire
      quelconque devrait donner:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ls -l</code></strong>
total 530
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 myfile
-rw-r--r--  1 root  wheel     512 Sep  5 12:31 otherfile
-rw-r--r--  1 root  wheel    7680 Sep  5 12:31 email.txt
...</pre><p>Voici
      comment est divisée la première colonne de l'affichage
      généré par <code class="command">ls -l</code>:</p><pre class="screen">-rw-r--r--</pre><p>Le premier caractère (le plus à gauche) indique
      si c'est un fichier normal, un répertoire, ou
      un périphérique mode caractère,
      une socket, ou tout autre pseudo-périphérique.
      Dans ce cas, <code class="literal">-</code>
      indique un fichier normal.  Les trois caractères suivants,
      <code class="literal">rw-</code> dans cet exemple, donnent les
      permissions pour le propriétaire du fichier.  Les trois
      caractères qui suivent, <code class="literal">r--</code>, donnent les
      permissions pour le groupe auquel appartient le fichier.
      Les trois derniers caractères, <code class="literal">r--</code>,
      donnent les permissions pour le reste du
      monde. Un tiret signifie que la permission est désactivée.
      Dans le cas de ce fichier, les permissions sont telles que le
      propriétaire peut lire et écrire le fichier, le groupe
      peut lire le fichier, et le reste du monde peut seulement lire le fichier.
      D'après la table ci-dessus, les permissions pour ce fichier
      seraient <code class="literal">644</code>, où chaque chiffre
      représente les
      trois parties des permissions du fichier.</p><p>Tout cela est bien beau, mais comment le système
      contrôle les permissions sur les périphériques?
      En fait FreeBSD traite la plupart des périphériques
      sous la forme d'un fichier que les programmes peuvent ouvrir, lire,
      et écrire des données dessus comme tout autre fichier.
      Ces périphériques spéciaux sont stockés
      dans le répertoire <code class="filename">/dev</code>.</p><p>Les répertoires sont aussi traités comme des fichiers.
      Ils ont des droits en lecture, écriture et exécution.
      Le bit d'exécution pour un répertoire a une signification
      légèrement différente que pour les fichiers.
      Quand un répertoire est marqué exécutable, cela
      signifie qu'il peut être traversé, i.e. il est possible
      d'utiliser &#8220;cd&#8221; (changement de répertoire).  Ceci signifie également qu'à
      l'intérieur du répertoire il est possible d'accéder
      aux fichiers dont les noms sont connus (en fonction, bien sûr,
      des permissions sur les fichiers eux-mêmes).</p><p>En particulier, afin d'obtenir la liste du
      contenu d'un répertoire, la permission de lecture doit être
      positionnée sur le répertoire, tandis que pour effacer un
      fichier dont on connaît le nom, il est nécessaire d'avoir
      les droits d'écriture <span class="emphasis"><em>et</em></span> d'exécution
      sur le répertoire contenant le fichier.</p><p>Il y a d'autres types de permissions, mais elles sont
      principalement employées dans des circonstances
      spéciales comme les binaires &#8220;setuid&#8221; et
      les répertoires &#8220;sticky&#8221;.  Si
      vous désirez plus d'information sur les permissions de fichier et
      comment les positionner, soyez sûr de consulter la page de manuel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68121168"></a>4.3.1. Permissions symboliques</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp68123600" class="indexterm"></a><p>Les permissions symboliques, parfois désignées
	sous le nom d'expressions symboliques, utilisent des
	caractères à la place de valeur en octal pour
	assigner les permissions aux fichiers et répertoires.
	Les expressions symboliques emploient la syntaxe: (qui)
	(action) (permissions), avec les valeurs possibles
	suivantes:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Option</th><th>Lettre</th><th>Représente</th></tr></thead><tbody><tr><td>(qui)</td><td>u</td><td>Utilisateur</td></tr><tr><td>(qui)</td><td>g</td><td>Groupe</td></tr><tr><td>(qui)</td><td>o</td><td>Autre</td></tr><tr><td>(qui)</td><td>a</td><td>Tous (<span class="quote">« <span class="quote">le monde entier</span> »</span>)</td></tr><tr><td>(action)</td><td>+</td><td>Ajouter des permissions</td></tr><tr><td>(action)</td><td>-</td><td>Retirer des permissions</td></tr><tr><td>(action)</td><td>=</td><td>Fixe les permissions de façon explicite</td></tr><tr><td>(permissions)</td><td>r</td><td>Lecture</td></tr><tr><td>(permissions)</td><td>w</td><td>Ecriture</td></tr><tr><td>(permissions)</td><td>x</td><td>Exécution</td></tr><tr><td>(permissions)</td><td>t</td><td>bit collant (sticky)</td></tr><tr><td>(permissions)</td><td>s</td><td>Exécuter avec l'ID utilisateur (UID) ou groupe (GID)</td></tr></tbody></table></div><p>Ces valeurs sont utilisées avec la commande
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> comme précédemment mais avec
      des lettres.  Par exemple, vous pourriez utiliser la commande
      suivante pour refuser l'accès au fichier
      <em class="replaceable"><code>FICHIER</code></em> à d'autres
      utilisateurs:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go= FICHIER</code></strong></pre><p>Une liste séparé par des virgules peut être
      fournie quand plus d'un changement doit être effectué
      sur un fichier.  Par exemple la commande suivante retirera
      les permissions d'écriture au groupe et au &#8220;reste du
      monde&#8221; sur le fichier <em class="replaceable"><code>FICHIER</code></em>,
      puis ajoutera la permission d'exécution pour tout le
      monde:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod go-w,a+x FICHIER</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68160080"></a>4.3.2. Indicateurs des fichiers sous FreeBSD</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>En addition des permissions sur les fichiers
	précédemment présentées, FreeBSD
	supporte l'utilisation d'<span class="quote">« <span class="quote">indicateurs de
	fichiers</span> »</span>.  Ces indicateurs rajoutent un niveau de
	contrôle et de sécurité sur les fichiers,
	mais ne concernent pas les répertoires.</p><p>Ces indicateurs ajoutent donc un niveau de contrôle
	supplémentaire des fichiers, permettant d'assurer que
	dans certains cas même le super-utilisateur
	<code class="systemitem">root</code> ne pourra effacer ou modifier des
	fichiers.</p><p>Les indicateurs de fichiers peuvent être
	modifiés avec l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>, ce dernier
	présentant une interface simple.  Par exemple, pour
	activer l'indicateur système de suppression impossible
	sur le fichier <code class="filename">file1</code>, tapez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags sunlink file1</code></strong></pre><p>Et pour désactiver l'indicateur de suppression
	impossible, utilisez la commande précédente avec
	le préfixe <span class="quote">« <span class="quote">no</span> »</span> devant l'option
	<code class="option">sunlink</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags nosunlink file1</code></strong></pre><p>Pour afficher les indicateurs propres à ce fichier,
	utilisez la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> avec l'option
	<code class="option">-lo</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls -lo file1
	</code></strong></pre><p>La sortie de la commande devrait ressembler
	à:</p><pre class="programlisting">-rw-r--r--  1 trhodes  trhodes  sunlnk 0 Mar  1 05:54 file1</pre><p>Plusieurs indicateurs ne peuvent être
	positionnés ou retirés que par le
	super-utilisateur <code class="systemitem">root</code>.  Dans les autres
	cas, le propriétaire du fichier peut activer ces
	indicateurs.  Pour plus d'information, la lecture des pages de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chflags</span>(2)</span></a> est
	recommandée à tout administrateur.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dirstructure"></a>4.4. Organisation de l'arborescence des répertoires</h2></div></div></div><a id="idp68179664" class="indexterm"></a><p>L'organisation de l'arborescence des répertoires de FreeBSD
      est essentielle pour obtenir une compréhension globale du
      système.  Le concept le plus important à saisir est
      celui du répertoire racine, &#8220;/&#8221;.
      Ce répertoire est le premier a être monté au
      démarrage et il contient le système de base
      nécessaire pour préparer le système d'exploitation
      au fonctionnement multi-utilisateurs.
      Le répertoire racine contient également les
      points de montage pour les autres systèmes de fichiers qui
      sont montés lors du passage en mode multi-utilisateurs.</p><p>Un point de montage est un répertoire où peuvent
      être greffés des systèmes de fichiers
      supplémentaires au système de
      fichiers parent (en général le système de fichiers racine).  Cela est décrit plus en détails dans la <a class="xref" href="#disk-organization" title="4.5. Organisation des disques">Section 4.5, « Organisation des disques »</a>.  Les points de montage standards incluent
      <code class="filename">/usr</code>, <code class="filename">/var</code>,
      <code class="filename">/tmp</code>,
      <code class="filename">/mnt</code>, et <code class="filename">/cdrom</code>.  Ces
      répertoires sont en général
      référencés par des entrées dans le
      fichier <code class="filename">/etc/fstab</code>.
      <code class="filename">/etc/fstab</code> est une table des divers systèmes
      de fichiers et de leur point de montage utilisé comme
      référence par le système.
      La plupart des systèmes de fichiers présents dans
      <code class="filename">/etc/fstab</code> sont montés automatiquement au
      moment du démarrage par la procédure <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> à
      moins que
      l'option <code class="option">noauto</code> soit présente.
      Plus de détails peuvent être trouvés dans la
      <a class="xref" href="#disks-fstab" title="4.6.1. Le fichier fstab">Section 4.6.1, « Le fichier <code class="filename">fstab</code> »</a>.</p><p>Une description complète de l'arborescence du système de
      fichiers est disponible dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a>.  Pour
      l'instant, une brève vue d'ensemble des répertoires les plus
      courants suffira.</p><p>
      </p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Répertoire</th><th>Description</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="filename">/</code></td><td valign="top">Répertoire racine du système de
		fichiers.</td></tr><tr><td valign="top"><code class="filename">/bin/</code></td><td valign="top">Programmes utilisateur fondamentaux aux deux modes
		de fonctionnement mono et multi-utilisateurs.</td></tr><tr><td valign="top"><code class="filename">/boot/</code></td><td valign="top">Programmes et fichiers de configuration utilisés
		durant le processus de démarrage du
		système.</td></tr><tr><td valign="top"><code class="filename">/boot/defaults/</code></td><td valign="top">Fichiers de configuration par défaut du processus
		de démarrage; voir la page de manuel
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/dev/</code></td><td valign="top">Fichiers spéciaux de périphérique;
		voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=intro&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">intro</span>(4)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/</code></td><td valign="top">Procédures et fichiers de configuration du
		système.</td></tr><tr><td valign="top"><code class="filename">/etc/defaults/</code></td><td valign="top">Fichiers de configuration du système par
		défaut; voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/mail/</code></td><td valign="top">Fichiers de configuration pour les agents de
		transport du courrier électronique comme
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/namedb/</code></td><td valign="top">Fichiers de configuration de <code class="command">named</code>;
		voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/periodic/</code></td><td valign="top">Procédures qui sont exécutées de
		façon quotidienne, hebdomadaire et mensuelle par
		l'intermédiaire de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>;
		voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/etc/ppp/</code></td><td valign="top">Fichiers de configuration de <code class="command">ppp</code>; voir
		la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/mnt/</code></td><td valign="top">Répertoire vide habituellement utilisé
		par les administrateurs système comme un point de
		montage temporaire.</td></tr><tr><td valign="top"><code class="filename">/proc/</code></td><td valign="top">Le système de fichiers pour les processus; voir les
		pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procfs</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_procfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_procfs</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/rescue/</code></td><td valign="top">Programmes liés en statique pour les
		réparations d'urgence; consultez la page de
		manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rescue&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rescue</span>(8)</span></a>.</td></tr><tr><td valign="top"><code class="filename">/root/</code></td><td valign="top">Répertoire personnel du compte
		<code class="systemitem">root</code>.</td></tr><tr><td valign="top"><code class="filename">/sbin/</code></td><td valign="top">Programmes systèmes et utilitaires systèmes
		fondamentaux aux environnements mono et multi-utilisateurs.
		</td></tr><tr><td valign="top"><code class="filename">/tmp/</code></td><td valign="top">Fichiers temporaires.
		Le contenu de <code class="filename">/tmp</code>
		n'est en général PAS préservé
		par un redémarrage du système.  Un
		système de fichiers en mémoire est
		souvent monté sur <code class="filename">/tmp</code>.  Cela peut
		être automatisé en utilisant les
		variables <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> relatives au système
		<span class="quote">« <span class="quote">tmpmfs</span> »</span> (ou à l'aide d'une
		entrée dans le fichier
		<code class="filename">/etc/fstab</code>; consultez la page de
		manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>).</td></tr><tr><td valign="top"><code class="filename">/usr/</code></td><td valign="top">La majorité des utilitaires et applications
		utilisateur.</td></tr><tr><td valign="top"><code class="filename">/usr/bin/</code></td><td valign="top">Utilitaires généraux, outils de
		programmation, et applications.</td></tr><tr><td valign="top"><code class="filename">/usr/include/</code></td><td valign="top">Fichiers d'en-tête C standard.</td></tr><tr><td valign="top"><code class="filename">/usr/lib/</code></td><td valign="top">Ensemble des bibliothèques.</td></tr><tr><td valign="top"><code class="filename">/usr/libdata/</code></td><td valign="top">Divers fichiers de données de service.</td></tr><tr><td valign="top"><code class="filename">/usr/libexec/</code></td><td valign="top">Utilitaires et daemons système
		(exécutés par d'autres programmes).</td></tr><tr><td valign="top"><code class="filename">/usr/local/</code></td><td valign="top">Exécutables, bibliothèques, etc...  Egalement
		utilisé comme destination de défaut pour les
		logiciels portés pour FreeBSD.  Dans
		<code class="filename">/usr/local</code>, l'organisation
		générale
		décrite par la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hier&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span></a> pour
		<code class="filename">/usr</code> devrait être utilisée.
		Exceptions faites du répertoire man qui est directement
		sous <code class="filename">/usr/local</code> plutôt que sous
		<code class="filename">/usr/local/share</code>, et la
		documentation des logiciels portés est dans
		<code class="filename">share/doc/port</code>.
	      </td></tr><tr><td valign="top"><code class="filename">/usr/obj/</code></td><td valign="top">Arborescence cible spécifique à une
		architecture produite par la compilation de l'arborescence
		<code class="filename">/usr/src</code>.</td></tr><tr><td valign="top"><code class="filename">/usr/ports</code></td><td valign="top">Le catalogue des logiciels portés
		(optionnel).</td></tr><tr><td valign="top"><code class="filename">/usr/sbin/</code></td><td valign="top">Utilitaires et daemons système
		(exécutés par les utilisateurs).</td></tr><tr><td valign="top"><code class="filename">/usr/share/</code></td><td valign="top">Fichiers indépendants de l'architecture.</td></tr><tr><td valign="top"><code class="filename">/usr/src/</code></td><td valign="top">Fichiers source FreeBSD et/ou locaux.</td></tr><tr><td valign="top"><code class="filename">/usr/X11R6/</code></td><td valign="top">Exécutables, bibliothèques etc... de la
		distribution d'X11R6 (optionnel).</td></tr><tr><td valign="top"><code class="filename">/var/</code></td><td valign="top">Fichiers de traces, fichiers temporaires, et
		fichiers tampons.  Un système de fichiers en
		mémoire est parfois monté sur <code class="filename">/var</code>.  Cela peut
		être automatisé en utilisant les
		variables <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> relatives au système
		<span class="quote">« <span class="quote">varmfs</span> »</span> (ou à l'aide d'une
		entrée dans le fichier
		<code class="filename">/etc/fstab</code>; consultez la page de
		manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>).</td></tr><tr><td valign="top"><code class="filename">/var/log/</code></td><td valign="top">Divers fichiers de trace du système.</td></tr><tr><td valign="top"><code class="filename">/var/mail/</code></td><td valign="top">Boîtes aux lettres des utilisateurs.</td></tr><tr><td valign="top"><code class="filename">/var/spool/</code></td><td valign="top">Divers répertoires tampons des systèmes
		de courrier électronique et d'impression.
	      </td></tr><tr><td valign="top"><code class="filename">/var/tmp/</code></td><td valign="top">Fichiers temporaires.  Ces fichiers sont
		généralement conservés lors d'un
		redémarrage du système, à moins
		que <code class="filename">/var</code> ne
		soit un système de fichiers en
		mémoire.</td></tr><tr><td valign="top"><code class="filename">/var/yp</code></td><td valign="top">Tables NIS.</td></tr></tbody></table></div><p>
    </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disk-organization"></a>4.5. Organisation des disques</h2></div></div></div><p>Le plus petit élément qu'utilise FreeBSD pour
      retrouver des fichiers est le nom de fichier.  Les noms de
      fichiers sont sensibles à la casse des caractères,
      ce qui signifie que <code class="filename">readme.txt</code> et
      <code class="filename">README.TXT</code> sont deux fichiers
      séparés.  FreeBSD n'utilise pas l'extension
      (<code class="filename">.txt</code>) d'un fichier pour déterminer
      si ce fichier est un programme, un document ou une autre forme
      de donnée.</p><p>Les fichiers sont stockés dans des
      répertoires.  Un répertoire peut ne contenir aucun
      fichier, ou en contenir plusieurs centaines.  Un
      répertoire peut également contenir d'autre
      répertoires, vous permettant de construire une
      hiérarchie de répertoires à
      l'intérieur d'un autre.  Cela rend plus simple
      l'organisation de vos données.</p><p>Les fichiers et les répertoires sont
      référencés en donnant le nom du fichier ou
      du répertoire, suivi par un slash, <code class="literal">/</code>,
      suivi par tout nom de répertoire nécessaire.  Si
      vous avez un répertoire <code class="filename">foo</code>, qui
      contient le répertoire <code class="filename">bar</code>, qui
      contient le fichier <code class="filename">readme.txt</code>, alors le
      nom complet, ou <em class="firstterm">chemin</em>
      (&#8220;path&#8221;) vers le fichier est
      <code class="filename">foo/bar/readme.txt</code>.</p><p>Les répertoires et les fichiers sont stockés
      sur un système de fichiers.  Chaque système de
      fichiers contient à son niveau le plus haut un
      répertoire appelé <em class="firstterm">répertoire
      racine</em> pour ce système de fichiers.  Ce
      répertoire racine peut alors contenir les autres
      répertoires.</p><p>Jusqu'ici cela est probablement semblable à n'importe
      quel autre système d'exploitation que vous avez pu avoir
      utilisé.  Il y a quelques différences: par
      exemple, <span class="trademark">MS-DOS</span>® utilise <code class="literal">\</code> pour séparer
      les noms de fichier et de répertoire, alors que MacOS
      utilise <code class="literal">:</code>.</p><p>FreeBSD n'utilise pas de lettre pour les lecteurs, ou
      d'autres noms de disque dans le chemin.  Vous n'écrirez
      pas <code class="filename">c:/foo/bar/readme.txt</code> sous
      FreeBSD.</p><p>Au lieu de cela, un système de fichiers est
      désigné comme <em class="firstterm">système de
      fichiers racine</em>.  La racine du système de
      fichiers racine est représentée par un
      <code class="literal">/</code>. Tous les autres systèmes de
      fichiers sont alors <em class="firstterm">montés</em> sous le
      système de fichiers racine.  Peu importe le nombre de
      disques que vous avez sur votre système FreeBSD, chaque
      répertoire apparaît comme faisant partie du
      même disque.</p><p>Supposez que vous avez trois systèmes de fichiers,
      appelés <code class="literal">A</code>, <code class="literal">B</code>, et
      <code class="literal">C</code>.  Chaque système de fichiers
      possède un répertoire racine, qui contient deux
      autres répertoires, nommés <code class="literal">A1</code>,
      <code class="literal">A2</code> (et respectivement <code class="literal">B1</code>,
      <code class="literal">B2</code> et <code class="literal">C1</code>,
      <code class="literal">C2</code>).</p><p>Appelons <code class="literal">A</code> le système de fichiers
      racine.  Si vous utilisiez la commande <code class="command">ls</code>
      pour visualiser le contenu de ce répertoire, vous verriez
      deux sous-répertoires, <code class="literal">A1</code> et
      <code class="literal">A2</code>.  L'arborescence des répertoires
      ressemblera à ceci:</p><div class="mediaobject"><img src="install/example-dir1.png" /></div><p>Un système de fichiers doit être monté
      dans un répertoire d'un autre système de fichiers.
      Supposez maintenant que vous montez le système de
      fichiers <code class="literal">B</code> sur le répertoire
      <code class="literal">A1</code>.  Le répertoire racine de
      <code class="literal">B</code> remplace <code class="literal">A1</code>, et les
      répertoires de <code class="literal">B</code> par conséquent
      apparaissent:</p><div class="mediaobject"><img src="install/example-dir2.png" /></div><p>Tout fichier de <code class="literal">B1</code> ou
      <code class="literal">B2</code> peut être atteint avec le chemin
      <code class="filename">/A1/B1</code> ou <code class="filename">/A1/B2</code> si
      nécessaire.  Tous les fichiers qui étaient dans
      <code class="filename">A1</code> ont été temporairement
      cachés.  Ils réapparaîtront si
      <code class="literal">B</code> est
      <em class="firstterm">démonté</em> de A.</p><p>Si <code class="literal">B</code> a été monté sur
      <code class="literal">A2</code> alors le diagramme sera semblable à
      celui-ci:</p><div class="mediaobject"><img src="install/example-dir3.png" /></div><p>et les chemins seront <code class="filename">/A2/B1</code> et
      respectivement <code class="filename">/A2/B2</code>.</p><p>Les systèmes de fichiers peuvent être
      montés au sommet d'un autre.  En continuant l'exemple
      précédent, le système de fichiers
      <code class="literal">C</code> pourrait être monté au sommet
      du répertoire <code class="literal">B1</code> dans le
      système de fichiers <code class="literal">B</code>, menant à
      cet arrangement:</p><div class="mediaobject"><img src="install/example-dir4.png" /></div><p>Où <code class="literal">C</code> pourrait être
      monté directement sur le système de fichiers
      <code class="literal">A</code>, sous le répertoire
      <code class="literal">A1</code>:</p><div class="mediaobject"><img src="install/example-dir5.png" /></div><p>Si vous êtes familier de <span class="trademark">MS-DOS</span>®, ceci est semblable, bien
      que pas identique, à la commande
      <code class="command">join</code>.</p><p>Ce n'est normalement pas quelque chose qui doit vous
      préoccuper.  Généralement vous créez
      des systèmes de fichiers à l'installation de
      FreeBSD et décidez où les monter, et ensuite ne
      les modifiez jamais à moins que vous ajoutiez un nouveau
      disque.</p><p>Il est tout à fait possible de n'avoir qu'un seul
      grand système de fichiers racine, et de ne pas en
      créer d'autres.  Il y a quelques inconvénients
      à cette approche, et un avantage.</p><div class="itemizedlist"><div class="itemizedlist-title">Avantages des systèmes de fichiers
	multiples</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les différents systèmes de fichiers
	  peuvent avoir différentes <em class="firstterm">options de
	  montage</em>.  Par exemple, avec une planification
	  soigneuse, le système de fichiers racine peut
	  être monté en lecture seule, rendant impossible
	  tout effacement par inadvertance ou édition de fichier
	  critique.  La séparation des systèmes de
	  fichiers inscriptibles par l'utilisateur permet leur montage
	  en mode <em class="firstterm">nosuid</em>; cette option
	  empêche les bits
	  <em class="firstterm">suid</em>/<em class="firstterm">guid</em> des
	  exécutables stockés sur ce système de
	  fichiers de prendre effet, améliorant peut-être
	  la sécurité.</p></li><li class="listitem"><p>FreeBSD optimise automatiquement la disposition des
	  fichiers sur un système de fichiers, selon la
	  façon dont est utilisé le système de
	  fichiers.  Aussi un système de fichiers contenant
	  beaucoup de petits fichiers qui sont écrits
	  fréquemment aura une optimisation différente
	  à celle d'un système contenant moins, ou de plus
	  gros fichiers.  En ayant un seul grand système de
	  fichiers cette optimisation est perdue.</p></li><li class="listitem"><p>Les systèmes de fichiers de FreeBSD sont
	  très robustes même en cas de coupure secteur.
	  Cependant une coupure secteur à un moment critique
	  pourrait toujours endommager la structure d'un système
	  de fichiers.  En répartissant vos données sur
	  des systèmes de fichiers multiples il est plus probable
	  que le système redémarre, vous facilitant la
	  restauration des données à partir de sauvegardes
	  si nécessaire.</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Avantage d'un système de fichiers unique</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les systèmes de fichiers ont une taille fixe.  Si
	  vous créez un système de fichiers à
	  l'installation de FreeBSD et que vous lui donnez une taille
	  spécifique, vous pouvez plus tard vous apercevoir que
	  vous avez besoin d'une partition plus grande.  Cela n'est pas
	  facilement faisable sans sauvegardes, recréation du
	  système de fichiers, et enfin restauration des
	  données.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD dispose d'une commande,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">growfs</span>(8)</span></a>, qui permettra d'augmenter la taille d'un
	    système de fichiers au vol, supprimant cette
	    limitation.</p></div></li></ul></div><p>Les systèmes de fichiers sont contenus dans des
      partitions.  Cela n'a pas la même signification que
      l'utilisation commune du terme partition (par exemple une
      partition
      <span class="trademark">MS-DOS</span>®), en raison de l'héritage Unix de FreeBSD.
      Chaque partition est identifiée par une lettre de
      <code class="literal">a</code> à <code class="literal">h</code>.  Chaque
      partition ne contient qu'un seul système de fichiers,
      cela signifie que les systèmes de fichiers sont souvent
      décrits soit par leur point de montage typique dans la
      hiérarchie du système de fichiers, soit par la
      lettre de la partition qui les contient.</p><p>FreeBSD utilise aussi de l'espace disque pour
      <em class="firstterm">l'espace de pagination</em>
      (&#8220;swap&#8221;).  L'espace de pagination fournit à
      FreeBSD la <em class="firstterm">mémoire virtuelle</em>.
      Cela permet à votre ordinateur de se comporter comme s'il
      disposait de beaucoup plus de mémoire qu'il n'en a
      réellement.  Quand FreeBSD vient à manquer de
      mémoire il déplace certaines données qui ne
      sont pas actuellement utilisées vers l'espace de
      pagination, et les rapatrie (en déplaçant quelque
      chose d'autre) quand il en a besoin.</p><p>Quelques partitions sont liées à certaines
      conventions.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Partition</th><th>Convention</th></tr></thead><tbody valign="top"><tr><td valign="top"><code class="literal">a</code></td><td valign="top">Contient normalement le système de
	      fichiers racine</td></tr><tr><td valign="top"><code class="literal">b</code></td><td valign="top">Contient normalement l'espace de pagination</td></tr><tr><td valign="top"><code class="literal">c</code></td><td valign="top">Normalement de la même taille que la tranche
	      (&#8220;slice&#8221;) contenant les partitions.  Cela
	      permet aux utilitaires devant agir sur
	      l'intégralité de la tranche (par exemple
	      un analyseur de blocs défectueux) de travailler
	      sur la partition <code class="literal">c</code>.  Vous ne devriez
	      normalement pas créer de système de
	      fichiers sur cette partition.</td></tr><tr><td valign="top"><code class="literal">d</code></td><td valign="top">La partition <code class="literal">d</code> a eu dans le
	      passé une signification particulière, ce
	      n'est plus le cas aujourd'hui, et <code class="literal">d</code>
	      pourra être utilisée comme une partition
	      classique.</td></tr></tbody></table></div><p>Chaque partition contenant un système de fichiers est
      stockée dans ce que FreeBSD appelle une
      <em class="firstterm">tranche</em> (&#8220;slice&#8221;). Tranche -
      &#8220;slice&#8221; est le terme FreeBSD pour ce qui
      est communément appelé partition,
      et encore une fois, cela en raison des fondations Unix de
      FreeBSD.  Les tranches sont numérotées, en partant
      de 1, jusqu'à 4.</p><a id="idp68410448" class="indexterm"></a><a id="idp68410960" class="indexterm"></a><a id="idp68411472" class="indexterm"></a><a id="idp68412112" class="indexterm"></a><p>Les numéros de tranche suivent le nom du
      périphérique, avec le préfixe
      <code class="literal">s</code>, et commencent à 1.  Donc
      &#8220;da0<span class="emphasis"><em>s1</em></span>&#8221; est la première
      tranche sur le premier disque SCSI.  Il ne peut y avoir que
      quatre tranches physiques sur un disque, mais vous pouvez avoir
      des tranches logiques dans des tranches physiques d'un type
      précis.  Ces tranches étendues sont
      numérotées à partir de 5, donc
      &#8220;ad0<span class="emphasis"><em>s5</em></span>&#8221; est la première
      tranche étendue sur le premier disque IDE.  Elles sont
      utilisées par des systèmes de fichiers qui
      s'attendent à occuper une tranche entière.</p><p>Les tranches, les disques &#8220;en mode
      dédié&#8221;, et les autres disques contiennent
      des <em class="firstterm">partitions</em>, qui sont
      représentées par des lettres allant de
      <code class="literal">a</code> à <code class="literal">h</code>.  Cette
      lettre est ajoutée au nom de périphérique,
      aussi &#8220;da0<span class="emphasis"><em>a</em></span>&#8221; est la partition a
      sur le premier disque da, qui est en &#8220;en mode
      dédié&#8221;.
      &#8220;ad1s3<span class="emphasis"><em>e</em></span>&#8221; est la
      cinquième partition de la troisième tranche du
      second disque IDE.</p><p>En conclusion chaque disque présent sur le
      système est identifié.  Le nom d'un disque
      commence par un code qui indique le type de disque, suivi d'un
      nombre, indiquant de quel disque il s'agit.  Contrairement aux
      tranches, la numérotation des disques commence à
      0.  Les codes communs que vous risquez de rencontrer sont
      énumérés dans le <a class="xref" href="#basics-dev-codes" title="Tableau 4.1. Codes des périphériques disques">Tableau 4.1, « Codes des périphériques disques »</a>.</p><p>Quand vous faites référence à une
      partition, FreeBSD exige que vous nommiez également la
      tranche et le disque contenant la partition, et quand vous
      faites référence à une tranche vous devrez
      également faire référence au nom du disque.
      On fait donc référence à une partition en écrivant le nom du disque,
      <code class="literal">s</code>, le numéro de la tranche, et enfin
      la lettre de la partition.  Des exemples sont donnés dans
      l'<a class="xref" href="#basics-disk-slice-part" title="Exemple 4.1. Exemples d'appellation de disques, tranches et partitions">Exemple 4.1, « Exemples d'appellation de disques, tranches et
      partitions »</a>.</p><p>L'<a class="xref" href="#basics-concept-disk-model" title="Exemple 4.2. Modèle conceptuel d'un disque">Exemple 4.2, « Modèle conceptuel d'un disque »</a> montre un
      exemple de l'organisation d'un disque qui devrait aider à
      clarifier les choses.</p><p>Afin d'installer FreeBSD vous devez tout d'abord configurer
      les tranches sur votre disque, ensuite créer les
      partitions dans la tranche que vous utiliserez pour FreeBSD, et
      alors créer un système de fichiers (ou espace de
      pagination) dans chaque partition, et décider de
      l'endroit où seront montés les systèmes de
      fichiers.</p><div class="table"><a id="basics-dev-codes"></a><div class="table-title">Tableau 4.1. Codes des périphériques disques</div><div class="table-contents"><table summary="Codes des périphériques disques" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Code</th><th>Signification</th></tr></thead><tbody><tr><td><code class="filename">ad</code></td><td>Disque ATAPI (IDE)</td></tr><tr><td><code class="filename">da</code></td><td>Disque SCSI</td></tr><tr><td><code class="filename">acd</code></td><td>CDROM ATAPI (IDE)</td></tr><tr><td><code class="filename">cd</code></td><td>CDROM SCSI</td></tr><tr><td><code class="filename">fd</code></td><td>Lecteur de disquette</td></tr></tbody></table></div></div><br class="table-break" /><div class="example"><a id="basics-disk-slice-part"></a><div class="example-title">Exemple 4.1. Exemples d'appellation de disques, tranches et
      partitions</div><div class="example-contents"><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom</th><th>Signification</th></tr></thead><tbody><tr><td><code class="literal">ad0s1a</code></td><td>Première partition (<code class="literal">a</code>)
		sur la première tranche (<code class="literal">s1</code>)
		du premier disque IDE
		(<code class="literal">ad0</code>).</td></tr><tr><td><code class="literal">da1s2e</code></td><td>Cinquième partition (<code class="literal">e</code>)
		sur la seconde tranche (<code class="literal">s2</code>) du
		deuxième disque SCSI
		(<code class="literal">da1</code>).</td></tr></tbody></table></div></div></div><br class="example-break" /><div class="example"><a id="basics-concept-disk-model"></a><div class="example-title">Exemple 4.2. Modèle conceptuel d'un disque</div><div class="example-contents"><p>Ce diagramme montre comment FreeBSD voit le premier disque
	IDE attaché au système.  Supposons que le disque
	a une capacité de 4 Go, et contient deux tranches
	de 2 Go (partitions <span class="trademark">MS-DOS</span>®).  La première tranche
	contient un disque <span class="trademark">MS-DOS</span>®, <code class="filename">C:</code>, et la
	seconde tranche contient une installation de FreeBSD.  Dans
	cet exemple l'installation de FreeBSD a trois partitions de données, et
	une partition de pagination.</p><p>Les trois partitions accueilleront chacune un
	système de fichiers.  La partition <code class="literal">a</code>
	sera utilisée en tant que système de fichiers
	racine, la partition <code class="literal">e</code> pour le contenu du
	répertoire <code class="filename">/var</code>, et
	<code class="literal">f</code> pour l'arborescence du répertoire
	<code class="filename">/usr</code>.</p><div class="mediaobject"><img src="install/disk-layout.png" /></div></div></div><br class="example-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mount-unmount"></a>4.6. Monter et démonter des systèmes de fichiers</h2></div></div></div><p>Le système de fichiers peut être vu comme un arbre
      enraciné sur le répertoire <code class="filename">/</code>.
      <code class="filename">/dev</code>, <code class="filename">/usr</code>, et les
      autres répertoires dans le répertoire racine sont des
      branches, qui peuvent avoir leurs propres branches, comme
      <code class="filename">/usr/local</code>, et ainsi de suite.</p><a id="idp68458448" class="indexterm"></a><p>Il y a diverses raisons pour héberger certains de ces
      répertoires sur des systèmes de fichiers
      séparés.
      <code class="filename">/var</code> contient les répertoires
      <code class="filename">log/</code>, <code class="filename">spool/</code>, et divers
      types de fichiers temporaires, et en tant que tels, peuvent voir
      leur taille augmenter de façon importante.
      Remplir le système de
      fichiers racine n'est pas une bonne idée, aussi séparer
      <code class="filename">/var</code> de <code class="filename">/</code> est souvent
      favorable.</p><p>Une autre raison courante de placer certains répertoires sur
      d'autres systèmes de fichiers est s'ils doivent être
      hébergés sur
      des disques physiques séparés, ou sur des disques virtuels
      séparés, comme les <a class="link" href="#network-nfs" title="29.3. Système de fichiers réseau (NFS)">systèmes de
      fichiers réseau</a>, ou les lecteurs de CDROM.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-fstab"></a>4.6.1. Le fichier <code class="filename">fstab</code></h3></div></div></div><a id="idp68463312" class="indexterm"></a><p>Durant le <a class="link" href="#boot" title="Chapitre 13. Processus de démarrage de FreeBSD">processus de
	démarrage</a>, les systèmes de fichiers listés
	dans <code class="filename">/etc/fstab</code> sont automatiquement
	montés (à moins qu'il ne soient listés avec
	l'option <code class="option">noauto</code>).</p><p>Le fichier <code class="filename">/etc/fstab</code> contient une
	liste de lignes au format suivant:</p><pre class="programlisting"><em class="replaceable"><code>device</code></em>       <em class="replaceable"><code>/mount-point</code></em> <em class="replaceable"><code>fstype</code></em>     <em class="replaceable"><code>options</code></em>      <em class="replaceable"><code>dumpfreq</code></em>     <em class="replaceable"><code>passno</code></em></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">device</code></span></dt><dd><p>Un nom de périphérique (qui devrait exister),
	      comme expliqué dans la
	      <a class="xref" href="#disks-naming" title="19.2. Noms des périphériques">Section 19.2, « Noms des périphériques »</a>.</p></dd><dt><span class="term"><code class="literal">mount-point</code></span></dt><dd><p>Un répertoire (qui devrait exister), sur
	    lequel sera monté le système de fichier.</p></dd><dt><span class="term"><code class="literal">fstype</code></span></dt><dd><p>Le type de système de fichiers à
	      indiquer à
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Le système de fichiers par défaut de
	      FreeBSD est l'<code class="literal">ufs</code>.</p></dd><dt><span class="term"><code class="literal">options</code></span></dt><dd><p>Soit <code class="option">rw</code> pour des systèmes de
	      fichiers à lecture-écriture, soit
	      <code class="option">ro</code> pour des systèmes de fichiers
	      à lecture seule, suivi par toute
	      option qui peut s'avérer nécessaire.  Une option
	      courante est <code class="option">noauto</code> pour les systèmes de
	      fichiers qui ne sont normalement pas montés durant la
	      séquence de démarrage.  D'autres options sont
	      présentées dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.</p></dd><dt><span class="term"><code class="literal">dumpfreq</code></span></dt><dd><p>C'est utilisé par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> pour
	     déterminer quels systèmes de fichiers
	     nécessitent
	     une sauvegarde.  Si ce champ est absent, une valeur
	     de zéro est supposée.</p></dd><dt><span class="term"><code class="literal">passno</code></span></dt><dd><p>Ceci détermine l'ordre dans lequel les systèmes
	     de fichiers devront être vérifiés.
	     Les systèmes de fichiers
	     qui doivent être ignorés devraient avoir leur
	     <code class="literal">passno</code> positionné à zéro.
	     Le système de fichiers racine (qui doit être
	     vérifié avant tout le reste) devrait avoir son
	     <code class="literal">passno</code> positionné à un,
	     et les options <code class="literal">passno</code> des autres
	     systèmes fichiers devraient être positionnées
	     à des valeurs supérieures à un.  Si plus
	     d'un système de fichiers ont le même
	     <code class="literal">passno</code> alors <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> essaiera
	     de vérifier les systèmes de fichiers
	     en parallèle si c'est possible.</p></dd></dl></div><p>Consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> pour plus
	d'information sur le format du fichier
	<code class="filename">/etc/fstab</code> et des options qu'il
	contient.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mount"></a>4.6.2. La commande <code class="command">mount</code></h3></div></div></div><a id="idp68501328" class="indexterm"></a><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> est ce qui est finalement
	utilisé pour monter des systèmes de fichiers.</p><p>Dans sa forme la plus simple, vous utilisez:</p><div class="informalexample"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount device mountpoint</code></strong></pre></div><p>Il y beaucoup d'options, comme mentionné dans la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>, mais les plus courantes sont:</p><div class="variablelist"><div class="variablelist-title">Options de montage</div><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>Monte tous les systèmes de fichiers listés dans
	      <code class="filename">/etc/fstab</code>.  Exception faite de ceux
	      marqués comme &#8220;noauto&#8221;, ou exclus par
	      le drapeau <code class="option">-t</code>, ou encore ceux qui sont
	      déjà montés.</p></dd><dt><span class="term"><code class="option">-d</code></span></dt><dd><p>Tout effectuer à l'exception de l'appel
	      système de montage réel.  Cette option est utile
	      conjointement avec le drapeau <code class="option">-v</code> pour
	      déterminer ce que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> est en train
	      d'essayer de faire.</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>Force le montage d'un système de fichiers non propre
	      (dangereux), ou force la révocation de l'accès en
	      écriture quand on modifie l'état de montage d'un
	      système de fichiers de l'accès
	      lecture-écriture à l'accès
	      lecture seule.</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>Monte le système de fichiers en lecture seule.  C'est
	      identique à l'utilisation de l'argument
	      <code class="option">ro</code> (<code class="option">rdonly</code> pour les
	      versions de FreeBSD antérieures à la 5.2)
	      avec l'option
	      <code class="option">-o</code>.</p></dd><dt><span class="term"><code class="option">-t</code>
	    <em class="replaceable"><code>fstype</code></em></span></dt><dd><p>Monte le système de fichiers comme étant
	    du type de système donné, ou monte
	      seulement les systèmes de fichiers du type donné,
	      si l'option <code class="option">-a</code> est précisée.</p><p>&#8220;ufs&#8221; est le type de système de
	      fichiers par défaut.</p></dd><dt><span class="term"><code class="option">-u</code></span></dt><dd><p>Mets à jour les options de montage sur le
	      système de fichiers.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>Rends la commande prolixe.</p></dd><dt><span class="term"><code class="option">-w</code></span></dt><dd><p>Monte le système de fichiers en
	      lecture-écriture.</p></dd></dl></div><p>L'option <code class="option">-o</code> accepte une liste d'options
	séparées par des virgules, dont les suivantes:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">noexec</span></dt><dd><p>Ne pas autoriser l'exécution de binaires sur ce
		système de fichiers.  C'est également une
		option de sécurité utile.</p></dd><dt><span class="term">nosuid</span></dt><dd><p>Ne pas prendre en compte les indicateurs setuid ou setgid
	      sur le système de fichiers.  C'est également une
	      option de sécurité utile.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-umount"></a>4.6.3. La commande <code class="command">umount</code></h3></div></div></div><a id="idp68547280" class="indexterm"></a><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> prend, comme paramètre, un des
	points de montage, un nom de périphérique, ou
	l'option <code class="option">-a</code> ou <code class="option">-A</code>.</p><p>Toutes les formes acceptent <code class="option">-f</code> pour forcer
	de démontage, et <code class="option">-v</code> pour le mode
	prolixe.  Soyez averti que l'utilisation de <code class="option">-f</code>
	n'est généralement pas une bonne idée.
	Démonter de force des systèmes de fichiers pourrait
	faire planter l'ordinateur ou endommager les données sur
	le système de fichiers.</p><p>Les options <code class="option">-a</code> et <code class="option">-A</code>
	sont utilisées pour démonter tous les systèmes
	de fichiers actuellement montés, éventuellement
	modifié par les types de systèmes de fichiers
	listés après l'option <code class="option">-t</code>.
	Cependant l'option <code class="option">-A</code>, n'essaye pas de
	démonter le système de fichiers racine.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-processes"></a>4.7. Processus</h2></div></div></div><p>FreeBSD est un système d'exploitation multi-tâches.
      Cela veut dire qu'il semble qu'il y ait plus d'un programme
      fonctionnant à
      la fois.  Tout programme fonctionnant à un moment donné est
      appelé un <em class="firstterm">processus</em>.  Chaque commande que
      vous utiliserez lancera au moins un nouveau processus, et il y a
      de nombreux processus système qui tournent constamment, maintenant
      ainsi les fonctionnalités du système.</p><p>Chaque processus est identifié de façon unique par
      un nombre appelé <em class="firstterm">process ID</em> (identifiant de
      processus), ou <em class="firstterm">PID</em>, et, comme pour les fichiers,
      chaque processus possède également un propriétaire
      et un groupe.  Les informations sur le propriétaire et le groupe
      sont utilisées pour déterminer quels fichiers et
      périphériques sont accessibles au processus, en utilisant le
      principe de permissions de fichiers abordé plus tôt.
      La plupart
      des processus ont également un processus parent.  Le processus
      parent est le processus qui les a lancés.  Par exemple, si vous
      tapez des commandes sous un interpréteur de commandes, alors
      l'interpréteur de commandes est un processus, et toute commande
      que vous lancez est aussi un processus.  Chaque processus que vous
      lancez de cette manière aura votre interpréteur de
      commandes comme processus parent.
      Une exception à cela est le processus spécial
      appelé <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.  <code class="command">init</code> est
      toujours le premier processus, donc son PID est toujours 1.
      <code class="command">init</code> est lancé automatiquement par le noyau au
      démarrage de FreeBSD.</p><p>Deux commandes sont particulièrement utiles pour voir les
      processus sur le système, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a>.  La
      commande <code class="command">ps</code> est utilisée pour afficher une liste statique
      des processus tournant actuellement, et peut donner leur PID, la
      quantité de mémoire qu'ils utilisent, la ligne de
      commande par l'intermédiaire de laquelle ils ont
      été lancés, et ainsi de suite.
      La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> affiche tous les processus, et actualise
      l'affichage régulièrement, de sorte que vous puissiez voir
      de façon intéractive ce que fait l'ordinateur.</p><p>Par défaut, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> n'affiche que les commandes que vous
      faites tourner et dont vous êtes le propriétaire.  Par
      exemple:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps</code></strong>
  PID  TT  STAT      TIME COMMAND
  298  p0  Ss     0:01.10 tcsh
 7078  p0  S      2:40.88 xemacs mdoc.xsl (xemacs-21.1.14)
37393  p0  I      0:03.11 xemacs freebsd.dsl (xemacs-21.1.14)
48630  p0  S      2:50.89 /usr/local/lib/netscape-linux/navigator-linux-4.77.bi
48730  p0  IW     0:00.00 (dns helper) (navigator-linux-)
72210  p0  R+     0:00.00 ps
  390  p1  Is     0:01.14 tcsh
 7059  p2  Is+    1:36.18 /usr/local/bin/mutt -y
 6688  p3  IWs    0:00.00 tcsh
10735  p4  IWs    0:00.00 tcsh
20256  p5  IWs    0:00.00 tcsh
  262  v0  IWs    0:00.00 -tcsh (tcsh)
  270  v0  IW+    0:00.00 /bin/sh /usr/X11R6/bin/startx -- -bpp 16
  280  v0  IW+    0:00.00 xinit /home/nik/.xinitrc -- -bpp 16
  284  v0  IW     0:00.00 /bin/sh /home/nik/.xinitrc
  285  v0  S      0:38.45 /usr/X11R6/bin/sawfish</pre><p>Comme vous pouvez le voir dans cet exemple, la sortie de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> est organisée en un certain nombre de colonnes.
      <code class="literal">PID</code> est l'identifiant de processus discuté plus
      tôt.  Les PIDs sont assignés à partir de 1, et
      vont jusqu'à 99999,
      et puis repassent à 1 quand le maximum est atteint
      (un PID n'est pas réassigné s'il est
      déjà utilisé).
      La colonne <code class="literal">TT</code> donne le terminal sur lequel tourne le
      programme, et peut être pour le moment ignoré sans risque.
      <code class="literal">STAT</code> affiche l'état du programme, peut
      être également ignoré.
      <code class="literal">TIME</code> est la durée d'utilisation du CPU&#8212;ce
      n'est généralement pas le temps écoulé depuis
      que vous avez lancé le programme, comme la plupart des programmes passent
      beaucoup de temps à attendre que certaines choses se produisent
      avant qu'ils n'aient besoin de dépenser du temps CPU.
      Et enfin, <code class="literal">COMMAND</code> est la ligne de commande qui a
      été utilisée lors du lancement du programme.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> supporte un certain nombre d'options différentes
      pour modifier les informations affichées.  Un des ensembles
      d'options les plus utiles est <code class="literal">auxww</code>.
      <code class="option">a</code> affiche l'information au sujet de tous les
      processus tournant, et pas seulement les vôtres.
      <code class="option">u</code> donne le nom de l'utilisateur du propriétaire
      du processus, ainsi que l'utilisation de la mémoire.
      <code class="option">x</code> affiche des informations sur les processus
      &#8220;daemon&#8221;, et <code class="option">ww</code> oblige <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> à
      afficher la ligne de commande complète pour chaque processus, plutôt que de la
      tronquer quand elle est trop longue pour tenir à
      l'écran.</p><p>La sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> est semblable.  Un extrait de session
      ressemble à ceci:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>top</code></strong>
last pid: 72257;  load averages:  0.13,  0.09,  0.03    up 0+13:38:33  22:39:10
47 processes:  1 running, 46 sleeping
CPU states: 12.6% user,  0.0% nice,  7.8% system,  0.0% interrupt, 79.7% idle
Mem: 36M Active, 5256K Inact, 13M Wired, 6312K Cache, 15M Buf, 408K Free
Swap: 256M Total, 38M Used, 217M Free, 15% Inuse

  PID USERNAME PRI NICE  SIZE    RES STATE    TIME   WCPU    CPU COMMAND
72257 nik       28   0  1960K  1044K RUN      0:00 14.86%  1.42% top
 7078 nik        2   0 15280K 10960K select   2:54  0.88%  0.88% xemacs-21.1.14
  281 nik        2   0 18636K  7112K select   5:36  0.73%  0.73% XF86_SVGA
  296 nik        2   0  3240K  1644K select   0:12  0.05%  0.05% xterm
48630 nik        2   0 29816K  9148K select   3:18  0.00%  0.00% navigator-linu
  175 root       2   0   924K   252K select   1:41  0.00%  0.00% syslogd
 7059 nik        2   0  7260K  4644K poll     1:38  0.00%  0.00% mutt
...</pre><p>La sortie est divisée en deux sections.
      L'entête (les cinq premières lignes) donne le PID du
      dernier processus lancé, la charge système moyenne
      (qui est une mesure de l'occupation du système), la durée
      de fonctionnement du système (le temps écoulé
      depuis le dernier redémarrage), et l'heure actuelle.  Les autres
      éléments de l'entête concernent le nombre de
      processus en fonctionnement (47 dans notre cas), combien d'espace
      mémoire et d'espace de pagination sont occupés, et
      combien de temps le système passe dans les différents
      états du CPU.</p><p>En dessous il y a une série de colonnes contenant des
      informations semblables à celles données par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.
      Comme précédemment vous pouvez lire le PID, le nom
      d'utilisateur, la quantité de temps CPU consommée, et
      la commande qui a été lancée.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> vous
      affiche par défaut la quantité d'espace mémoire
      utilisée par chaque processus.  Cela est divisé en deux
      colonnes, une pour la quantité totale, et une autre pour la
      quantité résidente&#8212;la quantité totale
      représente l'espace mémoire dont a eu besoin l'application,
      et la quantité résidente représente
      l'espace qui est en fait utilisé actuellement.  Dans cet exemple
      vous pouvez voir que <span class="application"><span class="trademark">Netscape</span>®</span> a
      exigé presque 30 Mo de RAM, mais
      utilise actuellement seulement 9Mo.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> actualise l'affichage toutes les deux secondes;
      cela peut être modifié avec l'option
      <code class="option">s</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-daemons"></a>4.8. Daemons, signaux, et comment tuer un processus</h2></div></div></div><p>Quand vous utilisez un éditeur il est facile de le
      contrôler, de lui dire de charger des fichiers, et ainsi de suite.
      Vous pouvez faire cela parce que l'éditeur fournit les
      possibilités de le faire, et parce qu'un éditeur est
      attaché à un <em class="firstterm">terminal</em>.
      Certains programmes ne sont pas conçus pour fonctionner avec
      un dialogue constant avec l'utilisateur, et donc ils se
      déconnectent du terminal à la première occasion.
      Par exemple, un serveur web passe son temps à répondre
      aux requêtes web, il n'attend normalement pas d'entrée de
      votre part.  Les programmes qui transportent le courrier
      électronique de site en site sont un autre exemple de cette
      classe d'application.</p><p>Nous appelons ces programmes des
      <em class="firstterm">daemons</em> (démons).  Les
      &#8220;daemons&#8221; étaient des personnages de la mythologie
      Grecque: ni bon ni mauvais, c'étaient de petits esprits serviteurs
      qui, généralement, ont été à l'origine
      de choses utiles à l'humanité,
      un peu comme les serveurs web ou de messagerie d'aujourd'hui nous
      sont utiles.  C'est pourquoi la mascotte BSD a été, pendant
      longtemps, un démon à l'apparence joyeuse portant des
      chaussures de tennis et une fourche.</p><p>Il existe une convention pour nommer les programmes qui
      fonctionnent normalement en tant que daemons qui est d'utiliser
      une terminaison en &#8220;d&#8221;.
      <span class="application">BIND</span> est le &#8220;Berkeley Internet Name
      Domain&#8221;, mais le programme réel qui est exécuté
      s'appelle <code class="command">named</code>); le programme
      correspondant au serveur web <span class="application">Apache</span> est
      appelé <code class="command">httpd</code>; le daemon de gestion de la file
      d'attente de l'imprimante est <code class="command">lpd</code>, et ainsi de
      suite.  C'est une convention, mais pas une obligation pure et
      simple; par exemple le daemon principal de gestion du courrier
      électronique pour l'application
      <span class="application">Sendmail</span> est appelé
      <code class="command">sendmail</code>, et non pas <code class="command">maild</code>,
      comme vous pourriez l'imaginer.</p><p>Parfois vous devrez communiquer avec un processus daemon.
      Une manière de procéder est de lui (ou à tout processus en cours
      d'exécution) envoyer ce que l'on appelle un
      <em class="firstterm">signal</em>.  Il existe un certain
      nombre de signaux différents que vous pouvez
      envoyer&#8212;certains d'entre eux ont une signification précise,
      d'autres sont interprétés par l'application, et la
      documentation de l'application vous indiquera comment l'application
      interprète ces signaux.  Vous ne pouvez envoyer de signaux
      qu'aux processus dont vous êtes le propriétaire.
      Si vous envoyez un signal à un
      processus appartenant à quelqu'un d'autre avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a>
      ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">kill</span>(2)</span></a>, vous obtiendrez un refus de permission.  Il existe
      une exception à cela: l'utilisateur <code class="systemitem">root</code>, qui
      peut envoyer des signaux aux processus de chacun.</p><p>Dans certain cas FreeBSD enverra également aux applications
      des signaux.  Si une application est mal écrite, et tente
      d'accéder à une partie de mémoire à
      laquelle elle n'est pas supposée avoir accès, FreeBSD
      envoie au processus le signal de
      <em class="firstterm">violation de segmentation</em>
      (<code class="literal">SIGSEGV</code>).  Si une application a utilisé
      l'appel système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=alarm&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">alarm</span>(3)</span></a> pour être avertie
      dès qu'une période de temps précise est
      écoulée alors lui sera envoyé le signal d'alarme
      (<code class="literal">SIGALRM</code>), et ainsi de suite.</p><p>Deux signaux peuvent être utilisés pour arrêter
      un processus, <code class="literal">SIGTERM</code> et <code class="literal">SIGKILL</code>.
      <code class="literal">SIGTERM</code> est la manière polie de tuer un
      processus; le processus peut <span class="emphasis"><em>attraper</em></span> le signal,
      réaliser que vous désirez qu'il se termine, fermer les
      fichiers de trace qu'il a peut-être ouvert, et
      généralement
      finir ce qu'il était en train de faire juste avant la demande
      d'arrêt.  Dans certains cas un processus peut ignorer un
      <code class="literal">SIGTERM</code> s'il est au milieu d'une tâche qui ne
      peut être interrompue.</p><p><code class="literal">SIGKILL</code> ne peut être ignoré par un
      processus.  C'est le signal &#8220;Je me fiche de ce que vous
      faites, arrêtez immédiatement&#8221;.  Si vous envoyez un
      <code class="literal">SIGKILL</code> à un processus alors FreeBSD
      stoppera le processus<a href="#ftn.idp68608848" class="footnote" id="idp68608848"><sup class="footnote">[4]</sup></a>.</p><p>Les autres signaux que vous pourriez avoir envie d'utiliser
      sont <code class="literal">SIGHUP</code>, <code class="literal">SIGUSR1</code>, et
      <code class="literal">SIGUSR2</code>.  Ce sont des signaux d'usage
      général, et différentes applications se
      comporteront différemment quand ils
      sont envoyés.</p><p>Supposez que vous avez modifié le fichier de configuration de
      votre serveur web&#8212;vous voudriez dire à votre serveur web de
      relire son fichier de configuration.  Vous pourriez arrêter et
      relancer <code class="command">httpd</code>, mais il en résulterait une
      brève période d'indisponibilité de votre serveur
      web, ce qui peut être indésirable.
      La plupart des daemons sont écrits pour répondre
      au signal <code class="literal">SIGHUP</code> en relisant leur fichier de
      configuration.  Donc au lieu de tuer et relancer
      <code class="command">httpd</code> vous lui enverriez le signal
      <code class="literal">SIGHUP</code>.  Parce qu'il n'y a pas de manière
      standard de répondre à ces signaux, différents
      daemons auront différents comportements, soyez sûr
      de ce que vous faites et lisez
      la documentation du daemon en question.</p><p>Les signaux sont envoyés en utilisant la commande
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a>, comme cet exemple le montre:</p><div class="procedure"><a id="idp68639184"></a><div class="procedure-title">Procédure 4.1. Envoyer un signal à un processus</div><p>Cet exemple montre comment envoyer un signal à
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.  Le fichier de configuration d'<code class="command">inetd</code> est
	<code class="filename">/etc/inetd.conf</code>, et <code class="command">inetd</code> relira ce
	fichier de configuration quand un signal
	<code class="literal">SIGHUP</code> est envoyé.</p><ol class="procedure" type="1"><li class="step"><p>Trouvez l'identifiant du processus (PID) auquel vous
	  voulez envoyer le signal.  Faites-le en employant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>
	  et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a>.  La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a> est utilisée pour
	  rechercher dans le résultat la chaîne de
	  caractères que
	  vous spécifiez.  Cette commande est lancée en tant
	  qu'utilisateur normal, et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> est lancé en tant que
	  <code class="systemitem">root</code>, donc les options <code class="option">ax</code>
	  doivent être passées à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ps -ax | grep inetd</code></strong>
  198  ??  IWs    0:00.00 inetd -wW</pre><p>Donc le PID d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> est 198.  Dans certains cas la
	  commande <code class="literal">grep inetd</code> pourrait aussi
	  apparaître dans le résultat.  C'est à
	  cause de la façon dont
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> recherche la liste des processus en
	  fonctionnement.</p></li><li class="step"><p>Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> pour envoyer le signal.  Etant donné
	  qu'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> tourne sous les droits de l'utilisateur
	  <code class="systemitem">root</code> vous devez utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> pour
	  devenir, en premier lieu, <code class="systemitem">root</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code>
<code class="prompt">#</code> <strong class="userinput"><code>/bin/kill -s HUP 198</code></strong></pre><p>Comme la plupart des commandes <span class="trademark">UNIX</span>®, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> n'affichera
	  rien si la commande est couronnée de succès.  Si vous
	  envoyez un signal à un processus dont vous n'êtes pas le
	  propriétaire alors vous verrez <span class="errorname">kill:
	  <em class="replaceable"><code>PID</code></em>: Operation not
	  permitted</span>.  Si vous avez fait une erreur dans le
	  PID, vous enverrez le signal soit à un mauvais processus, ce
	  qui peut être mauvais, soit, si vous êtes chanceux, vous
	  enverrez le signal à un PID qui n'est pas actuellement
	  utilisé, et vous verrez <span class="errorname">kill:
	  <em class="replaceable"><code>PID</code></em>: No such
	  process</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Pourquoi utiliser <code xmlns="http://www.w3.org/1999/xhtml" class="command">/bin/kill</code>?: </h3><p xmlns="http://www.w3.org/1999/xhtml">De nombreux interpréteurs de commandes fournissent la
	    commande <code class="command">kill</code> comme commande interne;
	    c'est à dire, que l'interpréteur de commandes enverra
	    directement le signal, plutôt que de lancer
	    <code class="filename">/bin/kill</code>.  Cela peut être utile,
	    cependant les différents interpréteurs ont une syntaxe
	    différente pour spécifier le nom du signal à
	    envoyer.
	    Plutôt que de tenter de les apprendre toutes, il peut
	    être plus simple de juste employer directement la commande
	    <code class="command">/bin/kill
	    ...</code>.</p></div></li></ol></div><p>Envoyer d'autres signaux est très semblable, substituez juste
      <code class="literal">TERM</code> ou <code class="literal">KILL</code> dans la ligne
      de commande si nécessaire.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tuer au hasard des processus sur le système peut
	être une mauvaise idée.
	En particulier, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, processus à
	l'identifiant 1, qui est très particulier.  Lancer la commande
	<code class="command">/bin/kill -s KILL 1</code> est une manière
	rapide d'arrêter votre système.  Vérifiez
	<span class="emphasis"><em>toujours</em></span> à deux fois les arguments que vous
	utilisez avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a> <span class="emphasis"><em>avant</em></span> d'appuyer
	sur <span class="keycap"><strong>Entrée</strong></span>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="shells"></a>4.9. Interpréteurs de commandes - &#8220;Shells&#8221;</h2></div></div></div><a id="idp68682064" class="indexterm"></a><a id="idp68682704" class="indexterm"></a><p>Sous FreeBSD, beaucoup du travail quotidien est effectué sous
      une interface en ligne de commande appelée interpréteur de
      commandes ou &#8220;shell&#8221;.  Le rôle principal d'un
      interpréteur de commandes est de prendre les commandes sur le
      canal d'entrée et de les exécuter.  Beaucoup
      d'interpréteurs de commandes ont également des fonctions
      intégrées pour aider dans les tâches quotidiennes
      comme la gestion de fichiers, le mécanisme de
      remplacement et d'expansion des jokers (&#8220;file globbing&#8221;),
      l'édition de la ligne de commande, les macros commandes, et les
      variables d'environnement.  FreeBSD est fournit avec un ensemble
      d'interpréteurs de commandes, comme <code class="command">sh</code>,
      l'interpréteur de commandes Bourne, et <code class="command">tcsh</code>,
      l'interpréteur de commandes C-shell amélioré.
      Beaucoup d'autres
      interpréteurs de commandes sont disponibles dans le catalogue des
      logiciels portés, comme <code class="command">zsh</code> et
      <code class="command">bash</code>.</p><p>Quel interpréteur de commandes utilisez-vous?  C'est vraiment
      une question de goût.  Si vous programmez en C vous pourriez vous
      sentir plus à l'aise avec un interpréteur de commandes
      proche du C
      comme <code class="command">tcsh</code>.  Si vous venez du monde Linux ou que
      vous êtes nouveau à l'interface en ligne de commande d'<span class="trademark">UNIX</span>®
      vous pourriez essayer <code class="command">bash</code>.  L'idée principale
      est que chaque interpréteur de commandes à des
      caractéristiques uniques qui peuvent ou ne peuvent pas
      fonctionner avec votre environnement de travail
      préféré, et que vous avez vraiment le
      choix de l'interpréteur de commandes à utiliser.</p><p>Une des caractéristiques communes des interpréteurs de
      commandes est de pouvoir compléter les noms de fichiers
      (&#8220;filename completion&#8221;).  En tapant les premières
      lettres d'une commande ou d'un fichier, vous pouvez habituellement
      faire compléter automatiquement par l'interpréteur de
      commandes le reste de la commande ou du nom du fichier en appuyant sur la
      touche <span class="keycap"><strong>Tab</strong></span> du clavier.  Voici un exemple.
      Supposez que vous avez deux fichiers appelés respectivement
      <code class="filename">foobar</code> et <code class="filename">foo.bar</code>.
      Vous voulez effacer <code class="filename">foo.bar</code>.  Donc ce
      que vous devriez taper sur le clavier est: <code class="command">rm
      fo[Tab].[Tab]</code>.</p><p>L'interpréteur de commandes devrait afficher <code class="command">rm
      foo[BEEP].bar</code>.</p><p>Le [BEEP] est la sonnerie de la console, c'est l'interpréteur
      de commande indiquant qu'il n'est pas en mesure de compléter
      totalement le nom du fichier parce qu'il y a plus d'une
      possibilité.  <code class="filename">foobar</code> et
      <code class="filename">foo.bar</code> commencent tous les deux par
      <code class="literal">fo</code>, mais il fut capable de compléter
      jusqu'à <code class="literal">foo</code>.  Si vous tapez
      <code class="literal">.</code>, puis appuyez à nouveau sur
      <span class="keycap"><strong>Tab</strong></span>, l'interpréteur de
      commandes devrait pouvoir compléter le reste du nom du fichier
      pour vous.</p><a id="idp68692688" class="indexterm"></a><p>Une autre caractéristique de l'interpréteur de
      commandes est l'utilisation de variables d'environnement.  Les variables
      d'environnement sont une paire variable/valeur stockées dans
      l'espace mémoire d'environnement de l'interpréteur de
      commandes.  Cet espace peut être lu par n'importe quel programme
      invoqué par l'interpréteur de commandes, et contient
      ainsi beaucoup d'éléments
      de configuration des programmes.  Voici une liste des variables
      d'environnement habituelles et ce qu'elles signifient:</p><a id="idp68693584" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code class="envar">USER</code></td><td>Le nom d'utilisateur de la personne actuellement
	      attachée au système.</td></tr><tr><td><code class="envar">PATH</code></td><td>La liste des répertoires, séparés par
	      deux points, pour la recherche des programmes.</td></tr><tr><td><code class="envar">DISPLAY</code></td><td>Le nom réseau de l'affichage X11 auquel on peut se
	      connecter, si disponible.</td></tr><tr><td><code class="envar">SHELL</code></td><td>Le nom de l'interpréteur de commandes actuellement
	      utilisé.</td></tr><tr><td><code class="envar">TERM</code></td><td>Le nom du type de terminal de l'utilisateur.  Utilisé pour
	      déterminer les capacités du terminal.</td></tr><tr><td><code class="envar">TERMCAP</code></td><td>L'entrée de la base de données des codes
	      d'échappement pour permettre l'exécution de
	      diverses fonctions du terminal.</td></tr><tr><td><code class="envar">OSTYPE</code></td><td>Type du système d'exploitation, e.g. FreeBSD.</td></tr><tr><td><code class="envar">MACHTYPE</code></td><td>L'architecture du CPU sur lequel tourne actuellement
	      le système.</td></tr><tr><td><code class="envar">EDITOR</code></td><td>L'éditeur de texte préferé de
	      l'utilisateur.</td></tr><tr><td><code class="envar">PAGER</code></td><td>Le visualisateur de page de texte préferré de
	      l'utilisateur.</td></tr><tr><td><code class="envar">MANPATH</code></td><td>La liste des répertoires, séparés par
	      deux points, pour la recherche des pages de manuel.</td></tr></tbody></table></div><a id="idp68723792" class="indexterm"></a><p>Fixer une variable d'environnement diffère
      légèrement d'un interpréteur de commandes
      à l'autre.  Par exemple,
      dans le style de l'interpréteur de commandes de type C-shell comme
      <code class="command">tcsh</code> et <code class="command">csh</code>, vous
      utiliseriez <code class="command">setenv</code> pour fixer le
      contenu d'une variable d'environnement.  Sous les interpréteurs de
      commandes Bourne comme <code class="command">sh</code> et
      <code class="command">bash</code>, vous utiliseriez
      <code class="command">export</code> pour configurer vos
      variables d'environnement.  Par exemple, pour fixer ou modifier la
      variable d'environnement <code class="envar">EDITOR</code>, sous
      <code class="command">csh</code> ou <code class="command">tcsh</code> une commande
      comme la suivante fixera <code class="envar">EDITOR</code> à
      <code class="filename">/usr/local/bin/emacs</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv EDITOR /usr/local/bin/emacs</code></strong></pre><p>Sous les interpréteurs de commandes Bourne:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>export EDITOR="/usr/local/bin/emacs"</code></strong></pre><p>Vous pouvez faire afficher à la plupart des
      interpréteurs de commandes la variable d'environnement
      en plaçant un caractère
      <code class="literal">$</code> juste devant son nom sur la ligne
      de commande.  Par exemple, <code class="command">echo $TERM</code> affichera
      le contenu de <code class="envar">$TERM</code>, car l'interpréteur de commande
      complète <code class="envar">$TERM</code> et passe la main à
      <code class="command">echo</code>.</p><p>Les interpréteurs de commandes traitent beaucoup de
      caractères spéciaux, appelés
      métacaractères, en tant que représentation
      particulière des données.  Le plus commun est le
      caractère <code class="literal">*</code>, qui représente
      zéro ou plusieurs caractères dans le nom du fichier.
      Ces métacaractères spéciaux peuvent être
      utilisés pour compléter automatiquement le nom des
      fichiers.  Par exemple, taper <code class="command">echo *</code> est presque
      la même chose
      que taper <code class="command">ls</code> parce que l'interpréteur de
      commandes prendra tous les fichiers qui correspondent à
      <code class="literal">*</code> et les passera à <code class="command">echo</code> pour
      les afficher.</p><p>Pour éviter que l'interpréteur de commande
      n'interprète les caractères spéciaux, ils peuvent
      être neutralisés en ajoutant un
      caractère antislash (<code class="literal">\</code>) devant.  <code class="command">echo
      $TERM</code> affichera votre type de terminal.  <code class="command">echo
      \$TERM</code> affichera <code class="envar">$TERM</code> tel quel.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="changing-shells"></a>4.9.1. Changer d'interpréteur de commandes</h3></div></div></div><p>La méthode la plus simple pour changer votre
	interpréteur de commandes est d'utiliser la commande
	<code class="command">chsh</code>.  En lançant <code class="command">chsh</code>
	vous arriverez dans l'éditeur
	correspondant à votre variable d'environnement
	<code class="envar">EDITOR</code>; si elle n'est pas fixée, cela sera
	<code class="command">vi</code>.  Modifiez la ligne &#8220;Shell:&#8221;
	en conséquence.</p><p>Vous pouvez également passer le paramètre
	<code class="option">-s</code> à <code class="command">chsh</code>; cela modifiera
	votre interpréteur de commandes sans avoir à utiliser
	un éditeur.  Par exemple, si
	vous vouliez changer votre interpréteur de commandes pour
	<code class="command">bash</code>,
	ce qui suit devrait faire l'affaire:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chsh -s /usr/local/bin/bash</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'interpréteur de commandes que vous désirez
	  utiliser <span class="emphasis"><em>doit</em></span> être présent dans
	  le fichier <code class="filename">/etc/shells</code>.  Si vous avez
	  installé l'interpréteur de commandes à partir
	  du <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés</a>,
	  alors cela a dû déjà être fait pour vous.
	  Si vous avez installé à
	  la main l'interpréteur de commandes, vous devez alors le
	  faire.</p><p xmlns="http://www.w3.org/1999/xhtml">Par exemple, si vous avez installé <code class="command">bash</code>
	à la main et l'avez placé dans
	<code class="filename">/usr/local/bin</code>, vous devrez faire:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/usr/local/bin/bash" &gt;&gt; /etc/shells</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Puis relancer <code class="command">chsh</code>.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="editors"></a>4.10. Editeurs de texte</h2></div></div></div><a id="idp68761680" class="indexterm"></a><a id="idp68762192" class="indexterm"></a><p>Beaucoup de configurations sous FreeBSD sont faites en éditant
      des fichiers textes.  Aussi ce serait une bonne idée de se
      familiariser avec un éditeur de texte.  FreeBSD est fourni avec
      quelques-uns en tant qu'éléments du système de base,
      et beaucoup d'autres sont disponibles dans le catalogue des logiciels
      portés.</p><a id="idp68763088" class="indexterm"></a><p>L'éditeur de plus facile et le plus simple à apprendre
      est un éditeur appelé <span class="application">ee</span>,
      qui signifie l'éditeur facile (easy editor).  Pour lancer
      <span class="application">ee</span>, on taperait sur la ligne de
      commande <code class="command">ee fichier</code> où
      <em class="replaceable"><code>fichier</code></em> est le nom du fichier qui doit être
      édité.  Par exemple, pour éditer
      <code class="filename">/etc/rc.conf</code>, tapez <code class="command">ee
      /etc/rc.conf</code>.  Une fois sous <code class="command">ee</code>, toutes
      les commandes pour utiliser les fonctions de l'éditeur sont
      affichées en haut de l'écran.  Le caractère
      <code class="literal">^</code>
      représente la touche <span class="keycap"><strong>Ctrl</strong></span> sur le clavier, donc
      <code class="literal">^e</code> représente la combinaison de touches
      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>e</strong></span>.
      Pour quitter <span class="application">ee</span>, appuyez sur la touche
      <span class="keycap"><strong>Echap</strong></span>, ensuite choisissez
      &#8220;leave editor&#8221;.  L'éditeur
      vous demandera s'il doit sauver les changements si le fichier a
      été modifié.</p><a id="idp68774480" class="indexterm"></a><a id="idp68775376" class="indexterm"></a><a id="idp68789072" class="indexterm"></a><a id="idp68789968" class="indexterm"></a><p>FreeBSD est également fourni avec des éditeurs de texte
      plus puissants comme <span class="application">vi</span> en tant
      qu'élément du
      système de base, alors que d'autres éditeurs, comme
      <span class="application">Emacs</span> et <span class="application">vim</span>, en tant
      qu'élément du catalogue des logiciels portés de
      FreeBSD (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/emacs/pkg-descr">editors/emacs</a> et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/vim/pkg-descr">editors/vim</a>).  Ces éditeurs offrent beaucoup plus de
      fonctionnalités et de puissance aux dépens d'être
      un peu plus compliqués à apprendre.
      Cependant si vous projetez de faire beaucoup d'édition de texte,
      l'étude d'un éditeur plus puissant comme
      <span class="application">vim</span> ou
      <span class="application">Emacs</span> vous permettra d'économiser beaucoup plus
      de temps à la longue.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-devices"></a>4.11. Périphériques et fichiers spéciaux de
      périphérique</h2></div></div></div><p>Un périphérique est un terme utilisé la plupart
      du temps pour les activités en rapport avec le matériel
      présent sur le système,
      incluant les disques, les imprimantes, les cartes graphiques, et les
      claviers.  Quand FreeBSD démarre, la majorité de ce
      qu'affiche FreeBSD est la détection des
      périphériques.  Vous pouvez à nouveau
      consulter les messages de démarrage en visualisant le fichier
      <code class="filename">/var/run/dmesg.boot</code>.</p><p>Par exemple, <code class="filename">acd0</code> est le premier
      lecteur de CDROM IDE, tandis que <code class="filename">kbd0</code>
      représente le clavier.</p><p>La plupart de ces périphériques sous un système
      d'exploitation <span class="trademark">UNIX</span>® peuvent être accédés par
      l'intermédiaire de fichiers appelés fichiers
      spéciaux de périphérique
      (&#8220;device node&#8221;), qui sont situés dans le
      répertoire <code class="filename">/dev</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68802768"></a>4.11.1. Créer des fichiers spéciaux de
	périphérique</h3></div></div></div><p>Quand vous ajoutez un nouveau périphérique
	à votre système, ou compilez le support pour des
	périphériques supplémentaires, de nouveaux
	fichiers spéciaux de périphérique doivent
	être créés.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp68803792"></a>4.11.1.1. <code class="literal">DEVFS</code> (&#8220;DEVice File System&#8221; -
	  Système de fichiers de périphérique)</h4></div></div></div><p>Le système de fichiers de périphérique, ou
	  <code class="literal">DEVFS</code>, fournit un accès à l'espace
	  nom des périphériques du noyau dans l'espace nom du
	  système de fichiers global.  Au lieu d'avoir à
	  créer et modifier les fichiers spéciaux de
	  périphérique, <code class="literal">DEVFS</code>
	  maintient ce système de fichiers particulier pour vous.</p><p>Voir la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> pour plus
	  d'information.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="binary-formats"></a>4.12. Le format des fichiers binaires</h2></div></div></div><p>Afin de comprendre pourquoi FreeBSD utilise le format
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a>, vous devez d'abord connaître
      quelques détails concernant les trois formats
      &#8220;dominants&#8221; d'exécutables actuellement en vigueur
      sous <span class="trademark">UNIX</span>®:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a></p><p>Le plus vieux et le format objet &#8220;classique&#8221;
	  d'<span class="trademark">UNIX</span>®.  Il utilise une entête courte et compacte
	  avec un nombre magique au début qui est souvent
	  utilisé pour caractériser le format (voir la
	  page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a> pour plus de détails).
	  Il contient trois segments chargés: .text, .data,
	  et .bss plus une table de symboles et une table de
	  chaînes de caractères.</p></li><li class="listitem"><p><acronym class="acronym">COFF</acronym></p><p>Le format objet SVR3.  L'entête comprend une
	  table de section, de telle sorte que vous avez plus de
	  sections qu'uniquement .text, .data et .bss.</p></li><li class="listitem"><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=elf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">elf</span>(5)</span></a></p><p>Le successeur de <acronym class="acronym">COFF</acronym>, qui
	  permet des sections multiples et des valeurs possibles de 32
	  bits et 64 bits.  Un inconvénient majeur:
	  <acronym class="acronym">ELF</acronym> a aussi été conçu
	  en supposant qu'il y aurait qu'un seul ABI par architecture
	  système.  Cette hypothèse est en fait assez
	  incorrecte, et même dans le monde SYSV (qui a
	  au moins trois ABIs: SVR4, Solaris, SCO) cela ne se
	  vérifie pas.</p><p>FreeBSD essaye de contourner ce problème en
	  fournissant un utilitaire pour <span class="emphasis"><em>marquer</em></span>
	  un exécutable connu <acronym class="acronym">ELF</acronym> avec
	  des informations sur l'ABI qui va avec.  Consultez la page
	  de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a> pour plus
	  d'informations.</p></li></ul></div><p>FreeBSD vient du camp &#8220;classique&#8221; et a
      utilisé le format <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=a.out&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">a.out</span>(5)</span></a>, une technologie
      employée et éprouvée à travers des
      générations de BSDs, jusqu'aux débuts de la
      branche 3.X.  Bien qu'il fut possible de compiler et
      d'exécuter des binaires natifs <acronym class="acronym">ELF</acronym> (et
      noyaux) sous FreeBSD avant cela, FreeBSD a initialement
      résisté à la &#8220;pression&#8221; de passer
      à <acronym class="acronym">ELF</acronym> comme format par défaut.
      Pourquoi?  Bien, quand le camp Linux ont fait leur
      pénible transition vers <acronym class="acronym">ELF</acronym>, ce n'est pas
      tant fuir le format <code class="filename">a.out</code> qui rendait
      difficile la construction de bibliothèques partagée
      pour les développeurs mais le mécanisme de
      bibliothèques partagées basé sur des tables de
      sauts inflexible.  Puisque les outils <acronym class="acronym">ELF</acronym>
      disponibles offraient une solution au problème
      des bibliothèques partagées et étaient
      perçus comme &#8220;le chemin à suivre&#8221; de toute
      façon, le coût de la migration a été
      accepté comme nécessaire, et la transition a
      été réalisée.  Le mécanisme FreeBSD
      de bibliothèques partagées se rapproche plus
      du style de mécanisme de bibliothèques
      partagées de <span class="trademark">SunOS</span>&#8482; de Sun, et est très simple
      à utiliser.</p><p>Pourquoi existe-t-il tant de formats différents?</p><p>Dans un obscure et lointain passé, il y avait du
      matériel simple.  Ce matériel simple supportait
      un simple petit système.  <code class="filename">a.out</code>
      était complètement adapté pour
      représenter les binaires sur ce système simple
      (un PDP-11).  Au fur et à mesure que des personnes
      portaient <span class="trademark">UNIX</span>® à partir de ce système
      simple, ils ont maintenus le format <code class="filename">a.out</code>
      parce qu'il était suffisant pour les premiers portages
      d'<span class="trademark">UNIX</span>® sur des architectures comme le Motorola 68k, les VAX,
      etc.</p><p>Alors un certain ingénieur matériel brillant
      a décidé qu'il pourrait forcer le matériel
      à faire des choses bizarre, l'autorisant ainsi à
      réduire le nombre de portes logiques et permettant
      au coeur du CPU de fonctionner plus rapidement.
      Bien qu'on l'a fait fonctionner avec ce nouveau
      type de matériel (connu de nos jour sous le nom de
      <acronym class="acronym">RISC</acronym>), <code class="filename">a.out</code> n'était pas adapté
      à ce matériel, aussi beaucoup de formats ont
      été développés
      pour obtenir de meilleures performances de ce matériel
      que ce que pouvait offrir le simple et limité format
      qu'était <code class="filename">a.out</code>.  Des
      choses comme <acronym class="acronym">COFF</acronym>, <acronym class="acronym">ECOFF</acronym>,
      et quelques autres obscures formats ont été
      inventé et leur limites explorées avant que les choses
      ne se fixent sur <acronym class="acronym">ELF</acronym>.</p><p>En outre, les tailles des programmes devenaient
      énormes alors que les disques (et la mémoire
      physique) étaient toujours relativement
      petits, aussi le concept de bibliothèque partagée
      est né.  Le système de VM (mémoire virtuelle)
      est également devenu plus sophistiqué.
      Tandis que chacune de ces avancées était
      faites en utilisant le format <code class="filename">a.out</code>,
      son utilité a été élargie
      de plus en plus avec chaque nouvelle fonction.  De plus les
      gens ont voulu charger dynamiquement des choses à
      l'exécution, ou se débarrasser de partie de
      leur programme après l'initialisation pour économiser
      de l'espace mémoire et de pagination.  Les langages
      sont devenus plus sophistiqués et les gens ont voulu
      du code appelé automatiquement avant la partie
      principale du programme.  Beaucoup de modifications ont
      été apportées au format <code class="filename">a.out</code>
      pour rendre possible toutes ces choses, et cela a
      fonctionné pendant un certain temps.  Avec le temps,
      <code class="filename">a.out</code> n'était plus capable de
      gérer tous ces problèmes sans une augmentation
      toujours croissante du code et de sa complexité.
      Tandis <acronym class="acronym">ELF</acronym> résolvait plusieurs de
      ces problèmes, il aurait été pénible
      de quitter un système qui a fonctionné.
      Ainsi <acronym class="acronym">ELF</acronym> a dû attendre jusqu'au moment
      où il était plus pénible de rester avec
      <code class="filename">a.out</code> que d'émigrer vers
      <acronym class="acronym">ELF</acronym>.</p><p>Cependant, avec le temps, les outils de compilation
      desquels ceux de FreeBSD sont dérivés (l'assembleur
      et le chargeur tout spécialement) ont
      évolué en parallèle.
      Les développeurs FreeBSD ajoutèrent les
      bibliothèques partagées et corrigèrent
      quelques bogues.  Les gens de chez GNU qui ont à
      l'origine écrit ces programmes, les récrivirent
      et ajoutèrent un support plus simple pour la compilation
      multi-plateformes, avec différents formats
      à volonté, et ainsi de suite.  Lorsque beaucoup de personnes
      ont voulu élaborer des compilateurs multi-plateformes
      pour FreeBSD, elles n'eurent pas beaucoup de chance puisque
      les anciennes sources que FreeBSD avait pour
      <span class="application">as</span> et <span class="application">ld</span>
      n'étaient pas adaptées à cette tâche.
      Le nouvel ensemble d'outils de GNU
      (<span class="application">binutils</span>) supporte la compilation
      multi-plateformes, <acronym class="acronym">ELF</acronym>, les
      bibliothèques partagées, les extensions C++, etc.
      De plus, de nombreux vendeurs de logiciels fournissent des
      binaires <acronym class="acronym">ELF</acronym>, et c'est une bonne chose pour
      permettre leur exécution sous FreeBSD.</p><p><acronym class="acronym">ELF</acronym> est plus expressif
      qu'<code class="filename">a.out</code> et permet plus d'extensibilité
      dans le système de base.
      Les outils <acronym class="acronym">ELF</acronym> sont mieux maintenus, et
      offrent un support pour la compilation multi-plateformes, ce qui
      est important pour de nombreuses personnes.
      <acronym class="acronym">ELF</acronym> peut être légèrement plus lent
      qu'<code class="filename">a.out</code>, mais tenter de mesurer cette
      différence n'est pas aisé.  Il y a
      également de nombreux détails qui
      diffèrent entre les deux dans la façon dont
      ils mappent les pages mémoire, gère le code
      d'initialisation, etc.
      Dans le futur, le support <code class="filename">a.out</code> sera
      retiré du noyau <code class="filename">GENERIC</code>, et
      par la suite retiré des sources du noyau une fois que le
      besoin d'exécuter d'anciens programmes
      <code class="filename">a.out</code> aura disparu.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="basics-more-information"></a>4.13. Pour plus d'information</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics-man"></a>4.13.1. Les pages de manuel</h3></div></div></div><a id="idp68871376" class="indexterm"></a><p>La documentation la plus complète sur FreeBSD est sous la
	forme de pages de manuel.  Presque chaque programme sur le
	système est fournit avec un court manuel de
	référence expliquant l'utilisation de base et les
	diverses options.  Ces manuels peuvent être visualisés
	avec la commande <code class="command">man</code>.
	L'utilisation de la commande <code class="command">man</code> est
	simple:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man command</code></strong></pre><p><code class="literal">command</code> est le nom de la commande
	à propos de laquelle vous désirez en savoir plus.
	Par exemple, pour en savoir plus au sujet de la commande
	<code class="command">ls</code> tapez:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man ls</code></strong></pre><p>Les manuels en ligne sont divisés en sections
	numérotées:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Commandes utilisateur.</p></li><li class="listitem"><p>Appels système et numéros d'erreur.</p></li><li class="listitem"><p>Fonctions des bibliothèques C.</p></li><li class="listitem"><p>Pilotes de périphérique.</p></li><li class="listitem"><p>Formats de fichier.</p></li><li class="listitem"><p>Jeux et autres divertissements.</p></li><li class="listitem"><p>Information diverse.</p></li><li class="listitem"><p>Commandes de maintenance et d'utilisation du
	    système.</p></li><li class="listitem"><p>Information de développement du noyau.</p></li></ol></div><p>Dans certains cas, le même sujet peut apparaître
	dans plus d'une section du manuel en ligne.  Par exemple, il existe une
	commande utilisateur <code class="command">chmod</code> et un appel
	système <code class="function">chmod()</code>.  Dans ce cas, vous pouvez
	préciser à la commande <code class="command">man</code> laquelle
	vous désirez en spécifiant la section:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man 1 chmod</code></strong></pre><p>Cela affichera la page de manuel de la commande utilisateur
	<code class="command">chmod</code>.  Les références à
	une section particulière du manuel en ligne sont
	traditionnellement placées entre parenthèses, ainsi
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> se rapporte à la commande
	utilisateur <code class="command">chmod</code> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chmod</span>(2)</span></a> se
	rapporte à l'appel système.</p><p>C'est parfait si vous connaissez le nom de la commande et
	vous souhaitez simplement savoir comment l'utiliser, mais qu'en
	est-il si vous ne pouvez pas vous rappelez du nom de la
	commande?  Vous pouvez utiliser <code class="command">man</code> pour
	rechercher des mots-clés dans les descriptions de commandes en
	employant l'option <code class="option">-k</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>man -k mail</code></strong></pre><p>Avec cette commande on vous affichera la liste des commandes
	qui ont le mot-clé &#8220;mail&#8221; dans leurs descriptions.
	C'est en fait équivalent à l'utilisation de la commande
	<code class="command">apropos</code>.</p><p>Ainsi, vous regardez toutes ces commandes fantaisistes
	contenues dans <code class="filename">/usr/bin</code> mais vous n'avez
	pas la moindre idée de ce quelles font vraiment?  Faites
	simplement:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>man -f *</code></strong></pre><p>ou</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>whatis *</code></strong></pre><p>ce qui fait la même chose.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="basics-info"></a>4.13.2. Fichiers GNU Info</h3></div></div></div><a id="idp68906064" class="indexterm"></a><a id="idp68906576" class="indexterm"></a><p>FreeBSD inclut beaucoup d'applications et d'utilitaires
	produit par la Fondation pour le Logiciel Libre ( Free Software
	Foundation).  En plus des pages de manuel, ces programmes sont
	fournis avec des documents hypertexte appelés fichiers
	<code class="literal">info</code> qui peuvent être lus avec la commande
	<code class="command">info</code> ou, si vous avez installé
	<span class="application">emacs</span>, dans le mode info
	d'<span class="application">emacs</span>.</p><p>Pour utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">info</span>(1)</span></a>, tapez simplement:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>info</code></strong></pre><p>Pour une brève introduction, tapez <code class="literal">h</code>.
	Pour une référence rapide sur la commande, tapez
	<code class="literal">?</code>.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp68019408" class="footnote"><p><a href="#idp68019408" class="para"><sup class="para">[1] </sup></a>C'est ce que signifie <code class="literal">i386</code>.  Notez
	    que même si vous ne faites pas tourner FreeBSD sur un CPU Intel
	    386, cela sera <code class="literal">i386</code>.  Ce n'est pas le
	    type de votre microprocesseur, mais
	    &#8220;l'architecture&#8221; du microprocesseur qui est
	    donnée ici.</p></div><div id="ftn.idp68026576" class="footnote"><p><a href="#idp68026576" class="para"><sup class="para">[2] </sup></a>Les procédures de démarrage sont des programmes
	    qui sont exécutés automatiquement par FreeBSD au
	    démarrage.  Leur fonction principale est de configurer le
	    système pour permettre l'exécution de tout programme,
	    et de démarrer tout service que vous avez configuré pour
	    tourner en tâche de fond et exécuter des choses
	    utiles.</p></div><div id="ftn.idp68041040" class="footnote"><p><a href="#idp68041040" class="para"><sup class="para">[3] </sup></a>Une description assez technique et précise de tous
	    les détails de la console FreeBSD et des pilotes de
	    clavier peut être trouvée dans les pages de manuel de
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atkbd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atkbd</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vidcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vidcontrol</span>(1)</span></a>
	    et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdcontrol</span>(1)</span></a>.  Nous ne nous étendrons pas
	    en détails ici, mais le lecteur intéressé peut
	    toujours consulter les pages de manuel pour explication plus
	    détaillée et plus complète sur le
	    fonctionnement des choses.</p></div><div id="ftn.idp68608848" class="footnote"><p><a href="#idp68608848" class="para"><sup class="para">[4] </sup></a>Ce n'est pas tout à fait vrai&#8212;il y a quelques cas
	  où les choses ne peuvent être interrompues.  Par exemple,
	  si le processus est en train d'essayer de lire un fichier qui
	  est sur un autre ordinateur sur le réseau, et que l'autre
	  ordinateur n'est plus accessible pour quelque raison
	  (a été éteint, ou le réseau a un
	  problème),
	  alors le processus est dit &#8220;non interruptible&#8221;.
	  Par la suite le processus entrera en pause, typiquement après
	  deux minutes.  Dès que cette pause sera effective le processus
	  sera tué.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports"></a>Chapitre 5. Installer des applications: les logiciels pré-compilés
    et les logiciels portés</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#ports-synopsis">5.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#ports-overview">5.2. Généralités sur l'installation de logiciels</a></span></dt><dt><span class="sect1"><a href="#ports-finding-applications">5.3. Trouver votre application</a></span></dt><dt><span class="sect1"><a href="#packages-using">5.4. Utiliser le système des logiciels
      pré-compilés</a></span></dt><dt><span class="sect1"><a href="#ports-using">5.5. Utiliser le catalogue des logiciels portés</a></span></dt><dt><span class="sect1"><a href="#ports-nextsteps">5.6. Activités de post-installation</a></span></dt><dt><span class="sect1"><a href="#ports-broken">5.7. Que faire avec les logiciels portés ne fonctionnant
      pas?</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-synopsis"></a>5.1. Synopsis</h2></div></div></div><a id="idp68915536" class="indexterm"></a><a id="idp68920272" class="indexterm"></a><p>FreeBSD est livré avec une riche collection d'outils en tant
      que partie du système de base.  Beaucoup de choses
      peuvent être faites avant d'avoir besoin de recourir à
      l'installation d'une application tiers pour effectuer un travail
      précis.  FreeBSD fournit deux technologies complémentaires
      pour installer des logiciels tiers sur votre système:
      le Catalogue des logiciels portés de FreeBSD (pour une installation à partir des sources), et les logiciels
      pré-compilés ou <span class="quote">« <span class="quote">paquetages</span> »</span> (pour installer des binaires pré-compilés).  N'importe laquelle de ces deux méthodes peut
      être utilisée pour installer les nouvelles versions de vos
      applications favorites à partir d'un
      support local ou directement depuis le réseau.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment installer des logiciels tiers
	  pré-compilés.</p></li><li class="listitem"><p>Comment compiler des logiciels tiers à partir des sources en utilisant le catalogue
	  de logiciels portés.</p></li><li class="listitem"><p>Comment effacer les logiciels pré-compilés ou
	  portés précédemment installés.</p></li><li class="listitem"><p>Comment modifier les paramètres par défaut
	  utilisés par le catalogue des logiciels
	  portés.</p></li><li class="listitem"><p>Comment trouver l'application recherchée.</p></li><li class="listitem"><p>Comment mettre à jour vos applications.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-overview"></a>5.2. Généralités sur l'installation de logiciels</h2></div></div></div><p>Si vous avez utilisé auparavant un système <span class="trademark">UNIX</span>® vous
      saurez que la procédure typique pour installer les logiciels
      tiers ressemble à ceci:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Télécharger le logiciel, qui peut être
	  distribué sous forme de code source, ou sous forme d'un
	  binaire.</p></li><li class="step"><p>Extraire le logiciel de son format de distribution
	  (généralement une archive tar compressée
	  soit avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=compress&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">compress</span>(1)</span></a>, soit avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a>, ou encore <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bzip2&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">bzip2</span>(1)</span></a>).</p></li><li class="step"><p>Recherchez la documentation (peut être un fichier
	  <code class="filename">INSTALL</code> ou <code class="filename">README</code>, ou des fichiers dans un sous
	  répertoire <code class="filename">doc/</code>) et lisez les
	  informations sur comment installer le logiciel.</p></li><li class="step"><p>Si le logiciel était distribué sous forme de
	  sources, compilez-le.  Cela peut impliquer l'édition d'un
	  <code class="filename">Makefile</code>, ou l'exécution d'une
	  procédure <code class="command">configure</code>, et d'autres
	  activités.</p></li><li class="step"><p>Tester et installer le logiciel.</p></li></ol></div><p>Et cela si seulement tout se passe bien.  Si vous installez un
      logiciel qui n'a pas été spécialement porté
      pour FreeBSD, il se peut que vous deviez éditer le code source
      pour le faire fonctionner correctement.</p><p>Si vous le voulez, vous pouvez continuer d'installer des
      logiciels suivant la méthode &#8220;traditionnelle&#8221; sous
      FreeBSD.  Cependant, FreeBSD fournit deux technologies avec
      lesquelles vous pouvez vous économiser beaucoup d'efforts: les
      logiciels pré-compilés et le catalogue des logiciels
      portés.  A l'heure de l'écriture de ces lignes, plus de
      24,000 applications tierces sont ainsi mises à
      disposition.</p><p>Pour n'importe quelle application donnée, le logiciel
      pré-compilé FreeBSD pour cette application est un unique
      fichier à télécharger.  Il contient les copies
      pré-compilées de toutes les
      commandes de l'application, ainsi que tous fichiers de
      configuration et documentation.  Un logiciel pré-compilé
      téléchargé peut être manipulé avec
      les commandes FreeBSD de gestion des logiciels
      pré-compilés, comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_info</span>(1)</span></a>, et ainsi de suite.
      L'installation d'une nouvelle application peut être
      effectuée grâce à une unique commande.</p><p>Un logiciel porté pour FreeBSD est un ensemble de fichiers
      conçus pour automatiser le processus de compilation d'une
      application à partir du code source.</p><p>Rappelez-vous qu'il y a un certain nombre d'étapes que vous
      effectueriez si vous compiliez un programme vous-même (téléchargement, extraction,
      application de correctifs, compilation, installation).  Les
      fichiers qui composent un logiciel porté contiennent toute
      l'information nécessaire pour permettre au système de faire
      cela pour vous.  Vous lancez une poignée de commandes simples et
      le code source de l'application est automatiquement
      téléchargé, extrait, corrigé, compilé,
      et installé pour vous.</p><p>En fait, le catalogue des logiciels portés peut être
      utilisé pour générer ce qui pourra plus tard
      être manipulé avec <code class="command">pkg_add</code> et d'autres
      commandes de gestion des logiciels pré-compilés qui
      seront présentés sous peu.</p><p>Les logiciels pré-compilés et le catalogue des
      logiciels portés comprennent la notion de
      <span class="emphasis"><em>dépendances</em></span>.
      Supposez que vous voulez installer une application qui dépend
      de l'installation d'une bibliothèque particulière.
      L'application et la bibliothèque ont été toutes
      deux rendues disponibles sous forme de logiciel porté pour
      FreeBSD ou de logiciel pré-compilé.
      Si vous utilisez la commande <code class="command">pkg_add</code> ou le
      catalogue des logiciels portés pour ajouter l'application, tous
      les deux remarqueront que la bibliothèque n'a pas été
      installée, et installeront automatiquement en premier la
      bibliothèque.</p><p>Etant donné que les deux technologies sont presque semblables,
      vous pourriez vous demander pourquoi FreeBSD s'ennuie avec les
      deux.  Les logiciels pré-compilés et le catalogue de
      logiciels portés ont chacun leurs propres forces, et celle que vous
      emploierez dépendra de votre préférence.</p><div class="itemizedlist"><div class="itemizedlist-title">Avantages des logiciels pré-compilés</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'archive compressée d'un logiciel
	  pré-compilé est généralement plus
	  petite que l'archive compressée contenant le
	  code source de l'application.</p></li><li class="listitem"><p>Les logiciels pré-compilés ne
	  nécessitent pas de compilation supplémentaire.
	  Pour les grosses applications, comme
	  <span class="application">Mozilla</span>,
	  <span class="application">KDE</span>, ou <span class="application">GNOME</span>
	  cela peut s'avérer important, particulièrement si
	  vous êtes sur un système lent.</p></li><li class="listitem"><p>Les logiciels pré-compilés ne demandent pas une
	  compréhension du processus impliqué dans la compilation de
	  logiciels sous FreeBSD.</p></li></ul></div><div class="itemizedlist"><div class="itemizedlist-title">Avantages du catalogue des logiciels portés</div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les logiciels pré-compilés sont normalement
	  compilés avec des options conservatrices, parce qu'ils
	  doivent pouvoir tourner sur le plus grand nombre de systèmes.
	  En installant à partir du catalogue des logiciels
	  portés, vous pouvez ajuster les options de compilation pour
	  (par exemple) générer du code
	  spécifique au Pentium 4 ou à l'Athlon.</p></li><li class="listitem"><p>Certaines applications ont des options de compilation
	  concernant ce qu'elles peuvent faire et ne pas faire.  Par
	  exemple, <span class="application">Apache</span> peut être
	  configuré avec une très large variété
	  d'options intégrées différentes.
	  En compilant à partir du catalogue des logiciels
	  portés vous n'avez pas à accepter les options par
	  défaut, et vous pouvez
	  les configurez vous-même.</p><p>Dans certains cas, de multiples logiciels
	  pré-compilés existeront pour la même
	  application pour spécifier certaines configurations.
	  Par exemple, <span class="application">Ghostscript</span> est
	  disponible comme logiciel pré-compilé
	  <code class="filename">ghostscript</code> et
	  <code class="filename">ghostscript-nox11</code> , en fonction de si
	  vous avez installé ou non un serveur X11.  Ce type
	  d'arrangement est possible avec les logiciels
	  pré-compilés, mais devient rapidement impossible
	  si une application a plus d'une ou deux options de
	  compilation.</p></li><li class="listitem"><p>Les licences de certains logiciels interdisent les
	  distributions binaires.  Ils doivent être distribués sous
	  forme de code source.</p></li><li class="listitem"><p>Certaines personnes ne font pas confiance aux
	  distributions binaires.  Au moins avec le code source, vous
	  pouvez (en théorie) le parcourir et chercher les
	  problèmes
	  potentiels par vous-même.</p></li><li class="listitem"><p>Si vous avez des correctifs locaux, vous aurez besoin du
	  code source afin de les appliquer.</p></li><li class="listitem"><p>Certaines personnes aiment avoir le code source à
	  portée de main, ainsi elles peuvent le lire si elles
	  s'ennuient, le
	  modifier, y faire des emprunts (si la licence le permet bien
	  sûr), etc...</p></li></ul></div><p>Pour suivre les mises à jour du catalogue des logiciels
      portés, inscrivez-vous à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">liste de diffusion à propos du catalogue des logiciels portés de FreeBSD</a> et la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-bugs" target="_top">liste de diffusion à propos des rapports de bogue concernant le catalogue des logiciels portés de FreeBSD</a>.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avant d'installer une application, vous devriez consulter
	<code class="uri"><a class="uri" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a></code> à la
	recherche de problème de sécurité
	concernant votre application.</p><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez également installer <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portaudit/pkg-descr">ports-mgmt/portaudit</a> qui
	contrôlera automatiquement toutes les applications
	installées à la recherche de
	vulnérabilités connues, un contrôle sera
	également effectué avant toute compilation de
	logiciel porté.  De même, vous pouvez utiliser la
	commande <code class="command">portaudit -F -a</code> après avoir
	installé des logiciels
	pré-compilés.</p></div><p>Le reste de ce chapitre expliquera comment utiliser les
      logiciels pré-compilés et le catalogue des logiciels
      portés et la
      gestion des logiciels tiers sous FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-finding-applications"></a>5.3. Trouver votre application</h2></div></div></div><p>Avant que vous puissiez installer des applications
      vous devez savoir ce que vous voulez, et comment se nomment les
      applications.</p><p>La liste des applications disponibles pour FreeBSD augmente de
      jours en jours.  Heureusement, il y a plusieurs façons de trouver
      ce que vous désirez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le site web de FreeBSD maintient à jour une liste, dans
	  laquelle on peut effectuer des recherches, de toutes les
	  applications disponibles à l'adresse
	  <a class="link" href="../../../../ports/index.html" target="_top">http://www.FreeBSD.org/ports/</a>.
	  Le catalogue des logiciels portés est divisé en catégories, et vous pouvez soit
	  chercher une application par son nom (si vous le connaissez),
	  soit lister toutes les applications disponibles dans une
	  catégorie.</p></li><li class="listitem"><a id="idp68975952" class="indexterm"></a><p>Dan Langille maintient FreshPorts, à l'adresse
	  <code class="uri"><a class="uri" href="http://www.FreshPorts.org/" target="_top">http://www.FreshPorts.org/</a></code>.
	  FreshPorts suit les modifications des applications dans le
	  catalogue des logiciels portés, vous permet de
	  &#8220;surveiller&#8221; un ou plusieurs logiciels portés, et
	  peut vous envoyer un courrier électronique quand ils sont mis
	  à jour.</p></li><li class="listitem"><a id="idp68977744" class="indexterm"></a><p>Si vous ne connaissez pas le nom de l'application que vous
	  voulez, essayez d'utiliser un site comme FreshMeat
	  (<code class="uri"><a class="uri" href="http://www.freshmeat.net/" target="_top">http://www.freshmeat.net/</a></code>)
	  pour trouver une application, ensuite vérifiez sur le site de
	  FreeBSD si l'application a déjà été
	  portée.</p></li><li class="listitem"><p>Si vous connaissez le nom exact du logiciel, vous devez
	  juste déterminer dans quelle catégorie il se
	  trouve, vous pouvez utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=whereis&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">whereis</span>(1)</span></a> pour
	  cela.  Tapez simplement <code class="command">whereis
	  file</code> où
	  <em class="replaceable"><code>file</code></em> est le programme que vous
	  voulez installer.  S'il est trouvé sur le
	  système, on vous indiquera où il se trouve, de
	  la manière suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>whereis lsof</code></strong>
lsof: /usr/ports/sysutils/lsof</pre><p>Cela nous indique que <code class="command">lsof</code> (un
	  utilitaire système) peut être trouvé
	  dans le répertoire <code class="filename">/usr/ports/sysutils/lsof</code>.</p></li><li class="listitem"><p>Vous pouvez également utiliser une simple
	  commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=echo&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">echo</span>(1)</span></a> pour déterminer où se
	  trouve un logiciel porté dans le catalogue de
	  logiciels portés.  Par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo /usr/ports/*/*lsof*</code></strong>
/usr/ports/sysutils/lsof</pre><p>Notez que cette commande retournera tout fichier
	  téléchargé du répertoire
	  <code class="filename">/usr/ports/distfiles</code>
	  correspondant à ce motif de recherche.</p></li><li class="listitem"><p>Encore une autre façon de trouver un logiciel
	  porté particulier est d'utiliser le mécanisme de
	  recherche interne du catalogue des logiciels portés.
	  Pour utiliser la fonction de recherche, vous devrez vous
	  trouver dans le répertoire
	  <code class="filename">/usr/ports</code>.  Une fois dans ce
	  répertoire, lancez <code class="command">make search
	  name=program-name</code>
	  où <em class="replaceable"><code>program-name</code></em>
	  représente le nom du programme que vous voulez
	  localiser.  Par exemple, si vous recherchiez
	  <code class="command">lsof</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make search name=lsof</code></strong>
Port:   lsof-4.56.4
Path:   /usr/ports/sysutils/lsof
Info:   Lists information about open files (similar to fstat(1))
Maint:  obrien@FreeBSD.org
Index:  sysutils
B-deps:
R-deps: </pre><p>La partie du message de sortie à laquelle vous
	  devez prêter attention est la ligne
	  &#8220;Path:&#8221;, car cela vous indique où trouver
	  le logiciel porté.  Les autres informations ne sont
	  pas nécessaires afin d'installer le logiciel
	  porté, aussi on en parlera pas ici.</p><p>Pour une recherche plus en profondeur vous pouvez
	  également utiliser <code class="command">make search
	  key=string</code> où
	  <em class="replaceable"><code>string</code></em> est le texte à
	  rechercher.  Cela recherche les noms de logiciels
	  portés, les commentaires, les descriptions et les
	  dépendances et peut être utilisé pour
	  trouver des logiciels portés se rapportant à
	  un sujet particulier si vous ne connaissez pas le nom du
	  programme que vous cherchez.</p><p>Dans les deux cas, la chaîne de caractère
	  de recherche n'est pas sensible à la casse des
	  caractères.  Rechercher &#8220;LSOF&#8221;
	  mènera aux même résultats que la
	  recherche de &#8220;lsof&#8221;.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="packages-using"></a>5.4. Utiliser le système des logiciels
      pré-compilés</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><p>Il existe plusieurs outils utilisés pour la gestion
      des logiciels pré-compilés sur FreeBSD</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'utilitaire <code class="command">sysinstall</code> peut
	  être invoqué à partir d'un
	  système en fonctionnement pour installer, supprimer
	  et afficher les logiciels disponibles et installés.
	  Pour plus d'information, consultez la <a class="xref" href="#packages" title="2.10.11. Installer des logiciels pré-compilés - &#8220;packages&#8221;">Section 2.10.11, « Installer des logiciels pré-compilés -
      &#8220;packages&#8221; »</a>.</p></li><li class="listitem"><p>Les outils de gestion en ligne de commande des logiciels
	  pré-compilés, qui sont le sujet de la suite de
	  cette section.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69007696"></a>5.4.1. Installation d'un logiciel pré-compilé</h3></div></div></div><a id="idp69008336" class="indexterm"></a><a id="idp69009488" class="indexterm"></a><p>Vous pouvez utiliser l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> pour
	installer un logiciel pré-compilé FreeBSD à
	partir d'un fichier
	local ou d'un serveur sur le réseau.</p><div class="example"><a id="idp69011536"></a><div class="example-title">Exemple 5.1. Télécharger un logiciel pré-compilé
	  à la main puis l'installer localement</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ftp -a ftp2.FreeBSD.org</code></strong>
Connected to ftp2.FreeBSD.org.
220 ftp2.FreeBSD.org FTP server (Version 6.00LS) ready.
331 Guest login ok, send your email address as password.
230-
230-     This machine is in Vienna, VA, USA, hosted by Verio.
230-         Questions? E-mail freebsd@vienna.verio.net.
230-
230-
230 Guest login ok, access restrictions apply.
Remote system type is UNIX.
Using binary mode to transfer files.
<code class="prompt">ftp&gt;</code> <strong class="userinput"><code>cd /pub/FreeBSD/ports/packages/sysutils/</code></strong>
250 CWD command successful.
<code class="prompt">ftp&gt;</code> <strong class="userinput"><code>get lsof-4.56.4.tgz</code></strong>
local: lsof-4.56.4.tgz remote: lsof-4.56.4.tgz
200 PORT command successful.
150 Opening BINARY mode data connection for 'lsof-4.56.4.tgz' (92375 bytes).
100% |**************************************************| 92375       00:00 ETA
226 Transfer complete.
92375 bytes received in 5.60 seconds (16.11 KB/s)
<code class="prompt">ftp&gt;</code> <strong class="userinput"><code>exit</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pkg_add lsof-4.56.4.tgz</code></strong></pre></div></div><br class="example-break" /><p>Si vous ne disposez pas d'une source locale de logiciels
	pré-compilés (comme l'ensemble de CDROM de FreeBSD)
	alors il sera probablement plus facile d'utiliser l'option
	<code class="option">-r</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>.  Cela fera déterminer
	automatiquement à l'utilitaire le format objet et la version
	corrects et ensuite récupérer et installer le logiciel
	pré-compilé à partir d'un site FTP.</p><a id="idp69017936" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r lsof</code></strong></pre><p>L'exemple ci-dessus téléchargera le logiciel
	pré-compilé
	correct sans plus d'intervention de l'utilisateur.
	Si vous désirez indiquer un autre miroir FreeBSD pour les
	logiciels pré-compilés à la place du site
	de distribution principal, vous devez positionner en
	conséquence la variable d'environnement
	<code class="envar">PACKAGESITE</code>, pour remplacer les
	paramètres par défaut.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> utilise <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a> pour télécharger les
	fichiers, qui respecte diverses variables d'environnement, dont
	<code class="envar">FTP_PASSIVE_MODE</code>, <code class="envar">FTP_PROXY</code>, et
	<code class="envar">FTP_PASSWORD</code>.  Il se peut que vous ayez besoin de
	configurer une ou plusieurs de ces dernières si vous êtes
	derrière un coupe-feu, ou devez utiliser un proxy FTP/HTTP.
	Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a> pour la liste complète
	des variables.  Vous pouvez également remarquer que dans
	l'exemple ci-dessus <code class="literal">lsof</code> est utilisé au lieu
	de <code class="literal">lsof-4.56.4</code>.  Quand la fonction de
	récupération à distance est utilisée,
	le numéro de version doit être retiré.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> téléchargera automatiquement la
	toute dernière version de l'application.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> téléchargera la
	  dernière version de votre application si vous êtes
	  sous FreeBSD-CURRENT ou FreeBSD-STABLE.  Si vous utilisez une version
	  -RELEASE, il récupérera la version compilée
	  avec votre version lors de sa publication.  Il est possible de
	  modifier ce comportement en surchargeant la variable
	  d'environnement <code class="envar">PACKAGESITE</code>.  Par exemple,
	  si vous utilisez un système FreeBSD 8.1-RELEASE,
	  par défaut <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> tentera de
	  récupérer les applications
	  pré-compilées à partir de
	  <code class="literal">ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-8.1-release/Latest/</code>.
	  Si vous désirez forcer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> à
	  télécharger les versions des logiciels
	  pré-compilés pour FreeBSD 8-STABLE,
	  positionnez la variable <code class="envar">PACKAGESITE</code> à
	  <code class="literal">ftp://ftp.freebsd.org/pub/FreeBSD/ports/i386/packages-8-stable/Latest/</code>.
	</p></div><p>Les logiciels pré-compilés sont distribués
	dans les formats <code class="filename">.tgz</code> et <code class="filename">.tbz</code>.  Vous pouvez les trouver
	sur <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/</a></code>, ou
	sur le CDROM de distribution de FreeBSD.  Chaque CD de
	l'ensemble de 4-CD de FreeBSD (et le PowerPak, etc...) contient
	des logiciels pré-compilés dans le répertoire
	<code class="filename">/packages</code>.  L'organisation des logiciels
	pré-compilés est semblable à celle de
	l'arborescence <code class="filename">/usr/ports</code>.  Chaque
	catégorie possède son propre répertoire, et
	chaque logiciel pré-compilé peut être
	trouvé dans le répertoire <code class="filename">All</code>.</p><p>La structure de répertoires du système de logiciels
	pré-compilés correspond à celle du catalogue
	des logiciels portés; ils travaillent ensemble pour former
	l'intégralité du système de logiciels
	pré-compilés/portés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69058000"></a>5.4.2. Gestion des logiciels pré-compilés</h3></div></div></div><a id="idp69058640" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_info</span>(1)</span></a> est un utilitaire qui liste et décrit les
	divers logiciels pré-compilés installés.
      </p><a id="idp69060816" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info</code></strong>
cvsup-16.1          A general network file distribution system optimized for CV
docbook-1.2         Meta-port for the different versions of the DocBook DTD
...</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_version</span>(1)</span></a> est un utilitaire qui récapitule les
	versions de tous les logiciels pré-compilés
	installés.  Il compare la version du logiciel
	pré-compilé avec la version
	actuelle trouvée dans le catalogue des logiciels portés.
      </p><a id="idp69063888" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_version</code></strong>
cvsup                       =
docbook                     =
...</pre><p>Les symboles dans la seconde colonne indiquent l'âge relatif
	de la version installée et de la version disponible dans le
	catalogue des logiciels portés local.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Symbole</th><th>Signification</th></tr></thead><tbody><tr><td>=</td><td>La version du logiciel
	      pré-compilé installée est équivalente
	      à celle de celui trouvé dans le
	      catalogue des logiciels portés local.</td></tr><tr><td>&lt;</td><td>La version installée est plus ancienne que celle
	  disponible dans le catalogue des logiciels portés.</td></tr><tr><td>&gt;</td><td>La version installée est plus
	  récente que celle trouvée dans le catalogue local des
	  logiciels portés. (le catalogue local des logiciels
	  portés est probablement ancien)</td></tr><tr><td>?</td><td>Le logiciel pré-compilé
	  ne peut être
	  trouvé dans l'index du catalogue des logiciels
	  portés.  (Cela peut se produire quand, par exemple,
	  un logiciel installé est supprimé du catalogue des logiciels
	  portés ou renommé.)</td></tr><tr><td>*</td><td>Il y a de multiples versions de ce
	  logiciel pré-compilé.</td></tr><tr><td>!</td><td>Le logiciel installé
	      existe dans l'index mais pour une raison inconnue,
	      <code class="command">pkg_version</code> a été
	      incapable de comparer le numéro de version du
	      paquetage installé avec l'entrée
	      correspondante dans l'index.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69095760"></a>5.4.3. Effacer un logiciel pré-compilé</h3></div></div></div><a id="idp69096400" class="indexterm"></a><a id="idp69097296" class="indexterm"></a><p>Pour désinstaller un logiciel pré-compilé
	précédemment installé, utilisez l'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete xchat-1.7.1</code></strong></pre><p>Notez que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a> a besoin du nom complet du
	paquetage et du numéro de version; la commande
	précédente n'aurait pas fonctionné avec
	<em class="replaceable"><code>xchat</code></em> à la place de
	<em class="replaceable"><code>xchat-1.7.1</code></em>.  It est cependant
	facile de retrouver la version du paquetage installé
	à l'aide de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_version</span>(1)</span></a>.  Vous
	pouvez à la place simplement utiliser un joker:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete xchat\*</code></strong></pre><p>dans ce cas, tous les logiciels dont le nom commence par
	<code class="literal">xchat</code> seront supprimés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69105232"></a>5.4.4. Divers</h3></div></div></div><p>Toute l'information sur les logiciels pré-compilés
	est stockée dans le répertoire
	<code class="filename">/var/db/pkg</code>.  La liste des fichiers
	installés pour chaque logiciel pré-compilé
	peut être trouvée dans des fichiers de ce
	répertoire.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-using"></a>5.5. Utiliser le catalogue des logiciels portés</h2></div></div></div><p>Les sections suivantes fournissent des instructions de base
      sur l'utilisation du catalogue des logiciels portés pour installer
      et désinstaller des programmes sur votre système.
      Une description détaillée des cibles <code class="command">make</code> et
      de variables d'environnement est disponible dans la page de
      manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-tree"></a>5.5.1. Obtenir le catalogue des logiciels portés</h3></div></div></div><p>Avant que vous puissiez installer des logiciels portés, vous
	devez d'abord récupérer le catalogue des logiciels
	portés&#8212; qui est essentiellement un ensemble de
	<code class="filename">Makefiles</code>, de correctifs, et de fichiers de
	description habituellement placés dans
	<code class="filename">/usr/ports</code>.</p><p>Quand vous avez installé votre système FreeBSD,
	<span class="application">sysinstall</span> vous a demandé si vous
	aimeriez installer le catalogue des logiciels portés.  Si vous
	avez choisi non, vous pouvez suivre ces instructions pour
	obtenir le catalogue des logiciels portés:</p><div class="procedure"><a id="idp69112016"></a><div class="procedure-title">Procédure 5.1. La méthode CVSup</div><p>C'est une méthode rapide pour récupérer
	  le catalogue des
	  logiciels portés en utilisant le protocole <span class="application">CVSup</span>.
	  Si vous voulez en apprendre
	  plus au sujet de <span class="application">CVSup</span>, lisez la
	  section <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">Utiliser CVSup</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'implémentation du protocole
	    <span class="application">CVSup</span> présente dans le système
	    de base de FreeBSD se nomme <span class="application">csup</span>.</p></div><p>Assurez-vous que le répertoire <code class="filename">/usr/ports</code> est vide avant
	  d'utiliser <span class="application">csup</span> pour la
	  première fois.  Si vous avez déjà un
	  catalogue des logiciels portés, obtenu à partir
	  d'une autre source, <span class="application">csup</span>
	  n'effacera pas les correctifs qui ont été
	  supprimés.</p><ol class="procedure" type="1"><li class="step"><p>Exécuter la commande <code class="command">csup</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>csup -L 2 -h cvsup.FreeBSD.org /usr/share/examples/cvsup/ports-supfile</code></strong></pre><p>Remplacez <em class="replaceable"><code>cvsup.FreeBSD.org</code></em>
	    avec un serveur <span class="application">CVSup</span> proche de
	    vous.  Voir <a class="link" href="#cvsup-mirrors" title="A.5.7. Sites CVSup">Sites
	    CVSup</a> (<a class="xref" href="#cvsup-mirrors" title="A.5.7. Sites CVSup">Section A.5.7, « Sites CVSup »</a>) pour une
	    liste complète des sites miroirs.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains peuvent vouloir utiliser leur propre
	      <code class="filename">ports-supfile</code>, par exemple pour
	      éviter d'avoir à passer le serveur
	      <span class="application">CVSup</span> sur la ligne de
	      commande.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>Dans ce cas, en tant que
		  <code class="systemitem">root</code>, copier
		  <code class="filename">/usr/share/examples/cvsup/ports-supfile</code>
		  à un nouvel emplacement, comme
		  <code class="filename">/root</code> ou votre répertoire
		  d'utilisateur.</p></li><li class="step"><p>Editez
		  <code class="filename">ports-supfile</code>.</p></li><li class="step"><p>Remplacez
		  <em class="replaceable"><code>CHANGE_THIS.FreeBSD.org</code></em>
		  avec un serveur <span class="application">CVSup</span>
		  proche de vous.  Voir <a class="link" href="#cvsup-mirrors" title="A.5.7. Sites CVSup">Sites CVSup</a> (<a class="xref" href="#cvsup-mirrors" title="A.5.7. Sites CVSup">Section A.5.7, « Sites CVSup »</a>) pour une liste
		  complète des sites miroirs.</p></li><li class="step"><p>Maintenant pour lancer <code class="command">csup</code>,
		  utilisez ce qui suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>csup -L 2 /root/ports-supfile</code></strong></pre></li></ol></div></div></li><li class="step"><p>L'exécution ultérieure de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a>
	    téléchargera et appliquera
	    tous les changements récents à
	    votre catalogue des logiciels portés sans
	    pour autant recompiler vos logiciels.</p></li></ol></div><div class="procedure"><a id="idp69141584"></a><div class="procedure-title">Procédure 5.2. La méthode Portsnap</div><p><span class="application">Portsnap</span> est un
	  système alternatif de distribution du catalogue des
	  logiciels portés.
	  Veuillez vous reporter à la section

	  <a class="link" href="#portsnap" title="A.6. Utiliser Portsnap">Utiliser Portsnap</a> pour une
	  description détaillée de toutes les
	  caractéristiques de
	  <span class="application">Portsnap</span>.</p><ol class="procedure" type="1"><li class="step"><p>Téléchargez un instantané
	    compressé du catalogue des logiciels portés
	    dans le répertoire <code class="filename">/var/db/portsnap</code>.  Vous pouvez
	    vous déconnecter de l'Internet, si vous le
	    désirez, après cette opération:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong></pre></li><li class="step"><p>Si vous exécutez
	    <span class="application">Portsnap</span> pour la première
	    fois, il faut extraire l'instantané dans le
	    répertoire <code class="filename">/usr/ports</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong></pre><p>Si votre répertoire <code class="filename">/usr/ports</code> contient
	    déjà une version du catalogue des logiciels
	    portés et que vous désirez juste mettre
	    à jour, utilisez plutôt la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre></li></ol></div><div class="procedure"><a id="idp69154512"></a><div class="procedure-title">Procédure 5.3. La méthode Sysinstall</div><p>Cette méthode implique l'utilisation de
	  <span class="application">sysinstall</span> pour installer le
	  catalogue des logiciels portés à partir du
	  disque d'installation.  Il faut noter que la version du
	  catalogue qui sera installée est la version datant de
	  la publication de votre disque d'installation.  Si vous
	  disposez d'un accès à l'Internet, vous devriez
	  toujours utiliser une des méthodes
	  précédemment exposées.</p><ol class="procedure" type="1"><li class="step"><p>En tant que <code class="systemitem">root</code>, lancez
	    <code class="command">sysinstall</code>
	    comme montré
	    ci-dessous:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysinstall</code></strong></pre></li><li class="step"><p>Faites défiler l'écran vers le bas et
	    sélectionnez <span class="guimenuitem">Configure</span>,
	    appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p></li><li class="step"><p>Faites défiler l'écran vers le bas et
	    sélectionnez <span class="guimenuitem">Distributions</span>,
	    appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p></li><li class="step"><p>Faites défiler l'écran vers le bas jusqu'à
	    <span class="guimenuitem">ports</span>, appuyez sur
	    <span class="keycap"><strong>Espace</strong></span>.</p></li><li class="step"><p>Remontez jusqu'à <span class="guimenuitem">Exit</span>,
	    appuyez sur <span class="keycap"><strong>Entrée</strong></span>.</p></li><li class="step"><p>Choisissez le support d'installation désiré,
	    comme un CDROM, par FTP, etc.</p></li><li class="step"><p>Remontez jusqu'à <span class="guimenuitem">Exit</span>
	    et appuyez sur <span class="keycap"><strong>Enter</strong></span>.</p></li><li class="step"><p>Appuyez sur la touche <span class="keycap"><strong>X</strong></span> pour quitter
	    <span class="application">sysinstall</span>.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-skeleton"></a>5.5.2. Installation de logiciels portés</h3></div></div></div><a id="idp69178192" class="indexterm"></a><p>La première chose qui devrait être expliquée
	quand on aborde le catalogue des logiciels portés est ce que
	l'on entend par &#8220;squelette&#8221;.  En bref, un squelette
	est un ensemble minimal de fichiers qui indique à votre
	système FreeBSD comment compiler et installer proprement un
	programme.  Chaque squelette contient:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un fichier <code class="filename">Makefile</code>.  Le fichier
	    <code class="filename">Makefile</code> contient les diverses
	    déclarations qui indiquent comment l'application devrait
	    être compilée et où elle devrait être
	    installée sur votre système.</p></li><li class="listitem"><p>Un fichier <code class="filename">distinfo</code>.  Ce fichier
	    contient l'information à propos des fichiers qui doivent
	    être téléchargés pour compiler le
	    logiciel, et leurs sommes de contrôle (en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a>), pour s'assurer que
	    ces fichiers n'ont pas été
	    corrompus durant le téléchargement.</p></li><li class="listitem"><p>Un répertoire <code class="filename">files</code>.
	    Ce répertoire
	    contient les correctifs pour permettre la compilation et
	    l'installation du programme sur votre système FreeBSD.  Les
	    correctifs sont à la base de petits fichiers qui indiquent
	    des modifications sur des fichiers particuliers.  Ils sont
	    sous forme de fichiers texte, qui disent &#8220;Effacer la
	    ligne 10&#8221; ou &#8220;Modifier la ligne 26
	    par...&#8221;.  Les correctifs sont également connus sous le
	    nom de &#8220;diffs&#8221; car ils sont
	    générés par le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p><p>Ce répertoire peut également contenir d'autres
	    fichiers utilisés pour la compilation du logiciel
	    porté.</p></li><li class="listitem"><p>Un fichier <code class="filename">pkg-descr</code>.  C'est une
	    description plus détaillée du programme, souvent en
	    plusieurs lignes.</p></li><li class="listitem"><p>Un fichier <code class="filename">pkg-plist</code>.  C'est une
	    liste de tous les fichiers qui seront installés par le
	    logiciel porté.  Il indique également au
	    système des logiciels portés quels fichiers
	    sont à effacer lors d'une désinstallation.</p></li></ul></div><p>Certains logiciels portés utilisent d'autres fichiers,
	comme <code class="filename">pkg-message</code>.  Le catalogue des
	logiciels portés utilise ces fichiers pour faire face à
	certaines situations spéciales.  Si vous désirez plus
	de détails
	au sujet de ces fichiers, et sur les logiciels portés en
	général, consultez le <a class="link" href="../../../../doc/en_US.ISO8859-1/books/porters-handbook/index.html" target="_top">Manuel du développeur de
	logiciels portés</a>.</p><p>Le logiciel porté contient les instructions pour
	compiler le code source, mais ne contient pas le code source.
	Vous pouvez obtenir le code source à partie d'un CDROM ou de
	l'Internet.  Le code source est distribué de la façon dont
	l'auteur le désire.  Fréquemment c'est une archive tar
	compressée avec gzip, mais elle pourra être
	compressée avec un
	autre outil ou même non compressée.  Le code source d'un
	programme, peu importe la forme sous laquelle il est distribué,
	est appelé un fichier &#8220;distfile&#8221;.  Les deux
	méthodes pour l'installation d'un logiciel porté
	pour FreeBSD sont décrites ci-dessous.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous devez avoir ouvert une session sous l'utilisateur
	  <code class="systemitem">root</code> pour installer des logiciels
	  portés.</p></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avant d'installer un logiciel porté, vous devez
	  vous assurer d'avoir un catalogue des logiciels portés
	  à jour et vous devez consulter <code class="uri"><a class="uri" href="http://vuxml.freebsd.org/" target="_top">http://vuxml.freebsd.org/</a></code> pour les
	  problèmes de sécurité relatifs à
	  votre logiciel.</p><p xmlns="http://www.w3.org/1999/xhtml">Un contrôle des problèmes de
	  sécurité peut être effectué
	  automatiquement par <span class="application">portaudit</span>
	  avant toute nouvelle installation d'application.  Cet outil
	  peut être trouvé dans le catalogue des
	  logiciels porté (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/portaudit/pkg-descr">security/portaudit</a>).  Vous pouvez
	  lancer <code class="command">portaudit -F</code> avant l'installation
	  d'un nouveau logiciel porté, pour
	  télécharger la base de données
	  actualisée des vulnérabilités.  Un
	  audit de sécurité et une mise à jour de
	  la base de données sera effectuée lors du
	  contrôle quotidien de sécurité de la
	  machine.  Pour plus d'informations, lisez les pages de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portaudit&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portaudit</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>.</p></div><p>Le catalogue des logiciels portés suppose que vous
	  disposez d'une connection active à l'Internet.  Si ce n'est
	  pas le cas, vous devez placer manuellement une copie
	  du distfile dans le répertoire <code class="filename">/usr/ports/distfiles</code>.</p><p>Pour commencer, rendez-vous dans le répertoire du logiciel
	  porté que vous voulez installer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/sysutils/lsof</code></strong></pre><p>Une fois à l'intérieur du répertoire
	  <code class="filename">lsof</code> vous verrez le squelette du logiciel
	  porté.  L'étape suivante est de compiler
	  (également appelé la
	  &#8220;construction&#8221;) le logiciel porté.  Cela est fait en tapant
	  simplement <code class="command">make</code> à l'invite.  Une fois que
	  c'est fait, vous devriez voir quelque chose comme ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
&gt;&gt; lsof_4.57D.freebsd.tar.gz doesn't seem to exist in /usr/ports/distfiles/.
&gt;&gt; Attempting to fetch from ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/.
===&gt;  Extracting for lsof-4.57
...
[extraction output snipped]
...
&gt;&gt; Checksum OK for lsof_4.57D.freebsd.tar.gz.
===&gt;  Patching for lsof-4.57
===&gt;  Applying FreeBSD patches for lsof-4.57
===&gt;  Configuring for lsof-4.57
...
[configure output snipped]
...
===&gt;  Building for lsof-4.57
...
[compilation output snipped]
...
<code class="prompt">#</code></pre><p>Notez qu'une fois la compilation terminée, vous vous
	  retrouvez face à l'invite.  L'étape suivante est
	  d'installer
	  le logiciel porté.  Afin de l'installer, vous devez juste
	  ajouter un mot à la commande <code class="command">make</code>, et ce
	  mot est <code class="buildtarget">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong>
===&gt;  Installing for lsof-4.57
...
[installation output snipped]
...
===&gt;   Generating temporary packing list
===&gt;   Compressing manual pages for lsof-4.57
===&gt;   Registering installation for lsof-4.57
===&gt;  SECURITY NOTE:
      This port has installed the following binaries which execute with
      increased privileges.
<code class="prompt">#</code></pre><p>Une fois de retour à l'invite, vous devriez être
	  en mesure d'exécuter l'application que vous venez juste
	  d'installer.
	  Comme <code class="command">lsof</code> est un programme qui tourne avec
	  des privilèges accrus, un avertissement sur la
	  sécurité est affiché.  Durant la compilation
	  et l'installation de logiciels portés, vous devriez faire
	  attention à tout avertissement qui
	  pourrait apparaître.</p><p>Il est conseillé de supprimer le sous-répertoire de
	  travail, qui contient tous les fichiers temporaires utilisés
	  lors de la compilation.  Non seulement cela consomme de
	  l'espace disque, mais cela posera problème plus tard lors de
	  la mise à jour vers une nouvelle version du logiciel
	  porté.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make clean</code></strong>
===&gt;  Cleaning for lsof-4.57
<code class="prompt">#</code></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez vous économiser deux étapes
	    supplémentaires en lançant juste
	    <code class="command">make install clean</code> à la place de
	    <code class="command">make</code>, <code class="command">make install</code>
	    et <code class="command">make clean</code>
	    sous la forme de trois étapes séparées.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains interpréteurs de commandes maintiennent un
	    cache des commandes qui sont disponibles dans les
	    répertoires listés dans la variable d'environnement
	    <code class="envar">PATH</code>, pour accélérer les
	    opérations de
	    recherche des fichiers exécutables de ces commandes.  Si
	    vous utilisez un de ces interpréteurs de commandes, vous
	    pourrez avoir à utiliser la commande
	    <code class="command">rehash</code> après l'installation d'un logiciel
	    porté, avant que la commande fraîchement
	    installée ne puisse être utilisée.
	    Cette commande fonctionnera pour les interpréteurs
	    de commandes comme <code class="command">tcsh</code>.  Utilisez la
	    commande <code class="command">hash -r</code> pour les
	    interpréteurs tels que <code class="command">sh</code>.
	    Consultez la documentation de votre interpréteur de
	    commandes pour plus d'information.</p></div><p>Certains DVD-ROMs comme le FreeBSD Toolkit de <a class="link" href="http://www.freebsdmall.com/" target="_top">FreeBSD Mall</a>
	  contiennent des distfiles.
	  Ils peuvent être utilisés avec le catalogue des logiciels
	  portés.
	  Montez le DVD-ROM sous <code class="filename">/cdrom</code>.  Si vous
	  utilisez un point de montage différent, positionnez la
	  variable <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> <code class="varname">CD_MOUNTPTS</code>.  Les
	  distfiles nécessaires seront automatiquement utilisés s'ils
	  sont présent sur le disque.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Soyez conscient que les licences de quelques logiciels
	    portés n'autorisent pas leur présence sur le
	    CD-ROM.  Cela peut être dû à la
	    nécessité de remplir un formulaire
	    d'enregistrement avant le téléchargement, ou
	    que la redistribution n'est pas permise, ou toute autre
	    raison.  Si vous désirez installer un logiciel
	    porté qui n'est pas disponible sur le CD-ROM, vous
	    devrez vous connecter afin de récupérer les
	    fichiers nécessaires.</p></div><p>Le catalogue des logiciels portés utilise <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fetch</span>(1)</span></a>
	  pour télécharger les fichiers, qui respecte diverses
	  variables d'environnement, dont <code class="envar">FTP_PASSIVE_MODE</code>,
	  <code class="envar">FTP_PROXY</code>, et <code class="envar">FTP_PASSWORD</code>.  Il
	  se peut que vous ayez besoin de configurer une ou plusieurs
	  de ces dernières si vous êtes derrière un
	  coupe-feu, ou devez utiliser un proxy FTP/HTTP.
	  Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fetch&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">fetch</span>(3)</span></a> pour la liste
	  complète des variables.</p><p>Pour les utilisateurs qui ne peuvent rester
	  connectés à l'Internet indéfiniment, il
	  existe la commande <code class="command">make
	  fetch</code>.  Exécutez
	  cette commande à la base du catalogue des logiciels
	  portés (<code class="filename">/usr/ports</code>) et les fichiers
	  nécessaires seront téléchargés.
	  Cette commande fonctionnera également dans les
	  sous-répertoires du catalogue, par exemple: <code class="filename">/usr/ports/net</code>.  Notez que si un
	  logiciel porté dépend de bibliothèques
	  particulières ou d'autres logiciels portés,
	  cette commande de récupérera
	  <span class="emphasis"><em>pas</em></span> les sources de ces logiciels.
	  Remplacez <code class="buildtarget">fetch</code> par
	  <code class="buildtarget">fetch-recursive</code> si vous voulez
	  récupérer également les sources des
	  logiciels dont dépend un logiciel
	  porté.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez compiler tous les logiciels d'une
	    catégorie ou de l'ensemble du catalogue en
	    exécutant la commande <code class="command">make</code> dans un
	    répertoire de base, juste comme la commande
	    <code class="command">make fetch</code>
	    précédente.  C'est, cependant, une idée
	    dangereuse étant donné que certains logiciels
	    portés ne peuvent coexister.  Dans d'autres cas,
	    certains logiciels portés peuvent installer des
	    fichiers différents ayant le même
	    nom.</p></div><p>Dans de rares cas les utilisateurs peuvent vouloir
	  récupérer les archives à partir d'un
	  site différent du <code class="varname">MASTER_SITES</code> par
	  défaut (l'emplacement par défaut à
	  partir duquel les fichiers sont
	  téléchargés).  Vous pouvez surcharger
	  l'option <code class="varname">MASTER_SITES</code> avec la commande
	  suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/répertoire</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make MASTER_SITE_OVERRIDE= \
ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/ fetch</code></strong></pre><p>Dans cet exemple nous modifions la valeur par
	  défaut de l'option <code class="varname">MASTER_SITES</code>
	  pour <code class="systemitem">ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains logiciels portés autorisent (ou
	    même nécessitent) des options de compilation
	    qui permettent l'activation/désactivation de parties
	    de l'application qui ne sont pas nécessaires, de
	    certaines options de sécurité, et autres
	    personnalisations.  Quelques noms de logiciels viennent
	    immédiatement à l'esprit: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a>, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/gpgme/pkg-descr">security/gpgme</a>, et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/sylpheed-claws/pkg-descr">mail/sylpheed-claws</a>.  Un message
	    sera affiché quand de telles options sont
	    disponibles.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69272144"></a>5.5.2.1. Modifier les répertoires par défaut des
	  logiciels portés</h4></div></div></div><p>Il est parfois utile (ou obligatoire) d'utiliser des
	  répertoires de travail ou cible différents.
	  Les variables
	  <code class="varname">WRKDIRPREFIX</code> et <code class="varname">PREFIX</code>
	  permettent de modifier les répertoires par
	  défaut.  Par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=/usr/home/example/ports install</code></strong></pre><p>compilera le logiciel dans le répertoire
	  <code class="filename">/usr/home/example/ports</code> et
	  installera tout dans <code class="filename">/usr/local</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make PREFIX=/usr/home/example/local install</code></strong></pre><p>le compilera dans <code class="filename">/usr/ports</code> et l'installera dans
	  <code class="filename">/usr/home/example/local</code>.</p><p>Et bien sûr</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WRKDIRPREFIX=../ports PREFIX=../local install</code></strong></pre><p>combinera les deux (c'est trop long pour tenir sur cette
	  page, mais cela devrait vous donner une idée
	  générale).</p><p>Alternativement, ces variables peuvent également
	  être configurées dans votre environnement.
	  Consultez la page de manuel de votre interpréteur de
	  commandes pour des instructions sur la procédure
	  à suivre.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69280464"></a>5.5.2.2. Travailler avec <code class="command">imake</code></h4></div></div></div><p>Certains logiciels portés qui utilisent
	  <code class="command">imake</code> (une partie du système X
	  Window) ne fonctionnent pas correctement avec la variable
	  <code class="varname">PREFIX</code>, et insisteront pour s'installer
	  sous <code class="filename">/usr/X11R6</code>.  De
	  façon similaire, certains logiciels Perl ignorent
	  <code class="varname">PREFIX</code> et s'installent dans
	  l'arborescence Perl.  Faire en sorte que ces logiciels
	  portés respectent <code class="varname">PREFIX</code> est une
	  tâche difficile voire impossible.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69283920"></a>5.5.2.3. Reconfigurer les logiciels portés</h4></div></div></div><p>Lors de la compilation de certains logiciels
	  portés, un menu <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ncurses&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ncurses</span>(3)</span></a> pourra s'afficher et
	  à partir de celui-ci vous pourrez sélectionner
	  certaines options de compilation.  Il n'est pas inhabituel
	  pour les utilisateurs de vouloir revoir ce menu pour
	  ajouter, supprimer, ou modifier ces options après la
	  compilation d'un logiciel.  Il y a plusieurs manières
	  pour y parvenir.  Une possibilité est de se rendre
	  dans le répertoire contenant le logiciel porté
	  et de taper <code class="command">make
	  config</code>, qui affichera
	  à nouveau le menu avec les mêmes options
	  sélectionnées.  Une autre possibilité
	  est d'utiliser <code class="command">make
	  showconfig</code> qui vous
	  affichera toutes les options de configuration pour le
	  logiciel porté.  Enfin, une autre possibilité
	  est d'exécuter <code class="command">make
	  rmconfig</code> qui supprimera
	  toutes les options sélectionnées et permettra
	  donc de repartir à zéro.  Toutes ces options,
	  et bien d'autres, sont détaillées dans la page
	  de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ports&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">ports</span>(7)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-removing"></a>5.5.3. Supprimer des logiciels portés installés</h3></div></div></div><a id="idp69296976" class="indexterm"></a><p>Maintenant que vous savez comment installer des logiciels
	portés, vous vous demandez probablement comment les effacer,
	juste au cas où vous en installez un et plus tard vous vous
	apercevez que vous n'avez pas installé le bon logiciel
	porté.  Nous désinstallerons notre exemple
	précédent (qui était
	<code class="command">lsof</code> pour ceux d'entre vous qui n'ont pas
	suivi).  Les logiciels portés sont supprimés de
	la même manière que pour les logiciels
	pré-compilés (comme décrit dans la
	section <a class="link" href="#packages-using" title="5.4. Utiliser le système des logiciels pré-compilés">Utiliser le
	système des logiciels
	pré-compilés</a>) en utilisant la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_delete&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_delete</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_delete lsof-4.57</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-upgrading"></a>5.5.4. Mise à jour des logiciels portés</h3></div></div></div><a id="idp69301968" class="indexterm"></a><p>Tout d'abord, listez les logiciels portés
	périmés dont une nouvelle version est disponible
	dans le catalogue des logiciels portés à l'aide de
	la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_version&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_version</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_version -v</code></strong></pre><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-file-updating"></a>5.5.4.1. <code class="filename">/usr/ports/UPDATING</code></h4></div></div></div><p>Une fois que vous avez mis à jour le catalogue
	  des logiciels portés, avant de tenter la mise à
	  jour d'un logiciel porté, vous devrez consulter le
	  fichier <code class="filename">/usr/ports/UPDATING</code>.  Ce fichier
	  décrit les divers problèmes et les étapes
	  supplémentaires que les utilisateurs pourront
	  rencontrer ou devront effectuer lors de la mise
	  à jour un logiciel porté, comme la
	  modification de format de fichiers, le changement des
	  emplacements des fichiers de configuration, ou des
	  incompatibilités avec les versions
	  antérieures.</p><p>Si le contenu du fichier <code class="filename">UPDATING</code>
	  prime même s'il est en est en contradiction avec des
	  informations présentées ici.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portupgrade"></a>5.5.4.2. Mise à jour des logiciels portés à
	  l'aide de portupgrade</h4></div></div></div><a id="idp69316944" class="indexterm"></a><p>Le logiciel <span class="application">portupgrade</span> a
	été conçu pour une mise à jour
	aisée des logiciels portés installés.  Il
	est disponible via le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>.  Installez-le
	de la même manière que pour n'importe quel autre
	logiciel en employant la commande <code class="command">make
	install clean</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portupgrade</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Ensuite, parcourez la liste des logiciels installés
	avec la commande <code class="command">pkgdb -F</code> et corrigez
	toutes les inconsistances qu'il signale.  C'est une bonne
	idée d'effectuer ce contrôle
	régulièrement avant chaque mise à
	jour.</p><p>En lançant <code class="command">portupgrade -a</code>,
	<span class="application">portupgrade</span> mettra à jour
	tous les logiciels portés périmés
	installés sur votre système.  Ajoutez
	l'indicateur <code class="option">-i</code> si vous voulez être
	consulté pour confirmer chaque mise à jour
	individuelle.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -ai</code></strong></pre><p>Si vous désirez mettre à jour qu'une seule
	application bien particulière et non pas
	l'intégralité des applications, utilisez la
	commande: <code class="command">portupgrade
	nom_du_logiciel_porté</code>.
	Ajoutez l'option <code class="option">-R</code> si
	<span class="application">portupgrade</span> doit mettre à
	jour en premier lieu tous les logiciels portés
	nécessaires à l'application.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -R firefox</code></strong></pre><p>Pour utiliser les versions pré-compilées
	plutôt que les logiciels portés pour
	l'installation, utilisez l'option <code class="option">-P</code>.  Avec
	cette option <span class="application">portupgrade</span> cherche
	les répertoires locaux listé dans la variable
	<code class="envar">PKG_PATH</code>, ou récupère les
	paquetages à partir d'un site distant s'ils ne sont pas
	trouvés localement.  Si les paquetages ne peuvent pas
	être trouvés localement ou
	récupérés à distance,
	<span class="application">portupgrade</span> utilisera les logiciels
	portés.  Pour éviter l'usage des logiciels
	portés, spécifiez l'option
	<code class="option">-PP</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -PP gnome2</code></strong></pre><p>Pour juste récupérer les sources (ou les
	paquetages, si l'option <code class="option">-P</code> est
	utilisée) sans compiler ni installer quelque chose,
	utilisez <code class="option">-F</code>.  Pour plus d'informations
	consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portupgrade&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">portupgrade</span>(1)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmanager"></a>5.5.4.3. Mise à jour des logiciels portés à
	  l'aide de Portmanager</h4></div></div></div><a id="idp69337296" class="indexterm"></a><p><span class="application">Portmanager</span> est un autre
	  utilitaire de mise à jour aisée des logiciels
	  portés installés.  Il est disponible via le
	  logiciel portés <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmanager/pkg-descr">ports-mgmt/portmanager</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmanager</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Tous les logiciels portés installés
	  peuvent être mis à jour en utilisant cette
	  simple commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager -u</code></strong></pre><p>Vous pouvez ajouter l'option <code class="option">-ui</code> pour
	  être sollicité pour une confirmation à
	  chaque opération qu'effectuera
	  <span class="application">Portmanager</span>.
	  <span class="application">Portmanager</span> peut également
	  être employé pour installer de nouveaux
	  logiciels portés sur le système.
	  Contrairement à la commande <code class="command">make install
	  clean</code> habituelle, il mettra à jour toutes
	  les dépendances avant de compiler et d'installer le
	  logiciel sélectionné.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager x11/gnome2</code></strong></pre><p>Si des problèmes concernant les
	  dépendances du logiciel porté
	  sélectionné apparaissent, vous pouvez utiliser
	  <span class="application">Portmanager</span> pour toutes les
	  recompiler dans le bon ordre.  Cette recompilation
	  achevée, le logiciel porté en question peut
	  alors être à son tour recompilé.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmanager graphics/gimp -f</code></strong></pre><p>Pour plus d'information, consultez la page de manuel
	  de <span class="application">Portmanager</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portmaster"></a>5.5.4.4. Mise à jour des logiciels portés à
	  l'aide de Portmaster</h4></div></div></div><a id="idp69348432" class="indexterm"></a><p><span class="application">Portmaster</span> est un autre
	  utilitaire destiné à la mise à jour des
	  logiciels installés.
	  <span class="application">Portmaster</span> a été
	  conçu pour utiliser les outils présents dans
	  le système de <span class="quote">« <span class="quote">base</span> »</span> (il ne
	  dépend pas d'un autre logiciel porté) et
	  utilise les informations contenues dans le répertoire
	  <code class="filename">/var/db/pkg/</code> pour
	  déterminer quel logiciel doit être mis à
	  jour.  Il est disponible à partir du logiciel
	  porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portmaster/pkg-descr">ports-mgmt/portmaster</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portmaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p><span class="application">Portmaster</span> répartit
	  les logiciels portés en quatre
	  catégories:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>logiciels dits <span class="quote">« <span class="quote">Root</span> »</span> (pas de
	      dépendance, aucun logiciel n'en
	      dépend);</p></li><li class="listitem"><p>logiciels dits <span class="quote">« <span class="quote">Trunk</span> »</span> (pas de
	      dépendance, d'autres logiciels en
	      dépendent);</p></li><li class="listitem"><p>logiciels dits <span class="quote">« <span class="quote">Branch</span> »</span> (ont des
	      dépendances, d'autres logiciels en
	      dépendent);</p></li><li class="listitem"><p>logiciels dits <span class="quote">« <span class="quote">Leaf</span> »</span> (ont des
	      dépendances, aucun logiciel n'en
	      dépend).</p></li></ul></div><p>Vous pouvez lister tous les logiciels installés
	  et rechercher les mises à jour en utilisant l'option
	  <code class="option">-L</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -L</code></strong>
===&gt;&gt;&gt; Root ports (No dependencies, not depended on)
===&gt;&gt;&gt; ispell-3.2.06_18
===&gt;&gt;&gt; screen-4.0.3
        ===&gt;&gt;&gt; New version available: screen-4.0.3_1
===&gt;&gt;&gt; tcpflow-0.21_1
===&gt;&gt;&gt; 7 root ports
...
===&gt;&gt;&gt; Branch ports (Have dependencies, are depended on)
===&gt;&gt;&gt; apache-2.2.3
        ===&gt;&gt;&gt; New version available: apache-2.2.8
...
===&gt;&gt;&gt; Leaf ports (Have dependencies, not depended on)
===&gt;&gt;&gt; automake-1.9.6_2
===&gt;&gt;&gt; bash-3.1.17
        ===&gt;&gt;&gt; New version available: bash-3.2.33
...
===&gt;&gt;&gt; 32 leaf ports

===&gt;&gt;&gt; 137 total installed ports
        ===&gt;&gt;&gt; 83 have new versions available
</pre><p>L'ensemble des logiciels portés installés
	  peut être mis à jour en utilisant cette simple
	  commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -a</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Par défaut
	    <span class="application">Portmaster</span> fera une sauvegarde
	    avant la suppression d'un logiciel porté.  Si
	    l'installation de la nouvelle version se passe
	    correctement, <span class="application">Portmaster</span>
	    supprimera la sauvegarde.  L'option <code class="option">-b</code>
	    demandera à <span class="application">Portmaster</span>
	    de ne pas supprimer automatiquement la sauvegarde.
	    L'ajout de l'option <code class="option">-i</code> lancera
	    <span class="application">Portmaster</span> en mode interactif,
	    vous serez alors sollicité avant la mise à
	    jour de chaque logiciel.</p></div><p>Si vous rencontrez des erreurs lors du processus de mise
	  à jour, vous pouvez utiliser l'option
	  <code class="option">-f</code> pour mettre à jour ou recompiler
	  tous les logiciels installés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster -af</code></strong></pre><p>Vous pouvez également employer
	  <span class="application">Portmaster</span> pour installer de
	  nouveaux logiciels portés en mettant à jour
	  toutes les dépendances avant la compilation et
	  l'installation du nouveau logiciel:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portmaster shells/bash</code></strong></pre><p>Pour plus d'information veuillez consulter la page de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portmaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portmaster</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ports-disk-space"></a>5.5.5. Logiciels portés et espace disque</h3></div></div></div><a id="idp69383248" class="indexterm"></a><p>A la longue, l'utilisation du catalogue des logiciels
	portés consommera rapidement votre espace disque.
	Après la compilation et l'installation de logiciels
	à partir du catalogue des logiciels portés, vous
	devriez toujours penser à supprimer
	les répertoires de travail temporaires, <code class="filename">work</code>, en utilisant la commande
	<code class="command">make clean</code>.  Vous pouvez
	balayer l'intégralité du catalogue des logiciels
	portés pour supprimer tous les répertoires
	temporaires oubliés précédement, employez
	alors la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -C</code></strong></pre><p>Avec le temps, vous accumulerez beaucoup de fichiers
	sources obsolètes dans le répertoire <code class="filename">distfiles</code>.  Vous pouvez les
	supprimer manuellement, ou vous pouvez utiliser la commande
	suivante pour effacer toutes les sources qui ne correspondent
	plus à des logiciels portés
	d'actualité:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsclean -D</code></strong></pre><p>Ou pour supprimer les fichiers sources ne correspondant
	à aucun logiciel installé sur votre
	systèmes.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'utilitaire <code class="command">portsclean</code> fait partie
	  de la suite <span class="application">portupgrade</span>.</p></div><p>Pensez à supprimer les logiciels portés
	installés que vous n'utilisez plus.  Un outil qui
	permet d'automatiser cette tâche est disponible via le
	logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/pkg_cutleaves/pkg-descr">ports-mgmt/pkg_cutleaves</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-nextsteps"></a>5.6. Activités de post-installation</h2></div></div></div><p>Après l'installation d'une nouvelle application vous voudrez
      normalement lire la documentation qui a pu être également
      installée, éditer les fichiers de configuration
      nécessaires, vérifier que l'application est
      lancée au démarrage (si c'est un
      daemon), et ainsi de suite.</p><p>Les étapes que vous devez suivre pour configurer
      chaque application seront bien évidemment différentes.
      Cependant, si vous venez juste d'installer une nouvelle application
      et que vous vous demandez &#8220;Et maintenant?&#8221; les astuces
      suivantes pourront vous aider:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_info&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_info</span>(1)</span></a> pour déterminer quels fichiers
	  ont été installés et à quel endroit.
	  Par exemple, si vous
	  venez juste d'installer FooPackage version 1.0.0, alors la
	  commande</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info -L foopackage-1.0.0 | less</code></strong></pre><p>affichera tous les fichiers installés par le logiciel
	  pré-compilé.  Portez une attention toute
	  particulière aux
	  fichiers dans les répertoires <code class="filename">man/</code>, qui
	  seront des pages de manuel, dans les répertoires
	  <code class="filename">etc/</code> , qui seront des fichiers de
	  configuration, et dans <code class="filename">doc/</code> qui seront de
	  la documentation plus complète.</p><p>Si vous n'êtes pas sûr de la version de
	  l'application qui vient juste d'être installée,
	  une commande comme</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info | grep -i foopackage</code></strong></pre><p>déterminera tous les logiciels
	  pré-compilés installés qui
	  ont <em class="replaceable"><code>foopackage</code></em> dans leur nom.
	  Remplacez <em class="replaceable"><code>foopackage</code></em> dans votre
	  ligne de commande par ce qui convient.</p></li><li class="listitem"><p>Une fois que vous avez identifié où les
	  pages de manuel de l'application ont été
	  installées, consultez-les en utilisant
	  la commande  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=man&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">man</span>(1)</span></a>.  De même, jetez un coup d'oeil
	  aux exemples de fichiers de configuration, et toute autre
	  documentation additionnelle qui peut avoir été
	  fournie.</p></li><li class="listitem"><p>Si l'application a un site web, consultez-le pour de la
	  documentation supplémentaire, des listes de questions
	  fréquemment posées, etc.  Si vous n'êtes
	  pas sûr de
	  l'adresse du site web, elle peut être affichée dans le
	  résultat de la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_info foopackage-1.0.0</code></strong></pre><p>La ligne <code class="literal">WWW:</code>, si elle est présente,
	  devrait donner l'URL du site web de l'application.</p></li><li class="listitem"><p>Les logiciels qui doivent être lancés au
	  démarrage (comme les serveurs Internet) installent
	  généralement un exemple de procédure de
	  lancement dans le répertoire <code class="filename">/usr/local/etc/rc.d</code>.  Vous devriez
	  contrôler si ce fichier est correct et l'éditer
	  ou le renommer si nécessaire.  Consultez la section
	  <a class="link" href="#configtuning-starting-services" title="12.5. Démarrer des services">Démarrer
	  des services</a> pour plus d'informations.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ports-broken"></a>5.7. Que faire avec les logiciels portés ne fonctionnant
      pas?</h2></div></div></div><p>Si vous rencontrez un portage qui ne fonctionne pas, il y a
	certaines choses que vous pouvez faire:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Vérifiez s'il n'y a pas de correctif en attente
	    pour le logiciel porté dans la <a class="link" href="../../../../support.html#gnats" target="_top">base des rapports de
	    bogue</a>.  Si c'est le cas, il se peut que vous
	    puissiez utiliser le correctif proposé.</p></li><li class="listitem"><p>Demandez l'aide du responsable du logiciel porté.
	    Tapez la
	    commande <code class="command">make maintainer</code> ou lisez le
	    fichier <code class="filename">Makefile</code> pour trouver l'adresse
	    électronique du responsable.  Pensez à
	    préciser le nom et la
	    version du logiciel porté (envoyer la ligne
	    <code class="literal">$FreeBSD:</code> du fichier
	    <code class="filename">Makefile</code>) et les messages d'erreurs
	    quand vous écrivez au responsable.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains logiciels portés ne sont pas
	      maintenus par une personne mais par une <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/mailing-list-faq/article.html" target="_top">liste
	      de diffusion</a>.  Plusieurs, si ce n'est toutes, les
	      adresses de ces listes ressemblent à <code class="email">&lt;freebsd-listname@FreeBSD.org&gt;</code>.
	      Veuillez prendre cela en compte en rédigeant vos
	      questions.</p><p xmlns="http://www.w3.org/1999/xhtml">En particulier, les logiciels portés
	      apparaissant comme maintenus par <code class="email">&lt;ports@FreeBSD.org&gt;</code> ne sont
	      en fait maintenus par personne.  Correctifs et aide,
	      s'ils y en a, provient de la communauté qui est
	      abonnée à cette liste de diffusion.  Des
	      volontaires supplémentaires sont toujours les
	      bienvenus!</p></div><p>Si vous n'obtenez pas de réponse, vous pouvez
	    utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> pour soumettre un rapport de
	    bogue (consultez <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/problem-reports/article.html" target="_top">Ecrire
	    des rapports de bogue pour FreeBSD</a>).</p></li><li class="listitem"><p>Corrigez le problème!  Le <a class="link" href="../../../../doc/en_US.ISO8859-1/books/porters-handbook/index.html" target="_top">Manuel du développeur
	    de logiciels portés</a> inclut des informations
	    détaillées sur l'infrastructure des logiciels
	    portés vous permettant de corriger le portage
	    éventuellement défectueux
	    ou même soumettre le votre!</p></li><li class="listitem"><p>Récupérez la version pré-compilée
	    sur un serveur FTP proche de vous.  Le catalogue de
	    &#8220;référence&#8221; des logiciels
	    pré-compilés se trouve
	    sur <code class="systemitem">ftp.FreeBSD.org</code> dans le
	    répertoire
	    <a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/packages/" target="_top">packages</a>,
	    mais vérifiez <span class="emphasis"><em>d'abord</em></span> votre <a class="link" href="http://mirrorlist.FreeBSD.org/" target="_top">miroir
	    local</a>!  Il y a globalement plus de chances que cela marche,
	    que d'essayez de compiler à partir des sources, et cela va
	    également beaucoup plus vite.  Utilisez le programme
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> pour installer le logiciel
	    pré-compilé sur votre système.</p></li></ol></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11"></a>Chapitre 6. Le système X Window</h2></div><div><span class="authorgroup">Mis à jour pour le serveur X11 d'X.Org par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ken</span> <span class="surname">Tom</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#x11-synopsis">6.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#x-understanding">6.2. Comprendre X</a></span></dt><dt><span class="sect1"><a href="#x-install">6.3. Installer X11</a></span></dt><dt><span class="sect1"><a href="#x-config">6.4. Configuration d'X11</a></span></dt><dt><span class="sect1"><a href="#x-fonts">6.5. Utilisation des polices de caractères sous X11</a></span></dt><dt><span class="sect1"><a href="#x-xdm">6.6. Le gestionnaire de procédures de connexions graphiques
      - &#8220;X Display Manager&#8221;</a></span></dt><dt><span class="sect1"><a href="#x11-wm">6.7. Environnements de travail</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x11-synopsis"></a>6.1. Synopsis</h2></div></div></div><p>FreeBSD utilise X11 pour fournir aux
      utilisateurs une interface graphique puissante.
      X11 est une version libre du système X Window qui est
      implémentée dans <span class="application">Xorg</span>
      et <span class="application"><span class="trademark">XFree86</span>&#8482;</span> (et d'autres logiciels
      qui ne seront pas abordés ici).  Les versions de FreeBSD
      jusqu'à FreeBSD 5.2.1-RELEASE
      utilisent par défaut <span class="application"><span class="trademark">XFree86</span>&#8482;</span>,
      le serveur X11 publié par le projet <span class="trademark">XFree86</span>&#8482;.  Depuis
      FreeBSD 5.3-RELEASE, la version officielle par défaut
      d'X11 a été remplacée par
      <span class="application">Xorg</span>, le serveur X11 de la fondation
      X.Org qui est disponible sous une license semblable à
      celle de FreeBSD.  Des serveurs X commerciaux pour FreeBSD sont
      également disponibles.</p><p>Ce chapitre couvrira l'installation et la configuration d'X11
      avec en insistant sur <span class="application">Xorg</span> version 7.7.  Pour
      des informations sur la configuration
      d'<span class="application"><span class="trademark">XFree86</span>&#8482;</span> (c'est à dire sur
      d'anciennes versions de FreeBSD où
      <span class="application"><span class="trademark">XFree86</span>&#8482;</span> était la distribution
      X11 par défaut) ou d'anciennes versions de <span class="application">Xorg</span>, il est toujours possible de consulter les
      versions archivées de ce manuel à l'adresse <code class="uri"><a class="uri" href="http://docs.FreeBSD.org/doc/" target="_top">http://docs.FreeBSD.org/doc/</a></code>.</p><p>Pour plus d'informations sur le matériel vidéo
      supporté par X11, consultez le site d'<a class="link" href="http://www.x.org/" target="_top">Xorg</a>.</p><p>Après la lecture de ce chapitre, vous connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les divers composants du système X Window et comment ils
	  fonctionnent ensemble.</p></li><li class="listitem"><p>Comment installer et configurer
	X11.</p></li><li class="listitem"><p>Comment installer et utiliser différents
	gestionnaires de fenêtres.</p></li><li class="listitem"><p>Comment utiliser les polices de caractères
	<span class="trademark">TrueType</span>® sous X11.</p></li><li class="listitem"><p>Comment configurer votre système pour
	l'utilisation de procédures de connexions graphiques
	(<span class="application">XDM</span>).</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment installer des logiciels tiers
	(<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-understanding"></a>6.2. Comprendre X</h2></div></div></div><p>Utiliser X pour la première fois peut être en
      quelque sorte un choc pour quelqu'un de familier avec d'autres
      environnements graphiques, tels que <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® ou
      <span class="trademark">Mac OS</span>®.</p><p>Alors qu'il n'est pas nécessaire de comprendre tout le détail
      des divers composants de X ni comment ils interagissent entre eux,
      une certaine connaissance des bases permet de tirer
      profit des points forts d'X.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69499216"></a>6.2.1. Pourquoi X?</h3></div></div></div><p>X n'est pas le premier système de fenêtrage
	écrit pour <span class="trademark">UNIX</span>®, mais c'est le plus populaire d'entre eux.  L'équipe
	originelle de développement d'X avait travaillé
	sur un autre système de fenêtrage avant d'écrire X.
	Le nom de ce système était
	<span class="quote">« <span class="quote">W</span> »</span> (pour <span class="quote">« <span class="quote">Window</span> »</span> - fenêtre).  X était
	juste la lettre suivante dans l'alphabet romain.</p><p>X peut être appelé &#8220;X&#8221;,
	&#8220;Système X Window&#8221;, <span class="quote">« <span class="quote">X11</span> »</span>, et sous d'autres
	noms.  Il se peut que vous puissiez trouver que nommer
	X11 <span class="quote">« <span class="quote">X Windows</span> »</span> peut être offensant pour
	certaines personnes; consultez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> pour un peu plus
	d'éclairements sur la question.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69508304"></a>6.2.2. Le modèle client/serveur d'X</h3></div></div></div><p>X a été conçu dès le départ
	autour de la notion de réseau, et adopte un modèle
	<span class="quote">« <span class="quote">client-serveur</span> »</span>.</p><p>Dans le modèle X, le &#8220;serveur X&#8221; tourne sur
	l'ordinateur sur lequel sont branchés le clavier, le moniteur,
	et la souris.  Le serveur est responsable de tâches telles que la gestion de
	l'affichage, des entrées en provenance du clavier et de la
	souris, et d'autres périphériques
	d'entrée ou de sortie (une <span class="quote">« <span class="quote">tablette</span> »</span> peut
	être utilisée comme périphérique
	d'entrée et un vidéo-projecteur peut être
	un périphérique de sortie alternatif).
	Chaque application X (comme <span class="application">XTerm</span>, ou
	<span class="application"><span class="trademark">Netscape</span>®</span>) est un
	&#8220;client&#8221;.  Un client envoie des messages au serveur
	comme &#8220;Dessines une fenêtre aux coordonnées
	suivantes&#8221;, et le serveur envoie au client des messages du
	type &#8220;L'utilisateur vient de cliquer sur le bouton
	OK&#8221;.</p><p>Chez soi
	ou dans un petit bureau, le serveur X et les clients X
	tourneront presque toujours sur le même ordinateur.  Cependant, il est
	parfaitement possible de faire tourner le serveur X sur un
	ordinateur de bureau moins puissant, et les applications X (les
	clients) sur, par exemple, la machine puissante et chère du
	service.  Dans ce scénario la communication entre le client X et
	le serveur se fera par l'intermédiaire du réseau.</p><p>Cela jette le trouble chez certaines personnes, parce que la
	technologie X est exactement le contraire de ce à quoi ils
	s'attendent.  Ils s'attendent à ce que le
	&#8220;serveur X&#8221; soit la grosse machine puissante au fond
	du couloir, et le &#8220;client X&#8221; la machine sur leur
	bureau.</p><p>Il est important de se souvenir que le serveur X est la machine avec le
	moniteur et le clavier, et les clients X sont les programmes qui
	affichent les fenêtres.</p><p>Il n'y a rien dans le protocole qui force les machines
	clientes et serveurs d'utiliser le même système
	d'exploitation, ou même de tourner sur le même type
	d'ordinateur.  Il est certainement possible de faire fonctionner
	un serveur X sur <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® ou <span class="trademark">Mac OS</span>® d'Apple, et il
	existe diverses applications gratuites et commerciales qui font
	exactement cela.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69514832"></a>6.2.3. Le gestionnaire de fenêtres</h3></div></div></div><p>La philosophie de conception d'X est comme celle d'<span class="trademark">UNIX</span>®,
	&#8220;des outils, pas de contraintes&#8221;.  Cela signifie
	qu'X n'essaye pas de dicter comment une tâche doit être
	accomplie.  A la place, les outils sont fournis à
	l'utilisateur, et c'est à lui de décider comment
	utiliser ces outils.</p><p>Cette philosophie va jusqu'à pousser X à ne pas
	contrôler l'aspect des fenêtres à l'écran,
	comment les déplacer avec la souris, quelles combinaisons
	de touches devraient être utilisées pour passer
	de l'une à l'autre (i.e.,
	<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Tab</strong></span>, dans le cas de <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®), comment
	devraient être les barres de titre de chaque fenêtres,
	qu'elles aient ou pas des boutons de fermetures, etc...</p><p>Au lieu de cela, X délègue cette
	responsabilité à une application appelée
	un &#8220;Window Manager&#8221; - gestionnaire de fenêtres.
	Il existe des douzaines de gestionnaires de fenêtres
	disponibles pour X: <span class="application">AfterStep</span>,
	<span class="application">Blackbox</span>, <span class="application">ctwm</span>,
	<span class="application">Enlightenment</span>,
	<span class="application">fvwm</span>, <span class="application">Sawfish</span>,
	<span class="application">twm</span>,
	<span class="application">Window Maker</span>, et bien plus.  Chacun
	de ces gestionnaires de fenêtres fournit une apparence et une
	prise en main différente; certains d'entre eux supportent les
	&#8220;bureaux virtuels&#8221;; d'autres permettent de
	personnaliser les combinaisons de touches de gestion du bureau;
	certains ont un bouton &#8220;Démarrer&#8221; ou quelque chose
	d'identique; certains possèdent un système de
	&#8220;thèmes&#8221;, permettant un changement complet
	d'apparence et de prise en main en sélectionnant un nouveau
	thème.  Ces gestionnaires de fenêtres, et bien plus, sont
	disponibles dans la catégorie <code class="filename">x11-wm</code> du
	catalogue des logiciels portés.</p><p>De plus, les environnements de travail
	<span class="application">KDE</span> et <span class="application">GNOME</span>
	ont leur propre gestionnaire de fenêtres qui s'intègre
	avec l'environnement.</p><p>Chaque gestionnaire de fenêtres possède
	également
	un mécanisme de configuration propre; certains demandent un
	fichier de configuration écrit à la main, d'autres
	disposent d'outils graphiques pour la plupart des tâches
	de configuration; et au moins un
	(<span class="application">Sawfish</span>) utilise un fichier de
	configuration écrit dans un dialecte du langage LISP.</p><div xmlns="" class="note"><h3 class="admontitle">Politique de focus: </h3><p xmlns="http://www.w3.org/1999/xhtml">Une autre fonction dont est responsable le gestionnaire de
	  fenêtre est la &#8220;politique de focus&#8221; de la
	  souris.  Chaque système de fenêtrage a besoin de
	  méthodes de choix de la fenêtre qui doit recevoir
	  les frappes au clavier, et devrait également indiquer
	  visiblement quelle fenêtre est active.</p><p xmlns="http://www.w3.org/1999/xhtml">Une politique de focus commune est appelée
	  &#8220;click-to-focus&#8221; (cliquer pour obtenir le focus).
	  C'est le mode utilisé sous <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, dans lequel une
	  fenêtre devient active quand elle reçoit un clic de la
	  souris.</p><p xmlns="http://www.w3.org/1999/xhtml">X ne supporte aucune politique de focus particulière.
	  Au lieu de cela, le gestionnaire de fenêtres contrôle
	  quelle fenêtre a le focus à n'importe quel moment.
	  Différents gestionnaires de fenêtres supporteront
	  différentes méthodes de focus.  Tous supportent le
	  clic pour obtenir le focus, une grande majorité supporte
	  d'autres méthodes.</p><p xmlns="http://www.w3.org/1999/xhtml">Les politiques de focus les plus populaires sont:</p><div xmlns="http://www.w3.org/1999/xhtml" class="variablelist"><dl class="variablelist"><dt><span class="term">&#8220;focus-follows-mouse&#8221; - le focus suit la
	      souris</span></dt><dd><p>La fenêtre qui est sous le pointeur de la souris
		est la fenêtre qui a le focus.  Ce n'est pas
		nécessairement la fenêtre qui est au-dessus des
		autres.  Le focus est modifié en pointant une autre
		fenêtre, là il n'y pas besoin de cliquer sur
		la fenêtre.</p></dd><dt><span class="term">&#8220;sloppy-focus&#8221; - focus relâché</span></dt><dd><p>Cette politique est version dérivée du
		&#8220;focus-follows-mouse&#8221;.  Avec
		&#8220;focus-follows-mouse&#8221;, si la souris est
		déplacée sur la fenêtre racine
		(ou fond de l'écran) alors aucune fenêtre
		n'a le focus, et les frappes au clavier sont tout simplement
		perdues.  Avec le focus relâché, le focus n'est
		modifié que si le pointeur passe sur une nouvelle
		fenêtre, et non pas quand il quitte la
		fenêtre actuelle.</p></dd><dt><span class="term">&#8220;click-to-focus&#8221; - cliquer pour obtenir le
	      focus</span></dt><dd><p>La fenêtre active est sélectionnée
		par clic de la souris.  La fenêtre peut être
		ramenée au premier plan.  Toutes les frappes au
		clavier seront désormais dirigées vers cette
		fenêtre, même si le curseur est
		déplacé vers une autre fenêtre.</p></dd></dl></div><p xmlns="http://www.w3.org/1999/xhtml">De nombreux gestionnaires de fenêtres supportent d'autres
	  politiques, comme des variations de celles-ci.  Assurez-vous
	  de consulter la documentation du gestionnaire de
	  fenêtres.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69538000"></a>6.2.4. &#8220;Widgets&#8221; - Eléments graphiques</h3></div></div></div><p>L'approche d'X d'offrir uniquement des outils s'étend aux
	éléments graphiques que l'on voit à l'écran
	dans chaque application.</p><p>&#8220;Widget&#8221; est un terme pour désigner tous les
	éléments de l'interface utilisateur qui peuvent
	être cliqués ou manipulés d'une façon
	ou d'une autre; boutons, boîtes à cocher, boutons radio,
	icônes, listes, etc...  <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® appelle ces derniers des
	&#8220;contrôles&#8221;.</p><p><span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® et <span class="trademark">Mac OS</span>® d'Apple ont tous deux une
	politique très rigide au niveaux des
	éléments graphiques.  Les développeurs
	d'applications sont supposés s'assurer que leurs applications
	partagent une apparence et une prise en main commune.  Avec X,
	on n'a pas considéré comme sensible d'exiger un style
	graphique particulier, ou ensemble d'éléments
	graphiques à respecter.</p><p>En conséquence, ne vous attendez pas à ce que les
	applications X aient une apparence et une prise en main
	communes.  Il a plusieurs ensembles populaires d'éléments
	graphiques et leurs variations, dont l'ensemble d'éléments
	original Athena du MIT, <span class="application"><span class="trademark">Motif</span>®</span>
	(d'après lequel fût modelé l'ensemble
	d'éléments graphiques de <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, tous les
	bords biseautés et trois nuances de gris),
	<span class="application">OpenLook</span>, et d'autres.</p><p>La plupart des nouvelles applications X, aujourd'hui
	utiliseront un ensemble d'éléments graphiques à
	l'apparence
	moderne, soit Qt, utilisé par <span class="application">KDE</span>,
	soit GTK+, utilisé par le projet
	<span class="application">GNOME</span>.  A cet égard, il y a une
	certaine convergence dans l'apparence et la prise en main de
	l'environnement de travail <span class="trademark">UNIX</span>®, qui facilite certainement les
	choses pour l'utilisateur débutant.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-install"></a>6.3. Installer X11</h2></div></div></div><p><span class="application">Xorg</span> est l'implémentation
      par défaut d'X11 sous FreeBSD.
      <span class="application">Xorg</span> est le serveur X de
      l'implémentation open source du système X Window
      publiée par la fondation X.Org.
      <span class="application">Xorg</span> est basée sur le code
      de <span class="application"><span class="trademark">XFree86</span>&#8482; 4.4RC2</span> et d'X11R6.6.
      la version d'<span class="application">Xorg</span> actuellement disponible dans le catalogue des logiciels
      portés de FreeBSD est la 7.7.</p><p>Pour compiler et installer
      <span class="application">Xorg</span> à partir du catalogue des
      logiciels portés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/xorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour compiler <span class="application">Xorg</span> dans son
	intégralité, assurez-vous de disposer d'au moins
	4 Go d'espace libre.</p></div><p>D'autre part, X11 peut être directement
      installée à partir de paquetages.  Une version
      pré-compilée à utiliser avec l'outil
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> est également disponible pour X11.  Quand
      la fonction de récupération à distance de
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> est utilisée, le numéro de version
      doit être retiré.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>
      téléchargera automatiquement la toute
      dernière version de l'application.</p><p>Donc pour récupérer et installer la version
      pré-compilée d'<span class="application">Xorg</span>,
      tapez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xorg</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les exemples ci-dessus installeront la distribution
	complète d'X11 comprenant
	les serveurs, les clients, les polices de caractères,
	etc.  Des paquetages et des logiciels portés
	séparés pour les différentes parties
	d'X11 sont également
	disponibles.</p></div><p>Le reste de ce chapitre expliquera comment configurer
      X11, et comment installer un environnement
      de travail productif.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-config"></a>6.4. Configuration d'X11</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp69570256" class="indexterm"></a><a id="idp69570768" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69571280"></a>6.4.1. Avant de commencer</h3></div></div></div><p>Avant de configurer X11,
	les informations sur le système cible sont
	nécessaires:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Caractéristiques du moniteur</p></li><li class="listitem"><p>Circuit graphique présent sur la carte
	  vidéo</p></li><li class="listitem"><p>Quantité de mémoire présente
	  sur la carte vidéo</p></li></ul></div><a id="idp69574224" class="indexterm"></a><a id="idp69574736" class="indexterm"></a><p>Les caractéristiques du moniteur sont utilisées par
	X11 pour déterminer la
	résolution
	et le taux de rafraîchissement à utiliser.  Ces
	caractéristiques sont généralement obtenues sur la
	documentation fournie avec le moniteur ou sur le site web du
	constructeur.  Il y a deux intervalles de nombres nécessaires,
	les fréquences de balayage horizontale et les fréquences
	de synchronisation verticale.</p><p>La circuit graphique présent sur la carte vidéo
	définit quel pilote de périphérique
	X11 utilise pour communiquer avec
	le matériel graphique.  Avec la plupart des circuits, cela peut
	être détecté automatiquement, mais il
	est toujours utile de connaître le type dans le cas où
	la détection automatique ne fonctionnerait pas
	correctement.</p><p>La quantité de mémoire graphique sur la carte
	vidéo détermine la résolution et la profondeur de
	couleurs qui pourront être utilisées.  C'est important
	de le savoir afin que l'utilisateur soit au courant des limitations du
	système.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69580752"></a>6.4.2. Configurer X11</h3></div></div></div><p>Avec la version 7.3, <span class="application">Xorg</span>
	peut, la plupart du temps, fonctionner sans aucun fichier de
	configuration en tapant simplement à l'invite:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>startx</code></strong></pre><p>Si cela ne fonctionne pas, ou si la configuration par
	défaut n'est pas satisfaisante, X11 peut être
	configuré manuellement.  La configuration d'X11
	est un processus en plusieurs étapes.  La première
	étape est de générer un fichier de configuration.
	En tant que super
	utilisateur, lancez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -configure</code></strong></pre><p>Cela générera, dans le répertoire
	<code class="filename">/root</code>,
	un squelette de fichier de
	configuration pour X11 appelé
	<code class="filename">xorg.conf.new</code> (que vous utilisiez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> ou ouvrez directement une session, cela affecte la
	variable d'environnement <code class="envar">$HOME</code> du
	super-utilisateur, et donc le répertoire utilisé
	pour écrire ce fichier).
	Le programme X11 tentera de
	sonder le matériel graphique présent sur le
	système et écrira un fichier de configuration pour
	charger les pilotes de périphériques corrects pour
	le matériel détecté sur le système
	cible.</p><p>L'étape suivante est de tester la configuration existante
	pour vérifier que <span class="application">Xorg</span> peut
	fonctionner avec le matériel graphique présent sur
	le système cible.  Pour effectuer ce test, lancez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -config xorg.conf.new</code></strong></pre><p>Si une grille grise et noire et un curseur de souris en
	forme de X apparaissent, la configuration fonctionne
	correctement.  Pour quitter le test,  appuyez simplement sur les
	touches
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Backspace</strong></span> simultanément.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si la souris ne fonctionne pas, vous devrez, avant toute
	  autre chose, la configurer.
	  Consultez la <a class="xref" href="#mouse" title="2.10.10. Configuration de la souris">Section 2.10.10, « Configuration de la souris »</a>
	  dans le chapitre sur l'installation de
	  FreeBSD.</p></div><a id="idp69595856" class="indexterm"></a><p>Ensuite, optimisez le fichier de configuration
	<code class="filename">xorg.conf.new</code>
	selon vos goûts.  Ouvrez le
	fichier dans un éditeur de texte comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">emacs</span>(1)</span></a> ou
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ee</span>(1)</span></a>.  Tout d'abord, ajoutez les fréquences pour le
	moniteur du système cible.  Celles-ci sont
	généralement exprimées sous la forme de
	fréquences de
	synchronisation horizontale et verticale.  Ces valeurs sont
	ajoutées dans le fichier <code class="filename">xorg.conf.new</code>
	dans la section <code class="literal">"Monitor"</code>:</p><pre class="programlisting">Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
EndSection</pre><p>Les termes <code class="literal">HorizSync</code> et
	<code class="literal">VertRefresh</code> peuvent être
	absents du fichier de configuration.  Si c'est le cas,
	ils doivent être ajoutés, avec les fréquences
	horizontales correctes placées après le terme
	<code class="literal">HorizSync</code> et les fréquences verticales
	après le terme <code class="literal">VertRefresh</code>.  Dans l'exemple
	ci-dessus les fréquences du moniteur ont été
	entrées.</p><p>X autorise l'utilisation des caractéristiques DMPS (Energy
	Star) avec les moniteurs qui en sont capables.  Le programme
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a> contrôle les délais et peut forcer
	la mise en
	veille, l'arrêt, ou les modes d'extinction.  Si vous souhaitez
	activer les fonctions DMPS de votre moniteur, vous devez ajouter
	la ligne suivante dans la section concernant le moniteur:</p><pre class="programlisting">
        Option       "DPMS"</pre><a id="idp69603664" class="indexterm"></a><p>Pendant que le fichier de configuration
	<code class="filename">xorg.conf.new</code>
	est toujours ouvert dans un
	éditeur, sélectionnez la résolution par
	défaut et la profondeur de couleurs désirée.
	Cela est défini dans la section
	<code class="literal">"Screen"</code>:</p><pre class="programlisting">Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection</pre><p>Le terme <code class="literal">DefaultDepth</code> indique la
	profondeur de couleurs utilisée par défaut.  Cette
	valeur peut être outrepassée avec l'option
	<code class="option">-depth</code> en ligne de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a>.
	Le terme
	<code class="literal">Modes</code> indique la résolution à utiliser
	pour la profondeur de couleurs donnée.
	Notez que seuls les modes standard VESA sont supportés
	comme définis par le matériel graphique du
	système cible.  Dans l'exemple
	ci-dessus, la profondeur de couleurs par défaut est de vingt
	quatre bits par pixel.  A cette profondeur de couleurs, la
	résolution acceptée est de 1024 par 768.</p><p>Pour fonctionner à une résolution de mille
	vingt quatre pixels par sept cent soixante huit pixels à vingt
	quatre bits par pixel, ajoutez le terme
	<code class="varname">DefaultDepth</code> avec la valeur vingt quatre, et
	ajoutez à la sous-section <code class="literal">"Display"</code> avec la
	valeur <code class="varname">Depth</code> désirée le terme
	<code class="varname">Modes</code> avec la résolution souhaitée par
	l'utilisateur.  Notez que seuls les modes standard VESA sont
	supportés comme définis par le matériel
	graphique du système cible.</p><p>Enfin, sauvez le fichier de configuration et testez-le en
	utilisant la procédure de test donnée ci-dessus.
      </p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un des outils disponibles pour vous aider en cas
	  de problèmes sont les fichiers journaux d'X11, qui
	  contiennent des informations sur chaque périphérique auquel
	  le serveur X11 s'attache.  Les noms des fichiers journaux
	  d'<span class="application">Xorg</span> suivent la forme
	  <code class="filename">/var/log/Xorg.0.log</code>.  Le nom exact du
	  fichier peut aller de <code class="filename">Xorg.0.log</code> à
	  <code class="filename">Xorg.8.log</code> et ainsi de suite.</p></div><p>Si tout se passe bien, le fichier de configuration doit
	être
	installé à un emplacement commun où
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a> pourra le trouver.  C'est typiquement soit
	<code class="filename">/etc/X11/xorg.conf</code> ou
	<code class="filename">/usr/local/etc/X11/xorg.conf</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp xorg.conf.new /etc/X11/xorg.conf</code></strong></pre><p>La configuration de X11 est maintenant achevée.
	<span class="application">Xorg</span> peut être maintenant
	lancé avec l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=startx&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">startx</span>(1)</span></a>.
	Le serveur X11 peut également
	être lancé
	à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il existe également un outil de configuration
	  graphique, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>, qui est fourni avec
	  la distribution X11.  Il permet de
	  définir intéractivement votre configuration en
	  sélectionnant les pilotes de
	  périphériques et les paramètres
	  adéquats.  Ce programme peut être invoqué
	  à partir de la console, en tapant la commande
	  <code class="command">xorgcfg -textmode</code>.
	  Pour plus de détails, consultez la
	  page de manuel d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>.</p><p xmlns="http://www.w3.org/1999/xhtml">Alternativement, il existe également un outil
	appelé <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgconfig&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgconfig</span>(1)</span></a>.
	Ce programme est un
	utilitaire en mode console moins convivial, mais qui peut
	fonctionner dans les situations où les autres ont
	échoué.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69627984"></a>6.4.3. Sujets avancés de configuration</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69632848"></a>6.4.3.1. Configuration avec les circuits graphiques <span class="trademark">Intel</span>®
	  i810</h4></div></div></div><a id="idp69634000" class="indexterm"></a><p>La configuration avec les circuits intégrés
	  graphiques <span class="trademark">Intel</span>® i810 nécessite
	  <code class="filename">agpgart</code> l'interface de programmation AGP
	  pour X11 afin de piloter la carte.  Consultez la page de
	  manuel du pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> pour plus d'information.</p><p>Cela permettra la configuration de ce matériel comme
	  n'importe quelle autre carte graphique.  Notez que sur les
	  systèmes sans le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> compilé dans
	  le noyau, tenter de charger le module à l'aide
	  de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> ne fonctionnera pas.  Ce pilote doit
	  être dans le noyau au démarrage soit compilé dans le
	  noyau soit en utilisant
	  <code class="filename">/boot/loader.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69639248"></a>6.4.3.2. Utilisation d'un écran large
	  (<span class="emphasis"><em>Widescreen</em></span>)</h4></div></div></div><a id="idp69640272" class="indexterm"></a><p>Cette section nécessite une maîtrise des
	  configurations avancées.  Si les tentatives
	  d'utilisation des outils de configuration standards
	  précédents n'ont pas donné lieu
	  à une configuration fonctionnelle, il y a cependant
	  suffisamment d'information dans les fichiers journaux pour
	  parvenir à faire fonctionner votre équipement.
	  L'utilisation d'un éditeur de texte sera
	  également nécessaire.</p><p>Les écrans larges actuellement disponibles
	  (WSXGA, WSXGA+, WUXGA, WXGA, WXGA+, et.al.) supportent les
	  formats 16:10 et 10:9 ainsi que  d'autres formats pouvant
	  être problèmatiques.  Les résolutions
	  d'écran courantes pour les formats 16:10 sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>2560x1600</p></li><li class="listitem"><p>1920x1200</p></li><li class="listitem"><p>1680x1050</p></li><li class="listitem"><p>1440x900</p></li><li class="listitem"><p>1280x800</p></li></ul></div><p>Dans certains cas, la configuration nécessitera
	  de simplement ajouter une de ces résolutions comme
	  <code class="literal">Mode</code> possible dans la <code class="literal">Section
	  "Screen"</code>:</p><pre class="programlisting">Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
	Viewport  0 0
	Depth     24
	Modes     "1680x1050"
EndSubSection
EndSection</pre><p><span class="application">Xorg</span> est suffisamment
	  intelligent pour obtenir auprès de l'écran les
	  informations sur la résolution par
	  l'intermédiaire des données I2C/DDC, de cette
	  manière il connaît les fréquences et
	  résolutions maximales que peut supporter le
	  moniteur.</p><p>Si ces <code class="literal">ModeLines</code> ne sont pas
	  présentes dans les pilotes, on pourra toujours aider
	  <span class="application">Xorg</span> dans ce sens.  En
	  examinant le contenu du fichier
	  <code class="filename">/var/log/Xorg.0.log</code>, on peut en
	  extraire suffisamment d'information pour créer
	  manuellement une <code class="literal">ModeLine</code> qui
	  fonctionnera.  Recherchez les lignes du type:</p><pre class="programlisting">(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</pre><p>Ce type de données est appelée information
	  EDID.  La création d'une <code class="literal">ModeLine</code>
	  à partir de ces informations consiste juste à
	  placer les différentes valeurs dans le bon
	  ordre:</p><pre class="programlisting">ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</pre><p>Ainsi la ligne <code class="literal">ModeLine</code> de la
	  <code class="literal">Section "Monitor"</code> pour cet exemple
	  ressemblera à ceci:</p><pre class="programlisting">Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</pre><p>Ces modifications effectuées, X devrait
	  maintenant se lancer sans problème sur votre nouvel
	  écran large.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-fonts"></a>6.5. Utilisation des polices de caractères sous X11</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="type1"></a>6.5.1. Polices de caractères Type1</h3></div></div></div><p>Les polices de caractères livrées par
      défaut avec X11 sont loin
      d'être idéales pour des applications de type publication.
      Les grandes polices utilisées pour les présentations
      présentent un aspect en escalier et peu professionnel, et
      les petites polices sous <span class="application"><span class="trademark">Netscape</span>®</span> sont
      presque complètement
      illisibles.  Cependant, il existe de nombreuses polices
      Type1 (<span class="trademark">PostScript</span>®) gratuites, de hautes qualités qui peuvent
      être aisément utilisées avec
      X11.  Par exemple, la collection de polices de caractères
      URW  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/urwfonts/pkg-descr">x11-fonts/urwfonts</a>)
      comprend une version haute qualité des polices de
      caractères standards type1 (<span class="trademark">Times Roman</span>®, <span class="trademark">Helvetica</span>®, <span class="trademark">Palatino</span>®
      et autres).  La collection Freefonts (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/freefonts/pkg-descr">x11-fonts/freefonts</a>) comprend beaucoup
      plus de polices de caractères, mais la plupart d'entre elles sont
      destinées à être utilisées avec des logiciels
      graphiques comme <span class="application">The Gimp</span>, et ne sont pas
      suffisamment complètes pour servir de polices
      de caractères d'affichage.  De plus
      X11 peut être configuré
      pour utiliser les polices de caractères <span class="trademark">TrueType</span>® avec un minimum
      d'effort.  Pour plus de détails à ce sujet,
      consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=X&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">X</span>(7)</span></a> ou la <a class="link" href="#truetype" title="6.5.2. Polices de caractères TrueType®">section sur les polices
      de caractères <span class="trademark">TrueType</span>®</a>.</p><p>Pour installer les collections de polices de caractères
      Type1 précédentes à partir du catalogue
      des logiciels portés, lancez les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-fonts/urwfonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Et de même pour la collection Freefont ou d'autres.  Pour
      que le serveur X détecte ces polices, ajoutez une
      ligne appropriée au fichier de configuration du serveur X
      (<code class="filename">/etc/X11/xorg.conf</code>),
      du type:</p><pre class="programlisting">FontPath "/usr/local/lib/X11/fonts/URW/"</pre><p>Autre possibilité, en ligne de commande dans une session X
	lancez:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/URW</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>Cela fonctionnera mais les effets seront perdus quand la
	session X sera fermée, à moins de l'ajouter dans le
	fichier de
	démarrage (<code class="filename">~/.xinitrc</code> pour une session
	<code class="command">startx</code> classique, ou dans
	<code class="filename">~/.xsession</code> quand on s'attache au système
	par l'intermédiaire d'un gestionnaire de session graphique comme
	<span class="application">XDM</span>).  Une troisième méthode
	est d'utiliser le nouveau fichier <code class="filename">/usr/local/etc/fonts/local.conf</code>:
	voir la section sur l'<a class="link" href="#antialias" title="6.5.3. Polices de caractères anticrénelage">anticrénelage</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="truetype"></a>6.5.2. Polices de caractères <span class="trademark">TrueType</span>®</h3></div></div></div><a id="idp69696848" class="indexterm"></a><a id="idp69697360" class="indexterm"></a><p><span class="application">Xorg</span> dispose d'un support
      intégré pour le rendu des polices <span class="trademark">TrueType</span>®.
      Il y a deux différents modules qui peuvent activer cette
      fonctionnalité.  Le module freetype est
      utilisé dans cet exemple parce qu'il est plus compatible avec les
      autres moteurs de rendu des polices de caractères.  Pour activer
      le module freetype ajoutez juste la ligne suivante dans la section
      <code class="literal">"Module"</code> du fichier
      <code class="filename">/etc/X11/xorg.conf</code>.</p><pre class="programlisting">Load  "freetype"</pre><p>Maintenant créez un répertoire pour les polices
      <span class="trademark">TrueType</span>® (par exemple
      <code class="filename">/usr/local/lib/X11/fonts/TrueType</code>) et copiez
      toutes les polices <span class="trademark">TrueType</span>® dans ce répertoire.  Gardez à
      l'esprit
      que les polices <span class="trademark">TrueType</span>® ne peuvent être directement prises d'un
      Macintosh; elles doivent être dans un format <span class="trademark">UNIX</span>®/<span class="trademark">MS-DOS</span>®/Windows pour
      être utilisées sous X11.
      Une fois les fichiers copiés dans ce répertoire, utilisez
      <span class="application">ttmkfdir</span> pour créer un fichier
      <code class="filename">fonts.dir</code>, de façon à ce que le moteur
      d'affichage des polices d'X sache que de nouveaux fichiers ont
      été
      installés.  <span class="application">ttmkfdir</span> est disponible
      dans le catalogue des logiciels portés de FreeBSD sous <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr">x11-fonts/ttmkfdir</a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ttmkfdir -o fonts.dir</code></strong></pre><p>Maintenant ajoutez le répertoire des polices <span class="trademark">TrueType</span>® au
      chemin des polices de caractères.  Cela est identique à
      ce qui est décrit ci-dessus pour les polices <a class="link" href="#type1" title="6.5.1. Polices de caractères Type1">Type1</a>, c'est à dire, utiliser</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xset fp+ /usr/local/lib/X11/fonts/TrueType</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>ou ajouter une ligne <code class="literal">FontPath</code> au fichier
	<code class="filename">xorg.conf</code>.</p><p>Voilà.  Désormais <span class="application"><span class="trademark">Netscape</span>®</span>,
	<span class="application">Gimp</span>,
	<span class="application"><span class="trademark">StarOffice</span>&#8482;</span>, et toutes les autres
	applications X devraient maintenant reconnaître les polices de
	caractères <span class="trademark">TrueType</span>®.  Les polices très petites (comme
	le texte de page web visualisé sur un écran haute
	résolution) et les très
	grandes polices (dans <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>)
	auront un rendu bien meilleur maintenant.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="antialias"></a>6.5.3. Polices de caractères anticrénelage</h3></div><div><span class="authorgroup">Mis à jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joe Marcus</span> <span class="surname">Clarke</span></span>. </span></div></div></div><a id="idp69742160" class="indexterm"></a><a id="idp69742672" class="indexterm"></a><p>L'anticrénelage est disponible sous
	X11 depuis <span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.0.2.
	Cependant, la configuration des polices de caractères
	était relativement lourde avant l'arrivée
	d'<span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.3.0.  Depuis
	<span class="application"><span class="trademark">XFree86</span>&#8482;</span> 4.3.0, toutes les polices
	sous X11 se trouvant dans les répertoires <code class="filename">/usr/local/lib/X11/fonts/</code> et
	<code class="filename">~/.fonts/</code> sont
	automatiquement disponibles pour l'anticrénelage avec
	les applications compatibles Xft.  Toutes les applications ne
	sont pas compatibles Xft, mais de nombreuses ont
	été dotées du support Xft.  Par exemple,
	les applications utilisant Qt 2.3 et versions suivantes (la
	boîte à outils pour l'environnement de travail
	<span class="application">KDE</span>), GTK+ 2.0 et suivantes (la
	boîte à outils de l'environnement de travail
	<span class="application">GNOME</span>), et
	<span class="application">Mozilla</span> 1.2 et versions
	suivantes.</p><p>Afin de contrôler quelles polices de
	caractères sont anticrénelées, ou pour
	configurer les propriétés de
	l'anticrénelage, créez (ou éditez, s'il
	existe déjà) le fichier
	<code class="filename">/usr/local/etc/fonts/local.conf</code>.
	Plusieurs caractéristiques avancées du
	système de fontes Xft peuvent être
	ajustées par l'intermédiaire de ce fichier;
	cette section ne décrit que des possibilités
	simples.  Pour plus de détails, consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fonts-conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fonts-conf</span>(5)</span></a>.</p><a id="idp69753296" class="indexterm"></a><p>Ce fichier doit être dans le format XML.  Faites
	attention à la casse des caractères, et
	assurez-vous que toutes les balises sont correctement
	fermées.  Le fichier débute avec l'entête
	XML classique suivie par une définition DOCTYPE, puis
	de la balise <code class="literal">&lt;fontconfig&gt;</code>:</p><pre class="programlisting">
	&lt;?xml version="1.0"?&gt;
	&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;
	&lt;fontconfig&gt;
      </pre><p>Comme précisé précédemment,
	l'ensemble des polices de caractères du
	répertoire <code class="filename">/usr/local/lib/X11/fonts/</code> comme du
	répertoire <code class="filename">~/.fonts/</code> sont disponibles pour
	les applications compatibles Xft.  Si vous désirez
	ajouter un autre répertoire en dehors des ces deux
	là, ajoutez une ligne similaire à la suivante au
	fichier
	<code class="filename">/usr/local/etc/fonts/local.conf</code>:</p><pre class="programlisting">&lt;dir&gt;/chemin/vers/mes/fontes&lt;/dir&gt;</pre><p>Après l'ajout de nouvelles fontes, et tout
	particulièrement de nouveaux répertoires de polices, vous
	devrez exécuter la commande suivante pour reconstituer le
	cache des polices de caractères:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fc-cache -f</code></strong></pre><p>L'anticrénelage rend les bords
	légèrement flous, ce qui rend le texte très
	petit plus lisible et enlève l'effet
	&#8220;d'escalier&#8221; des grands textes, mais peut provoquer
	une fatigue visuelle si c'est appliqué au texte normal.
	Pour exclure les tailles de polices inférieures à 14 points de
	l'anticrénelage, ajoutez ces lignes:</p><pre class="programlisting">	 &lt;match target="font"&gt;
	  &lt;test name="size" compare="less"&gt;
		&lt;double&gt;14&lt;/double&gt;
	  &lt;/test&gt;
	  &lt;edit name="antialias" mode="assign"&gt;
		&lt;bool&gt;false&lt;/bool&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
	&lt;match target="font"&gt;
	  &lt;test name="pixelsize" compare="less" qual="any"&gt;
		&lt;double&gt;14&lt;/double&gt;
	  &lt;/test&gt;
	  &lt;edit mode="assign" name="antialias"&gt;
		&lt;bool&gt;false&lt;/bool&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><a id="idp69758928" class="indexterm"></a><p>L'espacement pour certaines polices de caractères
	à chasse fixe peut également être
	inapproprié avec l'anticrénelage.  Cela semble
	être un problème avec <span class="application">KDE</span>, en
	particulier.  Une solution possible pour cela est de forcer
	l'espacement pour de telles polices de caractères à 100.
	Ajoutez les lignes suivantes:</p><pre class="programlisting">	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;fixed&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
	&lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;console&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><p>(ceci ajoute un alias <code class="literal">"mono"</code> pour les autres
	noms communs des polices de caractères fixes), puis
	ajoutez:</p><pre class="programlisting">	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;mono&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="spacing" mode="assign"&gt;
	    &lt;int&gt;100&lt;/int&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><p>Certaines polices de caractères, comme Helvetica,
	peuvent présenter des problèmes lors de
	l'anticrénelage.  Généralement cela se
	manifeste par l'impression que la fonte semble coupée
	en deux verticalement.  Au pire cela peut provoquer des crashs
	avec certaines application comme
	<span class="application">Mozilla</span>.  Pour éviter cela,
	pensez à ajouter ce qui suit au fichier
	<code class="filename">local.conf</code>:</p><pre class="programlisting">	 &lt;match target="pattern" name="family"&gt;
	  &lt;test qual="any" name="family"&gt;
	    &lt;string&gt;Helvetica&lt;/string&gt;
	  &lt;/test&gt;
	  &lt;edit name="family" mode="assign"&gt;
	    &lt;string&gt;sans-serif&lt;/string&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;</pre><p>Une fois l'édition de
	<code class="filename">local.conf</code> achevée, assurez-vous
	que le fichier se termine par la balise
	<code class="literal">&lt;/fontconfig&gt;</code>.  Si ce n'est pas le
	cas, tous vos changements seront ignorés.</p><p>L'ensemble de polices de caractères fourni par
	défaut avec X11 n'est
	pas très adapté pour l'anticrénelage.  Un
	bien meilleur ensemble de fontes peut être trouvé
	dans le catalogue des logiciels portés: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/bitstream-vera/pkg-descr">x11-fonts/bitstream-vera</a>.  Ce
	logiciel installera un fichier
	<code class="filename">/usr/local/etc/fonts/local.conf</code> si ce
	dernier n'existe pas déjà.  Si le fichier
	existe, le logiciel porté créera un fichier
	nommé
	<code class="filename">/usr/local/etc/fonts/local.conf-vera</code>.  Il
	fusionnera le contenu de ce fichier dans
	<code class="filename">/usr/local/etc/fonts/local.conf</code>, et les
	polices de caractères Bitstream remplaceront
	automatiquement les polices avec empattement (serif), sans
	empattement (sans-serif) et à chasse fixe
	d'X11.</p><p>Et enfin, les utilisateurs peuvent ajouter leurs propres
	paramètres par l'intermédiaire de leur fichier
	<code class="filename">.fonts.conf</code>.  Pour cela, chaque
	utilisateur devrait créer un fichier
	<code class="filename">~/.fonts.conf</code>.  Ce fichier doit
	également être écrit en XML.</p><a id="idp69809232" class="indexterm"></a><a id="idp69809744" class="indexterm"></a><p>Un dernier point: avec un écran LCD, un
	échantillonnage &#8220;sub-pixel&#8221; peut être
	désiré.  Fondamentalement, ceci traite les composantes
	rouge,
	verte et bleu séparément (horizontalement
	séparées) pour améliorer la résolution
	horizontale; les résultats peuvent être dramatiques.
	Pour activer cela, ajoutez quelque part dans le fichier
	<code class="filename">local.conf</code> les lignes:</p><pre class="programlisting">
	 &lt;match target="font"&gt;
	  &lt;test qual="all" name="rgba"&gt;
	    &lt;const&gt;unknown&lt;/const&gt;
	  &lt;/test&gt;
	  &lt;edit name="rgba" mode="assign"&gt;
	    &lt;const&gt;rgb&lt;/const&gt;
	  &lt;/edit&gt;
	&lt;/match&gt;
      </pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">En fonction de type d'écran, le terme
	  &#8220;rgb&#8221; pourra devoir être changé pour
	  &#8220;bgr&#8221;, &#8220;vrgb&#8221; ou
	  &#8220;vbgr&#8221;: expérimentez
	  pour définir lequel fonctionne le mieux.</p></div><a id="idp69812560" class="indexterm"></a><p>L'anticrénelage devrait être activé au
	prochain lancement du serveur X.  Cependant, notez que les
	applications doivent savoir comment l'utiliser.  A l'heure
	actuelle, le &#8220;toolkit&#8221; Qt le supporte, donc
	l'intégralité de l'environnement
	<span class="application">KDE</span> peut utiliser des polices
	anticrénelées.
	GTK+ et <span class="application">GNOME</span> peuvent également
	faire usage de l'anticrénelage via le système
	<span class="quote">« <span class="quote">Font</span> »</span> (voir la <a class="xref" href="#x11-wm-gnome-antialias" title="6.7.1.3. Polices de caractères anticrénelage avec GNOME">Section 6.7.1.3, « Polices de caractères anticrénelage avec
	  GNOME »</a> pour plus de détails).
	Par défaut, <span class="application">Mozilla</span> 1.2 et
	versions suivantes utiliseront automatiquement
	l'anticrénelage.  Pour désactiver cette
	caractéristique, recompilez
	<span class="application">Mozilla</span> avec le paramètre
	<code class="varname">-DWITHOUT_XFT</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-xdm"></a>6.6. Le gestionnaire de procédures de connexions graphiques
      - &#8220;X Display Manager&#8221;</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Seth</span> <span class="surname">Kingsley</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69819856"></a>6.6.1. Généralités</h3></div></div></div><a id="idp69820496" class="indexterm"></a><p>Le gestionnaire de procédures de connexions graphiques
	- &#8220;X Display Manager&#8221;
	(<span class="application">XDM</span>) est une partie optionnelle du
	système X Window qui est utilisée pour la
	gestion des procédures de connexion au système.
	C'est utile dans plusieurs types de situations, dont les
	&#8220;Terminaux X&#8221; minimaux, et les serveurs X
	d'affichage de grands réseaux.  Comme le système
	X Window est indépendant du type de réseau et de
	protocole, il existe une large variété de
	configurations possibles pour faire fonctionner des
	clients et des serveurs X sur différentes machines
	connectées entre elles par un réseau.
	<span class="application">XDM</span> fournit une interface graphique
	pour sélectionner à quel serveur d'affichage se
	connecter, et entrer des informations d'autorisation comme
	l'ensemble identifiant et mot de passe.</p><p>Il faut voir <span class="application">XDM</span> comme
	fournissant les mêmes fonctionnalités à
	l'utilisateur que l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a> (voir la <a class="xref" href="#term-config" title="26.3.2. Configuration">Section 26.3.2, « Configuration »</a> pour plus de détails).
	C'est à dire, qu'il exécute les ouvertures de session sur
	le système sur lequel on se connecte et lance alors une session
	au nom de l'utilisateur (généralement un gestionnaire de
	fenêtres pour X).  <span class="application">XDM</span> attend alors
	que le programme se termine, signalant que l'utilisateur en a
	terminé et devrait être déconnecté
	du système.  A ce moment, <span class="application">XDM</span> peut
	afficher les écrans d'invite d'ouverture de session et de
	sélection de serveur pour le prochain utilisateur.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69825232"></a>6.6.2. Utiliser XDM</h3></div></div></div><p>Le &#8220;daemon&#8221; d'<span class="application">XDM</span> est
	<code class="filename">/usr/local/bin/xdm</code>.  Ce programme peut être
	lancé à n'importe quel moment en tant que
	<code class="systemitem">root</code> et il s'occupera de la gestion d'X sur
	la machine locale.  Si <span class="application">XDM</span> doit être
	exécuté à chaque démarrage de la machine,
	une manière pratique
	de le faire est d'ajouter une entrée dans
	<code class="filename">/etc/ttys</code>.  Pour plus d'informations sur le
	format et l'utilisation de ce fichier, consultez la <a class="xref" href="#term-etcttys" title="26.3.2.1. Adding an Entry to /etc/ttys">Section 26.3.2.1, « Adding an Entry to <code class="filename">/etc/ttys</code> »</a>.  Il existe une ligne dans le fichier
	<code class="filename">/etc/ttys</code> de défaut pour exécuter le
	&#8220;daemon&#8221; <span class="application">XDM</span> sur un
	terminal virtuel:</p><pre class="screen">ttyv8	"/usr/local/bin/xdm -nodaemon"	xterm	off secure</pre><p>Par défaut cette entrée est désactivée;
	afin de la réactiver modifiez le cinquième champ de
	<code class="literal">off</code> à <code class="literal">on</code> et relancez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> en utilisant les indications de la <a class="xref" href="#term-hup" title="26.3.2.2. Force init to Reread /etc/ttys">Section 26.3.2.2, « Force <code class="command">init</code> to Reread
	  <code class="filename">/etc/ttys</code> »</a>.  Le premier champ, le nom du terminal que
	ce programme gérera, est <code class="literal">ttyv8</code>.  Cela
	signifie que <span class="application">XDM</span> démarrera sur le
	neuvième terminal virtuel.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69833040"></a>6.6.3. Configurer XDM</h3></div></div></div><p>Le répertoire de configuration
	d'<span class="application">XDM</span> est situé dans
	<code class="filename">/usr/local/lib/X11/xdm</code>.  Dans ce
	répertoire il y a de nombreux fichiers utilisés pour
	modifier le comportement et l'apparence
	d'<span class="application">XDM</span>.  Généralement les
	fichiers suivants seront présents:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Fichier</th><th>Description</th></tr></thead><tbody><tr><td><code class="filename">Xaccess</code></td><td>Ensemble de règles d'autorisation du
		  client.</td></tr><tr><td><code class="filename">Xresources</code></td><td>Fichier des ressources X par défaut.</td></tr><tr><td><code class="filename">Xservers</code></td><td>Liste des écrans distants et locaux à
		  gérer.</td></tr><tr><td><code class="filename">Xsession</code></td><td>Procédure d'ouverture de session par
		  défaut.</td></tr><tr><td><code class="filename">Xsetup_</code>*</td><td>Procédures utilisées pour exécuter
		  des applications avant l'interface d'ouverture de
		  session.</td></tr><tr><td><code class="filename">xdm-config</code></td><td>Configuration globale pour tous les affichages
		  utilisants cette machine.</td></tr><tr><td><code class="filename">xdm-errors</code></td><td>Erreurs générées par le programme
		  serveur.</td></tr><tr><td><code class="filename">xdm-pid</code></td><td>L'identifiant du processus exécutant actuellement
		  XDM.</td></tr></tbody></table></div><p>Dans ce répertoire se trouvent également quelques
	procédures et programmes utilisés pour configurer
	l'environnement quand <span class="application">XDM</span> fonctionne.
	L'objet de chacun de ces fichiers sera brièvement décrit.
	La syntaxe exacte et l'utilisation de tous ces fichiers sont
	décrites dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><p>La configuration par défaut est une simple
	fenêtre rectangulaire d'ouverture de session avec le nom de
	la machine hôte affiché en haut dans une grande police de
	caractères et avec des invites &#8220;Login:&#8221; et
	&#8220;Password:&#8221; en-dessous.  C'est un bon point de
	départ pour modifier l'apparence et la prise en main des
	écrans <span class="application">XDM</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69859920"></a>6.6.3.1. Xaccess</h4></div></div></div><p>Le protocole utilisé pour se connecter à
	  des écrans contrôlés par
	  <span class="application">XDM</span> est
	  appelé le &#8220;X Display Manager Connection Protocol&#8221;
	  (XDMCP).  Ce fichier est un ensemble de règles pour
	  contrôler les connexions XDMCP à partir de machines
	  distantes.  Il est ignoré à moins que le fichier
	  <code class="filename">xdm-config</code> ne soit modifié pour
	  accepter les connexions distantes.  Par défaut, il
	  n'autorise pas ces connexions.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69861840"></a>6.6.3.2. Xresources</h4></div></div></div><p>C'est un fichier de paramètres par défaut
	  pour la sélection du serveur et des écrans d'ouverture
	  de sessions.  C'est l'endroit où l'apparence du programme
	  d'ouverture de session peut être modifié.  Le format est
	  identique au fichier de paramètres par défaut des
	  applications décrit dans la documentation
	  d'<span class="application"><span class="trademark">XFree86</span>&#8482;</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69863504"></a>6.6.3.3. Xservers</h4></div></div></div><p>C'est une liste de choix des serveurs distants que
	  l'écran de sélection devrait fournir.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69864656"></a>6.6.3.4. Xsession</h4></div></div></div><p>C'est la procédure par défaut à
	  exécuter par <span class="application">XDM</span>
	  après qu'un utilisateur ait ouvert une session.  Normalement
	  chaque utilisateur disposera d'une procédure de session dans
	  <code class="filename">~/.xsession</code> qui sera utilisée en lieu
	  et place du fichier par défaut.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69883216"></a>6.6.3.5. Xsetup_*</h4></div></div></div><p>Cela sera exécuté automatiquement
	  avant d'afficher les interfaces de sélection et d'ouverture de
	  session.  Il existe une procédure pour chaque écran
	  utilisé,
	  nommée <code class="filename">Xsetup_</code> suivie par le
	  numéro de l'écran local (par exemple
	  <code class="filename">Xsetup_0</code>).  Généralement
	  ces procédures exécutent un ou deux programmes
	  en tâche de fond comme <code class="command">xconsole</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69885648"></a>6.6.3.6. xdm-config</h4></div></div></div><p>Ce dernier contient les paramètres sous la forme de
	  paramètres par défaut qui sont applicables à
	  chaque écran que l'installation gère.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69886800"></a>6.6.3.7. xdm-errors</h4></div></div></div><p>Ce dernier contient les messages de sortie du serveur X
	  qu'<span class="application">XDM</span> essaye d'exécuter.
	  Si un terminal qu'<span class="application">XDM</span> essaye de
	  démarrer se bloque pour quelque raison, c'est le bon endroit
	  pour chercher les messages d'erreur.  Ces messages sont
	  également écrits dans le fichier
	  <code class="filename">~/.xsession-errors</code> de l'utilisateur à
	  chaque session.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69889232"></a>6.6.4. Exécuter un serveur d'affichage en réseau</h3></div></div></div><p>Afin de permettre aux autres clients de se connecter au
	serveur gérant l'affichage, vous devez éditer les
	règles de contrôle d'accès, et activez l'auditeur
	de demandes
	de connexion.  Par défaut ces règles sont sur des valeurs
	conservatrices.  Pour faire écouter à
	<span class="application">XDM</span> les demandes de connexion, tout
	d'abord commentez une ligne du fichier
	<code class="filename">xdm-config</code>:</p><pre class="screen">! SECURITY: do not listen for XDMCP or Chooser requests
! Comment out this line if you want to manage X terminals with xdm
DisplayManager.requestPort:     0</pre><p>et ensuite relancez <span class="application">XDM</span>.  Rappelez
	vous que les commentaires dans des fichiers de paramètres
	par défaut d'applications débutent avec
	un caractère &#8220;!&#8221;, et non pas par l'habituel
	&#8220;#&#8221;.  Un contrôle d'accès plus
	strict peut être désiré &#8212;
	consultez les lignes d'exemple dans <code class="filename">Xaccess</code>,
	et référez-vous à la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a> pour plus d'information.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp69893712"></a>6.6.5. Remplacements pour XDM</h3></div></div></div><p>Plusieurs remplacements pour le programme
	  <span class="application">XDM</span> de défaut existent.  L'un
	  d'eux, <span class="application">KDM</span> (fourni avec
	  <span class="application">KDE</span>) est décrit plus loin dans son
	  propre chapitre.  <span class="application">KDM</span> offre de
	  nombreuses améliorations visuelles, ainsi que la fonction
	  permettant aux utilisateurs de sélectionner leur gestionnaire
	  de fenêtres au moment d'ouvrir la session.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x11-wm"></a>6.7. Environnements de travail</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><p>Cette section décrit les différents
      environnements de travail disponibles pour X sous FreeBSD.  Le
      terme d'&#8220;environnement de travail&#8221; regroupe tout
      depuis le simple gestionnaire de fenêtres à la suite
      complète d'applications de bureau, comme
      <span class="application">KDE</span> ou
      <span class="application">GNOME</span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome"></a>6.7.1. GNOME</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-about"></a>6.7.1.1. A propos de GNOME</h4></div></div></div><a id="idp69906256" class="indexterm"></a><p><span class="application">GNOME</span> est un environnement de
	  travail convivial qui permet aux utilisateurs d'utiliser et de
	  configurer facilement leur ordinateur.
	  <span class="application">GNOME</span> comprend un panneau -
	  &#8220;panel&#8221; (pour lancer des applications et afficher
	  des états), un bureau (où les données et les
	  applications
	  peuvent prendre place), un ensemble d'outils standards de
	  bureau et d'applications, et un ensemble de conventions qui
	  rendent aisée la coopération entre application et
	  leur cohérence.  Les utilisateurs d'autres systèmes
	  d'exploitation ou environnement devraient se sentir en terrain
	  de connaissance en utilisant le puissant environnement
	  graphique que fournit <span class="application">GNOME</span>.
	  Plus d'information concernant
	  <span class="application">GNOME</span> sous FreeBSD peut être
	  trouvé sur le site du <a class="link" href="http://www.FreeBSD.org/gnome" target="_top">Projet FreeBSD
	  GNOME</a>.  Le site contient également des FAQs
	  très complètes sur l'installation, la
	  configuration, et l'administration de
	  <span class="application">GNOME</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-install"></a>6.7.1.2. Installer GNOME</h4></div></div></div><p>Ce logiciel peut  être facilement installé
	  à partir d'une
	  version pré-compilée ou du catalogue des logiciels
	  portés:</p><p>Pour installer l'ensemble de logiciels
	  pré-compilés <span class="application">GNOME</span>
	  à partir du réseau, tapez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnome2</code></strong></pre><p>Pour compiler <span class="application">GNOME</span> à partir
	  des sources, utilisez le logiciel porté:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/gnome2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Une fois que <span class="application">GNOME</span> est
	  installé, on doit signaler au serveur X d'exécuter
	  <span class="application">GNOME</span> à la place du gestionnaire
	  de fenêtre par défaut.</p><p>La manière la plus simple de lancer
	  <span class="application">GNOME</span> est d'utiliser
	  <span class="application">GDM</span>, le gestionnaire d'affichage
	  de <span class="application">GNOME</span>.
	  <span class="application">GDM</span>, qui est installé par
	  défaut comme élément de l'environnement
	  de travail <span class="application">GNOME</span> (mais qui est
	  désactivé par défaut), peut être
	  activé en ajoutant la ligne
	  <code class="literal">gdm_enable="YES"</code> au fichier
	  <code class="filename">/etc/rc.conf</code>.  Une fois que vous avez
	  redémarré le système,
	  <span class="application">GNOME</span> sera lancé
	  automatiquement dès que vous ouvrirez une session
	  &#8212; aucune autre configuration n'est
	  nécessaire.</p><p><span class="application">GNOME</span> peut être
	  également lancé à partir de la ligne de
	  commande en configurant correctement un fichier
	  appelé <code class="filename">.xinitrc</code>.  Si un fichier
	  <code class="filename">.xinitrc</code> personnalisé est
	  déjà en place, remplacez simplement la ligne qui lance
	  le gestionnaire de fenêtres avec une qui exécute
	  <span class="application">/usr/local/bin/gnome-session</span> à la
	  place.  S'il n'y a rien de spécial à faire dans ce
	  fichier de configuration, alors il est suffisant de
	  taper:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/gnome-session" &gt; ~/.xinitrc</code></strong></pre><p>Ensuite, tapez <code class="command">startx</code>, et
	  l'environnement de travail <span class="application">GNOME</span>
	  sera lancé.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si un gestionnaire d'affichage plus ancien, comme
	  <span class="application">XDM</span>, est utilisé, cela ne
	  fonctionnera pas.  A la place, créez un fichier
	  exécutable <code class="filename">.xsession</code> contenant la
	  même commande.  Pour cela, éditez le fichier
	  et remplacez la commande correspondant au gestionnaire de
	  fenêtres actuel avec
	  <span class="application">/usr/local/bin/gnome-session</span>:
	  </p></div><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "#!/bin/sh" &gt; ~/.xsession</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/gnome-session" &gt;&gt; ~/.xsession</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>chmod +x ~/.xsession</code></strong></pre><p>Une autre option est de configurer le gestionnaire
	  d'affichage pour permettre la sélection du gestionnaire de
	  fenêtres au moment de l'ouverture de session; la section de
	  <a class="link" href="#x11-wm-kde-details" title="6.7.3. Plus de détails sur KDE">compléments sur KDE</a>
	  explique comment le faire pour <span class="application">kdm</span>, le
	  gestionnaire d'affichage de
	  <span class="application">KDE</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-gnome-antialias"></a>6.7.1.3. Polices de caractères anticrénelage avec
	  GNOME</h4></div></div></div><a id="idp69938896" class="indexterm"></a><p>X11 supporte
	  l'anticrénelage par l'intermédiaire de son extension
	  &#8220;RENDER&#8220;.  GTK+ 2.0 et suivant (la boîte à
	  outils utilisé par <span class="application">GNOME</span>) peuvent
	  utiliser cette fonctionnalité.  La configuration
	  de l'anticrénelage est décrite dans la <a class="xref" href="#antialias" title="6.5.3. Polices de caractères anticrénelage">Section 6.5.3, « Polices de caractères anticrénelage »</a>.  Aussi, avec des logiciels à
	  jour, l'anticrénelage est possible dans l'environnement
	  de travail <span class="application">GNOME</span>.  Aller dans le
	  menu
	  <span class="guimenu">Applications</span> &#8594; <span class="guisubmenu">Desktop Preferences</span> &#8594; <span class="guimenuitem">Font</span>, et sélectionnez soit
	  <span class="guibutton">Best shapes</span>, soit
	  <span class="guibutton">Best contrast</span>, ou
	  <span class="guibutton">Subpixel smoothing (LCDs)</span>.  Pour une
	  application GTK+ qui ne fait pas partie de l'environnement
	  de travail <span class="application">GNOME</span>, fixez la
	  variable d'environement <code class="varname">GDK_USE_XFT</code> à
	  <code class="literal">1</code> avant de lancer le programme.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde"></a>6.7.2. KDE</h3></div></div></div><a id="idp69954512" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-about"></a>6.7.2.1. A propos de KDE</h4></div></div></div><p><span class="application">KDE</span> est un environnement de
	  travail moderne facile d'emploi.  Quelques unes des choses
	  qu'apporte <span class="application">KDE</span> aux utilisateurs
	  sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un magnifique bureau moderne</p></li><li class="listitem"><p>Une utilisation réseau complètement
	    transparente</p></li><li class="listitem"><p>Un système d'aide intégré
	    utile, pour un accès cohérent à l'aide sur
	    l'utilisation de l'environnement
	    <span class="application">KDE</span> et ses
	    applications</p></li><li class="listitem"><p>Une apparence et une prise en main commune
	    pour toutes les applications
	    <span class="application">KDE</span></p></li><li class="listitem"><p>Des menus, barres d'outils, combinaisons de
	    touches, couleurs, etc., standardisées</p></li><li class="listitem"><p>Internationalisation: <span class="application">KDE</span>
	    est disponible dans plus de 40 langues</p></li><li class="listitem"><p>Un système centralisé de configuration
	    de l'environnement</p></li><li class="listitem"><p>Un grand nombre d'applications
	    <span class="application">KDE</span> utiles</p></li></ul></div><p><span class="application">KDE</span> est fourni avec un
	  navigateur web appelé <span class="application">Konqueror</span>,
	  qui est un solide concurrent aux autres navigateurs web
	  sous <span class="trademark">UNIX</span>®.  Plus d'information sur
	  <span class="application">KDE</span> peut être trouvé sur le
	  <a class="link" href="http://www.kde.org/" target="_top">site de KDE</a>.  Pour
	  des informations et des ressources spécifiques à
	  l'utilisation de <span class="application">KDE</span> sous
	  FreeBSD, consultez le site de l'<a class="link" href="http://freebsd.kde.org/" target="_top">équipe
	  KDE sur FreeBSD</a>.</p><p>Il existe deux versions de
	    <span class="application">KDE</span> sous FreeBSD.  La version 3
	    est disponible depuis longtemps et présente une
	    grande maturité.  La version 4, la
	    génération suivante, est également
	    disponible dans le catalogue des logiciels portés.
	    Ces deux versions peuvent être installées de
	    paire.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-install"></a>6.7.2.2. Installer KDE</h4></div></div></div><p>Juste comme avec <span class="application">GNOME</span> ou tout
	  autre environnement de travail,
	  ce logiciel peut être aisément
	  installé à
	  partir des logiciels pré-compilés ou du catalogue des
	  logiciels portés:</p><p>Pour installer la version pré-compilée de
	  <span class="application">KDE3</span> à partir du réseau,
	  tapez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r kde</code></strong></pre><p>Pour installer la version pré-compilée de
	  <span class="application">KDE4</span> à partir du réseau,
	  tapez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r kde4</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a> récupérera automatiquement la
	  dernière version de l'application.</p><p>Pour compiler <span class="application">KDE3</span> à partir
	  des sources, utilisez le logiciel porté:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/kde3</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Pour compiler <span class="application">KDE4</span> à partir
	  des sources, utilisez le logiciel porté:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11/kde4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Après que <span class="application">KDE</span> ait
	  été installé, on doit indiquer au serveur X de
	  lancer cette application à la place du gestionnaire de
	  fenêtres par défaut.
	  Ceci est effectué en éditant le fichier
	  <code class="filename">.xinitrc</code>:</p><p>Pour <span class="application">KDE3</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "exec startkde" &gt; ~/.xinitrc</code></strong></pre><p>Pour <span class="application">KDE4</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "exec /usr/local/kde4/bin/startkde" &gt; ~/.xinitrc</code></strong></pre><p>Maintenant, quand le système X Window est invoqué
	  avec la commande <code class="command">startx</code>,
	  <span class="application">KDE</span> sera l'environnement de
	  travail utilisé.</p><p>Si un gestionnaire d'affichage comme
	  <span class="application">XDM</span> est utilisé,
	  la configuration sera légèrement
	  différente.  Editez le fichier <code class="filename">.xsession</code>
	  à la place.  Les instructions concernant
	  <span class="application">kdm</span> seront données plus
	  loin dans ce chapitre.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-details"></a>6.7.3. Plus de détails sur KDE</h3></div></div></div><p>Maintenant que <span class="application">KDE</span> est
	  installé sur le système, la plupart des choses peuvent
	  être découvertes à travers les pages d'aide, ou
	  juste en pointant
	  et cliquant sur les différents menus.  Les utilisateurs de
	  <span class="trademark">Windows</span>® ou de <span class="trademark">Mac</span>® se sentiront presque en terrain de
	  connaissance.</p><p>La meilleure référence pour
	  <span class="application">KDE</span> est la documentation en ligne.
	  <span class="application">KDE</span> est livré avec son propre
	  navigateur internet <span class="application">Konqueror</span>, et
	  des douzaines d'applications utiles, et une large
	  documentation.  Le reste de cette section traite
	  d'éléments
	  techniques qui sont difficiles à apprendre par une exploration
	  au hasard.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-kde-kdm"></a>6.7.3.1. Le gestionnaire d'affichage de KDE</h4></div></div></div><a id="idp70002768" class="indexterm"></a><p>L'administrateur d'un système multi-utilisateurs peut
	  désirer avoir un écran graphique d'ouverture de
	  session pour accueillir les utilisateurs.
	  <a class="link" href="#x-xdm" title="6.6. Le gestionnaire de procédures de connexions graphiques - &#8220;X Display Manager&#8221;">XDM</a> peut
	  être utilisé comme décrit plus tôt.
	  Cependant, <span class="application">KDE</span> inclus une alternative,
	  <span class="application">kdm</span>, qui est conçue pour
	  paraître
	  plus attractive et inclure plus d'options d'ouverture de
	  session.  En particulier, les utilisateurs peuvent facilement
	  (par l'intermédiaire d'un menu) sélectionner quel
	  environnement de travail (<span class="application">KDE</span>,
	  <span class="application">GNOME</span>, ou quelque chose d'autre)
	  exécuter après l'ouverture de session.</p><p>Pour activer <span class="application">kdm</span>, la ligne
	  <code class="literal">ttyv8</code> du fichier
	  <code class="filename">/etc/ttys</code> doit être
	  modifiée.  La ligne doit ressembler à:</p><p>Pour <span class="application">KDE3</span>:</p><pre class="programlisting">ttyv8 "/usr/local/bin/kdm -nodaemon" xterm on secure</pre><p>Pour <span class="application">KDE4</span>:</p><pre class="programlisting">ttyv8 "/usr/local/kde4/bin/kdm -nodaemon" xterm on secure</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce"></a>6.7.4. XFce</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce-about"></a>6.7.4.1. A propos d'XFce</h4></div></div></div><p><span class="application">XFce</span> est un environnement de
	  travail basé sur le &#8220;toolkit&#8221; GTK+
	  utilisé par <span class="application">GNOME</span>, mais est
	  plus léger et est destiné à ceux qui veulent
	  un bureau simple, et efficace qui est néanmoins facile
	  d'utilisation et de configuration.  Visuellement, il ressemble
	  énormément à <span class="application">CDE</span>,
	  que l'on trouve sur les systèmes <span class="trademark">UNIX</span>® commerciaux.
	  Quelques unes des caractéristiques
	  d'<span class="application">XFce</span> sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un bureau de prise en main aisée et
	     simple</p></li><li class="listitem"><p>Complètement configurable à la
	     souris, avec glisser-déposer, etc.</p></li><li class="listitem"><p>Une barre principale similaire à
	     <span class="application">CDE</span>, avec des menus, des petites
	     applications et des lanceurs d'applications</p></li><li class="listitem"><p>Un gestionnaire de fenêtre
	     intégré, un gestionnaire de fichiers, un
	     gestionnaire du son, un module de compatibilité
	     <span class="application">GNOME</span>, et bien plus</p></li><li class="listitem"><p>Personnalisable avec des thèmes (comme il
	     utilise GTK+)</p></li><li class="listitem"><p>Rapide, léger et efficace: idéal
	     pour les machines vieilles/lentes ou avec des limitations en
	     mémoire</p></li></ul></div><p>Plus d'information sur <span class="application">XFce</span>
	   peut être trouvé sur le <a class="link" href="http://www.xfce.org/" target="_top">site d'XFce</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="x11-wm-xfce-install"></a>6.7.4.2. Installer XFce</h4></div></div></div><p>Une version pré-compilée
	  d'<span class="application">XFce</span> existe (au moment
	  où ces lignes sont écrites).  Pour
	  installer, tapez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xfce4</code></strong></pre><p>Alternativement, pour compiler à partir des sources,
	  utilisez le catalogue des logiciels portés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/x11-wm/xfce4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Maintenant, il faut indiquer au serveur X d'exécuter
	  <span class="application">XFce</span> au prochain démarrage d'X.
	  Tapez ceci:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>echo "/usr/local/bin/startxfce4" &gt; ~/.xinitrc</code></strong></pre><p>Au prochain démarrage d'X,
	  <span class="application">XFce</span> sera l'environnement de
	  travail.  Comme précédemment, si un gestionnaire
	  d'affichage comme <span class="application">XDM</span> est utilisé,
	  créez un fichier <code class="filename">.xsession</code>, comme
	  décrit dans la section sur <a class="link" href="#x11-wm-gnome" title="6.7.1. GNOME">GNOME</a>, mais avec la commande
	  <code class="filename">/usr/local/bin/startxfce4</code>; ou configurez
	  le gestionnaire d'affichage pour permettre la sélection d'un
	  environnement de travail au moment de la connexion, comme
	  expliqué dans la section sur <a class="link" href="#x11-wm-kde-kdm" title="6.7.3.1. Le gestionnaire d'affichage de KDE">kdm</a>.</p></div></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="common-tasks"></a>Partie II. Tâches courantes</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>Maintenant que les bases sont maîtrisées,
	cette partie du Manuel FreeBSD traitera de certaines
	fonctionnalités de FreeBSD fréquemment
	utilisées.  Ces chapitres:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Présentent des applications de bureautique
	    populaires et utiles: des navigateurs, des outils de
	    productivité, des lecteurs de documents, etc.</p></li><li class="listitem"><p>Présentent plusieurs outils multimédia
	    disponibles pour FreeBSD.</p></li><li class="listitem"><p>Expliquent le processus de compilation d'un noyau FreeBSD
	    personnalisé, pour permettre l'ajout de
	    fonctionnalités supplémentaires à votre
	    système.</p></li><li class="listitem"><p>Décrivent le système d'impression en
	    détail, pour les configurations d'imprimante locale
	    et en réseau.</p></li><li class="listitem"><p>Vous montrent comment exécuter des applications
	    Linux sur votre système FreeBSD.</p></li></ul></div><p>Certains de ces chapitres conseillent des lectures
	préalables, ceci est noté dans le synopsis au
	début de chaque chapitre.</p><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="chapter"><a href="#desktop">7. Bureautique</a></span></dt><dd><dl><dt><span class="sect1"><a href="#desktop-synopsis">7.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">7.2. Navigateurs</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">7.3. Productivité</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">7.4. Lecteurs de document</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">7.5. Finance</a></span></dt><dt><span class="sect1"><a href="#desktop-summary">7.6. Résumé</a></span></dt></dl></dd><dt><span class="chapter"><a href="#multimedia">8. Multimédia</a></span></dt><dd><dl><dt><span class="sect1"><a href="#multimedia-synopsis">8.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#sound-setup">8.2. Configurer une carte son</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">8.3. Fichiers MP3</a></span></dt><dt><span class="sect1"><a href="#video-playback">8.4. Lecture des Vidéos</a></span></dt><dt><span class="sect1"><a href="#tvcard">8.5. Configuration des cartes TV</a></span></dt><dt><span class="sect1"><a href="#scanners">8.6. Scanners</a></span></dt></dl></dd><dt><span class="chapter"><a href="#kernelconfig">9. Configurer le noyau de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#kernelconfig-synopsis">9.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-custom-kernel">9.2. Pourquoi compiler un noyau sur mesure?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">9.3. Compiler et installer un noyau sur mesure</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">9.4. Le fichier de configuration</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">9.5. Si quelque chose se passe mal</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printing">10. Imprimer</a></span></dt><dd><dl><dt><span class="sect1"><a href="#printing-synopsis">10.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">10.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">10.3. Configuration de base</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">10.4. Configuration avancée de l'imprimante</a></span></dt><dt><span class="sect1"><a href="#printing-using">10.5. Using Printers ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">10.6. Alternatives to the Standard Spooler ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">10.7. Troubleshooting ** Traduction en Cours **</a></span></dt></dl></dd><dt><span class="chapter"><a href="#linuxemu">11. Compatibilité binaire avec Linux</a></span></dt><dd><dl><dt><span class="sect1"><a href="#linuxemu-synopsis">11.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">11.2. Installation</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematica">11.3. Installer <span class="trademark">Mathematica</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-maple">11.4. Installer <span class="trademark">Maple</span>&#8482;</a></span></dt><dt><span class="sect1"><a href="#linuxemu-matlab">11.5. Installer <span class="trademark">MATLAB</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">11.6. Installer <span class="trademark">Oracle</span>®</a></span></dt><dt><span class="sect1"><a href="#sapr3">11.7. Installer <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-advanced">11.8. Sujets avancés</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="desktop"></a>Chapitre 7. Bureautique</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christophe</span> <span class="surname">Juniet</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#desktop-synopsis">7.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#desktop-browsers">7.2. Navigateurs</a></span></dt><dt><span class="sect1"><a href="#desktop-productivity">7.3. Productivité</a></span></dt><dt><span class="sect1"><a href="#desktop-viewers">7.4. Lecteurs de document</a></span></dt><dt><span class="sect1"><a href="#desktop-finance">7.5. Finance</a></span></dt><dt><span class="sect1"><a href="#desktop-summary">7.6. Résumé</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-synopsis"></a>7.1. Synopsis</h2></div></div></div><p>FreeBSD peut faire fonctionner une large variété
      d'applications de bureautique, comme des navigateurs et des
      traitements de textes.  La plupart de ces derniers sont
      disponibles sous forme pré-compilée ou peuvent
      être compilé automatiquement à partir du
      catalogue des logiciels portés.  De nombreux utilisateurs
      s'attendent à trouver ces types d'applications dans leur
      environnement de travail.  Ce chapitre vous montrera comment
      installer quelques unes des applications de bureautique les plus
      populaires sans trop d'effort, soit à partir de versions
      pré-compilées soit à partir du catalogue
      des logiciels portés.</p><p>Notez que lorsque l'on installe des programmes à partir du
      catalogue des logiciels portés, ils sont compilés à
      partir des sources.  Cela peut prendre un temps relativement long, en
      fonction de ce que vous compilez et de la puissance de votre
      machine.  Si la compilation à partir des sources requiert un
      temps prohibitif, vous pouvez installer la plupart des
      programmes de l'arbre des ports à partir de version
      pré-compilées.</p><p>Comme FreeBSD dispose d'un système de
      compatibilité avec les binaires Linux, de nombreuses
      applications développées à l'origine pour Linux sont
      disponibles pour votre environnement de travail.  Il est
      vivement recommandé que vous lisiez le <a class="xref" href="#linuxemu" title="Chapitre 11. Compatibilité binaire avec Linux">Chapitre 11, <em>Compatibilité binaire avec Linux</em></a> avant d'installer des applications Linux.  De
      nombreux logiciels portés utilisant la compatibilité
      binaire Linux débutent avec le terme &#8220;linux-&#8221;.
      Souvenez-vous de cela quand vous recherchez un logiciel porté
      bien particulier, par exemple à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=whereis&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">whereis</span>(1)</span></a>.
      Dans le reste de ce chapitre on suppose que vous avez activé
      la compatibilité Linux avant d'installer des applications
      Linux.</p><p>Voici les catégories d'applications couvertes par ce
      chapitre:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Navigateurs (comme <span class="application">Mozilla</span>,
          <span class="application">Opera</span>,
	  <span class="application">Firefox</span>,
	  <span class="application">Konqueror</span>)</p></li><li class="listitem"><p>Productivité (comme
          <span class="application">KOffice</span>,
          <span class="application">AbiWord</span>,
          <span class="application">The GIMP</span>,
          <span class="application">OpenOffice.org</span>)</p></li><li class="listitem"><p>Lecteurs de document (comme <span class="application"><span class="trademark">Acrobat Reader</span>®</span>,
          <span class="application">gv</span>,
          <span class="application">Xpdf</span>,
          <span class="application">GQview</span>)</p></li><li class="listitem"><p>Finance (comme
          <span class="application">GnuCash</span>,
          <span class="application">Gnumeric</span>,
          <span class="application">Abacus</span>)</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment installer des logiciels tiers
          (<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li><li class="listitem"><p>Savoir comment installer des logiciels pour Linux
	  (<a class="xref" href="#linuxemu" title="Chapitre 11. Compatibilité binaire avec Linux">Chapitre 11, <em>Compatibilité binaire avec Linux</em></a>).</p></li></ul></div><p>Pour des informations sur comment mettre en place un
      environnement multimédia, lisez le <a class="xref" href="#multimedia" title="Chapitre 8. Multimédia">Chapitre 8, <em>Multimédia</em></a>.
      Si vous désirez configurer et utiliser le courrier
      électronique, veuillez vous référer au
      <a class="xref" href="#mail" title="Chapitre 28. Courrier électronique">Chapitre 28, <em>Courrier électronique</em></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-browsers"></a>7.2. Navigateurs</h2></div></div></div><a id="idp70095824" class="indexterm"></a><p>FreeBSD n'est pas livré avec un navigateur particulier
      installé.  Au lieu de cela, le répertoire
      <a class="link" href="http://www.FreeBSD.org/ports/www.html" target="_top">www</a>
      du catalogue des logiciels portés contient de nombreux
      navigateurs prêts à être installés.
      Si vous n'avez pas le temps de tout compiler (cela peut prendre
      un temps relativement long dans certains cas) nombres d'entre
      eux sont disponibles sous forme pré-compilée.</p><p><span class="application">KDE</span> et
      <span class="application">GNOME</span> fournissent déjà
      un navigateur HTML.  Veuillez vous référer au
      <a class="xref" href="#x11-wm" title="6.7. Environnements de travail">Section 6.7, « Environnements de travail »</a> pour plus d'information sur
      comment configurer ces environnements de travail.</p><p>Si vous êtes à la recherche de navigateurs
      légers, vous devriez consulter le catalogue des logiciels
      portés pour <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/dillo/pkg-descr">www/dillo</a>,
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/links/pkg-descr">www/links</a>, ou
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/w3m/pkg-descr">www/w3m</a>.</p><p>Cette section couvre les applications suivantes:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nom de l'application</th><th>Ressources nécessaires</th><th>Installation à partir du catalogue des logiciels
	      portés</th><th>Dépendances principales</th></tr></thead><tbody><tr><td><span class="application">Mozilla</span></td><td>importantes</td><td>lourde</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">Opera</span></td><td>faibles</td><td>légère</td><td>Version native FreeBSD et Linux disponibles.  La
	      version Linux dépend de la compatibilité
	      binaire Linux et de
	      <span class="application">linux-openmotif</span>.</td></tr><tr><td><span class="application">Firefox</span></td><td>moyennes</td><td>lourde</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">Konqueror</span></td><td>moyennes</td><td>lourde</td><td>Bibliothèques
	      <span class="application">KDE</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70114384"></a>7.2.1. Mozilla</h3></div></div></div><a id="idp70115024" class="indexterm"></a><p><span class="application">Mozilla</span> est un navigateur
	moderne et stable, dont le portage FreeBSD est complet:
	il présente un moteur d'affichage HTML qui respecte
	vraiment les normes; il intègre un lecteur de courrier
	électronique et de forums de discussion.  Il possède même
	un éditeur HTML si vous projetez d'écrire
	vous-même quelques pages Web.  Les utilisateurs de
	<span class="application"><span class="trademark">Netscape</span>®</span> trouveront des similitudes
	avec la suite <span class="application">Communicator</span>, étant
	donné que les deux navigateurs partagent certains
	développements passés.</p><p>Sur les machines lentes, avec une vitesse de processeur de
	moins de 233MHz ou avec moins de 64MO de RAM,
	<span class="application">Mozilla</span> peut être trop consommateur
	en ressources pour être vraiment utilisable.  Vous pourrez
	vouloir essayer à la place le navigateur
	<span class="application">Opera</span> décrit plus tard dans ce
	chapitre.</p><p>Si vous ne pouvez ou ne voulez compiler
        <span class="application">Mozilla</span>, pour une quelconque raison,
	l'équipe GNOME de FreeBSD l'a déjà fait pour vous.
	Installez juste la version pré-compilée à
	partir du réseau avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r mozilla</code></strong></pre><p>Si la version pré-compilée n'est pas
	disponible, et que vous avez suffisamment de temps et d'espace
	disque, vous pouvez obtenir les sources pour
	<span class="application">Mozilla</span>, le compiler et l'installer
	sur votre système.  Cela s'effectue en faisant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/mozilla</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Le logiciel porté <span class="application">Mozilla</span>
	s'assure d'une initialisation correcte en exécutant la
	configuration de la base de registre chrome avec les
	privilèges de <code class="systemitem">root</code> privilèges.
	Cependant si vous désirez récupérer des
	modules additionnels comme &#8220;mouse gestures&#8221;, vous
	devez exécuter <span class="application">Mozilla</span> en
	tant que <code class="systemitem">root</code> pour obtenir une
	installation correcte de ces modules.</p><p>Une fois que vous avez achevé l'installation de
        <span class="application">Mozilla</span>, vous n'avez plus besoin
	d'être sous <code class="systemitem">root</code>.  Vous pouvez lancer
        <span class="application">Mozilla</span> en tant que navigateur en
	tapant:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mozilla</code></strong></pre><p>Vous pouvez lancer directement les lecteurs de courrier
	électronique et de forums comme montré ci-dessous:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mozilla -mail</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70137552"></a>7.2.2. Firefox</h3></div></div></div><a id="idp70138192" class="indexterm"></a><p><span class="application">Firefox</span> est la
	génération suivante de navigateurs basés
	sur le code de <span class="application">Mozilla</span>.
	<span class="application">Mozilla</span> est une suite
	complète d'applications, comme un navigateur, un client
	de messagerie, un client de discussion et bien plus.
	<span class="application">Firefox</span> est juste un navigateur, ce
	qui le rend plus petit et plus rapide.</p><p>Installez la version pré-compilée du
	logiciel en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r firefox</code></strong></pre><p>Vous pouvez également utiliser le catalogue des
	logiciels portés si vous désirez effectuer la
	compilation à partir des sources:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/www/firefox</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moz-java-plugin"></a>7.2.3. Firefox, Mozilla et le greffon <span class="trademark">Java</span>&#8482;</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans cette section et la suivante, nous supposerons que
	  vous avez déjà installé
	  <span class="application">Firefox</span> ou
	  <span class="application">Mozilla</span>.</p></div><p>La fondation FreeBSD a acquis auprès de Sun
	Microsystems une licence de distribution des binaires FreeBSD
	pour le Java Runtime Environment (<span class="trademark">JRE</span>&#8482;) et le Java
	Development Kit (<span class="trademark">JDK</span>&#8482;).  Les paquetages binaires pour FreeBSD
	sont disponibles sur le site de la <a class="link" href="http://www.freebsdfoundation.org/downloads/java.shtml" target="_top">fondation
	FreeBSD</a>.</p><p>Pour ajouter le support <span class="trademark">Java</span>&#8482; à
	<span class="application">Firefox</span> ou
	<span class="application">Mozilla</span>, vous devez installer tout
	d'abord le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/java/javavmwrapper/pkg-descr">java/javavmwrapper</a>.  Ensuite,
	téléchargez le paquetage <span class="application">Diablo
	<span class="trademark">JRE</span>&#8482;</span> à l'adresse <code class="uri"><a class="uri" href="http://www.freebsdfoundation.org/downloads/java.shtml" target="_top">http://www.freebsdfoundation.org/downloads/java.shtml</a></code>,
	et installez-le à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>.</p><p>Lancez votre navigateur et tapez
	<code class="literal">about:plugins</code> dans la barre d'adresse et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span>.  Une page
	listant les greffons installés s'affichera; le
	greffon <span class="application"><span class="trademark">Java</span>&#8482;</span> devrait
	désormais apparaître dans la liste.  Si ce n'est
	pas le cas, en tant que <code class="systemitem">root</code>, exécutez la
	commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /usr/local/diablo-jre1.5.0/plugin/i386/ns7/libjavaplugin_oji.so \
  /usr/local/lib/browser_plugins/</code></strong></pre><p>puis relancez votre navigateur.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="moz-flash-plugin"></a>7.2.4. Firefox, Mozilla et le greffon <span class="trademark">Macromedia</span>® <span class="trademark">Flash</span>®</h3></div></div></div><p>Le greffon <span class="trademark">Macromedia</span>® <span class="trademark">Flash</span>® n'est pas disponible pour
	FreeBSD.  Cependant il existe une couche logicielle
	(<span class="quote">« <span class="quote">wrapper</span> »</span>) pour utiliser la version Linux du
	greffon.  Ce <span class="quote">« <span class="quote">wrapper</span> »</span> supporte également les
	greffons <span class="trademark">Adobe</span>® <span class="trademark">Acrobat</span>®, <span class="trademark">RealPlayer</span>® et plus.</p><p>Installez le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/nspluginwrapper/pkg-descr">www/nspluginwrapper</a>.  Ce logiciel
	nécessite <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> qui occupe un
	espace relativement important.</p><p>L'étape suivante est l'installation du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/linux-flashplugin7/pkg-descr">www/linux-flashplugin7</a>.  Une fois le
	logiciel installé, le greffon doit être
	installé par chaque utilisateur à l'aide de la
	commande <code class="command">nspluginwrapper</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>nspluginwrapper -v -a -i</code></strong></pre><p>Lancez ensuite votre navigateur, tapez
	<code class="literal">about:plugins</code> dans la barre d'adresse et
	appuyez sur <span class="keycap"><strong>Entrée</strong></span>.  Une liste des greffons
	actuellement disponibles devrait apparaître.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70179024"></a>7.2.5. Opera</h3></div></div></div><a id="idp70179664" class="indexterm"></a><p><span class="application">Opera</span> est un navigateur complet
	respectant les standards.  Il intègre un lecteur de
	courrier électronique et de forums de discussion, un
	client IRC, un lecteur de flux RSS/Atom et beaucoup plus.
	Malgré cela, <span class="application">Opera</span> reste
	relativement léger et très rapide.  Il est
	disponible en deux versions: une version &#8220;native&#8221;
	pour FreeBSD et une version utilisant l'émulation Linux.</p><p>Pour naviguer sur le Web avec la version FreeBSD d'<span class="application">Opera</span>,
	installez la version pré-compilée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r opera</code></strong></pre><p>Certains sites FTP n'ont pas toutes les versions
	pré-compilées, mais <span class="application">Opera</span>
	peut également être obtenu avec le catalogue des logiciels
	portés en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/port/www/opera</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Pour installer la version Linux
	d'<span class="application">Opera</span>, utilisez
	<code class="literal">linux-opera</code> à la place
	d'<code class="literal">opera</code> dans les exemples
	précédents.  La version Linux est utile dans les
	situations demandant l'utilisation de greffons qui sont
	uniquement disponibles pour Linux, comme
	<span class="application"><span class="trademark">Acrobat Reader</span>®</span>.  Dans tous les
	autres aspects, les versions FreeBSD et Linux devraient être
	identiques.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70192208"></a>7.2.6. Konqueror</h3></div></div></div><a id="idp70192848" class="indexterm"></a><p><span class="application">Konqueror</span> fait partie de
	<span class="application">KDE</span> mais peut être
	également utilisé en dehors de
	<span class="application">KDE</span> en installant <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/kdebase3/pkg-descr">x11/kdebase3</a>.
	<span class="application">Konqueror</span> est plus qu'un
	navigateur, c'est également un gestionnaire de fichiers
	et une visionneuse multimedia</p><p>Il existe également un ensemble de greffons pour
	<span class="application">Konqueror</span> disponible dans <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/konq-plugins/pkg-descr">misc/konq-plugins</a>.</p><p><span class="application">Konqueror</span> supporte
	également <span class="application"><span class="trademark">Flash</span>®</span>; un
	tutorial pour avoir le support de
	<span class="application"><span class="trademark">Flash</span>®</span> sous
	<span class="application">Konqueror</span> est disponible à
	l'adresse <code class="uri"><a class="uri" href="http://freebsd.kde.org/howto.php" target="_top">http://freebsd.kde.org/howto.php</a></code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-productivity"></a>7.3. Productivité</h2></div></div></div><p>Quand on parle de productivité, les nouveaux utilisateurs
      recherchent souvent une bonne suite bureautique ou un traitement
      de texte convivial.  Bien que certains <a class="link" href="#x11-wm" title="6.7. Environnements de travail">environnements de travail</a> comme
      <span class="application">KDE</span> fournissent déjà une suite de
      bureautique, il n'y a pas de logiciels de productivité par défaut.
      FreeBSD fournit tout ce qui est nécessaire,
      indépendamment de votre environnement de travail.</p><p>Cette section couvre les applications suivantes:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nom de l'application</th><th>Ressources nécessaires</th><th>Installation à partir du catalogue des logiciels
	      portés</th><th>Dépendances principales</th></tr></thead><tbody><tr><td><span class="application">KOffice</span></td><td>légères</td><td>lourde</td><td><span class="application">KDE</span></td></tr><tr><td><span class="application">AbiWord</span></td><td>légères</td><td>lourde</td><td><span class="application">Gtk+</span> ou
	      <span class="application">GNOME</span></td></tr><tr><td><span class="application">The Gimp</span></td><td>légères</td><td>lourde</td><td><span class="application">Gtk+</span></td></tr><tr><td><span class="application">OpenOffice.org</span></td><td>importantes</td><td>très lourde</td><td><span class="application"><span class="trademark">JDK</span>&#8482; 1.4</span>,
	      <span class="application">Mozilla</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70224720"></a>7.3.1. KOffice</h3></div></div></div><a id="idp70225360" class="indexterm"></a><a id="idp70226256" class="indexterm"></a><p>La communauté KDE propose son environnement de travail
	avec une suite de bureautique qui peut être
	utilisée en dehors de <span class="application">KDE</span>.  Elle
	comprend quatre composants standard que l'on peut trouver dans
	d'autres suites.  <span class="application">KWord</span> est le
	traitement de texte, <span class="application">KSpread</span> est le
	tableur, <span class="application">KPresenter</span> est le
	programme pour gérer des présentations, et
	<span class="application">Kontour</span> vous permet de créer des
	documents graphiques.</p><p>Avant d'installer la dernière version de
        <span class="application">KOffice</span>, soyez sûr d'avoir une
	version à jour de <span class="application">KDE</span>.</p><p>Pour installer <span class="application">KOffice</span> à partir
	de la version pré-compilée, utilisez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r koffice</code></strong></pre><p>Si la version pré-compilée n'est pas
	disponible, vous pouvez utiliser le catalogue des
	logiciels portés.  Par exemple, pour installer
        <span class="application">KOffice</span> pour
        <span class="application">KDE3</span>, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/koffice-kde3</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70235728"></a>7.3.2. AbiWord</h3></div></div></div><a id="idp70236368" class="indexterm"></a><p><span class="application">AbiWord</span> est un traitement de
	texte gratuit similaire au niveau de l'apparence et de la
	prise en main à <span class="application"><span class="trademark">Microsoft</span>® Word</span>.  Il convient pour taper des
	lettres, des rapports, des mémos, et ainsi de suite.  Il est
	très rapide, dispose de nombreuses fonctions, et très
	convivial.</p><p><span class="application">AbiWord</span> peut importer et
	exporter dans de nombreux formats de fichiers, dont certains
	formats propriétaires comme le <code class="filename">.doc</code> de
	<span class="trademark">Microsoft</span>®.</p><p><span class="application">AbiWord</span> est disponible sous
	forme pré-compilée.  Vous pouvez l'installer
	avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r abiword</code></strong></pre><p>Si la version pré-compilée n'est pas disponible,
	il peut être compilé à partir du catalogue
	des logiciels portés.  Le catalogue devra être
	plus à jour.  Cela peut être fait de cette
	façon:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/abiword</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70244048"></a>7.3.3. The GIMP</h3></div></div></div><a id="idp70244688" class="indexterm"></a><p>Pour la création et la retouche d'image
        <span class="application">The GIMP</span> est un programme de
	manipulation d'image très sophistiqué.  Il peut
	être utilisé comme un simple programme de dessin ou comme
	une suite de retouche d'image de qualité photo.  Il supporte un
	grand nombre de modules additionnels et présente une interface
	de création de procédures.  <span class="application">The
	GIMP</span> peut lire et écrire dans un très grand
	nombre de formats de fichiers.  Il supporte l'interfaçage
	avec des scanners et des tablettes graphiques.</p><p>Vous pouvez installer la version pré-compilée
	en utilisant cette commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gimp</code></strong></pre><p>Si votre site FTP ne dispose pas de la version
	pré-compilée, vous pouvez utiliser le catalogue
	des logiciels portés.  Le répertoire
        <a class="link" href="http://www.FreeBSD.org/ports/graphics.html" target="_top">graphics</a>
        du catalogue contient également le
        <span class="application">Manuel de The Gimp</span>.  Voici comment
	les installer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gimp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gimp-manual-pdf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le répertoire
          <a class="link" href="http://www.FreeBSD.org/ports/graphics.html" target="_top">graphics</a>
          du catalogue des logiciels portés contient la version de
	  développement de <span class="application">The GIMP</span> dans
          <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gimp-devel/pkg-descr">graphics/gimp-devel</a>.
	  Une version HTML du <span class="application">Manuel de The Gimp</span>
	  est disponible à partir de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gimp-manual-html/pkg-descr">graphics/gimp-manual-html</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70263888"></a>7.3.4. OpenOffice.org</h3></div></div></div><a id="idp70264528" class="indexterm"></a><a id="idp70265424" class="indexterm"></a><p><span class="application">OpenOffice.org</span> comprend toutes
	les applications indispensables d'une suite de bureautique
	complète: un traitement de texte, un tableur, un programme de
	gestion de présentation, et un logiciel de dessin.  Son
	interface utilisateur est très proche de celle d'autres suites
	de bureautique, et elle peut importer et exporter dans divers
	formats de fichiers populaires.  Elle est disponible dans de
	nombreuses langues &#8212; l'interface, les correcteurs
	orthographiques, et les dictionnaires ont été
	internationalisés.</p><p>Le traitement de texte
	d'<span class="application">OpenOffice.org</span> utilise un format
	de fichier natif en XML pour augmenter la portabilité et la
	flexibilité.  Le tableur dispose d'un langage de macro et il
	peut être interfacé avec des bases de données
	extérieures.
	<span class="application">OpenOffice.org</span> est déjà stable
	et fonctionne en natif sous <span class="trademark">Windows</span>®, <span class="trademark">Solaris</span>&#8482;, Linux, FreeBSD,
	et <span class="trademark">Mac OS</span>® X.
	Plus d'information à propos
	d'<span class="application">OpenOffice.org</span> peut être
	trouvé sur le <a class="link" href="http://www.openoffice.org/" target="_top">site
	Web d'OpenOffice.org</a>.  Pour une information spécifique
	à FreeBSD, et pour télécharger directement les versions
	précompilées, utilisez le site Web de
	<a class="link" href="http://porting.openoffice.org/freebsd/" target="_top">l'Equipe FreeBSD
	de portage d'OpenOffice.org</a>.</p><p>Pour installer <span class="application">OpenOffice.org</span>,
        faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r openoffice.org</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette commande devrait fonctionner si vous utilisez une
	  version -RELEASE de FreeBSD.  Si ce n'est pas le cas, vous
	  devriez consulter le site de l'équipe de portage
	  d'<span class="application">OpenOffice.org</span> pour
	  télécharger puis installer le paquetage
	  adéquat en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pkg_add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pkg_add</span>(1)</span></a>.  Les versions
	  actuelles et de développement sont
	  disponibles.</p></div><p>Une fois l'installation effective, vous avez juste
	à taper la commande suivante pour exécuter
	<span class="application">OpenOffice.org</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>openoffice.org</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Lors de la première exécution, quelques
	  questions vous seront posées et un répertoire
	  <code class="filename">.openoffice.org2</code> sera créé
	  dans votre répertoire utilisateur.</p></div><p>Si les version pré-compilées
	d'<span class="application">OpenOffice.org</span> ne sont pas
	disponibles, vous avez toujours la possibilité de compiler
	le logiciel porté.  Cependant, vous devez garder à
	l'esprit que cela demande beaucoup d'espace disque et un temps de
	compilation relativement long.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/editors/openoffice.org-2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous désirez compiler une version localisée,
	  remplacez la dernière ligne de commande avec la
	  suivante:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make LOCALIZED_LANG=votre_langage install clean</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Vous devez remplacer
	  <em class="replaceable"><code>votre_langage</code></em> avec le code ISO de
	  langage approprié.  Une liste des codes de langage
	  supportés est disponible dans le fichier
	  <code class="filename">files/Makefile.localized</code> situé
	  dans le répertoire du logiciel porté.</p></div><p>Une fois cela effectué,
	<span class="application">OpenOffice.org</span> peut être
	lancé avec la commande:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>openoffice.org</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-viewers"></a>7.4. Lecteurs de document</h2></div></div></div><p>Certains nouveaux formats de documentation ont
      gagné en popularité depuis l'avènement d'<span class="trademark">UNIX</span>®;
      les lecteurs standard qu'ils
      nécessitent peuvent ne pas être disponibles
      dans le système de base.  Nous verrons, dans cette section,
      comment installer ces lecteurs de document.</p><p>Cette section couvre les applications suivantes:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nom de l'application</th><th>Ressources nécessaires</th><th>Installation à partir du catalogue des logiciels
	      portés</th><th>Dépendances principales</th></tr></thead><tbody><tr><td><span class="application"><span class="trademark">Acrobat Reader</span>®</span></td><td>faibles</td><td>légère</td><td>Compatibilité binaire Linux</td></tr><tr><td><span class="application">gv</span></td><td>faibles</td><td>légère</td><td><span class="application">Xaw3d</span></td></tr><tr><td><span class="application">Xpdf</span></td><td>faibles</td><td>légère</td><td><span class="application">FreeType</span></td></tr><tr><td><span class="application">GQview</span></td><td>faibles</td><td>légère</td><td><span class="application">Gtk+</span> ou <span class="application">GNOME</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70308688"></a>7.4.1. <span class="trademark">Acrobat Reader</span>®</h3></div></div></div><a id="idp70309584" class="indexterm"></a><a id="idp70310480" class="indexterm"></a><p>De nombreux documents sont désormais distribués
	sous forme de fichiers PDF, qui signifie &#8220;Format Portable de
	Document&#8221; - Portable Document Format.  Un des lecteurs
	recommandé est <span class="application"><span class="trademark">Acrobat Reader</span>®</span>,
	sorti par Adobe pour Linux.  Comme FreeBSD peut exécuter les
	binaires Linux, il est également disponible pour
	FreeBSD.</p><p>Pour installer <span class="application"><span class="trademark">Acrobat Reader</span>®
	7</span>, à partir du catalogue de logiciels
	portés, faire:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/print/acroread7</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Il n'existe pas de paquetage pour des raisons de
	licence.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70320208"></a>7.4.2. gv</h3></div></div></div><a id="idp70320848" class="indexterm"></a><a id="idp70321744" class="indexterm"></a><a id="idp70322896" class="indexterm"></a><p><span class="application">gv</span> un lecteur de fichier
	<span class="trademark">PostScript</span>® et PDF.  Il est a l'origine basé sur
	<span class="application">ghostview</span> mais présente un plus bel
	aspect grâce à la bibliothèque <span class="application">Xaw3d</span>.  Il est
	rapide et son interface est simple.
	<span class="application">gv</span> possède de nombreuses
	fonctionnalités comme l'orientation, le format du papier,
	l'échelle, l'anticrénelage.  Presque toutes les
	opérations peuvent être effectuées soit à
	partir du clavier soit à la souris.</p><p>Pour installer <span class="application">gv</span> à partir
	de la version pré-compilée, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gv</code></strong></pre><p>Si vous ne pouvez obtenir la version pré-compilée,
	vous pouvez utiliser le catalogue des logiciels
	portés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/print/gv</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70330448"></a>7.4.3. Xpdf</h3></div></div></div><a id="idp70331088" class="indexterm"></a><a id="idp70331984" class="indexterm"></a><p>Si vous désirez un petit lecteur de fichiers PDF,
        <span class="application">Xpdf</span> est léger et efficace.
	Il demande très peu de ressources et est très stable.
	Il utilise les polices de caractères standards de X et ne
	requiert pas <span class="application"><span class="trademark">Motif</span>®</span> ou tout autre ensemble d'éléments
	graphiques pour X.</p><p>Pour installer la version pré-compilée
	d'<span class="application">Xpdf</span> utilisez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r xpdf</code></strong></pre><p>Si la version pré-compilée n'est pas
	disponible ou que vous préfériez utiliser le
	catalogue des logiciels portés, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/xpdf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre><p>Une fois l'installation achevée, vous pouvez lancer
	<span class="application">Xpdf</span> et utiliser le bouton droit de
	la souris pour activer le menu.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70339536"></a>7.4.4. GQview</h3></div></div></div><a id="idp70340176" class="indexterm"></a><p><span class="application">GQview</span> est un gestionnaire
	d'image.  Vous pouvez visualiser un fichier avec un simple
	clic, lancer un éditeur externe, obtenir une
	pré-visualisation
	par vignettes, et bien plus.  Il propose également un mode
	présentation et quelques possibilités
	d'opérations sur fichiers de base.  Vous pouvez gérer des
	collections d'images et trouver facilement les doublons.
	<span class="application">GQview</span> supporte l'affichage plein
	écran et l'internationalisation de l'interface.</p><p>Si vous désirez installer la version
	pré-compilée de <span class="application">GQview</span>,
	faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gqview</code></strong></pre><p>Si la version pré-compilée n'est pas disponible ou que
	vous préférez utiliser le catalogue des logiciels
	portés, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/graphics/gqview</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-finance"></a>7.5. Finance</h2></div></div></div><p>Si, pour diverses raisons, vous voudriez gérer vos
      finances personnelles sous FreeBSD, il existe quelques
      applications puissantes et simples d'emploi prêtes
      à être installées.  Certaines d'entre elles
      sont compatibles avec des formats de fichiers très
      répandus comme ceux utilisés par <span class="application">Quicken</span> ou <span class="application">Excel</span> pour stocker des documents.</p><p>Cette section couvre les programmes suivants:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Nom de l'application</th><th>Ressources nécessaires</th><th>Installation à partir du catalogue des logiciels
	      portés</th><th>Dépendances principales</th></tr></thead><tbody><tr><td><span class="application">GnuCash</span></td><td>faibles</td><td>lourde</td><td><span class="application">GNOME</span></td></tr><tr><td><span class="application">Gnumeric</span></td><td>faibles</td><td>lourde</td><td><span class="application">GNOME</span></td></tr><tr><td><span class="application">Abacus</span></td><td>faibles</td><td>légère</td><td><span class="application">Tcl/Tk</span></td></tr><tr><td><span class="application">KMyMoney</span></td><td>faibles</td><td>lourde</td><td><span class="application">KDE</span></td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70373712"></a>7.5.1. GnuCash</h3></div></div></div><a id="idp70374352" class="indexterm"></a><p><span class="application">GnuCash</span> fait partie de l'effort
        <span class="application">GNOME</span> en vue de fournir des
	applications puissantes et conviviales pour l'utilisateur final.
	Avec <span class="application">GnuCash</span>, vous pouvez suivre vos
	crédits et débits, vos comptes bancaires, et vos actions.
	Il présente une interface intuitive tout en restant très
	professionnel.</p><p><span class="application">GnuCash</span> fournit un registre
	intelligent, un système hiérarchique pour les comptes, de
	nombreux raccourcis clavier et des systèmes
	d'autocomplémentation de la frappe au clavier.  Il peut
	diviser une simple transaction en plusieurs étapes plus
	détaillées.  <span class="application">GnuCash</span> peut
	importer et fusionner des fichiers QIF de <span class="application">Quicken</span>.  Il supporte
	également la plupart des formats internationaux de date et de
	monnaies.</p><p>Pour installer <span class="application">GnuCash</span> sur
	votre système, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnucash</code></strong></pre><p>Si la version pré-compilée n'est pas disponible, vous
	pouvez utiliser le catalogue des logiciels portés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/finance/gnucash</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70386128"></a>7.5.2. Gnumeric</h3></div></div></div><a id="idp70386768" class="indexterm"></a><a id="idp70387664" class="indexterm"></a><p><span class="application">Gnumeric</span> est un tableur,
	faisant partie de l'environnement de travail
	<span class="application">GNOME</span>.
	Il dispose d'un système automatique &#8220;devinant&#8221;
	le type d'entrée de l'utilisateur en fonction du format de la
	cellule avec un système de remplissage automatique pour de
	nombreuses séquences d'utilisation.  Il peut importer des
	fichiers de nombreux formats populaires comme ceux d'<span class="application">Excel</span>,
	<span class="application">Lotus 1-2-3</span>, ou <span class="application">Quattro Pro</span>.
	<span class="application">Gnumeric</span> supporte l'affichage de
	graphiques grâce au programme de tracé
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/math/guppi/pkg-descr">math/guppi</a>.  Il dispose
	d'un grand nombre de fonctions intégrées et permet tous les
	formats de cellule habituels comme le format numérique,
	monétaire, date, temps, et bien plus.</p><p>Pour installer <span class="application">Gnumeric</span> sous
	forme pré-compilée, tapez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r gnumeric</code></strong></pre><p>Si la version pré-compilée n'est pas disponible, vous
	pouvez utiliser le catalogue des logiciels portés en
	faisant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/math/gnumeric</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70395856"></a>7.5.3. Abacus</h3></div></div></div><a id="idp70396496" class="indexterm"></a><a id="idp70397392" class="indexterm"></a><p><span class="application">Abacus</span> est un tableur léger et
	facile d'emploi.  Il incorpore de nombreuses fonctions utiles
	dans plusieurs domaines comme les statistiques, la finance, et
	les mathématiques.  Il peut importer et exporter en format
	<span class="application">Excel</span>.  <span class="application">Abacus</span> peut produire des
	sorties en <span class="trademark">PostScript</span>®.</p><p>Pour installer <span class="application">Abacus</span> à partir
        de la version pré-compilée, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r abacus</code></strong></pre><p>Si la version pré-compilée n'est pas disponible, vous
	pouvez utiliser le catalogue des logiciels portés en
	faisant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/deskutils/abacus</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70408784"></a>7.5.4. KMyMoney</h3></div></div></div><a id="idp70409424" class="indexterm"></a><a id="idp70410064" class="indexterm"></a><p><span class="application">KMyMoney</span> est un programme de
	comptabilité personnelle pour
	<span class="application">KDE</span>.
	<span class="application">KMyMoney</span> a pour objectif de fournir
	et d'incorporer toutes les fonctionnalités importantes
	que l'on retrouve dans les applications de comptabilité
	personnelle commerciales.  Il met également l'accent
	sur la facilité d'utilisation et la mise en place d'une
	comptabilité en partie double.
	<span class="application">KMyMoney</span> peut importer les fichiers
	au format Quicken (QIF), suivre des placements, gérer
	plusieurs monnaies et fournir une quantité de
	compte-rendus.  La possibilité d'importer des fichiers
	au format OFX est également disponible à l'aide
	d'un greffon séparé.</p><p>Pour installer <span class="application">KMyMoney</span> sous
	forme d'un paquetage:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pkg_add -r kmymoney2</code></strong></pre><p>Si le paquetage n'est pas disponible, vous pouvez utiliser
	le catalogue des logiciels portés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/finance/kmymoney2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install clean</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="desktop-summary"></a>7.6. Résumé</h2></div></div></div><p>Alors que FreeBSD est populaire parmi les fournisseurs
      d'accès à Internet pour ses performances et sa
      stabilité, il est quasiment prêt pour une utilisation
      quotidienne en tant que station de travail.  Avec plusieurs
      milliers d'applications disponibles sous forme <a class="link" href="http://www.FreeBSD.org/where.html" target="_top">pré-compilées</a>
      ou dans le <a class="link" href="http://www.FreeBSD.org/ports/index.html" target="_top">catalogue
      des logiciels portés</a>, vous pouvez vous construire
      l'environnement de travail qui vous conviendra le mieux.</p><p>Voici un bref rappel de toutes les applications abordées
      dans ce chapitre:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nom de l'application</th><th>Nom du logiciel pré-compilé</th><th>Nom du logiciel porté</th></tr></thead><tbody><tr><td><span class="application">Mozilla</span></td><td><code class="literal">mozilla</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a></td></tr><tr><td><span class="application">Opera</span></td><td><code class="literal">opera</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/opera/pkg-descr">www/opera</a></td></tr><tr><td><span class="application">Firefox</span></td><td><code class="literal">firefox</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/firefox/pkg-descr">www/firefox</a></td></tr><tr><td><span class="application">KOffice</span></td><td><code class="literal">koffice-kde3</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/koffice-kde3/pkg-descr">editors/koffice-kde3</a></td></tr><tr><td><span class="application">AbiWord</span></td><td><code class="literal">abiword</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/abiword/pkg-descr">editors/abiword</a></td></tr><tr><td><span class="application">The GIMP</span></td><td><code class="literal">gimp</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gimp/pkg-descr">graphics/gimp</a></td></tr><tr><td><span class="application">OpenOffice.org</span></td><td><code class="literal">openoffice</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/editors/openoffice-1.1/pkg-descr">editors/openoffice-1.1</a></td></tr><tr><td><span class="application"><span class="trademark">Acrobat Reader</span>®</span></td><td><code class="literal">acroread</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/acroread7/pkg-descr">print/acroread7</a></td></tr><tr><td><span class="application">gv</span></td><td><code class="literal">gv</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/gv/pkg-descr">print/gv</a></td></tr><tr><td><span class="application">Xpdf</span></td><td><code class="literal">xpdf</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xpdf/pkg-descr">graphics/xpdf</a></td></tr><tr><td><span class="application">GQview</span></td><td><code class="literal">gqview</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/gqview/pkg-descr">graphics/gqview</a></td></tr><tr><td><span class="application">GnuCash</span></td><td><code class="literal">gnucash</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/finance/gnucash/pkg-descr">finance/gnucash</a></td></tr><tr><td><span class="application">Gnumeric</span></td><td><code class="literal">gnumeric</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/math/gnumeric/pkg-descr">math/gnumeric</a></td></tr><tr><td><span class="application">Abacus</span></td><td><code class="literal">abacus</code></td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/deskutils/abacus/pkg-descr">deskutils/abacus</a></td></tr></tbody></table></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="multimedia"></a>Chapitre 8. Multimédia</h2></div><div><span class="authorgroup">Mise en forme par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ross</span> <span class="surname">Lippert</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#multimedia-synopsis">8.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#sound-setup">8.2. Configurer une carte son</a></span></dt><dt><span class="sect1"><a href="#sound-mp3">8.3. Fichiers MP3</a></span></dt><dt><span class="sect1"><a href="#video-playback">8.4. Lecture des Vidéos</a></span></dt><dt><span class="sect1"><a href="#tvcard">8.5. Configuration des cartes TV</a></span></dt><dt><span class="sect1"><a href="#scanners">8.6. Scanners</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="multimedia-synopsis"></a>8.1. Synopsis</h2></div></div></div><p>FreeBSD supporte une grande variété de cartes son, vous
      permettant d'obtenir un son haute fidélité à partir
      de votre ordinateur.  Ceci inclut la possibilité d'enregistrer et
      de jouer les formats &#8220;MPEG Audio Layer 3&#8221; (MP3), WAV et Ogg
      Vorbis aussi bien que de nombreux autres formats.  Le catalogue de
      logiciels portés de FreeBSD contient également des
      applications vous permettant d'éditer vos enregistrements,
      rajouter des effets sonores, et contrôler des
      périphériques MIDI.</p><p>Avec un peu d'expérimentation,
      FreeBSD pourra lire des fichiers vidéo et des DVDs.  Le
      nombre d'applications pour encoder, convertir, et lire divers
      supports vidéo est plus limité que le
      nombre d'applications équivalentes dans le domaine
      du son.  Par exemple au
      moment de l'écriture de ces lignes, il n'existe pas de
      bonne application d'encodage dans le catalogue des logiciels
      portés de FreeBSD, qui pourra être utilisée pour
      convertir d'un format à un autre, comme peut le faire pour
      le son le programme <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sox/pkg-descr">audio/sox</a>.  Cependant, le paysage
      logiciel dans ce domaine évolue rapidement.</p><p>Ce chapitre décrira les étapes
      nécessaires pour configurer votre carte son.  La configuration
      et l'installation d'X11
      (<a class="xref" href="#x11" title="Chapitre 6. Le système X Window">Chapitre 6, <em>Le système X Window</em></a>) ont
      déjà pris soin des problèmes matériel
      de votre carte vidéo, bien qu'il puisse y avoir quelques
      réglages à ajuster pour obtenir une meilleure
      lecture des vidéos.</p><p>Après la lecture de ce chapitre, vous connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment configurer votre système afin que votre
	  carte son soit reconnue.</p></li><li class="listitem"><p>Les méthodes pour tester le fonctionnement de votre
	  carte.</p></li><li class="listitem"><p>Comment faire face aux problèmes de configuration
	  de votre carte son.</p></li><li class="listitem"><p>Comment jouer et encoder des MP3s.</p></li><li class="listitem"><p>Comment la vidéo est supportée par
	  X11.</p></li><li class="listitem"><p>Quelques logiciels portés qui donnent de bon
	  résultats pour lire/encoder de la vidéo.</p></li><li class="listitem"><p>Comment lire des DVDs, des fichiers <code class="filename">.mpg</code> et
	  <code class="filename">.avi</code>.</p></li><li class="listitem"><p>Comment extraire l'information présente sur des
	  CDs et des DVDs.</p></li><li class="listitem"><p>Comment configurer une carte TV.</p></li><li class="listitem"><p>Comment configurer un scanner.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment configurer et installer un
        nouveau noyau (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li></ul></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Essayer de monter des CDs audio avec
	la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> aura pour résultat
	une erreur, au moins, et une <span class="emphasis"><em>panique du
	noyau</em></span>, au pire.  Ces supports ont des codages
	spécifiques qui diffèrent du système
	de fichiers ISO classique.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-setup"></a>8.2. Configurer une carte son</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Moses</span> <span class="surname">Moore</span></span>. </span></div><div><span class="authorgroup">Augmentée pour FreeBSD 5.X par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-device"></a>8.2.1. Configuration du système</h3></div></div></div><a id="idp70504656" class="indexterm"></a><a id="idp70505296" class="indexterm"></a><a id="idp70505808" class="indexterm"></a><p>Avant que vous commenciez, vous devriez connaître le
      modèle de carte son que vous avez, la puce qu'elle utilise, et si
      c'est une carte PCI ou ISA.  FreeBSD supporte une grande
      variété de cartes PCI et ISA.
      Consultez la liste des périphériques audio
      supportés des <a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">notes
      de compatibilité matériel</a> pour voir si
      votre carte est supportée.  Ces notes indiqueront
      également quel pilote supporte votre carte.</p><a id="idp70507216" class="indexterm"></a><p>Pour utiliser votre carte son, vous devrez charger le pilote
      de périphérique approprié.  Cela peut être
      fait de deux façons.  La plus simple est de charger le module pour
      votre carte son avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>, ce qui peut être
      soit fait à partir de la ligne de commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_emu10k1</code></strong></pre><p>soit en ajoutant la ligne appropriée dans le fichier
      <code class="filename">/boot/loader.conf</code> comme cela:</p><pre class="programlisting">snd_emu10k1_load="YES"</pre><p>Ces exemples concernent la carte Creative <span class="trademark">SoundBlaster</span>®
      Live!.  Les autres modules son chargeables sont listés dans
      <code class="filename">/boot/defaults/loader.conf</code>.  Si vous
      n'êtes pas sûr du pilote à utiliser, vous
      pouvez tenter de charger le pilote
      <code class="filename">snd_driver</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload snd_driver</code></strong></pre><p>C'est un méta-pilote
      chargeant directement les pilotes les plus courants.  Cela
      accélère la recherche du pilote
      adapté.  Il est également possible de charger
      l'intégralité des pilotes de cartes son en
      utilisant le système
      <code class="filename">/boot/loader.conf</code>.</p><p>Si vous voulez connaître le pilote
      sélectionné lors du chargement du
      méta-pilote <code class="filename">snd_driver</code>, vous pouvez
      consulter le fichier <code class="filename">/dev/sndstat</code> à
      cet effet, et cela à l'aide de la commande <code class="command">cat
      /dev/sndstat</code>.</p><p>Une seconde méthode est de compiler le
      support pour votre carte son en statique dans votre noyau.  La
      section ci-dessous fournit les informations nécessaires pour
      ajouter le support de votre matériel de cette manière.
      Pour plus d'informations au sujet de la recompilation de votre noyau,
      veuillez consulter le <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70521552"></a>8.2.1.1. Configurer un noyau sur mesure avec support du
	son</h4></div></div></div><p>La première chose à effectuer est d'ajouter
	au noyau le pilote de périphérique audio
	générique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a>; pour cela vous devrez
	ajouter la ligne suivante au fichier de configuration du
	noyau:</p><pre class="programlisting">device sound</pre><p>Ensuite, vous devez ajouter le support pour votre carte
	son.  Par conséquent, vous devez savoir quel pilote
	supporte la carte.  Consultez la liste des
	périphériques audio supportés des <a class="link" href="http://www.FreeBSD.org/releases/10.1R/hardware.html" target="_top">notes de compatibilité
	matériel</a> pour déterminer le pilote
	correct pour votre carte son.  Par exemple, une carte son
	Creative <span class="trademark">SoundBlaster</span>® Live! est supportée par le
	pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_emu10k1&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_emu10k1</span>(4)</span></a>.  Pour ajouter le support pour
	cette carte, utilisez ce qui suit:</p><pre class="programlisting">device snd_emu10k1</pre><p>Assurez-vous de lire la page de manuel du pilote pour la
	syntaxe à utiliser.  La syntaxe de la configuration
	du noyau pour chaque pilote de carte son supportée
	peut être également trouvée dans
	le fichier <code class="filename">/usr/src/sys/conf/NOTES</code>.</p><p>Les cartes son ISA non-PnP pourront nécessiter de
	fournir au noyau des informations sur le paramétrage de
	la carte (IRQ, port d'E/S, etc.), comme c'est en général le
	cas pour toutes les cartes ISA non-PnP.  Cela s'effectue par
	l'intermédiaire du fichier
	<code class="filename">/boot/device.hints</code>.  Au démarrage
	du système, le chargeur (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>) lira ce
	fichier et passera les paramètres au noyau.  Par
	exemple, une vieille carte ISA non-PnP Creative <span class="trademark">SoundBlaster</span>®
	16 utilisera le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> de paire avec <code class="literal">snd_sb16</code>, on ajoutera alors la ligne suivante
	au fichier de configuration du noyau:</p><pre class="programlisting">device snd_sbc
device snd_sb16</pre><p>avec également ceci dans le fichier
	<code class="filename">/boot/device.hints</code>:</p><pre class="programlisting">hint.sbc.0.at="isa"
hint.sbc.0.port="0x220"
hint.sbc.0.irq="5"
hint.sbc.0.drq="1"
hint.sbc.0.flags="0x15"</pre><p>Dans ce cas, la carte utilise le port d'E/S
	<code class="literal">0x220</code> et l'IRQ <code class="literal">5</code>.</p><p>La syntaxe utilisée dans le fichier
	<code class="filename">/boot/device.hints</code> est abordée
	dans la page de manuel du pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sound&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sound</span>(4)</span></a> ainsi que celle
	du pilote spécifique à la carte son.</p><p>Les paramètres donnés ci-dessus sont ceux
	par défaut.  Dans certains cas, vous pouvez avoir
	besoin de modifier l'IRQ ou tout autre paramètre en
	fonction de votre carte son.  Consultez la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=snd_sbc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">snd_sbc</span>(4)</span></a> pour plus d'informations au sujet de cette
	carte.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-testing"></a>8.2.2. Tester la carte son</h3></div></div></div><p>Après avoir redémarré avec le noyau
      modifié, ou après avoir chargé le module
      nécessaire, la carte son devrait apparaître dans le
      tampon des messages du système (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>) d'un
      manière proche de la suivante:</p><pre class="screen">pcm0: &lt;Intel ICH3 (82801CA)&gt; port 0xdc80-0xdcbf,0xd800-0xd8ff irq 5 at device 31.5 on pci0
pcm0: [GIANT-LOCKED]
pcm0: &lt;Cirrus Logic CS4205 AC97 Codec&gt;</pre><p>L'état de la carte son peut être
      contrôlée par l'intermédiaire du fichier
      <code class="filename">/dev/sndstat</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /dev/sndstat</code></strong>
FreeBSD Audio Driver (newpcm)
Installed devices:
pcm0: &lt;Intel ICH3 (82801CA)&gt; at io 0xd800, 0xdc80 irq 5 bufsz 16384
kld snd_ich (1p/2r/0v channels duplex default)</pre><p>Le résultat pourra être différent sur
      votre système.  Si aucun périphérique
      <code class="filename">pcm</code> n'apparaît, retournez en
      arrière et revoyez ce qui a été fait
      précédemment.  Contrôlez à nouveau votre
      fichier de configuration du noyau et vérifiez que vous
      avez choisi le périphérique correct.  Les
      problèmes courants sont listés dans la
      <a class="xref" href="#troubleshooting" title="8.2.2.1. Problèmes courants">Section 8.2.2.1, « Problèmes courants »</a>.</p><p>Si tout va bien, vous devriez avoir maintenant une carte son
      qui fonctionne.  Si la sortie audio de votre lecteur de CD-ROM ou de DVD-ROM est
      correctement reliée à votre carte son, vous pouvez
      introduire un CD dans le lecteur et le jouer avec
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdcontrol&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdcontrol</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdcontrol -f /dev/acd0 play 1</code></strong></pre><p>Diverses applications, comme <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/workman/pkg-descr">audio/workman</a> offrent une meilleure
      interface.  Vous pouvez vouloir installer une application
      comme <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a> pour
      écouter des fichiers audio MP3.</p><p>Une autre méthode
      rapide pour tester la carte est d'envoyer des données au
      <code class="filename">/dev/dsp</code>, de la manière
      suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat filename &gt; /dev/dsp</code></strong></pre><p>où <em class="replaceable"><code>filename</code></em> peut
      être n'importe quel fichier.  Cette ligne de commande
      devrait produire des sons, confirmant le bon fonctionnement de
      la carte son.</p><p>Les niveaux du mixer de la carte son peuvent être
      modifiés par la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>.  Plus de
      détails peuvent être trouvés dans la page de
      manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mixer&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mixer</span>(8)</span></a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="troubleshooting"></a>8.2.2.1. Problèmes courants</h4></div></div></div><a id="idp70574672" class="indexterm"></a><a id="idp70575184" class="indexterm"></a><a id="idp70575696" class="indexterm"></a><a id="idp70576208" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Erreur</th><th>Solution</th></tr></thead><tbody><tr><td><span class="errorname">sb_dspwr(XX) timed out</span></td><td><p>Le port d'E/S n'est pas configuré
	        correctement.</p></td></tr><tr><td><span class="errorname">bad irq XX</span></td><td><p>L'IRQ sélectionnée est incorrecte.
		Vérifiez que l'IRQ choisie et l'IRQ de la carte son sont
		les mêmes.</p></td></tr><tr><td><span class="errorname">xxx: gus pcm not attached, out of
    	        memory</span></td><td><p>Il n'y a pas suffisamment de mémoire
	        disponible pour utiliser ce périphérique.</p></td></tr><tr><td><span class="errorname">xxx: can't open /dev/dsp!</span></td><td><p>Vérifiez avec la commande
		<code class="command">fstat | grep dsp</code> si une autre
		application maintient le périphérique ouvert.
		Souvent à l'origine de ce type de problème on
		trouve <span class="application">esound</span> et le support son de <span class="application">KDE</span>.</p></td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sound-multiple-sources"></a>8.2.3. Utiliser des sources sonores multiples</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Munish</span> <span class="surname">Chopra</span></span>. </span></div></div></div><p>Il est souvent intéressant de pouvoir jouer
      simultanément du son à partir de multiples
      sources, comme lorsque <span class="application">esound</span> ou
      <span class="application">artsd</span> ne supportent pas le partage du
      périphérique son avec certaines applications.</p><p>FreeBSD vous permet de le faire par l'intermédiaire
      de <span class="emphasis"><em>Canaux Sonores Virtuels</em></span>, qui peuvent
      être activés avec la fonction <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  Les canaux
      virtuels vous permettent de multiplexer la sortie de
      votre carte son en mixant le son au niveau du noyau.</p><p>Pour configurer le nombre de canaux virtuels, il existe deux
      paramètres de sysctl qui, si vous avez les privilèges
      de l'utilisateur <code class="systemitem">root</code>, peuvent
      être configurés comme ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.pcm0.vchans=4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.snd.maxautovchans=4</code></strong></pre><p>L'exemple ci-dessus alloue quatre canaux virtuels, ce qui est
      un nombre suffisant pour une utilisation classique.
    <code class="varname">hw.snd.pcm0.vchans</code> est le nombre de canaux
      virtuels que possède <code class="filename">pcm0</code>,
      et est configurable une fois que le périphérique
      a été attaché au système.
      <code class="literal">hw.snd.maxautovchans</code> est le nombre de canaux
      virtuels alloués à un nouveau
      périphérique audio quand il est attaché
      à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.  Comme le module
      <code class="filename">pcm</code> peut être chargé
      indépendamment des pilotes de périphériques,
      <code class="literal">hw.snd.maxautovchans</code> peut stocker combien de
      canaux virtuels seront alloués à chaque
      périphérique attaché par la suite.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous ne pouvez pas modifier le nombre de canaux virtuels
	pour un périphérique en cours d'utilisation.
	Quittez avant tout autre chose les programmes utilisant le
	périphérique en question, comme les lecteurs de
	fichiers sonores ou les <span class="quote">« <span class="quote">daemons</span> »</span> audios.</p></div><p>Si vous n'utilisez pas <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>, vous devrez faire
      pointer vos applications sur
      <code class="filename">/dev/dsp0</code>.<em class="replaceable"><code>x</code></em>,
      où <em class="replaceable"><code>x</code></em> est 0 à 3 si
      <code class="varname">hw.snd.pcm.0.vchans</code> est fixé à 4.
      Sur un système utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>, ce qui
      précède sera automatiquement effectué
      de façon transparente pour le programme qui
      réclame le périphérique
      <code class="filename">/dev/dsp0</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70612048"></a>8.2.4. Définir les valeurs par défaut du mixeur
	des différents canaux</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Josef</span> <span class="surname">El-Rayes</span></span>. </span></div></div></div><p>Les valeurs par défaut du mixeur des
	différents canaux sont fixées en dur dans le
	code source du pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a>.  Il existe plusieurs
	applications et &#8220;daemons&#8221; qui vous permettent de
	fixer les valeurs du mixeur qui seront mémorisées entre
	chaque invocation, mais
	ce n'est pas une solution idéale.  Il est possible
	régler les valeurs par défaut au niveau du
	pilote &#8212; ceci se fait en définissant les valeurs
	adéquates dans le fichier
	<code class="filename">/boot/device.hints</code>.  Par exemple:</p><pre class="programlisting">hint.pcm.0.vol="50"</pre><p>Cela fixera le volume du canal à une valeur par
	défaut de 50; dès que le module <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pcm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pcm</span>(4)</span></a> est
	chargé.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sound-mp3"></a>8.3. Fichiers MP3</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><p>Les fichiers MP3 (MPEG Layer 3 Audio) donnent un son proche de
      la qualité d'un CD audio, il n'y a aucune raison pour que votre
      station de travail FreeBSD ne puisse pas en profiter.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-players"></a>8.3.1. Lecteurs de MP3s</h3></div></div></div><p>De loin, le plus populaire des lecteurs MP3 pour
	X11 est
        <span class="application">XMMS</span> (X Multimedia System). Les
	thèmes (skins) de <span class="application">Winamp</span> peuvent
	être utilisés avec <span class="application">XMMS</span>
	dès lors que l'interface est quasiment identique à celle
	du <span class="application">Winamp</span> de Nullsoft.
	<span class="application">XMMS</span> dispose aussi d'un support natif
	pour modules externes (plug-in).</p><p><span class="application">XMMS</span> peut être installé
	à partir du catalogue de logiciels portés
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xmms/pkg-descr">multimedia/xmms</a> ou de la version
	pré-compilée.</p><p>L'interface d'<span class="application">XMMS</span> est intuitive,
        avec une liste de lecture, un égaliseur graphique, et plus.
	Ceux qui sont familiers avec <span class="application">Winamp</span>
	trouveront <span class="application">XMMS</span> simple
	d'utilisation.</p><p>Le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/mpg123/pkg-descr">audio/mpg123</a> est une alternative, un
        lecteur de MP3 en ligne de commande.</p><p><span class="application">mpg123</span> peut être utilisé en
	spécifiant le périphérique sonore et le fichier
	MP3 sur la ligne de commande, comme montré ci-dessous:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpg123 -a /dev/dsp1.0 Foobar-GreatestHits.mp3</code></strong>
High Performance MPEG 1.0/2.0/2.5 Audio Player for Layer 1, 2 and 3.
Version 0.59r (1999/Jun/15). Written and copyrights by Michael Hipp.
Uses code from various people. See 'README' for more!
THIS SOFTWARE COMES WITH ABSOLUTELY NO WARRANTY! USE AT YOUR OWN RISK!





Playing MPEG stream from Foobar-GreastestHits.mp3 ...
MPEG 1.0 layer III, 128 kbit/s, 44100 Hz joint-stereo
</pre><p><code class="literal">/dev/dsp1.0</code> devrait être remplacé
	par le périphérique <code class="filename">dsp</code>
	correspondant sur votre système.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rip-cd"></a>8.3.2. Extraire les pistes de CDs Audio</h3></div></div></div><p>Avant d'encoder la totalité d'un CD ou une piste en MP3, les
	données audio doivent être extraites et
	transférées sur le disque dur.  Cela se fait en copiant
	les données brutes CDDA (CD Digital Audio) en fichiers WAV.</p><p>L'utilitaire <code class="command">cdda2wav</code>, qui fait partie de
	la suite <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>,
	est utilisé pour extraire les données audio de CDs et les
	informations rattachées.</p><p>Avec le CD audio dans le lecteur, la commande suivante peut
	être utilisée (en tant que <code class="systemitem">root</code>) pour
	convertir l'intégralité d'un CD en fichiers WAV (un par
	piste):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D 0,1,0 -B</code></strong></pre><p><span class="application">cdda2wav</span> supportera également les
	lecteurs de CDROM ATAPI (IDE).  Pour faire l'extraction à partir
	d'un lecteur IDE, précisez le nom du périphérique
	à la place de l'unité SCSI.  Par exemple, pour extraite
	la piste 7 à partir d'un lecteur IDE:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D /dev/acd0 -t 7</code></strong></pre><p>Le <code class="option">-D <em class="replaceable"><code>0,1,0</code></em></code>
	spécifie le périphérique SCSI
	<code class="filename">0,1,0</code>, qui correspond à ce qui est
	donné par la commande
	<code class="command">cdrecord -scanbus</code>.</p><p>Pour extraire des pistes individuelles, utilisez l'option
	<code class="option">-t</code> comme ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D 0,1,0 -t 7</code></strong></pre><p>Cet exemple extrait la septième piste du CD audio.  Pour
	extraire un ensemble de pistes, par exemple, de la piste 1 à 7,
	précisez un intervalle:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdda2wav -D 0,1,0 -t 1+7</code></strong></pre><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> peut également être
	utilisé pour extraire des pistes audios à partir de
	lecteurs ATAPI, consultez la <a class="xref" href="#duplicating-audiocds" title="19.6.5. Dupliquer des CDs Audio">Section 19.6.5, « Dupliquer des CDs Audio »</a> pour plus d'informations sur
	cette possibilité.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-encoding"></a>8.3.3. Encoder des MP3s</h3></div></div></div><p>De nos jours, l'encodeur mp3 à utiliser est
	<span class="application">lame</span>.
	<span class="application">Lame</span> peut être trouvé dans le
	catalogue de logiciels portés:
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a>.</p><p>En utilisant les fichiers WAV extraits, la commande suivante
	convertira le fichier <code class="filename">audio01.wav</code> en
	<code class="filename">audio01.mp3</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lame -h -b 128 \
--tt "La chanson XY" \
--ta "Artiste XY" \
--tl "Album XY" \
--ty "2001" \
--tc "Extrait et encodé par XY" \
--tg "Genre" \
audio01.wav audio01.mp3</code></strong></pre><p>128 kbits semble être le taux standard actuel du débit
	audio utilisé pour les MP3s. Nombreux sont ceux qui
	préfèrent des taux de haute qualité: 160 ou 192.
	Plus le débit audio est élevé plus
	l'espace disque utilisé par le fichier MP3 sera grand mais la
	qualité sera meilleure.  L'option <code class="option">-h</code> active le
	mode &#8220;haute qualité, mais un peu plus lent&#8221;.  Les
	options commençant par <code class="option">--t</code> indiquent des
	balises ID3, qui généralement contiennent les
	informations sur le morceau, devant être
	intégrées au fichier MP3.
	D'autres informations sur l'encodage peuvent être trouvées
	en consultant la page de manuel de Lame.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mp3-decoding"></a>8.3.4. Décoder des MP3s</h3></div></div></div><p>Afin de pouvoir graver un CD audio à partir de fichiers MP3,
	ces derniers doivent être convertis dans le format WAV non
	compressé.  <span class="application">XMMS</span> et
	<span class="application">mpg123</span> supportent tous les deux la
	sortie de fichiers MP3 en format de fichier non
	compressé.</p><p>Ecriture sur le disque avec <span class="application">XMMS</span>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Lancez <span class="application">XMMS</span>.</p></li><li class="step"><p>Clic-droit sur la fenêtre pour faire apparaître le
	    menu d'<span class="application">XMMS</span>.</p></li><li class="step"><p>Sélectionner <code class="literal">Preference</code> sous
	    <code class="literal">Options</code>.</p></li><li class="step"><p>Changez l'option &#8220;Output Plugin&#8221; pour
	    &#8220;Disk Writer Plugin&#8221;.</p></li><li class="step"><p>Appuyez sur <code class="literal">Configure</code>.</p></li><li class="step"><p>Entrez (ou choisissez browse) un répertoire où va
	    être écrit le fichier décompressé.</p></li><li class="step"><p>Chargez le fichier MP3 dans <span class="application">XMMS</span>
	    comme à l'accoutumé, avec le volume à 100% et
	    l'égaliseur (EQ settings) désactivé.</p></li><li class="step"><p>Appuyez sur <code class="literal">Play</code> &#8212;
	    <span class="application">XMMS</span> devrait se comporter comme
	    s'il jouait le MP3, mais aucun son ne sera audible.  Il est
	    en fait en train de &#8220;jouer&#8221; le MP3 dans un
	    fichier.</p></li><li class="step"><p>Vérifiez que vous avez rétabli l'option
	    &#8220;Output Plugin&#8221; à sa valeur de départ
	    afin de pouvoir écouter à nouveau des MP3s.</p></li></ol></div><p>Ecriture sur le disque avec <span class="application">mpg123</span>:</p><div class="procedure"><ul class="procedure"><li class="step"><p>Lancez <code class="command">mpg123 -s audio01.mp3
	    &gt; audio01.pcm</code></p></li></ul></div><p><span class="application">XMMS</span> crée un fichier au format
	WAV, tandis que <span class="application">mpg123</span> convertit le
	fichier MP3 en données audio PCM brutes.  Ces deux formats
	peuvent être utilisés avec
	<span class="application">cdrecord</span> pour créer des CDs audio.
	Vous devez utiliser des fichiers PCM bruts avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">burncd</span>(8)</span></a>.  Si vous utilisez des fichiers WAV, vous
	noterez un petit parasite au début de chaque piste, ce son est
	l'entête du fichier WAV.  Vous pouvez simplement retirer
	l'entête d'un fichier WAV avec l'utilitaire
	<span class="application">SoX</span> (il peut être installé
	à partir du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/sox/pkg-descr">audio/sox</a> ou de la version
	pré-compilée):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sox -t wav -r 44100 -s -w -c 2 track.wav track.raw</code></strong></pre><p>Lisez la <a class="xref" href="#creating-cds" title="19.6. Création et utilisation de supports optiques (CDs)">Section 19.6, « Création et utilisation de supports optiques
      (CDs) »</a> pour plus d'informations
	sur l'utilisation d'un graveur de CD sous FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="video-playback"></a>8.4. Lecture des Vidéos</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Ross</span> <span class="surname">Lippert</span></span>. </span></div></div></div><p>Les applications pour lire des vidéos
      sont assez récentes et se développent
      très rapidement.  Soyez patient.  Tout ne va pas
      fonctionner aussi bien que cela pu être le cas avec
      le son.</p><p>Avant que vous ne commenciez, vous devrez connaître
      le modèle de carte vidéo dont vous disposez ainsi
      que le circuit intégré qu'elle utilise.  Alors
      qu'<span class="application">Xorg</span> et <span class="application"><span class="trademark">XFree86</span>&#8482;</span> supportent une large
      variété de cartes
      vidéo, seul un petit nombre d'entre elles donne de bonnes
      performances en lecture de vidéos.  Pour obtenir la liste
      des extensions supportées par le serveur X utilisant votre
      carte employez la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdpyinfo&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdpyinfo</span>(1)</span></a> durant le
      fonctionnement d'X11.</p><p>C'est une bonne idée d'avoir un court fichier MPEG
      qui pourra être utilisé comme fichier test pour
      évaluer divers lecteurs et leurs options.  Comme certains
      programmes de lecture de DVD chercheront un support DVD sur
      <code class="filename">/dev/dvd</code> par défaut, ou ont ce
      périphérique fixé définitivement dans
      leur code, vous pourrez trouver utile de créer des liens
      symboliques vers les périphériques corrects:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/acd0 /dev/dvd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -sf /dev/acd0 /dev/rdvd</code></strong></pre><p>Notez qu'en raison de la nature du système
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a>, les liens créés à la main
      comme les précédents ne seront pas
      conservés si vous redémarrez le système.
      Afin de créer automatiquement les liens symboliques
      dès que vous redémarrez votre système,
      ajoutez les lignes suivantes au fichier
      <code class="filename">/etc/devfs.conf</code>:</p><pre class="programlisting">link acd0 dvd
link acd0 rdvd</pre><p>De plus, le décodage de DVD, qui nécessite
      de faire appel à des fonctions spéciales du
      lecteur de DVD, demande d'avoir la permission d'écrire sur les
      périphériques DVD.</p><p>Pour augmenter la mémoire partagée
      pour l'interface X11, il est recommandé que les valeurs de
      certaines variables <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> soient augmentées:</p><pre class="programlisting">kern.ipc.shmmax=67108864
kern.ipc.shmall=32768</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface"></a>8.4.1. Déterminer les capacités vidéo</h3></div></div></div><a id="idp70702032" class="indexterm"></a><a id="idp70702544" class="indexterm"></a><a id="idp70703056" class="indexterm"></a><p>Il y a plusieurs manières possibles pour
      afficher de la vidéo sous X11.  Ce qui fonctionnera vraiment est
      énormément dépendant du matériel.
      Chaque méthode décrite ci-dessous donnera
      différents résultats en fonction du matériel.
      De plus, le rendu de la vidéo sous X11 est un sujet recevant
      beaucoup d'attention dernièrement, et avec chaque nouvelle
      version d'<span class="application">Xorg</span>, ou d'<span class="application"><span class="trademark">XFree86</span>&#8482;</span>, il pourra y avoir des
      améliorations significatives.</p><p>Une liste des interfaces vidéo communes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>X11: sortie X11 classique utilisant de la mémoire
	partagée.</p></li><li class="listitem"><p>XVideo: une extension de l'interface X11 qui supporte
	la vidéo sur n'importe quelle partie de l'écran
	contrôlé par X11.</p></li><li class="listitem"><p>SDL: &#8220;Simple Directmedia Layer&#8221; - couche simple
	d'accès directe au média.</p></li><li class="listitem"><p>DGA: &#8220;Direct Graphics Access&#8221; - accès direct au
	graphique.</p></li><li class="listitem"><p>SVGAlib: couche graphique bas niveau pour la console.</p></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-xvideo"></a>8.4.1.1. XVideo</h4></div></div></div><p><span class="application">Xorg</span> et <span class="application"><span class="trademark">XFree86</span>&#8482; 4.X</span> disposent d'une extension
	appelée
        <span class="emphasis"><em>XVideo</em></span> (également connue sous les termes
	Xvideo, Xv, ou xv) qui permet d'afficher directement de la
	vidéo à travers une accélération
	spécifique.  Cette extension fournit une très bonne
	qualité de rendu même sur les machines bas de gamme.</p><p>Pour vérifier si l'extension fonctionne utilisez
	<code class="command">xvinfo</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xvinfo</code></strong></pre><p>XVideo est supporté pour votre carte si le
	résultat de la commande ressemble à:</p><pre class="screen">X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
      "XV_COLORKEY" (range 0 to 16777215)
              client settable attribute
              client gettable attribute (current value is 2110)
      "XV_BRIGHTNESS" (range -128 to 127)
              client settable attribute
              client gettable attribute (current value is 0)
      "XV_CONTRAST" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_SATURATION" (range 0 to 255)
              client settable attribute
              client gettable attribute (current value is 128)
      "XV_HUE" (range -180 to 180)
              client settable attribute
              client gettable attribute (current value is 0)
    maximum XvImage size: 1024 x 1024
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x30323449 (I420)
        guid: 49343230-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
      id: 0x36315652 (RV16)
        guid: 52563135-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x3e0, 0x7c00
      id: 0x35315652 (RV15)
        guid: 52563136-0000-0000-0000-000000000000
        bits per pixel: 16
        number of planes: 1
        type: RGB (packed)
        depth: 0
        red, green, blue masks: 0x1f, 0x7e0, 0xf800
      id: 0x31313259 (Y211)
        guid: 59323131-0000-0010-8000-00aa00389b71
        bits per pixel: 6
        number of planes: 3
        type: YUV (packed)
      id: 0x0
        guid: 00000000-0000-0000-0000-000000000000
        bits per pixel: 0
        number of planes: 0
        type: RGB (packed)
        depth: 1
        red, green, blue masks: 0x0, 0x0, 0x0</pre><p>Notez également que les formats listés
      (YUV2, YUV12, etc...) ne sont pas présents dans chaque
      implémentation d'XVideo et leur absence pourra gêner
      certains programmes.</p><p>Si le résultat ressemble à:</p><pre class="screen">X-Video Extension version 2.2
screen #0
no adaptors present</pre><p>Alors XVideo n'est probablement pas supporté pour votre
      carte.</p><p>Si XVideo n'est pas supporté pour votre carte,
      cela signifie seulement qu'il sera plus difficile pour votre
      système d'affichage de répondre aux demandes
      du rendu vidéo en termes de puissance de calcul.  En fonction
      de votre carte vidéo et de votre processeur, vous pourriez
      encore obtenir de bons résultats.  Vous devriez
      probablement vous documenter sur les méthodes pour
      améliorer les performances en lisant la <a class="xref" href="#video-further-reading" title="8.4.3. Lectures supplémentaires">Section 8.4.3, « Lectures supplémentaires »</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-SDL"></a>8.4.1.2. &#8220;Simple Directmedia Layer&#8221; - couche simple
      d'accès directe au média</h4></div></div></div><p>La couche simple d'accès directe au média, SDL,
      a été prévue pour être
      une couche de portage entre <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®, BeOS, et <span class="trademark">UNIX</span>®,
      permettant à des applications &#8220;cross-platform&#8221;
      qui font un usage efficace du son et du graphique d'être
      développées.  La couche SDL fournit une abstraction
      de bas niveau
      vers le matériel qui peut parfois être plus
      efficace que l'interface X11.</p><p>La bibliothèque SDL peut être trouvée
      dans <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/sdl12/pkg-descr">devel/sdl12</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-interface-DGA"></a>8.4.1.3. &#8220;Direct Graphics Access&#8221; - accès direct au
      graphique</h4></div></div></div><p>L'accès direct au graphique est une extension X11
      qui permet à un programme de bypasser le serveur X et
      d'accéder directement au matériel.  Comme il
      repose sur une copie bas niveau de la mémoire, les
      programmes l'utilisant doivent être
      exécutés avec les privilèges de l'utilisateur
      <code class="systemitem">root</code>.</p><p>L'extension DGA et ses performances peuvent être
      testées avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dga&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dga</span>(1)</span></a>.  Quand <code class="command">dga</code> est
      exécuté, il changera les couleurs de l'affichage
      à chaque appui sur une touche.  Pour quitter, utilisez la touche
      <span class="keycap"><strong>q</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports"></a>8.4.2. Logiciels portés et pré-compilés
      relatifs à la vidéo</h3></div></div></div><a id="idp70725712" class="indexterm"></a><a id="idp70734544" class="indexterm"></a><p>Cette section traite des logiciels disponibles dans le
      catalogue des logiciels portés de FreeBSD qui peuvent être
      utilisés pour lire de la vidéo.  Les applications
      vidéos sont un domaine de développement très
      actif, et les capacités de diverses applications seront
      sujettes à des divergences avec la description
      donnée ici.</p><p>Premièrement, il est important de savoir que plusieurs des
      applications vidéos fonctionnant sous FreeBSD ont
      été développées comme des applications pour
      Linux.  Plusieurs de ces applications sont encore
      considérées comme étant de qualité bêta.
      Parmi les problèmes que l'on peut rencontrer avec
      les applications vidéos sous FreeBSD, nous trouvons:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Une application ne peut pas lire un fichier produit par
	  une autre application.</p></li><li class="listitem"><p>Une application ne peut pas lire un fichier quelle a
	  produit.</p></li><li class="listitem"><p>La même application sur deux machines
	  différentes, recompilée sur chaque machine pour
	  la machine elle-même, jouera le fichier
	  différemment.</p></li><li class="listitem"><p>Un filtre apparemment insignifiant comme un changement
	  d'échelle de l'image donne de très mauvais
	  résultats en raison d'une routine de changement
	  d'échelle boguée.</p></li><li class="listitem"><p>Une application qui plante régulièrement.</p></li><li class="listitem"><p>La documentation n'est pas installée avec le logiciel
	  porté et peut être trouvée sur Internet ou
	  dans le répertoire
          <code class="filename">work</code> du logiciel porté.</p></li></ol></div><p>Parmin ces applications, nombreuses sont celles qui peuvent présenter des &#8220;Linuxismes&#8221;.  Aussi, il y peut y avoir des problèmes
      résultants de la façon dont certaines
      bibliothèques standards sont implémentées
      dans les distributions Linux, ou certaines caractéristiques
      du noyau Linux qui ont été employées
      par les auteurs des applications.
      Ces
      problèmes ne sont pas toujours remarqués et
      contournés par les
      responsables du portage du logiciel ce qui peut mener vers
      quelques ennuis comme ceux-ci:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>L'utilisation de <code class="filename">/proc/cpuinfo</code> pour
	  détecter les caractéristiques du processeur.</p></li><li class="listitem"><p>Une mauvaise utilisation des &#8220;threads&#8221; qui
	  provoque le blocage de programme au lieu de se terminer
	  complètement.</p></li><li class="listitem"><p>Des logiciels habituellement utilisés en conjonction
	  avec l'application ne sont pas encore dans le catalogue des
	  logiciels portés.</p></li></ol></div><p>Jusqu'ici, les développeurs de ces applications ont
	été coopératifs avec les responsables
	des logiciels portés pour minimiser les modifications
	nécessaires au portage.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer"></a>8.4.2.1. MPlayer</h4></div></div></div><p><span class="application">MPlayer</span> est une application pour lire des
	vidéos récemment et rapidement
	développée.  Les objectifs de l'équipe
	de <span class="application">MPlayer</span> sont la rapidité et la
	flexibilité sur
	Linux et autre <span class="trademark">UNIX</span>®.  Le projet fut démarré quand
	le fondateur de l'équipe en
	eu assez des mauvaises performances en lecture des autres
	lecteurs disponibles.  Certains diront que l'interface graphique a
	été sacrifiée pour une conception
	rationalisée.  Cependant, une fois que vous avez les options en ligne de
	commande et les combinaisons de touches en main, cela fonctionne
	très bien.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer-building"></a>8.4.2.1.1. Compiler MPlayer</h5></div></div></div><a id="idp70748368" class="indexterm"></a><p><span class="application">MPlayer</span> réside dans <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/mplayer/pkg-descr">multimedia/mplayer</a>.
	  <span class="application">MPlayer</span>
	  effectue un certain nombre de contrôle du
	  matériel durant le processus de compilation, il en
	  résulte un
	  binaire qui ne sera pas portable d'un système à l'autre.
	  Ainsi il est important d'utiliser le logiciel porté et de ne
	  pas utiliser un logiciel pré-compilé.
	  En plus, un certain nombre d'options peuvent être
	  spécifiées dans la ligne de commande <code class="command">make</code>,
	  comme décrit dans le fichier <code class="filename">Makefile</code>
	  et au départ de la compilation:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mplayer</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
N - O - T - E

Take a careful look into the Makefile in order
to learn how to tune mplayer towards you personal preferences!
For example,
make WITH_GTK1
builds MPlayer with GTK1-GUI support.
If you want to use the GUI, you can either install
/usr/ports/multimedia/mplayer-skins
or download official skin collections from
http://www.mplayerhq.hu/homepage/dload.html
</pre><p>Les options par défaut du logiciel porté
	  devraient être suffisantes pour la plupart des
	  utilisateurs.  Cependant si vous avez besoin du codec XviD,
	  vous devez spécifier l'option
	  <code class="varname">WITH_XVID</code> dans la ligne de commande.  Le
	  périphérique DVD par défaut peut
	  également être défini avec l'option
	  <code class="varname">WITH_DVD_DEVICE</code>, par défaut
	  <code class="filename">/dev/acd0</code> sera utilisé.</p><p>Au moment de l'écriture de ces lignes, le logiciel
	  porté de <span class="application">MPlayer</span> compilera sa
	  documentation HTML et deux exécutables,
	  <code class="command">mplayer</code> et
	  <code class="command">mencoder</code>, qui est un outil pour ré-encoder
	  de la vidéo.</p><p>La documentation HTML de <span class="application">MPlayer</span> est
	  très
	  complète.  Si le lecteur trouve l'information sur le
	  matériel vidéo et les interfaces manquante dans ce
	  chapitre, la documentation de <span class="application">MPlayer</span> est
	  une alternative très
	  complète.  Vous devriez certainement prendre le temps de
	  lire la documentation de <span class="application">MPlayer</span>,
	  si vous êtes à la recherche d'informations sur le support
	  vidéo sous <span class="trademark">UNIX</span>®.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mplayer-using"></a>8.4.2.1.2. Utiliser MPlayer</h5></div></div></div><a id="idp70767824" class="indexterm"></a><p>Chaque utilisateur de <span class="application">MPlayer</span> doit
	  créer un
	  sous-répertoire <code class="filename">.mplayer</code> dans son
	  répertoire d'utilisateur.  Pour créer ce
	  sous-répertoire nécessaire, vous pouvez taper ce qui
	  suit:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/ports/multimedia/mplayer</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>make install-user</code></strong></pre><p>Les options de commande de <code class="command">mplayer</code> sont
	  données dans la page de manuel.  Pour plus de détails
	  il y a la documentation HTML.  Dans cette section, nous
	  décrirons que quelques unes des utilisations les plus courantes.</p><p>Pour lire à un fichier, comme
	  <code class="filename">testfile.avi</code> en utilisant une des
	  diverses interfaces vidéo utilisez l'option
	  <code class="option">-vo</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo xv testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo sdl testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mplayer -vo x11 testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo dga testfile.avi</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo 'sdl:dga' testfile.avi</code></strong></pre><p>Cela vaut la peine d'essayer toutes ces options, comme
	  leur performance relative dépend de nombreux facteurs
	  et variera de façon significative avec le
	  matériel.</p><p>Pour lire un DVD, remplacez
	 <code class="filename">testfile.avi</code> par <code class="option">dvd://<em class="replaceable"><code>N</code></em> -dvd-device
	 <em class="replaceable"><code>DEVICE</code></em></code> où <em class="replaceable"><code>N</code></em> est
	 le numéro du titre à jouer et
	 <code class="filename">DEVICE</code> est
	 le fichier spécial de périphérique correspondant
	 au lecteur de DVD.  Par exemple, pour jouer le titre 3 depuis
	 <code class="filename">/dev/dvd</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -vo xv dvd://3 -dvd-device /dev/dvd</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le périphérique DVD par défaut
	    peut être défini lors de la compilation du
	    logiciel porté <span class="application">MPlayer</span> par
	    l'intermédiaire de l'option
	    <code class="varname">WITH_DVD_DEVICE</code>.  Par défaut, ce
	    périphérique est
	    <code class="filename">/dev/acd0</code>.  Plus de détails
	    peuvent être trouvés dans le
	    <code class="filename">Makefile</code> du logiciel
	    porté.</p></div><p>Pour arrêter, avancer, etc..., consultez
	  les combinaisons de touches, qui sont données en
	  exécutant <code class="command">mplayer -h</code> ou lisez
	  la page de manuel.</p><p>D'autres options importantes pour la lecture sont:
          <code class="option">-fs -zoom</code> qui active le mode plein écran
          et <code class="option">-framedrop</code> qui aide au niveau des
	  performances.</p><p>Pour que la ligne de commande à taper ne devienne pas trop
	  longue, l'utilisateur peut créer un fichier
	  <code class="filename">.mplayer/config</code> et y fixer les options
	  par défaut:</p><pre class="programlisting">vo=xv
fs=yes
zoom=yes</pre><p>Enfin, <code class="command">mplayer</code> peut être
	  utilisé pour extraire une piste du DVD dans un fichier
	  <code class="filename">.vob</code>.
	  Pour récupérer la seconde piste vidéo
	  d'un DVD, tapez ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mplayer -dumpstream -dumpfile out.vob dvd://2 -dvd-device /dev/dvd</code></strong></pre><p>Le fichier de sortie, <code class="filename">out.vob</code>, sera du
	  MPEG et peut être manipulé par les autres
	  logiciels décrits dans cette section.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-mencoder"></a>8.4.2.1.3. mencoder</h5></div></div></div><a id="idp70816336" class="indexterm"></a><p>Avant
	  d'utiliser <code class="command">mencoder</code> c'est une bonne
	  idée de vous familiariser avec les options données
	  par la documentation HTML.  Il existe une page de manuel, mais
	  elle n'est pas très utile sans la documentation en HTML.
	  Il y a d'innombrables façons d'améliorer la
	  qualité, diminuer le débit binaire, et
	  modifier les formats, et certaines de ces options peuvent faire
	  la différence entre de bonnes et mauvaises performances.
	  Voici quelques exemples pour y arriver.  Tout d'abord une
	  simple copie:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder input.avi -oac copy -ovc copy -o output.avi</code></strong></pre><p>De mauvaises combinaisons d'options peuvent conduire
	   à des fichiers illisibles
	   même par <code class="command">mplayer</code>.  Aussi, si
	   vous voulez juste extraire un fichier, restez sur l'option
	   <code class="option">-dumpfile</code> de <code class="command">mplayer</code>.</p><p>Pour convertir <code class="filename">input.avi</code> au format MPEG4
	   avec un codage audio MPEG3 (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/lame/pkg-descr">audio/lame</a> est nécessaire):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mencoder input.avi -oac mp3lame -lameopts br=192 \
	 -ovc lavc -lavcopts vcodec=mpeg4:vhq -o output.avi</code></strong></pre><p>Ceci a produit un fichier lisible par <code class="command">mplayer</code>
	   et <code class="command">xine</code>.</p><p><code class="filename">input.avi</code> peut être remplacé
	   par <code class="option">dvd://1 -dvd-device /dev/dvd</code> et exécuté en tant
	   que <code class="systemitem">root</code> pour ré-encoder directement un
	   titre DVD.  Puisque vous êtes susceptible de ne pas
	   être satisfait du résultat la première fois, il
	   est recommandé d'extraire le titre vers un fichier et de
	   travailler sur le fichier.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-xine"></a>8.4.2.2. Le lecteur xine</h4></div></div></div><p>Le lecteur <span class="application">xine</span> est un projet de grande
      envergure visant non seulement
      à être une solution vidéo tout-en-un, mais
      également de produire une bibliothèque de base
      réutilisable et un exécutable modulaire qui peut
      être étendu grâce à des greffons.
      Il est fourni sous forme
      pré-compilée et de logiciel porté, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xine/pkg-descr">multimedia/xine</a>.</p><p>Le lecteur <span class="application">xine</span>
      est encore un peu brut, mais c'est
      clairement un bon début.  Dans la pratique,
      <span class="application">xine</span> demande soit un
      processeur rapide avec une carte vidéo rapide, soit
      l'extension XVideo.  L'interface graphique est utilisable, mais
      peu pratique.</p><p>Au moment de l'écriture de ces lignes, il n'y a pas
      de module d'entrée fourni avec <span class="application">xine</span>
      qui lira les DVDs codés
      en CSS.  Il existe des versions tiers qui ont des modules
      à cet effet intégrés, mais aucune de ces
      dernières ne se trouve dans le catalogue des logiciels
      portés de FreeBSD.</p><p>Comparé à <span class="application">MPlayer</span>,
      <span class="application">xine</span> fait plus pour l'utilisateur,
      mais au même moment, rend inaccessible à l'utilisateur
      certains contrôles bien précis.  Le lecteur
      <span class="application">xine</span> se comporte le mieux
      sur les interfaces XVideo.</p><p>Par défaut, le lecteur <span class="application">xine</span>
      lancera une interface graphique.  Les menus peuvent alors
      être utilisés pour ouvrir un fichier précis:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine</code></strong></pre><p>Alternativement, le lecteur peut être invoqué
      pour jouer directement un fichier sans l'interface
      graphique avec la commande:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>xine -g -p mymovie.avi</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-ports-transcode"></a>8.4.2.3. Les utilitaires transcode</h4></div></div></div><p>Le logiciel <span class="application">transcode</span> n'est pas un
      lecteur, mais une suite d'outils pour
      ré-encoder les fichiers audio et vidéo.
      Avec <span class="application">transcode</span>,
      on a la capacité de fusionner des fichiers vidéos,
      réparer les fichiers endommagés, en utilisant les outils
      en ligne de commande avec des interfaces de flots
      <code class="filename">stdin/stdout</code>.</p><p>Un grand nombre d'options peut être
      précisé lors de la compilation du logiciel
      porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/transcode/pkg-descr">multimedia/transcode</a>, nous
      recommandons d'utiliser la ligne de commande suivante pour
      compiler <span class="application">transcode</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make WITH_OPTIMIZED_CFLAGS=yes WITH_LIBA52=yes WITH_LAME=yes WITH_OGG=yes \
WITH_MJPEG=yes -DWITH_XVID=yes</code></strong></pre><p>Le paramétrage proposé devrait convenir
      à la plupart des utilisateurs.</p><p>Pour illustrer les capacités de
      <code class="command">transcode</code>, voici un exemple montrant comment
      convertir un fichier DivX en fichier MPEG-1 en standard PAL (VCD
      PAL):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>transcode -i input.avi -V --export_prof vcd-pal -o output_vcd</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>mplex -f 1 -o output_vcd.mpg output_vcd.m1v output_vcd.mpa</code></strong></pre><p>Le fichier MPEG résultant,
      <code class="filename">output_vcd.mpg</code>, peut être directement
      lu avec <span class="application">MPlayer</span>.  Vous pourrez
      même le graver sur un CD pour créer ainsi un
      Vidéo CD; dans ce cas vous devrez installer et utiliser
      les programmes <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/vcdimager/pkg-descr">multimedia/vcdimager</a> et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a>.</p><p>Il existe une page de manuel pour
      <code class="command">transcode</code>, mais il est conseillé de
      consulter également le <a class="link" href="http://www.transcoding.org/cgi-bin/transcode" target="_top">wiki de
      transcode</a> pour plus d'information et des
      exemples.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="video-further-reading"></a>8.4.3. Lectures supplémentaires</h3></div></div></div><p>Les différents logiciels vidéo pour FreeBSD se développent
      rapidement.  Il est fort possible que dans un futur proche
      plusieurs des problèmes abordés ici seront résolus.
      Entre temps
      ceux qui veulent tirer partie des possibilités
      audio/vidéo de FreeBSD devront se débrouiller avec des
      connaissances extraites de plusieurs FAQs et guides et utiliser
      différentes applications.
      Cette section existe pour fournir au lecteur des références
      sur ces documentations additionnelles.</p><p>La
      <a class="link" href="http://www.mplayerhq.hu/DOCS/" target="_top">documentation de
      MPlayer</a> est techniquement très instructive.
      Ces documents devraient probablement être consultés
      par quiconque désirant obtenir un niveau élevé
      d'expertise sur la vidéo et <span class="trademark">UNIX</span>®.
      La liste de diffusion de <span class="application">MPlayer</span> est hostile à
      toute personne qui n'a pas pris la peine de lire la documentation,
      aussi si vous projetez de leur envoyer des rapports de bogue,
      lisez la documentation!</p><p>Le
      <a class="link" href="http://dvd.sourceforge.net/xine-howto/en_GB/html/howto.html" target="_top">       HOWTO de xine</a>
      contient un chapitre sur l'amélioration des performances qui est
      général à tous les lecteurs
      de vidéo.</p><p>Et enfin, il y a quelques autres applications prometteuses que
      le lecteur devrait essayer:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://avifile.sourceforge.net/" target="_top">Avifile</a> qui est
	   également un logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/avifile/pkg-descr">multimedia/avifile</a>.</p></li><li class="listitem"><p><a class="link" href="http://www.dtek.chalmers.se/groups/dvd/" target="_top">Ogle</a>
	   qui est également un logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/ogle/pkg-descr">multimedia/ogle</a>.</p></li><li class="listitem"><p><a class="link" href="http://xtheater.sourceforge.net/" target="_top">Xtheater</a></p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/dvdauthor/pkg-descr">multimedia/dvdauthor</a>, un logiciel
	libre pour la création de DVDs.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tvcard"></a>8.5. Configuration des cartes TV</h2></div><div><span class="authorgroup">Contibution originale de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Josef</span> <span class="surname">El-Rayes</span></span>. </span></div><div><span class="authorgroup">Augmentée et adaptée par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp70883920" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70884688"></a>8.5.1. Introduction</h3></div></div></div><p>Les cartes TV vous permettent de regarder sur votre
	ordinateur la télévision par voie hertzienne ou
	par câble.  La plupart d'entre elles acceptent de la
	vidéo composite par l'intermédiaire de
	connecteurs RCA ou S-video et certaines de ces cartes
	disposent d'un tuner radio FM.</p><p>FreeBSD founit le support pour les cartes TV PCI utilisant un
	circuit de capture video Brooktree Bt848/849/878/879 ou
	Conexant CN-878/Fusion 878a à l'aide du pilote
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>.  Vous devez également vous assurer que la
	carte dispose d'un tuner supporté, consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> pour une liste des tuners
	supportés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70887760"></a>8.5.2. Ajout du pilote de périphérique</h3></div></div></div><p>Pour utiliser votre carte, vous devrez charger le pilote
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a>, cela peut être effectué en ajoutant
	la ligne suivante au fichier
	<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">bktr_load="YES"</pre><p>Alternativement, vous pouvez compiler en statique dans le
	noyau le support pour la carte TV, dans ce cas ajouter les
	lignes suivantes dans votre fichier de configuration du
	noyau:</p><pre class="programlisting">device	 bktr
device	iicbus
device	iicbb
device	smbus</pre><p>Ces pilotes de périphériques
	supplémentaires sont nécessaires étant
	donné que les composants de la carte sont
	interconnectés via un bus I2C.  Compilez et installez,
	ensuite, un nouveau noyau.</p><p>Une fois que le support a été ajouté
	au système, vous devez redémarrer votre machine.
	Durant le processus de démarrage, votre carte TV
	devrait apparaître de cette manière:</p><pre class="programlisting">bktr0: &lt;BrookTree 848A&gt; mem 0xd7000000-0xd7000fff irq 10 at device 10.0 on pci0
iicbb0: &lt;I2C bit-banging driver&gt; on bti2c0
iicbus0: &lt;Philips I2C bus&gt; on iicbb0 master-only
iicbus1: &lt;Philips I2C bus&gt; on iicbb0 master-only
smbus0: &lt;System Management Bus&gt; on bti2c0
bktr0: Pinnacle/Miro TV, Philips SECAM tuner.</pre><p>Bien évidemment ces messages peuvent varier en
	fonction de votre matériel.  Cependant assurez-vous que
	le tuner est correctement détecté; il est
	possible de forcer certains des paramètres
	détecté à l'aide du système
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> et d'options de configuration du noyau.  Par
	exemple, si vous désirez forcer le tuner pour un tuner
	Philips SECAM, vous devrez ajouter la ligne suivante au
	fichier de configuration du noyau:</p><pre class="programlisting">options OVERRIDE_TUNER=6</pre><p>ou vous pouvez directement utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl hw.bt848.tuner=6</code></strong></pre><p>Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> et le fichier
	<code class="filename">/usr/src/sys/conf/NOTES</code> pour plus de
	détails sur les options disponibles.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70930384"></a>8.5.3. Applications utiles</h3></div></div></div><p>Pour utiliser votre carte TV, vous devrez installer une
	des applications suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/fxtv/pkg-descr">multimedia/fxtv</a>
	    qui permet de regarder la télévision et
	    d'enregistrer des images, du son et de la
	    vidéo.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/xawtv/pkg-descr">multimedia/xawtv</a>
	    est également une application pour regarder la
	    télévision avec les mêmes
	    fonctionnalités que
	    <span class="application">fxtv</span>.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/misc/alevt/pkg-descr">misc/alevt</a>
	    décode et affiche les informations
	    Vidéotexte/Télétexte.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/xmradio/pkg-descr">audio/xmradio</a>, un
	    programme pour utiliser le tuner FM fourni avec certaines
	    cartes TV.</p></li><li class="listitem"><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/audio/wmtune/pkg-descr">audio/wmtune</a>, une
	    application intégrable dans votre environnement de
	    travail pour gérer les tuners radio.</p></li></ul></div><p>Plus d'applications sont disponibles dans le catalogue
	des logiciels portés de FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70974800"></a>8.5.4. En cas de problème</h3></div></div></div><p>Si vous rencontrez un quelconque problème avec
	votre carte TV, vous devriez contrôler tout d'abord que
	le circuit de capture video et le tuner sont vraiment
	supportés par le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bktr&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bktr</span>(4)</span></a> et si vous avez
	utilisé les bonnes options de configuration.  Pour plus
	de support et pour les diverses questions que vous pouvez vous
	poser à propos de votre carte TV, vous pouvez contacter
	et utiliser les archives de la liste de diffusion
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-multimedia" target="_top">freebsd-multimedia</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="scanners"></a>8.6. Scanners</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp70980048" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70980816"></a>8.6.1. Introduction</h3></div></div></div><p>Sous FreeBSD, l'accès aux scanners est
	possible grâce à l'<acronym class="acronym">API</acronym>
	<span class="application">SANE</span> (Scanner Access Now Easy)
	disponible dans le catalogue des logiciels portés.
	<span class="application">SANE</span> utilisera également
	certains pilotes de périphériques FreeBSD pour
	accéder à la partie matérielle du
	scanner.</p><p>FreeBSD supporte les scanners SCSI et USB.  Assurez-vous que
	votre scanner est supporté par
	<span class="application">SANE</span> avant d'effectuer une
	quelconque configuration.  <span class="application">SANE</span>
	dispose d'une liste des <a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">périphériques
	supportés</a> qui peut vous informer sur le support
	et son statut pour un scanner particulier.  La page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a> donne également une liste des scanners
	USB supportés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp70998352"></a>8.6.2. Configuration du noyau</h3></div></div></div><p>Comme mentionné plus haut les interfaces SCSI et
	USB sont supportées.  En fonction de l'interface de
	votre scanner, différents pilotes de
	périphérique sont nécessaires.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="scanners-kernel-usb"></a>8.6.2.1. Interface USB</h4></div></div></div><p>Le noyau <code class="filename">GENERIC</code> inclut par
	  défaut les pilotes nécessaires au support des
	  scanners USB.  Si vous décidez d'utiliser un noyau
	  personnalisé, assurez-vous que les lignes suivantes
	  sont présentes dans votre fichier de configuration du
	  noyau:</p><pre class="programlisting">device usb
device uhci
device ohci
device uscanner</pre><p>En fonction du contrôleur USB présent sur
	  votre carte mère, vous n'avez besoin que d'une des
	  deux lignes <code class="literal">device uhci</code> et
	  <code class="literal">device ohci</code>, cependant avoir ces deux
	  lignes simultanément dans la configuration du noyau
	  est sans risque.</p><p>Si vous ne désirez pas recompiler votre noyau et
	  que votre noyau n'est pas le <code class="filename">GENERIC</code>,
	  vous pouvez directement charger le module du pilote
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uscanner&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uscanner</span>(4)</span></a> à l'aide de la commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload uscanner</code></strong></pre><p>Pour charger ce module à chaque démarrage
	  du système, ajoutez la ligne suivante au fichier
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">uscanner_load="YES"</pre><p>Après avoir redémarré avec le bon
	  noyau, ou après avoir chargé le module
	  nécessaire, branchez votre scanner USB.  Une ligne
	  montrant la détection de votre scanner
	  devrait apparaître dans le tampon des messages du
	  système (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>):</p><pre class="screen">uscanner0: EPSON EPSON Scanner, rev 1.10/3.02, addr 2</pre><p>Ceci nous indique que notre scanner utilise le fichier
	  spécial de périphérique
	  <code class="filename">/dev/uscanner0</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71009360"></a>8.6.2.2. Interface SCSI</h4></div></div></div><p>Si votre scanner dispose d'une interface SCSI, il est
	  important de connaître quelle carte contrôleur
	  SCSI vous utiliserez.  En fonction du contrôleur sur
	  la carte, vous devrez adapter votre configuration du noyau.
	  Le noyau <code class="filename">GENERIC</code> supporte les
	  contrôleurs SCSI les plus courants.  Assurez-vous
	  d'avoir lu le fichier <code class="filename">NOTES</code>
	  et ajoutez la
	  ligne adéquate dans votre fichier de configuration du
	  noyau.  En plus du pilote de votre carte SCSI, vous avez
	  besoin des lignes suivantes dans votre fichier de
	  configuration du noyau:</p><pre class="programlisting">device scbus
device pass</pre><p>Une fois que votre noyau a été
	  correctement compilé et installé, vous devriez être en
	  mesure de voir les périphériques au
	  démarrage:</p><pre class="screen">pass2 at aic0 bus 0 target 2 lun 0
pass2: &lt;AGFA SNAPSCAN 600 1.10&gt; Fixed Scanner SCSI-2 device
pass2: 3.300MB/s transfers</pre><p>Si votre scanner n'était pas alimenté au
	  démarrage du système, il est encore possible
	  de forcer sa détection, en en sondant le bus SCSI
	  avec la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol rescan all</code></strong>
Re-scan of bus 0 was successful
Re-scan of bus 1 was successful
Re-scan of bus 2 was successful
Re-scan of bus 3 was successful</pre><p>Ensuite le scanner apparaîtra dans la liste des
	  périphériques SCSI:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 5 lun 0 (pass0,da0)
&lt;IBM DDRS-34560 S97B&gt;              at scbus0 target 6 lun 0 (pass1,da1)
&lt;AGFA SNAPSCAN 600 1.10&gt;           at scbus1 target 2 lun 0 (pass3)
&lt;PHILIPS CDD3610 CD-R/RW 1.00&gt;     at scbus2 target 0 lun 0 (pass2,cd0)</pre><p>Plus de détails sur les
	  périphériques SCSI sont disponibles dans les
	  pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scsi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">scsi</span>(4)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71018192"></a>8.6.3. Configuration de SANE</h3></div></div></div><p>Le système <span class="application">SANE</span> est
	divisé en deux parties: les
	<span class="quote">« <span class="quote">backend</span> »</span>s (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a>) et les
	<span class="quote">« <span class="quote">frontend</span> »</span>s (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).  Les
	<span class="quote">« <span class="quote">backend</span> »</span>s fournissent l'accès au scanner.
	La liste des <a class="link" href="http://www.sane-project.org/sane-supported-devices.html" target="_top">périphériques
	supportés</a> par <span class="application">SANE</span>
	indique quel <span class="quote">« <span class="quote">backend</span> »</span> supportera votre scanner.
	Il est indispensable de déterminer correctement le
	<span class="quote">« <span class="quote">backend</span> »</span> relatif à votre scanner si vous
	voulez être en mesure d'utiliser votre
	périphérique.  La partie
	<span class="quote">« <span class="quote">frontend</span> »</span>s fournie l'interface graphique de
	numérisation
	(<span class="application">xscanimage</span>).</p><p>La première étape est d'installer le
	logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-backends/pkg-descr">graphics/sane-backends</a> ou sa version
	pré-compilée.  Ensuite, utilisez la commande
	<code class="command">sane-find-scanner</code> pour contrôler la
	détection du scanner par l'ensemble
	<span class="application">SANE</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found SCSI scanner "AGFA SNAPSCAN 600 1.10" at /dev/pass3</pre><p>Le résultat de la commande affichera le type
	d'interface utilisée par le scanner et le fichier
	spécial de périphérique utilisé
	pour attacher le scanner au système.  Le fabricant et
	le modèle peuvent ne pas apparaître, cela n'est
	pas important.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains scanners USB requièrent le chargement
	  préalable d'un <span class="quote">« <span class="quote">firmware</span> »</span>, cela est
	  expliqué dans la page de manuel du
	  <span class="quote">« <span class="quote">backend</span> »</span> utilisé.  Vous devriez
	  également consulter les pages de manuel de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane-find-scanner&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sane-find-scanner</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sane&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">sane</span>(7)</span></a>.</p></div><p>Nous devons maintenant vérifier si le scanner sera
	identifié par un <span class="quote">« <span class="quote">frontend</span> »</span> de
	numérisation.  Par défaut, les
	<span class="quote">« <span class="quote">backend</span> »</span>s <span class="application">SANE</span> sont
	fournies avec un outil en ligne de commande appelé
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a>.  Cette commande vous permet de lister les
	périphériques et d'effectuer une acquisition
	d'image à partir de la ligne de commande.  L'option
	<code class="option">-L</code> est employée pour afficher les
	scanners présents sur le système:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `snapscan:/dev/pass3' is a AGFA SNAPSCAN 600 flatbed scanner</pre><p>Aucun résultat, ou un message disant qu'aucun
	scanner n'a été identifié indiquent que
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> est incapable d'identifier le scanner.  Si
	cela se produit, vous devrez éditer le fichier de
	configuration du <span class="quote">« <span class="quote">backend</span> »</span> du scanner et
	définir le type de scanner utilisé.  Le
	répertoire <code class="filename">/usr/local/etc/sane.d/</code> contient
	tous les fichiers de configurations des
	<span class="quote">« <span class="quote">backend</span> »</span>s.  Ce problème d'identification
	apparaît essentiellement avec certains scanners
	USB.</p><p>Par exemple, avec le scanner USB utilisé dans la
	<a class="xref" href="#scanners-kernel-usb" title="8.6.2.1. Interface USB">Section 8.6.2.1, « Interface USB »</a>,
	<code class="command">sane-find-scanner</code> nous donne l'information
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sane-find-scanner -q</code></strong>
found USB scanner (UNKNOWN vendor and product) at device /dev/uscanner0</pre><p>Le scanner est correctement détecté, il
	utilise l'interface USB et est attaché au fichier
	spécial de périphérique
	<code class="filename">/dev/uscanner0</code>.  Nous pouvons maintenant
	vérifier si le scanner est correctement
	identifié:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>

No scanners were identified. If you were expecting something different,
check that the scanner is plugged in, turned on and detected by the
sane-find-scanner tool (if appropriate). Please read the documentation
which came with this software (README, FAQ, manpages).</pre><p>Comme le scanner n'est pas identifié, nous devons
	éditer le fichier
	<code class="filename">/usr/local/etc/sane.d/epson.conf</code>.  Le
	scanner utilisé était un <span class="trademark">EPSON
  Perfection</span>®
	1650, nous en déduisons donc que ce scanner utilisera
	le <span class="quote">« <span class="quote">backend</span> »</span> <code class="literal">epson</code>.
	Assurez-vous de bien lire les commentaires d'aide
	présents dans les fichiers de configuration des
	<span class="quote">« <span class="quote">backend</span> »</span>s.  Les modifications à faire
	sont relativement simples: commentez toutes les lignes
	concernant une interface différente de celle
	utilisée par votre scanner (dans notre cas, nous
	commenterons toutes les lignes débutant par le mot
	<code class="literal">scsi</code> étant donné que notre
	scanner utilise une interface USB), ajoutez ensuite à
	la fin du fichier une ligne indiquant l'interface et le
	fichier spécial de périphérique
	utilisé.  Dans ce cas, nous ajoutons la ligne
	suivante:</p><pre class="programlisting">usb /dev/uscanner0</pre><p>Veuillez vous assurer de bien lire les commentaires
	fournis dans les fichiers de configurations des
	<span class="quote">« <span class="quote">backend</span> »</span>s ainsi que les pages de manuel
	correspondantes pour plus de détails concernant la
	syntaxe correcte à utiliser.  Nous pouvons maintenant
	vérifier si le scanner est identifié:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>scanimage -L</code></strong>
device `epson:/dev/uscanner0' is a Epson GT-8200 flatbed scanner</pre><p>Notre scanner a été identifié.  Ce
	n'est pas important si la marque et le modèle ne
	correspondent pas au scanner.  L'important est le champ
	<code class="literal">`epson:/dev/uscanner0'</code>, qui nous donne le
	<span class="quote">« <span class="quote">backend</span> »</span> et le fichier spécial de
	périphérique corrects.</p><p>Une fois que la commande <code class="command">scanimage -L</code>
	est en mesure d'identifier le scanner, la configuration est
	terminée.  Le périphérique est prêt
	à effectuer sa première
	numérisation.</p><p>Bien que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scanimage&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scanimage</span>(1)</span></a> permette d'effectuer une
	numérisation à partir de la ligne de commande,
	il est préférable d'utiliser une interface
	graphique.  <span class="application">SANE</span> offre une
	interface graphique simple mais efficace:
	<span class="application">xscanimage</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/sane-frontends/pkg-descr">graphics/sane-frontends</a>).</p><p><span class="application">Xsane</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/graphics/xsane/pkg-descr">graphics/xsane</a>) est une autre
	interface graphique de numérisation assez populaire.
	Ce programme offre des fonctions avancées comme
	différents mode de numérisation (photocopie,
	fax, etc.), la correction des couleurs, la numérisation
	par lots, etc.  Ces deux applications sont utilisables comme
	greffon pour <span class="application">GIMP</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71101520"></a>8.6.4. Donner l'accès au scanner aux autres
	utilisateurs</h3></div></div></div><p>Toutes les opérations précédentes ont
	été effectuées avec les privilèges
	<code class="systemitem">root</code>.  Vous pourrez, cependant, avoir
	besoin que d'autres utilisateurs puissent accéder au
	scanner.  L'utilisateur devra avoir les permissions de lecture
	et d'écriture sur le fichier spécial de
	périphérique <code class="filename">/dev/uscanner0</code>
	dont le propriétaire est le groupe
	<code class="systemitem">operator</code>.  L'ajout de l'utilisateur
	<code class="systemitem">joe</code> au groupe
	<code class="systemitem">operator</code> lui autorisera l'accès
	au scanner:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod operator -m joe</code></strong></pre><p>Pour plus de détails, consultez la page de manuel
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>.  Vous devez également fixer les
	permissions d'écriture correctes (0660 or 0664) sur le
	fichier spécial de périphérique
	<code class="filename">/dev/uscanner0</code>, par défaut le
	groupe <code class="systemitem">operator</code> n'a qu'un accès
	en lecture.  Cela se fait en ajoutant les lignes suivantes au
	fichier <code class="filename">/etc/devfs.rules</code>:</p><pre class="programlisting">[system=5]
add path uscanner0 mode 660</pre><p>Ajoutez ensuite ce qui suit au fichier
	<code class="filename">/etc/rc.conf</code> et redémarrez la
	machine:</p><pre class="programlisting">devfs_system_ruleset="system"</pre><p>Plus d'information concernant ces lignes peut être
	trouvée dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bien sûr, pour des raisons de
	  sécurité, vous devriez réfléchir
	  à deux fois avant d'ajouter un utilisateur à
	  n'importe quel groupe, tout particulièrement au groupe
	  <code class="systemitem">operator</code>.</p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kernelconfig"></a>Chapitre 9. Configurer le noyau de FreeBSD</h2></div><div><span class="authorgroup">Mis à jour et restructuré par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Contribution originale de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jake</span> <span class="surname">Hamby</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#kernelconfig-synopsis">9.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-custom-kernel">9.2. Pourquoi compiler un noyau sur mesure?</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-building">9.3. Compiler et installer un noyau sur mesure</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-config">9.4. Le fichier de configuration</a></span></dt><dt><span class="sect1"><a href="#kernelconfig-trouble">9.5. Si quelque chose se passe mal</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-synopsis"></a>9.1. Synopsis</h2></div></div></div><a id="idp71131344" class="indexterm"></a><p>Le noyau est le coeur du système d'exploitation FreeBSD.
      Il est responsable de la gestion de la mémoire, de la mise en
      application des contrôles de sécurité,
      du réseau, des accès disque, et bien plus.  Bien que
      FreeBSD devienne de plus en plus configurable dynamiquement, il est
      toujours nécessaire occasionnellement de reconfigurer
      et recompiler votre noyau.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Pourquoi vous pourriez avoir besoin de compiler un noyau
	  sur mesure.</p></li><li class="listitem"><p>Comment écrire un fichier de configuration du noyau, ou
	  modifier un fichier de configuration existant.</p></li><li class="listitem"><p>Comment utiliser le fichier de configuration du noyau pour
	  créer et recompiler un nouveau noyau.</p></li><li class="listitem"><p>Comment installer un nouveau noyau.</p></li><li class="listitem"><p>Que faire si quelque chose se passe mal.</p></li></ul></div><p>Toutes les commandes listées dans les exemples de ce
      chapitre doivent être exécutées en tant que
      <code class="systemitem">root</code> afin de fonctionner.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-custom-kernel"></a>9.2. Pourquoi compiler un noyau sur mesure?</h2></div></div></div><p>Traditionnellement, FreeBSD a eu ce qui s'appelle un noyau
      &#8220;monolithique&#8221;.  Cela signifie que le noyau était
      un gros programme, supportant une liste figée de
      périphériques, et si vous vouliez modifier le
      comportement du noyau alors vous deviez compiler un nouveau noyau, et
      ensuite redémarrer votre ordinateur avec le nouveau noyau.</p><p>Aujourd'hui, FreeBSD s'oriente rapidement vers un modèle
      où une grande partie des fonctions du noyau est contenue dans des
      modules qui peuvent être dynamiquement chargés
      et déchargés si nécessaire.
      Cela permet au noyau de s'adapter au nouveau matériel devenant
      soudainement disponible (comme les cartes PCMCIA dans un
      ordinateur portable), ou pour qu'une nouvelle fonctionnalité
      qui n'était pas nécessaire lors de la compilation
      du noyau y soit intégrée.  On appelle cela un noyau
      modulaire.</p><p>En dépit de cela, il est encore nécessaire d'effectuer
      certaines configurations de noyau en statique.  Dans certains cas
      c'est parce que la fonctionnalité est si proche du noyau
      qu'elle ne peut être rendue dynamiquement chargeable.  Dans d'autres
      cas, cela peut tout simplement venir du fait que personne n'a
      encore pris le temps d'écrire un module dynamiquement chargeable
      pour cette fonctionnalité.</p><p>Compiler un noyau sur mesure est l'un des plus importants
      rites de passage que doit endurer tout utilisateur BSD.  Cette
      opération, tout en prenant du temps, apportera de nombreuses
      améliorations à votre système FreeBSD.
      A la différence du noyau <code class="filename">GENERIC</code>,
      qui doit supporter une large gamme de matériels, un noyau sur
      mesure ne contient que le support pour <span class="emphasis"><em>votre</em></span>
      configuration matérielle.  Cela a de nombreux avantages,
      comme:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un temps de démarrage plus court.  Comme le noyau ne
	  recherchera que le matériel présent sur votre
	  système, le temps nécessaire au démarrage de
	  votre système peut diminuer de façon importante.</p></li><li class="listitem"><p>Une utilisation plus faible de la mémoire.  Un noyau sur
	  mesure utilise souvent moins de mémoire que le noyau
	  <code class="filename">GENERIC</code>, ce qui est important car le noyau
	  doit toujours résider en mémoire.  Pour cette
	  raison, un noyau sur mesure est tout particulièrement utile
	  sur un système dont les ressources mémoire sont
	  limitées.</p></li><li class="listitem"><p>Le support de matériels supplémentaires.  Un noyau
	  sur mesure vous permet d'intégrer le support pour des
	  périphériques, qui ne sont
	  pas présents dans le noyau
	  <code class="filename">GENERIC</code> comme les cartes son.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-building"></a>9.3. Compiler et installer un noyau sur mesure</h2></div></div></div><a id="idp71150288" class="indexterm"></a><p>Commençons par passer rapidement en revue le répertoire
      de configuration du noyau.  Tous les chemins d'accès
      mentionnés seront relatifs au répertoire principal
      <code class="filename">/usr/src/sys</code>, qui est également
      accessible via le lien symbolique <code class="filename">/sys</code>.
      Il comporte un certain nombre de sous-répertoires correspondants
      à différentes parties du noyau, mais les plus
      importantes, en ce qui nous concerne, sont
      <code class="filename">arch/conf</code>, où vous
      éditerez votre fichier configuration personnalisé, et
      <code class="filename">compile</code>, qui est l'espace de travail où
      votre noyau sera compilé.  <em class="replaceable"><code>arch</code></em>
      représente une des architectures suivante: <code class="filename">i386</code>, soit
      <code class="filename">alpha</code>, <code class="filename">amd64</code>,
      <code class="filename">ia64</code>, <code class="filename">powerpc</code>,
      <code class="filename">sparc64</code>, ou encore <code class="filename">pc98</code>
      (une branche alternative de développement de l'architecture PC,
      populaire au Japon).  Tout ce qui se trouve dans un répertoire
      particulier à une architecture est propre uniquement
      à cette architecture; le reste du code est un code indépendant du type de machine et commun à
      toutes les plates-formes sur lesquelles FreeBSD pourrait être
      potentiellement porté.  Remarquez l'organisation logique de
      l'arborescence des répertoires, où chaque
      périphérique, système de fichiers,
      et option supportés a son propre
      sous-répertoire.</p><p>Les exemples de ce chapitre supposent que vous utilisez
      l'architecture i386.  Si ce n'est pas votre cas, effectuez les
      ajustements appropriés au niveau des chemins
      d'accès pour votre architecture.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">S'il n'y a <span class="emphasis"><em>pas</em></span> de répertoire
	<code class="filename">/usr/src/sys</code> sur votre système,
	alors c'est que les sources du noyau n'ont pas été
	installées.  La manière la plus facile de les installer
	est d'exécuter <code class="command">sysinstall</code>
	en tant
	que <code class="systemitem">root</code>, et sélectionner
	<span class="guimenuitem">Configure</span>, puis
	<span class="guimenuitem">Distributions</span>,
	<span class="guimenuitem">src</span>, puis
	<span class="guimenuitem">base</span> et <span class="guimenuitem">sys</span>.
	Si vous avez une aversion envers <span class="application">sysinstall</span>
	et que vous disposez d'un CDROM &#8220;officiel&#8221; de
	FreeBSD, alors vous pouvez installer les sources depuis la
	ligne de commande:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /usr/src/sys</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /usr/src/sys /sys</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat /cdrom/src/ssys.[a-d]* | tar -xzvf -</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat /cdrom/src/sbase.[a-d]* | tar -xzvf -</code></strong></pre></div><p>Ensuite allez dans le répertoire
      <code class="filename">arch/conf</code> et copiez
      le fichier de configuration <code class="filename">GENERIC</code> dans un
      fichier qui portera le nom que vous voulez donner à votre
      noyau.  Par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC MONNOYAU</code></strong></pre><p>Par tradition, c'est un nom en majuscules, et si vous maintenez
      plusieurs machines FreeBSD avec des configurations matérielles
      différentes, c'est une bonne idée de lui donner le
      même nom que la machine.  Nous l'appellerons
      <code class="filename">MONNOYAU</code> pour les besoins de cet
      exemple.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Conserver votre fichier de configuration du noyau
	directement sous <code class="filename">/usr/src</code> peut être une
	mauvaise idée.  Si vous avez des problèmes
	il peut être tentant de juste effacer
	<code class="filename">/usr/src</code> et recommencer à nouveau.
	Après avoir fait cela ne prends que quelques secondes
	pour vous rendre compte que vous venez
	d'effacer votre fichier de configuration du noyau
	personnalisé.  N'éditez pas, non plus, directement le fichier
	<code class="filename">GENERIC</code>, il peut être
	écrasé à la prochaine <a class="link" href="#updating-upgrading" title="Chapitre 24. Mise à jour de FreeBSD">mise à jour de l'arborescence
	des sources</a>, et vos modifications seraient
	perdues.</p><p xmlns="http://www.w3.org/1999/xhtml">Vous voudrez peut être conserver votre fichier de
	configuration du noyau ailleurs et alors créer un lien
	symbolique vers le fichier dans le répertoire
	<code class="filename">i386</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Par exemple:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /root/noyaux</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp GENERIC /root/noyaux/MONNOYAU</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /root/noyaux/MONNOYAU</code></strong></pre></div><p>Editez maintenant <code class="filename">MONNOYAU</code> avec votre
      éditeur de texte préféré.
      Si vous venez tout juste de finir l'installation, le seul
      éditeur disponible sera probablement
      <span class="application">vi</span>, qui est trop complexe pour être
      décrit ici, mais est bien expliqué dans de nombreux
      ouvrages de la <a class="link" href="#bibliography" title="Annexe B. Bibliographie">bibliographie</a>.
      Cependant, FreeBSD offre un éditeur plus simple appelé
      <span class="application">ee</span> qui, si vous êtes débutant,
      sera votre éditeur de choix.  N'hésitez pas à
      modifier les commentaires d'entête pour y décrire
      votre configuration ou les modifications que vous avez apportés
      par rapport au noyau <code class="filename">GENERIC</code>.</p><a id="idp71211728" class="indexterm"></a><p>Si vous avez déjà compilé un noyau sur <span class="trademark">SunOS</span>&#8482;
      ou tout autre système d'exploitation BSD, l'essentiel de fichier
      vous sera familier.  Si vous venez d'un système d'exploitation
      comme DOS, à l'inverse, le fichier de configuration
      <code class="filename">GENERIC</code> vous paraîtra inintelligible, lisez
      alors lentement et attentivement la section sur <a class="link" href="#kernelconfig-config" title="9.4. Le fichier de configuration">le fichier de
      configuration</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous <a class="link" href="#updating-upgrading" title="Chapitre 24. Mise à jour de FreeBSD">synchronisez
	votre arborescence des sources</a> avec les toutes
	dernières sources du projet FreeBSD, assurez-vous de
	toujours lire le fichier <code class="filename">/usr/src/UPDATING</code>
	avant d'effectuer une quelconque opération de mise
	à jour.  Ce fichier décrit les problèmes
	importants ou les domaines demandant une attention
	particulière dans le code mis à jour.
	<code class="filename">/usr/src/UPDATING</code> correspond toujours
	à votre version des sources de FreeBSD, et est donc plus
	à jour que ce Manuel.</p></div><p>Vous devez maintenant compiler le code source du
      noyau.</p><div class="procedure"><a id="idp71216336"></a><div class="procedure-title">Procédure 9.1. Compiler un noyau</div><ol class="procedure" type="1"><li class="step"><p>Passez dans le répertoire
	  <code class="filename">/usr/src</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre></li><li class="step"><p>Compilez le noyau:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MONNOYAU</code></strong></pre></li><li class="step"><p>Installez le nouveau noyau:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MONNOYAU</code></strong></pre></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il est indispensable d'avoir l'intégralité
	des sources du système FreeBSD pour compiler le
	noyau.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Par défaut, quand vous compilez un noyau
	personnalisé, <span class="emphasis"><em>tous</em></span> les modules
	seront également recompilés.  Si vous
	désirez mettre à jour un noyau plus rapidement
	ou compiler que certains modules, vous devez éditer le
	fichier <code class="filename">/etc/make.conf</code> avant de compiler
	le noyau:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">MODULES_OVERRIDE = linux acpi sound/sound sound/driver/ds1 ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Cette variable définit une liste de modules
	à compiler à la place de
	l'intégralité des modules.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">WITHOUT_MODULES = linux acpi sound/sound sound/driver/ds1 ntfs</pre><p xmlns="http://www.w3.org/1999/xhtml">Cette variable définit une liste de modules
	à exclure du processus de compilation.  Pour d'autres
	variables qui peuvent être intéressantes pour le
	processus de compilation du noyau, consultez la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">make.conf</span>(5)</span></a>.</p></div><a id="idp71231568" class="indexterm"></a><p>Le nouveau noyau sera copié dans le répertoire
      <code class="filename">/boot/kernel</code> avec le nom
      <code class="filename">/boot/kernel/kernel</code> et l'ancien noyau sera renommé en
      <code class="filename">/boot/kernel.old/kernel</code>.  Maintenant, arrêtez
      le système et redémarrez pour utiliser votre
      nouveau noyau.
      Si quelque chose se passe mal, il y a quelques instructions
      de <a class="link" href="#kernelconfig-trouble" title="9.5. Si quelque chose se passe mal">dépannage</a> à
      la fin de ce chapitre que vous pourrez trouver utiles.  Assurez-vous de lire la section qui
      explique comment revenir en arrière dans le cas où
      votre nouveau noyau <a class="link" href="#kernelconfig-noboot">ne
      démarre pas</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les autres fichiers
	concernant le processus de démarrage, comme le chargeur
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>) et la configuration du démarrage
	sont conservés dans le
	répertoire <code class="filename">/boot</code>.
	Les modules tiers et personnalisés peuvent être
	placés dans <code class="filename">/boot/kernel</code>,
	bien que les utilisateurs doivent être conscients
	que garder ses modules synchronisés avec le noyau
	compilé est très important.
	Les modules qui ne sont pas destinés à fonctionner
	avec le noyau compilé peuvent être instables et
	ne pas donner les résultats escomptés.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-config"></a>9.4. Le fichier de configuration</h2></div><div><span class="authorgroup">Mis à jour pour FreeBSD 6.X par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joel</span> <span class="surname">Dahl</span></span>. </span></div></div></div><a id="idp71244112" class="indexterm"></a><a id="idp71245264" class="indexterm"></a><a id="idp71245776" class="indexterm"></a><p>Le format général du fichier de configuration
      est assez simple.  Chaque ligne est composée d'un
      mot-clé et d'un ou plusieurs arguments.  Pour simplifier,
      la plupart des lignes ne contiennent qu'un seul argument.
      Tout ce qui suit le caractère <code class="literal">#</code> est
      considéré comme un commentaire et ignoré.
      Les sections suivantes décrivent chaque mot-clé,
      dans l'ordre où ils apparaissent dans le fichier
      <code class="filename">GENERIC</code>.
      <a id="kernelconfig-options"></a> Pour une liste exhaustive des
      options et périphériques dépendants de
      l'architecture utilisée, consultez le fichier
      <code class="filename">NOTES</code> présent
      dans le même répertoire que le fichier <code class="filename">GENERIC</code>.
      Pour les options ne dépendant pas de l'architecture,
      consultez le fichier
      <code class="filename">/usr/src/sys/conf/NOTES</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour compiler un fichier contenant toutes les options
	possibles, en général pour effectuer des tests,
	exécutez la commande suivante en tant que
	<code class="systemitem">root</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/i386/conf &amp;&amp; make LINT</code></strong></pre></div><a id="idp71252048" class="indexterm"></a><p>Ce qui suit est un exemple de fichier de configuration du
      noyau <code class="filename">GENERIC</code> avec divers commentaires aux
      endroits nécessaires pour un peu plus de clarté.
      Cet exemple devrait correspondre de façon très proche
      à votre copie du fichier
      <code class="filename">/usr/src/sys/i386/conf/GENERIC</code>.
    </p><a id="idp71254352" class="indexterm"></a><pre class="programlisting">machine		i386</pre><p>C'est l'architecture de la machine.  Elle doit être
      <code class="literal">alpha</code>, <code class="literal">amd64</code>,
      <code class="literal">i386</code>, <code class="literal">ia64</code>,
      <code class="literal">pc98</code>, <code class="literal">powerpc</code>, ou encore
      <code class="literal">sparc64</code>.</p><a id="idp71259216" class="indexterm"></a><pre class="programlisting">cpu          I486_CPU
cpu          I586_CPU
cpu          I686_CPU</pre><p>Ce qui précède définit le type de CPU
      présent dans votre système.  Il peut y avoir plusieurs
      occurrences de la ligne CPU (si, par exemple, vous n'êtes pas sûr
      de devoir utiliser <code class="literal">I586_CPU</code>
      ou <code class="literal">I686_CPU</code>), cependant, pour un noyau
      personnalisé, il est mieux de spécifier uniquement
      le CPU que vous avez.
      Si vous n'êtes pas sûr du type, vous pouvez lister
      le fichier <code class="filename">/var/run/dmesg.boot</code> pour visualiser les
      messages de démarrage.</p><a id="idp71262288" class="indexterm"></a><pre class="programlisting">ident          GENERIC</pre><p>C'est l'identification du noyau.  Vous devriez changer cela
      pour le nom, quel qu'il soit, que vous donnez à votre noyau,
      par exemple <code class="literal">MONNOYAU</code> si vous avez suivi les
      instructions des exemples précédents.
      La valeur que vous donnez à la chaîne <code class="literal">ident</code>
      s'affichera au démarrage du noyau, il est donc utile de donner
      au nouveau noyau un nom différent si vous voulez le
      différencier de votre noyau habituel (e.g., vous voulez compiler
      un noyau expérimental).</p><pre class="programlisting">#To statically compile in device wiring instead of /boot/device.hints
#hints          "GENERIC.hints"         #Default places to look for devices.</pre><p>Le fichier
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a> est utilisé pour configurer les
      paramètres des pilotes de périphériques.
      Le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> recherchera le fichier
      <code class="filename">/boot/device.hints</code> au démarrage.
      En utilisant l'option <code class="literal">hints</code> vous pouvez
      compiler ces valeurs en statique dans votre noyau.  Il
      n'est alors pas utile de créer de fichier
      <code class="filename">device.hints</code> dans
      <code class="filename">/boot</code>.</p><pre class="programlisting">makeoptions     DEBUG=-g          #Build kernel with gdb(1) debug symbols</pre><p>Le processus normal de compilation de FreeBSD inclut
      les informations de débogage lors de la compilation
      du noyau avec l'option
      <code class="option">-g</code>, qui autorisera les informations de
      débogage quand le noyau sera passé à
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gcc</span>(1)</span></a>.</p><pre class="programlisting">options          SCHED_4BSD         # 4BSD scheduler</pre><p>L'ordonnanceur (<span class="quote">« <span class="quote">scheduler</span> »</span>) traditionnel et
      par défaut de FreeBSD.  Conservez cette ligne.</p><pre class="programlisting">options          PREEMPTION         # Enable kernel thread preemption</pre><p>Permet aux processus légers présents dans le
      noyau d'être devancés par des processus de
      priorité plus élevée.  Cela améliore
      l'interactivité et permet aux processus d'interruption
      d'être exécutés le plus tôt possible
      au lieu d'attendre leur tour.</p><pre class="programlisting">options          INET          #InterNETworking</pre><p>Support réseau.  Conservez-le, même si vous
      n'envisagez pas de vous connecter à un réseau.
      La plupart des programmes utilisent le réseau &#8220;en
      boucle&#8221; (i.e., établissent des connexions réseau
      avec le PC lui-même), cette option est donc quasiment
      obligatoire.</p><pre class="programlisting">options          INET6          #IPv6 communications protocols</pre><p>Ceci active les protocoles de communication IPv6.</p><pre class="programlisting">options          FFS          #Berkeley Fast Filesystem </pre><p>C'est le système de fichiers de base sur disque dur.
      Gardez ces options si vous démarrez depuis le disque
      dur.</p><pre class="programlisting">options          SOFTUPDATES  #Enable FFS Soft Updates support</pre><p>Cette option rajoutera le support des <span class="quote">« <span class="quote">Soft
      Updates</span> »</span> dans le noyau, ce qui aidera
      l'accélération des accès en écriture
      sur les disques.  Même quand cette fonction est fournit
      par le noyau, elle doit être activée sur chaque
      disque.  Regardez le résultat de la commande
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> pour voir si les <span class="quote">« <span class="quote">Soft Updates</span> »</span> sont
      activées sur les disques de votre système.  Si
      vous ne voyez pas apparaître l'option
      <code class="literal">soft-updates</code> alors vous devrez l'activer en
      utilisant les commandes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> (pour les systèmes
      de fichiers existant) ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> (pour les nouveaux
      systèmes de fichiers).</p><pre class="programlisting">options          UFS_ACL      #Support for access control lists</pre><p>Cette option
      active le support des listes de contrôle d'accès
      au système de fichiers (<acronym class="acronym">ACL</acronym>).
      Elles reposent sur l'utilisation
      d'attributs étendus et d'<acronym class="acronym">UFS2</acronym>,
      cette fonctionnalité est décrite dans la <a class="xref" href="#fs-acl" title="15.12. Listes de contrôle d'accès au système de fichiers">Section 15.12, « Listes de contrôle d'accès au système de
      fichiers »</a>.  Les <acronym class="acronym">ACL</acronym>s sont activées
      par défaut, et leur support ne devraient pas être
      retiré du noyau si elles ont été
      précédemment utilisées sur un
      système de fichiers, étant donné que cela
      supprimera les listes de contrôle d'accès
      changeant alors la façon dont sont protégés
      les fichiers d'une manière imprévisible.</p><pre class="programlisting">options          UFS_DIRHASH  #Improve performance on big directories</pre><p>Cette option inclut certaines fonctions pour accélérer les
      opérations disque sur de gros répertoires,
      aux dépens d'employer de la mémoire supplémentaire.
      Vous conserverez normalement cela pour un gros serveur, ou une
      station de travail très active, et vous l'enlèverez
      si vous utilisez FreeBSD sur un petit système où
      la mémoire prime et la vitesse d'accès disque est moins
      importante, comme pour un coupe-feu.</p><pre class="programlisting">options          MD_ROOT      #MD is a potential root device</pre><p>Cette option active le support pour des disques virtuels en
      mémoire utilisés comme périphérique
      racine.</p><a id="idp71312464" class="indexterm"></a><a id="idp71313616" class="indexterm"></a><pre class="programlisting">options          NFSCLIENT         # Network Filesystem Client
options          NFSSERVER         # Network Filesystem Server
options          NFS_ROOT          # NFS usable as /, requires NFSCLIENT</pre><p>Le système de fichiers réseau.  A moins que vous
      n'envisagiez de monter des partitions d'un serveur de fichiers
      <span class="trademark">UNIX</span>® par l'intermédiaire d'un réseau TCP/IP, vous pouvez
      mettre en commentaire ces options.</p><a id="idp71316048" class="indexterm"></a><pre class="programlisting">options          MSDOSFS      #MSDOS Filesystem</pre><p>Le système de fichiers <span class="trademark">MS-DOS</span>®.  A moins que vous
      n'envisagiez de monter une partition DOS d'un disque dur au
      démarrage, vous pouvez sans risque commenter cette option.
      Le module sera automatiquement chargé la première
      fois que vous monterez une partition DOS, comme décrit
      plus haut.  Par ailleurs, l'excellent logiciel
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a>
      vous permet d'accéder à des disquettes DOS sans avoir
      besoin de les monter (et ne requiert pas non plus
      <code class="literal">MSDOSFS</code>).</p><pre class="programlisting">options          CD9660       #ISO 9660 Filesystem</pre><p>Le système de fichiers ISO 9660 pour les CDROMs.  Commentez
      ces options si vous n'avez pas de lecteur de CDROM ou que vous
      ne montez qu'occasionnellement des CDROMs (il sera chargé
      dynamiquement dès que vous monterez un CDROM).  Les CDROMs
      audios n'ont pas besoin de ce système de fichiers.</p><pre class="programlisting">options          PROCFS            # Process filesystem (requires PSEUDOFS)</pre><p>Le système de fichiers pour les processus.  C'est un
      &#8220;pseudo-système&#8221; de fichiers monté sur
      <code class="filename">/proc</code> qui permet à des programmes comme
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> de vous fournir plus d'informations sur les processus
      qui tournent sur le système.
      L'utilisation de <code class="literal">PROCFS</code> n'est pas
      nécessaire la plupart du temps, comme la majeur partie
      des outils de débogage et de monitoring ont
      été adaptés pour s'exécuter sans
      <code class="literal">PROCFS</code>: les
      nouvelles installations ne monteront pas par
      défaut ce système de fichiers.</p><pre class="programlisting">options          PSEUDOFS     #Pseudo-filesystem framework</pre><p>Les noyaux 6.X faisant usage du système
      <code class="literal">PROCFS</code> doivent également inclure le
      support pour <code class="literal">PSEUDOFS</code>.</p><pre class="programlisting">options          GEOM_GPT          # GUID Partition Tables.</pre><p>Cette option apporte la possibilité d'avoir un grand nombre
      de partitions sur un seul disque.</p><pre class="programlisting">options          COMPAT_43    #Compatible with BSD 4.3 [KEEP THIS!]</pre><p>Compatibilité avec 4.3BSD.  Conservez cette option; certains
      programmes auront un comportement bizarre si vous la
      commentez.</p><pre class="programlisting">options          COMPAT_FREEBSD4     #Compatible with FreeBSD4</pre><p>Cette option est nécessaires aux systèmes
      <span class="trademark">i386</span>&#8482; et Alpha fonctionnant sous FreeBSD 5.X pour supporter
      les applications compilées sur d'anciennes version de FreeBSD
      qui utilisent d'anciennes interfaces d'appel système.
      Il est recommandé d'utiliser cette option sur tous
      les systèmes <span class="trademark">i386</span>&#8482; et Alpha susceptibles d'exécuter
      d'anciennes applications; les plateformes apparues sous FreeBSD 5.0,
      comme l'ia64 et <span class="trademark">SPARC64</span>®, n'ont pas besoin de cette
      option.</p><pre class="programlisting">options          COMPAT_FREEBSD5   # Compatible with FreeBSD5</pre><p>Cette option est nécessaire sous FreeBSD 6.X et
      versions supérieures pour supporter les applications
      compilées sous FreeBSD 5.X et qui utilisent les
      interfaces d'appel système FreeBSD 5.X.</p><pre class="programlisting">options          SCSI_DELAY=5000    #Delay (in ms) before probing SCSI</pre><p>Cette option oblige le noyau à attendre 5 secondes avant
      de rechercher les périphériques SCSI présents
      sur votre système.  Si vous n'avez que des disques IDE,
      vous pouvez l'ignorer, sinon vous pouvez essayer de
      diminuer cette valeur,
      pour accélérer le démarrage du système.
      Bien sûr, si vous le faites, et que FreeBSD a du mal à
      reconnaître vos périphériques SCSI, vous
      devrez l'augmenter à nouveau.</p><pre class="programlisting">options          KTRACE              #ktrace(1) support</pre><p>Ceci permet de tracer le processus du noyau, ce qui est
      utile pour le débogage.</p><pre class="programlisting">options          SYSVSHM             #SYSV-style shared memory</pre><p>Cette option implémente la mémoire
      partagée System V.  L'usage le plus courant qui en est fait est
      l'extension XSHM d'X, dont de nombreux logiciels gourmants en
      graphique tireront automatiquement parti pour fonctionner plus
      vite.  Si vous utilisez X, vous utiliserez absolument cette
      option.</p><pre class="programlisting">options          SYSVMSG             #SYSV-style message queues</pre><p>Support des messages System V.  Cette option n'augmente
      que de quelques centaines d'octets la taille du noyau.</p><pre class="programlisting">options          SYSVSEM             #SYSV-style semaphores</pre><p>Support des sémaphores System V.  D'un usage moins courant,
      mais n'augmente la taille du noyau que de quelques centaines
      d'octets.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'option <code class="option">-p</code> de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipcs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ipcs</span>(1)</span></a> donnera la liste des processus
	utilisant chacun de ces mécanismes System V.</p></div><pre class="programlisting">options 	     _KPOSIX_PRIORITY_SCHEDULING # POSIX P1003_1B real-time extensions</pre><p>Extensions temps-réel ajoutées dans la norme
      <span class="trademark">POSIX</span>® 1993.  Certaines applications du catalogue des logiciels
      portés les utilisent (comme
      <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>).</p><pre class="programlisting">options          KBD_INSTALL_CDEV  # install a CDEV entry in /dev</pre><p>Cette option concerne le clavier.  Elle installe une
      entrée CDEV dans le répertoire
      <code class="filename">/dev</code>.</p><pre class="programlisting">options          ADAPTIVE_GIANT    # Giant mutex is adaptive.</pre><p><span class="quote">« <span class="quote">Giant</span> »</span> est le nom d'un mécanisme
      d'exclusion mutuelle (un <span class="quote">« <span class="quote">mutex</span> »</span> dormant) qui
      protège l'accès à un ensemble important de
      ressources du noyau.  Aujourd'hui c'est un goulot
      d'étranglement des performances inacceptable que l'on est
      en train de remplacer activement par des verrous qui
      protègent les ressources individuelles.  L'option
      <code class="literal">ADAPTIVE_GIANT</code> permet à Giant
      d'être inclus dans l'ensemble des mutex lancés de
      manière adaptative.  C'est à dire, quand un thread
      désire verrouiller le mutex Giant, mais que ce dernier
      est déjà verrouillé par un thread sur un
      autre CPU, le premier thread continuera à fonctionner et
      attendra la libération du verrou.  Normalement, le thread
      retournera à l'état dormant et attendra une
      nouvelle chance de pouvoir s'exécuter.  Si vous
      n'êtes pas sûr, laissez la configuration en
      l'état.</p><a id="idp71356112" class="indexterm"></a><pre class="programlisting">device          apic               # I/O APIC</pre><p>Le périphérique apic active l'utilisation de
      l'E/S APIC pour l'acheminement des interruptions.  Le
      périphérique apic peut être utilisé
      dans les noyaux UP (monoprocesseur) et SMP, mais est requis pour
      les noyaux SMP.  Ajoutez <code class="literal">options SMP</code> pour
      inclure le support pour plusieurs processeurs.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le périphérique apic n'existe que sur
	l'architecture i386, cette ligne de configuration ne doit pas
	être utilisée sur d'autres architectures.</p></div><pre class="programlisting">device          eisa</pre><p>Rajoutez cela si vous avez une carte mère EISA.
      Cela permet l'auto-détection et la configuration de tous les
      périphériques présents sur le bus
      EISA.</p><pre class="programlisting">device          pci</pre><p>Ajoutez cette option si vous avez une carte mère PCI.
      Cela permet l'auto-détection des cartes PCI et gère
      l'interface entre les bus PCI et ISA.</p><pre class="programlisting"># Floppy drives
device          fdc</pre><p>C'est le contrôleur de lecteur de disquettes.</p><pre class="programlisting"># ATA and ATAPI devices
device          ata</pre><p>Ce pilote supporte tous les périphériques
      ATA et ATAPI.  Vous n'avez besoin que d'une seule ligne
      <code class="literal">device ata</code> pour que le noyau détecte tous les
      périphériques PCI ATA/ATAPI sur les machines
      modernes.</p><pre class="programlisting">device          atadisk                 # ATA disk drives</pre><p>Ceci est requis avec <code class="literal">device ata</code> pour les
      disques ATA.</p><pre class="programlisting">device          ataraid                 # ATA RAID drives</pre><p>Ceci est nécessaire avec <code class="literal">device
      ata</code> pour les disques RAID ATA.</p><pre class="programlisting"><a id="kernelconfig-atapi"></a>
device          atapicd                 # ATAPI CDROM drives</pre><p>Ceci est nécessaire avec <code class="literal">device ata</code>
      pour le support des lecteurs de CDROM ATAPI.</p><pre class="programlisting">device          atapifd                 # ATAPI floppy drives</pre><p>Ceci est nécessaire avec <code class="literal">device ata</code>
      pour le support des lecteurs de disquettes ATAPI.</p><pre class="programlisting">device          atapist                 # ATAPI tape drives</pre><p>Ceci est nécessaire avec <code class="literal">device ata</code>
      pour le support des lecteurs de bande ATAPI.</p><pre class="programlisting">options         ATA_STATIC_ID           #Static device numbering</pre><p>Cela rend la numérotation des périphériques
      statique, sans cela l'allocation des numéros de
      périphériques sera dynamique.</p><pre class="programlisting"># SCSI Controllers
device          ahb        # EISA AHA1742 family
device          ahc        # AHA2940 and onboard AIC7xxx devices
options         AHC_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~128k to driver.
device          ahd        # AHA39320/29320 and onboard AIC79xx devices
options         AHD_REG_PRETTY_PRINT    # Print register bitfields in debug
                                        # output.  Adds ~215k to driver.
device          amd        # AMD 53C974 (Teckram DC-390(T))
device          isp        # Qlogic family
#device         ispfw      # Firmware for QLogic HBAs- normally a module
device          mpt        # LSI-Logic MPT-Fusion
#device         ncr        # NCR/Symbios Logic
device          sym        # NCR/Symbios Logic (newer chipsets + those of `ncr')
device          trm        # Tekram DC395U/UW/F DC315U adapters

device          adv        # Advansys SCSI adapters
device          adw        # Advansys wide SCSI adapters
device          aha        # Adaptec 154x SCSI adapters
device          aic        # Adaptec 15[012]x SCSI adapters, AIC-6[23]60.
device          bt         # Buslogic/Mylex MultiMaster SCSI adapters

device          ncv        # NCR 53C500
device          nsp        # Workbit Ninja SCSI-3
device          stg        # TMC 18C30/18C50</pre><p>Contrôleurs SCSI.  Mettez en commentaires ceux que vous
      n'avez pas sur votre système.  Si vous n'avez qu'un
      système IDE, vous pouvez supprimer toutes ces lignes.  Les
      lignes <code class="literal">*_REG_PRETTY_PRINT</code> sont des options de
      débogage pour leur pilote respectif.</p><pre class="programlisting"># SCSI peripherals
device          scbus      # SCSI bus (required for SCSI)
device          ch         # SCSI media changers
device          da         # Direct Access (disks)
device          sa         # Sequential Access (tape etc)
device          cd         # CD
device          pass       # Passthrough device (direct SCSI access)
device          ses        # SCSI Environmental Services (and SAF-TE)</pre><p>Périphériques SCSI.  A nouveau, mettez en
      commentaires tous ceux que vous n'avez pas, ou si vous n'avez
      que du matériel IDE, vous pouvez tous les supprimer.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le pilote USB <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> et quelques autres pilotes
	utilisent le sous-système SCSI même si ce ne sont
	pas de véritables périphériques SCSI.  Par
	conséquent assurez-vous de ne pas retirer le support SCSI
	si un tel pilote fait partie de la configuration du
	noyau.</p></div><pre class="programlisting"># RAID controllers interfaced to the SCSI subsystem
device          amr        # AMI MegaRAID
device          arcmsr     # Areca SATA II RAID
device          asr        # DPT SmartRAID V, VI and Adaptec SCSI RAID
device          ciss       # Compaq Smart RAID 5*
device          dpt        # DPT Smartcache III, IV - See NOTES for options
device          hptmv      # Highpoint RocketRAID 182x
device          rr232x     # Highpoint RocketRAID 232x
device          iir        # Intel Integrated RAID
device          ips        # IBM (Adaptec) ServeRAID
device          mly        # Mylex AcceleRAID/eXtremeRAID
device          twa        # 3ware 9000 series PATA/SATA RAID

# RAID controllers
device          aac        # Adaptec FSA RAID
device          aacp       # SCSI passthrough for aac (requires CAM)
device          ida        # Compaq Smart RAID
device          mfi        # LSI MegaRAID SAS
device          mlx        # Mylex DAC960 family
device          pst        # Promise Supertrak SX6000
device          twe        # 3ware ATA RAID</pre><p>Contrôleurs RAID supportés.  Si vous n'avez aucun de ces
      derniers dans votre système, vous pouvez les mettre
      en commentaires ou les supprimer.</p><pre class="programlisting"># atkbdc0 controls both the keyboard and the PS/2 mouse
device          atkbdc     # AT keyboard controller</pre><p>Le contrôleur du clavier (<code class="literal">atkbdc</code>) permet
      de gérer les E/S du clavier AT et des
      périphériques de pointage PS/2.  Ce contrôleur
      est nécessaire au pilote de périphérique
      du clavier (<code class="literal">atkbd</code>) et celui des
      périphériques de pointage PS/2
      (<code class="literal">psm</code>).</p><pre class="programlisting">device          atkbd      # AT keyboard</pre><p>Le pilote de périphérique <code class="literal">atkbd</code>,
      associé au contrôleur <code class="literal">atkbdc</code>, fournit
      un accès au clavier AT 84 touches ou au clavier AT étendu qui
      est connecté au contrôleur de clavier de la machine.</p><pre class="programlisting">device          psm        # PS/2 mouse</pre><p>Utilisez ce périphérique si votre souris se
      branche sur le port PS/2.</p><pre class="programlisting">device          kbdmux        # keyboard multiplexer</pre><p>Support de base pour le multiplexage de claviers.  Si vous
      n'avez pas l'intention d'utiliser sur le système plus
      d'un clavier, vous pouvez supprimer cette ligne sans
      risque.</p><pre class="programlisting">device          vga        # VGA video card driver</pre><p>Pilote de la carte graphique.</p><pre class="programlisting">
device          splash     # Splash screen and screen saver support</pre><p>Ecran/bannière de démarrage.  Les
      économiseurs d'écran ont également
      besoin de ce pseudo-périphérique.</p><pre class="programlisting"># syscons is the default console driver, resembling an SCO console
device          sc</pre><p><code class="literal">sc</code> est le pilote par défaut pour la
      console, qui ressemble à une console SCO.  Comme la plupart
      des programmes en mode plein-écran accèdent
      à la console par l'intermédiaire d'une base de
      données
      de description des terminaux comme <code class="filename">termcap</code>,
      cela n'a guère d'importance que vous choisissiez ce pilote
      ou <code class="literal">vt</code>, le pilote compatible
      <code class="literal">VT220</code>.  Quand vous ouvrez une session,
      positionnez votre variable d'environnement <code class="envar">TERM</code> à
      <code class="literal">scoansi</code> si vous avez des problèmes pour
      utiliser des programmes en mode plein-écran avec cette
      console.</p><pre class="programlisting"># Enable this for the pcvt (VT220 compatible) console driver
#device          vt
#options         XSERVER          # support for X server on a vt console
#options         FAT_CURSOR       # start with block cursor</pre><p>C'est le pilote de console compatible VT220, et,
      rétrospectivement, compatible VT100/102.  Il fonctionne
      bien sur certains ordinateurs portables qui sont matériellement
      incompatibles avec le pilote <code class="literal">sc</code>.  Comme
      précédemment, positionnez la variable d'environnement
      <code class="envar">TERM</code> lorsque que vous ouvrez une session,
      mais cette fois-ci à <code class="literal">vt100</code> ou
      <code class="literal">vt220</code>.  Ce pilote peut aussi s'avérer
      utile quand vous vous connectez à un grand nombre de
      machines différentes par le réseau sur lesquelles
      les entrées pour le périphérique
      <code class="literal">sc</code> ne sont souvent pas définies dans
      leurs fichiers <code class="filename">termcap</code> ou
      <code class="filename">terminfo</code> &#8212; alors que le terminal
      <code class="literal">vt100</code> devrait être disponible sur
      pratiquement toutes les plates-formes.</p><pre class="programlisting">device          agp</pre><p>Ajoutez cette option si vous avez une carte AGP dans votre
      système.  Cela activera le support AGP, et l'AGP GART
      pour les cartes qui ont cette fonction.</p><a id="idp71400784" class="indexterm"></a><pre class="programlisting"># Power management support (see NOTES for more options)
device          apm</pre><p>&#8220;Advanced Power Management support&#8221; - gestion
      avancée de l'énergie.  Utile pour les ordinateurs
      portables, ceci est cependant désactivé par
      défaut dans le noyau <code class="filename">GENERIC</code> sous
      FreeBSD 5.X et versions suivantes</p><pre class="programlisting"># Add suspend/resume support for the i8254.
device           pmtimer</pre><p>Pilote du périphérique de gestion du temps pour
      les événements de la gestion de l'énergie, comme l'APM ou
      l'ACPI.</p><pre class="programlisting"># PCCARD (PCMCIA) support
# PCMCIA and cardbus bridge support
device          cbb               # cardbus (yenta) bridge
device          pccard            # PC Card (16-bit) bus
device          cardbus           # CardBus (32-bit) bus</pre><p>Support PCMCIA.  Vous en avez besoin si vous utilisez un
      ordinateur portable.</p><pre class="programlisting"># Serial (COM) ports
device          sio               # 8250, 16[45]50 based serial ports</pre><p>Cela représente les ports séries, appelés
      ports <code class="filename">COM</code> dans le monde <span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous avez un modem interne sur le port <code class="filename">COM4</code> et un port
	série <code class="filename">COM2</code>, vous devrez changer l'IRQ du modem en 2 (pour
	d'obscures raisons techniques, IRQ 2 = IRQ 9) pour y accéder
	avec FreeBSD.  Si vous avez une carte série multi-ports,
	consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> pour plus
	d'informations sur les bonnes valeurs à ajouter à votre
	fichier <code class="filename">/boot/device.hints</code>.
	Certaines cartes vidéo (notamment celle à base de
	circuits S3) utilisent des adresses d'E/S sous la forme
	<code class="literal">0x*2e8</code>, et comme de nombreuses cartes
	séries bon marché de décodent pas
	complètement l'espace d'adresse d'E/S 16 bits, il y a
	aura des conflits avec ces cartes, rendant le port
	<code class="filename">COM4</code>
	pratiquement inutilisable.</p><p xmlns="http://www.w3.org/1999/xhtml">Chaque port série doit avoir une IRQ unique (à
	moins que vous n'utilisiez une carte multi-ports qui autorise
	le partage d'interruption), donc les IRQs par défaut pour
	les ports <code class="filename">COM3</code> et <code class="filename">COM4</code> ne peuvent être
	utilisées.</p></div><pre class="programlisting"># Parallel port
device          ppc</pre><p>C'est l'interface parallèle du bus ISA.</p><pre class="programlisting">device          ppbus      # Parallel port bus (required)</pre><p>Fournit le support pour le bus du port parallèle.</p><pre class="programlisting">device          lpt        # Printer</pre><p>Support pour les imprimantes parallèles.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les trois lignes précédentes sont
	nécessaires pour permettre le support des imprimantes
	parallèles.</p></div><pre class="programlisting">device          plip       # TCP/IP over parallel</pre><p>C'est le pilote pour l'interface réseau sur port
      parallèle.</p><pre class="programlisting">device          ppi        # Parallel port interface device</pre><p>Port d'E/S d'usage général (&#8220;geek
      port&#8221;) + port d'E/S IEEE1284.</p><pre class="programlisting">#device         vpo        # Requires scbus and da</pre><a id="idp71424592" class="indexterm"></a><p>Ceci est pour le lecteur Zip de Iomega.  Les options
      <code class="literal">scbus</code> et <code class="literal">da</code> sont
      également requises.  Les meilleures performances sont
      obtenues avec les ports configurés dans le mode EPP 1.9.</p><pre class="programlisting">#device         puc</pre><p>Décommentez ce périphérique si vous
      disposez d'une carte PCI série ou parallèle
      <span class="quote">« <span class="quote">idiote</span> »</span> qui est supportée par le pilote
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=puc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">puc</span>(4)</span></a>.</p><pre class="programlisting"># PCI Ethernet NICs.
device          de         # DEC/Intel DC21x4x (<span class="quote">« <span class="quote">Tulip</span> »</span>)
device          em         # Intel PRO/1000 adapter Gigabit Ethernet Card
device          ixgb       # Intel PRO/10GbE Ethernet Card
device          txp        # 3Com 3cR990 (<span class="quote">« <span class="quote">Typhoon</span> »</span>)
device          vx         # 3Com 3c590, 3c595 (<span class="quote">« <span class="quote">Vortex</span> »</span>)</pre><p>Divers pilotes de cartes réseaux PCI.  Mettez en
      commentaires ou supprimer les lignes de celles qui ne sont pas
      présentes sur votre système.</p><pre class="programlisting"># PCI Ethernet NICs that use the common MII bus controller code.
# NOTE: Be sure to keep the 'device miibus' line in order to use these NICs!
device          miibus     # MII bus support</pre><p>Le support du bus MII est nécessaire pour certaines
      cartes Ethernet PCI 10/100, à savoir celles qui utilisent des
      interfaces compatibles MII ou implémentent une gestion de
      l'interface opérant comme le bus MII.  Ajouter
      <code class="literal">device miibus</code> à la configuration du noyau
      intègre le support pour l'API miibus générique et
      tous les pilotes d'interfaces PHY, incluant un pilote
      générique pour les interfaces PHYs qui ne sont pas
      spécifiquements gérées par un
      pilote individuel.</p><pre class="programlisting">device          bce        # Broadcom BCM5706/BCM5708 Gigabit Ethernet
device          bfe        # Broadcom BCM440x 10/100 Ethernet
device          bge        # Broadcom BCM570xx Gigabit Ethernet
device          dc         # DEC/Intel 21143 and various workalikes
device          fxp        # Intel EtherExpress PRO/100B (82557, 82558)
device          lge        # Level 1 LXT1001 gigabit ethernet
device          msk        # Marvell/SysKonnect Yukon II Gigabit Ethernet
device          nge        # NatSemi DP83820 gigabit ethernet
device          nve        # nVidia nForce MCP on-board Ethernet Networking
device          pcn        # AMD Am79C97x PCI 10/100 (precedence over 'lnc')
device          re         # RealTek 8139C+/8169/8169S/8110S
device          rl         # RealTek 8129/8139
device          sf         # Adaptec AIC-6915 (<span class="quote">« <span class="quote">Starfire</span> »</span>)
device          sis        # Silicon Integrated Systems SiS 900/SiS 7016
device          sk         # SysKonnect SK-984x &amp; SK-982x gigabit Ethernet
device          ste        # Sundance ST201 (D-Link DFE-550TX)
device          stge       # Sundance/Tamarack TC9021 gigabit Ethernet
device          ti         # Alteon Networks Tigon I/II gigabit Ethernet
device          tl         # Texas Instruments ThunderLAN
device          tx         # SMC EtherPower II (83c170 <span class="quote">« <span class="quote">EPIC</span> »</span>)
device          vge        # VIA VT612x gigabit ethernet
device          vr         # VIA Rhine, Rhine II
device          wb         # Winbond W89C840F
device          xl         # 3Com 3c90x (<span class="quote">« <span class="quote">Boomerang</span> »</span>, <span class="quote">« <span class="quote">Cyclone</span> »</span>)</pre><p>Pilotes qui utilisent le code du contrôleur du bus
      MII.</p><pre class="programlisting"># ISA Ethernet NICs.  pccard NICs included.
device          cs         # Crystal Semiconductor CS89x0 NIC
# 'device ed' requires 'device miibus'
device          ed         # NE[12]000, SMC Ultra, 3c503, DS8390 cards
device          ex         # Intel EtherExpress Pro/10 and Pro/10+
device          ep         # Etherlink III based cards
device          fe         # Fujitsu MB8696x based cards
device          ie         # EtherExpress 8/16, 3C507, StarLAN 10 etc.
device          lnc        # NE2100, NE32-VL Lance Ethernet cards
device          sn         # SMC's 9000 series of Ethernet chips
device          xe         # Xircom pccard Ethernet

# ISA devices that use the old ISA shims
#device         le</pre><p>Pilotes pour les cartes Ethernet ISA.  Consultez le fichier
      <code class="filename">/usr/src/sys/i386/conf/NOTES</code> pour savoir
      quelles cartes sont supportées et par quel pilote.</p><pre class="programlisting"># Wireless NIC cards
device          wlan            # 802.11 support</pre><p>Support 802.11 générique.  Cette ligne est
      nécessaire pour le réseau sans fil.</p><pre class="programlisting">device          wlan_wep        # 802.11 WEP support
device          wlan_ccmp       # 802.11 CCMP support
device          wlan_tkip       # 802.11 TKIP support</pre><p>Support pour le chiffrage pour les
      périphériques 802.11.  Ces lignes sont
      nécessaires si vous avez l'intention d'utiliser le
      chiffrage et les protocoles de sécurité
      802.11i.</p><pre class="programlisting">device          an         # Aironet 4500/4800 802.11 wireless NICs.
device          ath             # Atheros pci/cardbus NIC's
device          ath_hal         # Atheros HAL (Hardware Access Layer)
device          ath_rate_sample # SampleRate tx rate control for ath
device          awi        # BayStack 660 and others
device          ral        # Ralink Technology RT2500 wireless NICs.
device          wi         # WaveLAN/Intersil/Symbol 802.11 wireless NICs.
#device         wl         # Older non 802.11 Wavelan wireless NIC.</pre><p>Support pour diverses cartes réseau sans fil.</p><pre class="programlisting"># Pseudo devices
device   loop          # Network loopback</pre><p>C'est l'interface générique en boucle de
      TCP/IP.  Si vous employez telnet ou FTP sur
      <code class="systemitem">localhost</code> (aussi connu en tant qu'adresse
      <code class="systemitem">127.0.0.1</code>) la réponse vous
      parviendra via ce pseudo-périphérique.  Ceci est
      <span class="emphasis"><em>obligatoire</em></span>.</p><pre class="programlisting">device   random        # Entropy device</pre><p>Générateur de nombres aléatoire
      sécurisé pour les applications de
      chiffrement.</p><pre class="programlisting">device   ether         # Ethernet support</pre><p><code class="literal">ether</code> ne sert que si vous avez une carte
      Ethernet.  Cela intègre le code générique
      pour le protocole Ethernet.</p><pre class="programlisting">device   sl            # Kernel SLIP</pre><p><code class="literal">sl</code> est le support pour le protocole SLIP.
      Il a été presque entièrement supplanté
      par le protocole PPP, plus facile à mettre en oeuvre, mieux
      adapté aux connexions par modem, et aussi plus
      puissant.</p><pre class="programlisting">device   ppp           # Kernel PPP</pre><p>C'est le support intégré au noyau du protocole PPP
      pour les connexions par modem.  Il y a aussi une version de PPP
      sous forme de programme utilisateur qui utilise
      <code class="literal">tun</code> et offre plus de souplesse et de
      possibilités comme la connexion à la
      demande.</p><pre class="programlisting">device   tun           # Packet tunnel.</pre><p>Ceci est utilisé par le programme PPP en mode
      utilisateur.
      Voyez la section <a class="link" href="#userppp" title="27.2. Using User PPP ** Traduction en Cours **">PPP</a> de ce manuel pour plus
      d'informations.</p><pre class="programlisting"><a id="kernelconfig-ptys"></a>
device   pty           # Pseudo-ttys (telnet etc)</pre><p>C'est un &#8220;pseudo-terminal&#8221; ou un port simulant
      une session.  Il est utilisé par les sessions
      <code class="command">telnet</code> et <code class="command">rlogin</code>
      entrantes, par <span class="application">xterm</span>, et d'autres
      applications comme <span class="application">Emacs</span>.</p><pre class="programlisting">device   md            # Memory <span class="quote">« <span class="quote">disks</span> »</span></pre><p>Pseudo-périphérique de disque
      mémoire.</p><pre class="programlisting">device   gif     # IPv6 and IPv4 tunneling</pre><p>Ceci implémente l'encapsulation du protocole IPv6 par
      dessus l'IPv4, l'IPv4 par dessus l'IPv6, l'encapsulation IPv4
      par dessus l'IPv4, et IPv6 par dessus IPv6.  Le
      périphérique <code class="literal">gif</code>
      <span class="quote">« <span class="quote">s'auto-duplique</span> »</span>, et créera les fichiers
      spéciaux de périphérique en fonction des
      besoins.</p><pre class="programlisting">device   faith   # IPv6-to-IPv4 relaying (translation)</pre><p>Ce pseudo-périphérique capture les paquets qui lui sont
      envoyés et les détourne vers le &#8220;daemon&#8221; de
      translation IPv4/IPv6.</p><pre class="programlisting"># The `bpf' device enables the Berkeley Packet Filter.
# Be aware of the administrative consequences of enabling this!
# Note that 'bpf' is required for DHCP.
device   bpf           # Berkeley packet filter</pre><p>C'est le filtre de paquets de Berkeley.  Ce
      pseudo-périphérique permet de placer les interfaces
      en mode &#8220;promiscuous&#8221; (indiscret), pour capturer
      chaque paquet sur réseau de diffusion (e.g., un réseau
      Ethernet).  Ces paquets peuvent être enregistrés sur
      le disque et/ou examinés avec le programme
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a>
	est également utilisé par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> pour
	obtenir une adresse IP du routeur par défaut (passerelle) et
	ainsi de suite.  Si vous utilisez DHCP, conservez cette ligne
	non commentée.</p></div><pre class="programlisting"># USB support
device          uhci          # UHCI PCI-&gt;USB interface
device          ohci          # OHCI PCI-&gt;USB interface
device          ehci          # EHCI PCI-&gt;USB interface (USB 2.0)
device          usb           # USB Bus (required)
#device         udbp          # USB Double Bulk Pipe devices
device          ugen          # Generic
device          uhid          # <span class="quote">« <span class="quote">Human Interface Devices</span> »</span>
device          ukbd          # Keyboard
device          ulpt          # Printer
device          umass         # Disks/Mass storage - Requires scbus and da
device          ums           # Mouse
device          ural          # Ralink Technology RT2500USB wireless NICs
device          urio          # Diamond Rio 500 MP3 player
device          uscanner      # Scanners
# USB Ethernet, requires mii
device          aue           # ADMtek USB Ethernet
device          axe           # ASIX Electronics USB Ethernet
device          cdce          # Generic USB over Ethernet
device          cue           # CATC USB Ethernet
device          kue           # Kawasaki LSI USB Ethernet
device          rue           # RealTek RTL8150 USB Ethernet</pre><p>Support pour divers périphériques USB.</p><pre class="programlisting"># FireWire support
device          firewire      # FireWire bus code
device          sbp           # SCSI over FireWire (Requires scbus and da)
device          fwe           # Ethernet over FireWire (non-standard!)</pre><p>Support pour divers périphériques
      Firewire.</p><p>Pour plus d'informations et pour avoir la liste de
      périphériques supplémentaires supportés par
      FreeBSD, voyez le fichier
      <code class="filename">/usr/src/sys/i386/conf/NOTES</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71584336"></a>9.4.1. Configurations mémoire importantes
	(<acronym class="acronym">PAE</acronym>)</h3></div></div></div><a id="idp71585360" class="indexterm"></a><p>Les machines à configuration mémoire
	importante ont besoin de pouvoir accéder à plus
	d'espace mémoire utilisateur et noyau que la limite des
	4 gigaoctets de l'espace d'adresse noyau+utilisateur
	(&#8220;Kernel Virtual
	Address&#8221;&#8212;<acronym class="acronym">KVA</acronym>).  En raison de
	cette limite, Intel a ajouté le support d'adresses
	physiques sur 36 bits pour l'espace d'adresses dans les
	familles de microprocesseurs <span class="trademark">Pentium</span>® Pro et
	suivantes.</p><p>L'extension de l'adressage physique&#8212;,&#8220;Physical
	Address Extension&#8221; (<acronym class="acronym">PAE</acronym>) est une
	caractéristique des microprocesseurs <span class="trademark">Intel</span>® <span class="trademark">Pentium</span>®
	Pro et suivants autorisant les configurations mémoires
	jusqu'à 64 gigaoctets.  FreeBSD fournit un support pour
	cette caratéristique via l'option de configuration du
	noyau <code class="option">PAE</code>, disponible sous toutes les versions
	actuelles de FreeBSD.
	En raison des limitations de l'architecture
	mémoire <span class="trademark">Intel</span>®, aucune distinction n'est faite entre
	la mémoire au-dessus et en-dessous de 4 gigaoctets.  La
	mémoire allouée au-dessus de 4 gigaoctets est
	simplement ajoutée à l'ensemble de la
	mémoire disponible.</p><p>Pour activer le support <acronym class="acronym">PAE</acronym> dans le
	noyau, ajoutez simplement la ligne suivante dans votre fichier
	de configuration du noyau:</p><pre class="programlisting">options		PAE</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le support <acronym class="acronym">PAE</acronym> sous FreeBSD est
	  uniquement disponible pour les processeurs IA-32
	  d'<span class="trademark">Intel</span>®.  Il doit être noté que le support
	  <acronym class="acronym">PAE</acronym> sous FreeBSD n'a pas été
	  énormément testé, et devrait être
	  considéré comme bêta comparé aux
	  autres fonctionnalités stables de FreeBSD.</p></div><p>Le support <acronym class="acronym">PAE</acronym> sous FreeBSD a quelques
	limitations:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un processus est incapable d'accéder à
	    plus de 4 gigaoctets d'espace mémoire.</p></li><li class="listitem"><p>Les modules <acronym class="acronym">KLD</acronym> ne peuvent
	    être chargés dans un noyau avec
	    <acronym class="acronym">PAE</acronym> activé, en raison des
	    différences entre la structure d'un module et du
	    noyau.</p></li><li class="listitem"><p>Les pilotes de périphériques qui
	    n'utilisent pas l'interface <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bus_dma&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">bus_dma</span>(9)</span></a>
	    seront à l'origine de corruption de données
	    avec un noyau <acronym class="acronym">PAE</acronym> et ne sont pas
	    recommandés.  Pour cette raison, le fichier de
	    configuration du noyau avec support
	    <code class="filename">PAE</code> qui est fourni avec
	    FreeBSD exclut tous les pilotes connus
	    pour ne pas fonctionner avec un noyau avec support
	    <acronym class="acronym">PAE</acronym>.</p></li><li class="listitem"><p>Certains paramètres modifiables du
	    système déterminent l'utilisation des
	    ressources mémoire par la quantité de la
	    mémoire physique disponible.  De tels
	    paramètres peuvent être inutilement
	    sur-alloués en raison de la grande quantité de
	    mémoire d'un système <acronym class="acronym">PAE</acronym>.
	    Un bon exemple est le &#8220;sysctl&#8221;
	    <code class="option">kern.maxvnodes</code>, qui contrôle le
	    nombre maximal de &#8220;vnodes&#8221; alloués par le
	    noyau.  Il est recommandé d'ajuster ce dernier et les
	    autres paramètres du même genre à des
	    valeurs raisonnables.</p></li><li class="listitem"><p>Il pourra être nécessaire d'augmenter l'espace
	    d'adressage virtuel du noyau (&#8220;kernel virtual
	    address&#8221;&#8212;<acronym class="acronym">KVA</acronym>) ou de
	    réduire le montant de la ressource spécifique
	    du noyau qui est fortement utilisée (voir plus haut)
	    afin d'éviter l'épuisement de l'espace
	    <acronym class="acronym">KVA</acronym>.  L'option du noyau
	    <code class="option">KVA_PAGES</code> peut être employée
	    pour augmenter l'espace <acronym class="acronym">KVA</acronym>.</p></li></ul></div><p>Pour des considérations de performance et de
	stabilité, il est recommandé de consulter la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>.  La page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pae&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pae</span>(4)</span></a> contient des informations à jour
	sur le support <acronym class="acronym">PAE</acronym> sous FreeBSD.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kernelconfig-trouble"></a>9.5. Si quelque chose se passe mal</h2></div></div></div><p>Il y a cinq types de problèmes qui peuvent survenir lors de
      la compilation d'un noyau sur mesure.  Ce sont:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">La commande <code class="command">config</code> échoue:</span></dt><dd><p>Si la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> échoue quand
	    vous lui passez en paramètre la description de votre
	    noyau, vous avez probablement fait une simple erreur
	    quelque part.  Heureusement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a>
	    affichera le numéro de la ligne qui lui a posé
	    problème, vous pouvez donc localiser rapidement la
	    ligne contenant l'erreur.  Par exemple, si vous avez:</p><pre class="screen">config: line 17: syntax error</pre><p>Vérifiez que la ligne est
	    correctement écrite, en le comparant avec le noyau
	    <code class="filename">GENERIC</code> ou une autre
	    référence.</p></dd><dt><span class="term">La commande <code class="command">make</code> échoue:</span></dt><dd><p>Si la commande <code class="command">make</code> échoue,
	    cela signale habituellement une erreur dans la description
	    de votre noyau, mais qui n'est pas suffisamment sérieuse pour que
	    la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=config&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">config</span>(8)</span></a> la détecte.
	    A nouveau, vérifiez votre fichier de configuration, et si
	    vous n'arrivez toujours pas à résoudre le
	    problème, envoyez un courrier électronique à la
	    <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">liste de diffusion pour les questions d'ordre général à propos de FreeBSD</a> en joignant votre fichier de configuration
	    du noyau, le diagnostic devrait être rapide.</p></dd><dt><span class="term">Le noyau ne démarre pas:<a id="kernelconfig-noboot"></a></span></dt><dd><p>Si votre nouveau noyau ne démarre pas, ou ne
	    reconnaît pas vos périphériques,
	    ne paniquez pas!  Heureusement, FreeBSD dispose d'un
	    excellent mécanisme pour récupérer si le
	    noyau ne fonctionne pas.  Sélectionnez simplement le noyau,
	    à partir duquel vous désirez démarrer,
	    à l'invite du chargeur de FreeBSD.  Vous pouvez y
	    accéder quand le menu de démarrage
	    apparaît.  Sélectionner l'option 6,
	    <span class="quote">« <span class="quote">Escape to a loader prompt</span> »</span>.  A l'invite,
	    tapez <code class="command">unload kernel</code> et ensuite
	    <code class="command">boot /boot/kernel.old/kernel</code>,
	    ou le nom de fichier d'un autre noyau qui pourra démarrer
	    proprement.  Quand on reconfigure un noyau, il est
	    toujours bon de conserver à portée de la main un
	    noyau dont on sait qu'il fonctionne.</p><p>Après avoir démarré avec un
	    noyau en état de marche, vous pouvez revérifier votre
	    fichier de configuration et essayer de recompiler à
	    nouveau votre noyau.  Une ressource utile est le fichier
	    <code class="filename">/var/log/messages</code> qui enregistre,
	    entre autres, tous les messages du noyau à chaque
	    démarrage réussi.  En outre, la commande
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> affichera les messages du noyau pour le
	    dernier démarrage.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous avez des difficultés à compiler
	      un noyau, veillez à conserver un noyau
	      <code class="filename">GENERIC</code>, ou un autre noyau dont
	      vous savez qu'il fonctionne, sous la main, avec un nom
	      différent de sorte qu'il ne soit pas
	      écrasé à la prochaine compilation.
	      Vous ne pouvez pas faire confiance au noyau
	      <code class="filename">kernel.old</code> parce qu'en installant
	      un nouveau noyau, <code class="filename">kernel.old</code> est
	      remplacé par le dernier noyau installé dont
	      il n'est pas certain qu'il soit opérationnel.  Aussi,
	      dès que possible, déplacez le noyau
	      opérationnel vers le
	      bon emplacement <code class="filename">/boot/kernel</code> où des commandes
	      comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> pourront ne pas fonctionner correctement.
	      Pour cela, renommez le répertoire contenant le bon
	      noyau:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel /boot/kernel.bad</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/kernel.good /boot/kernel</code></strong></pre></div></dd><dt><span class="term">Le noyau est opérationnel, mais la commande
	  <code class="command">ps</code> ne fonctionne plus du tout:</span></dt><dd><p>Si vous avez installé une version du noyau
	    différente de celle avec laquelle ont
	    été compilés les utilitaires système,
	    par exemple, un noyau
	    -CURRENT sur un système -RELEASE, de nombreuses commandes
	    d'affichage de l'état du système comme
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a> and <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vmstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vmstat</span>(8)</span></a> ne fonctionneront plus.
	    Vous devrez <a class="link" href="#makeworld" title="24.6. Recompiler le système">recompiler et
	    installer un système</a> avec la même
	    version de l'arborescence des sources de celle
	    utilisée pour votre noyau.
	    C'est une des raisons pour lesquelles il n'est pas
	    judicieux d'utiliser des versions différentes du noyau et
	    du reste du système d'exploitation.</p></dd></dl></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing"></a>Chapitre 10. Imprimer</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Sean</span> <span class="surname">Kelly</span></span>. </span></div><div><span class="authorgroup">Restructuré et mis à jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#printing-synopsis">10.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#printing-intro-spooler">10.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#printing-intro-setup">10.3. Configuration de base</a></span></dt><dt><span class="sect1"><a href="#printing-advanced">10.4. Configuration avancée de l'imprimante</a></span></dt><dt><span class="sect1"><a href="#printing-using">10.5. Using Printers ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#printing-lpd-alternatives">10.6. Alternatives to the Standard Spooler ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#printing-troubleshooting">10.7. Troubleshooting ** Traduction en Cours **</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Gregory Delfly
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:gregoryd.freebsd@free.fr">gregoryd.freebsd@free.fr</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-synopsis"></a>10.1. Synopsis</h2></div></div></div><a id="idp71649488" class="indexterm"></a><a id="idp71650000" class="indexterm"></a><p>FreeBSD peut être utilisé pour imprimer sur une
      grande variété d'imprimantes, depuis la plus
      ancienne des imprimantes matricielles jusqu'aux toutes
      dernières imprimantes laser, en passant par tout ce qui
      peut exister entre les deux, et vous permet d'obtenir des
      impressions de haute qualité avec les programmes que vous
      exécutez.</p><p>Il est également possible de configurer FreeBSD pour
      qu'il fasse office de serveur d'impression sur un réseau;
      de cette manière FreeBSD peut recevoir des travaux
      d'impression (<span class="quote">« <span class="quote">jobs</span> »</span>) en provenance de
      différents ordinateurs, comprenant d'autres machines sous
      FreeBSD et des machines sous <span class="trademark">Windows</span>® ou <span class="trademark">Mac OS</span>®.  FreeBSD
      veillera à ce qu'un seul travail d'impression ne soit
      imprimé à la fois, et pourra tenir des
      statistiques sur les utilisateurs et les machines lançant
      le plus d'impressions, produire des pages
      d'<span class="quote">« <span class="quote">en-têtes</span> »</span> pour distinguer les impressions
      de chacun, et plus encore.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment configurer le gestionnaire d'impression de
	  FreeBSD</p></li><li class="listitem"><p>Comment installer des filtres d'impression, pour
	  gérer des travaux d'impression particuliers de
	  manière différente, ce qui inclut la
	  transformation de documents entrants en un format que vos
	  imprimantes comprennent.</p></li><li class="listitem"><p>Comment inclure des en-têtes ou des pages
	  bannière dans vos impressions.</p></li><li class="listitem"><p>Comment imprimer en utilisant des imprimantes
	  connectées à d'autres ordinateurs.</p></li><li class="listitem"><p>Comment imprimer en utilisant des imprimantes
	  connectées directement au réseau.</p></li><li class="listitem"><p>Comment gérer des restrictions d'impression,
	  notamment comment limiter la taille des travaux
	  d'impression, et empêcher certains utilisateurs
	  d'imprimer.</p></li><li class="listitem"><p>Comment tenir des statistiques d'impression, et rendre
	  compte de l'utilisation de l'imprimante.</p></li><li class="listitem"><p>Comment résoudre les problèmes
	  d'impression.</p></li></ul></div><p>Avant de lire ce chapitre, vous devriez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment configurer et installer un nouveau noyau
	  (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-spooler"></a>10.2. Introduction</h2></div></div></div><p>Afin d'utiliser des imprimantes avec FreeBSD, vous avez la
      possibilité de les paramétrer pour qu'elles
      utilisent le gestionnaire d'impression de Berkeley,
      également connu sous le nom de gestionnaire d'impression
      <span class="application">LPD</span>, ou tout simplement
      <span class="application">LPD</span>.  C'est le système
      contrôle d'imprimante par défaut de FreeBSD.  Ce
      chapitre présente <span class="application">LPD</span> et vous
      assistera tout au long de sa configuration.</p><p>Si vous connaissez déjà
      <span class="application">LPD</span> ou un autre système de
      gestion des impressions, vous pouvez directement vous rendre
      à la section <a class="link" href="#printing-intro-setup" title="10.3. Configuration de base">Paramétrage de
      base</a>.</p><p><span class="application">LPD</span> contrôle tout ce qui
      relève des imprimantes.  Il est
      responsable de plusieurs tâches:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Il contrôle l'accès aux imprimantes
	  directement connectées au système ainsi
	  qu'à celles connectées à d'autres
	  machines via le réseau.</p></li><li class="listitem"><a id="idp71680080" class="indexterm"></a><p>Il permet aux utilisateurs de soumettre des fichiers
	  à imprimer; ces requêtes sont connues sous le
	  nom de <span class="emphasis"><em>travaux</em></span>.</p></li><li class="listitem"><p>Il empêche l'accès simultané de
	  plusieurs utilisateurs à une même imprimante,
	  en gérant une <span class="emphasis"><em>queue</em></span> pour chaque
	  imprimante.</p></li><li class="listitem"><p>Il peut produire des <span class="emphasis"><em>pages
	  d'en-tête</em></span> (également connues sous le
	  nom de <span class="emphasis"><em>pages bannières</em></span> ou encore
	  <span class="emphasis"><em>cartouches</em></span>) afin que les utilisateurs
	  puissent facilement retrouver dans une pile d'impressions
	  celles correspondant aux travaux qu'ils ont soumis.</p></li><li class="listitem"><p>Il s'occupe de paramétrer les communications
	  lorsque les imprimantes sont connectées via un port
	  série.</p></li><li class="listitem"><p>Il peut transmettre des travaux par réseau
	  à un gestionnaire d'impression
	  <span class="application">LPD</span> situé sur une autre
	  machine.</p></li><li class="listitem"><p>Il peut appliquer des filtres spéciaux afin
	  d'assurer le formatage des travaux en fonction des
	  différents langages et caractéristiques des
	  imprimantes.</p></li><li class="listitem"><p>Il peut comptabiliser l'utilisation de
	  l'imprimante.</p></li></ul></div><p>Vous pouvez, au travers d'un fichier de configuration
      (<code class="filename">/etc/printcap</code>) et en fournissant les
      programmes de filtres spéciaux, faire exécuter par
      <span class="application">LPD</span> tout ou partie des tâches
      mentionnées ci-dessus sur une grande
      variété de modèles d'imprimantes.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-intro-why"></a>10.2.1. Pourquoi vous devriez utiliser le gestionnaire
	d'impression</h3></div></div></div><p>Si vous êtes l'unique utilisateur de votre
	système, vous vous demandez sans doute pourquoi il vous
	faudrait vous préoccuper du gestionnaire d'impression,
	alors que vous n'avez pas besoin de contrôle
	d'accès, de pages d'en-tête ni de statistiques
	relatives à l'utilisation de l'imprimante.  Quand bien
	même il est possible de mettre en oeuvre l'accès
	direct à l'imprimante, vous devriez tout de même
	utiliser le gestionnaire d'impression, parce que:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">LPD</span> imprime les travaux en
	    tâche de fond: vous n'êtes pas obligé
	    d'attendre que les données soient passées
	    à l'imprimante.</p></li><li class="listitem"><a id="idp71700432" class="indexterm"></a><p><span class="application">LPD</span> peut commodément
	    se charger d'appliquer des filtres à un travail
	    pour adjoindre une en-tête contenant la date et
	    l'heure, ou convertir un fichier au format particulier
	    (comme un fichier DVI <span class="application">TeX</span>) en un format que l'imprimante
	    comprenne.  Ainsi, vous n'aurez pas à vous charger
	    de ces manipulations à la main.</p></li><li class="listitem"><p>Beaucoup d'applications, tant libres que commerciales,
	    fournissant une fonctionnalité d'impression
	    s'attendent généralement à traiter
	    avec le gestionnaire d'impression.  En le mettant en
	    oeuvre, vous vous faciliterez le support des autres
	    applications que vous pourriez ajouter plus tard, ou que
	    vous avez déjà installées.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-intro-setup"></a>10.3. Configuration de base</h2></div></div></div><p>Pour utiliser des imprimantes avec le gestionnaire
      d'impression, il vous faudra configurer à la fois la
      partie matérielle (c'est à dire les imprimantes)
      et la partie logicielle (c'est à dire
      <span class="application">LPD</span>).  Ce document présente
      deux niveaux de configuration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La section <a class="link" href="#printing-simple" title="10.3.1. Configuration simple de l'imprimante">Configuration
	  simple de l'imprimante</a> vous apprendra à
	  connecter une imprimante, à renseigner
	  <span class="application">LPD</span> sur la façon dont il
	  doit communiquer avec elle, et à imprimer de simples
	  fichiers textes.</p></li><li class="listitem"><p>La section <a class="link" href="#printing-advanced" title="10.4. Configuration avancée de l'imprimante">Configuration avancée de
	  l'imprimante</a> vous apprendra à imprimer
	  différents formats de fichiers, des pages
	  d'en-tête, par l'intermédiaire d'un
	  réseau, à contrôler l'accès aux
	  imprimantes, et comptabiliser leur utilisation.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-simple"></a>10.3.1. Configuration simple de l'imprimante</h3></div></div></div><p>Cette section vous apprendra à configurer
	l'imprimante et <span class="application">LPD</span>.  Elle
	présente les bases:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La section <a class="link" href="#printing-hardware" title="10.3.1.1. Configuration matérielle">Configuration
	    matérielle</a> donne des indications sur la
	    façon de connecter l'imprimante à l'un des
	    ports de votre ordinateur.</p></li><li class="listitem"><p>La section <a class="link" href="#printing-software" title="10.3.1.2. Configuration logicielle">Configuration
	    logicielle</a> montre comment renseigner le fichier de
	    configuration du gestionnaire d'impression
	    <span class="application">LPD</span>
	    (<code class="filename">/etc/printcap</code>).</p></li></ul></div><p>Si vous mettez en oeuvre une imprimante
	réceptionnant les données à imprimer via
	un protocole réseau plutôt que par les interfaces
	locales de l'ordinateur, lisez la section <a class="link" href="#printing-advanced-network-net-if" title="10.4.3.2. Imprimantes avec des interfaces utilisant des flux réseau">Imprimantes avec
	des interfaces utilisant des flux réseau</a>.</p><p>Bien que cette section soit intitulée
	<span class="quote">« <span class="quote">Configuration simple de l'imprimante</span> »</span>, elle
	s'avère en réalité plutôt complexe.
	La partie la plus difficile consiste à faire
	fonctionner l'imprimante avec votre ordinateur et
	<span class="application">LPD</span>.  Les options avancées
	telles les pages d'en-tête ou les statistiques sont
	relativement faciles à mettre en oeuvre une fois que
	l'imprimante fonctionne.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-hardware"></a>10.3.1.1. Configuration matérielle</h4></div></div></div><p>Cette section détaille les différentes
	  manières de connecter une imprimante à votre
	  PC.  Elle discute les types de ports et de câbles, et
	  de la configuration noyau dont vous pourriez avoir besoin
	  afin que FreeBSD puisse communiquer avec l'imprimante.</p><p>Si vous avez déjà connecté votre
	  imprimante et réussi à imprimer sous un autre
	  système d'exploitation, vous pouvez probablement
	  passer à la section <a class="link" href="#printing-software" title="10.3.1.2. Configuration logicielle">Configuration
	  logicielle</a>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-ports"></a>10.3.1.1.1. Les ports et les câbles</h5></div></div></div><p>Les imprimantes pour PC vendues aujourd'hui sont en
	    général pourvues d'une ou plusieurs des
	    trois interfaces suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp71723984" class="indexterm"></a><p>Les interfaces <span class="emphasis"><em>série</em></span>,
	       également connues sous les noms RS-232 ou ports
	       COM, utilisent un port série sur votre
	       ordinateur pour envoyer des données à
	       l'imprimante.  Les interfaces série sont
	       courantes, dans l'industrie informatique, et les
	       câbles sont à la fois disponibles et
	       faciles à réaliser.  Elles
	       réclament parfois des câbles
	       spéciaux et peuvent nécessiter le
	       paramétrage d'options de communication assez
	       complexes.  La plupart des ports série PC ont
	       une vitesse de transmission maximale de 115200 bps, ce
	       qui rend l'impression de travaux comportant beaucoup de
	       graphismes malaisée.</p></li><li class="listitem"><a id="idp71726416" class="indexterm"></a><p>Les interfaces
	       <span class="emphasis"><em>parallèles</em></span> utilisent un
	       port parallèle sur votre ordinateur pour envoyer
	       des données à l'imprimante.  Les
	       interfaces parallèles sont courantes dans
	       l'industrie informatique et plus rapides que les
	       interfaces série RS-232.  Les câbles sont
	       disponibles mais sont moins faciles à fabriquer
	       à la main. En général, il n'y a
	       aucune option de communication à
	       paramétrer avec ces interfaces, ce qui rend leur
	       configuration particulièrement simple.</p><a id="idp71728336" class="indexterm"></a><p>Les interfaces parallèles sont parfois
	       appelées <span class="quote">« <span class="quote">Centronics</span> »</span>, nom
	       tiré du type de connecteur de
	       l'imprimante</p></li><li class="listitem"><a id="idp71730768" class="indexterm"></a><p>Les interfaces USB, tenant leur nom de
	       <span class="quote">« <span class="quote">Universal Serial Bus</span> »</span>, ou <span class="quote">« <span class="quote">Bus
	       Série Universel</span> »</span>, s'avèrent plus
	       véloces encore que les interfaces
	       parallèles ou série RS-232.  Les
	       câbles sont simples et peu onéreux. L'USB
	       surpasse les interfaces série RS-232 et
	       parallèles pour l'impression, mais son support
	       par les systèmes <span class="trademark">UNIX</span>® n'est pas aussi bon.
	       Une façon d'éviter ce problème est
	       d'acheter une imprimante qui dispose à la fois
	       d'une interface USB et d'une interface
	       parallèle, comme beaucoup de
	       modèles.</p></li></ul></div><p>En règle générale, les interfaces
	    parallèles n'offrent qu'une communication
	    unidirectionnelle (de l'ordinateur vers l'imprimante)
	    alors que les interfaces série et USB permettent un
	    échange bidirectionnel.  Les imprimantes et ports
	    parallèles plus récents (EPP et ECP) peuvent
	    communiquer dans les deux sens sous FreeBSD lorsque l'on a
	    recourt à un câble conforme à la norme
	    IEEE-1284.</p><a id="idp71738448" class="indexterm"></a><p>La communication bidirectionnelle avec l'imprimante en
	    utilisant un port parallèle se fait en
	    général de l'une des deux manières
	    suivantes.  La première utilise un pilote
	    d'imprimante compilé pour FreeBSD comprenant le
	    langage propriétaire de l'imprimante.  C'est
	    couramment le cas des imprimantes jet d'encre et cela peut
	    être utilisé pour retourner les niveaux
	    d'encre et autres informations d'état.  La seconde
	    méthode est employée lorsque l'imprimante
	    supporte <span class="trademark">PostScript</span>®.</p><p>Les travaux <span class="trademark">PostScript</span>® sont en fait des programmes
	    envoyés à l'imprimante.  Ils ne
	    génèrent pas nécessairement de sortie
	    papier et peuvent retourner leurs résultats
	    directement à l'ordinateur.  <span class="trademark">PostScript</span>® utilise
	    aussi la communication bidirectionnelle pour avertir
	    l'ordinateur de problèmes, comme des erreurs dans
	    le programme <span class="trademark">PostScript</span>® ou des bourrages papier.  Vos
	    utilisateurs apprécieraient certainement de telles
	    informations.  De surcroît, la meilleure
	    façon de tenir des statistiques sérieusement
	    avec une imprimante <span class="trademark">PostScript</span>® nécessite la
	    communication bidirectionnelle: on demande à
	    l'imprimante quel est son compteur de pages (combien en
	    a-t-elle imprimées depuis sa fabrication), puis on
	    lui envoie le travail de l'utilisateur, enfin on lui
	    redemande son compteur de pages.  La différence
	    entre les deux valeurs donne la consommation de papier que
	    vous pouvez attribuer à cet utilisateur.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-parallel"></a>10.3.1.1.2. Les ports parallèles</h5></div></div></div><p>Pour raccorder une imprimante utilisant une interface
	    parallèle, branchez le câble Centronics sur
	    l'imprimante et sur l'ordinateur.  Les instructions
	    accompagnant l'imprimante, l'ordinateur, ou les deux,
	    devraient parfaitement vous renseigner.</p><p>Souvenez-vous du port parallèle que vous avez
	    utilisé sur l'ordinateur.  Pour FreeBSD, le premier se
	    nomme <code class="filename">ppc0</code>; le deuxième,
	    <code class="filename">ppc1</code>, et ainsi de suite.  Le nom du
	    fichier spécial de périphérique de
	    l'imprimante suit les mêmes règles:
	    <code class="filename">/dev/lpt0</code> pour celle connectée
	    sur le premier port parallèle, etc.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-serial"></a>10.3.1.1.3. Les ports série</h5></div></div></div><p>Pour raccorder une imprimante utilisant une interface
	    série, branchez le câble série
	    adéquat sur l'imprimante et sur l'ordinateur.  Les
	    instructions accompagnant l'imprimante, l'ordinateur, ou
	    les deux, devraient parfaitement vous renseigner.</p><p>Si vous n'êtes pas sûr de savoir quel est
	    le bon câble, voici ce que vous pouvez
	    essayer:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Un câble <span class="emphasis"><em>modem</em></span> relie
		chacune des broches du connecteur depuis l'une des
		extrémités du câble directement
		à la broche lui correspondant dans le
		connecteur de l'autre extrémité.  Ce
		type de câble est également connu sous le
		nom de câble <span class="quote">« <span class="quote">DTE-to-DCE</span> »</span>.</p></li><li class="listitem"><a id="idp65334608" class="indexterm"></a><p>Un câble <span class="emphasis"><em>null-modem</em></span>
		relie certaines des broches directement, en
		intervertit d'autres (par exemple,
		<span class="quote">« <span class="quote">émission de données</span> »</span> et
		<span class="quote">« <span class="quote">réception de données</span> »</span>), et
		en court-circuite d'autres en interne sur chacun des
		sertissages des connecteurs.  Ce type de câble
		est également connu sous le nom de câble
		<span class="quote">« <span class="quote">DTE-to-DTE</span> »</span>.</p></li><li class="listitem"><p>Un câble <span class="emphasis"><em>série pour
		imprimante</em></span>, requis par certaines
		imprimantes peu conventionnelles, ressemble au
		câble null-modem, à ceci près
		qu'il envoie certains signaux à l'autre
		extrémité au lieu de les court-circuiter
		en interne.</p></li></ul></div><a id="idp65338448" class="indexterm"></a><a id="idp65338960" class="indexterm"></a><a id="idp65339472" class="indexterm"></a><p>Vous devriez également définir les
	    paramètres de communication pour l'imprimante,
	    d'ordinaire en utilisant les contrôles sur la face
	    avant ou les commutateurs sur l'imprimante.  Choisissez la
	    valeur la plus élevée de
	    <code class="literal">bps</code> (bits par seconde, encore
	    appelés <span class="quote">« <span class="quote">vitesse de transmission</span> »</span>)
	    autorisée conjointement par votre ordinateur et
	    votre imprimante.  Choisissez 7 ou 8 bits de
	    données; aucun contrôle de parité ou
	    un bit de parité paire ou impaire; et 1 ou 2 bits
	    d'arrêt.  Choisissez également un protocole
	    de contrôle de flux: soit aucun, soit XON/XOFF
	    (également appelé <span class="quote">« <span class="quote">in-band</span> »</span>, ou
	    encore <span class="quote">« <span class="quote">contrôle logiciel</span> »</span>).  Retenez
	    ces paramètres pour la configuration logicielle,
	    dans la section qui suit.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-software"></a>10.3.1.2. Configuration logicielle</h4></div></div></div><p>Cette section détaille la configuration
	  logicielle nécessaire pour imprimer sous FreeBSD avec le
	  gestionnaire d'impression
	  <span class="application">LPD</span>.</p><p>Voici un aperçu des étapes à
	  suivre:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Configurez le noyau, si nécessaire, pour
	      utiliser le port sur lequel vous raccorderez votre
	      imprimante; la section <a class="link" href="#printing-kernel" title="10.3.1.2.1. Configuration du noyau">Configurer le noyau de
	      FreeBSD</a> vous donnera la marche à
	      suivre.</p></li><li class="step"><p>Paramétrez le mode de communication du port
	      parallèle si vous utilisez une imprimante de ce
	      type; la section <a class="link" href="#printing-parallel-port-mode" title="10.3.1.3. Paramétrer le mode de communication du port parallèle">Paramétrer
	      le mode de communication du port parallèle</a>
	      vous donnera les détails.</p></li><li class="step"><p>Configurez <span class="application">LPD</span> pour qu'il
	      communique avec l'imprimante en renseignant le fichier
	      <code class="filename">/etc/printcap</code>.  Vous apprendrez
	      comment faire un peu plus loin dans ce chapitre.</p></li></ol></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-kernel"></a>10.3.1.2.1. Configuration du noyau</h5></div></div></div><p>Le noyau du système d'exploitation est
	    compilé avec le support d'un certain ensemble de
	    périphériques.  Les interfaces série
	    ou parallèle de votre imprimante en font partie.
	    De ce fait, vous pourriez avoir à ajouter le
	    support d'un port série ou parallèle
	    supplémentaire si votre noyau n'a pas
	    déjà été configuré en
	    ce sens.</p><p>Pour savoir si le support d'une interface série
	    est activé dans le noyau que vous êtes en
	    train d'utiliser, entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep sioN /var/run/dmesg.boot</code></strong></pre><p>Où <em class="replaceable"><code>N</code></em>
	    représente le numéro du port série,
	    en commençant à zéro.  Si vous
	    obtenez un affichage similaire à:</p><pre class="screen">sio2 at port 0x3e8-0x3ef irq 5 on isa sio2: type 16550A</pre><p>alors le port est activé dans le noyau.</p><p>Pour savoir si le noyau supporte une interface
	    parallèle, entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep ppcN /var/run/dmesg.boot</code></strong></pre><p>Où <em class="replaceable"><code>N</code></em>
	    représente le numéro du port
	    parallèle, en commençant à
	    zéro.  Si vous obtenez un affichage similaire
	    à:</p><pre class="screen">ppc0: &lt;Parallel port&gt; at port 0x378-0x37f irq 7 on isa0
ppc0: SMC-like chipset (ECP/EPP/PS2/NIBBLE) in COMPATIBLE mode
ppc0: FIFO with 16/16/8 bytes threshold</pre><p>alors le port est activé dans le noyau.</p><p>Il se pourrait que vous ayez à reconfigurer le
	    noyau afin que le système détecte et puisse
	    utiliser un port parallèle ou série auquel
	    vous avez connecté votre imprimante.</p><p>Pour ajouter le support d'un port série, voyez
	    la section sur la configuration du noyau.  Pour ajouter le
	    support du port parallèle, voyez cette même
	    section <span class="emphasis"><em>et</em></span> celle qui suit.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-parallel-port-mode"></a>10.3.1.3. Paramétrer le mode de communication du port
	  parallèle</h4></div></div></div><p>Lorsque vous utilisez l'interface parallèle, vous
	  avez le choix entre deux modes de communication avec
	  l'imprimante: par interruption, ou par polling
	  (interrogation régulière ou scrutation).  Le
	  pilote d'imprimante générique (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>) de
	  FreeBSD utilise le système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppbus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppbus</span>(4)</span></a>, qui
	  contrôle le chipset du port via le pilote
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppc</span>(4)</span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le mode par <span class="emphasis"><em>interruption</em></span> est le
	      mode par défaut avec un noyau GENERIC.  De cette
	      manière, le système d'exploitation utilise
	      une ligne d'interruption (IRQ) pour déterminer si
	      l'imprimante est prête à recevoir des
	      données.</p></li><li class="listitem"><p>Le mode <span class="emphasis"><em>par scrutation</em></span> enjoint
	      au système d'exploitation d'interroger à
	      intervalles réguliers l'imprimante pour savoir si
	      elle est prête à recevoir d'autres
	      données.  Lorsqu'elle répond par
	      l'affirmative, le noyau lui en envoie plus.</p></li></ul></div><p>Le mode par interruption est en général
	  nettement plus rapide, mais consomme une précieuse
	  ligne d'interruption (IRQ).  On rapporte que certaines
	  imprimantes HP récentes ne fonctionneraient pas
	  correctement en mode par interruption, apparemment à
	  cause d'un problème (pas encore très bien
	  identifié) d'horloge.  Ces imprimantes
	  nécessitent le recours au mode par scrutation.
	  Utilisez celui des deux qui fonctionne.  Certaines
	  imprimantes fonctionnent dans les deux modes, mais
	  s'avèrent désagréablement lentes en
	  mode par interruption.</p><p>Vous pouvez choisir le mode de communication de deux
	  manières différentes: en configurant le noyau
	  ou en utilisant le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a>.</p><p><span class="emphasis"><em>Pour paramétrer le mode de
	  communication en configurant le noyau:</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Editez le fichier de configuration de votre noyau.
	      Cherchez une entrée <code class="literal">ppc0</code>.  Si
	      vous voulez configurer le deuxième port
	      parallèle, cherchez plutôt
	      <code class="literal">ppc1</code>.  Ou <code class="literal">ppc2</code>
	      pour le troisième, et ainsi de suite.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si vous souhaitez activer le mode par
		  interruption, éditez la ligne
		  suivante:</p><pre class="programlisting">hint.ppc.0.irq="<em class="replaceable"><code>N</code></em>"</pre><p>dans le fichier
		  <code class="filename">/boot/device.hints</code> et remplacez
		  <em class="replaceable"><code>N</code></em> par le numéro
		  d'IRQ approprié.  Le fichier de configuration
		  du noyau doit également comporter le pilote
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ppc</span>(4)</span></a>:</p><pre class="programlisting">device ppc</pre></li><li class="listitem"><p>Si vous souhaitez activer le mode par
		  scrutation, ôtez la ligne suivante de votre
		  fichier
		  <code class="filename">/boot/device.hints</code>:</p><pre class="programlisting">hint.ppc.0.irq="<em class="replaceable"><code>N</code></em>"</pre><p>Dans certains cas, positionner le port en mode
		  scrutation sous FreeBSD n'est pas suffisant.  La
		  plupart du temps cela vient du pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a>,
		  ce dernier étant capable de sonder et
		  d'attacher des périphériques, et donc
		  de contrôler le mode d'accès au port de
		  l'imprimante.  Vous devrez donc vérifier
		  votre configuration <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> pour
		  résoudre ce problème.</p></li></ul></div></li><li class="step"><p>Sauvegardez le fichier, puis configurez, compilez,
	      et installez le noyau avant de redémarrer.
	      Consultez la section <a class="link" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">configuration du noyau</a>
	      pour plus de détails.</p></li></ol></div><p><span class="emphasis"><em>Pour paramétrer le mode de
	  communication avec</em></span> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a>:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -i -d /dev/lptN</code></strong></pre><p>pour sélectionner le mode par interruption
	      pour
	      <code class="literal">lptN</code>.</p></li><li class="step"><p>Entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptcontrol -p -d /dev/lptN</code></strong></pre><p>pour sélectionner le mode par scrutation pour
	      <code class="literal">lptN</code>.</p></li></ol></div><p>Vous pouvez placer ces commandes dans votre fichier
	  <code class="filename">/etc/rc.local</code> pour sélectionner
	  le mode à chaque démarrage du système.
	  Consultez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lptcontrol</span>(8)</span></a> pour obtenir plus
	  d'informations.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-testing"></a>10.3.1.4. Vérifier la communication avec
	  l'imprimante</h4></div></div></div><p>Avant de passer à la configuration du
	  gestionnaire d'impression, vous devriez vous assurer que le
	  système d'exploitation fait parvenir avec
	  succès des données à l'imprimante.  Il
	  est beaucoup plus facile de déboguer
	  séparément la communication avec l'imprimante
	  et la configuration du gestionnaire d'impression.</p><p>Pour tester l'imprimante, nous allons lui envoyer du
	  texte.  Pour les imprimantes qui peuvent
	  immédiatement imprimer les caractères qui leur
	  sont envoyés, le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a> est
	  parfait: il génère les 96 caractères
	  ASCII imprimables sur 96 lignes.</p><a id="idp71843664" class="indexterm"></a><p>Pour une imprimante <span class="trademark">PostScript</span>® (ou basée sur un
	  autre langage), il va nous falloir un test plus
	  sophistiqué.  Un petit programme <span class="trademark">PostScript</span>®, tel
	  que celui qui suit, devrait suffire:</p><pre class="programlisting">%!PS
100 100 moveto 300 300 lineto stroke
310 310 moveto /Helvetica findfont 12 scalefont setfont
(Is this thing working?) show
showpage</pre><p>Le code <span class="trademark">PostScript</span>® ci-dessus peut être
	  placé dans un fichier et utilisé comme
	  indiqué dans les exemples qui apparaissent dans les
	  sections suivantes.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp71851344" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Lorsque ce document fait référence
	    à un langage d'imprimante, il suppose un langage
	    comme <span class="trademark">PostScript</span>®, et pas le PCL de Hewlett-Packard.
	    Quoique PCL dispose de fonctionnalités
	    intéressantes, il est possible de mélanger
	    du texte simple avec des séquences
	    d'échappement.  <span class="trademark">PostScript</span>® ne permet pas
	    d'imprimer du texte clair, c'est le type de langage
	    d'imprimante pour lequel nous devons prendre des mesures
	    particulières.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-checking-parallel"></a>10.3.1.4.1. Tester une imprimante parallèle</h5></div></div></div><a id="idp71854160" class="indexterm"></a><p>Cette section vous apprendra à vérifier
	    si FreeBSD peut communiquer avec une imprimante
	    connectée sur un port parallèle.</p><p><span class="emphasis"><em>Pour tester une imprimante connectée
	    sur un port parallèle:</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Passez en <code class="systemitem">root</code> avec
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.</p></li><li class="step"><p>Envoyez des données à
		l'imprimante.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si l'imprimante peut sortir du texte simple,
		    alors utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>.  Entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptest &gt; /dev/lptN</code></strong></pre><p>Où <em class="replaceable"><code>N</code></em> est le
		    numéro du port parallèle, en
		    commençant à zéro.</p></li><li class="listitem"><p>Si l'imprimante comprend le <span class="trademark">PostScript</span>® ou un
		    autre langage d'imprimante, alors envoyez lui un
		    petit programme.  Entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat &gt; /dev/lptN</code></strong></pre><p>Tapez ensuite le programme, ligne à
		    ligne et <span class="emphasis"><em>attentivement</em></span>, car
		    vous ne pouvez plus éditer une ligne une
		    fois que vous avez appuyé sur la touche
		    <code class="literal">Retour Chariot</code> ou
		    <code class="literal">Entrée</code>.  Une fois
		    terminé, faites
		    <code class="literal">CONTROL+D</code>, ou la combinaison
		    correspondant à votre fin de
		    fichier.</p><p>Une autre manière de procéder
		    est de placer le programme dans un fichier et
		    d'entrer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat fichier &gt; /dev/lptN</code></strong></pre><p>Où <em class="replaceable"><code>fichier</code></em>
		    désigne le nom du fichier que vous
		    désirez envoyer à
		    l'imprimante.</p></li></ul></div></li></ol></div><p>Vous devriez voir quelque chose s'imprimer.  Ne vous
	    inquiétez pas si l'apparence du texte n'est pas
	    satisfaisante; nous remédierons à ce genre
	    de soucis plus tard.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-checking-serial"></a>10.3.1.4.2. Tester une imprimante série</h5></div></div></div><a id="idp71874768" class="indexterm"></a><p>Dans cette section vous apprendrez à
	    vérifier si FreeBSD parvient à communiquer avec
	    une imprimante connectée à un port
	    série.</p><p><span class="emphasis"><em>Pour tester une imprimante connectée
	    sur un port série:</em></span></p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Passez en <code class="systemitem">root</code> avec
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.</p></li><li class="step"><p>Editez le fichier
		<code class="filename">/etc/remote</code>.  Ajoutez
		l'entrée suivante:</p><pre class="programlisting">printer:dv=/dev/<em class="replaceable"><code>port</code></em>:br#<em class="replaceable"><code>bps-rate</code></em>:pa=<em class="replaceable"><code>parity</code></em></pre><a id="idp71881808" class="indexterm"></a><a id="idp71882320" class="indexterm"></a><a id="idp71882832" class="indexterm"></a><p>Où <em class="replaceable"><code>port</code></em>
		représente le fichier de
		périphérique du port série
		(<code class="literal">ttyd0</code>, <code class="literal">ttyd1</code>,
		etc.), <em class="replaceable"><code>bps-rate</code></em>
		représente la vitesse en bits-par-seconde
		à laquelle l'imprimante communique, et
		<em class="replaceable"><code>parity</code></em> représente la
		parité réclamée par l'imprimante
		(<code class="literal">even</code> pour paire,
		<code class="literal">odd</code> pour impaire,
		<code class="literal">none</code> pour aucune, ou
		<code class="literal">zero</code> pour zéro).</p><p>Voici un exemple d'entrée pour une
		imprimante connectée à 19200 bps,
		sans parité, sur le troisième port
		série:</p><pre class="programlisting">printer:dv=/dev/ttyd2:br#19200:pa=none</pre></li><li class="step"><p>Connectez-vous à l'imprimante avec
	        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>.  Entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tip printer</code></strong></pre><p>Si cette étape ne fonctionne pas,
		éditez le fichier
		<code class="filename">/etc/remote</code> à nouveau et
		essayez d'utiliser
		<code class="filename">/dev/cuaaN</code>
		au lieu de
		<code class="filename">/dev/ttydN</code>.</p></li><li class="step"><p>Envoyez des données à
		l'imprimante.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si l'imprimante peut sortir du texte simple,
		    alors utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>.  Entrez:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>$lptest</code></strong></pre></li><li class="listitem"><p>Si l'imprimante comprend le <span class="trademark">PostScript</span>® ou
		    tout autre langage d'imprimante, envoyez-lui un
		    petit programme.  Entrez-le ligne à ligne
		    et <span class="emphasis"><em>très attentivement</em></span>,
		    dans la mesure où les touches
		    d'édition, comme retour-arrière,
		    peuvent revêtir une signification
		    particulière pour l'imprimante.  Vous
		    pourriez également avoir besoin d'un
		    caractère de fin de fichier
		    (<span class="quote">« <span class="quote">EOF</span> »</span>) particulier pour que
		    l'imprimante sache qu'elle a reçu tout le
		    programme.  Pour les imprimantes <span class="trademark">PostScript</span>®,
		    appuyez sur <code class="literal">CONTROL+D</code>.</p><p>Une autre manière de procéder
		    est de placer le programme dans un fichier et
		    d'entrer:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>&gt;fichier</code></strong></pre><p>Où <em class="replaceable"><code>fichier</code></em>
		    est le nom du fichier contenant le programme.
		    Après avoir envoyé le fichier avec
		    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tip</span>(1)</span></a>, appuyez sur la touche de fin de
		    fichier appropriée.</p></li></ul></div></li></ol></div><p>Vous devriez voir quelque chose s'imprimer.  Ne vous
	    inquiétez pas si l'apparence du texte n'est pas
	    satisfaisante; nous remédierons à ce genre
	    de soucis plus tard.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-printcap"></a>10.3.1.5. Mettre en place le gestionnaire d'impression: le
	  fichier <code class="filename">/etc/printcap</code></h4></div></div></div><p>A ce stade, votre imprimante doit être
	  branchée, votre noyau configuré pour
	  communiquer avec elle (si cela est nécessaire); et
	  vous avez réussi à faire parvenir des
	  données simples à l'imprimante.  Nous sommes
	  maintenant prêts à paramétrer
	  <span class="application">LPD</span> pour qu'il contrôle
	  l'accès à l'imprimante.</p><p><span class="application">LPD</span> se paramètre en
	  éditant le fichier
	  <code class="filename">/etc/printcap</code>.  Le gestionnaire
	  d'impression <span class="application">LPD</span> le lit à
	  chaque fois que le gestionnaire est solicité, donc
	  les mises à jour du fichier sont immédiatement
	  prises en compte.</p><a id="idp71914320" class="indexterm"></a><p>Le format du fichier <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">printcap</span>(5)</span></a> est explicite.
	  Utilisez votre éditeur favori pour modifier
	  <code class="filename">/etc/printcap</code>.  Le format est identique
	  aux autres fichiers de configuration comme
	  <code class="filename">/usr/share/misc/termcap</code> et
	  <code class="filename">/etc/remote</code>.  Pour obtenir des
	  informations complètes concernant ce format,
	  consultez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cgetent&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">cgetent</span>(3)</span></a>.</p><p>Le paramétrage simple du gestionnaire
	  d'impression s'effectue selon les étapes
	  suivantes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Choisissez un nom (et quelques alias
	      appropriés) pour l'imprimante, et placez-les dans
	      <code class="filename">/etc/printcap</code>; lisez la section
	      <a class="link" href="#printing-naming" title="10.3.1.5.1. Nommer l'imprimante">Nommer
	      l'imprimante</a> pour plus d'informations sur le
	      nommage.</p></li><li class="step"><a id="idp71921232" class="indexterm"></a><p>Désactivez les pages d'en-tête (elles
	      sont activées par défaut) en
	      insérant le paramètre
	      <code class="literal">sh</code>; lisez la section <a class="link" href="#printing-no-header-pages" title="10.3.1.5.2. Supprimer les pages d'en-tête">Supprimer les pages
	      d'en-tête</a> pour plus d'informations.</p></li><li class="step"><p>Créez un répertoire de file d'attente,
	      et précisez son chemin d'accès avec le
	      paramètre <code class="literal">sd</code>; lisez la section
	      <a class="link" href="#printing-spooldir" title="10.3.1.5.3. Créer le répertoire de file d'attente">Créer le
	      répertoire de fil d'attente</a> pour obtenir
	      plus d'informations.</p></li><li class="step"><p>Sélectionnez l'entrée
	      <code class="filename">dev</code> à utiliser pour
	      l'imprimante, et notez la dans
	      <code class="filename">/etc/printcap</code> avec le
	      paramètre <code class="literal">lp</code>; lisez la section
	      <a class="link" href="#printing-device" title="10.3.1.5.4. Identifier le périphérique d'imprimante">Identifier le
	      périphérique d'imprimante</a> pour
	      obtenir plus d'informations.  De plus, si l'imprimante
	      est reliée par un port série,
	      précisez les paramètres de communication
	      avec le paramètre <code class="literal">ms#</code>, qui est
	      détaillé dans la section <a class="link" href="#printing-commparam" title="10.3.1.5.5. Configurer les paramètres de communication du gestionnaire d'impression">Configurer les
	      paramètres de communication du gestionnaire
	      d'impression</a>.</p></li><li class="step"><p>Installez un filtre d'entrée sous forme de
	      fichier texte simple; lisez la section <a class="link" href="#printing-textfilter" title="10.3.1.5.6. Installer le filtre texte">Installer le filtre
	      texte</a> pour obtenir plus de détails.</p></li><li class="step"><p>Testez la configuration en imprimant quelque chose
	      avec la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>.  Vous trouverez plus de
	      détails dans les sections <a class="link" href="#printing-trying" title="10.3.1.5.8. Tester la configuration">Tester l'impression</a> et
	      <a class="link" href="#printing-troubleshooting" title="10.7. Troubleshooting ** Traduction en Cours **">Résolution des
	      problèmes</a>.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les imprimantes basées sur un langage d'impression,
	    telles les imprimantes <span class="trademark">PostScript</span>®, ne peuvent imprimer
	    du texte simple directement.  La configuration simple
	    esquissée ci-dessus et détaillée dans
	    les sections suivantes présuppose que si vous
	    installez ce genre d'imprimante vous n'imprimerez que des
	    fichiers qu'elle peut comprendre.</p></div><p>Les utilisateurs s'attendent souvent à pouvoir
	  imprimer du texte simple sur n'importe laquelle des
	  imprimante installées sur votre système.  Les
	  applications qui s'en remettent à
	  <span class="application">LPD</span> pour imprimer s'y attendent
	  en général elles aussi.  Si vous installez ce
	  genre d'imprimante et désirez pouvoir imprimer
	  à la fois des travaux dans le langage de l'imprimante
	  <span class="emphasis"><em>et</em></span> des travaux en texte simple, vous
	  êtes instamment prié d'ajouter une étape
	  supplémentaire à la configuration simple
	  esquissée ci-dessus: installez un programme de
	  conversion automatique texte simple vers <span class="trademark">PostScript</span>® (ou
	  tout autre langage d'imprimante).  La section <a class="link" href="#printing-advanced-if-conversion" title="10.4.1.2. Gérer les travaux d'impression de texte brut sur des imprimantes PostScript®">Prendre en charge
	  des travaux texte sur des imprimantes <span class="trademark">PostScript</span>®</a>
	  vous apprendra à le faire.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-naming"></a>10.3.1.5.1. Nommer l'imprimante</h5></div></div></div><p>La première étape (facile) est de
	    choisir un nom pour l'imprimante.  Que vous choisissiez un
	    nom fonctionnel ou fantaisiste n'a aucune importance
	    puisque vous pouvez également fournir une
	    série d'alias.</p><p>Au moins l'une des imprimantes définies dans le
	    fichier <code class="filename">/etc/printcap</code> devrait avoir
	    pour alias <code class="literal">lp</code>.  C'est le nom de
	    l'imprimante par défaut.  Si les utilisateurs n'ont
	    pas positionné la variable d'environnement
	    <code class="envar">PRINTER</code> et ne spécifient pas le nom
	    d'une imprimante lorsqu'ils utilisent une ligne de
	    commande relative à <span class="application">LPD</span>,
	    <code class="literal">lp</code> sera l'imprimante par défaut
	    utilisée.</p><p>Par ailleurs, l'usage commun veut que le dernier alias
	    d'une imprimante en soit une description complète,
	    en incluant le fabricant et le modèle.</p><p>Une fois le nom et des alias communs choisis,
	    placez-les dans le fichier
	    <code class="filename">/etc/printcap</code>.  Le nom de
	    l'imprimante devrait commencer dans la colonne la plus
	    à gauche.  Séparez chaque alias par une
	    barre verticale et mettez le caractère deux-points
	    après le dernier alias.</p><p>Dans l'exemple suivant, nous commençons avec le
	    squelette d'un <code class="filename">/etc/printcap</code> qui
	    définit deux imprimantes (une Diablo 630 et une
	    imprimante <span class="trademark">PostScript</span>® laser Panasonic KX-P4455):</p><pre class="programlisting">#
#  /etc/printcap for host rose
#
rattan|line|diablo|lp|Diablo 630 Line Printer:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:</pre><p>Dans cet exemple, la première imprimante se
	    nomme <code class="literal">rattan</code> et possède les
	    alias suivants: <code class="literal">line</code>,
	    <code class="literal">diablo</code>, <code class="literal">lp</code> et
	    <code class="literal">Diablo 630 Line Printer</code>.  Puisque
	    l'alias <code class="literal">lp</code> lui est attribué,
	    elle est également l'imprimante par défaut.
	    La seconde s'appelle <code class="literal">bamboo</code> et
	    possède les alias suivants: <code class="literal">ps</code>,
	    <code class="literal">PS</code>, <code class="literal">S</code>,
	    <code class="literal">panasonic</code> et <code class="literal">Panasonic
	    KX-P4455 PostScript v51.4</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-no-header-pages"></a>10.3.1.5.2. Supprimer les pages d'en-tête</h5></div></div></div><a id="idp71965392" class="indexterm"></a><p>Par défaut, le gestionnaire d'impression
	    <span class="application">LPD</span> imprime une <span class="emphasis"><em>page
	    d'en-tête</em></span> pour chaque impression.
	    Celle-ci mentionne le nom de l'utilisateur qui a
	    demandé l'impression, la machine qui l'a
	    envoyé, et le nom de l'impression, en grands et
	    jolis caractères.  Malheureusement, tout ce texte
	    supplémentaire parasite le débogage d'une
	    configuration simple de l'imprimante, aussi
	    supprimerons-nous ces pages d'en-têtes.</p><p>Pour cela, ajoutez le paramètre
	    <code class="literal">sh</code> à l'entrée de
	    l'imprimante dans <code class="filename">/etc/printcap</code>.
	    Voici un exemple de <code class="filename">/etc/printcap</code>
	    où <code class="literal">sh</code> a été
	    ajouté:</p><pre class="programlisting">#
#  /etc/printcap for host rose - no header pages anywhere
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:</pre><p>Observez la façon dont nous avons
	    respecté le format correct: la première
	    ligne commence dans la colonne la plus à gauche, et
	    les lignes suivantes sont indentées.  Toutes les
	    lignes d'une entrée sauf la dernière se
	    terminent par un antislash.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-spooldir"></a>10.3.1.5.3. Créer le répertoire de file
	    d'attente</h5></div></div></div><a id="idp71971408" class="indexterm"></a><a id="idp71971920" class="indexterm"></a><p>La prochaine étape dans la configuration simple
	    du gestionnaire d'impression consiste à
	    créer un <span class="emphasis"><em>répertoire de file
	    d'attente</em></span>, c'est à dire un
	    répertoire où les travaux vont demeurer
	    jusqu'à ce qu'ils soient imprimés, et
	    où un certain nombre d'autres fichiers
	    nécessaires au gestionnaire d'impression prennent
	    place.</p><p>A cause de la nature variable des répertoires
	    de file d'attente, il est d'usage de les placer dans
	    <code class="filename">/var/spool</code>.  Il n'est pas non plus
	    nécessaire de sauvegarder leur contenu.  Les
	    recréer est aussi simple que de faire un
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkdir&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mkdir</span>(1)</span></a>.</p><p>Il est également d'usage de créer le
	    répertoire avec un nom identique à celui de
	    l'imprimante, comme dans l'exemple ci-dessous:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/nom-de-l-imprimante</code></strong></pre><p>Toutefois, si votre réseau comporte beaucoup
	    d'imprimantes, vous pouvez préférer placer
	    les répertoires de file d'attente dans un unique
	    répertoire que vous réserverez à
	    l'impression avec <span class="application">LPD</span>.  C'est
	    ce que nous allons faire pour les deux imprimantes de
	    notre exemple, <code class="literal">rattan</code> et
	    <code class="literal">bamboo</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/spool/lpd/bamboo</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si la confidentialité des travaux
	      imprimés par les utilisateurs vous importe, vous
	      souhaiterez certainement protéger le
	      répertoire de file d'attente afin qu'il ne soit
	      pas accessible par tout le monde.  Les
	      répertoires de file d'attente doivent appartenir,
	      être accessibles en lecture et écriture et
	      pouvoir être parcourus par l'utilisateur
	      <code class="systemitem">daemon</code> et le groupe
	      <code class="systemitem">daemon</code>, et personne d'autre.
	      C'est ce que nous allons faire pour les deux imprimantes
	      de notre exemple:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/rattan</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/bamboo</code></strong></pre></div><p>Pour finir, vous devez avertir
	    <span class="application">LPD</span> de l'existence de ces
	    répertoires en utilisant le fichier
	    <code class="filename">/etc/printcap</code>.  Vous spécifiez
	    le chemin du répertoire file d'attente avec le
	    paramètre <code class="literal">sd</code>:</p><pre class="programlisting">#
#  /etc/printcap for host rose - added spooling directories
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:</pre><p>Notez que le nom de l'imprimante commence dans la
	    première colonne mais que toutes les autres
	    entrées décrivant l'imprimante doivent
	    être indentées et que chaque fin de ligne
	    doit être protégée par un
	    antislash.</p><p>Si vous ne précisez pas de répertoire de
	    file d'attente avec <code class="literal">sd</code>, le gestionnaire
	    d'impression utilisera <code class="filename">/var/spool/lpd</code>
	    par défaut.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-device"></a>10.3.1.5.4. Identifier le périphérique
	    d'imprimante</h5></div></div></div><p>Dans la section Entrées des
	    périphériques nous avons identifié
	    l'entrée du répertoire
	    <code class="filename">/dev</code> que FreeBSD utiliserait pour
	    communiquer avec l'imprimante.  Maintenant, nous allons
	    passer cette information à
	    <span class="application">LPD</span>.  Quand le gestionnaire
	    d'impression aura une impression à effectuer, il
	    ouvrira le périphérique
	    spécifié au nom du programme de filtre (qui
	    est responsable de la transmission des données
	    à l'imprimante).</p><p>Positionnez l'entrée pour le chemin
	    d'accès <code class="filename">/dev</code> dans le fichier
	    <code class="filename">/etc/printcap</code> en utilisant le
	    paramètre <code class="literal">lp</code>.</p><p>Dans notre exemple, supposons que
	    <code class="literal">rattan</code> est sur le premier port
	    parallèle, et que <code class="literal">bamboo</code> est sur
	    un sixième port série; voici les ajouts
	    à apporter à
	    <code class="filename">/etc/printcap</code>:</p><pre class="programlisting">#
#  /etc/printcap for host rose - identified what devices to use
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:</pre><p>Si dans votre <code class="filename">/etc/printcap</code> vous
	    ne précisez pas le paramètre
	    <code class="literal">lp</code> pour une imprimante,
	    <span class="application">LPD</span> utilisera
	    <code class="filename">/dev/lp</code> par défaut.  A l'heure
	    actuelle, il n'existe pas d'entrée
	    <code class="filename">/dev/lp</code> sous FreeBSD.</p><p>Si l'imprimante que vous êtes en train
	    d'installer est connectée à un port
	    parallèle, vous pouvez directement vous rendre
	    à la section <a class="link" href="#printing-textfilter" title="10.3.1.5.6. Installer le filtre texte">Installer le filtre
	    texte</a>.  Sinon, assurez-vous de suivre les
	    instructions de la section qui suit.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-commparam"></a>10.3.1.5.5. Configurer les paramètres de communication du
	    gestionnaire d'impression</h5></div></div></div><a id="idp72014800" class="indexterm"></a><p>Pour les imprimantes connectées au port
	    série, <span class="application">LPD</span> peut
	    configurer la vitesse en bps, la parité, et
	    d'autres paramètres de communication série,
	    pour le compte du programme de filtre qui envoie les
	    données à l'imprimante.  C'est avantageux
	    dans la mesure où:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cela vous laisse essayer divers paramètres
		simplement en éditant le fichier
		<code class="filename">/etc/printcap</code>; vous n'avez pas
		besoin de recompiler le programme de filtre.</p></li><li class="listitem"><p>Cela permet au gestionnaire d'impression
		d'utiliser le même programme pour de multiples
		imprimantes qui peuvent avoir des paramètres de
		communication série différents.</p></li></ul></div><p>Les paramètres
	    <code class="filename">/etc/printcap</code> suivants
	    contrôlent les options de communication série
	    pour le périphérique spécifié
	    dans le paramètre <code class="literal">lp</code>:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">br#vitesse-bps</code></span></dt><dd><p>Positionne la vitesse de transmission du
		  périphérique à
		  <em class="replaceable"><code>vitesse-bps</code></em>, où
		  <em class="replaceable"><code>vitesse-bps</code></em> peut prendre
		  l'une des valeurs suivantes: 50, 75, 110, 134, 150,
		  200, 300, 600, 1200, 1800, 2400, 4800, 9600, 19200,
		  38400, 57600, ou 115200 bits par seconde.</p></dd><dt><span class="term"><code class="literal">ms#stty-mode</code></span></dt><dd><p>Positionne les options du
		  périphérique de terminal après
		  l'avoir ouvert.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> présente les
		  options disponibles.</p></dd></dl></div><p>Quand <span class="application">LPD</span> ouvre le
	    périphérique spécifié par le
	    paramètre <code class="literal">lp</code>, il positionne les
	    caractéristiques de ce périphérique
	    aux valeurs précisées par le
	    paramètre <code class="literal">ms#</code>.  Les modes
	    suivants, détaillés dans <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> sont
	    particulièrement intéressants:
	    <code class="literal">parenb</code>, <code class="literal">parodd</code>,
	    <code class="literal">cs5</code>, <code class="literal">cs6</code>,
	    <code class="literal">cs7</code>, <code class="literal">cs8</code>,
	    <code class="literal">cstopb</code>, <code class="literal">crtscts</code>, et
	    <code class="literal">ixon</code>.</p><p>Peaufinons notre exemple pour l'imprimante qui est
	    connectée au sixième port série. Nous
	    allons paramétrer sa vitesse à 38400 bps.
	    Quant au mode, nous allons spécifier aucune
	    parité avec <code class="literal">-parenb</code>, des
	    caractères 8 bits avec <code class="literal">cs8</code>,
	    aucun contrôle modem avec <code class="literal">clocal</code>
	    et un contrôle de flux matériel avec
	    <code class="literal">crtscts</code>:</p><pre class="programlisting">bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-textfilter"></a>10.3.1.5.6. Installer le filtre texte</h5></div></div></div><a id="idp72047056" class="indexterm"></a><p>Nous sommes maintenant en mesure de dire à
	    <span class="application">LPD</span> quel filtre texte utiliser
	    pour envoyer les travaux à l'imprimante.  Un
	    <span class="emphasis"><em>filtre texte</em></span>, également connu
	    sous le nom de <span class="emphasis"><em>filtre
	    d'entrée</em></span>, est un programme que
	    <span class="application">LPD</span> lance lorsqu'il a une
	    impression à effectuer.  Lorsque
	    <span class="application">LPD</span> exécute le filtre
	    texte pour une imprimante, il redirige l'entrée
	    standard du filtre sur le travail d'impression, et la
	    sortie standard sur le fichier spécial de
	    périphérique spécifié par le
	    paramètre <code class="literal">lp</code>.  On attend du
	    filtre qu'il lise le travail d'impression sur son
	    entrée standard, effectue les transformations
	    nécessaires pour l'imprimante, et écrive le
	    résultat sur sa sortie standard, qui sera
	    imprimée.  Pour plus d'informations sur les filtres
	    texte, lisez la section <a class="link" href="#printing-advanced-filters" title="10.4.1.1. Fonctionnement des filtres">Filtres</a>.</p><p>Pour notre configuration simple de l'imprimante, le
	    filtre texte peut être une petite procédure
	    d'interpréteur de commandes qui ne fera
	    qu'exécuter <code class="command">/bin/cat</code> pour
	    envoyer le travail d'impression à l'imprimante.  Un
	    autre filtre est livré avec FreeBSD, nommé
	    <code class="filename">lpf</code>, qui se charge de faire des
	    suppressions arrière et des soulignements pour les
	    imprimantes qui ne sauraient pas gérer correctement
	    ce genre de flux de caractères.  Et bien sûr,
	    vous pouvez utiliser un autre filtre, quel qu'il soit.  Le
	    filtre <code class="filename">lpf</code> est détaillé
	    dans la section <a class="link" href="#printing-advanced-lpf" title="10.4.1.6. lpf: un filtre texte">lpf: un filtre
	    texte</a>.</p><p>Tout d'abord, composons le filtre
	    <code class="filename">/usr/local/libexec/if-simple</code> qui sera
	    un simple filtre texte.  Ecrivez ceci avec votre
	    éditeur de texte favori:</p><pre class="programlisting">#!/bin/sh
#
# if-simple - Simple text input filter for lpd
# Installed in /usr/local/libexec/if-simple
#
# Simply copies stdin to stdout.  Ignores all filter arguments.

/bin/cat &amp;&amp; exit 0
exit 2</pre><p>Rendez le fichier exécutable:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 555 /usr/local/libexec/if-simple</code></strong></pre><p>Et avertissez <span class="application">LPD</span> qu'il
	    doit l'utiliser, en renseignant le paramètre
	    <code class="literal">if</code> dans
	    <code class="filename">/etc/printcap</code>.  Nous l'ajouterons aux
	    deux imprimantes utilisées jusqu'ici dans notre
	    <code class="filename">/etc/printcap</code> d'exemple:</p><pre class="programlisting">#
#  /etc/printcap for host rose - added text filter
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\ :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:\
        :if=/usr/local/libexec/if-simple:</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous trouverez une copie du filtre
	      <code class="filename">if-simple</code> dans le répertoire
	      <code class="filename">/usr/share/examples/printing</code>.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72064208"></a>10.3.1.5.7. Lancer <span class="application">LPD</span></h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpd</span>(8)</span></a> se lance depuis
	    <code class="filename">/etc/rc</code>, avec la variable de
	    contrôle <code class="literal">lpd_enable</code>.  Cette
	    variable a <code class="literal">NO</code> pour valeur par
	    défaut.  Si vous ne l'avez pas déjà
	    fait, ajoutez la ligne:</p><pre class="programlisting">lpd_enable="YES"</pre><p>à votre <code class="filename">/etc/rc.conf</code>, puis
	    relancez votre machine, ou lancez simplement
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">lpd</span>(8)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lpd</code></strong></pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-trying"></a>10.3.1.5.8. Tester la configuration</h5></div></div></div><p>Vous avez achevé la configuration simple de
	    <span class="application">LPD</span>.  Malheureusement, les
	    félicitations ne sont pas encore à l'ordre
	    du jour, puisque nous devons encore tester la
	    configuration et résoudre tout problème.
	    Pour tester la configuration, essayez d'imprimer quelque
	    chose.  Pour imprimer avec le système
	    <span class="application">LPD</span>, vous devez utiliser la
	    commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>, qui soumet un travail
	    d'impression.</p><p>Vous pouvez combiner <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> au programme
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>, que nous avons présenté
	    à la section <a class="link" href="#printing-testing" title="10.3.1.4. Vérifier la communication avec l'imprimante">Vérifier la
	    communication avec l'imprimante</a>, pour produire du
	    texte de test.</p><p><span class="emphasis"><em>Pour tester la configuration simple de
	    <span class="application">LPD</span></em></span></p><p>Entrez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lptest 20 5 | lpr -Pnom-de-l-imprimante</code></strong></pre><p>Où
	    <em class="replaceable"><code>nom-de-l-imprimante</code></em>
	    représente le nom (ou l'alias) d'une imprimante tel
	    que spécifié dans
	    <code class="filename">/etc/printcap</code>.  Pour tester
	    l'imprimante par défaut, tapez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> sans
	    aucun argument <code class="option">-P</code>.  Encore une fois, si
	    vous faites ce test avec une imprimante qui s'attend
	    à recevoir du <span class="trademark">PostScript</span>®, envoyez un programme
	    <span class="trademark">PostScript</span>® au lieu d'employer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>.  Vous
	    pouvez le faire en plaçant le programme dans un
	    fichier et en entrant <code class="command">lpr
	    fichier</code>.</p><p>Pour une imprimante <span class="trademark">PostScript</span>®, vous devriez obtenir
	    le résultat du programme.  Si vous utilisez
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>, alors votre sortie devrait ressembler
	    à ça:</p><pre class="programlisting">!"#$%&amp;'()*+,-./01234
"#$%&amp;'()*+,-./012345
#$%&amp;'()*+,-./0123456
$%&amp;'()*+,-./01234567
%&amp;'()*+,-./012345678</pre><p>Pour tester l'imprimante plus encore,
	    téléchargez des programmes (pour les
	    imprimantes basées sur un langage
	    spécifique) plus longs, ou lancez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lptest&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lptest</span>(1)</span></a>
	    avec des arguments différents.  Par exemple,
	    <code class="command">lptest 80 60</code> produira 60 lignes de 80
	    caractères chacune.</p><p>Si l'impression ne fonctionne pas, lisez la section
	    <a class="link" href="#printing-troubleshooting" title="10.7. Troubleshooting ** Traduction en Cours **">Résolution
	    des problèmes</a>.</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-advanced"></a>10.4. Configuration avancée de l'imprimante</h2></div></div></div><p>Cette section décrit les filtres à utiliser
      pour imprimer des fichiers au formatage particulier, des pages
      d'en-tête, pour imprimer en réseau, et pour
      restreindre et comptabiliser l'utilisation de
      l'imprimante.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-filter-intro"></a>10.4.1. Les filtres</h3></div></div></div><a id="idp72097488" class="indexterm"></a><p>Bien que <span class="application">LPD</span> gère les
	protocoles réseaux, les files d'attente, le
	contrôle d'accès et d'autres aspects de
	l'impression, la plus grande partie du
	<span class="emphasis"><em>véritable</em></span> travail intervient dans
	les <span class="emphasis"><em>filtres</em></span>.  Les filtres sont des
	programmes qui communiquent avec l'imprimante et gèrent
	ses dépendances matérielles ainsi que ses
	besoins particuliers.  Dans la configuration simple de
	l'imprimante, nous avons installé un filtre texte
	simple&#8212; un filtre particulièrement basique qui
	devrait fonctionner avec la plupart des imprimantes (voir la
	section <a class="link" href="#printing-textfilter" title="10.3.1.5.6. Installer le filtre texte">Installer le
	filtre texte</a>).</p><p>Toutefois, afin de profiter de la conversion de format, de
	la comptabilisation de l'utilisation de l'imprimante, de
	particularités matérielles, et ainsi de suite,
	il vous faut comprendre le fonctionnement des filtres.  En
	dernier ressort, il incombera au filtre de gérer ces
	aspects.  Et la mauvaise nouvelle, c'est que la plupart du
	temps, c'est <span class="emphasis"><em>vous</em></span> qui devrez produire ces
	filtres vous-même.  La bonne nouvelle, c'est que
	beaucoup existent déjà et que, sinon, ils sont
	en général assez faciles à
	écrire.</p><p>Par ailleurs, il en est un livré avec FreeBSD,
	<code class="filename">/usr/libexec/lpr/lpf</code>, qui fonctionne avec
	beaucoup d'imprimantes capables d'imprimer du texte brut.  (Il
	gère les retours arrière et les tabulations dans
	le fichier, effectue une comptabilisation, mais c'est à
	peu près tout).  Vous trouverez également
	d'autres filtres et composants de filtres dans le catalogue
	des logiciels portés de FreeBSD.</p><p>Voici ce que vous trouverez dans cette section:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La section
	    <a class="link" href="#printing-advanced-filters" title="10.4.1.1. Fonctionnement des filtres">Fonctionnement
	    des filtres</a> tâche de donner une vue
	    générale du rôle des filtres dans le
	    processus d'impression.  Il vous faut lire cette section
	    pour comprendre ce qui se passe <span class="quote">« <span class="quote">sous le
	    capot</span> »</span> lorsque <span class="application">LPD</span>
	    utilise des filtres.  Cette connaissance vous permettra
	    d'anticiper et de résoudre les problèmes que
	    vous pourriez rencontrer quand vous installerez de plus en
	    plus de filtres pour chacune de vos imprimantes.</p></li><li class="listitem"><p><span class="application">LPD</span> s'attend à ce
	    que toutes les imprimantes sachent imprimer du texte brut
	    par défaut.  Cela pose un problème pour les
	    imprimantes <span class="trademark">PostScript</span>® (ou les imprimantes basées
	    sur un autre langage) qui ne peut pas imprimer du texte
	    brut directement.  La section <a class="link" href="#printing-advanced-if-conversion" title="10.4.1.2. Gérer les travaux d'impression de texte brut sur des imprimantes PostScript®">Gérer les
	    travaux d'impression de texte brut sur des imprimantes
	    <span class="trademark">PostScript</span>®</a> vous indique la marche à suivre
	    pour résoudre ce problème.  Vous devrez lire
	    cette section si vous avez une imprimante
	    <span class="trademark">PostScript</span>®.</p></li><li class="listitem"><p><span class="trademark">PostScript</span>® est un format de sortie courant pour
	    beaucoup d'applications.  Certaines personnes
	    écrivent même du code <span class="trademark">PostScript</span>®
	    directement.  Malheureusement, les imprimantes
	    <span class="trademark">PostScript</span>® sont onéreuses.  La section <a class="link" href="#printing-advanced-ps" title="10.4.1.3. Emuler du PostScript® sur les imprimantes non-PostScript®">Emuler du <span class="trademark">PostScript</span>® sur
	    les imprimantes non-<span class="trademark">PostScript</span>®</a> vous indiquera
	    comment modifier un filtre texte pour qu'une imprimante
	    <span class="emphasis"><em>non-<span class="trademark">PostScript</span>®</em></span> accepte et imprime
	    du <span class="trademark">PostScript</span>®.  Vous devrez lire cette section si vous
	    ne disposez pas d'une imprimante <span class="trademark">PostScript</span>®.</p></li><li class="listitem"><p>La section
	    <a class="link" href="#printing-advanced-convfilters" title="10.4.1.4. Filtres de conversion">Filtres de
	    conversion</a> vous apprendra à automatiser la
	    conversion de formats de fichiers spécifiques,
	    comme des graphiques ou des données de composition,
	    en formats compréhensibles par l'imprimante.
	    Après avoir lu cette section, vous serez en mesure
	    de configurer vos imprimantes de telle sorte que vos
	    utilisateurs pourront entrer la commande <code class="command">lpr
	    -t</code> pour imprimer du troff, ou <code class="command">lpr
	    -d</code> pour imprimer le format DVI produit par
	    <span class="application">TeX</span>, ou <code class="command">lpr -v</code> pour imprimer des
	    images en mode point, etc.  Nous recommandons la lecture
	    de cette section.</p></li><li class="listitem"><p>La section <a class="link" href="#printing-advanced-of" title="10.4.1.5. Filtres de sortie">Filtres de sortie</a>
	    révèle tout d'une fonctionnalité peu
	    utilisée de <span class="application">LPD</span>: les
	    filtres de sortie.  A moins que vous n'imprimiez des pages
	    d'en-têtes (voir la section <a class="link" href="#printing-advanced-header-pages" title="10.4.2. Pages d'en-tête">Pages
	    d'en-tête</a>), vous pouvez probablement
	    complètement ignorer cette section.</p></li><li class="listitem"><p>La section <a class="link" href="#printing-advanced-lpf" title="10.4.1.6. lpf: un filtre texte">lpf:
	    un filtre texte</a> détaille
	    <code class="command">lpf</code>, un filtre texte destiné aux
	    imprimantes en ligne (et aux imprimantes laser se
	    comportant comme telles) plutôt complet
	    malgré sa simplicité, et livré avec
	    FreeBSD.  Si vous avez besoin de mettre rapidement en place
	    la comptabilisation de l'utilisation de l'imprimante pour
	    du texte brut, ou si vous avez une imprimante qui fume
	    lorsqu'elle voit passer des caractères de retour
	    arrière, vous devez vraiment penser à
	    <code class="command">lpf</code>.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Une copie des différents scripts
	  présentés ci-dessous se trouve dans le
	  répertoire <code class="filename">/usr/share/examples/printing</code>.
	</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-filters"></a>10.4.1.1. Fonctionnement des filtres</h4></div></div></div><p>Comme expliqué précédemment, un
	  filtre est un programme exécutable lancé par
	  <span class="application">LPD</span> pour gérer la partie
	  de la communication avec l'imprimante qui est
	  dépendante du périphérique.</p><p>Lorsque <span class="application">LPD</span> veut imprimer un
	  fichier d'un travail d'impression, il lance un programme de
	  filtre.  Il redirige l'entrée standard du filtre sur
	  le fichier à imprimer, sa sortie standard vers
	  l'imprimante, et l'erreur standard vers le fichier journal
	  des erreurs (spécifié dans le paramètre
	  <code class="literal">lf</code> du fichier
	  <code class="filename">/etc/printcap</code>, ou
	  <code class="filename">/dev/console</code> par défaut).</p><a id="idp72137808" class="indexterm"></a><p>Le filtre lancé par
	  <span class="application">LPD</span> ainsi que les
	  paramètres qui lui sont donnés
	  dépendent de ce qui est placé dans le fichier
	  <code class="filename">/etc/printcap</code> et des paramètres
	  que l'utilisateur a passé sur la ligne de commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> pour ce travail d'impression.  Par exemple, si
	  l'utilisateur a entré <code class="command">lpr -t</code>,
	  <span class="application">LPD</span> aurait lancé le filtre
	  troff, précisé par la paramètre
	  <code class="literal">tf</code> pour l'imprimante de destination.  Si
	  l'utilisateur veut imprimer du texte brut, il lancerait le
	  filtre <code class="literal">if</code> (c'est vrai la plupart du
	  temps: lisez la section <a class="link" href="#printing-advanced-of" title="10.4.1.5. Filtres de sortie">Filtres de sortie</a> pour
	  plus de détails).</p><p>Il existe trois types de filtres que vous pouvez
	  spécifier dans
	  <code class="filename">/etc/printcap</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le <span class="emphasis"><em>filtre texte</em></span>,
	      confusément appelé <span class="emphasis"><em>filtre
	      d'entrée</em></span> dans la documentation
	      <span class="application">LPD</span>, gère l'impression
	      de texte classique.  Considérez-le comme le
	      filtre par défaut.
	      <span class="application">LPD</span> s'attend à ce que
	      toutes les imprimantes sachent imprimer du texte brut
	      par défaut, et c'est au filtre texte de s'assurer
	      que les retours arrière, tabulations et autres
	      caractères spéciaux ne trompent pas
	      l'imprimante.  Si vous êtes dans un environnement
	      où il vous faut rendre compte de l'utilisation de
	      l'imprimante, le filtre texte doit également
	      comptabiliser les pages imprimées,
	      généralement en comptant le nombre de
	      lignes imprimées et en le comparant avec le
	      nombre de lignes par page supporté par
	      l'imprimante.  Le filtre texte est exécuté
	      avec la liste de paramètres suivante:</p><div class="cmdsynopsis"><p><code class="command">nom_du_filtre</code> [-c]  -w
		<em class="replaceable"><code>largeur</code></em>   -l
		<em class="replaceable"><code>hauteur</code></em>   -i
		<em class="replaceable"><code>indentation</code></em>   -n
		<em class="replaceable"><code>utilisateur</code></em>   -h
		<em class="replaceable"><code>machine</code></em>   <em class="replaceable"><code>fichier_comptabilité</code></em> </p></div><p>où</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>apparaît si le travail d'impression est
		    lancé par la commande <code class="command">lpr
		    -l</code></p></dd><dt><span class="term"><em class="replaceable"><code>largeur</code></em></span></dt><dd><p>est la valeur du paramètre
		    <code class="literal">pw</code> (<span class="quote">« <span class="quote">page width</span> »</span>,
		    pour <span class="quote">« <span class="quote">largeur de page</span> »</span>)
		    spécifié dans
		    <code class="filename">/etc/printcap</code>, et
		    possédant la valeur par défaut
		    132.</p></dd><dt><span class="term"><em class="replaceable"><code>hauteur</code></em></span></dt><dd><p>est la valeur du paramètre
		    <code class="literal">pl</code> (<span class="quote">« <span class="quote">page length</span> »</span>,
		    pour <span class="quote">« <span class="quote">hauteur de page</span> »</span>), par
		    défaut: 66.</p></dd><dt><span class="term"><em class="replaceable"><code>indentation</code></em></span></dt><dd><p>est le nombre d'indentations
		    inséré par <code class="command">lpr
		    -i</code>, par défaut: 0.</p></dd><dt><span class="term"><em class="replaceable"><code>utilisateur</code></em></span></dt><dd><p>est le nom du compte de l'utilisateur
		    imprimant le fichier.</p></dd><dt><span class="term"><em class="replaceable"><code>machine</code></em></span></dt><dd><p>est le nom de la machine depuis
		    laquelle le travail d'impression a
		    été soumis.</p></dd><dt><span class="term"><em class="replaceable"><code>fichier_comptabilité</code></em></span></dt><dd><p>est le nom du fichier de comptabilisation
		    spécifié par le paramètre
		    <code class="literal">af</code>.</p></dd></dl></div></li><li class="listitem"><a id="idp72184912" class="indexterm"></a><p>Un <span class="emphasis"><em>filtre de conversion</em></span>
	      convertit un format de fichier spécifique en un
	      autre que l'imprimante saura imprimer sur papier.  Par
	      exemple, des données de composition ditroff ne
	      peuvent être imprimées directement, mais il
	      vous est possible d'installer un filtre de conversion
	      ditroff afin de convertir ces données ditroff en
	      une forme que l'imprimante sait ingérer et
	      imprimer.  La section <a class="link" href="#printing-advanced-convfilters" title="10.4.1.4. Filtres de conversion">Filtres de
	      conversion</a> vous dira tout sur ce sujet.  Les
	      filtres de conversion doivent également tenir des
	      statistiques, si vous avez besoin de comptabiliser les
	      impressions.  Les filtres de conversion sont
	      lancés avec les paramètres
	      suivants:</p><div class="cmdsynopsis"><p><code class="command">nom-du-filtre</code>  -x
		<em class="replaceable"><code>largeur-en-pixels</code></em>   -y
		<em class="replaceable"><code>hauteur-en-pixels</code></em>   -n
		<em class="replaceable"><code>login</code></em>   -h
		<em class="replaceable"><code>hôte</code></em>   <em class="replaceable"><code>fichier_comptabilité</code></em> </p></div><p>où
	      <em class="replaceable"><code>largeur-en-pixels</code></em> est la
	      valeur du paramètre <code class="literal">px</code> (0 par
	      défaut) et
	      <em class="replaceable"><code>hauteur-en-pixels</code></em> est la
	      valeur du paramètre <code class="literal">py</code> (0 par
	      défaut).</p></li><li class="listitem"><p>Le <span class="emphasis"><em>filtre de sortie</em></span> n'est
	      utilisé que s'il n'y a pas de filtre texte, ou si
	      les pages d'en-tête ont été
	      activées.  D'après notre
	      expérience, les filtres de sortie sont rarement
	      employés.  La section <a class="link" href="#printing-advanced-of" title="10.4.1.5. Filtres de sortie">Filtres de sortie</a>
	      les détaillera.  Un filtre de sortie ne prend que
	      deux paramètres:</p><div class="cmdsynopsis"><p><code class="command">nom-du-filtre</code>  -w
		<em class="replaceable"><code>largeur</code></em>   -l
		<em class="replaceable"><code>hauteur</code></em> </p></div><p>qui sont identiques aux paramètres
	      <code class="option">-w</code> et <code class="option">-l</code> des filtres
	      textes.</p></li></ul></div><p>Les filtres doivent également
	  <span class="emphasis"><em>retourner</em></span> avec le code de retour
	  suivant:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">exit 0</span></dt><dd><p>Si le filtre a imprimé avec succès
		le fichier.</p></dd><dt><span class="term">exit 1</span></dt><dd><p>Si le filtre n'a pu imprimer le fichier, mais
		désire que <span class="application">LPD</span>
		essaie de l'imprimer à nouveau.
		<span class="application">LPD</span> relancera un filtre
		s'il retourne avec ce code.</p></dd><dt><span class="term">exit 2</span></dt><dd><p>Si le filtre n'a pu imprimer le fichier et ne veut
		pas que <span class="application">LPD</span> retente
		l'impression.  <span class="application">LPD</span>
		rejettera le fichier.</p></dd></dl></div><p>Le filtre texte livré avec FreeBSD,
	  <code class="filename">/usr/libexec/lpr/lpf</code>, tire parti des
	  paramètres de largeur et hauteur de page pour savoir
	  quand envoyer une instruction de saut de page et comment
	  comptabiliser l'utilisation de l'imprimante.  Il utilise les
	  paramètres nom d'utilisateur, nom de machine, et
	  fichier de comptabilisation pour enregistrer les
	  entrées concernant la consommation.</p><p>Si vous recherchez des filtres, prenez garde à ce
	  qu'ils soient compatibles avec LPD.  Si c'est le cas, ils
	  doivent se conformer à la liste de paramètres
	  décrite ci-dessus.  Si vous songez à
	  écrire des filtres à usage
	  général, alors faites en sorte qu'ils se
	  conforment à ces mêmes listes de
	  paramètres et de codes de retour.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-if-conversion"></a>10.4.1.2. Gérer les travaux d'impression de texte brut sur
	  des imprimantes <span class="trademark">PostScript</span>®</h4></div></div></div><a id="idp72217552" class="indexterm"></a><p>Si vous êtes l'unique utilisateur de votre
	  ordinateur et de votre imprimante <span class="trademark">PostScript</span>® (ou
	  basée sur un autre langage), et que vous promettez de
	  ne jamais envoyer de texte brut à votre imprimante et
	  de ne jamais utiliser les fonctionnalités des divers
	  programmes qui voudraient lui en envoyer, alors vous pouvez
	  tout à fait passer cette section l'esprit
	  tranquille.</p><p>Toutefois, si vous désirez envoyer du
	  <span class="trademark">PostScript</span>® et du texte brut à l'imprimante, alors
	  vous êtes instamment priés de compléter
	  la configuration de votre imprimante.  Pour ce faire, nous
	  chargerons le filtre texte de détecter si le travail
	  d'impression est du texte brut ou du <span class="trademark">PostScript</span>®.  Tous les
	  travaux d'impression <span class="trademark">PostScript</span>® doivent débuter par
	  <code class="literal">%!</code> (en ce qui concerne les autres
	  langages, référez-vous à la
	  documentation de l'imprimante).  Si ces deux
	  caractères sont les deux premiers du travail
	  d'impression, il s'agit de <span class="trademark">PostScript</span>® et le reste du
	  travail d'impression peut être passé
	  directement à l'imprimante.  Dans le cas contraire,
	  alors le filtre convertit le texte en <span class="trademark">PostScript</span>® et
	  imprime le résultat.</p><p>Comment procéder?</p><a id="idp72222672" class="indexterm"></a><p>Si vous disposez d'une imprimante série, une
	  bonne façon de faire est d'installer
	  <code class="command">lprps</code>.  Il s'agit d'un filtre
	  d'impression <span class="trademark">PostScript</span>® qui assure une communication en
	  duplex avec l'imprimante.  Il met à jour le fichier
	  d'état de l'imprimante avec des informations
	  détaillées que cette dernière lui
	  fournit, de sorte que les utilisateurs et les
	  administrateurs puissent connaître
	  précisément l'état de l'imprimante (par
	  exemple <span class="errorname">niveau de toner bas</span> ou
	  <span class="errorname">bourrage papier</span>).  Mais plus
	  important encore, il inclut un programme nommé
	  <code class="command">psif</code> qui détecte si le travail
	  d'impression qui vient d'arriver est du texte brut et lance
	  <code class="command">textps</code> (un autre programme fourni avec
	  <code class="command">lprps</code>) pour le convertir en <span class="trademark">PostScript</span>®.
	  Il utilise alors <code class="command">lprps</code> pour envoyer le
	  travail d'impression à l'imprimante.</p><p><code class="command">lprps</code> fait partie du catalogue des
	  logiciels portés FreeBSD (lisez la section <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Le catalogue des logiciels
	  portés</a>).  Vous pouvez installer un des deux
	  logiciels portés <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/lprps-a4/pkg-descr">print/lprps-a4</a> et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/lprps-letter/pkg-descr">print/lprps-letter</a> en fonction du
	  format de papier utilisé.  Après avoir
	  installé <code class="command">lprps</code>, précisez
	  simplement le chemin vers le programme
	  <code class="command">psif</code> qui fait partie de
	  <code class="command">lprps</code>.  Si vous avez installé
	  <code class="command">lprps</code> en recourant au catalogue des
	  logiciels portés, placez les valeurs suivantes pour
	  l'entrée de l'imprimante série <span class="trademark">PostScript</span>®
	  dans <code class="filename">/etc/printcap</code>:</p><pre class="programlisting">:if=/usr/local/libexec/psif:</pre><p>Vous devrez également renseigner le
	  paramètre <code class="literal">rw</code> qui indique à
	  <span class="application">LPD</span> de requérir
	  l'imprimante en mode lecture/écriture.</p><p>Si vous disposez d'une imprimante <span class="trademark">PostScript</span>®
	  parallèle (et ne pouvez donc pas utiliser la
	  communication en duplex avec l'imprimante dont a besoin
	  <code class="command">lprps</code>), vous pouvez recourir à la
	  procédure suivante en tant que filtre texte:</p><pre class="programlisting">#!/bin/sh
#
#  psif - Imprime du PostScript ou du texte brut sur une imprimante PostScript
#  Version script; CECI N'EST PAS la version fournie avec lprps
#  Fichier /usr/local/libexec/psif
#

IFS="" read -r first_line
first_two_chars=`expr "$first_line" : '\(..\)'`

if [ "$first_two_chars" = "%!" ]; then
    #
    #  Travail PostScript, l'imprimer.
    #
    echo "$first_line" &amp;&amp; cat &amp;&amp; printf "\004" &amp;&amp; exit 0
    exit 2
else
    #
    #  Texte brut, le convertir, puis l'imprimer.
    #
    ( echo "$first_line"; cat ) | /usr/local/bin/textps &amp;&amp; printf "\004" &amp;&amp; exit 0
    exit 2
fi</pre><p>Dans la procédure ci-dessus,
	  <code class="command">textps</code> est un programme que nous avons
	  installé séparément pour convertir du
	  texte en <span class="trademark">PostScript</span>®.  Vous pouvez recourir à
	  n'importe quel programme texte-vers-<span class="trademark">PostScript</span>®, selon
	  votre désir.  Le catalogue des logiciels
	  portés de FreeBSD (voir la section <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Le catalogue des logiciels
	  portés</a>) comprend un programme de conversion
	  texte-vers-<span class="trademark">PostScript</span>® complet nommée
	  <code class="literal">a2ps</code>, qui pourrait vous
	  intéresser.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-ps"></a>10.4.1.3. Emuler du <span class="trademark">PostScript</span>® sur les imprimantes
	  non-<span class="trademark">PostScript</span>®</h4></div></div></div><a id="idp72241232" class="indexterm"></a><a id="idp72250704" class="indexterm"></a><p><span class="trademark">PostScript</span>® est le standard <span class="emphasis"><em>de
	  fait</em></span> pour l'impression et la composition de haute
	  qualité.  Cependant, <span class="trademark">PostScript</span>® est un standard
	  <span class="emphasis"><em>onéreux</em></span>.  Heureusement, Aladdin
	  Enterprises propose un succédané gratuit de
	  <span class="trademark">PostScript</span>® nommé
	  <span class="application">Ghostscript</span> qui fonctionne sous
	  FreeBSD.  <span class="application">Ghostscript</span> peut lire la
	  majorité des fichiers <span class="trademark">PostScript</span>® et peut produire
	  leurs pages sur une diversité de
	  périphériques, incluant beaucoup de marques
	  d'imprimantes non-<span class="trademark">PostScript</span>®.  En installant
	  <span class="application">Ghostscript</span> et en recourant
	  à un filtre texte spécial, vous pouvez obtenir
	  de votre imprimante non-<span class="trademark">PostScript</span>® qu'elle se comporte
	  comme une véritable imprimante <span class="trademark">PostScript</span>®.</p><p><span class="application">Ghostscript</span> fait partie du
	  catalogue des logiciels portés, de nombreuses
	  versions sont disponibles, la version la plus couramment
	  utilisée est <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/ghostscript-gpl/pkg-descr">print/ghostscript-gpl</a>.</p><p>Pour émuler du <span class="trademark">PostScript</span>®, il nous faut faire
	  en sorte que le filtre texte détecte s'il imprime un
	  fichier <span class="trademark">PostScript</span>®.  Si ce n'est pas le cas, alors le
	  filtre doit passer le fichier directement à
	  l'imprimante; sinon il recourra à
	  <span class="application">Ghostscript</span> pour tout d'abord le
	  convertir dans un format que l'imprimante saura
	  interpréter.</p><p>Voici un exemple: la procédure suivante est un
	  filtre texte pour les imprimantes Hewlett Packard Deskjet
	  500.  Pour d'autres modèles, changez le
	  paramètre <code class="option">-sDEVICE</code> de la commande
	  <code class="command">gs</code>
	  (<span class="application">Ghostscript</span>).  (Entrez
	  <code class="command">gs -h</code> pour obtenir une liste des
	  périphériques reconnus par l'installation
	  actuelle de <span class="application">Ghostscript</span>).</p><pre class="programlisting">#!/bin/sh
#
#  ifhp - Imprime du PostScript émulé par Ghostscript sur une DeskJet 500
#  Fichier /usr/local/libexec/ifhp

#
#  Traite LF comme CR+LF (pour éviter l'"effet d'escalier" sur les
#  imprimantes HP/PCL):
#
printf "\033&amp;k2G" || exit 2

#
#  Lit les deux premiers caractères du fichier
#
IFS="" read -r first_line
first_two_chars=`expr "$first_line" : '\(..\)'`

if [ "$first_two_chars" = "%!" ]; then
    #
    #  Si c'est du PostScript; utiliser Ghostscript pour le convertir et l'imprimer
    #
    /usr/local/bin/gs -dSAFER -dNOPAUSE -q -sDEVICE=djet500 \
      -sOutputFile=- - &amp;&amp; exit 0
else
    #
    #  Texte brut ou HP/PCL, donc impression directe; effectuer un
    #  saut de page à la fin pour éjecter la dernière page.
    #
    echo "$first_line" &amp;&amp; cat &amp;&amp; printf "\033&amp;l0H" &amp;&amp;
exit 0
fi

exit 2</pre><p>Pour finir, vous devez communiquer à
	  <span class="application">LPD</span> le filtre utilisé en
	  positionnant le paramètre
	  <code class="literal">if</code>:</p><pre class="programlisting">:if=/usr/local/libexec/ifhp:</pre><p>Voilà.  Vous pouvez entrer <code class="command">lpr
	  texte.simple</code> et
	  <code class="filename">lpr
	  peuimporte.ps</code>, et
	  chacune des deux commandes devrait imprimer avec
	  succès.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-convfilters"></a>10.4.1.4. Filtres de conversion</h4></div></div></div><p>Après avoir mené à bien la
	  configuration basique décrite à la section
	  <a class="link" href="#printing-simple" title="10.3.1. Configuration simple de l'imprimante">Configuration simple de
	  l'imprimante</a>, la première chose que vous
	  souhaiterez probablement faire sera d'installer des filtres
	  de conversion pour vos formats de fichiers favoris (le
	  simple texte ASCII mis à part).</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72275920"></a>10.4.1.4.1. Pourquoi installer des filtres de conversion?</h5></div></div></div><a id="idp72276560" class="indexterm"></a><p>Les filtres de conversion facilitent l'impression de
	    différentes sortes de fichiers.  Par exemple,
	    supposons que nous travaillions énormément
	    avec le système de composition <span class="application">TeX</span>, et que nous
	    ayons une imprimante <span class="trademark">PostScript</span>®.  Chaque fois que nous
	    générerons un fichier DVI à partir de
	    <span class="application">TeX</span>, nous ne pouvons l'imprimer directement avant
	    d'avoir converti ce fichier DVI en <span class="trademark">PostScript</span>®.  La
	    séquence de commandes serait la suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>dvips seaweed-analysis.dvi</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>lpr seaweed-analysis.ps</code></strong></pre><p>En installant un filtre de conversion pour fichiers
	    DVI, nous pouvons à chaque fois nous passer de
	    l'étape de conversion manuelle en chargeant
	    <span class="application">LPD</span> de le faire à notre
	    place.  Maintenant, à chaque fois que nous avons un
	    fichier DVI, nous ne sommes plus qu'à un pas de
	    l'impression:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -d seaweed-analysis.dvi</code></strong></pre><p>Nous faisons en sorte que
	    <span class="application">LPD</span> se charge de la conversion
	    du fichier DVI à notre place en positionnant
	    l'option <code class="option">-d</code>.  La section <a class="link" href="#printing-lpr-options-format" title="10.5.4.1. Formatting and Conversion Options">Options de
	    conversion et de formatage</a> donne la liste des
	    options de conversion.</p><p>Pour chacune des options de conversion que vous voulez
	    faire accepter par une imprimante, installez un
	    <span class="emphasis"><em>filtre de conversion</em></span> et indiquez son
	    chemin d'accès dans
	    <code class="filename">/etc/printcap</code>.  Un filtre de
	    conversion ressemble au filtre texte de notre
	    configuration de base (voir la section <a class="link" href="#printing-textfilter" title="10.3.1.5.6. Installer le filtre texte">Installer le filtre
	    texte</a>), à ceci près qu'au lieu
	    d'imprimer du texte brut, le filtre convertit le fichier
	    en un format compréhensible par
	    l'imprimante.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72291152"></a>10.4.1.4.2. Quels filtres de conversion dois-je
	    installer?</h5></div></div></div><p>Vous devez installer les filtres de conversion que
	    vous vous attendez à utiliser.  Si vous imprimez
	    beaucoup de données DVI, alors un filtre de
	    conversion DVI est dans la logique des choses.  Si vous
	    devez imprimer beaucoup de troff, alors vous aurez
	    sûrement besoin d'un filtre troff.</p><p>Le tableau suivant récapitule les filtres avec
	    lesquels <span class="application">LPD</span> fonctionne, leurs
	    paramètres <code class="filename">/etc/printcap</code>, et
	    comment les invoquer avec la
	    <code class="command">lpr</code>:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Type de fichier</th><th>paramètre <code class="filename">/etc/printcap</code>
		  </th><th>option <code class="command">lpr</code></th></tr></thead><tbody><tr><td>cifplot</td><td><code class="literal">cf</code></td><td><code class="option">-c</code></td></tr><tr><td>DVI</td><td><code class="literal">df</code></td><td><code class="option">-d</code></td></tr><tr><td>plot</td><td><code class="literal">gf</code></td><td><code class="option">-g</code></td></tr><tr><td>ditroff</td><td><code class="literal">nf</code></td><td><code class="option">-n</code></td></tr><tr><td>code FORTRAN</td><td><code class="literal">rf</code></td><td><code class="option">-f</code></td></tr><tr><td>troff</td><td><code class="literal">tf</code></td><td><code class="option">-f</code></td></tr><tr><td>image en mode point</td><td><code class="literal">vf</code></td><td><code class="option">-v</code></td></tr><tr><td>texte brut</td><td><code class="literal">if</code></td><td>aucune, <code class="option">-p</code>, or
		    <code class="option">-l</code></td></tr></tbody></table></div><p>Dans notre exemple, utiliser <code class="command">lpr -d</code>
	    veut dire que l'imprimante a besoin du paramètre
	    <code class="literal">df</code> dans l'entrée
	    <code class="filename">/etc/printcap</code> la concernant.</p><a id="idp72323024" class="indexterm"></a><p>Aussi fortement que certains puissent s'en émouvoir,
	  des formats comme le code FORTRAN ou le plot sont probablement
	  obsolètes.  Sur votre site, vous pouvez attribuer de
	  nouvelles significations à ces options ou à toute
	  autre option de formatage en installant simplement des filtres personnalisés.  Par exemple,
	  supposons que vous aimeriez imprimer des fichiers Printerleaf
	  directement (fichiers issus du programme de publication assistée par ordinateur Interleaf),
	  mais jamais de fichiers plot.  Vous pourriez alors installer un
	  filtre de conversion Printerleaf sous le paramètre
	  <code class="literal">gf</code> et ensuite informer vos
	  utilisateurs que <code class="command">lpr -g</code> veut dire
	  <span class="quote">« <span class="quote">imprimer des fichiers Printerleaf</span> »</span>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72325200"></a>10.4.1.4.3. Installer des filtres de conversion</h5></div></div></div><p>Etant donné que les filtres de conversion sont des
	    applications qui ne font pas partie du système FreeBSD
	    de base, vous devriez les installer dans
	    <code class="filename">/usr/local</code>.  Le répertoire
	    <code class="filename">/usr/local/libexec</code> est une destination
	    de choix, car ce sont des programmes spécialisés
	    que seul <span class="application">LPD</span> lancera; les
	    utilisateurs ordinaires ne devraient jamais avoir à
	    les lancer.</p><p>Pour activer un filtre de conversion, précisez son
	    chemin d'accès dans le paramètre relatif à
	    l'imprimante de destination dans
	    <code class="filename">/etc/printcap</code>.</p><p>Dans notre exemple, nous allons ajouter le filtre de
	    conversion DVI pour l'imprimante nommée
	    <code class="literal">bamboo</code>.  Revoici le fichier
	    <code class="filename">/etc/printcap</code> d'exemple, avec le nouveau
	    paramètre <code class="literal">df</code> pour l'imprimante
	    <code class="literal">bamboo</code>:</p><pre class="programlisting">#
#  /etc/printcap pour la machine rose - ajout du filtre df pour bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre><p>Le filtre DVI est une procédure nommée
	    <code class="filename">/usr/local/libexec/psdf</code>.  En voici le
	    contenu:</p><pre class="programlisting">#!/bin/sh
#
#  psdf - filtre DVI vers imprimante PostScript
#  Fichier /usr/local/libexec/psdf
#
# Appelé par lpd quand l'utilisateur lance lpr -d
#
exec /usr/local/bin/dvips -f | /usr/local/libexec/lprps "$@"</pre><p>Cette procédure lance <code class="command">dvips</code> en mode filtre (cela
	    correspond au paramètre <code class="option">-f</code>) sur
	    l'entrée standard, qui est le travail d'impression
	    à exécuter.  Ensuite, elle lance le filtre pour imprimante
	    <span class="trademark">PostScript</span>® <code class="command">lprps</code> (voir la section
	    <a class="link" href="#printing-advanced-if-conversion" title="10.4.1.2. Gérer les travaux d'impression de texte brut sur des imprimantes PostScript®">Gérer les
	    travaux d'impression de texte brut sur des imprimantes
	    <span class="trademark">PostScript</span>®</a>) avec les paramètres que
	    <span class="application">LPD</span> lui a passés.
	    Le programme <code class="command">lprps</code> utilisera ces paramètres pour
	    comptabiliser les pages imprimées.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72335568"></a>10.4.1.4.4. Exemples de filtre de conversion
	    supplémentaires</h5></div></div></div><p>Il n'existe pas de procédure figée pour l'installation
	    des filtres de conversion, des exemples fonctionnels sont
	    présentés dans cette section.  Inspirez-vous de ces
	    exemples pour créer vos propres filtres.  Utilisez les
	    tels quels s'il s'avèrent adéquats.</p><p>Cet exemple présente un filtre de conversion d'image
	    en mode point (en fait un fichier GIF) pour une imprimante
	    Hewlett-Packard LaserJet III-Si:</p><pre class="programlisting">#!/bin/sh
#
#  hpvf - Convertit des fichiers GIF en HP/PCL, puis les imprime
#  Fichier /usr/local/libexec/hpvf

PATH=/usr/X11R6/bin:$PATH; export PATH
giftopnm | ppmtopgm | pgmtopbm | pbmtolj -resolution 300 \
    &amp;&amp; exit 0 \
    || exit 2</pre><p>Son fonctionnement est le suivant: il convertit le fichier
	    GIF en un format portable universel, puis en format
	    portable en niveau de gris, et ensuite
	    en bitmap portable, qu'il convertit enfin
	    en données compatibles LaserJet/PCL.</p><p>Voici le <code class="filename">/etc/printcap</code> comportant une
	    entrée pour une imprimante recourant au filtre
	    ci-dessus:</p><pre class="programlisting">#
#  /etc/printcap pour la machine orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sh:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:\
        :vf=/usr/local/libexec/hpvf:</pre><p>La procédure suivante est un filtre de conversion de
	    données troff du système de composition groff pour
	    l'imprimante <span class="trademark">PostScript</span>® <code class="literal">bamboo</code>:</p><pre class="programlisting">#!/bin/sh
#
#  pstf - Convertit des données troff de groff en PS, puis imprime.
#  Fichier /usr/local/libexec/pstf
#
exec grops | /usr/local/libexec/lprps "$@"</pre><p>La procédure ci-dessus emploie de nouveau
	    <code class="command">lprps</code> pour gérer la communication
	    avec l'imprimante.  S'il s'agissait d'une imprimante sur port
	    parallèle, nous utiliserions plutôt la procédure
	    suivante:</p><pre class="programlisting">#!/bin/sh
#
#  pstf - Convertit des données troff de groff en PS, puis imprime.
#  Fichier /usr/local/libexec/pstf
#
exec grops</pre><p>C'est tout.  Voici l'entrée qu'il faut ajouter dans
	    <code class="filename">/etc/printcap</code> pour activer le filtre:</p><pre class="programlisting">:tf=/usr/local/libexec/pstf:</pre><p>Voici un exemple qui pourrait faire rougir les vieux briscards
	    de FORTRAN.  C'est un filtre de code FORTRAN pour toute
	    imprimante sachant imprimer du texte brut.  Nous l'installerons
	    pour l'imprimante <code class="literal">teak</code>:</p><pre class="programlisting">#!/bin/sh
#
# hprf - filtre texte FORTRAN pour LaserJet 3si:
# Fichier /usr/local/libexec/hprf
#

printf "\033&amp;k2G" &amp;&amp; fpr &amp;&amp; printf "\033&amp;l0H" &amp;&amp;
 exit 0
exit 2</pre><p>Et nous ajouterons cette ligne dans
	    <code class="filename">/etc/printcap</code> pour l'imprimante
	    <code class="literal">teak</code> afin d'activer le filtre:</p><pre class="programlisting">:rf=/usr/local/libexec/hprf:</pre><p>Voici un dernier exemple, quelque peu complexe.  Nous allons
	    ajouter un filtre DVI pour l'imprimante LaserJet
	    <code class="literal">teak</code> présentée ci-dessus.  Tout
	    d'abord, la partie facile: mettre à jour
	    <code class="filename">/etc/printcap</code> avec l'emplacement du
	    filtre DVI:</p><pre class="programlisting">:df=/usr/local/libexec/hpdf:</pre><p>Et maintenant, la partie difficile: écrire le filtre.
	    Pour cela, nous avons besoin d'un programme de conversion
	    DVI-vers-LaserJet/PCL.  Le catalogue des logiciels portés
	    (voyez la section <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Le catalogue des logiciels
	    portés</a>) en possède un: <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/dvi2xx/pkg-descr">print/dvi2xx</a>.
	    Installer ce logiciel porté nous fournira le programme
	    dont nous avons besoin, <code class="command">dvilj2p</code>, qui
	    convertit le DVI en code compatible LaserJet IIp, LaserJet III et
	    LaserJet 2000.</p><p>L'utilitaire <code class="command">dvilj2p</code> rend le filtre
	    <code class="command">hpdf</code> assez complexe, parce que
	    <code class="command">dvilj2p</code> ne sait pas lire l'entrée
	    standard.  Il lui faut un nom de fichier.  Pire encore, le nom du fichier doit se terminer par
	    <code class="filename">.dvi</code>, ce qui rend l'utilisation de
	    <code class="filename">/dev/fd/0</code> pour l'entrée standard
	    problématique.  Nous pouvons contourner cette
	    difficulté en créant un lien symbolique temporaire
	    (se terminant par <code class="filename">.dvi</code>) pointant vers
	    <code class="filename">/dev/fd/0</code>, obligeant ainsi
	    <code class="command">dvilj2p</code> à lire l'entrée
	    standard.</p><p>Le seul petit accroc restant est que nous ne pouvons pas
	    utiliser <code class="filename">/tmp</code> pour le lien temporaire.  Les
	    liens symboliques ont pour propriétaire l'utilisateur et le
	    group <code class="systemitem">bin</code>.  Le filtre est lancé sous
	    l'utilisateur <code class="systemitem">daemon</code>.  Et le bit <span class="quote">« <span class="quote">sticky</span> »</span> est
	    positionné sur le répertoire
	    <code class="filename">/tmp</code>.  Le filtre peut créer le lien,
	    mais il ne pourra pas nettoyer lorsqu'il aura fini et supprimer
	    ce lien puisqu'il appartient à un utilisateur
	    différent.</p><p>Au lieu de ça, le filtre créera le lien dans
	    le répertoire courant, qui est le répertoire
	    de la file d'attente des travaux d'impression (précisé par le paramètre
	    <code class="literal">sd</code> dans <code class="filename">/etc/printcap</code>).
	    C'est l'endroit idéal pour faire travailler les filtres,
	    particulièrement parce qu'il y a (parfois) plus d'espace
	    disque libre dans ce répertoire que
	    sous <code class="filename">/tmp</code>.</p><p>Voici, enfin, le filtre:</p><pre class="programlisting">#!/bin/sh
#
#  hpdf - Imprime des données DVI sur une imprimante HP/PCL
#  Fichier /usr/local/libexec/hpdf

PATH=/usr/local/bin:$PATH; export PATH

#
#  Définit une fonction de nettoyage de nos fichiers temporaires.  Ils prennent place
#  dans le répertoire courant, qui sera le répertoire
#  de file d'attente
#  de l'imprimante.
#
cleanup() {
   rm -f hpdf$$.dvi
}

#
#  Définit une fonction de gestion des erreurs fatales: affiche le message
#  d'erreur et retourne 2.  Ce code d'erreur de 2 indique à LPD
#  de ne pas essayer de réimprimer le travail d'impression
#
fatal() {
    echo "$@" 1&gt;&amp;2
    cleanup
    exit 2
}

#
#  Si l'utilisateur enlève le travail d'impression, LPD envoie SIGINT, donc
#  il faut capturer le signal SIGINT
#  (et quelques autres signaux) pour nettoyer après notre passage.
#
trap cleanup 1 2 15

#
#  Assurons-nous qu'il n'y ait pas conflit ce nom avec des fichiers existants.
#
cleanup

#
#  Lien du fichier DVI vers l'entrée standard (fichier à imprimer).
#
ln -s /dev/fd/0 hpdf$$.dvi || fatal "Cannot symlink /dev/fd/0"

#
#  Conversion LF = CR+LF
#
printf "\033&amp;k2G" || fatal "Cannot initialize printer"

#
#  Conversion et impression.  Le code de retour de dvilj2p ne semble
#  pas fiable: ignorons-le.
#
dvilj2p -M1 -q -e- dfhp$$.dvi

#
#  Nettoyage et sortie de la procédure
#
cleanup
exit 0</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-autoconv"></a>10.4.1.4.5. Conversion automatique: une alternative aux filtres de
	    conversion</h5></div></div></div><p>Tous ces filtres de conversion apportent beaucoup à
	  votre environnement d'impression, mais nécessitent que
	  l'utilisateur précise (dans la ligne de commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>) lequel utiliser.  Si vos utilisateurs ne sont pas
	  particulièrement versés en informatique,
	  préciser une option de filtre sera problématique.  Mais ce
	  qui s'avère pire encore est qu'une option de filtre mal
	  choisie peut lancer un filtre sur un type de fichier erroné
	  et causer l'impression de centaines de pages.</p><p>Plutôt que d'installer quelque filtre de conversion
	  que ce soit, vous préférerez sans doute laisser
	  le filtre texte (puisque c'est le filtre par défaut)
	  déterminer le type de fichier qu'on lui a demandé
	  d'imprimer et lancer automatiquement le filtre de conversion
	  approprié.  Des outils comme <code class="command">file</code>
	  peuvent s'avérer utiles dans ce cas.  Bien entendu, il sera
	  difficile d'établir les différences entre
	  <span class="emphasis"><em>certains</em></span> types de fichiers&#8212;et vous
	  pouvez toujours, bien sûr, fournir des filtres de conversion
	  uniquement pour eux.</p><a id="idp72369232" class="indexterm"></a><a id="idp72369744" class="indexterm"></a><p>Le catalogue des logiciels portés FreeBSD contient un
	    filtre texte, nommé <code class="command">apsfilter</code>
	    (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/print/apsfilter/pkg-descr">print/apsfilter</a>), qui
	    sait effectuer la conversion automatique.  Il peut
	    reconnaître le texte brut, le <span class="trademark">PostScript</span>® les
	    fichiers DVI et quasiment n'importe quelle sorte de
	    fichier, effectuer les conversions appropriées et
	    imprimer.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-of"></a>10.4.1.5. Filtres de sortie</h4></div></div></div><p>Le gestionnaire d'impression
	  <span class="application">LPD</span> reconnaît un autre
	  type de filtre dont nous n'avons pas
	  encore discuté: le filtre de sortie.  Un filtre de
	  sortie est destiné à l'impression de texte brut
	  seulement, comme le filtre texte, mais avec de nombreuses
	  simplifications.  Si vous utilisez un filtre de sortie mais pas
	  de filtre texte, alors:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">LPD</span> lance un filtre de sortie
	      une seule fois par travail d'impression, au lieu d'une fois
	      pour chacun des fichiers du travail d'impression.</p></li><li class="listitem"><p><span class="application">LPD</span> ne fournit rien pour
	      permettre au filtre de sortie de
	      repérer le début ou la fin des fichiers du
	      travail d'impression.</p></li><li class="listitem"><p><span class="application">LPD</span> ne passe pas le nom de
	      l'utilisateur ou le nom de la machine au filtre, qui n'est
	      donc pas prévu pour effectuer la
	      comptabilisation de l'impression.  En fait, il ne
	      reçoit que deux paramètres:</p><div class="cmdsynopsis"><p><code class="command">nom-du-filtre</code>  -w<em class="replaceable"><code>largeur</code></em>   -l<em class="replaceable"><code>hauteur</code></em> </p></div><p>Où <em class="replaceable"><code>largeur</code></em> provient du
	      paramètre <code class="literal">pw</code> et
	      <em class="replaceable"><code>hauteur</code></em> du paramètre
	      <code class="literal">pl</code> de l'entrée
	      <code class="filename">/etc/printcap</code> pour l'imprimante en
	      question.</p></li></ul></div><p>Ne vous laissez pas séduire par la simplicité
	  d'un filtre de sortie.  Si vous désirez que chaque fichier
	  d'un travail d'impression commence sur une page différente,
	  un filtre de sortie <span class="emphasis"><em>ne conviendra pas</em></span>.
	  Utilisez un filtre texte (également appelé filtre
	  d'entrée); voir la section <a class="link" href="#printing-textfilter" title="10.3.1.5.6. Installer le filtre texte">Installer le filtre texte</a>.  De
	  plus, le filtre de sortie se révèle en fait
	  <span class="emphasis"><em>plus complexe</em></span> en ce sens qu'il doit examiner
	  le flux d'octets qui lui est envoyé pour y rechercher
	  des caractères spéciaux et qu'il
	  doit s'envoyer à lui-même des signaux comme s'ils
	  provenaient de <span class="application">LPD</span>.</p><p>Toutefois, un filtre de sortie s'avère
	  <span class="emphasis"><em>nécessaire</em></span> si vous désirez des
	  pages d'en-tête et avez besoin d'envoyer des séquences
	  d'échappement ou d'autres chaînes d'initialisation
	  afin de pouvoir imprimer la page d'en-tête.  (Mais il est
	  également <span class="emphasis"><em>futile</em></span> si vous voulez imputer
	  les pages d'en-tête au compte de l'utilisateur, puisque
	  <span class="application">LPD</span> ne livre pas d'information
	  sur l'utilisateur ou la machine au filtre de sortie).</p><p>Sur une seule imprimante, <span class="application">LPD</span>
	  permet à la fois un filtre de sortie et des filtres texte ou
	  autres.  Dans de tels cas, <span class="application">LPD</span> ne lancera
	  le filtre de sortie que pour imprimer la page d'en-tête
	  (consultez la section <a class="link" href="#printing-advanced-header-pages" title="10.4.2. Pages d'en-tête">Pages
	  d'en-tête</a>).  <span class="application">LPD</span> attend
	  alors que le filtre de sortie <span class="emphasis"><em>s'arrête
	  par lui-même</em></span> en envoyant deux octets au filtre: ASCII 031 suivi
	  d'ASCII 001.  Lorsqu'un filtre de sortie lit ces deux octets
	  (031,001), il devrait s'arrêter en s'envoyant à
	  lui-même un <code class="literal">SIGSTOP</code>.  Lorsque
	  <span class="application">LPD</span> a fini d'exécuter les
	  autres filtres, il relance le filtre de sortie en lui envoyant
	  un <code class="literal">SIGCONT</code>.</p><p>S'il y a un filtre de sortie mais <span class="emphasis"><em>aucun</em></span>
	  filtre texte et que <span class="application">LPD</span> s'occupe
	  d'un travail d'impression concernant du texte brut, alors
	  <span class="application">LPD</span> utilise le filtre de sortie pour
	  réaliser ce travail d'impression.  Comme exposé
	  plus haut, le filtre de sortie imprimera chacun des travaux
	  d'impression séquentiellement sans que des sauts de page
	  ou autres formes d'avancement du
	  papier ne surviennent, et ce n'est vraisemblablement
	  <span class="emphasis"><em>pas</em></span> ce que vous désirez.  Dans
	  presque tous les cas, il vous faut un filtre texte.</p><p>Le programme <code class="command">lpf</code>, que nous avons
	  présenté précédemment comme un filtre texte, peut
	  également fonctionner en tant que filtre de sortie.  Si
	  vous avez besoin d'un filtre de sortie vite-fait-bien-fait mais
	  ne voulez pas écrire le code d'examen d'octets et d'envoi
	  de signal, essayez <code class="command">lpf</code>.  Vous pouvez
	  également inclure <code class="command">lpf</code> dans une procédure
	  pour prendre en charge tout code d'initialisation qui pourrait
	  être requis par l'imprimante.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-lpf"></a>10.4.1.6. <code class="command">lpf</code>: un filtre texte</h4></div></div></div><p>Le programme <code class="filename">/usr/libexec/lpr/lpf</code> qui
	  est fourni avec la distribution binaire FreeBSD est un filtre texte
	  (un filtre d'entrée) qui sait indenter la sortie (un
	  travail d'impression soumis avec <code class="command">lpr -i</code>),
	  laisse passer les caractères littéraux (travail
	  d'impression soumis avec <code class="command">lpr -l</code>), ajuste la
	  position d'impression des retours arrière et des
	  tabulations dans le travail d'impression, et comptabilise les
	  pages imprimées.  Il peut également servir
	  de filtre de sortie.</p><p>Le filtre <code class="command">lpf</code> convient à de nombreux
	  environnements d'impression.  Et bien qu'il ne puisse pas envoyer de
	  séquences d'initialisation à une imprimante, il est
	  aisé d'écrire une procédure pour effectuer
	  l'initialisation nécessaire et ensuite exécuter
	  <code class="command">lpf</code>.</p><a id="idp72426448" class="indexterm"></a><a id="idp72426960" class="indexterm"></a><p>Afin que <code class="command">lpf</code> mène à bien la
	  comptabilisation des pages, il faut que des valeurs correctes
	  soient indiquées pour les paramètres
	  <code class="literal">pw</code> et <code class="literal">pl</code> dans le fichier
	  <code class="filename">/etc/printcap</code>.  Il utilise ces valeurs pour
	  déterminer combien de texte peut être imprimé
	  sur une page et combien de pages ont été
	  imprimées dans le travail d'impression d'un utilisateur.
	  Pour plus d'informations sur la comptabilisation de l'impression,
	  lisez la section
	  <a class="link" href="#printing-advanced-acct" title="10.4.5. Comptabiliser l'utilisation de l'imprimante">Comptabiliser l'utilisation
	    de l'imprimante</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages"></a>10.4.2. Pages d'en-tête</h3></div></div></div><p>Si vous avez <span class="emphasis"><em>beaucoup</em></span> d'utilisateurs, et
        que tous utilisent des imprimantes diverses, alors vous allez
	certainement envisager les <span class="emphasis"><em>pages
	d'en-tête</em></span> comme un mal nécessaire.</p><a id="idp72432976" class="indexterm"></a><a id="idp72434128" class="indexterm"></a><p>Les pages d'en-tête, également appelées
        <span class="emphasis"><em>bannières</em></span> ou
	<span class="emphasis"><em>burst page</em></span>, identifient à qui
	appartiennent les travaux d'impression après qu'ils
	aient été imprimés.  Elles sont en
	général imprimées en caractères de
	grande taille et en gras, peuvent comporter des bordures
	décorées, de sorte qu'elles contrastent dans
	une pile d'impressions avec les véritables documents formant
	les travaux d'impression des utilisateurs.  Elles leur permettent
	de retrouver facilement leurs travaux d'impression.
	L'inconvénient majeur d'une page d'en-tête est qu'elle
	représente une page supplémentaire à
	imprimer pour chacun des travaux d'impression, son utilité
	éphémère ne dépasse pas quelques
	minutes, et elle termine au recyclage du papier ou dans une corbeille.
	(Notez que une page d'en-tête est liée à chaque
	travail d'impression et non à chaque fichier dans un travail
	d'impression: il se pourrait donc que le gâchis de papier ne
	soit pas si grand.)</p><p>Le système <span class="application">LPD</span> peut fournir
        des pages d'en-tête automatiquement pour vos impressions
	<span class="emphasis"><em>si</em></span> votre imprimante sait imprimer directement du texte
	brut.  Si vous disposez d'une imprimante <span class="trademark">PostScript</span>®,
	il vous faudra un programme externe pour générer la
	page d'en-tête; lisez la section <a class="link" href="#printing-advanced-header-pages-ps" title="10.4.2.4. Les pages d'en-tête sur les imprimantes PostScript®">Les pages d'en-tête
	sur les imprimantes <span class="trademark">PostScript</span>®</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-enabling"></a>10.4.2.1. Activer les pages d'en-tête</h4></div></div></div><p>Dans la section <a class="link" href="#printing-simple" title="10.3.1. Configuration simple de l'imprimante">Configuration
	    simple de l'imprimante</a>, nous avons désactivé
	    les pages d'en-tête en positionnant le paramètre
	    <code class="literal">sh</code> (ce qui signifie <span class="quote">« <span class="quote">suppress
	    header</span> »</span>, soit <span class="quote">« <span class="quote">suppression des
	    en-têtes</span> »</span>) dans <code class="filename">/etc/printcap</code>.
	    Pour activer les pages d'en-tête sur une imprimante, il
	    suffit d'enlever ce paramètre
	    <code class="literal">sh</code>.</p><p>Cela semble trop facile, n'est-ce pas?</p><p>C'est vrai.  Il se <span class="emphasis"><em>pourrait</em></span> que vous
	    ayez à fournir un filtre de sortie pour envoyer des
	    chaînes d'initialisation à l'imprimante.  Voici
	    un exemple de filtre sortie pour les imprimantes Hewlett-Packard
	    compatibles-PCL:</p><pre class="programlisting">#!/bin/sh
#
#  hpof - filtre de sortie pour les imprimantes Hewlett Packard compatibles PCL
#  Fichier /usr/local/libexec/hpof

printf "\033&amp;k2G" || exit 2
exec /usr/libexec/lpr/lpf</pre><p>Spécifiez le chemin d'accès au filtre de
	    sortie avec le paramètre <code class="literal">of</code>.  Lisez
	    la section <a class="link" href="#printing-advanced-of" title="10.4.1.5. Filtres de sortie">Filtres de
	    sortie</a> pour plus de détails.</p><p>Voici un fichier <code class="filename">/etc/printcap</code>
	    d'exemple pour l'imprimante <code class="literal">teak</code> que nous
	    avons présentée plus haut; nous avons activé
	    les pages d'en-tête et ajouté le fichier de sortie
	    ci-dessus:</p><pre class="programlisting">#
#  /etc/printcap pour la machine orchid
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/hpif:\
        :vf=/usr/local/libexec/hpvf:\
        :of=/usr/local/libexec/hpof:</pre><p>Désormais, lorsque les utilisateurs lancent des
	    travaux d'impression avec <code class="literal">teak</code>, ils obtiennent
	    une page d'en-tête avec chaque travail d'impression.  Si
	    vos utilisateurs désirent perdre du temps à
	    rechercher leurs impressions, ils peuvent omettre la page
	    d'en-tête en soumettant le travail d'impression avec la
	    commande <code class="command">lpr -h</code>; lisez la section
	    <a class="link" href="#printing-lpr-options-misc" title="10.5.4.3. Header Page Options">Options des pages
	    d'en-tête</a> pour connaître plus d'options
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">LPD</span> imprime un
	      caractère de saut de page après une
	      page d'en-tête.  Si votre imprimante utilise un
	      autre caractère ou séquence de
	      caractères différente pour éjecter une page,
	      précisez-le avec le paramètre
	      <code class="literal">ff</code> dans
	      <code class="filename">/etc/printcap</code>.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-controlling"></a>10.4.2.2. Contrôle des pages d'en-tête</h4></div></div></div><p>Une fois les pages d'en-tête activées,
	    <span class="application">LPD</span> produira un <span class="emphasis"><em>en-tête
	    long</em></span>, c'est à dire une page entière de
	    grands caractères identifiant l'utilisateur, le nom
	    de la machine et le travail d'impression.  Voici un exemple
	    (<code class="systemitem">kelly</code> a lancé le travail d'impression nommé
	    <span class="quote">« <span class="quote">outline</span> »</span> depuis la machine <code class="systemitem">rose</code>):</p><pre class="programlisting">      k                   ll       ll
      k                    l        l
      k                    l        l
      k   k     eeee       l        l     y    y
      k  k     e    e      l        l     y    y
      k k      eeeeee      l        l     y    y
      kk k     e           l        l     y    y
      k   k    e    e      l        l     y   yy
      k    k    eeee      lll      lll     yyy y
                                               y
                                          y    y
                                           yyyy


                                   ll
                          t         l        i
                          t         l
       oooo    u    u   ttttt       l       ii     n nnn     eeee
      o    o   u    u     t         l        i     nn   n   e    e
      o    o   u    u     t         l        i     n    n   eeeeee
      o    o   u    u     t         l        i     n    n   e
      o    o   u   uu     t  t      l        i     n    n   e    e
       oooo     uuu u      tt      lll      iii    n    n    eeee









      r rrr     oooo     ssss     eeee
      rr   r   o    o   s    s   e    e
      r        o    o    ss      eeeeee
      r        o    o      ss    e
      r        o    o   s    s   e    e
      r         oooo     ssss     eeee







                                              Job:  outline
                                              Date: Sun Sep 17 11:04:58 1995</pre><p><span class="application">LPD</span> ajoute un saut de page
	    à ce texte de sorte que le travail d'impression commence
	    sur une nouvelle page (à moins que <code class="literal">sf</code>
	    (supprimer les sauts de page) ne soit dans l'entrée correspondant
	    à l'imprimante dans <code class="filename">/etc/printcap</code>).</p><p>Si vous préférez, <span class="application">LPD</span> peut
	    générer des <span class="emphasis"><em>en-tête courts</em></span>; ajoutez
	    le paramètre <code class="literal">sb</code> (en-tête court) dans le
	    fichier <code class="filename">/etc/printcap</code>. La
	    page d'en-tête ressemblera à ceci:</p><pre class="programlisting">rose:kelly  Job: outline  Date: Sun Sep 17 11:07:51 1995</pre><p>Par défaut également,
	    <span class="application">LPD</span> imprime d'abord la page
	    d'en-tête, puis le travail d'impression.  Pour inverser ce
	    comportement, placez le paramètre <code class="literal">hl</code>
	    (en-tête à la fin) dans <code class="filename">/etc/printcap</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-accounting"></a>10.4.2.3. Comptabiliser les pages d'en-tête</h4></div></div></div><p>Utiliser les pages d'en-tête fournies par
	    <span class="application">LPD</span> provoque un comportement
	    particulier lorsqu'il s'agit de comptabiliser l'utilisation de
	    l'imprimante: les pages d'en-tête doivent être
	    <span class="emphasis"><em>gratuites</em></span>.</p><p>Pourquoi?</p><p>Parce que le filtre de sortie est le seul programme externe
	    pouvant tenir les comptes qui aura le contrôle lors de
	    l'impression de la page d'en-tête, et qu'aucune
	    information sur <span class="emphasis"><em>l'utilisateur ou le nom
	    de la machine</em></span> ne lui est donnée ni aucun
	    fichier de comptabilisation, par conséquent il ne sait
	    pas à qui attribuer le coût de l'utilisation
	    de l'imprimante.  Il ne suffit pas non plus de
	    simplement <span class="quote">« <span class="quote">ajouter une page</span> »</span> au filtre
	    texte ou un quelconque filtre de conversion (qui, eux,
	    possèdent des informations sur l'utilisateur et la
	    machine) puisque les utilisateurs peuvent supprimer les
	    pages d'en-tête avec <code class="command">lpr -h</code>.  Ils
	    pourraient toujours se voir imputer des pages d'en-tête
	    qu'ils n'auraient pas imprimées.  En somme,
	    <code class="command">lpr -h</code> demeurera l'option favorite des
	    utilisateurs soucieux de l'environnement, mais vous ne pouvez
	    aucunement les inciter à l'utiliser.</p><p>Il ne <span class="emphasis"><em>suffit pas non plus</em></span> de
	    laisser chacun des filtres générer ses propres
	    pages d'en-tête (ce qui permettrait de savoir à
	    qui imputer les coûts).  Si les utilisateurs
	    désiraient omettre les pages d'en-tête avec
	    <code class="command">lpr -h</code>, ils les obtiendraient quand
	    même et le coût leur serait attribué puisque
	    <span class="application">LPD</span> ne donne aucun renseignement sur
	    l'emploi de l'option <code class="option">-h</code> à aucun des
	    filtres.</p><p>Alors, quelles sont les options à votre disposition?</p><p>Vous pouvez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accepter le comportement de
	        <span class="application">LPD</span> et la gratuité des pages
		d'en-tête.</p></li><li class="listitem"><p>Installer une alternative à
	        <span class="application">LPD</span>, comme
		<span class="application">LPRng</span>.  La section
		<a class="link" href="#printing-lpd-alternatives" title="10.6. Alternatives to the Standard Spooler ** Traduction en Cours **">Alternatives au
		gestionnaire d'impression standard</a> en
		dit plus au sujet des autres gestionnaires
		d'impression qui peuvent être
		substitués à
		<span class="application">LPD</span>.</p></li><li class="listitem"><p>Ecrire un filtre de sortie
	        <span class="emphasis"><em>intelligent</em></span>.  Normalement, un filtre de
		sortie n'est pas censé faire plus que d'initialiser
		une imprimante ou exécuter une conversion simple de
		caractères.  Il convient aux pages d'en-tête
		et aux travaux d'impression de texte brut (lorsqu'il n'y
		a aucun filtre (d'entrée) texte).  Mais, s'il
		existe un filtre texte pour les travaux d'impression de texte, alors <span class="application">LPD</span> ne lancera
		le filtre de sortie que pour les pages d'en-tête.  Le
		filtre de sortie peut également analyser le texte
		de la page d'en-tête généré par
		<span class="application">LPD</span> pour déterminer quels
		sont l'utilisateur et la machine à qui il faut
		attribuer le coût de cette page d'en-tête.  Le
		seul autre problème avec cette méthode est
		que le filtre de sortie ne sait toujours pas quel fichier
		de comptabilisation utiliser (le nom du fichier
		spécifié par le paramètre
		<code class="literal">af</code> ne lui est pas fourni), mais si vous
		disposez d'un fichier de comptabilisation bien
		identifié, vous pouvez le coder en dur dans le
		filtre de sortie.  Afin de faciliter l'étape d'analyse,
		utilisez le paramètre <code class="literal">sh</code>
		(en-tête courte) dans <code class="filename">/etc/printcap</code>.  D'un
		autre côté, tout cela pourrait bien
		représenter beaucoup de dérangement, et les
		utilisateurs apprécieront certainement davantage
		l'administrateur généreux qui propose la
		gratuité des pages d'en-tête.</p></li></ul></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-header-pages-ps"></a>10.4.2.4. Les pages d'en-tête sur les imprimantes
	    <span class="trademark">PostScript</span>®</h4></div></div></div><p>Comme décrit précédemment,
	    <span class="application">LPD</span> est en mesure de
	    générer des pages d'en-tête texte convenant
	    pour de nombreuses d'imprimantes.  Bien entendu, <span class="trademark">PostScript</span>®
	    ne peut pas imprimer du texte directement, donc la
	    fonctionnalité de page d'en-tête offerte par
	    <span class="application">LPD</span> est inutilisable ou presque.</p><p>Une solution manifeste est de faire générer
	    la page d'en-tête par tous les filtres de conversion et
	    le filtre texte.  Les filtres devraient employer les
	    paramètres utilisateur et nom de machine pour
	    générer une page d'en-tête convenable.
	    L'inconvénient de cette méthode est que les
	    utilisateurs obtiendront toujours une page d'en-tête,
	    même s'ils soumettent leurs travaux d'impression avec
	    <code class="command">lpr -h</code>.</p><p>Examinons cette méthode.  La procédure ci-dessous prend
	    trois paramètres (le nom de l'utilisateur, le nom
	    de la machine et celui du travail d'impression) et
	    réalise une page d'en-tête simple en <span class="trademark">PostScript</span>®:</p><pre class="programlisting">#!/bin/sh
#
#  make-ps-header - génére une page d'en-tête PostScript sur la sortie standard
#  Fichier /usr/local/libexec/make-ps-header
#

#
#  Ce sont des unités PostScript (72 par pouce).  A modifier pour A4 ou
#  tout autre format papier employé:
#
page_width=612
page_height=792
border=72

#
#  Vérification des paramètres
#
if [ $# -ne 3 ]; then
    echo "Usage: `basename $0` &lt;user&gt; &lt;host&gt; &lt;job&gt;" 1&gt;&amp;2
    exit 1
fi

#
#  Mémorisation des paramètres, pour la lisibilité du PostScript, plus bas.
#
user=$1
host=$2
job=$3
date=`date`

#
#  Envoi du code PostScript sur stdout.
#
exec cat &lt;&lt;EOF
%!PS

%
%  Assurons-nous qu'il n'y a pas d'interférence avec le travail
%  utilisateur qui suivra
%
save

%
%  Applique une grosse bordure désagréable autour
%  du bord de la page.
%
$border $border moveto
$page_width $border 2 mul sub 0 rlineto
0 $page_height $border 2 mul sub rlineto
currentscreen 3 -1 roll pop 100 3 1 roll setscreen
$border 2 mul $page_width sub 0 rlineto closepath
0.8 setgray 10 setlinewidth stroke 0 setgray

%
%  Affiche le nom de l'utilisateur, de façon jolie, grande et proéminente
%
/Helvetica-Bold findfont 64 scalefont setfont
$page_width ($user) stringwidth pop sub 2 div $page_height 200 sub moveto
($user) show

%
%  Maintenant, les détails ennuyant:
%
/Helvetica findfont 14 scalefont setfont
/y 200 def
[ (Job:) (Host:) (Date:) ] {
200 y moveto show /y y 18 sub def }
forall

/Helvetica-Bold findfont 14 scalefont setfont
/y 200 def
[ ($job) ($host) ($date) ] {
        270 y moveto show /y y 18 sub def
} forall

%
% C'est tout
%
restore
showpage
EOF</pre><p>Désormais, chacun des filtres de conversion et le
	    filtre texte peuvent appeler cette procédure pour d'abord
	    générer la page d'en-tête, et ensuite imprimer
	    le travail d'impression de l'utilisateur.  Voici le filtre
	    de conversion DVI déjà mentionné plus
	    haut dans ce document, modifié afin de
	    générer une page d'en-tête:</p><pre class="programlisting">#!/bin/sh
#
#  psdf - filtre DVI vers imprimante PostScript
#  Fichier /usr/local/libexec/psdf
#
#  Appelé par lpd quand l'utilisateur lance lpr -d
#

orig_args="$@"

fail() {
    echo "$@" 1&gt;&amp;2
    exit 2
}

while getopts "x:y:n:h:" option; do
    case $option in
        x|y)  ;; # Ignore
        n)    login=$OPTARG ;;
        h)    host=$OPTARG ;;
        *)    echo "LPD started `basename $0` wrong." 1&gt;&amp;2
              exit 2
              ;;
    esac
done

[ "$login" ] || fail "Pas de nom d'utilisateur"
[ "$host" ] || fail "PAs de nom de machine"

( /usr/local/libexec/make-ps-header $login $host "DVI File"
  /usr/local/bin/dvips -f ) | eval /usr/local/libexec/lprps $orig_args</pre><p>Observez que le filtre doit analyser la liste des
	    paramètres pour déterminer le nom de l'utilisateur et
	    celui de la machine.  L'analyse menée par les autres
	    filtres de conversion est identique.  Toutefois, le filtre
	    texte réclame un ensemble de paramètres
	    légèrement différent (voyez la section
	    <a class="link" href="#printing-advanced-filters" title="10.4.1.1. Fonctionnement des filtres">Fonctionnement
	    des filtres</a>).</p><p>Comme précédemment exposé, cette solution,
	    quoique relativement simple, invalide l'option de
	    <span class="quote">« <span class="quote">suppression de page d'en-tête</span> »</span> (l'option
	    <code class="option">-h</code>) de <code class="command">lpr</code>.  Si les
	    utilisateurs désiraient épargner la vie d'un
	    arbre (ou économiser quelques centimes, si vous faites
	    payer les pages d'en-tête), ils ne seraient pas en
	    mesure de le faire, puisque chaque filtre va imprimer une page
	    d'en-tête avec chaque travail d'impression.</p><p>Pour permettre aux utilisateurs de désactiver les
	    pages d'en-tête en fonction du travail d'impression,
	    il vous faudra recourir à l'une
	    des astuces de la section <a class="link" href="#printing-advanced-header-pages-accounting" title="10.4.2.3. Comptabiliser les pages d'en-tête">Comptabiliser
	      les pages d'en-tête</a>: écrire un filtre de
	    sortie qui analyse la page d'en-tête
	    générée par LPD et produit une version
	    <span class="trademark">PostScript</span>®.  Si l'utilisateur soumet le travail d'impression
	    avec <code class="command">lpr -h</code> alors ni
	    <span class="application">LPD</span> ni votre filtre de sortie ne
	    généreront de page d'en-tête.  Sinon, votre
	    filtre de sortie lira le texte en provenance de <span class="application">LPD</span>
	    et enverra la page d'en-tête <span class="trademark">PostScript</span>® appropriée
	    à l'imprimante.</p><p>Si vous disposez d'une imprimante <span class="trademark">PostScript</span>® sur une
	    interface série, vous pouvez utiliser
	    <code class="command">lprps</code>, qui est livré avec un filtre
	    de sortie, <code class="command">psof</code>, qui réalise ce que
	    nous venons d'exposer ci-dessus.  Notez que
	    <code class="command">psof</code> n'assume pas la tenue de comptes pour
	    les pages d'en-tête.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-network-printers"></a>10.4.3. Imprimer via un réseau</h3></div></div></div><a id="idp72566736" class="indexterm"></a><a id="idp72567888" class="indexterm"></a><p>FreeBSD gère l'impression via un réseau: c'est
        à dire en envoyant les travaux d'impression à des
	imprimantes distantes.  L'impression via un réseau
	désigne deux choses différentes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accéder à une imprimante connectée
	    à une machine distante.  Vous installez une imprimante
	    disposant d'une interface conventionnelle, série ou
	    parallèle, sur une machine.  Puis vous configurez
	    <span class="application">LPD</span> pour permettre l'accès
	    à l'imprimante depuis d'autres machines du
	    réseau.  La section <a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. Imprimantes installées sur des machines distantes">Imprimantes
	      installées sur des machines distantes</a> en
	    détaillera la mise en &#339;uvre.</p></li><li class="listitem"><p>Accéder à une imprimante directement
	    connectée au réseau.  L'imprimante dispose d'une
	    interface réseau en plus (ou à la place)
	    d'interfaces plus conventionnelles, série ou
	    parallèle.  Une imprimante de ce genre peut fonctionner
	    ainsi:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Elle peut comprendre le protocole <span class="application">LPD</span>
	        et sait même gérer une file d'attente de travaux
		d'impression provenant de machines distantes.  En ce cas,
		elle se comporte comme une machine normale qui
		exécuterait <span class="application">LPD</span>.  Suivez
		la même procédure que celle exposée
		à la section <a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. Imprimantes installées sur des machines distantes">Imprimantes
		  installées sur des machines distantes</a> afin
		de configurer une imprimante de ce genre.</p></li><li class="listitem"><p>Elle peut savoir gérer un flux de données au
	        travers d'une connexion réseau.  Dans ce cas, vous
		pouvez <span class="quote">« <span class="quote">attacher</span> »</span> l'imprimante à l'une
		des machines du réseau en la rendant responsable
		de la gestion de la file d'impression et de l'envoi des
		travaux d'impression à l'imprimante.  La section
		<a class="link" href="#printing-advanced-network-net-if" title="10.4.3.2. Imprimantes avec des interfaces utilisant des flux réseau">Imprimantes
		  avec des interfaces utilisant des flux réseau</a>
		donne quelque indications sur l'installation d'imprimantes de ce
		type.</p></li></ul></div></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-network-rm"></a>10.4.3.1. Imprimantes installées sur des machines
	  distantes</h4></div></div></div><p>Le gestionnaire d'impression <span class="application">LPD</span>
	  dispose des fonctions pour gérer l'envoi des travaux d'impression à
	  d'autres machines exécutant également
	  <span class="application">LPD</span> (ou un système qui lui
	  est compatible).  Cette fonctionnalité vous permet
	  d'installer une imprimante sur une machine, puis de
	  la rendre accessible depuis les autres
	  machines.  Cela fonctionne également avec les imprimantes
	  disposant d'interfaces réseau comprenant le protocole
	  <span class="application">LPD</span>.</p><p>Pour activer ce type d'impression à distance, installez
	  d'abord une imprimante sur une machine, qui sera
	  <span class="emphasis"><em>la machine d'impression</em></span>, en suivant les
	  instructions de configuration basique décrites à la
	  section <a class="link" href="#printing-simple" title="10.3.1. Configuration simple de l'imprimante">Configuration simple de
	    l'imprimante</a>.  Réalisez toute étape de
	  la <a class="link" href="#printing-advanced" title="10.4. Configuration avancée de l'imprimante">configuration avancée
	    de l'imprimante</a> dont vous pourriez avoir besoin.  Veillez à
	  tester
	  l'imprimante et vérifiez qu'elle fonctionne avec les
	  paramètres de <span class="application">LPD</span> que vous avez
	  activés.  Assurez-vous également que
	  <span class="emphasis"><em>la machine locale</em></span> est autorisée à
	  utiliser le service <span class="application">LPD</span> sur
	  <span class="emphasis"><em>la machine distante</em></span> (lisez la section
	  <a class="link" href="#printing-advanced-restricting-remote" title="10.4.4.4. Restreindre les impressions à distance">Restreindre
	    les impressions à distance</a>).</p><a id="idp72607056" class="indexterm"></a><a id="idp72608208" class="indexterm"></a><p>Si vous utilisez une imprimante avec une interface
	  réseau qui est compatible avec
	  <span class="application">LPD</span>, alors <span class="emphasis"><em>la machine
	    d'impression</em></span> dans le texte ci-dessous est
	  l'imprimante elle-même, et le <span class="emphasis"><em>nom de
	    l'imprimante</em></span> est le nom que vous avez
	  paramétré pour l'imprimante.  Lisez la documentation
	  livrée avec votre imprimante ou l'interface
	  réseau-imprimante.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous utilisez une Hewlett Packard Laserjet, alors le
	    nom d'imprimante <code class="literal">text</code> réalisera
	    la conversion LF en CRLF automatiquement, de sorte que vous
	    n'aurez pas besoin de la procédure <code class="filename">hpif</code>.</p></div><p>Ensuite, sur les autres machines pour lesquelles vous
	  désirez autoriser l'accès à l'imprimante,
	  créez une ligne dans leur
	  <code class="filename">/etc/printcap</code> avec les paramètres
	  suivants:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Nommez cette entrée comme vous le voulez.  Par
	      souci de simplicité, cependant, vous
	      préférerez certainement employer les
	      mêmes nom et alias que ceux utilisés sur
	      la machine de d'impression.</p></li><li class="listitem"><p>Laissez le paramètre <code class="literal">lp</code>
	    non-renseigné,
	      de manière explicite (<code class="literal">:lp=:</code>).</p></li><li class="listitem"><p>Créez un répertoire de file d'impression et
	      indiquez son chemin d'accès dans le paramètre
	      <code class="literal">sd</code>.  C'est là où
	      <span class="application">LPD</span> entreposera les travaux
	      d'impression avant leur envoi vers la machine
	      d'impression.</p></li><li class="listitem"><p>Indiquez le nom de la machine d'impression avec le paramètre
	      <code class="literal">rm</code>.</p></li><li class="listitem"><p>Placez le nom de l'imprimante sur <span class="emphasis"><em>la
	      machine d'impression</em></span> dans le paramètre
	      <code class="literal">rp</code>.</p></li></ol></div><p>C'est tout.  Il n'est pas nécessaire de préciser
	  la liste des filtres de conversion, les dimensions de la page,
	  ou quoique ce soit d'autre dans le fichier
	  <code class="filename">/etc/printcap</code>.</p><p>Voici un exemple.  La machine <code class="systemitem">rose</code> dispose
	  de deux imprimantes, <code class="literal">bamboo</code> et
	  <code class="literal">rattan</code>.  Nous allons permettre aux utilisateurs
	  de la machine <code class="systemitem">orchid</code> d'imprimer avec ces
	  imprimantes.
	  Voici le fichier <code class="filename">/etc/printcap</code> pour
	  <code class="systemitem">orchid</code> (apparu dans la section
	  <a class="link" href="#printing-advanced-header-pages-enabling" title="10.4.2.1. Activer les pages d'en-tête">Activer
	    les pages d'en-tête</a>).  Il contenait
	  déjà une entrée pour l'imprimante
	  <code class="literal">teak</code>; nous avons ajouté celles pour
	  les deux imprimantes sur la machine <code class="systemitem">rose</code>:</p><pre class="programlisting">#
#  /etc/printcap pour la machine orchid - ajout d'imprimantes (distantes)
#    sur rose
#

#
#  teak est locale; connectée directement à orchid:
#
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:\
        :if=/usr/local/libexec/ifhp:\
        :vf=/usr/local/libexec/vfhp:\
        :of=/usr/local/libexec/ofhp:

#
#  rattan est connectée à rose; envoie les travaux pour rattan
#    à rose:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=/var/spool/lpd/rattan:

#
#  bamboo est également connectée à rose:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=/var/spool/lpd/bamboo:</pre><p>Ensuite, nous n'avons qu'à créer les
	  répertoires de file d'impression sur
	  <code class="systemitem">orchid</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /var/spool/lpd/rattan /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 770 /var/spool/lpd/rattan /var/spool/lpd/bamboo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown daemon:daemon /var/spool/lpd/rattan /var/spool/lpd/bamboo</code></strong></pre><p>Maintenant les utilisateurs d'<code class="systemitem">orchid</code>
	  peuvent imprimer sur <code class="literal">rattan</code> et
	  <code class="literal">bamboo</code>.  Par exemple, si un utilisateur sur
	  <code class="systemitem">orchid</code> entrait:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr -P bamboo -d sushi-review.dvi</code></strong></pre><p>le système <span class="application">LPD</span> sur
	  <code class="systemitem">orchid</code> copierait le travail d'impression dans le
	  répertoire de file d'impression
	  <code class="filename">/var/spool/lpd/bamboo</code> et relèverait qu'il
	  s'agit d'un travail d'impression DVI.  Dès que la machine
	  <code class="systemitem">rose</code> dispose d'assez de place dans son
	  répertoire de file d'impression, les
	  deux <span class="application">LPD</span>
	  transfèrent le fichier à <code class="systemitem">rose</code>.  Le
	  fichier reste en attente dans la file de <code class="systemitem">rose</code>
	  jusqu'à son impression.  Il sera converti de DVI en
	  <span class="trademark">PostScript</span>® (puisque <code class="literal">bamboo</code> est une imprimante
	  <span class="trademark">PostScript</span>®) sur <code class="systemitem">rose</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-network-net-if"></a>10.4.3.2. Imprimantes avec des interfaces utilisant des flux
	  réseau</h4></div></div></div><p>Bien souvent, lorsque vous achetez une carte d'interface
	  réseau pour une imprimante, vous avez le choix entre
	  deux versions: l'une qui émule un
	  gestionnaire d'impression (la version la plus onéreuse), ou
	  une autre qui ne vous permet que de lui envoyer des
	  données comme s'il s'agissait d'un port série ou
	  parallèle (c'est la version la moins chère).  Cette
	  section vous indique comment utiliser cette seconde version moins
	  onéreuse.  Pour la plus chère, lisez la section
	  précédente <a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. Imprimantes installées sur des machines distantes">Imprimantes
	    installées sur des machines distantes</a>.</p><p>Le format du fichier <code class="filename">/etc/printcap</code> vous
	  permet de préciser quelle interface série ou
	  parallèle vous souhaitez utiliser, et (si vous employez
	  une interface série) à quelle vitesse de
	  transmission, s'il faut employer le contrôle de flux, les
	  temporisations pour les tabulations, la conversion des sauts de
	  lignes, et plus encore.  Mais il n'existe aucun moyen de
	  préciser une connexion à une imprimante qui
	  écoute sur un port TCP/IP ou un autre port réseau.</p><p>Pour envoyer des données à une imprimante mise
	  en réseau, il vous faut développer un programme
	  de communication qui puisse être appelé par les
	  filtres textes et de conversion.  Voici un exemple: la procédure
	  <code class="command">netprint</code> récupère toutes les données sur
	  l'entrée standard et les envoie à une imprimante
	  connectée au réseau.  Nous précisons le nom de machine
	  de l'imprimante dans le premier paramètre et le
	  numéro de port auquel se connecter dans le
	  deuxième paramètre de <code class="command">netprint</code>.
	  Notez qu'il ne gère que la communication unidirectionnelle
	  (dans le sens FreeBSD vers imprimante); de nombreuses imprimantes
	  réseau supporte la communication bidirectionnelle, et
	  vous désirerez certainement en tirer parti (afin de
	  connaître le statut de l'imprimante, de comptabiliser
	  l'utilisation, etc.).</p><pre class="programlisting">#!/usr/bin/perl
#
#  netprint - Filtre texte pour imprimante connectée au réseau
#  Fichier /usr/local/libexec/netprint
#
$#ARGV eq 1 || die "Usage: $0 &lt;printer-hostname&gt; &lt;port-number&gt;";

$printer_host = $ARGV[0];
$printer_port = $ARGV[1];

require 'sys/socket.ph';

($ignore, $ignore, $protocol) = getprotobyname('tcp');
($ignore, $ignore, $ignore, $ignore, $address)
    = gethostbyname($printer_host);

$sockaddr = pack('S n a4 x8', &amp;AF_INET, $printer_port, $address);

socket(PRINTER, &amp;PF_INET, &amp;SOCK_STREAM, $protocol)
    || die "Can't create TCP/IP stream socket: $!";
connect(PRINTER, $sockaddr) || die "Can't contact $printer_host: $!";
while (&lt;STDIN&gt;) { print PRINTER; }
exit 0;</pre><p>Nous pouvons maintenant utiliser cette procédure avec
	  différents filtres.  Supposons que nous ayons une
	  imprimante Diablo 750-N connectée au réseau.  Elle
	  reçoit les données à imprimer sur le port
	  5100.  Le nom de machine de l'imprimante est
	  <code class="systemitem">scrivener</code>.  Voici le filtre texte
	  pour cette imprimante:</p><pre class="programlisting">#!/bin/sh
#
#  diablo-if-net - Filtre texte pour l'imprimante  Diablo `scrivener' écoutant
#  le port 5100.  Fichier /usr/local/libexec/diablo-if-net
#
exec /usr/libexec/lpr/lpf "$@" | /usr/local/libexec/netprint scrivener 5100</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting"></a>10.4.4. Restreindre l'utilisation de l'imprimante</h3></div></div></div><a id="idp72650832" class="indexterm"></a><p>Cette section fournit des informations sur la restriction
        de l'utilisation de l'imprimante.  Le système <span class="application">LPD</span>
	vous permet de contrôler quels utilisateurs peuvent
	accéder à une imprimante, tant localement
	qu'à distance, s'il leur est autorisé d'imprimer
	en plusieurs exemplaires, quelles sont les tailles maximales de leurs
	travaux d'impression et des files d'impression.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-copies"></a>10.4.4.1. Restreindre l'impression en plusieurs exemplaires</h4></div></div></div><p>Le système <span class="application">LPD</span> facilite l'impression de
	  plusieurs copies d'un même fichier par les
	  utilisateurs.  Ils peuvent imprimer leur travail
	  avec <code class="command">lpr -#5</code> (par exemple)
	  et obtenir cinq exemplaires de chaque fichier du travail
	  d'impression.  Le fait de savoir s'il s'agit là d'une
	  bonne idée vous appartient.</p><p>Si vous estimez que les copies multiples provoquent
	  charge et usure inutiles pour vos imprimantes, vous
	  pouvez désactiver l'option <code class="option">-#</code> de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> en ajoutant le paramètre <code class="literal">sc</code>
	  au fichier <code class="filename">/etc/printcap</code>.  Lorsque des
	  utilisateurs soumettront un travail d'impression avec l'option
	  <code class="option">-#</code>, ils obtiendront cet affichage:</p><pre class="screen">lpr: multiple copies are not allowed</pre><p>Notez que si vous avez mis en &#339;uvre l'accès
	  à une imprimante distante (voir la section
	  <a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. Imprimantes installées sur des machines distantes">Imprimantes
	    installées sur des machines distantes</a>), il
	  faut que le paramètre <code class="literal">sc</code> soit
	  positionné sur les <code class="filename">/etc/printcap</code>
	  distants également, sinon vos utilisateurs auront
	  toujours la possibilité d'imprimer des copies multiples
	  en passant par une autre machine.</p><p>Voici un exemple.  C'est le <code class="filename">/etc/printcap</code>
	  pour la machine <code class="systemitem">rose</code>.  L'imprimante
	  <code class="literal">rattan</code> est plutôt robuste, et
	  autorisera donc les copies multiples, par contre l'imprimante
	  laser <code class="literal">bamboo</code> est quant à elle plus
	  délicate, nous interdiront donc les impressions multiples en ajoutant le
	  paramètre <code class="literal">sc</code>:</p><pre class="programlisting">#
#  /etc/printcap pour la machine rose - restreint les impressions en plusieurs exemplaires sur bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre><p>Maintenant, il nous faut également ajouter le
	  paramètre <code class="literal">sc</code> dans le fichier
	  <code class="filename">/etc/printcap</code> de <code class="systemitem">orchid</code>
	  (et tant que nous y sommes, désactivons les copies multiples
	  pour l'imprimante <code class="literal">teak</code>):</p><pre class="programlisting">#
#  /etc/printcap pour la machine orchid - pas d'impression en
#  plusieurs exemplaires pour
#  l'imprimante locale teak ou l'imprimante distante bamboo
teak|hp|laserjet|Hewlett Packard LaserJet 3Si:\
        :lp=/dev/lpt0:sd=/var/spool/lpd/teak:mx#0:sc:\
        :if=/usr/local/libexec/ifhp:\
        :vf=/usr/local/libexec/vfhp:\
        :of=/usr/local/libexec/ofhp:

rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :lp=:rm=rose:rp=rattan:sd=/var/spool/lpd/rattan:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :lp=:rm=rose:rp=bamboo:sd=/var/spool/lpd/bamboo:sc:</pre><p>En recourant au paramètre <code class="literal">sc</code>,
	  nous empêchons l'utilisation de <code class="command">lpr -#</code>,
	  mais cela n'empêche toujours pas les utilisateurs de
	  lancer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lpr</span>(1)</span></a> à plusieurs reprises, ou de soumettre
	  le même fichier plusieurs fois en un seul travail, de
	  cette façon:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>lpr forsale.sign forsale.sign forsale.sign forsale.sign forsale.sign</code></strong></pre><p>Il existe plusieurs moyens de prévenir ces abus (y
	  compris les ignorer) que vous êtes libres d'essayer.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-access"></a>10.4.4.2. Restreindre l'accès aux imprimantes</h4></div></div></div><p>Vous pouvez contrôler qui a le droit d'imprimer sur
	  quelles imprimantes en utilisant le mécanisme des
	  groupes <span class="trademark">UNIX</span>® et le paramètre <code class="literal">rg</code> dans
	  <code class="filename">/etc/printcap</code>.  Placez simplement les
	  utilisateurs à qui vous voulez donner l'accès
	  à une imprimante dans un groupe, et précisez ce
	  groupe avec le paramètre <code class="literal">rg</code>.</p><p>Les utilisateurs n'appartenant pas au groupe
	  (<code class="systemitem">root</code> inclus) se verront gratifiés d'un

          <span class="errorname">lpr: Not a member of the restricted group</span>

	  s'ils essaient d'imprimer avec l'imprimante
	  contrôlée.</p><p>De même que pour le paramètre <code class="literal">sc</code>
	  (supprimer les exemplaires multiples), il vous faut activer <code class="literal">rg</code>
	  sur les machines distantes qui eux aussi ont
	  accès à vos imprimantes, si vous estimez que
	  c'est approprié (voir la section <a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. Imprimantes installées sur des machines distantes">Imprimantes
	    installées sur des machines distantes</a>).</p><p>Dans notre exemple, nous allons permettre l'accès
	  à <code class="literal">rattan</code> à quiconque, mais
	  seuls les membres du groupe <code class="systemitem">artists</code>
	  pourront utiliser <code class="literal">bamboo</code>.  Voici l'habituel
	  <code class="filename">/etc/printcap</code> pour la machine
	  <code class="systemitem">rose</code>:</p><pre class="programlisting">#
#  /etc/printcap pour la machine rose - restreint au groupe pour bamboo
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre><p>Ne nous préoccupons pas de l'autre fichier
	  <code class="filename">/etc/printcap</code> (pour la machine
	  <code class="systemitem">orchid</code>).  Bien entendu, n'importe qui sur
	  <code class="systemitem">orchid</code> peut imprimer avec
	  <code class="literal">bamboo</code>.  Selon le cas, nous pourrons autoriser
	  que certains utilisateurs sur <code class="systemitem">orchid</code>, et
	  leur donner accès à
	  l'imprimante.  Ou non.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il ne peut exister qu'un seul groupe de restriction par
	    imprimante.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-sizes"></a>10.4.4.3. Contrôler la taille des travaux d'impression</h4></div></div></div><a id="idp72697424" class="indexterm"></a><p>Si beaucoup de vos utilisateurs accèdent aux
	  imprimantes, vous aurez sans doute besoin de fixer une
	  limite supérieure à la taille des fichiers qu'ils
	  peuvent soumettre à l'impression.  Après
	  tout, le système de fichiers hébergeant les
	  répertoires de file d'impression ne peut offrir
	  que l'espace libre dont il dispose, et vous devez
	  également vous assurer que de la place existe pour
	  les travaux d'impression des autres utilisateurs.</p><a id="idp72698320" class="indexterm"></a><p><span class="application">LPD</span> vous permet de fixer la
	  taille maximale en octets qu'un fichier d'un travail
	  d'impression peut atteindre avec le paramètre
	  <code class="literal">mx</code>.  Les unités sont exprimées
	  en blocs de <code class="literal">BUFSIZ</code>, valant 1024 octets.  Si
	  vous donnez la valeur 0 à ce paramètre, la
	  taille ne sera pas du tout limitée; en revanche, si
	  aucun paramètre <code class="literal">mx</code> n'est
	  défini, alors une limite par défaut de
	  1000 blocs sera utilisée.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La limite s'applique aux <span class="emphasis"><em>fichiers</em></span> dans
	    un travail d'impression, et <span class="emphasis"><em>non pas</em></span> à
	    la taille totale du travail d'impression.</p></div><p><span class="application">LPD</span> ne refusera pas un fichier
	  dont la taille excède la limite que vous fixez pour
	  une imprimante.  Au lieu de cela, il placera les octets
	  du fichier dans la file jusqu'à ce que la limite soit
	  atteinte, puis imprimera.  Les octets supplémentaires
	  seront ignorés.  S'il s'agit là d'un comportement
	  approprié est un choix qui vous appartient.</p><p>Ajoutons des limites pour nos imprimantes d'exemple,
	  <code class="literal">rattan</code> et <code class="literal">bamboo</code>.  Puisque
	  les fichiers <span class="trademark">PostScript</span>® des utilisateurs du groupe <code class="systemitem">artists</code> ont tendance à
	  être volumineux, nous allons les limiter à cinq
	  mégaoctets.  Nous ne fixerons aucune limite pour l'imprimante
	  texte:</p><pre class="programlisting">#
#  /etc/printcap pour la machine rose
#

#
#  Pas de limite sur la taille des travaux:
#
rattan|line|diablo|lp|Diablo 630 Line Printer:\
        :sh:mx#0:sd=/var/spool/lpd/rattan:\
        :lp=/dev/lpt0:\
        :if=/usr/local/libexec/if-simple:

#
#  Limite de cinq mégaoctets:
#
bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:mx#5000:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre><p>Là encore, les limites ne s'appliquent qu'aux
	  utilisateurs locaux.  Si vous avez mis en place un accès
	  distant à vos imprimantes, les utilisateurs distants ne
	  seront pas contraints par ces limites.  Il vous faudra
	  positionner le paramètre <code class="literal">mx</code> dans les
	  fichiers
	  <code class="filename">/etc/printcap</code> distants également.  Lisez
	  la section <a class="link" href="#printing-advanced-network-rm" title="10.4.3.1. Imprimantes installées sur des machines distantes">Imprimantes
	    installées sur des machines distantes</a> pour
	  obtenir plus d'informations sur l'impression à
	  distance.</p><p>Il existe une autre manière spécifique pour
	  limiter la taille des travaux d'impression sur les imprimantes
	  à distance; lisez la section <a class="link" href="#printing-advanced-restricting-remote" title="10.4.4.4. Restreindre les impressions à distance">Restreindre les
	    impressions à distance</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-restricting-remote"></a>10.4.4.4. Restreindre les impressions à distance</h4></div></div></div><p>Le gestionnaire d'impression
	  <span class="application">LPD</span> propose plusieurs moyens de
	  restreindre les travaux d'impression soumis depuis des
	  machines distants:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Restrictions en fonction des machines</span></dt><dd><p>Vous pouvez contrôler de quelles machines
	        distantes les requêtes seront acceptées par
		un <span class="application">LPD</span> local avec les fichiers
		<code class="filename">/etc/hosts.equiv</code> et
		<code class="filename">/etc/hosts.lpd</code>.
		<span class="application">LPD</span> vérifie qu'une
		requête entrante provient d'une machine listée
		dans l'un de ces deux fichiers.  Si ce n'est pas le cas,
		<span class="application">LPD</span> refuse la requête.</p><p>Le format de ces fichiers est simple: un nom de machine
	        par ligne.  Notez que <code class="filename">/etc/hosts.equiv</code>
		est également utilisé par le protocole
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a>, et qu'il a un impact sur des programmes
		comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>, aussi soyez prudent.</p><p>Par exemple, voici le fichier
	        <code class="filename">/etc/hosts.lpd</code> présent sur la
		machine
		<code class="systemitem">rose</code>:</p><pre class="programlisting">orchid
violet
madrigal.fishbaum.de</pre><p>Cela signifie que <code class="systemitem">rose</code> accepte les
	        requêtes provenant des machines
		 <code class="systemitem">orchid</code>, <code class="systemitem">violet</code> et
		 <code class="systemitem">madrigal.fishbaum.de</code>.  Si une
		 quelconque autre machine tente d'accéder au
		 <span class="application">LPD</span> de <code class="systemitem">rose</code>,
		 le travail d'impression sera refusé.</p></dd><dt><span class="term">Restrictions sur la taille</span></dt><dd><p>Vous pouvez contrôler combien d'espace doit
	        demeurer libre sur le système de fichiers où
		se trouve un répertoire de file d'impression.
		Créez un fichier nommé
		<code class="filename">minfree</code> dans le répertoire de
		file d'impression pour l'imprimante locale.
		Placez dans ce fichier un nombre représentant combien
		de blocs disques (de 512 octets) d'espace libre il
		doit rester pour qu'un travail d'impression soit
		accepté.</p><p>Cela vous permet de vous assurer que des utilisateurs
	        distants ne rempliront pas votre système de
		fichiers.  Vous pouvez également vous en servir pour
		accorder une certaine priorité aux utilisateurs
		locaux: ils pourront placer des travaux d'impression dans
		la file bien après que l'espace libre soit tombé
		sous le seuil indiqué dans le fichier
		<code class="filename">minfree</code>.</p><p>Par exemple, ajoutons un fichier
	        <code class="filename">minfree</code> pour l'imprimante
		<code class="literal">bamboo</code>.  Nous examinons
		<code class="filename">/etc/printcap</code> pour trouver le
		répertoire de file d'impression pour cette
		imprimante; voici l'entrée concernant
		<code class="literal">bamboo</code>:</p><pre class="programlisting">bamboo|ps|PS|S|panasonic|Panasonic KX-P4455 PostScript v51.4:\
        :sh:sd=/var/spool/lpd/bamboo:sc:rg=artists:mx#5000:\
        :lp=/dev/ttyd5:ms#-parenb cs8 clocal crtscts:rw:mx#5000:\
        :if=/usr/local/libexec/psif:\
        :df=/usr/local/libexec/psdf:</pre><p>Le répertoire de file d'impression est
	        précisé par le paramètre
		<code class="literal">sd</code>.  Nous placerons à trois
		méga-octets (soit 6144 blocs disque) la limite
		d'espace libre devant exister sur le système de
		fichiers pour que <span class="application">LPD</span> accepte
		les travaux d'impression distants:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 6144 &gt; /var/spool/lpd/bamboo/minfree
              </code></strong></pre></dd><dt><span class="term">Restrictions sur l'utilisateur</span></dt><dd><p>Vous pouvez contrôler quels utilisateurs distants
	        ont le droit d'imprimer sur les imprimantes locales en
		positionnant le paramètre <code class="literal">rs</code>
		dans <code class="filename">/etc/printcap</code>.  Lorsque
		<code class="literal">rs</code> est présent dans
		l'entrée d'une imprimante connectée
		localement, <span class="application">LPD</span> acceptera les
		travaux d'impressions de machines distantes
		<span class="emphasis"><em>si</em></span> l'utilisateur soumettant le travail
		possède également un compte sous le
		même nom sur la machine locale.  Sinon,
		<span class="application">LPD</span> refusera le travail
		d'impression.</p><p>Ce paramètre se révèle
	        particulièrement utile dans un environnement
		où (par exemple) existent plusieurs services
		qui partagent un réseau, et que des utilisateurs
		débordent les frontières de ces services.  En
		leur donnant des comptes sur vos systèmes, vous
		leur permettez d'utiliser vos imprimantes depuis les
		systèmes de leur propre service.  Si vous
		préférez les autoriser à n'utiliser
		<span class="emphasis"><em>que</em></span> vos imprimantes et pas les
		autres ressources de l'ordinateur, alors vous pouvez leur
		attribuer des comptes <span class="quote">« <span class="quote">bloqués</span> »</span>, sans
		répertoire de connexion et avec un interpréteur de
		commandes
		inutilisable comme <code class="filename">/usr/bin/false</code>.</p></dd></dl></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-advanced-acct"></a>10.4.5. Comptabiliser l'utilisation de l'imprimante</h3></div></div></div><a id="idp72752208" class="indexterm"></a><p>Donc vous voulez faire payer vos impressions.  Et pourquoi pas?
        Le papier et l'encre coûtent de l'argent.  Et puis, il y a les
	coûts de maintenance&#8212;les imprimantes sont constituées
	de pièces mobiles et ont tendance à tomber en panne.
	Vous avez étudié vos imprimantes, vos modes
	d'utilisation et factures de maintenance, et avez abouti à
	un coût par page (ou par pied, par mètre, ou
	par ce que vous voulez).  Maintenant, comment commencer à
	comptabiliser les impressions, dans les faits?</p><p>Eh bien, la mauvaise nouvelle est que le
        gestionnaire d'impression <span class="application">LPD</span> ne vous aide
	pas beaucoup dans ce domaine.  La comptabilisation dépend
	fortement du type d'imprimante que vous employez, des formats
	que vous imprimez et de <span class="emphasis"><em>vos</em></span> besoins pour ce
	qui est de faire payer l'utilisation de l'imprimante.</p><p>Pour mettre en &#339;uvre la comptabilisation, il vous faut
        modifier le filtre texte de l'imprimante (pour faire payer les
	travaux d'impression de texte brut) et ses filtres de conversion
	(pour faire payer les autres formats de fichiers), pour compter les
	pages ou demander à l'imprimante combien elle en a
	imprimées.  Vous ne pouvez pas vous en tirer en
	utilisant le filtre de sortie simple, puisqu'il ne peut pas
	gérer la comptabilisation.  Voir la section <a class="link" href="#printing-advanced-filter-intro" title="10.4.1. Les filtres">Les filtres</a>.</p><p>En général, il existe deux façons de
        procéder à la comptabilisation:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La comptabilisation <span class="emphasis"><em>périodique</em></span>
	    est la plus habituelle, probablement parce que la plus
	    facile.  Chaque fois que quelqu'un imprime un travail, le
	    filtre enregistre l'utilisateur, la machine et le nombre de
	    pages dans un fichier de comptabilisation.  Tous les mois,
	    semestres, années ou toute autre échéance que vous
	    désirez, vous récupérez les fichiers de
	    comptabilisation des diverses imprimantes, établissez
	    les pages imprimées par les utilisateurs, et faites
	    payer l'utilisation.  Purgez ensuite tous les fichiers de
	    comptabilisation, pour commencer à zéro la nouvelle
	    période.</p></li><li class="listitem"><p>La comptabilisation <span class="emphasis"><em>à la volée</em></span>
	    est moins répandue, peut-être parce qu'elle
	    s'avère plus difficile.  Cette méthode laisse
	    les filtres s'occuper de taxer les utilisateurs pour les
	    impressions dès qu'ils utilisent les imprimantes.  Tout
	    comme les quotas disques, la comptabilisation est
	    immédiate.  Vous pouvez empêcher les utilisateurs
	    d'imprimer quand leur compte est dans le rouge, et pourriez
	    leur fournir un moyen de vérifier et ajuster leurs
	    <span class="quote">« <span class="quote">quotas d'impression</span> »</span>.  Cependant, cette
	    méthode nécessite la mise en oeuvre d'une base de
	    données afin de tracer les utilisateurs et leurs
	    quotas.</p></li></ul></div><p>Le gestionnaire d'impression
        <span class="application">LPD</span> gère les deux méthodes
	facilement: puisque vous devez fournir les filtres (enfin, la
	plupart du temps), vous devez également fournir le code
	de comptabilisation.  Mais il y a un bon côté: vous
	disposez d'une énorme flexibilité dans vos
	méthodes de comptabilisation.  Par exemple, vous avez le
	choix entre les comptabilisations périodique et à la
	volée.  Vous avez le choix des informations à tracer: noms
	d'utilisateurs, noms de machines, types des travaux
	d'impression, pages imprimées, surface de papier
	utilisée, durée d'impression du travail, etc.  Et
	vous le faites en modifiant les filtres afin d'enregistrer
	ces informations.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72760144"></a>10.4.5.1. Comptabilisation rapide et simplifiée des impressions</h4></div></div></div><p>Deux programmes sont livrés avec FreeBSD qui vous
	  permettent de mettre en place une comptabilisation
	  périodique simple immédiatement.  Il s'agit du
	  filtre texte <code class="command">lpf</code>, détaillé dans
	  la section <a class="link" href="#printing-advanced-lpf" title="10.4.1.6. lpf: un filtre texte">lpf: un
	  filtre texte</a>, et de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a>, un programme qui
	  rassemble et fait le total des entrées contenues dans des
	  fichiers de comptabilisation d'impressions.</p><p>Comme indiqué dans la section sur les filtres (<a class="link" href="#printing-advanced-filters" title="10.4.1.1. Fonctionnement des filtres">Fonctionnement des filtres</a>),
	  <span class="application">LPD</span> lance les filtres texte et de
	  conversion avec le nom du fichier de comptabilisation à
	  employer fourni en argument.  Les filtres peuvent
	  utiliser ce paramètre pour savoir où écrire
	  un enregistrement de comptabilisation.  Le nom de ce fichier provient du
	  paramètre <code class="literal">af</code> dans
	  <code class="filename">/etc/printcap</code>, et si le chemin donné
	  n'est pas absolu, alors c'est un chemin d'accès relatif
	  au répertoire de file d'impression.</p><p><span class="application">LPD</span> lance <code class="command">lpf</code>
	  avec les paramètres de largeur et hauteur de page (qui
	  correspondent aux paramètres <code class="literal">pw</code> et
	  <code class="literal">pl</code>).  Le filtre <code class="command">lpf</code> les utilise
	  pour déterminer combien de papier sera consommé.
	  Après avoir envoyé le fichier à
	  l'imprimante, il enregistre ensuite une entrée dans le
	  fichier de comptabilisation.  Les entrées ressemblent
	  à ceci:</p><pre class="programlisting">2.00 rose:andy
3.00 rose:kelly
3.00 orchid:mary
5.00 orchid:mary
2.00 orchid:zhang</pre><p>Vous devriez utiliser un fichier de comptabilisation
	  séparé pour chaque imprimante, <code class="command">lpf</code>
	  ne disposant pas de mécanisme de verrouillage
	  des fichiers, deux <code class="command">lpf</code> pourraient
	  corrompre leurs entrées respectives s'ils essayaient
	  d'écrire dans le même fichier en même temps.
	  Une manière aisée de s'assurer d'un fichier de
	  comptabilisation séparé pour chaque imprimante est de
	  recourir au paramètre <code class="literal">af=acct</code> dans
	  <code class="filename">/etc/printcap</code>.  Dès lors, un
	  fichier de comptabilisation, nommé
	  <code class="filename">acct</code>, sera placé dans le
	  répertoire de file d'impression de chaque imprimante.</p><p>Lorsque vous serez prêts à faire payer les
	  utilisateurs pour leurs impressions, lancez le programme
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a>.  Placez-vous simplement dans le répertoire
	  de file d'impression de l'imprimante pour laquelle vous
	  voulez collecter les informations, et tapez
	  <code class="command">pac</code>.  Vous obtiendrez un récapitulatif
	  en dollars ressemblant à ceci:</p><pre class="screen">  Login               pages/feet   runs    price
orchid:kelly                5.00    1   $  0.10
orchid:mary                31.00    3   $  0.62
orchid:zhang                9.00    1   $  0.18
rose:andy                   2.00    1   $  0.04
rose:kelly                177.00  104   $  3.54
rose:mary                  87.00   32   $  1.74
rose:root                  26.00   12   $  0.52

total                     337.00  154   $  6.74</pre><p>Voici les arguments attendus par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a>:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-P<em class="replaceable"><code>imprimante</code></em>
	      </code></span></dt><dd><p>Pour quelle <em class="replaceable"><code>imprimante</code></em>
	        effectuer un récapitulatif.  Cette option ne
		fonctionne que si un chemin d'accès absolu est donné
		dans le paramètre <code class="literal">af</code> de
		<code class="filename">/etc/printcap</code>.</p></dd><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>Trier selon le coût plutôt
	        qu'alphabétiquement par nom d'utilisateur.</p></dd><dt><span class="term"><code class="option">-m</code></span></dt><dd><p>Ignorer le nom de la machine dans les fichiers de
	        comptabilisation.  Avec cette option, l'utilisateur
		<code class="systemitem">smith</code> sur la machine
		<code class="systemitem">alpha</code> est le même que l'utilisateur
		<code class="systemitem">smith</code> sur la machine
		<code class="systemitem">gamma</code>.  Sans elle, ils représentent
		des utilisateurs distincts.</p></dd><dt><span class="term"><code class="option">-p<em class="replaceable"><code>prix</code></em></code></span></dt><dd><p>Calculer le coût en comptant un
	        <em class="replaceable"><code>prix</code></em> en dollars par page ou par pied
		au lieu du prix indiqué par le paramètre
		<code class="literal">pc</code> dans <code class="filename">/etc/printcap</code>,
		ou deux cents (la valeur par défaut).  Vous pouvez
		préciser le <em class="replaceable"><code>prix</code></em> en nombre
		à virgule flottante.</p></dd><dt><span class="term"><code class="option">-r</code></span></dt><dd><p>Inverser l'ordre du tri.</p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>Créer un fichier de rapport et
	        tronquer le fichier de comptabilisation.</p></dd><dt><span class="term"><em class="replaceable"><code>nom</code></em>
	      <em class="replaceable"><code>&#8230;</code></em></span></dt><dd><p>N'imprimer des statistiques que pour les utilisateurs
	        dont les <em class="replaceable"><code>nom</code></em>s sont
		donnés.</p></dd></dl></div><p>Dans le récapitulatif produit par défaut par
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a>, vous pouvez lire le nombre de pages imprimées
	  par chaque utilisateur depuis les différentes machines.  Si, sur votre
	  site, la machine n'a pas d'importance (parce que les utilisateurs
	  peuvent utiliser n'importe quelle machine), lancez
	  <code class="command">pac -m</code>, afin de produire le récapitulatif
	  ci-dessous:</p><pre class="screen">  Login               pages/feet   runs    price
andy                        2.00    1   $  0.04
kelly                     182.00  105   $  3.64
mary                      118.00   35   $  2.36
root                       26.00   12   $  0.52
zhang                       9.00    1   $  0.18

total                     337.00  154   $  6.74</pre><p>Afin de calculer le montant dû en dollars, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a>
	  utilise le paramètre <code class="literal">pc</code> de
	  <code class="filename">/etc/printcap</code> (200 par défaut,
	  c'est à dire 2 cents par page).  Précisez avec
	  ce paramètre le prix par page ou par pied, exprimé
	  en centièmes de cents, que vous voulez imputer aux
	  impressions.  Vous pouvez spécifier cette valeur lorsque vous
	  lancez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a> avec l'option <code class="option">-p</code>.  Cependant,
	  avec cette option, les unités sont exprimées en
	  dollars, et non en centièmes de cents.  Par exemple,</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pac -p1.50</code></strong></pre><p>fait en sorte que chaque page coûte un dollar et cinquante
	  cents.  Vous pouvez vraiment faire des bénéfices
	  en utilisant cette option.</p><p>Enfin, lancer <code class="command">pac -s</code> enregistrera les
	  informations du récapitulatif dans un fichier, dont le
	  nom sera le même que le fichier de comptabilisation de
	  l'imprimante mais avec le suffixe <code class="literal">_sum</code>.  Il
	  procède alors à la troncature du fichier de
	  comptabilisation.  Lorsque vous exécutez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pac&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pac</span>(8)</span></a>
	  à nouveau, il relit le fichier récapitulatif pour
	  établir les totaux de départ, puis ajoute les
	  informations du fichier de comptabilisation normal.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72845136"></a>10.4.5.2. Comment compter les pages imprimées?</h4></div></div></div><p>Afin de réaliser une comptabilisation précise et cela
	  même à distance, vous devez pouvoir déterminer
	  combien un travail d'impression consomme de papier.  C'est le
	  problème principal de la comptabilisation des
	  impressions.</p><p>Pour du texte brut, ce problème n'est pas
	  compliqué à résoudre: vous comptez combien
	  un travail d'impression comporte de lignes et comparez avec
	  le nombre de lignes par page que gère votre imprimante.
	  N'oubliez pas de tenir compte des retours arrière
	  dans le fichier, qui superposent les lignes, ou des longues
	  lignes qui s'étendent sur une ou plusieurs lignes
	  physiques supplémentaires.</p><p>Le filtre texte <code class="command">lpf</code> (présenté
	  à la section <a class="link" href="#printing-advanced-lpf" title="10.4.1.6. lpf: un filtre texte">lpf: un
	    filtre texte</a>) prend ces éléments en
	  considération lorsqu'il effectue la comptabilisation.  Si
	  vous écrivez un filtre texte qui doit effectuer une
	  comptabilisation, vous pouvez vous inspirer du code source de
	  <code class="command">lpf</code>.</p><p>Mais comment gérer les autres formats?</p><p>Eh bien, pour la conversion DVI-vers-LaserJet ou
	  DVI-vers-<span class="trademark">PostScript</span>®, vous pouvez faire analyser les messages de sortie
	  de <code class="command">dvilj</code> ou <code class="command">dvips</code> par
	  votre filtre et regarder combien de pages ont été
	  converties.  Vous devriez pouvoir procéder de
	  manière identique avec d'autres formats de
	  fichiers et programmes de conversion.</p><p>Mais ces méthodes connaissent un défaut: il se
	  peut que l'imprimante n'imprime pas toutes ces pages.  Par exemple,
	  un bourrage peut se produire, l'imprimante peut arriver à cours d'encre, ou
	  exploser &#8212; et l'utilisateur serait tout de même
	  débité.</p><p>Alors, que pouvez-vous faire?</p><p>Il n'existe qu'une seule méthode
	  <span class="emphasis"><em>sûre</em></span> pour procéder à une
	  comptabilisation <span class="emphasis"><em>précise</em></span>.  Prenez
	  une imprimante qui sache dire combien de papier elle utilise, et
	  reliez-la par un câble série ou une connection
	  réseau.  Presque toutes les imprimantes <span class="trademark">PostScript</span>®
	  gèrent cela.  D'autres types et modèles
	  également (les imprimantes laser réseau Imagen,
	  par exemple).  Modifiez les filtres pour ces imprimantes afin
	  d'obtenir la consommation de pages après chaque travail
	  d'impression et faites en sorte qu'elles enregistrent des
	  informations de comptabilisation basées sur cette
	  <span class="emphasis"><em>seule</em></span> valeur.  Nul besoin de compter
	  les lignes ou d'une analyse de fichier susceptible d'être
	  erronée.</p><p>Bien entendu, vous pouvez toujours être
	  généreux et rendre toutes les impressions
	  gratuites.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-using"></a>10.5. Using Printers ** Traduction en Cours **</h2></div></div></div><p></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr"></a>10.5.1. Printing Jobs</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpq"></a>10.5.2. Checking Jobs</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lprm"></a>10.5.3. Removing Jobs</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options"></a>10.5.4. Beyond Plain Text: Printing Options</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options-format"></a>10.5.4.1. Formatting and Conversion Options</h4></div></div></div><p></p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options-job-handling"></a>10.5.4.2. Job Handling Options</h4></div></div></div><p></p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpr-options-misc"></a>10.5.4.3. Header Page Options</h4></div></div></div><p></p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="printing-lpc"></a>10.5.5. Administering Printers</h3></div></div></div><p></p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-lpd-alternatives"></a>10.6. Alternatives to the Standard Spooler ** Traduction en Cours **</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="printing-troubleshooting"></a>10.7. Troubleshooting ** Traduction en Cours **</h2></div></div></div><p></p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu"></a>Chapitre 11. Compatibilité binaire avec Linux</h2></div><div><span class="authorgroup">Restructuré et en partie mis à jour
	  par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Contribution originelle de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brian N.</span> <span class="surname">Handy</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Rich</span> <span class="surname">Murphey</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#linuxemu-synopsis">11.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#linuxemu-lbc-install">11.2. Installation</a></span></dt><dt><span class="sect1"><a href="#linuxemu-mathematica">11.3. Installer <span class="trademark">Mathematica</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-maple">11.4. Installer <span class="trademark">Maple</span>&#8482;</a></span></dt><dt><span class="sect1"><a href="#linuxemu-matlab">11.5. Installer <span class="trademark">MATLAB</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-oracle">11.6. Installer <span class="trademark">Oracle</span>®</a></span></dt><dt><span class="sect1"><a href="#sapr3">11.7. Installer <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</a></span></dt><dt><span class="sect1"><a href="#linuxemu-advanced">11.8. Sujets avancés</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-synopsis"></a>11.1. Synopsis</h2></div></div></div><a id="idp72947920" class="indexterm"></a><a id="idp72948432" class="indexterm"></a><p>FreeBSD fournit une compatibilité binaire avec plusieurs autres
      systèmes d'exploitation du type <span class="trademark">UNIX</span>®, y compris Linux.
      A ce point, vous devez vous demander pourquoi exactement
      FreeBSD a besoin d'être capable d'exécuter des binaires Linux?
      La réponse à cette question est très simple.  De
      nombreuses entreprises et de nombreux développeurs ne
      développent que pour Linux, puisque que c'est la dernière
      chose &#8220;à la mode&#8221; dans le monde de l'informatique.
      Cela ne laisse aux utilisateurs de FreeBSD que la possibilité
      de réclamer auprès des ces mêmes entreprises
      et développeurs des versions native pour FreeBSD de leurs
      applications.  Le problème est, que la plupart de ces
      entreprises ne réalisent pas vraiment combien de personnes
      utiliseraient leur produit si il y aurait une version pour FreeBSD
      également, et la plupart continuent de développer uniquement
      pour Linux.  Donc que doit faire un utilisateur de FreeBSD?
      C'est là que la compatibilité binaire avec Linux entre en
      scène.</p><p>En bref, la compatibilité permet aux utilisateurs de
      FreeBSD d'exécuter environ 90% des applications Linux
      sans aucune modification.  Cela inclus des applications
      comme <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>,
      la version Linux de <span class="application"><span class="trademark">Netscape</span>®</span>,
      <span class="application"><span class="trademark">Adobe</span>® <span class="trademark">Acrobat</span>®</span>,
      <span class="application"><span class="trademark">RealPlayer</span>®</span>,
      <span class="application">VMware</span>,
      <span class="application"><span class="trademark">Oracle</span>®</span>,
      <span class="application"><span class="trademark">WordPerfect</span>®</span>, <span class="application">Doom</span>,
      <span class="application">Quake</span>, et plus.  On rapporte
      également que dans certaines situations, les binaires Linux
      sont plus performants sous FreeBSD que sous Linux.</p><p>Il existe cependant certaines caractéristiques
      spécifiques à Linux qui ne sont pas
      supportées sous FreeBSD.  Les binaires Linux ne
      fonctionneront pas sous FreeBSD s'ils utilisent massivement
      des appels
      <span class="trademark">i386</span>&#8482; spécifiques, comme activation du mode virtuel
      8086.</p><p>Après la lecture de ce chapitre, vous connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment activer la compatibilité binaire avec
	  Linux sur votre système.</p></li><li class="listitem"><p>Comment installer des bibliothèques partagées Linux
	  supplémentaires.</p></li><li class="listitem"><p>Comment installer des application Linux sur votre
	  système FreeBSD.</p></li><li class="listitem"><p>Les détails de l'implémentation de la
	  compatibilité Linux sous FreeBSD.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment installer des logiciels tiers
	  (<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-lbc-install"></a>11.2. Installation</h2></div></div></div><a id="idp72972240" class="indexterm"></a><p>La compatibilité binaire avec Linux n'est pas
      activée par défaut.  La manière la plus simple
      pour activer cette fonctionnalité est de charger le KLD
      <code class="literal">linux</code> (<span class="quote">« <span class="quote">Kernel LoaDable
      object</span> »</span>&#8212;objet chargeable par le noyau, ce que l'on
      nomme couramment un module).  Vous pouvez charger ce module
      en tapant ce qui suit sous l'utilisateur
      <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload linux</code></strong></pre><p>Si vous désirez que la compatibilité Linux soit
      toujours activée, alors vous devrez ajouter la ligne
      suivante au fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">linux_enable="YES"</pre><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldstat&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldstat</span>(8)</span></a> peut être utilisée
      pour vérifier que le KLD est chargé:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kldstat</code></strong>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</pre><a id="idp72978640" class="indexterm"></a><p>Si pour quelques raisons vous ne voulez ou pouvez charger le
      KLD, alors vous pouvez lier statiquement la compatibilité
      binaire Linux dans votre noyau en ajoutant <code class="literal">options
      COMPAT_LINUX</code> à votre fichier de configuration du noyau.
      Puis installez votre noyau comme décrit dans la
      <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp72981072"></a>11.2.1. Installer les bibliothèques Linux</h3></div></div></div><a id="idp72981712" class="indexterm"></a><p>Cela peut être fait de deux manières, soit
	en utilisant le logiciel porté
	<a class="link" href="#linuxemu-libs-port" title="11.2.1.1. Installation à l'aide du logiciel porté linux_base">linux_base</a>, soit
	en les installant <a class="link" href="#linuxemu-libs-manually" title="11.2.1.2. Installer les bibliothèques à la main">à la main</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-port"></a>11.2.1.1. Installation à l'aide du logiciel porté
	  linux_base</h4></div></div></div><a id="idp72985040" class="indexterm"></a><p>C'est de loin la méthode la plus simple pour
	  installer les bibliothèques.  La procédure est
	  juste identique à l'installation d'un autre logiciel
	  porté à partir du
	  <a class="link" href="file://localhost/usr/ports/" target="_top">catalogue
	  des logiciels portés</a>.
	  Faites ce qui suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base-fc4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>La compatibilité binaire Linux devrait maintenant
	  fonctionner.  Certains programmes pourront se plaindre de
	  versions mineures incorrectes de certaines bibliothèques
	  systèmes.  Cela semble, en général, ne pas
	  vraiment être un problème.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il peut y avoir de multiples versions disponibles
	  du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>, correspondant
	  à différentes distributions et versions de Linux.
	  Vous devez installez la version la plus proche de ce que
	  nécessite les applications Linux que vous désirez
	  installer.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-libs-manually"></a>11.2.1.2. Installer les bibliothèques à la main</h4></div></div></div><p>Si vous n'avez pas le catalogue des logiciels
	  portés installé, vous pouvez à la
	  place installer les bibliothèques à la main.
	  Il vous faudra les bibliothèques partagées
	  Linux dont à besoin le programme et l'éditeur
	  de lien dynamiques.  Vous devrez également
	  créer un répertoire racine
	  &#8220;masquant&#8221; (&#8220;shadow root&#8221;),
	  <code class="filename">/compat/linux</code>, pour les
	  bibliothèques Linux sur votre système FreeBSD.
	  Toute bibliothèque partagée ouverte par les
	  programmes Linux exécutés sous FreeBSD iront d'abord voir
	  dans cette arborescence.  Ainsi, si un programme Linux
	  charge, par exemple, <code class="filename">/lib/libc.so</code>,
	  FreeBSD essayera d'abord d'ouvrir
	  <code class="filename">/compat/linux/lib/libc.so</code>, puis si
	  cette bibliothèque n'existe pas,
	  <code class="filename">/lib/libc.so</code>.  Les bibliothèques
	  partagées doivent donc être installées
	  sous l'arborescence <code class="filename">/compat/linux/lib</code>
	  plutôt que sous les chemins d'accès
	  mentionnés par la commande Linux
	  <code class="command">ld.so</code>.</p><p>Généralement, vous ne devrez cherchez à
	  savoir de quelles bibliothèques partagées
	  dépendent les binaires Linux que les premières
	  fois que vous installerez des programmes Linux sur votre
	  système FreeBSD.  Au bout d'un moment, vous disposerez
	  d'un jeu suffisant de bibliothèques partagées
	  Linux sur votre système pour être en mesure
	  d'exécuter les binaires Linux nouvellement
	  importés sans effort supplémentaire.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73001808"></a>11.2.1.3. Comment installer des bibliothèques
	  partagées supplémentaires</h4></div></div></div><a id="idp73002448" class="indexterm"></a><p>Que faire si vous avez installé le logiciel
	  porté <code class="filename">linux_base</code> et que votre
	  application se plaint toujours qu'il lui manque des
	  bibliothèques partagées?
	  Comment savoir quelles bibliothèques partagées
	  ont besoin les binaires Linux, et où se les
	  procurer?  Il a habituellement deux possibilités
	  (pour suivre les instructions ci-dessous, vous devrez
	  être en session sous le compte super-utilisateur
	  <code class="systemitem">root</code>).</p><p>Si vous avez accès à un système
	  Linux, déterminez de quelles bibliothèques
	  partagées l'application a besoin, et copiez-les sur
	  votre système FreeBSD.  Soit l'exemple suivant:</p><div class="informalexample"><p>Supposons que vous veniez de télécharger
	    le binaire Linux de <span class="application">Doom</span>,
	    et que vous l'avez installé sur un système
	    Linux.  Vous pouvez alors vérifier de quelles
	    bibliothèques partagées il a besoin pour
	    fonctionner avec la commande
	    <code class="command">ldd linuxdoom</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ldd linuxdoom</code></strong>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</pre><a id="idp73011280" class="indexterm"></a><p>Vous devrez récupérer tous les
	    fichiers mentionnés dans la dernière colonne,
	    et les installer sous <code class="filename">/compat/linux</code>,
	    en utilisant les noms de la première colonne comme
	    liens symboliques qui pointent dessus.  Cela signifie
	    que vous aurez éventuellement les fichiers suivants
	    sur votre système FreeBSD:</p><pre class="screen">/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Remarquez que si vous avez déjà
		une bibliothèque partagée de même
		numéro de version majeure que celle indiquée
		par la première colonne du résultat
		de la commande <code class="command">ldd</code>, il est inutile
		de copier le fichier donné par la dernière
		colonne sur votre système, celui que vous
		avez déjà devrait suffire.
		Il est cependant recommandé de recopier
		malgré tout la bibliothèque partagée
		si c'est une version récente.
		Vous pouvez supprimer l'ancienne version, du moment
		que le lien symbolique pointe sur la nouvelle.  Par
		exemple, si vous avez les bibliothèques suivantes
		sur votre système:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</pre><p xmlns="http://www.w3.org/1999/xhtml">et que vous avez un nouveau binaire qui
		d'après le résultat de la commande
		<code class="command">ldd</code> semble avoir besoin d'une
		version plus récente:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</pre><p xmlns="http://www.w3.org/1999/xhtml">Si vous n'avez qu'une ou deux versions de retard
		sur le dernier indice, alors ne vous souciez pas
		d'installer la version
		<code class="filename">/lib/libc.so.4.6.29</code> plus
		récente, parce que le programme devrait fonctionner
		sans problème avec une version
		légèrement antérieure.
		Vous pouvez néanmoins décider de remplacer
		<code class="filename">libc.so</code>, ce qui devrait vous
		donner quelque chose comme:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen">/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</pre></div></blockquote></div><div class="blockquote"><blockquote class="blockquote"><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le mécanisme de lien symbolique n'est
		nécessaire que pour les binaires Linux.
		L'éditeur de liens dynamiques de FreeBSD
		se charge lui-même de trouver les numéros
		de versions majeures adéquats et vous
		n'avez pas à vous en préoccuper.</p></div></blockquote></div></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73052368"></a>11.2.2. Installer des binaires Linux ELF</h3></div></div></div><a id="idp73053008" class="indexterm"></a><p>Une étape supplémentaire est parfois
	nécessaire pour les binaires ELF: le
	&#8220;marquage&#8221;.  Si vous tentez d'exécuter un
	binaire ELF non marqué, vous obtiendrez un message
	d'erreur ressemblant à ce qui suit:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>./mon-binaire-elf-linux</code></strong>
ELF binary type not known
Abort</pre><p>Pour que le noyau FreeBSD puisse distinguer un binaire ELF
	FreeBSD d'un binaire Linux, vous devez employer l'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>brandelf -t Linux mon-binaire-elf-linux</code></strong></pre><a id="idp73057872" class="indexterm"></a><p>Les outils GNU incorporent désormais automatiquement
	les marques nécessaires dans les binaires ELF, vous
	aurez donc de moins en moins besoin de passer par cette
	étape à l'avenir.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73058896"></a>11.2.3. Configurer le résolveur de noms de domaines</h3></div></div></div><p>Si le DNS ne fonctionne pas, ou si vous avez les
	messages:</p><pre class="screen">resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</pre><p>Vous devrez configurer un fichier
	<code class="filename">/compat/linux/etc/host.conf</code>
	contenant:</p><pre class="programlisting">order hosts, bind
multi on</pre><p>Où l'ordre ci-dessus spécifie qu'il faut tout
	d'abord regarder dans le fichier <code class="filename">/etc/hosts</code>
	puis interroger le DNS.  Quand le fichier
	<code class="filename">/compat/linux/etc/host.conf</code> n'existe pas,
	les applications Linux trouvent le fichier
	<code class="filename">/etc/host.conf</code> de FreeBSD et se plaignent de
	sa syntaxe FreeBSD incompatible.  Supprimez
	<code class="literal">bind</code> si vous n'avez pas configuré de
	serveur de noms avec le fichier
	<code class="filename">/etc/resolv.conf</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-mathematica"></a>11.3. Installer <span class="trademark">Mathematica</span>®</h2></div><div><span class="authorgroup">Mis à jour pour <span xmlns="http://www.w3.org/1999/xhtml" class="trademark">Mathematica</span>® 5.X par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Boris</span> <span class="surname">Hollas</span></span>. </span></div></div></div><a id="idp65420368" class="indexterm"></a><p>Ce document décrit l'installation de la version Linux
      de <span class="application"><span class="trademark">Mathematica</span>® 5.X</span> sur un
      système FreeBSD.</p><p>La version Linux de <span class="application"><span class="trademark">Mathematica</span>®</span>
      ou la version <span class="application"><span class="trademark">Mathematica</span>® for Students</span>
      peut être commandée directement auprès de
      Wolfram à l'adresse
      <code class="uri"><a class="uri" href="http://www.wolfram.com/" target="_top">http://www.wolfram.com/</a></code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp65425104"></a>11.3.1. Utiliser l'installeur <span class="trademark">Mathematica</span>®</h3></div></div></div><p>En premier lieu vous devez indiquer à FreeBSD
	que les binaires Linux de
	<span class="application"><span class="trademark">Mathematica</span>®</span> utilisent l'ABI
	Linux.  La méthode la plus simple pour y parvenir est
	le marquage par défaut des binaires ELF non marqués
	comme étant des binaires Linux, ce marquage se faisant
	avec la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.fallback_elf_brand=3</code></strong></pre><p>Avec cela FreeBSD supposera que les binaires ELF non
	marqués sont des binaires Linux, et donc vous devriez
	être en mesure d'exécuter le programme d'installation
	directement depuis le CDROM.</p><p>Copiez ensuite sur votre disque dur le fichier
	<code class="filename">MathInstaller</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp /cdrom/Unix/Installers/Linux/MathInstaller /localdir/</code></strong></pre><p>et dans ce fichier, remplacez <code class="literal">/bin/sh</code>
	sur la première ligne par
	<code class="literal">/compat/linux/bin/sh</code>.  Cela permet de
	garantir que l'installeur est exécuté par la
	version Linux de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a>.  Ensuite, remplacez toutes les
	occurrences de <code class="literal">Linux)</code> par
	<code class="literal">FreeBSD)</code> à l'aide d'un
	éditeur de texte ou la procédure proposée
	dans la section suivante.  Cela indique à l'installeur
	<span class="application"><span class="trademark">Mathematica</span>®</span>, qui fait appel
	à la commande <code class="command">uname -s</code> pour
	déterminer le système d'exploitation, de traiter
	FreeBSD comme un système d'exploitation de type Linux.
	Lancer maintenant la commande <code class="command">MathInstaller</code>
	procédera à l'installation de
	<span class="application"><span class="trademark">Mathematica</span>®</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73214288"></a>11.3.2. Modifier les exécutables <span class="trademark">Mathematica</span>®</h3></div></div></div><p>Les procédures que
	<span class="application"><span class="trademark">Mathematica</span>®</span> a créé
	lors de l'installation doivent être modifiées
	avant que vous ne puissiez les utiliser.  Si vous avez choisi
	<code class="filename">/usr/local/bin</code> comme
	répertoires pour les exécutables
	<span class="application"><span class="trademark">Mathematica</span>®</span>, vous trouverez alors
	dans ce répertoire des liens symboliques vers les
	fichiers nommés <code class="filename">math</code>,
	<code class="filename">mathematica</code>,
	<code class="filename">Mathematica</code>, et
	<code class="filename">MathKernel</code>.  Dans chacun d'entre eux,
	remplacez <code class="literal">Linux)</code> par
	<code class="literal">FreeBSD)</code> avec un éditeur de texte ou
	la procédure suivante:</p><pre class="programlisting">#!/bin/sh
cd /usr/local/bin
for i in math mathematica Mathematica MathKernel
  do sed 's/Linux)/FreeBSD)/g' $i &gt; $i.tmp
  sed 's/\/bin\/sh/\/compat\/linux\/bin\/sh/g' $i.tmp &gt; $i
  rm $i.tmp
  chmod a+x $i
done</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73220176"></a>11.3.3. Obtenir votre mot de passe pour <span class="trademark">Mathematica</span>®</h3></div></div></div><a id="idp73233616" class="indexterm"></a><p>Quand vous lancez <span class="application"><span class="trademark">Mathematica</span>®</span>
	pour la première fois, un mot de passe vous sera
	demandé.  Si vous n'avez pas encore
	récupéré votre mot de passe auprès
	de Wolfram, lancez le programme <code class="command">mathinfo</code>
	présent dans le répertoire d'installation afin
	d'obtenir l'<span class="quote">« <span class="quote">identifiant</span> »</span> de votre machine.  Cet
	identifiant de machine est basé uniquement sur
	l'adresse MAC de votre première carte Ethernet, vous ne
	pouvez donc pas utiliser votre copie de
	<span class="application"><span class="trademark">Mathematica</span>®</span> sur une machine
	différente.</p><p>Quand vous vous enregistrez auprès de Wolfram,
	par courrier électronique, téléphone, ou
	fax, vous leur communiquerez l'&#8220;identifiant&#8221; de la
	machine et ils vous donneront en réponse le mot
	de passe correspondant qui a la forme de plusieurs groupes
	de nombres.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73237712"></a>11.3.4. Exécuter l'interface de <span class="trademark">Mathematica</span>® via le
	réseau</h3></div></div></div><p><span class="application"><span class="trademark">Mathematica</span>®</span> utilise des polices
	de caractères spécifiques pour afficher des
	caractères qui ne sont pas présents dans
	l'ensemble standard de polices (caractère
	intégrale, somme, lettres grecques, etc.).
	Le protocole X a besoin que ces polices
	de caractères soient installées
	<span class="emphasis"><em>localement</em></span>.  Cela signifie que vous devrez
	copier sur votre machine locale ces polices à partir du
	CDROM ou d'une machine avec
	<span class="application"><span class="trademark">Mathematica</span>®</span> installé.  Ces
	polices sont normalement stockées dans
	<code class="filename">/cdrom/Unix/Files/SystemFiles/Fonts</code> sur
	le CDROM, ou dans
	<code class="filename">/usr/local/mathematica/SystemFiles/Fonts</code>
	sur votre disque dur.  En fait les polices sont dans les
	sous-répertoires <code class="filename">Type1</code> et
	<code class="filename">X</code>.  Il existe différentes manières
	de les utiliser, comme décrit ci-dessous.</p><p>La première manière est de les copier dans
	un des répertoires de polices de caractères existant
	dans <code class="filename">/usr/X11R6/lib/X11/fonts</code>.
	Il faudra alors éditer le fichier
	<code class="filename">fonts.dir</code>, y ajouter les noms des
	polices, et changer le nombre de polices sur la première
	ligne.  Alternativement, vous devriez pouvoir juste
	exécuter <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkfontdir&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mkfontdir</span>(1)</span></a> dans le répertoire
	dans lequel vous avez copié les polices de
	caractères.</p><p>La deuxième manière est de copier les
	répertoires dans
	<code class="filename">/usr/X11R6/lib/X11/fonts</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/Unix/Files/SystemFiles/Fonts</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp X/* /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp Type1/* /usr/X11R6/lib/X11/fonts/MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkfontdir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd ../MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkfontdir</code></strong></pre><p>Maintenant ajoutez les nouveaux répertoires de
	polices à votre chemin de recherche des polices
	de caractères:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/X</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>xset fp+ /usr/X11R6/lib/X11/fonts/MathType1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>xset fp rehash</code></strong></pre><p>Si vous utilisez le serveur
	<span class="application">Xorg</span>, vous pouvez charger
	ces répertoires de polices automatiquement en les
	ajoutant à votre fichier
	<code class="filename">xorg.conf</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Sous les serveurs <span class="application"><span class="trademark">XFree86</span>&#8482;</span>,
	  le fichier de configuration se nomme
	  <code class="filename">XF86Config</code>.</p></div><a id="idp73259216" class="indexterm"></a><p>Si vous <span class="emphasis"><em>n'avez pas</em></span> déjà
	de répertoire appelé
	<code class="filename">/usr/X11R6/lib/X11/fonts/Type1</code>, vous
	pouvez modifier le nom du répertoire
	<code class="filename">MathType1</code> dans l'exemple ci-dessus par
	<code class="filename">Type1</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-maple"></a>11.4. Installer <span class="trademark">Maple</span>&#8482;</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Remerciements à <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Getschmann</span></span>. </span></div></div></div><a id="idp73266384" class="indexterm"></a><p><span class="application"><span class="trademark">Maple</span>&#8482;</span> est un programme
      mathématique commercial similaire à
      <span class="application"><span class="trademark">Mathematica</span>®</span>.  Vous devez
      acquérir ce logiciel auprès de
      <code class="uri"><a class="uri" href="http://www.maplesoft.com/" target="_top">http://www.maplesoft.com/</a></code> et vous
      enregistrer pour obtenir un fichier de licence.  Pour installer
      ce logiciel sous FreeBSD, veuillez suivre les étapes
      suivantes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Exécutez la procédure
	    <code class="filename">INSTALL</code> fournie avec le logiciel.
	    Choisissez l'option &#8220;RedHat&#8221; quand le
	    programme vous le demandera.  Un répertoire
	    d'installation typique devrait être:
	    <code class="filename">/usr/local/maple</code>.</p></li><li class="step"><p>Si vous ne l'avez pas déjà fait,
	    demandez une licence pour
	    <span class="application"><span class="trademark">Maple</span>&#8482;</span> auprès de
	    Maple Waterloo Software (<code class="uri"><a class="uri" href="http://register.maplesoft.com/" target="_top">http://register.maplesoft.com/</a></code>) et
	    copiez-la sous
	    <code class="filename">/usr/local/maple/license/license.dat</code>.</p></li><li class="step"><p>Installez le gestionnaire de licence
	    <span class="application">FLEXlm</span> en exécutant la
	    procédure d'installation
	    <code class="filename">INSTALL_LIC</code> fournie avec
	    <span class="application"><span class="trademark">Maple</span>&#8482;</span>.  Précisez
	    le nom de la machine au serveur de licence.</p></li><li class="step"><p>Modifiez le fichier
	    <code class="filename">/usr/local/maple/bin/maple.system.type</code>
	    avec le correctif suivant:</p><pre class="programlisting">   ----- snip ------------------
*** maple.system.type.orig      Sun Jul  8 16:35:33 2001
--- maple.system.type   Sun Jul  8 16:35:51 2001
***************
*** 72,77 ****
--- 72,78 ----
          # the IBM RS/6000 AIX case
          MAPLE_BIN="bin.IBM_RISC_UNIX"
          ;;
+     "FreeBSD"|\
      "Linux")
          # the Linux/x86 case
        # We have two Linux implementations, one for Red Hat and
   ----- snip end of patch -----</pre><p>Remarquez qu'après
	  <code class="literal">"FreeBSD"|\</code> aucun espace ne doit
	  être ajouté.</p><p>Ce correctif demande à
	  <span class="application"><span class="trademark">Maple</span>&#8482;</span> de reconnaître
	  &#8220;FreeBSD&#8221; comme étant un type de
	  système Linux.  La procédure
	  <code class="filename">bin/maple</code> fait appel à la
	  procédure
	  <code class="filename">bin/maple.system.type</code> qui à son
	  tour appelle <code class="command">uname -a</code> pour déterminer
	  le nom du système d'exploitation.  En fonction de ce
	  nom, la procédure déterminera quels binaires
	  utiliser.</p></li><li class="step"><p>Lancez le serveur de licence.</p><p>La procédure suivante, installée sous le
	  nom <code class="filename">/usr/local/etc/rc.d/lmgrd.sh</code>
	  est une façon pratique de lancer
	  <code class="command">lmgrd</code>:</p><pre class="programlisting">   ----- snip ------------

#! /bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
PATH=${PATH}:/usr/local/maple/bin:/usr/local/maple/FLEXlm/UNIX/LINUX
export PATH

LICENSE_FILE=/usr/local/maple/license/license.dat
LOG=/var/log/lmgrd.log

case "$1" in
start)
	lmgrd -c ${LICENSE_FILE} 2&gt;&gt; ${LOG} 1&gt;&amp;2
	echo -n " lmgrd"
	;;
stop)
	lmgrd -c ${LICENSE_FILE} -x lmdown 2&gt;&gt; ${LOG} 1&gt;&amp;2
	;;
*)
	echo "Usage: `basename $0` {start|stop}" 1&gt;&amp;2
	exit 64
	;;
esac

exit 0
   ----- snip ------------</pre></li><li class="step"><p>Testez <span class="application"><span class="trademark">Maple</span>&#8482;</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cd /usr/local/maple/bin</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>./xmaple</code></strong></pre><p>Cela devrait fonctionner.  Assurez-vous d'écrire
	  à Maplesoft pour leur indiquer que vous désirez
	  une version native pour FreeBSD!</p></li></ol></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73289680"></a>11.4.1. Pièges courants</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le gestionnaire de licence
	    <span class="application">FLEXlm</span> peut être
	    difficile à utiliser.  De la documentation
	    supplémentaire à ce sujet est disponible
	    à l'adresse <code class="uri"><a class="uri" href="http://www.globetrotter.com/" target="_top">http://www.globetrotter.com/</a></code>.</p></li><li class="listitem"><p><code class="command">lmgrd</code> est connu pour
	    être très capricieux au sujet
	    du fichier de licence et de planter si il y a un
	    quelconque problème.  Un fichier de licence correct
	    devrait ressembler à ceci:</p><pre class="programlisting"># =======================================================
# License File for UNIX Installations ("Pointer File")
# =======================================================
SERVER chillig ANY
#USE_SERVER
VENDOR maplelmg

FEATURE Maple maplelmg 2000.0831 permanent 1 XXXXXXXXXXXX \
         PLATFORMS=i86_r ISSUER="Waterloo Maple Inc." \
         ISSUED=11-may-2000 NOTICE=" Technische Universitat Wien" \
         SN=XXXXXXXXX</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le numéro de série et la clé ont
	      été ici remplacés par des <code class="literal">X</code>.
	      <code class="systemitem">chillig</code> est le nom de la
	      machine.</p></div><p>L'édition du fichier de licence est
	    possible tant que vous ne touchez pas à la ligne
	    &#8220;FEATURE&#8221; (qui est protégée
	    par la clé de la licence).</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-matlab"></a>11.5. Installer <span class="trademark">MATLAB</span>®</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Dan</span> <span class="surname">Pelleg</span></span>. </span></div></div></div><a id="idp73299280" class="indexterm"></a><p>Ce document décrit l'installation de la version
      Linux de <span class="application"><span class="trademark">MATLAB</span>® version 6.5</span> sur un
      système FreeBSD.  Le logiciel fonctionne plutôt
      bien, à l'exception de la <span class="application"><span class="trademark">JVM</span>&#8482;</span>,
      machine virtuelle <span class="application"><span class="trademark">Java</span>&#8482;</span> (voir la
      <a class="xref" href="#matlab-jre" title="11.5.3. Lier l'environnement d'exécution Java&#8482; (&#8220;Java&#8482; Runtime Environment&#8221;)">Section 11.5.3, « Lier l'environnement d'exécution <span class="trademark">Java</span>&#8482;
	(&#8220;<span class="trademark">Java</span>&#8482; Runtime Environment&#8221;) »</a>).</p><p>La version Linux de <span class="application"><span class="trademark">MATLAB</span>®</span> peut
      être commandée directement auprès de
      The MathWorks à l'adresse <code class="uri"><a class="uri" href="http://www.mathworks.com" target="_top">http://www.mathworks.com</a></code>.  Assurez-vous d'avoir
      le fichier de licence ou les instructions pour le
      créer.  Pendant que vous y êtes, faites-leur savoir
      que vous désireriez une version FreeBSD native de leur
      logiciel.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73304784"></a>11.5.1. Installer <span class="trademark">MATLAB</span>®</h3></div></div></div><p>Pour installer <span class="application"><span class="trademark">MATLAB</span>®</span>, faites
	ce qui suit:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Insérez le CD d'installation et montez-le.
	    Ouvrez une session super-utilisateur
	    (<code class="systemitem">root</code>), comme recommandé par
	    la procédure d'installation.  Pour lancer la
	    procédure d'installation tapez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/compat/linux/bin/sh /cdrom/install</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le programme d'installation est graphique.
	      Si vous obtenez une erreur disant que le programme
	      est incapable d'ouvrir une instance d'affichage, tapez
	      <code class="command">setenv HOME ~utilisateur</code>,
	      où <em class="replaceable"><code>utilisateur</code></em> est
	      l'utilisateur à partir duquel vous avez fait un
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.</p></div></li><li class="step"><p>Quand on vous demande le répertoire racine
	    pour <span class="application"><span class="trademark">MATLAB</span>®</span>, tapez:
	    <strong class="userinput"><code>/compat/linux/usr/local/matlab</code></strong>.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour faciliter la suite de l'installation et
	      réduire les frappes inutiles, tapez à l'invite
	      de l'interpréteur de commandes ceci:
	      <code class="command">set MATLAB=/compat/linux/usr/local/matlab</code></p></div></li><li class="step"><p>Editez le fichier de licence comme précisé
	    lors de l'obtention de la licence
	    <span class="application"><span class="trademark">MATLAB</span>®</span>.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez préparer d'avance ce fichier
	      en utilisant votre éditeur favori, et en le copiant
	      sous le nom <code class="filename">$MATLAB/license.dat</code>
	      avant que le programme d'installation ne vous demande de
	      l'éditer.</p></div></li><li class="step"><p>Terminez le processus d'installation.</p></li></ol></div><p>A ce point, votre installation de
	<span class="application"><span class="trademark">MATLAB</span>®</span> est terminée.  Les
	étapes suivantes rajoutent le nécessaire
	pour l'intégrer à votre système
	FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73327440"></a>11.5.2. Démarrage du gestionnaire de licence</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Créez des liens symboliques pour les
	    procédures du gestionnaire de licence:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</code></strong></pre></li><li class="step"><p>Créez un fichier de démarrage nommé
	    <code class="filename">/usr/local/etc/rc.d/flexlm.sh</code>.
	    L'exemple ci-dessous est une version modifiée
	    du fichier <code class="filename">$MATLAB/etc/rc.lm.glnx86</code>
	    fourni.  Les modifications concernent l'emplacement des
	    fichiers, et le lancement du gestionnaire de licence
	    sous l'émulation Linux.</p><pre class="programlisting">#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <em class="replaceable"><code>utilisateur</code></em> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</pre><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le fichier doit être rendu
	      exécutable:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x /usr/local/etc/rc.d/flexlm.sh</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Vous devez remplacer
	      <em class="replaceable"><code>utilisateur</code></em> dans la
	      procédure par un nom d'utilisateur valide sur
	      votre système (et non pas
	      <code class="systemitem">root</code>).</p></div></li><li class="step"><p>Lancez le gestionnaire de licence avec la
	    commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/flexlm.sh start</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-jre"></a>11.5.3. Lier l'environnement d'exécution <span class="trademark">Java</span>&#8482;
	(&#8220;<span class="trademark">Java</span>&#8482; Runtime Environment&#8221;)</h3></div></div></div><p>Modifiez le lien vers le
	&#8220;<span class="application"><span class="trademark">Java</span>&#8482;</span> Runtime
	Environment&#8221; (JRE) pour un lien fonctionnant
	correctement sous FreeBSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $MATLAB/sys/java/jre/glnx86/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>unlink jre; ln -s ./jre1.1.8 ./jre</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73342288"></a>11.5.4. Création d'une procédure de lancement
	pour <span class="trademark">MATLAB</span>®</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Placez la procédure de démarrage suivante
	    dans le répertoire
	    <code class="filename">/usr/local/bin/matlab</code>:
	  </p><pre class="programlisting">#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</pre></li><li class="step"><p>Puis tapez la commande
	    <code class="command">chmod +x /usr/local/bin/matlab</code>.</p></li></ol></div><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">En fonction de la version
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a>
	  utilisée, vous pouvez rencontrer des problèmes
	  lors de l'utilisation de cette procédure.  Pour
	  éviter cela, éditez le fichier
	  <code class="filename">/compat/linux/usr/local/matlab/bin/matlab</code>,
	  et modifiez la ligne qui dit:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</pre><p xmlns="http://www.w3.org/1999/xhtml">(dans la version 13.0.1, c'est la ligne 410) en:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">if test -L $newbase; then</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73353424"></a>11.5.5. Créer une procédure d'arrêt pour
	<span class="trademark">MATLAB</span>®</h3></div></div></div><p>Ce qui suit est nécessaire pour corriger le fait
	que <span class="trademark">MATLAB</span>® ne peut être quitter correctement.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Créez un fichier
	    <code class="filename">$MATLAB/toolbox/local/finish.m</code>, et y
	    mettre la ligne suivante:</p><pre class="programlisting">! $MATLAB/bin/finish.sh</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">$MATLAB</code> doit être
	    écrit tel quel.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans le même répertoire, vous
	      trouverez les fichiers
	      <code class="filename">finishsav.m</code> et
	      <code class="filename">finishdlg.m</code>, qui vous permettront
	      de sauvegarder l'environnement avant de quitter.
	      Si vous utilisez l'un d'eux, insérez la ligne
	      ci-dessus après la commande
	      <code class="literal">save</code>.</p></div></li><li class="step"><p>Créez un fichier
	    <code class="filename">$MATLAB/bin/finish.sh</code>, qui contiendra
	    ce qui suit:</p><pre class="programlisting">#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &amp;
exit 0</pre></li><li class="step"><p>Rendez le fichier exécutable:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod +x $MATLAB/bin/finish.sh</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="matlab-using"></a>11.5.6. Utilisation de <span class="trademark">MATLAB</span>®</h3></div></div></div><p>A ce point, vous êtes prêt à
	taper la commande <code class="command">matlab</code> et à commencer
	à l'utiliser.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-oracle"></a>11.6. Installer <span class="trademark">Oracle</span>®</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marcel</span> <span class="surname">Moolenaar</span></span>. </span></div></div></div><a id="idp73372880" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73374160"></a>11.6.1. Préface</h3></div></div></div><p>Ce document décrit le processus d'installation
	d'<span class="application"><span class="trademark">Oracle</span>® 8.0.5</span> et
	d'<span class="application"><span class="trademark">Oracle</span>® 8.0.5.1 Enterprise Edition</span>
	pour Linux sur une machine FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73381072"></a>11.6.2. Installer l'environnement Linux</h3></div></div></div><p>Assurez-vous d'avoir installé les deux logiciels
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/linux_base/pkg-descr">emulators/linux_base</a> et
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/devel/linux_devtools/pkg-descr">devel/linux_devtools</a> du
	catalogue des logiciels portés.  Si vous rencontrez
	des problèmes avec ces logiciels portés,
	il se peut que vous ayez à utiliser les versions
	pré-compilées ou des versions plus
	anciennes disponibles dans le catalogue des logiciels
	portés.</p><p>Si vous désirez installer l'agent intelligent,
	vous devrez également installer le
	&#8220;package&#8221; Red Hat Tcl:
	<code class="filename">tcl-8.0.3-20.i386.rpm</code>.  La commande
	générale pour installer des RPMs avec le logiciel
	<span class="application">RPM</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/archivers/rpm/pkg-descr">archivers/rpm</a>) est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm package</code></strong></pre><p>L'installation du <em class="replaceable"><code>package</code></em> ne
	devrait pas générer d'erreur.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73386192"></a>11.6.3. Créer l'environnent <span class="trademark">Oracle</span>®</h3></div></div></div><p>Avant de pouvoir installer
	<span class="application"><span class="trademark">Oracle</span>®</span>, vous devez configurer un
	environnement propre.  Ce document ne décrit
	que ce qu'il y a faire <span class="emphasis"><em>spécifiquement</em></span>
	pour utiliser <span class="application"><span class="trademark">Oracle</span>®</span> pour Linux
	sous FreeBSD, et non pas ce qui a été décrit
	dans le guide d'installation
	d'<span class="application"><span class="trademark">Oracle</span>®</span>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-kernel-tuning"></a>11.6.3.1. Optimisation du noyau</h4></div></div></div><a id="idp73390800" class="indexterm"></a><p>Comme décrit dans le guide d'installation
	  d'<span class="application"><span class="trademark">Oracle</span>®</span>, vous devez
	  configurer une taille maximale pour la mémoire
	  partagée.  Sous FreeBSD n'utilisez pas l'option
	  <code class="literal">SHMMAX</code>.  <code class="literal">SHMMAX</code> est
	  simplement calculée à partir de
	  <code class="literal">SHMMAXPGS</code> et <code class="literal">PGSIZE</code>.
	  Définissez donc l'option <code class="literal">SHMMAXPGS</code>.
	  Toutes les autres options peuvent être
	  configurées comme décrit dans le guide.
	  Par exemple:</p><pre class="programlisting">options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</pre><p>Configurez ces options en fonction de l'utilisation
	  prévue d'<span class="application"><span class="trademark">Oracle</span>®</span>.</p><p>Assurez-vous également de la présence des
	  options suivantes dans votre fichier de configuration du
	  noyau:</p><pre class="programlisting">options SYSVSHM #SysV shared memory
options SYSVSEM #SysV semaphores
options SYSVMSG #SysV interprocess communication</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-oracle-account"></a>11.6.3.2. Compte <span class="trademark">Oracle</span>®</h4></div></div></div><p>Créez un compte <code class="systemitem">oracle</code>
	  de la même manière que vous créerez
	  un autre compte utilisateur.  Le compte
	  <code class="systemitem">oracle</code> n'a de spécial que
	  le fait que vous devez lui donner un interpréteur de
	  commandes Linux.  Ajoutez
	  <code class="literal">/compat/linux/bin/bash</code> au fichier
	  <code class="filename">/etc/shells</code> et fixez l'interpréteur
	  de commande du compte <code class="systemitem">oracle</code> à
	  <code class="filename">/compat/linux/bin/bash</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-environment"></a>11.6.3.3. Environnement</h4></div></div></div><p>En plus des variables d'environnement normales
	  d'<span class="application"><span class="trademark">Oracle</span>®</span> comme
	  <code class="envar">ORACLE_HOME</code> et <code class="envar">ORACLE_SID</code>
	  vous devez fixer les variables d'environnement
	  suivantes:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Variable</th><th>Valeur</th></tr></thead><tbody><tr><td><code class="envar">LD_LIBRARY_PATH</code></td><td><code class="literal">$ORACLE_HOME/lib</code></td></tr><tr><td><code class="envar">CLASSPATH</code></td><td><code class="literal">$ORACLE_HOME/jdbc/lib/classes111.zip</code></td></tr><tr><td><code class="envar">PATH</code></td><td><code class="literal">/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</code></td></tr></tbody></table></div><p>Il est conseillé de définir toutes les
	  variables d'environnement dans le fichier
	  <code class="filename">.profile</code>.  Un exemple complet est:</p><pre class="programlisting">ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin
PATH=$PATH:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PATH=$PATH:/usr/local/bin:$ORACLE_HOME/bin
export PATH</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73425872"></a>11.6.4. Installer <span class="trademark">Oracle</span>®</h3></div></div></div><p>En raison d'une particularité de l'émulateur
	Linux, vous devez créer un répertoire appelé
	<code class="filename">.oracle</code> dans <code class="filename">/var/tmp</code>
	avant de lancer le programme d'installation.
	Faites en sorte
	que l'utilisateur <code class="systemitem">oracle</code> en soit le
	propriétaire.  Vous devriez être en mesure
	d'installer <span class="application"><span class="trademark">Oracle</span>®</span> sans problème.
	Si vous rencontrez cependant des problèmes,
	contrôlez tout d'abord votre distribution
	d'<span class="application"><span class="trademark">Oracle</span>®</span> et/ou configuration!
	Après avoir installé <span class="application"><span class="trademark">Oracle</span>®</span>,
	appliquez les correctifs décrits dans les deux
	sous-sections suivantes.</p><p>Un problème fréquent est que l'interface au
	protocole TCP n'est pas correctement installée.
	Avec comme conséquence l'impossibilité d'écouter
	le trafic TCP.  Les opérations suivantes aident
	à résoudre ce problème:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ar r libnetwork.a ntcontab.o</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/network/lib</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -f ins_network.mk install</code></strong></pre><p>N'oubliez pas de lancer à nouveau
	<code class="filename">root.sh</code>!</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-root"></a>11.6.4.1. Appliquer un correctif au fichier root.sh</h4></div></div></div><p>Quand on installe <span class="application"><span class="trademark">Oracle</span>®</span>,
	  certaines opérations, qui doivent être
	  effectuées en tant que <code class="systemitem">root</code>,
	  sont enregistrées dans une procédure
	  d'interpréteur de commandes appelée
	  <code class="filename">root.sh</code>.  Cette procédure se
	  trouve dans le répertoire <code class="filename">orainst</code>.
	  Appliquez le correctif suivant au fichier
	  <code class="filename">root.sh</code>, pour faire en sorte qu'il
	  utilise le chemin correct pour <code class="command">chown</code>, ou
	  exécute une procédure sous un interpréteur
	  de commandes Linux natif.</p><pre class="programlisting">*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</pre><p>Quand vous n'installez pas
	  <span class="application"><span class="trademark">Oracle</span>®</span> à partir d'un CD,
	  vous pouvez modifier les sources de
	  <code class="filename">root.sh</code>.  La procédure se nomme
	  <code class="filename">rthd.sh</code> et se trouve dans le
	  répertoire <code class="filename">orainst</code> dans l'arborescence
	  des sources.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxemu-patch-tcl"></a>11.6.4.2. Patching genclntsh</h4></div></div></div><p>La procédure <code class="command">genclntsh</code>
	  est utilisée pour créer une simple bibliothèque
	  partagée cliente.  Elle est utilisée lors de la
	  construction des démos.  Appliquez le correctif
	  suivant pour commenter la définition de la variable
	  d'environnement <code class="envar">PATH</code>:</p><pre class="programlisting">*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp73454032"></a>11.6.5. Exécuter <span class="trademark">Oracle</span>®</h3></div></div></div><p>Après avoir suivi les instructions
	précédentes, vous devriez être en mesure
	d'exécuter <span class="application"><span class="trademark">Oracle</span>®</span> comme si
	le programme tournait sous Linux.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sapr3"></a>11.7. Installer <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Holger</span> <span class="surname">Kipp</span></span>. </span></div><div><span class="authorgroup">Conversion en SGML par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div></div></div><a id="idp73465552" class="indexterm"></a><p>Les installations de systèmes
      <span class="application"><span class="trademark">SAP</span>®</span> sous FreeBSD ne
      seront pas supportées par l'équipe de support de SAP
      &#8212; ils n'assurent que le support pour des plateformes
      ceritifiées.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preface"></a>11.7.1. Préface</h3></div></div></div><p>Ce document décrit une façon d'installer un
	système <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
	avec la base de données <span class="application"><span class="trademark">Oracle</span>®</span>
	pour Linux sur une machine FreeBSD, comprenant l'installation
	de FreeBSD et d'<span class="application"><span class="trademark">Oracle</span>®</span>.  Deux
	configurations différentes seront décrites:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B (IDES)</span> avec
	  <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span> sous
	  FreeBSD 4.3-STABLE</p></li><li class="listitem"><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C</span> avec
	  <span class="application"><span class="trademark">Oracle</span>® 8.1.7</span> sous
	  FreeBSD 4.5-STABLE</p></li></ul></div><p>Même si ce document tente de décrire toutes les
	étapes importantes de façon détaillée,
	il n'est pas destiné à remplacer les guides
	d'installation d'<span class="application"><span class="trademark">Oracle</span>®</span> et
	<span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.</p><p>Veuillez consulter la documentation fournie avec
	la version Linux de <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
	et les questions spécifiques à
	<span class="application"><span class="trademark">Oracle</span>®</span>, ainsi que les
	ressources d'<span class="application"><span class="trademark">Oracle</span>®</span> et de
	<span class="application"><span class="trademark">SAP</span>® OSS</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software"></a>11.7.2. Logiciels</h3></div></div></div><p>Les CD-ROMs suivants ont été utilisés pour
	les installations de <span class="application"><span class="trademark">SAP</span>®</span>:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software-46b"></a>11.7.2.1. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B, <span class="trademark">Oracle</span>® 8.0.5</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nom</th><th>Numéro</th><th>Description</th></tr></thead><tbody><tr><td>KERNEL</td><td>51009113</td><td>Noyau SAP Oracle /
		Installation / AIX, Linux, Solaris</td></tr><tr><td>RDBMS</td><td>51007558</td><td>Oracle / RDBMS 8.0.5.X /
		Linux</td></tr><tr><td>EXPORT1</td><td>51010208</td><td>IDES / DB-Export /
	Disque 1 sur 6</td></tr><tr><td>EXPORT2</td><td>51010209</td><td>IDES / DB-Export /
		Disque 2 sur 6</td></tr><tr><td>EXPORT3</td><td>51010210</td><td>IDES / DB-Export /
		Disque 3 sur 6</td></tr><tr><td>EXPORT4</td><td>51010211</td><td>IDES / DB-Export /
		Disque 4 sur 6</td></tr><tr><td>EXPORT5</td><td>51010212</td><td>IDES / DB-Export /
		Disque 5 sur 6</td></tr><tr><td>EXPORT6</td><td>51010213</td><td>IDES / DB-Export /
		Disque 6 sur 6</td></tr></tbody></table></div><p>De plus, nous avons utilisé le CD d'<span class="application"><span class="trademark">Oracle</span>® 8
	Serveur</span> (version 8.0.5 de
	pré-production pour Linux, noyau 2.0.33) qui n'est pas
	vraiment nécessaire, et FreeBSD 4.3-STABLE (une version
	plus vieille de quelques jours que la 4.3-RELEASE).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="software-46c"></a>11.7.2.2. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C SR2, <span class="trademark">Oracle</span>® 8.1.7</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nom</th><th>Numéro</th><th>Description</th></tr></thead><tbody><tr><td>KERNEL</td><td>51014004</td><td>Noyau SAP Oracle /
		  Noyau SAP Version 4.6D / DEC, Linux</td></tr><tr><td>RDBMS</td><td>51012930</td><td>Oracle 8.1.7/ RDBMS /
		  Linux</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Version 4.6C SR2 / Export
		  / Disque 1 sur 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Version 4.6C SR2 / Export
		  / Disque 2 sur 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Version 4.6C SR2 / Export
		  / Disque 3 sur 4</td></tr><tr><td>EXPORT1</td><td>51013953</td><td>Version 4.6C SR2 / Export
		  / Disque 4 sur 4</td></tr><tr><td>LANG1</td><td>51013954</td><td>Version 4.6C SR2 /
		  Langue / DE, EN, FR / Disque 1 sur 3</td></tr></tbody></table></div><p>En fonction des langues que vous désirez
	  installer, des CDs propres à ces langues pourront être
	  nécessaires.  Ici nous utilisons juste l'allemand (DE) et
	  l'anglais (EN), donc seul le premier CD propre aux langues
	  sera nécessaire.  Notez que le numéro des quatre
	  CDs EXPORT est identique (c'est différent du
	  numérotage des CDs 4.6B IDES).  Au moment
	  de l'écriture de ces lignes, cette installation utilise
	  FreeBSD 4.5-STABLE (du 20 mars 2002).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes"></a>11.7.3. Notes concernant <span class="trademark">SAP</span>®</h3></div></div></div><p>Les notes suivantes devraient être lues
	avant d'installer <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
	et ont prouvé leur utilité durant
	l'installation:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes-46b"></a>11.7.3.1. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B, <span class="trademark">Oracle</span>® 8.0.5</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Numéro</th><th>Titre</th></tr></thead><tbody><tr><td>0171356</td><td>SAP sous Linux:
		  Remarques importantes</td></tr><tr><td>0201147</td><td>INST: 4.6C R/3 Inst. sur
		  UNIX - Oracle</td></tr><tr><td>0373203</td><td>Mise à jour / Migration
		  Oracle 8.0.5 --&gt;
		  8.0.6/8.1.6 LINUX</td></tr><tr><td>0072984</td><td>Digital UNIX 4.0B pour
		  Oracle</td></tr><tr><td>0130581</td><td>Fin de l'étape
		  DIPGNTAB de R3SETUP</td></tr><tr><td>0144978</td><td>Votre système n'a pas
		  été installé correctement</td></tr><tr><td>0162266</td><td>Questions et conseils pour
		  R3SETUP sous Windows NT / W2K</td></tr></tbody></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sap-notes-46c"></a>11.7.3.2. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C, <span class="trademark">Oracle</span>® 8.1.7</h4></div></div></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Numéro</th><th>Titre</th></tr></thead><tbody><tr><td>0015023</td><td>Initialisation de la
		  table TCPDB (RSXP0004) (EBCDIC)</td></tr><tr><td>0045619</td><td>R/3 avec plusieurs langues
		  ou
		  languages or
		  typefaces</td></tr><tr><td>0171356</td><td>SAP sous Linux: Remarques
		  importantes</td></tr><tr><td>0195603</td><td>RedHat 6.1 version
		  entreprise: problèmes connus</td></tr><tr><td>0212876</td><td>Le nouvel outil d'archivage
		  SAPCAR</td></tr><tr><td>0300900</td><td>Linux: matériel DELL</td></tr><tr><td>0377187</td><td>RedHat 6.2: remarques
		  importantes</td></tr><tr><td>0387074</td><td>INST: R/3 4.6C SR2
		  Installation sous UNIX</td></tr><tr><td>0387077</td><td>INST: R/3 4.6C SR2 Inst. sous
		  UNIX - Oracle</td></tr><tr><td>0387078</td><td>SAP sous UNIX: Dépendances
		  4.6C SR2</td></tr></tbody></table></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-requirements"></a>11.7.4. Matériel nécessaire</h3></div></div></div><p>L'équipement suivant est suffisant
	pour l'installation d'un système
	<span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.  Bien sûr
	pour une utilisation en production, un choix
	plus pointu du matériel est nécessaire:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Composant</th><th>4.6B</th><th>4.6C</th></tr></thead><tbody><tr><td>Processeur</td><td>2 x 800MHz <span class="trademark">Pentium</span>® III</td><td>2 x 800MHz <span class="trademark">Pentium</span>® III</td></tr><tr><td>Mémoire</td><td>1Go ECC</td><td>2Go ECC</td></tr><tr><td>Espace disque</td><td>50-60Go (IDES)</td><td>50-60Go (IDES)</td></tr></tbody></table></div><p>Pour une utilisation en production, des processeurs <span class="trademark">Xeon</span>&#8482;
	avec un cache important, un accès disque rapide (SCSI,
	contrôleur RAID matériel) et de la mémoire
	ECC.  L'espace disque nécessaire est important en
	raison du système IDES pré-configuré, qui
	créé une base de données de 27 Go
	durant l'installation.  Cet espace est également
	suffisant pour démarrer des systèmes
	destinés à la production.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-46b"></a>11.7.4.1. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6B, <span class="trademark">Oracle</span>® 8.0.5</h4></div></div></div><p>Le matériel suivant fut utilisé: une carte
	mère bi-processeurs avec 2 processeurs <span class="trademark">Pentium</span>® III
	800 MHz, une carte SCSI <span class="trademark">Adaptec</span>® 29160 Ultra160
	(pour utiliser un lecteur de bande 40/80 Go DLT et un
	lecteur de CDROM), une carte <span class="trademark">Mylex</span>® <span class="trademark">AcceleRAID</span>&#8482; (2 canaux,
	firmware 6.00-1-00 avec 32 Mo de RAM).  Au contrôleur
	RAID <span class="trademark">Mylex</span>® sont reliés deux disques durs de 17 Go
	(miroirs) et quatre disques de 36 Go (RAID niveau
	5).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hardware-46c"></a>11.7.4.2. <span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C, <span class="trademark">Oracle</span>® 8.1.7</h4></div></div></div><p>Pour cette installation un <span class="trademark">Dell</span>&#8482; <span class="trademark">PowerEdge</span>&#8482; 2500 a
	été utilisé: une carte mère
	bi-processeurs avec deux processeurs <span class="trademark">Pentium</span>® III
	1000 MHz (256 Ko de cache), 2 Go PC133 ECC
	SDRAM, un contrôleur PERC/3 DC PCI RAID avec
	128 Mo, et un lecteur DVD-ROM EIDE.  Au contrôleur
	RAID sont reliés deux disques durs 18 Go (miroirs)
	et quatre disques de 36 Go (RAID niveau 5).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installation"></a>11.7.5. Installation de FreeBSD</h3></div></div></div><p>Tout d'abord vous devez installer FreeBSD.  Il existe de
	nombreuses manière d'installer FreeBSD, pour plus d'informations
	consultez la <a class="xref" href="#install-diff-media" title="2.13. Préparer votre propre support d'installation">Section 2.13, « Préparer votre propre support d'installation »</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disk-layout"></a>11.7.5.1. Organisation des disques</h4></div></div></div><p>Pour rester simple, la même organisation des
	  disques a été utilisée pour les
	  installations de <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 46B</span> et
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 46C SR2</span>.  Seuls les noms
	  de périphériques ont changé, comme les
	  installations ont été effectuées sur du
	  matériel différent
	  (<code class="filename">/dev/da</code> et
	  <code class="filename">/dev/amr</code> respectivement, aussi si
	  l'on utilise un contrôleur AMI MegaRAID, on verra
	  <code class="filename">/dev/amr0s1a</code> à la place de
	  <code class="filename">/dev/da0s1a</code>):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Système de fichiers</th><th>Taille (blocs de 1k)</th><th>Taille (Go)</th><th>Monté sous</th></tr></thead><tbody><tr><td><code class="filename">/dev/da0s1a</code></td><td>1.016.303</td><td>1</td><td><code class="filename">/</code></td></tr><tr><td><code class="filename">/dev/da0s1b</code></td><td> </td><td>6</td><td>swap</td></tr><tr><td><code class="filename">/dev/da0s1e</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/var</code></td></tr><tr><td><code class="filename">/dev/da0s1f</code></td><td>8.205.339</td><td>8</td><td><code class="filename">/usr</code></td></tr><tr><td><code class="filename">/dev/da1s1e</code></td><td>45.734.361</td><td>45</td><td><code class="filename">/compat/linux/oracle</code></td></tr><tr><td><code class="filename">/dev/da1s1f</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/compat/linux/sapmnt</code></td></tr><tr><td><code class="filename">/dev/da1s1g</code></td><td>2.032.623</td><td>2</td><td><code class="filename">/compat/linux/usr/sap</code></td></tr></tbody></table></div><p>Configurez et initialisez les deux disques logiques
	  à l'avance avec les logiciels <span class="trademark">Mylex</span>® ou PERC/3 RAID.
	  Ces logiciels peuvent être lancés lors
	  de la phase de démarrage du
	  <acronym class="acronym">BIOS</acronym>.</p><p>Notez que l'organisation du disque diffère
	  légèrement des recommandations de SAP, comme
	  SAP suggère de monter séparément
	  les sous-répertoires d'<span class="application"><span class="trademark">Oracle</span>®</span>
	  (et d'autres) &#8212; nous avons décidé de
	  simplement créer de véritables sous-répertoires
	  directement.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworldandnewkernel"></a>11.7.5.2. Utiliser <code class="command">make world</code> et compiler
	  un nouveau noyau</h4></div></div></div><p>Téléchargez les sources -STABLE les plus
	  récentes.  Recompilez l'intégralité du
	  système et votre noyau personnalisé
	  après avoir configuré votre fichier de
	  configuration du noyau.  Là, vous devriez
	  également ajouter les <a class="link" href="#kerneltuning" title="11.7.7.6. Optimisation du noyau">paramètres du noyau</a>
	  requis par <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> et
	  <span class="application"><span class="trademark">Oracle</span>®</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingthelinuxenviornment"></a>11.7.6. Installer l'environnement Linux</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxbase-system"></a>11.7.6.1. Installer le système de base Linux</h4></div></div></div><p>Tout d'abord le logiciel porté
	  <a class="link" href="#linuxemu-libs-port" title="11.2.1.1. Installation à l'aide du logiciel porté linux_base">linux_base</a> doit
	  être installé (en tant que super-utilisateur):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/emulators/linux_base</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installinglinuxdevelopment"></a>11.7.6.2. Installer l'environnement de développement
	  Linux</h4></div></div></div><p>L'environnement de développement Linux est
	  nécessaire, si vous désirez installer
	  <span class="application"><span class="trademark">Oracle</span>®</span> sous FreeBSD comme cela est
	  décrit dans la <a class="xref" href="#linuxemu-oracle" title="11.6. Installer Oracle®">Section 11.6, « Installer <span class="trademark">Oracle</span>® »</a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/devel/linux_devtools</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install distclean</code></strong></pre><p>L'environnement de développement Linux a
	  été installé en vue de l'installation
	  de <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 46B IDES</span>.  Ce n'est
	  pas nécessaire si <span class="application"><span class="trademark">Oracle</span>®
	  DB</span> n'est pas liée sur un système
	  FreeBSD.  C'est le cas si vous utilisez l'archive
	  <span class="application">tar</span>
	  <span class="application"><span class="trademark">Oracle</span>®</span> en provenance d'un
	  système Linux.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingnecessaryrpms"></a>11.7.6.3. Installer les RPMs nécessaires</h4></div></div></div><a id="idp73693520" class="indexterm"></a><p>Pour lancer le programme
	  <code class="command">R3SETUP</code>, le support PAM est
	  nécessaire.  Lors de la première installation de
	  <span class="application"><span class="trademark">SAP</span>®</span> sous FreeBSD 4.3-STABLE,
	  nous avons tenté d'installer PAM avec tous les
	  &#8220;packages&#8221; nécessaires, et nous avons
	  finalement forcé l'installation du &#8220;package&#8221;
	  PAM, ce qui a fonctionné.  Pour
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C SR2</span>, nous avons
	  directement forcé l'installation du
	  RPM PAM, ce qui fonctionne également, il semble donc
	  que les RPMs de dépendance ne sont pas
	  nécessaires:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm \
pam-0.68-7.i386.rpm</code></strong></pre><p>Pour utiliser l'agent intelligent
	  d'<span class="application"><span class="trademark">Oracle</span>® 8.0.5</span>, nous devons
	  également installer la version RedHat de Tcl
	  <code class="filename">tcl-8.0.5-30.i386.rpm</code> (sinon l'édition
	  de liens durant l'installation
	  d'<span class="application"><span class="trademark">Oracle</span>®</span> ne fonctionnera pas).
	  Il existe d'autres problèmes à ce niveau, mais ils
	  concernent directement la version Linux
	  d'<span class="application"><span class="trademark">Oracle</span>®</span>, et ne sont donc pas
	  spécifiquent à FreeBSD.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="linuxprocandfallbackelfbrand"></a>11.7.6.4. Quelques conseils supplémentaires</h4></div></div></div><p>Cela peut être une bonne idée d'ajouter
	  <code class="literal">linprocfs</code> au fichier
	  <code class="filename">/etc/fstab</code>, pour plus d'informations
	  consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=linprocfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">linprocfs</span>(5)</span></a>.  Un autre
	  paramètre à positionner est
	  <code class="literal">kern.fallback_elf_brand=3</code>, ce qui
	  doit être fait dans le fichier
	  <code class="filename">/etc/sysctl.conf</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingsapr3env"></a>11.7.7. Créer l'environnement SAP/R3</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="filesystemsandmountpoints"></a>11.7.7.1. Créer les systèmes de fichiers et points de
	  montage nécessaires</h4></div></div></div><p>Pour une simple installation, il est suffisant de
	  créer les systèmes de fichiers suivants:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>point de montage</th><th>taille en Go</th></tr></thead><tbody><tr><td><code class="filename">/compat/linux/oracle</code></td><td>45 Go</td></tr><tr><td><code class="filename">/compat/linux/sapmnt</code></td><td>2 Go</td></tr><tr><td><code class="filename">/compat/linux/usr/sap</code></td><td>2 Go</td></tr></tbody></table></div><p>Il est également nécessaire de créer
	  certains liens.  Sinon l'intalleur
	  <span class="application"><span class="trademark">SAP</span>®</span> se plaindra, lors du
	  contrôle des liens créés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/oracle /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/sapmnt /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s /compat/linux/usr/sap /usr/sap</code></strong></pre><p>Un message d'erreur possible durant l'installation
	  (ici avec un système <span class="emphasis"><em>PRD</em></span>
	  l'installation de
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>® 4.6C SR2</span>):</p><pre class="screen">INFO 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:200
    Checking existence of symbolic link /usr/sap/PRD/SYS/exe/dbg to
    /sapmnt/PRD/exe. Creating if it does not exist...

WARNING 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:400
    Link /usr/sap/PRD/SYS/exe/dbg exists but it points to file
    /compat/linux/sapmnt/PRD/exe instead of /sapmnt/PRD/exe. The
    program cannot go on as long as this link exists at this
    location. Move the link to another location.

ERROR 2002-03-19 16:45:36 R3LINKS_IND_IND Ins_SetupLinks:0
    can not setup link '/usr/sap/PRD/SYS/exe/dbg' with content
    '/sapmnt/PRD/exe'</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusersanddirectories"></a>11.7.7.2. Création des utilisateurs et des
	  répertoires</h4></div></div></div><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> a besoin de deux
	  utilisateurs et de trois groupes.  Les noms d'utilisateurs
	  dépendent du système d'ID de
	  <span class="application"><span class="trademark">SAP</span>®</span> (SID) qui est composé
	  de trois lettres.  Certains de ces SIDs sont
	  réservés par <span class="application"><span class="trademark">SAP</span>®</span>
	  (par exemple <code class="literal">SAP</code> et
	  <code class="literal">NIX</code>.  Pour une liste complète
	  consultez la documentation de
	  <span class="application"><span class="trademark">SAP</span>®</span>).  Pour l'installation IDES,
	  nous avons utilisé <code class="literal">IDS</code>, pour
	  l'installation 4.6C SR2 <code class="literal">PRD</code>, comme ce
	  système était destiné à la
	  production.  Nous avons cependant les groupes suivants (les
	  identifiants de groupe peuvent être différents,
	  ce sont seulement les valeurs que nous avons utilisés
	  dans notre installation):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>groupe ID</th><th>nom du groupe</th><th>description</th></tr></thead><tbody><tr><td>100</td><td>dba</td><td>Administrateur de la base de données</td></tr><tr><td>101</td><td>sapsys</td><td>Système <span class="trademark">SAP</span>®</td></tr><tr><td>102</td><td>oper</td><td>Opérateur de la base de données</td></tr></tbody></table></div><p>Pour une installation
	  d'<span class="application"><span class="trademark">Oracle</span>®</span> par défaut, seul le
	  groupe <code class="systemitem">dba</code> est utilisé.
	  Tout comme le groupe <code class="systemitem">oper</code>, certains
	  utilisent également le groupe <code class="systemitem">dba</code>
	  (Voir les documentations d'<span class="application"><span class="trademark">Oracle</span>®</span>
	  et de <span class="application"><span class="trademark">SAP</span>®</span> pour plus
	  d'information).</p><p>Nous avons également besoin des utilisateurs
	  suivants:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th>ID utilisateur</th><th>nom d'utilisateur</th><th>nom générique</th><th>groupe</th><th>groupes supplémentaires</th><th>description</th></tr></thead><tbody><tr><td>1000</td><td>idsadm/prdadm</td><td><em class="replaceable"><code>sid</code></em>adm</td><td>sapsys</td><td>oper</td><td>Administrateur <span class="trademark">SAP</span>®</td></tr><tr><td>1002</td><td>oraids/oraprd</td><td>ora<em class="replaceable"><code>sid</code></em></td><td>dba</td><td>oper</td><td>Administrateur de la base de données <span class="trademark">Oracle</span>®</td></tr></tbody></table></div><p>L'ajout des utilisateurs avec la commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> nécessite les entrées
	  suivantes (notez l'interpréteur de commandes et le
	  répertoire utilisateur) pour l'&#8220;Administrateur
	  <span class="trademark">SAP</span>®&#8221;:</p><pre class="programlisting">Name: <em class="replaceable"><code>sid</code></em>adm
Password: ******
Fullname: SAP Administrator <em class="replaceable"><code>SID</code></em>
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/<em class="replaceable"><code>sid</code></em>adm
Shell: bash  (/compat/linux/bin/bash)</pre><p>et pour l'&#8220;Administrateur de la base de
	  données <span class="trademark">Oracle</span>®&#8221;:</p><pre class="programlisting">Name: ora<em class="replaceable"><code>sid</code></em>
Password: ******
Fullname: Oracle Administrator <em class="replaceable"><code>SID</code></em>
Uid: 1002
Gid: 100 (dba)
Class:
Groups: dba
HOME: /oracle/<em class="replaceable"><code>sid</code></em>
Shell: bash  (/compat/linux/bin/bash)</pre><p>Ceci devrait également inclure le groupe
	  <code class="systemitem">oper</code> au cas où vous utiliseriez
	  les deux groupes <code class="systemitem">dba</code> et
	  <code class="systemitem">oper</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingdirectories"></a>11.7.7.3. Création des répertoires</h4></div></div></div><p>Ces répertoires sont généralement
	  créés sous forme de systèmes de
	  fichiers séparés.  Cela dépend
	  entièrement de vous besoins.  Nous avons choisi de
	  créer de simple répertoires, comme ils sont
	  placés sur le même système RAID
	  5:</p><p>Nous positionnerons tout d'abord les propriétaires
	  et les droits de certains répertoires (en tant que
	  <code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 777 /sapmnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown root:dba /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown sidadm:sapsys /compat/linux/usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 775 /compat/linux/usr/sap</code></strong></pre><p>Ensuite nous crérons les répertoires en tant
	  qu'utilisateur
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>.  Ce
	  seront tous les répertoires du type
	  <code class="filename">/oracle/SID</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - orasid</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/SID</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir mirrlogA mirrlogB origlogA origlogB</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir saparch sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre><p>Pour l'installation d'<span class="application"><span class="trademark">Oracle</span>® 8.1.7</span>
	  des répertoires supplémentaires sont
	  nécessaires:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - orasid</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir 805_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir client stage</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir client/80x_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir stage/817_32</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/SID</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir 817_32</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le répertoire <code class="filename">client/80x_32</code> est
	  créé tel quel.  Ne remplacez pas le
	  <span class="emphasis"><em>x</em></span> par quelque chose
	  d'autre.</p></div><p>La dernière étape consiste à
	  créer les répertoires en tant qu'utilisateur
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - sidadm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir SID</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir trans</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="entriesinslashetcslashservices"></a>11.7.7.4. Entrées dans <code class="filename">/etc/services</code></h4></div></div></div><p><span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> a besoin de certaines
	  entrées dans le fichier
	  <code class="filename">/etc/services</code>, qui ne seront pas
	  créées durant son installation sous FreeBSD.
	  Veuillez ajouter les entrées suivantes (vous avez
	  besoin au moins des entrées correspondant au
	  numéro d'instance &#8212; dans notre cas,
	  <code class="literal">00</code>.  Cela ne posera pas de
	  problème d'ajouter toutes les entrées de
	  <code class="literal">00</code> à <code class="literal">99</code> pour
	  <code class="literal">dp</code>, <code class="literal">gw</code>,
	  <code class="literal">sp</code> et <code class="literal">ms</code>).  Si vous
	  allez utiliser <span class="application">SAProuter</span> ou vous
	  devez accéder au <span class="application"><span class="trademark">SAP</span>®</span> OSS,
	  vous avez également besoin de l'entrée
	  <code class="literal">99</code>, comme le port 3299 est
	  généralement utilisé par le processus
	  <span class="application">SAProuter</span> sur le système
	  cible:</p><pre class="programlisting">
sapdp00    3200/tcp # SAP Dispatcher.      3200 + Instance-Number
sapgw00  3300/tcp # SAP Gateway.         3300 + Instance-Number
sapsp00  3400/tcp #                      3400 + Instance-Number
sapms00  3500/tcp #                      3500 + Instance-Number
sapms<em class="replaceable"><code>SID</code></em> 3600/tcp # SAP Message Server.  3600 + Instance-Number
sapgw00s   4800/tcp # SAP Secure Gateway   4800 + Instance-Number</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="necessarylocales"></a>11.7.7.5. &#8220;Locales&#8221; nécessaires</h4></div></div></div><a id="idp73822416" class="indexterm"></a><p><span class="application"><span class="trademark">SAP</span>®</span> nécessite au moins
	  deux &#8220;locales&#8221; qui ne font pas partie de
	  l'installation RedHat par défaut.  SAP propose les
	  RPMs nécessaires en téléchargement
	  à partir de leur serveur FTP (qui est uniquement
	  accessible si vous êtes un client avec un accès
	  OSS).  Consultez la note 0171356 pour la liste des RPMs dont
	  vous avez besoin.</p><p>Il est également possible de créer just
	  les appropriés (par exemple à partir de
	  <span class="emphasis"><em>de_DE</em></span> et <span class="emphasis"><em>en_US</em></span>),
	  mais nous ne recommandons pas cela pour un système
	  destiné à la production (bien que cela a
	  fonctionné sans problème avec le
	  système IDES).  Les &#8220;locales&#8221; suivantes
	  sont nécessaires:</p><pre class="programlisting">de_DE.ISO-8859-1
en_US.ISO-8859-1</pre><p>Créez les liens comme suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /compat/linux/usr/share/locale</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s de_DE de_DE.ISO-8859-1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ln -s en_US en_US.ISO-8859-1</code></strong></pre><p>S'ils n'existent pas, des problèmes apparaîtrons
	  lors de l'installation.  Si ces problèmes sont
	  intentionnellement ignorés (en fixant la valeur
	  de la variable <code class="literal">STATUS</code>
	  des étapes pour lesquelles les problèmes sont
	  apparus à la valeur <code class="literal">OK</code> dans le
	  fichier <code class="filename">CENTRDB.R3S</code>), il sera
	  impossible d'ouvrir une session sur le système
	  <span class="application"><span class="trademark">SAP</span>®</span> sans effort
	  supplémentaire.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kerneltuning"></a>11.7.7.6. Optimisation du noyau</h4></div></div></div><a id="idp73839696" class="indexterm"></a><p>Les systèmes <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>
	demandent beaucoup de ressources.  Nous avons donc
	ajouté les paramètres suivants au fichier de
	configuration du noyau:</p><pre class="programlisting"># Set these for memory pigs (SAP and Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)"
# System V options needed.
options SYSVSHM #SYSV-style shared memory
options SHMMAXPGS=262144 #max amount of shared mem. pages
#options SHMMAXPGS=393216 #use this for the 46C inst.parameters
options SHMMNI=256 #max number of shared memory ident if.
options SHMSEG=100 #max shared mem.segs per process
options SYSVMSG #SYSV-style message queues
options MSGSEG=32767 #max num. of mes.segments in system
options MSGSSZ=32 #size of msg-seg. MUST be power of 2
options MSGMNB=65535 #max char. per message queue
options MSGTQL=2046 #max amount of msgs in system
options SYSVSEM #SYSV-style semaphores
options SEMMNU=256 #number of semaphore UNDO structures
options SEMMNS=1024 #number of semaphores in system
options SEMMNI=520 #number of semaphore identifiers
options SEMUME=100       #number of UNDO keys</pre><p>Les valeurs minimales sont précisées dans
	  la documentation en provenance de SAP.  Comme il n'y a pas
	  d'éléments concernant Linux, consultez la section
	  sur HP-UX (32bits) pour plus d'information.  Comme le
	  système utilisé pour l'installation de la
	  version 4.6C SR2 dispose de plus de mémoire principale,
	  les segments de mémoire partagée (&#8220;shared
	  segments&#8221;) peuvent être plus larges pour
	  <span class="application"><span class="trademark">SAP</span>®</span> et
	  <span class="application"><span class="trademark">Oracle</span>®</span>, cependant choisissez un
	  nombre plus important de page de mémoire
	  partagée.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avec l'installation par défaut de FreeBSD
	  sur l'architecture <span class="trademark">i386</span>&#8482;, laissez <code class="literal">MAXDSIZ</code>
	  et <code class="literal">DFLDSIZ</code> à une valeur de
	  1 Go maximum.  Sinon, des erreurs étranges comme
	  <span class="errorname">ORA-27102: out of memory</span> et
	  <span class="errorname">Linux Error: 12: Cannot allocate memory</span>
	  risquent d'apparaître.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingsapr3"></a>11.7.8. Installer <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="preparingsapcdroms"></a>11.7.8.1. Préparer les CDROMs <span class="trademark">SAP</span>®</h4></div></div></div><p>Il y a de nombreux CDROMs à monter et
	  démonter lors de l'installation.  Si vous disposez de
	  suffisamment de lecteurs de CDROMs, vous pouvez tout
	  simplement les monter tous.  Nous avons décidé
	  de copier le contenu des CDROMs dans les répertoires
	  correspondant:</p><pre class="programlisting">/oracle/<em class="replaceable"><code>SID</code></em>/sapreorg/<em class="replaceable"><code>nom-du-cd</code></em></pre><p>où <em class="replaceable"><code>nom-du-cd</code></em> est un nom
	  parmi <code class="filename">KERNEL</code>,
	  <code class="filename">RDBMS</code>, <code class="filename">EXPORT1</code>,
	  <code class="filename">EXPORT2</code>, <code class="filename">EXPORT3</code>,
	  <code class="filename">EXPORT4</code>, <code class="filename">EXPORT5</code> et
	  <code class="filename">EXPORT6</code> pour l'installation de la version
	  4.6B/IDES, et <code class="filename">KERNEL</code>,
	  <code class="filename">RDBMS</code>, <code class="filename">DISK1</code>,
	  <code class="filename">DISK2</code>, <code class="filename">DISK3</code>,
	  <code class="filename">DISK4</code> et <code class="filename">LANG</code> pour
	  l'installation de la version 4.6C SR2.  Tous les noms
	  de fichiers sur les CDs montés devraient être en
	  majuscules, sinon utilisez l'option <code class="option">-g</code>
	  pour le montage.  Utilisez donc les commandes
	  suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 -g /dev/cd0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp -R /mnt/* /oracle/SID/sapreorg/nom-du-cd</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="runningtheinstall-script"></a>11.7.8.2. Exécuter la procédure d'installation</h4></div></div></div><p>Tout d'abord, vous devez préparer un répertoire
	  <code class="filename">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/SID/sapreorg</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd install</code></strong></pre><p>Ensuite la procédure d'installation est
	  lancée, qui copiera tous fichiers correspondant dans
	  le répertoire <code class="filename">install</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/oracle/SID/sapreorg/KERNEL/UNIX/INSTTOOL.SH</code></strong></pre><p>L'installation IDES (4.6B) est fournie avec un
	  système <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> de
	  démonstration complètement configuré,
	  il y a donc six CDs EXPORT au lieu de juste trois CDs
	  EXPORT.  A ce point la configuration par défaut
	  d'installation <code class="filename">CENTRDB.R3S</code> est
	  destiné à l'installation d'une instance
	  centrale standard (<span class="application"><span class="trademark">R/3</span>®</span> et base de
	  données), et non pas l'instance centrale standard
	  IDES, on doit donc copier le fichier
	  <code class="filename">CENTRDB.R3S</code> correspondant du
	  répertoire <code class="filename">EXPORT1</code>, sinon
	  <code class="command">R3SETUP</code> ne demandera que trois CDs
	  EXPORT.</p><p>La nouvelle version <span class="application"><span class="trademark">SAP</span>® 4.6C
	  SR2</span> est fournie avec quatre CDs EXPORT.  Le
	  fichier de paramètres qui contrôle les
	  étapes de l'installation est le fichier
	  <code class="filename">CENTRAL.R3S</code>.  Contrairement aux
	  versions précédentes, il n'y a pas de
	  modèle de configuration d'installation
	  séparé pour une instance centrale avec ou sans
	  base de données.  <span class="application"><span class="trademark">SAP</span>®</span>
	  utilise un modèle de configuration
	  séparé pour l'installation de base de
	  données.  Pour relancer l'installation
	  postérieurement, il suffit de la relancer avec le
	  fichier d'origine.</p><p>Pendant et après l'installation,
	  <span class="application"><span class="trademark">SAP</span>®</span> a besoin que la commande
	  <code class="command">hostname</code> renvoie uniquement le nom de la
	  machine et non pas le nom complet de la machine.  Fixez donc
	  le nom de la machine en fonction, ou créez un alias
	  avec <code class="command">alias hostname='hostname -s'</code> pour
	  les utilisateurs
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code> et
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code> (et
	  pour le super-utilisateur <code class="systemitem">root</code> au moins
	  durant les étapes de l'installation effectuées
	  en tant que <code class="systemitem">root</code>).  Il est
	  également possible d'ajuster les fichiers
	  <code class="filename">.profile</code> et <code class="filename">.login</code>
	  des deux utilisateurs qui sont installés lors de
	  l'installation de <span class="application"><span class="trademark">SAP</span>®</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup-46B"></a>11.7.8.3. Exécuter <code class="command">R3SETUP</code> 4.6B</h4></div></div></div><p>Assurez-vous que la variable <code class="envar">LD_LIBRARY_PATH</code>
	  est correctement positionnée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</code></strong></pre><p>Lancez <code class="command">R3SETUP</code> en tant que
	  <code class="systemitem">root</code> à partir du répertoire
	  d'installation:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/IDS/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre><p>La procédure pose ensuite un certain nombre de
	  questions (les valeurs par défaut sont entre crochets,
	  suivies par les entrées clavier):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Question</th><th>Défaut</th><th>Entrée(s) clavier</th></tr></thead><tbody><tr><td>Enter SAP System ID</td><td>[C11]</td><td>IDS<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter SAP Instance Number</td><td>[00]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter SAPMOUNT Directory</td><td>[/sapmnt]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter name of SAP central host</td><td>[troubadix.domain.de]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter name of SAP db host</td><td>[troubadix]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Select character set</td><td>[1] (WE8DEC)</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Oracle server version (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</td><td> </td><td>1<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Extract Oracle Client archive</td><td>[1] (Yes, extract)</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to KERNEL CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/KERNEL</td></tr><tr><td>Enter path to RDBMS CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/RDBMS</td></tr><tr><td>Enter path to EXPORT1 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT1</td></tr><tr><td>Directory to copy EXPORT1 CD</td><td>[/oracle/IDS/sapreorg/CD4_DIR]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to EXPORT2 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT2</td></tr><tr><td>Directory to copy EXPORT2 CD</td><td>[/oracle/IDS/sapreorg/CD5_DIR]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to EXPORT3 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT3</td></tr><tr><td>Directory to copy EXPORT3 CD</td><td>[/oracle/IDS/sapreorg/CD6_DIR]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to EXPORT4 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT4</td></tr><tr><td>Directory to copy EXPORT4 CD</td><td>[/oracle/IDS/sapreorg/CD7_DIR]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to EXPORT5 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT5</td></tr><tr><td>Directory to copy EXPORT5 CD</td><td>[/oracle/IDS/sapreorg/CD8_DIR]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to EXPORT6 CD</td><td>[/sapcd]</td><td>/oracle/IDS/sapreorg/EXPORT6</td></tr><tr><td>Directory to copy EXPORT6 CD</td><td>[/oracle/IDS/sapreorg/CD9_DIR]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter amount of RAM for SAP + DB</td><td> </td><td>850<span class="keycap"><strong>Entrée</strong></span> (en mégaoctets)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Group-ID of sapsys</td><td>[101]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Group-ID of oper</td><td>[102]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Group-ID of dba</td><td>[100]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter User-ID of <em class="replaceable"><code>sid</code></em>adm</td><td>[1000]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter User-ID of ora<em class="replaceable"><code>sid</code></em></td><td>[1002]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Number of parallel procs</td><td>[2]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr></tbody></table></div><p>Si vous n'avez pas copié les CDs en différent
	  endroits, alors l'installeur <span class="application"><span class="trademark">SAP</span>®</span>
	  ne peut trouver le CD nécessaire (identifié par le
	  fichier <code class="filename">LABEL.ASC</code> sur le CD) et vous
	  demandera alors d'insérer, de monter le CD et de
	  confirmer ou d'entrer le chemin du point de montage.</p><p>Le fichier <code class="filename">CENTRDB.R3S</code> peut ne pas
	  être exempt de problème.  Dans notre cas, il demanda
	  à nouveau le CD EXPORT4 mais indiqua la clé
	  correcte (6_LOCATION, puis 7_LOCATION, etc.), on peut donc
	  juste continuer à saisir les bonnes valeurs.</p><p>En dehors des problèmes mentionnés plus
	  bas, tout devrait être assez direct jusqu'au moment
	  où la base de données
	  <span class="application"><span class="trademark">Oracle</span>®</span> doit être
	  installée.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startr3setup-46C"></a>11.7.8.4. Exécuter <code class="command">R3SETUP</code> 4.6C SR2</h4></div></div></div><p>Assurez-vous que la variable <code class="envar">LD_LIBRARY_PATH</code>
	  est correctement positionnée.  La valeur est
	  différente de l'installation 4.6B avec
	  <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>export LD_LIBRARY_PATH=/sapmnt/PRD/exe:/oracle/PRD/817_32/lib</code></strong></pre><p>Lancez <code class="command">R3SETUP</code> en tant que
	  <code class="systemitem">root</code> à partir du répertoire
	  d'installation:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /oracle/PRD/sapreorg/install</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRAL.R3S</code></strong></pre><p>La procédure pose ensuite un certain nombre de
	  questions (les valeurs par défaut sont entre crochets,
	  suivies par les entrées clavier):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Question</th><th>Défaut</th><th>Entrée(s) clavier</th></tr></thead><tbody><tr><td>Enter SAP System ID</td><td>[C11]</td><td>PRD<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter SAP Instance Number</td><td>[00]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter SAPMOUNT Directory</td><td>[/sapmnt]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter name of SAP central host</td><td>[majestix]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Database System ID</td><td>[PRD]</td><td>PRD<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter name of SAP db host</td><td>[majestix]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Select character set</td><td>[1] (WE8DEC)</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Oracle server version (2) Oracle 8.1.7</td><td> </td><td>2<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Extract Oracle Client archive</td><td>[1] (Yes, extract)</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter path to KERNEL CD</td><td>[/sapcd]</td><td>/oracle/PRD/sapreorg/KERNEL</td></tr><tr><td>Enter amount of RAM for SAP + DB</td><td>2044</td><td>1800<span class="keycap"><strong>Entrée</strong></span> (en mégaoctets)</td></tr><tr><td>Service Entry Message Server</td><td>[3600]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Group-ID of sapsys</td><td>[100]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Group-ID of oper</td><td>[101]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Group-ID of dba</td><td>[102]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter User-ID of <code class="systemitem">oraprd</code></td><td>[1002]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter User-ID of <code class="systemitem">prdadm</code></td><td>[1000]</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>LDAP support</td><td> </td><td>3<span class="keycap"><strong>Entrée</strong></span> (pas de support)</td></tr><tr><td>Installation step completed</td><td>[1] (continue)</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Choose installation service</td><td>[1] (DB inst,file)</td><td><span class="keycap"><strong>Entrée</strong></span></td></tr></tbody></table></div><p>Jusqu'ici, la création d'utilisateurs donne une
	  erreur durant l'installation lors des phases
	  OSUSERDBSID_IND_ORA (pour la création de
	  l'utilisateur
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>) et
	  OSUSERSIDADM_IND_ORA (création de l'utilisateur
	  <code class="systemitem"><em class="replaceable"><code>sid</code></em>adm</code>).</p><p>En dehors des problèmes mentionnés plus
	  bas, tout devrait être assez direct jusqu'au moment
	  où la base de données
	  <span class="application"><span class="trademark">Oracle</span>®</span> doit être
	  installée.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle805"></a>11.7.9. Installer <span class="trademark">Oracle</span>® 8.0.5</h3></div></div></div><p>Consultez les notes <span class="trademark">SAP</span>® et les
	<code class="filename">Readme</code>s d'<span class="trademark">Oracle</span>® concernant Linux et la
	base de données <span class="application"><span class="trademark">Oracle</span>®</span> pour
	de possibles problèmes.  La plupart, si ce n'est pas
	tous, de ces problèmes proviennent de
	bibliothèques incompatibles.</p><p>Pour plus d'informations au sujet de l'installation
	d'<span class="application"><span class="trademark">Oracle</span>®</span>,
	référez-vous au chapitre sur l'<a class="link" href="#linuxemu-oracle" title="11.6. Installer Oracle®">installation d'<span class="trademark">Oracle</span>®.</a></p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805withorainst"></a>11.7.9.1. Installer <span class="trademark">Oracle</span>® 8.0.5 avec <code class="command">orainst</code></h4></div></div></div><p>Si <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span> doit
	  être utilisée, des bibliothèques
	  supplémentaires sont nécessaires pour une
	  édition de liens couronnée de succès,
	  comme <span class="application"><span class="trademark">Oracle</span>® 8.0.5</span> est
	  liée avec une ancienne bibliothèque glibc
	  (RedHat 6.0), cependant RedHat 6.1 utilise
	  déjà une nouvelle version de la
	  bibliothèque glibc.  Vous devez donc installer les
	  &#8220;packages&#8221; suivants pour s'assurer que
	  l'édition de liens fonctionnera:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">compat-libs-5.2-2.i386.rpm</code></p></li><li class="listitem"><p><code class="filename">compat-glibc-5.2-2.0.7.2.i386.rpm</code></p></li><li class="listitem"><p><code class="filename">compat-egcs-5.2-1.0.3a.1.i386.rpm</code></p></li><li class="listitem"><p><code class="filename">compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</code></p></li><li class="listitem"><p><code class="filename">compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</code></p></li></ul></div><p>Consultez les notes <span class="trademark">SAP</span>® et les
	  <code class="filename">Readme</code>s d'<span class="trademark">Oracle</span>® pour plus
	  d'informations.  On pourra utiliser les binaires d'origine
	  (au moment de l'installation, nous n'avons pas eu le temps
	  de contrôler cela), ou utiliser directement les binaires
	  fraichement liés d'un système RedHat.</p><p>Pour la compilation de l'agent intelligent, la
	  version RedHat de Tcl doit être installée.
	  Si vous ne pouvez vous procurer
	  <code class="filename">tcl-8.0.3-20.i386.rpm</code>, un fichier plus
	  récent comme <code class="filename">tcl-8.0.5-30.i386.rpm</code> pour
	  RedHat 6.1 fera l'affaire.</p><p>En dehors de ce problème de liens, l'installation est
	  relativement directe:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>su - oraids</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_TERM=xterm</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>export ORACLE_HOME=/oracle/IDS</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd $ORACLE_HOME/orainst_sap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./orainst</code></strong></pre><p>Confirmez tous les écrans en appuyant sur
	  <span class="keycap"><strong>Entrée</strong></span> jusqu'à l'installation
	  complète du logiciel, à l'exception de celui
	  qui permet de déselectionner la &#8220;visionneuse de
	  texte <span class="trademark">Oracle</span>®&#8221; (<span class="emphasis"><em><span class="trademark">Oracle</span>® On-Line Text
	  Viewer</em></span>), comme cette dernière n'est pas
	  disponible pour Linux.  Ensuite
	  <span class="application"><span class="trademark">Oracle</span>®</span> veut faire
	  l'édition de liens avec
	  <code class="command">i386-glibc20-linux-gcc</code> à la place
	  des <code class="command">gcc</code>, <code class="command">egcs</code> ou
	  <code class="command">i386-redhat-linux-gcc</code> disponibles.</p><p>En raison d'un manque de temps, nous avons
	  décidé d'utiliser les binaires d'une version
	  <span class="application"><span class="trademark">Oracle</span>® 8.0.5 PreProduction</span>,
	  après que la première tentative d'obtenir
	  à partir du CD RDBMS une version fonctionnant eut
	  échoué, et que nous avons trouvé
	  qu'accéder aux bons RPMs était alors un
	  véritable cauchemar.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingtheoracle805preproduction"></a>11.7.9.2. Installer la version <span class="trademark">Oracle</span>® 8.0.5 Pre-production pour
	  Linux (noyau 2.0.33)</h4></div></div></div><p>Cette installation est simple.  Montez le CD, lancez
	  l'installeur.  Il vous demandera l'emplacement du
	  répertoire utilisateur
	  <span class="application"><span class="trademark">Oracle</span>®</span>, et y copiera tous les
	  binaires.  Nous n'avions, cependant, pas effacé les
	  restes de nos précédentes tentatives
	  d'installation RDBMS.</p><p>Après cela, la base de données
	  <span class="application"><span class="trademark">Oracle</span>®</span> put être
	  installée sans encombres.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="installingoracle817"></a>11.7.10. Installer l'archive tar d'<span class="trademark">Oracle</span>® 8.1.7 pour Linux</h3></div></div></div><p>Prennez l'archive <span class="application">tar</span> que vous
	avez produite à partir du répertoire
	d'installation sur un système Linux, et
	désarchivez-la dans le répertoire <code class="filename">/oracle/SID/817_32/</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="continuewithsapr4installation"></a>11.7.11. Poursuivre l'installation de <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h3></div></div></div><p>Tout d'abord vérifiez le paramétrage des
	environnements des utilisateurs <code class="systemitem">idsamd</code>
	(<em class="replaceable"><code>sid</code></em>adm) et
	<code class="systemitem">oraids</code>
	(ora<em class="replaceable"><code>sid</code></em>).  Ils devraient avoir,
	tous les deux, des fichiers <code class="filename">.profile</code>,
	<code class="filename">.login</code> et <code class="filename">.cshrc</code> qui
	utilisent la directement la commande
	<code class="command">hostname</code>.  Si le nom de machine du
	système est un nom complet d'hôte, vous devez
	modifier <code class="command">hostname</code> pour <code class="command">hostname
	-s</code> dans ces trois fichiers.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="databaseload"></a>11.7.11.1. Chargement de la base de données</h4></div></div></div><p>Ensuite, <code class="command">R3SETUP</code> peut être soit
	  relancé ou poursuivi (tout dépend si le
	  programme a été quitté ou non).
	  <code class="command">R3SETUP</code> créé ensuite les
	  tables pour les données et charge ces données
	  (pour 46B IDES, à partir des disques EXPORT1 à
	  EXPORT6, pour 46C à partir des disques DISK1 à
	  DISK4) avec <code class="command">R3load</code> dans la base de
	  données.</p><p>Quand le chargement de la base de données
	  est achevé (cela peut prendre plusieurs heures), des
	  mots de passe sont demandés.  Pour les installations
	  de tests, on peut utiliser les mots de passe
	  par défauts connus (utilisez-en des différents
	  si la sécurité est importante):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Question</th><th>Entrée(s) clavier</th></tr></thead><tbody><tr><td>Enter Password for sapr3</td><td>sap<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Confirum Password for sapr3</td><td>sap<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Password for sys</td><td>change_on_install<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Confirm Password for sys</td><td>change_on_install<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Enter Password for system</td><td>manager<span class="keycap"><strong>Entrée</strong></span></td></tr><tr><td>Confirm Password for system</td><td>manager<span class="keycap"><strong>Entrée</strong></span></td></tr></tbody></table></div><p>A ce point, nous avons eut quelques problèmes
	  avec <code class="command">dipgntab</code> durant l'installation de la
	  version 4.6B.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="listener"></a>11.7.11.2. Programme d'écoute</h4></div></div></div><p>Démarrer le programme d'écoute
	  (&#8220;listener&#8221;) d'<span class="application"><span class="trademark">Oracle</span>®</span>
	  sous l'utilisateur
	  <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code> comme
	  suit:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>Sinon vous risquez d'obtenir l'erreur
	  <span class="errorcode">ORA-12546</span> comme les
	  &#8220;sockets&#8221; n'auront pas les bonnes permissions.
	  Consultez la note <span class="trademark">SAP</span>® 072984.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mnlstables"></a>11.7.11.3. Mettre à jour les tables MNLS</h4></div></div></div><p>Si vous projetez d'importer des données utilisant
	  des langues non latin-1 dans le système
	  <span class="application"><span class="trademark">SAP</span>®</span>, vous devez mettre à
	  jour les tables de support des langues internationales
	  (&#8220;Multi National Language Support&#8221; &#8212;
	  MNLS).  Ceci est décrit dans les notes <span class="trademark">SAP</span>® OSS 15023
	  et 45619.  Sinon, vous pouvez ignorer cette question lors de
	  l'installation de <span class="application"><span class="trademark">SAP</span>®</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous n'avez pas besoin des tables MNLS, il est
	  toujours nécessaire de contrôler la table TCPDB
	  et l'initialiser si cela n'a pas déjà
	  été fait.  Consultez les notes 0015023 et
	  0045619 pour plus d'information.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="postinstallationsteps"></a>11.7.12. Etapes de post-installation</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="requestsapr3licensekey"></a>11.7.12.1. Demander une clé licence pour <span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</h4></div></div></div><p>Vous devez demander votre clé
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span>.  Cette clé est indispensable
	  étant donné que la licence temporaire qui a
	  été installée lors de l'installation
	  n'est valide que pendant quatre semaines.  Tout d'abord
	  récupérez la clé matérielle.
	  Ouvrez une session sous l'utilisateur
	  <code class="systemitem">idsadm</code> et lancez la commande
	  <code class="command">saplicense</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense
	-get</code></strong></pre><p>Appeler <code class="command">saplicense</code> sans
	  paramètres affiche la liste des options disponibles.
	  Après la réception de la clé, elle peut
	  être installée en utilisant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sapmnt/IDS/exe/saplicense -install</code></strong></pre><p>Vous devez ensuite entrer les valeurs suivantes:</p><pre class="programlisting">SAP SYSTEM ID   = <em class="replaceable"><code>SID, 3 chars</code></em>
CUSTOMER KEY    = <em class="replaceable"><code>hardware key, 11 chars</code></em>
INSTALLATION NO = <em class="replaceable"><code>installation, 10 digits</code></em>
EXPIRATION DATE = <em class="replaceable"><code>yyyymmdd, usually "99991231"</code></em>
LICENSE KEY     = <em class="replaceable"><code>license key, 24 chars</code></em></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creatingusers"></a>11.7.12.2. Créer les utilisateurs</h4></div></div></div><p>Créez un utilisateur sous le client 000
	  (certaines tâches doivent être effectuées
	  sous le client 000, mais avec un utilisateur
	  différent de <code class="systemitem">sap*</code> et
	  <code class="systemitem">ddic</code>).  Comme nom d'utilisateur, nous
	  choisissons généralement
	  <code class="systemitem">wartung</code> (ou
	  <code class="systemitem">service</code> en français).  Les
	  profiles nécessaires sont <code class="literal">sap_new</code>
	  et <code class="literal">sap_all</code>.  Pour plus de
	  sécurité les mots de passe des utilisateurs
	  par défaut à l'intérieur de tous les
	  clients devraient être modifiés (cela inclut
	  les utilisateurs <code class="systemitem">sap*</code> et
	  <code class="systemitem">ddic</code>).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtranssysprofileopermodesetc"></a>11.7.12.3. Configurer le système de transport, les profils,
	  les modes d'opération, etc.</h4></div></div></div><p>Dans le client 000, avec un utilisateur autre que
	  <code class="systemitem">ddic</code> et <code class="systemitem">sap*</code>,
	  faire, au moins, ce qui suit:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Tâche</th><th>Transaction</th></tr></thead><tbody><tr><td>Configurez le système de transport, par
		exemple <span class="emphasis"><em>entité autonome de domaine
		de transport</em></span> (<span class="emphasis"><em>Stand-Alone
		Transport Domain Entity</em></span>)</td><td>STMS</td></tr><tr><td>Créez / Editez le profil système</td><td>RZ10</td></tr><tr><td>Maintenez les modes d'opération et les
		instances</td><td>RZ04</td></tr></tbody></table></div><p>Cela et toutes les autres étapes de
	  post-installation sont intégralement décrites
	  dans les guides d'installation
	  <span class="application"><span class="trademark">SAP</span>®</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="editintsidsap"></a>11.7.12.4. Editer
	  <code class="filename">initsid.sap</code>
	  (<code class="filename">initIDS.sap</code>)</h4></div></div></div><p>Le fichier
	  <code class="filename">/oracle/IDS/dbs/initIDS.sap</code> contient le
	  profil de sauvegarde <span class="application"><span class="trademark">SAP</span>®</span>.  Ici la
	  taille de la bande à utiliser, le type de compression
	  et ainsi de suite doivent être définis.  Pour
	  garantir un fonctionnement avec les commandes
	  <code class="command">sapdba</code>/<code class="command">brbackup</code>, nous
	  avons modifié les valeurs suivantes:</p><pre class="programlisting">compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</pre><p>Explications:</p><p><code class="varname">compress</code>: la bande que nous utilisons
	  est une HP DLT1 qui fournie une compression
	  matérielle.</p><p><code class="varname">archive_function</code>: définie le
	  comportement par défaut en ce qui concerne
	  l'archivage des fichiers journaux
	  d'<span class="application"><span class="trademark">Oracle</span>®</span>: les nouveaux journaux
	  sont sauvegardés sur la bande, ceux
	  déjà sauvegardés le sont à
	  nouveau et sont ensuite effacés.  Cela évite
	  de nombreux problèmes si vous devez rétablir
	  la base de données, et qu'une des bandes de
	  sauvegarde est endommagée.</p><p><code class="varname">cpio_flags</code>: l'indicateur par
	  défaut est <code class="option">-B</code> qui fixe la taille
	  d'un bloc à 5120 octets.  Pour les bande DLT, HP
	  recommande une taille de bloc d'au moins 32Ko, aussi nous
	  avons utilisé <code class="option">--block-size=128</code> pour
	  64Ko.  L'option <code class="option">--format=newc</code> est
	  nécessaire car nous avons un nombre d'inodes
	  supérieur à 65535.  La dernière option,
	  <code class="option">--quiet</code>, est nécessaire sinon
	  <code class="command">brbackup</code> se plaint dès que
	  <code class="command">cpio</code> donne le nombre de blocs
	  sauvés.</p><p><code class="varname">cpio_in_flags</code>: indicateurs
	  nécessaires pour charger les données à
	  partir de bandes.  Le format est reconnu
	  automatiquement.</p><p><code class="varname">tape_size</code>: cette variable donne la
	  capacité brute de la bande.  Pour des raisons de
	  sécurité (nous utilisons une compression
	  matérielle), la valeur est légèrement
	  inférieure à la valeur réelle.</p><p><code class="varname">tape_address</code>: le
	  périphérique non rembobinable devant
	  être utilisé avec
	  <code class="command">cpio</code>.</p><p><code class="varname">tape_address_rew</code>: le
	  périphérique rembobinable à utiliser
	  avec <code class="command">cpio</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74197968"></a>11.7.12.5. Problèmes de configuration après
	  l'installation</h4></div></div></div><p>Les paramètres <span class="application"><span class="trademark">SAP</span>®</span>
	  suivants devraient être optimisés après
	  l'installation (exemples pour IDES 46B, 1 Go de
	  mémoire):</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom</th><th>Valeur</th></tr></thead><tbody><tr><td>ztta/roll_extension</td><td>250000000</td></tr><tr><td>abap/heap_area_dia</td><td>300000000</td></tr><tr><td>abap/heap_area_nondia</td><td>400000000</td></tr><tr><td>em/initial_size_MB</td><td>256</td></tr><tr><td>em/blocksize_kB</td><td>1024</td></tr><tr><td>ipc/shm_psize_40</td><td>70000000</td></tr></tbody></table></div><p>Note <span class="trademark">SAP</span>® 0013026:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom</th><th>Valeur</th></tr></thead><tbody><tr><td>ztta/dynpro_area</td><td>2500000</td></tr></tbody></table></div><p>Note <span class="trademark">SAP</span>® 0157246:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom</th><th>Valeur</th></tr></thead><tbody><tr><td>rdisp/ROLL_MAXFS</td><td>16000</td></tr><tr><td>rdisp/PG_MAXFS</td><td>30000</td></tr></tbody></table></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avec les paramètres donnés ci-dessus,
	  sur un système avec 1Go de mémoire, on pourra
	  avoir une utilisation de la mémoire similaire
	  à:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="problemsduringinstallation"></a>11.7.13. Problèmes lors de l'installation</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="restartr3setup"></a>11.7.13.1. Relancer <code class="command">R3SETUP</code> après la correction
	  d'un problème</h4></div></div></div><p><code class="command">R3SETUP</code> s'arrête s'il rencontre
	  une erreur.  Si vous avez examiné les fichiers
	  journaux correspondants et corrigé l'erreur, vous
	  devez relancer <code class="command">R3SETUP</code> à nouveau,
	  habituellement en sélectionnant
	  <code class="option">REPEAT</code> comme option de la dernière
	  étape pour laquelle <code class="command">R3SETUP</code> avait
	  rencontré un problème.</p><p>Pour relancer <code class="command">R3SETUP</code>,
	  exécutez-le avec le fichier <code class="filename">R3S</code>
	  correspondant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRDB.R3S</code></strong></pre><p>pour la version 4.6B, ou avec</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./R3SETUP -f CENTRAL.R3S</code></strong></pre><p>pour la version 4.6C, peu importe si l'erreur est
	  apparue avec <code class="filename">CENTRAL.R3S</code> ou
	  <code class="filename">DATABASE.R3S</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">A certains points, <code class="command">R3SETUP</code> suppose
	    que la base de données et le processus
	    <span class="application"><span class="trademark">SAP</span>®</span> sont en fonctionnement (comme
	    s'il avait déjà complété ces
	    étapes).  Au cas où les erreurs se
	    produiraient et que par exemple la base de données ne
	    peut être lancée, vous devez lancer la base de
	    données et <span class="application"><span class="trademark">SAP</span>®</span> à la
	    main après avoir corrigé les erreurs et avant
	    d'exécuter à nouveau
	    <code class="command">R3SETUP</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">N'oubliez pas également de démarrer le
	    programme d'écoute
	    d'<span class="application"><span class="trademark">Oracle</span>®</span> à nouveau (en
	    tant que
	    <code class="systemitem">ora<em class="replaceable"><code>sid</code></em></code>
	    avec <code class="command">umask 0; lsnrctl start</code>) s'il a
	    également été stoppé (par
	    exemple en raison d'un redémarrage du
	    système).</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringduringr3setup"></a>11.7.13.2. Etape OSUSERSIDADM_IND_ORA lors de l'utilisation de
	  <code class="command">R3SETUP</code></h4></div></div></div><p>Si <code class="command">R3SETUP</code> se plaint à ce stade,
	  éditez le fichier modèle utilisé par
	  <code class="command">R3SETUP</code> à ce moment
	  (<code class="filename">CENTRDB.R3S</code> (4.6B) ou
	  <code class="filename">CENTRAL.R3S</code> ou
	  <code class="filename">DATABASE.R3S</code> (4.6C)).  Localisez la
	  ligne <code class="literal">[OSUSERSIDADM_IND_ORA]</code> ou cherchez
	  l'unique entrée <code class="literal">STATUS=ERROR</code> et
	  éditez les valeurs suivantes:</p><pre class="programlisting">HOME=/home/<em class="replaceable"><code>sid</code></em>adm (was empty)
STATUS=OK (had status ERROR)</pre><p>Vous pouvez ensuite relancer
	  <code class="command">R3SETUP</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="indoraduringr3setup"></a>11.7.13.3. Etape OSUSERDBSID_IND_ORA lors de l'utilisation de
	  <code class="command">R3SETUP</code></h4></div></div></div><p>Il est possible que <code class="command">R3SETUP</code> se
	  plaigne également à ce stade.  L'erreur ici
	  est similaire à celle durant la phase
	  OSUSERSIDADM_IND_ORA.  Editez juste le fichier modèle
	  utilisé par <code class="command">R3SETUP</code> à ce
	  moment (<code class="filename">CENTRDB.R3S</code> (4.6B) ou
	  <code class="filename">CENTRAL.R3S</code> ou
	  <code class="filename">DATABASE.R3S</code> (4.6C)).  Localisez la
	  ligne <code class="literal">[OSUSERDBSID_IND_ORA]</code> ou cherchez
	  l'unique entrée <code class="literal">STATUS=ERROR</code> et
	  éditez la valeur suivante dans la section:</p><pre class="programlisting">STATUS=OK</pre><p>Puis relancez <code class="command">R3SETUP</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="oraviewvrffilenotfound"></a>11.7.13.4. Erreur <span class="errorname">oraview.vrf FILE NOT FOUND</span>
	  lors de l'installation d'<span class="trademark">Oracle</span>®</h4></div></div></div><p>Vous n'avez pas désélectionné la
	  <span class="emphasis"><em>visionneuse de texte en ligne d'<span class="trademark">Oracle</span>®</em></span>
	  avant de débuter l'installation.  Elle est
	  sélectionnée par défaut même si
	  cette option n'est actuellement pas disponible pour Linux.
	  Désélectionnez cet élément dans
	  le menu d'installation d'<span class="application"><span class="trademark">Oracle</span>®</span>
	  et relancez l'installation.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="textenvincalid"></a>11.7.13.5. Erreur <span class="errorname">TEXTENV_INVALID</span> lors du
	  lancement de <code class="command">R3SETUP</code>, RFC ou SAPgui</h4></div></div></div><p>Si cette erreur apparaît, la &#8220;locale&#8221;
	  correcte n'est pas présente.  La note <span class="trademark">SAP</span>® 0171356
	  liste les RPMs nécessaires (e.g.
	  <code class="filename">saplocales-1.0-3</code>,
	  <code class="filename">saposcheck-1.0-1</code> pour RedHat 6.1).
	  Dans le cas où vous avez ignoré toutes les
	  erreurs en rapport et modifié la valeur du
	  <code class="literal">STATUS</code> correspondant de la valeur
	  <code class="literal">ERROR</code> vers la valeur
	  <code class="literal">OK</code> (dans
	  <code class="filename">CENTRDB.R3S</code>) à chaque fois que
	  <code class="command">R3SETUP</code> s'est plaint et que vous avez
	  relancé <code class="command">R3SETUP</code>, le système
	  <span class="application"><span class="trademark">SAP</span>®</span> ne sera pas correctement
	  configuré et vous ne serez pas en mesure de vous
	  connecter au système avec
	  <span class="application">SAPgui</span>, même si le
	  système peut être lancé.  Tenter de se
	  connecter avec l'ancien <span class="application">SAPgui</span>
	  Linux donna les messages suivants:</p><pre class="programlisting">Sat May 5 14:23:14 2001
*** ERROR =&gt; no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR =&gt; ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR =&gt; Error when generating text environment. [trgmsgi. 0435]
*** ERROR =&gt; function failed [trgmsgi. 0447]
*** ERROR =&gt; no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</pre><p>Ce comportement est dû au fait que
	  <span class="application"><span class="trademark">SAP</span>® <span class="trademark">R/3</span>®</span> est incapable d'assigner
	  correctement une &#8220;locale&#8221; et n'est
	  lui-même pas correctement configuré
	  (entrées manquantes dans certaines tables de la base
	  de données).  Pour être en mesure de se
	  connecter à <span class="application"><span class="trademark">SAP</span>®</span>, ajoutez
	  les entrées suivantes au fichier
	  <code class="filename">DEFAULT.PFL</code> (voir la note
	  0043288):</p><pre class="programlisting">abap/set_etct_env_at_new_mode = 0
install/collate/active = 0
rscp/TCP0B = TCP0B</pre><p>Redémarrer le système
	  <span class="application"><span class="trademark">SAP</span>®</span>.  Vous pouvez maintenant vous
	  connecter au système, même si les
	  paramétrages spécifiques à certaines
	  langues peuvent ne pas fonctionner comme attendu.
	  Après la correction des paramétrages de langue
	  (et après avoir fourni les &#8220;locales&#8221;
	  correctes), ces entrées peuvent être
	  supprimées du fichier
	  <code class="filename">DEFAULT.PFL</code> et le système
	  <span class="application"><span class="trademark">SAP</span>®</span> peut être
	  relancé.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-00001"></a>11.7.13.6. Erreur <span class="errorcode">ORA-00001</span></h4></div></div></div><p>Cette erreur s'est produite uniquement avec
	  <span class="application"><span class="trademark">Oracle</span>® 8.1.7</span> sous FreeBSD.
	  La raison était que la base de données
	  <span class="application"><span class="trademark">Oracle</span>®</span> ne pouvait pas
	  s'initialiser correctement et plantait, laissant des
	  sémaphores et de la mémoire partagée
	  sur le système.  La tentative suivante de
	  démarrer la base de données retourna alors
	  l'erreur <span class="errorcode">ORA-00001</span>.</p><p>Retrouvez-les avec la commande <code class="command">ipcs
	  -a</code> et détruisez-les avec
	  <code class="command">ipcrm</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-00445pmon"></a>11.7.13.7. Erreur <span class="errorcode">ORA-00445</span>
	  (le processus en tâche de fond PMON n'a pas
	  démarré &#8212; &#8220;Background Process PMON Did Not
	  Start&#8221;)</h4></div></div></div><p>Cette erreur s'est produite avec <span class="application"><span class="trademark">Oracle</span>®
	  8.1.7</span>.  Cette erreur est rapportée si
	  la base de données est démarrée avec la
	  procédure <code class="command">startsap</code> habituelle (par
	  exemple <code class="command">startsap_majestix_00</code>) en tant
	  qu'utilisateur <code class="systemitem">prdadm</code>.</p><p>Une solution possible est de démarrer la base de
	  données sous l'utilisateur
	  <code class="systemitem">oraprd</code> avec la commande
	  <code class="command">svrmgrl</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>svrmgrl</code></strong>
SVRMGR&gt; <strong class="userinput"><code>connect internal;</code></strong>
SVRMGR&gt; <strong class="userinput"><code>startup</code></strong>;
SVRMGR&gt; <strong class="userinput"><code>exit</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-12546"></a>11.7.13.8. Erreur <span class="errorcode">ORA-12546</span> (Lancez le
	  programme d'écoute avec les droits corrects &#8212;
	  &#8220;Start Listener with Correct
	  Permissions&#8221;)</h4></div></div></div><p>Démarrez le programme d'écoute
	  (&#8220;listener&#8221;) d'<span class="application"><span class="trademark">Oracle</span>®</span>
	  sous l'utilisateur <code class="systemitem">oraids</code> avec les
	  commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umask 0; lsnrctl start</code></strong></pre><p>Sinon vous pourrez obtenir l'erreur
	  <span class="errorcode">ORA-12546</span> étant donné que les
	  &#8220;sockets&#8221; n'auront pas les bonnes permissions.
	  Consultez la note <span class="trademark">SAP</span>® 0072984.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ora-27102"></a>11.7.13.9. Erreur <span class="errorcode">ORA-27102</span> (Mémoire
	  épuisée &#8212; &#8220;Out of Memory&#8221;)</h4></div></div></div><p>Cette erreur s'est produite quand nous avons essayé
	  des valeurs pour <code class="literal">MAXDSIZ</code> et
	  <code class="literal">DFLDSIZ</code> supérieures à 1 Go
	  (1024x1024x1024).  De plus, nous avons eu l'erreur
	  <span class="errorname">Linux Error 12: Cannot allocate
	  memory</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dipgntabindind"></a>11.7.13.10. Erreur [DIPGNTAB_IND_IND] lors de l'utilisation de
	  <code class="command">R3SETUP</code></h4></div></div></div><p>En général, vous devez consulter la note <span class="trademark">SAP</span>®
	  0130581 (&#8220;<code class="command">R3SETUP</code> step
	  <code class="literal">DIPGNTAB</code> terminates&#8221;).  Lors de
	  l'installation d'IDES, pour certaines raisons le processus
	  d'installation n'a pas utilisé le nom correct pour le
	  système <span class="application"><span class="trademark">SAP</span>®</span> &#8220;IDS&#8221;,
	  mais la chaîne de caractère <code class="literal">""</code>
	  à la place.  Cela conduit à des problèmes
	  mineurs d'accès aux répertoires, comme les chemins
	  sont générés dynamiquement en utilisant
	  l'identifiant système
	  <em class="replaceable"><code>SID</code></em> (dans ce cas IDS).  Aussi
	  au lieu d'accéder par:</p><pre class="programlisting">/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</pre><p>les chemins suivants ont été
	  utilisé:</p><pre class="programlisting">/usr/sap//SYS/...
/usr/sap/D00</pre><p>Afin de poursuivre l'installation, nous avons
	  créé un lien et un répertoire
	  supplémentaire:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pwd</code></strong>
/compat/linux/usr/sap
<code class="prompt">#</code> <strong class="userinput"><code>ls -l</code></strong>
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -&gt; IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans</pre><p>Nous avons également trouvé des notes <span class="trademark">SAP</span>®
	  (0029227 et 0008401) décrivant ce comportement.  Nous
	  n'avons pas rencontré un seul de ces problèmes
	  lors de l'installation de <span class="application">SAP
	  4.6C</span>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcrswboiniindind"></a>11.7.13.11. Erreur [RFCRSWBOINI_IND_IND] lors de l'utilisation de
	  <code class="command">R3SETUP</code></h4></div></div></div><p>Lors de l'installation de
	  <span class="application">SAP 4.6C</span>, cette erreur est juste
	  une conséquence d'une autre erreur survenant plus
	  tôt dans l'installation.  Dans ce cas, vous devez
	  consulter les fichiers journaux correspondant et corriger
	  le véritable problème.</p><p>Si après avoir cherché dans les fichiers
	  journaux cette erreur est confirmée (consultez les
	  notes <span class="trademark">SAP</span>®), vous pouvez modifier la valeur du
	  <code class="literal">STATUS</code> de l'étape posant
	  problème de la valeur <code class="literal">ERROR</code>
	  à la valeur <code class="literal">OK</code>.  Après
	  l'installation, vous devez exécuter le report
	  <code class="literal">RSWBOINS</code> à partir de la
	  transaction SE38.  Lire la note <span class="trademark">SAP</span>® 0162266 pour des
	  informations supplémentaires au sujet des phases
	  <code class="literal">RFCRSWBOINI</code> et
	  <code class="literal">RFCRADDBDIF</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rfcraddbdifindind"></a>11.7.13.12. Erreur [RFCRADDBDIF_IND_IND] lors de l'utilisation de
	  <code class="command">R3SETUP</code></h4></div></div></div><p>Ici les même restrictions s'appliquent:
	  assurez-vous en consultant les fichiers journaux, que cette
	  erreur n'est pas causée par d'autres problèmes
	  apparus précédemment.</p><p>Si vous avez confirmation que la note <span class="trademark">SAP</span>® 0162266
	  s'applique, modifiez juste la valeur du
	  <code class="literal">STATUS</code> de l'étape posant
	  problème de la valeur <code class="literal">ERROR</code>
	  à la valeur <code class="literal">OK</code> (fichier
	  <code class="filename">CENTRDB.R3S</code>) et relancez
	  <code class="command">R3SETUP</code>.  Après l'installation,
	  vous devez exécuter le report
	  <code class="literal">RADDBDIF</code> à partir de la
	  transaction SE38.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sigactionsig31"></a>11.7.13.13. Erreur <span class="errorcode">sigaction sig31: File size limit
	  exceeded</span></h4></div></div></div><p>Cette erreur s'est produite lors du lancement des
	  processus <span class="application"><span class="trademark">SAP</span>®</span>
	  <span class="emphasis"><em>disp+work</em></span>.  Si
	  <span class="application"><span class="trademark">SAP</span>®</span> est démarré
	  avec la procédure <code class="command">startsap</code>, les
	  sous-processus sont alors lancés, et lancent les
	  autres processus <span class="application"><span class="trademark">SAP</span>®</span>.  Cela a
	  pour résultat le fait que la procédure ne
	  remarquera pas si quelque chose se passe mal.</p><p>Pour contrôler si les processus
	  <span class="application"><span class="trademark">SAP</span>®</span> ont démarré
	  correctement, consultez l'état des processus avec la
	  commande <code class="command">ps ax | grep
	  SID</code>, qui vous donnera
	  une liste de tous les processus
	  <span class="application"><span class="trademark">Oracle</span>®</span> et
	  <span class="application"><span class="trademark">SAP</span>®</span>.  S'il semble que certains
	  processus sont manquant ou que vous ne pouvez pas vous
	  connecter au système <span class="application"><span class="trademark">SAP</span>®</span>,
	  consultez les fichiers journaux correspondants qui peuvent
	  être trouvés dans le répertoire
	  <code class="filename">/usr/sap/SID/DVEBMGSnr/work/</code>.
	  Les fichiers à consulter sont
	  <code class="filename">dev_ms</code> et
	  <code class="filename">dev_disp</code>.</p><p>Le signal 31 se produit ici si la quantité de
	  mémoire partagée utilisée par
	  <span class="application"><span class="trademark">Oracle</span>®</span> et
	  <span class="application"><span class="trademark">SAP</span>®</span> dépasse celle
	  définie dans le fichier de configuration du noyau et
	  ce problème peut être résolu en
	  utilisant une valeur plus grande:</p><pre class="programlisting"># larger value for 46C production systems:
options SHMMAXPGS=393216
# smaller value sufficient for 46B:
#options SHMMAXPGS=262144</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="saposcolfails"></a>11.7.13.14. Le lancement de <code class="command">saposcol</code>
	  échoue</h4></div></div></div><p>Il y a quelques problèmes avec le programme
	  <code class="command">saposcol</code> (version 4.6D).  Le
	  système <span class="trademark">SAP</span>® utilise <code class="command">saposcol</code> pour
	  collecter les données concernant les performances du
	  système.  Ce programme n'est pas nécessaire
	  pour utiliser le système <span class="trademark">SAP</span>®, aussi ce
	  problème peut être considéré
	  comme mineur.  Les anciennes versions (4.6B) fonctionnent,
	  mais ne récupèrent pas toutes les
	  données (nombreux sont les appels qui retournent
	  juste 0, par exemple pour l'utilisation du CPU).</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="linuxemu-advanced"></a>11.8. Sujets avancés</h2></div></div></div><p>Si vous êtes curieux de savoir comment la
      compatibilité binaire avec Linux fonctionne, cette
      section est faite pour vous.  La plupart de ce qui suit est
      principalement basé sur un courrier électronique
      de Terry Lambert <code class="email">&lt;<a xmlns="" class="email" href="mailto:tlambert@primenet.com">tlambert@primenet.com</a>&gt;</code>
      envoyé à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">liste de diffusion pour la discussion de sujets non-techniques en rapport avec FreeBSD</a> (Message ID:
      <code class="literal">&lt;199906020108.SAA07001@usr09.primenet.com&gt;</code>).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74390480"></a>11.8.1. Comme ça marche?</h3></div></div></div><a id="idp74391120" class="indexterm"></a><p>FreeBSD possède une abstraction appelée
	&#8220;chargeur de classe d'exécution&#8221;.  C'est
	une portion de l'appel système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a>.</p><p>Ce qui se passe est que FreeBSD dispose d'une liste de
	chargeurs, à la place d'un simple chargeur avec retour
	(&#8220;fallback&#8221;) vers le chargeur
	<code class="literal">#!</code> pour exécuter n'importe quel
	interpréteur de commandes ou procédure.</p><p>Historiquement, l'unique chargeur sur les plate-formes
	<span class="trademark">UNIX</span>® examinait le nombre magique (généralement
	les 4 ou 8 premiers octets du fichier) pour voir si
	c'était un binaire connu par le système, et si
	c'était le cas, invoquait le chargeur binaire.</p><p>Si ce n'était pas le type de binaire du
	système, l'appel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a> retournait un
	échec, et l'interpréteur de commandes tentait de
	l'exécuter comme une commande
	d'interpréteur.</p><p>Cette hypothèse est celle par défaut quelque
	soit l'interpréteur de commandes actuel.</p><p>Plus tard, une modification a été faite sur
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a> pour examiner les deux premiers caractères,
	et s'ils étaient <code class="literal">:\n</code>, alors elle
	invoquait l'interpréteur de commandes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csh</span>(1)</span></a>
	à la place (nous pensons que l'entreprise SCO fut la
	première à faire cette modification).</p><p>Ce que fait maintenant FreeBSD est de parcourir une liste de
	chargeurs, avec un chargeur <code class="literal">#!</code>
	générique qui reconnaît les noms des
	interpréteurs qui se trouvent après le
	caractère espace suivant, puis avec un retour possible
	vers <code class="filename">/bin/sh</code>.</p><a id="idp74403792" class="indexterm"></a><p>Pour le support de l'ABI Linux, FreeBSD voit le nombre
	magique comme un binaire ELF (il ne fait pas la
	différence à ce niveau entre FreeBSD, <span class="trademark">Solaris</span>&#8482;,
	Linux, ou tout autre système d'exploitation qui dispose
	d'un type d'image ELF).</p><a id="idp74405072" class="indexterm"></a><p>Le chargeur ELF recherche une <span class="emphasis"><em>marque</em></span>
	spécifique, qui se trouve dans une section de commentaire
	dans l'image ELF, et qui n'est pas présente dans les
	binaires SVR4/<span class="trademark">Solaris</span>&#8482; ELF.</p><p>Pour que les binaires Linux puissent fonctionner, ils
	doivent être <span class="emphasis"><em>marqués</em></span> sous le
	type <code class="literal">Linux</code> avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=brandelf&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">brandelf</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>brandelf -t Linux file</code></strong></pre><p>Quand cela est fait, le chargeur ELF verra le marquage
	<code class="literal">Linux</code> sur le fichier.</p><a id="idp74430928" class="indexterm"></a><p>Lorsque le chargeur ELF voit le marquage
	<code class="literal">Linux</code>, le chargeur remplace un pointeur
	dans la structure <code class="literal">proc</code>.  Tous les appels
	système sont indéxés par
	l'intermédiaire de ce pointeur (dans un système
	<span class="trademark">UNIX</span>® traditionnel, cela serait la structure
	<code class="literal">sysent[]</code>, contenant les appels
	système).  De plus, le processus est marqué pour
	une gestion spéciale du vecteur d'interruption
	(&#8220;trap&#8221;) pour le signal de code
	&#8220;trampoline&#8221;, et plusieurs autres corrections
	(mineures) qui sont gérées par le noyau
	Linux.</p><p>Le vecteur d'appel système Linux contient, entre
	autres, une liste des entrées
	<code class="literal">sysent[]</code> dont les adresses résident
	dans le noyau.</p><p>Quand un appel système est effectué par le
	binaire Linux, le code &#8220;trap&#8221;
	déréférence de la structure
	<code class="literal">proc</code> le pointeur de la fonction de l'appel
	système, et utilise les points d'entrée Linux,
	et non pas FreeBSD, de d'appel système.</p><p>De plus, le mode Linux redéfinit dynamiquement
	l'origine des requêtes; c'est, en effet, ce qu'effectue
	l'option <code class="option">union</code> (<span class="emphasis"><em>pas</em></span> le
	type de système de fichiers
	<code class="literal">unionfs</code>!) de montage des systèmes de
	fichiers.  Tout d'abord, une tentative est faite pour
	rechercher le fichier dans le répertoire <code class="filename">/compat/linux/chemin-origine</code>,
	<span class="emphasis"><em>puis</em></span> uniquement si cela échoue, la
	recherche est effectuée dans le répertoire
	<code class="filename">/chemin-origine</code>.
	Cela permet de s'assurer que les binaires nécessitant
	d'autres binaires puissent s'exécuter (par exemple,
	l'ensemble des outils Linux peuvent tourner sous l'ABI Linux).
	Cela signifie également que les binaires Linux peuvent
	charger et exécuter les binaires FreeBSD, s'il n'y a pas
	de binaires Linux correspondant présents, et vous
	pourriez placer une commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a> dans l'arborescence
	<code class="filename">/compat/linux</code> pour vous
	assurer que les binaires Linux ne puissent pas dire qu'ils ne
	tournent pas sous Linux.</p><p>En effet, il y a un noyau Linux dans le noyau FreeBSD; les
	diverses fonctions sous-jacentes qui implémentent tous
	les services fournis par le noyau sont identiques entre les
	deux tables d'entrées des appels systèmes FreeBSD
	et Linux: les opérations sur les systèmes de
	fichiers, les opérations sur la mémoire
	virtuelle, la gestion des signaux, l'IPC System V, etc.  La
	seule différence est que les binaires FreeBSD utilisent
	les fonctions <span class="emphasis"><em>glue</em></span> de FreeBSD, et les
	binaires Linux celles de Linux (les plus anciens
	systèmes d'exploitation avaient uniquement leurs
	propres fonctions de <span class="emphasis"><em>glue</em></span>: les adresses
	des fonctions dans une structure <code class="literal">sysent[]</code>
	statique globale, au lieu des adresses des fonctions
	déréférencées d'un pointeur
	initialisé dynamiquement pointant vers la structure
	<code class="literal">proc</code> du processus faisant l'appel).</p><p>Laquelle est l'ABI native FreeBSD?  Cela n'a pas
	d'importance.  Basiquement, la seule différence est que
	(actuellement, cela pourrait facilement changer dans les
	versions futures, et probablement après cela) les
	fonctions <span class="emphasis"><em>glue</em></span> de FreeBSD sont liées
	en statique dans le noyau, les fonctions
	<span class="emphasis"><em>glue</em></span> Linux peuvent être
	liées statiquement, ou l'on peut y accéder via
	un module du noyau.</p><p>Oui, mais est-ce vraiment de l'émulation?  Non.
	C'est l'implémentation d'une interface binaire pour les
	applications (ABI).  Il n'y a pas d'émulateur (ou de
	simulateur, pour couper court aux prochaines questions)
	impliqué.</p><p>Mais pourquoi appelle-t-on parfois cela
	&#8220;émulation Linux&#8221;?  Pour rendre difficile
	la vente des versions de FreeBSD!  Sérieusement, c'est
	dû au fait que l'implémentation historique a
	été faite à une époque où
	il n'y avait pas vraiment d'autres mots pour décrire ce
	qui était en développement; dire que FreeBSD
	exécutait les binaires Linux n'était pas vrai si
	vous n'aviez pas compilé le code ou chargé un
	module, aussi un terme était nécessaire pour
	qualifier ce qui était chargé &#8212; donc
	l'&#8220;émulateur Linux&#8221;.</p></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="system-administration"></a>Partie III. Administration Système</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>Les chapitres restant du Manuel FreeBSD couvrent tous les
        aspects de l'administration système de FreeBSD.  Chaque chapitre
	débute en décrivant ce que vous apprendrez à la
	lecture du chapitre, et détaille également ce que vous
	êtes sensés connaître avant de l'aborder.</p><p>Ces chapitres sont conçus pour être consultés
        quand vous avez besoin d'une information.  Vous ne devez pas les lire
	suivant un ordre particulier, ni tous les lire avant de pouvoir
	utiliser FreeBSD.</p><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="chapter"><a href="#config-tuning">12. Configuration et optimisation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#config-synopsis">12.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#configtuning-initial">12.2. Configuration initiale</a></span></dt><dt><span class="sect1"><a href="#configtuning-core-configuration">12.3. Configuration principale</a></span></dt><dt><span class="sect1"><a href="#configtuning-appconfig">12.4. Configuration des applications</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">12.5. Démarrer des services</a></span></dt><dt><span class="sect1"><a href="#configtuning-cron">12.6. Configuration de l'utilitaire
      <code class="command">cron</code></a></span></dt><dt><span class="sect1"><a href="#configtuning-rcd">12.7. Utilisation du système rc sous FreeBSD</a></span></dt><dt><span class="sect1"><a href="#config-network-setup">12.8. Configuration des cartes réseaux</a></span></dt><dt><span class="sect1"><a href="#configtuning-virtual-hosts">12.9. Hôtes virtuels</a></span></dt><dt><span class="sect1"><a href="#configtuning-configfiles">12.10. Fichiers de configuration</a></span></dt><dt><span class="sect1"><a href="#configtuning-sysctl">12.11. Optimisation avec sysctl</a></span></dt><dt><span class="sect1"><a href="#configtuning-disk">12.12. Optimiser les disques</a></span></dt><dt><span class="sect1"><a href="#configtuning-kernel-limits">12.13. Optimisation des limitations du noyau</a></span></dt><dt><span class="sect1"><a href="#adding-swap-space">12.14. Ajouter de l'espace de pagination</a></span></dt><dt><span class="sect1"><a href="#acpi-overview">12.15. Gestion de l'énergie et des ressources</a></span></dt><dt><span class="sect1"><a href="#ACPI-debug">12.16. Utiliser et déboguer l'<acronym class="acronym">ACPI</acronym>
      sous FreeBSD</a></span></dt></dl></dd><dt><span class="chapter"><a href="#boot">13. Processus de démarrage de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#boot-synopsis">13.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">13.2. Le problème du démarrage</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">13.3. Le gestionnaire de démarrage et les étapes de
      démarrage</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">13.4. Interaction avec le noyau au démarrage</a></span></dt><dt><span class="sect1"><a href="#device-hints">13.5. &#8220;Device Hints&#8221;&#8212;Paramétrage des
      périphériques</a></span></dt><dt><span class="sect1"><a href="#boot-init">13.6. Init: Initialisation de la gestion des processus</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">13.7. Séquence d'arrêt du système</a></span></dt></dl></dd><dt><span class="chapter"><a href="#users">14. Gestion des comptes et des utilisateurs</a></span></dt><dd><dl><dt><span class="sect1"><a href="#users-synopsis">14.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#users-introduction">14.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#users-superuser">14.3. Le compte super-utilisateur</a></span></dt><dt><span class="sect1"><a href="#users-system">14.4. Comptes système</a></span></dt><dt><span class="sect1"><a href="#users-user">14.5. Comptes utilisateur</a></span></dt><dt><span class="sect1"><a href="#users-modifying">14.6. Modifier des comptes</a></span></dt><dt><span class="sect1"><a href="#users-limiting">14.7. Mettre en place des restrictions pour les utilisateurs</a></span></dt><dt><span class="sect1"><a href="#users-groups">14.8. Groupes</a></span></dt></dl></dd><dt><span class="chapter"><a href="#security">15. Sécurité</a></span></dt><dd><dl><dt><span class="sect1"><a href="#security-synopsis">15.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#security-intro">15.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">15.3. Securing FreeBSD ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#crypt">15.4. DES, MD5, et chiffrement</a></span></dt><dt><span class="sect1"><a href="#one-time-passwords">15.5. Mots de passe non réutilisables</a></span></dt><dt><span class="sect1"><a href="#tcpwrappers">15.6. L'encapsuleur TCP (<span class="quote">« <span class="quote">TCP Wrappers</span> »</span>)</a></span></dt><dt><span class="sect1"><a href="#kerberosIV">15.7. Kerberos</a></span></dt><dt><span class="sect1"><a href="#kerberos5">15.8. <span class="application">Kerberos5</span> ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#openssl">15.9. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">15.10. IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">15.11. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">15.12. Listes de contrôle d'accès au système de
      fichiers</a></span></dt><dt><span class="sect1"><a href="#security-portaudit">15.13. Surveillance des problèmes de sécurité
      relatifs aux programmes tierce-partie</a></span></dt><dt><span class="sect1"><a href="#security-advisories">15.14. Avis de sécurité de FreeBSD</a></span></dt><dt><span class="sect1"><a href="#security-accounting">15.15. Comptabilité des processus</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jails">16. Environnements jail</a></span></dt><dd><dl><dt><span class="sect1"><a href="#jails-synopsis">16.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#jails-terms">16.2. Termes relatifs aux environnements jail</a></span></dt><dt><span class="sect1"><a href="#jails-intro">16.3. Introduction</a></span></dt><dt><span class="sect1"><a href="#jails-build">16.4. Création et contrôle de l'environnement
      jail</a></span></dt><dt><span class="sect1"><a href="#jails-tuning">16.5. Optimisation et administration</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mac">17. Mandatory Access Control ** Traduction en Cours **</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mac-synopsis">17.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#mac-glossary">17.2. Key Terms in this Chapter</a></span></dt><dt><span class="sect1"><a href="#mac-initial">17.3. Explanation of MAC</a></span></dt><dt><span class="sect1"><a href="#mac-understandlabel">17.4. Understanding MAC Labels</a></span></dt><dt><span class="sect1"><a href="#mac-modules">17.5. Module Configuration</a></span></dt><dt><span class="sect1"><a href="#mac-bsdextended">17.6. The MAC bsdextended Module</a></span></dt><dt><span class="sect1"><a href="#mac-ifoff">17.7. The MAC ifoff Module</a></span></dt><dt><span class="sect1"><a href="#mac-portacl">17.8. The MAC portacl Module</a></span></dt><dt><span class="sect1"><a href="#mac-labelingpolicies">17.9. MAC Policies with Labeling Features</a></span></dt><dt><span class="sect1"><a href="#mac-partition">17.10. The MAC partition Module</a></span></dt><dt><span class="sect1"><a href="#mac-mls">17.11. The MAC Multi-Level Security Module</a></span></dt><dt><span class="sect1"><a href="#mac-biba">17.12. The MAC Biba Module</a></span></dt><dt><span class="sect1"><a href="#mac-lomac">17.13. The MAC LOMAC Module</a></span></dt><dt><span class="sect1"><a href="#mac-implementing">17.14. Implementing a Secure Environment with MAC</a></span></dt><dt><span class="sect1"><a href="#MAC-examplehttpd">17.15. Another Example: Using MAC to Constrain a Web Server</a></span></dt><dt><span class="sect1"><a href="#mac-troubleshoot">17.16. Troubleshooting the MAC Framework</a></span></dt></dl></dd><dt><span class="chapter"><a href="#audit">18. Audit des événements relatifs à la
    sécurité du système</a></span></dt><dd><dl><dt><span class="sect1"><a href="#audit-synopsis">18.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#audit-inline-glossary">18.2. Mots-clés</a></span></dt><dt><span class="sect1"><a href="#audit-config">18.3. Configuration de l'audit</a></span></dt><dt><span class="sect1"><a href="#audit-administration">18.4. Travailler avec les traces d'audit</a></span></dt></dl></dd><dt><span class="chapter"><a href="#disks">19. Stockage des données</a></span></dt><dd><dl><dt><span class="sect1"><a href="#disks-synopsis">19.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#disks-naming">19.2. Noms des périphériques</a></span></dt><dt><span class="sect1"><a href="#disks-adding">19.3. Ajouter des disques</a></span></dt><dt><span class="sect1"><a href="#raid">19.4. RAID</a></span></dt><dt><span class="sect1"><a href="#usb-disks">19.5. Périphériques de stockage USB</a></span></dt><dt><span class="sect1"><a href="#creating-cds">19.6. Création et utilisation de supports optiques
      (CDs)</a></span></dt><dt><span class="sect1"><a href="#creating-dvds">19.7. Création et utilisation de supports optiques
      (DVDs)</a></span></dt><dt><span class="sect1"><a href="#floppies">19.8. Création et utilisation de disquettes</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">19.9. Créer et utiliser les bandes magnétiques</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">19.10. Sauvegardes sur disquettes</a></span></dt><dt><span class="sect1"><a href="#backup-strategies">19.11. Stratégies de sauvegarde</a></span></dt><dt><span class="sect1"><a href="#backup-basics">19.12. Sauvegardes</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">19.13. Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></span></dt><dt><span class="sect1"><a href="#snapshots">19.14. Instantané (&#8220;Snapshot&#8221;) d'un système de fichiers</a></span></dt><dt><span class="sect1"><a href="#quotas">19.15. Quotas d'utilisation des disques</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">19.16. Chiffrer les partitions d'un disque</a></span></dt><dt><span class="sect1"><a href="#swap-encrypting">19.17. Chiffrage de l'espace de pagination</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GEOM">20. GEOM: architecture modulaire de gestion des disques</a></span></dt><dd><dl><dt><span class="sect1"><a href="#GEOM-synopsis">20.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#GEOM-intro">20.2. Introduction à GEOM</a></span></dt><dt><span class="sect1"><a href="#GEOM-striping">20.3. RAID0 - <span class="quote">« <span class="quote">Striping</span> »</span></a></span></dt><dt><span class="sect1"><a href="#GEOM-mirror">20.4. RAID1 - <span class="quote">« <span class="quote">mirroring</span> »</span></a></span></dt><dt><span class="sect1"><a href="#geom-ggate">20.5. Périphériques réseau <span class="quote">« <span class="quote">GEOM
      Gate</span> »</span></a></span></dt><dt><span class="sect1"><a href="#geom-glabel">20.6. Ajouter un label à un disque</a></span></dt></dl></dd><dt><span class="chapter"><a href="#vinum-vinum">21. Le gestionnaire de volume Vinum</a></span></dt><dd><dl><dt><span class="sect1"><a href="#vinum-synopsis">21.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#vinum-intro">21.2. Les disques sont trop petits</a></span></dt><dt><span class="sect1"><a href="#idp79520976">21.3. Les goulots d'étranglement d'accès aux
      données</a></span></dt><dt><span class="sect1"><a href="#idp79543504">21.4. Intégrité des données</a></span></dt><dt><span class="sect1"><a href="#vinum-objects">21.5. Objets Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-examples">21.6. Quelques exemples</a></span></dt><dt><span class="sect1"><a href="#idp79644368">21.7. Appellation des objets</a></span></dt><dt><span class="sect1"><a href="#vinum-config">21.8. Configuration de Vinum</a></span></dt></dl></dd><dt><span class="chapter"><a href="#virtualization">22. Virtualisation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#virtualization-synopsis">22.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#virtualization-guest">22.2. FreeBSD comme système d'exploitation
      invité</a></span></dt><dt><span class="sect1"><a href="#virtualization-host">22.3. FreeBSD comme système d'exploitation hôte</a></span></dt></dl></dd><dt><span class="chapter"><a href="#l10n">23. Localisation - Utilisation et configuration de l'I18N/L10N</a></span></dt><dd><dl><dt><span class="sect1"><a href="#l10n-synopsis">23.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">23.2. Les bases</a></span></dt><dt><span class="sect1"><a href="#using-localization">23.3. Utiliser la localisation</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">23.4. Compiler des programmes I18N</a></span></dt><dt><span class="sect1"><a href="#lang-setup">23.5. Localiser FreeBSD pour des langues spécifiques</a></span></dt></dl></dd><dt><span class="chapter"><a href="#updating-upgrading">24. Mise à jour de FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#updating-upgrading-synopsis">24.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-freebsdupdate">24.2. Mise à jour de FreeBSD</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-portsnap">24.3. Portsnap: un outil de mise à jour du catalogue des
      logiciels portés</a></span></dt><dt><span class="sect1"><a href="#current-stable">24.4. Suivre une branche de développement</a></span></dt><dt><span class="sect1"><a href="#synching">24.5. Synchroniser vos sources</a></span></dt><dt><span class="sect1"><a href="#makeworld">24.6. Recompiler le système</a></span></dt><dt><span class="sect1"><a href="#small-lan">24.7. Suivre les mises à jour pour plusieurs machines</a></span></dt></dl></dd><dt><span class="chapter"><a href="#dtrace">25. DTrace</a></span></dt><dd><dl><dt><span class="sect1"><a href="#dtrace-synopsis">25.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#dtrace-implementation">25.2. Des différences de mise en oeuvre</a></span></dt><dt><span class="sect1"><a href="#dtrace-enable">25.3. Activer la prise en charge de DTrace</a></span></dt><dt><span class="sect1"><a href="#dtrace-using">25.4. Utiliser DTrace</a></span></dt><dt><span class="sect1"><a href="#dtrace-language">25.5. Le langage D</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-tuning"></a>Chapitre 12. Configuration et optimisation</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div><div><span class="authorgroup">Basé sur un guide rédigé
	  par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mike</span> <span class="surname">Smith</span></span>. </span></div><div><span class="authorgroup">Egalement basé sur la page de manuel tuning(7)
	  écrite par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Matt</span> <span class="surname">Dillon</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#config-synopsis">12.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#configtuning-initial">12.2. Configuration initiale</a></span></dt><dt><span class="sect1"><a href="#configtuning-core-configuration">12.3. Configuration principale</a></span></dt><dt><span class="sect1"><a href="#configtuning-appconfig">12.4. Configuration des applications</a></span></dt><dt><span class="sect1"><a href="#configtuning-starting-services">12.5. Démarrer des services</a></span></dt><dt><span class="sect1"><a href="#configtuning-cron">12.6. Configuration de l'utilitaire
      <code class="command">cron</code></a></span></dt><dt><span class="sect1"><a href="#configtuning-rcd">12.7. Utilisation du système rc sous FreeBSD</a></span></dt><dt><span class="sect1"><a href="#config-network-setup">12.8. Configuration des cartes réseaux</a></span></dt><dt><span class="sect1"><a href="#configtuning-virtual-hosts">12.9. Hôtes virtuels</a></span></dt><dt><span class="sect1"><a href="#configtuning-configfiles">12.10. Fichiers de configuration</a></span></dt><dt><span class="sect1"><a href="#configtuning-sysctl">12.11. Optimisation avec sysctl</a></span></dt><dt><span class="sect1"><a href="#configtuning-disk">12.12. Optimiser les disques</a></span></dt><dt><span class="sect1"><a href="#configtuning-kernel-limits">12.13. Optimisation des limitations du noyau</a></span></dt><dt><span class="sect1"><a href="#adding-swap-space">12.14. Ajouter de l'espace de pagination</a></span></dt><dt><span class="sect1"><a href="#acpi-overview">12.15. Gestion de l'énergie et des ressources</a></span></dt><dt><span class="sect1"><a href="#ACPI-debug">12.16. Utiliser et déboguer l'<acronym class="acronym">ACPI</acronym>
      sous FreeBSD</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config-synopsis"></a>12.1. Synopsis</h2></div></div></div><a id="idp74494928" class="indexterm"></a><a id="idp74495440" class="indexterm"></a><p>La configuration correcte d'un système peut sensiblement
      réduire la quantité de travail impliquée
      dans la maintenance et la mise à jour.  Ce chapitre
      décrit certains des aspects de la configuration des
      systèmes FreeBSD.</p><p>Ce chapitre décrira également certains
      paramètres qui peuvent être modifiés
      pour configurer un système FreeBSD pour des performances
      optimales.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Pourquoi et comment dimensionner, organiser, et
	  positionner efficacement les partitions des systèmes
	  de fichiers et de pagination sur votre disque dur.</p></li><li class="listitem"><p>Les bases de la configuration du fichier
	  <code class="filename">rc.conf</code> et des fichiers de démarrage
	  <code class="filename">/usr/local/etc/rc.d</code>.</p></li><li class="listitem"><p>Comment configurer et tester une carte
	  réseau.</p></li><li class="listitem"><p>Comment configurer des hôtes virtuels sur vos
	  périphériques réseau.</p></li><li class="listitem"><p>Comment utiliser les divers fichiers de configuration du
	  répertoire <code class="filename">/etc</code>.</p></li><li class="listitem"><p>Comment optimiser FreeBSD en utilisant les variables
	  <code class="command">sysctl</code>.</p></li><li class="listitem"><p>Comment optimiser les performances des disques et
	  modifier les limitations du noyau.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les fondements d'<span class="trademark">UNIX</span>® et de FreeBSD (<a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a>).</p></li><li class="listitem"><p>Etre familier avec la configuration et la compilation du
	  noyau
	  (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-initial"></a>12.2. Configuration initiale</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74513104"></a>12.2.1. Organisation des partitions</h3></div></div></div><a id="idp74513744" class="indexterm"></a><a id="idp74514256" class="indexterm"></a><a id="idp74515280" class="indexterm"></a><a id="idp74516176" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74517072"></a>12.2.1.1. Partitions de base</h4></div></div></div><p>Quand vous organisez votre système de fichiers à
	  l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a>, il est
	  important de se rappeler que les disques durs peuvent
	  transférer des données plus rapidement depuis
	  les pistes externes que depuis celles à l'intérieur.
	  En sachant cela, vous devriez placer vos systèmes de
	  fichiers les plus petits, auxquels on accède le plus
	  souvent, comme la racine et l'espace de pagination, proche
	  de la partie externe du disque, alors que les grandes
	  partitions, comme <code class="filename">/usr</code>, devraient être
	  plus à l'intérieur.  Pour faire cela, c'est une bonne
	  idée de créer les partitions dans l'ordre
	  suivant: racine, pagination, <code class="filename">/var</code>,
	  <code class="filename">/usr</code>.</p><p>La taille de votre partition <code class="filename">/var</code>
	  reflète l'utilisation prévue de votre machine.
	  <code class="filename">/var</code> est principalement utilisée pour
	  héberger les boîtes aux lettres, les fichiers journaux,
	  les queues d'impression.  Les boîtes aux lettres et les fichiers
	  journaux, en particulier, peuvent croître vers des tailles
	  inattendues en fonction du nombre d'utilisateurs de votre
	  système et de combien de temps sont conservés ces
	  fichiers.  Si vous avez l'intention de faire fonctionner un
	  serveur de courrier électronique, une partition
	  La plupart des utilisateurs n'auront jamais besoin de plus d'un
	  gigaoctet, mais rappelez-vous que
	  <code class="filename">/var/tmp</code> doit être
	  assez grand pour contenir tout logiciel pré-compilé que
	  vous pourrez vouloir ajouter.</p><p>La partition <code class="filename">/usr</code> contient la
	  majeure partie des fichiers nécessaires au système,
	  le catalogue des logiciels portés (recommandé)
	  et le code source du système (optionnel).  Les deux
	  étant optionnels à l'installation.  Utiliser
	  au moins 2 gigaoctets pour cette partition est
	  recommandé.</p><p>Quand vous dimensionnez vos partitions, gardez à
	  l'esprit les besoins en espace pour permettre à votre
	  système de se développer.  Manquer d'espace sur une
	  partition alors qu'il y en a plein sur les autres peut être
	  très frustrant.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains utilisateurs qui ont employé
	    l'option <code class="literal">Auto-defaults</code> de l'outil de
	    partitionnement de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> ont trouvé plus
	    tard que leurs partitions racine et
	    <code class="filename">/var</code> étaient trop petites.
	    Partitionnez généreusement et avec
	    sagesse.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="swap-design"></a>12.2.1.2. Partition de pagination</h4></div></div></div><a id="idp74526672" class="indexterm"></a><a id="idp74527184" class="indexterm"></a><p>Par principe, votre espace de pagination devrait
	  typiquement avoir une taille double de la quantité de
	  mémoire principale.  Par exemple, si la machine
	  possède 128 mégaoctets de mémoire, le
	  fichier de pagination devrait être de 256 mégaoctets.
	  Les systèmes avec peu de mémoire pourront avoir
	  de meilleures performances avec beaucoup plus d'espace de
	  pagination.  Il n'est pas recommandé d'avoir moins
	  de 256 mégaoctets d'espace de pagination sur un
	  système et vous devriez garder à l'esprit les futures
	  extensions de mémoire quand vous dimensionnez votre
	  partition de pagination.  Les algorithmes de pagination du
	  noyau sont optimisés pour une meilleure efficacité
	  avec une partition de pagination d'au moins deux fois la
	  taille de la mémoire principale.  Configurer trop peu
	  d'espace de pagination peut conduire à une certaine
	  inefficacité du code de pagination de la mémoire virtuelle
	  comme à l'apparition de problèmes
	  ultérieurement si vous ajoutez plus de
	  mémoire à votre machine.</p><p>Et enfin, sur des systèmes importants avec de
	  multiples disques SCSI (ou de multiples disques IDE
	  fonctionnant sur différents contrôleurs), il est
	  vivement recommandé que vous configuriez un espace de
	  pagination sur chaque disque (jusqu'à quatre disques).
	  Les partitions de pagination sur les différents disques
	  devront avoir approximativement la même taille.  Le
	  noyau peut gérer des tailles arbitraires mais les
	  structures de données internes sont dimensionnées pour 4
	  fois la taille de la plus grande partition de pagination.
	  Garder la taille des partitions de pagination proche
	  permettra au noyau de répartir de manière
	  optimale l'espace de pagination entre les disques.  Ne vous
	  inquiétez pas trop si vous les surdimensionnez, l'espace de
	  pagination est un des avantages d'Unix.  Même si vous
	  n'utilisez normalement pas beaucoup de cet espace, il peut
	  vous permettre d'avoir plus temps pour récupérer
	  face à programme incontrôlable avant
	  d'être forcé à relancer la machine.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74528592"></a>12.2.1.3. Pourquoi des Partitions?</h4></div></div></div><p>Pourquoi des partitions?  Pourquoi ne pas créer une
	  seule grande partition racine?  Ainsi je n'aurais pas à
	  me soucier d'avoir sous-dimensionné certaines choses!</p><p>Pour plusieurs raisons cela n'est pas une bonne idée.
	  Tout d'abord, chaque partition a différentes
	  caractéristiques d'utilisation et les séparer autorise
	  le système de fichiers à s'optimiser lui-même
	  pour ces caractéristiques.  Par exemple, les partitions
	  racine et <code class="filename">/usr</code> sont surtout lues, et
	  rarement utilisées en écriture, alors que de nombreuses
	  opérations de lecture et écriture pourront avoir lieu
	  sur <code class="filename">/var</code> et
	  <code class="filename">/var/tmp</code>.</p><p>En partitionnant correctement votre système,
	  la fragmentation introduite sur les partitions plus petites et
	  plus chargées en écriture ne s'étendra pas sur
	  les partitions principalement utilisées en lecture.
	  De plus, avoir les partitions principalement utilisées
	  en écriture proche du bord du disque, par exemple avant la
	  grande partition au lieu qu'après dans la table des
	  partitions, augmentera les performances d'E/S sur les
	  partitions qui le demandent le plus.  Maintenant il est
	  également vrai que vous avez besoin de performances d'E/S
	  sur les grandes partitions, mais elles sont si grandes que
	  les déplacer plus vers l'extérieur du disque ne
	  donnera pas lieu à une augmentation significative des
	  performances alors que le déplacement de
	  <code class="filename">/var</code> vers le bord peut avoir un sérieux
	  impact.  Et enfin, il y a également des raisons de
	  sécurité.  Avoir une partition racine petite et
	  ordonnée qui est essentiellement en lecture seule lui
	  donne plus de chance de rester intacte après un crash
	  sévère.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-core-configuration"></a>12.3. Configuration principale</h2></div></div></div><a id="idp74541392" class="indexterm"></a><p>L'emplacement principal pour les données de configuration
      du système est le fichier <code class="filename">/etc/rc.conf</code>.
      Ce fichier contient une large gamme d'informations de
      configuration, principalement utilisées au démarrage
      du système
      pour configurer ce dernier.  Son nom le sous-entend; c'est
      l'information de configuration pour les fichiers
      <code class="filename">rc*</code>.</p><p>Un administrateur devrait ajouter des entrées dans le
      fichier <code class="filename">rc.conf</code> pour remplacer les valeurs
      par défaut du fichier
      <code class="filename">/etc/defaults/rc.conf</code>.  Les fichiers de
      valeurs par défaut ne devraient pas être copiés
      directement tels quels dans <code class="filename">/etc</code> - ils
      contiennent des valeurs par défaut, et non pas des exemples.
      Tout changement spécifique au système devrait
      être fait dans le fichier <code class="filename">rc.conf</code>.</p><p>Un certain nombre de stratégies peuvent être
      appliquées dans le cas d'applications en grappe pour
      séparer la configuration d'un site de celle d'un système
      afin de réduire le travail d'administration.  L'approche
      recommandée est
      de placer la configuration propre au site dans un autre fichier
      comme <code class="filename">/etc/rc.conf.site</code>, puis ensuite
      inclure ce fichier dans <code class="filename">/etc/rc.conf</code>, qui
      ne contiendra seulement que les informations spécifiques au
      système.</p><p>Comme <code class="filename">rc.conf</code> est lu par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sh</span>(1)</span></a> il est
      assez trivial d'effectuer cela.  Par exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>rc.conf:</p><pre class="programlisting">	. /etc/rc.conf.site
	hostname="node15.example.com"
	network_interfaces="fxp0 lo0"
	ifconfig_fxp0="inet 10.1.1.1"</pre></li><li class="listitem"><p>rc.conf.site:</p><pre class="programlisting">	defaultrouter="10.1.1.254"
	saver="daemon"
	blanktime="100"</pre></li></ul></div><p>Le fichier <code class="filename">rc.conf.site</code> peut être
      distribué à l'ensemble des systèmes en utilisant
      <code class="command">rsync</code> ou un programme semblable, tandis que
      le fichier <code class="filename">rc.conf</code> reste unique.</p><p>Mettre à jour le système en employant
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> ou <code class="command">make world</code> n'écrasera
      pas le fichier <code class="filename">rc.conf</code>, les informations de
      configuration du système ne seront donc pas perdues.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-appconfig"></a>12.4. Configuration des applications</h2></div></div></div><p>Généralement, les applications installées
      ont leurs propres fichiers de configuration, avec leur propre
      syntaxe, etc...  Il est important que ces fichiers soient
      séparés du système de base, de sorte qu'ils soient
      facilement localisables et gérables par les outils de gestion
      des logiciels installés.</p><a id="idp74559824" class="indexterm"></a><p>Ces fichiers sont généralement installés
      dans le répertoire <code class="filename">/usr/local/etc</code>.  Dans
      le cas où une application possède un grand nombre
      de fichiers de configuration, un sous-répertoire sera
      créé pour les héberger.</p><p>Normalement, quand un logiciel porté ou
      pré-compilé est installé, des exemples de
      fichiers de configuration sont également installés.
      Ces derniers sont généralement identifiés
      par un suffixe &#8220;.default&#8221;.  Si aucun fichier de
      configuration n'existe pour l'application, on les créera en
      copiant les fichiers .default.</p><p>Par exemple, considérez le contenu du
      répertoire <code class="filename">/usr/local/etc/apache</code>:</p><pre class="literallayout">-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf
-rw-r--r--  1 root  wheel   2184 May 20  1998 access.conf.default
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf
-rw-r--r--  1 root  wheel   9555 May 20  1998 httpd.conf.default
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic
-rw-r--r--  1 root  wheel  12205 May 20  1998 magic.default
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types
-rw-r--r--  1 root  wheel   2700 May 20  1998 mime.types.default
-rw-r--r--  1 root  wheel   7980 May 20  1998 srm.conf
-rw-r--r--  1 root  wheel   7933 May 20  1998 srm.conf.default</pre><p>Les tailles des fichiers indiquent que seul le
      fichier <code class="filename">srm.conf</code> a été modifié.  Une mise à
      jour, plus tard, du logiciel <span class="application">Apache</span> ne devrait pas écraser le
      fichier modifié.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-starting-services"></a>12.5. Démarrer des services</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74566864" class="indexterm"></a><p>Nombreux sont les utilisateurs qui choisissent d'installer
      des logiciels tierce partie sous FreeBSD à partir du
      catalogue des logiciels portés.  Dans de nombreuses
      situations, il peut être nécessaire de configurer
      le logiciel de manière à ce qu'il soit
      lancé au démarrage du système.  Des
      services comme <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/postfix/pkg-descr">mail/postfix</a>
      ou <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a> sont deux
      exemples de logiciels parmi tant d'autres qui peuvent être
      lancés à l'initialisation du système.
      Cette section explique les procédures disponibles pour
      démarrer certains logiciels tierce partie.</p><p>Sous FreeBSD, la plupart des services offerts, comme
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>, sont lancés par l'intermédiaire des
      procédures de démarrage du système.  Ces
      procédures peuvent varier en fonction de la version de
      FreeBSD, ou du fournisseur; cependant, l'aspect le plus important
      à considérer est que leur configuration de
      démarrage peut être gérée à
      l'aide de procédures de démarrage simples.</p><p>Avant l'avènement du système <code class="filename">rc.d</code>, les
      applications plaçaient une procédure simple de
      lancement dans le répertoire <code class="filename">/usr/local/etc/rc.d</code> qui était
      lue par les scripts d'initialisation du système.  Ces
      procédures étant alors exécutées
      lors des dernières étapes du démarrage du
      système.</p><p>Bien que de nombreuses personnes aient passé des
      heures à tenter de fusionner l'ancien mode de
      configuration avec le nouveau, il reste que certains utilitaires
      tierce partie ont toujours besoin d'un script placé dans
      le répertoire précédemment
      évoqué.  Les différences subtiles dans les
      scripts dépend de si le système <code class="filename">rc.d</code> est
      utilisé ou non.  Avant FreeBSD 5.1 l'ancien style de
      configuration était utilisé et dans presque tous
      les cas la nouvelle procédure fonctionnera sans
      problème.</p><p>Bien que chaque procédure doit remplir certains
      pré-requis minimum, la plupart du temps ils seront
      indépendants de la version de FreeBSD.  Chaque
      procédure doit avoir une extension
      <code class="filename">.sh</code> et doit être exécutable
      par le système.  Ce dernier point peut être
      réalisé en utilisant la commande
      <code class="command">chmod</code> et en fixant les permissions à
      <code class="literal">755</code>.  Il doit y avoir, au minimum, une option
      pour démarrer (<code class="literal">start</code>) l'application et
      une autre pour l'arrêter (<code class="literal">stop</code>).</p><p>La procédure de démarrage la plus simple
      ressemblera à celle-ci:</p><pre class="programlisting">#!/bin/sh
echo -n ' utility'

case "$1" in
start)
        /usr/local/bin/utility
        ;;
stop)
        kill -9 `cat /var/run/utility.pid`
        ;;
*)
        echo "Usage: `basename $0` {start|stop}" &gt;&amp;2
        exit 64
        ;;
esac

exit 0</pre><p>Cette procédure offre des options
      <code class="literal">stop</code> et <code class="literal">start</code> pour une
      application appelée ici <code class="literal">utility</code>.</p><p>L'application pourra être lancée manuellement
      avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/utility.sh start</code></strong></pre><p>Bien que toutes les applications tierce partie ne
      nécessitent pas de ligne dans le fichier
      <code class="filename">rc.conf</code>, chaque jour un nouveau logiciel
      porté sera modifié pour accepter cette
      configuration.  Contrôlez l'affichage final lors de
      l'installation de l'application pour plus d'information à
      ce sujet.  Certains logiciels fourniront des procédures
      qui permettrons à l'application d'être
      utilisée avec le système <code class="filename">rc.d</code>, cela sera
      abordé dans la section suivante.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74583120"></a>12.5.1. Configuration étendue des applications</h3></div></div></div><p>Maintenant que FreeBSD dispose du système <code class="filename">rc.d</code>, la
	configuration du démarrage des applications est plus
	simple, et propose plus de possibilités.
	En utilisant les mots clés présentés dans
	la section sur le système <a class="link" href="#configtuning-rcd" title="12.7. Utilisation du système rc sous FreeBSD">rc.d</a>, les applications
	peuvent désormais être paramétrées
	pour démarrer après certains services, par
	exemple le <acronym class="acronym">DNS</acronym>, des paramètres
	supplémentaires peuvent être passés par
	l'intermédiaire de <code class="filename">rc.conf</code> au lieu
	d'utiliser des paramètres fixes dans les
	procédures de démarrage, etc.  Une
	procédure de base pourra ressembler à ce qui
	suit:</p><pre class="programlisting">#!/bin/sh
#
# PROVIDE: utility
# REQUIRE: DAEMON
# KEYWORD: shutdown

. /etc/rc.subr

name=utility
rcvar=utility_enable

command="/usr/local/sbin/utility"

load_rc_config $name

#
# DO NOT CHANGE THESE DEFAULT VALUES HERE
# SET THEM IN THE /etc/rc.conf FILE
#
utility_enable=${utility_enable-"NO"}
pidfile=${utility_pidfile-"/var/run/utility.pid"}

run_rc_command "$1"</pre><p>Cette procédure s'assurera que l'application
	<span class="application">utility</span> sera lancée après le
	le service
	<code class="literal">daemon</code>.  Elle fournie également une
	méthode de suivi du <acronym class="acronym">PID</acronym>, ou encore
	<acronym class="acronym">ID</acronym> (identifiant) de processus.</p><p>Cette application pourra alors avoir la ligne suivante la
	concernant dans le fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">utility_enable="YES"</pre><p>Cette nouvelle méthode permet également une
	manipulation plus aisée des arguments en ligne de
	commande, l'inclusion des fonctions offertes par défaut
	dans <code class="filename">/etc/rc.subr</code>, offre une
	compatibilité avec l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> et
	fournie une configuration plus aisée par
	l'intermédiaire du fichier
	<code class="filename">rc.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74595536"></a>12.5.2. Utiliser des services pour démarrer d'autres
	services</h3></div></div></div><p>Certains services, comme les serveurs
	<acronym class="acronym">POP</acronym>3, <acronym class="acronym">IMAP</acronym>, etc.,
	peuvent être démarrés en utilisant
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.  Cela implique d'installer le service à
	partir du catalogue des logiciels portés et avec une
	ligne de configuration ajoutée au fichier
	<code class="filename">/etc/inetd.conf</code>, ou en
	décommentant une des lignes de configuration
	déjà présentes.  L'utilisation
	d'<span class="application">inetd</span> et sa configuration sont
	décrits en profondeur dans la section concernant <a class="link" href="#network-inetd" title="29.2. Le &#8220;super-serveur&#8221; inetd">inetd</a>.</p><p>Dans certains cas, il peut être plus
	approprié d'utiliser le <span class="quote">« <span class="quote">daemon</span> »</span>
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> pour démarrer des services.  Cette
	approche présente un certain nombre d'avantages parce
	que <code class="command">cron</code> exécute ces processus sous
	les privilèges du propriétaire de la table
	<code class="filename">crontab</code>.  Cela permet aux utilisateurs
	normaux de lancer et maintenir certaines applications.</p><p>L'utilitaire <code class="command">cron</code> offre une fonction
	unique, <code class="literal">@reboot</code>, qui peut être
	utilisée en remplacement de la date d'exécution.
	Cela provoquera l'exécution de la tâche quand
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> est lancé, normalement lors de
	l'initialisation du système.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-cron"></a>12.6. Configuration de l'utilitaire
      <code class="command">cron</code></h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp74606928" class="indexterm"></a><p>Un des utilitaires les plus importants de FreeBSD est
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  L'utilitaire <code class="command">cron</code> tourne en
      arrière plan et contrôle constamment le fichier
      <code class="filename">/etc/crontab</code>.  L'utilitaire
      <code class="command">cron</code> consulte également le
      répertoire <code class="filename">/var/cron/tabs</code>, à la
      recherche de nouveaux fichiers <code class="filename">crontab</code>.
      Ces fichiers <code class="filename">crontab</code> conservent les
      informations sur les tâches que <code class="command">cron</code>
      est censé exécuter à des moments
      donnés.</p><p>L'utilitaire <code class="command">cron</code> utilise deux types
      différents de fichiers de configuration, le fichier
      <code class="filename">crontab</code> système et les
      <code class="filename">crontab</code>s des utilisateurs.  La seule
      différence entre ces deux formats est le sixième
      champ.  Dans le fichier <code class="filename">crontab</code>
      système, le sixième champ est le nom de
      l'utilisateur sous lequel doit être exécutée
      la commande.  Cela donne la possibilité au fichier
      <code class="filename">crontab</code> système d'exécuter les
      commandes sous n'importe quel utilisateur.  Dans le fichier
      <code class="filename">crontab</code> d'un utilisateur, le sixième
      champ est la commande a exécuter et toutes les commandes
      sont exécutées sous l'utilisateur qui a
      créé le fichier <code class="filename">crontab</code>; c'est
      un aspect sécurité important.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les fichiers <code class="filename">crontab</code> utilisateur
	permettent aux utilisateurs de planifier l'exécution de
	tâches sans avoir besoin des privilèges du
	super-utilisateur <code class="systemitem">root</code>.  Les commandes
	contenues dans le fichier <code class="filename">crontab</code> d'un
	utilisateur s'exécutent avec les privilèges de
	l'utilisateur auquel appartient ce fichier.</p><p xmlns="http://www.w3.org/1999/xhtml">Le super-utilisateur <code class="systemitem">root</code> peut
	posséder un fichier <code class="filename">crontab</code>
	utilisateur comme tout autre utilisateur.  Ce fichier est
	différent de <code class="filename">/etc/crontab</code> (le
	<code class="filename">crontab</code> système).  En raison de
	l'existence du fichier <code class="filename">crontab</code>
	système, il n'y a généralement pas besoin
	d'un fichier <code class="filename">crontab</code> utilisateur pour
	<code class="systemitem">root</code>.</p></div><p>Examinons le fichier
      <code class="filename">/etc/crontab</code> (fichier
      <code class="filename">crontab</code> système):</p><pre class="programlisting"># /etc/crontab - root's crontab for FreeBSD
#
# $FreeBSD: src/etc/crontab,v 1.32 2002/11/22 16:13:39 tom Exp $
# <a id="co-comments"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
#
SHELL=/bin/sh
PATH=/etc:/bin:/sbin:/usr/bin:/usr/sbin <a id="co-env"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
HOME=/var/log
#
#
#minute	heure	date	mois	jour	utilisateur	commande <a id="co-field-descr"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
#
#
*/5	*	*	*	*	root	/usr/libexec/atrun <a id="co-main"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-comments"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Comme pour la plupart des fichiers de configuration de
	  FreeBSD, le caractère <code class="literal">#</code> indique un
	  commentaire.  Un commentaire peut être ajouté
	  dans le fichier comme rappel de ce que fait une action bien
	  précise et pourquoi elle est effectuée.  Les
	  commentaires ne peuvent être situés sur la
	  même ligne qu'une commande ou sinon ils seront
	  interprétés comme faisant partie de la commande;
	  ils doivent se trouver sur une nouvelle ligne.  Les lignes
	  vides sont ignorées.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-env"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Tout d'abord, les variables d'environnement doivent
	  être définies.  Le caractère égal
	  (<code class="literal">=</code>) est utilisé pour définir
	  tout paramètre concernant l'environnement, comme dans
	  notre exemple où il a été utilisé
	  pour les variables <code class="envar">SHELL</code>, <code class="envar">PATH</code>,
	  et <code class="envar">HOME</code>.  Si la ligne concernant
	  l'interpréteur de commande est omise,
	  <code class="command">cron</code> utilisera celui par défaut, qui
	  est <code class="command">sh</code>.  Si la variable <code class="envar">PATH</code>
	  est omise, il n'y aura pas de valeur par défaut
	  utilisée et l'emplacement des fichiers devra être
	  absolu.  Si <code class="envar">HOME</code> est omise,
	  <code class="command">cron</code> utilisera le répertoire
	  personnel de l'utilisateur qui l'invoque.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-field-descr"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette ligne définie un total de sept champs.
	  Sont listés ici les valeurs <code class="literal">minute</code>,
	  <code class="literal">heure</code>, <code class="literal">date</code>,
	  <code class="literal">mois</code>, <code class="literal">jour</code>,
	  <code class="literal">utilisateur</code>, et
	  <code class="literal">commande</code>.  Ces champs sont relativement
	  explicites.  <code class="literal">minute</code> représente
	  l'heure en minute à laquelle la commande sera
	  exécutée.  L'option <code class="literal">heure</code> est
	  semblable à l'option <code class="literal">minute</code>, mais en
	  heures.  Le champ <code class="literal">date</code> précise le
	  jour dans le mois.  <code class="literal">mois</code> est similaire
	  à <code class="literal">heure</code> et <code class="literal">minute</code>
	  mais désigne le mois.  L'option <code class="literal">jour</code>
	  représente le jour de la semaine.  Tous ces champs
	  doivent être des valeurs numériques, et respecter
	  un format horaire de vingt quatre heures.  Le champ
	  <code class="literal">utilisateur</code> est spécial, et n'existe
	  que dans le fichier <code class="filename">/etc/crontab</code>.  Ce
	  champ précise sous quel utilisateur sera
	  exécutée la commande.  Quand un utilisateur
	  installe son fichier <code class="filename">crontab</code>, il n'aura
	  pas cette option.  Pour finir, l'option
	  <code class="literal">commande</code> est listée.  C'est le
	  dernier champ, qui naturellement devrait désigner la
	  commande à exécuter.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-main"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette dernière ligne définie les valeurs
	  discutées ci-dessus.  Nous avons ici
	  <code class="literal">*/5</code> suivi de plusieurs caractères
	  <code class="literal">*</code>.  Ces caractères
	  <code class="literal">*</code> signifient &#8220;premier-dernier&#8221;,
	  et peuvent être interprétés comme voulant
	  dire à <span class="emphasis"><em>chaque</em></span> instance.  Aussi,
	  d'après cette ligne, il apparaît que la commande
	  <code class="command">atrun</code> sera invoquée par
	  l'utilisateur <code class="systemitem">root</code> toutes les cinq
	  minutes indépendamment du jour ou du mois.  Pour plus
	  d'informations sur la commande <code class="command">atrun</code>,
	  consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atrun&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atrun</span>(8)</span></a>.</p><p>N'importe quel nombre d'indicateur peut être
	  passé à ces commandes; cependant, les
	  commandes qui s'étendent sur de multiples lignes
	  doivent être &#8220;cassées&#8221; avec le
	  caractère, contre-oblique <code class="literal">\</code>, de
	  continuation de lignes.</p></td></tr></table></div><p>Ceci est la configuration de base pour chaque fichier
      <code class="filename">crontab</code>, bien qu'il y ait une
      différence dans celui présenté ici.  Le
      sixième champ, où est précisé le nom
      d'utilisateur, n'existe que dans le fichier système
      <code class="filename">/etc/crontab</code>.  Ce champ devrait être
      omis pour les fichiers <code class="filename">crontab</code>
      d'utilisateur.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-installcrontab"></a>12.6.1. Installer un fichier crontab</h3></div></div></div><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous ne devez pas utiliser la procédure
	  décrite ci-dessous pour éditer/installer le
	  fichier <code class="filename">crontab</code> système.  Utilisez
	  directement votre éditeur: l'utilitaire
	  <code class="command">cron</code> remarquera le changement au niveau de ce
	  fichier et utilisera immédiatement la nouvelle version.
	  Consultez <a class="link" href="../../../../doc/en_US.ISO8859-1/books/faq/admin.html#ROOT-NOT-FOUND-CRON-ERRORS" target="_top">cette
	  entrée de la FAQ</a> pour plus d'information.</p></div><p>Pour installer un fichier <code class="filename">crontab</code>
	utilisateur fraîchement rédigé, tout d'abord
	utilisez votre éditeur favori pour créer un
	fichier dans le bon format, ensuite utilisez
	l'utilitaire <code class="command">crontab</code>.  L'usage le plus
	typique est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>crontab fichier-crontab</code></strong></pre><p>Dans cet exemple, <code class="filename">fichier-crontab</code> est
	le nom d'un fichier <code class="filename">crontab</code> qui a
	été précédemment
	créé.</p><p>Il existe également une option pour afficher les
	fichiers <code class="filename">crontab</code> installés, passez
	simplement le paramètre <code class="option">-l</code> à
	<code class="command">crontab</code> et lisez ce qui est
	affiché.</p><p>Pour les utilisateurs désirant créer leur
	fichier crontab à partir de zéro, sans utiliser
	de modèle, l'option <code class="command">crontab -e</code> est
	disponible.  Cela invoquera l'éditeur par défaut
	avec un fichier vide.  Quand le fichier est sauvegardé,
	il sera automatiquement installé par la commande
	<code class="command">crontab</code>.</p><p>Si vous désirez plus tard effacer votre
	<code class="filename">crontab</code> utilisateur complètement,
	utilisez la commande <code class="command">crontab</code> avec l'option
	<code class="option">-r</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-rcd"></a>12.7. Utilisation du système rc sous FreeBSD</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>En 2002, le système <code class="filename">rc.d</code> de NetBSD pour
      l'initialisation du système a
      été intégré à FreeBSD.  Les
      utilisateurs noteront les fichiers présents dans le
      répertoire <code class="filename">/etc/rc.d</code>.  Plusieurs de ces
      fichiers sont destinés aux services de base qui peuvent
      être contrôlés avec les options
      <code class="option">start</code>, <code class="option">stop</code>, et
      <code class="option">restart</code>.  Par exemple, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> peut
      être relancé avec la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd restart</code></strong></pre><p>Cette procédure est similaire pour d'autres services.
      Bien sûr, les services sont généralement
      lancés automatiquement au démarrage dès qu'ils sont
      spécifiés dans le fichier <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.  Par
      exemple, activer le &#8220;daemon&#8221; de translation d'adresses
      au démarrage est aussi simple que d'ajouter la ligne
      suivante au fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">natd_enable="YES"</pre><p>Si une ligne <code class="option">natd_enable="NO"</code> est
      déjà présente, modifiez alors le
      <code class="option">NO</code> par <code class="option">YES</code>.  Les
      procédures rc chargeront automatiquement les autres
      services dépendants lors du prochain redémarrage
      comme décrit ci-dessous.</p><p>Comme le système <code class="filename">rc.d</code> est
      à l'origine destiné pour lancer/arrêter les
      services au démarrage/à l'arrêt du
      système, les options standards <code class="option">start</code>,
      <code class="option">stop</code> et <code class="option">restart</code> ne seront
      effectives que si les variables appropriées sont
      positionnées dans le fichier
      <code class="filename">/etc/rc.conf</code>.  Par exemple, la commande
      <code class="command">sshd restart</code> ci-dessus ne fonctionnera que si
      <code class="varname">sshd_enable</code> est fixée à
      <code class="option">YES</code> dans <code class="filename">/etc/rc.conf</code>.
      Pour lancer, arrêter ou redémarrer un service
      indépendemment des paramétrages du fichier
      <code class="filename">/etc/rc.conf</code>, les commandes doivent
      être précédées par
      <span class="quote">« <span class="quote">one</span> »</span>.  Par exemple pour redémarrer
      <code class="command">sshd</code> indépendemment du
      paramétrage du fichier <code class="filename">/etc/rc.conf</code>,
      exécutez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd onerestart</code></strong></pre><p>Il est facile de contrôler si un service est
      activé dans le fichier <code class="filename">/etc/rc.conf</code>
      en exécutant la procédure
      <code class="filename">rc.d</code> appropriée avec l'option
      <code class="option">rcvar</code>.  Ainsi, un administrateur peut
      contrôler que <code class="command">sshd</code> est
      réellement activé dans
      <code class="filename">/etc/rc.conf</code> en exécutant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd rcvar</code></strong>
# sshd
$sshd_enable=YES</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La seconde ligne (<code class="literal"># sshd</code>) est la sortie
	de la commande <code class="command">sshd</code> et non pas une console
	<code class="systemitem">root</code>.</p></div><p>Pour déterminer si un service est actif, une option
      appelée <code class="option">status</code> est disponible.  Par
      exemple pour vérifier que <code class="command">sshd</code> a
      réellement été lancé:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sshd status</code></strong>
sshd is running as pid 433.</pre><p>Dans certains cas, il est également possible de recharger un service
      avec l'option <code class="option">reload</code>.  Le système
      tentera d'envoyer un signal à un service individuel, le
      forçant à recharger ses fichiers de configuration.
      Dans la plupart des cas cela signifie envoyer un signal
      <code class="literal">SIGHUP</code> au service.  Le support de cette
      fonctionnalité n'est pas disponible pour chaque
      service.</p><p>Le système <code class="filename">rc.d</code> n'est pas
      uniquement utilisée pour les services réseaux,
      elle participe à la majeure partie de l'initialisation du
      système.  Prenez par exemple le fichier
      <code class="filename">bgfsck</code>.  Quand cette procédure est
      exécutée, il affichera le message suivant:</p><pre class="screen">Starting background file system checks in 60 seconds.</pre><p>Donc ce fichier est utilisé pour les
      vérifications du système de fichiers en
      arrière plan, qui sont uniquement effectuées lors
      de l'initialisation du système.</p><p>De nombreux services système dépendent
      d'autres services pour fonctionner correctement.  Par exemple,
      NIS et les autres services basés sur les RPCs peuvent
      échouer s'ils sont lancés après le
      lancement du service <code class="command">rpcbind</code> (portmapper).
      Pour résoudre ce problème, l'information
      concernant les dépendances et autres
      méta-données est inclue dans les commentaires au
      début de chaque procédure de démarrage.  Le
      programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcorder&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rcorder</span>(8)</span></a> est alors utilisé pour analyser
      ces commentaires lors de l'initialisation du système en
      vue de déterminer l'ordre dans lequel les services
      système seront invoqués pour satisfaire les
      dépendances.  Les mots suivants peuvent être
      présents en tête de chaque fichier de
      démarrage:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">PROVIDE</code>: indique les services que
	  fournit ce fichier.</p></li><li class="listitem"><p><code class="literal">REQUIRE</code>: liste les fichiers dont
	  dépend ce service.  Ce fichier sera
	  exécuté <span class="emphasis"><em>après</em></span> les
	  services indiqués.</p></li><li class="listitem"><p><code class="literal">BEFORE</code>: liste les services qui
	  dépendent du service présent.  Ce fichier sera
	  exécuté <span class="emphasis"><em>avant</em></span> les services
	  indiqués.</p></li></ul></div><p>En utilisant ce système, un administrateur peut
      facilement contrôler les services du système sans
      avoir à se battre avec les &#8220;runlevels&#8221; comme
      sur d'autres systèmes d'exploitation <span class="trademark">UNIX</span>®.</p><p>Des informations supplémentaires concernant le
      système <code class="filename">rc.d</code>
      peuvent être trouvées dans les pages de manuel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.subr&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.subr</span>(8)</span></a>.  Si vous êtes
      intéressé par l'écriture de vos propres
      procédures <code class="filename">rc.d</code> ou pour
      l'amélioration des procédures existantes, vous
      trouverez <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/rc-scripting" target="_top">cette
      article</a> utile.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config-network-setup"></a>12.8. Configuration des cartes réseaux</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp74724944" class="indexterm"></a><p>De nos jours il est impossible de penser à un ordinateur
      sans penser connexion à un réseau.  Installer et configurer
      une carte réseau est une tâche classique pour tout
      administrateur FreeBSD.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74726480"></a>12.8.1. Déterminer le bon pilote de
	périphérique</h3></div></div></div><a id="idp74727120" class="indexterm"></a><p>Avant de commencer, vous devez connaître le modèle
	de la carte dont vous disposez, le circuit qu'elle
	utilise, et si c'est une carte PCI ou ISA.  FreeBSD supporte
	une large variété de cartes PCI et ISA.  Consultez la liste de
	compatibilité matérielle pour votre version de FreeBSD afin de
	voir si votre carte est supportée.</p><p>Une fois que vous êtes sûrs que votre carte
	est supportée, vous devez déterminer le bon pilote de
	périphérique pour la carte.  Les fichiers
	<code class="filename">/usr/src/sys/conf/NOTES</code> et
	<code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	vous donneront
	la liste des pilotes de périphériques pour cartes
	réseaux avec des informations sur les cartes/circuits
	supportés.  Si vous avez des doutes au sujet du bon pilote,
	lisez la page de manuel du pilote.  La page de manuel vous
	donnera plus d'information sur le matériel supporté et
	même les éventuels problèmes qui pourront
	apparaître.</p><p>Si vous possédez une carte courante, la plupart du temps
	vous n'aurez pas à chercher trop loin pour trouver un pilote.
	Les pilotes pour les cartes réseaux courantes sont
	présents dans le noyau <code class="filename">GENERIC</code>, aussi
	votre carte devrait apparaître au démarrage, comme
	suit:</p><pre class="screen">dc0: &lt;82c169 PNIC 10/100BaseTX&gt; port 0xa000-0xa0ff mem 0xd3800000-0xd38
000ff irq 15 at device 11.0 on pci0
dc0: Ethernet address: 00:a0:cc:da:da:da
miibus0: &lt;MII bus&gt; on dc0
ukphy0: &lt;Generic IEEE 802.3u media interface&gt; on miibus0
ukphy0:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto
dc1: &lt;82c169 PNIC 10/100BaseTX&gt; port 0x9800-0x98ff mem 0xd3000000-0xd30
000ff irq 11 at device 12.0 on pci0
dc1: Ethernet address: 00:a0:cc:da:da:db
miibus1: &lt;MII bus&gt; on dc1
ukphy1: &lt;Generic IEEE 802.3u media interface&gt; on miibus1
ukphy1:  10baseT, 10baseT-FDX, 100baseTX, 100baseTX-FDX, auto</pre><p>Dans cet exemple, nous voyons que deux cartes utilisant le
	pilote de périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dc&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dc</span>(4)</span></a> sont présentes
	sur le système.</p><p>Si le pilote de votre carte n'est pas présent dans
	le noyau <code class="filename">GENERIC</code>, vous devrez charger le
	module approprié pour pouvoir utiliser votre carte.  Cela
	peut être effectué de deux manières
	différentes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La méthode la plus simple est de charger le
	    module pour votre carte réseau avec
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>, ou automatiquement au démarrage du
	    système en ajoutant la ligne appropriée au
	    fichier <code class="filename">/boot/loader.conf</code>.  Tous les
	    pilotes de cartes réseau ne sont pas disponibles
	    sous forme de modules; les cartes ISA sont un bon exemple
	    de périphériques pour lesquels les modules
	    n'existent pas.</p></li><li class="listitem"><p>Alternativement, vous pouvez compiler en statique
	    le support pour votre carte dans votre noyau.  Consultez
	    <code class="filename">/usr/src/sys/conf/NOTES</code>,
	    <code class="filename">/usr/src/sys/arch/conf/NOTES</code>
	    et la page de manuel du pilote de
	    périphérique pour savoir ce qu'il faut
	    ajouter au fichier de configuration de votre noyau.  Pour
	    plus d'information sur la recompilation de votre noyau,
	    veuillez lire le <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.  Si votre
	    carte a été détectée au
	    démarrage par votre noyau
	    (<code class="filename">GENERIC</code>) vous n'avez pas à
	    compiler un nouveau noyau.</p></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="config-network-ndis"></a>12.8.1.1. Utilisation des pilotes NDIS de <span class="trademark">Windows</span>®</h4></div></div></div><a id="idp74747344" class="indexterm"></a><a id="idp74747856" class="indexterm"></a><a id="idp74748368" class="indexterm"></a><a id="idp74749264" class="indexterm"></a><a id="idp74749776" class="indexterm"></a><a id="idp74750672" class="indexterm"></a><p>Malheureusement il y a toujours de nombreux fabricants
	  qui ne fournissent pas à la communauté des
	  logiciels libres les informations concernant les pilotes
	  pour leurs cartes considérant de telles
	  informations comme des secrets industriels.  Par
	  conséquent, il ne reste aux développeurs de
	  FreeBSD et d'autres systèmes d'exploitation libres que
	  deux choix: développer les pilotes en passant par
	  un long et pénible processus de <span class="quote">« <span class="quote">reverse
	  engineering</span> »</span> ou utiliser les pilotes binaires
	  existants disponibles pour la plateforme
	  <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  La plupart des développeurs,
	  y compris ceux impliqués dans FreeBSD, ont choisi
	  cette dernière approche.</p><p>Grâce aux contributions de Bill Paul (wpaul),
	  depuis FreeBSD 5.3-RELEASE, il existe un support
	  <span class="quote">« <span class="quote">natif</span> »</span> pour la spécification
	  d'interface des pilotes de périphérique
	  réseau (Network Driver Interface
	  Specification&#8212;NDIS).  Le NDISulator FreeBSD (connu
	  également sous le nom de Project Evil) prend un
	  pilote binaire réseau <span class="trademark">Windows</span>® et lui fait penser
	  qu'il est en train de tourner sous <span class="trademark">Windows</span>®.  Etant
	  donné que le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> utilise un binaire
	  <span class="trademark">Windows</span>®, il n'est utilisable que sur les systèmes
	  <span class="trademark">i386</span>&#8482; et amd64.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a> est conçu pour supporter
	    principalement les périphériques PCI,
	    CardBus et PCMCIA, les périphériques USB ne
	    sont pas encore supportés.</p></div><p>Pour utiliser le NDISulator, vous avez besoin de trois
	  choses:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>les sources du noyau;</p></li><li class="listitem"><p>le pilote binaire <span class="trademark">Windows</span>® XP (extension
	      <code class="filename">.SYS</code>);</p></li><li class="listitem"><p>le fichier de configuration du pilote <span class="trademark">Windows</span>® XP
	      (extension <code class="filename">.INF</code>).</p></li></ol></div><p>Recherchez les fichiers spécifiques à
	  votre carte.  Généralement, ils peuvent
	  être trouvés sur les CDs livrés avec la
	  carte ou sur le site du fabricant.  Dans les exemples qui
	  suivent nous utiliseront les fichiers
	  <code class="filename">W32DRIVER.SYS</code> et
	  <code class="filename">W32DRIVER.INF</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous ne pouvez pas utiliser un pilote <span class="trademark">Windows</span>®/i386
	    avec FreeBSD/amd64, vous devez récupérer un
	    pilote <span class="trademark">Windows</span>®/amd64 pour que cela fonctionne
	    correctement.</p></div><p>L'étape suivante est de compiler le pilote
	  binaire dans un module chargeable du noyau.  Pour effectuer
	  cela, en tant que <code class="systemitem">root</code>, utilisez
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndisgen /path/to/W32DRIVER.INF /path/to/W32DRIVER.SYS</code></strong></pre><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndisgen&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndisgen</span>(8)</span></a> est interactif et vous
	  sollicitera pour d'éventuelles informations
	  complémentaires si nécessaire; il produira un
	  module noyau dans le répertoire courant qui pourra
	  être chargé de cette manière:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ./W32DRIVER.ko</code></strong></pre><p>Avec le module généré, vous devez également charger les
	  modules <code class="filename">ndis.ko</code> et
	  <code class="filename">if_ndis.ko</code>.  Cela devrait être fait
	  automatiquement quand vous chargez un module qui dépend de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a>.  Si vous désirez les charger manuellement,
	  utilisez les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>kldload if_ndis</code></strong></pre><p>La première commande charge le pilote d'interface
	  NDIS, la seconde charge l'interface réseau.</p><p>Contrôlez maintenant la sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	  à la recherche d'une quelconque erreur au chargement.
	  Si tout s'est bien passé, vous devriez obtenir une
	  sortie ressemblant à ce qui suit:</p><pre class="screen">ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
ndis0: NDIS API version: 5.0
ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</pre><p>A partir de là vous pouvez traiter le
	  périphérique <code class="filename">ndis0</code>
	  comme n'importe quelle interface réseau (par exemple
	  <code class="filename">dc0</code>).</p><p>Vous pouvez configurer le système pour charger
	  les modules NDIS au démarrage du système de la
	  même manière que pour n'importe quel autre
	  module.  Tout d'abord, copiez le module
	  généré,
	  <code class="filename">W32DRIVER.ko</code>, dans le répertoire
	  <code class="filename">/boot/modules</code>.
	  Ajoutez ensuite la ligne suivante au fichier
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">W32DRIVER_load="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74800720"></a>12.8.2. Configuration de la carte réseau</h3></div></div></div><a id="idp74801360" class="indexterm"></a><p>Une fois que le bon pilote de périphérique
	pour la carte réseau est chargé, la carte doit
	être configurée.  Comme beaucoup d'autres choses, la carte
	aura pu être configurée à
	l'installation par <span class="application">sysinstall</span>.</p><p>Pour afficher la configuration des interfaces réseaux
	de votre système, entrer la commande suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig</code></strong>
dc0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 192.168.1.3 netmask 0xffffff00 broadcast 192.168.1.255
        ether 00:a0:cc:da:da:da
        media: Ethernet autoselect (100baseTX &lt;full-duplex&gt;)
        status: active
dc1: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 netmask 0xffffff00 broadcast 10.0.0.255
        ether 00:a0:cc:da:da:db
        media: Ethernet 10baseT/UTP
        status: no carrier
lp0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
        inet 127.0.0.1 netmask 0xff000000
tun0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1500</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">D'anciennes versions de FreeBSD pourront nécessiter
	  l'option <code class="option">-a</code> après <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>,
	  pour plus de détails au sujet de la syntaxe d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>,
	  veuillez vous référer à la page de manuel.
	  Notez également que les entrées concernant l'IPv6
	  (<code class="literal">inet6</code> etc...) ont été omises
	  dans cet exemple.</p></div><p>Dans cet exemple, les périphériques suivants
	ont été affichés:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">dc0</code>: La première
	    interface Ethernet</p></li><li class="listitem"><p><code class="filename">dc1</code>: La seconde
	    interface Ethernet</p></li><li class="listitem"><p><code class="filename">lp0</code>: L'interface du port
	    parallèle</p></li><li class="listitem"><p><code class="filename">lo0</code>: L'interface
	    &#8220;en boucle&#8221; (&#8220;loopback&#8221;)</p></li><li class="listitem"><p><code class="filename">tun0</code>: L'interface
	    &#8220;tunnel&#8221; utilisée par
	    <span class="application">ppp</span></p></li></ul></div><p>FreeBSD utilise le nom du pilote de périphérique
	suivi par un chiffre représentant l'ordre dans lequel
	la carte est détectée au démarrage du noyau pour nommer la
	carte.  Par exemple <code class="filename">sis2</code> serait la
	troisième carte sur le système utilisant le pilote de
	périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sis</span>(4)</span></a>.</p><p>Dans cet exemple, le périphérique
	<code class="filename">dc0</code> est actif et en fonctionnement.
	Les indicateurs importants sont:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="literal">UP</code> signifie que la carte est
	    configurée et prête.</p></li><li class="listitem"><p>La carte possède une adresse Internet
	    (<code class="literal">inet</code>) (dans ce cas-ci
	    <code class="systemitem">192.168.1.3</code>).</p></li><li class="listitem"><p>Elle a un masque de sous-réseau valide
	    (<code class="literal">netmask</code>;
	    <code class="systemitem">0xffffff00</code> est équivalent
	    à <code class="systemitem">255.255.255.0</code>).</p></li><li class="listitem"><p>Elle a une adresse de diffusion valide (dans ce cas-ci
	    <code class="systemitem">192.168.1.255</code>).</p></li><li class="listitem"><p>L'adresse MAC de la carte (<code class="literal">ether</code>)
	    est <code class="systemitem">00:a0:cc:da:da:da</code></p></li><li class="listitem"><p>La sélection du média est sur le mode
	    d'autosélection (<code class="literal">media: Ethernet autoselect
	    (100baseTX &lt;full-duplex&gt;)</code>).  Nous voyons
	    que <code class="filename">dc1</code> a été configurée
	    pour utiliser un matériel de type
	    <code class="literal">10baseT/UTP</code>.  Pour plus d'information
	    sur le type de matériel disponible pour un pilote de
	    périphérique, référez-vous à
	    sa page de manuel.</p></li><li class="listitem"><p>La liaison (<code class="literal">status</code>)
	    est <code class="literal">active</code>, i.e. la porteuse est
	    détectée.  Pour <code class="filename">dc1</code>, nous lisons
	    <code class="literal">status: no carrier</code>.  Cela est normal
	    lorsqu'aucun câble n'est branché à
	    la carte.</p></li></ol></div><p>Si le résultat de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> est
	similaire à:</p><pre class="screen">dc0: flags=8843&lt;BROADCAST,SIMPLEX,MULTICAST&gt; mtu 1500
	        ether 00:a0:cc:da:da:da</pre><p>cela indiquerait que la carte n'a pas été
	configurée.</p><p>Pour configurer votre carte, vous avez besoin des
	privilèges de l'utilisateur <code class="systemitem">root</code>.
	La configuration de la carte réseau peut être
	faite à partir de la ligne de commande avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
	mais vous aurez à répéter cette
	opération à chaque redémarrage du système.
	Le fichier <code class="filename">/etc/rc.conf</code> est l'endroit où
	ajouter la configuration de la carte réseau.</p><p>Ouvrez le fichier <code class="filename">/etc/rc.conf</code>
	dans votre éditeur favori.  Vous devez ajouter une ligne
	pour chaque carte réseau présente sur le système, par exemple
	dans notre cas, nous avons ajouté ces lignes:</p><pre class="programlisting">ifconfig_dc0="inet 192.168.1.3 netmask 255.255.255.0"
ifconfig_dc1="inet 10.0.0.1 netmask 255.255.255.0 media 10baseT/UTP"</pre><p>Vous devez remplacer <code class="filename">dc0</code>,
	<code class="filename">dc1</code>, et ainsi de suite, avec
	le périphérique correspondant pour vos cartes, et les adresses
	avec celles désirées.  Vous devriez lire les pages de manuel
	du pilote de périphérique et d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> pour
	plus de détails sur les options autorisées et
	également la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> pour plus
	d'information sur la syntaxe de
	<code class="filename">/etc/rc.conf</code>.</p><p>Si vous avez configuré le réseau à
	l'installation, des lignes concernant la/les carte(s)
	réseau pourront être déjà présentes.
	Contrôler à deux fois le fichier
	<code class="filename">/etc/rc.conf</code> avant d'y ajouter des
	lignes.</p><p>Vous devrez également éditer le fichier
	<code class="filename">/etc/hosts</code> pour ajouter les noms et les
	adresses IP des diverses machines du réseau local, si elles
	ne sont pas déjà présentes.  Pour plus
	d'information référez-vous à la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a>
	et au fichier
	<code class="filename">/usr/share/examples/etc/hosts</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74865360"></a>12.8.3. Test et dépannage</h3></div></div></div><p>Une fois les modifications nécessaires du fichier
	<code class="filename">/etc/rc.conf</code> effectuées, vous
	devrez redémarrer votre système.  Cela
	permettra la prise en compte de la ou les modifications
	au niveau des interfaces, et permettra de vérifier
	que le système redémarre sans erreur de
	configuration.</p><p>Une fois que le système a été
	redémarré, vous devrez tester les interfaces
	réseau.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74867152"></a>12.8.3.1. Tester la carte Ethernet</h4></div></div></div><a id="idp74867792" class="indexterm"></a><p>Pour vérifier qu'une carte Ethernet est
	  configurée correctement, vous devez essayer deux choses.
	  Premièrement, &#8220;pinguer&#8221; l'interface, puis une
	  autre machine sur le réseau local.</p><p>Tout d'abord testons l'interface:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.3</code></strong>
PING 192.168.1.3 (192.168.1.3): 56 data bytes
64 bytes from 192.168.1.3: icmp_seq=0 ttl=64 time=0.082 ms
64 bytes from 192.168.1.3: icmp_seq=1 ttl=64 time=0.074 ms
64 bytes from 192.168.1.3: icmp_seq=2 ttl=64 time=0.076 ms
64 bytes from 192.168.1.3: icmp_seq=3 ttl=64 time=0.108 ms
64 bytes from 192.168.1.3: icmp_seq=4 ttl=64 time=0.076 ms

--- 192.168.1.3 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.074/0.083/0.108/0.013 ms</pre><p>Nous devons maintenant &#8220;pinguer&#8221; une
	  autre machine sur le réseau:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ping -c5 192.168.1.2</code></strong>
PING 192.168.1.2 (192.168.1.2): 56 data bytes
64 bytes from 192.168.1.2: icmp_seq=0 ttl=64 time=0.726 ms
64 bytes from 192.168.1.2: icmp_seq=1 ttl=64 time=0.766 ms
64 bytes from 192.168.1.2: icmp_seq=2 ttl=64 time=0.700 ms
64 bytes from 192.168.1.2: icmp_seq=3 ttl=64 time=0.747 ms
64 bytes from 192.168.1.2: icmp_seq=4 ttl=64 time=0.704 ms

--- 192.168.1.2 ping statistics ---
5 packets transmitted, 5 packets received, 0% packet loss
round-trip min/avg/max/stddev = 0.700/0.729/0.766/0.025 ms</pre><p>Vous pourrez utiliser le noms de la machine à
	  la place de <code class="systemitem">192.168.1.2</code>
	  si vous avez configuré le fichier
	  <code class="filename">/etc/hosts</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74873808"></a>12.8.3.2. Dépannage</h4></div></div></div><a id="idp74874448" class="indexterm"></a><p>Le dépannage de matériels ou de logiciels
	est toujours une tâche relativement pénible, mais
	qui peut être rendue plus aisée en
	vérifiant en premier lieu certaines choses
	élémentaires.  Votre câble réseau
	est-il branché?  Avez-vous correctement
	configuré les services réseau?  Le coupe-feu
	est-il bien configuré?  Est-ce que la carte
	réseau est supportée par FreeBSD?  Consultez
	toujours les notes concernant le matériel avant
	d'envoyer un rapport de bogue.  Mettez à jour votre
	version de FreeBSD vers la dernière version STABLE.
	Consultez les archives des listes de diffusion, et faites
	même des recherches sur l'Internet.</p><p>Si la carte fonctionne mais les performances sont
	mauvaises, une lecture de la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>
	peut valoir la peine.  Vous pouvez également
	vérifier la configuration du réseau puisque des
	paramètres réseau incorrects peuvent donner lieu
	à des connexions lentes.</p><p>Certains utilisateurs peuvent voir apparaître un ou
	deux messages <span class="errorname">device timeout</span>, ce qui
	est normal pour certaines cartes.  Si ces messages se
	multiplient, assurez-vous que la carte n'est pas en conflit
	avec un autre périphérique.  Contrôlez
	à deux fois les câbles de connexion.
	Peut-être que vous avez juste besoin d'une autre
	carte.</p><p>Parfois, des utilisateurs sont confrontés à
	des messages d'erreur <span class="errorname">watchdog timeout</span>.
	La première chose à faire dans ce cas est de
	vérifier votre câble réseau.  De
	nombreuses cartes demandent un slot PCI supportant le
	<span class="quote">« <span class="quote">Bus Mastering</span> »</span>.  Sur certaines cartes
	mère anciennes, seul un slot PCI le permet (la plupart
	du temps le slot 0).  Consultez la documentation de la carte
	réseau et de la carte mère pour
	déterminer si cela peut être à l'origine
	du problème.</p><p>Les messages <span class="errorname">No route to host</span>
	surviennent si le système est incapable de router un
	paquet vers la machine de destination.  Cela peut arriver s'il
	n'y a pas de route par défaut de définie, ou si
	le câble réseau est débranché.
	Vérifiez la sortie de la commande <code class="command">netstat
	-nr</code> et assurez-vous qu'il y a une route valide en
	direction de la machine que vous essayez d'atteindre.  Si ce
	n'est pas le cas, lisez la <a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>.</p><p>Les messages d'erreur <span class="errorname">ping: sendto: Permission
	denied</span> sont souvent dus à un coupe-feu mal
	configuré.  Si <code class="command">ipfw</code> est
	activé dans le noyau mais qu'aucune règle n'a
	été définie, alors la politique par
	défaut est de refuser tout trafic, même les
	requêtes <span class="quote">« <span class="quote">ping</span> »</span>!  Lisez <a class="xref" href="#firewalls" title="Chapitre 30. Firewalls ** Traduction en Cours **">Chapitre 30, <em>Firewalls ** Traduction en Cours **</em></a> pour plus d'informations.</p><p>Parfois les performances de la carte ne sont pas bonnes,
	ou en dessous de la moyenne.  Dans ce cas il est
	recommandé de passer la sélection du
	média du mode <code class="literal">autoselect</code> au mode
	adéquat.  Alors que cela fonctionne
	généralement pour la plupart du matériel,
	il se peut que cela ne résolve pas le problème
	pour tout de monde.  Encore une fois, contrôlez les
	paramétrages réseau et consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tuning&amp;sektion=7"><span class="citerefentry"><span class="refentrytitle">tuning</span>(7)</span></a>.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-virtual-hosts"></a>12.9. Hôtes virtuels</h2></div></div></div><a id="idp74954960" class="indexterm"></a><a id="idp74955472" class="indexterm"></a><p>Une utilisation très courante de FreeBSD est
      l'hébergement de sites virtuels, où un serveur
      apparaît pour le réseau comme étant
      plusieurs serveurs différents.  Ceci est possible en assignant
      plusieurs adresses réseau à une interface.</p><p>Une interface réseau donnée possède une
      adresse &#8220;réelle&#8221;, et peut avoir n'importe
      quel nombre d'adresses &#8220;alias&#8221;.  Ces alias sont
      normalement ajoutés en plaçant les entrées
      correspondantes dans le fichier
      <code class="filename">/etc/rc.conf</code>.</p><p>Une entrée d'alias pour l'interface
      <code class="filename">fxp0</code> ressemble à:</p><pre class="programlisting">ifconfig_fxp0_alias0="inet xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx"</pre><p>Notez que les entrées d'alias doivent commencer avec alias0
      et continuer en ordre croissant, (par exemple, _alias1, _alias2,
      et ainsi de suite).  Le processus de configuration s'arrêtera
      au premier nombre absent.</p><p>Le calcul des masques de réseau est important, mais
      heureusement assez simple.  Pour une interface donnée, il doit y
      avoir une adresse qui représente correctement le masque de
      réseau de votre réseau.  Tout autre adresse appartenant
      à ce réseau devra avoir un masque de réseau
      avec chaque bit à <code class="literal">1</code> (exprimé soit
      sous la forme <code class="systemitem">255.255.255.255</code>
      soit <code class="systemitem">0xffffffff</code>).</p><p>Par exemple, considérez le cas où
      l'interface <code class="filename">fxp0</code> est connectée à
      deux réseaux, le réseau <code class="systemitem">10.1.1.0</code> avec un masque de
      réseau de
      <code class="systemitem">255.255.255.0</code> et le réseau <code class="systemitem">202.0.75.16</code> avec un masque de
      <code class="systemitem">255.255.255.240</code>.  Nous voulons que le système apparaisse de
      <code class="systemitem">10.1.1.1</code> jusqu'à <code class="systemitem">10.1.1.5</code> et à <code class="systemitem">202.0.75.17</code> jusqu'à
      <code class="systemitem">202.0.75.20</code>.  Comme noté
      plus haut, seule la première adresse dans un intervalle
      réseau donné (dans ce cas, <code class="systemitem">10.0.1.1</code> et <code class="systemitem">202.0.75.17</code>) devrait avoir un masque de
      sous-réseau réel; toutes les autres adresses
      (<code class="systemitem">10.1.1.2</code> à <code class="systemitem">10.1.1.5</code> et <code class="systemitem">202.0.75.18</code> jusqu'à <code class="systemitem">202.0.75.20</code>) doivent être
      configurées avec un masque de sous-réseau de <code class="systemitem">255.255.255.255</code>.</p><p>Les entrées suivantes du fichier
      <code class="filename">/etc/rc.conf</code> configurent la carte
      correctement pour cet arrangement:</p><pre class="programlisting">ifconfig_fxp0="inet 10.1.1.1 netmask 255.255.255.0"
ifconfig_fxp0_alias0="inet 10.1.1.2 netmask 255.255.255.255"
ifconfig_fxp0_alias1="inet 10.1.1.3 netmask 255.255.255.255"
ifconfig_fxp0_alias2="inet 10.1.1.4 netmask 255.255.255.255"
ifconfig_fxp0_alias3="inet 10.1.1.5 netmask 255.255.255.255"
ifconfig_fxp0_alias4="inet 202.0.75.17 netmask 255.255.255.240"
ifconfig_fxp0_alias5="inet 202.0.75.18 netmask 255.255.255.255"
ifconfig_fxp0_alias6="inet 202.0.75.19 netmask 255.255.255.255"
ifconfig_fxp0_alias7="inet 202.0.75.20 netmask 255.255.255.255"</pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-configfiles"></a>12.10. Fichiers de configuration</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp74975312"></a>12.10.1. Organisation du répertoire <code class="filename">/etc</code></h3></div></div></div><p>Il existe un certain nombre de répertoires dans lesquels
	se trouvent les informations de configuration.  Ceux-ci
	incluent:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="filename">/etc</code></td><td>Information de configuration générique du
		système; les données ici sont
		spécifiques au système.</td></tr><tr><td><code class="filename">/etc/defaults</code></td><td>Version par défaut des fichiers de configuration
		du système.</td></tr><tr><td><code class="filename">/etc/mail</code></td><td>Configuration de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>, et autres fichiers
		de configuration d'agent de transmission du courrier
		électronique.</td></tr><tr><td><code class="filename">/etc/ppp</code></td><td>Configuration pour les programmes PPP utilisateur
		et intégré au noyau.</td></tr><tr><td><code class="filename">/etc/namedb</code></td><td>Emplacement par défaut pour les données de
		 <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.  Normalement
		 <code class="filename">named.conf</code> et les fichiers de zone
		 sont stockés dans ce répertoire.</td></tr><tr><td><code class="filename">/usr/local/etc</code></td><td>Fichiers de configuration pour les applications
		installées.  Peut contenir des sous-répertoires
		pour chaque application.</td></tr><tr><td><code class="filename">/usr/local/etc/rc.d</code></td><td>Procédures de lancement/d'arrêt pour les
		applications installées.</td></tr><tr><td><code class="filename">/var/db</code></td><td>Fichiers de bases de données automatiquement
		générés, spécifiques
		au système, comme la base de données
		des logiciels installés, la base de données de
		localisation des fichiers, et ainsi de suite.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75007952"></a>12.10.2. Nom d'hôtes</h3></div></div></div><a id="idp75008592" class="indexterm"></a><a id="idp75009104" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75009616"></a>12.10.2.1. <code class="filename">/etc/resolv.conf</code></h4></div></div></div><a id="idp75010384" class="indexterm"></a><p><code class="filename">/etc/resolv.conf</code> gère comment
	  le résolveur de FreeBSD accède au système
	  de nom de domaine d'Internet (DNS).</p><p>Les entrées la plus classiques du fichier
	  <code class="filename">resolv.conf</code> sont:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><code class="literal">nameserver</code></td><td>L'adresse IP du serveur de noms auquel le
		  résolveur devrait envoyer ses requêtes.  Les
		  serveurs sont sollicités dans l'ordre listé
		  avec un maximum de trois.</td></tr><tr><td><code class="literal">search</code></td><td>Liste de recherche pour la résolution de nom de
		  machine.  Ceci est normalement déterminé par le
		  domaine de l'hôte local.</td></tr><tr><td><code class="literal">domain</code></td><td>Le nom du domaine local.</td></tr></tbody></table></div><p>Un fichier <code class="filename">resolv.conf</code> typique:</p><pre class="programlisting">search example.com
nameserver 147.11.1.11
nameserver 147.11.100.30</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Seule une des options <code class="literal">search</code> et
	  <code class="literal">domain</code> devrait être
	  utilisée.</p></div><p>Si vous utilisez DHCP, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> réécrit
	  habituellement <code class="filename">resolv.conf</code> avec
	  l'information reçue du serveur DHCP.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75027280"></a>12.10.2.2. <code class="filename">/etc/hosts</code></h4></div></div></div><a id="idp75028048" class="indexterm"></a><p><code class="filename">/etc/hosts</code> est une simple base de
	  données texte, une réminiscence des débuts
	  d'Internet.  Il travaille en conjonction avec les serveurs
	  DNS et NIS pour fournir les correspondances nom vers adresse
	  IP.  Les ordinateurs locaux reliés par
	  l'intermédiaire d'un réseau local peuvent
	  être ajoutés dans ce fichier pour une résolution
	  de noms simple plutôt que de configurer un serveur
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a>.
	  De plus <code class="filename">/etc/hosts</code> peut être
	  utilisé pour fournir un enregistrement local de
	  correspondances de nom, réduisant ainsi le besoin
	  de requêtes vers l'extérieur pour les noms auxquels on
	  accède couramment.</p><pre class="programlisting"># $FreeBSD$
#
# Host Database
# This file should contain the addresses and aliases
# for local hosts that share this file.
# In the presence of the domain name service or NIS, this file may
# not be consulted at all; see /etc/nsswitch.conf for the resolution order.
#
#
::1                     localhost localhost.my.domain myname.my.domain
127.0.0.1               localhost localhost.my.domain myname.my.domain

#
# Imaginary network.
#10.0.0.2               myname.my.domain myname
#10.0.0.3               myfriend.my.domain myfriend
#
# According to RFC 1918, you can use the following IP networks for
# private nets which will never be connected to the Internet:
#
#       10.0.0.0        -   10.255.255.255
#       172.16.0.0      -   172.31.255.255
#       192.168.0.0     -   192.168.255.255
#
# In case you want to be able to connect to the Internet, you need
# real official assigned numbers.  PLEASE PLEASE PLEASE do not try
# to invent your own network numbers but instead get one from your
# network provider (if any) or from the Internet Registry (ftp to
# rs.internic.net, directory `/templates').
#</pre><p><code class="filename">/etc/hosts</code> suit le format simple
	  suivant:</p><pre class="programlisting">[Internet address] [official hostname] [alias1] [alias2] ...</pre><p>Par exemple:</p><pre class="programlisting">10.0.0.1 myRealHostname.example.com myRealHostname foobar1 foobar2</pre><p>Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> pour plus
	  d'informations.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75042256"></a>12.10.3. Configuration des fichiers de trace</h3></div></div></div><a id="idp75042896" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75043408"></a>12.10.3.1. <code class="filename">syslog.conf</code></h4></div></div></div><a id="idp75044176" class="indexterm"></a><p><code class="filename">syslog.conf</code> est le fichier de configuration
	  du programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a>.  Il indique quel type de
	  messages <code class="command">syslog</code> sera enregistré
	  dans des fichiers de traces particuliers.</p><pre class="programlisting"># $FreeBSD$
#
#       Spaces ARE valid field separators in this file. However,
#       other *nix-like systems still insist on using tabs as field
#       separators. If you are sharing this file between systems, you
#       may want to use only tabs as field separators here.
#       Consult the syslog.conf(5) manual page.
*.err;kern.debug;auth.notice;mail.crit          /dev/console
*.notice;kern.debug;lpr.info;mail.crit;news.err /var/log/messages
security.*                                      /var/log/security
mail.info                                       /var/log/maillog
lpr.info                                        /var/log/lpd-errs
cron.*                                          /var/log/cron
*.err                                           root
*.notice;news.err                               root
*.alert                                         root
*.emerg                                         *
# uncomment this to log all writes to /dev/console to /var/log/console.log
#console.info                                   /var/log/console.log
# uncomment this to enable logging of all log messages to /var/log/all.log
#*.*                                            /var/log/all.log
# uncomment this to enable logging to a remote log host named loghost
#*.*                                            @loghost
# uncomment these if you're running inn
# news.crit                                     /var/log/news/news.crit
# news.err                                      /var/log/news/news.err
# news.notice                                   /var/log/news/news.notice
!startslip
*.*                                             /var/log/slip.log
!ppp
*.*                                             /var/log/ppp.log</pre><p>Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a> pour plus
	  d'informations.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75048400"></a>12.10.3.2. <code class="filename">newsyslog.conf</code></h4></div></div></div><a id="idp75049168" class="indexterm"></a><p><code class="filename">newsyslog.conf</code> est le fichier de
	  configuration de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a>, un programme qui est
	  normalement programmé <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> pour s'exécuter
	  périodiquement.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a> détermine quand les
	  fichiers de traces doivent être archivés
	  ou réorganisés.  <code class="filename">logfile</code> devient
	  <code class="filename">logfile.0</code>, <code class="filename">logfile.0</code>
	  devient à son tour <code class="filename">logfile.1</code>, et ainsi
	  de suite.  D'autre part, les fichiers de traces peuvent être
	  archivés dans le format <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a>, ils se nommeront
	  alors: <code class="filename">logfile.0.gz</code>,
	  <code class="filename">logfile.1.gz</code>, et ainsi de suite.</p><p><code class="filename">newsyslog.conf</code> indique quels
	  fichiers de traces doivent être gérés,
	  combien doivent être conservés, et quand ils
	  doivent être modifiés.  Les fichiers de traces
	  peuvent être réorganisés et/ou archivés
	  quand ils ont soit atteint une certaine taille, soit à une
	  certaine période/date.</p><pre class="programlisting"># configuration file for newsyslog
# $FreeBSD$
#
# filename          [owner:group]    mode count size when [ZB] [/pid_file] [sig_num]
/var/log/cron                           600  3     100  *     Z
/var/log/amd.log                        644  7     100  *     Z
/var/log/kerberos.log                   644  7     100  *     Z
/var/log/lpd-errs                       644  7     100  *     Z
/var/log/maillog                        644  7     *    @T00  Z
/var/log/sendmail.st                    644  10    *    168   B
/var/log/messages                       644  5     100  *     Z
/var/log/all.log                        600  7     *    @T00  Z
/var/log/slip.log                       600  3     100  *     Z
/var/log/ppp.log                        600  3     100  *     Z
/var/log/security                       600  10    100  *     Z
/var/log/wtmp                           644  3     *    @01T05 B
/var/log/daily.log                      640  7     *    @T00  Z
/var/log/weekly.log                     640  5     1    $W6D0 Z
/var/log/monthly.log                    640  12    *    $M1D0 Z
/var/log/console.log                    640  5     100  *     Z</pre><p>Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newsyslog</span>(8)</span></a> pour plus
	  d'informations.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="configtuning-sysctlconf"></a>12.10.4. <code class="filename">sysctl.conf</code></h3></div></div></div><a id="idp75063248" class="indexterm"></a><a id="idp75063760" class="indexterm"></a><p><code class="filename">sysctl.conf</code> ressemble à
	<code class="filename">rc.conf</code>.  Les valeurs sont fixées sous
	la forme <code class="literal">variable=value</code>.  Les valeurs
	spécifiées sont positionnées
	après que le système soit passé
	dans le mode multi-utilisateurs.  Toutes les variables ne sont
	pas paramétrables dans ce mode.</p><p>Pour désactiver l'enregistrement des signaux fatals
	de fin de processus et empêcher les utilisateurs de voir
	les processus lancés par les autres, les variables
	suivantes peuvent être paramétrées dans
	<code class="filename">sysctl.conf</code>:</p><pre class="programlisting"># Do not log fatal signal exits (e.g. sig 11)
kern.logsigexit=0

# Prevent users from seeing information about processes that
# are being run under another UID.
security.bsd.see_other_uids=0</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-sysctl"></a>12.11. Optimisation avec sysctl</h2></div></div></div><a id="idp75072080" class="indexterm"></a><a id="idp75072592" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> est une interface qui vous permet d'effectuer
      des changements de paramétrage sur un système
      FreeBSD en fonctionnement.  Cela comprend de nombreuses options
      avancées de la pile TCP/IP et du système de
      mémoire virtuelle qui peuvent améliorer dramatiquement les
      performances pour un administrateur système
      expérimenté.  Plus de cinq cent variables
      système peuvent être lues et modifiées
      grâce à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> remplit deux fonctions: lire et modifier
      les paramétrages du système.</p><p>Pour afficher toutes les variables lisibles:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sysctl -a</code></strong></pre><p>Pour lire une variable particulière, par exemple,
      <code class="varname">kern.maxproc</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sysctl kern.maxproc</code></strong>
kern.maxproc: 1044</pre><p>Pour fixer une variable particulière, utilisez
      la syntaxe intuitive
      <em class="replaceable"><code>variable</code></em>=<em class="replaceable"><code>valeur</code></em>
      :</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.maxfiles=5000</code></strong>
kern.maxfiles: 2088 -&gt; 5000</pre><p>Les valeurs des variables sysctl sont généralement des
      chaînes de caractères, des nombres, ou des
      booléens (un variable booléenne étant
      <code class="literal">1</code> pour oui ou un <code class="literal">0</code> pour
      non).</p><p>Si vous voulez fixer automatiquement certaines variables
      à chaque démarrage de la machine, ajoutez-les au fichier
      <code class="filename">/etc/sysctl.conf</code>.  Pour plus d'information
      consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">sysctl.conf</span>(5)</span></a> et la
      <a class="xref" href="#configtuning-sysctlconf" title="12.10.4. sysctl.conf">Section 12.10.4, « <code class="filename">sysctl.conf</code> »</a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="sysctl-readonly"></a>12.11.1. Variables <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> en lecture seule</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Dans certains cas, il peut être nécessaire de
      modifier des variables <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> en lecture seule.  Bien
      que cela soit parfois inévitable, cela ne peut être
      fait qu'au (re)démarrage de la machine.</p><p>Par exemple sur certains modèles d'ordinateurs
      portables le périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cardbus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cardbus</span>(4)</span></a> ne
      sondera pas le système à la recherche des zones
      mémoires, et échouera avec des erreurs du
      type:</p><pre class="screen">cbb0: Could not map register memory
device_probe_and_attach: cbb0 attach returned 12</pre><p>Des cas comme le précédent demandent
      généralement la modification de paramètres
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> par défaut qui sont en lecture seule.
      Pour palier à ces situations un utilisateur peut placer
      un paramétrage (&#8220;OID&#8221;&#8212;Object
      IDentifier) <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> dans le fichier local
      <code class="filename">/boot/loader.conf.local</code>.  Les
      paramétrages par défaut se trouvent dans le
      fichier <code class="filename">/boot/defaults/loader.conf</code>.</p><p>Pour corriger le problème précédent, il
      faudrait que l'utilisateur ajoute la ligne
      <code class="option">hw.pci.allow_unsupported_io_range=1</code> dans le
      fichier précédemment indiqué.
      Désormais le périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cardbus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cardbus</span>(4)</span></a>
      devrait fonctionner normalement.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-disk"></a>12.12. Optimiser les disques</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75104848"></a>12.12.1. Les variables sysctl</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75105488"></a>12.12.1.1. <code class="varname">vfs.vmiodirenable</code></h4></div></div></div><a id="idp75106256" class="indexterm"></a><p>La variable sysctl <code class="varname">vfs.vmiodirenable</code>
	  peut être positionnée soit à 0
	  (désactivée) soit à 1
	  (activée); elle est a 1 par défaut.  Cette variable
	  spécifie comment les répertoires sont
	  cachés par le système.
	  La plupart des répertoires sont petits, utilisant juste un
	  simple fragment du système de fichiers (typiquement 1KO) et
	  moins dans le cache en mémoire (typiquement 512 octets).
	  Avec cette variable désactivée (à 0), le
	  cache en mémoire ne cachera qu'un nombre fixe de
	  répertoires même si vous disposez d'une grande
	  quantité de mémoire.  Activée (à 1), cette variable sysctl
	  permet au cache en mémoire d'utiliser le cache des pages de
	  mémoire virtuelle pour cacher les répertoires,
	  rendant toute la mémoire disponible pour cacher les
	  répertoires.  Cependant, la taille minimale de
	  l'élément mémoire utilisé pour cacher
	  un répertoire est une page physique (typiquement 4KO)
	  plutôt que 512 octets.
	  Nous recommandons de conserver de cette option activée si
	  vous faites fonctionner des services qui manipulent un grand
	  nombre de fichiers.  De tels services peuvent être des
	  caches web, d'importants systèmes de courrier
	  électronique, et des systèmes serveurs de groupe
	  de discussion.  Conserver cette option activée ne réduira
	  généralement pas les performances même
	  avec la mémoire gaspillée mais vous devriez
	  faire des expériences pour le déterminer.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75108048"></a>12.12.1.2. <code class="varname">vfs.write_behind</code></h4></div></div></div><a id="idp75108816" class="indexterm"></a><p>La variable sysctl <code class="varname">vfs.write_behind</code> est
	  positionnée par défaut à
	  <code class="literal">1</code> (activée).  Elle demande au
	  système de fichiers d'effectuer les écritures
	  lorsque des grappes complètes de données ont
	  été collectées, ce qui se produit
	  généralement lors de l'écriture
	  séquentielle de gros fichiers.  L'idée est
	  d'éviter de saturer le cache tampon avec des tampons
	  sales quand cela n'améliorera pas les performances d'E/S.
	  Cependant, cela peut bloquer les processus et dans certaines
	  conditions vous pouvez vouloir désactiver cette
	  fonction.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75110992"></a>12.12.1.3. <code class="varname">vfs.hirunningspace</code></h4></div></div></div><a id="idp75111760" class="indexterm"></a><p>La variable sysctl <code class="varname">vfs.hirunningspace</code>
	  détermine combien d'opérations d'écriture
	  peuvent être mises en attente à tout moment au
	  niveau des contrôleurs disques du système.  La
	  valeur par défaut est normalement suffisante mais sur les
	  machines avec de nombreux disques, vous pouvez vouloir
	  l'augmenter jusqu'à quatre ou cinq
	  <span class="emphasis"><em>méga-octets</em></span>.  Notez que fixer une
	  valeur trop élevée (dépassant la limite
	  d'écriture du cache tampon) peut donner lieu à de
	  très mauvaises performances.  Ne fixez pas cette valeur
	  à une valeur élevée arbitraire!  Des
	  valeurs d'écriture élevées peuvent ajouter
	  des temps de latence aux opérations d'écriture
	  survenant au même moment.</p><p>Il existent d'autres variables sysctl relatives aux caches
	  tampons et aux pages VM.  Nous ne recommandons pas de modifier
	  ces valeurs, le système VM
	  effectue un très bon travail d'auto-optimisation.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75114448"></a>12.12.1.4. <code class="varname">vm.swap_idle_enabled</code></h4></div></div></div><a id="idp75115216" class="indexterm"></a><p>La variable <code class="varname">vm.swap_idle_enabled</code> est
	  utile dans le cas de systèmes multi-utilisateurs
	  importants où il y a beaucoup d'utilisateurs s'attachant
	  et quittant le système et de nombreux processus inactifs.
	  De tels systèmes tendent à générer
	  une pression assez importante et continue sur les
	  réserves de mémoire libres.  Activer cette
	  fonction et régler l'hystéresis de
	  libération de l'espace de pagination (en secondes
	  d'inactivité) par l'intermédiaire des variables
	  <code class="varname">vm.swap_idle_threshold1</code> et
	  <code class="varname">vm.swap_idle_threshold2</code>, vous permet de
	  diminuer la priorité des pages mémoire
	  associées avec les processus inactifs plus rapidement
	  qu'avec l'algorithme normal de libération.  Cela aide le
	  <span class="quote">« <span class="quote">daemon</span> »</span> de libération des pages.  N'activez
	  cette option que si vous en besoin, parce que la concession que
	  vous faites est d'utiliser l'espace de pagination pour les pages
	  mémoire plus tôt qu'à l'accoutumé,
	  consommant par conséquent plus d'espace de pagination et
	  de bande passante disque.  Sur un petit système, cette
	  option aura un effet limité mais dans le cas d'un
	  système important qui fait appel à l'espace de
	  pagination de façon modérée, cette option
	  permettra au système VM de transférer l'ensemble
	  des processus de et vers la mémoire
	  aisément.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75118160"></a>12.12.1.5. <code class="varname">hw.ata.wc</code></h4></div></div></div><a id="idp75118928" class="indexterm"></a><p>FreeBSD 4.3 a flirté avec la désactivation
	  du cache en écriture des disques IDE.  Cela réduisit la
	  bande passante en écriture des disques IDE mais fut
	  considéré comme nécessaire en raison de
	  sérieux problèmes de cohérence de
	  données introduits par les fabricants de disques durs.
	  Le problème est que les disques IDE mentent sur le
	  moment où une écriture est réellement
	  terminée.  Avec le cache en écriture IDE
	  activé, les disques durs IDE non seulement
	  n'écriront pas les données dans l'ordre, mais parfois
	  retarderont l'écriture de certains blocs indéfiniment
	  sous une charge disque importante.  Un crash ou une coupure
	  secteur pourra être à l'origine de
	  sérieuses corruptions du système de fichiers.
	  Par précaution le paramétrage par défaut
	  de FreeBSD fut modifié.  Malheureusement, le
	  résultat fut une telle perte de performances que nous avons
	  réactivé le cache en écriture
	  après cette version de FreeBSD.  Vous devriez
	  contrôler la valeur par
	  défaut sur votre système en examinant la variable
	  sysctl <code class="varname">hw.ata.wc</code>.  Si le cache en
	  écriture des disques IDE est désactivé,
	  vous pouvez le réactiver en positionnant la variable
	  à 1.  Cela doit être fait à partir du chargeur au
	  démarrage.  Tenter de le faire après le
	  démarrage du noyau n'aura aucun effet.</p><p>Pour plus d'informations, veuillez consulter la page de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ata&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ata</span>(4)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75126096"></a>12.12.1.6. <code class="literal">SCSI_DELAY</code>
	(<code class="varname">kern.cam.scsi_delay</code>)</h4></div></div></div><a id="idp75127376" class="indexterm"></a><a id="idp75128272" class="indexterm"></a><p>L'option de configuration du noyau
	<code class="literal">SCSI_DELAY</code> peut être utilisée
	pour réduire le temps de démarrage du
	système.  Le délai par défaut est important
	et peut être responsable de plus de <code class="literal">15</code>
	secondes d'attente lors du processus de démarrage.
	Réduire ce délai à <code class="literal">5</code>
	secondes est généralement suffisant (tout
	particulièrement avec les disques modernes).  Les
	versions de FreeBSD récentes (5.0 et suivantes) devraient
	utiliser l'option de démarrage
	<code class="varname">kern.cam.scsi_delay</code>.  Cette option de
	démarrage et celle de configuration du noyau acceptent
	des valeurs en <span class="emphasis"><em>millisecondes</em></span> et <span class="emphasis"><em>non pas</em></span> en
	<span class="emphasis"><em>secondes</em></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="soft-updates"></a>12.12.2. Les &#8220;Soft Updates&#8221;</h3></div></div></div><a id="idp75137872" class="indexterm"></a><a id="idp75138384" class="indexterm"></a><p>Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> peut être utilisé
	pour régler finement un système de fichiers.
	Ce programme dispose de nombreuses options différentes, mais
	pour l'instant nous nous intéresserons uniquement à
	l'activation et la désactivation des &#8220;Soft
	Updates&#8221;, ce qui fait avec:</p><pre class="screen"><code class="prompt">#</code> tunefs -n enable /filesystem
<code class="prompt">#</code> tunefs -n disable /filesystem</pre><p>Un système de fichiers ne peut être modifié
	avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a> tant qu'il est monté.  Un bon moment pour
	activer les &#8220;Soft Updates&#8221; est avant que les
	partitions ne soient montées en mode mono-utilisateur.</p><p>Les &#8220;Soft Updates&#8221; améliorent de façon
	drastique les performances sur les méta-données,
	principalement la création et la suppression de fichier, par
	l'utilisation d'un cache mémoire.  Nous recommandons d'activer
	les &#8220;Soft Updates&#8221; sur tous vos systèmes de
	fichiers.  Il y a deux inconvénients aux &#8220;Soft
	Updates&#8221; que vous devez connaître: tout d'abord, les
	&#8220;Soft Updates&#8221; garantissent la cohérence du
	système de fichiers en cas de crash mais pourront facilement
	être en retard de quelques secondes (voir même une minute!)
	dans la mise à jour du disque.  Si votre système plante
	il se peut que vous perdiez plus de travail que dans d'autres cas.
	Deuxièmement, les &#8220;Soft Updates&#8221; retardent la
	libération des blocs du système de fichiers.  Si vous
	avez un système de fichiers (comme le système de
	fichiers racine) qui est presque plein, effectuer une mise à
	jour majeure, comme un <code class="command">make installworld</code>,
	peut mener à un manque d'espace sur le système de
	fichiers et faire échouer la mise à jour.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75142992"></a>12.12.2.1. Plus de détails à propos des
	  &#8220;Soft Updates&#8221;</h4></div></div></div><a id="idp75143632" class="indexterm"></a><p>Il y a deux approches traditionnelles pour écrire les
	  méta-données d'un système de fichiers sur le
	  disque (mise à jour des méta-données et mise
	  à jour des éléments sans données
	  comme les inodes ou les répertoires).</p><p>Historiquement, le comportement par défaut
	  était d'écrire les mises à jour des
	  méta-données de façon synchrone.  Si un
	  répertoire a été modifié, le
	  système attendait jusqu'à ce que le changement soit
	  effectivement écrit sur le disque.  Les tampons des
	  données de fichier (contenu du fichier) passaient par le
	  cache mémoire et étaient copiés
	  sur le disque plus tard de façon asynchrone.
	  L'avantage de cette implémentation est
	  qu'elle est effectuée sans risque.  S'il y a un
	  problème durant une mise à jour, les
	  méta-données sont toujours dans
	  un état consistant.  Un fichier est soit
	  créé complètement soit pas du tout.  Si les
	  blocs de données d'un fichier n'ont pas trouvé leur
	  chemin du cache mémoire vers le disque au moment du crash,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> est capable de s'en apercevoir et de réparer le
	  système de fichiers en fixant la taille du fichier à
	  0.  De plus, l'implémentation est claire et simple.
	  L'inconvénient est que la modification des
	  méta-données
	  est lente.  Un <code class="command">rm -r</code>, par exemple,
	  touche à tous les fichiers dans un répertoire
	  séquentiellement, mais chaque modification du
	  répertoire (effacement d'un fichier) sera écrite
	  de façon synchrone sur le disque.
	  Cela comprend les mises à jour
	  du répertoire lui-même, de la table des inodes, et
	  éventuellement celles sur des blocs indirects alloués
	  par le fichier.  Des considérations semblables s'appliquent
	  à la création d'importantes hiérarchies
	  ((<code class="command">tar -x</code>).</p><p>Le deuxième cas est la mise à jour
	  asynchrone des méta-données.  C'est le comportement
	  par défaut de Linux/ext2fs et de l'usage de
	  <code class="command">mount -o async</code> pour l'UFS des systèmes
	  BSD.  Toutes les mises à jour des méta-données
	  passent également par l'intermédiaire d'un cache
	  mémoire, c'est à dire, qu'elles seront
	  mélangées
	  aux mises à jour des données du contenu du fichier.
	  L'avantage de cette implémentation est qu'il n'y a pas
	  besoin d'attendre jusqu'à l'écriture sur le disque
	  de chaque mise à jour de méta-données, donc
	  toutes les opérations qui sont à l'origine d'une grande
	  quantité de mise à jour de méta-données
	  fonctionnent bien plus rapidement que dans le cas synchrone.
	  De plus, l'implémentation est toujours claire et simple, il y
	  a donc peu de risque qu'un bogue se cache dans le code.
	  L'inconvénient est qu'il n'y a aucune garantie du tout sur la
	  cohérence du système de fichiers.  S'il y a un
	  problème durant une opération qui met à jour
	  une grande quantité de méta-données
	  (comme une coupure secteur, ou quelqu'un appuyant sur le
	  bouton reset), le système de fichiers sera laissé
	  dans un état imprévisible.  Il n'y a aucune
	  opportunité d'examiner l'état du système
	  de fichiers quand le système est à nouveau relancé;
	  les blocs de données d'un fichier pourraient
	  déjà avoir été inscrits sur
	  le disque alors que la mise à jour de la table des inodes
	  ou du répertoire associé n'a pas
	  été faite.  Il est en fait impossible
	  d'implémenter un <code class="command">fsck</code>
	  qui est capable de nettoyer le chaos résultant (parce que
	  l'information nécessaire n'est pas disponible sur le
	  disque).  Si le système de fichiers a été
	  endommagé irrémédiablement, le seul choix est
	  de le recréer avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> et de
	  récupérer les données à partir
	  de sauvegardes.</p><p>La solution commune pour ce problème fut
	  d'implémenter une <span class="emphasis"><em>région de
	  trace</em></span>, dont
	  on fait souvent référence sous le terme de
	  <span class="emphasis"><em>journalisation</em></span>, bien que ce terme ne
	  soit pas toujours utilisé de façon
	  cohérente et est occasionnellement utilisé
	  pour d'autres formes de transaction avec trace.  Les mises à
	  jour des méta-données sont toujours écrites
	  de façon synchrone, mais seulement sur une petite région
	  du disque.  Elles seront plus tard déplacées vers
	  leur emplacement correct.  Parce que la région de trace
	  est une petite région contiguë sur le disque,
	  il n'y a pas de grandes distances de déplacement
	  pour les têtes des disques, même durant
	  les opérations importantes, donc ces opérations
	  sont plus rapides que les mises à jour synchrones.
	  De plus la complexité de l'implémentation
	  est relativement
	  limitée, donc le risque de présence de bogues est
	  faible. Un inconvénient est que toutes les
	  méta-données sont écrites deux fois (une fois
	  dans la région de trace et une fois sur l'emplacement
	  correct) donc pour un fonctionnement normal, une baisse
	  des performances pourra en résulter.  D'autre part,
	  dans le cas d'un crash, toutes les opérations sur les
	  méta-données en attente peuvent rapidement
	  être annulées ou complétées
	  à partir de la zone de trace après le
	  redémarrage du système, ayant pour
	  résultat un démarrage rapide du
	  système de fichiers.</p><p>Kirk McKusick, le développeur du FFS de Berkeley,
	  a résolu le problème avec les
	  &#8220;Soft Updates&#8221;:
	  toutes les mises à jour des méta-données sont
	  conservées en mémoire et inscrites sur le disque
	  selon une séquence ordonnée (&#8220;mise
	  à jour ordonnée des méta-données&#8221;).
	  Ceci a pour effet, dans le cas d'un nombre d'opérations
	  sur les méta-données important, que les
	  dernières mises à jour sur un élément
	  &#8220;attrapent&#8221; les premières si ces
	  dernières sont encore en mémoire et n'ont pas
	  encore été inscrites sur le disque.  Donc toutes
	  les opérations sur, par exemple, un répertoire sont
	  généralement effectuées en
	  mémoire avant que la mise à jour ne soit
	  écrite sur le disque (les blocs de données
	  sont ordonnés en fonction de leur position de
	  sorte à ce qu'ils ne soient pas sur le disque avant leur
	  méta-données).  Si le système
	  crash, cela provoque un &#8220;retour dans les traces&#8221;
	  implicite: toutes les opérations qui n'ont pas
	  trouvé leur chemin vers le disque apparaissent comme si
	  elles n'avaient jamais existé.  Un état
	  cohérent du système de fichiers est maintenu et
	  apparaît comme étant celui de 30 ou 60 secondes
	  plus tôt.  L'algorithme utilisé garantie que toutes les
	  ressources utilisées soient marquées
	  avec leur bons &#8220;bitmaps&#8221;: blocs et inodes.
	  Après un crash, les seules erreurs d'allocation de
	  ressources qui apparaissent sont les ressources qui ont
	  été marquées comme
	  &#8220;utilisées&#8221; et qui sont en fait
	  &#8221;libre&#8221;.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> reconnaît cette
	  situation, et libère les ressources qui ne sont plus
	  utilisées.  On peut ignorer sans risque l'état
	  &#8220;sale&#8221; d'un système de fichiers après un
	  crash en forçant son montage avec <code class="command">mount
	  -f</code>.  Afin de libérer les ressources qui peuvent
	  être inutilisées, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> doit
	  être exécuté plus tard.
	  C'est l'idée qu'il y a derrière le
	  &#8220;<span class="emphasis"><em>background fsck</em></span>&#8221; (fsck en
	  tâche de fond): au démarrage du système, seule
	  un &#8220;<span class="emphasis"><em>snapshot</em></span>&#8221; (photographie)
	  du système de fichiers est prise.  La commande
	  <code class="command">fsck</code> peut être
	  exécutée plus tard sur ce système de
	  fichiers.  Tous les systèmes de fichiers peuvent
	  être montés &#8220;sales&#8221;, donc le
	  système passe en
	  mode multi-utilisateurs.  Ensuite, les
	  <code class="command">fsck</code> en tâche de fond seront
	  programmés pour tous les systèmes de fichiers pour
	  lesquels c'est nécessaire, pour libérer les ressources
	  qui peuvent être inutilisées (les systèmes
	  qui n'utilisent pas les &#8216;Soft Updates&#8221; ont
	  toujours besoin du <code class="command">fsck</code>
	  en avant plan).</p><p>L'avantage est que les opérations sur les
	  méta-données sont presque aussi rapides que les
	  mises à jour asynchrones (i.e. plus rapide qu'avec le
	  &#8220;<span class="emphasis"><em>logging</em></span>&#8221; - traçage,
	  qui doit écrire les méta-données deux
	  fois).  Les inconvénients sont la complexité du code
	  (impliquant un haut risque de bogues dans une zone qui est
	  hautement sensible en raison de risque perte de données
	  utilisateur), et une plus grande consommation en mémoire.
	  De plus il y a quelques particularités que l'on peut
	  rencontrer lors de l'utilisation.  Après un crash,
	  l'état du système apparaît être en quelque
	  sorte &#8220;plus vieux&#8221;.  Dans des situations
	  où l'approche synchrone classique aurait donné lieu
	  à des fichiers de taille nulle restant après le
	  <code class="command">fsck</code>, ces fichiers n'existent pas du
	  tout avec un système de fichiers utilisant les
	  &#8220;Soft Updates&#8221; parce que ni les
	  méta-données ni les contenus de fichiers n'ont
	  jamais été inscrits sur le disque.  L'espace disque
	  n'est pas rendu tant que les mises à jour n'ont pas
	  été inscrites sur le disque, ce qui peut se produire
	  quelques temps après l'exécution de
	  <code class="command">rm</code>.  Cela peut être à
	  l'origine de problèmes quand on installe une grande
	  quantité de données sur un système de fichiers
	  qui ne dispose pas de suffisamment d'espace pour contenir tous les
	  fichiers deux fois.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="configtuning-kernel-limits"></a>12.13. Optimisation des limitations du noyau</h2></div></div></div><a id="idp75157584" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="file-process-limits"></a>12.13.1. Limitations sur les fichiers et les processus</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="kern-maxfiles"></a>12.13.1.1. <code class="varname">kern.maxfiles</code></h4></div></div></div><a id="idp75160400" class="indexterm"></a><p>Le paramètre <code class="varname">kern.maxfiles</code>
	  peut être augmenté ou diminué
	  en fonction des besoins du système.  Cette variable
	  indique le nombre maximal de descripteurs de fichier sur
	  votre système.  Quand la table de descripteurs de fichier
	  est pleine, le message <span class="errorname">file: table is
	  full</span> s'affichera régulièrement dans le
	  tampon des messages système, qui peut être
	  visualisé avec la commande
	  <code class="command">dmesg</code>.</p><p>Chaque fichier ouvert, chaque &#8220;socket&#8221;,
	  ou chaque emplacement en pile utilise un descripteur de fichier.
	  Un serveur important peut facilement demander plusieurs
	  milliers de descripteurs de fichiers, en fonction du type et
	  du nombre de services s'exécutant en même temps.</p><p>Sous les anciennes versions de FreeBSD, la valeur par défaut de <code class="varname">kern.maxfile</code>
	  est fixée par l'option <code class="option">maxusers</code>
	  dans votre fichier de configuration du noyau.
	  <code class="varname">kern.maxfiles</code> augmente proportionnellement
	  avec la valeur de <code class="option">maxusers</code>.  Quand vous
	  compilez un noyau sur mesure, il est bon de paramétrer cette
	  option en fonction de l'utilisation de votre système.  Ce
	  nombre fixe la plupart des limites pré-définies du
	  noyau.
	  Même si une machine de production pourra ne pas avoir en
	  réalité 256 utilisateurs connectés
	  simultanément, les ressources requises pourront être
	  semblables pour un serveur web important.</p><p>Depuis FreeBSD 4.5, <code class="varname">kern.maxusers</code> est
	  automatiquement ajustée au démarrage en
	  fonction de la quantité de mémoire disponible
	  dans le système, sa valeur peut être connue
	  durant le fonctionnement du système en examinant la
	  valeur de la variable sysctl en lecture seule:
	  <code class="varname">kern.maxusers</code>.  Certains systèmes
	  auront besoin de valeurs plus élevées ou plus
	  faibles pour <code class="varname">kern.maxusers</code> et pourront
	  donc la fixer au chargement du système; des valeurs
	  de 64, 128, ou 256 ne sont pas inhabituelles.  Nous
	  recommandons de ne pas dépasser 256 à moins
	  que vous ayez besoin d'un grand nombre de descripteurs de
	  fichiers; plusieurs des variables dont la valeur par
	  défaut dépend de
	  <code class="varname">kern.maxusers</code> peuvent être
	  fixées individuellement au démarrage ou en
	  fonctionnement dans le fichier
	  <code class="filename">/boot/loader.conf</code> (voir la page de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a> ou le fichier
	  <code class="filename">/boot/defaults/loader.conf</code> pour des
	  exemples) ou comme décrit en d'autres endroits dans
	  ce document.  Les systèmes antérieurs à
	  FreeBSD 4.4 doivent passer par l'option
	  <code class="option">maxusers</code> du fichier de configuration du
	  noyau pour fixer cette valeur.</p><p>Sous les anciennes versions, le système auto-ajuste
	  ce paramètre pour vous si vous le fixez explicitement
	  à <code class="literal">0</code><a href="#ftn.idp75177808" class="footnote" id="idp75177808"><sup class="footnote">[5]</sup></a>.
	  En paramétrant cette option, vous
	  devrez fixer <code class="literal">maxusers</code> à 4 au
	  moins, en particulier si vous utilisez le système X
	  Window ou compilez des logiciels.  La raison de cela est que
	  la valeur la plus importante que dimensionne
	  <code class="literal">maxusers</code> est le nombre maximal de
	  processus, qui est fixé à <code class="literal">20 + 16 *
	  maxusers</code>, donc si vous positionnez
	  <code class="literal">maxusers</code> à 1, alors vous ne pouvez
	  avoir que 36 processus en simultanés, comprenant les
	  18, environ, que le système lance au démarrage
	  et les 15, à peu près, que vous créerez
	  probablement au démarrage du système X Window.
	  Même une tâche simple comme la lecture d'une
	  page de manuel lancera jusqu'à neuf processus pour la
	  filtrer, la décompresser, et l'afficher.  Fixer
	  <code class="literal">maxusers</code> à 64 autorisera
	  jusqu'à 1044 processus simultanés, ce qui
	  devrait suffire dans la plupart des cas.  Si, toutefois,
	  vous obtenez le message d'erreur tant redouté
	  <span class="errortype">proc table full</span> quand vous tentez
	  d'exécuter un nouveau programme, ou gérez un
	  serveur avec un grand nombre d'utilisateurs en
	  simultanés (comme <code class="systemitem">ftp.FreeBSD.org</code>), vous pouvez toujours
	  augmenter cette valeur et recompiler le noyau.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="literal">maxusers</code> ne limite
	    <span class="emphasis"><em>pas</em></span> le nombre d'utilisateurs qui
	    pourront ouvrir une session sur votre machine.  Cette
	    valeur dimensionne simplement différentes tables
	    à des valeurs raisonnables en fonction du nombre
	    maximal d'utilisateur que vous aurez vraisemblablement sur
	    votre système et combien de processus chacun
	    d'entre eux pourra utiliser.  Un mot-clé qui
	    <span class="emphasis"><em>limite</em></span> le nombre d'utilisateurs
	    distants et de terminaux X en simultané est <a class="link" href="#kernelconfig-ptys"><code class="literal">pseudo-device pty
	    16</code></a>.  Avec FreeBSD 5.X, vous n'avez pas
	    à vous soucier de ce nombre puisque le pilote
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pty&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">pty</span>(4)</span></a> est capable d'<span class="quote">« <span class="quote">auto-clonage</span> »</span>,
	    vous devez donc utiliser la ligne <code class="literal">device
	    pty</code> dans votre fichier de configuration.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75235408"></a>12.13.1.2. <code class="varname">kern.ipc.somaxconn</code></h4></div></div></div><a id="idp75236304" class="indexterm"></a><p>La variable sysctl <code class="varname">kern.ipc.somaxconn</code>
	  limite la taille de la file d'attente acceptant les
	  nouvelles connexions TCP.  La valeur par défaut de
	  <code class="literal">128</code> est généralement trop
	  faible pour une gestion robuste des nouvelles connexions
	  dans un environnement de serveur web très
	  chargé.  Pour de tels environnements, il est
	  recommandé d'augmenter cette valeur à
	  <code class="literal">1024</code> ou plus.  Le <span class="quote">« <span class="quote">daemon</span> »</span>
	  en service peut de lui-même limiter la taille de la
	  file d'attente (e.g. <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>, ou
	  <span class="application">Apache</span>) mais disposera, la
	  plupart du temps, d'une directive dans son fichier de
	  configuration pour ajuster la taille de la file d'attente.
	  Les files d'attentes de grandes tailles sont plus
	  adaptées pour éviter les attaques par
	  déni de service (<abbr class="abbrev">DoS</abbr>).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nmbclusters"></a>12.13.2. Limitations réseau</h3></div></div></div><p>L'literal du noyau <code class="literal">NMBCLUSTERS</code> fixe la
	quantité de <span class="quote">« <span class="quote">Mbuf</span> »</span>;s disponibles pour le
	système.  Un serveur à fort trafic avec un nombre faible
	de <span class="quote">« <span class="quote">Mbuf</span> »</span>;s sous-emploiera les capacités de FreeBSD.
	Chaque &#8220;cluster&#8221; représente approximativement 2 Ko
	de mémoire, donc une valeur de 1024 représente 2
	mégaoctets de mémoire noyau réservée
	pour les tampons réseau.  Un simple calcul peut
	être fait pour déterminer combien sont
	nécessaires.  Si vous avez un serveur web qui culmine à
	1000 connexions simultanées, et que chaque connexion
	consomme un tampon de réception de 16Ko et un tampon
	d'émission de 16 Ko, vous avez approximativement besoin
	de 32 Mo de tampon réseau pour couvrir les besoin du
	serveur web.  Un bon principe est de multiplier ce nombre
	par 2, soit 2x32 Mo / 2 Ko = 64 Mo / 2 Ko =32768.
	Nous recommandons des valeurs comprises entre 4096 et 32768
	pour les machines avec des quantités de mémoire
	plus élevées.  Vous ne devriez, dans aucun
	circonstance, spécifier de valeur élevée
	arbitraire pour ce paramètre étant donné
	que cela peut être à l'origine d'un plantage au
	démarrage.  L'option <code class="option">-m</code> de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">netstat</span>(1)</span></a> peut être utilisée pour observer
	l'utilisation des <span class="quote">« <span class="quote">clusters</span> »</span>.</p><p>La variable <code class="varname">kern.ipc.nmbclusters</code>
	configurable au niveau du chargeur est utilisée pour
	ajuster cela au démarrage.  Seules les anciennes
	versions de FreeBSD vous demanderont d'utiliser l'option de
	configuration du noyau <code class="literal">NMBCLUSTERS</code>.</p><p>Pour les serveurs chargés qui font une utilisation
	intensive de l'appel système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a>, il peut
	être nécessaire d'augmenter le nombre de tampons
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a> par l'intermédiaire de l'option de
	configuration du noyau <code class="literal">NSFBUFS</code> ou en fixant
	sa valeur dans le fichier
	<code class="filename">/boot/loader.conf</code> (consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> pour plus de détails).  Un
	indicateur de la nécessité d'ajuster ce
	paramètre est lorsque des processus sont dans
	l'état <code class="literal">sfbufa</code>.  La variable sysctl
	<code class="varname">kern.ipc.nsfbufs</code> est un aperçu en
	lecture seule de la variable du noyau.  Ce paramètre
	s'ajuste de façon optimale avec
	<code class="varname">kern.maxusers</code>, il peut être cependant
	nécessaire de l'ajuster en fonction des besoins.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Même si une <span class="quote">« <span class="quote">socket</span> »</span> a
	  été marquée comme étant
	  non-bloquante, un appel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a> sur la
	  <span class="quote">« <span class="quote">socket</span> »</span> non-bloquante peut résulter en un
	  blocage de l'appel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendfile&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">sendfile</span>(2)</span></a> jusqu'à ce que
	  suffisamment de <code class="literal">struct sf_buf</code> soient
	  libérées.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75262800"></a>12.13.2.1. <code class="varname">net.inet.ip.portrange.*</code></h4></div></div></div><a id="idp75263568" class="indexterm"></a><p>Les variables <code class="varname">net.inet.ip.portrange.*</code>
	  contrôlent les intervalles de ports automatiquement
	  alloués aux <span class="quote">« <span class="quote">socket</span> »</span>s TCP et UDP.  Il y
	  a trois intervalles: un intervalle bas, un intervalle par
	  défaut, et intervalle un haut.  La plupart des
	  programmes réseau utilisent l'intervalle par
	  défaut qui est contrôlé par
	  <code class="varname">net.inet.ip.portrange.first</code> et
	  <code class="varname">net.inet.ip.portrange.last</code>, qui ont pour
	  valeur par défaut respectivement 1024 et 5000.  Ces
	  intervalles de ports sont utilisés pour les
	  connexions sortantes, et il est possible de se trouver
	  à court de ports dans certaines conditions.  Cela
	  arrive le plus souvent quand votre système fait
	  tourner un proxy web très chargé.
	  L'intervalle de ports n'est pas un problème quand
	  vous exécutez des serveurs qui ne gèrent
	  principalement que des connexions entrantes, comme un server
	  web classique, ou qui ont un nombre de connexions sortantes
	  limitées comme un relai de messagerie.  Pour les cas
	  où vous risquez d'être à court de ports,
	  il est recommandé d'augmenter
	  légèrement
	  <code class="varname">net.inet.ip.portrange.last</code>.  Une valeur
	  de <code class="literal">10000</code>, <code class="literal">20000</code> ou
	  <code class="literal">30000</code> doit être suffisante.  Vous
	  devriez également penser au problème du
	  coupe-feu lors du changement de l'intervalle des ports.
	  Certains coupes-feu peuvent bloquer de grands intervalles de
	  ports (en général les ports inférieurs)
	  et s'attendent à ce que les systèmes utilisent
	  les intervalles supérieurs pour les connexions
	  sortantes &#8212; pour cette raison il n'est pas conseillé
	  de diminuer
	  <code class="varname">net.inet.ip.portrange.first</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75268304"></a>12.13.2.2. Le produit délai-bande passante TCP</h4></div></div></div><a id="idp75273168" class="indexterm"></a><p>La limitation du produit délai-bande passante TCP
	  est semblable au TCP/Vegas sous NetBSD.  Elle peut
	  être activée en positionnant à
	  <code class="literal">1</code> la variable
	  <code class="varname">net.inet.tcp.inflight.enable</code>.  Le
	  système tentera alors de calculer le produit
	  délai-bande passante pour chaque connexion et
	  limitera la quantité de données en attente
	  à la quantité juste nécessaire au
	  maintient d'un flux de sortie optimal.</p><p>Cette fonctionnalité est utile si vous diffusez
	  des données par l'intermédiaire de modems, de
	  connexions Ethernet Gigabit, ou même de liaisons hauts
	  débits WAN (ou toute autre liaison avec un produit
	  délai-bande passante élevé), tout
	  particulièrement si vous utilisez également le
	  dimensionnement des fenêtres d'émission ou que
	  vous avez configuré une fenêtre
	  d'émission importante.  Si vous activez cette option,
	  vous devriez également vous assurer que
	  <code class="varname">net.inet.tcp.inflight.debug</code> est
	  positionnée à <code class="literal">0</code>
	  (désactive le débogage), et pour une
	  utilisation en production, fixer
	  <code class="varname">net.inet.tcp.inflight.min</code> à au
	  moins <code class="literal">6144</code> peut être
	  bénéfique.  Notez, cependant,  que fixer des
	  minima élevés peut désactiver la
	  limitation de bande passante selon la liaison.  La fonction
	  de limitation diminue la quantité de données
	  accumulées dans les files d'attente
	  intermédiaire de routage et de commutation, et
	  diminue également la quantité de
	  données présentes dans les files d'attente de
	  l'interface de la machine locale.  Avec moins de paquets
	  dans les files d'attente, les connexions interactives, tout
	  particulièrement sur des modems lents, seront en
	  mesure de fonctionner avec des <span class="emphasis"><em>temps
	  d'aller-retour</em></span> plus faible.  Mais cette
	  fonctionnalité n'affecte que la transmission de
	  données (transmission côté serveur).
	  Ceci n'a aucun effet sur la réception de
	  données (téléchargement).
	</p><p>Modifier <code class="varname">net.inet.tcp.inflight.stab</code>
	  n'est <span class="emphasis"><em>pas</em></span> recommandé.  Ce
	  paramètre est fixé par défaut à
	  la valeur 20, représentant au maximum 2 paquets
	  ajoutés à la fenêtre de calcul du
	  produit délai-bande passante.  La fenêtre
	  supplémentaire est nécessaire pour stabiliser
	  l'algorithme et améliorer la réponse aux
	  changements de conditions, mais il peut en résulter
	  des temps de <span class="quote">« <span class="quote">ping</span> »</span> plus élevés
	  sur les liaisons lentes (mais cependant inférieurs
	  à ce que vous obtiendriez sans l'algorithme de
	  limitation).  Dans de tels cas, vous pouvez essayer de
	  réduire ce paramètre à 15, 10, ou 5, et
	  vous pouvez avoir à réduire le
	  paramètre
	  <code class="varname">net.inet.tcp.inflight.min</code> (par exemple
	  à 3500) pour obtenir l'effet désiré.
	  Ces paramètres ne doivent être réduits
	  qu'en dernier ressort.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75280080"></a>12.13.3. Mémoire virtuelle</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75280720"></a>12.13.3.1. <code class="varname">kern.maxvnodes</code></h4></div></div></div><p>Un vnode est la représentation interne d'un
	  fichier ou d'un répertoire.  Augmenter le nombre de
	  vnodes disponibles pour le système d'exploitation
	  diminue les accès disque.  Cela est normalement
	  géré par le système d'exploitation et
	  n'a pas besoin d'être modifié.  Dans certains
	  cas où les accès aux disques sont un goulot
	  d'étranglement pour le système et que ce
	  dernier est à cours de vnodes, ce nombre aura besoin
	  d'être augmenté.  La quantité de RAM
	  libre et inactive sera prise en compte.</p><p>Pour connaître le nombre de vnodes actuellement
	  utilisés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl vfs.numvnodes</code></strong>
vfs.numvnodes: 91349</pre><p>Pour connaître le maximum de vnodes utilisables:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl kern.maxvnodes</code></strong>
kern.maxvnodes: 100000</pre><p>Si l'utilisation actuelle des vnodes est proche du
	  maximum, augmenter de 1000 <code class="varname">kern.maxvnodes</code>
	  est probablement une bonne idée.  Gardez un oeil sur
	  le nombre <code class="varname">vfs.numvnodes</code>.  S'il approche
	  à nouveau le maximum,
	  <code class="varname">kern.maxvnodes</code> devra être
	  augmenté de manière plus conséquente.
	  Une modification dans votre utilisation de la mémoire
	  devrait être visible dans <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a>.  Une plus
	  grande quantité de mémoire devrait être
	  annoncée comme active.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="adding-swap-space"></a>12.14. Ajouter de l'espace de pagination</h2></div></div></div><p>Peu importe comment vous l'avez pensé, parfois un
      système ne fonctionne pas comme prévu.  Si vous
      trouvez que vous avez besoin de plus d'espace de pagination, il
      est assez simple d'en rajouter.  Vous avez trois manières
      d'augmenter votre espace de pagination: ajouter un nouveau
      disque dur, activer la pagination sur NFS, et créer un fichier
      de pagination sur une partition existante.</p><p>Pour des informations sur comment chiffrer l'espace de
      pagination, quelles options existent pour mener à bien
      cette tâche et pourquoi on devrait le faire, veuillez vous
      référer à la <a class="xref" href="#swap-encrypting" title="19.17. Chiffrage de l'espace de pagination">Section 19.17, « Chiffrage de l'espace de pagination »</a>
      du Manuel.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="new-drive-swap"></a>12.14.1. Espace de pagination sur un nouveau disque dur</h3></div></div></div><p>La meilleur façon d'ajouter de l'espace de pagination,
	bien sûr, est d'utiliser ceci comme excuse pour ajouter un
	autre disque dur.  Vous pouvez toujours utiliser un autre
	disque après tout.  Si vous pouvez faire cela, allez relire la
	discussion sur l'espace de pagination dans la <a class="xref" href="#configtuning-initial" title="12.2. Configuration initiale">Section 12.2, « Configuration initiale »</a>
	du Manuel pour des suggestions sur la meilleure façon
	d'arranger votre espace de pagination.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="nfs-swap"></a>12.14.2. Espace de pagination sur NFS</h3></div></div></div><p>L'espace de pagination sur NFS n'est recommandé que si
	vous n'avez pas de disque dur local sur lequel avoir l'espace
	de pagination; la pagination sur NFS sera limitée
	par la bande passante du réseau et sera un fardeau
	supplémentaire pour le serveur NFS.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="create-swapfile"></a>12.14.3. Fichiers de pagination</h3></div></div></div><p>Vous pouvez créer un fichier d'une taille
	spécifique pour	l'utiliser comme fichier de pagination.
	Dans notre exemple nous utiliserons un fichier de 64MO appelé
	<code class="filename">/usr/swap0</code>.  Vous pouvez, bien sûr,
	utiliser le nom de votre choix.</p><div class="example"><a id="idp75298384"></a><div class="example-title">Exemple 12.1. Créer un fichier de pagination sous FreeBSD</div><div class="example-contents"><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Assurez-vous que votre configuration de noyau inclut
	    le pilote de disque mémoire (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>).  Il se
	    trouve par défaut dans le noyau
	    <code class="filename">GENERIC</code>.</p><pre class="programlisting">device   md   # Memory "disks"</pre></li><li class="listitem"><p>Créez un fichier de pagination
	    (<code class="filename">/usr/swap0</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/usr/swap0 bs=1024k count=64</code></strong></pre></li><li class="listitem"><p>Fixez les bonnes permissions sur
	    <code class="filename">/usr/swap0</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chmod 0600 /usr/swap0</code></strong></pre></li><li class="listitem"><p>Activez le fichier de pagination dans
	    <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">swapfile="/usr/swap0"   # Set to name of swapfile if aux swapfile desired.</pre></li><li class="listitem"><p>Redémarrez la machine ou activez directement le
	    fichier de pagination:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /usr/swap0 -u 0 &amp;&amp; swapon /dev/md0</code></strong></pre></li></ol></div></div></div><br class="example-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="acpi-overview"></a>12.15. Gestion de l'énergie et des ressources</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hiten</span> <span class="surname">Pandya</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><p>Il est important d'utiliser les ressources
      matérielles d'une manière efficace.  Avant
      l'apparition de l'<acronym class="acronym">ACPI</acronym>, il était
      difficile pour les systèmes d'exploitation de
      gérer l'utilisation de l'alimentation et la température
      d'un système.  Le matériel était
      géré par le <acronym class="acronym">BIOS</acronym> et donc
      l'utilisateur avait moins de contrôle et de
      visibilité sur le paramétrage de la gestion de
      l'énergie.  Une configuration limitée était
      accessible via
      l'<span class="emphasis"><em>Advanced Power Management (APM)</em></span>.
      La gestion de l'énergie et des ressources est un
      des éléments clés d'un système
      d'exploitation moderne.  Par exemple, vous pourrez vouloir qu'un
      système d'exploitation surveille certaines limites (et
      éventuellement vous alerte), au cas où la
      température de votre système augmente de façon
      inattendue.</p><p>Dans cette section,  nous fournirons une information
      complète au sujet de l'<acronym class="acronym">ACPI</acronym>.  Il sera
      fait référence à des documents
      supplémentaires en fin de section pour plus de
      détails.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-intro"></a>12.15.1. Qu'est-ce que l'ACPI?</h3></div></div></div><a id="idp75357136" class="indexterm"></a><a id="idp75357904" class="indexterm"></a><p>L'<span class="quote">« <span class="quote">interface de configuration et d'alimentation
	avancée</span> »</span> (<acronym class="acronym">ACPI</acronym>, Advanced
	Configuration and Power Interface) est une norme créée
	par un ensemble de constructeurs pour fournir une interface
	standard à la gestion des ressources et de l'énergie.
	C'est un élément clé dans le contrôle
	et la configuration par le système d'exploitation de
	de la gestion d'énergie, i.e., il permet plus de contrôle
	et flexibilité au système d'exploitation.  Les
	systèmes modernes ont &#8220;repoussé&#8221; les limites
	des interfaces &#8220;Plug and Play&#8221; antérieures
	à
	l'apparition de l'<acronym class="acronym">ACPI</acronym>.
	L'<acronym class="acronym">ACPI</acronym> est le descendant direct de
	l'<acronym class="acronym">APM</acronym> (Advanced Power Management - gestion
	avancée de l'énergie).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-old-spec"></a>12.15.2. Les imperfections de la gestion avancée de
	l'énergie (APM)</h3></div></div></div><p>Le système de <span class="emphasis"><em>gestion avancée de
	l'énergie (APM)</em></span> gère l'utilisation de
	l'énergie par un système en fonction de son
	activité.  Le BIOS APM est fourni par le fabricant (du
	système) et est spécifique à la plateforme
	matérielle.  Un pilote APM au niveau du système
	d'exploitation gère l'accès à
	l'<span class="emphasis"><em>interface logicielle APM</em></span> qui autorise la
	gestion des niveaux de consommation.  L'APM devrait être
	toujours utilisé pour les systèmes
	fabriqués en ou avant 2000.</p><p>L'APM présente quatre problèmes majeurs.  Tout
	d'abord la gestion de l'énergie est effectuée par le
	BIOS (spécifique au constructeur), et le système
	d'exploitation n'en a aucune connaissance.  Un exemple de ce
	problème, est lorsque l'utilisateur fixe des valeurs pour
	le temps d'inactivité d'un disque dur dans le BIOS APM, qui
	une fois dépassé, provoque l'arrêt du disque
	(par le BIOS) sans le consentement du système
	d'exploitation.  Deuxièmement, la logique de l'APM est
	interne au BIOS, et agit indépendamment du système
	d'exploitation.  Cela signifie que les utilisateurs ne peuvent
	corriger les problèmes de leur BIOS APM qu'en flashant un
	nouveau BIOS; c'est une opération dangereuse, qui si elle
	échoue peut laisser le système dans un état
	irrécupérable.  Troisièmement, l'APM est une
	technologie spécifique au constructeur, ce qui veut dire
	qu'il y a beaucoup de redondances (duplication des efforts) et de
	bogues qui peuvent être trouvées dans le BIOS d'un
	constructeur, et qui peuvent ne pas être corrigées
	dans d'autres BIOS.  Et pour terminer, le dernier problème
	est le fait que le BIOS APM n'a pas suffisamment d'espace pour
	implémenter une politique sophistiquée de gestion de
	l'énergie, ou une politique qui peut s'adapter parfaitement
	aux besoins de la machine.</p><p>Le <span class="emphasis"><em>BIOS Plug and Play (PNPBIOS)</em></span>
	n'était pas fiable dans de nombreuses situations.  Le
	PNPBIOS est une technologie 16 bits, le système
	d'exploitation doit utiliser une émulation 16 bits afin de
	faire l'<span class="quote">« <span class="quote">interface</span> »</span> avec les méthodes
	PNPBIOS.</p><p>Le pilote <acronym class="acronym">APM</acronym> FreeBSD est documenté
	dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=apm&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">apm</span>(4)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="acpi-config"></a>12.15.3. Configurer l'<acronym class="acronym">ACPI</acronym></h3></div></div></div><p>Le pilote <code class="filename">acpi.ko</code> est par défaut
	chargé par le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a> au démarrage et ne devrait
	<span class="emphasis"><em>pas</em></span> être compilé dans
	le noyau.  La raison derrière cela est que les modules
	sont plus facile à manipuler, par exemple pour passer à
	une autre version du module <code class="filename">acpi.ko</code> sans
	avoir à recompiler le noyau.  Cela présente l'avantage
	de rendre les tests aisés.  Une autre raison est que lancer
	l'<acronym class="acronym">ACPI</acronym> après qu'un système ait
	terminé son lancement donne souvent lieu à des
	dysfonctionnements.  Si des problèmes surviennent, vous pouvez
	désactiver l'<acronym class="acronym">ACPI</acronym>.  Ce pilote ne devrait
	et ne peut être déchargé car le bus
	système l'utilise pour différentes
	intéraction avec le matériel.
	L'<acronym class="acronym">ACPI</acronym> peut être déactivé
	en ajoutant <code class="literal">hint.acpi.0.disabled="1"</code> dans
	le fichier <code class="filename">/boot/loader.conf</code> ou
	directement à l'invite du chargeur (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'<acronym class="acronym">ACPI</acronym> et l'<acronym class="acronym">APM</acronym>
	  ne peuvent coexister et devraient être utilisé
	  séparément.  Le dernier chargé
	  s'arrêtera s'il détecte l'autre en
	  fonctionnement.</p></div><p>L'<acronym class="acronym">ACPI</acronym> peut
	être utilisé pour mettre en veille un système avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>, les options <code class="option">-s</code> et
	<code class="literal">1-5</code>.  La plupart des utilisateurs n'auront
	besoin que de <code class="literal">1</code> ou <code class="literal">3</code>
	(système suspendu en RAM).  L'option
	<code class="literal">5</code> provoquera un arrêt de l'alimentation
	par logiciel, effet identique à un:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>halt -p</code></strong></pre><p>D'autres options sont disponibles via <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.
	Consultez les pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpiconf&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpiconf</span>(8)</span></a>
	pour plus d'informations.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ACPI-debug"></a>12.16. Utiliser et déboguer l'<acronym class="acronym">ACPI</acronym>
      sous FreeBSD</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Nate</span> <span class="surname">Lawson</span></span>. </span></div><div><span class="authorgroup">Avec la collaboration de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Peter</span> <span class="surname">Schultz</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp75395792" class="indexterm"></a><p>L'<acronym class="acronym">ACPI</acronym> est une nouvelle méthode de
      recherche des périphériques, de gestion de
      l'énergie, et fourni un accès standardisé
      à différents matériels gérés
      auparavant par le <acronym class="acronym">BIOS</acronym>.  Des progrès ont
      été fait vers un fonctionnement de
      l'<acronym class="acronym">ACPI</acronym> sur tous les systèmes, mais des
      bogues dans le <span class="quote">« <span class="quote">bytecode</span> »</span> du <em class="firstterm">langage machine
      <acronym class="acronym">ACPI</acronym></em>
      (<em class="firstterm"><acronym class="acronym">ACPI</acronym> Machine
      Language</em>&#8212;<acronym class="acronym">AML</acronym>), des
      imperfections dans les sous-systèmes du noyau FreeBSD, et des
      bogues dans l'interpréteur <acronym class="acronym">ACPI-CA</acronym>
      d'<span class="trademark">Intel</span>® continuent d'apparaître.</p><p>Ce document est destiné à vous permettre d'aider
      les développeurs du système <acronym class="acronym">ACPI</acronym>
      sous FreeBSD à identifier la cause originelle des
      problèmes que vous observez et à déboguer et
      développer une solution.  Merci de lire ce document et nous
      espérons pouvoir résoudre les problèmes de
      votre système.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-submitdebug"></a>12.16.1. Soumettre des informations de débogage</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avant de soumettre un problème, assurez-vous
	  d'utiliser la dernière version de votre
	  <acronym class="acronym">BIOS</acronym>, et si elle est disponible, la
	  dernière version du firmware du contrôleur
	  utilisé.</p></div><p>Pour ceux désirant soumettre directement un
	problème, veuillez faire parvenir les informations
	suivantes à la liste <a class="link" href="mailto:freebsd-acpi@FreeBSD.org" target="_top">freebsd-acpi@FreeBSD.org</a>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Description du comportement défectueux, en
	    ajoutant le type et le modèle du système et tout
	    ce qui peut causer l'apparition du bogue.  Notez
	    également le plus précisément possible
	    quand le bogue a commencé à se manifester s'il
	    est nouveau.</p></li><li class="listitem"><p>La sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> après un <code class="command">boot
	    -v</code>, y compris tout message
	    généré lors de la manifestation du
	    bogue.</p></li><li class="listitem"><p>La sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> après un <code class="command">boot
	    -v</code> avec
	    l'<acronym class="acronym">ACPI</acronym> désactivé, si cette
	    désactivation corrige le problème.</p></li><li class="listitem"><p>La sortie de <code class="command">sysctl hw.acpi</code>.  C'est
	    également un bon moyen de déterminer quelles
	    fonctionnalités sont offertes par votre
	    système.</p></li><li class="listitem"><p>Une <acronym class="acronym">URL</acronym> où peut être
	    trouvé votre <em class="firstterm">code source
	    <acronym class="acronym">ACPI</acronym></em> (<acronym class="acronym">ACPI</acronym>
	    Source Language&#8212;<acronym class="acronym">ASL</acronym>).  N'envoyez pas
	    directement l'<acronym class="acronym">ASL</acronym> sur la liste de
	    diffusion, ce fichier peut être très gros.  Vous
	    pouvez générer une copie de votre
	    <acronym class="acronym">ASL</acronym> en exécutant la commande
	    suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>acpidump -dt &gt; name-system.asl</code></strong></pre><p>(Remplacez <em class="replaceable"><code>name</code></em> par votre
	    nom d'utilisateur et <em class="replaceable"><code>system</code></em> par
	    celui du constructeur/modèle.  Par exemple:
	    <code class="filename">njl-FooCo6000.asl</code>)</p></li></ul></div><p>La plupart des développeurs lisent la liste
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">liste de diffusion à propos de la branche FreeBSD-CURRENT</a> mais soumettez également les problèmes
	rencontrés à la liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a> afin
	d'être sûr qu'ils seront vus.  Soyez patient, nous
	avons tous un travail à plein temps qui nous attend
	ailleurs.  Si votre bogue n'est pas immédiatement apparent,
	nous vous demanderons probablement de soumettre un
	<acronym class="acronym">PR</acronym> par l'intermédiaire de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>.  Quand vous remplirez un <acronym class="acronym">PR</acronym>,
	veillez à inclure les mêmes informations que celles
	précisées précédemment.  Cela nous aidera
	à cerner et à résoudre le problème.
	N'envoyez pas de <acronym class="acronym">PR</acronym> sans avoir contacté
	auparavant la liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a> étant donné que
	nous utilisons les <acronym class="acronym">PR</acronym>s comme pense-bêtes
	de problèmes existants, et non pas comme mécanisme
	de rapport.  Il se peut que votre problème puisse avoir
	déjà été signalé par quelqu'un
	d'autre.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-background"></a>12.16.2. Information de fond</h3></div></div></div><a id="idp75427152" class="indexterm"></a><p>L'<acronym class="acronym">ACPI</acronym> est présent sur tous les
	ordinateurs modernes compatibles avec l'une des architectures ia32
	(x86), ia64 (Itanium), et amd64 (AMD).  La norme complète
	définit des fonctionnalités comme la gestion des
	performances du <acronym class="acronym">CPU</acronym>, des contrôles des
	niveaux d'énergie, des zones de températures, divers
	systèmes d'utilisation des batteries, des contrôleurs
	intégrés, et l'énumération du bus.  La
	plupart des systèmes n'implémentent pas
	l'intégralité des fonctionnalités de la
	norme.  Par exemple, un ordinateur de bureau n'implémentera
	généralement que la partie énumération
	de bus alors qu'un ordinateur portable aura également le
	support de la gestion du refroidissement et de la batterie.  Les
	ordinateurs portables disposent également des modes de mise
	en veille et de réveil, avec toute la complexité qui
	en découle.</p><p>Un système compatible <acronym class="acronym">ACPI</acronym> dispose
	de divers composants.  Les fabricants de <acronym class="acronym">BIOS</acronym>
	et de circuits fournissent des tables de description
	(<acronym class="acronym">FADT</acronym>) fixes en mémoire qui
	définissent des choses comme la table
	<acronym class="acronym">APIC</acronym> (utilisée par les systèmes
	<acronym class="acronym">SMP</acronym>), les registres de configuration, et des
	valeurs de configuration simples.  De plus, est fournie une table
	de <span class="quote">« <span class="quote">bytecode</span> »</span> (la <em class="firstterm">table
	différenciée de description du
	système</em>&#8212;<em class="firstterm">Differentiated System
	Description Table</em> <acronym class="acronym">DSDT</acronym>) qui
	spécifie sous forme d'une arborescence l'espace des noms
	des périphériques et des méthodes.</p><p>Le pilote <acronym class="acronym">ACPI</acronym> doit analyser les
	tables, implémenter un interpréteur pour le
	<span class="quote">« <span class="quote">bytecode</span> »</span>, et modifier les pilotes de
	périphériques et le noyau pour qu'ils
	acceptent des informations en provenance du
	sous-système <acronym class="acronym">ACPI</acronym>.  Pour FreeBSD, <span class="trademark">Intel</span>®
	fourni un interpréteur (<acronym class="acronym">ACPI-CA</acronym>) qui
	est partagé avec Linux et NetBSD.  L'emplacement du code
	source de l'interpréteur <acronym class="acronym">ACPI-CA</acronym> est
	<code class="filename">src/sys/contrib/dev/acpica</code>.  Le code
	<span class="quote">« <span class="quote">glu</span> »</span> permettant à
	<acronym class="acronym">ACPI-CA</acronym> de fonctionner sous FreeBSD se trouve
	dans <code class="filename">src/sys/dev/acpica/Osd</code>.  Et enfin, les
	pilotes qui gèrent les différents
	périphériques <acronym class="acronym">ACPI</acronym> se trouvent
	dans <code class="filename">src/sys/dev/acpica</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-comprob"></a>12.16.3. Problèmes courants</h3></div></div></div><a id="idp75443408" class="indexterm"></a><p>Pour un fonctionnement correct de
	l'<acronym class="acronym">ACPI</acronym>, il faut que toutes les parties
	fonctionnent correctement.  Voici quelques problèmes
	courants, par ordre de fréquence d'apparition, et
	quelques contournements ou corrections possibles.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75445328"></a>12.16.3.1. Problèmes avec la souris</h4></div></div></div><p>Dans certains cas le réveil après une mise
	  en veille sera à l'origine d'un dysfonctionnement de
	  la souris.  Une solution connue est d'ajouter la ligne
	  <code class="literal">hint.psm.0.flags="0x3000"</code> au fichier
	  <code class="filename">/boot/loader.conf</code>.  Si cela ne
	  fonctionne pas, pensez à envoyer un rapport de bogue
	  comme décrit plus haut.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75447248"></a>12.16.3.2. Mise en veille/réveil</h4></div></div></div><p>L'<acronym class="acronym">ACPI</acronym> dispose de trois modes
	  de mise en veille en <acronym class="acronym">RAM</acronym>
	  (<acronym class="acronym">STR</acronym>&#8212;Suspend To RAM),
	  <code class="literal">S1</code> à <code class="literal">S3</code>, et un
	  mode de mise en veille vers le disque dur
	  (<code class="literal">STD</code>&#8212;Suspend To Disk), appelé
	  <code class="literal">S4</code>.  Le mode <code class="literal">S5</code> est un
	  arrêt <span class="quote">« <span class="quote">soft</span> »</span> et est le mode dans lequel se
	  trouve votre système quand il est branché mais
	  pas allumé.  Le mode <code class="literal">S4</code> peut
	  être implémenté de deux manières
	  différentes.  Le mode
	  <code class="literal">S4</code><acronym class="acronym">BIOS</acronym> est une mise en
	  veille vers le disque assistée par le
	  <acronym class="acronym">BIOS</acronym>.  Le mode
	  <code class="literal">S4</code><acronym class="acronym">OS</acronym> est
	  implémenté intégralement par le
	  système d'exploitation.</p><p>Commencez par examiner la sortie de
	  <code class="command">sysctl hw.acpi</code> à la recherche
	  d'éléments concernant les modes de mise en
	  veille.  Voici les résultats pour un Thinkpad:</p><pre class="screen">hw.acpi.supported_sleep_state: S3 S4 S5
hw.acpi.s4bios: 0</pre><p>Cela signifie que nous pouvons utiliser
	  <code class="command">acpiconf -s</code> pour tester les modes
	  <code class="literal">S3</code>,
	  <code class="literal">S4</code><acronym class="acronym">OS</acronym>, et
	  <code class="literal">S5</code>.  Si <code class="option">s4bios</code>
	  était égal à <code class="literal">1</code>, nous
	  disposerions d'un support
	  <code class="literal">S4</code><acronym class="acronym">BIOS</acronym> à la place
	  de <code class="literal">S4</code><acronym class="acronym">OS</acronym>.</p><p>Quand vous testez la mise en veille et le réveil,
	  commencez avec le mode <code class="literal">S1</code>, pour voir s'il
	  est supporté.  Ce mode doit fonctionner dans la plupart
	  des cas puisqu'il nécessite peu de support.  Le mode
	  <code class="literal">S2</code> n'est pas implémenté, mais
	  si vous en disposez, il est similaire au mode
	  <code class="literal">S1</code>.  La chose suivante à essayer est
	  le mode <code class="literal">S3</code>.  C'est le mode
	  <acronym class="acronym">STR</acronym> le plus avancé et il
	  nécessite un support du pilote important pour
	  réinitialiser correctement votre matériel.  Si
	  vous avez des problèmes au réveil de la machine,
	  n'hésitez pas à contacter la liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a>
	  mais ne vous attendez pas à ce que le problème
	  soit résolu puisqu'il y a de nombreux
	  pilotes/matériels qui nécessitent plus de tests
	  et de développement.</p><p>Pour isoler le problème, retirez du noyau tous les
	  pilotes de périphériques possibles.  Si cela
	  fonctionne, vous pouvez alors identifier le pilote fautif en
	  chargeant les pilotes un à un jusqu'à
	  l'apparition du problème.  Généralement
	  les pilotes binaires comme <code class="filename">nvidia.ko</code>, les
	  pilotes d'affichage X11, ou les pilotes USB seront victimes de
	  la plupart des problèmes tandis que ceux concernant les
	  interfaces Ethernet fonctionneront normalement.  Si vous
	  pouvez charger/décharger les pilotes de
	  périphériques correctement, vous pouvez
	  automatiser cela en ajoutant les commandes appropriées
	  dans les fichiers <code class="filename">/etc/rc.suspend</code> et
	  <code class="filename">/etc/rc.resume</code>.  Il y a un exemple en
	  commentaire pour décharger ou charger un pilote.
	  Essayez de fixer <code class="option">hw.acpi.reset_video</code> à
	  zéro (<code class="literal">0</code>) si votre affichage est
	  corrompu après un réveil de la machine.  Essayez
	  des valeurs plus grandes ou plus faibles pour
	  <code class="option">hw.acpi.sleep_delay</code> pour voir si cela
	  aide.</p><p>Une autre méthode est d'essayer de charger une
	  distribution Linux récente avec le support
	  <acronym class="acronym">ACPI</acronym> et tester la mise en veille et le
	  réveil sur le même matériel.  Si cela
	  fonctionne sous Linux, c'est probablement donc un
	  problème de pilotes FreeBSD et déterminer quel
	  pilote est responsable des dysfonctionnements nous aidera
	  à corriger le problème.  Notez que les personnes
	  qui maintiennent l'<acronym class="acronym">ACPI</acronym> sous FreeBSD ne
	  s'occupe pas généralement des autres pilotes de
	  périphériques (comme le son, le système
	  <acronym class="acronym">ATA</acronym>, etc.), aussi tout rapport concernant
	  un problème de pilote devrait probablement en fin de
	  compte être posté sur la liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a>
	  et communiqué au responsable du pilote.  Si vous vous
	  sentez une âme d'aventurier, commencez à ajouter
	  des <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printf&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">printf</span>(3)</span></a>s de débogage dans un pilote
	  problématique pour déterminer à quel
	  moment dans sa fonction de réveil il se bloque.</p><p>Enfin, essayez de désactiver
	  l'<acronym class="acronym">ACPI</acronym> et d'activer l'<acronym class="acronym">APM</acronym>
	  à la place, pour voir si la mise en veille et le
	  réveil fonctionnent avec l'<acronym class="acronym">APM</acronym>, tout
	  particulièrement dans le cas de matériel ancien
	  (antérieur à 2000).  Cela prend du temps aux
	  constructeurs de mettre en place le support
	  <acronym class="acronym">ACPI</acronym> et le matériel ancien aura
	  sûrement des problèmes de <acronym class="acronym">BIOS</acronym>
	  avec l'<acronym class="acronym">ACPI</acronym>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75475024"></a>12.16.3.3. Blocages du système (temporaires ou permanents)</h4></div></div></div><p>La plupart des blocages système sont le
	  résultat d'une perte d'interruptions ou d'une
	  tempête d'interruptions.  Les circuits ont beaucoup de
	  problèmes en fonction de la manière dont le
	  <acronym class="acronym">BIOS</acronym> configure les interruptions avant le
	  démarrage, l'exactitude de la table
	  <acronym class="acronym">APIC</acronym> (<acronym class="acronym">MADT</acronym>), et le routage
	  du <em class="firstterm">System Control Interrupt</em>
	  (<acronym class="acronym">SCI</acronym>).</p><a id="idp75490384" class="indexterm"></a><p>Les tempêtes d'interruptions peuvent être
	  distinguées des pertes d'interruptions en
	  contrôlant la sortie de la commande <code class="command">vmstat
	  -i</code> en examinant la ligne mentionnant
	  <code class="literal">acpi0</code>.  Si le compteur s'incrémente
	  plusieurs fois par seconde, vous êtes victime d'une
	  tempête d'interruptions.  Si le système semble
	  bloqué, essayez de basculer sous <acronym class="acronym">DDB</acronym>
	  (<span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>ALT</strong></span>+<span class="keycap"><strong>ESC</strong></span> sous la
	  console) et tapez <code class="literal">show interrupts</code>.</p><a id="idp75494352" class="indexterm"></a><p>Votre plus grand espoir quand vous faites face à
	  des problèmes d'interruptions est d'essayer de
	  désactiver le support <acronym class="acronym">APIC</acronym> avec la
	  ligne <code class="literal">hint.apic.0.disabled="1"</code> dans le
	  fichier <code class="filename">loader.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75497168"></a>12.16.3.4. Paniques</h4></div></div></div><p>Les paniques sont relativement rares dans le cas de
	  l'<acronym class="acronym">ACPI</acronym> et sont au sommet des
	  priorités en matière de problèmes
	  à corriger.  Le premier point est d'isoler les
	  étapes nécessaires à la reproduction de
	  la panique (si possible) et d'obtenir une trace de
	  débogage.  Suivez l'aide sur l'activation de
	  <code class="literal">options DDB</code> et la configuration d'une
	  console série (lire la <a class="xref" href="#serialconsole-ddb" title="26.6.1.1. Entering the DDB Debugger from the Serial Line">Section 26.6.1.1, « Entering the DDB Debugger from the Serial Line »</a>) ou la configuration d'une
	  partition <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>.  Vous pouvez obtenir une trace de
	  débogage sous <acronym class="acronym">DDB</acronym> avec la commande
	  <code class="literal">tr</code>.  Si vous devez recopier à la
	  main la trace de débogage, assurez-vous de relever les
	  cinq dernières lignes et les cinq premières
	  ligne de la trace.</p><p>Ensuite essayez d'isoler le problème en
	  démarrant avec l'<acronym class="acronym">ACPI</acronym>
	  désactivé.  Si cela fonctionne, vous pouvez isoler
	  le sous-système <acronym class="acronym">ACPI</acronym> en utilisant
	  différentes valeurs pour l'option
	  <code class="option">debug.acpi.disable</code>.  Consultez la page de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> pour des exemples.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75503568"></a>12.16.3.5. Le système redémarre après une mise
	  en veille ou un arrêt</h4></div></div></div><p>Tout d'abord, essayez de fixer
	  <code class="literal">hw.acpi.disable_on_poweroff="0"</code> dans
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>.  Cela empêche
	  l'<acronym class="acronym">ACPI</acronym> de désactiver divers
	  événements lors du processus d'arrêt.
	  Certains systèmes ont besoin d'avoir cette valeur
	  fixée à <code class="literal">1</code> (valeur par
	  défaut) pour la même raison.  Cela corrige
	  généralement le problème d'un
	  système démarrant spontanément
	  après une mise en veille ou un arrêt.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75514960"></a>12.16.3.6. Autres problèmes</h4></div></div></div><p>Si vous rencontrez d'autres problèmes avec
	  l'<acronym class="acronym">ACPI</acronym> (impossible de travailler avec une
	  station d'amarrage, périphériques non
	  détectés, etc.), veuillez envoyer un courrier
	  descriptif à la liste de diffusion; cependant, certains
	  de ces problèmes peuvent être relatifs à
	  des partie incomplètes du sous-système
	  <acronym class="acronym">ACPI</acronym> et qui pourront prendre du temps
	  à être implémentées.  Soyez patient
	  et prêt à tester les correctifs que nous pourront
	  éventuellement vous envoyer.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-aslanddump"></a>12.16.4. <acronym class="acronym">ASL</acronym>, <code class="command">acpidump</code>, et
        <acronym class="acronym">IASL</acronym></h3></div></div></div><a id="idp75518672" class="indexterm"></a><p>Le problème le plus courant est le fait que les
	constructeurs fournissent des <span class="quote">« <span class="quote">bytecodes</span> »</span>
	erronés (ou plus simplement bogués!).  Cela se
	manifeste généralement sur la console par des
	messages du noyau du type:</p><pre class="screen">ACPI-1287: *** Error: Method execution failed [\\_SB_.PCI0.LPC0.FIGD._STA] \\
(Node 0xc3f6d160), AE_NOT_FOUND</pre><p>La plupart du temps vous pouvez corriger ces problèmes en
	mettant à jour votre <acronym class="acronym">BIOS</acronym> avec la
	dernière version disponible.  La majorité des
	messages sur la console sont inoffensifs mais si vous avez
	d'autres problèmes comme l'état de la batterie qui
	ne fonctionne pas, ce sont de bonnes raisons pour commencer
	à jeter un oeil à ces problèmes dans
	l'<acronym class="acronym">AML</acronym>.  Le <span class="quote">« <span class="quote">bytecode</span> »</span>, connu
	sous le nom d'<acronym class="acronym">AML</acronym>, est compilé
	à partir d'un langage source appelé
	<acronym class="acronym">ASL</acronym>.  L'<acronym class="acronym">AML</acronym> se trouve dans
	une table appelée <acronym class="acronym">DSDT</acronym>.  Pour obtenir
	une copie de votre <acronym class="acronym">ASL</acronym>, utilisez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpidump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpidump</span>(8)</span></a>.  Vous devriez utiliser de paire les options
	<code class="option">-t</code> (qui affiche le contenu des tables fixes) et
	<code class="option">-d</code> (qui désassemble
	l'<acronym class="acronym">AML</acronym> en <acronym class="acronym">ASL</acronym>).  Consultez
	la section <a class="link" href="#ACPI-submitdebug" title="12.16.1. Soumettre des informations de débogage">Soumettre des
	informations de déboguage</a> pour un exemple de
	syntaxe.</p><p>Le tout premier test que vous pouvez effectuer est
	de recompiler votre <acronym class="acronym">ASL</acronym> à la recherche
	d'erreurs.  Les avertissements peuvent être
	généralement ignorés mais les erreurs sont
	des bogues qui normalement empêchent
	l'<acronym class="acronym">ACPI</acronym> de fonctionner correctement.  Pour
	recompiler votre <acronym class="acronym">ASL</acronym>, utilisez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>iasl your.asl</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-fixasl"></a>12.16.5. Correction de votre <acronym class="acronym">ASL</acronym></h3></div></div></div><a id="idp75535184" class="indexterm"></a><p>A long terme, notre objectif est que tout le monde puisse
	avoir un système <acronym class="acronym">ACPI</acronym> fonctionnant
	sans aucune intervention de l'utilisateur.  Actuellement, nous
	sommes toujours en train de développer des solutions pour
	contourner les erreurs courantes faites par les fabricants de
	<acronym class="acronym">BIOS</acronym>.  L'interpréteur de <span class="trademark">Microsoft</span>®
	(<code class="filename">acpi.sys</code> et
	<code class="filename">acpiec.sys</code>) ne contrôle pas de
	façon stricte la conformité avec la norme, et par
	conséquent de nombreux fabricants de
	<acronym class="acronym">BIOS</acronym> qui testent l'<acronym class="acronym">ACPI</acronym>
	uniquement sous <span class="trademark">Windows</span>® ne corrigent donc jamais leur
	<acronym class="acronym">ASL</acronym>.  Nous espérons poursuivre
	à identifier et documenter avec exactitude les
	comportements non-standards autorisés par
	l'interpréteur de <span class="trademark">Microsoft</span>® et les reproduire de
	manière à permettre à FreeBSD de fonctionner
	sans obliger les utilisateurs à corriger leur
	<acronym class="acronym">ASL</acronym>.  Comme solution et pour nous aider
	à identifier ces comportements, vous pouvez corriger
	manuellement votre <acronym class="acronym">ASL</acronym>.  Si cela fonctionne
	pour vous, veuillez nous envoyer un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> de l'ancien et
	du nouveau <acronym class="acronym">ASL</acronym> de façon à ce
	que nous puissions corriger le comportement incorrect dans
	<acronym class="acronym">ACPI-CA</acronym> et rendre donc inutile à
	l'avenir votre correctif.</p><a id="idp75547472" class="indexterm"></a><p>Voici une liste des messages d'erreur courants, leur cause,
	et comment les corriger:</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75549008"></a>12.16.5.1. Dépendances _OS</h4></div></div></div><p>Certains <acronym class="acronym">AML</acronym>s supposent que le monde
	  n'est fait de que différentes versions de <span class="trademark">Windows</span>®.
	  Vous pouvez demander à FreeBSD de s'annoncer comme
	  étant n'importe quel système d'exploitation pour
	  voir si cela corrige les problèmes que vous pouvez
	  rencontrer.  Une manière simple de faire cela est de
	  fixer la variable <code class="literal">hw.acpi.osname="Windows
	  2001"</code> dans <code class="filename">/boot/loader.conf</code> ou
	  avec une autre chaîne de caractères que vous
	  trouvez dans l'<acronym class="acronym">ASL</acronym>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75552208"></a>12.16.5.2. <span class="errorname">Missing Return statements</span></h4></div></div></div><p>Certaines méthodes ne renvoient pas explicitement
	  une valeur comme la norme le demande.  Bien
	  qu'<acronym class="acronym">ACPI-CA</acronym> ne gère pas cela, FreeBSD
	  contourne ce problème en renvoyant implicitement la
	  valeur.  Vous pouvez également ajouter des <span class="quote">« <span class="quote">Return
	  statements</span> »</span> explicites où cela est
	  nécessaire si vous connaissez la valeur à
	  renvoyer.  Pour forcer <code class="command">iasl</code> à compiler
	  l'<acronym class="acronym">ASL</acronym>, utilisez l'option
	  <code class="option">-f</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp75559632"></a>12.16.5.3. Remplacer l'<acronym class="acronym">AML</acronym> par
	  défaut</h4></div></div></div><p>Après avoir personnalisé
	  <code class="filename">votre.asl</code>, vous voudrez le compiler, pour
	  cela exécutez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>iasl your.asl</code></strong></pre><p>Vous pouvez ajouter l'option <code class="option">-f</code> pour
	  forcer la création de l'<acronym class="acronym">AML</acronym>,
	  même s'il y a des erreurs lors de la compilation.
	  Rappelez-vous que certaines erreurs (e.g., <span class="errorname">missing
	  Return statements</span>) sont automatiquement
	  contournées par l'interpréteur.</p><p><code class="filename">DSDT.aml</code> est le fichier de sortie par
	  défaut pour <code class="command">iasl</code>.  Vous pouvez le
	  charger à la place de la version boguée de votre
	  <acronym class="acronym">BIOS</acronym> (qui est toujours présent dans la
	  mémoire flash) en éditant le fichier
	  <code class="filename">/boot/loader.conf</code> comme suit:</p><pre class="programlisting">acpi_dsdt_load="YES"
acpi_dsdt_name="/boot/DSDT.aml"</pre><p>Assurez-vous de bien copier votre fichier
	  <code class="filename">DSDT.aml</code> dans le répertoire
	  <code class="filename">/boot</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-debugoutput"></a>12.16.6. Obtenir d'<acronym class="acronym">ACPI</acronym> une sortie de
	débogage</h3></div></div></div><a id="idp75568848" class="indexterm"></a><a id="idp75570000" class="indexterm"></a><p>Le pilote <acronym class="acronym">ACPI</acronym> dispose d'une fonction
	de débogage très flexible.  Elle vous permet de
	spécifier un ensemble de sous-systèmes ainsi que
	le niveau de verbosité.  Les sous-systèmes que
	vous désirez déboguer sont indiqués sous la
	forme de <span class="quote">« <span class="quote">couches</span> »</span> et sont divisés en
	composants <acronym class="acronym">ACPI-CA</acronym> (ACPI_ALL_COMPONENTS) et
	en supports matériel <acronym class="acronym">ACPI</acronym>
	(ACPI_ALL_DRIVERS).  La verbosité de la sortie de
	débogage est spécifiée par un
	<span class="quote">« <span class="quote">niveau</span> »</span> et des intervalles de ACPI_LV_ERROR
	(rapporte juste les erreurs) à ACPI_LV_VERBOSE (tout).
	Le <span class="quote">« <span class="quote">niveau</span> »</span> est un masque de bits
	séparés par des espaces, aussi de nombreuses
	options peuvent être fixées à la fois.  Dans
	la pratique, vous voudrez utiliser un console série pour
	afficher la sortie si les informations de débogage sont
	si importantes qu'elles dépassent le tampon des messages
	de la console.  Une liste complète des couches
	individuelles et des niveaux peut être trouvée dans
	la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a>.</p><p>L'affichage des informations de débogage n'est pas
	activé par défaut.  Pour l'activer, ajoutez la ligne
	<code class="literal">options ACPI_DEBUG</code> à votre fichier de
	configuration du noyau si l'<acronym class="acronym">ACPI</acronym> est
	compilé dans le noyau.  Vous pouvez ajouter la ligne
	<code class="literal">ACPI_DEBUG=1</code> à votre fichier
	<code class="filename">/etc/make.conf</code> pour l'activer de façon
	globale.  Si l'<acronym class="acronym">ACPI</acronym> est sous forme de module,
	vous pouvez recompiler votre module <code class="filename">acpi.ko</code>
	comme suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /sys/modules/acpi/acpi
&amp;&amp; make clean &amp;&amp;
make ACPI_DEBUG=1</code></strong></pre><p>Installez <code class="filename">acpi.ko</code> dans le
	répertoire <code class="filename">/boot/kernel</code> et indiquez le niveau et
	la couche désirée dans
	<code class="filename">loader.conf</code>.  L'exemple suivant active les
	messages de débogage pour tous les composants
	<acronym class="acronym">ACPI-CA</acronym> et tous les pilotes de matériel
	<acronym class="acronym">ACPI</acronym> (<acronym class="acronym">CPU</acronym>,
	<acronym class="acronym">LID</acronym>, etc.).  Il n'affichera que les messages
	d'erreur, c'est le niveau le moins verbeux.</p><pre class="programlisting">debug.acpi.layer="ACPI_ALL_COMPONENTS ACPI_ALL_DRIVERS"
debug.acpi.level="ACPI_LV_ERROR"</pre><p>Si l'information que vous voulez est
	déclenchée par un événement particulier
	(disons par exemple une mise en veille suivi d'un réveil),
	vous pouvez abandonner les modifications dans
	<code class="filename">loader.conf</code> et utiliser à la place
	<code class="command">sysctl</code> pour indiquer la couche et le niveau
	après le démarrage et préparer votre
	système pour cet événement particulier.  Les
	variables <code class="command">sysctl</code> sont appelées de la
	même manière que dans le fichier
	<code class="filename">loader.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ACPI-References"></a>12.16.7. Références</h3></div></div></div><p>Plus d'information au sujet de l'<acronym class="acronym">ACPI</acronym>
	peut être trouvé aux emplacements suivants:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La liste de diffusion <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">liste de diffusion concernant ACPI sous FreeBSD</a></p></li><li class="listitem"><p>Les archives de la liste de diffusion
	    <acronym class="acronym">ACPI</acronym> <code class="uri"><a class="uri" href="http://lists.freebsd.org/pipermail/freebsd-acpi/" target="_top">http://lists.freebsd.org/pipermail/freebsd-acpi/</a></code></p></li><li class="listitem"><p>Les archives de l'ancienne liste de diffusion
	  <acronym class="acronym">ACPI</acronym> <code class="uri"><a class="uri" href="http://home.jp.FreeBSD.org/mail-list/acpi-jp/" target="_top">http://home.jp.FreeBSD.org/mail-list/acpi-jp/</a></code></p></li><li class="listitem"><p>La spécification <acronym class="acronym">ACPI</acronym> 2.0
	    <code class="uri"><a class="uri" href="http://acpi.info/spec.htm" target="_top">http://acpi.info/spec.htm</a></code></p></li><li class="listitem"><p>Les pages de manuel: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a>,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi_thermal&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi_thermal</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpidump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpidump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=iasl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">iasl</span>(8)</span></a>,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpidb&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">acpidb</span>(8)</span></a></p></li><li class="listitem"><p><a class="link" href="http://www.cpqlinux.com/acpi-howto.html#fix_broken_dsdt" target="_top">
	    Ressource sur le débogage de la
	    <acronym class="acronym">DSDT</acronym></a>.  (Utilise un exemple
	    basé sur du matériel Compaq mais qui est en
	    général intéressant.)</p></li></ul></div></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp75177808" class="footnote"><p><a href="#idp75177808" class="para"><sup class="para">[5] </sup></a>L'algorithme d'auto-ajustement fixe
	      <code class="literal">maxusers</code> à une valeur égale
	      à la quantité de mémoire présente
	      sur le système, avec un minimum de 32 et un maximum de
	      384..</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot"></a>Chapitre 13. Processus de démarrage de FreeBSD</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#boot-synopsis">13.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#boot-introduction">13.2. Le problème du démarrage</a></span></dt><dt><span class="sect1"><a href="#boot-blocks">13.3. Le gestionnaire de démarrage et les étapes de
      démarrage</a></span></dt><dt><span class="sect1"><a href="#boot-kernel">13.4. Interaction avec le noyau au démarrage</a></span></dt><dt><span class="sect1"><a href="#device-hints">13.5. &#8220;Device Hints&#8221;&#8212;Paramétrage des
      périphériques</a></span></dt><dt><span class="sect1"><a href="#boot-init">13.6. Init: Initialisation de la gestion des processus</a></span></dt><dt><span class="sect1"><a href="#boot-shutdown">13.7. Séquence d'arrêt du système</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-synopsis"></a>13.1. Synopsis</h2></div></div></div><a id="idp75613520" class="indexterm"></a><a id="idp75614032" class="indexterm"></a><p>L'action de démarrer un ordinateur et de
      charger le système d'exploitation est désignée
      sous le nom de &#8220;processus de bootstrap&#8221;, ou simplement
      démarrage.  Le processus de démarrage de FreeBSD
      fournit une grande flexibilité en adaptant ce qui se passe
      quand vous démarrez le système, vous permettant
      de choisir parmi les différents systèmes
      d'exploitation installés sur l'ordinateur, ou même
      parmi les différentes versions du même système
      d'exploitation ou du noyau installées.</p><p>Ce chapitre détaille les options de configuration que
      vous pouvez paramétrer et comment personnaliser le processus
      de démarrage de FreeBSD.  Cela inclut tout ce qui se produit
      jusqu'au démarrage du noyau FreeBSD, la détection des
      périphériques, et le démarrage d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>.
      Si vous n'êtes pas tout à fait sûr du moment auquel
      cela arrive, cela se produit à l'instant où la
      couleur du texte passe d'un blanc lumineux au gris.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Quels sont les composants du système de
	  démarrage de FreeBSD, et comment ils agissent les uns
	  sur les autres.</p></li><li class="listitem"><p>Les options que vous pouvez passer aux composants du
	  système de démarrage de FreeBSD pour
	  contrôler le processus.</p></li><li class="listitem"><p>Les bases du système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a>.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">x86 seulement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ce chapitre ne décrit que le processus de
	démarrage de FreeBSD pour les systèmes Intel x86.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-introduction"></a>13.2. Le problème du démarrage</h2></div></div></div><p>Allumer un ordinateur et démarrer le système
      d'exploitation pose un intéressant dilemme.  Par
      définition, l'ordinateur ne sait rien faire jusqu'à
      ce que le système d'exploitation soit lancé.
      Ceci inclut l'exécution des programmes à partir du disque.
      Donc si l'ordinateur ne peut pas exécuter de programme
      à partir du disque sans le système d'exploitation, et
      que les programmes du système d'exploitation sont sur
      le disque, comment le système d'exploitation est-il
      démarré?</p><p>On peut faire le parallèle avec un
      événement du livre <em class="citetitle">Les aventures du Baron
      Munchausen</em>.  Le personnage tombe dans une bouche
      d'égout avec une partie du corps hors de la bouche, et il s'en
      sort en attrapant les fixations de ses bottes
      (&#8220;bootstraps&#8221;), et en se soulevant ainsi.  Dans les
      premiers jours de l'informatique le terme
      <em class="firstterm">bootstrap</em> fut appliqué au mécanisme
      utilisé pour charger le système d'exploitation, terme qui a
      été
      raccourci en &#8220;booting&#8221; (que l'on traduit par démarrage
      en Français).</p><a id="idp75628112" class="indexterm"></a><a id="idp75628624" class="indexterm"></a><p>Sur l'architecture x86 c'est le BIOS (&#8220;Basic
      Input/Output System&#8221;) qui est responsable du chargement du
      système d'exploitation.  Pour effectuer cela, le BIOS recherche
      sur le disque dur le &#8220;Master Boot Record&#8221; - Secteur
      Principal de Démarrage (MBR), qui doit être
      placé à un endroit bien précis sur le disque.
      Le BIOS dispose de
      suffisamment de connaissances pour charger et exécuter
      le MBR, et suppose que le MBR peut alors effectuer le reste des
      tâches impliquées dans le chargement du système
      d'exploitation, probablement avec l'aide du BIOS.</p><a id="idp75630160" class="indexterm"></a><a id="idp75630672" class="indexterm"></a><a id="idp75631184" class="indexterm"></a><p>Pour parler du code contenu dans le MBR, on fait souvent
      référence aux termes de <span class="emphasis"><em>gestionnaire de
      démarrage</em></span> <span class="emphasis"><em>gestionnaire
      d'amorce</em></span>, tout particulièrement quand il y a
      intéraction avec l'utilisateur.  Dans ce cas le code de
      ce gestionnaire occupe un espace plus important sur la
      première <span class="emphasis"><em>piste</em></span> du disque ou du
      système de fichier du système d'exploitation (le
      gestionnaire de démarrage est parfois également
      appelé gestionnaire de chargement ou chargeur,
      <span class="quote">« <span class="quote">boot loader</span> »</span>, sous FreeBSD ce terme est
      utilisé pour une étape ultérieur du
      démarrage).  Parmi les gestionnaire de démarrage
      populaire, se trouvent <span class="application">boot0</span>
      (également connu sous le nom de <span class="application">Boot
      Easy</span>, le gestionnaire de démarrage standard
      de FreeBSD), <span class="application">Grub</span>,
      <span class="application">GAG</span>, et
      <span class="application">LILO</span> (seul
      <span class="application">boot0</span> peut tenir entièrement
      dans l'espace du MBR.).</p><p>Si vous n'avez qu'un seul système d'exploitation
      installé sur vos disques alors le MBR PC standard sera suffisant.  Ce
      MBR recherche la première tranche (&#8220;slice&#8221;)
      amorçable (souvent appelée active) sur le disque, et puis exécute le code sur cette
      tranche pour charger le reste du système d'exploitation.
      Le MBR installé par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> par défaut se
      comporte de cette manière.  Il est basé sur
      <code class="filename">/boot/mbr</code>.</p><p>Si vous avez installé plusieurs systèmes
      d'exploitation sur vos disques alors vous pouvez installer un gestionnaire d'amorce
      différent, qui permet d'afficher une liste des
      différents systèmes d'exploitation, et vous permet de
      sélectionner
      celui à partir duquel démarrer.  Ceci est
      abordé dans la sous-section suivante.</p><p>Le reste du système de démarrage de FreeBSD est
      divisé en trois étapes.
      La première étape est exécutée
      par le MBR, qui en sait juste assez pour mettre l'ordinateur dans
      un état spécifique et lancer la deuxième
      étape.  La seconde étape peut en faire un peu plus, avant de
      lancer la troisième étape.  La troisième étape
      termine la tâche de chargement du système d'exploitation.
      La tâche a été séparée en trois
      étapes parce que le standard PC
      impose des limites sur la taille des programmes qui peuvent
      être exécutés aux étapes une et deux.
      L'enchaînement des tâches permet à FreeBSD de fournir
      un chargeur plus flexible.</p><a id="idp75650768" class="indexterm"></a><a id="idp75651280" class="indexterm"></a><p>Le noyau est ensuite démarré et commence
      à sonder le système à la recherche de
      périphériques et les initialise.  Une fois le
      processus de démarrage du noyau achevé, le noyau
      passe la main au processus <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>, qui alors vérifie
      que les disques sont utilisables.
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> commence ensuite la configuration des ressources au
      niveau utilisateur, monte les systèmes de fichiers,
      initialise les cartes réseaux pour communiquer sur le
      réseau, et lance tous les processus qui sont habituellement
      exécutés au démarrage d'un système
      FreeBSD.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-blocks"></a>13.3. Le gestionnaire de démarrage et les étapes de
      démarrage</h2></div></div></div><a id="idp75658960" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot0"></a>13.3.1. Le gestionnaire de démarrage</h3></div></div></div><a id="idp75660240" class="indexterm"></a><p>Le code contenu dans le MBR ou gestionnaire de
	démarrage ou d'amorce est parfois appelé
	<span class="emphasis"><em>étape zéro</em></span> du processus de
	démarrage.  Cette section discute de deux gestionnaires
	de démarrage précédemment
	mentionnés: <span class="application">boot0</span> et
	<span class="application">LILO</span>.</p><p><span class="formalpara-title">Le gestionnaire d'amorce
	<span class="application">boot0</span>: </span>Le MBR installé par l'installateur FreeBSD ou par
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a> est basé sur
	<code class="filename">/boot/boot0</code>.
	(<code class="filename">boot0</code> est très simple, puisque le
	programme dans le <abbr class="abbrev">MBR</abbr> ne peut pas occuper plus
	de 446 octets en raison de la
	table de partition principale et l'identifiant
	<code class="literal">0x55AA</code> à la fin du MBR).
	Si vous avez installé <span class="application">boot0</span>
	et plusieurs systèmes d'exploitation sur vos disques durs alors
	vous verrez un affichage semblable à celui-ci au
	démarrage:</p><div class="example"><a id="boot-boot0-example"></a><div class="example-title">Exemple 13.1. Ecran de <code class="filename">boot0</code></div><div class="example-contents"><pre class="screen">F1 DOS
F2 FreeBSD
F3 Linux
F4 ??
F5 Drive 1

Default: F2</pre></div></div><br class="example-break" /><p>D'autres systèmes d'exploitation, en particulier
	<span class="trademark">Windows</span>®, sont connus pour écraser le MBR existant avec le
	leur.  Si cela vous arrive, ou que vous désirez remplacer
	le MBR existant avec le MBR de FreeBSD alors utilisez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -B -b /boot/boot0 device</code></strong></pre><p>où <em class="replaceable"><code>device</code></em> est le
	périphérique à partir duquel vous
	démarrez, comme <code class="filename">ad0</code> pour le premier
	disque IDE, <code class="filename">ad2</code> pour le premier disque
	IDE sur le second contrôleur IDE, <code class="filename">da0</code>
	pour le premier disque SCSI, et ainsi de suite.  Ou, si vous
	voulez une configuration sur mesure du MBR, employez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot0cfg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot0cfg</span>(8)</span></a>.</p><p><span class="formalpara-title">Le gestionnaire de démarrage LILO: </span>Pour installer ce gestionnaire de manière à ce qu'il
	  amorce également FreeBSD, démarrez tout d'abord Linux et
	  ajoutez ce qui suit au fichier de configuration
	  <code class="filename">/etc/lilo.conf</code>:</p><pre class="programlisting">other=/dev/hdXY
table=/dev/hdX
loader=/boot/chain.b
label=FreeBSD</pre><p>Dans ce qui précède, précisez la
	partition primaire et le disque FreeBSD en utilisant les
	paramètres propres à Linux, en remplaçant
	<em class="replaceable"><code>X</code></em> avec la lettre correspondant au
	disque Linux et <em class="replaceable"><code>Y</code></em> avec le
	numéro de la partition primaire Linux.  Si vous
	utilisez un disque <acronym class="acronym">SCSI</acronym>, vous changerez
	<em class="replaceable"><code>/dev/hd</code></em> pour quelque chose de
	semblable à <em class="replaceable"><code>/dev/sd</code></em>.  La ligne
	<code class="option">loader=/boot/chain.b</code> peut être omise si vous
	avez les deux systèmes d'exploitation sur le même disque.
	Lancez maintenant la commande <code class="command">/sbin/lilo -v</code> pour
	entériner vos modifications; des messages de contrôle
	devraient s'afficher, vérifiant ces modifications.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-boot1"></a>13.3.2. Etape une, <code class="filename">/boot/boot1</code>, et étape deux,
	<code class="filename">/boot/boot2</code></h3></div></div></div><p>Conceptuellement la première et la seconde étapes
	font partie du même programme, sur le même emplacement du
	disque.  Mais en raison de contraintes d'espace elles ont
	été divisées en deux, mais vous les installerez
	toujours de paire.  Elles sont copiées, à partir
	du fichier combiné <code class="filename">/boot/boot</code>, par
	l'installateur ou <span class="application">bsdlabel</span> (voir
	plus bas).</p><p>On les trouve en dehors des systèmes de fichiers,
	sur la première piste de la tranche de
	démarrage, à partir du premier secteur.  C'est
	l'endroit où <a class="link" href="#boot-boot0" title="13.3.1. Le gestionnaire de démarrage">boot0</a>, ou tout autre gestionnaire
	de démarrage s'attend à trouver le code à
	exécuter pour continuer le processus de démarrage.
	Le nombre de secteurs utilisés est facilement
	déterminé à partir de la taille du
	fichier <code class="filename">/boot/boot</code>.</p><p><code class="filename">boot1</code> est très simple, puisqu'il est
	limité à 512 octets, et en
	sait juste assez du
	<em class="firstterm">bsdlabel</em> de FreeBSD, qui contient
	l'information sur la tranche, pour trouver et lancer
	<code class="filename">boot2</code>.</p><p><code class="filename">boot2</code> est légèrement
	plus sophistiqué, et en connaît assez sur le
	système de fichiers
	de FreeBSD pour y trouver des fichiers, et il peut également
	fournir une interface simple pour sélectionner un noyau ou un
	chargeur à exécuter.</p><p>Comme le <a class="link" href="#boot-loader" title="13.3.3. Etape trois, /boot/loader">chargeur</a> est
	beaucoup plus sophistiqué, et dispose d'une interface de
	configuration du démarrage facile d'emploi,
	<code class="filename">boot2</code> l'exécute habituellement, bien que
	précédemment, c'est lui qui
	lançait directement le noyau.</p><div class="example"><a id="boot-boot2-example"></a><div class="example-title">Exemple 13.2. Ecran de <code class="filename">boot2</code></div><div class="example-contents"><pre class="screen">&gt;&gt; FreeBSD/i386 BOOT
Default: 0:ad(0,a)/boot/loader
boot:</pre></div></div><br class="example-break" /><p>Si vous avez un jour besoin de remplacer
	<code class="filename">boot1</code> et <code class="filename">boot2</code>,
	utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -B diskslice</code></strong></pre><p>où <em class="replaceable"><code>diskslice</code></em> est le disque et la
	tranche à partir de laquelle vous démarrez, comme
	<code class="filename">ad0s1</code> pour la première tranche sur le
	premier disque IDE.</p><div xmlns="" class="warning"><h3 class="admontitle">Mode dangereusement dédié: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous utilisez juste le nom du disque, comme
	  <code class="filename">ad0</code>, dans la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	  vous créerez un disque dangereusement dédié,
	  sans tranches.
	  Ce n'est presque certainement pas ce que vous voulez faire,
	  donc vérifiez à deux fois la commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> avant d'appuyer sur
	  <span class="keycap"><strong>Entrée</strong></span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader"></a>13.3.3. Etape trois, <code class="filename">/boot/loader</code></h3></div></div></div><a id="idp75711696" class="indexterm"></a><p>Le chargeur est la dernière étape
      du processus de démarrage en trois temps, et il réside sur
      le système de fichiers, c'est habituellement le fichier
      <code class="filename">/boot/loader</code>.</p><p>Le chargeur a pour objet de fournir une méthode de
      configuration conviviale, en utilisant un jeu de commandes faciles
      d'emploi, doublé d'un interpréteur plus puissant, avec un
      ensemble de commandes plus complexes.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-flow"></a>13.3.3.1. Déroulement des opérations du chargeur</h4></div></div></div><p>A l'initialisation, le chargeur recherchera la console et
	les disques, et déterminera à partir de quel disque
	démarrer.  Il positionnera les variables en
	conséquence, et un interpréteur sera lancé
	pour lequel l'utilisateur pourra passer des commandes par
	l'intermédiaire d'une procédure ou de façon
	interactive.</p><a id="idp75714512" class="indexterm"></a><a id="idp75715152" class="indexterm"></a><p>Le chargeur lira ensuite
	<code class="filename">/boot/loader.rc</code>, qui lui ira lire
	dans <code class="filename">/boot/defaults/loader.conf</code>
	les valeurs par défaut des variables à positionner et dans
	<code class="filename">/boot/loader.conf</code> les variantes locales de
	ces dernières.  <code class="filename">loader.rc</code> se sert de ces
	variables pour charger les modules et le noyau
	sélectionnés.</p><p>Finalement, par défaut, le chargeur attend 10 secondes l'appui
	sur une ou plusieurs touches, et démarre le noyau s'il n'est pas
	interrompu.  S'il est interrompu, une invite est alors affichée
	à l'utilisateur, un jeu de commandes simples permet à
	l'utilisateur de modifier des variables, charger ou décharger des
	modules, et enfin démarrer ou redémarrer.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-commands"></a>13.3.3.2. Commandes intégrées au chargeur</h4></div></div></div><p>Voici les commandes du chargeur les plus utilisées.
	Pour une information complète sur toutes les commandes
	disponibles, veuillez consulter la page <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">autoboot <em class="replaceable"><code>secondes</code></em></span></dt><dd><p>Démarre le noyau si elle n'est pas interrompue
	      dans le laps de temps donné en secondes.  Elle affiche
	      un compte à rebours, et le délai par défaut
	      est de 10 secondes.</p></dd><dt><span class="term">boot
	    [<span class="optional">-options</span>]
	    [<span class="optional">nom_du_noyau</span>]</span></dt><dd><p>Démarre immédiatement le noyau dont le nom
	      est indiqué, avec les options données,
	      s'il y en a.</p></dd><dt><span class="term">boot-conf</span></dt><dd><p>Passe par la même configuration automatique
	      des modules basée sur des variables comme ce
	      qui se produit au démarrage.  Cela n'a de sens
	      que si vous utilisez <code class="command">unload</code> en premier,
	      et modifiez certaines variables, généralement
	      <code class="envar">kernel</code>.</p></dd><dt><span class="term">help
	    [<span class="optional">sujet</span>]</span></dt><dd><p>Affiche les messages d'aide contenus dans
	      <code class="filename">/boot/loader.help</code>.  Si le sujet donné
	      est <code class="literal">index</code>, alors c'est la liste de tous les
	      sujets existants qui est donnée.</p></dd><dt><span class="term">include <em class="replaceable"><code>nom_du_fichier</code></em>
	    &#8230;</span></dt><dd><p>Traite le fichier dont le nom est donné.
	      Le fichier est lu, et interprété ligne par ligne.
	      Une erreur stoppe immédiatement le traitement.</p></dd><dt><span class="term">load [<span class="optional">-t
	    type</span>]
	    <em class="replaceable"><code>nom_du_fichier</code></em></span></dt><dd><p>Charge le noyau, le module, ou le fichier du type
	      donné, dont le nom est passé en
	      paramètre.  Les arguments qui suivent le nom du fichier
	      sont passés au fichier.</p></dd><dt><span class="term">ls [<span class="optional">-l</span>]
	    [<span class="optional">chemin_d_accès</span>]</span></dt><dd><p>Affiche la liste des fichiers du répertoire
	      donné, ou du répertoire racine, si le chemin
	      d'accès n'est pas précisé.
	      Si l'option <code class="option">-l</code> est utilisée, les
	      tailles des fichiers seront également
	      listées.</p></dd><dt><span class="term">lsdev [<span class="optional">-v</span>]</span></dt><dd><p>Liste tous les périphériques depuis lesquels
	      il sera possible de charger des modules.  Si l'option
	      <code class="option">-v</code> est utilisée, plus de détails
	      seront donnés.</p></dd><dt><span class="term">lsmod [<span class="optional">-v</span>]</span></dt><dd><p>Affiche la liste des modules chargés.
	      Si l'option <code class="option">-v</code> est utilisée, plus de
	      détails seront donnés.</p></dd><dt><span class="term">more <em class="replaceable"><code>nom_du_fichier</code></em></span></dt><dd><p>Affiche les fichiers indiqués, avec une pause toutes
	      <code class="varname">LINES</code> lignes.</p></dd><dt><span class="term">reboot</span></dt><dd><p>Redémarre immédiatement le
	      système.</p></dd><dt><span class="term">set <em class="replaceable"><code>variable</code></em>, </span><span class="term">set
	    <em class="replaceable"><code>variable</code></em>=<em class="replaceable"><code>value</code></em></span></dt><dd><p>Positionne les variables d'environnement du
	      chargeur.</p></dd><dt><span class="term">unload</span></dt><dd><p>Retire de la mémoire tous les modules
	      chargés.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-loader-examples"></a>13.3.3.3. Exemples d'utilisation du chargeur</h4></div></div></div><p>Voici quelques exemples pratiques d'utilisation du
	chargeur:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Pour simplement démarrer votre noyau habituel,
	    mais en mode mono-utilisateur:<a id="idp75779792" class="indexterm"></a></p><pre class="screen"><strong class="userinput"><code>boot -s</code></strong></pre></li><li class="listitem"><p>Pour décharger votre noyau et modules habituels,
	  puis charger votre ancien (ou un autre) noyau:</p><pre class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>load kernel.old</code></strong></pre><p>Vous pouvez utiliser <code class="filename">kernel.GENERIC</code>
	    pour faire référence au noyau
	    générique du disque d'installation, ou
	    <code class="filename">kernel.old</code><a id="idp75783376" class="indexterm"></a> pour désigner votre noyau
	    précédent (quand vous avez mis à jour ou
	    configuré votre propre noyau, par exemple).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Utilisez ce qui suit pour charger vos modules
	      habituels avec un autre noyau:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><strong class="userinput"><code>unload</code></strong>
<strong class="userinput"><code>set kernel="kernel.old"</code></strong>
<strong class="userinput"><code>boot-conf</code></strong></pre></div></li><li class="listitem"><p>Pour charger une procédure de configuration
	    du noyau (une procédure qui automatise ce que vous faites
	    normalement avec l'outil de configuration du noyau au
	    démarrage):</p><pre class="screen"><strong class="userinput"><code>load -t userconfig_script /boot/kernel.conf</code></strong></pre></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-kernel"></a>13.4. Interaction avec le noyau au démarrage</h2></div></div></div><a id="idp75788880" class="indexterm"></a><p>Une fois que le noyau est chargé, soit par le
      <a class="link" href="#boot-loader" title="13.3.3. Etape trois, /boot/loader">chargeur</a> (habituellement) soit
      par <a class="link" href="#boot-boot1" title="13.3.2. Etape une, /boot/boot1, et étape deux, /boot/boot2">boot2</a> (en court-circuitant
      le chargeur), il examine les options de démarrage s'il y en a, et
      adapte son comportement en conséquence.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-kernel-bootflags"></a>13.4.1. Options de démarrage du noyau</h3></div></div></div><a id="idp75792208" class="indexterm"></a><p>Voici les options de démarrage les plus courantes:</p><div class="variablelist"><a id="boot-kernel-bootflags-list"></a><dl class="variablelist"><dt><span class="term"><code class="option">-a</code></span></dt><dd><p>A l'initialisation du noyau, demande quel est le
	      périphérique où se trouve le système
	      de fichiers racine.</p></dd><dt><span class="term"><code class="option">-C</code></span></dt><dd><p>Démarre depuis le CDROM.</p></dd><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>Exécute UserConfig, l'outil de configuration du
	      noyau au démarrage.</p></dd><dt><span class="term"><code class="option">-s</code></span></dt><dd><p>Démarre en mode mono-utilisateur.</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>Donne plus de détails lors du lancement
	      du noyau.</p></dd></dl></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il existe d'autres options de démarrage, lisez
	  la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=boot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">boot</span>(8)</span></a> pour plus
	  d'informations.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="device-hints"></a>13.5. &#8220;Device Hints&#8221;&#8212;Paramétrage des
      périphériques</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp75815632" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">C'est une caractéristique de FreeBSD 5.0 et
	des versions suivantes qui n'existe pas dans les versions
	précédentes.</p></div><p>Lors du démarrage du système, le chargeur
      (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>) lira le fichier <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a>.  Ce
      fichier stocke les informations de démarrage du noyau connues
      sous le nom de variables, et parfois appelées &#8220;device
      hints&#8221;.  Ces &#8220;device hints&#8221; sont utilisés
      par les pilotes de périphérique pour la configuration
      des périphériques.</p><p>Les &#8220;device hints&#8221; peuvent être
      spécifiés à l'invite du <a class="link" href="#boot-loader" title="13.3.3. Etape trois, /boot/loader">chargeur</a>.
      Des variables peuvent être ajoutées en
      utilisant la commande <code class="command">set</code>, retirées
      avec la commande <code class="command">unset</code>, et affichées
      avec la commande <code class="command">show</code>.  Les variables
      positionnées dans le fichier
      <code class="filename">/boot/device.hints</code> peuvent être
      écrasées à cet endroit.  Les &#8220;device hints&#8221;
      entrés au niveau du chargeur ne sont pas permanents et seront
      oubliés au prochain redémarrage.</p><p>Une fois le système démarré, la commande
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kenv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kenv</span>(1)</span></a> peut être utilisée pour afficher toutes
      les variables.</p><p>La syntaxe du fichier <code class="filename">/boot/device.hints</code>
      est d'une variable par ligne, en utilisant le caractère
      &#8220;#&#8221; comme signe de mise en commentaire.  Les
      lignes sont présentées comme suit:</p><pre class="screen"><strong class="userinput"><code>hint.pilote.unité.motclé="valeur"</code></strong></pre><p>La syntaxe à utiliser avec le chargeur est:</p><pre class="screen"><strong class="userinput"><code>set hint.pilote.unité.motclé=valeur</code></strong></pre><p>où <code class="literal">pilote</code> est le pilote de périphérique,
      <code class="literal">unité</code> est le numéro de l'unité et
      <code class="literal">motclé</code> est le mot-clé correspondant à la variable.
      Le mot-clé pourra être une des options suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">at</code>: spécifie le bus auquel le
	  périphérique est attaché.</p></li><li class="listitem"><p><code class="literal">port</code>: spécifie l'adresse de départ de
	  l'<acronym class="acronym">E/S</acronym> à utiliser.</p></li><li class="listitem"><p><code class="literal">irq</code>: spécifie le numéro de la
	  requête d'interruption à utiliser.</p></li><li class="listitem"><p><code class="literal">drq</code>: spécifie le numéro du canal DMA.</p></li><li class="listitem"><p><code class="literal">maddr</code>: spécifie l'adresse mémoire physique
	  occupée par le périphérique.</p></li><li class="listitem"><p><code class="literal">flags</code>: fixe les bits des indicateurs pour le
	  périphérique.</p></li><li class="listitem"><p><code class="literal">disabled</code>: si positionnée à <code class="literal">1</code>
	  le périphérique est désactivé.</p></li></ul></div><p>Les pilotes de périphérique pourront accepter (ou
      nécessiter) plus de variables non listées ici, il est
      recommandé de lire leur page de manuel.  Pour plus
      d'information, consultez les pages de manuel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=device.hints&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">device.hints</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kenv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kenv</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">loader.conf</span>(5)</span></a>, et
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-init"></a>13.6. Init: Initialisation de la gestion des processus</h2></div></div></div><a id="idp75864784" class="indexterm"></a><p>Une fois que le noyau a démarré, il passe le
      contrôle au processus utilisateur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a>,
      qui se trouve dans <code class="filename">/sbin/init</code>, ou au
      programme défini dans la variable d'environnement
      <code class="envar">init_path</code> du chargeur.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-autoreboot"></a>13.6.1. Séquence de redémarrage automatique</h3></div></div></div><p>La séquence de redémarrage automatique
	vérifie que les systèmes de fichiers
	sont cohérents.  S'ils ne le sont pas, et que
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> ne peut pas corriger les
	incohérences, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> place le
	système dans le <a class="link" href="#boot-singleuser" title="13.6.2. Mode mono-utilisateur">mode
	mono-utilisateur</a> pour que l'administrateur système
	règle directement le problème.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-singleuser"></a>13.6.2. Mode mono-utilisateur</h3></div></div></div><a id="idp75871824" class="indexterm"></a><a id="idp75872336" class="indexterm"></a><p>Ce mode peut être atteint depuis la <a class="link" href="#boot-autoreboot" title="13.6.1. Séquence de redémarrage automatique">séquence de redémarrage
	automatique</a>, ou quand l'utilisateur démarre avec l'option
	<code class="option">-s</code> ou en positionnant la variable
	<code class="envar">boot_single</code> du chargeur.</p><p>On peut également y parvenir en appelant la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a> sans les options de redémarrage
	(<code class="option">-r</code>) ou d'arrêt (<code class="option">-h</code>),
	à partir du <a class="link" href="#boot-multiuser" title="13.6.3. Mode multi-utilisateur">mode multi-utilisateur</a>.</p><p>Si la <code class="literal">console</code> système est
	positionnée dans le mode <code class="literal">insecure</code> dans le
	fichier <code class="filename">/etc/ttys</code>, alors le système
	demande le mot de passe de <code class="systemitem">root</code> avant de
	passer en mode mono-utilisateur.</p><div class="example"><a id="boot-insecure-console"></a><div class="example-title">Exemple 13.3. Une console non sécurisée dans
	  <code class="filename">/etc/ttys</code></div><div class="example-contents"><pre class="programlisting"># name  getty                           type    status          comments
#
# If console is marked "insecure", then init will ask for the root password
# when going to single-user mode.
console none                            unknown off insecure</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Une console <code class="literal">insecure</code> (non
	  sécurisée) signifie que vous considérez que la
	  console n'est pas sécurisée, et vous désirez que
	  seul quelqu'un connaissant
	  le mot passe de <code class="systemitem">root</code> puisse utiliser le
	  mode mono-utilisateur, et cela ne signifie pas que vous utilisez une
	  console sans sécurité. Donc, si vous voulez de la
	  sécurité, choisissez <code class="literal">insecure</code>,
	  et non <code class="literal">secure</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-multiuser"></a>13.6.3. Mode multi-utilisateur</h3></div></div></div><a id="idp75892304" class="indexterm"></a><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> trouve vos systèmes de fichiers
	en état de marche, ou dès que l'utilisateur quitte
	le <a class="link" href="#boot-singleuser" title="13.6.2. Mode mono-utilisateur">mode mono-utilisateur</a>,
	le système entre dans le mode multi-utilisateur, dans lequel il
	commence la configuration de ses ressources.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="boot-rc"></a>13.6.3.1. Configuration des ressources (rc)</h4></div></div></div><a id="idp75895248" class="indexterm"></a><p>Le système de configuration des ressources lit les
	  valeurs par défaut dans
	  <code class="filename">/etc/defaults/rc.conf</code>, et les valeurs
	  propres à la machine dans <code class="filename">/etc/rc.conf</code>,
	  puis ensuite monte les systèmes de fichiers
	  mentionnés dans <code class="filename">/etc/fstab</code>,
	  démarre les services réseau, divers autres
	  &#8220;démons&#8221; système, et enfin exécute
	  les procédures de démarrage des logiciels
	  installés localement.</p><p>La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> est une bonne
	  référence au sujet du système de
	  configuration des ressources, de même que la lecture des
	  procédures de démarrage elles-mêmes.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="boot-shutdown"></a>13.7. Séquence d'arrêt du système</h2></div></div></div><a id="idp75899728" class="indexterm"></a><p>Lors de l'arrêt manuel du système, via
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> tentera
      d'exécuter la procédure
      <code class="filename">/etc/rc.shutdown</code>, et ensuite enverra à
      tous les processus le signal <code class="literal">TERM</code>, suivi
      du signal <code class="literal">KILL</code> à tous ceux qui ne se
      terminent pas à temps.</p><p>Pour éteindre une machine FreeBSD et cela sur des
      architectures ou des systèmes supportant la gestion par
      logiciel de l'énergie, utilisez simplement la commande
      <code class="command">shutdown -p now</code> pour arrêter et couper
      l'alimentation de la machine.  Pour juste redémarrer un
      système FreeBSD, utilisez <code class="command">shutdown -r now</code>.
      Vous devez être super-utilisateur (<code class="systemitem">root</code>)
      ou un membre du groupe <code class="systemitem">operator</code> pour
      pouvoir exécuter <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a>.  Les commandes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=halt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">halt</span>(8)</span></a>
      et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=reboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">reboot</span>(8)</span></a> peuvent également être
      utilisées, veuillez consulter leur page de manuel ainsi
      que celle de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a> pour plus d'informations.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La gestion de l'énergie nécessite d'avoir le support
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acpi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">acpi</span>(4)</span></a> dans son noyau ou chargé en tant que
	module.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users"></a>Chapitre 14. Gestion des comptes et des utilisateurs</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Neil</span> <span class="surname">Blakey-Milner</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#users-synopsis">14.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#users-introduction">14.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#users-superuser">14.3. Le compte super-utilisateur</a></span></dt><dt><span class="sect1"><a href="#users-system">14.4. Comptes système</a></span></dt><dt><span class="sect1"><a href="#users-user">14.5. Comptes utilisateur</a></span></dt><dt><span class="sect1"><a href="#users-modifying">14.6. Modifier des comptes</a></span></dt><dt><span class="sect1"><a href="#users-limiting">14.7. Mettre en place des restrictions pour les utilisateurs</a></span></dt><dt><span class="sect1"><a href="#users-groups">14.8. Groupes</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-synopsis"></a>14.1. Synopsis</h2></div></div></div><p>FreeBSD permet à de nombreux utilisateurs d'utiliser
      l'ordinateur en même temps.  Evidemment, seul un de ces
      utilisateurs peut être assis devant l'écran et le clavier
      à un instant donné
      <a href="#ftn.idp75920208" class="footnote" id="idp75920208"><sup class="footnote">[6]</sup></a>, mais n'importe quel nombre d'utilisateurs peut ouvrir
      une session par l'intermédiaire du réseau pour mener
      à bien son
      travail.  Pour utiliser le système chaque utilisateur doit
      posséder un compte.</p><p>Après la lecture de ce chapitre, vous connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les différences entre les divers comptes utilisateur sur
	  un système FreeBSD.</p></li><li class="listitem"><p>Comment ajouter des comptes utilisateur.</p></li><li class="listitem"><p>Comment supprimer des comptes utilisateur.</p></li><li class="listitem"><p>Comment modifier les paramètres d'un compte, comme le nom
	complet de l'utilisateur, ou l'interpréteur de commandes
	préféré.</p></li><li class="listitem"><p>Comment fixer des limites par compte, pour contrôler les
	  ressources comme la mémoire et le temps CPU auxquels les
	  comptes et les groupes de comptes sont autorisés à
	  accéder.</p></li><li class="listitem"><p>Comment utiliser les groupes pour rendre la gestion de
	  comptes plus aisée.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les fondements d'<span class="trademark">UNIX</span>® et de FreeBSD (<a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-introduction"></a>14.2. Introduction</h2></div></div></div><p>Tout accès au système est effectué
      par l'intermédiaire de comptes, et tous les processus sont
      exécutés par des utilisateurs, la gestion des comptes et des
      utilisateurs est capitale sur les systèmes FreeBSD.</p><p>Chaque compte sur un système FreeBSD est associé
      avec un certain nombre d'informations utilisé pour
      identifier le compte.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">&#8220;User name&#8221; - nom d'utilisateur</span></dt><dd><p>Le nom d'utilisateur comme il sera tapé à
	    l'invite <code class="prompt">login:</code>.  Les noms d'utilisateur
	    doivent être uniques sur le système; vous ne pouvez
	    pas avoir deux utilisateurs avec le même nom
	    d'utilisateur.  Il y a un certain nombre de règles
	    pour la création de noms d'utilisateur valides,
	    documentées dans <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">passwd</span>(5)</span></a>; vous utiliserez
	    généralement des noms d'utilisateurs de huit lettres
	    ou moins et en minuscules.</p></dd><dt><span class="term">&#8220;Password&#8221; - mot de passe</span></dt><dd><p>Chaque compte est associé à un mot de passe.
	    Le mot de passe peut être vide, dans ce cas aucun mot de
	    passe ne sera requis pour accéder au système.
	    Ceci est une très mauvaise idée; chaque compte
	    devrait avoir un mot de passe.</p></dd><dt><span class="term">&#8220;User ID (UID)&#8221; - identifiant utilisateur</span></dt><dd><p>L'UID est un nombre compris entre 0 et 65535<a href="#ftn.users-largeuidgid" class="footnote" id="users-largeuidgid"><sup class="footnote">[7]</sup></a>, utilisé
	    pour identifier de façon unique un utilisateur sur le
	    système.  Au niveau interne, FreeBSD utilise l'UID pour
	    identifier les utilisateurs&#8212;toute commande qui vous
	    permet de spécifier un utilisateur convertira le nom
	    d'utilisateur en son UID avant de le traiter.  Cela signifie
	    que vous pouvez avoir plusieurs comptes avec des noms
	    d'utilisateurs différents mais le même UID.
	    En ce qui concerne FreeBSD ces comptes ne sont qu'un seul et
	    unique utilisateur.  Il est peu probable que vous ayez
	    jamais à faire cela.</p></dd><dt><span class="term">&#8220;Group ID (GID)&#8221; - identifiant de groupe</span></dt><dd><p>Le GID est un nombre compris entre 0 et 65535<a href="#ftn.users-largeuidgid" class="footnoteref"><sup class="footnoteref">[7]</sup></a>, utilisé
	    pour identifier de façon unique le groupe principal auquel
	    appartient l'utilisateur.  Les groupes sont un mécanisme
	    pour contrôler l'accès aux ressources qui est
	    basé sur le GID de l'utilisateur plutôt que
	    sur son UID.  Un utilisateur peut également
	    appartenir à plus d'un groupe.</p></dd><dt><span class="term">&#8220;Login class&#8221; - classe de session</span></dt><dd><p>Les classes de session sont une extension du
	    mécanisme de groupe qui apporte une flexibilité
	    supplémentaire quand on adapte le système aux
	    différents utilisateurs.</p></dd><dt><span class="term">&#8220;Password change time&#8221; - durée de vie d'un
	  mot de passe</span></dt><dd><p>Par défaut FreeBSD n'oblige pas les utilisateurs
	    à changer leur mot de passe régulièrement.
	    Vous pouvez forcer cela en fonction de l'utilisateur, en
	    obligeant certains ou tous les utilisateurs à changer
	    leur mot de passe après qu'une certaine période
	    de temps se soit écoulée.</p></dd><dt><span class="term">&#8220;Account expiry time&#8221; - date d'expiration
	  d'un compte</span></dt><dd><p>Par défaut FreeBSD ne désactive pas de
	    comptes après une certaine période.  Si vous
	    créez des comptes qui auront une durée de vie
	    limitée, par exemple, dans une école où
	    il existe des comptes pour les étudiants, alors vous
	    pouvez spécifier la date d'expiration des comptes.
	    Après la durée d'expiration écoulée
	    le compte ne pourra plus être utilisé
	    pour ouvrir de session sur le système, bien que les
	    répertoires et les fichiers attachés au compte
	    seront conservés.</p></dd><dt><span class="term">&#8220;User's full name&#8221; - nom complet d'utilisateur</span></dt><dd><p>Le nom d'utilisateur identifie uniquement le compte sur
	    FreeBSD, mais ne reflète pas nécessairement le
	    nom réel de l'utilisateur.  Cette information peut être
	    associée avec le compte.</p></dd><dt><span class="term">&#8220;Home directory&#8221; - répertoire
	  utilisateur</span></dt><dd><p>Le répertoire utilisateur est le chemin complet
	    vers un répertoire sur le système dans lequel se
	    retrouve l'utilisateur quand il ouvre une session sur le
	    système.  Une convention commune est de mettre tous les
	    répertoires d'utilisateurs sous
	    <code class="filename">/home/username</code>
	    ou <code class="filename">/usr/home/username</code>.
	    L'utilisateur pourra stocker ses fichiers personnel dans son
	    répertoire utilisateur et dans tout sous-répertoire
	    qu'il pourra y créer.</p></dd><dt><span class="term">&#8220;User shell&#8221; - interpréteur de commandes
	  de l'utilisateur</span></dt><dd><p>L'interpréteur de commandes fournit aux utilisateurs
	    l'environnement par défaut pour communiquer avec le
	    système.  Il existe plusieurs différents types
	    d'interpréteurs de commandes, et les utilisateurs
	    expérimentés auront leur préférence,
	    qui peut se refléter dans le paramétrage
	    de leur compte.</p></dd></dl></div><p>Il y a trois principales sortes de comptes: le <a class="link" href="#users-superuser" title="14.3. Le compte super-utilisateur">super-utilisateur</a>, les <a class="link" href="#users-system" title="14.4. Comptes système">utilisateurs système</a>,
	et les <a class="link" href="#users-user" title="14.5. Comptes utilisateur">comptes utilisateur</a>.
	Le compte super-utilisateur, normalement appelé
	<code class="systemitem">root</code>, est utilisé pour gérer le
	système
	sans aucune limitation de privilèges.  Les utilisateurs
	système exécutent des services.  Et enfin,
	les comptes utilisateur sont utilisés par de véritables
	utilisateurs, qui ouvrent des sessions, lisent leur courrier
	électronique, et ainsi de suite.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-superuser"></a>14.3. Le compte super-utilisateur</h2></div></div></div><a id="idp75966544" class="indexterm"></a><p>Le compte super-utilisateur, habituellement appelé
      <code class="systemitem">root</code>, est préconfiguré pour
      simplifier l'administration système, et ne devrait pas
      être utilisé pour des tâches quotidiennes comme
      l'envoi et la réception de courrier électronique,
      l'exploration
      du système, ou la programmation.</p><p>Cela parce que le super-utilisateur, à la
      différence des comptes utilisateurs ordinaires, peut agir sans
      aucune limite, et une mauvaise utilisation du compte
      super-utilisateur peut être à l'origine de résultats
      catastrophiques.  On ne peut pas endommager par erreur le système
      avec un compte utilisateur, il est donc généralement
      préférable d'utiliser des comptes utilisateur ordinaires
      chaque fois que c'est possible, à moins d'avoir
      particulièrement besoin
      de droits supplémentaires.</p><p>Vous devriez toujours vérifier et revérifier
      les commandes que vous tapez en tant que super-utilisateur, parce
      qu'un espace en trop ou un caractère manquant peuvent signifier la
      perte définitive de données.</p><p>Donc, la première chose que vous devriez faire,
      après la lecture de ce chapitre, est de vous créer
      un compte utilisateur sans privilèges si vous n'en avez pas
      déjà.  Cela s'applique aussi bien à une machine
      multi-utilisateurs qu'à une machine mono-utilisateur.  Plus loin
      dans ce chapitre, nous expliquerons comment créer de nouveaux
      comptes, et comment passer d'un compte utilisateur ordinaire au
      compte du super-utilisateur.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-system"></a>14.4. Comptes système</h2></div></div></div><a id="idp75970768" class="indexterm"></a><p>Les utilisateurs système sont ceux utilisés pour
      exécuter des services comme le DNS, le courrier
      électronique,
      les serveurs web, et ainsi de suite.  La raison de cela est la
      sécurité; si tous les services s'exécutaient
      avec les droits du super-utilisateur, ils pourraient agir sans
      aucune restriction.</p><a id="idp75972304" class="indexterm"></a><a id="idp75973840" class="indexterm"></a><p>Des exemples d'utilisateurs système sont
      <code class="systemitem">daemon</code>, <code class="systemitem">operator</code>,
      <code class="systemitem">bind</code> (pour le serveur de noms de domaine),
      <code class="systemitem">news</code>, et <code class="systemitem">www</code>.</p><a id="idp75978192" class="indexterm"></a><p><code class="systemitem">nobody</code> est l'utilisateur sans
      privilèges générique du système.
      Cependant, il est important de garder à l'esprit que plus grand
      est le nombre de services utilisant <code class="systemitem">nobody</code>,
      plus grand sera le nombre de fichiers et de processus associés
      à cet utilisateur, et par conséquent plus grand sera le
      nombre de privilèges de cet utilisateur.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-user"></a>14.5. Comptes utilisateur</h2></div></div></div><a id="idp75986000" class="indexterm"></a><p>Les comptes utilisateur sont le principal moyen pour les
      véritables utilisateurs d'accéder au
      système, ces comptes isolent l'utilisateur du reste de
      l'environnement, empêchant les utilisateurs d'endommager
      le système et ou les comptes d'autres utilisateurs, tout en
      leur permettant de personnaliser leur environnement sans incidence
      pour les autres utilisateurs.</p><p>Chaque personne accédant à votre système
      ne devrait posséder que son propre et unique compte.  Cela
      vous permet de savoir qui fait quoi, empêche un utilisateur de
      désorganiser l'environnement d'un autre ou de lire du courrier
      électronique qui ne lui est pas destiné, et ainsi de
      suite.</p><p>Chaque utilisateur peut configurer son propre environnement en
      fonction de ses besoins, pour utiliser d'autres interpréteurs
      de commandes, éditeurs, raccourcis de clavier,
      et langues.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-modifying"></a>14.6. Modifier des comptes</h2></div></div></div><a id="idp75989200" class="indexterm"></a><p>Il existe une variété de différentes
      commandes disponibles dans l'environnement <span class="trademark">UNIX</span>® pour manipuler les
      comptes utilisateur.  Les commandes les plus communes sont
      récapitulées ci-dessous, suivis par des exemples
      détaillés de leur utilisation.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Commande</th><th>Résumé</th></tr></thead><tbody><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a></td><td>L'application en ligne de commande recommandée
	      pour ajouter de nouveaux utilisateurs.</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a></td><td>L'application en ligne de commande recommandée
	      pour supprimer des utilisateurs.</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a></td><td>Un outil flexible pour modifier les informations de
	      la base de données utilisateur.</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a></td><td>L'outil simple en ligne de commande pour changer les
	      mots de passe utilisateur.</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></td><td>Un puissant et flexible outil pour modifier tous les
	      aspects des comptes utilisateurs.</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-adduser"></a>14.6.1. <code class="command">adduser</code></h3></div></div></div><a id="idp76008656" class="indexterm"></a><a id="idp76009808" class="indexterm"></a><a id="idp76010704" class="indexterm"></a><a id="idp76011600" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> est un programme simple pour
	ajouter de nouveaux utilisateurs.  Il crée les entrées
	dans les fichiers système <code class="filename">passwd</code> et
	<code class="filename">group</code>.  Il crée également le
	répertoire utilisateur pour le nouvel utilisateur, y copie les
	fichiers de configuration par défaut (&#8220;dotfiles&#8221;)
	à partir de <code class="filename">/usr/share/skel</code>, et peut
	éventuellement envoyer à l'utilisateur un courrier
	électronique de bienvenue.</p><div class="example"><a id="idp76018512"></a><div class="example-title">Exemple 14.1. Ajouter un utilisateur sous FreeBSD</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser</code></strong>
Username: <strong class="userinput"><code>jru</code></strong>
Full name: <strong class="userinput"><code>J. Random User</code></strong>
Uid (Leave empty for default):
Login group [jru]:
Login group is jru. Invite jru into other groups? []: <strong class="userinput"><code>wheel</code></strong>
Login class [default]:
Shell (sh csh tcsh zsh nologin) [sh]: <strong class="userinput"><code>zsh</code></strong>
Home directory [/home/jru]:
Use password-based authentication? [yes]:
Use an empty password? (yes/no) [no]:
Use a random password? (yes/no) [no]:
Enter password:
Enter password again:
Lock out the account after creation? [no]:
Username   : jru
Password   : ****
Full Name  : J. Random User
Uid        : 1001
Class      :
Groups     : jru wheel
Home       : /home/jru
Shell      : /usr/local/bin/zsh
Locked     : no
OK? (yes/no): <strong class="userinput"><code>yes</code></strong>
adduser: INFO: Successfully added (jru) to the user database.
Add another user? (yes/no): <strong class="userinput"><code>no</code></strong>
Goodbye!
<code class="prompt">#</code></pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le mot de passe que vous tapez n'apparaît pas à
	  l'écran, et il n'y a pas non plus d'astérisques
	  affichés.  Assurez-vous de ne pas vous tromper dans
	  le mot de passe.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-rmuser"></a>14.6.2. <code class="command">rmuser</code></h3></div></div></div><a id="idp76024656" class="indexterm"></a><a id="idp76025296" class="indexterm"></a><p>Vous pouvez utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> pour
	supprimer complètement un utilisateur du système.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> effectue les opérations
	suivantes:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Supprime les entrées appartenant à l'utilisateur
	  de la <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crontab&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">crontab</span>(1)</span></a> (s'il y en a).</p></li><li class="step"><p>Supprime les tâches <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=at&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">at</span>(1)</span></a> appartenant à
	    l'utilisateur.</p></li><li class="step"><p>Tue tous les processus appartenant à
	    l'utilisateur.</p></li><li class="step"><p>Supprime l'utilisateur du fichier de mots de passe
	    local.</p></li><li class="step"><p>Supprime le répertoire l'utilisateur (s'il lui
	    appartient).</p></li><li class="step"><p>Supprime les courriers électroniques en attente pour
	  l'utilisateur dans <code class="filename">/var/mail</code>.</p></li><li class="step"><p>Supprime tous les fichiers temporaires appartenant à
	    l'utilisateur des zones de stockages temporaires comme
	    <code class="filename">/tmp</code>.</p></li><li class="step"><p>Et enfin, supprime l'utilisateur de tous les groupes
	    auxquels il appartient dans <code class="filename">/etc/group</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si un groupe est vide de ce fait et que le nom du
		groupe est le même que celui de l'utilisateur,
		le groupe est supprimé; c'est la réciproque de la
		création par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> d'un groupe propre
		pour chaque utilisateur.</p></div></li></ol></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rmuser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rmuser</span>(8)</span></a> ne peut pas être
	employé pour supprimer des comptes super-utilisateur,
	car cela entraînerait presque toujours des destructions
	massives.</p><p>Par défaut, la commande travaille en mode interactif, pour
	garantir que vous soyez sûr de ce que vous
	faites.</p><div class="example"><a id="idp76045264"></a><div class="example-title">Exemple 14.2. Suppression interactive de compte avec <code class="command">rmuser</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rmuser jru</code></strong>
Matching password entry:
jru:*:1001:1001::0:0:J. Random User:/home/jru:/usr/local/bin/zsh
Is this the entry you wish to remove? <strong class="userinput"><code>y</code></strong>
Remove user's home directory (/home/jru)? <strong class="userinput"><code>y</code></strong>
Updating password file, updating databases, done.
Updating group file: trusted (removing group jru -- personal group is empty) done.
Removing user's incoming mail file /var/mail/jru: done.
Removing files belonging to jru from /tmp: done.
Removing files belonging to jru from /var/tmp: done.
Removing files belonging to jru from /var/tmp/vi.recover: done.
<code class="prompt">#</code></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-chpass"></a>14.6.3. <code class="command">chpass</code></h3></div></div></div><a id="idp76053584" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> modifie les informations de la
	base de données des utilisateurs comme les mots de passe,
	les interpréteurs de commandes, et les informations
	personnelles.</p><p>Seuls les administrateurs système, comme le
	super-utilisateur, peuvent modifier les informations concernant
	les autres utilisateurs et les mots de passe à l'aide de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a>.</p><p>Utilisé sans options, en dehors du nom facultatif de
	l'utilisateur, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a> ouvre un éditeur
	affichant les informations de l'utilisateur.  Quand
	l'utilisateur quitte l'éditeur, la base de données
	utilisateur est mise à jour avec les nouvelles
	informations.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">On vous demandera votre mot de passe
	  en quittant l'éditeur si vous n'êtes pas le
	  super-utilisateur.</p></div><div class="example"><a id="idp76058320"></a><div class="example-title">Exemple 14.3. <code class="command">chpass</code> interactif par le super-utilisateur</div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Login: jru
Password: *
Uid [#]: 1001
Gid [# or name]: 1001
Change [month day year]:
Expire [month day year]:
Class:
Home directory: /home/jru
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><p>Un utilisateur ordinaire ne peut modifier qu'une partie de
	ces informations, et seulement celles qui le concernent.</p><div class="example"><a id="idp76060368"></a><div class="example-title">Exemple 14.4. <code class="command">chpass</code> interactif par un utilisateur ordinaire</div><div class="example-contents"><pre class="screen">#Changing user database information for jru.
Shell: /usr/local/bin/zsh
Full Name: J. Random User
Office Location:
Office Phone:
Home Phone:
Other information:</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chfn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chfn</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chsh</span>(1)</span></a> sont
	  juste des liens vers <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a>, comme le sont
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchpass</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchfn&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchfn</span>(1)</span></a>, et
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypchsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypchsh</span>(1)</span></a>.  NIS est supporté
	  automatiquement, aussi spécifier <code class="literal">yp</code>
	  avant la commande n'est pas nécessaire.  Si cela vous
	  semble confus, ne vous inquiétez pas, NIS sera
	  abordé dans le chapitre <a class="xref" href="#network-servers" title="Chapitre 29. Serveurs réseau">Chapitre 29, <em>Serveurs réseau</em></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-passwd"></a>14.6.4. <code class="command">passwd</code></h3></div></div></div><a id="idp76073168" class="indexterm"></a><a id="idp76073808" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> est la méthode habituelle
	pour modifier son mot de passe, ou celui d'un autre utilisateur
	si vous êtes le super-utilisateur.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour prévenir des modifications accidentelles ou
	  non autorisées, le mot de passe original doit
	  être entré avant de pouvoir fixer un nouveau mot
	  de passe.</p></div><div class="example"><a id="idp76076752"></a><div class="example-title">Exemple 14.5. Modifier votre mot de passe</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
Changing local password for jru.
Old password:
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div class="example"><a id="idp76078544"></a><div class="example-title">Exemple 14.6. Modifier le mot de passe d'un autre utilisateur en tant
	  que super-utilisateur</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>passwd jru</code></strong>
Changing local password for jru.
New password:
Retype new password:
passwd: updating the database...
passwd: done</pre></div></div><br class="example-break" /><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Comme pour <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chpass&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chpass</span>(1)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=yppasswd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">yppasswd</span>(1)</span></a> est juste un lien vers
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a>, donc NIS fonctionnera avec l'une
	  des deux commandes.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="users-pw"></a>14.6.5. <code class="command">pw</code></h3></div></div></div><a id="idp76088784" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> est un utilitaire en ligne de commande pour
	créer, supprimer, modifier, et lister utilisateurs et groupes.
	Il fonctionne comme une interface aux fichiers d'utilisateurs et
	de groupe.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> possède un ensemble puissant
	d'options qui le rende adapté à une utilisation
	dans des procédures, mais les nouveaux utilisateurs
	pourront le trouver plus compliqué que les autres
	commandes présentées ici.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-limiting"></a>14.7. Mettre en place des restrictions pour les utilisateurs</h2></div></div></div><a id="idp76096464" class="indexterm"></a><a id="idp76096976" class="indexterm"></a><p>Si vous avez plusieurs utilisateurs sur votre système,
      la possibilité de limiter leur utilisation du système
      peut venir à l'esprit.
      FreeBSD fournit plusieurs méthodes à
      l'administrateur système pour limiter la quantité de
      ressources système qu'un utilisateur peut utiliser.
      Ces limites sont généralement divisées
      en deux parties: les quotas disque, et les autres limites de
      ressource.</p><a id="idp76098512" class="indexterm"></a><a id="idp76099024" class="indexterm"></a><a id="idp76100176" class="indexterm"></a><p>Les quotas limitent l'utilisation des disques par les
      utilisateurs, et
      ils fournissent un moyen de
      vérifier rapidement cette utilisation
      sans avoir à faire des calculs à chaque fois.
      Les quotas sont abordés dans la <a class="xref" href="#quotas" title="19.15. Quotas d'utilisation des disques">Section 19.15, « Quotas d'utilisation des disques »</a>.</p><p>Les autres limites de ressource comprennent les moyens de
      limiter l'utilisation du CPU, de la mémoire, et les autres
      ressources qu'un utilisateur peut consommer.  Elles sont
      définies en employant des classes de session et sont
      abordées ici.</p><a id="idp76101840" class="indexterm"></a><p>Les classes de session sont définies dans
      <code class="filename">/etc/login.conf</code>.  La sémantique
      précise sort du cadre de cette section, mais est
      décrite en détail dans la page de manuel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.  Il est suffisant de dire que chaque
      utilisateur est assigné à une classe
      (<code class="literal">default</code> par défaut), et que chaque classe
      dispose d'un ensemble de capacités associées.
      La forme utilisée pour ces capacités est une paire
      <code class="literal">nom=valeur</code>
      où <em class="replaceable"><code>nom</code></em> est un identifiant connu et
      <em class="replaceable"><code>valeur</code></em> est une chaîne arbitraire
      dépendante du nom.  Paramétrer des classes et des
      capacités est plutôt direct et également
      décrit dans <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le système ne lit normalement pas directement le fichier
	<code class="filename">/etc/login.conf</code>, mais plutôt la
	base de données
	<code class="filename">/etc/login.conf.db</code> qui fournit plus
	rapidement les réponses au système.  Pour
	générer <code class="filename">/etc/login.conf.db</code>
	à partir du fichier
	<code class="filename">/etc/login.conf</code>, exécutez la
	commande suivante:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre></div><p>Les limites de ressource sont différentes des
      capacités standards des classes en deux points.
      Premièrement, pour chaque limite, il existe une limite douce
      (actuelle) et limite dure.  Une limite douce peut être
      ajustée par l'utilisateur ou une application, mais jamais
      dépasser la limite dure.  Cette dernière peut être
      abaissée par l'utilisateur, mais jamais augmentée.
      Deuxièmement, la plupart des limites de ressource s'applique
      par processus à un utilisateur spécifique, et non pas
      à l'utilisateur dans sa totalité.  Notez, cependant, que ces
      différences sont exigées par la manipulation
      spécifique des
      limites, et non pas par l'implémentation du système des
      capacités des classes de session utilisateur (i.e., elles ne sont
      <span class="emphasis"><em>vraiment</em></span> pas un cas particulier des
      capacités des classes de session).</p><p>Sans plus attendre, ci-dessous sont présentées
      les limites de ressource les plus souvent utilisées
      (le reste, avec les autres capacités des classes
      de session, peut être trouvé dans
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">coredumpsize</code></span></dt><dd><a id="idp76117456" class="indexterm"></a><a id="idp76117968" class="indexterm"></a><p>La limite sur la taille du fichier core
	    généré par un programme est, pour
	    d'évidentes raisons, subordonnée aux autres limites
	    sur l'utilisation du disque (e.g., <code class="literal">filesize</code>,
	    ou les quotas de disque).  Néanmoins, elle est souvent
	    employée comme méthode moins
	    sévère pour contrôler la
	    consommation d'espace disque: puisque les utilisateurs ne
	    génèrent pas de fichier core eux-mêmes,
	    et souvent ne les
	    suppriment pas, paramétrer cela peut leur éviter
	    de manquer d'espace disque si un programme important (e.g.,
	    <span class="application">emacs</span>) plante.</p></dd><dt><span class="term"><code class="literal">cputime</code></span></dt><dd><a id="idp76121552" class="indexterm"></a><a id="idp76122064" class="indexterm"></a><p>C'est la quantité maximale de temps CPU qu'un
	    processus d'un utilisateur peut consommer.  Les processus
	    la dépassant seront tués par le noyau.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">C'est une limite sur le <span class="emphasis"><em>temps</em></span>
		CPU consommé, non sur le pourcentage comme
		affiché par certains champs de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> et
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>.  Une limite sur ce dernier est, au moment de
		l'écriture de ces lignes, impossible, et serait
		plutôt inutile: un compilateur&#8212;probablement
		une tâche légitime&#8212;peut
		aisément utiliser presque 100% du CPU pendant un certain
		temps.</p></div></dd><dt><span class="term"><code class="literal">filesize</code></span></dt><dd><a id="idp76127696" class="indexterm"></a><a id="idp76128208" class="indexterm"></a><p>C'est la taille maximale du plus gros fichier qu'un utilisateur
	    peut posséder.  Contrairement aux <a class="link" href="#quotas" title="19.15. Quotas d'utilisation des disques">quotas</a>, cette limite ne s'applique
	    qu'aux fichiers individuellement, et non pas sur l'ensemble
	    lui-même de tous les fichiers que possède
	    un utilisateur.</p></dd><dt><span class="term"><code class="literal">maxproc</code></span></dt><dd><a id="idp76131536" class="indexterm"></a><a id="idp76132048" class="indexterm"></a><p>C'est le nombre maximal de processus que peut exécuter
	    un utilisateur en même temps.  Ceci inclut
	    les processus de premier plan et de tâche de fond.
	    Pour d'évidentes raisons, il ne doit pas être plus
	    grand que les limites du système spécifiées
	    par la variable <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    <code class="varname">kern.maxproc</code>.  Notez en outre qu'une
	    valeur trop basse peut gêner la productivité
	    de l'utilisateur: il est souvent utile d'ouvrir plusieurs
	    sessions à la fois ou d'exécuter des opérations
	    sous forme de &#8220;pipeline&#8221;.
	    Certaines tâches, comme
	    compiler un gros programme, engendrent également
	    de multiples processus (e.g., <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cc</span>(1)</span></a>, et
	    autres préprocesseurs).</p></dd><dt><span class="term"><code class="literal">memorylocked</code></span></dt><dd><a id="idp76149968" class="indexterm"></a><a id="idp76150480" class="indexterm"></a><p>C'est la quantité maximale de mémoire
	    qu'un processus peut avoir demandé de verrouiller en
	    mémoire principale (e.g., voir <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mlock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span></a>).
	    Certains programmes système critiques, comme
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a>, sont verrouillés en mémoire
	    principale de sorte qu'en cas de dépassement de la
	    mémoire de pagination, ils ne contribuent pas aux ennuis
	    du système.</p></dd><dt><span class="term"><code class="literal">memoryuse</code></span></dt><dd><a id="idp76155088" class="indexterm"></a><a id="idp76155600" class="indexterm"></a><p>C'est la quantité maximale de mémoire
	    qu'un processus peut consommer à un instant donné.
	    Cela inclus la mémoire principale et celle de pagination.
	    Ce n'est pas le remède miracle pour restreindre la
	    consommation de mémoire, mais c'est un bon
	    début.</p></dd><dt><span class="term"><code class="literal">openfiles</code></span></dt><dd><a id="idp76158416" class="indexterm"></a><a id="idp76158928" class="indexterm"></a><p>C'est le nombre maximal de fichiers qu'un processus peut
	    avoir ouvert.  Sous FreeBSD, des fichiers sont également
	    employés pour représenter les sockets et
	    les canaux IPC, par conséquent faites attention
	    à ne fixer une valeur trop basse.  La limite
	    générale du système pour cela est
	    définie par la variable <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	    <code class="varname">kern.maxfiles</code>.</p></dd><dt><span class="term"><code class="literal">sbsize</code></span></dt><dd><a id="idp76163024" class="indexterm"></a><a id="idp76163536" class="indexterm"></a><p>C'est une limite sur la quantité de
	    mémoire réseau, et donc de &#8220;mbufs&#8221;,
	    qu'un utilisateur peut consommer.  Ceci est à
	    l'origine une réponse à une vielle attaque par
	    refus de service en créant de nombreuses sockets, mais peut
	    être généralement employée
	    pour limiter les communications réseau.</p></dd><dt><span class="term"><code class="literal">stacksize</code></span></dt><dd><a id="idp76166352" class="indexterm"></a><a id="idp76166864" class="indexterm"></a><p>C'est la taille maximale de la pile d'un processus.
	    Seule, cela n'est pas suffisant pour limiter la quantité
	    de mémoire que peut utiliser un programme, par
	    conséquent, cette limite devra être
	    utilisée en même temps que d'autres
	    limitations.</p></dd></dl></div><p>Il y a quelques éléments
      à se rappeler quand on fixe des
      limites de ressource.  Quelques astuces générales,
      suggestions, et commentaires divers:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les processus lancés au démarrage
	  du système par <code class="filename">/etc/rc</code>
	  sont assignés à la classe
	  <code class="literal">daemon</code>.</p></li><li class="listitem"><p>Bien que le fichier <code class="filename">/etc/login.conf</code>
	  qui est fourni avec le système est une bonne source
	  de valeurs raisonnables pour la plupart des limites, seul
	  vous, l'administrateur, peut savoir ce qui est approprié
	  à votre système.  Fixer une limite trop haute
	  peut laisser la porte ouverte aux abus, alors qu'une limite
	  trop basse peut être un frein à la
	  productivité.</p></li><li class="listitem"><p>Les utilisateurs du système X Window (X11) devraient
	  se voir allouer plus de ressources que les autres
	  utilisateurs.  X11 par lui-même utilise beaucoup de
	  ressources, mais il encourage également les
	  utilisateurs à exécuter plus de
	  programmes simultanément.</p></li><li class="listitem"><p>Souvenez-vous que de nombreuses limites ne s'appliquent
	  qu'aux processus individuels, et non pas à l'utilisateur
	  globalement.  Par exemple, paramétrer
	  <code class="varname">openfiles</code> à 50 signifie
	  que chaque processus que l'utilisateur exécute pourra ouvrir
	  jusqu'à 50 fichiers.  Ainsi, la quantité totale
	  de fichiers qu'un utilisateur peut ouvrir est la valeur
	  <code class="literal">openfiles</code> multipliée par la valeur
          <code class="literal">maxproc</code>.  Ceci s'applique également
	  à la consommation de mémoire.</p></li></ul></div><p>Pour de plus amples informations sur les limites et les
      classes de session et les capacités en
      général, veuillez consulter les pages de manuel
      appropriées: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cap_mkdb&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cap_mkdb</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getrlimit&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="users-groups"></a>14.8. Groupes</h2></div></div></div><a id="idp76191056" class="indexterm"></a><a id="idp76191568" class="indexterm"></a><a id="idp76192464" class="indexterm"></a><p>Un groupe est simplement une liste d'utilisateurs.  Les
      groupes sont identifiés par leur nom et leur GID
      (identificateur de groupe).  Dans FreeBSD (et la plupart des
      systèmes <span class="trademark">UNIX</span>®), les deux éléments
      que le noyau utilise pour décider si un processus
      est autorisé à faire quelque chose sont son ID
      utilisateur et la liste des groupes auxquels il appartient.
      Différent d'un identificateur utilisateur, un
      processus est associé à une liste de groupes.  Vous pourrez
      entendre faire références au &#8220;group ID&#8221;
      d'un utilisateur ou d'un processus; la plupart du temps on veut
      parler du premier groupe dans la liste.</p><p>La table d'équivalence nom de groupe et identificateur de
      groupe se trouve dans <code class="filename">/etc/group</code>.  C'est un
      fichier texte avec quatre champs délimités par deux points.
      Le premier champ est le nom du groupe, le second est le mot de
      passe crypté, le troisième est l'ID du groupe, et le
      quatrième est
      une liste de membres séparés par des virgules.
      Ce fichier peut sans risque être édité
      à la main (en supposant, bien sûr, que vous ne faites pas
      d'erreur de syntaxe!).  Pour une description complète de le
      syntaxe, voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=group&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">group</span>(5)</span></a>.</p><p>Si vous ne voulez pas éditer
      <code class="filename">/etc/group</code> à la main, vous pouvez
      utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> pour ajouter et éditer
      des groupes.  Par exemple, pour ajouter un groupe appelé
      <code class="systemitem">teamtwo</code> et ensuite vérifier qu'il existe
      bien vous pouvez utiliser:</p><div class="example"><a id="idp76198096"></a><div class="example-title">Exemple 14.7. Ajouter un groupe en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupadd teamtwo</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:</pre></div></div><br class="example-break" /><p>Le nombre <code class="literal">1100</code> ci-dessus est
      l'identificateur de groupe pour le groupe
      <code class="systemitem">teamtwo</code>.  A cet instant
      <code class="systemitem">teamtwo</code> n'a aucun membre, et est par
      conséquent plutôt inutile.  Changeons cela en ajoutant
      <code class="systemitem">jru</code> au groupe
      <code class="systemitem">teamtwo</code>.</p><div class="example"><a id="idp76241104"></a><div class="example-title">Exemple 14.8. Ajouter quelqu'un dans un groupe en utilisant
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw groupmod teamtwo -M jru</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>pw groupshow teamtwo</code></strong>
teamtwo:*:1100:jru</pre></div></div><br class="example-break" /><p>Le paramètre ajouté à l'option <code class="option">-M</code>
      est une liste, délimitée par des virgules,
      d'utilisateurs qui sont membres du groupe.  Des sections
      précédentes nous savons que le fichier des mots de passe
      contient également un groupe pour chaque utilisateur.  Le dernier
      (utilisateur) est automatiquement ajouté à la
      liste des groupes par le système; l'utilisateur
      n'apparaîtra pas comme étant membre quand on utilise
      l'option <code class="option">groupshow</code> avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>, mais
      apparaîtra quand l'information est demandée
      par l'intermédiaire de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=id&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">id</span>(1)</span></a> ou un outil similaire.
      En d'autres termes, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> manipule uniquement le fichier
      <code class="filename">/etc/group</code>, il n'essaiera jamais de lire des
      données supplémentaires à partir
      du fichier <code class="filename">/etc/passwd</code>.</p><div class="example"><a id="idp76252752"></a><div class="example-title">Exemple 14.9. Utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=id&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">id</span>(1)</span></a> pour déterminer
	l'appartenance à un groupe</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>id jru</code></strong>
uid=1001(jru) gid=1001(jru) groups=1001(jru), 1100(teamtwo)</pre></div></div><br class="example-break" /><p>Comme vous pouvez le voir, <code class="systemitem">jru</code> est membre
      des groupes <code class="systemitem">jru</code> et
      <code class="systemitem">teamtwo</code>.</p><p>Pour plus d'information sur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>, voir sa page de
      manuel, et pour d'information sur le format de
      <code class="filename">/etc/group</code>, consultez la page de manuel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=group&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">group</span>(5)</span></a>.</p></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp75920208" class="footnote"><p><a href="#idp75920208" class="para"><sup class="para">[6] </sup></a>Bon, à moins que vous ne connectiez de multiples
	terminaux, mais nous laisserons cela pour le
	<a class="xref" href="#serialcomms" title="Chapitre 26. Serial Communications ** Traduction en Cours **">Chapitre 26, <em>Serial Communications ** Traduction en Cours **</em></a>.</p></div><div id="ftn.users-largeuidgid" class="footnote"><p><a href="#users-largeuidgid" class="para"><sup class="para">[7] </sup></a>Il est possible d'utiliser pour les UID/GIDs tout
	      nombre inférieur à 4294967295, mais de
	      telles valeurs peuvent être à l'origine de
	      sérieux problèmes avec des logiciels qui
	      font des suppositions sur la valeur des
	      identifiants.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security"></a>Chapitre 15. Sécurité</h2></div><div><span class="authorgroup">Une grande partie de ce chapitre provient de la page
	  de manuel security(7) écrite par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Matthew</span> <span class="surname">Dillon</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#security-synopsis">15.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#security-intro">15.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#securing-freebsd">15.3. Securing FreeBSD ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#crypt">15.4. DES, MD5, et chiffrement</a></span></dt><dt><span class="sect1"><a href="#one-time-passwords">15.5. Mots de passe non réutilisables</a></span></dt><dt><span class="sect1"><a href="#tcpwrappers">15.6. L'encapsuleur TCP (<span class="quote">« <span class="quote">TCP Wrappers</span> »</span>)</a></span></dt><dt><span class="sect1"><a href="#kerberosIV">15.7. Kerberos</a></span></dt><dt><span class="sect1"><a href="#kerberos5">15.8. <span class="application">Kerberos5</span> ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#openssl">15.9. OpenSSL</a></span></dt><dt><span class="sect1"><a href="#ipsec">15.10. IPsec</a></span></dt><dt><span class="sect1"><a href="#openssh">15.11. OpenSSH</a></span></dt><dt><span class="sect1"><a href="#fs-acl">15.12. Listes de contrôle d'accès au système de
      fichiers</a></span></dt><dt><span class="sect1"><a href="#security-portaudit">15.13. Surveillance des problèmes de sécurité
      relatifs aux programmes tierce-partie</a></span></dt><dt><span class="sect1"><a href="#security-advisories">15.14. Avis de sécurité de FreeBSD</a></span></dt><dt><span class="sect1"><a href="#security-accounting">15.15. Comptabilité des processus</a></span></dt></dl></div><a id="idp76262864" class="indexterm"></a><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-synopsis"></a>15.1. Synopsis</h2></div></div></div><p>Ce chapitre sera une introduction aux concepts de base de la
      sécurité système, à certaines
      règles empiriques, et à
      des sujets avancés sous FreeBSD.  De nombreux sujets
      abordés ici peuvent être appliqués à
      la sécurité système et à l'Internet en
      général.
      L'Internet n'est plus un endroit &#8220;amical&#8221;
      dans lequel chacun désire être votre gentil voisin.
      Sécuriser votre système est impératif pour
      protéger vos données, la propriété
      intellectuelle,
      votre temps, et bien plus des mains des &#8220;hackers&#8221; et
      équivalents.</p><p>FreeBSD fournit un ensemble d'utilitaires et de mécanismes
      pour assurer l'intégrité et la sécurité
      de votre système et votre réseau.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les concepts de base de la sécurité
	  système en ce qui concerne FreeBSD.</p></li><li class="listitem"><p>Les différents mécanismes de chiffrement
	  disponibles sous FreeBSD, comme <acronym class="acronym">DES</acronym> et <acronym class="acronym">MD5</acronym>.</p></li><li class="listitem"><p>Comment mettre en place une authentification
	  par mot de passe non réutilisable.</p></li><li class="listitem"><p>Comment configurer l'encapsuleur <acronym class="acronym">TCP</acronym>
	  pour une utilisation avec
	  <span class="application">inetd</span>.</p></li><li class="listitem"><p>Comment configurer <span class="application">KerberosIV</span>
	  sous les versions de FreeBSD antérieures à la
	  5.0.</p></li><li class="listitem"><p>Comment configurer <span class="application">Kerberos5</span>
	  sous FreeBSD.</p></li><li class="listitem"><p>Comment configurer IPsec et mettre en place un
	  <acronym class="acronym">VPN</acronym> entre machines FreeBSD et
	  <span class="trademark">Windows</span>®.</p></li><li class="listitem"><p>Comment configurer et utiliser
	  <span class="application">OpenSSH</span>, la version de
	  <acronym class="acronym">SSH</acronym> implémentée sous
	  FreeBSD.</p></li><li class="listitem"><p>Ce que sont les <acronym class="acronym">ACL</acronym>s et comment les
	  utiliser.</p></li><li class="listitem"><p>Comment employer l'utilitaire
	  <span class="application">Portaudit</span> pour l'audit des
	  logiciels tierce-partie installés à partir du
	  catalogue des logiciels portés.</p></li><li class="listitem"><p>Comment utiliser les avis de sécurité de
	  FreeBSD.</p></li><li class="listitem"><p>Ce qu'est la comptabilité des processus et
	  comment l'activer sous FreeBSD.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les concepts de base de FreeBSD et
	  d'Internet.</p></li></ul></div><p>D'autres sujets relatifs à la sécurité
      sont abordés par ailleurs dans ce Manuel.  Par exemple,
      le contrôle d'accès obligatoire est
      présenté dans le <a class="xref" href="#mac" title="Chapitre 17. Mandatory Access Control ** Traduction en Cours **">Chapitre 17, <em>Mandatory Access Control ** Traduction en Cours **</em></a> et les
      coupe-feux Internet sont développés dans le <a class="xref" href="#firewalls" title="Chapitre 30. Firewalls ** Traduction en Cours **">Chapitre 30, <em>Firewalls ** Traduction en Cours **</em></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-intro"></a>15.2. Introduction</h2></div></div></div><p>La sécurité est un domaine qui débute
      et se termine au niveau de l'administrateur système.
      Alors que tous les systèmes multi-utilisateurs <span class="trademark">UNIX</span>® BSD
      ont des sécurités inhérentes, la mise en
      place et la maintenance des mécanismes
      supplémentaires de sécurité pour conserver
      des utilisateurs <span class="quote">« <span class="quote">honnêtes</span> »</span> est probablement
      une des tâches les plus vastes de l'administrateur
      système.  La sécurité des machines est
      celle que vous voulez bien mettre en oeuvre, de plus les
      préoccupations en matière de
      sécurité sont plus que jamais en concurrence avec
      les besoins de confort des utilisateurs.  Les systèmes
      <span class="trademark">UNIX</span>® sont, en général, capables
      d'exécuter un nombre important de processus
      simultanément et plusieurs de ces processus fonctionnent
      en tant que serveur &#8212; cela signifiant que des
      entités extérieures peuvent se connecter et
      échanger avec ces processus.  Comme les mini-ordinateurs
      et les gros ordinateurs d'hier deviennent aujourd'hui nos
      ordinateurs de bureau, et comme les ordinateurs sont
      désormais en réseau et reliés à
      Internet, la sécurité devient d'autant plus un
      problème majeur.</p><p>La sécurité système concerne
      également la lutte contre les diverses formes d'attaque,
      y compris les attaques destinées à faire planter,
      ou à rendre inutilisable le système, mais qui ne
      cherchent pas à compromettre le compte
      <code class="systemitem">root</code>.  Les problèmes de
      sécurité peuvent être divisés en
      plusieurs catégories:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Attaques par déni de service.</p></li><li class="listitem"><p>Compte utilisateur compromis.</p></li><li class="listitem"><p>Le compte <code class="systemitem">root</code> compromis par
	  l'intermédiaire de serveurs accessibles.</p></li><li class="listitem"><p>Le compte <code class="systemitem">root</code> compromis par
	  l'intermédiaire de comptes utilisateur.</p></li><li class="listitem"><p>Création d'une <span class="quote">« <span class="quote">Backdoor</span> »</span> (porte
	  dérobée).</p></li></ol></div><a id="idp76309968" class="indexterm"></a><a id="idp76311120" class="indexterm"></a><a id="idp76312656" class="indexterm"></a><p>Une attaque par déni de service (<span class="quote">« <span class="quote">DoS</span> »</span>)
      est une action qui prive la machine de ressources
      nécessaires à son bon fonctionnement.
      Généralement, les attaques par déni de
      service sont des mécanismes de force brute qui tentent de
      faire planter ou tout au moins de rendre inutilisable la machine
      en saturant ses serveurs ou sa pile réseau.  Certaines
      attaques par déni de service peuvent se servir de bogues
      présents dans la pile réseau pour faire planter
      une machine avec un seul paquet.  Ces problèmes ne
      peuvent être corrigés que par l'application d'un
      correctif sur le noyau.  On peut souvent remédier aux
      attaques sur les serveurs en fixant correctement des options
      pour limiter la charge que provoquent ces serveurs sur le
      système lors de conditions critiques.  Les attaques
      réseau par force brute sont plus difficiles à
      traiter.  Une attaque par paquets usurpés
      (<span class="quote">« <span class="quote">spoofed-packet</span> »</span>), par exemple, est
      quasi-impossible à arrêter, à moins de
      déconnecter de l'Internet votre système.  Elle
      peut ne pas être en mesure de stopper votre machine, mais
      elle peut saturer votre connexion Internet.</p><a id="idp76318544" class="indexterm"></a><p>La compromission d'un compte utilisateur est bien plus
      fréquente qu'une attaque de type DoS.  De nombreux
      administrateurs utilisent toujours sur leurs machines les
      versions standards des serveurs
      <span class="application">telnetd</span>,
      <span class="application">rlogind</span>,
      <span class="application">rshd</span>, et
      <span class="application">ftpd</span>.  Par défaut, ces
      serveurs ne fonctionnent pas avec des connexions
      chiffrées.  Cela aura pour résultat si vous
      disposez d'un nombre d'utilisateurs conséquent qu'un ou
      plusieurs de ces utilisateurs ayant l'habitude de se connecter
      à partir d'une machine distante (ce qui représente
      la manière la plus courante et la plus pratique pour
      ouvrir une session sur un système) auront leur mot de
      passe <span class="quote">« <span class="quote">sniffé</span> »</span>.  L'administrateur
      système méticuleux analysera ses journaux de
      connexions effectuées à partir de machines
      distantes à la recherche d'adresses sources suspectes
      même pour les ouvertures de sessions ayant
      réussies.</p><p>Il faut toujours supposer qu'une fois l'attaquant a
      l'accès à un compte utilisateur, il pourra
      s'attaquer et avoir accès au compte
      <code class="systemitem">root</code>.  Cependant, la réalité
      est que dans un système bien sécurisé et
      surveillé, l'accès à un compte utilisateur
      ne donne pas nécessairement à l'attaquant
      l'accès au compte <code class="systemitem">root</code>.  Cette
      distinction est importante car sans accès aux droits de
      <code class="systemitem">root</code>, l'attaquant ne peut
      généralement pas dissimuler ses traces et peut,
      dans le meilleur des cas, ne rien faire d'autre que mettre la
      pagaille dans les fichiers de l'utilisateur ou faire planter la
      machine.  La compromission de comptes utilisateur est
      très fréquente parce que les utilisateurs n'ont
      pas l'habitude de prendre les précautions que prennent
      les administrateurs système.</p><a id="idp76323920" class="indexterm"></a><p>Les administrateurs doivent garder à l'esprit qu'il
      existe potentiellement de nombreuses manières d'avoir
      accès au compte <code class="systemitem">root</code> sur une
      machine.  L'attaquant peut connaître le mot de passe
      <code class="systemitem">root</code>, l'attaquant peut trouver un bogue
      dans un serveur tournant avec les droits de
      <code class="systemitem">root</code> et être en mesure de devenir
      <code class="systemitem">root</code> par l'intermédiaire d'une
      connexion réseau à ce serveur, ou l'attaquant peut
      connaître un bogue dans un programme suid-root qui permet
      de devenir <code class="systemitem">root</code> une fois qu'il a
      accédé à un compte utilisateur.  Si un
      attaquant a trouvé un moyen de devenir
      <code class="systemitem">root</code> sur une machine, il n'aura
      peut-être pas besoin d'installer une
      <span class="quote">« <span class="quote">backdoor</span> »</span> (porte dérobée).  De
      nombreux trous de sécurité
      <code class="systemitem">root</code> trouvés et fermés
      à temps demandent un travail considérable à
      l'attaquant pour effacer ses traces, aussi la plupart des
      attaquants installe des portes dérobées.  Une
      porte dérobée offre à l'attaquant un moyen
      aisé d'avoir à nouveau accès aux droits de
      <code class="systemitem">root</code> sur le système, mais cela donne
      également à l'administrateur système
      intelligent un bon moyen de détecter l'intrusion.  Rendre
      impossible à un attaquant l'installation d'une porte
      dérobée peut en fait être
      préjudiciable à votre sécurité,
      parce que cela ne fermera pas le trou qu'a découvert en
      premier lieu l'attaquant pour pénétrer sur le
      système.</p><p>Les solutions aux problèmes de sécurité
      devraient toujours être mises en place suivant l'approche
      multi-couches de <span class="quote">« <span class="quote">la pelure d'oignon</span> »</span>, elles
      peuvent être classées comme suit:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Sécuriser les comptes <code class="systemitem">root</code>
	  et d'administration.</p></li><li class="listitem"><p>Sécuriser les serveurs exécutés
	  avec les droits de <code class="systemitem">root</code> et les binaires
	  suid/sgid.</p></li><li class="listitem"><p>Sécuriser les comptes utilisateurs.</p></li><li class="listitem"><p>Sécuriser le fichier des mots de passe.</p></li><li class="listitem"><p>Sécuriser le noyau, les
	  périphériques et les systèmes de
	  fichiers.</p></li><li class="listitem"><p>Installer un mécanisme de détection rapide
	  des modifications inappropriées apportées au
	  système.</p></li><li class="listitem"><p>La paranoïa.</p></li></ol></div><p>La section suivante de ce chapitre abordera de
      manière plus approfondie les points énoncés
      ci-dessus.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="securing-freebsd"></a>15.3. Securing FreeBSD ** Traduction en Cours **</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="crypt"></a>15.4. DES, MD5, et chiffrement</h2></div><div><span class="authorgroup">En partie réécrit et mis à jour
	    par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div></div></div><a id="idp76346320" class="indexterm"></a><a id="idp76347472" class="indexterm"></a><a id="idp76347984" class="indexterm"></a><a id="idp76348496" class="indexterm"></a><p>Chaque utilisateur d'un système <span class="trademark">UNIX</span>® possède un
      mot de passe associé à son compte.
      Il semble évident
      que ces mots de passe ne doivent être connus que de
      l'utilisateur et du système d'exploitation.  Afin de
      conserver ces mots de passe secrets, ils sont chiffrés
      avec ce que l'on appelle un &#8220;hachage
      irréversible&#8221;, ce qui signifie que le mot de passe
      peut être aisément chiffré mais pas
      déchiffré.
      En d'autres mots, ce que nous vous disions précédemment
      n'est même pas vrai: le système d'exploitation
      lui-même ne connaît pas <span class="emphasis"><em>vraiment</em></span>
      le mot de passe.  Il ne connaît que la forme
      <span class="emphasis"><em>chiffrée</em></span> du mot de passe.  La
      seule manière d'obtenir le mot de passe en
      <span class="emphasis"><em>clair</em></span> est d'effectuer une recherche par
      force brute de tous les mots de passe possibles.</p><p>Malheureusement, la seule méthode sécurisée
      pour chiffrer les mots de passe quand <span class="trademark">UNIX</span>® a vu le jour
      était basée sur DES, le &#8220;Data Encryption
      Standard&#8221; (standard de chiffrement des données).
      C'était un problème mineur pour les utilisateurs
      résidants aux Etats-Unis, mais puisque le code source
      de DES ne pouvait être exporté en dehors des Etats-Unis,
      FreeBSD dû trouver un moyen de respecter la législation
      américaine et de rester compatible avec les autres
      systèmes <span class="trademark">UNIX</span>® qui utilisaient encore DES.</p><p>La solution fut de séparer les bibliothèques
      de chiffrement de façon à ce que les utilisateurs
      américains puissent installer les bibliothèques DES
      et utiliser DES, mais que les utilisateurs internationaux
      disposent d'une méthode de chiffrement non restreinte
      à l'exportation.  C'est comment FreeBSD est venu à
      utiliser MD5 comme méthode de chiffrement par défaut.
      MD5 est reconnu comme étant plus sure que DES,
      l'installation de DES est proposée principalement
      pour des raisons de compatibilité.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76352976"></a>15.4.1. Identifier votre mécanisme de chiffrement</h3></div></div></div><p>Avant FreeBSD 4.4 <code class="filename">libcrypt.a</code>
	était un lien symbolique pointant sur la bibliothèque
	utilisée pour le chiffrement.  FreeBSD 4.4 modifia
	<code class="filename">libcrypt.a</code> pour fournir une bibliothèque
	de hachage pour l'authentification des mots de passe
	configurable.  Actuellement la bibliothèque supporte les
	fonctions de hachage DES, MD5 et Blowfish.  Par défaut
	FreeBSD utilise MD5 pour chiffrer les mots de passe.</p><p>Il est relativement facile d'identifier quelle
	méthode de chiffrement FreeBSD utilise.  Examiner les
	mots de passe chiffrés dans le fichier
	<code class="filename">/etc/master.passwd</code> est une méthode.
	Les mots de passe MD5 sont plus longs que les mots de passe
	DES, et commencent par les caractères
	<code class="literal">$1$</code>.  Les mots de passe
	débutant par <code class="literal">$2$</code> sont
	chiffrés suivant la méthode Blowfish.  Les mots de
	passe DES n'ont pas de caractéristique particulière,
	mais sont plus courts que les mots de passe MD5 et utilisent
	un alphabet de 64 caractères qui ne contient pas le
	caractère <code class="literal">$</code>, aussi une
	chaîne relativement courte qui ne commence pas par un dollar
	a donc de très fortes chances d'être un mot de passe
	DES.</p><p>Le format utilisé par les nouveaux mots de passe est
	contrôlé par la capacité de classe de session
	<code class="literal">passwd_format</code> dans
	<code class="filename">/etc/login.conf</code>, qui prend comme
	valeur <code class="literal">des</code>, <code class="literal">md5</code> ou
	<code class="literal">blf</code>.  Voir la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> pour plus d'information sur les
	capacités de classe de session.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="one-time-passwords"></a>15.5. Mots de passe non réutilisables</h2></div></div></div><a id="idp76365008" class="indexterm"></a><a id="idp76365520" class="indexterm"></a><p>S/Key est un système de mots de passe non
      réutilisables basé sur une fonction de hachage
      irréversible.  FreeBSD utilise le hachage MD4 pour des
      raisons de compatibilité mais d'autres système
      utilisent MD5 et DES-MAC.  S/Key fait partie du système
      de base de FreeBSD depuis la version 1.1.5 et est aussi
      utilisé sur un nombre toujours plus important d'autres
      systèmes d'exploitation.  S/Key est une marque
      déposée de Bell
      Communications Research, Inc.</p><p>Depuis la version 5.0 de FreeBSD, S/Key a été
      remplacé par la fonction équivalente OPIE
      (&#8220;One-time Passwords In Everything&#8221; &#8212; Mots de
      passe non réutilisables dans toutes les applications).
      OPIE utilise le hachage MD5 par défaut.</p><p>Il existe trois types de mots de passe dont nous parlerons
      dans ce qui suit.  Le premier est votre mot de passe <span class="trademark">UNIX</span>®
      habituel ou mot de passe Kerberos; nous appellerons &#8220;mot
      de passe <span class="trademark">UNIX</span>®&#8220;.  Le deuxième type est le mot de passe
      généré par les programmes
      S/Key <code class="command">key</code> ou
      OPIE <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opiekey&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">opiekey</span>(1)</span></a> et reconnu par les programmes
      <code class="command">keyinit</code> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opiepasswd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">opiepasswd</span>(1)</span></a> et l'invite
      de session; nous appellerons ceci un &#8220;mot de passe non
      réutilisable&#8221;.  Le dernier type de mot de passe
      est le mot de passe secret que vous donnez aux programmes
      <code class="command">key</code>/<code class="command">opiekey</code> (et parfois
      aux programmes
      <code class="command">keyinit</code>/<code class="command">opiepasswd</code>) qui
      l'utilisent pour générer des mots de passe non
      réutilisable; nous l'appellerons &#8220;mot de passe
      secret&#8221; ou tout simplement &#8220;mot de
      passe&#8221;.</p><p>Le mot de passe secret n'a rien à voir avec
      votre mot de passe <span class="trademark">UNIX</span>®; ils peuvent être identique,
      mais c'est déconseillé.  Les mots de passe secret
      S/Key et OPIE ne sont pas limités à 8
      caractères comme les
      anciens mots de passe <span class="trademark">UNIX</span>®<a href="#ftn.idp76374224" class="footnote" id="idp76374224"><sup class="footnote">[8]</sup></a>, ils peuvent avoir la longueur que
      vous désirez.  Des mots de passe de six ou sept mots de long
      sont relativement communs.  La plupart du temps, le système
      S/Key ou OPIE fonctionne de façon complètement
      indépendante du système de mot de passe <span class="trademark">UNIX</span>®.</p><p>En plus du mot de passe, deux autres types de données
      sont importantes pour S/Key et OPIE.  L'une d'elles est
      connue sous le nom de &#8220;germe&#8221; (&#8220;seed&#8221;)
      ou &#8220;clé&#8221;, formé de deux lettres et
      cinq chiffres.  L'autre est ce que l'on appelle le
      &#8220;compteur d'itérations&#8221;, un nombre compris
      entre 1 et 100.  S/Key génère un mot de passe non
      réutilisable en concaténant le germe et le mot de
      passe secret, puis en appliquant la fonction de hachage MD4/MD5
      autant de fois qu'indiqué par le compteur
      d'itérations, et en convertissant le résultat en
      six courts mots anglais.
      Ces six mots anglais constituent votre mot de
      passe non réutilisable.  Le système d'authentification
      (principalement PAM) conserve une trace du dernier mot de passe
      non réutilisable utilisé, et l'utilisateur est
      authentifié si la valeur de hachage du mot de passe fourni par
      l'utilisateur est la même que celle du mot de passe
      précédent.  Comme le hachage utilisé est
      irréversible, il est impossible de générer
      de mot de passe non réutilisable si on a surpris un de
      ceux qui a été utilisé avec succès; le
      compteur d'itérations est décrémenté
      après chaque ouverture de session réussie, de sorte que
      l'utilisateur et le programme d'ouverture de session restent en
      phase.  Quand le compteur d'itération passe à 1,
      S/Key et OPIE doivent être
      réinitialisés.</p><p>Il y a trois programmes impliqués dans chacun des
      systèmes que nous aborderons plus bas.  Les programmes
      <code class="command">key</code> et <code class="command">opiekey</code> ont pour
      paramètres un compteur d'itérations, un germe, et un
      mot de passe secret, et génère un mot
      de passe non réutilisable ou une liste de mots
      de passe non réutilisable.  Les programmes
      <code class="command">keyinit</code> et <code class="command">opiepasswd</code>
      sont utilisés pour initialiser respectivement
      S/Key et OPIE, et pour modifier les mots de passe, les compteurs
      d'itérations, ou les germes; ils prennent pour
      paramètres soit un mot de passe secret, soit un compteur
      d'itérations, soit un germe, et un mot de passe non
      réutilisable.  Le programme <code class="command">keyinfo</code> ou
      <code class="command">opieinfo</code> consulte le fichier d'identification
      correspondant (<code class="filename">/etc/skeykeys</code> ou
      <code class="filename">/etc/opiekeys</code>) et imprime la valeur du
      compteur d'itérations et le germe de l'utilisateur qui l'a
      invoqué.</p><p>Nous décrirons quatre sortes d'opérations.  La
      première est l'utilisation du programme
      <code class="command">keyinit</code> ou <code class="command">opiepasswd</code> sur
      une connexion sécurisée pour initialiser les mots
      de passe non réutilisables pour la première
      fois, ou pour modifier votre mot de passe ou votre germe.
      La seconde opération est l'emploi des programmes
      <code class="command">keyinit</code> ou <code class="command">opiepasswd</code>
      sur une connexion non sécurisée, en conjonction
      avec <code class="command">key</code> ou <code class="command">opiekey</code> sur
      une connexion sécurisée, pour faire la même
      chose.  La troisième est l'utilisation de
      <code class="command">key</code>/<code class="command">opiekey</code> pour ouvrir
      une session sur une connexion non sécurisée.
      La quatrième est l'emploi de <code class="command">key</code>
      ou <code class="command">opiekey</code> pour générer
      un certain nombre de clés qui peuvent être
      notées ou imprimées et emportées avec vous
      quand vous allez quelque part ou il n'y a aucune connexion
      sécurisée.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76395984"></a>15.5.1. Initialisation depuis une connexion
	sécurisée</h3></div></div></div><p>Pour initialiser S/Key pour la première fois,
	changer votre mot de passe, ou changer votre germe quand
	vous êtes attaché sous votre compte par
	l'intermédiaire d'une connexion sécurisée
	(e.g., sur la console d'une machine ou via
	<span class="application">ssh</span>), utilisez la commande
	<code class="command">keyinit</code> sans paramètres:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>keyinit</code></strong>
Adding unfurl:
Reminder - Only use this method if you are directly connected.
If you are using telnet or rlogin exit with no password and use keyinit -s.
Enter secret password:
Again secret password:

ID unfurl s/key is 99 to17757
DEFY CLUB PRO NASH LACE SOFT</pre><p>Pour OPIE, <code class="command">opiepasswd</code> est
	utilisé à la place:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd -c</code></strong>
[grimreaper] ~ $ opiepasswd -f -c
Adding unfurl:
Only use this method from the console; NEVER from remote. If you are using
telnet, xterm, or a dial-in, type ^C now or exit with no password.
Then run opiepasswd without the -c parameter.
Using MD5 to compute responses.
Enter new secret pass phrase:
Again new secret pass phrase:
ID unfurl OTP key is 499 to4268
MOS MALL GOAT ARM AVID COED
</pre><p>A l'invite <code class="prompt">Enter new secret pass phrase:</code>
	ou <code class="prompt">Enter secret password:</code>, vous devez entrer
	un mot de passe ou une phrase.  Rappelez-vous que ce n'est pas
	le mot de passe que vous utiliserez pour ouvrir une session,
	mais celui utilisé pour générer vos clés
	non réutilisables.  La ligne commençant par
	&#8220;ID&#8221; liste les paramètres de votre instance:
	votre nom d'utilisateur, la valeur de votre compteur
	d'itérations et votre germe.  Quand vous ouvrirez une
	session, le système aura mémorisé ces
	paramètres et vous les redonnera, vous n'avez donc
	pas besoin de les retenir.  La dernière ligne
	donne le mot de passe non réutilisable correspondant
	à ces paramètres et à votre mot de passe secret;
	si vous devez vous reconnectez immédiatement, c'est ce
	mot de passe que vous utiliseriez.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76401872"></a>15.5.2. Initialisation depuis une connexion non
	sécurisée</h3></div></div></div><p>Pour initialiser ou changer votre mot de passe secret
	par l'intermédiaire d'une connexion non
	sécurisée, il faudra avoir déjà
	une connexion sécurisée sur une machine
	où vous pouvez exécuter <code class="command">key</code> ou
	<code class="command">opiekey</code>; ce peut être
	depuis une icone sur le bureau d'un Macintosh
	ou depuis la ligne de commande d'une machine sûre.
	Il vous faudra également donner une valeur au compteur
	d'itération (100 est probablement une bonne valeur),
	et indiquer un germe ou utiliser la valeur aléatoire
	générée par le programme.  Sur la connexion non
	sécurisée (vers la machine que vous initialisez),
	employez la commande <code class="command">keyinit -s</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>keyinit -s</code></strong>
Updating unfurl:
Old key: to17758
Reminder you need the 6 English words from the key command.
Enter sequence count from 1 to 9999: <strong class="userinput"><code>100</code></strong>
Enter new key [default to17759]:
s/key 100 to 17759
s/key access password:
s/key access password:<strong class="userinput"><code>CURE MIKE BANE HIM RACY GORE</code></strong>
</pre><p>Pour OPIE, vous devez utiliser <code class="command">opiepasswd</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiepasswd</code></strong>

Updating unfurl:
You need the response from an OTP generator.
Old secret pass phrase:
        otp-md5 498 to4268 ext
        Response: GAME GAG WELT OUT DOWN CHAT
New secret pass phrase:
        otp-md5 499 to4269
        Response: LINE PAP MILK NELL BUOY TROY

ID mark OTP key is 499 gr4269
LINE PAP MILK NELL BUOY TROY
</pre><p>Pour accepter le germe par défaut (que le programme
	<code class="command">keyinit</code> appelle <code class="literal">key</code>,
	ce qui prête à confusion), appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  Ensuite avant d'entrer un mot de
	passe d'accès, passez sur votre connexion
	sécurisée et donnez lui les mêmes
	paramètres:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key 100 to17759</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
CURE MIKE BANE HIM RACY GORE</pre><p>Ou pour OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT
</pre><p>Retournez maintenant sur votre connexion non
	sécurisée, et copiez le mot de passe
	non réutilisable généré par le programme
	adapté.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76441424"></a>15.5.3. Générer un unique mot de passe non
	réutilisable</h3></div></div></div><p>Une fois que vous avez initialisé S/Key ou OPIE,
	lorsque que vous ouvrez une session, une invite de ce type
	apparaîtra:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet example.com</code></strong>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
s/key 97 fw13894
Password: </pre><p>Ou pour OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>telnet example.com</code></strong>
Trying 10.0.0.1...
Connected to example.com
Escape character is '^]'.

FreeBSD/i386 (example.com) (ttypa)

login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
otp-md5 498 gr4269 ext
Password: </pre><p>Les invites S/Key et OPIE disposent d'une fonction utile
	(qui n'est pas illustrée ici): si vous appuyez sur la touche
	<span class="keycap"><strong>Entrée</strong></span> lorsque l'on vous demande votre
	mot de passe, le programme active l'écho au terminal, de
	sorte que vous voyez ce que vous êtes en train de taper.
	Ceci est très utile si vous essayez de taper un mot de
	passe à la main, à partir d'un résultat
	imprimé par exemple.</p><a id="idp76446672" class="indexterm"></a><a id="idp76447184" class="indexterm"></a><a id="idp76447696" class="indexterm"></a><p>A ce moment vous devez générer votre
	mot de passe non réutilisable pour répondre à
	cette invite de session.  Cela doit être effectué
	sur une machine de confiance sur laquelle vous pouvez
	exécuter <code class="command">key</code> ou
        <code class="command">opiekey</code> (il y a des versions de ces
	programmes pour DOS, Windows et MacOS).  Ces programmes
	ont besoin du compteur d'itérations et du germe comme
	paramètres.  Vous pouvez les copier-coller de l'invite de
	session de la machine sur laquelle vous voulez ouvrir une
	session.</p><p>Sur le système sûr:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key 97 fw13894</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password:
WELD LIP ACTS ENDS ME HAAG</pre><p>Pour OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey 498 to4268</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase:
GAME GAG WELT OUT DOWN CHAT</pre><p>Maintenant que vous disposez de votre mot de passe non
	réutilisable vous pouvez continuer et vous
	connecter:</p><pre class="screen">login: <strong class="userinput"><code>&lt;username&gt;</code></strong>
s/key 97 fw13894
Password: <strong class="userinput"><code>&lt;return to enable echo&gt;</code></strong>
s/key 97 fw13894
Password [echo on]: WELD LIP ACTS ENDS ME HAAG
Last login: Tue Mar 21 11:56:41 from 10.0.0.2 ... </pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76454224"></a>15.5.4. Générer de multiples mots de passe
	non réutilisables</h3></div></div></div><p>Il faut parfois se rendre en des endroits où
	vous n'avez pas accès à une machine de confiance
	ou à une connexion sécurisée.  Dans ce cas, vous
	pouvez utiliser la commande <code class="command">key</code> ou
	<code class="command">opiekey</code> pour générer plusieurs
	mots de passe non réutilisables que vous pouvez imprimer
	et transporter avec vous.  Par exemple:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>key -n 5 30 zz99999</code></strong>
Reminder - Do not use this program while logged in via telnet or rlogin.
Enter secret password: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
26: SODA RUDE LEA LIND BUDD SILT
27: JILT SPY DUTY GLOW COWL ROT
28: THEM OW COLA RUNT BONG SCOT
29: COT MASH BARR BRIM NAN FLAG
30: CAN KNEE CAST NAME FOLK BILK</pre><p>Ou pour OPIE:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>opiekey -n 5 30 zz99999</code></strong>
Using the MD5 algorithm to compute response.
Reminder: Don't use opiekey from telnet or dial-in sessions.
Enter secret pass phrase: <strong class="userinput"><code>&lt;secret password&gt;</code></strong>
26: JOAN BORE FOSS DES NAY QUIT
27: LATE BIAS SLAY FOLK MUCH TRIG
28: SALT TIN ANTI LOON NEAL USE
29: RIO ODIN GO BYE FURY TIC
30: GREW JIVE SAN GIRD BOIL PHI</pre><p>L'option <code class="option">-n 5</code> demande cinq clés en
	séquence, l'option <code class="option">30</code> indique quel doit
	être le rang de la dernière itération.  Notez que
	les clés sont imprimées dans l'ordre
	<span class="emphasis"><em>inverse</em></span> de celui où elles seront
	éventuellement utilisées.  Si vous êtes
	vraiment paranoïaque, vous pouvez les recopier à la main,
	sinon vous pouvez les copier-coller vers la commande
	<code class="command">lpr</code>.  Remarquez que chaque ligne liste le
	compteur d'itération et le mot de passe non
	réutilisable; vous trouverez peut-être utile de rayer les
	mots de passe au fur et à mesure de leur utilisation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76469712"></a>15.5.5. Restreindre l'utilisation des mots de passe <span class="trademark">UNIX</span>®</h3></div></div></div><p>S/Key peut placer des restrictions sur l'utilisation des
	mots de passe <span class="trademark">UNIX</span>® en fonction des noms de machine,
	d'utilisateur, de la ligne utilisée par le terminal ou de
	l'adresse IP de la machine connectée à distance.
	Ces restrictions peuvent être trouvées dans le
	fichier de configuration
	<code class="filename">/etc/skey.access</code>.  La page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=skey.access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">skey.access</span>(5)</span></a> donne de plus amples informations sur le
	format de ce fichier et elle détaille également
	certains avertissements relatifs à la sécurité
	qu'il faut lire avant de se fier à ce fichier pour sa
	sécurité.</p><p>S'il n'y a pas de fichier
	<code class="filename">/etc/skey.access</code> (ce qui est le cas par
	défaut sur les systèmes FreeBSD 4.X), tous les
	utilisateurs pourront se servir de mots de passe <span class="trademark">UNIX</span>®.  Si le
	fichier existe, alors tous les utilisateurs devront passer par
	S/Key, à moins qu'ils ne soient explicitement
	autorisés à ne pas le faire par des instructions du
	fichier <code class="filename">/etc/skey.access</code>.  Dans tous les
	cas l'usage des mots de passe <span class="trademark">UNIX</span>® est autorisé sur
	la console.</p><p>Voici un exemple de configuration du fichier
	<code class="filename">skey.access</code> qui illustre les trois types
	d'instructions les plus courantes:</p><pre class="programlisting">permit internet 192.168.0.0 255.255.0.0
permit user fnord
permit port ttyd0</pre><p>La première ligne (<code class="literal">permit internet</code>)
	autorise les utilisateurs dont l'adresse IP (ce qui rend
	vulnérable en cas d'usurpation) appartient au
	sous-réseau spécifié à employer les mots
	de passe <span class="trademark">UNIX</span>®.  Cela ne doit pas être
	considéré comme une mesure de sécurité,
	mais plutôt comme un moyen de rappeler aux utilisateurs
	autorisés qu'ils sont sur un réseau non
	sécurisé et doivent utiliser S/Key pour
	s'authentifier.</p><p>La seconde ligne (<code class="literal">permit user</code>)
	autorise l'utilisateur désigné, dans notre cas
	<code class="systemitem">fnord</code>, à employer n'importe quand
	les mots de passe <span class="trademark">UNIX</span>®.  En général,
	il faut se servir de cette possibilité si les personnes
	soit n'ont pas moyen d'utiliser le programme
	<code class="command">key</code>, s'ils ont par exemple des terminaux
	passifs, soit s'ils sont définitivement réfractaires au
	système.</p><p>La troisième ligne (<code class="literal">permit port</code>)
	autorise tous les utilisateurs d'un terminal sur une liaison
	particulière à utiliser les mots de passe <span class="trademark">UNIX</span>®;
	cela devrait être employé pour les connexions
	téléphoniques.</p><p>OPIE peut restreindre l'usage des mots de passe <span class="trademark">UNIX</span>®
	sur la base de l'adresse IP lors de l'ouverture d'une session
	comme peut le faire S/Key.  Le fichier impliqué est
	<code class="filename">/etc/opieaccess</code>, qui est présent par
	défaut sous FreeBSD 5.0 et versions suivantes.
	Veuillez consulter la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=opieaccess&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">opieaccess</span>(5)</span></a> pour
	plus d'information sur ce fichier et certaines
	considérations sur la sécurité dont vous
	devez être au courant en l'utilisant.</p><p>Voici un exemple de fichier
	<code class="filename">opieaccess</code>:</p><pre class="programlisting">permit 192.168.0.0 255.255.0.0</pre><p>Cette ligne autorise les utilisateurs dont l'adresse IP (ce
	qui rend vulnérable en cas d'usurpation) appartient au
	sous-réseau spécifié à employer les mots
	de passe <span class="trademark">UNIX</span>® à tout moment.</p><p>Si aucune règle du fichier <code class="filename">opieaccess</code>
	ne correspond, le comportement par défaut est de
	refuser toute ouverture de session non-OPIE.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="tcpwrappers"></a>15.6. L'encapsuleur TCP (<span class="quote">« <span class="quote">TCP Wrappers</span> »</span>)</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp76493392" class="indexterm"></a><p>Toute personne familière avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> a
      probablement entendu parlé à un moment ou à
      un autre de l'encapsuleur <acronym class="acronym">TCP</acronym> (<span class="quote">« <span class="quote">TCP
      Wrappers</span> »</span>).  Mais peu sont ceux qui semblent saisir
      complètement son intérêt dans un
      réseau.  Il semble que tout le monde désire
      installer un coupe-feu pour contrôler les connexions
      réseaux.  Alors qu'un coupe-feu peut avoir de nombreuses
      utilisations, il existe des choses qu'un coupe-feu ne peut
      gérer comme renvoyer un message à l'initiateur
      d'une connexion.  L'encapsuleur <acronym class="acronym">TCP</acronym> en est
      capable ainsi que bien d'autres choses.  Dans les sections
      suivantes plusieurs fonctionnalités de l'encapsuleur
      <acronym class="acronym">TCP</acronym> seront abordées, et, dès
      que ce sera possible, un exemple de configuration sera
      proposé.</p><p>L'encapsuleur <acronym class="acronym">TCP</acronym> étend les
      capacités d'<span class="application">inetd</span> au niveau du
      support pour chaque serveur sous son contrôle.  En
      utilisant cette méthode il est possible d'offrir le
      support des ouvertures de session, de retourner des messages
      lors des connexions, de permettre à un
      <span class="quote">« <span class="quote">daemon</span> »</span> de n'accepter que les connexions internes,
      etc.  Bien que certaines de ces fonctionnalités peuvent
      être obtenues par l'implémentation d'un coupe-feu,
      ce système ajoutera non seulement une couche
      supplémentaire de protection mais ira plus loin dans le
      contrôle que ce que peut fournir un coupe-feu.</p><p>Les fonctionnalités apportées par
      l'encapsuleur <acronym class="acronym">TCP</acronym> ne peuvent se substituer
      à l'utilisation d'un bon coupe-feu.  L'encapsuleur
      <acronym class="acronym">TCP</acronym> peut être utilisé de paire
      avec un coupe-feu ou tout autre système de
      sécurité et il pourra alors servir comme une
      couche supplémentaire de protection pour le
      système.</p><p>Etant donné que ce programme est une extension
      à la configuration du programme
      <span class="application">inetd</span>, le lecteur est supposé
      avoir pris connaissance de la section de <a class="link" href="#network-inetd" title="29.2. Le &#8220;super-serveur&#8221; inetd">configuration d'inetd</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bien que les programmes lancés par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> ne
	soient pas tout à fait des <span class="quote">« <span class="quote">daemons</span> »</span>, ils
	sont traditionnellement appelés <span class="quote">« <span class="quote">daemons</span> »</span>.
	C'est le terme que nous utiliserons également dans le
	reste de cette section.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76507216"></a>15.6.1. Configuration initiale</h3></div></div></div><p>Le seul pré-requis à l'utilisation de
	l'encapsuleur <acronym class="acronym">TCP</acronym> sous FreeBSD est de
	s'assurer que le serveur <span class="application">inetd</span> est
	lancé à partir de <code class="filename">rc.conf</code>
	avec l'option <code class="option">-Ww</code>; c'est la configuration par
	défaut.  Bien évidemment une configuration
	correcte du fichier <code class="filename">/etc/hosts.allow</code> est
	également sous-entendue, mais dans le cas contraire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> émettra des messages d'avertissement
	dans les journaux du système.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Contrairement à d'autres implémentations
	  de l'encapsuleur <acronym class="acronym">TCP</acronym>, l'emploi du fichier
	  <code class="filename">hosts.deny</code> est obsolète.  Toutes
	  les options de configuration doivent être
	  placées dans le fichier
	  <code class="filename">/etc/hosts.allow</code>.</p></div><p>Dans la configuration la plus simple, la politique de
	connexion aux <span class="quote">« <span class="quote">daemons</span> »</span> est soit de tout
	autoriser ou soit de tout bloquer en fonctions des options
	choisies dans <code class="filename">/etc/hosts.allow</code>.  La
	configuration par défaut sous FreeBSD est d'autoriser les
	connexions à chaque <span class="quote">« <span class="quote">daemon</span> »</span> lancé
	à l'aide d'<span class="application">inetd</span>.  La
	modification de ce réglage par défaut sera
	discutée une fois que la configuration de base aura
	été vue.</p><p>Une configuration de base prend en général
	la forme <code class="literal">daemon : adresse : action</code>.
	Où <code class="literal">daemon</code> est le nom du
	<span class="quote">« <span class="quote">daemon</span> »</span> lancé par
	<span class="application">inetd</span>.
	L'<code class="literal">adresse</code> peut être un nom de machine
	valide, une adresse <acronym class="acronym">IP</acronym> ou une adresse IPv6
	entre crochets ([ ]).  Le champ <code class="literal">action</code>
	pourra avoir comme valeur <code class="literal">allow</code> ou
	<code class="literal">deny</code> pour autoriser ou interdire
	l'accès.  Gardez à l'esprit que ce type de
	configuration fonctionne de manière à honorer la
	première règle sémantique correspondante,
	cela signifie que le fichier de configuration est parcouru
	à la recherche d'une règle correspondant
	à la requête.  Quand une correspondance est
	trouvée, la règle est appliquée et la
	recherche s'arrête.</p><p>Plusieurs autres options existent mais elles seront
	exposées dans une section ultérieure.  Une
	simple ligne de configuration peut être construite avec
	peu d'information.  Par exemple, pour autoriser les connexions
	<acronym class="acronym">POP</acronym>3 via le <span class="quote">« <span class="quote">daemon</span> »</span> <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/qpopper/pkg-descr">mail/qpopper</a>, les lignes suivantes
	doivent être ajoutées au fichier
	<code class="filename">hosts.allow</code>:</p><pre class="programlisting"># This line is required for POP3 connections:
qpopper : ALL : allow</pre><p>Après l'ajout de cette ligne,
	<span class="application">inetd</span> devra être
	redémarré.  Cela sera fait en utilisant la
	commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kill&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kill</span>(1)</span></a>, ou avec le passage du paramètre
	<em class="parameter"><code>restart</code></em> à la commande
	<code class="filename">/etc/rc.d/inetd</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76528080"></a>15.6.2. Configuration avancée</h3></div></div></div><p>L'encapsuleur <acronym class="acronym">TCP</acronym> dispose
	également d'options avancées; elles permettrons
	plus de contrôle sur la manière dont sont
	gérées les connexions.  Dans certains cas cela
	peut être une bonne idée de renvoyer un
	commentaire à certaines machines ou lors de connexions
	à certains <span class="quote">« <span class="quote">daemon</span> »</span>s.  Dans d'autres cas,
	peut-être qu'un fichier journal pourrait être
	enregistré ou un courrier électronique pourrait
	être envoyé à l'administrateur.  D'autres
	situations peuvent nécessiter l'utilisation d'un
	service uniquement pour les connexions locales.  Tout cela est
	possible à l'aide des options de configuration connues
	sous le nom de <code class="literal">jokers</code>, caractères
	d'expansion et d'exécution de commandes externes.  Les
	deux sections suivantes abordent ces situations.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76530256"></a>15.6.2.1. Commandes externes</h4></div></div></div><p>Imaginez une situation dans laquelle une connexion doit
	  être refusée et que la raison de ce refus doit
	  être envoyée à la personne qui a
	  tenté d'établir cette connexion.  Comment cela
	  peut-il être mis en place?  Ce type d'action est rendu
	  possible par l'emploi de l'option <code class="option">twist</code>.
	  Quand une tentative de connexion est faite,
	  <code class="option">twist</code> sera appelée pour
	  exécuter une commande ou une procédure
	  d'interpréteur de commande.  Un exemple est
	  déjà présent dans le fichier
	  <code class="filename">hosts.allow</code>:</p><pre class="programlisting"># The rest of the daemons are protected.
ALL : ALL \
        : severity auth.info \
        : twist /bin/echo "You are not welcome to use %d from %h."</pre><p>Cet exemple montre que le message <span class="quote">« <span class="quote">You are not
	  allowed to use <code class="literal">daemon</code> from
	  <code class="literal">hostname</code>.</span> »</span> sera retourné
	  pour tout <span class="quote">« <span class="quote">daemon</span> »</span> qui n'a pas
	  été précédemment
	  configuré dans le fichier d'accès.  Cette
	  fonction est très utile pour envoyer une
	  réponse à l'initiateur de la connexion juste
	  après le refus de la connexion.  Notez que tout
	  message à retourner <span class="emphasis"><em>doit</em></span>
	  être placé entre des guillemets
	  <code class="literal">"</code>; il n'y a pas d'exception possible
	  à cette règle.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il est possible de lancer une attaque par déni
	    de service sur le serveur si un agresseur, ou un groupe
	    d'agresseurs sont en mesure de submerger ces
	    <span class="quote">« <span class="quote">daemon</span> »</span>s avec des demandes de
	    connexion.</p></div><p>Une autre possibilité dans ce cas est d'employer
	  l'option <code class="option">spawn</code>.  Tout comme l'option
	  <code class="option">twist</code>, <code class="option">spawn</code> interdit
	  implicitement les connexions et peut être
	  utilisée pour lancer une commande ou une
	  procédure externe.  Contrairement à
	  <code class="option">twist</code>, <code class="option">spawn</code> n'enverra pas
	  de réponse à la personne qui a établi
	  la connexion.  Examinons par exemple la ligne de
	  configuration suivante:</p><pre class="programlisting"># We do not allow connections from example.com:
ALL : .example.com \
	: spawn (/bin/echo %a from %h attempted to access %d &gt;&gt; \
	  /var/log/connections.log) \
	: deny</pre><p>Cela interdira toute tentative de connexion à
	  partir du domaine <code class="systemitem">*.example.com</code>, enregistrant
	  simultanément dans le fichier
	  <code class="filename">/var/log/connections.log</code> le nom de
	  machine, l'adresse <acronym class="acronym">IP</acronym> et le
	  <span class="quote">« <span class="quote">daemon</span> »</span> auquel on tente
	  d'accéder.</p><p>Il existe d'autres caractères de substitution en
	  dehors de ceux déjà présentés,
	  par exemple <code class="literal">%a</code>.  Consultez la page de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> pour une liste
	  complète.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76543440"></a>15.6.2.2. Les options jokers</h4></div></div></div><p>Jusqu'ici l'option <code class="literal">ALL</code> a
	  été utilisée dans tous les exemples.
	  Il existe d'autres options pour étendre un peu plus
	  les fonctionnalités.  Par exemple, l'option
	  <code class="literal">ALL</code> peut être utilisée pour
	  prendre en compte chaque instance d'un
	  <span class="quote">« <span class="quote">daemon</span> »</span>, d'un domaine ou d'une adresse
	  <acronym class="acronym">IP</acronym>.  Un autre joker disponible est
	  l'option <code class="literal">PARANOID</code> qui peut être
	  employée pour prendre en compte toute machine qui
	  fournirait une adresse <acronym class="acronym">IP</acronym> susceptible
	  d'être falsifiée.  En d'autres termes, l'option
	  <code class="literal">PARANOID</code> peut être utilisée
	  pour définir l'action a effectuer dès qu'une
	  connexion se fait à partir d'une adresse
	  <acronym class="acronym">IP</acronym> qui diffère de celle
	  attachée à une machine.  L'exemple suivant
	  apporte un éclairage sur cette option:</p><pre class="programlisting"># Block possibly spoofed requests to sendmail:
sendmail : PARANOID : deny</pre><p>Dans cet exemple, toutes les requêtes de connexion
	  à <span class="application">sendmail</span> à partir
	  d'adresses <acronym class="acronym">IP</acronym> différentes de celle
	  correspondant au nom de la machine seront
	  refusées.</p><div xmlns="" class="caution"><h3 class="admontitle">Attention: </h3><p xmlns="http://www.w3.org/1999/xhtml">Utiliser l'option <code class="literal">PARANOID</code> peut
	    gravement paralyser les serveurs si le client ou le
	    serveur a une configuration de <acronym class="acronym">DNS</acronym>
	    défectueuse.  Les administrateurs sont maintenant
	    prévenus.</p></div><p>Pour en apprendre plus sur les jokers et leurs
	  fonctionnalités associées, consultez la page
	  de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a>.</p><p>Avant que n'importe quelle des lignes de configuration
	  données ci-dessus ne fonctionne, la première
	  ligne de configuration du fichier
	  <code class="filename">hosts.allow</code> devra être
	  dé-commentée.  Cela a été
	  noté en début de section.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerberosIV"></a>15.7. Kerberos</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mark</span> <span class="surname">Murray</span></span>. </span></div><div><span class="authorgroup">Basée sur une contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mark</span> <span class="surname">Dapoz</span></span>. </span></div></div></div><a id="idp76561360" class="indexterm"></a><p>Kerberos est un protocole réseau supplémentaire
      qui permet aux utilisateurs de s'authentifier par
      l'intermédiaire d'un serveur sécurisé.
      Des services comme l'ouverture de session et la copie à
      distance, la copie sécurisée de fichiers entre
      systèmes et autres fonctionnalités à haut
      risque deviennent ainsi considérablement plus
      sûrs et contrôlables.</p><p>Les instructions qui suivent peuvent être
      utilisées comme guide d'installation de Kerberos dans
      la version distribuée pour FreeBSD.  Vous devriez
      cependant vous référer aux pages de manuel
      correspondantes pour avoir une description
      complète.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76562640"></a>15.7.1. Installation de Kerberos</h3></div></div></div><a id="idp76600272" class="indexterm"></a><a id="idp76600784" class="indexterm"></a><p>Kerberos est un composant optionnel de FreeBSD.  La
	manière la plus simple d'installer ce logiciel est de
	sélectionner la distribution <code class="literal">krb4</code>
	ou <code class="literal">krb5</code> dans
	<span class="application">sysinstall</span> lors de l'installation
	de FreeBSD.  Cela installera les implémentations
	&#8220;eBones&#8221; (KerberosIV) ou &#8220;Heimdal&#8221;
	(Kerberos5) de Kerberos.  Ces implémentations sont
	distribuées car elles sont développées en dehors
	des USA ou du Canada et étaient par conséquent
	disponibles aux utilisateurs hors de ces pays durant
	l'ère restrictive du contrôle des exportations de
	code de chiffrement à partir des USA.</p><p>Alternativement, l'implémentation du MIT de
	Kerberos est disponible dans le catalogue des logiciels
	portés sous
        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/krb5/pkg-descr">security/krb5</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76604368"></a>15.7.2. Créer la base de données initiale</h3></div></div></div><p>Cela se fait uniquement sur le serveur Kerberos.
	Vérifiez tout d'abord qu'il ne traîne pas d'anciennes
	bases Kerberos.  Allez dans le répertoire
	<code class="filename">/etc/kerberosIV</code> et assurez-vous qu'il ne
	contient que les fichiers suivants:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /etc/kerberosIV</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ls</code></strong>
README		krb.conf        krb.realms</pre><p>S'il y a d'autres fichiers (comme
	<code class="filename">principal.*</code> ou
	<code class="filename">master_key</code>), utilisez alors la commande
	<code class="command">kdb_destroy</code> pour supprimer l'ancienne base de
	données Kerberos, ou si Kerberos ne tourne pas, effacez
	simplement les fichiers supplémentaires.</p><p>Vous devez maintenant éditer les fichiers
	<code class="filename">krb.conf</code> et <code class="filename">krb.realms</code>
	pour définir votre domaine Kerberos.  Dans notre cas,
	le domaine sera  <code class="literal">EXAMPLE.COM</code> et le
	serveur <code class="systemitem">grunt.example.com</code>.  Nous
	éditons ou créons le fichier
	<code class="filename">krb.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.conf</code></strong>
EXAMPLE.COM
EXAMPLE.COM grunt.example.com admin server
CS.BERKELEY.EDU okeeffe.berkeley.edu
ATHENA.MIT.EDU kerberos.mit.edu
ATHENA.MIT.EDU kerberos-1.mit.edu
ATHENA.MIT.EDU kerberos-2.mit.edu
ATHENA.MIT.EDU kerberos-3.mit.edu
LCS.MIT.EDU kerberos.lcs.mit.edu
TELECOM.MIT.EDU bitsy.mit.edu
ARC.NASA.GOV trident.arc.nasa.gov</pre><p>Dans notre cas les autres domaines n'ont pas besoin
	d'être mentionnés.  Ils ne sont là que pour
	montrer comment une machine peut avoir connaissance de
	plusieurs domaines.  Pour plus de simplicité, vous
	pouvez ne pas les inclure.</p><p>La première ligne indique pour quel domaine cette
	machine agit.  Les autre lignes définissent les autres
	domaines/machines.  Le premier élément sur une ligne
	est le domaine, le second le nom de la machine qui est le
	&#8220;centre de distribution de clés&#8221; de ce
	domaine.  Les mots <code class="literal">admin server</code> qui suivent
	un nom de machine signifient que la machine est aussi serveur
	d'administration de la base de données.  Pour plus
	d'explication sur cette terminologie, consultez les pages de
	manuel de Kerberos.</p><p>Nous devons maintenant ajouter <code class="systemitem">grunt.example.com</code> au domaine
	<code class="literal">EXAMPLE.COM</code> et ajouter une entrée pour
	mettre toutes les machines du domaine DNS <code class="systemitem">.example.com</code> dans le domaine
	Kerberos <code class="literal">EXAMPLE.COM</code>.  Le fichier
	<code class="filename">krb.realms</code> aura alors l'allure
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat krb.realms</code></strong>
grunt.example.com EXAMPLE.COM
.example.com EXAMPLE.COM
.berkeley.edu CS.BERKELEY.EDU
.MIT.EDU ATHENA.MIT.EDU
.mit.edu ATHENA.MIT.EDU</pre><p>Encore une fois, les autres domaines n'ont pas besoin
	d'être mentionnés.  Ils ne sont là que pour
	montrer comment une machine peut avoir connaissance de
	plusieurs domaines.  Pour plus de simplicité, vous pouvez
	ne pas les inclure.</p><p>La première ligne assigne un système
	<span class="emphasis"><em>particulier</em></span> au domaine désigné.
	Les lignes restantes montrent comment affecter par défaut
	les systèmes d'un sous-domaine DNS particulier à un
	domaine Kerberos donné.</p><p>Nous sommes maintenant prêt pour la création
	de la base de données.  Il n'y a à le faire que
	sur le serveur Kerberos (ou Centre de Distribution de
	Clés).  Cela se fait avec la commande
	<code class="command">kdb_init</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_init</code></strong>
<code class="prompt">Realm name [default  ATHENA.MIT.EDU ]:</code> <strong class="userinput"><code>EXAMPLE.COM</code></strong>
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

<code class="prompt">Enter Kerberos master key:</code> </pre><p>Nous devons maintenant sauvegarder la clé pour que
	les serveurs sur la machine locale puissent la lire.
	Utilisons la commande <code class="command">kstash</code> pour faire
	cela:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kstash</code></strong>

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered. BEWARE!</pre><p>Le mot de passe maître chiffré est
	sauvegardé dans
	<code class="filename">/etc/kerberosIV/master_key</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76629072"></a>15.7.3. Installer les services</h3></div></div></div><p>Il faut ajouter deux entrées (&#8220;principals&#8221;)
	à la base de données pour <span class="emphasis"><em>chaque</em></span>
	système qui sera sécurisé par Kerberos.  Ce
	sont <code class="literal">kpasswd</code> et <code class="literal">rcmd</code>.
	Ces deux entrées sont définies pour chaque
	système, chacune de leurs instances se voyant
	attribuer le nom du système.</p><p>Ces &#8220;daemons&#8221;,
	<span class="application">kpasswd</span> et
	<span class="application">rcmd</span> permettent aux autres
	systèmes de changer les mots de passe Kerberos et
	d'exécuter des commandes comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>, et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a>.</p><p>Ajoutons donc maintenant ces entrées:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>passwd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: passwd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- entrez RANDOM ici
Verifying password

<code class="prompt">New Password:</code> &lt;---- enter RANDOM here

<code class="prompt">Random password [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code> <strong class="userinput"><code>rcmd</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>grunt</code></strong>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code>

Principal: rcmd, Instance: grunt, kdc_key_ver: 1
<code class="prompt">New Password:</code>		&lt;---- entrez RANDOM ici
Verifying password

<code class="prompt">New Password:</code>           &lt;---- entrez RANDOM ici

<code class="prompt">Random password [y] ?</code>

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>         &lt;---- ne rien entrer ici permet de quitter le programme</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76654672"></a>15.7.4. Créer le fichier des services</h3></div></div></div><p>Il faut maintenant extraire les instances qui
	définissent les services sur chaque machine.  Pour cela
	on utilise la commande <code class="command">ext_srvtab</code>.
	Cela créera un fichier qui doit être copié
	ou déplacé <span class="emphasis"><em>par un moyen
	sûr</em></span> dans le répertoire
	<code class="filename">/etc/kerberosIV</code> de chaque client
	Kerberos.  Ce fichier doit être présent sur
	chaque serveur et client, et est crucial au bon fonctionnement
	de Kerberos.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ext_srvtab grunt</code></strong>
<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered. BEWARE!
Generating 'grunt-new-srvtab'....</pre><p>Cette commande ne génère qu'un fichier temporaire
	qui doit être renommé en <code class="filename">srvtab</code>
	pour que tous les serveurs puissent y accéder.
	Utilisez la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mv&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mv</span>(1)</span></a> pour l'installer sur le
	système d'origine:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grunt-new-srvtab srvtab</code></strong></pre><p>Si le fichier est destiné à un client, et que
	le réseau n'est pas considéré comme sûr,
	alors copiez le fichier
	<code class="filename">client-new-srvtab</code>
	sur un support amovible et transportez-le par un moyen
	physiquement sûr.  Assurez-vous de le renommer en
	<code class="filename">srvtab</code> dans le répertoire
	<code class="filename">/etc/kerberosIV</code> du client, et mettez-le
	bien en mode 600:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mv grumble-new-srvtab srvtab</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 srvtab</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76676560"></a>15.7.5. Renseigner la base de données</h3></div></div></div><p>Nous devons maintenant créer des entrées
	utilisateurs dans la base de données.  Tout d'abord
	créons une entrée pour l'utilisateur
	<code class="systemitem">jane</code>.  Utilisez la commande
	<code class="command">kdb_edit</code> pour cela:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>jane</code></strong>
<code class="prompt">Instance:</code>

&lt;Not found&gt;, <code class="prompt">Create [y] ?</code> <strong class="userinput"><code>y</code></strong>

Principal: jane, Instance: , kdc_key_ver: 1
<code class="prompt">New Password:</code>                &lt;---- entrez un mot de passe sûr ici
Verifying password

<code class="prompt">New Password:</code>                &lt;---- réentrez le mot de passe sûr là
Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code>
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>		   &lt;---- ne rien entrer ici permet de quitter le programme</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76684368"></a>15.7.6. Tester l'ensemble</h3></div></div></div><p>Il faut tout d'abord démarrer les &#8220;daemons&#8221;
	Kerberos.  Notez que si vous avez correctement modifié
	votre fichier <code class="filename">/etc/rc.conf</code>, cela se fera
	automatiquement au redémarrage du système.  Ceci
	n'est nécessaire que sur le serveur Kerberos.  Les
	clients Kerberos récupéreront automatiquement les
	informations dont ils ont besoin via leur répertoire
	<code class="filename">/etc/kerberosIV</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kerberos &amp;</code></strong>
Kerberos server starting
Sleep forever on error
Log file is /var/log/kerberos.log
Current Kerberos master key version is 1.

Master key entered. BEWARE!

Current Kerberos master key version is 1
Local realm: EXAMPLE.COM
<code class="prompt">#</code> <strong class="userinput"><code>kadmind -n &amp;</code></strong>
KADM Server KADM0.0A initializing
Please do not use 'kill -9' to kill this job, use a
regular kill instead

Current Kerberos master key version is 1.

Master key entered.  BEWARE!</pre><p>Nous pouvons maintenant utiliser la commande
	<code class="command">kinit</code> pour obtenir un &#8220;ticket
	d'entrée&#8221; pour l'utilisateur
	<code class="systemitem">jane</code> que nous avons créé
	plus haut:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit jane</code></strong>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "jane"
<code class="prompt">Password:</code> </pre><p>Essayons de lister les informations associées
	avec la commande <code class="command">klist</code> pour voir si nous
	avons vraiment tout ce qu'il faut:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:    /tmp/tkt245
Principal:      jane@EXAMPLE.COM

  Issued           Expires          Principal
Apr 30 11:23:22  Apr 30 19:23:22  krbtgt.EXAMPLE.COM@EXAMPLE.COM</pre><p>Essayons maintenant de modifier le mot de passe en
	utilisant la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=passwd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">passwd</span>(1)</span></a> pour vérifier
	si le &#8220;daemon&#8221; <span class="application">kpasswd</span>
	est autorisé à accéder à la base
	de données Kerberos:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>passwd</code></strong>
realm EXAMPLE.COM
<code class="prompt">Old password for jane:</code>
<code class="prompt">New Password for jane:</code>
Verifying password
<code class="prompt">New Password for jane:</code>
Password changed.</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76700752"></a>15.7.7. Autoriser l'utilisation de la commande
	<code class="command">su</code></h3></div></div></div><p>Kerberos permet d'attribuer à
	<span class="emphasis"><em>chaque</em></span> utilisateur qui a besoin des droits
        du super-utilisateur son <span class="emphasis"><em>propre</em></span> mot de
	passe <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.  Nous pouvons créer un identifiant
	qui est autorisé à utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>
	pour devenir <code class="systemitem">root</code>.  Cela se fait en
	associant une instance <code class="systemitem">root</code> un
	identificateur (&#8220;principal&#8221;) de base.  En
	utilisant la commande <code class="command">kdb_edit</code> nous pouvons
	créer l'entrée <code class="literal">jane.root</code>
	dans la base de données Kerberos:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kdb_edit</code></strong>
Opening database...

<code class="prompt">Enter Kerberos master key:</code>

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

<code class="prompt">Principal name:</code> <strong class="userinput"><code>jane</code></strong>
<code class="prompt">Instance:</code> <strong class="userinput"><code>root</code></strong>

&lt;Not found&gt;, Create [y] ? y

Principal: jane, Instance: root, kdc_key_ver: 1
<code class="prompt">New Password:</code>                    &lt;---- entrez un mot de passe SUR ici
Verifying password

<code class="prompt">New Password:</code>    	 	 &lt;---- réentrez le mot de passe ici

Principal's new key version = 1
<code class="prompt">Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?</code>
<code class="prompt">Max ticket lifetime (*5 minutes) [ 255 ] ?</code> <strong class="userinput"><code>12</code></strong> &lt;--- Laissez une valeur faible!
<code class="prompt">Attributes [ 0 ] ?</code>
Edit O.K.
<code class="prompt">Principal name:</code>		         &lt;---- ne rien entrer ici permet de quitter le programme</pre><p>Vérifions maintenant les caractéristiques
	associées pour voir si cela fonctionne:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kinit jane.root</code></strong>
MIT Project Athena (grunt.example.com)
Kerberos Initialization for "jane.root"
<code class="prompt">Password:</code></pre><p>Nous devons maintenant ajouter l'utilisateur au fichier
	<code class="filename">.klogin</code> de
	<code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
jane.root@EXAMPLE.COM</pre><p>Essayons maintenant la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su</code></strong>
<code class="prompt">Password:</code></pre><p>et voyons quelles sont nos caractéristiques:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>klist</code></strong>
Ticket file:	/tmp/tkt_root_245
Principal:      jane.root@EXAMPLE.COM

  Issued           Expires          Principal
May  2 20:43:12  May  3 04:43:12  krbtgt.EXAMPLE.COM@EXAMPLE.COM</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76728272"></a>15.7.8. Utiliser d'autres commandes</h3></div></div></div><p>Dans l'exemple précédent, nous avons
	créé une entrée principale nommée
	<code class="literal">jane</code> avec une instance <code class="literal">root</code>.
	Cette entrée reposait sur un utilisateur ayant le même
	nom que l'entrée principale, c'est ce que fait par
	défaut Kerberos; une
	<code class="literal">&lt;entrée_principale&gt;.&lt;instance&gt;</code>
	de la forme
	<code class="literal">&lt;nom_d_utilisateur&gt;.</code><code class="systemitem">root</code>
	autorisera <code class="literal">&lt;nom_d_utilisateur&gt;.</code> à
	utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> pour devenir <code class="systemitem">root</code> si
	le fichier <code class="filename">.klogin</code> du répertoire
	personnel de l'utilisateur <code class="systemitem">root</code> est
	correctement renseigné:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat /root/.klogin</code></strong>
jane.root@EXAMPLE.COM</pre><p>De même, si un utilisateur a dans son répertoire des
	lignes de la forme:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cat ~/.klogin</code></strong>
jane@EXAMPLE.COM
jack@EXAMPLE.COM</pre><p>Cela permet à quiconque dans le domaine
	<code class="literal">EXAMPLE.COM</code> s'étant authentifié
	en tant que <code class="systemitem">jane</code> ou
	<code class="systemitem">jack</code> (via <code class="command">kinit</code>, voir
	plus haut) d'accéder avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a> au compte de
	<code class="systemitem">jane</code> ou à ses fichiers sur le
	système (<code class="systemitem">grunt</code>) via <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>.</p><p>Par exemple, <code class="systemitem">jane</code> ouvre maintenant
	une session sur un autre système en utilisant
	Kerberos:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
MIT Project Athena (grunt.example.com)
<code class="prompt">Password:</code>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt</code></strong>
Last login: Mon May  1 21:14:47 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.

FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre><p>Ou bien <code class="systemitem">jack</code> ouvre une session sur le
	compte de <code class="systemitem">jane</code> sur la même machine
	(<code class="systemitem">jane</code> ayant modifié son fichier
	<code class="filename">.klogin</code> comme décrit plus haut, et la
	personne an charge de Kerberos ayant défini une entrée
	principale <span class="emphasis"><em>jack</em></span> sans instance):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>kinit</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>rlogin grunt -l jane</code></strong>
MIT Project Athena (grunt.example.com)
<code class="prompt">Password:</code>
Last login: Mon May  1 21:16:55 from grumble
Copyright (c) 1980, 1983, 1986, 1988, 1990, 1991, 1993, 1994
        The Regents of the University of California.   All rights reserved.
FreeBSD BUILT-19950429 (GR386) #0: Sat Apr 29 17:50:09 SAT 1995</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="kerberos5"></a>15.8. <span class="application">Kerberos5</span> ** Traduction en Cours **</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tillman</span> <span class="surname">Hodgson</span></span>. </span></div><div><span class="authorgroup">Based on a contribution by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mark</span> <span class="surname">Murray</span></span>. </span></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssl"></a>15.9. OpenSSL</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp76778960" class="indexterm"></a><p>Une des caractéristiques que de nombreux utilisateurs
      ignorent souvent est la présence des outils
      <span class="application">OpenSSL</span> dans le système FreeBSD.
      <span class="application">OpenSSL</span> fournit une couche de
      transport des données chiffrée par-dessus la
      couche de communication, lui permettant ainsi d'être
      liée à de nombreux services et applications
      réseau.</p><p>Les applications d'<span class="application">OpenSSL</span>
      pourront être l'authentification chiffrée de
      clients de messagerie, les transactions via le Web comme les
      paiements par carte bancaire et bien plus encore.  De nombreux
      logiciels portés tels que <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13-ssl/pkg-descr">www/apache13-ssl</a>, et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/sylpheed-claws/pkg-descr">mail/sylpheed-claws</a> offriront un
      support pour <span class="application">OpenSSL</span> lors de leur
      compilation.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans la plupart des cas le catalogue des logiciels
	portés tentera de compiler le logiciel porté
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/openssl/pkg-descr">security/openssl</a> à
	moins que la variable <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
	<code class="varname">WITH_OPENSSL_BASE</code> ne soit explicitement
	fixée à la valeur <span class="quote">« <span class="quote">yes</span> »</span>.</p></div><p>La version d'<span class="application">OpenSSL</span> fournie avec
      FreeBSD supporte les protocoles de sécurité
      réseau <span class="emphasis"><em>Secure Sockets Layer v2/v3</em></span>
      (SSLv2/SSLv3), et <span class="emphasis"><em>Transport Layer Security
      v1</em></span> (TLSv1) et peut être utilisée comme
      bibliothèque de chiffrement d'usage
      général.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bien que <span class="application">OpenSSL</span> supporte
	l'algorithme <acronym class="acronym">IDEA</acronym>, il est
	désactivé par défaut en raison des
	problèmes de brevets aux USA.  Pour l'utiliser, le
	texte de la licence devrait être consulté et si
	les termes de cette licence sont acceptables, la variable
	<code class="varname">MAKE_IDEA</code> doit être activée
	dans le fichier <code class="filename">make.conf</code>.</p></div><p>Une des utilisations les plus courantes
      d'<span class="application">OpenSSL</span> est de fournir des
      certificats utilisables avec des applications logicielles.  Ces
      certificats assurent que les références de la
      société ou d'un individu sont valides et non
      frauduleuses.  Si le certificat en question n'a pas
      été vérifié par une des nombreuses
      <span class="quote">« <span class="quote">autorité de certification</span> »</span>
      (<span class="quote">« <span class="quote">Certificate Authorities</span> »</span>) ou
      <acronym class="acronym">CA</acronym>s, une alerte est
      généralement produite.  Une autorité de
      certification est une société, comme <a class="link" href="http://www.verisign.com" target="_top">VeriSign</a>, qui signera les
      certificats afin de valider les références
      d'individus ou de sociétés.  Ce processus a un
      coût et n'est pas obligatoire pour utiliser des
      certificats, cependant cela pourra mettre plus à l'aise
      les utilisateurs les plus paranoïaques.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76796496"></a>15.9.1. Générer des certificats</h3></div></div></div><a id="idp76797136" class="indexterm"></a><p>Pour générer un certificat, la commande
	suivante est disponible:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl req -new -nodes -out req.pem -keyout cert.pem</code></strong>
Generating a 1024 bit RSA private key
................++++++
.......................................++++++
writing new private key to 'cert.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<strong class="userinput"><code>US</code></strong>
State or Province Name (full name) [Some-State]:<strong class="userinput"><code>PA</code></strong>
Locality Name (eg, city) []:<strong class="userinput"><code>Pittsburgh</code></strong>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<strong class="userinput"><code>My Company</code></strong>
Organizational Unit Name (eg, section) []:<strong class="userinput"><code>Systems Administrator</code></strong>
Common Name (eg, YOUR name) []:<strong class="userinput"><code>localhost.example.org</code></strong>
Email Address []:<strong class="userinput"><code>trhodes@FreeBSD.org</code></strong>

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:<strong class="userinput"><code>SOME PASSWORD</code></strong>
An optional company name []:<strong class="userinput"><code>Another Name</code></strong></pre><p>Notez la réponse à la question <span class="quote">« <span class="quote">Common
	Name</span> »</span> qui est un nom de domaine.  Cette question
	demande l'entrée d'un serveur de noms à des fins
	de vérification; entrer autre chose qu'un nom de
	domaine produira un certificat inutilisable.  D'autres options
	sont disponibles comme par exemple: la date d'expiration, des
	algorithmes de chiffrement alternatifs, etc.  Une liste
	complète peut être obtenue en consultant la page
	de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=openssl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">openssl</span>(1)</span></a>.</p><p>Deux fichiers doivent maintenant être
	présents dans le répertoire dans lequel la
	commande a été exécutée.  La
	demande de certificat, <code class="filename">req.pem</code>, peut
	être envoyée à une autorité de
	certification qui validera les références que
	vous avez saisies, signera la demande et vous retournera le
	certificat.  Le deuxième fichier s'appellera
	<code class="filename">cert.pem</code> et sera la clé
	privée du certificat et devra être à tout
	prix protégée; si ce fichier tombe dans d'autres
	mains, il pourra être utilisé pour imiter votre
	identité (ou votre serveur).</p><p>Pour les cas où une signature d'une
	<acronym class="acronym">CA</acronym> n'est pas indispensable, un certificat
	auto-signé peut être créé.
	Générez tout d'abord la clé
	<acronym class="acronym">RSA</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl dsaparam -rand -genkey -out myRSA.key 1024</code></strong></pre><p>Générez ensuite la clé de la
	<acronym class="acronym">CA</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl gendsa -des3 -out myca.key myRSA.key</code></strong></pre><p>Utilisez cette clé pour créer le
	certificat:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>openssl req -new -x509 -days 365 -key myca.key -out new.crt</code></strong></pre><p>Deux fichiers devraient être présents
	maintenant dans le répertoire: un fichier de signature
	de l'autorité de certification,
	<code class="filename">myca.key</code>, et le certificat
	lui-même, <code class="filename">new.crt</code>.  Ces fichiers
	doivent être placés dans un répertoire, de
	préférence sous <code class="filename">/etc</code>, qui est uniquement lisible
	que par <code class="systemitem">root</code>.  Les permissions 0700
	devraient convenir et peuvent être fixées
	à l'aide de l'utilitaire
	<code class="command">chmod</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76821840"></a>15.9.2. Utilisation des certificats, un exemple</h3></div></div></div><p>A quoi peuvent servir ces fichiers?  Un bon exemple serait
	le chiffrage des connexions au <acronym class="acronym">MTA</acronym>
	<span class="application">sendmail</span>.  Cela permettra de faire
	disparaître l'utilisation d'une authentification en
	clair pour les utilisateurs qui envoient du courrier via le
	<acronym class="acronym">MTA</acronym> local.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ce n'est pas la meilleure utilisation au monde
	  étant donné que certains clients de messagerie
	  afficheront une erreur si le certificat n'a pas
	  été installé localement.  Reportez-vous
	  à la documentation du logiciel pour plus
	  d'information sur l'installation de certificats.</p></div><p>Les lignes suivantes doivent être ajoutées
	dans le fichier <code class="filename">.mc</code> local:</p><pre class="programlisting">dnl SSL Options
define(`confCACERT_PATH',`/etc/certs')dnl
define(`confCACERT',`/etc/certs/new.crt')dnl
define(`confSERVER_CERT',`/etc/certs/new.crt')dnl
define(`confSERVER_KEY',`/etc/certs/myca.key')dnl
define(`confTLS_SRV_OPTIONS', `V')dnl</pre><p>Où <code class="filename">/etc/certs/</code> est le
	répertoire à utiliser pour stocker localement
	les certificats et les clés.  La dernière
	condition nécessaire étant une reconstruction du
	fichier <code class="filename">.cf</code>.  Cela se fait facilement en
	tapant <code class="command">make</code> <em class="parameter"><code>install</code></em>
	à l'intérieur du répertoire <code class="filename">/etc/mail</code>.  Suivi d'un
	<code class="command">make</code> <em class="parameter"><code>restart</code></em> qui
	devrait relancer le <span class="quote">« <span class="quote">daemon</span> »</span>
	<span class="application">sendmail</span>.</p><p>Si tout s'est bien passé il n'y aura pas de message
	d'erreur dans le fichier <code class="filename">/var/log/maillog</code>
	et <span class="application">sendmail</span> apparaîtra dans
	la liste des processus.</p><p>Comme test simple, connectez vous au serveur de messagerie
	à l'aide de l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>telnet example.com 25</code></strong>
Trying 192.0.34.166...
Connected to <code class="systemitem">example.com</code>.
Escape character is '^]'.
220 <code class="systemitem">example.com</code> ESMTP Sendmail 8.12.10/8.12.10; Tue, 31 Aug 2004 03:41:22 -0400 (EDT)
<strong class="userinput"><code>ehlo example.com</code></strong>
250-example.com Hello example.com [192.0.34.166], pleased to meet you
250-ENHANCEDSTATUSCODES
250-PIPELINING
250-8BITMIME
250-SIZE
250-DSN
250-ETRN
250-AUTH LOGIN PLAIN
250-STARTTLS
250-DELIVERBY
250 HELP
<strong class="userinput"><code>quit</code></strong>
221 2.0.0 <code class="systemitem">example.com</code> closing connection
Connection closed by foreign host.</pre><p>Si la ligne <span class="quote">« <span class="quote">STARTTLS</span> »</span> apparaît dans la
	sortie, cela signifie alors que tout fonctionne
	correctement.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ipsec"></a>15.10. IPsec</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Yoshinobu</span> <span class="surname">Inoue</span></span>. </span></div></div></div><a id="idp76864208" class="indexterm"></a><a id="idp76864720" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Caractères de terminaison: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans tous les exemples de cette section, et d'autres
	sections, vous remarquerez qu'il y aura un &#8220;^D&#8221;
	à la fin de certains exemples.  Cela signifie qu'il faut
	maintenir la touche <span class="keycap"><strong>Ctrl</strong></span> enfoncée
	et appuyer sur la touche <span class="keycap"><strong>D</strong></span>.  Un autre
	caractère couramment utilisé est &#8220;^C&#8221;,
	qui signifie de maintenir enfoncé la touche
	<span class="keycap"><strong>Ctrl</strong></span> et d'appuyer sur
	<span class="keycap"><strong>C</strong></span>.</p></div><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour d'autres documents détaillant
	l'implémentation d'IPsec, jetez un oeil à
        <code class="uri"><a class="uri" href="http://www.daemonnews.org/200101/ipsec-howto.html" target="_top">http://www.daemonnews.org/200101/ipsec-howto.html</a></code>
        et <code class="uri"><a class="uri" href="http://www.freebsddiary.org/ipsec.php" target="_top">http://www.freebsddiary.org/ipsec.php</a></code>.</p></div><p>Le mécanisme IPsec fournit des communications
      sécurisées sur couche IP ou à travers les
      <span class="emphasis"><em>sockets</em></span>.  Cette section explique comment
      l'utiliser.  Pour des détails concernant
      l'implémentation d'IPsec, reportez-vous au
      <a class="link" href="../developers-handbook/ipv6.html" target="_top">Manuel du
      développeur</a>.</p><p>L'implémentation actuelle d'IPsec supporte le mode
      transport et le mode tunnel.  Cependant, il y a des restrictions
      au mode tunnel.  <code class="uri"><a class="uri" href="http://www.kame.net/newsletter/" target="_top">http://www.kame.net/newsletter/</a></code> fournit des
      exemples plus exhaustifs.</p><p>Soyez informé que pour utiliser cette fonctionnalité,
      vous devez avoir les options suivantes présentes dans
      votre fichier de configuration du noyau:</p><pre class="programlisting">options          IPSEC              #IP security
options          IPSEC_ESP          #IP security (crypto; define w/IPSEC)</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76881744"></a>15.10.1. Exemple en mode transport avec IPv4</h3></div></div></div><p>Configurons une association de sécurité
	pour déployer un canal sécurisé entre la Machine A
	(<code class="systemitem">10.2.3.4</code>) et la Machine B
	(<code class="systemitem">10.6.7.8</code>).  Notre exemple est
	un peu compliqué.  De A vers B, nous n'utilisons que
	l'ancien AH.  De B vers A, le nouvel AH et le nouvel ESP sont
	combinés.</p><p>Nous devons maintenant choisir les algorithmes
	correspondant à
        &#8220;AH&#8221;/&#8220;nouvel AH&#8221;/&#8220;ESP&#8221;/
	&#8220;nouvel ESP&#8221;.  Reportez-vous à la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a> pour connaître les noms des algorithmes.
	Nous utiliserons MD5 pour AH, new-HMAC-SHA1 pour le nouvel AH,
	et new-DES-expIV avec 8 octets IV pour le nouvel ESP.</p><p>La longueur de la clé dépend de chaque algorithme.
	Par exemple, elle doit être égale à 16 octets
	pour MD5, 20 pour new-HMAC-SHA1, et 8 pour new-DES-expIV.
	Nous choisissons maintenant &#8220;MYSECRETMYSECRET&#8221;,
        &#8220;KAMEKAMEKAMEKAMEKAME&#8221;, &#8220;PASSWORD&#8221;,
	respectivement.</p><p>Définissons maintenant le SPI (<span class="emphasis"><em>Security Parameter
	Index</em></span>) pour chaque protocole.  Remarquez qu'il nous
	faut 3 SPIs pour ce canal sécurisé puisqu'il y aura
	trois entêtes de sécurité (une de la Machine A vers la
	Machine B et deux de la Machine B vers la Machine A).  Notez
	également que les SPIs doivent être supérieurs
	à 256.  Nous choisirions 1000, 2000 et 3000
	respectivement.</p><pre class="screen">
	          (1)
	Machine A ------&gt; Machine B

	(1)PROTO=AH
		ALG=MD5(RFC1826)
		KEY=MYSECRETMYSECRET
		SPI=1000

	           (2.1)
	Machine A &lt;------ Machine B
	          &lt;------
	           (2.2)

	(2.1)
	PROTO=AH
		ALG=new-HMAC-SHA1(new AH)
		KEY=KAMEKAMEKAMEKAMEKAME
		SPI=2000

	(2.2)
	PROTO=ESP
		ALG=new-DES-expIV(new ESP)
			IV length = 8
		KEY=PASSWORD
		SPI=3000
</pre><p>Maintenant, définissons l'association de
	sécurité.  Exécutons <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setkey&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">setkey</span>(8)</span></a> sur
	la Machine A et la Machine B:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c
    add 10.2.3.4 10.6.7.8 ah-old  1000 -m transport -A keyed-md5 "MYSECRETMYSECRET" ;
    add 10.6.7.8 10.2.3.4 ah  2000 -m transport -A hmac-sha1 "KAMEKAMEKAMEKAMEKAME" ;
    add 10.6.7.8 10.2.3.4 esp 3000 -m transport -E des-cbc "PASSWORD" ;
    ^D</code></strong></pre><p>En fait, la communication IPsec n'aura pas lieu avant que
	les entrées de politique de sécurité
	ne soient définies.  Dans notre cas, il faut le faire sur les
	deux machines.</p><pre class="screen">
Côté A:

<code class="prompt">#</code> <strong class="userinput"><code>setkey -c
    spdadd 10.2.3.4 10.6.7.8 any -P out ipsec
	ah/transport/10.2.3.4-10.6.7.8/require ;
    ^D</code></strong>

Côté B:

<code class="prompt">#</code> <strong class="userinput"><code>setkey -c
    spdadd 10.6.7.8 10.2.3.4 any -P out ipsec
	esp/transport/10.6.7.8-10.2.3.4/require ;
    spdadd 10.6.7.8 10.2.3.4 any -P out ipsec
	ah/transport/10.6.7.8-10.2.3.4/require ;
    ^D</code></strong>


   Machine A --------------------------&gt; Machine E
   10.2.3.4                               10.6.7.8
      |                                     |
      ========= ancien AH keyed-md5 ========&gt;

      &lt;======== nouveau AH hmac-sha1 ========
      &lt;======== nouveau ESP des-cbc =========
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76895312"></a>15.10.2. Exemple en mode transport avec IPv6</h3></div></div></div><p>Un autre exemple utilisant IPv6.</p><p>Le mode de transport ESP est recommandé pour le
	port TCP numéro 110 entre la Machine-A et la
	Machine-B.</p><pre class="screen">
              ============ ESP ============
              |                           |
          Machine-A                   Machine-B
          fec0::10 -------------------- fec0::11
</pre><p>L'algorithme de chiffrement est blowfish-cbc avec la
	clé &#8220;kamekame&#8221;, et l'algorithme
	d'authentification est hmac-sha1 avec la clé
	&#8220;this is the test key&#8221;.  Configuration de la
	Machine-A:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0::10[any] fec0::11[110] tcp -P out ipsec
	esp/transport/fec0::10-fec0::11/use ;
    spdadd fec0::11[110] fec0::10[any] tcp -P in ipsec
	esp/transport/fec0::11-fec0::10/use ;
    add fec0::10 fec0::11 esp 0x10001
	-m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    add fec0::11 fec0::10 esp 0x10002
	-m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    EOF</code></strong></pre><p>et de la Machine-B:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0::11[110] fec0::10[any] tcp -P out ipsec
	esp/transport/fec0::11-fec0::10/use ;
    spdadd fec0::10[any] fec0::11[110] tcp -P in ipsec
	esp/transport/fec0::10-fec0::11/use ;
    add fec0::10 fec0::11 esp 0x10001 -m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    add fec0::11 fec0::10 esp 0x10002 -m transport
	-E blowfish-cbc "kamekame"
	-A hmac-sha1 "this is the test key" ;
    EOF</code></strong></pre><p>Remarquez la direction de SP.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76900176"></a>15.10.3. Exemple en mode tunnel avec IPv4</h3></div></div></div><p>Mode tunnel entre deux passerelles de
	sécurité</p><p>Le protocole de sécurité est l'ancien mode
	tunnel AH, i.e. spécifié par la RFC1826,
	avec keyed-md5 comme algorithme d'authentification
	et &#8220;this is the test&#8221; comme clé.</p><pre class="screen">
                             ======= AH =======
                             |                |
         Réseau-A       Passerelle-A     Passerelle-B       Réseau-B
        10.0.1.0/24 ---- 172.16.0.1 ----- 172.16.0.2 ---- 10.0.2.0/24
</pre><p>Configuration de la Passerelle-A:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd 10.0.1.0/24 10.0.2.0/24 any -P out ipsec
	ah/tunnel/172.16.0.1-172.16.0.2/require ;
    spdadd 10.0.2.0/24 10.0.1.0/24 any -P in ipsec
	ah/tunnel/172.16.0.2-172.16.0.1/require ;
    add 172.16.0.1 172.16.0.2 ah-old 0x10003 -m any
	-A keyed-md5 "this is the test" ;
    add 172.16.0.2 172.16.0.1 ah-old 0x10004 -m any
	-A keyed-md5 "this is the test" ;

EOF</code></strong></pre><p>Si le numéro de port n'est pas précisé
	comme ci-dessus, alors <code class="literal">[any]</code> est
	utilisé.  <code class="literal">-m</code> définit le mode
	de SA à utiliser. <code class="literal">-m any</code> signifie
	tout mode de protocole de sécurité.  Vous
	pouvez utiliser cette SA à la fois en mode transport
	et en mode tunnel.</p><p>et de la Passerelle-B:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd 10.0.2.0/24 10.0.1.0/24 any -P out ipsec
	ah/tunnel/172.16.0.2-172.16.0.1/require ;
    spdadd 10.0.1.0/24 10.0.2.0/24 any -P in ipsec
	ah/tunnel/172.16.0.1-172.16.0.2/require ;
    add 172.16.0.1 172.16.0.2 ah-old 0x10003 -m any
	-A keyed-md5 "this is the test" ;
    add 172.16.0.2 172.16.0.1 ah-old 0x10004 -m any
	-A keyed-md5 "this is the test" ;

EOF</code></strong></pre><p>Etablir une SA regroupée entre deux passerelles
	de sécurité</p><p>On désire le mode de transport AH et le mode
	tunnel ESP entre Passerelle-A et Passerelle-B.  Dans ce
	cas, on applique d'abord le mode tunnel ESP puis le mode
	de transport AH.</p><pre class="screen">
                            ========== AH =========
                            |  ======= ESP =====  |
                            |  |               |  |
       Réseau-A         Passerelle-A        Passerelle-B        Réseau-B
    fec0:0:0:1::/64 --- fec0:0:0:1::1 ---- fec0:0:0:2::1 --- fec0:0:0:2::/64
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76911696"></a>15.10.4. Exemple en mode tunnel avec IPv6</h3></div></div></div><p>L'algorithme de chiffrement est 3des-cbc, et l'algorithme
	d'authentification est hmac-sha1.  L'algorithme
	d'authentification pour AH est hmac-md5.  Configuration de la
	Passerelle-A:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0:0:0:1::/64 fec0:0:0:2::/64 any -P out ipsec
	esp/tunnel/fec0:0:0:1::1-fec0:0:0:2::1/require
	ah/transport/fec0:0:0:1::1-fec0:0:0:2::1/require ;
    spdadd fec0:0:0:2::/64 fec0:0:0:1::/64 any -P in ipsec
	esp/tunnel/fec0:0:0:2::1-fec0:0:0:1::1/require
	ah/transport/fec0:0:0:2::1-fec0:0:0:1::1/require ;
    add fec0:0:0:1::1 fec0:0:0:2::1 esp 0x10001 -m tunnel
	-E 3des-cbc "kamekame12341234kame1234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:1::1 fec0:0:0:2::1 ah 0x10001 -m transport
	-A hmac-md5 "this is the test" ;
    add fec0:0:0:2::1 fec0:0:0:1::1 esp 0x10001 -m tunnel
	-E 3des-cbc "kamekame12341234kame1234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:2::1 fec0:0:0:1::1 ah 0x10001 -m transport
	-A hmac-md5 "this is the test" ;

    EOF</code></strong></pre><p>Etablir des SAs avec les différentes
	extrémités</p><p>On désire un mode tunnel ESP entre Machine-A et
	Passerelle-A.  L'algorithme de chiffrement est cast128-cbc,
	et l'algorithme d'authentification pour ESP est hmac-sha1.
	Le mode de transport ESP est recommandé entre Machine-A
	et Machine-B.  L'algorithme de chiffrement est rc5-cbc, et
	l'algorithme d'authentification pour ESP est hmac-md5.</p><pre class="screen">
              ================== ESP =================
              |  ======= ESP =======                 |
              |  |                 |                 |
            Machine-A        Passerelle-A         Machine-B
          fec0:0:0:1::1 ---- fec0:0:0:2::1 ---- fec0:0:0:2::2
</pre><p>Configuration de la Machine-A:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setkey -c &lt;&lt;EOF
    spdadd fec0:0:0:1::1[any] fec0:0:0:2::2[80] tcp -P out ipsec
	esp/transport/fec0:0:0:1::1-fec0:0:0:2::2/use
	esp/tunnel/fec0:0:0:1::1-fec0:0:0:2::1/require ;
    spdadd fec0:0:0:2::1[80] fec0:0:0:1::1[any] tcp -P in ipsec
	esp/transport/fec0:0:0:2::2-fec0:0:0:l::1/use
	esp/tunnel/fec0:0:0:2::1-fec0:0:0:1::1/require ;
    add fec0:0:0:1::1 fec0:0:0:2::2 esp 0x10001
	-m transport
	-E cast128-cbc "12341234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:1::1 fec0:0:0:2::1 esp 0x10002
	-E rc5-cbc "kamekame"
	-A hmac-md5 "this is the test" ;
    add fec0:0:0:2::2 fec0:0:0:1::1 esp 0x10003
	-m transport
	-E cast128-cbc "12341234"
	-A hmac-sha1 "this is the test key" ;
    add fec0:0:0:2::1 fec0:0:0:1::1 esp 0x10004
	-E rc5-cbc "kamekame"
	-A hmac-md5 "this is the test" ;

    EOF</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="openssh"></a>15.11. OpenSSH</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><a id="idp76919248" class="indexterm"></a><a id="idp76919760" class="indexterm"></a><p><span class="application">OpenSSH</span> est un ensemble d'outils
      de connexion réseau utilisés pour
      accéder à des machines
      distantes de façon sécurisée.  Ils peuvent
      être utilisés comme remplaçants directs de
      <code class="command">rlogin</code>, <code class="command">rsh</code>,
      <code class="command">rcp</code>, et <code class="command">telnet</code>.
      De plus, <span class="application">OpenSSH</span> peut
      sécuriser n'importe quelle connexion
      TCP/IP via un tunnel.  <span class="application">OpenSSH</span>
      chiffre tout le trafic de façon
      à déjouer les écoutes réseau, les
      prises de contrôle de connexion, et aux attaques au niveau
      du réseau.</p><p><span class="application">OpenSSH</span> est maintenu par le
      projet OpenBSD, et est basé sur SSH v1.2.12 avec tous les
      récentes corrections et mises à jour.  Il est
      compatible avec les protocoles SSH 1 et 2.
      <span class="application">OpenSSH</span> est présent dans le
      système de base depuis FreeBSD 4.0.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76929104"></a>15.11.1. Les avantages à utiliser OpenSSH</h3></div></div></div><p>Normalement, quand on utilise <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a> ou
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>, les données sont envoyées sur le
	réseau en clair, sous forme non chiffrée.
	Des &#8220;renifleurs de paquets&#8221; placés
	n'importe où entre le client et le serveur peuvent
	prendre connaissance de votre nom d'utilisateur, de votre mot
	de passe et des données transmises lors de votre session.
	<span class="application">OpenSSH</span> offre une
	variété de méthodes d'authentification et
	de chiffrage pour éviter ce genre de
	problème.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76932176"></a>15.11.2. Activer sshd</h3></div></div></div><a id="idp76932816" class="indexterm"></a><p>Assurez-vous d'ajouter la ligne suivante à
	votre fichier <code class="filename">rc.conf</code>:</p><pre class="screen">sshd_enable="YES"</pre><p>Cela chargera le &#8220;daemon&#8221;
	<span class="application">ssh</span> à l'initialisation suivante
	du système.  Alternativement, vous pouvez tout simplement
	exécuter le &#8220;daemon&#8221;
	<span class="application">sshd</span> directement en tapant
	<code class="command">sshd</code> sur la ligne de commande.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76937040"></a>15.11.3. Client SSH</h3></div></div></div><a id="idp76937680" class="indexterm"></a><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> fonctionne de la même
	manière que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ssh user@example.com</code></strong>
Host key not found from the list of known hosts.
Are you sure you want to continue connecting (yes/no)? <strong class="userinput"><code>yes</code></strong>
Host 'example.com' added to the list of known hosts.
user@example.com's password: <strong class="userinput"><code>*******</code></strong></pre><p>L'ouverture de session se poursuit comme si elle
	avait lancée par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rlogin&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rlogin</span>(1)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=telnet&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">telnet</span>(1)</span></a>.
	Le système SSH utilise un système d'empreinte
	de clé pour vérifier l'authenticité du
	serveur quand le client se connecte.  L'utilisateur est
	invité à entrer <code class="literal">yes</code> uniquement
	à la première connexion.  Lors des futures
	connexions, l'empreinte de la clé sauvegardé est
	vérifiée.  Le client SSH vous avertira si
	l'empreinte sauvée diffère de l'empreinte
	reçue lors de futures tentatives
	de connexion.  Les empreintes sont sauvées dans le
	fichier <code class="filename">~/.ssh/known_hosts</code>, ou
	<code class="filename">~/.ssh/known_hosts2</code> pour les empreintes
	du protocole SSH 2.</p><p>Par défaut, les serveurs
	<span class="application">OpenSSH</span> sont
	configurés pour accepter les connexions dans les deux
	protocoles SSH 1 et 2.  Le client peut, cependant, choisir
	entre les deux.  Le protocole 2 est connu pour être plus
	robuste et plus sécurisé que son
	prédécesseur.</p><p><code class="command">ssh</code> peut être forcé à
	utilisé l'un des protocole en passant l'argument
	<code class="option">-1</code> ou <code class="option">-2</code> pour le protocole 1
	ou 2 respectivement.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76968400"></a>15.11.4. Copie sécurisée</h3></div></div></div><a id="idp76969040" class="indexterm"></a><a id="idp76970192" class="indexterm"></a><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> fonctionne de la même
	manière que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>; elle copie un fichier vers ou
	à partir d'une machine distante à la
	différence qu'elle le fait
	d'une façon sécurisé.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code> scp user@example.com:/COPYRIGHT COPYRIGHT</code></strong>
user@example.com's password: <strong class="userinput"><code>*******</code></strong>
COPYRIGHT            100% |*****************************|  4735
00:00
<code class="prompt">#</code></pre><p>Puisque l'empreinte a déjà été
	sauvée pour cette machine dans l'exemple
	précédent, cela se vérifie ici quand on utilise
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a>.</p><p>Les arguments passés à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> sont
	similaires à ceux de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cp</span>(1)</span></a>, avec le ou les fichiers
	en premier argument, et la destination en second.
	Puisque que le fichier est copié via le réseau, par
	l'intermédiaire de SSH, un ou plusieurs des arguments
	prennent la forme
	<code class="option">utilisateur@machine_distante:&lt;chemin_du_fichier&gt;</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76978128"></a>15.11.5. Configuration</h3></div></div></div><a id="idp76978768" class="indexterm"></a><p>Les fichiers de configuration général au
	système pour le &#8220;daemon&#8221; et le client
	<span class="application">OpenSSH</span> résident dans le
	répertoire <code class="filename">/etc/ssh</code>.</p><p><code class="filename">ssh_config</code> permet de paramétrer
	le client, tandis que <code class="filename">sshd_config</code>
	s'occupe de la configuration du &#8220;daemon&#8221;.</p><p>De plus, les options <code class="option">sshd_program</code>
	(<code class="filename">/usr/sbin/sshd</code> par défaut),
	et <code class="option">sshd_flags</code> du fichier
	<code class="filename">rc.conf</code> peut fournir un niveau
	supplémentaire de configuration.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp76992720"></a>15.11.6. ssh-keygen</h3></div></div></div><p>Au lieu d'utiliser des mots de passe, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
	peut être employé pour générer des
	clés RSA pour authentifier un utilisateur:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh-keygen -t rsa1</code></strong>
Initializing random number generator...
Generating p:  .++ (distance 66)
Generating q:  ..............................++ (distance 498)
Computing the keys...
Key generation complete.
Enter file in which to save the key (/home/user/.ssh/identity):
Enter passphrase:
Enter the same passphrase again:
Your identification has been saved in /home/user/.ssh/identity.
...</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> créera une paire de clés
	publique et privée à utiliser pour l'authentification.
	La clé privée est stockée dans le fichier
        <code class="filename">~/.ssh/identity</code>, alors que la clé
	publique l'est dans le fichier
	<code class="filename">~/.ssh/identity.pub</code>.  La clé
	publique doit être placée dans le fichier
        <code class="filename">~/.ssh/authorized_keys</code> sur la machine
	distante pour que cela fonctionne.</p><p>Ceci autorisera les connexions sur la machine distante
	en utilisant l'authentification RSA à la place des
	mots de passe.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'option <code class="option">-t rsa1</code> créera des
	clés RSA pour le protocole SSH 1.  Si vous désirez
	utiliser des clés RSA avec le protocole SSH 2, vous devez
	employer la commande <code class="command">ssh-keygen -t
	rsa</code>.</p></div><p>Si une phrase d'authentification est utilisée
	avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>, l'utilisateur se verra demandé
	d'entrer un mot de passe à chaque utilisation de la clé
	privé.</p><p>Une clé DSA SSH protocole 2 peut être
	créée pour le même objectif en utilisant
	la commande <code class="command">ssh-keygen -t dsa</code>.
	Cela créera une paire de clés DSA pour les sessions
	SSH utilisant le protocole 2.  La clé publique est
	conservée dans <code class="filename">~/.ssh/id_dsa.pub</code>,
	tandis que la clé privée se trouve dans
	<code class="filename">~/.ssh/id_dsa</code>.</p><p>Les clés publiques DSA sont placées dans le
	fichier <code class="filename">~/.ssh/authorized_keys</code> sur la
	machine distante.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a> sont des utilitaires
	employés pour la gestion de multiples clés
	privées protégées par mots de passe.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les divers fichiers et options peuvent être
	différents selon la version
	d'<span class="application">OpenSSH</span> dont vous disposez,
	pour éviter les problèmes vous devez consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="security-ssh-tunneling"></a>15.11.7. Tunnels SSH</h3></div></div></div><a id="idp77007440" class="indexterm"></a><p><span class="application">OpenSSH</span> a la
	capacité de créer un tunnel
	pour encapsuler un autre protocole dans une session
	chiffrée.</p><p>La commande suivante demande à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> de
	créer un tunnel pour <span class="application">telnet</span>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5023:localhost:23 user@foo.example.com</code></strong>
<code class="prompt">%</code></pre><p>La commande <code class="command">ssh</code> est utilisée avec
	les options suivantes:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-2</code></span></dt><dd><p>Force <code class="command">ssh</code> à utiliser la
	      version du protocole (à ne pas utiliser si vous
	      travaillez avec de vieux serveurs SSH).</p></dd><dt><span class="term"><code class="option">-N</code></span></dt><dd><p>N'exécute aucune commande à distance, ou
	      mode se place en mode tunnel.  Si cette option est omise
	      <code class="command">ssh</code> initiera une session
	      normale.</p></dd><dt><span class="term"><code class="option">-f</code></span></dt><dd><p>Force <code class="command">ssh</code> à s'exécuter
	      en arrière-plan.</p></dd><dt><span class="term"><code class="option">-L</code></span></dt><dd><p>Spécifie un tunnel local de la manière
	      <em class="replaceable"><code>port_local:machine_distante:port_distant</code></em>.</p></dd><dt><span class="term"><code class="option">user@foo.example.com</code></span></dt><dd><p>Le serveur SSH distant.</p></dd></dl></div><p>Un tunnel SSH fonctionne grâce à
	l'allocation d'une &#8220;socket&#8221; qui écoute
	sur le port spécifié de la machine
	<code class="systemitem">localhost</code>.
	Il transfère ensuite toute connexion reçue sur la/le
	machine/port local(e) via la connexion SSH vers la machine et
	le port distants spécifiés.</p><p>Dans l'exemple, le port <em class="replaceable"><code>5023</code></em>
	sur la machine locale transfère toute connexion
	sur ce port vers le port <em class="replaceable"><code>23</code></em> de la
	machine distante (le <code class="systemitem">localhost</code> de la
	commande).  Puisque le port <em class="replaceable"><code>23</code></em> est
	celui de <span class="application">telnet</span>, cela créerai
	une session <span class="application">telnet</span>
	sécurisée par l'intermédiaire
	d'un tunnel SSH.</p><p>Cela peut être utilisé pour
	encapsuler n'importe quel nombre de protocoles TCP non
	sécurisé comme SMTP, POP3, FTP, etc.</p><div class="example"><a id="idp77051728"></a><div class="example-title">Exemple 15.1. Utiliser SSH pour créer un tunnel
	  sécurisé pour SMTP</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 5025:localhost:25 user@mailserver.example.com</code></strong>
user@mailserver.example.com's password: <strong class="userinput"><code>*****</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>telnet localhost 5025</code></strong>
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 mailserver.example.com ESMTP</pre><p>Ceci peut être utilisé en conjonction
	  avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a> et des comptes utilisateurs
	  supplémentaires pour la création et l'accès au
	  tunnel SSH sans trop de problème.
	  Des clés peuvent être utilisées à
	  la place de la saisie d'un mot de passe, et les tunnels
	  peuvent être exécutés sous un
	  utilisateur séparé.</p></div></div><br class="example-break" /><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77060176"></a>15.11.7.1. Exemples pratiques de tunnels SSH</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77060816"></a>15.11.7.1.1. Accès sécurisé à un serveur POP3</h5></div></div></div><p>Au travail, il y a un serveur SSH qui accepte les
	    connexions de l'extérieur.  Sur le même réseau
	    d'entreprise réside un serveur de courrier
	    électronique faisant fonctionner un serveur POP3.
	    Le réseau ou le chemin entre chez vous et le bureau
	    peut ou peut ne pas être complètement sûr.
	    Pour cette raison, vous devez récupérer votre
	    courrier électronique d'une façon
	    sécurisée.
	    La solution est de créer une connexion SSH vers
	    le serveur SSH de votre entreprise, et d'utiliser ce
	    tunnel vers le serveur de courrier.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 2110:mail.example.com:110 user@ssh-server.example.com</code></strong>
user@ssh-server.example.com's password: <strong class="userinput"><code>******</code></strong></pre><p>Quand le tunnel est configuré et fonctionne,
	    vous pouvez demander à votre client de courrier
	    électronique d'envoyer ses requêtes POP3 sur le
	    port 2110 de la machine locale: <code class="systemitem">localhost</code>.
	    Les connexions seront transférées de façon
	    sécurisé à travers le tunnel jusqu'à
	    <code class="systemitem">mail.example.com</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77064400"></a>15.11.7.1.2. Passer à travers un coupe-feu restrictif</h5></div></div></div><p>Certains administrateurs réseau imposent
	    des règles draconiennes au niveau du coupe-feu,
	    filtrant non seulement les connexions entrantes,
	    mais également les connexions sortantes.  Il se
	    peut que vous n'ayez accès qu'aux ports 22 et 80
	    de machines distantes pour SSH ou la navigation
	    Internet.</p><p>Vous pouvez vouloir accéder à un autre
	    (n'ayant peut-être aucun rapport avec votre travail)
	    service, comme un serveur Ogg Vorbis pour écouter
	    de la musique.  Si le serveur Ogg Vorbis diffuse
	    (&#8220;streaming&#8221;) ses données
	    à partir d'un port différent
	    des ports 22 ou 80, vous ne serez alors pas en mesure d'y
	    accéder.</p><p>La solution est de créer une connexion SSH
	    vers une machine à l'extérieur du
	    réseau protégé
	    par le coupe-feu, et l'utiliser pour créer un
	    tunnel vers le serveur Ogg Vorbis.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ssh -2 -N -f -L 8888:music.example.com:8000 user@unfirewalled-system.example.org</code></strong>
user@unfirewalled-system.example.org's password: <strong class="userinput"><code>*******</code></strong></pre><p>Vous pouvez maintenant faire pointer votre client
	    pour la récupération du flux de
	    données sur le port 8888
	    de la machine locale, qui sera transféré
	    jusqu'au port 8000 de la machine
	    <code class="systemitem">music.example.com</code>, passant ainsi outre
	    les restrictions du coupe-feu.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77072848"></a>15.11.8. Lectures supplémentaires</h3></div></div></div><p><a class="link" href="http://www.openssh.com/" target="_top">OpenSSH</a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=scp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">scp</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-keygen&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-keygen</span>(1)</span></a>
        <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-agent&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-agent</span>(1)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh-add&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh-add</span>(1)</span></a></p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sshd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sshd</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sftp-server&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sftp-server</span>(8)</span></a></p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="fs-acl"></a>15.12. Listes de contrôle d'accès au système de
      fichiers</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp77082832" class="indexterm"></a><p>Avec les améliorations des systèmes de fichiers
      comme les &#8220;snapshots&#8221;, FreeBSD 5.0 et versions
      suivantes offrent une nouveauté en matière de
      sécurité: les listes de contrôle d'accès
      au système de fichiers (<acronym class="acronym">ACL</acronym>s -
      &#8220;Access Control Lists&#8221;).</p><p>Les listes de contrôle d'accès étendent
      le système de permission standard d'UNIX d'une manière
      hautement compatible (POSIX.1e).  Cette caractéristique
      permet à un administrateur d'utiliser avantageusement
      un modèle de sécurité plus
      sophistiqué.</p><p>Pour activer le support <acronym class="acronym">ACL</acronym> pour les
      systèmes de fichiers <acronym class="acronym">UFS</acronym>, ce qui
      suit:</p><pre class="programlisting">options UFS_ACL</pre><p>doit être compilé dans le noyau.  Si cette option
      n'a pas été ajoutée, un avertissement sera
      affiché lors d'une tentative de montage d'un système
      de fichiers supportant les <acronym class="acronym">ACL</acronym>s.
      Cette option est présente dans le noyau
      <code class="filename">GENERIC</code>.  Les <acronym class="acronym">ACL</acronym>s
      reposent sur des attributs étendus rajoutés
      au système de fichiers.  Les attributs étendus sont
      nativement supportés par la prochaine
      génération du système de fichiers UNIX,
      <acronym class="acronym">UFS2</acronym>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un supplément de travail d'administration est requis
	pour configurer les attributs étendus sous
	<acronym class="acronym">UFS1</acronym> par rapport à
	<acronym class="acronym">UFS2</acronym>.  Les performances des attributs
	étendus sous <acronym class="acronym">UFS2</acronym> sont sensiblement
	meilleures également.  Il en résulte donc, que
	l'<acronym class="acronym">UFS2</acronym> est généralement
	recommandé par rapport à
	l'<acronym class="acronym">UFS1</acronym> pour une utilisation des listes
	de contrôle d'accès.</p></div><p>Les <acronym class="acronym">ACL</acronym>s sont activés grâce
      l'option utilisée lors du montage, <code class="option">acls</code>,
      qui peut être ajouté dans le fichier
      <code class="filename">/etc/fstab</code>.  Cette option de montage peut
      être également automatiquement fixée
      d'une manière définitive en utilisant  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tunefs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">tunefs</span>(8)</span></a>
      pour modifier l'indicateur <acronym class="acronym">ACL</acronym> du
      &#8220;superblock&#8221; dans l'entête du système de
      fichiers.  Il est en général préférable
      d'utiliser cet indicateur pour plusieurs raisons:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'option de montage pour les <acronym class="acronym">ACL</acronym>s ne
	  peut être modifiée par un simple remontage
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> <code class="option">-u</code>), mais uniquement par un
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> complet et suivi d'un <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Cela
	  signifie que les <acronym class="acronym">ACL</acronym>s ne peuvent
	  être activées sur le système de fichiers
	  racine après le démarrage. Cela signifie
	  également que vous ne pouvez pas modifier la
	  disposition d'un système de fichier une fois que
	  c'est activé.</p></li><li class="listitem"><p>Positionner l'indicateur du &#8220;superblock&#8221;
	  fera que le système de fichiers sera toujours monté
	  avec les <acronym class="acronym">ACL</acronym>s activées même
	  s'il n'y a pas d'entrée dans le fichier
	  <code class="filename">fstab</code>, ou s'il y a une réorganisation
	  des périphériques.  Cela prévient
	  le montage accidentel du système de fichiers sans les
	  <acronym class="acronym">ACL</acronym>s activées, ce qui peut provoquer
	  une activation impropre des <acronym class="acronym">ACL</acronym>s et
	  par conséquent des problèmes de
	  sécurité.</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nous pourrions modifier le comportement des
	<acronym class="acronym">ACL</acronym>s pour permettre l'activation de
	l'indicateur sans le besoin d'un nouveau <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>
	complet, mais nous considérons qu'il est préférable
	d'éviter un montage accidentel sans les
	<acronym class="acronym">ACL</acronym>s activées, parce que vous pouvez
	vous &#8220;tirer facilement dans les pieds&#8221;
	si vous activez les <acronym class="acronym">ACL</acronym>s, puis
	les désactivez, et ensuite les réactivez à
	nouveau sans réinitialiser les attributs étendus.
	En général, une fois que vous avez activé
	les <acronym class="acronym">ACL</acronym>s sur un système de fichiers,
	elles ne devraient pas être désactivées
	étant donné que les protections de fichiers
	résultantes peuvent ne pas être compatible avec
	celles prévues par les utilisateurs du système,
	et réactiver les <acronym class="acronym">ACL</acronym>s peut
	réaffecter les précédentes
	<acronym class="acronym">ACL</acronym>s aux fichiers qui ont depuis eût
	leur permissions modifiées, avec pour résultat
	un comportement imprévisible.</p></div><p>Les systèmes de fichiers avec les
      <acronym class="acronym">ACL</acronym>s activées présenteront un signe
      <code class="literal">+</code> au niveau de leurs permissions
      quand elles seront affichées.  Par exemple:</p><pre class="programlisting">drwx------  2 robert  robert  512 Dec 27 11:54 private
drwxrwx---+ 2 robert  robert  512 Dec 23 10:57 directory1
drwxrwx---+ 2 robert  robert  512 Dec 22 10:20 directory2
drwxrwx---+ 2 robert  robert  512 Dec 27 11:57 directory3
drwxr-xr-x  2 robert  robert  512 Nov 10 11:54 public_html</pre><p>Ici nous voyons que les répertoires
      <code class="filename">directory1</code>,
      <code class="filename">directory2</code>, et
      <code class="filename">directory3</code> utilisent les
      <acronym class="acronym">ACL</acronym>s.  Ce n'est pas le cas du
      répertoire <code class="filename">public_html</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77121360"></a>15.12.1. Utilisation des <acronym class="acronym">ACL</acronym>s</h3></div></div></div><p>Les <acronym class="acronym">ACL</acronym>s
	peuvent être affichées par l'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">getfacl</span>(1)</span></a>.  Par exemple pour voir les
	<acronym class="acronym">ACL</acronym>s sur le fichier
	<code class="filename">test</code>, on utilisera la commande:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>getfacl test</code></strong>
	#file:test
	#owner:1001
	#group:1001
	user::rw-
	group::r--
	other::r--</pre><p>Pour modifier le paramétrage des
	<acronym class="acronym">ACL</acronym>s sur ce fichier, invoquez la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setfacl&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">setfacl</span>(1)</span></a>.  Intéressons-nous à la
	ligne:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -k test</code></strong></pre><p>L'indicateur <code class="option">-k</code> supprimera toutes les
	<acronym class="acronym">ACL</acronym>s actuellement définies pour un
	fichier ou un système de fichiers.  Une méthode
	plus adaptée est d'utiliser l'option
	<code class="option">-b</code> étant donné qu'elle conserve
	les champs de base nécessaires au bon
	fonctionnement des <acronym class="acronym">ACL</acronym>s.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setfacl -m u:trhodes:rwx,group:web:r--,o::--- test</code></strong></pre><p>Dans la commande ci-dessus, l'option <code class="option">-m</code> a
	été utilisée pour modifier les
	entrées <acronym class="acronym">ACL</acronym> par défaut.
	Comme il n'y avait pas d'entrées
	pré-définies, puisqu'elles ont été
	supprimées par la commande précédente,
	cela restaurera les options par défaut et prendra en
	compte les options précisées.  Prenez soin de
	noter que si vous ajoutez un utilisateur ou un groupe qui
	n'existe pas sur le système, une erreur
	<span class="errorname">Invalid argument</span> sera affichée
	sur la sortie standard.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-portaudit"></a>15.13. Surveillance des problèmes de sécurité
      relatifs aux programmes tierce-partie</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp77135568" class="indexterm"></a><p>Ces dernières années, le monde de la
      sécurité a fait beaucoup de progrès dans la
      manière d'évaluer les
      vulnérabilités.  Le risque d'une intrusion dans le
      système augmente avec l'installation et la configuration
      d'utilitaires tierce-partie et cela pour quasiment n'importe
      quel système d'exploitation disponible
      aujourd'hui.</p><p>L'évaluation des vulnérabilités est un
      facteur clé de la politique de sécurité,
      alors que FreeBSD publie des avis pour le système de base,
      faire de même pour les programmes tierce-partie
      dépasse les capacités du projet FreeBSD.  Il existe
      un moyen d'atténuer les vulnérabilités des
      logiciels tierce-partie et de prévenir les
      administrateurs des problèmes de sécurité
      connus.  Un outil FreeBSD connu sous le nom de
      <span class="application">Portaudit</span> existe dans cet unique
      but.</p><p>Le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portaudit/pkg-descr">ports-mgmt/portaudit</a> consulte une base de
      données, mise à jour et maintenue par
      l'équipe de sécurité de FreeBSD et les
      développeurs des logiciels portés, à la
      recherche de problèmes de sécurité
      connus.</p><p>Pour utiliser <span class="application">Portaudit</span>, ce
      dernier doit être installé à partir du
      catalogue des logiciels portés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/ports-mgmt/portaudit &amp;&amp; make install clean</code></strong></pre><p>Lors du processus d'installation, les fichiers de
      configuration de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> seront mis à jour,
      autorisant l'ajout des résultats de
      <span class="application">Portaudit</span> dans l'exécution
      quotidienne du rapport de sécurité.  Assurez-vous
      que les rapports de sécurité quotidiens, qui sont
      envoyés au compte messagerie de
      <code class="systemitem">root</code>, sont bien lus.  Pas plus de
      configuration ne sera nécessaire.</p><p>Après l'installation, un administrateur peut mettre
      à jour la base de données et afficher les
      vulnérabilités connues des logiciels
      installés en invoquant la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portaudit -Fda</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La base de données sera automatiquement mise
	à jour lors de l'exécution de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a>,
	cela rendant par conséquent facultative la commande
	précédente.  Elle n'est requise que pour les
	exemples qui vont suivre.</p></div><p>Pour contrôler à n'importe quel moment les
      programmes tierce-partie installés à partir du
      catalogue des logiciels portés, un administrateur n'aura
      qu'à exécuter la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portaudit -a</code></strong></pre><p><span class="application">Portaudit</span> produira pour les
      logiciels vulnérables quelque chose comme ceci:</p><pre class="programlisting">Affected package: cups-base-1.1.22.0_1
Type of problem: cups-base -- HPGL buffer overflow vulnerability.
Reference: &lt;http://www.FreeBSD.org/ports/portaudit/40a3bca2-6809-11d9-a9e7-0001020eed82.html&gt;

1 problem(s) in your installed packages found.

You are advised to update or deinstall the affected package(s) immediately.</pre><p>En faisant pointer un navigateur Web sur
      l'<acronym class="acronym">URL</acronym> proposée, un administrateur
      pourra obtenir plus d'information au sujet de la
      vulnérabilité en question.  Cela comprendra les
      versions affectées, listées par version du
      logiciel porté FreeBSD, ainsi que des liens vers d'autres
      sites Web pouvant contenir des avis de
      sécurité.</p><p>En résumé,
      <span class="application">Portaudit</span> est un outil puissant et
      extrêmement utile quand il est employé
      conjointement avec le logiciel
      <span class="application">Portupgrade</span>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-advisories"></a>15.14. Avis de sécurité de FreeBSD</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp77160272" class="indexterm"></a><p>Comme plusieurs systèmes d'exploitation
      destinés à la production, FreeBSD publie des
      &#8220;Avis de sécurité&#8221;.  Ces avis sont
      généralement envoyés aux listes de
      diffusion traitant de la sécurité et
      ajoutés dans l'errata une fois seulement que les versions
      correspondantes ont été corrigées.  Cette
      section aura pour objectif d'expliquer ce qu'est un avis,
      comment le comprendre, et quelles mesures sont à prendre
      pour appliquer des correctifs à un système.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77161424"></a>15.14.1. A quoi ressemble un avis de
	sécurité?</h3></div></div></div><p>Les avis de sécurité de FreeBSD ressemblent
	à celui présenté ci-dessous qui provient
	de la liste de diffusion
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">freebsd-security-notifications</a>.</p><pre class="programlisting">=============================================================================
FreeBSD-SA-XX:XX.UTIL                                     Security Advisory
                                                          The FreeBSD Project

Topic:          denial of service due to some problem<a id="co-topic"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>

Category:       core<a id="co-category"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
Module:         sys<a id="co-module"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
Announced:      2003-09-23<a id="co-announce"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
Credits:        Person@EMAIL-ADDRESS<a id="co-credit"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
Affects:        All releases of FreeBSD<a id="co-affects"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>
                FreeBSD 4-STABLE prior to the correction date
Corrected:      2003-09-23 16:42:59 UTC (RELENG_4, 4.9-PRERELEASE)
                2003-09-23 20:08:42 UTC (RELENG_5_1, 5.1-RELEASE-p6)
                2003-09-23 20:07:06 UTC (RELENG_5_0, 5.0-RELEASE-p15)
                2003-09-23 16:44:58 UTC (RELENG_4_8, 4.8-RELEASE-p8)
                2003-09-23 16:47:34 UTC (RELENG_4_7, 4.7-RELEASE-p18)
                2003-09-23 16:49:46 UTC (RELENG_4_6, 4.6-RELEASE-p21)
                2003-09-23 16:51:24 UTC (RELENG_4_5, 4.5-RELEASE-p33)
                2003-09-23 16:52:45 UTC (RELENG_4_4, 4.4-RELEASE-p43)
                2003-09-23 16:54:39 UTC (RELENG_4_3, 4.3-RELEASE-p39)<a id="co-corrected"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
FreeBSD only:   NO<a id="co-only"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>

For general information regarding FreeBSD Security Advisories,
including descriptions of the fields above, security branches, and the
following sections, please visit
http://www.freebsd.org/security/.

I.   Background<a id="co-backround"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>


II.  Problem Description<a id="co-descript"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>


III. Impact<a id="co-impact"></a><span><img src="./imagelib/callouts/11.png" alt="11" border="0" /></span>


IV.  Workaround<a id="co-workaround"></a><span><img src="./imagelib/callouts/12.png" alt="12" border="0" /></span>


V.   Solution<a id="co-solution"></a><span><img src="./imagelib/callouts/13.png" alt="13" border="0" /></span>


VI.  Correction details<a id="co-details"></a><span><img src="./imagelib/callouts/14.png" alt="14" border="0" /></span>


VII. References<a id="co-ref"></a><span><img src="./imagelib/callouts/15.png" alt="15" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-topic"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Topic</code> indique exactement
	    quel est le problème.  C'est basiquement une
	    introduction à l'avis de sécurité en
	    tant que tel et mentionne l'utilitaire contenant la
	    vulnérabilité.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-category"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Category</code> fait
	    référence à la partie du système
	    affectée qui peut être une parmi
	    <code class="literal">core</code>, <code class="literal">contrib</code>, ou
	    <code class="literal">ports</code>.  La catégorie
	    <code class="literal">core</code> signifie que la
	    vulnérabilité affecte un composant
	    système du système d'exploitation FreeBSD.  La
	    catégorie <code class="literal">contrib</code> précise
	    que la vulnérabilité affecte du logiciel
	    contribué au projet FreeBSD, comme
	    <span class="application">sendmail</span>.  Et enfin la
	    catégorie <code class="literal">ports</code> indique que la
	    vulnérabilité affecte un logiciel du catalogue
	    des logiciels portés.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-module"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Module</code> fait
	    référence à l'emplacement du composant,
	    par exemple <code class="literal">sys</code>.  Dans notre exemple,
	    nous voyons que le module <code class="literal">sys</code> est
	    affecté, par conséquent, cette
	    vulnérabilité concerne un composant
	    utilisé dans le noyau.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-announce"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Announced</code> reflète
	    la date à laquelle l'avis de sécurité a
	    été publié, ou annoncé au monde
	    entier.  Cela signifie que l'équipe de
	    sécurité a vérifié que le
	    problème existait vraiment et qu'un correctif a
	    été ajouté au référentiel
	    des sources de FreeBSD.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-credit"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Credits</code> donne le
	    crédit de la découverte du problème
	    à la personne ou l'organisation qui a constaté
	    et rapporté le problème.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-affects"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Affects</code> explique quelles
	    versions de FreeBSD sont affectées par cette
	    vulnérabilité.  Pour le noyau, un coup d'oeil
	    rapide à la sortie de la commande
	    <code class="command">ident</code> sur les fichiers affectés
	    aidera à déterminer la révision.  Pour
	    les logiciels portés, le numéro de version est
	    listé après le nom du logiciel dans <code class="filename">/var/db/pkg</code>.  Si le
	    système ne se synchronise pas avec le
	    référentiel <acronym class="acronym">CVS</acronym> FreeBSD et ne
	    recompile pas les sources quotidiennement, il y a des
	    chances qu'il soit affecté par le
	    problème.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-corrected"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Corrected</code> indique la date,
	    l'heure, le fuseau horaire, et la version de publication qui
	    a été corrigée.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-only"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">FreeBSD only</code> précise
	    si cette vulnérabilité affecte juste FreeBSD, ou
	    si elle concerne d'autres systèmes d'exploitation
	    également.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-backround"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Background</code> donne une
	    information précise sur ce qu'est l'utilitaire
	    affecté.  La plupart du temps, ce champ indique
	    pourquoi l'utilitaire existe sous FreeBSD, son rôle, et
	    quelques informations sur la naissance de
	    l'utilitaire.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-descript"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Problem Description</code>
	    explique en profondeur le problème de
	    sécurité.  Cela peut comprendre des
	    informations sur le code défectueux, ou même
	    comment l'utilitaire pourrait être utilisé pour
	    ouvrir un faille de sécurité.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-impact"><span><img src="./imagelib/callouts/11.png" alt="11" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Impact</code> décrit
	    l'impact sur le système du problème de
	    sécurité.  Par exemple, cela peut aller de
	    l'attaque par refus de service, au gain de droits
	    supplémentaires par les utilisateurs, en passant par
	    l'obtention des droits de super-utilisateur par
	    l'attaquant.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-workaround"><span><img src="./imagelib/callouts/12.png" alt="12" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Workaround</code> offre une
	    solution de contournement possible pour les administrateurs
	    qui ne sont pas en mesure de mettre à jour le
	    système.  Cela pouvant être due à des
	    contraintes de temps, à une disponibilité
	    réseau, ou une tout autre raison.  Cependant, la
	    sécurité ne devrait pas être prise
	    à la légère, et un système
	    affecté devrait soit être corrigé soit
	    implémenter une solution de contournement du
	    problème de sécurité.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-solution"><span><img src="./imagelib/callouts/13.png" alt="13" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Solution</code> donne les
	    instructions sur l'application de correctifs sur le
	    système affecté.  C'est une méthode pas
	    à pas vérifiée et testée pour
	    obtenir un système corrigé et fonctionnant de
	    manière sécurisée.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-details"><span><img src="./imagelib/callouts/14.png" alt="14" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">Correction Details</code> liste
	    la branche <acronym class="acronym">CVS</acronym> ou la version de
	    publication avec les points remplacés par des
	    caractères souligné.  Il donne
	    également le numéro de révision des
	    fichiers affectés sur chaque branche.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ref"><span><img src="./imagelib/callouts/15.png" alt="15" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le champ <code class="literal">References</code> donne en
	    général d'autres sources d'informations.  Cela
	    peut être des <acronym class="acronym">URL</acronym>s web, des
	    ouvrages, des listes de diffusions, et des forums de
	    discussion.</p></td></tr></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="security-accounting"></a>15.15. Comptabilité des processus</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp77262800" class="indexterm"></a><p>La comptabilité des processus est une mesure de
      sécurité avec laquelle un administrateur peut
      suivre l'utilisation des ressources du système, leur
      répartition entre les utilisateurs, surveiller le
      système et avoir un suivi minimal des commandes
      exécutées par un utilisateur.</p><p>Ce système possède des avantages et des
      inconvénients.  Un de ses avantages est qu'une intrusion
      pourra être remontée jusqu'à son point
      d'entrée.  Un des inconvénients est la
      quantité de journaux générée par
      cette comptabilité et l'espace disque que cela peut
      demander.  Cette section guidera l'administrateur au travers des
      bases de la comptabilité des processus.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77264464"></a>15.15.1. Activer et utiliser la comptabilité des
	processus</h3></div></div></div><p>Avant de pouvoir utiliser la comptabilité des
	processus, il faut l'activer.  Cela se fait en
	exécutant les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>touch /var/account/acct</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>accton /var/account/acct</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>echo 'accounting_enable="YES"' &gt;&gt; /etc/rc.conf</code></strong></pre><p>Une fois activée, les statistiques concernant le
	<acronym class="acronym">CPU</acronym>, les commandes, etc. commenceront
	à être comptabilisée.  Tous les journaux
	de comptabilisation des processus sont dans un format
	directement illisible pour l'utilisateur, ils pourront
	être examinés à l'aide de l'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sa</span>(8)</span></a>.  Si elle est utilisée sans
	paramètre, la commande <code class="command">sa</code> affichera
	les informations relatives au nombre d'appels par utilisateur,
	le temps écoulé en minutes, la durée
	totale des temps <acronym class="acronym">CPU</acronym> et utilisateur en
	minutes, le nombre moyen des opérations d'E/S,
	etc.</p><p>Pour afficher les informations sur les commandes
	utilisées, on emploiera l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lastcomm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lastcomm</span>(1)</span></a>.
	La commande <code class="command">lastcomm</code> peut être
	employée pour afficher les commandes tapées par
	les utilisateurs sur des terminaux (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>)
	spécifiques; par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>lastcomm ls
	trhodes ttyp1</code></strong></pre><p>imprimera toute utilisation de la commande
	<code class="command">ls</code> par l'utilisateur
	<code class="systemitem">trhodes</code> sur le terminal
	<code class="literal">ttyp1</code>.</p><p>De nombreuses autres options utiles existent et sont
	détaillées dans les pages de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lastcomm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">lastcomm</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=acct&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">acct</span>(5)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sa&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sa</span>(8)</span></a>.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp76374224" class="footnote"><p><a href="#idp76374224" class="para"><sup class="para">[8] </sup></a>Sous FreeBSD le mot de
      passe standard peut avoir une longueur de 128 caractères
      maximum.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails"></a>Chapitre 16. Environnements jail</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Matteo</span> <span class="surname">Riondato</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#jails-synopsis">16.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#jails-terms">16.2. Termes relatifs aux environnements jail</a></span></dt><dt><span class="sect1"><a href="#jails-intro">16.3. Introduction</a></span></dt><dt><span class="sect1"><a href="#jails-build">16.4. Création et contrôle de l'environnement
      jail</a></span></dt><dt><span class="sect1"><a href="#jails-tuning">16.5. Optimisation et administration</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><a id="idp77294672" class="indexterm"></a><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-synopsis"></a>16.1. Synopsis</h2></div></div></div><p>Ce chapitre expliquera ce que sont les environnements jail
      (prisons) et comment les utiliser.  Les environnements jail,
      souvent présentés comme une amélioration et
      un remplacement des <span class="emphasis"><em>environnements
      chrootés</em></span> sont des outils très puissants
      pour les administrateurs système, mais certaines de leurs
      fonctionnalités de base peuvent être
      également utiles aux utilisateurs avancés.</p><p>Après avoir lu ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ce qu'est un environnement jail, et quelle
	  utilité il peut avoir sur une installation FreeBSD.</p></li><li class="listitem"><p>Comment construire, démarrer et arrêter un
	  environnement jail.</p></li><li class="listitem"><p>Les bases de l'administration d'un environnement jail,
	  de l'intérieur et de l'extérieur de
	  l'environnement.</p></li></ul></div><p>D'autres sources d'information utiles concernant les
      environnements jail sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  C'est la
	  référence pour l'emploi de l'utilitaire
	  <code class="command">jail</code> &#8212; l'outil d'administration qui
	  peut être utilisé sous FreeBSD pour démarrer,
	  arrêter, et contrôler les environnements jail
	  FreeBSD.</p></li><li class="listitem"><p>Les listes de diffusion et leurs archives.  Les archives
	  de la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">liste de diffusion pour les questions d'ordre général à propos de FreeBSD</a> et d'autres listes hébergées
	  par le <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">serveur des listes de diffusion FreeBSD</a> contiennent déjà
	  quantité d'information sur les environnements jail.  Il
	  sera toujours conseillé de chercher dans les archives
	  ou de poster une nouvelle question sur la liste de diffusion
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a>.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-terms"></a>16.2. Termes relatifs aux environnements jail</h2></div></div></div><p>Pour faciliter la compréhension des parties du
      système FreeBSD relatives aux jails, leurs mécanismes
      internes et la manière dont ils interagissent avec le
      reste de FreeBSD, les termes suivants seront utilisés tout
      au long de ce chapitre:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> (commande)</span></dt><dd><p>Un appel système FreeBSD, qui modifie le
	    répertoire racine d'un processus et de tout ses
	    descendants.</p></dd><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> (environnement)</span></dt><dd><p>Environnement des processus pour lesquels
	    l'emplacement de la racine du système de fichier a
	    été modifiée
	    (<span class="quote">« <span class="quote">chrootée</span> »</span>).  Cela comprend les
	    ressources comme la partie du système de fichiers qui
	    est visible, les identifiants utilisateur et groupe qui sont
	    disponibles, les interfaces réseaux et autres
	    mécanismes IPC, etc.</p></dd><dt><span class="term"><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> (commande)</span></dt><dd><p>L'utilitaire système d'administration qui
	    permet le lancement de processus à l'intérieur
	    d'un environnement jail.</p></dd><dt><span class="term">hôte (système, processus, utilisateur,
	  etc.)</span></dt><dd><p>Le système de contrôle d'un environnement
	    jail.  Le système hôte a accès à
	    toutes les ressources matérielles disponibles, et
	    peut contrôler des processus à
	    l'extérieur et à l'intérieur d'un
	    environnement jail.  Une des différences importantes
	    entre le système hôte et l'environnement jail
	    est que les limitations qui s'appliquent aux processus du
	    super-utilisateur à l'intérieur de
	    l'environnement jail ne s'appliquent pas aux processus du
	    système hôte.</p></dd><dt><span class="term">hébergé (système, processus,
	  utilisateur, etc.)</span></dt><dd><p>Un processus, un utilisateur ou toute autre
	    entité, dont l'accès aux ressources est
	    limité par un environnement jail FreeBSD.</p></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-intro"></a>16.3. Introduction</h2></div></div></div><p>Comme l'administration système est une tâche
      difficile et déroutante, de nombreux outils ont
      été développés pour rendre la vie de
      l'administrateur plus simple.  Ces outils apportent pour la
      plupart des améliorations dans la manière dont
      sont installés, configurés et maintenus les
      systèmes.   Une partie des tâches dévolues
      à l'administrateur est la sécurisation du
      système, de façon à ce que le
      système puisse se consacrer aux tâches qui lui sont
      confiées sans toutefois mettre en péril sa propre
      sécurité.</p><p>Un de ces outils pouvant être employé pour
      augmenter la sécurisation d'un système FreeBSD sont
      les environnements <span class="emphasis"><em>jail</em></span>.  Les
      environnements jail ont été introduits sous
      FreeBSD 4.X par Poul-Henning Kamp, mais ils ont été
      fortement améliorés sous FreeBSD 5.X pour en
      faire des sous-systèmes flexibles et puissants.  Des
      développements sont toujours en cours pour
      l'amélioration de leur utilité, performances,
      fiabilité et sécurité.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-what"></a>16.3.1. Qu'est-ce qu'un environnement jail?</h3></div></div></div><p>Les systèmes BSD disposent de l'environnement
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> depuis l'époque de 4.2BSD.  L'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a> peut être employé pour changer le
	répertoire racine d'un ensemble de processus,
	créant ainsi un environnement sécurisé et
	séparé du reste du système.  Les
	processus créés dans l'environnement
	chrooté ne peuvent accéder aux fichiers et aux
	ressources extérieures à cet environnement.
	Pour cette raison, si un attaquant compromet un service
	tournant dans un environnement chrooté, cela ne devrait
	pas lui permettre de compromettre l'intégralité
	du système.  L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a> est parfait
	pour des tâches simples qui ne demandent pas trop de
	flexibilité ou de fonctionnalités
	avancées et complexes.  Depuis l'apparition du concept
	d'environnement chrooté, de nombreuses manières
	de s'échapper de ces environnements ont
	été découvertes, et bien que cela ait
	été corrigé dans les versions
	récentes du noyau FreeBSD, il est clair que
	l'environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> n'est pas la solution
	idéale pour la sécurisation des services.  Un
	nouveau sous-système devait être
	implémenté.</p><p>Ceci est une des raisons principales à l'origine du
	développement de l'environnement
	<span class="emphasis"><em>jail</em></span>.</p><p>Les environnements jail améliorent de plusieurs
	manières le concept d'environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a>.
	Dans un environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> traditionnel, les
	processus ne sont limités que dans la partie du
	système de fichiers à laquelle ils ont
	accès.  Le reste des ressources système (comme
	l'ensemble des utilisateurs système, les processus en
	cours d'exécution, ou le réseau) est
	partagé par les processus de l'environnement
	chrooté et les processus du système hôte.
	L'environnement jail étend ce modèle en
	virtualisant non seulement l'accès au système de
	fichiers mais également l'ensemble des utilisateurs, la
	partie réseau du noyau FreeBSD et quelques autres
	éléments du système.  Un ensemble plus
	complet de contrôles fins pour optimiser l'accès
	à un environnement jail est décrit dans la <a class="xref" href="#jails-tuning" title="16.5. Optimisation et administration">Section 16.5, « Optimisation et administration »</a>.</p><p>Un environnement jail est caractérisé par
	quatre éléments:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Une arborescence de répertoires &#8212; le
	    point d'accès à l'environnement jail.  Une
	    fois à l'intérieur de l'environnement jail, un
	    processus ne peut s'échapper hors de cette
	    arborescence.  Les traditionnels problèmes de
	    sécurité qui grèvent l'architecture
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> d'origine n'affecteront pas les
	    environnements jail FreeBSD.</p></li><li class="listitem"><p>Un nom de machine &#8212; le nom de machine qui sera
	    utilisé à l'intérieur de
	    l'environnement jail.  Les environnements jails sont
	    principalement utilisés pour l'hébergement de
	    services réseaux, par conséquent choisir un
	    nom évocateur pour chaque environnement peut
	    être d'une grande aide pour l'administrateur
	    système.</p></li><li class="listitem"><p>Une adresse <acronym class="acronym">IP</acronym> &#8212; elle sera
	    assignée à l'environnement jail et ne peut, en
	    aucun cas, être modifiée pendant toute la
	    durée de vie de l'environnement.  L'adresse IP d'un
	    environnement jail est en général un alias
	    d'une interface réseau existante, mais cela n'est pas
	    forcément nécessaire.</p></li><li class="listitem"><p>Une commande &#8212; le chemin d'accès d'un
	    exécutable à exécuter à
	    l'intérieur de l'environnement jail.  Il est relatif
	    au répertoire racine de l'environnement jail, et peut
	    beaucoup varier, en fonction du type d'environnement jail
	    mis en oeuvre.</p></li></ul></div><p>En dehors de cela les environnements jail peuvent avoir
	leur propre ensemble d'utilisateurs et leur propre utilisateur
	<code class="systemitem">root</code>.  Naturellement les pouvoirs de
	l'utilisateur <code class="systemitem">root</code> sont limités
	à l'environnement jail et, du point de vue du
	système hôte, l'utilisateur
	<code class="systemitem">root</code> de l'environnement jail n'est pas un
	utilisateur omnipotent.  De plus, l'utilisateur
	<code class="systemitem">root</code> d'un environnement jail n'est pas
	autorisé à effectuer des opérations
	critiques au niveau du système en dehors de son
	environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  Plus d'information au sujet des
	possibilités et des restrictions de l'utilisateur
	<code class="systemitem">root</code> sera donnée dans la <a class="xref" href="#jails-tuning" title="16.5. Optimisation et administration">Section 16.5, « Optimisation et administration »</a> ci-après.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-build"></a>16.4. Création et contrôle de l'environnement
      jail</h2></div></div></div><p>Certains administrateurs divisent les environnements jail en
      deux catégories: les environnements jails
      <span class="quote">« <span class="quote">complets</span> »</span>, qui ressemblent à un
      véritable système FreeBSD, et les environnements
      jails de <span class="quote">« <span class="quote">service</span> »</span>, qui sont dédiés
      à une application ou un seul service, et tournant
      éventuellement avec des privilèges.  Cette
      séparation est juste conceptuelle et n'affecte pas la
      création de l'environnement jail.  La page de manuel
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> est très claire quant à la
      procédure de création d'un environnement
      jail:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>setenv D /here/is/the/jail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p $D</code></strong> <a id="jailpath"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make world DESTDIR=$D</code></strong> <a id="jailworld"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd etc/</code></strong> <a href="#ftn.idp77396944" class="footnote" id="idp77396944"><sup class="footnote">[9]</sup></a>
<code class="prompt">#</code> <strong class="userinput"><code>make distribution DESTDIR=$D</code></strong> <a id="jaildistrib"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
<code class="prompt">#</code> <strong class="userinput"><code>mount_devfs devfs $D/dev</code></strong> <a id="jaildevfs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#jailpath"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Sélectionner un emplacement pour l'environnement
	  est le meilleur point de départ.  C'est l'endroit
	  où l'environnement jail se trouvera dans le
	  système de fichiers de la machine hôte.  Un bon
	  choix peut être <code class="filename">/usr/jail/jailname</code>,
	  où <em class="replaceable"><code>jailname</code></em> est le nom de
	  machine identifiant l'environnement jail.  Le système
	  de fichiers <code class="filename">/usr/</code>
	  dispose généralement de suffisamment d'espace
	  pour le système de fichiers de l'environnement jail,
	  qui est pour les environnements <span class="quote">« <span class="quote">complets</span> »</span>,
	  essentiellement, une copie de chaque fichier présent
	  dans une installation par défaut du système de
	  base de FreeBSD.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#jailworld"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette commande peuplera l'arborescence du
	  répertoire choisi comme emplacement pour
	  l'environnement jail avec les binaires, les
	  bibliothèques, les pages de manuel, etc.
	  nécessaires.  Tout sera fait selon le style FreeBSD
	  habituel &#8212; en premier lieu tout est compilé, puis
	  ensuite installé à l'emplacement voulu.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#jaildistrib"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La cible <code class="buildtarget">distribution</code> pour
	  <span class="application">make</span> installe tous les fichiers de
	  configuration nécessaires.  Ou pour faire simple, cette
	  commande installe tous les fichiers installables du
	  répertoire <code class="filename">/usr/src/etc/</code> vers le
	  répertoire <code class="filename">/etc</code>
	  de l'environnement jail: <code class="filename">$D/etc/</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#jaildevfs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le montage du système de fichiers <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>
	  à l'intérieur d'un environnement jail n'est pas
	  requis.  Cependant, toutes, ou presque toutes les applications
	  nécessitent l'accès à au moins un
	  périphérique, en fonction du rôle de
	  l'application.  Il est vraiment important de contrôler
	  l'accès aux périphériques depuis
	  l'intérieur d'un environnement jail, comme un mauvais
	  paramétrage pourrait permettre à quelqu'un de
	  malintentionné de faire de <span class="quote">« <span class="quote">mauvaises</span> »</span>
	  choses dans l'environnement jail.  Le contrôle sur
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a> est géré par
	  l'intermédiaire d'un ensemble de règles qui est
	  décrit dans les pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a> et
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.conf</span>(5)</span></a>.</p></td></tr></table></div><p>Une fois l'environnement jail installé, il peut
      être lancé en employant l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.
      Cet outil requiert obligatoirement quatre arguments qui sont
      décrits dans la <a class="xref" href="#jails-what" title="16.3.1. Qu'est-ce qu'un environnement jail?">Section 16.3.1, « Qu'est-ce qu'un environnement jail? »</a>.  D'autres
      arguments peuvent également être utilisés,
      pour par exemple exécuter le processus avec les droits
      d'un utilisateur particulier.  L'argument
      <code class="option"><em class="replaceable"><code>command</code></em></code>
      dépend du type d'environnement; pour un
      <span class="emphasis"><em>système virtuel</em></span>,
      <code class="filename">/etc/rc</code> est un bon choix puisque la
      séquence de démarrage d'un véritable
      système FreeBSD sera dupliquée.  Pour un
      environnement jail de type <span class="emphasis"><em>service</em></span>, cela
      dépendra du service ou de l'application qui sera
      exécuté dans l'environnement jail.</p><p>Les environnements jails sont souvent lancés au
      démarrage de la machine et le système
      <code class="filename">rc</code> de FreeBSD propose une méthode
      simple pour cela.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Une liste des environnements jail autorisés
	  à être lancés au démarrage du
	  système devrait être ajoutée au fichier
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>:</p><pre class="programlisting">jail_enable="YES"   # Utiliser NO pour désactiver le lancement des environnements jail
jail_list="<em class="replaceable"><code>www</code></em>"     # Liste des noms des environnements jail séparés par une espace</pre></li><li class="step"><p>Pour chaque environnement listé dans
	  <code class="varname">jail_list</code>, un ensemble de
	  paramètres <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>, qui décrivent
	  l'environnement jail, devrait être
	  ajouté:</p><pre class="programlisting">jail_<em class="replaceable"><code>www</code></em>_rootdir="/usr/jail/www"     # le répertoire racine de l'environnement jail
jail_<em class="replaceable"><code>www</code></em>_hostname="<em class="replaceable"><code>www</code></em>.example.org"  # le nom de machine de l'environnement jail
jail_<em class="replaceable"><code>www</code></em>_ip="192.168.0.10"           # son adresse IP
jail_<em class="replaceable"><code>www</code></em>_devfs_enable="YES"          # monter devfs dans l'environnement jail
jail_<em class="replaceable"><code>www</code></em>_devfs_ruleset="<em class="replaceable"><code>www_ruleset</code></em>" # les règles devfs à appliquer à l'environnement jail</pre><p>Le démarrage par défaut des environnements
	  jails, configuré dans <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>,
	  exécutera la procédure
	  <code class="filename">/etc/rc</code> de l'environnement jail, ce qui
	  suppose que l'environnement est un système virtuel
	  complet.  Pour les environnements jail de service, la
	  commande de démarrage par défaut de
	  l'environnement devrait être modifiée en
	  configurant correctement l'option
	  <code class="varname">jail_<em class="replaceable"><code>jailname</code></em>_exec_start</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour une liste complète des options
	    disponibles, veuillez consulter la page de manuel
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.</p></div></li></ol></div><p>La procedure <code class="filename">/etc/rc.d/jail</code> peut
      être utilisée pour démarrer ou arrêter
      un environnement jail à la main si une entrée pour
      l'environnement existe dans le fichier
      <code class="filename">rc.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail start www</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/jail stop www</code></strong></pre><p>Il n'existe pas pour le moment de méthode propre pour
      arrêter un environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  C'est dû au
      fait que les commandes normalement employées pour
      arrêter proprement un système ne peuvent être
      utilisées à l'intérieur d'un environnement
      jail.  La meilleur façon d'arrêter un environnement
      jail est de lancer la commande suivante à
      l'intérieur de l'environnement ou en utilisant le
      programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> depuis l'extérieur de
      l'environnement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh /etc/rc.shutdown</code></strong></pre><p>Plus d'information à ce sujet peut être
      trouvé dans la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="jails-tuning"></a>16.5. Optimisation et administration</h2></div></div></div><p>Il existe plusieurs options qui peuvent être
      configurées pour n'importe quel environnement jail, et de
      nombreuses manières de combiner un système FreeBSD
      hôte avec des environnements jail pour donner naissance
      à des applications haut-niveau.  Cette section
      présente:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Certaines des options disponibles pour l'optimisation du
	  fonctionnement et des restrictions de sécurité
	  implémentées par une installation jail.</p></li><li class="listitem"><p>Des applications de haut niveau pour la gestion des
	  environnements jail, qui sont disponibles dans le catalogue
	  des logiciels portés, et peuvent être
	  utilisées pour implémenter des environnements
	  jail complets.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-tuning-utilities"></a>16.5.1. Outils systèmes pour l'optimisation d'un
	environnement jail sous FreeBSD</h3></div></div></div><p>L'optimisation de la configuration d'un environnement jail
	se fait principalement par le paramétrage de variables
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.  Une sous-catégorie spécifique
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> existe pour toutes les options pertinentes:
	la hiérarchie <code class="varname">security.jail.*</code>
	d'options du noyau FreeBSD.  Ci-dessous est donnée une
	liste des principales variables relatives aux environnements
	jail avec leur valeur par défaut.  Leurs noms sont
	explicites, mais pour plus d'information, veuillez vous
	référer aux pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a> et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="varname">security.jail.set_hostname_allowed:
	     1</code></p></li><li class="listitem"><p><code class="varname">security.jail.socket_unixiproute_only:
	     1</code></p></li><li class="listitem"><p><code class="varname">security.jail.sysvipc_allowed:
	     0</code></p></li><li class="listitem"><p><code class="varname">security.jail.enforce_statfs:
	     2</code></p></li><li class="listitem"><p><code class="varname">security.jail.allow_raw_sockets:
	     0</code></p></li><li class="listitem"><p><code class="varname">security.jail.chflags_allowed:
	    0</code></p></li><li class="listitem"><p><code class="varname">security.jail.jailed: 0</code></p></li></ul></div><p>Ces variables peuvent être utilisées par
	l'administrateur du <span class="emphasis"><em>système
	hôte</em></span> pour ajouter ou retirer certaines
	limitations imposées par défaut à
	l'utilisateur <code class="systemitem">root</code>.  Notez que certaines
	limitations ne peuvent être retirées.
	L'utilisateur <code class="systemitem">root</code> n'est pas
	autorisé à monter ou démonter des
	systèmes de fichiers à partir d'un environnement
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  L'utilisateur <code class="systemitem">root</code> d'un
	environnement jail ne peut charger ou modifier des
	règles <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devfs</span>(8)</span></a>, paramétrer des
	règles de pare-feu, ou effectuer des tâches
	d'administration qui nécessitent la modification de
	données du noyau, comme le paramétrage du niveau
	de sécurité <code class="varname">securelevel</code> du
	noyau.</p><p>Le système de base de FreeBSD contient un ensemble
	d'outils basiques pour afficher les informations au sujet des
	environnements jail actifs, pour s'attacher à un
	environnement jail pour lancer des commandes d'administration.
	Les commandes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jls&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jls</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> font partie du
	système de base de FreeBSD et peuvent être
	utilisées pour effectuer les tâches simples
	suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Afficher une liste des environnements jail actifs et
	    leur identifiant (<acronym class="acronym">JID</acronym>), leur adresse
	    <acronym class="acronym">IP</acronym>, leur nom de machine et leur
	    emplacement.</p></li><li class="listitem"><p>S'attacher à un environnement jail actif,
	    à partir de son système hôte, et
	    exécuter une commande à l'intérieur de
	    l'environnement ou effectuer des tâches
	    d'administration à l'intérieur de
	    environnement lui-même.  C'est tout
	    particulièrement utile quand l'utilisateur
	    <code class="systemitem">root</code> veut arrêter proprement un
	    environnement.  L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jexec&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jexec</span>(8)</span></a> peut
	    également être employé pour lancer un
	    interpréteur de commandes dans un environnement jail
	    pour faire de l'administration; par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>jexec 1 tcsh</code></strong></pre></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="jails-tuning-admintools"></a>16.5.2. Outils d'administration haut niveau du catalogue des
	logiciels portés de FreeBSD</h3></div></div></div><p>Parmi les nombreux utilitaires tierce-partie pour
	l'administration des environnements jail, un des plus complet
	et utile est <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/jailutils/pkg-descr">sysutils/jailutils</a>.  C'est un
	ensemble de petites applications qui aident à la
	gestion des environnements <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a>.  Veuillez consulter
	sa page Web pour plus d'information.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp77396944" class="footnote"><p><a href="#idp77396944" class="para"><sup class="para">[9] </sup></a>Cette
étape n'est pas requise sous FreeBSD 6.0 et versions ultérieures.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mac"></a>Chapitre 17. Mandatory Access Control ** Traduction en Cours **</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#mac-synopsis">17.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#mac-glossary">17.2. Key Terms in this Chapter</a></span></dt><dt><span class="sect1"><a href="#mac-initial">17.3. Explanation of MAC</a></span></dt><dt><span class="sect1"><a href="#mac-understandlabel">17.4. Understanding MAC Labels</a></span></dt><dt><span class="sect1"><a href="#mac-modules">17.5. Module Configuration</a></span></dt><dt><span class="sect1"><a href="#mac-bsdextended">17.6. The MAC bsdextended Module</a></span></dt><dt><span class="sect1"><a href="#mac-ifoff">17.7. The MAC ifoff Module</a></span></dt><dt><span class="sect1"><a href="#mac-portacl">17.8. The MAC portacl Module</a></span></dt><dt><span class="sect1"><a href="#mac-labelingpolicies">17.9. MAC Policies with Labeling Features</a></span></dt><dt><span class="sect1"><a href="#mac-partition">17.10. The MAC partition Module</a></span></dt><dt><span class="sect1"><a href="#mac-mls">17.11. The MAC Multi-Level Security Module</a></span></dt><dt><span class="sect1"><a href="#mac-biba">17.12. The MAC Biba Module</a></span></dt><dt><span class="sect1"><a href="#mac-lomac">17.13. The MAC LOMAC Module</a></span></dt><dt><span class="sect1"><a href="#mac-implementing">17.14. Implementing a Secure Environment with MAC</a></span></dt><dt><span class="sect1"><a href="#MAC-examplehttpd">17.15. Another Example: Using MAC to Constrain a Web Server</a></span></dt><dt><span class="sect1"><a href="#mac-troubleshoot">17.16. Troubleshooting the MAC Framework</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-synopsis"></a>17.1. Synopsis</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-glossary"></a>17.2. Key Terms in this Chapter</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-initial"></a>17.3. Explanation of MAC</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-understandlabel"></a>17.4. Understanding MAC Labels</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-modules"></a>17.5. Module Configuration</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-bsdextended"></a>17.6. The MAC bsdextended Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-ifoff"></a>17.7. The MAC ifoff Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-portacl"></a>17.8. The MAC portacl Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-labelingpolicies"></a>17.9. MAC Policies with Labeling Features</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-partition"></a>17.10. The MAC partition Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-mls"></a>17.11. The MAC Multi-Level Security Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-biba"></a>17.12. The MAC Biba Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-lomac"></a>17.13. The MAC LOMAC Module</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-implementing"></a>17.14. Implementing a Secure Environment with MAC</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="MAC-examplehttpd"></a>17.15. Another Example: Using MAC to Constrain a Web Server</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mac-troubleshoot"></a>17.16. Troubleshooting the MAC Framework</h2></div></div></div><p></p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="audit"></a>Chapitre 18. Audit des événements relatifs à la
    sécurité du système</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Watson</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#audit-synopsis">18.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#audit-inline-glossary">18.2. Mots-clés</a></span></dt><dt><span class="sect1"><a href="#audit-config">18.3. Configuration de l'audit</a></span></dt><dt><span class="sect1"><a href="#audit-administration">18.4. Travailler avec les traces d'audit</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="audit-synopsis"></a>18.1. Synopsis</h2></div></div></div><a id="idp77525712" class="indexterm"></a><a id="idp77526224" class="indexterm"></a><p>FreeBSD dispose d'un
      support pour l'audit d'événements relatifs
      à la sécurité du système.  L'audit
      d'événements permet un enregistrement fiable et
      configurable d'une grande variété
      d'événements système en rapport avec la
      sécurité, parmi lesquels les ouvertures de
      session, les modifications de la configuration, et les
      accès aux fichiers et au réseau.  Ces
      enregistrements ou journaux peuvent être d'une très
      grande aide pour la surveillance d'un système, pour la
      détection d'intrusion, et les analyses post-mortem.  FreeBSD
      implémente l'<acronym class="acronym">API</acronym> et le format de fichiers
      <acronym class="acronym">BSM</acronym> (<span class="emphasis"><em>Basic Security
      Module</em></span>) publiés par <span class="trademark">Sun</span>&#8482; qui sont
      interopérables avec les implémentations d'audits
      de <span class="trademark">Solaris</span>&#8482; de <span class="trademark">Sun</span>&#8482; et de <span class="trademark">Mac OS</span>® X d'<span class="trademark">Apple</span>®.</p><p>Ce chapitre se concentre sur l'installation et la
      configuration de l'audit des événements.  Il
      explique les stratégies utilisées pour l'audit, et
      propose un exemple de configuration.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ce qu'est l'audit d'événements et comment
	  cela fonctionne.</p></li><li class="listitem"><p>Comment configurer l'audit d'événements
	  sous FreeBSD pour les utilisateurs et les processus.</p></li><li class="listitem"><p>Comment lire une trace d'audit en utilisant les outils
	  de réduction et de lecture.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les fondements d'<span class="trademark">UNIX</span>® et de FreeBSD
	  (<a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a>).</p></li><li class="listitem"><p>Etre familier avec la configuration et la compilation du
	  noyau (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li><li class="listitem"><p>Avoir quelques notions de sécurité et
	  savoir comment les appliquer à FreeBSD (<a class="xref" href="#security" title="Chapitre 15. Sécurité">Chapitre 15, <em>Sécurité</em></a>).</p></li></ul></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">La fonctionnalité d'audit connaît des limitations.
	Tous les événements
	systèmes en rapport avec la sécurité ne
	peuvent pas être soumis à un audit, et que certains
	mécanismes d'ouverture de session, comme les
	gestionnaires de procédures de connexions basés
	sur <span class="application">Xorg</span> et des <span class="quote">« <span class="quote">démons</span> »</span> tiers, ne permettent
	pas une configuration correcte de l'audit pour les ouvertures de
	session utilisateur.</p><p xmlns="http://www.w3.org/1999/xhtml">Le système d'audit des événements
	permet la génération d'enregistrements
	détaillés de l'activité du système.
	Sur un système occupé, un fichier journal d'audit
	peut être très important quand le système
	est configuré pour un haut niveau de détail,
	dépassant plusieurs gigaoctets par semaine sur certaines
	configurations.  Les administrateurs système devraient
	prendre en compte les besoins en espace disque associés
	avec les configurations d'audit à haut niveau de
	détail.  Par exemple, il peut être
	recommandé de dédier un système de fichiers
	à <code class="filename">/var/audit</code> de
	manière à ce que les autres systèmes de
	fichiers ne soient pas affectés si le système de
	fichiers pour les audits est plein.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="audit-inline-glossary"></a>18.2. Mots-clés</h2></div></div></div><p>Les termes suivants sont relatifs à
      l'audit des événements:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>événement</em></span>: un
	  événement pouvant être audité est
	  n'importe quel événement pouvant faire l'objet
	  d'un suivi par le système d'audit.  La création
	  d'un fichier, la mise en place d'une connection réseau,
	  ou une ouverture de session sont des exemples
	  d'événements relatifs à la
	  sécurité.  Les événements sont
	  considérés soit comme
	  <span class="quote">« <span class="quote">attribuables</span> »</span>, quand on peut les relier à
	  un utilisateur authentifié, soit
	  <span class="quote">« <span class="quote">non-attribuables</span> »</span> quand on ne peut pas les
	  relier à un utilisateur authentifié.  Des
	  événements comme ceux qui apparaissent avant
	  l'authentification durant le processus d'ouverture de session,
	  tels que les tentatives avec un mauvais mot de passe, sont des
	  exemples d'événements non-attribuables.</p></li><li class="listitem"><p><span class="emphasis"><em>classe</em></span>: désigne à l'aide
	  d'un nom particulier des ensembles
	  d'événements en rapport les uns avec les
	  autres et sont utilisées dans les expressions de
	  sélection des événements.  Les classes
	  d'événement généralement
	  utilisées sont la <span class="quote">« <span class="quote">création de
	  fichiers</span> »</span> (fc) l'<span class="quote">« <span class="quote">exécution</span> »</span> (ex)
	  et l'<span class="quote">« <span class="quote">ouverture/fermeture de session</span> »</span>
	  (lo).</p></li><li class="listitem"><p><span class="emphasis"><em>enregistrement</em></span>:
	  une entrée du fichier de trace d'audit
	  décrivant un événement relatif à
	  la sécurité.  Les enregistrements contiennent
	  le type d'événement, des informations sur
	  l'auteur (l'utilisateur) de l'action, la date et l'heure,
	  des informations sur tout objet ou argument en relation avec
	  l'action, et une condition de succès ou
	  d'échec.</p></li><li class="listitem"><p><span class="emphasis"><em>trace d'audit</em></span>: un
	  fichier journal consistant en une série
	  d'enregistrements décrivant les
	  événements relatifs à la
	  sécurité.  Les traces
	  sont organisées de manière chronologiques par
	  rapport à l'horaire de fin des
	  événements.  Seuls les processus
	  autorisés peuvent ajouter des enregistrements aux
	  fichiers journaux d'audit.</p></li><li class="listitem"><p><span class="emphasis"><em>expression de sélection</em></span>: une
	  chaîne de
	  caractères contenant une liste de préfixes et
	  de classes d'événement d'audit utilisés
	  pour désigner des événements.</p></li><li class="listitem"><p><span class="emphasis"><em>préselection</em></span>: le processus
	  par lequel le système identifie quels
	  événements intéressent l'administrateur.
	  La configuration de la
	  présélection utilise une série
	  d'expressions de sélection pour déterminer
	  quelles classes d'événement sont à
	  auditer et pour quels utilisateurs, ainsi que le
	  paramétrage global qui s'applique aux processus
	  authentifiés et non-authentifiés.</p></li><li class="listitem"><p><span class="emphasis"><em>réduction</em></span>: le processus par
	  lequel les enregistrements de traces d'audit existantes sont
	  sélectionnés pour être conservés,
	  imprimés ou analysés. Ou encore le processus
	  qui supprime de la trace d'audit les enregistrements
	  non-désirés.  En utilisant le principe de
	  réduction, les administrateurs peuvent mettre en
	  place des stratégies pour la conservation des
	  données d'audit.  Par exemple, les traces d'audit
	  détaillées peuvent être
	  conservées pendant un mois, mais passé ce
	  délai, les traces seront réduites afin de ne
	  préserver pour archivage que les informations
	  relatives aux ouvertures de sessions.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="audit-config"></a>18.3. Configuration de l'audit</h2></div></div></div><p>Le support pour l'audit des événements est installé avec le
      système de base de FreeBSD. Le support présent dans le noyau
      <code class="filename">GENERIC</code> par défaut, et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=auditd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">auditd</span>(8)</span></a> peut
      être activé en ajoutant la ligne suivante au fichier
      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">auditd_enable="YES"</pre><p>Puis, le daemon d'audit peut être lancé:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>service auditd start</code></strong></pre><p>Les utilisateurs préférant compiler un noyau sur mesure
      doivent ajouter la ligne suivante dans le fichier de
      configuration du noyau:</p><pre class="programlisting">options     AUDIT</pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77566672"></a>18.3.1. Expressions de sélection des
	événements</h3></div></div></div><p>Les expressions de sélection sont utilisées
	à plusieurs endroits dans la configuration du
	système d'audit pour déterminer quels
	événements doivent être suivis.  Les
	expressions contiennent une liste de classes
	d'événements devant correspondre.
	Les expressions de sélection sont
	évaluées de gauche à droite, et deux
	expressions sont combinées en ajoutant l'une à
	la suite de l'autre.</p><p><a class="xref" href="#event-selection" title="Tableau 18.1. Classes d'événements par défaut">Tableau 18.1, « Classes d'événements par défaut »</a> résume les classes
	d'événements présentes par défaut</p><div class="table"><a id="event-selection"></a><div class="table-title">Tableau 18.1. Classes d'événements par défaut</div><div class="table-contents"><table summary="Classes d'événements par défaut" width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Classe</th><th>Description</th><th>Action</th></tr></thead><tbody><tr><td>all</td><td>tout</td><td>correspond à toutes les classes
		d'événements.</td></tr><tr><td>aa</td><td>authentification et autorisation</td><td> </td></tr><tr><td>ad</td><td>administration</td><td>Actions d'administration du système.</td></tr><tr><td>ap</td><td>application</td><td>Action définie par l'application.</td></tr><tr><td>cl</td><td>fermeture de fichiers</td><td>Enregistre les utilisations de l'appel système
		<code class="function">close</code>.</td></tr><tr><td>ex</td><td>exécution</td><td>Enregistre les exécutions de programmes.  L'audit
		des arguments en ligne de commande et des variables
		d'environnement est contrôlé par via
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=audit_control&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">audit_control</span>(5)</span></a> en utilisant les paramètres
		<code class="literal">argv</code> et <code class="literal">envv</code>
		pour l'entrée <code class="literal">policy</code>.</td></tr><tr><td>fa</td><td>accès à aux attributs des fichiers</td><td>enregistre l'accès aux attributs des objets comme
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stat</span>(1)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pathconf&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">pathconf</span>(2)</span></a>.</td></tr><tr><td>fc</td><td>création de fichiers</td><td>Enregistre les événements ayant pour résultat la
		création d'un fichier.</td></tr><tr><td>fd</td><td>suppression de fichiers</td><td>Enregistre les événements pour lesquels une
		suppression de fichier a lieu.</td></tr><tr><td>fm</td><td>modification des attributs d'un fichier</td><td>Enregistre les événements lors desquels une
		modification des attributs d'un fichier intervient,
		comme l'utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a>,
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a>, et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=flock&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">flock</span>(2)</span></a>.</td></tr><tr><td>fr</td><td>lecture de fichiers</td><td>Enregistre les événements qui donnent lieu
		à la lecture de données, l'ouverture de
		fichiers pour la lecture.</td></tr><tr><td>fw</td><td>écriture de fichiers</td><td>Enregistre les événements qui donnent lieu
		à l'écriture de données ou à l'écriture ou
		la modification de fichiers.</td></tr><tr><td>io</td><td>ioctl</td><td>Enregistre l'utilisation de l'appel système
		<code class="function">ioctl</code>.</td></tr><tr><td>ip</td><td>ipc</td><td>Enregistre les différentes utilisations de
		communication inter-processus, dont les utilisations
		des tubes POSIX et les opérations
		<acronym class="acronym">IPC</acronym> Système V.</td></tr><tr><td>lo</td><td>login_logout</td><td>Enregistre les ouvertures et fermeture de session
		(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">login</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=logout&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">logout</span>(1)</span></a>).</td></tr><tr><td>na</td><td>non attributable</td><td>Enregistre les événements non-attribuables.</td></tr><tr><td>no</td><td>classe invalide</td><td>Ne correspond à aucun des événements
		surveillés.</td></tr><tr><td>nt</td><td>réseau</td><td>Enregistre les événements relatifs au réseau,
		comme l'utilisation des fonctions <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=connect&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">connect</span>(2)</span></a> et
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=accept&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">accept</span>(2)</span></a>.</td></tr><tr><td>ot</td><td>autre</td><td>Enregistre les événements divers.</td></tr><tr><td>pc</td><td>processus</td><td>Enregistre les opérations sur les processus,
		comme l'utilisation des fonctions <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exec&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">exec</span>(3)</span></a> et
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exit&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">exit</span>(3)</span></a>.</td></tr></tbody></table></div></div><br class="table-break" /><p>Ces classes d'événement peuvent être
	personnalisées en modifiant les fichiers de
	configuration <code class="filename">audit_class</code> et
	<code class="filename">audit_event</code>.</p><p>Chaque classe d'audit peut être combinée
	avec un préfixe indiquant si les opérations
	réussies/échouées sont
	sélectionnées, et si l'entrée ajoute ou
	supprime une sélection pour la classe ou le type
	concerné.  <a class="xref" href="#event-prefixes" title="Tableau 18.2. Prefixes pour les classes d'audit">Tableau 18.2, « Prefixes pour les classes d'audit »</a> résume les
	préfixes disponibles.</p><div class="table"><a id="event-prefixes"></a><div class="table-title">Tableau 18.2. Prefixes pour les classes d'audit</div><div class="table-contents"><table summary="Prefixes pour les classes d'audit" width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Prefixe</th><th>Action</th></tr></thead><tbody><tr><td>+</td><td>Enregistre les événements réussis de cette
		classe.</td></tr><tr><td>-</td><td>Enregistre les événements de cette classe qui ont
		échoué.</td></tr><tr><td>^</td><td>N'enregistre ni les événements réussis ni les
		échecs de cette classe.</td></tr><tr><td>^+</td><td>Ne pas enregistrer les événements réussis de
		cette classe.</td></tr><tr><td>^-</td><td>Ne pas enregistrer les événements de cette classe
		qui ont échoué.</td></tr></tbody></table></div></div><br class="table-break" /><p>Si aucun préfixe n'est présent, les succès et le échecs de
	l'événement seront enregistrés.</p><p>L'exemple suivant d'expression de sélection permet
	la sélection des ouvertures et fermetures de session
	réussies ou échouées, et uniquement les
	exécutions ayant réussies:</p><pre class="programlisting">lo,+ex</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77652944"></a>18.3.2. Fichiers de configuration</h3></div></div></div><p>Les fichiers de configuration suivants pour l'audit
	d'événements en rapport avec la
	sécurité se trouvent dans le répertoire
	<code class="filename">/etc/security</code>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">audit_class</code>: contient les
	    définitions des classes d'audit.</p></li><li class="listitem"><p><code class="filename">audit_control</code>: contrôle les
	    caractéristiques du système d'audit comme les
	    classes d'audit par défaut, l'espace disque minimal
	    à conserver sur le volume réservé aux
	    journaux, la taille maximale des traces d'audit.</p></li><li class="listitem"><p><code class="filename">audit_event</code>: les noms et la
	    description des événements systèmes
	    audités ainsi qu'une liste de classes auxquelles
	    appartiennent chaque événement.</p></li><li class="listitem"><p><code class="filename">audit_user</code>: les classes
	    d'événement à auditer pour des
	    utilisateurs spécifiques, qui s'ajoutent aux
	    paramètres généraux fixés par
	    défaut à l'ouverture de session.</p></li><li class="listitem"><p><code class="filename">audit_warn</code>: une procédure
	    modifiable utilisée par
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=auditd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">auditd</span>(8)</span></a> pour générer
	    des messages d'alerte lors des situations exceptionnelles
	    comme un espace disque faible pour les fichiers journaux
	    d'audit ou quand il y a eu rotation de ces fichiers
	    journaux.</p></li></ul></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les fichiers de configuration de l'audit devraient
	  être modifiés et gérés avec prudence
	  étant donné que des erreurs dans la configuration
	  pourraient donner lieu à un enregistrement incorrect des
	  événements.</p></div><p>Dans la plupart des cas, les administrateurs ne devront
	modifier que <code class="filename">audit_control</code> et
	<code class="filename">audit_user</code>.  Le premier contrôle
	les propriétés et les stratégies au
	niveau du système et le second peut être
	utilisé pour affiner l'audit pour chaque
	utilisateur.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="audit-auditcontrol"></a>18.3.2.1. Le fichier <code class="filename">audit_control</code></h4></div></div></div><p>Un certain nombre de paramètres par défaut pour le
	  système d'audit sont spécifiés dans le fichier
	  <code class="filename">audit_control</code>:</p><pre class="programlisting">dir:/var/audit
dist:off
flags:lo,aa
minfree:5
naflags:lo,aa
policy:cnt,argv
filesz:2M
expire-after:10M</pre><p>L'option <code class="literal">dir</code> est utilisée pour
	  déclarer un ou plusieurs répertoires dans
	  lesquels seront stockés les fichiers journaux.  Si
	  l'on mentionne plus d'un répertoire, ces derniers
	  seront utilisés dans l'ordre à mesure qu'ils
	  se remplissent.  Il est classique de configurer le
	  système d'audit pour le stockage des fichiers
	  journaux sur un système de fichiers
	  dédié, afin d'éviter toute
	  interférence entre le système d'audit et
	  d'autres systèmes si le système de fichiers
	  est plein.</p><p>Si le champ <code class="option">dist</code> est fixé à
	  <code class="literal">on</code> ou <code class="literal">yes</code>, des liens
	  matériel seront créés pour tous les fichiers de trace
	  d'audit de <code class="filename">/var/audit/dist</code>.</p><p>Le champ <code class="literal">flags</code> fixe le masque
	  général de présélection
	  utilisé par défaut pour les
	  événements attribuables.  Dans l'exemple
	  ci-dessus, les ouvertures et fermetures de sessions
	  réussies ou échouées ainsi que les authentifications et
	  autorisations sont
	  enregistrées pour tous les utilisateurs.</p><p>L'option <code class="literal">minfree</code> définit le
	  pourcentage minimal d'espace libre du système de
	  fichiers sur lequel les traces d'audit sont stockées.</p><p>L'entrée <code class="literal">naflags</code> indique les
	  classes à surveiller pour les
	  événements non-attribués, comme les
	  processus d'ouverture et de fermeture de session et les
	  authentifications et autorisations.</p><p>L'entrée <code class="literal">policy</code> donne une
	  liste d'indicateurs de stratégie contrôlant
	  divers aspect du comportement de l'audit
	  séparés par une virgule.  L'indicateur
	  <code class="literal">cnt</code> indique que le système devrait
	  continuer à fonctionner en dépit d'un
	  échec dans l'audit (l'emploi de cet indicateur est
	  hautement recommandé).  L'autre indicateur
	  <code class="literal">argv</code>, provoque l'audit des arguments
	  passés à l'appel système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=execve&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span></a>
	  lors de l'audit de l'exécution des commandes.</p><p>L'entrée <code class="literal">filez</code> indique la
	  taille maximale en octets autorisée pour un fichier
	  de trace avant qu'il soit interrompu et que le
	  système provoque sa rotation.  La valeur par
	  défaut, <code class="literal">0</code>, désactive la rotation automatique
	  des journaux.  Si la taille de fichier est
	  inférieure à 512K, elle
	  sera ignorée et un message sera
	  généré.</p><p>Le champ <code class="option">expire-after</code> indique quand un
	  fichier de trace expirera et sera supprimé.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="audit-audituser"></a>18.3.2.2. Le fichier <code class="filename">audit_user</code></h4></div></div></div><p>L'administrateur peut spécifier des exigences
	  supplémentaires qu niveau de l'audit pour des utilisateurs
	  spécifiques dans le fichier <code class="filename">audit_user</code>.
	  Chaque ligne paramètre l'audit
	  pour un utilisateur par l'intermédiaire de deux
	  champs: le champ
	  <code class="literal">alwaysaudit</code>, qui indique l'ensemble des
	  événements qui devraient toujours être
	  surveillés pour l'utilisateur, le
	  champ, <code class="literal">neveraudit</code>, indique un ensemble
	  d'événements qui ne devrait jamais être
	  audité pour cet utilisateur.</p><p>L'exemple suivant d'entrées
	  permet le suivi des
	  ouvertures et fermetures de sessions et l'exécution
	  de commandes avec succès de l'utilisateur
	  <code class="systemitem">root</code>, et audite la création de
	  fichiers et l'exécution de commandes avec
	  succès pour l'utilisateur <code class="systemitem">www</code>.
	  Si utilisé avec le
	  fichier
	  <code class="filename">audit_control</code> par défaut, l'entrée
	  <code class="literal">lo</code> pour <code class="systemitem">root</code> est
	  redondante, et les événements relatifs aux
	  ouvertures et aux fermetures de sessions seront
	  également enregistrés pour l'utilisateur
	  <code class="systemitem">www</code>.</p><pre class="programlisting">root:lo,+ex:no
www:fc,+ex:no</pre></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="audit-administration"></a>18.4. Travailler avec les traces d'audit</h2></div></div></div><p>Etant donné que les traces d'audit sont stockées sous le format
	binaire <acronym class="acronym">BSM</acronym> (<span class="quote">« <span class="quote">Basic Security Module</span> »</span>),
	plusieurs outils sont disponibles pour modifier ou convertir
	en texte ces fichiers de trace.
	Pour convertir les fichiers de trace en en texte simple,
	utiliser la commande <code class="command">praudit</code>.
	Pour réduire le fichier de trace en vue
	d'une analyse, d'un archivage, ou d'une impression, utiliser
	la commande <code class="command">auditreduce</code>.  Cet utilitaire
	supporte une variété de paramètres de sélection, parmi
	lesquels le type d'événement, la classe de l'événement,
	l'utilisateur, la date ou l'heure de l'événement, et le chemin
	d'accès ou l'objet sur lequel on agit.</p><p>Par exemple, pour afficher
	sous forme de texte brut l'intégralité
	du contenu du fichier journal d'audit
	précisé:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>praudit /var/audit/<em class="replaceable"><code>AUDITFILE</code></em></code></strong></pre><p>Où
	<em class="replaceable"><code>AUDITFILE</code></em> est
	le journal à afficher.</p><p>Les traces d'audit consistent en une série
	d'enregistrements constitués de champs que la commande
	<code class="command">praudit</code> affiche de manière
	séquentielle, un par ligne.  Chaque champ est
	spécifique, comme <code class="literal">header</code>
	(l'entête de l'enregistrement), ou <code class="literal">path</code>
	(le chemin d'accès).  Ce qui suit est un
	exemple d'événement
	<code class="literal">execve</code>:</p><pre class="programlisting">header,133,10,execve(2),0,Mon Sep 25 15:58:03 2006, + 384 msec
exec arg,finger,doug
path,/usr/bin/finger
attribute,555,root,wheel,90,24918,104944
subject,robert,root,wheel,root,wheel,38439,38032,42086,128.232.9.100
return,success,0
trailer,133</pre><p>Cet audit représente un appel réussi
	à <code class="literal">execve</code>, lors de l'exécution
	de la commande <code class="literal">finger doug</code>.  Le champ
	<code class="literal">exec arg</code> contient la ligne de commande
	présentée par l'interpréteur de commandes
	au noyau.  Le champ <code class="literal">path</code> contient le chemin
	d'accès à l'exécutable comme le voit le
	noyau.  Le champ <code class="literal">attribute</code> décrit le
	binaire et précise les permissions sur le fichier.  Le champ
	<code class="literal">subject</code> conserve l'identifiant (ID) de
	l'utilisateur audité, les
	identifiants groupe et utilisateur effectifs, les identifiants
	groupe et utilisateur réels, l'ID du processus, l'ID de
	la session, l'ID du port, et l'adresse correspondant à
	la session.  Notez que l'ID de l'utilisateur pour l'audit
	diffère de l'ID réel de l'utilisateur étant donné que
	l'utilisateur <code class="systemitem">robert</code> est passé en
	<code class="systemitem">root</code> avant l'exécution de la
	commande, mais l'audit se fait par rapport à
	l'utilisateur authentifié original.  Le champ
	<code class="literal">return</code> indique la réussite de
	l'exécution et le champ <code class="literal">trailer</code>
	termine l'enregistrement.</p><p>Le format de sortie <acronym class="acronym">XML</acronym> est également
	supporté et peut être sélectionné en
	utilisant l'argument <code class="option">-x</code>.</p><p>Comme les journaux d'audit peuvent être très
	gros, un sous-ensemble d'enregistrements peut être sélectionné
	en utilisant <code class="command">auditreduce</code>. Cet exemple
	sélectionne tous les enregistrements produits pour
	l'utilisateur <code class="systemitem">trhodes</code> et
	stockés dans le fichier
	<em class="replaceable"><code>AUDITFILE</code></em>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>auditreduce -u <em class="replaceable"><code>trhodes</code></em> /var/audit/<em class="replaceable"><code>AUDITFILE</code></em> | praudit</code></strong></pre><p>Les membres du groupe <code class="systemitem">audit</code> sont
	autorisés à lire les traces d'audit
	présentes dans le répertoire <code class="filename">/var/audit</code>. Par défaut, ce
	groupe est vide, par conséquent seul l'utilisateur
	<code class="systemitem">root</code> peut lire les traces d'audit.  Des
	utilisateurs peuvent être ajoutés au groupe
	<code class="systemitem">audit</code> afin de déléguer
	les droits de lecture des audits.
	Comme la possibilité de suivre le contenu des fichiers
	journaux de l'audit donne un aperçu significatif du
	comportement des utilisateurs et des processus, il est donc
	recommandé de déléguer avec prudence les
	droits de lecture des audits.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77728592"></a>18.4.1. Surveillance en direct à l'aide de tubes
	d'audit</h3></div></div></div><p>Les tubes (<span class="quote">« <span class="quote">pipes</span> »</span>) d'audit sont des
	pseudo-périphériques <span class="quote">« <span class="quote">clonables</span> »</span> qui autorisent
	aux applications l'accès au flux d'enregistrement des audits
	en cours.  C'est de tout premier intérêt pour les auteurs
	d'applications de détection des intrusions et de surveillance
	du système.  Cependant, le tube d'audit est un moyen pratique
	pour l'administrateur pour autoriser la surveillance en direct
	sans avoir à faire face aux problèmes de permissions ou
	de rotation des fichiers journaux interrompant le flux des
	enregistrements des événements.  Pour suivre le flux des
	enregistrements de l'audit en cours:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>praudit /dev/auditpipe</code></strong></pre><p>Par défaut, les fichiers spéciaux de
	périphériques correspondant aux tubes d'audit ne
	sont accessibles qu'à l'utilisateur
	<code class="systemitem">root</code>.  Pour les rendre accessibles aux
	membres du groupe <code class="systemitem">audit</code>, ajoutez une
	règle <code class="literal">devfs</code> au fichier
	<code class="filename">/etc/devfs.rules</code>:</p><pre class="programlisting">add path 'auditpipe*' mode 0440 group audit</pre><p>Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.rules&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.rules</span>(5)</span></a> pour plus
	d'information sur la configuration du système de
	fichiers devfs.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il est relativement simple de produire un effet de
	  boucle sans fin, dans lequel la consultation de chaque
	  événement enregistré par le
	  système d'audit provoque la génération
	  de nouveaux événements d'audit.  Par exemple,
	  si toutes les entrées/sorties réseau sont
	  surveillées, et que <code class="command">praudit</code> est
	  exécuté depuis une session <acronym class="acronym">SSH</acronym>, alors un flux
	  continu d'événements sera
	  généré suivant une fréquence
	  importante, chaque événement affiché
	  générant un autre événement.  Pour cette raison, il
	  est recommandé d'exécuter <code class="command">praudit</code>
	  sur un tube par
	  l'intermédiaire de sessions sans surveillance
	  précise des entrées/sorties.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77741264"></a>18.4.2. Rotation et compression des fichiers de trace d'audit</h3></div></div></div><p>Les traces d'audit sont écrites par le noyau, et sont
	gérées par le <span class="quote">« <span class="quote">démon</span> »</span> d'audit,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=auditd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">auditd</span>(8)</span></a>.  Les administrateurs ne
	devraient donc pas tenter d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newsyslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">newsyslog.conf</span>(5)</span></a> ou
	tout autre outil pour assurer la rotation directe des journaux
	d'audit.  A la place, l'utilitaire <code class="command">audit</code>
	devrait être employé pour stopper l'audit,
	reconfigurer le système d'audit et effectuer la
	rotation des journaux.  La commande suivante provoque la
	création d'un nouveau fichier journal d'audit par le
	<span class="quote">« <span class="quote">démon</span> »</span> et signale au noyau d'utiliser le
	nouveau fichier pour les enregistrements.  L'ancien fichier
	journal sera fermé et renommé et pourra,
	à partir de cet instant, être manipulé par
	l'administrateur:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>audit -n</code></strong></pre><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=auditd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">auditd</span>(8)</span></a> ne tourne pas, cette
	  commande échouera et un message d'erreur sera
	  généré.</p><p>Ajouter la ligne suivante au fichier
	<code class="filename">/etc/crontab</code> provoquera cette rotation
	toutes les douze heures:</p><pre class="programlisting">0     */12       *       *       *       root    /usr/sbin/audit -n</pre><p>La modification sera prise en compte une fois que aurez
	sauvegardé le fichier
	<code class="filename">/etc/crontab</code>.</p><p>La rotation automatique du fichier d'une trace d'audit
	basée sur la taille du fichier est possible à
	l'aide de l'option <code class="option">filesz</code> de
	<code class="filename">audit_control</code> comme décrit dans
	<a class="xref" href="#audit-auditcontrol" title="18.3.2.1. Le fichier audit_control">Section 18.3.2.1, « Le fichier <code class="filename">audit_control</code> »</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77750864"></a>18.4.3. Compresser les traces d'audit</h3></div></div></div><p>Les fichiers de trace d'audit peuvent devenir très
	gros, il est souvent désirable de les compresser ou
	sinon de les archiver une fois qu'ils ont été
	fermés par le <span class="quote">« <span class="quote">démon</span> »</span> d'audit.  La
	procédure <code class="filename">audit_warn</code> peut
	être employée pour effectuer des
	opérations personnalisées pour une
	variété d'événements relatifs
	à l'audit, y compris l'arrêt propre des traces
	d'audit lors de leur rotation.  Par exemple, ce qui suit peut
	être ajouté au fichier
	<code class="filename">/etc/security/audit_warn</code> pour compresser
	les traces
	d'audit à leur fermeture:</p><pre class="programlisting">#
# Compression des fichiers de trace d'audit à leur fermeture.
#
if [ "$1" = closefile ]; then
        gzip -9 $2
fi</pre><p>D'autres activités d'archivage pourront inclure la
	copie des fichiers de trace vers un serveur central, la
	suppression d'anciennes traces, ou la réduction des
	traces pour supprimer les enregistrements inutiles.  Cette
	procédure ne sera exécutée que lorsque
	les fichiers de trace d'audit auront été
	proprement arrêtés, et ne sera pas
	exécutée sur les traces interrompues en cours
	d'utilisation suite à un arrêt incorrect du
	système.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks"></a>Chapitre 19. Stockage des données</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#disks-synopsis">19.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#disks-naming">19.2. Noms des périphériques</a></span></dt><dt><span class="sect1"><a href="#disks-adding">19.3. Ajouter des disques</a></span></dt><dt><span class="sect1"><a href="#raid">19.4. RAID</a></span></dt><dt><span class="sect1"><a href="#usb-disks">19.5. Périphériques de stockage USB</a></span></dt><dt><span class="sect1"><a href="#creating-cds">19.6. Création et utilisation de supports optiques
      (CDs)</a></span></dt><dt><span class="sect1"><a href="#creating-dvds">19.7. Création et utilisation de supports optiques
      (DVDs)</a></span></dt><dt><span class="sect1"><a href="#floppies">19.8. Création et utilisation de disquettes</a></span></dt><dt><span class="sect1"><a href="#backups-tapebackups">19.9. Créer et utiliser les bandes magnétiques</a></span></dt><dt><span class="sect1"><a href="#backups-floppybackups">19.10. Sauvegardes sur disquettes</a></span></dt><dt><span class="sect1"><a href="#backup-strategies">19.11. Stratégies de sauvegarde</a></span></dt><dt><span class="sect1"><a href="#backup-basics">19.12. Sauvegardes</a></span></dt><dt><span class="sect1"><a href="#disks-virtual">19.13. Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></span></dt><dt><span class="sect1"><a href="#snapshots">19.14. Instantané (&#8220;Snapshot&#8221;) d'un système de fichiers</a></span></dt><dt><span class="sect1"><a href="#quotas">19.15. Quotas d'utilisation des disques</a></span></dt><dt><span class="sect1"><a href="#disks-encrypting">19.16. Chiffrer les partitions d'un disque</a></span></dt><dt><span class="sect1"><a href="#swap-encrypting">19.17. Chiffrage de l'espace de pagination</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-synopsis"></a>19.1. Synopsis</h2></div></div></div><p>Ce chapitre couvre l'utilisation des disques sous FreeBSD.
      Cela comprend les disques mémoire, les disques réseau,
      les périphériques standards de stockage
      SCSI/IDE, et les périphériques utilisant
      l'interface USB.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La terminologie qu'utilise FreeBSD pour décrire
	  l'organisation des données sur un disque physique (les
	  partitions et les tranches).</p></li><li class="listitem"><p>Comment ajouter des disques durs supplémentaires sur
	  votre système.</p></li><li class="listitem"><p>Comment configurer FreeBSD pour l'utilisation de
	  périphériques de stockage USB.</p></li><li class="listitem"><p>Comment configurer des systèmes de fichiers virtuels,
	  comme les disques mémoires.</p></li><li class="listitem"><p>Comment utiliser les quotas pour limiter l'usage de
	  l'espace disque.</p></li><li class="listitem"><p>Comment chiffrer des disques pour les sécuriser
	  contre les attaques.</p></li><li class="listitem"><p>Comment créer et graver des CDs et DVDs sous
	  FreeBSD.</p></li><li class="listitem"><p>Les différents supports disponibles pour les
	  sauvegardes.</p></li><li class="listitem"><p>Comment utiliser les programmes de sauvegarde
	  disponibles sous FreeBSD.</p></li><li class="listitem"><p>Comment faire des sauvegardes sur disquettes.</p></li><li class="listitem"><p>Ce que sont les <span class="quote">« <span class="quote">snapshots</span> »</span>
	  (instantanés) de systèmes de fichiers et
	  comment les utiliser efficacement.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment configurer et installer un nouveau noyau
	  FreeBSD (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-naming"></a>19.2. Noms des périphériques</h2></div></div></div><p>Ce qui suit est une liste des périphériques
      de stockage physiques, et des noms de périphériques
      associés.</p><div class="table"><a id="disk-naming-physical-table"></a><div class="table-title">Tableau 19.1. Conventions de nom pour les disques physiques</div><div class="table-contents"><table summary="Conventions de nom pour les disques physiques" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Type de disque</th><th>Nom du périphérique</th></tr></thead><tbody><tr><td>Disques durs IDE</td><td><code class="literal">ad</code></td></tr><tr><td>Lecteurs de CDROMs IDE</td><td><code class="literal">acd</code></td></tr><tr><td>Disques durs SCSI et périphériques de
	      stockage USB</td><td><code class="literal">da</code></td></tr><tr><td>Lecteurs de CDROMs SCSI</td><td><code class="literal">cd</code></td></tr><tr><td><code class="literal">mcd</code> pour les CD-ROMs Mitsumi,
	      <code class="literal">scd</code> pour les CD-ROMs Sony
	    </td><td class="auto-generated"> </td></tr><tr><td>Lecteurs de disquette</td><td><code class="literal">fd</code></td></tr><tr><td>Lecteurs de bande SCSI</td><td><code class="literal">sa</code></td></tr><tr><td>Lecteurs de bande IDE</td><td><code class="literal">ast</code></td></tr><tr><td>Disques flash</td><td><code class="literal">fla</code> pour les
	      périphériques Flash <span class="trademark">DiskOnChip</span>®</td></tr><tr><td>Disques RAID</td><td><code class="literal">aacd</code> pour l'AdvancedRAID <span class="trademark">Adaptec</span>®,
	      <code class="literal">mlxd</code> et <code class="literal">mlyd</code>
	      pour les <span class="trademark">Mylex</span>®,
	      <code class="literal">amrd</code> le <span class="trademark">MegaRAID</span>® d'AMI,
	      <code class="literal">idad</code> pour le Smart RAID de Compaq,
	      <code class="literal">twed</code> pour le <span class="trademark">3ware</span>® RAID.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-adding"></a>19.3. Ajouter des disques</h2></div><div><span class="authorgroup">Contribution originale de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">David</span> <span class="surname">O'Brien</span></span>. </span></div></div></div><a id="idp77807440" class="indexterm"></a><p>Supposons que nous voulions ajouter un second disque SCSI
      à une machine qui n'a pour l'instant qu'un seul disque.
      Commençons par arrêter l'ordinateur et installer le disque
      en suivant les instructions données par le constructeur de
      l'ordinateur, du contrôleur et du disque.  Comme il y a de
      nombreuses façon de procéder, ces détails
      dépassent le cadre de ce document.</p><p>Ouvrons maintenant une session sous le compte
      <code class="systemitem">root</code>.  Après avoir installé le disque,
      consultez le fichier <code class="filename">/var/run/dmesg.boot</code>
      pour vérifier que le nouveau disque a été
      reconnu.  Dans notre exemple, le disque que nous venons
      d'ajouter sera le périphérique
      <code class="filename">da1</code> et nous le monterons sur le
      répertoire <code class="filename">/1</code> (si vous ajoutez
      un disque IDE, le nom de périphérique sera
      <code class="filename">ad1</code>).</p><a id="idp77811408" class="indexterm"></a><a id="idp77811920" class="indexterm"></a><a id="idp77812560" class="indexterm"></a><p>FreeBSD tourne sur des ordinateurs compatibles IBM-PC,
      il doit tenir compte des partitions PC BIOS.  Ces dernières
      sont différentes des partitions BSD traditionnelles.
      Un disque PC peut avoir jusqu'à quatre partitions.  Si le
      disque va être réservé uniquement à FreeBSD,
      vous pouvez utiliser le mode <span class="emphasis"><em>dédié</em></span>.
      Sinon, FreeBSD devra utiliser une des partitions PC BIOS.
      FreeBSD appelle les partitions PC BIOS
      <span class="emphasis"><em>tranches</em></span> (&#8220;slices&#8221;) pour
      les distinguer des partitions BSD traditionnelles.
      Vous pouvez aussi des tranches sur un disque dédié
      à FreeBSD, mais utilisé sur une machine où
      un autre système d'exploitation est également
      installé.  C'est une bonne manière pour
      éviter de perturber l'utilitaire <code class="command">fdisk</code>
      des autres système d'exploitation différents de
      FreeBSD.</p><p>Dans le cas d'une tranche, le disque ajouté deviendra
      le périphérique <code class="filename">/dev/da1s1e</code>.
      Ce qui se lit: disque SCSI, numéro d'unité 1 (second disque
      SCSI), tranche 1 (partition PC BIOS 1), et partition BSD
      <code class="filename">e</code>.  Dans le cas du mode dédié,
      le disque sera ajouté en tant que
      <code class="filename">/dev/da1e</code>.</p><p>En raison de l'utilisation d'entiers codés sur 32
      bits pour stocker le nombre de secteurs, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
      est
      limité à 2^32-1 secteurs par disque ou 2TB dans la
      plupart des cas.  Le format <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a> n'autorise pas de
      secteur au delà de 2^32-1 et une largeur de plus de
      2^32-1, limitant donc les partitions à 2TB et les disques
      à 4TB en général.  Le format
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sunlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sunlabel</span>(8)</span></a> est limité à 2^32-1 secteur par
      partition et 8 partitions pour un total de 16TB d'espace.  Pour
      des disques plus importants, les partitions <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gpt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gpt</span>(8)</span></a> peuvent
      être utilisées.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77820112"></a>19.3.1. Utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a></h3></div></div></div><a id="idp77825616" class="indexterm"></a><a id="idp77826896" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Naviguer dans <span class="application">sysinstall</span></strong></p><p>Vous pouvez utiliser <code class="command">sysinstall</code>
	    et ses menus simples d'emploi pour partitionner et
	    libeller le nouveau disque.  Ouvrez une session sous
	    le compte super-utilisateur <code class="systemitem">root</code> ou
	    utilisez la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a>.  Lancez
	    <code class="command">sysinstall</code> et sélectionnez
	    <span class="guimenuitem">Configure</span>.  A l'intérieur
	    du menu <span class="guimenuitem">FreeBSD Configuration
	    Menu</span>, descendez et sélectionnez l'option
	    <span class="guimenuitem">Fdisk</span>.</p></li><li class="step"><p class="title"><strong>L'éditeur de partition
	    <span class="application">fdisk</span></strong></p><p>Une fois dans l'utilitaire <span class="application">fdisk</span>,
	    nous pouvons taper <span class="keycap"><strong>A</strong></span> pour utiliser tout
	    le disque pour FreeBSD.  Lorsque l'on vous demande si vous
	    voulez garder la possibilité de pouvoir coopérer avec
	    d'autres systèmes d'exploitation (&#8220;remain
	    cooperative with any future possible operating
	    systems&#8221;), répondez par l'affirmative
	    (<code class="literal">YES</code>).  Enregistrez les modifications
	    sur le disque avec <span class="keycap"><strong>W</strong></span>.  Quittez maintenant
	    l'éditeur <span class="application">fdisk</span> en tapant
	    <span class="keycap"><strong>q</strong></span>.  La prochaine question concernera le
	    secteur de démarrage (&#8220;Master Boot Record&#8221;).
	    Comme vous ajoutez un disque à un système
	    déjà opérationnel, choisissez
	    <span class="guibutton">None</span>.</p></li><li class="step"><p class="title"><strong>L'éditeur de label du disque</strong></p><a id="idp77841488" class="indexterm"></a><p>Ensuite, vous devez quitter puis relancer
	    <span class="application">sysinstall</span>.  Suivez les
	    instructions précédentes, en choisissant cette fois
	    l'option <span class="guimenuitem">Label</span>.  Vous entrerez
	    dans l'éditeur de label du disque (<code class="literal">Disk Label
	    Editor</code>).  C'est là que vous allez créer
	    les partitions BSD traditionnelles.  Un disque peut avoir
	    jusqu'à huit partitions, libellées de
	    <code class="literal">a</code> à <code class="literal">h</code>.  Certains
	    de ces labels ont des significations particulières.
	    La partition <code class="literal">a</code> est la partition racine
	    (<code class="filename">/</code>).  Seul votre disque système
	    (e.g., celui à partir duquel vous démarrez)
	    doit avoir une partition <code class="literal">a</code>.  La
	    partition <code class="literal">b</code> est utilisée pour la
	    pagination, vous pouvez avoir plusieurs disques avec des
	    partitions de pagination.  La partition
	    <code class="literal">c</code> désigne la totalité du
	    disque en mode dédié, ou toute la tranche
	    FreeBSD dans le cas contraire.  Les autres partitions sont
	    à usage général.</p><p>L'éditeur de label de
	    <span class="application">sysinstall</span> définit par
	    défaut
	    la partition <code class="literal">e</code> comme première partition
	    qui n'est ni racine, ni de pagination.  Dans l'éditeur
	    de label, créez un seul système de fichiers avec
	    l'option <span class="keycap"><strong>C</strong></span>.  Quand on vous demande si ce sera un
	    système de fichiers (FS) ou une partition de pagination,
	    choisissez <code class="literal">FS</code> et indiquez un point de
	    montage (e.g., <code class="filename">/mnt</code>).  Lorsque vous
	    ajoutez un disque sur un système déjà
	    installé, <span class="application">sysinstall</span> ne
	    créera
	    pas d'entrées dans <code class="filename">/etc/fstab</code>, donc
	    le nom que vous donnez au point de montage n'a pas
	    d'importance.</p><p>Vous pouvez maintenant écrire le nouveau label sur
	    le disque et y créer un système de fichiers.
	    Faites-le en tapant <span class="keycap"><strong>W</strong></span>.  Ignorez les
	    erreurs de <span class="application">sysinstall</span>
	    disant que la nouvelle partition ne peut être
	    montée.  Quittez maintenant l'éditeur de label et
	    <span class="application">sysinstall</span>.</p></li><li class="step"><p class="title"><strong>Dernière étape</strong></p><p>La dernière étape consiste à éditer
	    le fichier <code class="filename">/etc/fstab</code> pour y
	    ajouter une entrée pour votre nouveau disque.</p></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77853392"></a>19.3.2. Utiliser les utilitaires en ligne de commande</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77854032"></a>19.3.2.1. Utiliser les tranches &#8212; &#8220;slices&#8221;</h4></div></div></div><p>Cette configuration permettra de faire fonctionner
	  correctement votre disque dure avec d'autres systèmes
	  d'exploitation qui pourraient être installé
	  sur votre machine, et ne perturbera pas les utilitaires
	  <code class="command">fdisk</code> de ces autres systèmes
	  d'exploitation.  C'est la méthode recommandée
	  pour l'installation de nouveau disques.  N'utilisez le mode
	  <span class="emphasis"><em>dédié</em></span> que si vous avez une bonne
	  raison de le faire!</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>fdisk -BI da1</code></strong> #Initialize your new disk
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -B -w da1s1 auto</code></strong> #Label it.
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -e da1s1</code></strong> # Edit the disklabel just created and add any partitions.
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1s1e</code></strong> # Repeat this for every partition you created.
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da1s1e /1</code></strong> # Mount the partition(s)
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong> # Add the appropriate entry/entries to your <code class="filename">/etc/fstab</code>.</pre><p>Si vous avez un disque IDE, remplacez <code class="filename">da</code>
	  par <code class="filename">ad</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77872208"></a>19.3.2.2. Mode dédié</h4></div></div></div><a id="idp77872848" class="indexterm"></a><p>Si le nouveau disque n'est pas destiné a être
	  partagé avec un autre système d'exploitation, vous
	  pouvez utiliser le mode <span class="emphasis"><em>dédié</em></span>.
	  Rappelez-vous que ce mode peut perturber les systèmes
	  d'exploitation Microsoft; cependant, ils ne toucheront pas
	  au disque.  <span class="trademark">OS/2</span>® d'IBM, au contraire,
	  &#8220;s'approprie&#8221; toute partition qu'il trouve et ne
	  reconnaît pas.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 bs=1k count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -Bw da1 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -e da1</code></strong>				# create the `e' partition
<code class="prompt">#</code> <strong class="userinput"><code>newfs -d0 /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>				# add an entry for /dev/da1e
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre><p>Un autre méthode est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/da1 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel /dev/da1 | bsdlabel -BR da1 /dev/stdin</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da1e</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mkdir -p /1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>vi /etc/fstab</code></strong>					# add an entry for /dev/da1e
<code class="prompt">#</code> <strong class="userinput"><code>mount /1</code></strong></pre></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="raid"></a>19.4. RAID</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-soft"></a>19.4.1. RAID logiciel</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd"></a>19.4.1.1. Configuration du pilote de disque concaténé
	  (CCD &#8212; &#8220;Concatenated Disk Driver&#8221;)</h4></div><div><span class="authorgroup">Travail original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div><div><span class="authorgroup">Révisé par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Brown</span></span>. </span></div></div></div><a id="idp77895632" class="indexterm"></a><a id="idp77896400" class="indexterm"></a><p>Quand il est question du choix d'une solution de
	  stockage de masse les critères de choix les plus
	  importants à considérer sont la vitesse, la
	  fiabilité, et le
	  coût.  Il est plutôt rare de pouvoir réunir
	  ces trois critères; normalement un
	  périphérique de stockage rapide et fiable est
	  coûteux, et pour diminuer les coûts la
	  vitesse ou la fiabilité doivent
	  être sacrifiées.</p><p>A la conception du système décrit plus bas,
	  le coût a été choisi comme facteur
	  le plus important, suivi de la vitesse, et enfin
	  la fiabilité.  La vitesse de transfert des données
	  est limitée par le réseau.  Et tandis que la
	  fiabilité est très importante, le disque CCD
	  décrit ci-dessous est destiné au stockage de
	  données en ligne qui sont déjà
	  complètement sauvegardées sur CD-Rs et qui
	  peuvent être facilement remplacées.</p><p>Définir vos propres besoins est la première
	  étape dans le choix d'une solution de stockage
	  de masse.  Si vos critères de choix privilégient
	  la vitesse ou la fiabilité par rapport au coût,
	  votre solution diférera du système décrit dans
	  cette section.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-installhw"></a>19.4.1.1.1. Installation du matériel</h5></div></div></div><p>En plus du disque système IDE, trois
	    disques Western Digital de 30Go, 5400 trs/min IDE
	    forment le coeur du disque CCD décrit ci-dessous
	    donnant approximativement 90Go de stockage en ligne.
	    La solution idéale serait d'avoir
	    pour chaque disque IDE son propre câble et
	    contrôleur IDE, mais pour minimiser les coûts,
	    des contrôleur IDE supplémentaires n'ont pas
	    été utilisés.  Aussi, les disques ont
	    été configuré de telle façon que chaque
	    contrôleur IDE ait un disque maître et un disque
	    esclave.</p><p>Au redémarrage, le BIOS a été
	    configuré pour détecter automatiquement
	    les disques attachés.  FreeBSD les a d'ailleurs
	    détectés au redémarrage:</p><pre class="programlisting">ad0: 19574MB &lt;WDC WD205BA&gt; [39770/16/63] at ata0-master UDMA33
ad1: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata0-slave UDMA33
ad2: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-master UDMA33
ad3: 29333MB &lt;WDC WD307AA&gt; [59598/16/63] at ata1-slave UDMA33</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si FreeBSD ne détecte pas les disques,
	    assurez-vous que vous avez correctement placé les
	    cavaliers.  La plupart des disques IDE disposent
	    également d'un cavalier &#8220;Cable Select&#8221;.
	    Ce n'est <span class="emphasis"><em>pas</em></span> le cavalier de
	    configuration maître/esclave.  Consultez la
	    documentation du disque pour identifier le cavalier
	    correct.</p></div><p>Ensuite, réfléchissez sur la manière
	    de les intégrer au système de fichiers.
	    Vous devriez faire des recherches sur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>
	    (<a class="xref" href="#vinum-vinum" title="Chapitre 21. Le gestionnaire de volume Vinum">Chapitre 21, <em>Le gestionnaire de volume Vinum</em></a>) et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>.  Dans
	    cette configuration particulière, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> a
	    été choisi.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-setup"></a>19.4.1.1.2. Configuration du CCD</h5></div></div></div><p>Le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> vous permet de prendre
	    plusieurs disques identiques et les concaténer
	    en un seul système de fichiers logique.  Afin
	    d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>, vous avez besoin
	    d'un noyau avec le support <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>.
	    Ajoutez la ligne suivante à votre fichier de
	    configuration de noyau, recompilez, et installez
	    le noyau:</p><pre class="programlisting">device   ccd</pre><p>Le support <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> peut
	    également chargé sous la forme d'un module
	    noyau.</p><p>Pour configurer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>,
	    vous devez tout d'abord utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
	    pour labéliser les disques:</p><pre class="programlisting">bsdlabel -w ad1 auto
bsdlabel -w ad2 auto
bsdlabel -w ad3 auto</pre><p>Cela a créé un label de disque
	    <code class="filename">ad1c</code>,
	    <code class="filename">ad2c</code> et
	    <code class="filename">ad3c</code> qui s'étend sur
	    l'intégralité du disque.</p><p>L'étape suivante est de modifier le type de label de
	    disque.  Vous pouvez utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> pour
	    éditer les disques:</p><pre class="programlisting">bsdlabel -e ad1
bsdlabel -e ad2
bsdlabel -e ad3</pre><p>Cela ouvre le label de disque actuel de chaque
	    disque dans l'éditeur fixé par la variable
	    d'environnement <code class="envar">EDITOR</code>,
	    généralement, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a>.</p><p>Un label de disque non modifié ressemblera
	    à quelque chose comme ceci:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)</pre><p>Ajoutez une nouvelle partition
	    <code class="literal">e</code> pour être utilisé par
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>.  Cela peut être une copie de la
	    partition <code class="literal">c</code> mais le type de système
	    de fichiers (<code class="option">fstype</code>) doit être
	    <strong class="userinput"><code>4.2BSD</code></strong>.  Le label de disque devait
	    ressembler à:</p><pre class="programlisting">8 partitions:
#        size   offset    fstype   [fsize bsize bps/cpg]
  c: 60074784        0    unused        0     0     0   # (Cyl.    0 - 59597)
  e: 60074784        0    4.2BSD        0     0     0   # (Cyl.    0 - 59597)</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-buildingfs"></a>19.4.1.1.3. Création du système de fichiers</h5></div></div></div><p>Maintenant que tous les disques sont labélisés,
	    vous devez construire le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>.  Pour cela,
	    utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>, avec des options semblables
	    à ce qui suit:</p><pre class="programlisting">ccdconfig ccd0<a id="co-ccd-dev"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span> 32<a id="co-ccd-interleave"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span> 0<a id="co-ccd-flags"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span> /dev/ad1e<a id="co-ccd-devs"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span> /dev/ad2e /dev/ad3e</pre><p>L'utilisation et la signification de chaque option
	    est données ci-dessous:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-dev"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le premier argument est le périphérique
	      à configurer, dans ce cas,
	      <code class="filename">/dev/ccd0c</code>. La partie
	      <code class="filename">/dev/</code> est optionnelle.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-interleave"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>L'entrelacement (&#8220;interleave&#8221;) du
	      système de fichiers.  L'entrelacement définit
	      la taille d'une bande de blocs disque, de 512 octets
	      chacune normalement.  Donc un entrelacement de 32
	      serait d'une largeur de 16384 octets.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-flags"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Paramètres pour <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>.  Si vous
	      désirez activer les miroirs disque, vous pouvez
	      spécifier un indicateur à cet endroit.  Cette
	      configuration ne fournit pas de miroir pour
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>, aussi l'indicateur est a 0
	      (zéro).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-ccd-devs"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Les derniers arguments de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a>
	      sont les périphériques à placer dans
	      le disque concaténé.  Utilisez le chemin
	      complet pour chaque périphérique.</p></td></tr></table></div><p>Après avoir utilisé <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ccdconfig</span>(8)</span></a> le
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> est configuré.  Un système de fichiers
	    peut être créé.  Consultez la page de manuel de
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> pour les options disponibles, ou lancez
	    simplement:</p><pre class="programlisting">newfs /dev/ccd0c</pre></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ccd-auto"></a>19.4.1.1.4. Automatiser la procédure</h5></div></div></div><p>Généralement, vous voudrez monter le
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> à chaque redémarrage.  Pour cela,
	    vous devez le configurer avant toute chose.
	    Ecrivez votre configuration actuelle dans
	    <code class="filename">/etc/ccd.conf</code> en utilisant la
	    commande suivante:</p><pre class="programlisting">ccdconfig -g &gt; /etc/ccd.conf</pre><p>Lors du démarrage, la procédure
	    <code class="command">/etc/rc</code> exécute
	    <code class="command">ccdconfig -C</code> si
	    <code class="filename">/etc/ccd.conf</code> existe.  Cela configure
	    automatiquement le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> de façon
	    à pouvoir être monté.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous démarrez en mode mono-utilisateur,
	    avant que vous ne puissiez monter le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>, vous
	    devez utiliser la commande suivante pour configurer
	    l'unité:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">ccdconfig -C</pre></div><p>Pour monter automatiquement le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a>
	    placez une entrées pour le <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> dans
	    <code class="filename">/etc/fstab</code>, il sera ainsi monté
	    au démarrage:</p><pre class="programlisting">/dev/ccd0c              /media       ufs     rw      2       2</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum"></a>19.4.1.2. Le gestionnaire de volume Vinum</h4></div></div></div><a id="idp77963344" class="indexterm"></a><a id="idp77968336" class="indexterm"></a><p>Le gestionnaire de volume Vinum est un pilote
	  de périphérique de gestion de disques
	  virtuels.  Il sépare le disque matériel de l'interface
	  de périphérique bloc et organise les données
	  de telle façon qu'il en résulte une amélioration
	  de la flexibilité, des performances et de la
	  fiabilité, comparé à la vision
	  traditionnelle sous forme partitionnée du stockage
	  disque.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> implémente les modèles
	  RAID-0, RAID-1 et RAID-5, individuellement ou
	  combinés.</p><p>Voir le <a class="xref" href="#vinum-vinum" title="Chapitre 21. Le gestionnaire de volume Vinum">Chapitre 21, <em>Le gestionnaire de volume Vinum</em></a> pour plus
	  d'information au sujet de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="raid-hard"></a>19.4.2. RAID Matériel</h3></div></div></div><a id="idp77973200" class="indexterm"></a><p>FreeBSD supporte également de nombreux contrôleurs
	<acronym class="acronym">RAID</acronym>.  Ces périphériques
	peuvent contrôler un système <acronym class="acronym">RAID</acronym>
	sans nécessiter l'utilisation d'un logiciel spécifique
	pour FreeBSD pour gérer l'unité.</p><p>En utilisant son propre <acronym class="acronym">BIOS</acronym>, la carte
	contrôle la plupart des opérations disque.  Ce qui
	suit est une description rapide d'une configuration utilisant
	un contrôleur Promise <acronym class="acronym">IDE</acronym> <acronym class="acronym">RAID</acronym>.
	Quand cette carte est installée et le système
	redémarré, une invite s'affichera posant quelques
	questions.  Suivez les instructions à l'écran
	pour atteindre l'écran de configuration de la carte.
	A partir de là, vous avez la possibilité de combiner
	tous les disques attachés.  En faisant cela, les
	disques apparaîtront sous la forme d'un unique disque
	sous FreeBSD.  D'autres niveaux <acronym class="acronym">RAID</acronym>
	peuvent être configurés en conséquence.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp77977680"></a>19.4.3. Reconstruire une unité ATA RAID1</h3></div></div></div><p>FreeBSD vous permet de remplacer à chaud
	un disque défectueux dans une unité.  Cela doit
	être fait avant redémarrage.</p><p>Vous verrez probablement dans
	<code class="filename">/var/log/messages</code> ou dans la sortie de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a> quelque chose comme:</p><pre class="programlisting">ad6 on monster1 suffered a hard error.
ad6: READ command timeout tag=0 serv=0 - resetting
ad6: trying fallback to PIO mode
ata3: resetting devices .. done
ad6: hard error reading fsbn 1116119 of 0-7 (ad6 bn 1116119; cn 1107 tn 4 sn 11)
status=59 error=40
ar0: WARNING - mirror lost</pre><p>En utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atacontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atacontrol</span>(8)</span></a>, recherchez
	de plus amples informations:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol list</code></strong>
ATA channel 0:
	Master:      no device present
	Slave:   acd0 &lt;HL-DT-ST CD-ROM GCR-8520B/1.00&gt; ATA/ATAPI rev 0

ATA channel 1:
	Master:      no device present
	Slave:       no device present

ATA channel 2:
	Master:  ad4 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

ATA channel 3:
	Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
	Slave:       no device present

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: DEGRADED</pre><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Vous devrez détacher le canal ATA avec le
	    disque défectueux de façon à pouvoir
	    le retirer sans risque:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol detach ata3</code></strong></pre></li><li class="step"><p>Remplacer le disque.</p></li><li class="step"><p>Rattacher le canal ATA:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol attach ata3</code></strong>
Master:  ad6 &lt;MAXTOR 6L080J4/A93.0500&gt; ATA/ATAPI rev 5
Slave:   no device present</pre></li><li class="step"><p>Rajouter le disque de rechange à
	    l'unité:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol addspare ar0 ad6</code></strong></pre></li><li class="step"><p>Recontruire l'unité:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atacontrol rebuild ar0</code></strong></pre></li><li class="step"><p>Il est possible de contrôler l'avancée de
	    la procédure en utilisant la commande
	    suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dmesg | tail -10</code></strong>
[output removed]
ad6: removed from configuration
ad6: deleted from ar0 disk1
ad6: inserted into ar0 disk1 as spare

<code class="prompt">#</code> <strong class="userinput"><code>atacontrol status ar0</code></strong>
ar0: ATA RAID1 subdisks: ad4 ad6 status: REBUILDING 0% completed</pre></li><li class="step"><p>Attendre jusqu'à la fin de cette opération.</p></li></ol></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="usb-disks"></a>19.5. Périphériques de stockage USB</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp78002128" class="indexterm"></a><p>De nombreuses solutions de stockage externes utilisent, de
      nos jours, le bus série universel (&#8220;Universal
      Serial Bus&#8221;&#8212;USB): disques durs, clés USB,
      graveurs de CDs, etc.  FreeBSD fournit un support pour ces
      périphériques.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78003664"></a>19.5.1. Configuration</h3></div></div></div><p>Le pilote de périphériques USB de stockage
	de masse, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>, fournit le support pour les
	périphériques de stockage USB.  Si vous utilisez
	le noyau <code class="filename">GENERIC</code>, vous n'avez rien
	à modifier à votre configuration.  Si vous
	utilisez un noyau personnalisé, assurez-vous que les
	lignes suivantes sont présentent dans votre fichier de
	configuration du noyau:</p><pre class="programlisting">device scbus
device da
device pass
device uhci
device ohci
device usb
device umass</pre><p>Le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a> utilise le sous-système
	SCSI pour accéder aux périphériques de
	stockage USB, votre périphérique USB sera vu par
	le système comme étant un
	périphérique SCSI.  En fonction du
	contrôleur USB présent sur votre carte
	mère, vous n'avez besoin qu'une des lignes
	<code class="literal">device uhci</code> et <code class="literal">device
	ohci</code>, cependant avoir les deux lignes dans votre
	configuration du noyau est sans danger.  N'oubliez pas de
	compiler et d'installer le nouveau noyau si vous y avez
	effectué des modifications.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si votre périphérique USB est un graveur
	  de CD ou de DVD, le pilote de périphérique SCSI
	  CD-ROM, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cd</span>(4)</span></a>, doit être ajouté au noyau via
	  la ligne:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device cd</pre><p xmlns="http://www.w3.org/1999/xhtml">Puisque le graveur est vu comme un disque SCSI, le
	  pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> ne devrait pas être
	  employé dans la configuration du noyau.</p></div><p>Le support pour les contrôleurs USB 2.0 est fourni
	avec FreeBSD vous devez cependant ajouter:</p><pre class="programlisting">device ehci</pre><p>à votre fichier de configuration pour
	bénéficier du support USB 2.0.  Notez que les
	pilotes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uhci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">uhci</span>(4)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ohci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ohci</span>(4)</span></a> sont toujours
	nécessaires si vous désirez le support de l'USB
	1.X.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78026704"></a>19.5.2. Test de la configuration</h3></div></div></div><p>La configuration est prête à être
	testée: branchez votre périphérique USB,
	et dans le tampon des messages du système
	(<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>), le disque devrait apparaître de cette
	manière:</p><pre class="screen">umass0: USB Solid state disk, rev 1.10/1.00, addr 2
GEOM: create disk da0 dp=0xc2d74850
da0 at umass-sim0 bus 0 target 0 lun 0
da0: &lt;Generic Traveling Disk 1.11&gt; Removable Direct Access SCSI-2 device
da0: 1.000MB/s transfers
da0: 126MB (258048 512 byte sectors: 64H 32S/T 126C)</pre><p>Bien évidement, le modèle, le fichier
	spécial de périphérique
	(<code class="filename">da0</code>) et d'autres détails
	peuvent être différents en fonction de votre
	configuration.</p><p>Comme le périphérique USB est vu comme
	étant un périphérique SCSI, la commande
	<code class="command">camcontrol</code> peut être employée
	pour lister les périphériques de stockage USB
	attachés au système:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;Generic Traveling Disk 1.11&gt;      at scbus0 target 0 lun 0 (da0,pass0)</pre><p>Si le disque dispose d'un système de fichiers, vous
	devriez pouvoir le monter.  La <a class="xref" href="#disks-adding" title="19.3. Ajouter des disques">Section 19.3, « Ajouter des disques »</a>
	vous aidera à formater et créer des partitions
	sur le disque USB si nécessaire.</p><p>Pour rendre ce périphérique montable par un
	utilisateur normal, un certain nombre de paramétrages
	sont nécessaires.  Tout d'abord, les entrées de
	périphériques qui sont créées lors
	de la connexion d'un périphérique USB doivent
	être accessibles à l'utilisateur.  Une solution
	est de faire en sorte que tous les utilisateurs de ces
	périphériques soient membres du groupe
	<code class="systemitem">operator</code>.  Cela se fait à l'aide
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a>.  Ensuite, quand ces entrées de
	périphériques sont créées, le
	groupe <code class="systemitem">operator</code> doit pouvoir y
	accéder en lecture et en écriture.  Pour cela,
	les lignes suivantes sont ajoutées à
	<code class="filename">/etc/devfs.rules</code>:</p><pre class="programlisting">[localrules=1]
add path 'da*' mode 0660 group operator</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">S'il y a déjà des disques SCSI dans le
	  système, on doit procéder
	  légèrement différemment.  Par exemple,
	  si le système contient déjà des disques
	  <code class="filename">da0</code> à
	  <code class="filename">da2</code> attachés au
	  système, changez la seconde ligne pour:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">add path 'da[3-9]*' mode 0660 group operator</pre><p xmlns="http://www.w3.org/1999/xhtml">Les disques déjà présents
	  n'appartiendront pas au groupe
	  <code class="systemitem">operator</code>.</p></div><p>Vous devez également activer votre ensemble de
	règles <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs.rules&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs.rules</span>(5)</span></a> dans votre fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">devfs_system_ruleset="localrules"</pre><p>Le noyau doit être ensuite configuré pour
	autoriser les utilisateurs habituels à monter des
	systèmes de fichiers.  La méthode la plus simple
	est d'ajouter la ligne suivante au fichier
	<code class="filename">/etc/sysctl.conf</code>:</p><pre class="programlisting">vfs.usermount=1</pre><p>Notez que ce paramétrage ne prendra effet qu'au
	prochain redémarrage.  Il est également possible
	d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a> pour fixer cette variable.</p><p>La dernière étape est de créer un
	répertoire où le système de fichiers sera
	monté.  Ce répertoire doit appartenir à
	l'utilisateur qui montera le système de fichiers.  Une
	méthode adaptée et la création par
	<code class="systemitem">root</code> d'un sous-répertoire
	<code class="filename">/mnt/$USER</code>
	appartenant à l'utilisateur en question (remplacez
	<em class="replaceable"><code>$USER</code></em> par le nom d'utilisateur de
	cet utilisateur):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt/$USER</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chown $USER:$USER /mnt/$USER</code></strong></pre><p>Supposez qu'une clé USB soit branchée et
	qu'un périphérique
	<code class="filename">/dev/da0s1</code> apparaît.  Comme ce type
	de périphériques est en général
	livré préformaté avec un système
	de fichiers de type FAT, on pourra le monter de cette
	manière:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mount -t msdosfs -m 644 -M 755 /dev/da0s1 /mnt/$USER</code></strong></pre><p>Si vous débranchez le périphérique
	(le disque doit être démonté auparavant),
	vous devriez voir dans les messages du système quelque
	chose comme:</p><pre class="screen">umass0: at uhub0 port 1 (addr 2) disconnected
(da0:umass-sim0:0:0:0): lost device
(da0:umass-sim0:0:0:0): removing device entry
GEOM: destroy disk da0 dp=0xc2d74850
umass0: detached</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78048592"></a>19.5.3. Lectures supplémentaires</h3></div></div></div><p>En plus des sections <a class="link" href="#disks-adding" title="19.3. Ajouter des disques">Ajouter
	des disques</a> et <a class="link" href="#mount-unmount" title="4.6. Monter et démonter des systèmes de fichiers">Monter et
	démonter des systèmes de fichiers</a>, la
	lecture de différentes pages de manuel peut être
	également utile: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umass&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">umass</span>(4)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=camcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">camcontrol</span>(8)</span></a>, et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=usbdevs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">usbdevs</span>(8)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="creating-cds"></a>19.6. Création et utilisation de supports optiques
      (CDs)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mike</span> <span class="surname">Meyer</span></span>. </span></div></div></div><a id="idp78064208" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78065360"></a>19.6.1. Introduction</h3></div></div></div><p>Les CDs se différencient des disques conventionnels
	par de nombreuses caractéristiques.  Au départ, ils
	n'étaient pas inscriptible par l'utilisateur.  Ils sont
	conçu pour être lut de façon continue sans
	délai
	pour déplacer la tête de lecture entre les pistes.
	Ils sont également plus facile à déplacer
	entre systèmes que les supports de même taille
	à cette époque.</p><p>Les CDs possèdent des pistes, mais cela fait
	référence à un ensemble de données
	qui peuvent être lues de façon continue et non pas
	à une particularité physique du disque.  Pour produire
	un CD sous FreeBSD, il faut préparer les fichiers
	de données qui vont constituer les pistes sur le CD, puis
	écrire les pistes sur le CD.</p><a id="idp78066896" class="indexterm"></a><a id="idp78067408" class="indexterm"></a><p>Le système de fichiers ISO 9660 a été
	conçu pour gérer ces différences.
	Malheureusement il incorpore
	des limites du système de fichiers qui semblaient normale
	alors.  Mais heureusement, il fournit un mécanisme
	d'extension qui permet au CDs proprement gravés de passer
	outre ces limites tout en restant lisibles par les systèmes
	qui ne supportent pas ces extensions.</p><a id="idp78068944" class="indexterm"></a><p>Le logiciel <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>
	comprend <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, un programme que vous pouvez
	utiliser pour produire un fichier de données
	contenant un système de fichiers ISO 9660.  Il dispose
	d'options pour le support de diverses extensions, et est
	décrit ci-dessous.</p><a id="idp78071504" class="indexterm"></a><p>L'outil a utiliser pour graver un CD varie en fonction du
	type de graveur de CD: ATAPI ou autre.  Les graveurs ATAPI
	utilisent le programme <code class="command">burncd</code> qui fait partie
	du système de base.  Les graveurs SCSI ou USB devraient
	utiliser l'utilitaire <code class="command">cdrecord</code> du logiciel porté
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> port.
	Il est également possible d'utiliser
	  <code class="command">cdrecord</code>
	  et d'autres outils pour lecteurs SCSI sur du matériel
	  ATAPI avec le <a class="link" href="#atapicam" title="19.6.9. Utilisation du pilote de périphérique ATAPI/CAM">module
	  ATAPI/CAM</a>.</p><p>Si vous voulez un programme de gravure de CD avec une
	interface graphique, vous devriez jeter un oeil à
	<span class="application">X-CD-Roast</span> ou
	<span class="application">K3b</span>.  Ces outils sont disponibles
	sous une version pré-compilée ou à partir
	des logiciels portés <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/xcdroast/pkg-descr">sysutils/xcdroast</a> et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/k3b/pkg-descr">sysutils/k3b</a>.
	<span class="application">X-CD-Roast</span> et
	<span class="application">K3b</span> nécessitent le <a class="link" href="#atapicam" title="19.6.9. Utilisation du pilote de périphérique ATAPI/CAM">module ATAPI/CAM</a> avec des
	périphériques ATAPI.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mkisofs"></a>19.6.2. mkisofs</h3></div></div></div><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, qui fait partie du logiciel
	porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>,
	produit un système de fichiers ISO 9660 qui est une image de
	l'arborescence des répertoires dans un système de fichiers
	<span class="trademark">UNIX</span>®.  L'utilisation la plus simple est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -o fichierimage.iso /chemin/vers/arborescence</code></strong></pre><a id="idp78086480" class="indexterm"></a><p>Cette commande créera un
	<em class="replaceable"><code>fichierimage.iso</code></em> contenant un
	système de fichiers ISO 9660 qui est une copie de
	l'arborescence
	<em class="replaceable"><code>/chemin/vers/arborescence</code></em>.
	Durant le processus de création, les noms de fichiers
	seront modifiés de façon à respecter les
	limitations de la norme ISO 9660, et rejettera les fichiers ayant
	des noms non acceptables pour un système de fichiers
	ISO.</p><a id="idp78097104" class="indexterm"></a><a id="idp78098256" class="indexterm"></a><p>De nombreuses options sont disponibles pour passer
	outre ces restrictions.  En particulier, <code class="option">-R</code>
	qui autorise les extensions Rock Ridge communes aux systèmes
	<span class="trademark">UNIX</span>®, <code class="option">-J</code> qui active les extensions Joliet
	utilisées par les systèmes Microsoft, et
	<code class="option">-hfs</code> peut être utilisé pour créer
	des systèmes de fichiers HFS utilisés par <span class="trademark">Mac OS</span>®.</p><p>Pour des CDs qui sont destinés à n'être
	utilisé que sur des systèmes FreeBSD, l'option
	<code class="option">-U</code> peut être utilisée pour
	désactiver toutes les restrictions au niveau des noms de
	fichiers.  Quand elle est utilisée avec l'option
	<code class="option">-R</code>, cela produit une image de système de
	fichiers qui est identique à l'arborescence FreeBSD d'origine,
	cependant ce système de fichiers pourra violer la norme ISO
	9660 de nombreuses façon.</p><a id="idp78111440" class="indexterm"></a><p>La dernière option d'usage général est l'option
	<code class="option">-b</code>.  Elle est utilisée pour indiquer
	l'emplacement de l'image de démarrage à utiliser dans
	la création d'un CD démarrable <span class="quote">« <span class="quote">El Torito</span> »</span>.
	Cette option prend en argument le chemin vers une image
	de démarrage à partir de la racine de l'arborescence
	qui va être copiée sur le CD.  Par défaut,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> créé une image ISO dans un mode
	appelé <span class="quote">« <span class="quote">émulation de disquette</span> »</span>, et
	s'attend donc à une image de démarrage de 1200,
	1440 ou 2880 Ko en taille.  Certains chargeurs, comme
	celui utilisé par les disques d'installation de FreeBSD,
	n'utilisent pas ce mode d'émulation, dans ce cas
	l'option <code class="option">-no-emul-boot</code> devrait être
	utilisée.  Aussi, si
	<code class="filename">/tmp/monboot</code> contient un système FreeBSD
	avec une image de démarrage dans
	<code class="filename">/tmp/monboot/boot/cdboot</code>, vous pourrez
	produire l'image d'un système de fichiers ISO 9660 dans
	<code class="filename">/tmp/bootable.iso</code> de cette façon:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -R -no-emul-boot -b boot/cdboot -o /tmp/bootable.iso /tmp/monboot</code></strong></pre><p>Cela étant fait, si vous avez le pilote
	<code class="filename">md</code> configuré
	dans votre noyau, vous pouvez monter le système de fichiers
	avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /tmp/bootable.iso -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/md0 /mnt</code></strong></pre><p>A ce moment vous pouvez vérifier que
	<code class="filename">/mnt</code> et <code class="filename">/tmp/monboot</code>
	sont identique.</p><p>Il existe de nombreuses autres options que vous pouvez
	utiliser avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>
	pour régler finement son comportement.  En particulier: les
	modifications d'une organisation ISO 9660 et la création de
	disques Joliet et HFS.  Voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>
	pour plus de détails.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="burncd"></a>19.6.3. burncd</h3></div></div></div><a id="idp78128336" class="indexterm"></a><p>Si vous disposez d'un graveur de CD ATAPI, vous pouvez
	utiliser la commande <code class="command">burncd</code> pour graver
	une image ISO sur un CD.  <code class="command">burncd</code> fait
	partie du système de base, installé sous
	<code class="filename">/usr/sbin/burncd</code>.  Son utilisation est
	très simple, car il dispose de peu d'options:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f cddevice data fichierimage.iso fixate</code></strong></pre><p>Gravera une copie de
	<em class="replaceable"><code>fichierimage.iso</code></em> sur
	<em class="replaceable"><code>cddevice</code></em>.  Le périphérique par
	défaut est <code class="filename">/dev/acd0</code>.  Consultez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=burncd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">burncd</span>(8)</span></a> pour les options pour fixer la vitesse
	d'écriture, éjecter le CD après gravure, et graver
	des données audios.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cdrecord"></a>19.6.4. cdrecord</h3></div></div></div><p>Si vous n'avez pas de graveur de CD ATAPI, vous devrez
	utiliser <code class="command">cdrecord</code> pour graver vos CDs.
	<code class="command">cdrecord</code> ne fait pas partie du système de
	base; vous devez l'installer soit à partir du logiciel
	porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a>
	ou de la version pré-compilée appropriée.
	Des modifications du système de base peuvent provoquer
	le dysfonctionnement des versions binaires de ce programme,
	et donner lieu à une production de &#8220;dessous de
	bouteille&#8221;.  Vous devrez par conséquent soit
	mettre à jour le logiciel porté quand vous mettez
	à jour votre système, soit si vous <a class="link" href="#stable" title="24.4.2. Se synchroniser avec la version -STABLE de FreeBSD">suivez la branche -STABLE</a>, mettre
	à jour le logiciel porté lorsqu'une nouvelle
	version est disponible.</p><p>Bien que <code class="command">cdrecord</code> dispose de
	nombreuses options, l'usage de base est même plus simple
	qu'avec <code class="command">burncd</code>.  La gravure d'une image
	ISO 9660 se fait avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord dev=device fichierimage.iso</code></strong></pre><p>La partie délicate dans l'utilisation de
	<code class="command">cdrecord</code> est la recherche de la valeur à
	utiliser pour l'option <code class="option">dev</code>.  Pour déterminer
	le bon paramètre à utiliser, utilisez l'indicateur
	<code class="option">-scanbus</code> de <code class="command">cdrecord</code>,
	qui produira des résultats du type:</p><a id="idp78145616" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cdrecord -scanbus</code></strong>
Cdrecord-Clone 2.01 (i386-unknown-freebsd7.0) Copyright (C) 1995-2004 Jörg Schilling
Using libscg version 'schily-0.1'
scsibus0:
        0,0,0     0) 'SEAGATE ' 'ST39236LW       ' '0004' Disk
        0,1,0     1) 'SEAGATE ' 'ST39173W        ' '5958' Disk
        0,2,0     2) *
        0,3,0     3) 'iomega  ' 'jaz 1GB         ' 'J.86' Removable Disk
        0,4,0     4) 'NEC     ' 'CD-ROM DRIVE:466' '1.26' Removable CD-ROM
        0,5,0     5) *
        0,6,0     6) *
        0,7,0     7) *
scsibus1:
        1,0,0   100) *
        1,1,0   101) *
        1,2,0   102) *
        1,3,0   103) *
        1,4,0   104) *
        1,5,0   105) 'YAMAHA  ' 'CRW4260         ' '1.0q' Removable CD-ROM
        1,6,0   106) 'ARTEC   ' 'AM12S           ' '1.06' Scanner
        1,7,0   107) *</pre><p>Cela donne la valeur <code class="option">dev</code> appropriée
	pour les périphériques listés.
	Recherchez votre graveur de
	CD dans la liste, et utilisez les trois chiffres séparés
	par une virgule comme valeur pour <code class="option">dev</code>.
	Dans notre cas le périphérique de gravure est 1,5,0, donc
	l'entrée appropriée serait <code class="option">dev=1,5,0</code>.
	Il existe des manières plus simple de spécifier
	cette valeur, consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>
	pour des détails.
	C'est également la documentation à
	consulter pour des informations sur la gravure de pistes
	audios, le contrôle de la vitesse, et d'autres
	choses.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="duplicating-audiocds"></a>19.6.5. Dupliquer des CDs Audio</h3></div></div></div><p>Vous pouvez dupliquer un CD audio en effectuant
	l'extraction des données audio du CD vers un ensemble de
	fichiers, puis graver ces fichiers sur un CD vierge.  Le
	processus est légèrement différent entre
	lecteurs ATAPI et SCSI.</p><div class="procedure"><a id="idp78151504"></a><div class="procedure-title">Procédure 19.1. Lecteurs SCSI</div><ol class="procedure" type="1"><li class="step"><p>Utiliser <code class="command">cdda2wav</code> pour effectuer
	  l'extraction audio.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdda2wav -v255 -D2,0 -B -Owav</code></strong></pre></li><li class="step"><p>Utiliser <code class="command">cdrecord</code> pour graver les
	  fichiers <code class="filename">.wav</code>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cdrecord -v dev=2,0 -dao -useinfo  *.wav</code></strong></pre><p>Assurez-vous que <em class="replaceable"><code>2,0</code></em> est
	    choisi correctement, comme décrit dans
	    <a class="xref" href="#cdrecord" title="19.6.4. cdrecord">Section 19.6.4, « cdrecord »</a>.</p></li></ol></div><div class="procedure"><a id="idp78158032"></a><div class="procedure-title">Procédure 19.2. Lecteurs ATAPI</div><ol class="procedure" type="1"><li class="step"><p>Le pilote CD ATAPI rend disponible chaque piste
	    sous la forme
	    <code class="filename">/dev/acddtnn</code>,
	    où <em class="replaceable"><code>d</code></em> est le numéro de
	    lecteur, et <em class="replaceable"><code>nn</code></em> est le numéro
	    de la piste écrit sur deux digits décimaux.
	    Donc la première piste sur le premier
	    lecteur est <code class="filename">/dev/acd0t01</code>, la
	    seconde est <code class="filename">/dev/acd0t02</code>, la
	    troisième <code class="filename">/dev/acd0t03</code>, et
	    ainsi de suite.</p><p>Assurez-vous que les fichiers appropriés existent
	    sous <code class="filename">/dev</code>.  Si ces entrées
	    sont absentes, forcez le système à lire le
	    disque à nouveau:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0 of=/dev/null count=1</code></strong></pre></li><li class="step"><p>Extraire chaque piste en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a>.
	    Vous devez également préciser une taille de
	    bloc durant l'extraction des fichiers.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t01 of=piste1.cdr bs=2352</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0t02 of=piste2.cdr bs=2352</code></strong>
...
</pre></li><li class="step"><p>Graver les fichiers récupérés en utilisant
	    <code class="command">burncd</code>.  Vous devez spécifier que ce
	    sont des fichiers audio, et que <code class="command">burncd</code>
	    devra fermer le disque une fois terminé.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd0 audio piste1.cdr piste2.cdr ... fixate</code></strong></pre></li></ol></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="imaging-cd"></a>19.6.6. Dupliquer des CDs de données</h3></div></div></div><p>vous pouvez copier un CD de données vers un
	fichier image équivalent au fichier créé avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>, et
	vous pouvez l'utiliser pour dupliquer n'importe quel CD de
	données.  L'exemple présenté ici suppose
	que votre lecteur de CDROM est les périphérique
	<code class="filename">acd0</code>.  Remplacez-le avec le
	périphérique correct.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/acd0 of=fichier.iso bs=2048</code></strong></pre><p>Vous disposez maintenant d'une image, vous pouvez la
	graver comme décrit plus haut.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mounting-cd"></a>19.6.7. Utiliser des CDs de données</h3></div></div></div><p>Maintenant que vous avez créé une CDROM de
	données standard, vous voulez probablement le monter et lire
	les données présentes.  Par défaut,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> suppose que le système de fichier à
	monter est de type <code class="literal">UFS</code>.  Si vous essayez
	quelque chose comme:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/cd0 /mnt</code></strong></pre><p>vous obtiendrez une erreur du type <span class="errorname">Incorrect
	super block</span>, et pas de montage.  Le CDROM n'est
	pas un système de fichiers de type <code class="literal">UFS</code>,
	aussi toute tentative de montage de ce type échouera.
	Vous devez juste préciser à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> que le
	système de fichiers est du type <code class="literal">ISO9660</code>, et
	tout fonctionnera.  Cela se fait en spécifiant l'option
	<code class="option">-t cd9660</code> option à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.
	Par exemple, si vous désirez monter un CDROM, contenu
	dans le lecteur <code class="filename">/dev/cd0</code>, sous
	<code class="filename">/mnt</code>, vous devrez exécuter:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0 /mnt</code></strong></pre><p>Notez que votre nom de lecteur
	(<code class="filename">/dev/cd0</code> dans cet exemple) pourra
	être différent, en fonction de l'interface
	utilisée par votre lecteur de CDROM.  De plus l'option
	<code class="option">-t cd9660</code> ne fait qu'exécuter la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a>.  L'exemple précédent pourrait
	être réduit à:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount_cd9660 /dev/cd0 /mnt</code></strong></pre><p>Vous pouvez généralement utiliser
	des CDROMs de données de n'importe quelle provenance de
	cette façon.  Les disques avec certaines extensions
	ISO 9660 pourront se comporter de façon étrange,
	cependant.  Par exemple, les disques Joliet conservent
	tous les noms de fichiers en utilisant des caractères
	Unicodes sur 2 octets.  Le noyau FreeBSD ne comprend pas
	l'Unicode, mais le pilote CD9660 de FreeBSD est en mesure de
	convertir au vol les caractères Unicode.  Si des
	caractères non-anglais apparaissent sous la forme de
	points d'interrogation, vous devrez préciser la table
	de caractères locale que vous utilisez avec l'option
	<code class="option">-C</code>.  Pour plus d'information, consultez la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_cd9660&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_cd9660</span>(8)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour pouvoir effectuer cette conversion de
	  caractères à l'aide de l'option
	  <code class="option">-C</code>, le module
	  <code class="filename">cd9660_iconv.ko</code> devra être
	  chargé.  Cela peut être fait soit en ajoutant
	  au fichier <code class="filename">loader.conf</code> la ligne:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">cd9660_iconv_load="YES"</pre><p xmlns="http://www.w3.org/1999/xhtml">puis en redémarrant la machine, soit en chargeant
	  directement le module avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a>.</p></div><p>Occasionnellement, vous pourrez obtenir le message
	<span class="errorname">Device not configured</span>
	(périphérique non configuré)
	lors d'une tentative de montage
	d'un CDROM.  Cela veut généralement dire que le
	lecteur de CDROM pense qu'il n'y a pas de disque dans le
	lecteur, ou que le lecteur n'est pas visible sur le bus.
	Cela peut demander plusieurs secondes à un lecteur de
	CDROM de s'apercevoir qu'il a été chargé,
	soyez donc patient.</p><p>Parfois, un lecteur de CDROM SCSI peut être manquant
	parce qu'il n'a pas eu suffisamment de temps pour répondre
	à la réinitialisation du bus.  Si vous avez un lecteur
	de CDROM SCSI, veuillez ajouter l'option suivante à
	la configuration de votre noyau et <a class="link" href="#kernelconfig-building" title="9.3. Compiler et installer un noyau sur mesure">recompiler votre
	noyau</a>.</p><pre class="programlisting">options SCSI_DELAY=15000</pre><p>Ceci demande à votre bus SCSI une pause de 15 seconds
	au démarrage, pour donner à votre lecteur de CDROM une chance
	de répondre la réinitialisation du bus.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="rawdata-cd"></a>19.6.8. Graver des CDs de données brutes</h3></div></div></div><p>Il est possible de graver directement un fichier sur CD,
	sans créer de système de fichiers ISO 9660.
	Certaines personnes le font dans le cas de sauvegardes.
	Cela est beaucoup plus rapide que de graver un CD
	standard:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>burncd -f /dev/acd1 -s 12 data archive.tar.gz fixate</code></strong></pre><p>Afin de récupérer les données gravées
	sur un tel CD, vous devez lire les données à
	partir du fichier spécial de périphériques
	en mode caractère:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar xzvf /dev/acd1</code></strong></pre><p>Vous ne pouvez monter ce disque comme vous le feriez avec
	un CDROM classique.  Un tel CDROM ne pourra être lu
	sous un autre système d'exploitation en dehors de FreeBSD.
	Si vous voulez être en mesure de monter le CD, ou
	d'en partager les données avec un autre système
	d'exploitation, vous devez utiliser
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> comme
	décrit plus haut.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="atapicam"></a>19.6.9. Utilisation du pilote de périphérique
	ATAPI/CAM</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp78216528" class="indexterm"></a><p>Ce pilote permet d'accéder aux périphériques
	ATAPI (lecteurs de CD-ROM, graveurs CD-RW, lecteur de DVD etc...)
	par l'intermédiaire du sous-système SCSI, et
	autorise l'utilisation d'applications comme <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrdao/pkg-descr">sysutils/cdrdao</a> ou
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a>.</p><p>Pour utiliser ce pilote, vous devrez ajouter la ligne
	suivante au fichier
	<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">atapicam_load="YES"</pre><p>puis redémarrez votre machine.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous préférez compiler en statique dans le noyau
	  le support <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a>, vous devrez ajouter au fichier
	  de configuration du noyau la ligne:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device atapicam</pre><p xmlns="http://www.w3.org/1999/xhtml">Vous avez également besoin des lignes suivantes dans
	votre fichier de configuration:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">device ata
device scbus
device cd
device pass</pre><p xmlns="http://www.w3.org/1999/xhtml">qui devraient être déjà
	présentes.  Puis recompilez, installez votre nouveau
	noyau, et enfin redémarrez votre machine.</p></div><p>Lors du démarrage, votre
	graveur devrait apparaître, comme suit:</p><pre class="screen">acd0: CD-RW &lt;MATSHITA CD-RW/DVD-ROM UJDA740&gt; at ata1-master PIO4
cd0 at ata1 bus 0 target 0 lun 0
cd0: &lt;MATSHITA CDRW/DVD UJDA740 1.00&gt; Removable CD-ROM SCSI-0 device
cd0: 16.000MB/s transfers
cd0: Attempt to query device size failed: NOT READY, Medium not present - tray closed</pre><p>Le lecteur doit être accessible via le nom de
	périphérique <code class="filename">/dev/cd0</code>,
	par exemple pour monter un CD-ROM sous
	<code class="filename">/mnt</code>, tapez juste ce qui suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t cd9660 /dev/cd0 /mnt</code></strong></pre><p>En tant que <code class="systemitem">root</code>, vous pouvez
	exécuter la commande suivante pour obtenir l'adresse SCSI du
	graveur:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>camcontrol devlist</code></strong>
&lt;MATSHITA CDRW/DVD UJDA740 1.00&gt;   at scbus1 target 0 lun 0 (pass0,cd0)</pre><p>Donc <code class="literal">1,0,0</code> sera l'adresse SCSI à
	utiliser avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cdrecord&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cdrecord</span>(1)</span></a> et tout autre application
	SCSI.</p><p>Pour plus d'information concernant ATAPI/CAM et le
	système SCSI, consultez les pages de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atapicam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">atapicam</span>(4)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cam&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">cam</span>(4)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="creating-dvds"></a>19.7. Création et utilisation de supports optiques
      (DVDs)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div><div><span class="authorgroup">Avec l'aide de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andy</span> <span class="surname">Polyakov</span></span>. </span></div></div></div><a id="idp78286416" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78287568"></a>19.7.1. Introduction</h3></div></div></div><p>Comparé au CD, le DVD est la
	génération technologique suivante de support
	optique de stockage de données.  Un DVD peut contenir
	plus de données qu'un CD et est de nos jour le standard
	pour la publication de vidéos.</p><p>Cinq formats physiques enregistrables peuvent être
	définis pour ce que nous appellerons un DVD
	enregistrable:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DVD-R: Ce fut le premier format DVD enregistrable
	    disponible.  La norme DVD-R est définie par le
	    <a class="link" href="http://www.dvdforum.com/forum.shtml" target="_top">Forum
	    DVD</a>.  Ce format n'est pas
	    réinscriptible.</p></li><li class="listitem"><p>DVD-RW: C'est la version réinscriptible du
	    standard DVD-R.  Un DVD-RW peut supporter environ 1000
	    réécritures.</p></li><li class="listitem"><p>DVD-RAM: C'est également un format
	    réinscriptible supporté par le Forum DVD.
	    Un DVD-RAM peut être vu comme un disque dur
	    extractible.  Cependant, ce support n'est pas compatible
	    avec la plupart des lecteurs DVD-ROM et DVD-Vidéo;
	    seuls quelques graveurs de DVDs supportent le
	    DVD-RAM.  Consultez la <a class="xref" href="#creating-dvd-ram" title="19.7.9. Utiliser un disque DVD-RAM">Section 19.7.9, « Utiliser un disque DVD-RAM »</a>
	    pour plus d'information sur l'utilisation d'un
	    DVD-RAM.</p></li><li class="listitem"><p>DVD+RW: C'est un format réinscriptible
	    défini par l' <a class="link" href="http://www.dvdrw.com/" target="_top">Alliance DVD+RW</a>.  Un
	    DVD+RW supporte environ 1000
	    réécritures.</p></li><li class="listitem"><p>DVD+R: Ce format est la version
	    non-réinscriptible du format DVD+RW.</p></li></ul></div><p>Un DVD enregistrable simple couche peut contenir
	jusqu'à 4 700 000 000 octets ce qui
	équivaut en fait à 4.38 Go ou 4485 Mo
	(1 kilo-octet représente 1024 octets).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Une différence doit être faite entre un
	  support physique et son application.  Par exemple un
	  DVD-Vidéo est une organisation de fichiers
	  particulière qui peut être écrite sur n'importe
	  quel type de DVD enregistrable: DVD-R, DVD+R, DVD-RW etc.
	  Avant de choisir le type de support, vous devez vous assurer
	  que le graveur et le lecteur de DVD-Vidéo (lecteur de
	  salon ou un lecteur de DVD-ROM sur un micro-ordinateur) sont
	  compatibles avec le support.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78296144"></a>19.7.2. Configuration</h3></div></div></div><p>Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> sera utilisé pour
	effectuer la gravure des DVDs.  Cette commande fait partie des
	utilitaires <span class="application">dvd+rw-tools</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/dvd+rw-tools/pkg-descr">sysutils/dvd+rw-tools</a>).  Les outils
	<span class="application">dvd+rw-tools</span> supportent l'ensemble
	des supports DVD.</p><p>Ces utilitaires utilisent le sous-système SCSI pour
	accéder aux périphériques, par
	conséquent le <a class="link" href="#atapicam" title="19.6.9. Utilisation du pilote de périphérique ATAPI/CAM">support
	ATAPI/CAM</a> doit être ajouté à votre
	noyau.  Si votre graveur utilise l'interface USB, cet ajout
	est inutile et vous devriez lire la <a class="xref" href="#usb-disks" title="19.5. Périphériques de stockage USB">Section 19.5, « Périphériques de stockage USB »</a>
	sur la configuration de périphériques
	USB.</p><p>Vous devez également activer l'accès aux
	périphériques ATAPI par DMA, cela peut
	être fait en ajoutant la ligne suivante au fichier
	<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">hw.ata.atapi_dma="1"</pre><p>Avant de tenter d'utiliser les utilitaires
	<span class="application">dvd+rw-tools</span> vous devriez consulter
	les <a class="link" href="http://fy.chalmers.se/~appro/linux/DVD+RW/hcn.html" target="_top">notes
	de compatibilité matérielle des
	dvd+rw-tools</a> pour des informations concernant votre
	graveur de DVDs.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous désirez une interface graphique, vous
	  devriez jeter un oeil à <span class="application">K3b</span>
	  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/k3b/pkg-descr">sysutils/k3b</a>) qui offre
	  une interface conviviale à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> et
	  à d'autres outils de gravure.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78313808"></a>19.7.3. Graver des DVDs de données</h3></div></div></div><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> est une interface à
	<a class="link" href="#mkisofs" title="19.6.2. mkisofs">mkisofs</a>, elle invoquera
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> pour la création du système de
	fichiers et effectuera la gravure des données sur le
	DVD.  Cela signifie que vous n'avez pas besoin de créer
	une image des données avant le processus de
	gravure.</p><p>Pour écrire les données du répertoire
	<code class="filename">/path/to/data</code>, utilisez
	la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -dvd-compat -Z /dev/cd0 -J -R /path/to/data</code></strong></pre><p>Les options <code class="option">-J -R</code> sont passées
	à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> pour la création du
	système de fichiers (dans le cas présent: un
	système de fichiers ISO 9660 avec les extensions Joliet
	et Rock Ridge), consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>
	pour plus de détails.</p><p>L'option <code class="option">-Z</code> est utilisée pour la
	session d'écriture initiale dans tous les cas:
	multi-sessions ou pas.  Le périphérique
	correspondant au graveur, <em class="replaceable"><code>/dev/cd0</code></em>,
	doit être adapté en fonction de votre
	configuration.  Le paramètre
	<code class="option">-dvd-compat</code> provoquera la fermeture du
	disque, rien ne pourra être écrit à la
	suite de l'enregistrement.  En retour cela devrait donner lieu à
	une plus grande compatibilité avec les lecteurs de
	DVD-ROMs.</p><p>Il est également possible de graver une image de
	système de fichiers, par exemple pour graver l'image
	<em class="replaceable"><code>imagefile.iso</code></em>, nous
	lancerons:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -dvd-compat -Z /dev/cd0=imagefile.iso</code></strong></pre><p>La vitesse d'écriture devrait être
	détectée et positionnée automatiquement
	en fonction du support et du graveur utilisé.  Si vous
	voulez forcer la vitesse de gravure, utilisez le
	paramètre <code class="option">-speed=</code>.  Pour plus
	d'informations, lisez la page de manuel de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78326608"></a>19.7.4. Graver un DVD-Vidéo</h3></div></div></div><a id="idp78327248" class="indexterm"></a><p>Un DVD-Vidéo est un système de fichiers
	particulier basé sur les spécifications IS0 9660
	et micro-UDF (M-UDF).  Le DVD-Vidéo présente
	également une arborescence de données
	spécifique, c'est la raison pour laquelle vous devez
	utiliser un programme particulier tel que <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/multimedia/dvdauthor/pkg-descr">multimedia/dvdauthor</a> pour créer
	le DVD.</p><p>Si vous disposez déjà d'une image du
	système de fichiers du DVD-Vidéo, gravez-la de
	la même façon que pour une autre image,
	reportez-vous aux sections précédentes pour un
	exemple.  Si vous avez réalisé vous-même
	l'arborescence du DVD et que le résultat est dans, par
	exemple, le répertoire <code class="filename">/path/to/video</code>, la commande
	suivante devrait être utilisée pour graver le
	DVD-Vidéo:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0 -dvd-video /path/to/video</code></strong></pre><p>L'option <code class="option">-dvd-video</code> sera passée
	à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> et lui demandera de créer un
	système de fichiers de DVD-Vidéo.  De plus,
	l'option <code class="option">-dvd-video</code> implique l'option
	<code class="option">-dvd-compat</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78342608"></a>19.7.5. Utiliser un DVD+RW</h3></div></div></div><a id="idp78343248" class="indexterm"></a><p>Contrairement à un CD-RW, un DVD+RW vierge doit
	être formaté avant la première
	utilisation.  Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> s'en chargera
	automatiquement quand cela sera nécessaire, ce qui est la
	méthode <span class="emphasis"><em>recommandée</em></span>.  Cependant vous
	pouvez utiliser la commande <code class="command">dvd+rw-format</code>
	pour formater le DVD+RW:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format /dev/cd0</code></strong></pre><p>Vous devez effectuer cette opération qu'une seule
	fois, gardez à l'esprit que seuls des DVD+RW vierges
	doivent être formatés.  Ensuite vous pouvez
	graver le DVD+RW de la manière vue dans les sections
	précédentes.</p><p>Si vous voulez graver de nouvelles données (graver
	un système de fichiers totalement nouveau et pas juste
	ajouter des données) sur un DVD+RW, vous n'avez pas
	besoin de l'effacer, vous avez juste à
	récrire sur l'enregistrement
	précédent (en effectuant une nouvelle session
	initiale), comme ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0 -J -R /path/to/newdata</code></strong></pre><p>Le format DVD+RW offre la possibilité d'ajouter
	facilement des données à un enregistrement
	précédent.  L'opération consiste à
	fusionner une nouvelle session avec la session existante, ceci
	n'est pas une gravure multisession, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>
	<span class="emphasis"><em>augmentera</em></span> le système de fichiers
	ISO 9660 présent sur le disque.</p><p>Par exemple, si nous voulons ajouter des données
	à notre DVD+RW précédent, nous devons
	utiliser cela:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -M /dev/cd0 -J -R /path/to/nextdata</code></strong></pre><p>Les mêmes options de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a>
	utilisées lors de la gravure de la session initiale
	doivent être à nouveau utilisées lors des
	écritures ultérieures.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez ajouter l'option
	  <code class="option">-dvd-compat</code> si vous désirez une
	  meilleure compatibilité avec les lecteurs de DVD-ROM.
	  Dans le cas d'un DVD+RW cela ne vous empêchera pas de
	  rajouter des données par la suite.</p></div><p>Si pour une quelconque raison vous voulez vraiment
	effacer le disque, faites ce qui suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0=/dev/zero</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78360144"></a>19.7.6. Utiliser un DVD-RW</h3></div></div></div><a id="idp78360784" class="indexterm"></a><p>Un DVD-RW accepte deux formats de disque: le format
	séquentiel incrémental et le format
	&#8220;restricted overwrite&#8221;.  Par défaut les
	disques DVD-RW sont fournis sous le format
	séquentiel.</p><p>Un DVD-RW vierge peut être directement gravé
	sans le besoin d'une opération de formatage
	préalable, cependant un DVD-RW non-vierge au format
	séquentiel doit être effacé avant de
	pouvoir y écrire une nouvelle session initiale.</p><p>Pour effacer un DVD-RW en mode séquentiel,
	exécutez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format -blank=full /dev/cd0</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Une opération d'effacement complète
	  (<code class="option">-blank=full</code>) prendra environ une heure avec
	  un support 1x.  Un effacement rapide peut être
	  effectué en utilisant l'option <code class="option">-blank</code>
	  si le DVD-RW est destiné à être
	  enregistré suivant le mode d'écriture
	  Disk-At-Once (DAO).  Pour écrire le DVD-RW suivant le
	  mode DAO, utilisez la commande:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -use-the-force-luke=dao -Z /dev/cd0=imagefile.iso</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">L'option <code class="option">-use-the-force-luke=dao</code> ne
	  devrait pas être nécessaire puisque
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a> tente de détecter les supports
	  effacés rapidement et engage une écriture
	  DAO.</p><p xmlns="http://www.w3.org/1999/xhtml">En fait le mode &#8220;restricted overwrite&#8221;
	  devrait être utilisé avec tout DVD-RW, ce
	  format est plus flexible que le format séquentiel
	  incrémental par défaut.</p></div><p>Pour écrire des données sur un DVD-RW en
	mode séquentiel, utilisez les mêmes instructions
	que pour tout autre format de DVD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -Z /dev/cd0 -J -R /path/to/data</code></strong></pre><p>Si vous voulez ajouter des données à votre
	enregistrement précédent, vous devrez utiliser
	la commande <code class="option">-M</code> de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>.
	Cependant, si vous effectuez un ajout de données sur un
	DVD-RW en mode séquentiel, une nouvelle session sera
	créée sur le disque avec pour résultat de
	donner naissance à un disque multi-sessions.</p><p>Un DVD-RW dans le format &#8220;restricted
	overwrite&#8221; n'a pas besoin d'être effacé
	avant une nouvelle session initiale, vous avez juste à
	récrire sur le disque avec l'option
	<code class="option">-Z</code>, ceci est similaire à un DVD+RW.
	Il est également possible d'augmenter un système
	de fichiers ISO 9660 existant écrit sur le disque de la
	même manière que pour un DVD+RW en utilisant
	l'option <code class="option">-M</code>.  Le résultat sera un DVD
	avec une seule session.</p><p>Pour faire passer un DVD-RW dans le format
	&#8220;restricted overwrite&#8221;, la commande suivante doit
	être utilisée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format /dev/cd0</code></strong></pre><p>Pour revenir au format séquentiel, utilisez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dvd+rw-format -blank=full /dev/cd0</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78379600"></a>19.7.7. Multi-sessions</h3></div></div></div><p>Très peu de lecteurs de DVD-ROMs
	supportent les DVDs multi-sessions, ils ne
	liront, dans le meilleur des cas, que la première
	session.  Les DVD+R, DVD-R et DVD-RW en mode séquentiel
	peuvent accepter de multiples sessions, la notion de multiples
	sessions n'existe pas pour les formats DVD+RW et DVD-RW en
	mode &#8220;restricted overwrite&#8221;.</p><p>Utiliser la commande suivante après une session
	initiale (non fermée) sur un DVD+R, DVD-R, ou DVD-RW en
	mode séquentiel, ajoutera une nouvelle session sur le
	disque:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>growisofs -M /dev/cd0 -J -R /path/to/nextdata</code></strong></pre><p>L'utilisation de cette ligne de commande avec un DVD+RW ou
	un DVD-RW en mode &#8220;restricted overwrite&#8221; aura pour
	effet d'ajouter les données en fusionnant la nouvelle session
	avec celle déjà présente.  Le résultat sera un disque
	mono-session.  C'est la méthode utilisée pour ajouter des
	données sur ces médias après une écriture initiale.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">De l'espace sur le médium est utilisé
	  entre chaque session pour la fin et le début des
	  sessions.  Par conséquent, tout ajout de données
	  devrait se faire suivant une quantité importante de
	  données pour optimiser l'espace sur le disque.  Le
	  nombre de sessions est limité à 154 pour un
	  DVD+R, environ 2000 pour un DVD-R, et 127 pour un DVD+R
	  double couche.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78383312"></a>19.7.8. Pour plus d'informations</h3></div></div></div><p>Pour obtenir plus d'informations sur un DVD, la commande
	<code class="command">dvd+rw-mediainfo
	/dev/cd0</code> peut être
	exécutée avec le disque dans le lecteur.</p><p>Plus d'informations sur les utilitaires
	<span class="application">dvd+rw-tools</span> peuvent être
	trouvées dans la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=growisofs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">growisofs</span>(1)</span></a>,
	sur le <a class="link" href="http://fy.chalmers.se/~appro/linux/DVD+RW/" target="_top">site Web de
	dvd+rw-tools</a> et dans les archives de la <a class="link" href="http://lists.debian.org/cdwrite/" target="_top">liste de diffusion
	cdwrite</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La sortie de la commande
	  <code class="command">dvd+rw-mediainfo</code> sur le résultat
	  de la gravure ou le disque posant problème est
	  obligatoire avec tout rapport de problème.  Sans
	  cette sortie, il sera quasiment impossible de vous
	  aider.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="creating-dvd-ram"></a>19.7.9. Utiliser un disque DVD-RAM</h3></div></div></div><a id="idp78389456" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78394832"></a>19.7.9.1. Configuration</h4></div></div></div><p>Les graveurs de DVD-RAM sont fournis soit avec une
	  interface SCSI soit une interface ATAPI.  Dans le cas des
	  périphériques ATAPI, l'accès DMA doit
	  être activé, cela peut être fait en
	  ajoutant la ligne suivante au fichier
	  <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">hw.ata.atapi_dma="1"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78396752"></a>19.7.9.2. Préparer le disque</h4></div></div></div><p>Comme précisé dans l'introduction de cette
	  section, un DVD-RAM peut être vu comme un disque dur
	  extractible.  Comme tout autre disque dur le DVD-RAM doit
	  être <span class="quote">« <span class="quote">préparé</span> »</span> avant la
	  première utilisation.  Dans l'exemple,
	  l'intégralité de l'espace sur le disque sera
	  utilisé par un système de fichiers UFS2
	  standard:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/dev/acd0 count=2</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -Bw acd0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/acd0</code></strong></pre><p>Le périphérique DVD
	  <code class="filename">acd0</code> doit être modifié
	  en fonction de la configuration.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78401616"></a>19.7.9.3. Utiliser le disque</h4></div></div></div><p>Une fois les opérations précédentes
	  effectuées sur le DVD-RAM, il peut être
	  monté comme un disque dur classique:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/acd0 /mnt</code></strong></pre><p>Après cela, on pourra lire et écrire sur
	  le DVD-RAM.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="floppies"></a>19.8. Création et utilisation de disquettes</h2></div><div><span class="authorgroup">Travail original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Julio</span> <span class="surname">Merino</span></span>. </span></div><div><span class="authorgroup">Réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Martin</span> <span class="surname">Karlsson</span></span>. </span></div></div></div><p>Sauvegarder des données sur disquette est
      parfois utile, par exemple quand on a pas d'autre
      support de stockage amovible de disponible ou quand on
      doit transférer de petites quantités de
      données sur un autre ordinateur.</p><p>Cette section expliquera comment utiliser des disquettes
      sous FreeBSD.  Elle couvrira principalement le formatage et
      l'utilisation de disquettes DOS de 3.5pouces, mais les
      concepts exposés sont identiques pour d'autres formats
      de disquettes.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78413520"></a>19.8.1. Formater des disquettes</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78414160"></a>19.8.1.1. Le périphérique</h4></div></div></div><p>On accède aux disquettes par l'intermédiaire
	  d'entrées dans <code class="filename">/dev</code>, comme
	  pour tout autre périphérique.  Pour
	  accéder directement à la disquette, utilisez
	  simplement
	  <code class="filename">/dev/fdN</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78416208"></a>19.8.1.2. Le formatage</h4></div></div></div><p>Une disquette doit subir un formatage bas niveau avant
	  d'être utilisable.  Il est généralement
	  réalisé par le constructeur, mais le formatage est
	  une bonne manière de contrôler
	  l'intégrité du support.  Bien qu'il soit possible de
	  forcer une plus grande (ou plus petite) capacité,
	  1440Ko est celle pour laquelle sont conçues la plupart
	  des disquettes.</p><p>Pour effectuer un formatage bas niveau d'une disquette
	  vous devez utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdformat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fdformat</span>(1)</span></a>.  L'utilitaire
	  attend le nom du périphérique en argument.</p><p>Notez tout message d'erreur, sachant que cela peut aider
	  à déterminer si la disquette est bonne ou
	  défectueuse.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78418896"></a>19.8.1.2.1. Formatage des disquettes</h5></div></div></div><p>Utilisez un des périphériques
	    <code class="filename">/dev/fdN.size</code>,
	    pour formater la disquette.  Insérez une disquette
	    3.5pouces dans votre lecteur et tapez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/sbin/fdformat -f 1440 /dev/fd0</code></strong></pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78421584"></a>19.8.2. Le label de disque</h3></div></div></div><p>Après le formatage bas niveau du disque, vous
	devrez y placer un label de disque.  Ce label sera
	détruit plus tard, mais il est nécessaire au
	système pour déterminer par la suite la taille
	et la géométrie du disque.</p><p>Le nouveau label de disque prendra l'intégralité
	du disque, et contiendra l'information correcte sur la
	géométrie de la disquette.
	Les différentes géométries possibles pour le label
	sont listées dans
	<code class="filename">/etc/disktab</code>.</p><p>Vous pouvez maintenant exécuter <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>
        de la façon suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/bsdlabel -B -w /dev/fd0 fd1440</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78425680"></a>19.8.3. Le système de fichiers</h3></div></div></div><p>La disquette est maintenant fin prête pour un
	formatage haut niveau.  Cette opération placera un nouveau
	système de fichiers sur la disquette, qui permettra
	à FreeBSD d'écrire et de lire sur le disque.
	Après la création du nouveau système
	de fichiers, le label disque est détruit, aussi
	si vous désirez reformater le disque, vous devrez
	recréer le label de disque à nouveau.</p><p>Le système de fichiers de la disquette peut
	soit être de l'UFS soit utiliser le système FAT.
	Le système FAT est généralement un meilleur choix
	pour les disquettes.</p><p>Pour placer un nouveau système de fichier sur la
	disquette faites ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/newfs_msdos /dev/fd0</code></strong></pre><p>La disquette est maintenant prête à
	être utilisée.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78428880"></a>19.8.4. Utilisation de la disquette</h3></div></div></div><p>Pour utiliser la disquette, montez-la avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a>.  On peut également utiliser
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/emulators/mtools/pkg-descr">emulators/mtools</a> du
	catalogue des logiciels portés.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backups-tapebackups"></a>19.9. Créer et utiliser les bandes magnétiques</h2></div></div></div><a id="idp78448592" class="indexterm"></a><p>Les principaux types de bandes sont les 4mm, 8mm, QIC, les
      mini-cartouches et les DLTs.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-4mm"></a>19.9.1. Bandes 4mm (DDS: &#8220;Digital Data Storage&#8221;)</h3></div></div></div><a id="idp78450256" class="indexterm"></a><a id="idp78451408" class="indexterm"></a><p>Les bandes 4mm sont en train de remplacer les bandes QIC
	comme le format usuel de sauvegarde pour les stations de
	travail.  Cette tendance s'est accélérée
	quand Conner a racheté Archive, un des leaders de la
	fabrication des lecteurs QIC, et a arrêté la
	production de ces derniers.  Les lecteurs 4mm sont petits et
	silencieux mais n'ont pas la réputation de fiabilité des
	lecteurs 8mm.  Les cartouches sont moins coûteuse et plus
	petites (3 x 2 x 0.5 pouces, 76 x 51 x 12 mm) que les
	cartouches 8mm.  Les cartouches 4mm, tout comme les 8mm, ont
	une durée de vie faible car elles utilisent un
	procédé de lecture/écriture en
	hélice.</p><p>Le débit de ces lecteurs va de ~150 Ko/s
	à ~500 Ko/s au maximum.  Leur capacité de varie de
	1.3 Go à 2.0 Go.  La compression matérielle,
	disponible sur la plupart des lecteurs, double
	approximativement leur capacité.
	Les unités multi-lecteurs peuvent avoir jusqu'à 6 lecteurs
	dans une seule tour avec changement automatique de bande.  La
	capacité totale atteint 240 Go.</p><p>Le standard DDS-3 supporte maintenant des capacités de
	bande jusqu'à 12 Go (ou 24 Go
	compressés).</p><p>Les lecteurs 4mm, comme les lecteurs 8mm, utilisent un
	procédé de lecture/écriture en hélice.  Tous
	les avantages et les inconvénients de ce procédé
	s'appliquent aux deux types de lecteurs.</p><p>Les bandes doivent être changées après
	2000 utilisations ou 100 sauvegardes complètes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-8mm"></a>19.9.2. Bandes 8mm (Exabyte)</h3></div></div></div><a id="idp78455504" class="indexterm"></a><p>Les unités de bandes 8mm sont les lecteurs de bandes
	SCSI les plus courant; c'est le meilleur choix de bandes
	amovibles.  Presque chaque site dispose d'une unité Exabyte
	2 Go 8mm.  Les lecteurs 8mm sont fiables, pratiques et
	silencieux.  Les cartouches sont bon marché et d'encombrement
	faible (4.8 x 3.3 x 0.6 pouces; 122 x 84 x 15 mm).  Un des
	inconvénients de la bande 8mm est la durée de
	vie relativement courte des bandes et des têtes de lectures
	en raison de la grande vitesse de défilement de la bande
	devant les têtes.</p><p>Leur débit va de ~250 Ko/s à ~500 Ko/s.
	Leur capacité commence à 300 Mo jusqu'à
	7 Go.
	La compression matérielle, disponible sur la plupart des
	lecteurs, double approximativement la capacité.  Ces lecteurs
	sont disponibles sous forme d'unité simple ou multiple
	accueillant 6 lecteurs et 120 bandes.  Les bandes sont
	changées automatiquement par l'unité.  Ils peuvent
	gérer une capacité de stockage de plus de
	840 Go.</p><p>Le lecteur Exabyte &#8220;Mammoth&#8221; supporte
	12 Go sur une seule bande (24 Go compressé)
	et coûte approximativement le double d'un lecteur
	classique.</p><p>L'enregistrement des données sur la bande utilise
	un procédé en hélice, les têtes
	sont positionnées en biais par rapport à la bande
	(environ 6 degrés).  La bande fait un angle de 270
	degrés avec le cylindre sur lequel se trouvent les têtes.
	Ce cylindre tourne en même temps que la bande défile.  Il
	en résulte donc une grande densité de données
	et des pistes très serrées qui vont de biais
	d'un bord à l'autre de la bande.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-qic"></a>19.9.3. QIC</h3></div></div></div><a id="idp78459088" class="indexterm"></a><p>Les bandes et les lecteurs QIC-150 sont, peut-être, le
	format le plus courant.  Les lecteurs QIC sont les moins
	chers des supports de sauvegarde &#8220;sérieux&#8221;.
	Leur inconvénient par contre est le coût des bandes.
	Les bandes QIC sont chères comparées aux bandes 8mm ou
	4mm, jusqu'à 5 fois le coût au Go.  Mais, si une
	demi-douzaine de bandes vous suffit, le format QIC peut
	être le bon choix.  QIC est le format le
	<span class="emphasis"><em>plus</em></span> répandu.  Chaque site dispose d'un
	lecteur QIC d'une densité ou d'une autre.  C'est là
	la difficulté, il existe de nombreuses densités pour
	des bandes physiquement semblables (parfois même identiques).
	Les lecteurs QIC ne sont pas silencieux.  Ces lecteurs se
	positionnent bruyamment avant d'enregistrer des données et
	ont les entend clairement lors de lecture, écriture ou
	recherche.  Les bandes QIC sont volumineuses: 6 x 4 x 0.7
	pouces (152 x 102 x 17 mm).</p><p>Leur débit va de ~150 Ko/s à ~500 Ko/s.
	Leur capacité varie de 40 Mo à 15 Go.  La
	compression matérielle est disponible sur de nombreux lecteurs
	récents.  Les lecteurs QIC sont de moins en moins utilisés,
	ils sont supplantés par les lecteurs DAT.</p><p>Les données sont enregistrées sur des pistes
	sur la bande.
	Les pistes sont parallèles à la bande et vont d'une
	extrémité à l'autre.  Le nombre de piste, et
	par conséquent la largeur des pistes, varie avec la
	capacité de la bande.  La plupart des nouveaux lecteurs
	fournissent au moins une compatibilité descendante en
	lecture (mais aussi en écriture).  Le format QIC a une
	bonne réputation de sécurité des données
	(la mécanique est plus simple et plus robuste que les lecteurs
	à système en hélice).</p><p>Les bandes devraient être changée
	après 5000 sauvegardes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-tapebackups-dlt"></a>19.9.4. DLT</h3></div></div></div><a id="idp78463184" class="indexterm"></a><p>Les DLT ont le taux de transfert le plus élevé
	de tous les types de lecteurs décrits ici.  La bande
	d'1/2" (12.5mm) est contenue dans une seule cartouche
	(4 x 4 x 1 pouces; 100 x 100 x 25 mm).  La cartouche est
	munie d'une trappe basculante le long d'un côté de la
	cartouche.  Le lecteur ouvre cette trappe pour saisir l'amorce
	de la bande.  Cette amorce comporte une découpe ovale que le
	lecteur utilise pour &#8220;crocheter&#8221; la bande.
	La bobine d'entraînement est située dans le lecteur.
	Tous les autres types de cartouches décrits ici (les bandes 9
	pistes sont la seule exception) ont les bobines
	de stockage et d'entraînement dans la cartouche
	elle-même.</p><p>Leur débit est d'environ 1.5 Mo/s, trois fois celui
	des lecteurs 4mm, 8mm, ou QIC.  La capacité d'une bande varie
	de 10 Go à 20 Go pour une unité simple.  Les
	lecteurs sont disponibles en unités multi-bandes avec
	changeurs et multi-lecteurs contenant de 5 à 900 bandes et 1
	à 20 lecteurs, fournissant une capacité de stockage
	allant de 50 Go à 9 TO.</p><p>Avec la compression, le format DLT type IV supporte
	jusqu'à une capacité de 70 Go.</p><p>Les données sont enregistrées sur la bande
	sur des pistes parallèles à la direction de
	défilement (comme
	pour les bandes QIC).  Deux pistes sont écrites
	à la fois.  La durée de vie des têtes de
	lecture/écriture est relativement longue; une fois que la
	bande s'arrête, il n'y a pas de déplacement des
	têtes par rapport à la bande.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78466128"></a>19.9.5. AIT</h3></div></div></div><a id="idp78466896" class="indexterm"></a><p>AIT est le nouveau format de Sony, il peut supporter
	jusqu'à 50 Go par bande (avec compression).  Les bandes
	contiennent un circuit mémoire qui contient un index du
	contenu de la bande.  Cet index peut être lu rapidement par le
	lecteur pour déterminer l'emplacement de fichiers sur la
	bande, au lieu des nombreuses minutes nécessaires aux autres
	types de bande.  Des programmes comme
	<span class="application">SAMS:Alexandria</span> peuvent
	contrôler quarante ou plus ensemble de bandes AIT,
	communiquant directement avec le circuit mémoire de la
	bande pour en afficher le contenu à l'écran,
	déterminer quels fichiers ont été
	sauvegardé sur quelle bande,
	localiser la bonne bande, la charger, et en restaurer les
	données.</p><p>Les ensembles de ce type reviennent aux alentour des 20000
	dollars, les rendant inaccessibles à l'amateur
	éclairé.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78469328"></a>19.9.6. Utiliser une bande neuve pour la première fois</h3></div></div></div><p>La première fois que vous essayez de lire ou d'écrire
	sur une bande vierge, l'opération échoue.  Les messages
	affichés par la console devraient être du type:</p><pre class="screen">sa0(ncr1:4:0): NOT READY asc:4,1
sa0(ncr1:4:0):  Logical unit is in process of becoming ready</pre><p>La bande ne contient pas de bloc d'identification (bloc
	numéro 0).  Tous les lecteurs QIC depuis l'adoption du
	standard QIC-525 écrivent un bloc d'identification sur la
	bande.  Il y a alors deux solutions:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="command">mt fsf 1</code> fait écrire au lecteur un
	    bloc d'identification sur la bande.</p></li><li class="listitem"><p>Utiliser le bouton en face avant pour éjecter la
	    bande.</p><p>Ré-insérer la bande et utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> pour
	    écrire dessus.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> produira l'erreur <span class="errorname">DUMP: End of tape
	    detected</span> et la console affichera: <span class="errorname">HARDWARE
	    FAILURE info:280 asc:80,96</span>.</p><p>Rembobiner la bande avec:
	    <code class="command">mt rewind</code>.</p><p>Les manipulations ultérieures sur la bande
	    fonctionneront.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backups-floppybackups"></a>19.10. Sauvegardes sur disquettes</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-using"></a>19.10.1. Puis-je utiliser des disquettes pour la sauvegarde
	des mes données?</h3></div></div></div><a id="idp78483536" class="indexterm"></a><a id="idp78488272" class="indexterm"></a><p>Les disquettes ne sont pas des supports adaptés à la
	réalisation de sauvegardes étant
	donné que:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le support n'est pas fiable, spécialement
	    sur de longues périodes de temps.</p></li><li class="listitem"><p>Les opérations de sauvegarde et de restauration
	    sont très lentes.</p></li><li class="listitem"><p>Elles ont une capacité très
	    limitée (le jour où l'on pourra sauvegarder
	    l'intégralité d'un disque dur sur une douzaine de
	    disquette n'est pas encore arrivé).</p></li></ul></div><p>Cependant, si vous n'avez pas d'autres méthodes
	pour sauvegarder vos données alors les disquettes
	sont mieux que pas de sauvegardes du tout.</p><p>Si vous devez utiliser les disquettes, alors assurez-vous
	que vous en utiliser des disquettes de bonne qualité.
	Les disquettes qui traînent sur le bureau depuis quelques
	années sont un mauvais choix.  Idéalement utilisez de
	des disquettes neuves en provenance d'un fabricant
	renommé.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-creating"></a>19.10.2. Alors, comment je sauvegarde mes données
	sur disquettes?</h3></div></div></div><p>La meilleur façon de sauvegarder sur disquette est
	d'utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> avec l'option
	<code class="option">-M</code> (volume multiple), qui autorise
	la répartition des sauvegardes sur plusieurs
	disquettes.</p><p>Pour sauvegarder tous les fichiers du répertoire
	courant et des sous-répertoires (en tant que
	<code class="systemitem">root</code>):</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mcvf /dev/fd0 *</code></strong></pre><p>Quand la première disquette est pleine <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a>
	vous réclamera d'introduire le volume suivant (parce
	que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> est indépendant du support il parle en
	terme de volume; dans notre contexte cela signifie
	disquette).</p><pre class="screen">Prepare volume #2 for /dev/fd0 and hit return:</pre><p>Cette opération est répétée
	(avec incrémentation du numéro de volume)
	jusqu'à ce que les fichiers spécifiés soient
	sauvegardés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-compress"></a>19.10.3. Puis-je sauvegarder mes sauvegardes?</h3></div></div></div><a id="idp78500816" class="indexterm"></a><a id="idp78501712" class="indexterm"></a><a id="idp78502608" class="indexterm"></a><p>Malheureusement, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> ne permettra pas
	l'utilisation de l'option <code class="option">-z</code> pour
	les archives multi-volumes.  Vous pourrez, bien sûr,
	utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> sur tous les fichiers, les archiver
	avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> sur disquettes, puis décompresser les
	fichiers avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gunzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gunzip</span>(1)</span></a>!</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="floppies-restoring"></a>19.10.4. Comment puis-je restaurer mes sauvegardes?</h3></div></div></div><p>Pour restaurer une archive complète utiliser:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mxvf /dev/fd0</code></strong></pre><p>Vous pouvez utiliser deux manières pour restaurer
	uniquement certains fichiers.  Tout d'abord, vous pouvez
	commencer avec la première disquette et utiliser:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar Mxvf /dev/fd0 nomdufichier</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> vous demandera d'insérer les disquettes
	suivantes jusqu'à trouver le fichier recherché.</p><p>Alternativement, si vous savez sur quelle disquette
	le fichier se trouve alors vous pouvez simplement insérer
	cette disquette et utiliser la commande précédente.
	Notez que si le premier fichier sur la disquette est la suite
	d'un fichier de la précédente disquette alors
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> vous avertira qu'il ne peut le restaurer,
	même si vous ne le voulez pas!</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-strategies"></a>19.11. Stratégies de sauvegarde</h2></div><div><span class="authorgroup">Travail original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Lowell</span> <span class="surname">Gilbert</span></span>. </span></div></div></div><p>La première chose a faire lors de la mise en place
      d'un plan de sauvegarde est de s'assurer que l'ensemble des
      problèmes suivants sera couvert:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Panne d'un disque</p></li><li class="listitem"><p>Suppression accidentelle de fichiers</p></li><li class="listitem"><p>Corruption aléatoire de fichiers</p></li><li class="listitem"><p>Destruction complète de la machine (par exemple
	  suite à un incendie), avec destruction des sauvegardes
	  stockées sur le même site.</p></li></ul></div><p>Il est parfaitement possible que certains systèmes
      utilisent une technique différente pour chacun des
      problèmes évoqués ci-dessus.  En dehors des
      systèmes personnels avec des données peu
      importantes, il est peu probable qu'une seule technique puisse
      répondre à l'ensemble de ces risques.</p><p>Quelques-unes des techniques à notre disposition
      sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Des archives de tout le système,
	  sauvegardées sur un support fiable et à
	  l'extérieur du site.  C'est une protection
	  réelle contre tous les problèmes
	  précédemment cités, mais cette
	  méthode est lente et peu pratique lors des
	  restaurations.  Vous pouvez conserver des copies de ces
	  sauvegardes sur site et/ou en ligne, mais il y aura toujours
	  des difficultés lors de la restauration des fichiers,
	  en particulier pour les utilisateurs sans droits.</p></li><li class="listitem"><p>Instantané de systèmes de fichiers.  Cet
	  outil n'est vraiment utile que dans le cas d'une suppression
	  accidentelle de fichiers, mais il l'est
	  <span class="emphasis"><em>vraiment</em></span> dans ce cas; de plus cette
	  méthode est rapide et simple à employer.</p></li><li class="listitem"><p>Copies de l'intégralité des
	  systèmes de fichiers et/ou des disques (par une
	  utilisation régulière de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsync&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsync</span>(1)</span></a> sur
	  l'intégralité de la machine par exemple).  C'est
	  le procédé en général le plus
	  utile dans le cas des réseaux avec des besoins
	  spécifiques.  Dans le cas d'une protection contre les
	  pannes disques, cette méthode est normalement
	  inférieure à un système
	  <acronym class="acronym">RAID</acronym>.  Pour la restauration de fichiers
	  supprimés accidentellement, c'est comparable aux
	  instantanés <acronym class="acronym">UFS</acronym>, c'est plus une
	  question de préférence.</p></li><li class="listitem"><p><acronym class="acronym">RAID</acronym>.  Réduit ou évite
	  les périodes où le système est
	  inutilisable quand un disque tombe en panne.  Avec
	  l'inconvénient d'avoir à faire face à des
	  pannes disques plus fréquentes (parce que vous utilisez
	  plus de disques), mais avec cependant une moindre
	  urgence.</p></li><li class="listitem"><p>Le contrôle des empreintes de fichiers.
	  L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mtree&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mtree</span>(8)</span></a> est très utile dans ce cas.
	  Bien que cela ne soit pas une technique de sauvegarde des
	  données, ce contrôle aidera à garantir que
	  vous serez averti quand vous devrez ressortir vos sauvegardes.
	  C'est tout particulièrement important dans le cas de
	  sauvegardes hors site, et ces empreintes devraient être
	  vérifiées régulièrement.</p></li></ul></div><p>Il est relativement simple de trouver d'autres solutions,
      nombreuses sont celles qui sont des variations des techniques
      présentées ci-dessus.  Des besoins
      spécifiques conduiront généralement
      à des solutions spécifiques (par exemple
      sauvegarder une base de données durant son utilisation
      demande une étape intermédiaire spécifique
      au logiciel de base de données).  L'important est de
      connaître les dangers contre lesquels vous désirez
      vous protéger, et comment vous ferez face à chacun
      d'entre eux.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="backup-basics"></a>19.12. Sauvegardes</h2></div></div></div><p>Les trois principaux programmes de sauvegarde sont:
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a>, et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78573008"></a>19.12.1. Dump et Restore</h3></div></div></div><a id="idp78573648" class="indexterm"></a><a id="idp78574800" class="indexterm"></a><a id="idp78575440" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a> sont les programmes de
	sauvegarde traditionnels d'<span class="trademark">UNIX</span>®.  Ils opèrent sur le disque
	comme sur une suite de blocs disque, en dessous du niveau
	d'abstraction que constituent les fichiers, liens et
	répertoires créés par les systèmes de
	fichiers.  Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> sauvegarde
	l'intégralité d'un système de
	fichiers d'un périphérique.  Il est incapable
	de sauvegarder seulement une partie d'un système
	de fichiers ou une arborescence de répertoires
	s'étalant sur plus d'un système de fichiers.
	Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> n'écrit pas de fichiers ou
	des répertoires sur la bande, mais écrit
	plutôt les blocs de données brutes dont sont
	constitués les fichiers et les répertoires.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> sur votre répertoire
	  racine, vous ne sauvegarderez pas
	  <code class="filename">/home</code>, <code class="filename">/usr</code> ou
	  beaucoup d'autres répertoires puisque que ces derniers
	  sont généralement des points de montages pour
	  d'autres systèmes de fichiers ou des liens symboliques
	  vers ces systèmes de fichiers.</p></div><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> a quelques particularités
	datant de ses débuts sous la version 6 d'AT&amp;T UNIX (circa
	1975).  Les paramètres par défaut conviennent aux bandes
	9 pistes (6250 bpi), et non aux supports à haute
	densité d'aujourd'hui (jusqu'à 62182 ftpi).
	Il faut surcharger ces valeurs par défaut sur la ligne
	de commande pour utiliser la capacité des bandes
	actuelles.</p><a id="idp78591824" class="indexterm"></a><p>Il est également possible de sauvegarder les
	données par l'intermédiaire d'un réseau sur un
	lecteur de bande se trouvant sur une autre ordinateur
	à l'aide des commandes <code class="command">rdump</code> et
	<code class="command">rrestore</code>.
	Ces deux programmes utilisent <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcmd&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">rcmd</span>(3)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ruserok&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">ruserok</span>(3)</span></a>
	pour accéder à l'unité de bandes distante.
        Cependant, l'utilisateur effectuant une sauvegarde doit
	être présent dans le fichier <code class="filename">.rhosts</code>
	sur la machine distante.  Les arguments de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rdump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rdump</span>(8)</span></a> et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rrestore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rrestore</span>(8)</span></a> doivent être compatibles avec une
	utilisation sur la machine distante.  Quand on sauvegarde
	une machine FreeBSD sur un lecteur Exabyte installé sur
	un ordinateur Sun appelé <code class="systemitem">komodo</code>,
	utilisez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/rdump 0dsbfu 54000 13000 126 komodo:/dev/nsa8 /dev/da0a 2&gt;&amp;1</code></strong></pre><p>Attention: il y a des conséquences pour la
	sécurité à utiliser l'authentification
	<code class="filename">.rhosts</code>.  Evaluez soigneusement votre
	situation.</p><p>Il est également possible d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a> d'une façon plus sécurisée sur
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>.</p><div class="example"><a id="idp78606032"></a><div class="example-title">Exemple 19.1. Utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> sur <span class="application">ssh</span></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/sbin/dump -0uan -f - /usr | gzip -2 | ssh -c blowfish \
          targetuser@targetmachine.example.com dd of=/mybigfiles/dump-usr-l0.gz</code></strong></pre></div></div><br class="example-break" /><p>Ou en utilisant une fonction interne de
	<code class="command">dump</code>, positionner la variable
	d'environnement <code class="envar">RSH</code>:</p><div class="example"><a id="idp78610000"></a><div class="example-title">Exemple 19.2. Utiliser <code class="command">dump</code> sur <span class="application">ssh</span>
	avec la variable <code class="envar">RSH</code> positionnée</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>RSH=/usr/bin/ssh /sbin/dump -0uan -f targetuser@targetmachine.example.com:/dev/sa0 /usr</code></strong></pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78612944"></a>19.12.2. <code class="command">tar</code></h3></div></div></div><a id="idp78613712" class="indexterm"></a><p>Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> date aussi de la Version 6
	d'AT&amp;T UNIX (circa 1975).  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> travaille en
	coopération avec le système de fichiers; il
	permet d'écrire
	des fichiers et des répertoires sur bandes.
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> ne supporte pas toutes les options permises
	par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>, mais ne demande pas
	l'inhabituelle concaténation de commandes qu'utilise
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a></p><a id="idp78623312" class="indexterm"></a><p>Sous FreeBSD 5.3 et versions suivantes, GNU
	<code class="command">tar</code> et la version par défaut
	<code class="command">bsdtar</code> sont disponibles.  La version GNU
	peut être invoquée avec la commande
	<code class="command">gtar</code>.  Elle supporte les sauvegardes sur
	des périphériques distants et cela
	avec la même syntaxe que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rdump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rdump</span>(8)</span></a>.  Pour sauvegarder avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> sur une unité Exabyte connectée sur une machine
	Sun appelée <code class="systemitem">komodo</code>, utilisez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/bin/gtar cf komodo:/dev/nsa8 . 2&gt;&amp;1</code></strong></pre><p>La même opération peut être
	effectuée avec <code class="command">bsdtar</code> en utilisant
	un tuyau et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> pour
	envoyer les données sur un lecteur de bande distant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tar cf - . | rsh hostname dd of=tape-device obs=20b</code></strong></pre><p>Si vous êtes inquiet au sujet de la sécurité
	de sauvegardes par réseau, vous devriez utiliser la
	commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a> à la place de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78637136"></a>19.12.3. <code class="command">cpio</code></h3></div></div></div><a id="idp78637904" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> est le programme <span class="trademark">UNIX</span>® original pour l'échange
	de fichiers par bandes magnétiques.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> dispose
	d'options (parmi beaucoup d'autres) pour intervertir les
	octets, utiliser de nombreux différents formats, et envoyer
	les données à d'autres programmes.  Cette dernière
	caractéristique fait de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> un excellent choix pour
	les supports d'installation.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> ne sait pas
	parcourir une arborescence de répertoires et il faut lui
	passer la liste des fichiers via
	<code class="filename">stdin</code>.</p><a id="idp78643536" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> ne supporte pas les sauvegardes par le
	réseau.  Vous pouvez utiliser un tuyau et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rsh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rsh</span>(1)</span></a> pour
	envoyer les données sur un lecteur de bande distant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>for f in directory_list; do</code></strong>
<strong class="userinput"><code>find $f &gt;&gt; backup.list</code></strong>
<strong class="userinput"><code>done</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cpio -v -o --format=newc &lt; backup.list | ssh user@host "cat &gt; backup_device"</code></strong></pre><p>Où <em class="replaceable"><code>directory_list</code></em> est la liste
	des répertoires que vous désirez sauvegarder,
	<em class="replaceable"><code>user</code></em>@<em class="replaceable"><code>host</code></em>
	est l'ensemble utilisateur/nom de machine qui effectuera les
	sauvegardes, et <em class="replaceable"><code>backup_device</code></em>
	représente l'unité où seront écrites les sauvegardes
	(e.g., <code class="filename">/dev/nsa0</code>).</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78659280"></a>19.12.4. <code class="command">pax</code></h3></div></div></div><a id="idp78660048" class="indexterm"></a><a id="idp78661328" class="indexterm"></a><a id="idp78661968" class="indexterm"></a><a id="idp78662480" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a> est la réponse IEEE/<span class="trademark">POSIX</span>® à
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>.  Au fil des ans
	les différentes versions de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>
	sont devenues légèrement incompatibles.  Aussi,
	plutôt que de batailler pour les standardiser entièrement,
	<span class="trademark">POSIX</span>® a défini un nouvel utilitaire d'archivage.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pax&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pax</span>(1)</span></a>
	tente de lire et d'écrire nombre des divers formats
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a>, en plus de ses propres nouveaux
	formats.  Son ensemble de commandes ressemble plus à celui
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cpio&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cpio</span>(1)</span></a> qu'à celui de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="backups-programs-amanda"></a>19.12.5. <span class="application">Amanda</span></h3></div></div></div><a id="idp78677456" class="indexterm"></a><a id="idp78678736" class="indexterm"></a><p><span class="application">Amanda</span> (Advanced Maryland
	Network Disk Archiver&#8212;Système Avancé d'Archivage
	de Disques en Réseau du Maryland) est un système
	d'archivage
	client/serveur plutôt qu'un simple programme.  Un serveur
	<span class="application">Amanda</span> archivera sur une seule
	unité de bandes un nombre quelconque d'ordinateurs disposant
	de clients <span class="application">Amanda</span> et un accès
	réseau au serveur <span class="application">Amanda</span>.
	Un problème classique sur les sites qui ont de nombreux
	disques volumineux est que le temps nécessaire pour
	sauvegarder directement les données sur la bande dépasse
	le temps alloué à cette tâche.
	<span class="application">Amanda</span> résout ce problème.
	<span class="application">Amanda</span> peut utiliser un
	&#8220;disque intermédiaire&#8221; pour sauvegarder plusieurs
	systèmes de fichiers à la fois.
	<span class="application">Amanda</span> des &#8220;jeux
	d'archive&#8221;: un ensemble de bandes utilisé pour une
	période donnée pour créer une sauvegarde
	complète de tous les systèmes de fichiers listé
	dans le fichier de configuration d'<span class="application">Amanda</span>.
	Le &#8220;jeu d'archive&#8221; contient également les
	sauvegardes nocturnes incrémentales (ou
	différentielles) de tous les systèmes de fichiers.
	Pour restaurer une système de fichiers endommagé,
	il faut la sauvegarde complète la plus récente et
	les sauvegardes incrémentales.</p><p>Le fichier de configuration permet un contrôle en finesse
	des sauvegardes et du trafic réseau
	qu'<span class="application">Amanda</span> génère.
	<span class="application">Amanda</span> utilisera n'importe quel des
	programmes de sauvegarde décrits plus haut pour écrire les
	données sur bande.  <span class="application">Amanda</span> est
	disponible sous forme de logiciel porté ou de logiciel
	pré-compilé, il n'est pas installé
	par défaut.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78684752"></a>19.12.6. Ne rien faire</h3></div></div></div><p>&#8220;Ne rien faire&#8221; n'est pas un logiciel, mais
	c'est la stratégie de sauvegarde la plus utilisée.
	Il n'y a aucun investissement initial.  Il n'y a pas de de
	planification des sauvegardes à suivre.  Juste dire non.  Si
	quelque chose arrive à vos données, souriez et
	débrouillez-vous!</p><p>Si votre temps et vos données ne valent pas grand chose,
	alors &#8220;Ne rien faire&#8221; est le programme de
	sauvegarde le mieux adapté à votre ordinateur.
	Mais prenez garde, <span class="trademark">UNIX</span>® est un outil utile, et vous pouvez vous rendre
	compte au bout de six mois que vous disposez d'une collection
	de fichiers qui vous sont utiles.</p><p>&#8220;Ne rien faire&#8221; est la bonne méthode de
	sauvegarde pour <code class="filename">/usr/obj</code> et les autres
	répertoires qui peuvent facilement être
	recréés par votre ordinateur.  Un exemple est les
	fichiers qui constituent la version HTML ou <span class="trademark">PostScript</span>® de ce manuel.
	Ces fichiers ont été générés
	à partir de fichiers SGML.
	Faire des sauvegardes des fichiers HTML ou <span class="trademark">PostScript</span>® n'est
	pas nécessaire.  Les fichiers source SGML sont
	sauvegardés régulièrement.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78688592"></a>19.12.7. Quel est le meilleur programme de sauvegarde?</h3></div></div></div><a id="idp78689232" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> <span class="emphasis"><em>Point.</em></span> Elizabeth D. Zwicky
	a soumis à rude épreuve tous les programmes de
	sauvegarde dont nous avons parlé.  Le choix de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>
	s'impose pour préserver toutes vos données et les
	particularités des systèmes de fichiers <span class="trademark">UNIX</span>®.  Elizabeth
	a créé des systèmes de fichiers avec une grande
	variété de particularités inhabituelles (et
	quelques unes pas tellement inhabituelles) et a testé chacun des
	programmes en faisant une sauvegarde et une restauration de ces
	systèmes de fichiers.  Parmi les spécificités
	testées: fichiers avec des trous, fichiers avec des trous
	et des blocs de caractères &#8220;null&#8221;, fichiers
	dont les noms comportent des caractères inhabituels,
	les fichiers illisibles ou impossible à modifier, les
	périphériques, fichiers dont la taille change pendant
	la sauvegarde, fichiers créés ou détruits en cours
	de sauvegarde et bien plus.  Elle a présenté les
	résultats de ces tests au LISA V en Octobre 1991.
	Voir les <a class="link" href="http://berdmann.dyndns.org/zwicky/testdump.doc.html" target="_top">tests
	d'endurance des programmes de sauvegarde et
	d'archivage</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78697552"></a>19.12.8. Procédure de restauration d'urgence</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78698192"></a>19.12.8.1. Avant le désastre</h4></div></div></div><p>Il y a quatre étapes à mettre en oeuvre en
	  prévision d'un désastre éventuel.</p><a id="idp78699216" class="indexterm"></a><p>Tout d'abord, imprimez le label de chacun de vos disques
	  (par exemple <code class="command">bsdlabel da0 | lpr</code>), votre table
	  des systèmes de fichiers (<code class="filename">/etc/fstab</code>)
	  et tous les messages de démarrage, en deux
	  exemplaires.</p><a id="idp78701264" class="indexterm"></a><p>Deuxièmement, vérifiez que vos disquettes de
	  démarrage et de reprise d'urgence
	  (<code class="filename">boot.flp</code> et <code class="filename">fixit.flp</code>)
	  incluent tous vos périphériques.  La méthode
	  la plus simple pour vérifier est de redémarrer avec la
	  disquette de démarrage dans le lecteur et contrôler
	  les messages de démarrage.  Si tous vos
	  périphériques
	  sont listés et opérationnels, passez à la
	  troisième étape.</p><p>Sinon, vous devez créer deux disquettes de démarrage
	  sur-mesure avec un noyau qui puisse monter tous vos disques et
	  accéder à votre unité de bandes.  Ces disquettes
	  doivent contenir: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a>,
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>, et le programme de sauvegarde
	  que vous utilisez.  L'édition de liens de ces programmes
	  doit être statique.  Si vous utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a>, la
	  disquette doit contenir <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>.</p><p>Troisièmement, faites régulièrement des
	  sauvegardes sur bandes.  Toutes les modifications
	  effectuées après votre dernière sauvegarde
	  peuvent irrémédiablement perdues.  Protégez
	  vos bandes de sauvegarde en écriture.</p><p>Quatrièmement, testez les disquettes (soit
	  <code class="filename">boot.flp</code> et <code class="filename">fixit.flp</code>
	  soit les deux disquettes sur-mesure que vous avez
	  créées à la seconde étape) et vos
	  bandes de sauvegarde.  Prenez note de la procédure.
	  Conservez ces notes avec la disquette de démarrage, les
	  impressions et les bandes de sauvegarde.  Vous serez si
	  préoccupé quand vous devrez restaurer que ces notes
	  peuvent vous éviter de détruire vos bandes de sauvegarde
	  (Comment?  Au lieu de <code class="command">tar xvf /dev/sa0</code>,
	  vous pourriez taper accidentellement
	  <code class="command">tar cvf /dev/sa0</code>, ce qui écraserait votre
	  bande de sauvegarde).</p><p>Par mesure de sécurité, créez une
	  disquette de démarrage et deux bandes de sauvegarde
	  à chaque fois.  Conservez-les dans un lieu
	  éloigné.  Un endroit éloigné n'est
	  PAS le sous-sol du
	  même bâtiment.  Un certain nombre de compagnies du World
	  Trade Center l'ont appris à leurs dépends.  Un endroit
	  éloigné doit être physiquement
	  séparé de vos ordinateurs
	  et de vos disques par une distance significative.</p><div class="example"><a id="idp78743504"></a><div class="example-title">Exemple 19.3. Procédure de création d'une disquette
	    de démarrage</div><div class="example-contents"><pre class="programlisting">#!/bin/sh
#
# create a restore floppy
#
# format the floppy
#
PATH=/bin:/sbin:/usr/sbin:/usr/bin

fdformat -q fd0
if [ $? -ne 0 ]
then
	 echo "Bad floppy, please use a new one"
	 exit 1
fi

# place boot blocks on the floppy
#
bsdlabel -w -B /dev/fd0c fd1440

#
# newfs the one and only partition
#
newfs -t 2 -u 18 -l 1 -c 40 -i 5120 -m 5 -o space /dev/fd0a

#
# mount the new floppy
#
mount /dev/fd0a /mnt

#
# create required directories
#
mkdir /mnt/dev
mkdir /mnt/bin
mkdir /mnt/sbin
mkdir /mnt/etc
mkdir /mnt/root
mkdir /mnt/mnt			# for the root partition
mkdir /mnt/tmp
mkdir /mnt/var

#
# populate the directories
#
if [ ! -x /sys/compile/MINI/kernel ]
then
	 cat &amp;lt;&amp;lt; EOM
The MINI kernel does not exist, please create one.
Here is an example config file:
#
# MINI - A kernel to get FreeBSD onto a disk.
#
machine         "i386"
cpu             "I486_CPU"
ident           MINI
maxusers        5

options         INET                    # needed for _tcp _icmpstat _ipstat
                                        #            _udpstat _tcpstat _udb
options         FFS                     #Berkeley Fast File System
options         FAT_CURSOR              #block cursor in syscons or pccons
options         SCSI_DELAY=15           #Be pessimistic about Joe SCSI device
options         NCONS=2                 #1 virtual consoles
options         USERCONFIG              #Allow user configuration with -c XXX

config          kernel	root on da0 swap on da0 and da1 dumps on da0

device          isa0
device          pci0

device          fdc0	at isa? port "IO_FD1" bio irq 6 drq 2 vector fdintr
device          fd0	at fdc0 drive 0

device          ncr0

device          scbus0

device          sc0	at isa? port "IO_KBD" tty irq 1 vector scintr
device          npx0	at isa? port "IO_NPX" irq 13 vector npxintr

device          da0
device          da1
device          da2

device          sa0

pseudo-device   loop            # required by INET
pseudo-device   gzip            # Exec gzipped a.out's
EOM
	 exit 1
fi

cp -f /sys/compile/MINI/kernel /mnt

gzip -c -best /sbin/init &gt; /mnt/sbin/init
gzip -c -best /sbin/fsck &gt; /mnt/sbin/fsck
gzip -c -best /sbin/mount &gt; /mnt/sbin/mount
gzip -c -best /sbin/halt &gt; /mnt/sbin/halt
gzip -c -best /sbin/restore &gt; /mnt/sbin/restore

gzip -c -best /bin/sh &gt; /mnt/bin/sh
gzip -c -best /bin/sync &gt; /mnt/bin/sync

cp /root/.profile /mnt/root

cp -f /dev/MAKEDEV /mnt/dev
chmod 755 /mnt/dev/MAKEDEV

chmod 500 /mnt/sbin/init
chmod 555 /mnt/sbin/fsck /mnt/sbin/mount /mnt/sbin/halt
chmod 555 /mnt/bin/sh /mnt/bin/sync
chmod 6555 /mnt/sbin/restore

#
# create the devices nodes
#
cd /mnt/dev
./MAKEDEV std
./MAKEDEV da0
./MAKEDEV da1
./MAKEDEV da2
./MAKEDEV sa0
./MAKEDEV pty0
cd /

#
# create minimum file system table
#
cat &amp;lt; /mnt/etc/fstab &amp;lt;&amp;lt;EOM
/dev/fd0a    /    ufs    rw  1  1
EOM

#
# create minimum passwd file
#
cat &amp;lt; /mnt/etc/passwd &amp;lt;&amp;lt;EOM
root:*:0:0:Charlie &amp;amp;:/root:/bin/sh
EOM

cat &amp;lt; /mnt/etc/master.passwd &amp;lt;&amp;lt;EOM
root::0:0::0:0:Charlie &amp;amp;:/root:/bin/sh
EOM

chmod 600 /mnt/etc/master.passwd
chmod 644 /mnt/etc/passwd
/usr/sbin/pwd_mkdb -d/mnt/etc /mnt/etc/master.passwd

#
# umount the floppy and inform the user
#
/sbin/umount /mnt
echo "The floppy has been unmounted and is now ready."</pre></div></div><br class="example-break" /></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78744912"></a>19.12.8.2. Après le désastre</h4></div></div></div><p>La question cruciale est: votre matériel a-t-il
	  survécu?  Vous avez régulièrement fait des
	  sauvegardes, vous n'avez donc pas besoin de vous
	  inquiéter pour les fichiers et les programmes.</p><p>Si le matériel a subi des dégâts, remplacez
	  tout d'abord ce qui a été endommagé
	  avant de tenter d'utiliser l'ordinateur.</p><p>Si votre matériel est en état, contrôlez
	  vos disquettes.  Si vous utilisez une disquette de démarrage
	  personnalisée, démarrez en mode mono-utilisateur (tapez
	  <code class="literal">-s</code> à l'invite <code class="prompt">boot:</code>).
	  Sautez le paragraphe suivant.</p><p>Si vous utilisez les disquettes <code class="filename">boot.flp</code>
	  et <code class="filename">fixit.flp</code>, continuez à lire.
	  Mettre la disquette <code class="filename">boot.flp</code> dans le
	  premier lecteur et démarrez l'ordinateur.  Le menu
	  d'installation d'origine s'affiche à l'écran.
	  Choisissez
	  l'option <span class="guimenuitem">Fixit--Repair mode with CDROM or
	  floppy.</span>.  Insérez la disquette
	  <code class="filename">fixit.flp</code> quand on vous la demande.
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a> et les autres programmes dont vous avez
	  besoin sont situés dans le répertoire
	  <code class="filename">/mnt2/rescue</code>
	  (<code class="filename">/mnt2/stand</code> pour les
	  versions de FreeBSD antérieures à la 5.2).</p><p>Restaurez chaque système de fichiers
	  séparément.</p><a id="idp78751952" class="indexterm"></a><a id="idp78752848" class="indexterm"></a><a id="idp78753360" class="indexterm"></a><a id="idp78754384" class="indexterm"></a><p>Essayez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> (e.g. <code class="command">mount /dev/da0a
	  /mnt</code>) sur la partition racine de votre premier
	  disque.  Si le label du disque est endommagé, utilisez
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> pour repartitionner et libeller le disque
	  conformément au label que vous avez imprimé et mis
	  de côté.  Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> pour recréer
	  les systèmes de fichiers.  Remontez la partition racine
	  de la disquette en lecture/écriture (<code class="command">mount -u -o rw
	  /mnt</code>).  Utilisez votre programme de restauration
	  et vos bandes de sauvegardes pour restaurer les données
	  de ce système de fichiers (e.g. <code class="command">restore vrf
	  /dev/sa0</code>).  Démontez le système de fichiers
	  (e.g. <code class="command">umount /mnt</code>).  Répétez
	  l'opération pour chacun des systèmes de fichiers
	  endommagés.</p><p>Une fois que le système fonctionne à nouveau,
	  faites une sauvegarde sur de nouvelles bandes.  Ce qui
	  a causé la panne ou la perte de données peut se
	  reproduire.  Une heure de perdue maintenant peut vous
	  épargner d'autres ennuis plus tard.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-virtual"></a>19.13. Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</h2></div><div><span class="authorgroup">Réorganisée et augmentée par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><a id="idp78767056" class="indexterm"></a><a id="idp78767568" class="indexterm"></a><p>En plus des disques que vous introduisez physiquement
      dans votre ordinateur: disquettes, CD, disques durs, et ainsi
      de suite; d'autres formes de disques sont gérées
      par FreeBSD &#8212; les <em class="firstterm">disques
      virtuels</em>.</p><a id="idp78769488" class="indexterm"></a><a id="idp78770000" class="indexterm"></a><a id="idp78770512" class="indexterm"></a><p>Ceux-ci comprennent les systèmes de fichiers
      réseaux comme le <a class="link" href="#network-nfs" title="29.3. Système de fichiers réseau (NFS)">NFS</a>
      et Coda, les systèmes de fichiers en mémoire et
      les systèmes de fichiers sauvegardé dans un
      fichier.</p><p>En fonction de la version de FreeBSD que vous utilisez,
      vous devrez utiliser des outils différents pour la
      création et l'utilisation de systèmes de fichiers
      en mémoire ou sauvegardé dans un
      fichier.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> pour
	allouer de façon transparente pour l'utilisateur
	les fichiers spéciaux de périphériques.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-mdconfig"></a>19.13.1. Système de fichiers sauvegardé dans un fichier</h3></div></div></div><a id="idp78795984" class="indexterm"></a><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> est utilisé pour
	configurer et activer les disques mémoires,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>, sous FreeBSD.  Pour utiliser
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>, vous devez charger le module <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	ou en ajouter le support dans votre fichier de configuration
	du noyau:</p><pre class="programlisting">device md</pre><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> supporte trois sortes
	de disques virtuels en mémoire: les disques mémoire
	alloués avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>, les disques mémoires
	utilisant un fichier ou l'espace de pagination comme
	espace disque.  Une des utilisations possibles est
	le montage d'images de disquettes ou de CDs conservées
	sous forme de fichier.</p><p>Pour monter l'image d'un système de fichiers:</p><div class="example"><a id="idp78803280"></a><div class="example-title">Exemple 19.4. Utilisation de <code class="command">mdconfig</code> pour monter
	  une image d'un système de fichiers</div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f diskimage -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0 /mnt</code></strong></pre></div></div><br class="example-break" /><p>Pour créer l'image d'un nouveau système de
	fichiers avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>:</p><div class="example"><a id="idp78811600"></a><div class="example-title">Exemple 19.5. Création d'un nouveau disque sauvegardé sur
	  fichier avec <code class="command">mdconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f newimage -u 0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -w md0 auto</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs md0a</code></strong>
/dev/md0a: 5.0MB (10224 sectors) block size 16384, fragment size 2048
        using 4 cylinder groups of 1.25MB, 80 blks, 192 inodes.
super-block backups (for fsck -b #) at:
 160, 2720, 5280, 7840
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md0a /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0a       4710    4  4330     0%    /mnt</pre></div></div><br class="example-break" /><p>Si vous ne préciser pas de numéro d'unité
	avec l'option <code class="option">-u</code>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	utilisera le mécanisme d'allocation automatique
	de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> pour sélectionner un
	périphérique libre.
	Le nom de l'unité allouée s'affichera sur
	la sortie standard comme par exemple
	<code class="filename">md4</code>.  Pour plus de détails concernant
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>, référez-vous à la page de
	manuel.</p><p>L'outil <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a> est très utile, cependant
	son utilisation demande de nombreuses lignes de commandes
	pour créer un système de fichiers sauvegardé
	sur fichier.  FreeBSD vient avec un outil appelé
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>, ce programme configure un disque <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>, y ajoute dessus un
	système de fichiers UFS en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>, et le
	monte avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Par exemple, si vous désirez
	créer et monter la même image de système de
	fichiers que précédemment, tapez simplement ce
	qui suit:</p><div class="example"><a id="idp78830672"></a><div class="example-title">Exemple 19.6. Création et montage d'un disque sauvegardé
	  sur fichier avec <code class="command">mdmfs</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=newimage bs=1k count=5k</code></strong>
5120+0 records in
5120+0 records out
<code class="prompt">#</code> <strong class="userinput"><code>mdmfs -F newimage -s 5m md0 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md0        4718    4  4338     0%    /mnt</pre></div></div><br class="example-break" /><p>Si vous utilisez l'option <code class="option">md</code> sans
	numéro d'unité, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a> utilisera la fonction
	automatique de sélection d'unité de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> pour
	choisir un périphérique non utilisé.  Pour
	plus de détails au sujet de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdmfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdmfs</span>(8)</span></a>,
	référez-vous à la page de manuel.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="disks-md-freebsd5"></a>19.13.2. Système de fichiers en mémoire</h3></div></div></div><a id="idp78846672" class="indexterm"></a><p>Pour un système de fichiers en mémoire la
	<span class="quote">« <span class="quote">sauvegarde sur l'espace de pagination</span> »</span> devrait
	être normalement utilisée.  Utiliser l'espace de
	pagination ne signifie pas que le disque en mémoire
	sera par défaut sur l'espace de pagination, mais
	plutôt que le disque mémoire sera alloué
	sur une zone de mémoire qui pourra être
	sauvegardée sur l'espace de pagination si
	nécessaire.  Il est également possible de
	créer un disque en mémoire dont la
	mémoire est allouée à l'aide de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=malloc&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">malloc</span>(9)</span></a>, mais ce type de configuration, tout
	particulièrement dans le cas de disques de grande
	taille, peut donner lieu à une panique du
	système si le noyau se trouve à cours de
	mémoire.</p><div class="example"><a id="idp78849360"></a><div class="example-title">Exemple 19.7. Création d'un disque mémoire avec
	  <code class="command">mdconfig</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t swap -s 5m -u 1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs -U md1</code></strong>
/dev/md1: 5.0MB (10240 sectors) block size 16384, fragment size 2048
        using 4 cylinder groups of 1.27MB, 81 blks, 192 inodes.
        with soft updates
super-block backups (for fsck -b #) at:
 160, 2752, 5344, 7936
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/md1 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md1        4718    4  4338     0%    /mnt</pre></div></div><br class="example-break" /><div class="example"><a id="idp78853840"></a><div class="example-title">Exemple 19.8. Création d'un disque mémoire avec
	  <code class="command">mdmfs</code></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdmfs -s 5m md2 /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>df /mnt</code></strong>
Filesystem 1K-blocks Used Avail Capacity  Mounted on
/dev/md2        4846    2  4458     0%    /mnt</pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78856784"></a>19.13.3. Détacher un disque mémoire du système</h3></div></div></div><a id="idp78857424" class="indexterm"></a><p>Quand un système de fichiers en mémoire ou
	sauvegardé dans un fichier n'est pas utilisé,
	vous devriez rendre au système toutes les ressources.
	La première chose à faire est de démonter le
	système de fichiers, ensuite utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mdconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mdconfig</span>(8)</span></a>
	pour détacher le disque du système et rendre les
	ressources.</p><p>Par exemple pour détacher et libérer
	toutes les ressources utilisées par
	<code class="filename">/dev/md4</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p>Il est possible d'afficher des informations
	sur les périphériques <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a> configurés
	en utilisant la commande <code class="command">mdconfig
	-l</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="snapshots"></a>19.14. Instantané (&#8220;Snapshot&#8221;) d'un système de fichiers</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp78865872" class="indexterm"></a><p>FreeBSD en association avec les
	<a class="link" href="#soft-updates" title="12.12.2. Les &#8220;Soft Updates&#8221;">Soft Updates</a> offre une
	nouvelle caractéristique: les instantanés de
	systèmes de fichiers (&#8220;file system
	snapshots&#8221;).</p><p>Les instantanés permettent à un utilisateur de
	créer des images d'un système de fichiers
	précis, et de les traiter comme un fichier.
	Les instantanés doivent être créés
	dans le système de fichiers sur lequel on veut effectuer
	l'opération, et un utilisateur ne pourra pas créer
	plus de 20 instantanés par système de fichiers.
	Les instantanés actifs sont enregistrés dans le
	superbloc, ils sont donc conservés durant les
	opérations de démontage et de remontage lors des
	redémarrages du système.  Quand un instantané
	n'est plus requis, il peut être supprimé avec
	la commande standard <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rm</span>(1)</span></a>.  Les instantanés peuvent
	être supprimés dans n'importe quel ordre,
	cependant tout l'espace utilisé pourra ne pas
	être à nouveau disponible car un autre instantané
	réclamera éventuellement les blocs
	libérés.</p><p>L'indicateur inaltérable <code class="option">snapshot</code>
	est positionné lors de la création initiale de
	l'instantané.  La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=unlink&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">unlink</span>(1)</span></a> fait une
	exception pour les fichiers d'instantanés puisqu'elle
	autorise leur suppression.</p><p>Les instantanés sont créés avec la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>.  Pour placer un instantané de
	<code class="filename">/var</code> dans le fichier
	<code class="filename">/var/snapshot/snap</code> utilisez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o snapshot /var/snapshot/snap /var</code></strong></pre><p>Alternativement, vous pouvez utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mksnap_ffs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mksnap_ffs</span>(8)</span></a>
	pour créer un instantané:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mksnap_ffs /var /var/snapshot/snap</code></strong></pre><p>Les fichiers d'instantanés peuvent être
	localisés sur un système de fichiers (e.g.
	<code class="filename">/var</code>) en utilisant la
	commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=find&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">find</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>find /var -flags snapshot</code></strong></pre><p>Une fois un instantané créé, ce dernier
	pourra avoir de nombreux usages:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Certains administrateurs utiliseront un instantané
	    pour des besoins de sauvegarde, car l'instantané
	    peut être transféré sur CD ou bande.</p></li><li class="listitem"><p>Un contrôle d'intégrité du système fichiers,
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a>, pourra être effectué sur
	    l'instantané.  En supposant que le système de
	    fichiers était propre quand il a été
	    monté, vous devriez toujours obtenir un résultat
	    positif (et non différent).  C'est essentiellement
	    que effectue le processus de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> en tâche
	    de fond (&#8220;background <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a>&#8221;).</p></li><li class="listitem"><p>Lancer l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> sur l'instantané.
	    Une image cohérente du système de fichiers avec
	    les paramètres temporels de l'instantané
	    sera produite.
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> peut également à partir d'un
	    instantané, créer une image et puis supprimer
	    l'instantané en une seule fois en utilisant l'indicateur
	    <code class="option">-L</code> dans la ligne de commande.</p></li><li class="listitem"><p>Monter l'instantané comme une image figée
	    du système de fichiers.  Pour monter l'instantané
	    <code class="filename">/var/snapshot/snap</code> lancer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mdconfig -a -t vnode -f /var/snapshot/snap -u 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -r /dev/md4 /mnt</code></strong></pre></li></ul></div><p>Vous pouvez maintenant parcourir l'arborescence de
	votre système de fichiers <code class="filename">/var</code>
	figé monter sous <code class="filename">/mnt</code>.
	Tout sera au départ dans le même état que lors de la
	création de l'instantané.  La seule exception est que les
	instantanés antérieurs apparaîtront
	sous la forme de fichiers vides.  Quand l'utilisation d'un
	instantané est terminée, il peut être
	démonté avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /mnt</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mdconfig -d -u 4</code></strong></pre><p>Pour plus d'informations sur les
	<code class="option">softupdates</code> et les instantanés de
	systèmes de fichiers, et également de la documentation
	technique, vous pouvez consulter le site Web de
	Marshall Kirk McKusick à l'adresse
	<code class="uri"><a class="uri" href="http://www.mckusick.com/" target="_top">http://www.mckusick.com/</a></code></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="quotas"></a>19.15. Quotas d'utilisation des disques</h2></div></div></div><a id="idp78905552" class="indexterm"></a><a id="idp78910928" class="indexterm"></a><p>Les quotas sont une option du système d'exploitation
      qui vous permet de limiter la quantité d'espace disque
      et/ou le nombre de fichiers auxquels ont droit un utilisateur
      ou tous les utilisateurs d'un même groupe, sur un système
      de fichiers donné.  On les utilise la plupart du temps
      sur les systèmes en temps partagé où il est
      souhaitable de limiter la quantité de ressources allouée
      à un utilisateur ou à un groupe.  Cela évitera qu'un
      utilisateur ou un groupe d'utilisateur consomme tout l'espace
      disque.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78911824"></a>19.15.1. Configurer votre système pour pouvoir utiliser
	les quotas d'utilisation des disques</h3></div></div></div><p>Avant d'essayer de mettre en place des quotas disque, il
	est nécessaire de s'assurer que le noyau est configuré
	pour les quotas.  Cela se fait en ajoutant la ligne suivante
	dans votre fichier de configuration du noyau:</p><pre class="programlisting">options QUOTA</pre><p>Cette option n'est pas activée par défaut dans le
	noyau <code class="filename">GENERIC</code> de base, vous devrez donc
	configurer, compiler et installer un noyau sur-mesure pour
	utiliser les quotas disque.  Reportez-vous au chapitre <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a> pour plus d'informations sur la
	configuration du noyau.</p><p>Ensuite vous devrez activer les quotas disques dans le
	fichier <code class="filename">/etc/rc.conf</code>.  Pour cela, ajoutez
	la ligne:</p><pre class="programlisting">enable_quotas="YES"</pre><a id="idp78915664" class="indexterm"></a><p>Pour un contrôle plus fin des quotas au démarrage
	du système, il existe une variable supplémentaire de
	configuration.  Normalement au démarrage,
	l'intégrité des quotas sur chaque système de
	fichiers est vérifiée par le programme
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>.  Ce programme s'assure que les données
	de la base de données des quotas correspondent bien aux
	données présentes sur le système de
	fichiers.  C'est un processus consommateur en temps qui
	affectera considérablement la durée de
	démarrage du système.  Si vous désirez passer
	cette étape, une variable dans
	<code class="filename">/etc/rc.conf</code> est prévue à cet
	effet:</p><pre class="programlisting">check_quotas="NO"</pre><p>Vous devez enfin éditer le fichier
	<code class="filename">/etc/fstab</code> pour activer les quotas
	système de fichiers par système de fichiers.  C'est
	là que vous pouvez soit activer les quotas par utilisateur ou
	par groupe soit les pour les deux sur tous vos systèmes
	de fichiers.</p><p>Pour activer les quotas par utilisateur sur un système
	de fichiers, ajouter l'option <code class="option">userquota</code>
	dans le champ d'options sur l'entrée de
	<code class="filename">/etc/fstab</code> pour le système de fichiers
	sur lequel vous voulez activer les quotas.  Par
	exemple:</p><pre class="programlisting">/dev/da1s2g   /home    ufs rw,userquota 1 2</pre><p>De même, pour activer les quotas par groupe, utilisez
	l'option <code class="option">groupquota</code> à la place de
	<code class="option">userquota</code>.  Pour activer à la fois les quotas
	par utilisateur et par groupe, modifiez l'entrée de la
	façon suivante:</p><pre class="programlisting">/dev/da1s2g    /home    ufs rw,userquota,groupquota 1 2</pre><p>Par défaut, les fichiers où sont définis les
	quotas dans le répertoire racine du système de fichiers
	sous les noms <code class="filename">quota.user</code> et
	<code class="filename">quota.group</code>, respectivement pour les
	quotas utilisateur et les quotas par groupe.  Consultez
	la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> pour plus d'information.
	Bien que la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> indique que vous
	pouvez spécifier un autre emplacement pour ces fichiers,
	cela n'est pas recommandé parce que les divers utilitaires
	qui gèrent les quotas ne semblent pas les prendre correctement
	en compte.</p><p>A ce point vous devriez redémarrer votre système
	avec votre nouveau noyau.  La procédure
	<code class="filename">/etc/rc</code> exécutera automatiquement les
	commandes nécessaires pour créer les fichiers de quotas
	initiaux pour tous les quotas que vous avez définis
	dans <code class="filename">/etc/fstab</code>, vous n'avez donc pas
	besoin de créer à la main de fichiers de
	quotas vides.</p><p>Vous ne devriez pas avoir à exécuter les
	commandes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotacheck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotacheck</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaon&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaon</span>(8)</span></a>, ou
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quotaoff&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">quotaoff</span>(8)</span></a> manuellement.  Cependant, vous pouvez lire
	leur page de manuel pour vous familiariser avec leur
	rôle.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp78970448"></a>19.15.2. Définir les quotas</h3></div></div></div><a id="idp78971088" class="indexterm"></a><p>Une fois que vous avez activé les quotas sur votre
	système, assurez-vous que cela fonctionne correctement.
	Une manière simple de le faire est
	d'exécuter:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>quota -v</code></strong></pre><p>Vous devriez obtenir une ligne résumant l'utilisation
	disque avec les quotas actuellement définis pour chaque
	système de fichiers sur lesquels il y a des quotas.</p><p>Vous êtes maintenant prêt à définir les
	quotas avec la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.</p><p>Vous disposez de différentes options pour instaurer
	les quotas d'espace disque alloué à un utilisateur
	ou à un groupe, et le nombre de fichiers qu'ils peuvent
	créer.  Vous pouvez baser les limitations sur l'espace disque
	alloué (quotas en nombre de blocs) ou sur le nombre de
	fichiers (quotas en inode) ou les deux.  Ces options
	peuvent être divisées en deux catégories: les
	limites strictes ou souples.</p><a id="idp79004240" class="indexterm"></a><p>Une limite stricte ne peut être dépassée.
	Une fois qu'un utilisateur atteint sa limite stricte, il
	ne pourra plus rien allouer sur le système de fichiers
	en question.  Par exemple, si l'utilisateur a droit à une
	limite stricte de 500 Ko sur un système de fichiers et en
	utilise 490  Ko, il ne pourra allouer que 10 Ko
	supplémentaires.  Une tentative d'allouer 11 Ko
	échouerait.</p><a id="idp79005136" class="indexterm"></a><p>Une limite souple peut être dépassée
	pour une période de temps restreinte.  C'est ce que l'on
	appelle le délai de grâce, qui est d'une semaine
	par défaut.  Si un utilisateur dépasse cette limite
	au delà du délai de grâce, cette limite
	devient stricte, et plus aucune allocation ne sera possible.
	Quand l'utilisateur redescend en dessous de la limite souple,
	le délai de grâce est à nouveau
	réaccordé.</p><p>Ce qui suit est un exemple de ce que vous pourrez voir
	en utilisant la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.  Quand vous invoquez
	la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>, vous vous retrouvez dans
	l'éditeur défini par la variable d'environnement
	<code class="envar">EDITOR</code>, ou sous <span class="application">vi</span>
	si la variable d'environnement <code class="envar">EDITOR</code> n'est
	pas positionnée, ce qui vous permet d'éditer les
	quotas.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -u test</code></strong></pre><pre class="programlisting">Quotas for user test:
/usr: kbytes in use: 65, limits (soft = 50, hard = 75)
        inodes in use: 7, limits (soft = 50, hard = 60)
/usr/var: kbytes in use: 0, limits (soft = 50, hard = 75)
        inodes in use: 0, limits (soft = 50, hard = 60)</pre><p>Vous verrez normalement deux lignes pour chaque système
	de fichiers sur lequel il y a des quotas.  Une ligne pour
	les quotas de blocs, et une autre pour la limite d'inode.
	Modifiez simplement les valeurs que vous voulez mettre à jour.
	Par exemple, pour augmenter la limite de blocs accordée
	à cet utilisateur de 50 pour la limite souple et de 75 pour la
	limite stricte à 500 pour la limite souple et 600 pour la
	limite stricte, modifiez:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 50, hard = 75)</pre><p>en:</p><pre class="programlisting">/usr: kbytes in use: 65, limits (soft = 500, hard = 600)</pre><p>Les nouveaux quotas seront en service dès que vous
	quitterez l'éditeur.</p><p>Il est parfois souhaitable de définir des quotas
	pour une plage d'UIDs (identifiants utilisateur).  Cela
	peut être réalisé avec l'option
	<code class="option">-p</code> de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.
	Définissez d'abord les quotas pour un seul utilisateur, et
	puis exécutez
	<code class="command">edquota -p protouser startuid-enduid</code>.
	Par exemple, si l'utilisateur <code class="systemitem">test</code>
	dispose des quotas désirés, la commande suivante peut
	être utilisée pour appliquer ces quotas pour les UIDs
	de 10000 à 19999:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>edquota -p test 10000-19999</code></strong></pre><p>Pour plus d'informations consultez la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=edquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">edquota</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79017040"></a>19.15.3. Consulter les quotas et l'utilisation des disques</h3></div></div></div><a id="idp79017680" class="indexterm"></a><p>Vous pouvez soit utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>
	soit la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> pour consulter les quotas
	et l'utilisation des disques.  La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>
	peut être employée pour connaître
	les quotas et l'utilisation des disques pour un utilisateur et
	un groupe.  Un utilisateur ne peut consulter que ses propres
	quotas et ceux d'un groupe auquel il appartient.  Seul le
	super-utilisateur peut consulter les quotas et l'usage disque
	de tous les utilisateurs et groupes.  La commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=repquota&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">repquota</span>(8)</span></a> permet d'obtenir un résumé de tous
	les quotas et l'utilisation disque pour les systèmes
	de fichiers sur lesquels il y a des quotas.</p><p>Ce qui suit est un extrait de la sortie de la commande
	<code class="command">quota -v</code> pour un utilisateur pour lequel
	on a défini des quotas sur deux systèmes de
	fichiers.</p><pre class="programlisting">Disk quotas for user test (uid 1002):
     Filesystem  usage   quota   limit   grace   files   quota   limit   grace
           /usr      65*     50      75   5days       7      50      60
       /usr/var       0      50      75               0      50      60</pre><a id="idp79027664" class="indexterm"></a><p>Sur le système de fichiers <code class="filename">/usr</code>
	dans l'exemple ci-dessus, l'utilisateur occupe 15 Ko de
	plus que la limite de 50 Ko qui lui est allouée et
	dispose d'un délai de grâce de 5 jours.  Notez
	l'astérisque <code class="literal">*</code> qui indique que
	l'utilisateur dépasse actuellement son quota.</p><p>Normalement les systèmes de fichiers sur lesquels
	l'utilisateur n'occupe pas d'espace n'apparaissent pas
	dans la sortie de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a>, même s'il a des
	quotas sur ces systèmes de fichiers.  L'option
	<code class="option">-v</code> listera ces systèmes de fichiers, comme
	<code class="filename">/usr/var</code> dans l'exemple ci-dessus.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79031376"></a>19.15.4. Quotas avec NFS</h3></div></div></div><a id="idp79032016" class="indexterm"></a><p>Les quotas sont gérés par le sous-système
	de gestion des quotas sur le serveur NFS.  Le démon
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rpc.rquotad&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rpc.rquotad</span>(8)</span></a> fournit les informations sur les quotas
	à la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=quota&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">quota</span>(1)</span></a> des clients NFS, permettant
	aux utilisateurs sur ces machines de consulter l'utilisation
	des quotas qui leur sont alloués.</p><p>Activez <code class="command">rpc.rquotad</code> dans
	<code class="filename">/etc/inetd.conf</code> de la façon
	suivante:</p><pre class="programlisting">rquotad/1      dgram rpc/udp wait root /usr/libexec/rpc.rquotad rpc.rquotad</pre><p>Puis redémarrez <code class="command">inetd</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="disks-encrypting"></a>19.16. Chiffrer les partitions d'un disque</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Lucky</span> <span class="surname">Green</span></span>. </span></div></div></div><a id="idp79062096" class="indexterm"></a><p>FreeBSD offre d'excellentes protections contre un accès
      non autorisé aux données par l'intermédiaire du
      réseau.  Les permissions sur les fichiers et le contrôle
      d'accès obligatoire &#8212; &#8220;Mandatory Access
      Control&#8221; (MAC) (voir <a class="xref" href="#mac" title="Chapitre 17. Mandatory Access Control ** Traduction en Cours **">Chapitre 17, <em>Mandatory Access Control ** Traduction en Cours **</em></a>) empêchent
      l'accès aux données pour des tiers non autorisés
      quand le système d'exploitation est actif et l'ordinateur en
      fonctionnement.  Cependant, des permissions renforcés
      sont inutiles si l'attaquant a un accès physique à
      un ordinateur et peut simplement déplacer le disque dur
      sur un autre système pour copier et analyser les
      données sensibles.</p><p>Indépendamment de la manière dont une personne
      malveillante s'est
      trouvé en possession d'un disque dur ou a arrêté
      un ordinateur, le <span class="application">chiffrage de disque basé
      sur GEOM (gbde)</span> (&#8220;GEOM Based Disk
      Encryption&#8221;) et le système de chiffrage
      <code class="command">geli</code> de FreeBSD sont en mesure de
      protéger les données des systèmes de
      fichiers contre des attaquants très motivés et aux
      ressources importantes.  A la différence des
      méthodes de chiffrage lourdes qui chiffrent uniquement
      les fichiers individuels, <span class="application">gbde</span> et
      <code class="command">geli</code> chiffrent de manière transparente
      l'intégralité du système de fichiers.
      Aucun texte en clair ne touche les plateaux du disque.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79065808"></a>19.16.1. Chiffrage des disques avec
	<span class="application">gbde</span></h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Devenir <code class="systemitem">root</code></strong></p><p>La configuration de <span class="application">gbde</span>
	    requiert les privilèges du super-utilisateur.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>su -</code></strong>
Password:</pre></li><li class="step"><p class="title"><strong>Ajouter le support <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a> au fichier de
	    configuration du noyau</strong></p><p>Ajoutez la ligne suivante à votre fichier de
	    configuration du noyau:</p><p><code class="literal">options GEOM_BDE</code></p><p>Recompilez le noyau comme décrit dans <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><p>Redémarrez avec le nouveau noyau.</p></li><li class="step"><p>Au lieu de recompiler le noyau, on peut utiliser
	    <code class="command">kldload</code> pour charger le support
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload geom_bde</code></strong></pre></li></ol></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79080656"></a>19.16.1.1. Préparation du disque dur chiffré</h4></div></div></div><p>L'exemple suivant suppose que vous ajoutez un nouveau
	disque dur à votre système et qui contiendra une
	seule partition chiffrée.  Cette partition sera
	montée sous <code class="filename">/private</code>.
	<span class="application">gbde</span> peut également être
	utilisé pour chiffrer les répertoires
	<code class="filename">/home</code> et <code class="filename">/var/mail</code>,
	mais cela demande une configuration plus complexe qui
	dépasse le cadre de cette introduction.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Ajouter le nouveau disque</strong></p><p>Installez le nouveau disque comme expliqué dans
	    <a class="xref" href="#disks-adding" title="19.3. Ajouter des disques">Section 19.3, « Ajouter des disques »</a>.  Pour les besoins de cet
	    exemple, une nouvelle partition disque a été
	    ajoutée en tant que <code class="filename">/dev/ad4s1c</code>.
	    Les périphériques du type
	    <code class="filename">/dev/ad0s1*</code>
	    représentent les partitions FreeBSD standards sur le
	    système exemple.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4</pre></li><li class="step"><p class="title"><strong>Créer un répertoire pour héberger
	    les fichiers de verrouillage de GBDE</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /etc/gbde</code></strong></pre><p>Le fichier de verrouillage de
	    <span class="application">gbde</span> contient l'information
	    nécessaire à <span class="application">gbde</span> pour
	    accéder aux partitions chiffrées.  Sans accès
	    au fichier de verrouillage,
	    <span class="application">gbde</span> sera incapable de
	    déchiffrer les données contenues sur la partition
	    chiffrée sans une aide manuelle significative ce
	    qui n'est pas supporté par le logiciel.  Chaque
	    partition chiffrée utilise un fichier de verrouillage
	    propre.</p></li><li class="step"><p class="title"><strong>Initialiser la partition gbde</strong></p><p>Une partition <span class="application">gbde</span>
	    doit être initialisée avant d'être utilisable.
	    Cette initialisation doit être effectuée une seule
	    fois:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde init /dev/ad4s1c -i -L /etc/gbde/ad4s1c</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> lancera votre éditeur, vous permettant
	    de fixer diverses options de configuration dans un
	    gabarit.  Pour une utilisation de UFS1 ou UFS2, fixez
	    l'option <code class="literal">sector_size</code> à
	    2048:</p><pre class="programlisting">$FreeBSD: src/sbin/gbde/template.txt,v 1.1 2002/10/20 11:16:13 phk Exp $
#
# La taille d'un secteur est la plus petite unité de donnée
# qui peut être lue ou écrite.
# Une valeur trop petite diminue les performances et l'espace
# disponible.
# Une valeur trop grande peut empêcher des systèmes de
# fichiers de fonctionner correctement.  512 est la valeur minimale
# et sans risque.  Pour l'UFS, utiliser la taille d'un fragment
#
sector_size     =       2048
[...]
</pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> vous demandera de taper deux fois
	    la phrase d'authentification qui devra être
	    utilisée pour sécuriser les données.  La
	    phrase d'authentification doit être la même
	    dans les deux cas.  La capacité de
	    <span class="application">gbde</span> à protéger
	    vos données dépend de la qualité de la
	    phrase d'authentification que vous avez choisie.
	  <a href="#ftn.idp79104080" class="footnote" id="idp79104080"><sup class="footnote">[10]</sup></a></p><p>La commande <code class="command">gbde init</code> crée
	    un fichier de verrouillage pour votre partition
	    <span class="application">gbde</span> qui dans cet exemple est
	    stocké sous <code class="filename">/etc/gbde/ad4s1c</code>.</p><div xmlns="" class="caution"><h3 class="admontitle">Attention: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les fichiers de verrouillage de
	      <span class="application">gbde</span>
	      <span class="emphasis"><em>doivent</em></span> être conservés de
	      pair avec le contenu des partitions chiffrées.
	      Alors que la suppression seule d'un fichier de
	      verrouillage ne peut empêcher une personne
	      déterminée de déchiffrer une partition
	      <span class="application">gbde</span>, sans le fichier
	      de verrouillage, le propriétaire légitime sera
	      incapable d'accéder aux données de la partition
	      chiffrée sans beaucoup de travail ce qui est
	      totalement non supporté par
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> et son concepteur.</p></div></li><li class="step"><p class="title"><strong>Attacher la partition chiffrée au noyau</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</code></strong></pre><p>On vous demandera de fournir la phrase
	    d'authentification que vous avez choisie lors de
	    l'initialisation de la partition chiffrée.  Le
	    nouveau périphérique chiffré apparaîtra
	    dans <code class="filename">/dev</code> en tant que
	    <code class="filename">/dev/nom_périphérique.bde</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/ad*</code></strong>
/dev/ad0        /dev/ad0s1b     /dev/ad0s1e     /dev/ad4s1
/dev/ad0s1      /dev/ad0s1c     /dev/ad0s1f     /dev/ad4s1c
/dev/ad0s1a     /dev/ad0s1d     /dev/ad4        /dev/ad4s1c.bde</pre></li><li class="step"><p class="title"><strong>Créer un système de fichiers
	    sur le périphérique chiffré</strong></p><p>Une fois que le périphérique chiffré
	    a été attaché au noyau, vous pouvez créer
	    un système de fichiers sur le périphérique.
	    Pour créer un système de fichiers sur le
	    périphérique, utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>.
	    Puisqu'il est plus rapide d'initialiser un nouveau
	    système de fichiers UFS2 qu'un nouveau système
	    UFS1, l'utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> avec l'option
	    <code class="option">-O2</code> est recommandé.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U -O2 /dev/ad4s1c.bde</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> peut être effectuée
	      sur une partition <span class="application">gbde</span>
	      attachée qui est identifiée par une extension
	      <code class="filename">*.bde</code>
	      au niveau du nom de périphérique.</p></div></li><li class="step"><p class="title"><strong>Monter la partition chiffrée</strong></p><p>Créez un point de montage pour le système
	    de fichiers chiffré.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /private</code></strong></pre><p>Montez le système de fichiers chiffré.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre></li><li class="step"><p class="title"><strong>Vérifiez que le système de fichiers
	    chiffré est disponible</strong></p><p>Le système de fichiers chiffré devrait
	    être visible par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a> et prêt à
	    être utilisé:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>df -H</code></strong>
Filesystem        Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a      1037M    72M   883M     8%    /
/devfs            1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f       8.1G    55K   7.5G     0%    /home
/dev/ad0s1e      1037M   1.1M   953M     0%    /tmp
/dev/ad0s1d       6.1G   1.9G   3.7G    35%    /usr
/dev/ad4s1c.bde   150G   4.1K   138G     0%    /private</pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79130832"></a>19.16.1.2. Montage des systèmes de fichiers chiffrés</h4></div></div></div><p>Après chaque démarrage, tout système
	de fichiers chiffré doit être rattaché
	au noyau, contrôlé pour les erreurs, et monté,
	avant que les systèmes de fichiers ne puissent être
	utilisés.  Les commandes nécessaires doivent être
	exécutées en tant que
	<code class="systemitem">root</code>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Attacher la partition gdbe au noyau</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde attach /dev/ad4s1c -l /etc/gbde/ad4s1c</code></strong></pre><p>On vous demandera de fournir la phrase
	    d'authentification que vous avez choisie lors de
	    l'initialisation de la partition <span class="application">gbde</span> chiffrée.</p></li><li class="step"><p class="title"><strong>Contrôler les erreurs du système de fichiers</strong></p><p>Puisque les systèmes de fichiers chiffrés
	    ne peuvent être encore listés dans le fichier
	    <code class="filename">/etc/fstab</code> pour un montage
	    automatique, on doit donc contrôler les systèmes de
	    fichiers pour d'éventuelles erreurs en exécutant
	    manuellement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> avant le montage.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p -t ffs /dev/ad4s1c.bde</code></strong></pre></li><li class="step"><p class="title"><strong>Monter le système de fichiers chiffré</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ad4s1c.bde /private</code></strong></pre><p>Le système de fichiers est maintenant
	    disponible à l'utilisation.</p></li></ol></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79148752"></a>19.16.1.2.1. Montage automatique de partitions chiffrées</h5></div></div></div><p>Il est possible de créer une procédure pour
	  automatiquement attacher, contrôler, et monter une
	  partition chiffrée, mais pour des raisons de
	  sécurité la procédure ne devrait pas contenir le
	  mot de passe <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a>.  A la place, il est recommandé
	  que de telles procédures soient exécutées
	  manuellement tout en fournissant le mot de passe via la
	  console ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>.</p><p>Comme autre possibilité, une procédure
	  <code class="filename">rc.d</code> est fournie.  Des arguments
	  peuvent être passés à cette
	  procédure par l'intermédiaire de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>,, par exemple:</p><pre class="programlisting">gbde_autoattach_all="YES"
gbde_devices="ad4s1c"</pre><p>Cela impose la saisie de la phrase d'authentification
	  <span class="application">gbde</span> au démarrage.
	  Après avoir entré la phrase d'authentification
	  correctement, la partition chiffrée
	  <span class="application">gbde</span> sera montée
	  automatiquement.  Cela peut être très utile
	  quand <span class="application">gbde</span> est utilisé sur
	  des ordinateurs portables.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79155152"></a>19.16.1.3. Les protections cryptographiques utilisées
	  par gbde</h4></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> chiffre la partie utile des secteurs en
	  utilisant le chiffrage AES 128 bits en mode CBC.  Chaque
	  secteur sur le disque est chiffré avec une clé AES
	  différente.  Pour plus d'informations sur l'architecture
	  cryptographique de <span class="application">gbde</span>, y
	  compris comment les clés pour chaque secteur sont
	  des dérivés de la phrase d'authentification
	  donnée par l'utilisateur, voir la page de manuel
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gbde</span>(4)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79158096"></a>19.16.1.4. Problèmes de compatibilité</h4></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> est incompatible avec
	  les périphériques
	  <span class="application">gbde</span>-chiffrés.  Tous les
	  périphériques
	  <code class="filename">*.bde</code>
	  doivent être détachés du noyau
	  avant de lancer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysinstall&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysinstall</span>(8)</span></a> ou ce dernier plantera
	  durant son processus initial de recherche des
	  périphériques.  Pour détacher le
	  périphérique chiffré utilisé dans notre
	  exemple, utilisez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gbde detach /dev/ad4s1c</code></strong></pre><p>Notez également qu'étant donné
	  que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">vinum</span>(4)</span></a> n'utilise pas le sous-système
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">geom</span>(4)</span></a>, vous ne pouvez utiliser
	  <span class="application">gbde</span> avec des volumes
	  <span class="application">vinum</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79173584"></a>19.16.2. Chiffrage des disques avec
	<code class="command">geli</code></h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Daniel</span> <span class="surname">Gerzo</span></span>. </span></div></div></div><p>Depuis FreeBSD 6.0, une nouvelle classe GEOM pour le
	chiffrage des données est disponible:
	<code class="command">geli</code>.  Cette classe est
	développée par Pawel Jakub Dawidek.  L'outil
	<code class="command">geli</code> est différent de
	<code class="command">gbde</code>; il offre des fonctionnalités
	différentes et utilise une méthode
	différente pour chiffrer les données.</p><p>Les caractéristiques les plus importantes de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Utilisation du système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=crypto&amp;sektion=9"><span class="citerefentry"><span class="refentrytitle">crypto</span>(9)</span></a> &#8212;
	    quand du matériel destiné au chiffrement est
	    disponible dans la machine, <code class="command">geli</code>
	    l'utilisera automatiquement.</p></li><li class="listitem"><p>Support de plusieurs algorithmes de chiffrement
	    (actuellement AES, Blowfish, et 3DES).</p></li><li class="listitem"><p>Permettre le chiffrage de la partition racine.  La
	    phrase d'authentification utilisée pour
	    accéder à la partition racine
	    chiffrée sera demandée au démarrage
	    du système.</p></li><li class="listitem"><p>Permettre l'emploi de deux clés
	    indépendantes (par exemple une <span class="quote">« <span class="quote">clé
	    utilisateur</span> »</span> et une <span class="quote">« <span class="quote">clé
	    entreprise</span> »</span>).</p></li><li class="listitem"><p><code class="command">geli</code> est rapide&#8212;il effectue
	    un simple chiffrement de secteur à secteur.</p></li><li class="listitem"><p>Permettre la sauvegarde et la restauration des
	    clés principales.  Quand un utilisateur doit
	    détruire ses clés, il sera possible
	    d'accéder à nouveau aux données en
	    restaurant les clés à partir de la
	    sauvegarde.</p></li><li class="listitem"><p>Permettre d'attacher un disque avec une clé
	    aléatoire à usage unique &#8212; utile pour
	    les partitions de pagination et les systèmes de
	    fichiers temporaires.</p></li></ul></div><p>Plus de caractéristiques concernant
	<code class="command">geli</code> peuvent être trouvées
	dans la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>.</p><p>Les points suivants décriront comment activer le
	support pour <code class="command">geli</code> dans le noyau FreeBSD et
	expliqueront comment créer et utiliser un
	<span class="emphasis"><em>provider</em></span> (ou partition) chiffré
	<code class="command">geli</code>.</p><p>Afin de pouvoir employer <code class="command">geli</code>, vous
	devez utiliser FreeBSD 6.0-RELEASE ou une version
	ultérieure.  Les privilèges du super-utilisateur
	seront également nécessaire puisque il faudra
	effectuer des modifications au niveau du noyau.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Ajouter le support <code class="command">geli</code> au
	    noyau</strong></p><p>Ajoutez les lignes suivantes au fichier de
	    configuration du noyau:</p><pre class="programlisting">options GEOM_ELI
device crypto</pre><p>Recompilez le noyau comme décrit dans la <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><p>Sinon, le module <code class="command">geli</code> peut
	    être chargé au démarrage.  Ajoutez la
	    ligne suivante au fichier
	    <code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">geom_eli_load="YES"</pre><p>Le système <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> devrait
	    désormais être supporté par le
	    noyau.</p></li><li class="step"><p class="title"><strong>Générer la clé
	    principale</strong></p><p>L'exemple suivant décrira la méthode
	    pour générer un fichier clé qui sera
	    utilisé comme partie de la clé principale
	    pour le <span class="emphasis"><em>provider</em></span> chiffré
	    monté sous le répertoire <code class="filename">/private</code>.  Le fichier
	    clé fournira des données aléatoires
	    qui seront employées pour chiffrer la clé
	    principale.  La clé principale sera
	    également protégée par une phrase
	    d'authentification.  La taille des secteurs du
	    <span class="emphasis"><em>provider</em></span> sera de 4Ko.  De plus, sera
	    décrit comment attacher au système le
	    <span class="emphasis"><em>provider</em></span> geli, créer un
	    système de fichiers dessus, utiliser ce
	    système de fichiers et enfin comment le
	    détacher.</p><p>Il est recommandé d'utiliser une taille de
	    secteur plus grande (comme 4Ko) pour de meilleures
	    performances.</p><p>La clé principale sera protégée
	    avec une phrase d'authentification et la source de
	    données pour le fichier clé sera
	    <code class="filename">/dev/random</code>.  La taille des secteurs
	    de <code class="filename">/dev/da2.eli</code>, partition que nous
	    appelons <span class="emphasis"><em>provider</em></span>, sera de
	    4Ko.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/random of=/root/da2.key bs=64 count=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>geli init -s 4096 -K /root/da2.key /dev/da2</code></strong>
Enter new passphrase:
Reenter new passphrase:</pre><p>Il n'est pas obligatoire d'utiliser la phrase
	    d'authentification et le fichier clé; chacune de
	    ces méthodes de sécurisation de la
	    clé principale peut être utilisée
	    séparément.</p><p>Si à la place du fichier clé un
	    <span class="quote">« <span class="quote">-</span> »</span> est passé, l'entrée
	    standard sera utilisée.  Cet exemple montre comment
	    on peut utiliser plus d'un fichier clé:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat keyfile1 keyfile2 keyfile3 | geli init -K - /dev/da2</code></strong></pre></li><li class="step"><p class="title"><strong>Attacher le <span class="emphasis"><em>provider</em></span> avec la
	    clé générée</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>geli attach -k /root/da2.key /dev/da2</code></strong>
Enter passphrase:</pre><p>Le nouveau périphérique sera appelé
	    <code class="filename">/dev/da2.eli</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ls /dev/da2*</code></strong>
/dev/da2  /dev/da2.eli</pre></li><li class="step"><p class="title"><strong>Créer le nouveau système de
	    fichiers</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/random of=/dev/da2.eli bs=1m</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/da2.eli</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/da2.eli /private</code></strong></pre><p>Le système de fichiers chiffré devrait
	    être maintenant visible par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=df&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">df</span>(1)</span></a> et disponible
	    à l'utilisation:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>df -H</code></strong>
Filesystem     Size   Used  Avail Capacity  Mounted on
/dev/ad0s1a    248M    89M   139M    38%    /
/devfs         1.0K   1.0K     0B   100%    /dev
/dev/ad0s1f    7.7G   2.3G   4.9G    32%    /usr
/dev/ad0s1d    989M   1.5M   909M     0%    /tmp
/dev/ad0s1e    3.9G   1.3G   2.3G    35%    /var
/dev/da2.eli   150G   4.1K   138G     0%    /private</pre></li><li class="step"><p class="title"><strong>Démonter et détacher le
	    <span class="emphasis"><em>provider</em></span></strong></p><p>Une fois l'utilisation de la partition chiffrée
	    achevée et que la partition <code class="filename">/private</code> n'est plus
	    nécessaire, il est prudent de penser à
	    démonter et détacher la partition
	    <code class="command">geli</code> chiffrée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount /private</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>geli detach da2.eli</code></strong></pre></li></ol></div><p>Plus d'information sur l'utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>
	    peut être trouvée dans sa page de
	    manuel.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79244752"></a>19.16.2.1. Utiliser la procédure <code class="filename">rc.d</code>
	  de <code class="filename">geli</code></h4></div></div></div><p>La commande <code class="filename">geli</code> est fournie avec
	  une procédure <code class="filename">rc.d</code> qui peut
	  être employée pour simplifier l'utilisation de
	  <code class="command">geli</code>.  Un exemple de configuration de
	  <code class="command">geli</code> à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>
	  sera:</p><pre class="programlisting">geli_devices="da2"
geli_da2_flags="-p -k /root/da2.key"</pre><p>Ces lignes configureront <code class="filename">/dev/da2</code>
	  comme <span class="emphasis"><em>provider</em></span> <code class="command">geli</code>
	  avec une clé principale
	  <code class="filename">/root/da2.key</code>, de plus
	  <code class="command">geli</code> n'utilisera pas de phrase
	  d'authentification pour attacher le
	  <span class="emphasis"><em>provider</em></span> (notez que ceci n'est
	  utilisable que si l'option <code class="option">-P</code> a
	  été passée durant la phase
	  <code class="literal">geli init</code>).  Le système
	  détachera du noyau le <span class="emphasis"><em>provider</em></span>
	  <code class="command">geli</code> avant l'arrêt du
	  système.</p><p>Plus d'information sur la configuration du
	  système <code class="filename">rc.d</code> est fournie dans la
	  section <a class="link" href="#configtuning-rcd" title="12.7. Utilisation du système rc sous FreeBSD">rc.d</a> de ce
	  Manuel.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="swap-encrypting"></a>19.17. Chiffrage de l'espace de pagination</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christian</span> <span class="surname">Brüffer</span></span>. </span></div></div></div><a id="idp79265872" class="indexterm"></a><p>Sous FreeBSD, le chiffrement de l'espace de pagination est
      simple à mettre en place et est possible depuis FreeBSD
      5.3-RELEASE.  En fonction de la version de FreeBSD utilisée,
      différentes options sont disponibles et la configuration
      peut légèrement varier.  Depuis FreeBSD 6.0-RELEASE,
      les systèmes de chiffrage <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a>
      peuvent être utilisé à cet effet.  Avec les
      versions antérieures, seul <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> est disponible.
      Les deux systèmes utilisent la procédure <a class="link" href="#configtuning-rcd" title="12.7. Utilisation du système rc sous FreeBSD">rc.d</a> nommée
      <code class="filename">encswap</code>.</p><p>La section précédente, <a class="link" href="#disks-encrypting" title="19.16. Chiffrer les partitions d'un disque">Chiffrer les partitions d'un
      disque</a>, contient une courte explication sur les
      différents systèmes de chiffrage.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79271632"></a>19.17.1. Pourquoi l'espace de pagination devrait être
	chiffré?</h3></div></div></div><p>Comme pour le chiffrage des partitions d'un disque,
	chiffrer l'espace de pagination a pour but la protection des
	informations sensibles.  Imaginez une application qui, par
	exemple, traite des mots de passe.  Tant que ces mots de passe
	résident en mémoire tout va pour le mieux.
	Cependant, si le système d'exploitation commence
	à transférer des pages mémoires vers
	l'espace de pagination en vue de libérer de la
	mémoire pour d'autres applications, les mots de passe
	peuvent être écrits en clair sur les plateaux du
	disque et seront faciles à récupérer par
	une personne malveillante.  Chiffrer l'espace de pagination
	peut être une solution contre ce scénario.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79272912"></a>19.17.2. Préparation</h3></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour le reste de cette section,
	  <code class="filename">ad0s1b</code> sera la partition
	  réservée à l'espace de
	  pagination.</p></div><p>Jusqu'ici l'espace de pagination n'a jamais
	été chiffré.  Il est fort possible qu'il
	y ait déjà des mots de passe ou toute autre
	donnée sensible de présents en clair sur les
	plateaux du disque.  Afin d'y remédier, les
	données de la partition de pagination doivent
	être écrasées avec des données
	aléatoires:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/random of=/dev/ad0s1b bs=1m</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79276368"></a>19.17.3. Chiffrer de l'espace de pagination avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a></h3></div></div></div><p>Si FreeBSD 6.0-RELEASE ou une version plus récente est
	utilisée, le suffixe <code class="literal">.bde</code> doit
	être ajouté au nom de périphérique
	sur la ligne du fichier <code class="filename">/etc/fstab</code>
	correspondant à cet espace de pagination:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/ad0s1b.bde         none            swap    sw              0       0</pre><p>Pour les systèmes antérieurs à FreeBSD
	6.0-RELEASE, la ligne suivante doit également
	être ajoutée à
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">gbde_swap_enable="YES"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79280464"></a>19.17.4. Chiffrage de l'espace de pagination avec
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a></h3></div></div></div><p>La procédure pour le chiffrage de l'espace de
	pagination avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> est similaire à celle pour
	l'utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a>.  Le suffixe
	<code class="literal">.eli</code> doit être ajouté au nom
	de périphérique sur la ligne du fichier
	<code class="filename">/etc/fstab</code> correspondant à cet
	espace de pagination:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
/dev/ad0s1b.eli         none            swap    sw              0       0</pre><p>Par défaut, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> utilise l'algorithme
	<acronym class="acronym">AES</acronym> avec une longueur de clé de
	256bits.</p><p>Les valeurs par défaut peuvent être
	modifiées en utilisant l'option
	<code class="literal">geli_swap_flags</code> dans le fichier
	<code class="filename">/etc/rc.conf</code>.  La ligne suivante demande
	à la procédure rc.d <code class="filename">encswap</code>
	de créer des partitions de pagination en utilisant
	l'algorithme Blowfish avec une clé de 128 bits de
	longueur, une taille de secteur de 4 kilo-octets et avec
	l'option <span class="quote">« <span class="quote">detach on last close</span> »</span> (détacher
	après démontage de la partition)
	activée:</p><pre class="programlisting">geli_swap_flags="-a blowfish -l 128 -s 4096 -d"</pre><p>Veuillez vous référer à la
	description de la commande <code class="command">onetime</code> dans la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> pour une liste des options
	possibles.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79294800"></a>19.17.5. Vérifier que cela fonctionne</h3></div></div></div><p>Une fois que le système a été
	redémarré, le fonctionnement correct de l'espace
	de pagination peut être vérifié en
	utilisant la commande <code class="command">swapinfo</code>.</p><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gbde&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gbde</span>(8)</span></a> est utilisé:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>swapinfo</code></strong>
Device          1K-blocks     Used    Avail Capacity
/dev/ad0s1b.bde    542720        0   542720     0%</pre><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geli&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">geli</span>(8)</span></a> est utilisé:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>swapinfo</code></strong>
Device          1K-blocks     Used    Avail Capacity
/dev/ad0s1b.eli    542720        0   542720     0%</pre></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp79104080" class="footnote"><p><a href="#idp79104080" class="para"><sup class="para">[10] </sup></a>Pour des conseils sur comment choisir une
	    phrase d'authentification sécurisée et facile
	    à retenir, consultez le site Web <a class="link" href="http://world.std.com/~reinhold/diceware.html" target="_top">Diceware
	    Passphrase</a>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="GEOM"></a>Chapitre 20. GEOM: architecture modulaire de gestion des disques</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#GEOM-synopsis">20.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#GEOM-intro">20.2. Introduction à GEOM</a></span></dt><dt><span class="sect1"><a href="#GEOM-striping">20.3. RAID0 - <span class="quote">« <span class="quote">Striping</span> »</span></a></span></dt><dt><span class="sect1"><a href="#GEOM-mirror">20.4. RAID1 - <span class="quote">« <span class="quote">mirroring</span> »</span></a></span></dt><dt><span class="sect1"><a href="#geom-ggate">20.5. Périphériques réseau <span class="quote">« <span class="quote">GEOM
      Gate</span> »</span></a></span></dt><dt><span class="sect1"><a href="#geom-glabel">20.6. Ajouter un label à un disque</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-synopsis"></a>20.1. Synopsis</h2></div></div></div><a id="idp79314000" class="indexterm"></a><a id="idp79314768" class="indexterm"></a><p>Ce chapitre couvre l'utilisation des disques via le
      système GEOM sous FreeBSD.  Cela comprend les utilitaires
      principaux de contrôle des niveaux <acronym class="acronym">RAID</acronym> qui
      utilisent GEOM pour la configuration.  Ce chapitre n'abordera
      pas en profondeur la manière dont GEOM gère et
      contrôle les E/S, les systèmes sous-jacents, ou le
      code utilisé.  Ces informations sont fournies par la page
      de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=geom&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">geom</span>(4)</span></a> et ses nombreuses
      références.  Ce chapitre n'est pas non plus un
      guide de référence sur les configurations
      <acronym class="acronym">RAID</acronym>.  Seuls les niveaux de
      <acronym class="acronym">RAID</acronym> supportés par GEOM seront
      abordés.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Quel type de support <acronym class="acronym">RAID</acronym> est
	  disponible avec GEOM.</p></li><li class="listitem"><p>Comment utiliser les utilitaires de base pour
	  configurer, gérer et manipuler les différents
	  niveaux de <acronym class="acronym">RAID</acronym>.</p></li><li class="listitem"><p>Comment dupliquer, entrelacer, et connecter à
	  distance des disques via le système GEOM.</p></li><li class="listitem"><p>Comment dépanner les disques attachés au
	  système GEOM.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre comment FreeBSD gère les disques
	  (<a class="xref" href="#disks" title="Chapitre 19. Stockage des données">Chapitre 19, <em>Stockage des données</em></a>).</p></li><li class="listitem"><p>Savoir comment configurer et installer un nouveau noyau
	  FreeBSD (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-intro"></a>20.2. Introduction à GEOM</h2></div></div></div><p>GEOM autorise l'accès et le contrôle de classes
      &#8212; secteur principaux de démarrage (<span class="quote">« <span class="quote">Master
      Boot Records</span> »</span>), labels <acronym class="acronym">BSD</acronym>, etc.
      &#8212; par l'intermédiaire d'interfaces, ou de fichiers
      spéciaux du répertoire <code class="filename">/dev</code>.  En supportant plusieurs
      configurations <acronym class="acronym">RAID</acronym> logicielles, GEOM offrira
      un accès transparent au système d'exploitation et
      à ses utilitaires.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-striping"></a>20.3. RAID0 - <span class="quote">« <span class="quote">Striping</span> »</span></h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp79337296" class="indexterm"></a><a id="idp79338064" class="indexterm"></a><p>Le <span class="quote">« <span class="quote">striping</span> »</span> (ou entrelacement) est
      utilisé pour combiner plusieurs disques en un seul volume
      de stockage.  Dans de nombreux cas, cette configuration est
      réalisée à l'aide de contrôleurs
      matériels.  Le sous-système GEOM offre le support
      pour le niveau <acronym class="acronym">RAID</acronym>0, également connu
      sous le nom de <span class="quote">« <span class="quote">striping</span> »</span>.</p><p>Dans un système <acronym class="acronym">RAID</acronym>0, les
      données sont divisées en blocs répartis sur
      l'ensemble des disques de la <span class="quote">« <span class="quote">grappe</span> »</span>.  Au lieu de
      devoir attendre l'écriture de 256k sur un disque, un
      système <acronym class="acronym">RAID</acronym>0 peut écrire en
      simultané 64k sur quatre disques différents,
      offrant alors des performances d'accès
      supérieures.  Ces performances peuvent être encore
      améliorées en utilisant plusieurs
      contrôleurs de disques.</p><p>Chaque disque d'une bande (<span class="quote">« <span class="quote">stripe</span> »</span>)
      <acronym class="acronym">RAID</acronym>0 doit avoir la même taille,
      puisque les requêtes d'E/S sont entrelacées de
      manière à lire ou écrire sur plusieurs
      disques en parallèle.</p><div class="mediaobject" align="center"><img src="geom/striping.png" align="middle" alt="Illustration de l'entrelacement de disques" /></div><div class="procedure"><a id="idp79349328"></a><div class="procedure-title">Procédure 20.1. Création d'un système entrelacé
	à partir de disques ATA non formatés</div><ol class="procedure" type="1"><li class="step"><p>Chargez le module
	  <code class="filename">geom_stripe</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload geom_stripe</code></strong></pre></li><li class="step"><p>Assurez-vous de l'existence d'un point de montage.  Si
	  ce volume doit devenir une partition racine, utilisez alors un
	  autre point de montage comme <code class="filename">/mnt</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /mnt</code></strong></pre></li><li class="step"><p>Déterminez les noms de
	  périphériques pour les disques qui seront
	  entrelacé, et créez le nouveau
	  périphérique entrelacé.  Par exemple, pour
	  entrelacer deux disques <acronym class="acronym">ATA</acronym> non
	  utilisés et non partitionnés, par exemple
	  <code class="filename">/dev/ad2</code> et
	  <code class="filename">/dev/ad3</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gstripe label -v st0 /dev/ad2 /dev/ad3</code></strong></pre></li><li class="step"><p>Créez un label standard, également connu
	  sous le nom de table des partitions, sur le nouveau volume et
	  installez le code d'amoraçage par défaut:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -wB /dev/stripe/st0</code></strong></pre></li><li class="step"><p>Cette opération doit avoir créé
	  deux autres périphériques dans le
	  répertoire <code class="filename">/dev/stripe</code> en plus du
	  périphérique <code class="filename">st0</code>:
	  <code class="filename">st0a</code> et
	  <code class="filename">st0c</code>.  A ce stade, un système de fichiers
	  peut être créé sur
	  <code class="filename">st0a</code> en utilisant la commande
	  <code class="command">newfs</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U /dev/stripe/st0a</code></strong></pre><p>Des nombres défileront à l'écran,
	  l'opération sera s'achèvera après
	  quelques secondes.  Le volume a été
	  créé et est prêt à être
	  monté.</p></li></ol></div><p>Pour
      monter manuellement une grappe de disques entrelacés
      fraîchement créée:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/stripe/st0a /mnt</code></strong></pre><p>Pour monter automatiquement au démarrage ce
      système de fichiers entrelacé, ajoutez les
      informations concernant ce volume dans le fichier
      <code class="filename">/etc/fstab</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "/dev/stripe/st0a /mnt ufs rw 2 2" \</code></strong>
    <strong class="userinput"><code>&gt;&gt; /etc/fstab</code></strong></pre><p>Le module <code class="filename">geom_stripe</code> doit également
      être automatiquement chargé lors de
      l'initialisation du système en ajoutant une ligne au
      fichier <code class="filename">/boot/loader.conf</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'geom_stripe_load="YES"' &gt;&gt; /boot/loader.conf</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="GEOM-mirror"></a>20.4. RAID1 - <span class="quote">« <span class="quote">mirroring</span> »</span></h2></div></div></div><a id="idp79382480" class="indexterm"></a><a id="idp79383248" class="indexterm"></a><p>Le <span class="quote">« <span class="quote">mirroring</span> »</span> est une technologie
      utilisée par de nombreuses entreprises et beaucoup de
      particuliers pour sauvegarder les données sans
      interruption des activités.  Quand un miroir existe, cela
      signifie que le disque B est une copie du disque A.  Ou, autre
      cas, que les disques C+D sont une copie des disques A+B.
      Indépendamment de la configuration des disques, l'aspect
      important est que les données d'un disque ou d'une
      partition sont dupliquées.  Ultérieurement, ces
      données pourront être plus facilement
      restaurées, sauvegardées sans interrompre le
      système ou les accès, et pourront même
      être stockées physiquement de manière
      sure.</p><p>Pour commencer, vérifiez que le système dispose de deux
      disques de taille identique, cet exemple suppose que ce sont des
      disques <acronym class="acronym">SCSI</acronym> (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=da&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">da</span>(4)</span></a>).</p><p>Installez FreeBSD sur le premier disque avec uniquement deux
      partitions.  Une partition sera la partition de pagination d'une
      taille double à celle de la <acronym class="acronym">RAM</acronym> et
      l'espace restant sera alloué au système de
      fichiers racine (<code class="filename">/</code>).  Il
      est possible d'avoir des partitions séparées pour
      les autres points de montage, cependant cela augmentera
      énormément le niveau de difficulté en
      raison des modifications manuelles nécessaires des
      paramètres de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bsdlabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bsdlabel</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdisk&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fdisk</span>(8)</span></a>.</p><p>Redémarrez et attendez l'initialisation
      complète du système.  Ensuite, ouvrez une session
      sous l'utilisateur <code class="systemitem">root</code>.</p><p>Créez le périphérique
      <code class="filename">/dev/mirror/gm</code> et liez-le avec
      <code class="filename">/dev/da1</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmirror label -vnb round-robin gm0 /dev/da1</code></strong></pre><p>Le système devrait répondre par:</p><pre class="screen">
Metadata value stored on /dev/da1.
Done.</pre><p>Initialisez GEOM, cela devrait charger le module du noyau
      <code class="filename">/boot/kernel/geom_mirror.ko</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmirror load</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette commande devrait créer le fichier
	spécial de périphérique
	<code class="filename">gm0</code> sous le répertoire
	<code class="filename">/dev/mirror</code>.</p></div><p>Installez un label <code class="command">fdisk</code> et un code de
      d'amorce génériques sur le nouveau
      périphérique <code class="filename">gm0</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fdisk -vBI /dev/mirror/gm0</code></strong></pre><p>Installez maintenant un label générique
      <code class="command">bsdlabel</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>bsdlabel -wB /dev/mirror/gm0s1</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">S'il existe plusieurs <span class="quote">« <span class="quote">slices</span> »</span> et plusieurs
	partitions, il faudra modifier les paramètres des deux
	commandes précédentes.  Elles doivent correspondre
	aux tailles des partitions et <span class="quote">« <span class="quote">slices</span> »</span> sur l'autre
	disque.</p></div><p>Utilisez l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> pour créer un
      système de fichiers <acronym class="acronym">UFS</acronym> sur le
      périphérique
      <code class="filename">gm0s1a</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -U /dev/mirror/gm0s1a</code></strong></pre><p>Le système devrait alors afficher un certain nombre
      d'informations et de nombres.  C'est bon signe.  Contrôlez
      l'affichage à la recherche de messages d'erreur et montez
      le périphérique sur le point de montage <code class="filename">/mnt</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/mirror/gm0s1a /mnt</code></strong></pre><p>Transférez maintenant toutes les données du
      disque de démarrage vers ce nouveau système de
      fichiers.  Dans notre exemple nous utilisons à cet effet
      les commandes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dump&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dump</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=restore&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">restore</span>(8)</span></a>, cependant la
      commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">dd</span>(1)</span></a> conviendrait également.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dump -L -0 -f- / |(cd /mnt &amp;&amp; restore -r -v -f-)</code></strong></pre><p>Cela doit être effectué pour chaque
      système de fichiers.  Placez simplement le système
      de fichiers approprié au bon endroit quand vous
      exécutez la commande précédente.</p><p>Editez ensuite le fichier
      <code class="filename">/mnt/etc/fstab</code> et supprimez ou mettez en
      commentaires le fichier de pagination
      <a href="#ftn.idp79418832" class="footnote" id="idp79418832"><sup class="footnote">[11]</sup></a>.  Modifiez les autres paramètres du
      système de fichiers pour utiliser le nouveau disque comme
      présenté l'exemple suivant:</p><pre class="programlisting"># Device                Mountpoint      FStype  Options         Dump    Pass#
#/dev/da0s2b             none            swap    sw              0       0
/dev/mirror/gm0s1a       /               ufs     rw              1       1</pre><p>Créez maintenant un fichier
      <code class="filename">boot.config</code> sur la partition racine actuelle
      et celle nouvellement créée.  Ce fichier
      <span class="quote">« <span class="quote">aidera</span> »</span> le <acronym class="acronym">BIOS</acronym> à
      déterminer correctement sur quel disque
      démarrer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "1:da(1,a)/boot/loader" &gt; /boot.config</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "1:da(1,a)/boot/loader" &gt; /mnt/boot.config</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Nous l'avons ajouter sur les deux partitions racines afin
	d'assurer un démarrage correct.  Si pour une raison
	quelconque le système ne pourrait le lire à partir
	de la nouvelle partition racine, une version de secours est
	disponible.</p></div><p>Assurez-vous que le module
      <code class="filename">geom_mirror.ko</code> sera chargé au
      démarrage du système en lançant la commande
      suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'geom_mirror_load="YES"' &gt;&gt; /mnt/boot/loader.conf</code></strong></pre><p>Redémarrez le système:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><p>Si tout s'est bien passé, le système a
      dû démarrer à partir du
      périphérique <code class="filename">gm0s1a</code> et
      une invite d'ouverture de session doit être
      affichée.  En cas de problème, consultez la
      section suivante consacrée au dépannage.  Ajoutez
      maintenant le disque <code class="filename">da0</code> au
      périphérique <code class="filename">gm0</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gmirror configure -a gm0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>gmirror insert gm0 /dev/da0</code></strong></pre><p>L'option <code class="option">-a</code> demande à
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gmirror&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">gmirror</span>(8)</span></a> d'utiliser une synchronisation automatique,
      c'est à dire dupliquer automatiquement toute
      écriture disque.  La page de manuel explique comment
      reconstruire et remplacer les disques, avec la différence
      qu'elle utilise <code class="filename">data</code> à la place
      de <code class="filename">gm0</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79437776"></a>20.4.1. Dépannage</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79438416"></a>20.4.1.1. Le système refuse de démarrer</h4></div></div></div><p>Si le démarrage du système s'interrompt
	  à une invite semblable à:</p><pre class="programlisting">ffs_mountroot: can't find rootvp
Root mount failed: 6
mountroot&gt;</pre><p>Redémarrez la machine à l'aide du bouton
	  de mise en marche ou de <span class="quote">« <span class="quote">reset</span> »</span>.  Au menu de
	  démarrage, sélectionnez la sixième
	  option (6).  Le système basculera alors vers une
	  invite du chargeur (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>).  Chargez manuellement
	  le module du noyau:</p><pre class="screen">OK? <strong class="userinput"><code>load geom_mirror</code></strong>
OK? <strong class="userinput"><code>boot</code></strong></pre><p>Si cela fonctionne, cela signifie que pour une raison
	  quelconque le module n'a pas été correctement
	  chargé.  Ajoutez la ligne:</p><pre class="programlisting">options	GEOM_MIRROR</pre><p>dans le fichier de configuration du noyau, recompilez-le
	  puis réinstallez-le.  Cela devrait corriger le
	  problème.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="geom-ggate"></a>20.5. Périphériques réseau <span class="quote">« <span class="quote">GEOM
      Gate</span> »</span></h2></div></div></div><p>GEOM supporte l'utilisation de périphériques
      distants, comme les disques durs, les CD-ROMs, les fichiers,
      etc. via l'utilisation des outils <span class="quote">« <span class="quote">gate</span> »</span>.  Ce
      mécanisme est semblable à
      <acronym class="acronym">NFS</acronym>.</p><p>Pour commencer, un fichier d'export doit être
      créé.  Ce fichier précise qui est
      autorisé à accéder aux ressources
      partagées et quel niveau d'accès est offert.  Par
      exemple, pour partager la quatrième tranche du premier
      disque <acronym class="acronym">SCSI</acronym>, le fichier
      <code class="filename">/etc/gg.exports</code> suivant est
      adapté:</p><pre class="programlisting">192.168.1.0/24 RW /dev/da0s4d</pre><p>Cette ligne autorisera l'accès au système de
      fichiers présent sur la partition
      <code class="filename">da0s4d</code> à toutes les machines du
      réseau local.</p><p>Pour exporter ce périphérique, assurez-vous
      tout d'abord qu'il n'est pas déjà monté et
      lancez le <span class="quote">« <span class="quote">démon</span> »</span> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ggated&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ggated</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ggated</code></strong></pre><p>Maintenant pour monter le périphérique sur la
      machine cliente, tapez les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ggatec create -o rw 192.168.1.1 /dev/da0s4d</code></strong>
ggate0
<code class="prompt">#</code> <strong class="userinput"><code>mount /dev/ggate0 /mnt</code></strong></pre><p>A partir d'ici, on peut accéder au
      périphérique par l'intermédiaire du point
      de montage <code class="filename">/mnt</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il est à noter que toutes ces opérations
      échoueront si le disque est déjà
      monté soit sur la machine serveur soit sur tout autre
      machine du réseau.</p></div><p>Quand le périphérique n'est plus
      utilisé, il peut être démonté sans
      risque avec la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a> de la même
      manière que pour tout autre disque.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="geom-glabel"></a>20.6. Ajouter un label à un disque</h2></div></div></div><a id="idp79464912" class="indexterm"></a><a id="idp79465680" class="indexterm"></a><p>Lors de l'initialisation du système, le noyau FreeBSD
      créé les fichiers spéciaux de
      périphériques à mesure que les
      périphériques sont détectés.  Cette
      méthode de détection des
      périphériques soulève quelques
      problèmes, par exemple que se passe-t-il si un nouveau
      disque est ajouté par l'intermédiaire de
      l'interface <acronym class="acronym">USB</acronym>?  Il est très probable
      qu'un disque flash se verra proposer le nom de
      périphérique <code class="filename">da0</code> et le
      périphérique original <code class="filename">da0</code>
      déplacé en <code class="filename">da1</code>.  Cela
      sera à l'origine de problèmes de montage des
      systèmes de fichiers s'ils sont listés dans
      <code class="filename">/etc/fstab</code>, en fait cela pourra tout
      simplement empêcher le démarrage du
      système.</p><p>Une solution à ce problème est
      d'<span class="quote">« <span class="quote">enchaîner</span> »</span> les périphériques
      <acronym class="acronym">SCSI</acronym> afin que tout nouveau
      périphérique ajouté sur la carte
      <acronym class="acronym">SCSI</acronym> se voit assigné un numéro
      de périphérique non-utilisé.  Mais qu'en
      est-il des périphériques <acronym class="acronym">USB</acronym>
      qui peuvent remplacer le premier disque <acronym class="acronym">SCSI</acronym>?
      Cela se produit parce que les périphériques
      <acronym class="acronym">USB</acronym> sont en général
      détectés avant la carte <acronym class="acronym">SCSI</acronym>.
      Une solution est de brancher ces périphériques
      qu'après le démarrage du système.  Une
      autre méthode serait de n'utiliser qu'un seul disque
      <acronym class="acronym">ATA</acronym> et de ne jamais lister de
      périphériques <acronym class="acronym">SCSI</acronym> dans le
      fichier <code class="filename">/etc/fstab</code>.</p><p>Une meilleure solution existe.  En employant l'utilitaire
      <code class="command">glabel</code>, un administrateur ou un utilisateur
      peut attribuer un label à chacun de ses disques et
      utiliser ces labels dans <code class="filename">/etc/fstab</code>.  Comme
      <code class="command">glabel</code> conserve le label sur le dernier
      secteur du support concerné, le label persistera
      après redémarrage du système.  En utilisant
      ce label comme un véritable périphérique,
      le système de fichiers pourra toujours être
      monté indépendamment du fichier spécial de
      périphérique utilisé pour y
      accéder.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cela se fait sans préciser qu'un label sera
	permanent.  L'utilitaire <code class="command">glabel</code> peut
	être utilisé pour créer des labels
	persistants et des labels éphémères.
	Seul le label persistant sera conservé après
	redémarrage du système.  Consultez la page de
	manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=glabel&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">glabel</span>(8)</span></a> pour plus d'information sur les
	différences entre labels.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79481040"></a>20.6.1. Types et exemples de labels</h3></div></div></div><p>Il existe deux types de label, un label
	générique et un label de système de
	fichiers.  La différence entre les labels est le
	système d'auto-détection associé avec les
	labels permanents, et le fait que ce type de label sera
	persistant après redémarrage du système.
	A ces labels est attribué un sous-répertoire
	spécifique de <code class="filename">/dev</code> dont le nom sera basé
	sur le type de système de fichiers.  Par exemple, les
	labels de systèmes de fichiers <acronym class="acronym">UFS</acronym>2
	seront créés dans le répertoire <code class="filename">/dev/ufs2</code>.</p><p>Un label générique disparaîtra au
	redémarrage suivant.  Ces labels seront
	créés dans le répertoire <code class="filename">/dev/label</code> et sont parfaits pour
	faire des expériences.</p><p>Les labels permanents peuvent être placés sur
	le système de fichiers en utilisant les utilitaires
	<code class="command">tunefs</code> ou <code class="command">newfs</code>.  Pour
	créer un label permanent pour un système de
	fichier <acronym class="acronym">UFS</acronym>2 sans endommager de
	données, utilisez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>tunefs -L home /dev/da3</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si le système de fichiers est plein, cette
	  opération pourra entraîner une corruption des
	  données; si le système de fichiers est plein,
	  alors la première chose à faire sera de
	  supprimer les fichiers inutiles et non pas l'ajout de
	  labels.</p></div><p>Un nouveau label devrait désormais apparaître
	dans <code class="filename">/dev/ufs2</code> et
	pourra être ajouté à
	<code class="filename">/etc/fstab</code>:</p><pre class="programlisting">/dev/ufs2/home		/home            ufs     rw              2      2</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le système de fichiers ne doit pas être
	  monté lors de l'utilisation de
	  <code class="command">tunefs</code>.</p></div><p>Le système de fichiers peut, maintenant, être
	normalement monté:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /home</code></strong></pre><p>La commande suivante peut être employée pour
	supprimer le label:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>glabel destroy home</code></strong></pre><p>A partir de cet instant, aussi longtemps que le module du
	noyau <code class="filename">geom_label.ko</code> est chargé au
	démarrage avec <code class="filename">/boot/loader.conf</code>
	ou que l'option <code class="literal">GEOM_LABEL</code> est
	présente dans le noyau, le fichier spécial de
	périphérique peut changer sans effet
	négatif pour le système.</p><p>Les systèmes de fichiers peuvent également
	être créés avec un label par défaut
	en utilisant l'option <code class="option">-L</code> avec
	<code class="command">newfs</code>.  Consultez la page de manuel de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> pour plus d'information.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp79418832" class="footnote"><p><a href="#idp79418832" class="para"><sup class="para">[11] </sup></a>Il est à noter que commenter l'entrée de
	  l'espace de pagination dans <code class="filename">fstab</code> vous
	  demandera très probablement de mettre en place une
	  méthode différente pour activer l'espace de
	  pagination.  Veuillez vous référer à
	  la <a class="xref" href="#adding-swap-space" title="12.14. Ajouter de l'espace de pagination">Section 12.14, « Ajouter de l'espace de pagination »</a> pour plus
	  d'informations.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="vinum-vinum"></a>Chapitre 21. Le gestionnaire de volume Vinum</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#vinum-synopsis">21.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#vinum-intro">21.2. Les disques sont trop petits</a></span></dt><dt><span class="sect1"><a href="#idp79520976">21.3. Les goulots d'étranglement d'accès aux
      données</a></span></dt><dt><span class="sect1"><a href="#idp79543504">21.4. Intégrité des données</a></span></dt><dt><span class="sect1"><a href="#vinum-objects">21.5. Objets Vinum</a></span></dt><dt><span class="sect1"><a href="#vinum-examples">21.6. Quelques exemples</a></span></dt><dt><span class="sect1"><a href="#idp79644368">21.7. Appellation des objets</a></span></dt><dt><span class="sect1"><a href="#vinum-config">21.8. Configuration de Vinum</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-synopsis"></a>21.1. Synopsis</h2></div></div></div><p>Peu importe les disques dont vous disposez, ils seront
      toujours limités:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ils pourront être trop petits.</p></li><li class="listitem"><p>Ils pourront être trop lents.</p></li><li class="listitem"><p>Ils pourront être peu fiables.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-intro"></a>21.2. Les disques sont trop petits</h2></div><div><span class="authorgroup">Ecrit à l'origine par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Greg</span> <span class="surname">Lehey</span></span>. </span></div></div></div><a id="idp79518032" class="indexterm"></a><a id="idp79518544" class="indexterm"></a><p><span class="emphasis"><em>Vinum</em></span> est un
      <span class="emphasis"><em>gestionnaire de volume</em></span>, un pilote de disque
      virtuel qui permet de résoudre ces trois problèmes.
      Regardons-les plus en détails.  De nombreuses solutions à
      ces problèmes ont été proposées et
      implémentées:</p><p>Les disques deviennent de plus en plus gros, mais tout comme
      les besoins en stockage.  Vous vous apercevrez souvent que vous
      avez besoin d'un système de fichiers plus grand que les disques
      que vous avez à votre disposition.  Bien évidemment,
      ce problème n'est plus aussi aigu qu'il l'était il y
      a de cela dix ans, mais il existe toujours.  Certains systèmes
      l'ont résolu en créant un périphérique
      abstrait qui stocke ses données sur plusieurs disques.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp79520976"></a>21.3. Les goulots d'étranglement d'accès aux
      données</h2></div></div></div><p>Les systèmes modernes ont fréquemment besoin
      d'accéder aux données d'une manière hautement
      concourante.  Par exemple, d'importants serveurs FTP ou HTTP
      peuvent supporter des milliers de sessions concourantes et avoir
      de multiple connexions à 100 Mbit/s vers le monde
      extérieur, et
      cela bien au-delà du taux de transfert soutenu de la plupart des
      disques.</p><p>Les disques actuels peuvent effectuer des transfert
      séquentiels de données jusqu'à une vitesse de
      70 MO/s, mais ce chiffre a peu d'importance dans un
      environnement où plusieurs processus indépendants
      accèdent à un disque, où l'on pourra n'atteindre
      qu'une fraction de cette valeur.  Dans de tels cas il est plus
      intéressant de voir le problème du point de vue du
      sous-système des disques:
      le paramètre important est la charge que provoque un transfert
      sur le sous-système, en d'autres termes le temps d'occupation
      du disque impliqué dans le transfert.</p><p>Dans n'importe quel transfert, le disque doit tout d'abord
      positionner les têtes de lecture, attendre le passage du premier
      secteur sous la tête de lecture, puis effectuer le transfert.
      Ces actions peuvent être considérées comme
      étant atomiques: cela n'a aucun sens de les interrompre.</p><p><a id="vinum-latency"></a>
      Considérons un transfert typique d'environ 10 KO: la
      génération actuelle de disques hautes performances peuvent
      positionner leurs têtes en environ 3.5 ms.  Les disques les
      plus véloces tournent à 15000 tr/minute, donc le
      temps de latence moyen de rotation (un demi-tour) est de 2 ms.
      A 70 MO/s, le transfert en lui-même prend environ
      150 &#956;s, presque rien comparé au temps de positionnement.
      Dans un tel cas, le taux de transfert effectif tombe à un peu
      plus de 1 MO/s et est clairement hautement dépendant de la
      taille du transfert.</p><p>La solution classique et évidente à ce goulot
      d'étranglement est &#8220;plus de cylindres&#8221;:
      plutôt que d'utiliser un gros disque, on utilise plusieurs
      disques plus petits avec le même espace de stockage.
      Chaque disque est en mesure d'effectuer un transfert
      indépendamment des autres, aussi le taux de sortie augmente d'un
      facteur proche du nombre de disques utilisés.</p><p>L'amélioration du taux réel de sortie est,
      naturellement, inférieure au nombre de disques impliqués:
      bien que chaque disque soit capable de transférer en
      parallèle, il n'y a aucun
      moyen de s'assurer que les requêtes sont distribuées
      équitablement entre les disques.  Inévitablement
      la charge d'un disque sera plus importante que celle d'un autre.</p><a id="idp79524176" class="indexterm"></a><a id="idp79529552" class="indexterm"></a><p>La répartition de la charge sur les disques dépend
      fortement de la manière dont les données sont
      partagées entre les disques.  Dans la discussion suivant, il
      sera pratique de penser au stockage disque en tant qu'un grand
      nombre de secteurs qui sont adressables par l'intermédiaire d'un
      nombre, plutôt que comme les pages d'un livre.  La méthode
      la plus évidente est de diviser le disque virtuel en groupes de
      secteurs consécutifs de taille égale aux disques physiques
      individuels et de les stocker de cette manière, plutôt que de
      les prendre comme un gros livre et de le déchirer en
      petites sections.  Cette méthode est appelée
      <span class="emphasis"><em>concaténation</em></span> et a pour avantage que
      les disques n'ont pas besoin d'avoir de rapport spécifique au
      niveau de leur taille respective.  Cela fonctionne bien quand
      l'accès au disque virtuel est réparti de façon
      identique sur son espace d'adressage.  Quand l'accès est
      limité à une petite
      zone, l'amélioration est moins marquée.  <a class="xref" href="#vinum-concat" title="Figure 21.1. Organisation par concaténation">Figure 21.1, « Organisation par concaténation »</a> décrit la séquence dans laquelle les
      unités sont assignées dans une organisation par
      concaténation.</p><p>
      </p><div class="figure"><a id="vinum-concat"></a><div class="figure-title">Figure 21.1. Organisation par concaténation</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-concat.png" alt="Organisation par concaténation" /></div></div></div><p><br class="figure-break" />
    </p><a id="idp79533776" class="indexterm"></a><a id="idp79534928" class="indexterm"></a><a id="idp79536080" class="indexterm"></a><a id="idp79536976" class="indexterm"></a><p>Une organisation alternative est de diviser l'espace
      adressable en composants plus petits, de même taille et de les
      stocker séquentiellement sur différents
      périphériques.  Par exemple, les 256 premiers secteurs
      peuvent être stockés sur le premier disque, les 256
      secteurs suivants sur le disque suivant et ainsi de suite.
      Après avoir atteint le dernier disque, le processus se
      répète
      jusqu'à ce que les disques soient pleins.  Cette organisation
      est appelée <span class="emphasis"><em>striping</em></span> (découpage en
      bande ou segmentation) ou <acronym class="acronym">RAID-0</acronym>

    <a href="#ftn.idp79539152" class="footnote" id="idp79539152"><sup class="footnote">[12]</sup></a>.</p><p>La segmentation exige légèrement plus d'effort pour
	localiser les données, et peut causer une charge additionnelle
	d'E/S quand un transfert est réparti sur de multiples disques,
	mais il peut également fournir une charge plus constante sur
	les disques.  <a class="xref" href="#vinum-striped" title="Figure 21.2. Organisation segmentée">Figure 21.2, « Organisation segmentée »</a> illustre l'ordre
	dans lequel les unités de stockage sont assignées dans une
	organisation segmentée.</p><p>
      </p><div class="figure"><a id="vinum-striped"></a><div class="figure-title">Figure 21.2. Organisation segmentée</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-striped.png" alt="Organisation segmentée" /></div></div></div><p><br class="figure-break" />
    </p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp79543504"></a>21.4. Intégrité des données</h2></div></div></div><p>Le dernier problème avec les disques actuels est qu'ils ne
	sont pas fiables.  Bien que la fiabilité des disques s'est
	énormément améliorée depuis quelques
	années, ils sont toujours
	le composant principal d'un serveur le plus susceptible de
	tomber en panne.  Et quand cela arrive, les résultats peuvent
	être catastrophiques: remplacer un disque en panne et
	restaurer les données peut prendre plusieurs jours.</p><a id="idp79544528" class="indexterm"></a><a id="idp79545808" class="indexterm"></a><a id="idp79546960" class="indexterm"></a><a id="idp79548112" class="indexterm"></a><p>La méthode originelle d'approche de ce problème
	fut le mode <span class="emphasis"><em>miroir</em></span>, en conservant deux
	copies des données sur un matériel différent.
	Depuis l'avènement de la technologie <acronym class="acronym">RAID</acronym>,
	cette technique est également nommée <acronym class="acronym">RAID niveau
	1</acronym> ou <acronym class="acronym">RAID-1</acronym>.  Toute opération
	d'écriture sur le volume écrit sur les deux
	unités; une lecture peut être acquittée par
	l'une ou l'autre, aussi si l'un des disque tombe en panne, les
	données sont toujours accessibles sur l'autre disque.</p><p>Le mode miroir présente deux problèmes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le prix.  Il demande au moins deux fois autant
	      d'espace disque qu'une solution non-redondante.</p></li><li class="listitem"><p>L'impact sur la performance.  Les écritures doivent
	      être effectuées sur les deux disques, elles prennent
	      donc deux fois plus de bande passante que sur un volume
	      sans miroir.  Les lectures de souffrent pas de baisse de
	      performance: elles semblent même plus rapides.</p></li></ul></div><p><a id="idp79557584" class="indexterm"></a>
	Une alternative est l'utilisation de la
	<span class="emphasis"><em>parité</em></span>, implémentée sous
	les niveaux <acronym class="acronym">RAID</acronym> 2, 3, 4 et 5.  De ces niveaux
	<acronym class="acronym">RAID-5</acronym> est le plus intéressant.  Comme
	implémenté dans Vinum, c'est une variante de
	l'organisation segmentée qui dédie un bloc de chaque
	segment à la parité des autres blocs.  Comme
	implémenté dans Vinum, un volume
	<acronym class="acronym">RAID-5</acronym> est identique à un volume
	segmenté, sauf qu'il implémente
	<acronym class="acronym">RAID-5</acronym> en incluant un bloc de parité dans
	chaque unité.  Comme l'exige <acronym class="acronym">RAID-5</acronym>,
	l'emplacement de ce bloc de parité varie d'une unité
	à l'autre.  Le nombre de blocs de données indique le
	nombre relatif de blocs.</p><p>
	</p><div class="figure"><a id="vinum-raid5-org"></a><div class="figure-title">Figure 21.3. Organisation RAID-5</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-raid5-org.png" alt="Organisation RAID-5" /></div></div></div><p><br class="figure-break" />
      </p><p>Comparé au mode miroir, <acronym class="acronym">RAID-5</acronym> a pour
	avantage de demander un espace de stockage significativement
	plus faible.  L'accès en lecture est semblable à celui de
	l'organisation segmentée, mais l'accès en écriture
	est bien plus lent, approximativement 25% des performances en lecture.
	Si un disque tombe en panne, l'ensemble peut continuer à
	fonctionner dans un mode dégradé: une lecture sur un
	disque restant accessible se poursuit normalement, mais une lecture
	du disque perdu est recalculée à partir du bloc
	correspondant sur l'ensemble des disques restants.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-objects"></a>21.5. Objets Vinum</h2></div></div></div><p>Afin de résoudre ces problèmes,
	Vinum implémente une hiérarchie d'objets à quatre
	niveaux:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'objet le plus visible est le disque virtuel,
	    appelé <span class="emphasis"><em>volume</em></span>.  Les volumes ont
	    essentiellement les mêmes propriétés qu'un
	    disque UNIX&#8482;, bien qu'il y ait quelques différences
	    mineures.  Ils n'ont aucune limitation de taille.</p></li><li class="listitem"><p>Les volumes sont composés de
	    <span class="emphasis"><em>plexes</em></span>, chacune d'entre elles
	    représente l'ensemble de l'espace d'adressable d'un
	    volume.  Ce niveau dans la hiérarchie permet ainsi la
	    redondance.  Pensez aux plexes comme différents disques
	    dans un ensemble miroir, chacun contenant les mêmes
	    données.</p></li><li class="listitem"><p>Comme Vinum existe dans le système de stockage disque
	    d'UNIX&#8482;, il serait possible d'utiliser les
	    partitions UNIX&#8482; pour construire des blocs pour des
	    plexes à disques multiples, mais en fait cela ne serait
	    pas suffisamment flexible: les disques UNIX&#8482; ne
	    peuvent avoir qu'un nombre limités de partitions.
	    Au lieu de cela Vinum subdivise une simple partition
	    UNIX&#8482; (le <span class="emphasis"><em>disque</em></span>) en zones
	    contiguës appelées <span class="emphasis"><em>sous-disques</em></span>,
	    qui sont utilisés comme bloc pour construire les
	    plexes.</p></li><li class="listitem"><p>Les sous-disques résident sur le
	    <span class="emphasis"><em>disque</em></span> Vinum, en fait les partitions
	    UNIX&#8482;.  Les disques Vinum peuvent contenir un nombre
	    quelconque de sous-disque.  A l'exception d'une petite
	    zone au début du disque, qui est utilisée pour stocker
	    les informations de configuration et d'état,
	    l'intégralité
	    du disque est disponible pour le stockage des
	    données.</p></li></ul></div><p>Les sections suivantes décrivent la façon dont
	ces objets fournissent les fonctionnalités requises pour
	Vinum.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79574608"></a>21.5.1. Considérations sur la taille des volumes</h3></div></div></div><p>Les plexes peuvent comprendre de multiple sous-disques
	répartis sur tous les disques dans la configuration Vinum.
	Par conséquent, la taille d'un disque ne limite pas la taille
	d'une plex, et donc d'un volume.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79575760"></a>21.5.2. Stockage de données redondant</h3></div></div></div><p>Vinum implémente le mode miroir en attachant de multiples
	plexes à un volume.  Un volume peut contenir entre une et huit
	plexes.</p><p>Bien qu'une plex représente les données
	complètes d'un volume, il est possible que des parties de la
	représentation soient physiquement manquantes, soit en raison
	de la mise en place (en définissant un sous-disque comme ne
	faisant pas partie de la plex) ou par accident (en raison de
	la panne d'un disque).  Tant qu'au moins une plex peut fournir les
	données de l'intégralité de la plage d'adresse
	d'un volume, le volume est totalement fonctionnel.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79577296"></a>21.5.3. Problèmes de performance</h3></div></div></div><p>Vinum implémente la concaténation et la
	segmentation au niveau de la plex:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Une <span class="emphasis"><em>plex concaténée</em></span>
	    utilise alternativement l'espace d'adresse de chaque
	    sous-disque.</p></li><li class="listitem"><p>Une <span class="emphasis"><em>plex segmentée</em></span> segmente les
	    données sur chaque sous-disque.  Les sous-disques doivent
	    avoir la même taille, et il doit y avoir au moins deux
	    sous-disques pour distinguer la plex d'une plex
	    concaténée.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79581264"></a>21.5.4. Quelle organisation de plex?</h3></div></div></div><p>La version de Vinum fournie avec FreeBSD 10.1
	implémente deux type de plexes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les plexes concaténées sont les plus
	    flexibles: elles peuvent contenir un nombre quelconque de
	    de sous-disques, et les sous-disques peuvent être de
	    taille différentes.  La plex peut être étendue
	    en ajoutant des sous-disques supplémentaires.  Elles
	    demandent moins de temps <acronym class="acronym">CPU</acronym> que les
	    plexes segmentées, bien que la différence en charge
	    <acronym class="acronym">CPU</acronym> ne soit pas mesurable.  D'autre
	    part, elles sont plus susceptibles d'échauffement,
	    là où un disque est très actif et les autres
	    sont au repos.</p></li><li class="listitem"><p>Le plus grand avantage des plexes segmentées
	    (<acronym class="acronym">RAID-0</acronym>) est qu'elles réduisent
	    les problèmes d'échauffement: en choisissant tailles
	    de segments optimales (environ 256 KO), vous pouvez
	    également réduire la charge des disques.  Les
	    inconvénients de cette approche sont un code (infimement)
	    plus complexe et des restrictions sur les sous-disques:
	    ils doivent être de la même taille, et agrandir une plex
	    en ajoutant de nouveaux sous-disques est si complexe que
	    Vinum ne l'implémente pas actuellement.  Vinum
	    impose une restriction triviale supplémentaire: une plex
	    segmentée doit avoir au moins deux sous-disques, puisque
	    sinon elle ne serait distinguable d'une plex
	    concaténée.</p></li></ul></div><p><a class="xref" href="#vinum-comparison" title="Tableau 21.1. Organisations de plex Vinum">Tableau 21.1, « Organisations de plex Vinum »</a> résume les avantages et
	inconvénients de chaque type d'organisation de plex.</p><div class="table"><a id="vinum-comparison"></a><div class="table-title">Tableau 21.1. Organisations de plex Vinum</div><div class="table-contents"><table summary="Organisations de plex Vinum" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>Type de plex</th><th>Nombre minimal de sous-disques</th><th>Possibilité d'ajout de sous-disques</th><th>Doivent être de même taille</th><th>Application</th></tr></thead><tbody><tr><td>concaténée</td><td>1</td><td>oui</td><td>non</td><td>Stockage de grandes quantités de données
		avec le maximum de flexibilité en terme de placement
		et des performances modérées</td></tr><tr><td>segmentée</td><td>2</td><td>non</td><td>oui</td><td>Haute performance combinée avec un accès
		hautement concourant</td></tr></tbody></table></div></div><br class="table-break" /></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-examples"></a>21.6. Quelques exemples</h2></div></div></div><p>Vinum maintient une <span class="emphasis"><em>base de données de
      configuration</em></span> qui décrit les objets connus pour un
      système individuel.  Initialement, l'utilisateur créé
      la base de données de configuration à partir d'un ou
      plusieurs fichiers de configuration avec l'aide de l'utilitaire
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>.  Vinum conserve une copie de sa base de données
      de configuration sur chaque tranche (que Vinum nomme
      <span class="emphasis"><em>device</em></span>) sous son contrôle.  Cette
      base données est mise à jour à chaque changement
      d'état, aussi un redémarrage reconstitue exactement
      l'état de chaque objet Vinum.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79602384"></a>21.6.1. Le fichier de configuration</h3></div></div></div><p>Le fichier de configuration décrit les objets Vinum.
	La définition d'un simple volume pourrait être:</p><pre class="programlisting">
    drive a device /dev/da3h
    volume myvol
      plex org concat
        sd length 512m drive a</pre><p>Ce fichier décrit quatre objets Vinum:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La ligne <span class="emphasis"><em>drive</em></span> une partition
	    disque (<span class="emphasis"><em>drive</em></span>) et son emplacement
	    relatif par rapport au matériel sous-jacent.  On lui donne
	    le nom symbolique <span class="emphasis"><em>a</em></span>.  Cette
	    séparation entre le nom symbolique et le nom du
	    périphérique permet aux disques d'être
	    déplacés d'un emplacement à un autre sans
	    confusion possible.</p></li><li class="listitem"><p>La ligne <span class="emphasis"><em>volume</em></span> décrit un volume.
	    Le seul attribut nécessaire est le nom, dans notre cas
	    <span class="emphasis"><em>myvol</em></span>.</p></li><li class="listitem"><p>La ligne <span class="emphasis"><em>plex</em></span> définit
	    une plex.  Le seul paramètre requit est l'organisation,
	    dans ce cas <span class="emphasis"><em>concat</em></span>.  Aucun nom n'est
	    nécessaire: le système génère
	    automatiquement un nom à partir du nom de volume en
	    ajoutant le suffixe
	    <span class="emphasis"><em>.p</em></span><span class="emphasis"><em>x</em></span>, où
	    <span class="emphasis"><em>x</em></span> est le nombre de plexes dans le volume.
	    Donc cette plex sera appelée
	    <span class="emphasis"><em>myvol.p0</em></span>.</p></li><li class="listitem"><p>La ligne <span class="emphasis"><em>sd</em></span> décrit un
	    sous-disque.  Les spécifications minimales sont le nom du
	    disque sur lequel le stocker et la taille du sous-disque.
	    Comme pour les plexes, aucun nom n'est nécessaire: le
	    système assignera automatiquement des noms
	    dérivés du nom de la plex en ajoutant le
	    suffixe <span class="emphasis"><em>.s</em></span><span class="emphasis"><em>x</em></span>,
	    où <span class="emphasis"><em>x</em></span> est le nombre de sous-disques
	    dans la plex.  Donc Vinum donnera le nom
	    <span class="emphasis"><em>myvol.p0.s0</em></span> à ce sous-disque.</p></li></ul></div><p>Après avoir traité ce fichier
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a> affiche ce qui suit:</p><pre class="programlisting">
      <code class="prompt">#</code> vinum -&gt; <code class="command">create config1</code>
      Configuration summary
      Drives:         1 (4 configured)
      Volumes:        1 (4 configured)
      Plexes:         1 (8 configured)
      Subdisks:       1 (16 configured)

	D a                     State: up       Device /dev/da3h        Avail: 2061/2573 MB (80%)

	V myvol                 State: up       Plexes:       1 Size:        512 MB

	P myvol.p0            C State: up       Subdisks:     1 Size:        512 MB

	S myvol.p0.s0           State: up       PO:        0  B Size:        512 MB</pre><p>Cette sortie affiche une brève liste du format
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>.  Elle est représentée graphiquement
	dans <a class="xref" href="#vinum-simple-vol" title="Figure 21.4. Un simple volume Vinum">Figure 21.4, « Un simple volume Vinum »</a>.</p><p>
	</p><div class="figure"><a id="vinum-simple-vol"></a><div class="figure-title">Figure 21.4. Un simple volume Vinum</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-simple-vol.png" alt="Un simple volume Vinum" /></div></div></div><p><br class="figure-break" />
      </p><p>Cette figure, et celles qui suivent, représentent un
	volume qui contient les plexes, qui à leur tour contiennent
	les sous-disques.  Dans cet exemple trivial, le volume
	contient une plex, et la plex contient un sous-disque.</p><p>Ce volume particulier ne présente aucun avantage
	spécifique par rapport à une partition de disque
	conventionnelle.  Il contient une seule plex, donc il n'est
	pas redondant.  La plex contient un seul sous-disque, il n'y a
	donc pas de différence dans l'organisation du stockage des
	données par rapport à une partition de disque
	conventionnelle.  Les sections suivantes présenteront
	diverses méthodes de configuration plus
	intéressantes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79624528"></a>21.6.2. Robustesse accrue: le mode miroir</h3></div></div></div><p>La robustesse d'un volume peut être
	augmentée par le mode miroir.  Quand on implémente
	un volume en mode miroir, il est important de s'assurer que
	les sous-disques de chaque plex sont sur des disques
	différents, de sorte qu'une panne disque ne mette hors service
	les deux plexes.  La configuration suivante place en mode
	miroir un volume:</p><pre class="programlisting">
	drive b device /dev/da4h
	volume mirror
      plex org concat
        sd length 512m drive a
	  plex org concat
	    sd length 512m drive b</pre><p>Dans cet exemple, il n'était pas nécessaire de
	spécifier une définition de disque
	<span class="emphasis"><em>a</em></span> à nouveau,
	puisque Vinum garde trace de tous les objets dans sa base de
	données de configuration.  Après le traitement de cette
	définition, la configuration ressemble à:</p><pre class="programlisting">
	Drives:         2 (4 configured)
	Volumes:        2 (4 configured)
	Plexes:         3 (8 configured)
	Subdisks:       3 (16 configured)

	D a                     State: up       Device /dev/da3h        Avail: 1549/2573 MB (60%)
	D b                     State: up       Device /dev/da4h        Avail: 2061/2573 MB (80%)

    V myvol                 State: up       Plexes:       1 Size:        512 MB
    V mirror                State: up       Plexes:       2 Size:        512 MB

    P myvol.p0            C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p0           C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p1           C State: initializing     Subdisks:     1 Size:        512 MB

    S myvol.p0.s0           State: up       PO:        0  B Size:        512 MB
	S mirror.p0.s0          State: up       PO:        0  B Size:        512 MB
	S mirror.p1.s0          State: empty    PO:        0  B Size:        512 MB</pre><p><a class="xref" href="#vinum-mirrored-vol" title="Figure 21.5. Un volume Vinum en mode miroir">Figure 21.5, « Un volume Vinum en mode miroir »</a> présente la
	structure sous forme graphique.</p><p>
	</p><div class="figure"><a id="vinum-mirrored-vol"></a><div class="figure-title">Figure 21.5. Un volume Vinum en mode miroir</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-mirrored-vol.png" alt="Un volume Vinum en mode miroir" /></div></div></div><p><br class="figure-break" />
      </p><p>Dans cet exemple, chaque plex contient un espace
	d'adressage de 512 MO.  Comme dans l'exemple
	précédent, chaque plex contient seulement un seul
	sous-disque.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79630288"></a>21.6.3. Optimiser les performances</h3></div></div></div><p>Le volume en mode miroir de l'exemple précédent
	est plus résistant aux pannes qu'un volume sans miroir,
	mais ses performances sont moindres: chaque écriture sur le
	volume demande d'écrire sur les deux disques, utilisant alors
	une plus grande proportion de la bande passante disque totale.
	Des considérations sur les performances demandent une
	approche différente: à la place d'un miroir, les
	données sont segmentées sur autant de disques que
	possible.  La configuration suivante montre un volume avec une plex
	segmentée sur quatre disques:</p><pre class="programlisting">
	drive c device /dev/da5h
	drive d device /dev/da6h
	volume stripe
	plex org striped 512k
	  sd length 128m drive a
	  sd length 128m drive b
	  sd length 128m drive c
	  sd length 128m drive d</pre><p>Comme précédemment, il n'est pas nécessaire de
	définir les disques qui sont déjà connus de Vinum.
	Après traitement de cette définition, la configuration
	ressemble à:</p><pre class="programlisting">
	Drives:         4 (4 configured)
	Volumes:        3 (4 configured)
	Plexes:         4 (8 configured)
	Subdisks:       7 (16 configured)

    D a                     State: up       Device /dev/da3h        Avail: 1421/2573 MB (55%)
    D b                     State: up       Device /dev/da4h        Avail: 1933/2573 MB (75%)
    D c                     State: up       Device /dev/da5h        Avail: 2445/2573 MB (95%)
    D d                     State: up       Device /dev/da6h        Avail: 2445/2573 MB (95%)

    V myvol                 State: up       Plexes:       1 Size:        512 MB
    V mirror                State: up       Plexes:       2 Size:        512 MB
    V striped               State: up       Plexes:       1 Size:        512 MB

    P myvol.p0            C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p0           C State: up       Subdisks:     1 Size:        512 MB
    P mirror.p1           C State: initializing     Subdisks:     1 Size:        512 MB
    P striped.p1            State: up       Subdisks:     1 Size:        512 MB

    S myvol.p0.s0           State: up       PO:        0  B Size:        512 MB
    S mirror.p0.s0          State: up       PO:        0  B Size:        512 MB
    S mirror.p1.s0          State: empty    PO:        0  B Size:        512 MB
    S striped.p0.s0         State: up       PO:        0  B Size:        128 MB
    S striped.p0.s1         State: up       PO:      512 kB Size:        128 MB
    S striped.p0.s2         State: up       PO:     1024 kB Size:        128 MB
    S striped.p0.s3         State: up       PO:     1536 kB Size:        128 MB</pre><p>
	</p><div class="figure"><a id="vinum-striped-vol"></a><div class="figure-title">Figure 21.6. Un volume Vinum segmenté</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-striped-vol.png" alt="Un volume Vinum segmenté" /></div></div></div><p><br class="figure-break" />
      </p><p>Ce volume est représenté sur
	<a class="xref" href="#vinum-striped-vol" title="Figure 21.6. Un volume Vinum segmenté">Figure 21.6, « Un volume Vinum segmenté »</a>.  La couleur des segments
	indique leur position dans l'espace d'adresses de la plex: le
	segment le plus clair vient en premier, le plus sombre
	en dernier.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79639504"></a>21.6.4. Robustesse et performances</h3></div></div></div><p><a id="vinum-resilience"></a>Avec suffisamment de
	matériel, il est possible de créer des volumes qui
	présenteront une robustesse et des performances accrues
	comparés aux partitions UNIX&#8482; standards.  Un fichier
	de configuration pourrait être:</p><pre class="programlisting">
	volume raid10
      plex org striped 512k
        sd length 102480k drive a
        sd length 102480k drive b
        sd length 102480k drive c
        sd length 102480k drive d
        sd length 102480k drive e
      plex org striped 512k
        sd length 102480k drive c
        sd length 102480k drive d
        sd length 102480k drive e
        sd length 102480k drive a
        sd length 102480k drive b</pre><p>Les sous-disques de la seconde plex sont décalés
	de deux disques par rapport à ceux de la première plex:
	cela aide à s'assurer que les écritures ne vont pas sur
	les même sous-disques même si un transfert s'effectue sur
	les deux disques.</p><p><a class="xref" href="#vinum-raid10-vol" title="Figure 21.7. Un volume Vinum en mode miroir segmenté">Figure 21.7, « Un volume Vinum en mode miroir segmenté »</a> représente la structure
	de ce volume.</p><p>
	</p><div class="figure"><a id="vinum-raid10-vol"></a><div class="figure-title">Figure 21.7. Un volume Vinum en mode miroir segmenté</div><div class="figure-contents"><div class="mediaobject"><img src="vinum/vinum-raid10-vol.png" alt="Un volume Vinum en mode miroir segmenté" /></div></div></div><p><br class="figure-break" />
      </p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp79644368"></a>21.7. Appellation des objets</h2></div></div></div><p>Comme décrit précédemment, Vinum
      assigne des noms par défaut aux plexes et aux sous-disques, bien
      qu'ils peuvent être imposés.  Ne pas conserver les
      noms par défaut n'est pas recommandé: une
      expérience avec le gestionnaire de volume VERITAS, qui autorise
      les noms arbitraires pour les objets, a montré que cette
      flexibilité n'apporte pas d'avantage significatif, et peut
      être à l'origine de confusion.</p><p>Les noms pourront contenir tout caractère non vide, mais il
      est recommandé de se cantonner aux lettres, chiffres ou le
      caractère souligné.  Les noms de volumes, plexes et
      sous-disques peuvent contenir jusqu'à 64 caractères,
      et le nom des disques 32 caractères.</p><p><a id="idp79645904" class="indexterm"></a>
      On assigne à chaque objet Vinum un fichier spécial de
      périphérique dans la hiérarchie
      <code class="filename">/dev/vinum</code>.  La configuration présentée
      plus haut aurait fait à Vinum créer les fichiers
      spéciaux de périphérique suivants:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les périphériques de contrôle
	  <code class="filename">/dev/vinum/control</code> et
	  <code class="filename">/dev/vinum/controld</code>, qui sont
	  respectivement utilisés par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>et le
	  &#8220;daemon&#8221; Vinum.</p></li><li class="listitem"><p>Les entrées des périphériques en mode
	  bloc et caractères par chaque volume.  Ce sont les
	  périphériques principaux utilisés
	  par Vinum.  Les noms de périphériques en mode
	  bloc sont le nom du volume, alors que les noms de
	  périphériques en mode caractère suivent la
	  tradition BSD de faire précéder le nom de la lettre
	  <span class="emphasis"><em>r</em></span>.  Donc la configuration précédent
	  inclurait les périphériques en mode bloc
	  <code class="filename">/dev/vinum/myvol</code>,
	  <code class="filename">/dev/vinum/mirror</code>,
	  <code class="filename">/dev/vinum/striped</code>,
	  <code class="filename">/dev/vinum/raid5</code> et
	  <code class="filename">/dev/vinum/raid10</code>, et les
	  périphériques en mode caractères
	  <code class="filename">/dev/vinum/rmyvol</code>,
	  <code class="filename">/dev/vinum/rmirror</code>,
	  <code class="filename">/dev/vinum/rstriped</code>,
	  <code class="filename">/dev/vinum/rraid5</code> et
	  <code class="filename">/dev/vinum/rraid10</code>.
	  Un problème évident apparaît ici: il est
	  possible d'avoir deux volumes appelés
	  <span class="emphasis"><em>r</em></span> et <span class="emphasis"><em>rr</em></span>, mais il y
	  aurait un conflit lors de la création du fichier
	  spécial de périphérique
	  <code class="filename">/dev/vinum/rr</code>: c'est le
	  périphérique en mode caractère du volume
	  <span class="emphasis"><em>r</em></span> ou le périphérique en mode bloc
	  du volume <span class="emphasis"><em>rr</em></span>?  Actuellement Vinum ne
	  résout pas ce conflit: le premier volume défini
	  obtiendra le nom.</p></li><li class="listitem"><p>Un répertoire <code class="filename">/dev/vinum/drive</code>
	  avec des entrées pour chaque disque.  Ces entrées
	  sont en fait des liens symboliques vers les fichiers
	  spéciaux de périphérique de
	  disque correspondants.</p></li><li class="listitem"><p>Un répertoire <code class="filename">/dev/vinum/volume</code> avec
	  des entrées pour chaque volume.  Il contient des
	  sous-répertoires pour chaque plex, qui à leur tour
	  contiennent des sous-répertoires pour leurs
	  sous-disques.</p></li><li class="listitem"><p>Les répertoires <code class="filename">/dev/vinum/plex</code>,
	  <code class="filename">/dev/vinum/sd</code>, et
	  <code class="filename">/dev/vinum/rsd</code>, qui contiennent les
	  fichiers spéciaux de périphérique en mode bloc
	  pour chaque plex et les fichiers spéciaux de
	  périphérique en mode bloc
	  et caractère pour chaque sous-disque.</p></li></ul></div><p>Par exemple, considérons le fichier de configuration
      suivant:</p><pre class="programlisting">
	drive drive1 device /dev/sd1h
	drive drive2 device /dev/sd2h
	drive drive3 device /dev/sd3h
	drive drive4 device /dev/sd4h
    volume s64 setupstate
      plex org striped 64k
        sd length 100m drive drive1
        sd length 100m drive drive2
        sd length 100m drive drive3
        sd length 100m drive drive4</pre><p>Après traitement de ce fichier, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>
      crée la structure suivante dans
      <code class="filename">/dev/vinum</code>:</p><pre class="programlisting">
	brwx------  1 root  wheel   25, 0x40000001 Apr 13 16:46 Control
	brwx------  1 root  wheel   25, 0x40000002 Apr 13 16:46 control
	brwx------  1 root  wheel   25, 0x40000000 Apr 13 16:46 controld
	drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 drive
	drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 plex
	crwxr-xr--  1 root  wheel   91,   2 Apr 13 16:46 rs64
	drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 rsd
	drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 rvol
	brwxr-xr--  1 root  wheel   25,   2 Apr 13 16:46 s64
	drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 sd
	drwxr-xr-x  3 root  wheel       512 Apr 13 16:46 vol

	/dev/vinum/drive:
    total 0
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive1 -&gt; /dev/sd1h
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive2 -&gt; /dev/sd2h
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive3 -&gt; /dev/sd3h
    lrwxr-xr-x  1 root  wheel  9 Apr 13 16:46 drive4 -&gt; /dev/sd4h

    /dev/vinum/plex:
    total 0
    brwxr-xr--  1 root  wheel   25, 0x10000002 Apr 13 16:46 s64.p0

    /dev/vinum/rsd:
    total 0
    crwxr-xr--  1 root  wheel   91, 0x20000002 Apr 13 16:46 s64.p0.s0
    crwxr-xr--  1 root  wheel   91, 0x20100002 Apr 13 16:46 s64.p0.s1
    crwxr-xr--  1 root  wheel   91, 0x20200002 Apr 13 16:46 s64.p0.s2
    crwxr-xr--  1 root  wheel   91, 0x20300002 Apr 13 16:46 s64.p0.s3

    /dev/vinum/rvol:
    total 0
    crwxr-xr--  1 root  wheel   91,   2 Apr 13 16:46 s64

    /dev/vinum/sd:
    total 0
    brwxr-xr--  1 root  wheel   25, 0x20000002 Apr 13 16:46 s64.p0.s0
    brwxr-xr--  1 root  wheel   25, 0x20100002 Apr 13 16:46 s64.p0.s1
    brwxr-xr--  1 root  wheel   25, 0x20200002 Apr 13 16:46 s64.p0.s2
    brwxr-xr--  1 root  wheel   25, 0x20300002 Apr 13 16:46 s64.p0.s3

    /dev/vinum/vol:
    total 1
    brwxr-xr--  1 root  wheel   25,   2 Apr 13 16:46 s64
    drwxr-xr-x  3 root  wheel       512 Apr 13 16:46 s64.plex

    /dev/vinum/vol/s64.plex:
    total 1
    brwxr-xr--  1 root  wheel   25, 0x10000002 Apr 13 16:46 s64.p0
    drwxr-xr-x  2 root  wheel       512 Apr 13 16:46 s64.p0.sd

    /dev/vinum/vol/s64.plex/s64.p0.sd:
    total 0
    brwxr-xr--  1 root  wheel   25, 0x20000002 Apr 13 16:46 s64.p0.s0
    brwxr-xr--  1 root  wheel   25, 0x20100002 Apr 13 16:46 s64.p0.s1
    brwxr-xr--  1 root  wheel   25, 0x20200002 Apr 13 16:46 s64.p0.s2
    brwxr-xr--  1 root  wheel   25, 0x20300002 Apr 13 16:46 s64.p0.s3</pre><p>Bien qu'il soit recommandé de ne pas donner de nom
      spécifique aux plexes et sous-disques, les disques Vinum doivent
      avoir un nom.  Cela rend possible de déplacer un disque à un
      emplacement différent et qu'il soit toujours reconnu
      automatiquement.  Les noms de disques peuvent avoir jusqu'à 32
      caractères.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79705296"></a>21.7.1. Création de systèmes de fichiers</h3></div></div></div><p>Les volumes apparaissent pour le système comme des
	  disques, avec une seule exception.  Contrairement aux
	  disques UNIX&#8482;, Vinum ne partitionne pas les volumes, qui
	  ne contiennent donc pas de table de partitionnement.  Cela a
	  demandé de modifier certains utilitaires disque, en
	  particulier <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>, qui auparavant tentait
	  d'interpréter la dernière lettre du nom de volume Vinum
	  comme un identifiant de partition.  Par exemple, un disque
	  peut avoir un nom comme <code class="filename">/dev/ad0a</code>$
	  ou <code class="filename">/dev/da2h</code>.  Ces noms
	  représentent respectivement la première partition
	  (<code class="filename">a</code>) sur le premier (0) disque IDE
	  (<code class="filename">ad</code>) la la huitième partition
	  (<code class="filename">h</code>) sur le troisième (2)
	  disque SCSI (<code class="filename">da</code>).  En revanche,
	  un volume Vinum pourra être appelé
	  <code class="filename">/dev/vinum/concat</code>, un nom qui n'a
	  pas de relation avec un nom de partition.</p><p>Normalement, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a> interprète le nom du disque
	  et se plaint s'il ne peut le comprendre.  Par
	  exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs /dev/vinum/concat</code></strong>
newfs: /dev/vinum/concat: can't figure out file system partition</pre><p>Afin de créer un système de fichiers sur ce volume,
	  utilisez l'option <code class="option">-v</code> de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=newfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">newfs</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>newfs -v /dev/vinum/concat</code></strong></pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="vinum-config"></a>21.8. Configuration de Vinum</h2></div></div></div><p>Le noyau <code class="filename">GENERIC</code> ne contient pas le
      support Vinum.  Il est possible de compiler un noyau spécial
      qui inclut vinum, mais cela n'est pas recommandé.  La
      méthode standard de lancement de Vinum est d'utiliser un module du
      noyau (<acronym class="acronym">kld</acronym>).  Vous n'avez même pas
      besoin d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> pour Vinum: quand vous lancez
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vinum&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vinum</span>(8)</span></a>, il contrôle si le module a été
      chargé ou non, si ce n'est pas le cas, il le charge
      automatiquement.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79726544"></a>21.8.1. Démarrage</h3></div></div></div><p>Vinum stocke l'information de configuration sur les
	  tranches des disques sous la même forme que dans les
	  fichiers de configuration.  En lisant à partir de la base
	  de données de configuration, Vinum reconnaît un certain
	  nombre de mots clés qui ne sont pas autorisés dans
	  les fichiers de configuration.  Par exemple, une
	  configuration de disque pourrait contenir le texte
	  suivant:</p><pre class="programlisting">volume myvol state up
volume bigraid state down
plex name myvol.p0 state up org concat vol myvol
plex name myvol.p1 state up org concat vol myvol
plex name myvol.p2 state init org striped 512b vol myvol
plex name bigraid.p0 state initializing org raid5 512b vol bigraid
sd name myvol.p0.s0 drive a plex myvol.p0 state up len 1048576b driveoffset 265b plexoffset 0b
sd name myvol.p0.s1 drive b plex myvol.p0 state up len 1048576b driveoffset 265b plexoffset 1048576b
sd name myvol.p1.s0 drive c plex myvol.p1 state up len 1048576b driveoffset 265b plexoffset 0b
sd name myvol.p1.s1 drive d plex myvol.p1 state up len 1048576b driveoffset 265b plexoffset 1048576b
sd name myvol.p2.s0 drive a plex myvol.p2 state init len 524288b driveoffset 1048841b plexoffset 0b
sd name myvol.p2.s1 drive b plex myvol.p2 state init len 524288b driveoffset 1048841b plexoffset 524288b
sd name myvol.p2.s2 drive c plex myvol.p2 state init len 524288b driveoffset 1048841b plexoffset 1048576b
sd name myvol.p2.s3 drive d plex myvol.p2 state init len 524288b driveoffset 1048841b plexoffset 1572864b
sd name bigraid.p0.s0 drive a plex bigraid.p0 state initializing len 4194304b driveoff set 1573129b plexoffset 0b
sd name bigraid.p0.s1 drive b plex bigraid.p0 state initializing len 4194304b driveoff set 1573129b plexoffset 4194304b
sd name bigraid.p0.s2 drive c plex bigraid.p0 state initializing len 4194304b driveoff set 1573129b plexoffset 8388608b
sd name bigraid.p0.s3 drive d plex bigraid.p0 state initializing len 4194304b driveoff set 1573129b plexoffset 12582912b
sd name bigraid.p0.s4 drive e plex bigraid.p0 state initializing len 4194304b driveoff set 1573129b plexoffset 16777216b</pre><p>Ici les différences évidentes sont la
	  présence d'une information explicite sur l'emplacement et le
	  nom (les deux sont également autorisés, mais
	  leur utilisation est déconseillée à
	  l'utilisateur) et de l'information sur les états (qui ne
	  sont pas disponibles à l'utilisateur).  Vinum ne stocke pas
	  d'informations au sujet des disques dans la configuration:
	  il localise les disques en recherchant les disques
	  configurés pour les partitions dans le label Vinum.
	  Cela permet à Vinum d'identifier correctement les disques
	  même s'ils ont un identifiant de disque UNIX&#8482;
	  différent.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79728336"></a>21.8.1.1. Démarrage automatique</h4></div></div></div><p>Afin de lancer automatiquement Vinum au démarrage du
	    système, assurez-vous d'avoir la ligne suivante dans votre
	    fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">start_vinum="YES"		# set to YES to start vinum</pre><p>Si vous n'avez pas de fichier
	  <code class="filename">/etc/rc.conf</code>, créez en un avec cette
	  ligne.  Cela provoquera le chargement du module Vinum au
	  démarrage du système, et le lancement de tout objet
	  mentionné dans la configuration.  Cela est fait avant de
	  monter les systèmes de fichiers, il est donc possible
	  d'utiliser automatiquement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fsck&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fsck</span>(8)</span></a> sur des systèmes de
	  fichiers puis de les monter sur des volumes Vinum.</p><p>quand vous démarrez avec la commande <code class="command">vinum
	  start</code>, Vinum lit la base de données de
	  configuration à partir d'un des disques Vinum.  Dans des
	  circonstances normales, chaque disque contient une copie
	  identique de la base de données de configuration, il importe
	  donc peu quel disque est lu.  Après un crash, Vinum doit
	  déterminer quel disque a été mis à jour
	  le plus récemment et lire la configuration à partir
	  de ce disque.  Il met ensuite à jour la configuration si
	  nécessaire à partir de disques progressivement de
	  plus en plus anciens.</p></div></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp79539152" class="footnote"><p><a href="#idp79539152" class="para"><sup class="para">[12] </sup></a><acronym class="acronym">RAID</acronym> signifie <span class="emphasis"><em>Redundant Array of
	Inexpensive Disks</em></span> (réseau redondant de disques
	bons marchés) et offre diverses améliorations de la
	tolérance aux pannes, bien que le dernier terme soit
	légèrement
	trompeur: il ne fournit pas de redondance.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization"></a>Chapitre 22. Virtualisation</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#virtualization-synopsis">22.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#virtualization-guest">22.2. FreeBSD comme système d'exploitation
      invité</a></span></dt><dt><span class="sect1"><a href="#virtualization-host">22.3. FreeBSD comme système d'exploitation hôte</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="virtualization-synopsis"></a>22.1. Synopsis</h2></div></div></div><p>Un logiciel de virtualisation permet l'exécution
      simultanée de plusieurs systèmes d'exploitation
      sur la même machine.  De tels logiciels pour PCs
      impliquent l'utilisation d'un système d'exploitation
      hôte qui exécute le logiciel de virtualisation et
      qui supporte un certain nombre de systèmes d'exploitation
      invités.</p><p>Après avoir lu ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La différence entre un système
	  d'exploitation hôte et un système d'exploitation
	  invité.</p></li><li class="listitem"><p>Comment installer FreeBSD sur un ordinateur <span class="trademark">Apple</span>®
	  <span class="trademark">Macintosh</span>® à base <span class="trademark">Intel</span>®.</p></li><li class="listitem"><p>Comment installer FreeBSD sur <span class="trademark">Linux</span>® avec
	  <span class="application"><span class="trademark">Xen</span>&#8482;</span>.</p></li><li class="listitem"><p>Comment installer FreeBSD sur <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® avec
	  <span class="application">Virtual PC</span>.</p></li><li class="listitem"><p>Comment optimiser un système FreeBSD pour obtenir
	  les meilleures performances en virtualisation.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les fondements d'<span class="trademark">UNIX</span>® et de FreeBSD (<a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a>).</p></li><li class="listitem"><p>Savoir comment installer FreeBSD (<a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a>).</p></li><li class="listitem"><p>Savoir comment configurer votre connexion au
	  réseau (<a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>).</p></li><li class="listitem"><p>Savoir comment installer des logiciels tierce-partie
	  (<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="virtualization-guest"></a>22.2. FreeBSD comme système d'exploitation
      invité</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-parallels"></a>22.2.1. Parallels sur <span class="trademark">Mac OS</span>®</h3></div></div></div><p><span class="application">Parallels Desktop</span> pour <span class="trademark">Mac</span>®
	est un logiciel commercial pour les ordinateurs <span class="trademark">Apple</span>® <span class="trademark">Mac</span>®
	à base <span class="trademark">Intel</span>® tournant sous <span class="trademark">Mac OS</span>® 10.4.6 our
	versions supérieures.  FreeBSD est totalement
	supporté en tant que système d'exploitation
	invité.  Une fois que
	<span class="application">Parallels</span> a été
	installé sur <span class="trademark">Mac OS</span>® X, l'utilisateur doit configurer
	une machine virtuelle et installer le système
	d'exploitation invité qu'il désire.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-parallels-install"></a>22.2.1.1. Installer FreeBSD sur Parallels/<span class="trademark">Mac OS</span>® X</h4></div></div></div><p>La première étape pour installer FreeBSD
	    sur <span class="trademark">Mac OS</span>® X/<span class="application">Parallels</span> est de
	    créer une machine virtuelle pour l'installation de
	    FreeBSD.  Sélectionnez
	    <span class="guimenuitem">FreeBSD</span> comme
	    <span class="guimenu">Système d'exploitation
	    invité</span> quand on vous le demandera:</p><div class="mediaobject"><img src="virtualization/parallels-freebsd1.png" /></div><p>Et
	    choisissez une taille de disque dur et de mémoire
	    vive en fonction de l'utilisation que vous projetez pour
	    votre FreeBSD virtuel.  4Go de disque et 512Mo de RAM
	    conviennent pour la plupart des utilisations de FreeBSD sous
	    <span class="application">Parallels</span>:</p><div class="mediaobject"><img src="virtualization/parallels-freebsd2.png" /></div><div class="mediaobject"><img src="virtualization/parallels-freebsd3.png" /></div><div class="mediaobject"><img src="virtualization/parallels-freebsd4.png" /></div><div class="mediaobject"><img src="virtualization/parallels-freebsd5.png" /></div><p>Sélectionnez le type de réseau et une
	    carte réseau:</p><div class="mediaobject"><img src="virtualization/parallels-freebsd6.png" /></div><div class="mediaobject"><img src="virtualization/parallels-freebsd7.png" /></div><p>Sauvegardez et achevez la configuration:</p><div class="mediaobject"><img src="virtualization/parallels-freebsd8.png" /></div><div class="mediaobject"><img src="virtualization/parallels-freebsd9.png" /></div><p>Une fois votre machine virtuelle créée,
	    vous devrez y installer FreeBSD.  Le meilleur moyen est
	    d'utiliser un CDROM FreeBSD officiel ou une image ISO
	    récupérée sur un site FTP officiel.
	    Quand vous avez l'image ISO adéquate sur votre
	    système de fichiers <span class="trademark">Mac</span>® ou un CDROM dans le
	    lecteur de CD du <span class="trademark">Mac</span>®, cliquez sur l'icône disque
	    située dans le coin droit en bas de votre
	    fenêtre <span class="application">Parallels</span>.  Une
	    fenêtre s'ouvrira pour vous permettre d'associer le
	    lecteur de CDROM de votre machine virtuelle avec un
	    fichier ISO ou le véritable lecteur de CDROM de
	    votre ordinateur.</p><div class="mediaobject"><img src="virtualization/parallels-freebsd11.png" /></div><p>Dès que vous avez effectué cette
	    association, redémarrez votre machine virtuelle FreeBSD
	    en cliquant sur l'icône de redémarrage.
	    <span class="application">Parallels</span> redémarrera
	    avec un BIOS particulier qui vérifiera si vous
	    disposez d'un CDROM tout comme le ferait un BIOS
	    classique.</p><div class="mediaobject"><img src="virtualization/parallels-freebsd10.png" /></div><p>Dans notre cas il trouvera le disque
	    d'installation de FreeBSD et lancera une installation normale
	    avec <span class="application">sysinstall</span> comme
	    décrit dans le <a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a>.  Vous
	    pouvez installer X11 mais ne tentez pas de le configurer
	    pour le moment.</p><div class="mediaobject"><img src="virtualization/parallels-freebsd12.png" /></div><p>Quand l'installation est terminée,
	    redémarrez votre machine virtuelle FreeBSD.</p><div class="mediaobject"><img src="virtualization/parallels-freebsd13.png" /></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-parallels-configure"></a>22.2.1.2. Configurer FreeBSD sur <span class="trademark">Mac OS</span>® X/Parallels</h4></div></div></div><p>Après avoir installé avec succès
	    FreeBSD sur <span class="trademark">Mac OS</span>® X avec
	    <span class="application">Parallels</span>,
	    il reste plusieurs points à
	    configurer pour optimiser le système
	    virtuel.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Paramétrer les variables du
		chargeur</strong></p><p>L'étape la plus importante est la
		diminution du paramètre
		<code class="option">kern.hz</code> afin de réduire
		l'utilisation du CPU de FreeBSD sous l'environnement
		<span class="application">Parallels</span>.  Pour cela, il
		faut ajouter la ligne suivante au fichier
		<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">kern.hz=100</pre><p>Sans ce paramétrage, un système
		d'exploitation invité FreeBSD inactif sous
		<span class="application">Parallels</span> utilisera environ
		15% du CPU sur un <span class="trademark">iMac</span>® à mono-processeur.
		Après ce changement l'utilisation du processeur
		sera plus proche d'un petit 5%.</p></li><li class="step"><p class="title"><strong>Créer un nouveau fichier de configuration
		du noyau</strong></p><p>Vous pouvez retirer tous les pilotes de
		périphériques SCSI, FireWire et USB.
		<span class="application">Parallels</span> fournit une carte
		réseau virtuelle utilisant le pilote
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a>, aussi tous les autres pilotes
		réseau exceptés <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ed&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ed</span>(4)</span></a> et
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=miibus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">miibus</span>(4)</span></a> peuvent être retirés du
		noyau.</p></li><li class="step"><p class="title"><strong>Configuration du réseau</strong></p><p>La configuration réseau la plus simple
		utilise DHCP pour connecter votre machine virtuelle
		sur le même réseau local que votre
		machine <span class="trademark">Mac</span>® hôte.  Cette configuration se fait
		en ajoutant la ligne
		<code class="literal">ifconfig_ed0="DHCP"</code> au fichier
		<code class="filename">/etc/rc.conf</code>.  Des configurations
		réseau plus avancées sont
		décrites dans le <a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>.</p></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-xen"></a>22.2.2. FreeBSD avec <span class="trademark">Xen</span>&#8482; sur Linux</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Fukang</span> <span class="surname">Chen (Loader)</span></span>. </span></div></div></div><p>L'hyperviseur <span class="application"><span class="trademark">Xen</span>&#8482;</span> est un
	  logiciel libre de para-virtualisation qui est
	  supporté par l'entreprise commerciale XenSource.  Les
	  systèmes d'exploitation invités sont
	  appelés domaines domU, et le système
	  d'exploitation hôte est appelé dom0.  La
	  première étape pour faire tourner un FreeBSD
	  virtuel sous <span class="trademark">Linux</span>® est d'installer
	  <span class="application"><span class="trademark">Xen</span>&#8482;</span> pour le domaine dom0
	  <span class="trademark">Linux</span>®.  Le système d'exploitation hôte sera
	  une distribution <span class="trademark">Linux</span>® Slackware.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="xen-slackware-dom0"></a>22.2.2.1. Configuration de <span class="trademark">Xen</span>&#8482; 3 sur un dom0 <span class="trademark">Linux</span>®</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Télécharger <span class="trademark">Xen</span>&#8482; 3.0 auprès
		de XenSource</strong></p><p>Récupérez l'archive <a class="link" href="http://bits.xensource.com/oss-xen/release/3.0.4-1/src.tgz/xen-3.0.4_1-src.tgz" target="_top">xen-3.0.4_1-src.tgz</a>
		auprès de <code class="uri"><a class="uri" href="http://www.xensource.com/" target="_top">http://www.xensource.com/</a></code>.</p></li><li class="step"><p class="title"><strong>Extraire l'archive</strong></p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd xen-3.0.4_1-src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>KERNELS="linux-2.6-xen0 linux-2.6-xenU" make world</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Pour recompiler le noyau pour le domaine
		  dom0:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd xen-3.0.4_1-src/linux-2.6.16.33-xen0</code></strong>
  <code class="prompt">#</code> <strong class="userinput"><code>make menuconfig</code></strong>
  <code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
  <code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">D'anciennes versions de
		  <span class="application"><span class="trademark">Xen</span>&#8482;</span> peuvent
		  nécessiter l'utilisation de la commande
		  <code class="command">make ARCH=xen menuconfig</code></p></div></li><li class="step"><p class="title"><strong>Ajouter une entrée au menu de Grub
		(menu.lst)</strong></p><p>Editez <code class="filename">/boot/grub/menu.lst</code> et
		ajoutez les lignes suivantes:</p><pre class="programlisting">title Xen-3.0.4
root (hd0,0)
kernel /boot/xen-3.0.4-1.gz dom0_mem=262144
module /boot/vmlinuz-2.6.16.33-xen0 root=/dev/hda1 ro</pre></li><li class="step"><p class="title"><strong>Redémarrer votre ordinateur sous
		<span class="trademark">Xen</span>&#8482;</strong></p><p>Tout d'abord, éditez
		<code class="filename">/etc/xen/xend-config.sxp</code>, et
		ajoutez la ligne suivante:</p><pre class="programlisting">(network-script 'network-bridge netdev=eth0')</pre><p>Nous pouvons maintenant lancer
		<span class="application"><span class="trademark">Xen</span>&#8482;</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/init.d/xend start</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>/etc/init.d/xendomains start</code></strong></pre><p>Notre domaine dom0 fonctionne:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>xm list</code></strong>
Name                                      ID   Mem VCPUs      State   Time(s)
Domain-0                                   0   256     1     r-----  54452.9</pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp79883088"></a>22.2.2.2. Domaine domU FreeBSD 7-CURRENT</h4></div></div></div><p>Téléchargez le noyau pour domU FreeBSD pour
	    <span class="application"><span class="trademark">Xen</span>&#8482; 3.0</span> et l'image disque
	    auprès de <a class="link" href="http://www.fsmware.com/" target="_top">http://www.fsmware.com/</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.fsmware.com/xenofreebsd/7.0/download/kernel-current" target="_top">kernel-current</a></p></li><li class="listitem"><p><a class="link" href="http://www.fsmware.com/xenofreebsd/7.0/download/mdroot-7.0.bz2" target="_top">mdroot-7.0.bz2</a></p></li><li class="listitem"><p><a class="link" href="http://www.fsmware.com/xenofreebsd/7.0/download/config/xmexample1.bsd" target="_top">xmexample1.bsd</a></p></li></ul></div><p>Placez le fichier de configuration
	    <code class="filename">xmexample1.bsd</code> dans le
	    répertoire <code class="filename">/etc/xen/</code> et modifiez les
	    entrées relatives à l'emplacement du noyau
	    et de l'image disque.  Cela devrait donner quelque chose
	    comme:</p><pre class="programlisting">kernel = "/opt/kernel-current"
memory = 256
name = "freebsd"
vif = [ '' ]
disk = [ 'file:/opt/mdroot-7.0,hda1,w' ]
#on_crash    = 'preserve'
extra = "boot_verbose"
extra += ",boot_single"
extra += ",kern.hz=100"
extra += ",vfs.root.mountfrom=ufs:/dev/xbd769a"</pre><p>Le fichier <code class="filename">mdroot-7.0.bz2</code> doit
	    être décompressé.</p><p>Ensuite, la section __xen_guest du fichier
	    <code class="filename">kernel-current</code> doit être
	    modifiée pour y ajouter le paramètre
	    VIRT_BASE dont a besoin <span class="application"><span class="trademark">Xen</span>&#8482;
	    3.0.3</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>objcopy kernel-current -R __xen_guest</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>perl -e 'print "LOADER=generic,GUEST_OS=freebsd,GUEST_VER=7.0,XEN_VER=xen-3.0,BSD_SYMTAB,VIRT_BASE=0xC0000000\x00"' &gt; tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>objcopy kernel-current --add-section __xen_guest=tmp</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>objdump -j __xen_guest -s kernel-current</code></strong>

kernel-current:     file format elf32-i386

Contents of section __xen_guest:
 0000 4c4f4144 45523d67 656e6572 69632c47  LOADER=generic,G
 0010 55455354 5f4f533d 66726565 6273642c  UEST_OS=freebsd,
 0020 47554553 545f5645 523d372e 302c5845  GUEST_VER=7.0,XE
 0030 4e5f5645 523d7865 6e2d332e 302c4253  N_VER=xen-3.0,BS
 0040 445f5359 4d544142 2c564952 545f4241  D_SYMTAB,VIRT_BA
 0050 53453d30 78433030 30303030 3000      SE=0xC0000000. </pre><p>Nous sommes maintenant prêt à
	    créer et lancer notre domU:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>xm create /etc/xen/xmexample1.bsd -c</code></strong>
Using config file "/etc/xen/xmexample1.bsd".
Started domain freebsd
WARNING: loader(8) metadata is missing!
Copyright (c) 1992-2006 The FreeBSD Project.
Copyright (c) 1979, 1980, 1983, 1986, 1988, 1989, 1991, 1992, 1993, 1994
The Regents of the University of California. All rights reserved.
FreeBSD 7.0-CURRENT #113: Wed Jan  4 06:25:43 UTC 2006
    kmacy@freebsd7.gateway.2wire.net:/usr/home/kmacy/p4/freebsd7_xen3/src/sys/i386-xen/compile/XENCONF
WARNING: DIAGNOSTIC option enabled, expect reduced performance.
Xen reported: 1796.927 MHz processor.
Timecounter "ixen" frequency 1796927000 Hz quality 0
CPU: Intel(R) Pentium(R) 4 CPU 1.80GHz (1796.93-MHz 686-class CPU)
  Origin = "GenuineIntel"  Id = 0xf29  Stepping = 9
  Features=0xbfebfbff&lt;FPU,VME,DE,PSE,TSC,MSR,PAE,MCE,CX8,APIC,SEP,MTRR,PGE,MCA,CMOV,PAT,PSE36,CLFLUSH,
  DTS,ACPI,MMX,FXSR,SSE,SSE2,SS,HTT,TM,PBE&gt;
  Features2=0x4400&lt;CNTX-ID,&lt;b14&gt;&gt;
real memory  = 265244672 (252 MB)
avail memory = 255963136 (244 MB)
xc0: &lt;Xen Console&gt; on motherboard
cpu0 on motherboard
Timecounters tick every 10.000 msec
[XEN] Initialising virtual ethernet driver.
xn0: Ethernet address: 00:16:3e:6b:de:3a
[XEN]
Trying to mount root from ufs:/dev/xbd769a
WARNING: / was not properly dismounted
Loading configuration files.
No suitable dump device was found.
Entropy harvesting: interrupts ethernet point_to_point kickstart.
Starting file system checks:
/dev/xbd769a: 18859 files, 140370 used, 113473 free (10769 frags, 12838 blocks, 4.2% fragmentation)
Setting hostname: demo.freebsd.org.
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
	  inet6 ::1 prefixlen 128
	  inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
	  inet 127.0.0.1 netmask 0xff000000
Additional routing options:.
Mounting NFS file systems:.
Starting syslogd.
/etc/rc: WARNING: Dump device does not exist.  Savecore not run.
ELF ldconfig path: /lib /usr/lib /usr/lib/compat /usr/X11R6/lib /usr/local/lib
a.out ldconfig path: /usr/lib/aout /usr/lib/compat/aout /usr/X11R6/lib/aout
Starting usbd.
usb: Kernel module not available: No such file or directory
Starting local daemons:.
Updating motd.
Starting sshd.
Initial i386 initialization:.
Additional ABI support: linux.
Starting cron.
Local package initialization:.
Additional TCP options:.
Starting background file system checks in 60 seconds.

Sun Apr  1 02:11:43 UTC 2007

FreeBSD/i386 (demo.freebsd.org) (xc0)

login: </pre><p>Le domaine domU devrait exécuter le noyau
	    FreeBSD 7.0-CURRENT:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>uname -a</code></strong>
FreeBSD demo.freebsd.org 7.0-CURRENT FreeBSD 7.0-CURRENT #113: Wed Jan  4 06:25:43 UTC 2006
kmacy@freebsd7.gateway.2wire.net:/usr/home/kmacy/p4/freebsd7_xen3/src/sys/i386-xen/compile/XENCONF  i386</pre><p>Le réseau peut maintenant être
	    configuré sur le domaine domU.  Le domaine domU
	    FreeBSD utilisera une interface spécifique
	    appelée <code class="filename">xn0</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig xn0 10.10.10.200 netmask 255.0.0.0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong>
xn0: flags=843&lt;UP,BROADCAST,RUNNING,SIMPLEX&gt; mtu 1500
    inet 10.10.10.200 netmask 0xff000000 broadcast 10.255.255.255
    ether 00:16:3e:6b:de:3a
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 16384
      inet6 ::1 prefixlen 128
      inet6 fe80::1%lo0 prefixlen 64 scopeid 0x2
      inet 127.0.0.1 netmask 0xff000000 </pre><p>Sur le domaine dom0 Slackware, des interfaces
	    réseaux relatives à
	    <span class="application"><span class="trademark">Xen</span>&#8482;</span> devraient
	    apparaître:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong>
eth0      Link encap:Ethernet  HWaddr 00:07:E9:A0:02:C2
          inet addr:10.10.10.130  Bcast:0.0.0.0  Mask:255.0.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:815 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1400 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:204857 (200.0 KiB)  TX bytes:129915 (126.8 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:99 errors:0 dropped:0 overruns:0 frame:0
          TX packets:99 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:9744 (9.5 KiB)  TX bytes:9744 (9.5 KiB)

peth0     Link encap:Ethernet  HWaddr FE:FF:FF:FF:FF:FF
          UP BROADCAST RUNNING NOARP  MTU:1500  Metric:1
          RX packets:1853349 errors:0 dropped:0 overruns:0 frame:0
          TX packets:952923 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:2432115831 (2.2 GiB)  TX bytes:86528526 (82.5 MiB)
          Base address:0xc000 Memory:ef020000-ef040000

vif0.1    Link encap:Ethernet  HWaddr FE:FF:FF:FF:FF:FF
          UP BROADCAST RUNNING NOARP  MTU:1500  Metric:1
          RX packets:1400 errors:0 dropped:0 overruns:0 frame:0
          TX packets:815 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:129915 (126.8 KiB)  TX bytes:204857 (200.0 KiB)

vif1.0    Link encap:Ethernet  HWaddr FE:FF:FF:FF:FF:FF
          UP BROADCAST RUNNING NOARP  MTU:1500  Metric:1
          RX packets:3 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2 errors:0 dropped:157 overruns:0 carrier:0
          collisions:0 txqueuelen:1
          RX bytes:140 (140.0 b)  TX bytes:158 (158.0 b)

xenbr1    Link encap:Ethernet  HWaddr FE:FF:FF:FF:FF:FF
          UP BROADCAST RUNNING NOARP  MTU:1500  Metric:1
          RX packets:4 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:112 (112.0 b)  TX bytes:0 (0.0 b)</pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>brctl show</code></strong>
bridge name     bridge id           STP enabled         interfaces
xenbr1          8000.feffffffffff   no                  vif0.1
                                                        peth0
                                                        vif1.0</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-virtualpc"></a>22.2.3. Virtual PC sur <span class="trademark">Windows</span>®</h3></div></div></div><p><span class="application">Virtual PC</span> pour <span class="trademark">Windows</span>® est
	un logiciel <span class="trademark">Microsoft</span>® librement
	téléchargeable.  Consultez la page concernant la
	<a class="link" href="http://www.microsoft.com/windows/downloads/virtualpc/sysreq.mspx" target="_top">configuration
	minimale requise</a>.  Une fois <span class="application">Virtual
	PC</span> installé sous <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®,
	l'utilisateur doit configurer une machine virtuelle puis
	installer le système d'exploitation invité
	désiré.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-virtualpc-install"></a>22.2.3.1. Installer FreeBSD sous Virtual
	    PC/<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®</h4></div></div></div><p>La première étape de l'installation de
	    FreeBSD sous <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®/<span class="application">Virtual
	    PC</span> est la création d'une nouvelle
	    machine virtuelle pour permettre l'installation de FreeBSD.
	    Sélectionnez <span class="guimenuitem">Create a virtual
	    machine</span>:</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd1.png" /></div><div class="mediaobject"><img src="virtualization/virtualpc-freebsd2.png" /></div><p>Puis sélectionnez
	    <span class="guimenuitem">Other</span> pour
	    <span class="guimenuitem">Operating system</span>:</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd3.png" /></div><p>Choisissez ensuite une quantité raisonnable
	    d'espace disque et de mémoire en fonction de vos
	    projets pour cette installation de FreeBSD.  4Go d'espace de
	    disque et 512Mo de mémoire vive conviennent pour la
	    plupart des utilisateurs de FreeBSD sous <span class="application">Virtual
	    PC</span>:</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd4.png" /></div><div class="mediaobject"><img src="virtualization/virtualpc-freebsd5.png" /></div><p>Sauvegardez et poursuivez la configuration:</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd6.png" /></div><p>Sélectionnez votre machine virtuelle FreeBSD,
	    cliquez sur <span class="guimenu">Settings</span>, puis
	    précisez le type de réseau et l'interface
	    réseau:</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd7.png" /></div><div class="mediaobject"><img src="virtualization/virtualpc-freebsd8.png" /></div><p>Une fois votre machine virtuelle FreeBSD
	    créée, vous devrez y installer FreeBSD.  La
	    meilleure manière étant d'utiliser un CDROM
	    FreeBSD officiel ou une image ISO
	    téléchargée depuis un site FTP
	    officiel.  Quand vous avez l'image ISO appropriée
	    sur votre système de fichiers <span class="trademark">Windows</span>® ou sur un
	    CDROM dans votre lecteur de CD, double-cliquez sur votre
	    machine virtuelle FreeBSD pour démarrer.  Puis cliquez
	    sur <span class="guimenu">CD</span> et sélectionnez
	    <span class="guimenu">Capture ISO Image...</span> dans la
	    fenêtre <span class="application">Virtual PC</span>.  Une
	    fenêtre apparaîtra et vous permettra
	    d'associer le lecteur de CDROM de votre machine virtuelle
	    avec une image ISO ou votre lecteur de CDROM
	    réel.</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd9.png" /></div><div class="mediaobject"><img src="virtualization/virtualpc-freebsd10.png" /></div><p>L'association avec votre CDROM source
	    effectuée, redémarrez votre machine
	    virtuelle FreeBSD en cliquant sur <span class="guimenu">Action</span>
	    puis sur <span class="guimenu">Reset</span>.  <span class="application">Virtual
	    PC</span> redémarrera, son BIOS
	    vérifiera tout d'abord que vous disposez d'un CDROM
	    comme le ferait n'importe quel BIOS normal.</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd11.png" /></div><p>Dans ce cas, le support d'installation FreeBSD sera
	    trouvé et une installation classique basée
	    sur <span class="application">sysinstall</span> débutera
	    comme décrit dans le <a class="xref" href="#install" title="Chapitre 2. Installer FreeBSD">Chapitre 2, <em>Installer FreeBSD</em></a>.
	    Vous pouvez installez X11 mais ne tentez pas pour le
	    moment de le configurer.</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd12.png" /></div><p>Quand vous avez achevé l'installation, pensez
	    à éjecter le CDROM ou l'image ISO.  Enfin,
	    redémarrez dans votre machine virtuelle FreeBSD
	    fraîchement installée.</p><div class="mediaobject"><img src="virtualization/virtualpc-freebsd13.png" /></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-virtualpc-configure"></a>22.2.3.2. Configuration de FreeBSD sous
	    <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®/Virtual PC</h4></div></div></div><p>Après avoir installé avec succès
	    FreeBSD sur <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® avec <span class="application">Virtual
	    PC</span>, il reste plusieurs points à
	    configurer pour optimiser le système
	    virtuel.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Paramétrer les variables du
		chargeur</strong></p><p>L'étape la plus importante est la
		diminution du paramètre
		<code class="option">kern.hz</code> afin de réduire
		l'utilisation du CPU de FreeBSD sous l'environnement
		<span class="application">Virtual PC</span>.  Pour cela, il
		faut ajouter la ligne suivante au fichier
		<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">kern.hz=100</pre><p>Sans ce paramétrage, un système
		d'exploitation invité FreeBSD inactif sous
		<span class="application">Virtual PC</span>
		utilisera environ 40% du CPU pour un
		micro-ordinateur monoprocesseur.  Après ce
		changement l'utilisation du processeur sera plus
		proche d'un petit 3%.</p></li><li class="step"><p class="title"><strong>Créer un nouveau fichier de configuration
		du noyau</strong></p><p>Vous pouvez retirer tous les pilotes de
		périphériques SCSI, FireWire, et USB.
		<span class="application">Virtual PC</span> fournit une
		interface réseau virtuelle utilisant
		le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=de&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">de</span>(4)</span></a>, aussi tous les autres pilotes
		réseau en dehors de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=de&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">de</span>(4)</span></a> et
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=miibus&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">miibus</span>(4)</span></a> peuvent être supprimés du
		noyau.</p></li><li class="step"><p class="title"><strong>Configuration du réseau</strong></p><p>La configuration réseau la plus simple
		utilise DHCP pour connecter votre machine virtuelle
		sur le même réseau local que votre
		machine <span class="trademark">Mac</span>® hôte.  Cette configuration se fait
		en ajoutant la ligne
		<code class="literal">ifconfig_de0="DHCP"</code> au fichier
		<code class="filename">/etc/rc.conf</code>.  Des configurations
		réseau plus avancées sont
		présentées dans le <a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>.</p></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="virtualization-guest-vmware"></a>22.2.4. VMware sur <span class="trademark">Windows</span>®/<span class="trademark">Mac</span>®/<span class="trademark">Linux</span>®</h3></div></div></div><p>Cette section n'est pas encore écrite.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="virtualization-host"></a>22.3. FreeBSD comme système d'exploitation hôte</h2></div></div></div><p>Actuellement, FreeBSD en tant que système d'exploitation
      hôte n'est officiellement supporté par aucun
      logiciel de virtualisation, de nombreuses personnes utilisent
      d'anciennes versions de <span class="application">VMware</span> pour
      cela.  Des efforts sont actuellement déployés pour
      faire fonctionner <span class="application"><span class="trademark">Xen</span>&#8482;</span> en tant
      qu'environnement hôte sur FreeBSD.</p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="l10n"></a>Chapitre 23. Localisation - Utilisation et configuration de l'I18N/L10N</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrey</span> <span class="surname">Chernov</span></span>. </span></div><div><span class="authorgroup">Réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Michael C.</span> <span class="surname">Wu</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#l10n-synopsis">23.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#l10n-basics">23.2. Les bases</a></span></dt><dt><span class="sect1"><a href="#using-localization">23.3. Utiliser la localisation</a></span></dt><dt><span class="sect1"><a href="#l10n-compiling">23.4. Compiler des programmes I18N</a></span></dt><dt><span class="sect1"><a href="#lang-setup">23.5. Localiser FreeBSD pour des langues spécifiques</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-synopsis"></a>23.1. Synopsis</h2></div></div></div><p>FreeBSD est un projet à très large audience
      avec des utilisateurs et des contributeurs provenant du monde
      entier.  Ce chapitre discute des fonctions d'internationalisation
      et de localisation de FreeBSD qui permettent aux non-anglophones
      de travailler.  Il y a de nombreux aspects de l'implémentation
      i18n au niveau système et application, et quand ce sera possible
      nous renverrons le lecteur à des sources de documentation plus
      spécifiques.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment les différentes langues et
	&#8220;locales&#8221; sont codées sur les systèmes
	d'exploitation modernes.</p></li><li class="listitem"><p>Comment paramétrer les &#8220;locales&#8221;
	pour votre interpréteur de commandes.</p></li><li class="listitem"><p>Comment configurer la console pour d'autres
	langues que l'anglais.</p></li><li class="listitem"><p>Comment employer le système X Window efficacement avec
	différentes langues.</p></li><li class="listitem"><p>Où trouver plus d'informations sur
	l'écriture d'applications conformes à la norme
	i18n.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Savoir comment installer des logiciels tiers
	(<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-basics"></a>23.2. Les bases</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80019280"></a>23.2.1. Qu'est-ce que I18N/L10N?</h3></div></div></div><a id="idp80019920" class="indexterm"></a><a id="idp80021072" class="indexterm"></a><p>Les développeurs ont raccourci le terme
	internationalisation en I18N, en comptant le nombre de lettres
	entre la première et la dernière du mot
	internationalisation.  L10N utilise le même principe,
	et provient du mot &#8220;localisation&#8221;.
	Combinées ensemble, les méthodes I18N/L10N, les
	protocoles, et les applications conformes
	permettent aux utilisateurs d'utiliser la langue de leur
	choix.</p><p>Les applications I18N sont programmées en
	utilisant des kits I18N par dessous les bibliothèques.
	Cela permet aux développeurs d'écrire un
	simple fichier et traduire les menus et textes affichés
	dans chaque langue.  Nous encourageons fortement les
	programmeurs à suivre cette convention.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80022480"></a>23.2.2. Pourquoi devrais-je employer l'I18N/L10N?</h3></div></div></div><p>I18N/L10N est utilisé à chaque fois que
	vous désirez afficher, entrer, ou traiter des données
	dans des langues autres que l'anglais.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80023632"></a>23.2.3. Quelles sont les langues supportées par l'I18N?</h3></div></div></div><p>I18N et L10N ne sont pas spécifiques à FreeBSD.
	Actuellement, on peut choisir parmi la plupart des langues
	principales du monde, y compris mais pas seulement: le chinois,
	l'allemand, le japonais, le coréen, le français,
	le russe, le vietnamien et d'autres.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="using-localization"></a>23.3. Utiliser la localisation</h2></div></div></div><p>Dans toute sa splendeur, I18N n'est pas spécifique
      à FreeBSD et est une convention.  Nous vous encourageons
      à aider FreeBSD à suivre cette convention.</p><a id="idp80030288" class="indexterm"></a><p>Le paramétrage des &#8220;locales&#8221; est basé
      sur trois termes principaux: le code de la langue, le code du
      pays, et le codage des caractères. Les noms de
      &#8220;locales&#8221; sont construits à partir de ces trois
      éléments comme suit:</p><pre class="programlisting"><em class="replaceable"><code>CodeLangue</code></em>_<em class="replaceable"><code>CodePays</code></em>.<em class="replaceable"><code>CodageCaractères</code></em></pre><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80032464"></a>23.3.1. Codage de la langue et du pays</h3></div></div></div><a id="idp80033104" class="indexterm"></a><a id="idp80033616" class="indexterm"></a><p>Afin de localiser un système FreeBSD pour une langue
	spécifique (ou tout autre <span class="trademark">UNIX</span>® supportant l'I18N),
	l'utilisateur doit déterminer les codes spécifiques
	pour le pays et la langue (les codes pays indiquent aux
	applications quelle variation d'une langue donnée utiliser).
	De plus, les navigateurs Web, les serveurs SMTP/POP, les
	serveurs Web... agissent en fonction de ces codes.  Ce qui suit
	est un exemple de codes langue/pays:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Code langue/pays</th><th>Description</th></tr></thead><tbody><tr><td>en_US</td><td>Anglais - Etats Unis</td></tr><tr><td>ru_RU</td><td>Russe pour la Russie</td></tr><tr><td>zh_TW</td><td>Chinois traditionnel pour Taiwan</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80054096"></a>23.3.2. Codage des caractères</h3></div></div></div><a id="idp80054736" class="indexterm"></a><a id="idp80055248" class="indexterm"></a><p>Certaines langues utilisent les codages non-ASCII sur 8 bits
	ou codent des caractères sur plusieurs octets, voir
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a> pour plus de détails.  Les vieilles
	applications ne les reconnaissent pas ou les remplacent à
	tord par des caractères de contrôle.  Les applications
	récentes reconnaissent normalement les caractères 8 bits.
	En fonction de l'implémentation, les utilisateurs devront
	peut être compiler une application avec le support des
	caractères sur 8 bits ou multi-octets, ou la configurer
	correctement.  Afin d'accepter l'usage et le traitement de tels
	caractères, le <a class="link" href="../../../../ports/index.html" target="_top">catalogue des logiciels
	portés de FreeBSD</a> fournit pour certains programmes une
	version dans chaque langue.  Référez-vous à
	la documentation I18N de chaque logiciel porté
	respectif.</p><p>Spécifiquement, l'utilisateur doit consulter la
	documentation de l'application pour décider de comment
	la configurer correctement ou comment passer les valeurs
	correctes à la procédure configure, au
	<code class="filename">Makefile</code> ou au compilateur.</p><p>Quelques éléments à garder à
	l'esprit sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les jeux de caractères au codage simple
	    des caractères de la bibliothèque C (voir
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a>), par exemple ISO8859-1, ISO8859-15, KOI8-R,
	    et CP437.</p></li><li class="listitem"><p>Les codages étendus ou multi-octets, e.g. EUC,
	    Big5.</p></li></ul></div><p>Vous pouvez contrôler la liste des jeux de
	caractères actuellement actifs dans le
	<a class="link" href="http://www.iana.org/assignments/character-sets" target="_top">registre
	de l'IANA</a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">FreeBSD utilise à la
	place un codage des &#8220;locales&#8221; compatible avec
	X11.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80067408"></a>23.3.3. Applications I18N</h3></div></div></div><p>Dans le système de logiciels portés et
	pré-compilés de FreeBSD, les applications I18N ont
	été nommées avec <code class="literal">I18N</code> dans
	leur nom pour une identification aisée.  Cependant, elles
	ne supportent pas toujours la langue désirée.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="setting-locale"></a>23.3.4. Configurer les &#8220;locales&#8221;</h3></div></div></div><p>Généralement il est suffisant
	d'exporter le nom de la &#8220;locale&#8221; grâce à
	la variable <code class="envar">LANG</code> sous l'interpréteur
	de commandes utilisé lors de la session. Cela
	pourra être fait dans le fichier
	<code class="filename">~/.login_conf</code> de l'utilisateur ou le
	fichier de configuration de l'interpréteur de commandes
	de l'utilisateur (<code class="filename">~/.profile</code>,
	<code class="filename">~/.bashrc</code>,	<code class="filename">~/.cshrc</code>).
	Il n'est pas nécessaire de configurer
	toutes les autres variables de localisation
	comme <code class="envar">LC_CTYPE</code>, <code class="envar">LC_CTIME</code>.
	Veuillez consulter la documentation de FreeBSD
	spécifique à votre langue pour plus d'informations.</p><p>Vous devrez configurer les deux variables d'environnement
	suivantes dans vos fichiers de configuration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp80073936" class="indexterm"></a><p><code class="envar">LANG</code> pour la famille de fonctions <span class="trademark">POSIX</span>®
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=setlocale&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">setlocale</span>(3)</span></a></p></li><li class="listitem"><a id="idp80076624" class="indexterm"></a><p><code class="envar">MM_CHARSET</code> pour le jeu de caractères MIME
	    des applications</p></li></ul></div><p>Cela comprend la configuration de l'interpréteur de
	commandes, la configuration spécifique des applications, et
	celle de X11.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80078544"></a>23.3.4.1. Méthodes de configuration des
	  &#8220;locales&#8221;</h4></div></div></div><a id="idp80079184" class="indexterm"></a><a id="idp80079696" class="indexterm"></a><p>Il existe deux méthodes pour configurer les
	  &#8220;locales&#8221;, elles sont décrites ci-dessous.  La
	  première (celle qui est recommandée) est d'assigner les
	  variables d'environnement dans une <a class="link" href="#login-class" title="23.3.4.1.1. Méthode utilisant les classes de session utilisateur">classe de session</a>, et la seconde
	  est d'ajouter le paramétrage des variables d'environnement
	  dans les <a class="link" href="#startup-file" title="23.3.4.1.2. Méthode utilisant les fichiers d'initialisation de l'interpréteur de commandes">fichiers
	  d'initialisation</a> de l'interpréteur de commandes du
	  système.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="login-class"></a>23.3.4.1.1. Méthode utilisant les classes de session
	    utilisateur</h5></div></div></div><p>Cette méthode permet d'assigner une fois pour toute
	    les variables d'environnement nécessaires pour le nom
	    des &#8220;locales&#8221; et le jeu de caractères MIME et
	    cela pour toutes les sessions au lieu de le faire à chaque
	    nouvelle session par l'intermédiaire de la configuration
	    des fichiers d'initialisation de l'interpréteur de
	    commandes.  La <a class="link" href="#usr-setup" title="23.3.4.1.1.1. Configuration au niveau utilisateur">configuration au
	    niveau utilisateur</a> peut être faite par
	    l'utilisateur lui-même et la <a class="link" href="#adm-setup" title="23.3.4.1.1.2. Configuration au niveau administrateur">configuration au niveau
	    administrateur</a> demande les privilèges de
	    super-utilisateur.</p><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="usr-setup"></a>23.3.4.1.1.1. Configuration au niveau utilisateur</h6></div></div></div><p>Voici un exemple minimal d'un fichier
	      <code class="filename">.login_conf</code> dans le répertoire
	      personnel d'un utilisateur, fichier qui a les deux
	      variables fixées pour le codage Latin-1:</p><pre class="programlisting">me:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:</pre><a id="idp80090192" class="indexterm"></a><p>Voici un exemple de fichier
	       <code class="filename">.login_conf</code> qui fixe les variables
	       pour le chinois traditionnel dans le codage BIG-5.  Notez
	       les nombreuses variables supplémentaires
	       paramétrées
	       parce que certains logiciels ne respectent pas les
	       variables des &#8220;locales&#8221; correctement pour le
	       chinois, le japonais, et le coréen.</p><pre class="programlisting">#Users who do not wish to use monetary units or time formats
#of Taiwan can manually change each variable
me:\
	:lang=zh_TW.Big5:\
	:setenv=LC_ALL=zh_TW.Big:\
	:setenv=LC_COLLATE=zh_TW.Big5:\
	:setenv=LC_CTYPE=zh_TW.Big5:\
	:setenv=LC_MESSAGES=zh_TW.Big5:\
	:setenv=LC_MONETARY=zh_TW.Big5:\
	:setenv=LC_NUMERIC=zh_TW.Big5:\
	:setenv=LC_TIME=zh_TW.Big5:\
	:charset=big5:\
	:xmodifiers="@im=gcin": #Set gcin as the XIM Input Server</pre><p>Voir la <a class="link" href="#adm-setup" title="23.3.4.1.1.2. Configuration au niveau administrateur">configuration au
	      niveau administrateur</a> et la page de manuel
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=login.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">login.conf</span>(5)</span></a> pour plus de détails.</p></div><div class="sect5"><div xmlns="" class="titlepage"><div><div><h6 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="adm-setup"></a>23.3.4.1.1.2. Configuration au niveau administrateur</h6></div></div></div><p>Vérifiez que que la classe de session d'utilisateur dans <code class="filename">/etc/login.conf</code>
	      fixe la bonne langue.
	      Soyez sûr que ces paramètres
	      apparaissent dans <code class="filename">/etc/login.conf</code>:</p><pre class="programlisting"><em class="replaceable"><code>nom_langue</code></em>:<em class="replaceable"><code>intitulé_comptes</code></em>:\
	:charset=<em class="replaceable"><code>jeu_caractères_MIME</code></em>:\
	:lang=<em class="replaceable"><code>nom_locale</code></em>:\
	:tc=default:</pre><p>Donc si l'on reste sur notre exemple précédent
	      utilisant le Latin-1, cela donnera quelque chose
	      comme:</p><pre class="programlisting">german:German Users Accounts:\
	:charset=ISO-8859-1:\
	:lang=de_DE.ISO8859-1:\
	:tc=default:</pre><p>Avant de modifier les classes de session des
	      utilisateurs, exécutez la commande
	      suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><p>pour rendre visible à
	      l'intégralité du système la
	      nouvelle configuration du fichier
	      <code class="filename">/etc/login.conf</code>.</p><h5 class="title"><a id="idp80104784"></a>Modifier les classes de session avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a></h5><a id="idp80105936" class="indexterm"></a><p>Utilisez <code class="command">vipw</code> pour ajouter de
	      nouveaux utilisateurs, et créer une entrée
	      ressemblant à celle-ci:</p><pre class="programlisting">utilisateur:mot_de_passe:1111:11:<em class="replaceable"><code>langue</code></em>:0:0:Nom d'utilisateur:/home/utilisateur:/bin/sh</pre><h5 class="title"><a id="idp80108368"></a>Modifier les classes de session avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a></h5><a id="idp80109520" class="indexterm"></a><a id="idp80110544" class="indexterm"></a><p>Utilisez <code class="command">adduser</code> pour ajouter de
	      nouveaux utilisateurs, et faites ce qui suit:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Paramétrez <code class="literal">defaultclass =
		  langue</code> dans
		  <code class="filename">/etc/adduser.conf</code>.  Gardez à
		  l'esprit que vous devez dans ce cas entrer une classe par
		  <code class="literal">default</code> (défaut) pour tous les
		  utilisateurs d'autres langues.</p></li><li class="listitem"><p>Une variante est d'entrer la langue
		  spécifiée à chaque fois que
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> affiche
</p><pre class="screen"><code class="prompt">Enter login class: default []:</code></pre><p>.</p></li><li class="listitem"><p>Une autre alternative est d'employer ce qui suit
		  pour chaque utilisateur de langue différente que vous
		  désirez ajouter:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adduser -class langue</code></strong></pre></li></ul></div><h5 class="title"><a id="idp80117968"></a>Modifier les classes de session avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a></h5><a id="idp80123344" class="indexterm"></a><p>Si vous utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pw</span>(8)</span></a> pour ajouter de nouveaux
	      utilisateurs, appelez la fonction de cette
	      manière:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd nom_utilisateur -L langue</code></strong></pre></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="startup-file"></a>23.3.4.1.2. Méthode utilisant les fichiers d'initialisation de
	    l'interpréteur de commandes</h5></div></div></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette méthode n'est pas recommandée parce qu'elle
	      demande une configuration différente pour chaque
	      interpréteur de commandes choisi.  Utilisez la <a class="link" href="#login-class" title="23.3.4.1.1. Méthode utilisant les classes de session utilisateur">méthode utilisant les classes
	      de session utilisateur</a> à la place.</p></div><a id="idp80128720" class="indexterm"></a><a id="idp80129232" class="indexterm"></a><p>Pour ajouter le nom de la &#8220;locale&#8221; et le jeu
	    de caractère MIME, positionnez juste les deux variables
	    d'environnement comme montré ci-dessous dans les fichiers
	    d'initialisation de l'interpréteur de commandes
	    <code class="filename">/etc/profile</code> et/ou
	    <code class="filename">/etc/csh.login</code>.  Nous utiliserons la
	    langue allemande comme exemple ci-dessous:</p><p>Dans <code class="filename">/etc/profile</code>:</p><pre class="programlisting"><code class="envar">LANG=de_DE.ISO8859-1; export LANG</code>
<code class="envar">MM_CHARSET=ISO-8859-1; export MM_CHARSET</code></pre><p>Ou dans <code class="filename">/etc/csh.login</code>:</p><pre class="programlisting"><code class="envar">setenv LANG de_DE.ISO8859-1</code>
<code class="envar">setenv MM_CHARSET ISO-8859-1</code></pre><p>Alternativement, vous pouvez ajouter les instructions
	    précédentes à
	    <code class="filename">/usr/share/skel/dot.profile</code> (similaire
	    à ce qui fut utilisé dans
	    <code class="filename">/etc/profile</code> ci-dessus), ou
	    <code class="filename">/usr/share/skel/dot.login</code> (similaire
	    à ce qui fut utilisé dans
	    <code class="filename">/etc/csh.login</code> ci-dessus).</p><p>Pour X11:</p><p>Dans <code class="filename">$HOME/.xinitrc</code>:</p><pre class="programlisting"><code class="envar">LANG=de_DE.ISO8859-1; export LANG</code></pre><p>Ou:</p><pre class="programlisting"><code class="envar">setenv LANG de_DE.ISO8859-1</code></pre><p>En fonction de votre interpréteur de commandes (vois
	    ci-dessus).</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="setting-console"></a>23.3.5. Configuration de la console</h3></div></div></div><p>Pour tous les ensembles de jeu de caractères
	utilisés par la bibliothèque C,
	positionnez les bonnes polices de caractères pour la console
	dans <code class="filename">/etc/rc.conf</code> pour la langue en
	question avec:</p><pre class="programlisting">font8x16=<em class="replaceable"><code>nom_police</code></em>
font8x14=<em class="replaceable"><code>nom_police</code></em>
font8x8=<em class="replaceable"><code>nom_police</code></em></pre><p>Le <em class="replaceable"><code>nom_police</code></em> provient ici du
	répertoire <code class="filename">/usr/share/syscons/fonts</code>,
	sans le suffixe <code class="filename">.fnt</code>.</p><a id="idp80148304" class="indexterm"></a><a id="idp80149200" class="indexterm"></a><a id="idp80149712" class="indexterm"></a><p>Vérifiez également que vous avez
	paramétré les bonnes tables de clavier et de
	correspondance d'affichage pour votre jeu de caractères C par
	l'intermédiaire de <code class="command">sysinstall</code> (<code class="filename">/stand/sysinstall</code> sous les versions de FreeBSD antérieures à la 5.2).
	Une fois dans <span class="application">sysinstall</span>, sélectionnez
	<span class="guimenuitem">Configure</span>, puis
	<span class="guimenuitem">Console</span>.
	Alternativement, vous pouvez ajouter ce qui suit au fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">scrnmap=<em class="replaceable"><code>table_correspondance_affichage</code></em>
keymap=<em class="replaceable"><code>nom_table_clavier</code></em>
keychange="<em class="replaceable"><code>numéro_touche_fonction séquence</code></em>"</pre><p>La <em class="replaceable"><code>table_correspondance_affichage</code></em>
	ici provient du répertoire
        <code class="filename">/usr/share/syscons/scrnmaps</code> sans le suffixe
	<code class="filename">.scm</code>.  Une table de correspondance
	d'affichage avec une police de correspondance est
	généralement nécessaire pour passer de 8
	à 9 bits la matrice de caractère d'une carte VGA
	dans une zone pseudo-graphique, i.e., déplacer les lettres en
	dehors de cette zone si la police d'écran utilise une colonne de
	8 bits.</p><p>Si vous avez le &#8220;daemon&#8221;
	<span class="application">moused</span> activé par défaut
	grâce à la ligne suivante dans votre
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">moused_enable="YES"</pre><p>alors lisez les informations sur le curseur de souris dans
	le paragraphe suivant.</p><a id="idp80162256" class="indexterm"></a><p>Par défaut le curseur du pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syscons&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">syscons</span>(4)</span></a> de
	la console occupe la zone d'adresses 0xd0-0xd3 dans le jeu de
	caractères.
	Si votre langue utilise cette zone, vous devez déplacer la zone
	du curseur en dehors.  Pour effectuer cela sous FreeBSD, ajoutez
	la ligne suivante dans <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">mousechar_start=3</pre><p>Le <em class="replaceable"><code>nom_table_clavier</code></em> provient ici
	du répertoire <code class="filename">/usr/share/syscons/keymaps</code>
	sans le suffixe <code class="filename">.kbd</code>.  Si vous n'êtes
	pas sûr de la table de clavier à utiliser, vous pouvez
	employer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kbdmap&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">kbdmap</span>(1)</span></a> pour tester la table sans avoir à
	redémarrer.</p><p>Le <code class="literal">keychange</code> est généralement
	utilisé pour programmer les touches de fonction pour
	correspondre avec le type de terminal sélectionné
	parce que les séquences de touches de fonction ne peuvent
	être définies dans la table de clavier.</p><p>Soyez également sûr de configurer le type
	de console correct dans le fichier <code class="filename">/etc/ttys</code>
	pour toutes les entrées <code class="literal">ttyv*</code>.  Les
	correspondances actuellement pré-définies sont:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Jeu de caractères</th><th>Type de terminal</th></tr></thead><tbody><tr><td>ISO8859-1 ou ISO8859-15</td><td><code class="literal">cons25l1</code></td></tr><tr><td>ISO8859-2</td><td><code class="literal">cons25l2</code></td></tr><tr><td>ISO8859-7</td><td><code class="literal">cons25l7</code></td></tr><tr><td>KOI8-R</td><td><code class="literal">cons25r</code></td></tr><tr><td>KOI8-U</td><td><code class="literal">cons25u</code></td></tr><tr><td>CP437 (jeu de caractères VGA par
		défaut)</td><td><code class="literal">cons25</code></td></tr><tr><td>US-ASCII</td><td><code class="literal">cons25w</code></td></tr></tbody></table></div><p>Pour les langues au caractères étendus ou
	multi-octets, utilisez le logiciel porté adéquat
	de votre répertoire
	<code class="filename">/usr/ports/langue</code>.
	Certains logiciels apparaissent comme utilisant la console alors
	que le système lui voit un vtty série, par
	conséquent vous devez réserver suffisamment de vttys
	pour X11 et la console pseudo-série.  Voici une liste partielle
	des applications pour utiliser d'autres langues sous la
	console:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Langue</th><th>Emplacement</th></tr></thead><tbody><tr><td>Chinois traditionnel (BIG-5)</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/chinese/big5con/pkg-descr">chinese/big5con</a></td></tr><tr><td>Japonais</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/kon2-16dot/pkg-descr">japanese/kon2-16dot</a> ou
	        <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/japanese/mule_freewnn/pkg-descr">japanese/mule_freewnn</a></td></tr><tr><td>Coréen</td><td><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/korean/han/pkg-descr">korean/han</a></td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80198352"></a>23.3.6. Configuration d'X11</h3></div></div></div><p>Bien qu'X11 ne fasse pas partie du projet FreeBSD, nous
	avons inclus quelques éléments d'informations
	ici pour les utilisateurs de FreeBSD.  Pour plus de détails,
	référez-vous au <a class="link" href="http://www.x.org/" target="_top">site
	Web d'Xorg</a> ou à celui du serveur X11 que vous
	utilisez.</p><p>Dans le fichier <code class="filename">~/.Xresources</code>, vous
	pouvez en plus adapter les paramètres I18N spécifiques
	des applications (e.g., polices de caractères, menus,
	etc...).</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80200656"></a>23.3.6.1. Affichage des polices de caractères</h4></div></div></div><a id="idp80201296" class="indexterm"></a><p>Installez le serveur <span class="application">Xorg</span>
	  (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/xorg-server/pkg-descr">x11-servers/xorg-server</a>) ou le
	  serveur <span class="application"><span class="trademark">XFree86</span>&#8482;</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-servers/XFree86-4-Server/pkg-descr">x11-servers/XFree86-4-Server</a>),
	  puis installez les polices de caractères <span class="trademark">TrueType</span>®
	  de la langue concernée.
	  Un paramétrage correct des &#8220;locales&#8221; devrait vous
	  permettre de visualiser les menus dans la langue que vous avez
	  choisie etc.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80208720"></a>23.3.6.2. Saisie de caractères non-anglais</h4></div></div></div><a id="idp80209360" class="indexterm"></a><p>Le protocole &#8220;X11 Input Method&#8221; - méthode de
	  saisie pour X11 (XIM) est un nouveau standard pour tous les
	  clients X11.  Toutes les applications X11 devraient être
	  écrites en tant que clients XIM qui reçoivent les
	  entrées de serveurs de saisie XIM.  Il existe différents
	  serveurs XIM disponibles pour différentes langues.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80210512"></a>23.3.7. Configuration de l'imprimante</h3></div></div></div><p>Certains jeux de caractères de la bibliothèque C
	sont généralement codés en dur dans les
	imprimantes.  Les jeux de caractères étendus ou
	multi-octets demandent une configuration spéciale et nous
	recommandons d'utiliser <span class="application">apsfilter</span>.
	Vous pouvez également convertir le document en format <span class="trademark">PostScript</span>®
	ou PDF en utilisant des convertisseurs spécifiques à la
	langue.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80212688"></a>23.3.8. Noyau et systèmes de fichiers</h3></div></div></div><p>Le système de fichiers rapide de FreeBSD (FFS) est complètement
	sur 8 bits, et peut donc être utilisé avec n'importe quel
	jeu de caractères de la bibliothèque C (voir
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=multibyte&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">multibyte</span>(3)</span></a>), mais il n'y a aucun jeu de caractères de
	stocké dans le système de fichiers; i.e., c'est du 8
	bits brut et le système ne sait rien sur l'ordre du codage.
	Officiellement, le FFS ne supporte encore aucun jeu de
	caractères étendus ou multi-octets.
	Cependant, certains jeux de caractères étendus ou
	multi-octets disposent de correctifs indépendants
	pour FFS activant un tel support.  Ce sont seulement des
	solutions temporaires non portables ou des
	&#8220;bidouilles&#8221; et nous avons décidé
	de ne pas les inclure dans l'arborescence des sources.
	Référez-vous aux sites Internet des langues respectives
	pour plus d'informations et pour les correctifs.</p><a id="idp80214480" class="indexterm"></a><a id="idp80214992" class="indexterm"></a><p>Le support FreeBSD du système fichiers <span class="trademark">MS-DOS</span>® a la
	capacité paramétrable de faire la conversion entre
	jeux de caractères <span class="trademark">MS-DOS</span>®, Unicode et les jeux de
	caractères choisis pour le système de fichiers FreeBSD.
	Voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a> pour plus de
	détails.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="l10n-compiling"></a>23.4. Compiler des programmes I18N</h2></div></div></div><p>De nombreux logiciels ont été portés
      pour FreeBSD avec le support I18N.  Certains d'entre eux sont
      identifiés avec -I18N dans le nom du logiciel porté.
      Ces derniers et beaucoup d'autres programmes intègrent le
      support I18N et ne nécessitent aucune considération
      spéciale.</p><a id="idp80219216" class="indexterm"></a><p>Cependant, certaines applications comme
      <span class="application">MySQL</span> nécessitent d'avoir un fichier
      <code class="filename">Makefile</code> configuré avec le jeu de
      caractères spécifiques.  Ceci est en
      général fait dans le <code class="filename">Makefile</code>
      ou effectué en passant une valeur à <span class="application">configure</span> dans les
      sources.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="lang-setup"></a>23.5. Localiser FreeBSD pour des langues spécifiques</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ru-localize"></a>23.5.1. Russe (codage KOI8-R)</h3></div><div><span class="authorgroup">Contribution originelle de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrey</span> <span class="surname">Chernov</span></span>. </span></div></div></div><a id="idp80229712" class="indexterm"></a><p>Pour plus d'informations sur le codage KOI8-R, consultez les
	<a class="link" href="http://koi8.pp.ru/" target="_top">Références KOI8-R
	(Jeu de caractères russes pour Internet)</a>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80231888"></a>23.5.1.1. Configuration des &#8220;locales&#8221;</h4></div></div></div><p>Ajoutez les lignes suivantes dans votre fichier
	  <code class="filename">~/.login_conf</code>:</p><pre class="programlisting">me:My Account:\
	:charset=KOI8-R:\
	:lang=ru_RU.KOI8-R:</pre><p>Voir plus haut dans ce chapitre pour des exemples de
	  configuration des <a class="link" href="#setting-locale" title="23.3.4. Configurer les &#8220;locales&#8221;">&#8220;locales&#8221;</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80234704"></a>23.5.1.2. Configuration de la console</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ajoutez la ligne suivante à votre fichier
	      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">mousechar_start=3</pre></li><li class="listitem"><p>Ajoutez également les paramétres suivants dans
	      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">keymap="ru.koi8-r"
scrnmap="koi8-r2cp866"
font8x16="cp866b-8x16"
font8x14="cp866-8x14"
font8x8="cp866-8x8"</pre></li><li class="listitem"><p>Pour chaque entrée <code class="literal">ttyv*</code>
	      dans <code class="filename">/etc/ttys</code>, utilisez
	      <code class="literal">cons25r</code> comme type de terminal.</p></li></ul></div><p>Voir plus haut dans ce chapitre pour des exemples de
	  configuration de la
	  <a class="link" href="#setting-console" title="23.3.5. Configuration de la console">console</a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80246096"></a>23.5.1.3. Configuration de l'imprimante</h4></div></div></div><a id="idp80246736" class="indexterm"></a><p>Comme la plupart des imprimantes avec un jeu de
	  caractères russes ont un &#8220;code page&#8221;
	  matériel CP866, un filtre de sortie spécial pour
	  la conversion du KOI8-R vers le CP866 est nécessaire.
	  Un tel filtre est installé par défaut sous
	  <code class="filename">/usr/libexec/lpr/ru/koi2alt</code>.
	  Une entrée de <code class="filename">/etc/printcap</code>  pour
	  imprimante russe devra ressembler à:</p><pre class="programlisting">lp|Russian local line printer:\
	:sh:of=/usr/libexec/lpr/ru/koi2alt:\
	:lp=/dev/lpt0:sd=/var/spool/output/lpd:lf=/var/log/lpd-errs:</pre><p>Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=printcap&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">printcap</span>(5)</span></a> pour plus de
	  détails.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80254288"></a>23.5.1.4. Système de fichiers <span class="trademark">MS-DOS</span>® et noms de fichiers
	  russes</h4></div></div></div><p>L'exemple suivant d'entrée du fichier <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a>
	  active le support des noms de fichiers russes sur les
	  systèmes de fichiers <span class="trademark">MS-DOS</span>® montés:</p><pre class="programlisting">/dev/ad0s2      /dos/c  msdos   rw,-Wkoi2dos,-Lru_RU.KOI8-R 0 0</pre><p>L'option <code class="option">-L</code> la &#8220;locale&#8221;
	  utilisée, et <code class="option">-W</code> fixe la table de
	  conversion de caractères.  Pour utiliser l'option
	  <code class="option">-W</code> assurez-vous de monter <code class="filename">/usr</code> avant la partition <span class="trademark">MS-DOS</span>®,
	  car en effet les tables de conversion sont situées
	  dans le répertoire <code class="filename">/usr/libdata/msdosfs</code>.  Pour plus
	  d'informations, consultez la page de manuel
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_msdosfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_msdosfs</span>(8)</span></a>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80261200"></a>23.5.1.5. Configuration de X11</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Effectuez tout d'abord la configuration des
	      <a class="link" href="#setting-locale" title="23.3.4. Configurer les &#8220;locales&#8221;">&#8220;locales&#8221;</a>
	      comme décrit plus haut dans ce chapitre.</p></li><li class="listitem"><p>Si vous utilisez <span class="application">Xorg</span>,
	      installez le paquetage <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11-fonts/xorg-fonts-cyrillic/pkg-descr">x11-fonts/xorg-fonts-cyrillic</a>.</p><p>Contrôlez la section <code class="literal">"Files"</code>
	      de votre fichier <code class="filename">/etc/X11/xorg.conf</code>.
	      Les lignes suivantes doivent être ajoutées
	      <span class="emphasis"><em>avant</em></span> toute autre entrée
	      <code class="literal">FontPath</code>:</p><pre class="programlisting">FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/misc"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/75dpi"
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/100dpi"</pre><p>Si vous utilisez un mode vidéo haute
	      résolution, intervertissez les lignes 75 dpi et 100
	      dpi.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Consultez le catalogue des logiciels portés
		pour plus de fontes cyrilliques.</p></div></li><li class="listitem"><p>Pour mettre en service un clavier russe, ajoutez ce
	      qui suit à la section <code class="literal">"Keyboard"</code>
	      de votre fichier <code class="filename">xorg.conf</code>:</p><pre class="programlisting">Option "XkbLayout"   "us,ru"
Option "XkbOptions"  "grp:toggle"</pre><p>Vérifiez également que
	      <code class="literal">XkbDisable</code> est désactivé (mis en
	      commentaire).</p><p>Pour l'option <code class="literal">grp:caps_toggle</code> le passage de russe à latin se fera par
	      l'intermédiaire de <span class="keycap"><strong>Right Alt</strong></span>,
	      pour <code class="literal">grp:ctrl_shift_toggle</code>, le
	      passage se fera à l'aide de la séquence
	      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Shift</strong></span>.
	      L'ancienne fonctionnalitée de la touche
	      <span class="keycap"><strong>CapsLock</strong></span> est toujours disponible via
	      <span class="keycap"><strong>Shift</strong></span>+<span class="keycap"><strong>CapsLock</strong></span>
	      (en mode latin uniquement).  Pour l'option
	      <code class="literal">grp:toggle</code> le passage du russe au
	      latin se fera par l'intermédiaire de la touche
	      <span class="keycap"><strong>Right Alt</strong></span>.  L'option
	      <code class="literal">grp:caps_toggle</code> ne fonctionne pas
	      sous <span class="application">Xorg</span> pour une raison
	      inconnue.</p><p>Si vous disposez de touches &#8220;<span class="trademark">Windows</span>®&#8221; sur
	      votre clavier, et que vous constatez que certaines touches
	      non-alphabétiques ne sont pas appariées
	      correctement en mode russe, ajoutez la ligne suivante à
	      votre fichier <code class="filename">xorg.conf</code>:</p><pre class="programlisting">Option "XkbVariant" ",winkeys"</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le clavier russe XKB peut ne pas fonctionner avec
		des applications non localisées.</p></div></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">localisées.  Pour être un minimum
	    localisée, une application devrait appeler la
	    fonction <code class="function">XtSetLanguageProc (NULL, NULL,
	    NULL);</code> assez tôt dans le
	    programme.</p><p xmlns="http://www.w3.org/1999/xhtml">Consulter <a class="link" href="http://koi8.pp.ru/xwin.html" target="_top">KOI8-R pour X
	    Window</a> pour plus d'instructions sur la
	    localisation des applications pour X11.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80294224"></a>23.5.2. Localisation du chinois traditionnel pour Taiwan</h3></div></div></div><a id="idp80294864" class="indexterm"></a><p>Le projet FreeBSD taiwanais dispose d'un guide
	sur FreeBSD en chinois à l'adresse <code class="uri"><a class="uri" href="http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/" target="_top">http://netlab.cse.yzu.edu.tw/~statue/freebsd/zh-tut/</a></code>
	utilisant de nombreuses applications du répertoire
	<code class="filename">chinese</code> du catalogue des logiciels portés.
	Le rédacteur du guide sur FreeBSD en chinois est Shen
	Chuan-Hsing
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:statue@freebsd.sinica.edu.tw">statue@freebsd.sinica.edu.tw</a>&gt;</code>.</p><p>Chuan-Hsing Shen <code class="email">&lt;<a xmlns="" class="email" href="mailto:statue@freebsd.sinica.edu.tw">statue@freebsd.sinica.edu.tw</a>&gt;</code> a
	créé la <a class="link" href="http://netlab.cse.yzu.edu.tw/~statue/cfc/" target="_top">collection FreeBSD chinoise
	(CFC)</a> de logiciels en utilisant le document
	<code class="literal">zh-L10N-tut</code> taiwanais.  Les logiciels
	pré-compilés et les fichiers de procédures
	sont disponibles à l'adresse <code class="uri"><a class="uri" href="ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/" target="_top">ftp://freebsd.csie.nctu.edu.tw/pub/taiwan/CFC/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80304208"></a>23.5.3. Localisation pour la langue allemande (valable également
	pour tous les langues respectant le standard ISO 8859-1)</h3></div></div></div><a id="idp80304848" class="indexterm"></a><p>Slaven Rezic <code class="email">&lt;<a xmlns="" class="email" href="mailto:eserte@cs.tu-berlin.de">eserte@cs.tu-berlin.de</a>&gt;</code> a
	rédigé un guide sur l'utilisation des
	&#8220;umlauts&#8221; sur une machine FreeBSD.  Le guide est
	écrit en allemand et est disponible sur <code class="uri"><a class="uri" href="http://user.cs.tu-berlin.de/~eserte/FreeBSD/doc/umlaute/umlaute.html" target="_top">http://user.cs.tu-berlin.de/~eserte/FreeBSD/doc/umlaute/umlaute.html</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80307408"></a>23.5.4. Localisation pour le japonais et le coréen</h3></div></div></div><a id="idp80308048" class="indexterm"></a><a id="idp80309200" class="indexterm"></a><p>Pour le japonais, référez-vous à
	<code class="uri"><a class="uri" href="http://www.jp.FreeBSD.org/" target="_top">http://www.jp.FreeBSD.org/</a></code>,
	et pour le coréen à <code class="uri"><a class="uri" href="http://www.kr.FreeBSD.org/" target="_top">http://www.kr.FreeBSD.org/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80336592"></a>23.5.5. Documentation FreeBSD dans d'autres langues que
	l'anglais</h3></div></div></div><p>Certains contributeurs à FreeBSD ont traduit
	des parties de la documentation FreeBSD dans d'autres langues.
	Les traductions sont disponibles grâce à
	des liens sur le <a class="link" href="../../../../index.html" target="_top">site
	principal</a> ou dans
	<code class="filename">/usr/share/doc</code>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading"></a>Chapitre 24. Mise à jour de FreeBSD</h2></div><div><span class="authorgroup">Restructuré, réorganisé, et en partie mis
	  à jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div><div><span class="authorgroup">Travail original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jordan</span> <span class="surname">Hubbard</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Poul-Henning</span> <span class="surname">Kamp</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">John</span> <span class="surname">Polstra</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Nik</span> <span class="surname">Clayton</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#updating-upgrading-synopsis">24.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-freebsdupdate">24.2. Mise à jour de FreeBSD</a></span></dt><dt><span class="sect1"><a href="#updating-upgrading-portsnap">24.3. Portsnap: un outil de mise à jour du catalogue des
      logiciels portés</a></span></dt><dt><span class="sect1"><a href="#current-stable">24.4. Suivre une branche de développement</a></span></dt><dt><span class="sect1"><a href="#synching">24.5. Synchroniser vos sources</a></span></dt><dt><span class="sect1"><a href="#makeworld">24.6. Recompiler le système</a></span></dt><dt><span class="sect1"><a href="#small-lan">24.7. Suivre les mises à jour pour plusieurs machines</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-synopsis"></a>24.1. Synopsis</h2></div></div></div><p>FreeBSD est en constant développement entre deux
      versions.
      Certains utilisateurs préfèrent utiliser les
      versions publiées officiellement alors que d'autres
      voudront rester à jour avec les tous derniers
      développements.  Mêmes les versions officielles
      sont souvent mises à jour avec les correctifs de
      problèmes critiques et de sécurité.
      Indépendamment de la version utilisée, FreeBSD
      fournit tous les outils nécessaires à la mise
      à jour de votre système, et permet
      également des mises à jour aisées entre
      versions.
      Ce chapitre vous aidera à
      décider si vous voulez suivre les développements, ou vous
      en tenir aux versions publiées.  Les outils de base pour
      le maintien à jour de votre système seront
      également présentés.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Quels utilitaires peuvent être employés
	  pour mettre à jour le système et le catalogue
	  des logiciels portés.</p></li><li class="listitem"><p>Comment maintenir votre système à
	jour avec <span class="application">freebsd-update</span>,
	<span class="application">CVSup</span>,
	<span class="application">CVS</span>, ou
	<span class="application">CTM</span>.</p></li><li class="listitem"><p>Comment comparer l'état d'un système
	  installé avec une copie de confiance.</p></li><li class="listitem"><p>La différence entre les deux branches de
	  développement: FreeBSD-STABLE et FreeBSD-CURRENT.</p></li><li class="listitem"><p>Comment recompiler et réinstaller
	l'intégralité du système de base avec
	la commande <code class="command">make buildworld</code> (etc.).</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Correctement configurer votre connexion
	réseau (<a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>).</p></li><li class="listitem"><p>Savoir comment installer des logiciels
	tiers (<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Tout au long de ce chapitre, la commande
	<code class="command">cvsup</code> sera utilisée pour
	récupérer et mettre à jour les sources de
	FreeBSD.  Pour l'utiliser, vous devrez installer un logiciel
	porté ou pré-compilé tel que <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a>.  Si vous
	utilisez FreeBSD 6.2-RELEASE ou une version
	ultérieure, vous pouvez remplacer cette commande par
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a>, qui fait désormais partie du
	système de base.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-freebsdupdate"></a>24.2. Mise à jour de FreeBSD</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Basé sur des notes de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Colin</span> <span class="surname">Percival</span></span>. </span></div></div></div><a id="idp80372688" class="indexterm"></a><a id="idp80373200" class="indexterm"></a><p>Appliquer des correctifs de sécurité est une
      part importante de la maintenance de logiciels informatiques
      tout particulièrement dans le cas du système
      d'exploitation.  Pendant très longtemps sous FreeBSD, ce
      processus n'était pas aisé.  Les correctifs
      devaient être appliqués au code source, le code
      ensuite recompilé sous forme de binaires, et enfin les
      binaires devaient être ré-installés.</p><p>Ce processus n'est plus de mise comme FreeBSD dispose
      désormais d'un utilitaire appelé simplement
      <code class="command">freebsd-update</code>.  Cet utilitaire fournit deux
      fonctions distinctes.  Tout d'abord, il permet l'application de
      mises à jour de correction et de sécurité
      sur le système de base de FreeBSD sans nécessiter une
      compilation et une ré-installation.  En second lieu,
      l'utilitaire supporte les mises à jour mineures et
      majeures des versions publiées.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les mise à jour binaires sont disponibles pour
	toutes les architectures actuellement supportées par
	l'équipe de sécurité.  Avant de mettre
	à jour vers une nouvelle version, les annonces
	concernant la version devront être passées en
	revue sachant qu'elles peuvent contenir des informations
	importantes au sujet de cette version.  Ces annonces peuvent
	être consultées à l'adresse suivante:
	<code class="uri"><a class="uri" href="http://www.FreeBSD.org/releases/" target="_top">http://www.FreeBSD.org/releases/</a></code>.</p></div><p>S'il existe une table <code class="command">crontab</code> utilisant
      <code class="command">freebsd-update</code>, elle doit être
      désactivée avant de démarrer les
      opérations qui vont suivre.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-config-file"></a>24.2.1. Le fichier de configuration</h3></div></div></div><p>Certains utilisateurs peuvent souhaiter adapter le fichier
	de configuration par défaut
	<code class="filename">/etc/freebsd-update.conf</code>, permettant un
	meilleur contrôle du processus.  Les options sont
	très bien documentées, mais les suivantes
	demandent un peu plus d'explication:</p><pre class="programlisting"># Composants du système de base qui doivent être maintenus à jour.
Components src world kernel</pre><p>Ce paramètre contrôle quelles sont les
	parties de FreeBSD qui seront mises à jour.  Par
	défaut on met à jour le code source,
	l'intégralité du système de base et le
	noyau.  Les composants sont les mêmes que ceux
	disponibles durant l'installation, par exemple, ajouter
	<code class="literal">world/games</code> ici permettrait d'appliquer les
	correctifs relatifs aux jeux.  Utiliser
	<code class="literal">src/bin</code> permettrait la mise à jour
	du code source du répertoire <code class="filename">src/bin</code>.</p><p>La meilleure option est de laisser telle quelle la
	configuration par défaut car la modifier pour ajouter
	des éléments particuliers demandera à
	l'utilisateur de lister chaque élément qu'il
	désire mettre à jour.  Cela pourrait avoir des
	conséquences désastreuses puisque le code source
	et les binaires peuvent à terme ne plus être en
	phase.</p><pre class="programlisting"># Les chemins d'accès commençant par quelque chose correspondant à une
# entrée de type IgnorePaths seront ignorés.
IgnorePaths</pre><p>Ajoute les chemins d'accès comme <code class="filename">/bin</code> ou <code class="filename">/sbin</code> pour préserver
	intacts ces répertoires durant le processus de mise
	à jour.  Cette option peut être utilisée
	pour empêcher <code class="command">freebsd-update</code>
	d'écraser des modifications locales.</p><pre class="programlisting"># Les chemins d'accès qui commencent par quelque chose correspondant à
# une entrée de type UpdateIfUnmodified seront mis à jour que si le
# contenu du fichier n'a pas été modifié par l'utilisateur (à moins
# que les modifications ne soient fusionnées; voir plus bas).
UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile</pre><p>Met à jour les fichiers de configuration dans les
	répertoires désignés seulement s'ils
	n'ont pas été modifiés.  Tout changement
	effectué par l'utilisateur invalidera automatiquement
	la mise à jour de ces fichiers.  Il existe une autre
	option <code class="literal">KeepModifiedMetadata</code> qui indiquera
	à <code class="command">freebsd-update</code> de sauvegarder les
	changements durant la fusion.</p><pre class="programlisting"># Quand on met à jour vers une nouvelle version de FreeBSD, les fichiers
# correspondant à une entrée de type MergeChanges verront leurs
# différences locales fusionnées avec le fichier de la nouvelle
# version de FreeBSD.
MergeChanges /etc/ /var/named/etc/</pre><p>Liste des répertoires avec des fichiers de
	configuration que <code class="command">freebsd-update</code> devrait
	tenter de fusionner.  Le processus de fusion des fichiers est
	l'application d'une série de correctifs <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>
	similaires à ceux de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> avec cependant
	moins d'options, les fusions sont soit acceptées,
	ouvrant un éditeur, soit abandonnées par
	<code class="command">freebsd-update</code>.  En cas de doute,
	sauvegardez <code class="filename">/etc</code> et
	acceptez les fusions.  Consultez la section sur <a class="xref" href="#mergemaster" title="24.6.11.1. mergemaster">Section 24.6.11.1, « <code class="command">mergemaster</code> »</a> pour plus d'information sur la commande
	<code class="command">mergemaster</code>.</p><pre class="programlisting"># Répertoire dans lequel stocker les mise à jour téléchargées et les
# fichiers temporaires utilisés par la mise à jour de FreeBSD.
# WorkDir /var/db/freebsd-update</pre><p>Ce répertoire est l'endroit où tous les
	correctifs et les fichiers temporaires seront placés.
	Dans les cas où l'utilisateur effectue une mise
	à jour de version, cet emplacement doit disposer d'au
	moins un gigaoctet d'espace disponible.</p><pre class="programlisting"># Lors de mises à jour entre versions de FreeBSD, doit-on lire la liste
# de composants de manière stricte (StrictComponents yes)
# ou tout simplement comme une liste de composants qui *pourraient*
# être installés et pour lesquels la mise à jour de FreeBSD devrait
# déterminer lesquels sont effectivement installés et les mettre à
# jour (StrictComponents no)?
# StrictComponents no</pre><p>Cette option fixée à <code class="literal">yes</code>,
	<code class="command">freebsd-update</code> supposera que la liste de
	composants est complète et n'essaiera pas d'effectuer
	des modifications en dehors de cette liste.
	Concrètement, <code class="command">freebsd-update</code> tentera
	de mettre à jour chaque fichier appartenant à la
	liste de composants.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-security-patches"></a>24.2.2. Correctifs de sécurité</h3></div></div></div><p>Les correctifs de sécurité sont
	stockés sur une machine distante et peuvent être
	téléchargés et installés en
	utilisant la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update fetch</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Si des correctifs ont été appliqués
	au noyau le système devra être
	redémarré.  Si tout s'est bien passé le
	système est corrigé et
	<code class="command">freebsd-update</code> pourra être
	exécuté chaque nuit via un processus
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  Une entrée dans le fichier
	<code class="filename">/etc/crontab</code> devrait être
	suffisante pour accomplir cette tâche:</p><pre class="programlisting">@daily                                  root    freebsd-update cron</pre><p>Cette entrée indique qu'une fois par jour,
	l'utilitaire <code class="command">freebsd-update</code> sera
	exécuté.  De cette manière, en employant
	l'option <code class="option">cron</code>,
	<code class="command">freebsd-update</code> vérifiera seulement
	l'existence de mises à jour.  Si des correctifs
	existent, il seront automatiquement
	téléchargés sur le disque local mais
	non-appliqués.  L'utilisateur <code class="systemitem">root</code>
	sera contacté par courrier électronique, il
	pourra ainsi les installer manuellement.</p><p>Si quelque s'est mal passé,
	<code class="command">freebsd-update</code> a la capacité
	d'annuler le dernier ensemble de changements avec la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update rollback</code></strong></pre><p>Une fois la commande achevée, le système
	devra être redémarré si le noyau ou un de
	ses modules ont été modifiés.  Cela
	permettra à FreeBSD de charger en mémoire les
	nouveaux binaires.</p><p>L'utilitaire <code class="command">freebsd-update</code> peut mettre
	à jour uniquement et automatiquement le noyau
	<code class="literal">GENERIC</code>.  Si un noyau personnalisé
	est utilisé, il devra être recompilé et
	réinstallé après que la commande
	<code class="command">freebsd-update</code> ait achevé
	l'installation du reste des mises à jour.  Cependant
	<code class="command">freebsd-update</code> détectera et mettra
	à jour le noyau <code class="literal">GENERIC</code> dans
	<code class="filename">/boot/GENERIC</code> (s'il
	existe), et cela même si ce n'est pas le noyau actuel
	(qui tourne) du système.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">C'est toujours une bonne idée de conserver une
	  copie du noyau <code class="literal">GENERIC</code> dans <code class="filename">/boot/GENERIC</code>.  Cela sera utile
	  pour diagnostiquer une variété de
	  problèmes, et lors des mises à jour utilisant
	  <code class="command">freebsd-update</code> comme décrit dans
	  la <a class="xref" href="#freebsdupdate-upgrade" title="24.2.3. Mises à jour mineures et majeures">Section 24.2.3, « Mises à jour mineures et majeures »</a>.</p></div><p>A moins que la configuration par défaut
	présente dans
	<code class="filename">/etc/freebsd-update.conf</code> n'ait
	été modifiée,
	<code class="command">freebsd-update</code> installera les sources du
	noyau mises à jour avec le reste des mises à
	jour.  La recompilation et la réinstallation d'un noyau
	personnalisé peuvent effectuées de la
	manière classique.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les mises à jour distribuées via
	  <code class="command">freebsd-update</code>, n'impliquent pas toujours
	  le noyau.  Il ne sera pas nécessaire de recompiler
	  votre noyau personnalisé si les sources du noyau
	  n'ont pas été modifiées par
	  l'exécution de <code class="command">freebsd-update
	  install</code>.  Cependant
	  <code class="command">freebsd-update</code> met toujours à jour
	  le fichier
	  <code class="filename">/usr/src/sys/conf/newvers.sh</code>.  Le
	  niveau ou la version de correctifs (comme indiqué par
	  le nombre <code class="literal">-p</code> rapporté par
	  <code class="command">uname -r</code>) est obtenu à partir de
	  ce fichier.  Recompiler votre noyau personnalisé,
	  même si rien d'autre n'a changé, permettra
	  à la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=uname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">uname</span>(1)</span></a> de rapporter
	  précisément le niveau de correctifs du
	  système.  C'est particulièrement utile quand
	  on gère de multiples systèmes, car cela permet
	  une évaluation rapide des mises à jour
	  présentes sur chacun d'eux.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-upgrade"></a>24.2.3. Mises à jour mineures et majeures</h3></div></div></div><p>Ce processus supprimera les anciens fichiers objets et
	bibliothèques qui rendent inutilisables la plupart des
	applications tierce-partie.  Il est recommandé que tous
	les logiciels portés soient supprimés et
	réinstallés ou mis à jour
	ultérieurement en utilisant l'outil <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a>.  La plupart
	des utilisateurs voudront lancer une compilation test à
	l'aide de la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -af</code></strong></pre><p>Cela garantira que tout sera réinstallé
	correctement.  Notez que fixer la variable d'environnement
	<code class="varname">BATCH</code> à <code class="literal">yes</code>
	répondra <code class="literal">yes</code> à toute question
	lors de ce processus, supprimant ainsi la
	nécessité d'une intervention humaine durant le
	processus de compilation.</p><p>Si un noyau personnalisé est utilisé, le
	processus de mise à jour est un peu plus complexe.  Une
	copie du noyau <code class="literal">GENERIC</code> est
	nécessaire et devrait être placée dans le
	répertoire <code class="filename">/boot/GENERIC</code>.  Si le noyau
	<code class="literal">GENERIC</code> n'est pas présent sur le
	système, il peut être obtenu en utilisant une des
	méthodes suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si un noyau personnalisé a déjà
	    été compilé, le noyau présent
	    dans <code class="filename">/boot/kernel.old</code> est en fait
	    le noyau <code class="literal">GENERIC</code>.  Renommer ce
	    répertoire en <code class="filename">/boot/GENERIC</code>.</p></li><li class="listitem"><p>En supposant qu'un accès physique à la
	    machine est possible, une copie du noyau
	    <code class="literal">GENERIC</code> peut être installé
	    à partir d'un CD-ROM.  Insérer votre disque
	    d'installation et utiliser les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /cdrom</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/X.Y-RELEASE/kernels</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./install.sh GENERIC</code></strong></pre><p>Remplacer <code class="filename">X.Y-RELEASE</code>
	    avec la version que vous utilisez.  Le noyau
	    <code class="literal">GENERIC</code> sera installé par
	    défaut dans <code class="filename">/boot/GENERIC</code>.</p></li><li class="listitem"><p>En dehors de ce qui précède le noyau
	    <code class="literal">GENERIC</code> peut être
	    recompilé et installé à partir des
	    sources:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>env DESTDIR=/boot/GENERIC make kernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mv /boot/GENERIC/boot/kernel/* /boot/GENERIC</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /boot/GENERIC/boot</code></strong></pre><p>Pour que ce noyau soit pris en compte comme
	    <code class="literal">GENERIC</code> par
	    <code class="command">freebsd-update</code>, le fichier de
	    configuration <code class="literal">GENERIC</code> devra ne pas
	    avoir été modifié.  Il est
	    également suggéré qu'il soit
	    compilé sans aucune option particulière (de
	    préférence avec un fichier
	    <code class="filename">/etc/make.conf</code> vide).</p></li></ul></div><p>Redémarrer avec le noyau <code class="literal">GENERIC</code>
	n'est pas nécessaire à ce stade.</p><p>Les mises à jour de versions majeures et mineures
	peuvent être effectuées en passant à la
	commande <code class="command">freebsd-update</code> la version vers
	laquelle on désire mettre à jour, par exemple,
	la commande suivante effectuera la mise à jour vers
	FreeBSD 8.1:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update -r 8.1-RELEASE upgrade</code></strong></pre><p>La commande <code class="command">freebsd-update</code> analysera le
	fichier de configuration et le système afin de
	récupérer les informations nécessaires
	à la mise à jour du système.  A
	l'écran s'affichera quels sont les composants
	détectés et quels sont ceux qui n'ont pas
	été détectés.  Par exemple:</p><pre class="screen">Looking up update.FreeBSD.org mirrors... 1 mirrors found.
Fetching metadata signature for 8.0-RELEASE from update1.FreeBSD.org... done.
Fetching metadata index... done.
Inspecting system... done.

The following components of FreeBSD seem to be installed:
kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games
src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue
src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin
world/base world/info world/lib32 world/manpages

The following components of FreeBSD do not seem to be installed:
kernel/generic world/catpages world/dict world/doc world/games
world/proflibs

Does this look reasonable (y/n)? y</pre><p>A ce niveau <code class="command">freebsd-update</code> tentera de
	télécharger tous les fichiers nécessaires
	à la mise à jour.  Dans certains cas
	l'utilisateur sera interrogé sur ce qu'il faut
	installer ou sur comment procéder à certaines
	actions.</p><p>Si un noyau personnalisé est utilisé,
	l'étape précédente produira un
	avertissement semblable au suivant:</p><pre class="screen">WARNING: This system is running a "<em class="replaceable"><code>MYKERNEL</code></em>" kernel, which is not a
kernel configuration distributed as part of FreeBSD 8.0-RELEASE.
This kernel will not be updated: you MUST update the kernel manually
before running "/usr/sbin/freebsd-update install"</pre><p>Cet avertissement peut sans risque être
	ignoré à ce niveau.  Le noyau
	<code class="filename">GENERIC</code> mis à jour sera
	utilisé comme une étape intermédiaire
	dans le processus de mise à jour.</p><p>Une fois l'ensemble des correctifs
	téléchargé sur le système local,
	ils seront appliqués.  Ce processus peut prendre plus
	ou moins de temps en fonction de la vitesse et de la charge de
	la machine.  Les fichiers de configuration seront
	fusionnés &#8212; cette partie du processus
	demande l'intervention de l'utilisateur car un fichier peut
	être automatiquement fusionné ou en cas de besoin
	un éditeur peut apparaître sur l'écran
	pour une fusion manuelle.  Les résultats des fusions
	réussies seront affichés au fur et à
	mesure que se déroule l'opération.  Un
	échec ou une fusion ignorée provoqueront
	l'arrêt du processus.  Certains utilisateurs peuvent
	vouloir conserver une sauvegarde du répertoire
	<code class="filename">/etc</code> et fusionner plus
	tard à la main les fichiers importants comme
	<code class="filename">master.passwd</code> ou
	<code class="filename">group</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le système n'a pas encore été
	  réellement modifié, les fusions et
	  l'application des correctifs ont lieu dans un autre
	  répertoire.  Quand tous les correctifs ont
	  été appliqués avec succès, que
	  tous les fichiers de configuration ont été
	  fusionnés et que le processus s'est
	  déroulé sans problème, les
	  modifications devront être appliquées
	  définitivement au système par
	  l'utilisateur.</p></div><p>Une fois les opérations précédentes
	achevées, la mise à jour peut être
	appliquée en utilisant la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Le noyau et les modules seront corrigés les
	premiers.  A ce moment la machine doit être
	obligatoirement redémarrée.  Si le
	système utilisait un noyau personnalisé,
	utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nextboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nextboot</span>(8)</span></a> pour indiquer le noyau
	<code class="filename">/boot/GENERIC</code> (qui a
	été mis à jour) pour le prochain
	démarrage:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nextboot -k GENERIC</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avant de redémarrer sur le noyau
	  <code class="literal">GENERIC</code>, assurez-vous qu'il contient tous
	  les pilotes nécessaires pour que votre système
	  démarre correctement (et se connecte au
	  réseau, si la mise à jour de la machine se
	  fait à distance).  En particulier, si le noyau
	  précédemment utilisé contient des
	  fonctions généralement fournies par des
	  modules, faites en sorte de charger temporairement ces
	  modules avec le noyau <code class="filename">GENERIC</code> à
	  l'aide de <code class="filename">/boot/loader.conf</code>.  Vous
	  pouvez également avoir intérêt à
	  désactiver les services non-indispensables, les
	  montages réseaux ou disques, etc.  avant que le
	  processus de mise à jour ne soit
	  achevé.</p></div><p>La machine doit maintenant être
	redémarrée avec le noyau mis à
	jour:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><p>Une fois la machine de nouveau active,
	<code class="command">freebsd-update</code> devra être
	lancée à nouveau.  L'état du processus de
	mise à jour a été sauvegardé, et
	donc <code class="command">freebsd-update</code> ne recommencera pas au
	début, mais supprimera les anciens fichiers objet et
	bibliothèques partagées.  Afin de poursuivre les
	opérations, taper la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">En fonction d'un changement ou non de
	  numérotation d'une ou plusieurs bibliothèques,
	  il pourra y avoir deux phases d'installation au lieu de
	  trois.</p></div><p>Tous les logiciels tierce-partie doivent être
	maintenant recompilés et réinstallés.
	Cela est nécessaire comme certains logiciels peuvent
	dépendre de bibliothèques qui ont
	été supprimées lors du processus de mise
	à jour.  La commande <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portupgrade/pkg-descr">ports-mgmt/portupgrade</a> peut
	être employée pour automatiser la chose.  Les
	commandes suivantes peuvent être utilisées pour
	initier le processus:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portupgrade -f ruby</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm /var/db/pkg/pkgdb.db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portupgrade -f ruby18-bdb</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm /var/db/pkg/pkgdb.db /usr/ports/INDEX-*.db</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portupgrade -af</code></strong></pre><p>Une fois cela effectué, terminer le processus de
	mise à jour avec un dernier appel à
	<code class="command">freebsd-update</code>.  Taper la commande suivante
	pour régler les derniers détails:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update install</code></strong></pre><p>Si le noyau <code class="literal">GENERIC</code> a été
	utilisé temporairement, il est temps de compiler et
	d'installer un nouveau noyau personnalisé suivant la
	méthode habituelle.</p><p>Redémarrer la machine avec la nouvelle version de
	FreeBSD.  Le processus de mise à jour est
	terminé.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsdupdate-system-comparison"></a>24.2.4. Comparaison de l'état du système</h3></div></div></div><p>L'utilitaire <code class="command">freebsd-update</code> peut
	être utilisé pour comparer l'état du
	système FreeBSD installé avec une copie de
	confiance.  Cette fonctionnalité inspecte la version
	actuelle des utilitaires système, des
	bibliothèques et des fichiers de configuration.  Pour
	lancer la comparaison, utiliser la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>freebsd-update IDS &gt;&gt; outfile.ids</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bien que le nom de la commande soit
	  <acronym class="acronym">IDS</acronym>, elle ne devrait en aucun cas
	  être considérée comme un système
	  de détection d'intrusion du type de <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/snort/pkg-descr">security/snort</a>.  Etant
	  donné que <code class="command">freebsd-update</code> stocke
	  des données sur le disque, le risque de modification
	  des données est évident.  Alors que cette
	  possibilité peut être minimisée en
	  utilisant le paramétrage
	  <code class="varname">kern.securelevel</code> et en stockant les
	  données <code class="command">freebsd-update</code> sur un
	  système de fichiers en lecture seule quand elles ne
	  sont pas utilisées, une bien meilleure solution
	  serait de comparer le système avec un disque
	  sécurisé comme un <acronym class="acronym">DVD</acronym> ou un
	  disque <acronym class="acronym">USB</acronym> conservé à
	  l'extérieur.</p></div><p>Le système sera analysé, et une liste de
	fichiers ainsi que la valeur de leur empreinte
	numérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sha256&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">sha256</span>(1)</span></a>, celle de la version d'origine
	et celle de la version actuellement installée, seront
	affichés.  C'est pour cela que cet affichage est
	copié dans le fichier <code class="filename">outfile.ids</code>.
	L'affichage défile trop rapidement une comparaison
	visuelle et remplira rapidement le tampon de la
	console.</p><p>Ces lignes sont également très longues mais
	le format de sortie peut être facilement passé
	par une analyse syntaxique.  Par exemple, pour obtenir une
	liste des fichiers qui diffèrent avec ceux de la
	version d'origine, utiliser la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cat outfile.ids | awk '{ print $1 }' | more</code></strong>
/etc/master.passwd
/etc/motd
/etc/passwd
/etc/pf.conf</pre><p>La sortie de cette commande a été
	tronquée, bien plus de fichiers sont concernés.
	Certains de ces fichiers sont naturellement modifiés,
	le fichier <code class="filename">/etc/passwd</code> a
	été modifié en raison de l'ajout
	d'utilisateurs au système.  Dans certains cas, d'autres
	fichiers apparaîtrons, comme les modules du noyau, qui
	diffèrent puisque <code class="command">freebsd-update</code>
	peut les avoir mis à jour.  Pour exclure des fichiers
	ou des répertoires spécifiques, ajoutez-les au
	paramètre <code class="literal">IDSIgnorePaths</code> dans le
	fichier <code class="filename">/etc/freebsd-update.conf</code>.</p><p>Ce système peut prendre part à une
	méthode de mise à jour élaboré, en
	dehors de ce qui a été présenté
	précédemment.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="updating-upgrading-portsnap"></a>24.3. Portsnap: un outil de mise à jour du catalogue des
      logiciels portés</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Basé sur les notes de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Colin</span> <span class="surname">Percival</span></span>. </span></div></div></div><a id="idp80507600" class="indexterm"></a><a id="idp80508112" class="indexterm"></a><p>Le système de base de FreeBSD dispose également
      d'un utilitaire pour la mise à jour du catalogue des
      logiciels portés: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>.  Lors de son
      exécution, il se connectera sur un site distant,
      contrôlera la clé de sécurité et
      téléchargera une nouvelle copie du catalogue des
      logiciels portés.  La clé est utilisée pour
      vérifier l'intégrité de tous les fichiers
      téléchargés, s'assurant qu'ils n'ont pas
      été modifiés au vol.  Pour
      récupérer les tout derniers fichiers du catalogue
      des logiciels portés, utiliser la commande
      suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong>
Looking up portsnap.FreeBSD.org mirrors... 3 mirrors found.
Fetching snapshot tag from portsnap1.FreeBSD.org... done.
Fetching snapshot metadata... done.
Updating from Wed Aug  6 18:00:22 EDT 2008 to Sat Aug 30 20:24:11 EDT 2008.
Fetching 3 metadata patches.. done.
Applying metadata patches... done.
Fetching 3 metadata files... done.
Fetching 90 patches.....10....20....30....40....50....60....70....80....90. done.
Applying patches... done.
Fetching 133 new ports or files... done.</pre><p>Cet exemple nous montre que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> a trouvé
      et contrôlé plusieurs mises à jour pour les
      données actuelles du catalogue.  Est également
      indiqué si l'utilitaire a été
      précédemment exécuté, si cela avait
      été une première exécution, le
      catalogue aurait été tout simplement
      téléchargé.</p><p>Lorsque <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> termine avec succès une
      opération de récupération
      (<code class="command">fetch</code>), le catalogue des logiciels
      portés et ses mises à jour sont présents
      sur le système.  A la première exécution de
      <code class="command">portsnap</code> vous devez utiliser la commande
      <code class="literal">extract</code> pour installer les fichiers
      téléchargés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong>
/usr/ports/.cvsignore
/usr/ports/CHANGES
/usr/ports/COPYRIGHT
/usr/ports/GIDs
/usr/ports/KNOBS
/usr/ports/LEGAL
/usr/ports/MOVED
/usr/ports/Makefile
/usr/ports/Mk/bsd.apache.mk
/usr/ports/Mk/bsd.autotools.mk
/usr/ports/Mk/bsd.cmake.mk
<em class="replaceable"><code>...</code></em></pre><p>Pour mettre à jour un catalogue des logiciels
      portés déjà installé utilisez la
      commande <code class="command">portsnap update</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre><p>Le processus est maintenant terminé et les
      applications peuvent être installées ou mises
      à jour à l'aide du catalogue à jour.</p><p>Les opérations <code class="literal">fetch</code> et
      <code class="literal">extract</code> ou <code class="literal">update</code> peuvent
      être exécutées à la suite comme
      montré dans l'exemple suivant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch update</code></strong></pre><p>Cette commande téléchargera la dernière
      version du catalogue des logiciels portés et mettra
      à jour votre version locale située dans <code class="filename">/usr/ports</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="current-stable"></a>24.4. Suivre une branche de développement</h2></div></div></div><a id="idp80522448" class="indexterm"></a><a id="idp80522960" class="indexterm"></a><p>Il existe deux branches de développement de FreeBSD:
      FreeBSD-CURRENT et FreeBSD-STABLE.  Cette section détaillera
      un peu chacune d'elles et décrira comment garder à
      jour votre système avec chaque arborescence respective.
      FreeBSD-CURRENT sera tout d'abord traité, suivit de
      FreeBSD-STABLE.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="current"></a>24.4.1. Se synchroniser avec la version -CURRENT de FreeBSD</h3></div></div></div><p>En lisant ces lignes, gardez à l'esprit que
	FreeBSD-CURRENT représente &#8220;les tout derniers&#8221;
	développement de FreeBSD.  On attend des utilisateurs
	de FreeBSD-CURRENT un degré élevé de
	compétences techniques, et devraient être
	capables de résoudre des problèmes système
	compliqués par eux-mêmes.  Si vous êtes
	nouveau à FreeBSD, pensez à deux fois avant de
	l'installer.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80529232"></a>24.4.1.1. Qu'est-ce que FreeBSD-CURRENT?</h4></div></div></div><a id="idp80529872" class="indexterm"></a><p>FreeBSD-CURRENT est la toute dernière version des sources
	  de FreeBSD en cours de développement.  Cela inclut des
	  évolutions en cours, des modifications expérimentales,
	  et des mécanismes de transition qui feront ou ne feront pas
	  partie de la prochaine version officielle du logiciel.
	  Bien que de nombreux développeurs de FreeBSD compilent les
	  sources de FreeBSD-CURRENT quotidiennement, il arrive que
	  celles-ci ne soient pas compilables pendant une certaine
	  période de temps.  Ces problèmes sont résolus
	  aussi rapidement que possible, mais que FreeBSD-CURRENT soit
	  à l'origine d'un désastre ou de l'apport d'une nouvelle
	  fonctionnalité attendue peut parfois dépendre
	  que du moment auquel vous avez chargé le code
	  source.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80530896"></a>24.4.1.2. Qui a besoin de FreeBSD-CURRENT?</h4></div></div></div><p>FreeBSD-CURRENT est mis à disposition pour 3
	  types de personnes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Les membres de la communauté FreeBSD qui travaillent
	      activement sur une partie de l'arborescence des sources
	      et pour qui rester constamment à jour est une
	      nécessité absolue.</p></li><li class="listitem"><p>Les membres de la communauté FreeBSD qui participent
	      activement aux tests et sont disposés à passer du
	      temps à résoudre les problèmes pour
	      garantir que FreeBSD-CURRENT reste aussi saine que
	      possible.  Il y a également ceux qui désirent
	      faire des suggestions dans certains domaines sur les
	      modifications à faire et la direction
	      générale que prend FreeBSD, et soumettent des
	      correctifs pour les implémenter.</p></li><li class="listitem"><p>Ceux qui veulent simplement garder un oeil sur les
	      évolutions, ou utiliser les dernières sources comme
	      référence (e.g. pour les <span class="emphasis"><em>lire</em></span>,
	      et non pour les utiliser).  Ces personnes font parfois
	      des remarques ou contribuent au code.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80535120"></a>24.4.1.3. Qu'est-ce que <span class="emphasis"><em>n'est pas</em></span>
	  FreeBSD-CURRENT?</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Un raccourci pour se procurer des pré-versions
	      parce que vous avez entendu dire qu'il y a de nouvelles
	      fonctionnalités géniales et que vous voulez
	      être le premier du coin à les avoir.  Etre le
	      premier à avoir la nouvelle fonctionnalité
	      signifie être le premier à avoir les nouveaux bogues
	      également.</p></li><li class="listitem"><p>Une moyen rapide d'avoir des corrections de bogues.
	      N'importe quelle version de FreeBSD-CURRENT apportera
	      probablement de nouveaux bogues comme elle corrigera
	      ceux déjà présents.</p></li><li class="listitem"><p>Nous ne le &#8220;supportons officiellement&#8221;
	      en aucun cas.  Nous faisons du mieux que nous pouvons
	      pour aider les personnes qui font vraiment partie des
	      trois groupes &#8220;légitimes&#8221; à qui s'adresse
	      FreeBSD-CURRENT, mais nous n'avons tout simplement
	      &#8220;pas le temps&#8221; de fournir un support
	      technique.  Ce n'est pas parce que nous sommes des
	      personnes détestables qui n'aiment pas aider les autres
	      (nous ne ferions pas FreeBSD si tel était le cas), nous ne
	      pouvons simplement pas répondre à des centaines de
	      messages par jour <span class="emphasis"><em>et</em></span> travailler sur
	      FreeBSD!  Entre améliorer FreeBSD et répondre à de
	      nombreuses questions sur le code expérimental, les
	      développeurs optent pour le premier choix.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80551760"></a>24.4.1.4. Utiliser FreeBSD-CURRENT</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Inscrivez-vous à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a><a id="idp80553552" class="indexterm"></a> et la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-head" target="_top">svn-src-head</a>.
	      Ce n'est pas seulement une bonne idée, c'est
	      <span class="emphasis"><em>indispensable</em></span>.  Si vous n'êtes
	      pas sur la liste <span class="emphasis"><em><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a></em></span>, vous
	      ne verrez pas les commentaires qui sont faits sur l'état
	      courant du système et vous vous retrouverez probablement
	      confrontés à de nombreux problèmes que
	      d'autres ont déjà identifiés et
	      résolus.  Encore plus grave, vous manqueriez des
	      bulletins importants potentiellement critiques pour la bonne
	      santé de votre système.</p><p>La liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-head" target="_top">svn-src-head</a> vous permettra de voir les courriers
	      de trace des soumissions de toutes les modifications
	      dès qu'elles sont faites et des informations
	      pertinentes sur les éventuels effets de bord.</p><p>Pour vous inscrire à ces listes, ou à
	      une autre, rendez vous à <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a>
	      et cliquez sur la liste à laquelle vous
	      désirez vous inscrire.  Des instructions sur le
	      reste de la procédure sont alors données.
	      Si vous êtes intéressé par le suivi
	      des modifications appliquées à l'ensemble
	      de l'arborescence des sources, nous vous recommandons de
	      vous inscrire à <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-all" target="_top">svn-src-all</a>.</p></li><li class="listitem"><p>Récupérez les sources sur un <a class="link" href="#mirrors" title="Annexe A. Se procurer FreeBSD">site miroir</a> FreeBSD.  Vous pouvez le
	      faire de deux manières:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>Utilisez le programme <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">cvsup</a><a id="idp80561104" class="indexterm"></a>
		  avec le fichier <code class="filename">supfile</code>
		  nommé <code class="filename">standard-supfile</code>
		  disponible dans le répertoire <code class="filename">/usr/share/examples/cvsup</code>.
		  C'est la méthode recommandée, puisqu'elle
		  permet de récupérer la totalité
		  des sources la première fois et par la suite
		  uniquement ce qui a été modifié.
		  De nombreuses personnes exécutent
		  <code class="command">cvsup</code> depuis
		  <code class="command">cron</code><a id="idp80563536" class="indexterm"></a> et maintiennent ainsi
		  automatiquement à jour leurs sources.  Vous devez
		  personnaliser l'exemple de <code class="filename">supfile</code>
		  précédent, et configurer
		  <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">cvsup</a><a id="idp80569168" class="indexterm"></a> pour
		  votre environnement.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le fichier d'exemple
		    <code class="filename">standard-supfile</code> est
		    destiné au suivi d'une branche de
		    sécurité FreeBSD spécifique et
		    non pas à celui de FreeBSD-CURRENT.  Vous
		    devrez éditer ce fichier et remplacer la
		    ligne suivante:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">*default release=cvs tag=RELENG_<em class="replaceable"><code>X</code></em>_<em class="replaceable"><code>Y</code></em></pre><p xmlns="http://www.w3.org/1999/xhtml">Par celle-ci:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">*default release=cvs tag=.</pre><p xmlns="http://www.w3.org/1999/xhtml">Pour une explication détaillée
		    des étiquettes utilisables, veuillez vous
		    référer à la section <a class="link" href="#cvs-tags" title="A.7. Etiquettes CVS">Etiquettes CVS</a> de ce
		    manuel.</p></div></li><li class="listitem"><p>Utilisez <span class="application">CTM</span><a id="idp80575056" class="indexterm"></a>.  Si vous
		  disposez d'une mauvaise connexion (connexions chères
		  ou seulement un accès au courrier électronique)
		  <span class="application">CTM</span> est une bonne
		  solution.  Cependant, c'est une source de problèmes
		  et peut donner lieu à des fichiers endommagés.
		  C'est pourquoi cette méthode est rarement
		  utilisée, ce qui augmente les chances que cela ne
		  fonctionne pas pendant d'assez longue périodes.
		  Nous recommandons d'utiliser
		  <span class="application">CVSup</span>
		  à tous ceux disposant d'un modem 9600 bps ou
		  d'une connexion plus rapide.
		</p></li></ol></div></li><li class="listitem"><p>Si vous récupérez les sources pour compiler
	      un système opérationnel, et pas simplement
	      pour les lire, alors récupérez
	      <span class="emphasis"><em>tout</em></span>  FreeBSD-CURRENT, et pas
	      uniquement certaines portions.  La raison de cela est
	      que diverses parties des sources dépendent de
	      modifications effectuées ailleurs, et si vous essayez
	      de compiler juste une partie des source, il est quasiment
	      certain que vous aurez des problèmes.</p></li><li class="listitem"><p>Avant de compiler FreeBSD-CURRENT<a id="idp80579152" class="indexterm"></a>, lisez attentivement
	      le <code class="filename">Makefile</code> dans
	      <code class="filename">/usr/src</code>.  Vous devriez au moins
	      la première fois <a class="link" href="#makeworld" title="24.6. Recompiler le système">installer un nouveau noyau et recompiler le système</a>, comme
	      étape nécessaire à votre processus de
	      mise à jour.  La lecture de la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">liste de diffusion à propos de la branche FreeBSD-CURRENT</a> et du fichier <code class="filename">/usr/src/UPDATING</code> vous tiendra
	      au courant des autres procédures de transition qui
	      sont parfois nécessaires lorsque nous préparons la
	      prochaine version.</p></li><li class="listitem"><p>Participez!  Si vous utilisez FreeBSD-CURRENT, nous
	      aimerions savoir ce que vous en pensez, tout
	      particulièrement si vous avez des améliorations
	      à nous suggérer ou des corrections de bogues
	      à nous soumettre.  Les suggestions accompagnées
	      de code sont accueillies avec enthousiasme!</p></li></ol></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="stable"></a>24.4.2. Se synchroniser avec la version -STABLE de FreeBSD</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80584400"></a>24.4.2.1. Qu'est-ce que FreeBSD-STABLE?</h4></div></div></div><a id="idp80585040" class="indexterm"></a><p>FreeBSD-STABLE est notre branche de développement à
	  partir de laquelle sont extraites les versions majeures.
	  Les modifications sur cette branche se font à une allure
	  différente, et en supposant généralement
	  qu'elles ont été tout d'abord testées
	  sur FreeBSD-CURRENT.  Cela reste cependant
	  <span class="emphasis"><em>toujours</em></span> une branche de développement,
	  et cela signifie qu'à certains moments, les sources de
	  FreeBSD-STABLE pourront être ou pas utilisables pour une
	  quelconque raison.  C'est tout simplement une autre branche
	  de mise au point, et non pas une ressource pour
	  l'utilisateur final.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80586576"></a>24.4.2.2. Qui a besoin de FreeBSD-STABLE?</h4></div></div></div><p>Si vous désirez suivre ou contribuer au processus
	  de développement de FreeBSD, tout particulièrement si
	  cela a rapport avec la prochaine version de FreeBSD, alors
	  vous devriez penser à suivre FreeBSD-STABLE.</p><p>Bien qu'il soit vrai que les correctifs de sécurité
	  vont également dans la branche FreeBSD-STABLE, vous
	  n'avez pas <span class="emphasis"><em>besoin</em></span> de suivre
	  FreeBSD-STABLE pour cela.  Chaque rapport de sécurité
	  concernant FreeBSD explique comment corriger le problème sur
	  les versions affectées
	  <a href="#ftn.idp80588240" class="footnote" id="idp80588240"><sup class="footnote">[13]</sup></a>
	  , et suivre intégralement une branche de développement
	  juste pour des raisons de sécurité apportera
	  également de nombreux changements non
	  désirés.</p><p>Bien que nous tentons de nous assurer que la branche
	  FreeBSD-STABLE soit compilable et constamment stable, cela
	  ne peut être garanti.  De plus, alors que le code est
	  développé sous FreeBSD-CURRENT avant de l'inclure dans
	  FreeBSD-STABLE, le nombre de personnes utilisant FreeBSD-STABLE
	  est plus nombreux que celui utilisant FreeBSD-CURRENT, aussi
	  il est inévitable que des bogues et des problèmes
	  pourront parfois apparaître sous FreeBSD-STABLE alors qu'ils
	  n'existaient pas sous FreeBSD-CURRENT.</p><p>Pour ces raisons, nous ne recommandons
	  <span class="emphasis"><em>pas</em></span> de suivre aveuglément
	  FreeBSD-STABLE, et il est tout particulièrement important que
	  vous ne mettiez pas à jour des serveurs de production
	  sous FreeBSD-STABLE sans avoir tout d'abord testé le code
	  dans votre environnement de travail.</p><p>Si vous ne disposez pas des ressources pour faire
	  cela alors nous recommandons que vous utilisiez la version
	  de FreeBSD la plus récente, et que vous utilisiez le
	  mécanisme de mise à jour binaire pour passer d'une
	  version à une autre.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80591184"></a>24.4.2.3. Utiliser FreeBSD-STABLE</h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Inscrivez-vous à à la liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a>.
	      Vous serez tenu au courant des dépendances de
	      compilation qui peuvent apparaître dans la
	      branche FreeBSD-STABLE<a id="idp80593104" class="indexterm"></a> ou de tout autre problème
	      demandant une attention particulière.  Les
	      développeurs publieront également des annonces
	      sur cette liste lorsqu'ils envisagent une correction ou
	      modification controversée, offrant la possibilité
	      aux utilisateurs de répondre s'ils ont des questions
	      à soulever en rapport avec la modification
	      proposée.</p><p>Inscrivez-vous à la liste
	      <span class="application">SVN</span> correspondant à la
	      branche que vous suivez.  Par exemple, si vous suivez la
	      branche 7-STABLE, inscrivez-vous à la liste
	      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-stable-7" target="_top">svn-src-stable-7</a>.  Cela vous permettra de lire
	      les courriers de trace des soumissions de toutes les
	      modifications dès qu'elles sont faites et des
	      informations pertinentes sur les éventuels effets
	      de bord.</p><p>Pour vous inscrire à ces listes, ou à
	      une autre, rendez vous à <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a>
	      et cliquez sur la liste à laquelle vous
	      désirez vous inscrire.  Des instructions sur le
	      reste de la procédure sont alors
	      données.  Si vous êtes
	      intéressé par le suivi des modifications
	      appliquées à l'ensemble de l'arborescence
	      des sources, nous vous recommandons de vous inscrire
	      à <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/svn-src-all" target="_top">svn-src-all</a>.</p></li><li class="listitem"><p>Si vous installez un nouveau système et vous
	      voulez qu'il utilise le dernier instantané
	      publié tous les mois à partir de la
	      branche FreeBSD-STABLE, consultez la page sur les <a class="link" href="../../../../snapshots/" target="_top">instantanés</a>
	      pour plus d'information.  D'autre part, vous pouvez
	      installer la version FreeBSD-STABLE la plus récente
	      à partir des <a class="link" href="#mirrors" title="Annexe A. Se procurer FreeBSD">sites
	      miroirs</a> et suivre les instructions ci-dessous
	      pour mettre à jour votre système avec les
	      sources FreeBSDstable; les plus récentes.</p><p>Si vous faites tourner une version précédente
	      de FreeBSD et que vous désirez mettre à jour via
	      les sources vous pouvez aisément le faire à partir
	      d'un <a class="link" href="#mirrors" title="Annexe A. Se procurer FreeBSD">site miroir</a> FreeBSD.  Cela
	      peut être fait de deux manières:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>Utilisez le programme <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">cvsup</a><a id="idp80600784" class="indexterm"></a>
		  avec le fichier <code class="filename">supfile</code>
		  nommé <code class="filename">stable-supfile</code>
		  disponible dans le répertoire <code class="filename">/usr/share/examples/cvsup</code>.
		  C'est la méthode recommandée, puisqu'elle
		  permet de récupérer la totalité
		  des sources la première fois et par la suite
		  uniquement ce qui a été modifié.
		  De nombreuses personnes exécutent
		  <code class="command">cvsup</code> depuis
		  <code class="command">cron</code><a id="idp80611536" class="indexterm"></a> et maintiennent ainsi
		  automatiquement à jour leurs sources.  Vous devez
		  personnaliser l'exemple de <code class="filename">supfile</code>
		  précédent, et configurer
		  <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">cvsup</a><a id="idp80612944" class="indexterm"></a> pour
		  votre environnement.</p></li><li class="listitem"><p>Utilisez <span class="application">CTM</span><a id="idp80614992" class="indexterm"></a>.  Si vous
		  ne disposez pas d'une connexion Internet rapide et
		  peu coûteuse, c'est la méthode que vous
		  devriez penser à utiliser.</p></li></ol></div></li><li class="listitem"><p>Avant tout, si vous avez besoin d'un accès rapide
	      à la demande aux sources et que la bande passante n'est
	      pas un problème, utilisez
	      <code class="command">cvsup</code> ou <code class="command">ftp</code>.
	      Sinon, utilisez <span class="application">CTM</span>.</p></li><li class="listitem"><p>Avant de compiler FreeBSD-STABLE<a id="idp80619088" class="indexterm"></a>, lisez attentivement
	      le <code class="filename">Makefile</code> dans
	      <code class="filename">/usr/src</code>.  Vous devriez au moins
	      la première fois <a class="link" href="#makeworld" title="24.6. Recompiler le système">installer un nouveau noyau et recompiler le système</a>, comme
	      étape nécessaire à votre processus de
	      mise à jour.  La lecture de la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">liste de diffusion à propos de la branche FreeBSD-STABLE</a> et du fichier <code class="filename">/usr/src/UPDATING</code> vous tiendra
	      au courant des autres procédures de transition qui
	      sont parfois nécessaires lorsque nous préparons la
	      prochaine version.</p></li></ol></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="synching"></a>24.5. Synchroniser vos sources</h2></div></div></div><p>Il existe différentes façons d'utiliser une connexion
      Internet (ou le courrier électronique) pour garder à jour
      les sources de n'importe quelle partie, ou de l'ensemble,
      du projet FreeBSD, selon ce qui vous intéresse.  Les
      principaux services que nous fournissons sont le
      <a class="link" href="#anoncvs" title="A.3. CVS anonyme">CVS anonyme</a>, <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">CVSup</a>, et <a class="link" href="#ctm" title="A.4. Utiliser CTM">CTM</a>.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Alors qu'il est possible de mettre à jour seulement
	certaines parties de l'arbre des sources, la seule procédure
	de mise à jour supportée est celle consistant
	à mettre à jour l'intégralité de
	l'arborescence et de recompiler les sources des applicatifs de
	base&#8212;&#8220;userland&#8221; (i.e., tous les programmes
	qui tournent dans l'espace utilisateur, comme ceux des
	répertoires <code class="filename">/bin</code> et
	<code class="filename">/sbin</code>) et du noyau.  Ne mettre à jour
	qu'une partie des sources, uniquement le noyau, ou seul le
	&#8220;userland&#8221; mènera souvent à des
	problèmes.  Ces problèmes pourront aller d'erreurs de
	compilation à des paniques du noyau ou même des
	corruptions de données.</p></div><a id="idp80627280" class="indexterm"></a><p><span class="application">CVS anonyme</span> et
      <span class="application">CVSup</span> utilisent une méthode de
      mise à jour pilotée par le
      client&#8212;<span class="emphasis"><em>pull</em></span>.  Dans le cas de
      <span class="application">CVSup</span>, l'utilisateur (ou une
      procédure <code class="command">cron</code>) appelle le programme
      <code class="command">cvsup</code>, qui interagit avec un serveur
      <code class="command">cvsupd</code> distant, pour mettre à jour vos
      fichiers.  Les mises à jour que vous recevez sont les plus
      récentes, et vous ne les recevez seulement lorsque vous le
      désirez.  Vous pouvez aisément restreindre vos mises
      à jour aux fichiers ou répertoires particuliers
      qui vous intéressent.  Les mises à jour sont
      générées à la volée par le serveur,
      en fonction de ce que vous avez déjà et de ce que vous
      voulez.  <span class="application">CVS anonyme</span> est plus
      simpliste que <span class="application">CVSup</span>, car ce n'est
      qu'une extension de <span class="application">CVS</span> qui
      permet de récupérer des modifications directement
      d'une archive CVS distante.  Pour cela,
      <span class="application">CVSup</span> est bien plus efficace mais
      <span class="application">CVS anonyme</span> est plus facile à
      utiliser.</p><a id="idp80633296" class="indexterm"></a><p><span class="application">CTM</span>, à l'inverse, ne compare
      pas interactivement les sources dont vous disposez avec celles
      qui sont sur l'archive de référence.  Au lieu de cela,
      une procédure qui identifie les modifications intervenues
      depuis qu'elle a été exécutée pour la
      dernière fois, est lancée plusieurs fois par jour
      sur la machine CTM de référence (maître),
      les modifications détectées sont
      compressées, affectées d'un numéro de
      séquence et encodées pour pouvoir être envoyées
      par courrier électronique (en ASCII imprimable uniquement).
      Une fois reçus, ces &#8220;deltas CTM&#8221; peuvent
      être passés à l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ctm_rmail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ctm_rmail</span>(1)</span></a>
      qui décodera, contrôlera et appliquera automatiquement
      les modifications à l'exemplaire des sources de l'utilisateur.
      Cette méthode est beaucoup plus efficace que
      <span class="application">CVSup</span> et consomme beaucoup moins de
      ressources sur notre serveur, parce que c'est un modèle
      piloté par le serveur&#8212;<span class="emphasis"><em>push</em></span>
      plutôt que par
      l'utilisateur&#8212;<span class="emphasis"><em>pull</em></span>.</p><p>Il y a, bien sûr, quelques contreparties.
      Si vous effacez par inadvertance des parties de votre archive,
      <span class="application">CVSup</span> s'en apercevra et vous
      reconstruira les parties endommagées.
      <span class="application">CTM</span> ne le fera pas, et si vous
      effacez des parties de votre l'arborescence des sources
      (et que vous n'avez pas fait de sauvegarde) alors vous devrez
      repartir de zéro (à partir du plus récent
      &#8220;delta de base&#8221; CVS) et tout reconstituer avec
      <span class="application">CTM</span> ou <span class="application">CVS
      anonyme</span>, effacer les parties endommagées et
      resynchroniser.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="makeworld"></a>24.6. Recompiler le système</h2></div></div></div><a id="idp80643920" class="indexterm"></a><p>Une fois que vous avez synchronisé votre arborescence des
      sources avec une version donnée de FreeBSD (FreeBSD-STABLE,
      FreeBSD-CURRENT, et ainsi de suite) vous pouvez alors utiliser
      cette arborescence des sources pour recompiler le
      système.</p><div xmlns="" class="warning"><h3 class="admontitle">Faites une sauvegarde: </h3><p xmlns="http://www.w3.org/1999/xhtml">On n'insistera jamais assez sur l'importance de faire une
	sauvegarde de votre système <span class="emphasis"><em>avant</em></span> tout
	autre chose.  Bien qu'il soit facile de &#8220;refaire le
	monde&#8221; (recompiler FreeBSD), si vous suivez ces
	instructions, vous ferez inévitablement des erreurs
	à un moment ou un autre, ou d'autres feront des erreurs
	au niveau de l'arborescence des sources qui empêcheraient
	votre système de redémarrer.</p><p xmlns="http://www.w3.org/1999/xhtml">Assurez-vous que vous avez bien fait une sauvegarde.  Ayez
	une disquette de maintenance, ou un CD démarrable à portée de la main.
	Vous ne l'utiliserez probablement pas, mais prudence est mère
	de sûreté!</p></div><div xmlns="" class="warning"><h3 class="admontitle">S'abonner à la bonne liste de diffusion: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp80647760" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Les branches FreeBSD-STABLE et FreeBSD-CURRENT sont, par
	nature, <span class="emphasis"><em>en développement</em></span>.  Les personnes
	qui participent à FreeBSD sont des humains, et
	des erreurs se produisent occasionnellement.</p><p xmlns="http://www.w3.org/1999/xhtml">Ces erreurs sont parfois bénignes, provocant
	simplement l'affichage d'un nouveau message d'avertissement
	par votre système.  Elles peuvent aussi être
	catastrophiques, et empêcher votre système de
	redémarrer ou détruire vos systèmes de fichiers
	(ou pire).</p><p xmlns="http://www.w3.org/1999/xhtml">Quand de tels problèmes se produisent, un avertissement
	&#8220;heads up&#8221; est posté sur la liste de diffusion
	appropriée, décrivant la nature du problème et
	quels systèmes sont concernés.  Un message &#8220;all
	clear&#8221; est posté quand le problème est
	résolu.</p><p xmlns="http://www.w3.org/1999/xhtml">Si vous tentez de suivre FreeBSD-STABLE ou FreeBSD-CURRENT et
	que vous ne lisez pas la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">liste de diffusion à propos de la branche FreeBSD-STABLE</a> ou la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">liste de diffusion à propos de la branche FreeBSD-CURRENT</a>,
	vous allez au devant d'ennuis.</p></div><div xmlns="" class="warning"><h3 class="admontitle">N'utilisez pas la commande
	<code xmlns="http://www.w3.org/1999/xhtml" class="command">make world</code>: </h3><p xmlns="http://www.w3.org/1999/xhtml">De nombreuses anciennes documentations préconisent
	d'utiliser la commande <code class="command">make world</code>.  Cette
	commande n'effectue pas un certain nombre d'étapes
	importantes et ne devrait être utilisée que si
	vous êtes sûr de ce que vous faites.  Dans presque
	tout les cas <code class="command">make world</code> n'est pas une bonne
	chose à faire, et la procédure décrite
	dans la suite de ce document devrait être
	utilisée à la place.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80653776"></a>24.6.1. La méthode générique de mise
	à jour du système</h3></div></div></div><p>Pour mettre à jour votre système, vous
	devriez consulter <code class="filename">/usr/src/UPDATING</code> pour
	toute opération préliminaire nécessaire
	en fonction de la version de vos sources et ensuite
	utiliser la procédure suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildkernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installkernel</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans quelques rares cas, il est nécessaire de
	  lancer un <code class="command">mergemaster -p</code> avant
	  l'étape <code class="buildtarget">buildworld</code>.  Ces cas
	  sont décrits dans le fichier
	  <code class="filename">UPDATING</code>.  Généralement,
	  vous pouvez omettre cette opération si vous ne mettez
	  pas à jour d'une version majeure de FreeBSD à une
	  autre.</p></div><p>Une fois l'opération
	<code class="buildtarget">installkernel</code> terminée avec
	succès,
	vous devrez démarrer en mode mono-utilisateur (en
	utilisant par exemple la commande <code class="command">boot -s</code>
	à l'invite du chargeur).  Exécutez
	ensuite:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mergemaster -p</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mergemaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>reboot</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Lisez les explications supplémentaires: </h3><p xmlns="http://www.w3.org/1999/xhtml">La séquence décrite ci-dessus n'est qu'un
	  court résumé pour vous aider à
	  démarrer.  Vous devriez cependant lire les sections
	  suivantes afin de comprendre clairement chaque étape,
	  tout particulièrement si vous désirez utiliser
	  une configuration du noyau personnalisée.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80676944"></a>24.6.2. Lire <code class="filename">/usr/src/UPDATING</code></h3></div></div></div><p>Avant tout autre chose, lisez
	<code class="filename">/usr/src/UPDATING</code> (ou le fichier
	équivalent en fonction de l'endroit où se trouve vos
	sources).  Ce fichier devrait contenir les informations
	importantes au sujet des problèmes que vous pourriez
	rencontrer, ou indique l'ordre dans lequel vous devriez
	exécuter certaines commandes.  Si le fichier
	<code class="filename">UPDATING</code> contredit quelque chose d'écrit
	ici, <code class="filename">UPDATING</code> prime sur tout le
	reste.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">La lecture du fichier <code class="filename">UPDATING</code>
	  n'est pas un substitut à l'abonnement à la liste
	  de diffusion correcte, comme décrit
	  précédemment.  Ces deux prérequis sont
	  complémentaires, et non pas exclusifs.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80680784"></a>24.6.3. Contrôler <code class="filename">/etc/make.conf</code></h3></div></div></div><a id="idp80681680" class="indexterm"></a><p>Contrôlez les fichiers
	<code class="filename">/usr/share/examples/etc/make.conf</code>
	et
	<code class="filename">/etc/make.conf</code>.  Le premier contient
	des paramètres par défaut &#8211; la plupart
	étant placés en commentaires.  Pour les utiliser quand
	vous recompilez votre système à partir des sources,
	rajoutés-les au fichier <code class="filename">/etc/make.conf</code>.
	Gardez à l'esprit que tout ce que vous ajoutez au fichier
	<code class="filename">/etc/make.conf</code> est utilisé chaque fois
	que vous invoquez la commande <code class="command">make</code>, il est
	donc bon de s'assurer que les valeurs par défaut sont
	appropriées à votre système.</p><p>Un utilisateur typique voudra probablement copier
	les lignes <code class="varname">CFLAGS</code> et
	<code class="varname">NO_PROFILE</code> se trouvant dans
	<code class="filename">/usr/share/examples/etc/make.conf</code> vers
	<code class="filename">/etc/make.conf</code> et les décommenter.</p><p>Examinez les autres définitions
	(<code class="varname">COPTFLAGS</code>, <code class="varname">NOPORTDOCS</code>
	et ainsi de suite) et décidez si elles vous conviennent.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80688592"></a>24.6.4. Mettre à jour les fichiers dans <code class="filename">/etc</code></h3></div></div></div><p>Le répertoire <code class="filename">/etc</code> contient la
	plupart des informations de configuration de votre système,
	ainsi que les procédures de démarrage.  Certaines de ces
	procédures changent d'une version à l'autre de
	FreeBSD.</p><p>Certains fichiers de configuration sont également
	utilisés en permanence par le système.  En particulier
	<code class="filename">/etc/group</code>.</p><p>Il est arrivé que la phase d'installation <code class="command">make
	installworld</code> ait besoin que certains utilisateurs et groupes
	existent.  Il y a de fortes chances qu'ils n'aient pas
	été définis avant la mise à jour.
	C'est une source de problèmes.  Dans certains cas
	<code class="command">make buildworld</code> contrôlera si ces
	utilisateurs ou groupes existent.</p><p>Un exemple de cela fut l'addition de l'utilisateur
	<code class="systemitem">smmsp</code>.  Le processus d'installation
	échouait quand <code class="command">mtree</code> tentait de créer
	<code class="filename">/var/spool/clientmqueue</code>.</p><p>La solution est d'exécuter
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> dans le mode pré-&#8220;buildworld&#8221;
	en ajoutant l'option <code class="option">-p</code>.  Cela effectuera la
	comparaison uniquement des fichiers essentiels pour le succès
	de la procédure <code class="buildtarget">buildworld</code> ou
	<code class="buildtarget">installworld</code>.  Si votre vieille
	version de <code class="command">mergemaster</code> ne supporte pas
	l'option <code class="option">-p</code>, utilisez la nouvelle version
	présente dans l'arborescence des sources quand vous
	l'exécutez pour la première fois:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/mergemaster</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>./mergemaster.sh -p</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous êtes particulièrement paranoïaque,
	  vous pouvez contrôler votre système afin de voir quels
	  fichiers appartiennent au groupe que vous renommez ou
	  effacez:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>find / -group GID -print</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">affichera les fichiers appartenant au groupe
	  <em class="replaceable"><code>GID</code></em> (qui peut être soit un nom de
	  groupe ou un identifiant numérique de groupe).</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="makeworld-singleuser"></a>24.6.5. Passer en mode mono-utilisateur</h3></div></div></div><a id="idp80706256" class="indexterm"></a><p>Il vaut mieux recompiler le système en mode
	mono-utilisateur.  En dehors du fait que cela sera
	légèrement plus rapide, la réinstallation
	va modifier un grand nombre de fichiers systèmes
	importants, tous les binaires de base du système, les
	bibliothèques, les fichiers d'include et ainsi de suite.
	Les modifier sur un système en fonctionnement (en
	particulier s'il y a des utilisateurs connectés à
	ce moment là), c'est aller au devant de
	problèmes.</p><a id="idp80707152" class="indexterm"></a><p>Une autre méthode consiste à compiler le
	système en mode multi-utilisateurs, et passer dans le mode
	mono-utilisateur pour l'installation.  Si vous désirez
	utiliser cette méthode, conservez les étapes suivantes
	pour le moment où la compilation sera terminée.  Vous
	pouvez reporter le passage en mode mono-utilisateur jusqu'à
	l'exécution de
	<code class="buildtarget">installkernel</code> ou
	<code class="buildtarget">installworld</code>.</p><p>En tant que super-utilisateur, vous pouvez exécuter la
	commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown now</code></strong></pre><p>sur un système en fonctionnement, pour passer en mode
	mono-utilisateur.</p><p>Ou bien, redémarrer le système, et à
	l'invite de démarrage, sélectionnez l'option
	<span class="quote">« <span class="quote">single user</span> »</span>.  Le système démarrera alors
	en mode mono-utilisateur.  A l'invite de l'interpréteur de
	commandes, exécutez alors:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>fsck -p</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -u /</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mount -a -t ufs</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>swapon -a</code></strong></pre><p>Cela effectue une vérification des systèmes
	de fichiers, remonte <code class="filename">/</code> en mode
	lecture/écriture, et monte tous les autres systèmes
	de fichiers UFS listés dans le fichier
	<code class="filename">/etc/fstab</code>, puis active la
	pagination.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si votre horloge CMOS est réglée sur l'heure locale
	  et non pas sur le fuseau GMT (cela est vrai si la sortie
	  de la commande <code class="command">date</code> ne donne pas l'heure
	  et le fuseau correct), vous aurez également peut-être
	  besoin d'exécuter la commande suivante:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>adjkerntz -i</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">Cela permettra de s'assurer que vos paramètres
	  de fuseaux horaires sont correctement configurés &#8212;
	  sans cela, vous risquez de faire face, plus tard, à des
	  problèmes.
	</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80726608"></a>24.6.6. Effacer <code class="filename">/usr/obj</code></h3></div></div></div><p>Au fur et à mesure que les différentes parties
	du système sont recompilées, elles sont
	placées dans des répertoires qui (par défaut) sont
	sous <code class="filename">/usr/obj</code>.  Les répertoires sont
	agencés comme sous <code class="filename">/usr/src</code>.</p><p>Vous pouvez accélérer le processus <code class="command">make
	buildworld</code>, et également vous éviter d'éventuels
	problèmes de dépendances en effaçant ce
	répertoire.</p><p>Certains fichiers dans <code class="filename">/usr/obj</code>
	peuvent avoir l'indicateur immuable positionné (consultez la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> pour plus d'informations)
	qui doit être retiré en premier.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/obj</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg *</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf *</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading-compilebase"></a>24.6.7. Recompiler le système de base</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80734544"></a>24.6.7.1. Enregistrer la sortie</h4></div></div></div><p>C'est une bonne idée d'enregistrer la sortie de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> dans un fichier.  Si quelque chose se passe
	  mal, vous aurez une trace des messages d'erreur.  Même
	  si cela ne vous aide pas à diagnostiquer ce qui n'a pas
	  fonctionné, cela peut aider les autres si vous postez
	  votre problème sur une des listes de diffusion de
	  FreeBSD.</p><p>La méthode la plus aisée pour faire cela est
	  d'utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=script&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">script</span>(1)</span></a>, avec en paramètre
	  le nom du fichier où enregistrer les résultats.
	  Vous devez faire cela immédiatement juste avant de
	  recompiler le système, et taper <strong class="userinput"><code>exit</code></strong>
	  une fois que c'est terminé.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>script /var/tmp/mw.out</code></strong>
Script started, output file is /var/tmp/mw.out
<code class="prompt">#</code> <strong class="userinput"><code>make TARGET</code></strong>
<span class="emphasis"><em>&#8230; compile, compile, compile &#8230;</em></span>
<code class="prompt">#</code> <strong class="userinput"><code>exit</code></strong>
Script done, &#8230;</pre><p>Si vous le faites, <span class="emphasis"><em>n'enregistrez pas</em></span>
	  le résultat dans <code class="filename">/tmp</code>.
	  Ce répertoire peut être vidé au prochain
	  redémarrage du système.  Un meilleur endroit de
	  sauvegarde est <code class="filename">/var/tmp</code> (comme dans l'exemple
	  précédent) ou dans le répertoire utilisateur
	  de <code class="systemitem">root</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-buildworld"></a>24.6.7.2. Compiler le nouveau système</h4></div></div></div><p>Vous devez être dans le répertoire
	  <code class="filename">/usr/src</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong></pre><p>(à moins, bien sûr, que votre code source ne
	  soit ailleurs, auquel cas vous devrez aller dans le
	  répertoire correspondant).</p><a id="idp80750032" class="indexterm"></a><p>Pour recompiler le système, on utilise la commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>.  Cette commande lit ses instructions dans
	  le fichier <code class="filename">Makefile</code>, qui décrit comment
	  devraient être reconstruits les programmes qui constituent
	  FreeBSD, dans quel ordre, et ainsi de suite.</p><p>Le format général de la ligne de commande que
	  vous taperez sera la suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -x -DVARIABLE cible</code></strong></pre><p>Dans cet exemple,
	  <code class="option">-<em class="replaceable"><code>x</code></em></code> est une
	  option que vous passez à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>.  Reportez-vous
	  à la page de manuel pour un exemple d'options que vous
	  pouvez passer.</p><p><code class="option">-D<em class="replaceable"><code>VARIABLE</code></em></code>
	  transmet un variable au fichier
	  <code class="filename">Makefile</code>.  Le comportement du
	  <code class="filename">Makefile</code> est défini par ces variables.
	  Ce sont les mêmes variables que l'on trouve dans
	  <code class="filename">/etc/make.conf</code>, et c'est un autre moyen
	  de les positionner.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE cible</code></strong></pre><p>est une autre manière de dire qu'il ne faut pas compiler
	  les bibliothèques profilées et correspond à
	  la ligne:</p><pre class="programlisting">NO_PROFILE=    true	#    Avoid compiling profiled libraries</pre><p>dans <code class="filename">/etc/make.conf</code>.</p><p><em class="replaceable"><code>cible</code></em> indique à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>
	  ce que vous voulez faire.  Chaque
	  <code class="filename">Makefile</code> définit un certain nombre de
	  &#8220;cibles&#8221;, et votre choix de cible détermine ce
	  qui se passe.</p><p>Certaines cibles listées dans le fichier
	  <code class="filename">Makefile</code>, ne doivent pas être
	  employées.  Ce sont des étapes intermédiaires
	  utilisées par le processus de recompilation pour
	  décomposer les étapes importantes de la recompilation
	  du système en sous-étapes.</p><p>La plupart du temps, vous n'aurez pas besoin de passer
	  de paramètres à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>, et votre commande
	  ressemblera à ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make cible</code></strong></pre><p>Où <em class="replaceable"><code>cible</code></em> sera une des
	  nombreuses options de compilation.  La première cible
	  devrait toujours être
	  <code class="varname">buildworld</code>.</p><p>Comme leurs noms l'indiquent,
	  <code class="buildtarget">buildworld</code> reconstruit la nouvelle
	  arborescence dans <code class="filename">/usr/obj</code>, et
	  <code class="buildtarget">installworld</code>, une autre cible, l'installe sur la
	  machine.</p><p>Disposer d'options séparées est très utile pour deux raisons.  Tout d'abord
	  cela vous permet de recompiler en toute sûreté en sachant
	  qu'aucun composant du système actuel ne sera affecté.
	  La compilation est &#8220;autonome&#8221;.  En raison de
	  cela vous pouvez exécuter
	  <code class="buildtarget">buildworld</code> sur une machine en mode
	  multi-utilisateurs sans redouter d'effets fâcheux.  Il est
	  néanmoins recommandé de toujours exécuter
	  l'étape <code class="buildtarget">installworld</code> en mode
	  mono-utilisateur.</p><p>En second lieu, cela vous permet d'utiliser des
	  systèmes montés par NFS pour mettre à
	  jour plusieurs machines de votre réseau.  Si vous avez
	  trois machines <code class="systemitem">A</code>, <code class="systemitem">B</code> et
	  <code class="systemitem">C</code> que vous voulez mettre à jour,
	  exécutez <code class="command">make buildworld</code> et
	  <code class="command">make installworld</code> sur <code class="systemitem">A</code>.
	  <code class="systemitem">B</code> et <code class="systemitem">C</code> doivent
	  ensuite monter par NFS <code class="filename">/usr/src</code>
	  et <code class="filename">/usr/obj</code> depuis <code class="systemitem">A</code>,
	  et vous pouvez alors exécuter
	  <code class="command">make installworld</code> pour installer le
	  système recompilé sur <code class="systemitem">B</code> et
	  <code class="systemitem">C</code>.</p><p>Bien que la cible <code class="buildtarget">world</code> existe
	  toujours, vous êtes fortement encouragé
	  à ne pas l'utiliser.</p><p>Exécutez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make buildworld</code></strong></pre><p>Il est possible de passer l'option
	  <code class="option">-j</code> à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> ce qui lui permettra
	  d'exécuter plusieurs processus simultanément.
	  C'est particulièrement utile sur une machine avec plusieurs
	  processeurs.  Cependant, comme la compilation est plus
	  gourmande en E/S plutôt qu'en CPU, c'est également
	  utile sur des machines mono-processeur.</p><p>Typiquement sur une machine mono-processeur, vous
	  exécuteriez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -j4 buildworld</code></strong></pre><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> pourra exécuter jusqu'à 4 processus
	  simultanément.  Des constatations empiriques
	  postées sur les listes de diffusion montrent que c'est
	  en général ce qui apporte le plus de gain en
	  performances.</p><p>Si vous avez une machine multi-processeurs et que vous
	  avez configuré un noyau SMP, essayez des valeurs entre 6 et
	  19 et voyez quel bénéfice vous en tirez.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80789072"></a>24.6.7.3. Durée</h4></div></div></div><a id="idp80789712" class="indexterm"></a><p>De nombreux facteurs influencent la durée de
	  compilation, mais les machines récentes devraient
	  mettrent seulement de une à deux heures
	  pour compiler l'arborescence FreeBSD-STABLE,
	  sans modification ni raccourcis durant le processus.
	  Une arborescence FreeBSD-CURRENT nécessitera un peu plus de
	  temps.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80791504"></a>24.6.8. Compiler et installer un nouveau noyau</h3></div></div></div><a id="idp80792144" class="indexterm"></a><p>Pour tirer pleinement parti de votre nouveau système,
	vous devrez recompiler le noyau.  C'est pratiquement
	indispensable, parce que certaines structures mémoires
	peuvent avoir changées, et des programmes comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ps&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span></a>
	et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=top&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">top</span>(1)</span></a> ne fonctionneront pas tant que le système
	et le noyau n'utilisent pas les mêmes versions de code
	source.</p><p>La manière la plus simple et la plus sûre est de
	compiler et installer un noyau basé sur le noyau
	<code class="filename">GENERIC</code>.  Alors que le noyau
	<code class="filename">GENERIC</code> peut ne pas comporter les pilotes
	de périphériques nécessaires pour votre
	système, il devrait contenir tout ce qui est
	nécessaire pour faire démarrer votre système
	en mode mono-utilisateur.  C'est une bonne façon de tester
	le fonctionnement de votre nouveau système.  Après
	avoir démarré à partir du noyau
	<code class="filename">GENERIC</code> et vérifié que
	votre système fonctionne vous pouvez alors compiler un nouveau
	noyau basé sur votre fichier de configuration normal du
	noyau.</p><p>Sur FreeBSD, il est important
	de <a class="link" href="#make-buildworld" title="24.6.7.2. Compiler le nouveau système">recompiler le
	système</a> avant de compiler un nouveau
	noyau.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous désirez compiler un noyau personnalisé,
	  et que vous avez déjà un fichier de
	  configuration, utilisez juste
	  <code class="buildtarget">KERNCONF=<em class="replaceable"><code>MONNOYAU</code></em></code>
	  comme suit:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make buildkernel KERNCONF=MONNOYAU</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installkernel KERNCONF=MONNOYAU</code></strong></pre></div><p>Notez que si vous avez augmenté la variable
	<code class="literal">kern.securelevel</code> à une valeur
	supérieure à 1 <span class="emphasis"><em>et</em></span> que vous
	avez positionné l'indicateur <code class="literal">noschg</code>
	ou similaire sur votre noyau, il sera intéressant de passer
	en mode mono-utilisateur pour utiliser
	<code class="buildtarget">installkernel</code>.  Sinon vous devriez
	être en mesure d'exécuter ces commandes à
	partir du mode multi-utilisateur sans problèmes.  Voir
	la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> pour plus de détails
	à propos de <code class="literal">kern.securelevel</code> et la page
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chflags&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chflags</span>(1)</span></a> pour des informations sur les différents
	indicateurs de fichiers.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80834384"></a>24.6.9. Redémarrer en mode mono-utilisateur</h3></div></div></div><a id="idp80835024" class="indexterm"></a><p>Vous devriez redémarrer en mode mono-utilisateur pour
	tester le fonctionnement du nouveau noyau.  Pour cela suivez
	les instructions de
	<a class="xref" href="#makeworld-singleuser" title="24.6.5. Passer en mode mono-utilisateur">Section 24.6.5, « Passer en mode mono-utilisateur »</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="make-installworld"></a>24.6.10. Installer les nouveaux binaires système</h3></div></div></div><p>Si vous avez compilé une version de FreeBSD assez
	récente pour avoir utilisé
	<code class="command">make buildworld</code> alors vous devriez
	utiliser maintenant <code class="buildtarget">installworld</code>
	pour installer les nouveaux binaires système.</p><p>Lancez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make installworld</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous spécifiez des variables sur la
	  ligne de commande de <code class="command">make buildworld</code>,
	  vous devez utiliser les mêmes variables avec la commande
	  <code class="command">make installworld</code>.  Cela ne reste
	  pas forcément vrai pour d'autres options; par exemple,
	  <code class="option">-j</code> ne doit jamais être utilisée
	  avec <code class="buildtarget">installworld</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Par exemple, si vous exécutez:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE buildworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">vous devrez ensuite installer les résultats avec:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make -DNO_PROFILE installworld</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">sinon il essayera d'installer les bibliothèques
	  profilées qui n'ont pas été
	  recompilées à l'étape
	  <code class="command">make buildworld</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80846288"></a>24.6.11. Mettre à jour les fichiers non modifiés par
	<code class="command">make installworld</code></h3></div></div></div><p>La recompilation du système ne mettra pas à
	jour certains répertoires (en particulier,
	<code class="filename">/etc</code>, <code class="filename">/var</code> et
	<code class="filename">/usr</code>) avec les fichiers nouveaux
	ou modifiés.</p><p>La manière la plus simple de mettre à jour
	ces fichiers est d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a>, bien
	qu'il soit possible de le faire manuellement si vous le
	désirez.  Indépendamment de la manière
	que vous choisissez, assurez-vous de faire une sauvegarde
	du répertoire <code class="filename">/etc</code> au cas
	où quelque chose se passerait mal.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mergemaster"></a>24.6.11.1. <code class="command">mergemaster</code></h4></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp80853072" class="indexterm"></a><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> est une procédure Bourne
	qui vous aidera à déterminer les différences entre
	vos fichiers de configuration dans le répertoire
	<code class="filename">/etc</code>, et les fichiers de configuration
	dans l'arborescence des sources
	<code class="filename">/usr/src/etc</code>.  C'est la solution
	recommandée pour maintenir à jour les fichiers de
	configuration du système avec ceux situés
	dans l'arborescence des sources.</p><p>Pour commencer, tapez simplement
	<code class="command">mergemaster</code> à l'invite, et observez-le
	travailler.  <code class="command">mergemaster</code> commencera à
	constituer une arborescence temporaire, à partir de
	<code class="filename">/</code>, et la remplira avec divers fichiers
	de configuration.  Ces fichiers sont alors comparés avec
	ceux actuellement installés sur votre système.
	A ce point, les fichiers qui diffèrent seront
	affichés dans le format <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>, avec le signe
	<code class="option">+</code> représentant les lignes modifiées
	ou ajoutées, et le <code class="option">-</code> représentant
	les lignes qui seront soit complètement supprimées,
	soit remplacées avec une nouvelle ligne.
	Voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> pour plus d'informations
	au sujet de la syntaxe <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> et comment sont affichées
	les différences.</p><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> vous affichera ensuite chaque fichier
	présentant des différences, et vous aurez
	à ce moment-là le choix de soit supprimer le
	nouveau fichier (le fichier temporaire), soit d'installer
	le fichier temporaire non modifié, soit de fusionner
	le fichier temporaire et le fichier actuellement installé,
	soit enfin de revoir les résultats de l'opération
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a>.</p><p>Choisir de supprimer le fichier temporaire indiquera à
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> que nous désirons conserver notre
	fichier actuel intacte, et effacera la nouvelle version.
	Cette option n'est pas recommandée, à moins
	que vous ne voyez aucune raison de modifier le fichier actuel.
	Vous pouvez obtenir de l'aide à n'importe quel moment en
	tapant <span class="keycap"><strong>?</strong></span> à l'invite de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a>.
	Si l'utilisateur choisit de passer un fichier, il sera
	présenté à nouveau une fois que tous les
	autres fichiers auront été traités.</p><p>Choisir d'installer un fichier temporaire intact
	remplacera le fichier actuel avec le nouveau.  Pour la plupart
	des fichiers non modifiées, c'est la meilleure option.</p><p>Choisir de fusionner le fichier, vous affichera un éditeur
	de texte, et le contenu des deux fichiers.  Vous pouvez
	maintenant les fusionner en les visionnant côte
	à côte sur l'écran, et en sélectionnant
	des parties des deux fichiers pour créer un fichier final.
	Quand les fichiers sont comparés côte à
	côte, la touche <span class="keycap"><strong>l</strong></span> sélectionnera le
	contenu de gauche et la touche <span class="keycap"><strong>r</strong></span>
	sélectionnera celui de droite.
	Le résultat final sera un fichier constitué des deux
	parties, qui peut alors être installé.
	Cette option est habituellement utilisée pour les fichiers
	où les des paramètres ont été
	modifiés par l'utilisateur.</p><p>Choisir de revoir les résultats de l'opération
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> vous affichera les différences entre fichiers
	tout comme la fait <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> avant de vous demander
	un choix.</p><p>Après que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> en ait terminé avec
	les fichiers système, il vous proposera de nouvelles
	opérations.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> vous demandera si vous
	désirez reconstruire le fichier des mots de passe
	et terminera en vous proposant
	de supprimer les fichiers temporaires
	restants.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp80878544"></a>24.6.11.2. Mise à jour manuelle</h4></div></div></div><p>Si vous désirez faire la mise à jour manuellement,
	vous ne pouvez cependant pas vous contenter de copier
	les fichiers de <code class="filename">/usr/src/etc</code> dans
	<code class="filename">/etc</code> pour que cela fonctionne.  Certains
	de ces fichiers doivent d'abord être
	&#8220;installés&#8221;.
	En effet le répertoire <code class="filename">/usr/src/etc</code>
	&#8220;n'est pas&#8221; une copie de ce que devrait contenir
	votre répertoire <code class="filename">/etc</code>.  De plus,
	il a des fichiers qui doivent être dans
	<code class="filename">/etc</code> et qui ne sont pas dans
	<code class="filename">/usr/src/etc</code>.</p><p>Si vous utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mergemaster&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mergemaster</span>(8)</span></a> (comme recommandé),
	vous pouvez passer cette section et aller directement à
	la <a class="link" href="#updating-upgrading-rebooting" title="24.6.12. Redémarrer">section
	suivante</a>.</p><p>La façon la plus simple de procéder est
	d'installer les fichiers dans un nouveau répertoire, puis de
	passer en revue les différences.</p><div xmlns="" class="warning"><h3 class="admontitle">Sauvegardez votre répertoire
	  <code xmlns="http://www.w3.org/1999/xhtml" class="filename">/etc</code> actuel: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bien qu'en principe rien ne sera modifié automatiquement
	  dans ce répertoire, prudence est mère de
	  sûreté.  Copiez donc votre répertoire
	  <code class="filename">/etc</code> dans un endroit sûr.  Quelque
	  chose du genre:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp -Rp /etc /etc.old</code></strong></pre><p xmlns="http://www.w3.org/1999/xhtml">conviendra; l'option <code class="option">-R</code> fait une copie
	  récursive, <code class="option">-p</code> préserve la date, les
	  autorisations des fichiers et ainsi de suite.</p></div><p>Vous devez créer un ensemble de répertoires
	provisoires pour y installer les fichiers du répertoire <code class="filename">/etc</code>
	et autres.  <code class="filename">/var/tmp/root</code> est un bon
	choix, il y a un certain nombre de sous-répertoires
	à créer également:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make DESTDIR=/var/tmp/root distrib-dirs distribution</code></strong></pre><p>Cela va créer l'arborescence nécessaire et y
	installera les fichiers.  Un grand nombre des
	sous-répertoires créés dans
	<code class="filename">/var/tmp/root</code>
	sont vides et devront être supprimés.
	La façon la plus simple de le faire est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /var/tmp/root</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>find -d . -type d | xargs rmdir 2&gt;/dev/null</code></strong></pre><p>Ceci supprimera tous les répertoires vides (la sortie
	d'erreur standard est redirigée vers
	<code class="filename">/dev/null</code> pour empêcher les
	avertissements à propos des répertoires non
	vides).</p><p><code class="filename">/var/tmp/root</code> contient maintenant
	tous les fichiers à installer à l'endroit requis sous
	<code class="filename">/</code>.  Vous devez maintenant examiner chacun
	de ces fichiers pour déterminer en quoi ils diffèrent
	de vos propres fichiers.</p><p>Notez que certains des fichiers qui seront installés
	dans <code class="filename">/var/tmp/root</code> commencent par un
	&#8220;.&#8221;.  Au moment où sont écrites ces
	lignes, les seuls fichiers concernés sont les fichiers
	d'initialisation des interpréteurs de commandes dans
	<code class="filename">/var/tmp/root/</code> et
	<code class="filename">/var/tmp/root/root/</code>, mais il pourrait y
	en avoir d'autres (cela dépend de quand vous lirez ces
	lignes).  Assurez-vous d'utiliser la commande <code class="command">ls
	-a</code> pour ne pas les oublier.</p><p>La manière la plus simple de procéder est
	d'utiliser la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> pour comparer les deux
	fichiers:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>diff /etc/shells /var/tmp/root/etc/shells</code></strong></pre><p>Cela vous indiquera les différences entre votre fichier
	<code class="filename">/etc/shells</code> et le nouveau fichier
	<code class="filename">/var/tmp/root//etc/shells</code>.  A partir de
	là, décidez si vous aller reporter les modifications
	que vous y avez apportée ou si vous allez simplement
	recopier le nouveau fichier.</p><div xmlns="" class="tip"><h3 class="admontitle">Donnez au nouveau répertoire racine
	  (<code xmlns="http://www.w3.org/1999/xhtml" class="filename">/var/tmp/root</code>) un nom qui inclue une
	  date, pour pouvoir facilement comparer les différentes
	  versions: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous recompilez fréquemment votre système,
	  cela signifie que vous devez également souvent
	  mettre à jour le répertoire <code class="filename">/etc</code>,
	  ce qui peut rapidement devenir une corvée.</p><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez accélérer le processus en
	  conservant une copie du dernier ensemble de fichiers
	  modifiés que vous avez reportés dans
	  <code class="filename">/etc</code>.  La procédure suivante
	  présente une façon de faire.</p><div xmlns="http://www.w3.org/1999/xhtml" class="procedure"><ol class="procedure" type="1"><li class="step"><p>Recompilez le système comme à
	      l'accoutumé.  Au moment de mettre à jour
	      <code class="filename">/etc</code> et les autre répertoires,
	      donnez au répertoire cible un nom basé sur la
	      date du jour.  Si vous faisiez cela le 14 février
	      1998, vous pourriez procéder comme suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root-19980214</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/etc</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make DESTDIR=/var/tmp/root-19980214 \
    distrib-dirs distribution</code></strong></pre></li><li class="step"><p>Reporter les modifications depuis ce répertoire
	      comme décrit plus haut.</p><p><span class="emphasis"><em>Ne supprimez pas</em></span> le
	      répertoire <code class="filename">/var/tmp/root-19980214</code>
	      quand vous aurez terminé.</p></li><li class="step"><p>Quand vous récupérez la dernière
	      version des sources et la recompilerez, suivez l'étape
	      1.  Vous aurez alors un nouveau répertoire, qui
	      pourrait s'appeler <code class="filename">/var/tmp/root-19980221</code>
	      (si vous faites une mise à jour chaque semaine).</p></li><li class="step"><p>Vous pouvez maintenant voir les modifications
	      intervenues d'une semaine à l'autre en utilisant
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diff&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">diff</span>(1)</span></a> pour afficher les différences entre tous
	      les fichiers deux répertoires:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /var/tmp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>diff -r root-19980214 root-19980221</code></strong></pre><p>Généralement, il y aura beaucoup moins de
	      différences qu'entre
	      <code class="filename">/var/tmp/root-19980221/etc</code> et
	      <code class="filename">/etc</code>.  Comme il y a beaucoup
	      moins de différences, il est beaucoup plus facile
	      de les reporter dans le répertoire
	      <code class="filename">/etc</code>.</p></li><li class="step"><p>Vous pouvez maintenant supprimer le plus ancien
	      des deux répertoires
	      <code class="filename">/var/tmp/root-*</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rm -rf /var/tmp/root-19980214</code></strong></pre></li><li class="step"><p>Répétez l'opération chaque fois que vous devez
	      reporter des modifications dans
	      <code class="filename">/etc</code>.</p></li></ol></div><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=date&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">date</span>(1)</span></a> pour automatiser la
	  génération des noms de répertoires:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/root-`date "+%Y%m%d"`</code></strong></pre></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="updating-upgrading-rebooting"></a>24.6.12. Redémarrer</h3></div></div></div><p>Vous en avez terminé.  Après avoir
	vérifié que tout semble être en place, vous
	pouvez alors redémarrez votre système.  Un simple
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=shutdown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">shutdown</span>(8)</span></a> devrait suffire:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>shutdown -r now</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81011024"></a>24.6.13. C'est fini</h3></div></div></div><p>Vous devriez maintenant avoir mis à jour avec
	succès votre système FreeBSD.  Félicitations.</p><p>Si les choses se sont légèrement mal
	passées, il est facile de recompiler un élément
	particulier du système.  Par exemple, si vous avez
	accidentellement effacé <code class="filename">/etc/magic</code>
	lors de la mise à jour de <code class="filename">/etc</code>, la
	commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=file&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">file</span>(1)</span></a> ne fonctionnerait plus.  Dans ce cas,
	la solution serait d'exécuter:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.bin/file</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make all install</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81024080"></a>24.6.14. Questions</h3></div></div></div><div class="qandaset"><a id="idp81024720"></a><dl><dt>24.6.14.1. <a href="#idp81024976">Dois-je refaire le monde à chaque
	      évolution?</a></dt><dt>24.6.14.2. <a href="#idp81031248">Ma compilation échoue avec de nombreuses erreurs
	      &#8220;signal 11&#8221; (ou tout
	      autre numéro de signal).  Que s'est-il passé?</a></dt><dt>24.6.14.3. <a href="#idp81034832">Puis-je effacer /usr/obj après
	      avoir fini?</a></dt><dt>24.6.14.4. <a href="#idp81039312">Une recompilation interrompue peut-elle être
	      reprise?</a></dt><dt>24.6.14.5. <a href="#idp81095888">Comment puis-je accélérer la compilation
	      du système?</a></dt><dt>24.6.14.6. <a href="#idp81122640">Que faire si quelque chose se passe mal?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp81024976"></a><a id="idp81025232"></a><p><strong>24.6.14.1.</strong></p></td><td align="left" valign="top"><p>Dois-je refaire le monde à chaque
	      évolution?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Il n'y a pas de réponse toute faite à
	      cette question, tout dépend de la nature des
	      évolutions.  Par exemple, si vous venez juste
	      d'exécuter <span class="application">CVSup</span>, et que
	      les fichiers suivants on été mis à
	      jour:</p><pre class="screen"><code class="filename">src/games/cribbage/instr.c</code>
<code class="filename">src/games/sail/pl_main.c</code>
<code class="filename">src/release/sysinstall/config.c</code>
<code class="filename">src/release/sysinstall/media.c</code>
<code class="filename">src/share/mk/bsd.port.mk</code></pre><p>cela ne vaut probablement pas la peine de recompiler
	      tout le système.  Vous pouvez tout simplement aller dans
	      les sous-répertoires appropriés,
	      exécuter <code class="command">make all install</code>, et
	      c'est à peu près tout.  Mais s'il y a des
	      évolutions importantes, par exemple sur
	      <code class="filename">src/lib/libc/stdlib</code> alors vous
	      devrez soit refaire le monde, ou recompiler au moins
	      toutes les parties du système qui sont liées
	      statiquement (de même que tout ce vous pourriez
	      avoir ajouté qui y serait lié statiquement).</p><p>C'est à vous de voir.  Vous préférerez
	      peut-être recompiler votre système tous les
	      quinze jours, et laisser les modifications s'empiler
	      pendant quinze jours.  Ou bien vous préférerez
	      ne recompiler que ce qui a changé et vous faire
	      confiance pour tout ce qui en dépend.</p><p>Et, bien sûr, cela dépend de la
	      fréquence avec laquelle vous voulez faire vos mises
	      à jour, et de si vous suivez la branche FreeBSD-STABLE
	      ou FreeBSD-CURRENT.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81031248"></a><a id="idp81031504"></a><p><strong>24.6.14.2.</strong></p></td><td align="left" valign="top"><p>Ma compilation échoue avec de nombreuses erreurs
	      &#8220;signal 11&#8221;<a id="idp81032272" class="indexterm"></a> (ou tout
	      autre numéro de signal).  Que s'est-il passé?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Cela indique généralement un problème
	      matériel.  (Re)compiler le système est un bon
	      moyen de mettre votre matériel sous pression, et
	      mettra souvent en évidence des défaillances
	      de la mémoire vive.  Elles se manifestent normalement
	      d'elles-mêmes, la compilation échouant
	      lors de la réception de mystérieux signaux.</p><p>Un bon indicateur de cet état de fait, est que
	      vous pouvez relancer la compilation et qu'elle échouera
	      en un endroit différent.</p><p>Dans ce cas, vous ne pouvez guère faire autre chose
	      que d'intervertir les différents composants de votre
	      matériel pour déterminer lequel est en cause.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81034832"></a><a id="idp81035088"></a><p><strong>24.6.14.3.</strong></p></td><td align="left" valign="top"><p>Puis-je effacer <code class="filename">/usr/obj</code> après
	      avoir fini?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Une réponse courte est oui.</p><p><code class="filename">/usr/obj</code> contient tous les
	      fichiers objets générés à la
	      compilation.  Normalement, une des premières
	      étapes de <code class="command">make buildworld</code> est de supprimer ce
	      répertoire et de repartir à zéro.
	      Dans ce cas, conserver le répertoire
	      <code class="filename">/usr/obj</code> après avoir terminé ne
	      sert pas à grand chose, alors que vous
	      économiseriez pas mal d'espace disque (actuellement
	      environ 340 MO).</p><p>Cependant, si vous savez ce que vous faites, vous
	      pouvez faire en sorte que <code class="command">make buildworld</code>
	      saute cette étape.  Cela rendra les compilations
	      ultérieures plus rapides, puisque la plupart des sources
	      n'auront pas besoin d'être recompilées.
	      Le revers de la médaille est que des problèmes
	      subtils de dépendance peuvent se manifester, provoquant
	      l'échec de votre compilation de manière
	      étrange.  Cela génère fréquemment
	      du bruit sur les listes de diffusion de FreeBSD, quand quelqu'un se
	      plaint que sa mise à jour a échoué, sans
	      réaliser que c'est parce qu'il a tenté de
	      brûler les étapes.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81039312"></a><a id="idp81039568"></a><p><strong>24.6.14.4.</strong></p></td><td align="left" valign="top"><p>Une recompilation interrompue peut-elle être
	      reprise?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Tout dépend de jusqu'où vous êtes
	      aller avant de rencontrer un problème.</p><p><span class="emphasis"><em>En général</em></span> (et ceci n'est
	      pas une règle absolue) <code class="command">make buildworld</code>
	      crée de nouveaux exemplaires des outils indispensables
	      (comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gcc&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gcc</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a>) et des bibliothèques
	      système.  Ces outils et bibliothèques sont
	      ensuite installés.  Puis ils sont utilisés pour
	      se reconstruire eux-mêmes, et installés de nouveau.
	      L'intégralité du système (y compris
	      maintenant les programmes utilisateurs classiques, comme
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=grep&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">grep</span>(1)</span></a>) est alors recompilé avec
	      les nouveaux fichiers système.</p><p>Si vous êtes à cette dernière
	      étape, et que vous le savez (parce que vous avez
	      consulté les résultats que vous avez
	      enregistrés) alors vous pouvez (sans trop de risque)
	      faire:</p><pre class="screen"><span class="emphasis"><em>&#8230; fix the problem &#8230;</em></span>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make -DNO_CLEAN all</code></strong></pre><p>Cela ne détruira pas les résultats du
	      travail qu'à déjà effectué <code class="command">make
	      buildworld</code>.</p><p>Si vous voyez le message:</p><pre class="screen">--------------------------------------------------------------
Building everything..
--------------------------------------------------------------</pre><p>dans les comptes-rendus de <code class="command">make buildworld</code>
	      alors cette façon de procéder est probablement
	      bonne.</p><p>Si vous ne voyez pas ce message, ou que vous doutez
	      de vous, alors prudence est mère de sûreté,
	      et il vaut mieux tout reprendre depuis le début.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81095888"></a><a id="idp81096144"></a><p><strong>24.6.14.5.</strong></p></td><td align="left" valign="top"><p>Comment puis-je accélérer la compilation
	      du système?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Passez en mode mono-utilisateur.</p></li><li class="listitem"><p>Mettez les répertoires
		  <code class="filename">/usr/src</code> et
		  <code class="filename">/usr/obj</code> sur des systèmes de
		  fichiers et des disques différents.  Si possible,
		  installez ces disques sur des contrôleurs
		  différents.</p></li><li class="listitem"><p>Encore mieux, mettez ces systèmes de fichiers
		  sur plusieurs disques utilisant le système
		  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ccd&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ccd</span>(4)</span></a> (pilote de disques
		  concaténés).</p></li><li class="listitem"><p>Ne compilez pas les bibliothèques profilées
		  (mettez &#8220;NO_PROFILE=true&#8221; dans le fichier
		  <code class="filename">/etc/make.conf</code>).  Vous n'en
		  avez certainement pas besoin.</p></li><li class="listitem"><p>Egalement dans <code class="filename">/etc/make.conf</code>,
		  positionnez <code class="varname">CFLAGS</code> à quelque
		  chose comme <code class="option">-O -pipe</code>.
		  L'optimisation <code class="option">-O2</code> est bien plus
		  lente, et la différence d'optimisation entre
		  <code class="option">-O</code> et <code class="option">-O2</code> est en
		  général négligeable.
		  <code class="option">-pipe</code> demande au compilateur d'utiliser
		  des tuyaux à la place de fichiers temporaires, ce
		  qui économise des accès disque (mais
		  utilise plus de mémoire).</p></li><li class="listitem"><p>Passez l'option
		  <code class="option">-j<em class="replaceable"><code>n</code></em></code>
		  à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> pour permettre l'exécution de
		  plusieurs processus en parallèle.  Cela
		  améliore généralement les choses, que
		  vous ayez une machine mono- ou multi-processeurs.</p></li><li class="listitem"><p>Le système de fichiers qui contient
		  <code class="filename">/usr/src</code> peut être monté
		  (ou remonté) avec l'option <code class="option">noatime</code>.
		  Cela empêche l'enregistrement des dates d'accès
		  aux fichiers par le système de fichiers.  Vous
		  n'avez de toute façon probablement pas besoin de cette
		  information.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o noatime /usr/src</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cet exemple suppose que
		      <code class="filename">/usr/src</code> constitue à lui
		      seul un système de fichiers.  Si ce n'est pas
		      le cas (s'il fait partie de
		      <code class="filename">/usr</code> par exemple) vous
		      devez alors indiquer le point de montage de ce
		      système de fichiers, et non
		      <code class="filename">/usr/src</code>.</p></div></li><li class="listitem"><p>Le système de fichiers où se trouve
		  <code class="filename">/usr/obj</code> peut être
		  monté (ou remonté) avec l'option
		  <code class="option">async</code>.  Les écritures sur le
		  disque se feront alors de façon asynchrone.  En
		  d'autres termes, le programme reprend immédiatement
		  la main, et l'écriture des données sur le
		  disque se fait quelques secondes plus tard.  Cela
		  permet le groupement des écritures sur le disque,
		  et le gain en performance peut être
		  spectaculaire.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Gardez à l'esprit que cette option rend votre
		    système de fichiers plus fragile.  Avec cette
		    option, les risques ne sont accrus qu'en cas de
		    coupure d'alimentation, le système de fichiers
		    soit irrécupérable quand la machine
		    redémarrera.</p><p xmlns="http://www.w3.org/1999/xhtml">S'il n'y a que <code class="filename">/usr/obj</code>
		    sur ce système de fichiers, ce n'est alors pas un
		    problème.  Si vous avez d'autres données
		    importantes sur ce système de fichiers,
		    assurez-vous que vos sauvegardes soient à jour
		    avant d'activer cette option.</p></div><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -u -o async /usr/obj</code></strong></pre><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Comme auparavant, si
		    <code class="filename">/usr/obj</code> ne constitue pas un
		    système de fichiers en soit, remplacez-le dans
		    l'exemple par le nom du point de montage
		    approprié.</p></div></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="idp81122640"></a><a id="idp81122896"></a><p><strong>24.6.14.6.</strong></p></td><td align="left" valign="top"><p>Que faire si quelque chose se passe mal?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Soyez absolument sûr que votre environnement
	      ne contient pas des restes de compilation
	      précédentes.  Cela est plutôt simple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chflags -R noschg /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>rm -rf /usr/obj/usr</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong></pre><p>En effet, <code class="command">make cleandir</code>
	      doit vraiment être exécutée
	      deux fois.</p><p>Ensuite relancez l'ensemble du processus,
	      en commençant avec
	      <code class="command">make buildworld</code>.</p><p>Si vous avez toujours des problèmes,
	      envoyez l'erreur et le résultat de la commande
	      <code class="command">uname -a</code> à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">liste de diffusion pour les questions d'ordre général à propos de FreeBSD</a>.
	      Tenez-vous prêt à répondre à d'autres
	      concernant votre configuration!</p></td></tr></tbody></table></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="small-lan"></a>24.7. Suivre les mises à jour pour plusieurs machines</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Mike</span> <span class="surname">Meyer</span></span>. </span></div></div></div><a id="idp81138640" class="indexterm"></a><p>Si vous avez plusieurs machines dont vous voulez maintenir à
      jour l'arborescence des sources, alors faire
      télécharger et recompiler à chacune d'entre elles
      les sources semble un gaspillage de ressources: espace disque, bande
      passante réseau, et cycles CPU.  C'est en effet bien le cas,
      et la solution est d'avoir une machine qui fait la majeure
      partie du travail, pendant que le reste des machines montent ce
      travail par NFS.  Cette section décrit une façon
      de le faire.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="small-lan-preliminaries"></a>24.7.1. Préliminaires</h3></div></div></div><p>Premièrement, identifiez un ensemble de machines
	qui va utiliser le même ensemble de binaires, que nous
	appellerons un <span class="emphasis"><em>ensemble de compilation</em></span>.
	Chaque machine peut avoir un noyau personnalisé, mais
	elles exécuteront les mêmes binaires utilisateur du
	système de base.  Dans cet ensemble de machine, choisissez
	une machine qui sera la <span class="emphasis"><em>machine de
	compilation</em></span>.  Cela sera la machine sur laquelle
	le monde et le noyau seront compilés.  Idéalement, cela
	devrait être une machine rapide avec un CPU suffisamment
	disponible pour exécuter la commande <code class="command">make
	buildworld</code> et <code class="command">make buildkernel</code>.  Vous voudrez également utiliser
	une <span class="emphasis"><em>machine de test</em></span>, qui testera
	les mises à jour logicielles avant d'être utilisées
	en production.  Cela <span class="emphasis"><em>doit</em></span> être une
	machine que vous pouvez vous permettre d'avoir hors service
	pour une longue période.  Cela peut être la machine
	de compilation, mais cela n'est pas obligatoire.</p><p>Toutes les machines de cet ensemble de compilation
	doivent monter <code class="filename">/usr/obj</code> et
	<code class="filename">/usr/src</code> à partir de la même
	machine, et du même point de montage.  Idéalement, ces
	derniers sont sur deux disques différents sur la machine de
	compilation, mais peuvent également être
	montés par NFS sur cette machine.  Si vous avez plusieurs
	ensembles de compilation, <code class="filename">/usr/src</code>
	devrait être sur une machine de compilation, et monté
	par NFS sur les autres.</p><p>Finalement assurez-vous que
	<code class="filename">/etc/make.conf</code> et
	<code class="filename">/etc/src.conf</code> sur toutes les machines
	de l'ensemble de compilation sont en accord avec la machine de
	compilation.  Cela signifie que la machine de compilation doit
	compiler toutes les parties du système de base que toute
	machine de l'ensemble de compilation va installer.
	De plus, chaque machine de compilation devra avoir son nom de
	noyau défini avec <code class="varname">KERNCONF</code> dans
	<code class="filename">/etc/make.conf</code>, et la machine de
	compilation devrait tous les lister dans
	<code class="varname">KERNCONF</code>, en listant son noyau en premier.
	La machine de compilation doit avoir les fichiers de
	configuration des noyaux de chaque machine dans
	<code class="filename">/usr/src/sys/arch/conf</code>
	si elle va compiler leur noyau.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81148112"></a>24.7.2. Le système de base</h3></div></div></div><p>Maintenant que tout est configuré, vous êtes
	fin prêt pour tout compiler.  Compilez le noyau et le monde
	sur la machine de compilation comme décrit dans la <a class="xref" href="#make-buildworld" title="24.6.7.2. Compiler le nouveau système">Section 24.6.7.2, « Compiler le nouveau système »</a>, mais n'installez rien.  La
	compilation une fois terminée, allez sur la machine de
	test, et installez le noyau que vous venez juste de compiler.
	Si la machine monte <code class="filename">/usr/src</code>
	et <code class="filename">/usr/obj</code> via NFS, quand vous
	redémarrez en mode mono-utilisateur vous devrez activer le
	réseau et monter ces répertoires.  La méthode
	la plus simple est de démarrer en mode multi-utilisateur,
	puis exécutez <code class="command">shutdown now</code> pour passer en
	mode mono-utilisateur.  Une fois à ce niveau, vous pouvez
	installer le nouveau noyau et monde puis exécuter
	<code class="command">mergemaster</code> comme vous le feriez
	habituellement.  Une fois cela effectué, redémarrez
	pour retourner en mode multi-utilisateur pour cette
	machine.</p><p>Après que vous soyez certain que tout fonctionne
	correctement sur la machine de test, utilisez la même
	procédure pour installer le nouvel ensemble logiciel sur
	chacune des autres machines de l'ensemble de
	compilation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81151696"></a>24.7.3. Les logiciels portés</h3></div></div></div><p>La même idée peut être utilisée
	pour le catalogue des logiciels portés.  La
	première étape critique est de monter
	<code class="filename">/usr/ports</code> depuis la même machine vers
	toutes les machines de l'ensemble de compilation.  Vous
	pouvez alors configurer correctement
	<code class="filename">/etc/make.conf</code> pour partager les
	archives.  Vous devrez faire pointer <code class="varname">DISTDIR</code>
	sur un répertoire de partage commun dans lequel peut
	écrire n'importe quel utilisateur utilisé pour
	correspondance de l'utilisateur <code class="systemitem">root</code> par vos
	montages NFS.  Chaque machine devrait faire pointer
	<code class="varname">WRKDIRPREFIX</code> sur une répertoire de
	compilation local.  Et enfin, si vous projetez de compiler et
	distribuer des logiciels précompilés, vous
	devriez fixer <code class="varname">PACKAGES</code> sur un répertoire
	similaire à <code class="varname">DISTDIR</code>.</p></div></div><div class="footnotes"><br /><hr class="footnote-hr" /><div id="ftn.idp80588240" class="footnote"><p><a href="#idp80588240" class="para"><sup class="para">[13] </sup></a>Ceci n'est pas tout à fait vrai.  Nous
	    ne pouvons continuer à supporter les anciennes versions de
	    FreeBSD éternellement, bien que nous les supportions
	    pendant de nombreuses années.  Pour une description
	    complète de la politique de sécurité
	    actuelle pour les anciennes versions de FreeBSD, veuillez
	    consulter <a class="link" href="../../../../security/" target="_top">http://www.FreeBSD.org/security/</a>.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="dtrace"></a>Chapitre 25. DTrace</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#dtrace-synopsis">25.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#dtrace-implementation">25.2. Des différences de mise en oeuvre</a></span></dt><dt><span class="sect1"><a href="#dtrace-enable">25.3. Activer la prise en charge de DTrace</a></span></dt><dt><span class="sect1"><a href="#dtrace-using">25.4. Utiliser DTrace</a></span></dt><dt><span class="sect1"><a href="#dtrace-language">25.5. Le langage D</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Isabell Long
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:isabell121@gmail.com">isabell121@gmail.com</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dtrace-synopsis"></a>25.1. Synopsis</h2></div></div></div><a id="idp81222608" class="indexterm"></a><a id="idp81223120" class="indexterm"></a><p>DTrace, également désigné sous le nom
      de système de trace dynamique, a été
      développé par <span class="trademark">Sun</span>&#8482; comme outil de localisation de
      problèmes de performance sur des systèmes de
      production et d'avant-production.  Ce n'est, en aucune
      manière, un outil de débogage, mais un outil pour
      l'analyse système en temps réel pour localiser les
      problèmes de performance et autres.</p><p>DTrace est un outil de profilage remarquable, avec une
      impressionnante multitude de fonctions pour diagnostiquer des
      problèmes système.  Il peut également
      être utilisé avec des scripts
      pré-écrits pour pouvoir profiter de ses
      capacités.  Les utilisateurs peuvent écrire leurs
      propres utilitaires en employant le langage de DTrace, D, leur
      permettant ainsi de personnaliser leur profilage en fonction de
      leurs besoins.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ce qu'est DTrace et quelles fonctionnalités il
	  offre.</p></li><li class="listitem"><p>Les différences entre la version DTrace de
	  <span class="trademark">Solaris</span>&#8482; et celle fournie par FreeBSD.</p></li><li class="listitem"><p>Comment activer et utiliser DTrace sur FreeBSD.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les fondements d'<span class="trademark">UNIX</span>® et de FreeBSD
	  (<a class="xref" href="#basics" title="Chapitre 4. Quelques bases d'UNIX">Chapitre 4, <em>Quelques bases d'UNIX</em></a>).</p></li><li class="listitem"><p>Etre familier avec la configuration/compilation du noyau
	  (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li><li class="listitem"><p>Avoir une certaine connaissance concernant la
	  sécurité et ses liens avec FreeBSD (<a class="xref" href="#security" title="Chapitre 15. Sécurité">Chapitre 15, <em>Sécurité</em></a>).</p></li><li class="listitem"><p>Comprendre comment obtenir et recompiler les sources de
	  FreeBSD (<a class="xref" href="#updating-upgrading" title="Chapitre 24. Mise à jour de FreeBSD">Chapitre 24, <em>Mise à jour de FreeBSD</em></a>).</p></li></ul></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette fonction est considérée comme
	expérimentale.  Quelques options peuvent être
	absentes et d'autres ne fonctionneront peut-être pas du
	tout.  A terme, cette fonction sera prête pour une
	utilisation en production, et cette documentation sera
	modifiée pour en tenir compte.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dtrace-implementation"></a>25.2. Des différences de mise en oeuvre</h2></div></div></div><p>Bien que DTrace sous FreeBSD soit très semblable
      à DTrace sous <span class="trademark">Solaris</span>&#8482;, des différences
      existent et devraient être expliquées avant de
      continuer.  La différence principale que les utilisateurs
      remarqueront est que sur FreeBSD, DTrace doit être
      spécialement activé.  Il y a des options de noyau
      et des modules qui doivent être activés pour que
      DTrace fonctionne correctement.  Ces options seront
      expliquées plus tard.</p><p>Il existe une option de noyau, <code class="literal">DDB_CTF</code>,
      qui est employée pour activer la prise en charge du
      chargement des données <acronym class="acronym">CTF</acronym> depuis les
      modules de noyau et du noyau lui-même.
      <acronym class="acronym">CTF</acronym> est le format Compact C de <span class="trademark">Solaris</span>&#8482;, qui
      encapsule une forme réduite d'information de
      débogage, semblable à <acronym class="acronym">DWARF</acronym> et
      ses vénérables tables de symboles.  Ces
      données <acronym class="acronym">CTF</acronym> sont ajoutées aux
      fichiers binaires par les outils de compilation
      <code class="command">ctfconvert</code> et <code class="command">ctfmerge</code>.
      L'utilitaire <code class="command">ctfconvert</code> analyse les sections
      de débogage <acronym class="acronym">ELF</acronym>
      <acronym class="acronym">DWARF</acronym> crées par le compilateur et
      <code class="command">ctfmerge</code> fusionne les sections
      <acronym class="acronym">ELF</acronym> <acronym class="acronym">CTF</acronym> qui sont sous
      forme objet vers soit des fichiers executables, soit des
      bibliothèques partagées.  Plus d'informations sur
      comment activer cela pour le noyau et FreeBSD est à
      venir.</p><p>Quelques fournisseurs différents existent pour FreeBSD
      par rapport à <span class="trademark">Solaris</span>&#8482;.  Le plus notable est le
      fournisseur <code class="literal">dtmalloc</code>, qui permet le
      traçage de la fonction <code class="function">malloc()</code> par
      type dans le noyau FreeBSD.</p><p>Seul l'utilisateur <code class="systemitem">root</code> peut utiliser
      DTrace sur FreeBSD.  Ceci est lié aux différences
      de sécurité, <span class="trademark">Solaris</span>&#8482; dispose de quelques
      contrôles de sécurité de bas niveau qui
      n'existent pas encore sur FreeBSD.  Ainsi
      <code class="filename">/dev/dtrace/dtrace</code> est strictement
      limité uniquement à l'utilisateur
      <code class="systemitem">root</code>.</p><p>Pour terminer, le logiciel DTrace est sous la licence de
      <span class="trademark">Sun</span>&#8482;, <acronym class="acronym">CDDL</acronym>.  La <code class="literal">Common Development
      and Distribution License</code> est disponibles sous FreeBSD,
      voir le fichier
      <code class="filename">/usr/src/cddl/contrib/opensolaris/OPENSOLARIS.LICENSE</code>
      ou vous pouvez le consulter sur Internet à <code class="uri"><a class="uri" href="http://www.opensolaris.org/os/licensing" target="_top">http://www.opensolaris.org/os/licensing</a></code>.</p><p>Cette licence signifie qu'un noyau avec les options DTrace
      est toujours sous licence <acronym class="acronym">BSD</acronym>; cependant, la
      licence <acronym class="acronym">CDDL</acronym> est appliquée lorsque les
      modules sont distribués sous format binaire, ou quand les
      fichiers binaires sont chargés.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dtrace-enable"></a>25.3. Activer la prise en charge de DTrace</h2></div></div></div><p>Pour activer  DTrace, il faut ajouter les lignes suivantes
      au fichier de configuration du noyau:</p><pre class="programlisting">options         KDTRACE_HOOKS
options         DDB_CTF</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les utilisateurs de l'architecture AMD64 devraient ajouter
	la ligne suivante à leur fichier de configuration de
	noyau:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">options         KDTRACE_FRAME</pre><p xmlns="http://www.w3.org/1999/xhtml">Cette option active la fonction <acronym class="acronym">FBT</acronym>.
	 DTrace fonctionnera sans cette option, mais il y aura des
	 restrictions sur le traçage des limites des
	 fonctions.</p></div><p>Les sources doivent être recompilées et
      installées avec les options <acronym class="acronym">CTF</acronym>.  Pour
      faire cela, recompiler les sources de FreeBSD en utilisant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src</code></strong>

<code class="prompt">#</code> <strong class="userinput"><code>make WITH_CTF=1 kernel</code></strong></pre><p>Le système aura besoin d'être
    redémarré.</p><p>Après avoir redémarré et avoir
      laissé charger en mémoire le noyau, le support de
      l'interpréteur de commandes Korn devra être
      ajouté.  Ceci est necessaire car la boîte à
      outils DTrace possède quelques utilitaires
      écrits en <code class="command">ksh</code>.  Il faut installer
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/shells/ksh93/pkg-descr">shells/ksh93</a>.  Il est
      également possible de faire fonctionner ces outils avec
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/shells/pdksh/pkg-descr">shells/pdksh</a> ou <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/shells/mksh/pkg-descr">shells/mksh</a>.</p><p>Finalement, récupérer la boîte à
      outils DTrace la plus récente.  La version actuelle est
      disponible à l'adresse <code class="uri"><a class="uri" href="http://www.opensolaris.org/os/community/dtrace/" target="_top">http://www.opensolaris.org/os/community/dtrace/</a></code>.
      Un système d'installation est inclu dans l'archive;
      cependant, cette installation n'est pas obligatoire pour
      utiliser les outils fournis.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dtrace-using"></a>25.4. Utiliser DTrace</h2></div></div></div><p>Avant d'utiliser DTrace, il faut que le
      périphérique DTrace existe.  Pour charger le
      périphérique, exécutez la commande
      suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload dtraceall</code></strong></pre><p>Le système devrait maintenant supporter DTrace.
      Pour afficher toutes les sondes, l'administrateur peut
      maintenant executer la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dtrace -l | more</code></strong></pre><p>Toutes les données sortantes de cette commande sont
      passées à l'utilitaire <code class="command">more</code>,
      pour empêcher qu'elles saturent l'écran.  A ce
      niveau, DTrace peut être considéré comme
      fonctionnel.  On est maintenant prêt à passer en
      revue l'ensemble des outils disponibles.</p><p>La boîte à outils est une collection de scripts
      prêts à fonctionner avec DTrace pour rassembler
      des informations systèmes.  Il y a des scripts pour
      vérifier les fichiers ouvertes, la mémoire,
      l'usage du <acronym class="acronym">CPU</acronym> et beaucoup plus.  Il faut
      extraire les scripts avec la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>gunzip -c DTracetoolkit* | tar xvf -</code></strong></pre><p>Aller dans ce répértoire en utilisant
      <code class="command">cd</code> et changer les permissions de tous les
      fichiers, les fichiers avec les noms en miniscules, à
      <code class="literal">755</code>.</p><p>Chacun de ces scripts devra avoir son contenu
      modifié.  Ceux qui font référence à
      <code class="filename">/usr/bin/ksh</code> devront pointer sur
      <code class="filename">/usr/local/bin/ksh</code>, les autres qui
      utilisent <code class="filename">/usr/bin/sh</code> devront être
      modifiés pour qu'ils utilisent
      <code class="filename">/bin/sh</code>, et finalement ceux qui utilisent
      <code class="filename">/usr/bin/perl</code>, devront pointer sur
      <code class="filename">/usr/local/bin/perl</code>.</p><div xmlns="" class="important"><h3 class="admontitle">Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">A ce point il est prudent de rappeler au lecteur
	que le support de DTrace sous FreeBSD <span class="emphasis"><em>n'est pas
	complet</em></span> et est encore
	<span class="emphasis"><em>expérimental</em></span>.  Un bon nombre de
	ces scripts ne fonctionneront pas, soit parce qu'ils sont trop
	spécifiques à <span class="trademark">Solaris</span>&#8482;, soit parce qu'ils
	utilisent des sondes qui ne sont pas encore
	supportées.</p></div><p>Au moment de l'écriture de ces lignes, seuls deux des
      scripts de la boîte à outils DTrace sont
      totalement supportés sous FreeBSD: les outils
      <code class="filename">hotkernel</code> et
      <code class="filename">procsystime</code>.  Ce sont ces deux outils que
      nous détaillerons dans la suite de cette section.</p><p>L'outil <code class="filename">hotkernel</code> est censé
      identifier quel fonction utilise le plus de temps noyau.
      Fonctionnant normalement, il affichera une liste comparable
      à la suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./hotkernel</code></strong>
Sampling... Hit Ctrl-C to end.</pre><p>L'administrateur système doit utiliser la combinaison
      de touches <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span> pour arrêter le processus.  Le script
      affichera une liste de fonctions du noyau et des informations de
      temps, et les triera dans l'ordre croissant du temps
      consommé:</p><pre class="screen">kernel`_thread_lock_flags                                   2   0.0%
0xc1097063                                                  2   0.0%
kernel`sched_userret                                        2   0.0%
kernel`kern_select                                          2   0.0%
kernel`generic_copyin                                       3   0.0%
kernel`_mtx_assert                                          3   0.0%
kernel`vm_fault                                             3   0.0%
kernel`sopoll_generic                                       3   0.0%
kernel`fixup_filename                                       4   0.0%
kernel`_isitmyx                                             4   0.0%
kernel`find_instance                                        4   0.0%
kernel`_mtx_unlock_flags                                    5   0.0%
kernel`syscall                                              5   0.0%
kernel`DELAY                                                5   0.0%
0xc108a253                                                  6   0.0%
kernel`witness_lock                                         7   0.0%
kernel`read_aux_data_no_wait                                7   0.0%
kernel`Xint0x80_syscall                                     7   0.0%
kernel`witness_checkorder                                   7   0.0%
kernel`sse2_pagezero                                        8   0.0%
kernel`strncmp                                              9   0.0%
kernel`spinlock_exit                                       10   0.0%
kernel`_mtx_lock_flags                                     11   0.0%
kernel`witness_unlock                                      15   0.0%
kernel`sched_idletd                                       137   0.3%
0xc10981a5                                              42139  99.3%</pre><p>Ce script fonctionnera aussi avec des modules de noyau.
      Pour utiliser ce fonction, exécutez le script avec
      l'option <code class="option">-m</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./hotkernel -m</code></strong>
Sampling... Hit Ctrl-C to end.
^C
MODULE                                                  COUNT   PCNT
0xc107882e                                                  1   0.0%
0xc10e6aa4                                                  1   0.0%
0xc1076983                                                  1   0.0%
0xc109708a                                                  1   0.0%
0xc1075a5d                                                  1   0.0%
0xc1077325                                                  1   0.0%
0xc108a245                                                  1   0.0%
0xc107730d                                                  1   0.0%
0xc1097063                                                  2   0.0%
0xc108a253                                                 73   0.0%
kernel                                                    874   0.4%
0xc10981a5                                             213781  99.6%</pre><p>Le script <code class="filename">procsystime</code> capture et
      affiche le temps consommé en appels système pour
      un <acronym class="acronym">PID</acronym> ou un processus donné.  Dans
      l'exemple suivant, un nouvel exemplaire de
      <code class="filename">/bin/csh</code> a été lancé.
      L'outil <code class="filename">procsystime</code> a été
      exécuté et laissé en attente pendant que
      quelques commandes été tapées sur les
      autres incarnations de <code class="command">csh</code>.  Voici le
      résultat de ce test:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>./procsystime -n csh</code></strong>
Tracing... Hit Ctrl-C to end...
^C

Elapsed Times for processes csh,

         SYSCALL          TIME (ns)
          getpid               6131
       sigreturn               8121
           close              19127
           fcntl              19959
             dup              26955
         setpgid              28070
            stat              31899
       setitimer              40938
           wait4              62717
       sigaction              67372
     sigprocmask             119091
    gettimeofday             183710
           write             263242
          execve             492547
           ioctl             770073
           vfork            3258923
      sigsuspend            6985124
            read         3988049784</pre><p>Comme indiqué, l'appel système
      <code class="function">read()</code> semble prendre le plus de temps en
      nanosecondes, alors que l'appel système
      <code class="function">getpid()</code> prend très peu de
      temps.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dtrace-language"></a>25.5. Le langage D</h2></div></div></div><p>La boîte à outils DTrace comprend plusieurs
      scripts écrits dans le langage spécifique de
      DTrace.  Ce langage est appelé le <span class="quote">« <span class="quote">langage
      D</span> »</span> dans la documentation de <span class="trademark">Sun</span>&#8482;, et est très
      proche du C++.  Une étude en profondeur de ce langage
      sort du cadre de ce document.  Il est abordé de
      manière très détaillée à
      l'adresse <code class="uri"><a class="uri" href="http://wikis.sun.com/display/DTrace/Documentation" target="_top">http://wikis.sun.com/display/DTrace/Documentation</a></code>.</p></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-communication"></a>Partie IV. Réseau</h1></div></div></div><div class="partintro"><div xmlns=""></div><p>FreeBSD est un des systèmes d'exploitation les plus
	utilisé pour les serveurs réseau à hautes
	performances.  Les chapitres de cette partie abordent:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>les communications série</p></li><li class="listitem"><p>PPP et PPP sur Ethernet</p></li><li class="listitem"><p>le courrier électronique</p></li><li class="listitem"><p>l'exécution de serveurs réseau</p></li><li class="listitem"><p>les coupe-feux</p></li><li class="listitem"><p>d'autres sujets réseau avancés</p></li></ul></div><p>Ces chapitres sont destinés à être lus
	au moment où vous en avez besoin.  Vous n'avez pas
	à les lire suivant un ordre particulier, ni à
	les lire tous avant de pouvoir utiliser FreeBSD dans un
	environnement réseau.</p><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="chapter"><a href="#serialcomms">26. Serial Communications ** Traduction en Cours **</a></span></dt><dd><dl><dt><span class="sect1"><a href="#serial-synopsis">26.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#serial">26.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#term">26.3. Terminals</a></span></dt><dt><span class="sect1"><a href="#dialup">26.4. Dial-in Service</a></span></dt><dt><span class="sect1"><a href="#dialout">26.5. Dial-out Service</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">26.6. Setting Up the Serial Console</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ppp-and-slip">27. PPP et SLIP</a></span></dt><dd><dl><dt><span class="sect1"><a href="#ppp-and-slip-synopsis">27.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#userppp">27.2. Using User PPP ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#ppp">27.3. Utiliser PPP intégré au noyau</a></span></dt><dt><span class="sect1"><a href="#pppoe">27.4. Utiliser PPP sur Ethernet (PPPoE)</a></span></dt><dt><span class="sect1"><a href="#pppoa">27.5. Utiliser <span class="application">PPP</span> sur ATM (PPPoA)</a></span></dt><dt><span class="sect1"><a href="#slip">27.6. Utiliser SLIP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#mail">28. Courrier électronique</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mail-synopsis">28.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#mail-using">28.2. Utilisation du courrier électronique</a></span></dt><dt><span class="sect1"><a href="#sendmail">28.3. Configuration de <span class="application">sendmail</span></a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">28.4. Changer votre agent de transfert de courrier</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">28.5. Dépannage</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">28.6. Sujets avancés</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">28.7. SMTP avec UUCP</a></span></dt><dt><span class="sect1"><a href="#outgoing-only">28.8. Configuration pour l'envoi seul</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">28.9. Utiliser le courrier électronique avec une connexion
      temporaire</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">28.10. Authentification SMTP</a></span></dt><dt><span class="sect1"><a href="#mail-agents">28.11. Clients de messagerie</a></span></dt><dt><span class="sect1"><a href="#mail-fetchmail">28.12. Utiliser fetchmail</a></span></dt><dt><span class="sect1"><a href="#mail-procmail">28.13. Utiliser procmail</a></span></dt></dl></dd><dt><span class="chapter"><a href="#network-servers">29. Serveurs réseau</a></span></dt><dd><dl><dt><span class="sect1"><a href="#network-servers-synopsis">29.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#network-inetd">29.2. Le &#8220;super-serveur&#8221;
      <span class="application">inetd</span></a></span></dt><dt><span class="sect1"><a href="#network-nfs">29.3. Système de fichiers réseau (NFS)</a></span></dt><dt><span class="sect1"><a href="#network-nis">29.4. Services d'information réseau (NIS/YP)</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">29.5. Configuration réseau automatique (DHCP)</a></span></dt><dt><span class="sect1"><a href="#network-dns">29.6. Serveurs de noms (<acronym class="acronym">DNS</acronym>)</a></span></dt><dt><span class="sect1"><a href="#network-apache">29.7. Serveur HTTP Apache</a></span></dt><dt><span class="sect1"><a href="#network-ftp">29.8. Protocole de transfert de fichiers (FTP)</a></span></dt><dt><span class="sect1"><a href="#network-samba">29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</a></span></dt><dt><span class="sect1"><a href="#network-ntp">29.10. Synchronisation de l'horloge avec NTP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#firewalls">30. Firewalls ** Traduction en Cours **</a></span></dt><dd><dl><dt><span class="sect1"><a href="#firewalls-intro">30.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#firewalls-concepts">30.2. Firewall Concepts</a></span></dt><dt><span class="sect1"><a href="#firewalls-apps">30.3. Firewall Packages</a></span></dt><dt><span class="sect1"><a href="#firewalls-pf">30.4. The OpenBSD Packet Filter (PF) and
      <acronym class="acronym">ALTQ</acronym></a></span></dt><dt><span class="sect1"><a href="#firewalls-ipf">30.5. The IPFILTER (IPF) Firewall</a></span></dt><dt><span class="sect1"><a href="#firewalls-ipfw">30.6. IPFW</a></span></dt></dl></dd><dt><span class="chapter"><a href="#advanced-networking">31. Administration réseau avancée</a></span></dt><dd><dl><dt><span class="sect1"><a href="#advanced-networking-synopsis">31.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#network-routing">31.2. Passerelles et routes</a></span></dt><dt><span class="sect1"><a href="#network-wireless">31.3. Réseau sans fil</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">31.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">31.5. Bridging</a></span></dt><dt><span class="sect1"><a href="#network-diskless">31.6. Système sans disque dur</a></span></dt><dt><span class="sect1"><a href="#network-isdn">31.7. ISDN</a></span></dt><dt><span class="sect1"><a href="#network-natd">31.8. Translation d'adresses</a></span></dt><dt><span class="sect1"><a href="#network-plip">31.9. IP sur liaison parallèle (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">31.10. IPv6</a></span></dt><dt><span class="sect1"><a href="#network-atm">31.11. ATM (<span class="quote">« <span class="quote">Asynchronous Transfer Mode</span> »</span>)</a></span></dt></dl></dd></dl></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialcomms"></a>Chapitre 26. Serial Communications ** Traduction en Cours **</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#serial-synopsis">26.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#serial">26.2. Introduction</a></span></dt><dt><span class="sect1"><a href="#term">26.3. Terminals</a></span></dt><dt><span class="sect1"><a href="#dialup">26.4. Dial-in Service</a></span></dt><dt><span class="sect1"><a href="#dialout">26.5. Dial-out Service</a></span></dt><dt><span class="sect1"><a href="#serialconsole-setup">26.6. Setting Up the Serial Console</a></span></dt></dl></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial-synopsis"></a>26.1. Synopsis</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serial"></a>26.2. Introduction</h2></div></div></div><p></p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-terminology"></a>26.2.1. Terminology</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serial-cables-ports"></a>26.2.2. Cables and Ports</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables"></a>26.2.2.1. Cables</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-cables-null"></a>26.2.2.1.1. Null-modem Cables</h5></div></div></div><p></p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="term"></a>26.3. Terminals</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-uses"></a>26.3.1. Uses and Types of Terminals</h3></div></div></div><p></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-config"></a>26.3.2. Configuration</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-etcttys"></a>26.3.2.1. Adding an Entry to <code class="filename">/etc/ttys</code></h4></div></div></div><p></p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-hup"></a>26.3.2.2. Force <code class="command">init</code> to Reread
	  <code class="filename">/etc/ttys</code></h4></div></div></div><p></p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="term-debug"></a>26.3.3. Troubleshooting Your Connection</h3></div></div></div><p></p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialup"></a>26.4. Dial-in Service</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="dialout"></a>26.5. Dial-out Service</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="serialconsole-setup"></a>26.6. Setting Up the Serial Console</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-tips"></a>26.6.1. Tips for the Serial Console</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="serialconsole-ddb"></a>26.6.1.1. Entering the DDB Debugger from the Serial Line</h4></div></div></div><p></p></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-and-slip"></a>Chapitre 27. PPP et SLIP</h2></div><div><span class="authorgroup">Restructuré, réorganisé, et mis à
	  jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#ppp-and-slip-synopsis">27.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#userppp">27.2. Using User PPP ** Traduction en Cours **</a></span></dt><dt><span class="sect1"><a href="#ppp">27.3. Utiliser PPP intégré au noyau</a></span></dt><dt><span class="sect1"><a href="#pppoe">27.4. Utiliser PPP sur Ethernet (PPPoE)</a></span></dt><dt><span class="sect1"><a href="#pppoa">27.5. Utiliser <span class="application">PPP</span> sur ATM (PPPoA)</a></span></dt><dt><span class="sect1"><a href="#slip">27.6. Utiliser SLIP</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp-and-slip-synopsis"></a>27.1. Synopsis</h2></div></div></div><a id="ppp-ppp" class="indexterm"></a><a id="ppp-slip" class="indexterm"></a><p>FreeBSD dispose de nombreuses façons pour relier un
      ordinateur à un autre.  Pour mettre en place un
      réseau ou établir une connexion Internet par
      l'intermédiaire d'un modem, ou pour autoriser d'autres
      à le faire par votre intermédiaire, il est
      nécessaire d'utiliser PPP ou SLIP.  Ce chapitre
      décrit la configuration en détail de ces services
      de communication par modem.</p><p>Après la lecture de ce chapitre, vous saurez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment configurer PPP en mode utilisateur.</p></li><li class="listitem"><p>Comment configurer PPP intégré au
	  noyau.</p></li><li class="listitem"><p>Comment configurer <acronym class="acronym">PPPoE</acronym> (PPP sur
	  Ethernet).</p></li><li class="listitem"><p>Comment configurer <acronym class="acronym">PPPoA</acronym> (PPP sur
	  ATM).</p></li><li class="listitem"><p>Comment configurer et utiliser un client et un serveur
	  SLIP.</p></li></ul></div><a id="ppp-ppp-user" class="indexterm"></a><a id="ppp-ppp-kernel" class="indexterm"></a><a id="ppp-ppp-ethernet" class="indexterm"></a><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Etre familier avec la terminologie réseau de
	base.</p></li><li class="listitem"><p>Comprendre les bases, le but d'une connexion entrante
	  par modem, et PPP et/ou SLIP.</p></li></ul></div><p>Vous pouvez vous demander quelle est la principale
      différence entre PPP en mode utilisateur et PPP
      intégré au noyau.  La réponse est simple:
      PPP en mode utilisateur traite les données entrantes et
      sortantes en dehors du noyau.  C'est coûteux en terme de copie
      de donnée entre le noyau et l'espace utilisateur mais
      permet l'implémentation de plus de fonctionnalités
      PPP.  PPP en mode utilisateur utilise le
      périphérique <code class="filename">tun</code> pour
      communiquer avec le monde extérieur alors que PPP
      intégré au noyau utilise le
      périphérique <code class="filename">ppp</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans ce chapitre, le programme utilisateur PPP sera
      simplement appelé <span class="application">ppp</span>,
      à moins qu'il faille explicitement faire la distinction
      entre lui et d'autres logiciels PPP comme
      <span class="application">pppd</span>.  Sauf indications contraires,
      toutes les commandes mentionnées dans ce chapitre doivent
      être exécutées par le super-utilisateur
      <code class="systemitem">root</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="userppp"></a>27.2. Using User PPP ** Traduction en Cours **</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ppp"></a>27.3. Utiliser PPP intégré au noyau</h2></div><div><span class="authorgroup">Contribution originale de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gennady B.</span> <span class="surname">Sorokopud</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Robert</span> <span class="surname">Huff</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81444560"></a>27.3.1. Configurer PPP intégré au noyau</h3></div></div></div><a id="idp81445200" class="indexterm"></a><p>Avant de configurer PPP sur votre machine, vérifiez
	que <code class="command">pppd</code> est bien dans le répertoire
	<code class="filename">/usr/sbin</code> et que le
	répertoire <code class="filename">/etc/ppp</code> existe.</p><p>La commande <code class="command">pppd</code> peut fonctionner selon
	deux modes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Comme &#8220;client&#8221; &#8212; si vous
	  désirez connecter votre machine au monde
	  extérieur via une liaison PPP série ou un
	  modem.</p></li><li class="listitem"><a id="idp81453904" class="indexterm"></a><p>Comme &#8220;serveur&#8221; &#8212; si votre machine
	  est sur le réseau, et sert à y connecter
	  d'autres ordinateurs avec PPP.</p></li></ol></div><p>Dans les deux cas, vous devrez renseigner un fichier
	d'options (<code class="filename">/etc/ppp/options</code> ou
	<code class="filename">~/.ppprc</code> si vous avez plus d'un
	utilisateur sur votre machine utilisant PPP).</p><p>Vous aurez également besoin d'un logiciel
	&#8220;modem/série&#8221; (de préférence
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/kermit/pkg-descr">comms/kermit</a>), pour
	appeler et établir la connexion avec la machine
	distante.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81457360"></a>27.3.2. Utiliser <code class="command">pppd</code> comme client</h3></div><div><span class="authorgroup">Basé sur des informations fournies
	      par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Trev</span> <span class="surname">Roydhouse</span></span>. </span></div></div></div><a id="idp81460304" class="indexterm"></a><a id="idp81461072" class="indexterm"></a><p>Le fichier <code class="filename">/etc/ppp/options</code> suivant
	pourrait être utilisé pour se connecter à la
	liaison PPP d'un concentrateur Cisco:</p><pre class="programlisting">crtscts         # contrôle de flux matériel
modem           # liaison par modem
noipdefault     # adresse IP affectée par le serveur PPP distant
                # si la machine distante ne vous donne pas d'adresse
                # IP lors de la négociation IPCP, retirez cette option
passive         # attendre les paquets LCP
domain ppp.foo.com      # mettre ici votre nom de domaine

:&lt;remote_ip&gt;    # mettre ici l'adresse IP de la machine PPP distante
                # elle servira à router des paquets via la liaison PPP
                # si vous n'avez pas précisé l'option noipdefault
                # changez cette ligne en &lt;ip_locale&gt;:&lt;ip_distante&gt;

defaultroute    # mettre cette ligne si vous voulez que le serveur PPP soit
                # votre routeur par défaut</pre><p>Pour se connecter:</p><a id="idp81463120" class="indexterm"></a><a id="idp81463632" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Appelez la machine distante en utilisant
	    <span class="application">kermit</span> (ou un autre programme
	    pour modem), puis entrez votre nom d'utilisateur et mot de
	    passe (ou ce qu'il faut pour activer PPP sur la machine
	    distante).</p></li><li class="step"><p>Quittez <span class="application">kermit</span> (sans
	    raccrocher la ligne).</p></li><li class="step"><p>Entrez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/src/usr.sbin/pppd.new/pppd /dev/tty01 19200</code></strong></pre><p>Assurez-vous d'utiliser la vitesse et le nom de
	    périphérique adéquats.</p></li></ol></div><p>Votre ordinateur est maintenant connecté via PPP.
	Si la connexion échoue, vous pouvez ajouter l'option
	<code class="option">debug</code> au fichier
	<code class="filename">/etc/ppp/options</code>, et consulter les
	messages sur la console pour tracer le problème.</p><p>La procédure <code class="filename">/etc/ppp/pppup</code>
	ci-dessous effectuera automatiquement ces trois
	étapes:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de kermit, PID=' ${pid}
        kill -9 ${pid}
fi

ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.dial
pppd /dev/tty01 19200</pre><a id="idp81471440" class="indexterm"></a><p><code class="filename">/etc/ppp/kermit.dial</code> est une
	procédure <span class="application">kermit</span> qui appelle
	et fournit toutes les informations d'authentification
	nécessaires à la machine distante (un exemple
	d'une telle procédure est donné à la fin de
	ce document).</p><p>Utilisez la procédure
	<code class="filename">/etc/ppp/pppdown</code> suivante pour terminer
	la session PPP et vous déconnecter:</p><pre class="programlisting">#!/bin/sh
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ X${pid} != "X" ] ; then
        echo 'arrêt de pppd, PID=' ${pid}
        kill -TERM ${pid}
fi

ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de kermit, PID=' ${pid}
        kill -9 ${pid}
fi

/sbin/ifconfig ppp0 down
/sbin/ifconfig ppp0 delete
kermit -y /etc/ppp/kermit.hup
/etc/ppp/ppptest</pre><p>Vérifiez si <code class="command">pppd</code> tourne toujours
	en lançant la procédure
	<code class="filename">/usr/etc/ppp/ppptest</code>, qui devrait
	ressembler à ceci:</p><pre class="programlisting">#!/bin/sh
pid=`ps ax| grep pppd |grep -v grep|awk '{print $1;}'`
if [ X${pid} != "X" ] ; then
        echo 'pppd actif: PID=' ${pid-NONE}
else
        echo 'Pas de pppd en cours d'exécution.'
fi
set -x
netstat -n -I ppp0
ifconfig ppp0</pre><p>Pour raccrocher la ligne, exécutez
	<code class="filename">/etc/ppp/kermit.hup</code>, qui devrait
	contenir:</p><pre class="programlisting">set line /dev/tty01	; mettre ici le périphérique pour votre modem
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
echo \13
exit</pre><p>Voici une autre méthode qui utilise
	<code class="command">chat</code> au lieu de
	<code class="command">kermit</code>.</p><p>Les deux fichiers suivants suffisent à
	établir une connexion avec
	<code class="command">pppd</code>.</p><p><code class="filename">/etc/ppp/options</code>:</p><pre class="programlisting">/dev/cuaa1 115200

crtscts		# contrôle de flux matériel
modem		# liaison par modem
connect "/usr/bin/chat -f /etc/ppp/login.chat.script"
noipdefault	# adresse IP affectée par le serveur PPP distant
	        # si la machine distante ne vous donne pas d'adresse
	        # IP lors de la négociation IPCP, retirer cette option
passive	        # attendre les paquets LCP
domain &lt;your.domain&gt;	# mettre ici votre nom de domaine

:	        # mettre ici l'adresse IP de la machine PPP distante
	        # elle servira à router des paquets via la liaison PPP
	        # si vous n'avez pas précisé l'option noipdefault
	        # modifier cette ligne en &lt;ip_locale&gt;:&lt;ip_distante&gt;

defaultroute	# mettre cette ligne si vous voulez que le serveur PPP soit
	        # votre routeur par défaut</pre><p><code class="filename">/etc/ppp/login.chat.script</code>:</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ce qui suit doit être tapé sur une seule
	  ligne.</p></div><pre class="programlisting">ABORT BUSY ABORT 'NO CARRIER' "" AT OK ATDT&lt;numéro_de_téléphone&gt;
  CONNECT "" TIMEOUT 10 ogin:-\\r-ogin: &lt;nom_d_utilisateur&gt;
  TIMEOUT 5 sword: &lt;mot_de_passe&gt;</pre><p>Une fois que ces fichiers sont installés et
	correctement modifiés, tout ce dont vous avez besoin de
	faire est de lancer <code class="command">pppd</code>, comme
	suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pppd</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81491920"></a>27.3.3. Utiliser <code class="command">pppd</code> comme serveur</h3></div></div></div><p>Le contenu du fichier
	<code class="filename">/etc/ppp/options</code> devrait être
	semblable à ce qui suit:</p><pre class="programlisting">crtscts                         # contrôle de flux matériel
netmask 255.255.255.0           # masque de sous-réseau (facultatif)
192.114.208.20:192.114.208.165  # adresses IP des machines locales et distantes
                                # l'adresse locale ne doit pas être la même que
                                # celle que vous avez assignée à l'interface
                                # Ethernet (ou autre) de la machine.
                                # l'adresse IP de la machine distante est
                                # l'adresse IP qui lui sera affectée
domain ppp.foo.com              # votre nom de domaine
passive                         # attendre LCP
modem                           # liaison modem</pre><p>La procédure <code class="filename">/etc/ppp/pppserv</code>
	ci-dessous demandera à <span class="application">pppd</span>
	de se comporter comme un serveur:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de kermit, PID=' ${pid}
        kill -9 ${pid}
fi

# réinitialiser l'interface ppp
ifconfig ppp0 down
ifconfig ppp0 delete

# activer le mode réponse automatique
kermit -y /etc/ppp/kermit.ans

# lancer ppp
pppd /dev/tty01 19200</pre><p>Utilisez cette procédure
	<code class="filename">/etc/ppp/pppservdown</code> pour arrêter
	le serveur:</p><pre class="programlisting">#!/bin/sh
ps ax |grep pppd |grep -v grep
pid=`ps ax |grep pppd |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de pppd, PID=' ${pid}
        kill ${pid}
fi
ps ax |grep kermit |grep -v grep
pid=`ps ax |grep kermit |grep -v grep|awk '{print $1;}'`
if [ "X${pid}" != "X" ] ; then
        echo 'arrêt de kermit, PID=' ${pid}
        kill -9 ${pid}
fi
ifconfig ppp0 down
ifconfig ppp0 delete

kermit -y /etc/ppp/kermit.noans</pre><p>La procédure <span class="application">kermit</span>
	ci-dessous (<code class="filename">/etc/ppp/kermit.ans</code>) activera
	ou désactivera le mode réponse automatique de
	votre modem:</p><pre class="programlisting">set line /dev/tty01
set speed 19200
set file type binary
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none

pau 1
out +++
inp 5 OK
out ATH0\13
inp 5 OK
echo \13
out ATS0=1\13   ; remplacer cela par ATS0=0\13 si vous voulez désactiver
                ; le mode réponse automatique
inp 5 OK
echo \13
exit</pre><p>Une procédure nommée
	<code class="filename">/etc/ppp/kermit.dial</code> est utilisée
	pour appeler et s'authentifier sur la machine distante.  Vous
	devrez l'adapter à vos besoins.  Mettez-y votre nom
	d'utilisateur et votre mot de passe; vous devrez
	également modifier les entrées en fonctions des
	réponses que vous envoient votre modem et la machine
	distante.</p><pre class="programlisting">;
; mettre ici la liaison série à laquelle est raccordé le modem:
;
set line /dev/tty01
;
; mettre ici la vitesse du modem:
;
set speed 19200
set file type binary            ; transfert 8 bits
set file names literal
set win 8
set rec pack 1024
set send pack 1024
set block 3
set term bytesize 8
set command bytesize 8
set flow none
set modem hayes
set dial hangup off
set carrier auto                ; puis SET CARRIER si nécessaire,
set dial display on             ; puis SET DIAL si nécessaire,
set input echo on
set input timeout proceed
set input case ignore
def \%x 0                       ; compteur d'ouverture de session
goto slhup

:slcmd                          ; mettre le modem en mode commande
echo Put the modem in command mode.
clear                           ; vider le tampon d'entrée
pause 1
output +++                      ; séquence d'échappement Hayes
input 1 OK\13\10                ; attendre OK
if success goto slhup
output \13
pause 1
output at\13
input 1 OK\13\10
if fail goto slcmd              ; si le modem ne répond pas OK, réessayer

:slhup                          ; raccrocher la ligne
clear                           ; vider le tampon d'entrée
pause 1
echo Hanging up the phone.
output ath0\13                  ; commande Hayes pour raccrocher
input 2 OK\13\10
if fail goto slcmd              ; si pas de réponse OK, passer le modem en mode commande

:sldial                         ; composer le numéro
pause 1
echo Dialing.
output atdt9,550311\13\10       ; mettre ici le numéro de téléphone
assign \%x 0                    ; mettre le compteur à zéro

:look
clear                           ; vider le tampon d'entrée
increment \%x                   ; compter les secondes
input 1 {CONNECT }
if success goto sllogin
reinput 1 {NO CARRIER\13\10}
if success goto sldial
reinput 1 {NO DIALTONE\13\10}
if success goto slnodial
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 60 goto look
else goto slhup

:sllogin                        ; ouverture de session
assign \%x 0                    ; mettre le compteur à zéro
pause 1
echo Looking for login prompt.

:slloop
increment \%x                   ; compter les secondes
clear                           ; vider le tampon d'entrée
output \13
;
; put your expected login prompt here:
;
input 1 {Username: }
if success goto sluid
reinput 1 {\255}
if success goto slhup
reinput 1 {\127}
if success goto slhup
if &lt; \%x 10 goto slloop         ; essayer 10 fois d'obtenir une invite de session
else goto slhup                 ; raccrocher et recommencer après 10 échecs

:sluid
;
; mettre ici votre nom d'utilisateur:
;
output nom-d-utilisateur-ppp\13
input 1 {Password: }
;
; mettre ici votre mot de passe:
;
output mot-de-passe-ppp\13
input 1 {Entering SLIP mode.}
echo
quit

:slnodial
echo \7Pas de tonalité.  Vérifiez votre ligne téléphonique!\7
exit 1

; local variables:
; mode: csh
; comment-start: "; "
; comment-start-skip: "; "
; end:</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoe"></a>27.4. Utiliser PPP sur Ethernet (PPPoE)</h2></div><div><span class="authorgroup">Contribution de (d'après
	    http://node.to/freebsd/how-tos/how-to-freebsd-pppoe.html)<span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><a id="idp81502416" class="indexterm"></a><a id="idp81503184" class="indexterm"></a><p>Cette section décrit comment configurer PPP sur Ethernet
      (<acronym class="acronym">PPPoE</acronym>).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81505104"></a>27.4.1. Configuration du noyau</h3></div></div></div><p>Il n'est plus du tout nécessaire de configurer le
	noyau pour utiliser PPPoE.  Si le support netgraph
	nécessaire n'est pas compilé dans le noyau, il
	sera chargé dynamiquement par
	<span class="application">ppp</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81506640"></a>27.4.2. Renseigner <code class="filename">ppp.conf</code></h3></div></div></div><p>Voici un exemple de fichier <code class="filename">ppp.conf</code>
	opérationnel:</p><pre class="programlisting">default:
  set log Phase tun command # vous pouvez détailler plus les traces si vous le désirez
  set ifaddr 10.0.0.1/0 10.0.0.2/0

nom_du_fournisseur_d'accès:
  set device PPPoE:<em class="replaceable"><code>xl1</code></em> # remplacez xl1 par votre périphérique Ethernet
  set authname VOTRENOMDUTILISATEUR
  set authkey VOTREMOTDEPASSE
  set dial
  set login
  add default HISADDR</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81513424"></a>27.4.3. Exécuter <span class="application">ppp</span></h3></div></div></div><p>En tant que <code class="systemitem">root</code>, vous pouvez
	lancer:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ppp -ddial nom_du_fournisseur_d'accès</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81516240"></a>27.4.4. Lancer <span class="application">ppp</span> au
	démarrage</h3></div></div></div><p>Ajoutez ce qui suit à votre fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_nat="YES"	# si vous voulez activer NAT pour votre réseau local, sinon NO
ppp_profile="nom_du_fournisseur_d'accès"</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81518544"></a>27.4.5. Utilisation d'une étiquette de service PPPoE</h3></div></div></div><p>Parfois il sera nécessaire d'utiliser une
	étiquette de service pour établir votre
	connexion.  Les étiquettes de service sont
	employées pour faire la distinction entre
	différents serveurs PPPoE attachés à un
	réseau donné.</p><p>Vous devez avoir l'information concernant
	l'étiquette de service dans la documentation fournie
	par votre fournisseur d'accès.  Si vous ne pouvez la
	trouver, contactez le support technique de votre fournisseur
	d'accès Internet.</p><p>En dernier ressort, vous pourrez essayer la méthode
	suggérée par le programme <a class="link" href="http://www.roaringpenguin.com/pppoe/" target="_top">Roaring Penguin
	PPPoE</a> qui peut-être trouvé dans le <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés</a>.
	Gardez cependant à l'esprit, que cela peut
	déprogrammer votre modem et le rendre inutilisable,
	aussi réfléchissez à deux fois avant de
	le faire.  Installez simplement le logiciel fourni avec le
	modem par votre fournisseur d'accès.  Ensuite
	accédez au menu <span class="guimenu">Système</span> du
	programme.  Le nom de votre profil devrait y figurer.  C'est
	habituellement le nom du <span class="emphasis"><em>FAI</em></span>.</p><p>Le nom du profil (étiquette de service) sera
	utilisé dans l'entrée de configuration PPPoE
	dans le fichier <code class="filename">ppp.conf</code> dans la partie
	fournisseur d'accès de la commande <code class="command">set
	device</code> (voir la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> pour plus
	de détails).  Cela devrait ressembler à
	ceci:</p><pre class="programlisting">set device PPPoE:<em class="replaceable"><code>xl1</code></em>:<em class="replaceable"><code>FAI</code></em></pre><p>N'oubliez pas de changer <em class="replaceable"><code>xl1</code></em>
	pour le périphérique correct correspondant
	à votre carte Ethernet.</p><p>N'oubliez pas de changer <em class="replaceable"><code>FAI</code></em>
	par le profil que vous avez déterminé
	ci-dessus.</p><p>Pour une information supplémentaire,
	consultez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://renaud.waldura.com/doc/freebsd/pppoe/" target="_top">Cheaper
	    Broadband with FreeBSD on DSL</a> par Renaud
	    Waldura.</p></li><li class="listitem"><p><a class="link" href="http://www.ruhr.de/home/nathan/FreeBSD/tdsl-freebsd.html" target="_top">
	    Nutzung von T-DSL und T-Online mit FreeBSD</a>
	    par Udo Erdelhoff (en allemand).</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ppp-3com"></a>27.4.6. PPPoE avec un modem ADSL <span class="trademark">3Com</span>® <span class="trademark">HomeConnect</span>® Dual Link</h3></div></div></div><p>Ce modem ne respecte pas la <a class="link" href="http://www.faqs.org/rfcs/rfc2516.html" target="_top">RFC 2516</a>
	(<span class="emphasis"><em>A Method for transmitting PPP over Ethernet
	(PPPoE)</em></span>, rédigée par L. Mamakos, K.
	Lidl, J. Evarts, D. Carrel, D. Simone, et R. Wheeler).  Au
	lieu de cela des codes différents pour les types de
	paquets sont utilisés pour les frames Ethernet.
	Veuillez vous plaindre auprès de <a class="link" href="http://www.3com.com/" target="_top">3Com</a> si vous pensez que le
	modem devrait respecter la spécification PPPoE.</p><p>Afin de permettre à FreeBSD de communiquer avec ce
	périphérique, un paramètre sysctl doit
	être configuré.  Cela peut être
	effectué de manière automatique au
	démarrage en renseignant le fichier
	<code class="filename">/etc/sysctl.conf</code>:</p><pre class="programlisting">net.graph.nonstandard_pppoe=1</pre><p>ou peut être paramétré pour prendre
	immédiatement effet avec la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.graph.nonstandard_pppoe=1</code></strong></pre><p>Malheureusement, parce que c'est un paramétrage
	concernant l'intégralité du système, il
	n'est pas possible de communiquer en même temps avec un
	client ou un serveur PPPoE normal et un modem ADSL <span class="trademark">3Com</span>®
	<span class="trademark">HomeConnect</span>®.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pppoa"></a>27.5. Utiliser <span class="application">PPP</span> sur ATM (PPPoA)</h2></div></div></div><a id="idp81547344" class="indexterm"></a><a id="idp81548112" class="indexterm"></a><p>Ce qui suit décrit comment configurer PPP sur ATM
      (PPPoA).  PPPoA est très populaire parmi les fournisseurs
      d'accès DSL européens.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81549648"></a>27.5.1. Utiliser PPPoA avec le modem Alcatel <span class="trademark">SpeedTouch</span>&#8482;
	USB</h3></div></div></div><p>Le support PPPoA pour ce périphérique est
	fourni sous la forme d'un logiciel porté sous FreeBSD car
	le &#8220;firmware&#8221; est distribué sous l'<a class="link" href="http://www.speedtouchdsl.com/disclaimer_lx.htm" target="_top">accord de
	licence d'Alcatel</a> et ne peut être
	redistribué librement avec le système de base de
	FreeBSD.</p><p>Pour installer le logiciel, utilisez simplement le <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés</a>.
	Installez le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a> et suivez les instructions
	fournies avec.</p><p>Comme de nombreux périphériques, le modem
	USB Alcatel <span class="trademark">SpeedTouch</span>&#8482; a besoin de charger un
	&#8220;firmware&#8221; à partir de l'ordinateur
	hôte pour opérer correctement.  Il est possible
	d'automatiser ce processus sous FreeBSD de manière
	à ce que ce transfert ait lieu dès que le
	périphérique est branché dans un port
	USB.  L'information suivante peut être ajoutée au
	fichier <code class="filename">/etc/usbd.conf</code> pour autoriser ce
	transfert automatique de &#8220;firmware&#8221;.  Ce fichier
	doit être édité en tant que
	super-utilisateur.</p><pre class="programlisting">device "Alcatel SpeedTouch USB"
    devname "ugen[0-9]+"
    vendor 0x06b9
    product 0x4061
    attach "/usr/local/sbin/modem_run -f /usr/local/libdata/mgmt.o"</pre><p>Pour activer le &#8220;daemon&#8221; USB,
	<span class="application">usbd</span>, ajoutez la ligne suivante
	dans le fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">usbd_enable="YES"</pre><p>Il est également possible de paramétrer
	<span class="application">ppp</span> pour se connecter au
	démarrage.  Pour cela ajoutez les lignes suivantes au
	fichier <code class="filename">/etc/rc.conf</code>.  Encore une fois,
	vous devrez être attaché sous l'utilisateur
	<code class="systemitem">root</code> pour effectuer ces ajouts.</p><pre class="programlisting">ppp_enable="YES"
ppp_mode="ddial"
ppp_profile="adsl"</pre><p>Pour que cela fonctionne correctement, vous devrez
	utiliser le fichier d'exemple <code class="filename">ppp.conf</code>
	qui est fourni avec le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pppoa/pkg-descr">net/pppoa</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81588176"></a>27.5.2. Utiliser mpd</h3></div></div></div><p>Vous pouvez utiliser <span class="application">mpd</span> pour
	vous connecter à différents services, en
	particulier aux services PPTP.  Vous trouverez
	<span class="application">mpd</span> dans le catalogue des logiciels
	portés, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/mpd/pkg-descr">net/mpd</a>.
	De nombreux modems ADSL demandent à ce qu'un tunnel
	PPTP soit créé entre le modem et l'ordinateur,
	le <span class="trademark">SpeedTouch</span>&#8482; Home d'Alcatel en fait partie.</p><p>Vous devez tout d'abord installer le logiciel
	porté, ensuite vous pouvez configurer
	<span class="application">mpd</span> selon vos besoins et les
	paramètres propres au fournisseur d'accès.  Le
	logiciel porté place un ensemble de fichiers de
	configuration très bien commentés dans le
	répertoire <code class="filename">PREFIX/etc/mpd/</code>.
	Notez qu'ici <em class="replaceable"><code>PREFIX</code></em>
	représente le répertoire dans lequel les
	logiciels portés sont installés, par
	défaut le répertoire <code class="filename">/usr/local/</code>.  Un guide complet
	pour la configuration de <span class="application">mpd</span> est
	disponible dans le format HTML, une fois que le logiciel a
	été installé.  Il se trouve dans le
	répertoire <code class="filename">PREFIX/share/doc/mpd/</code>.
	Voici un exemple de configuration pour se connecter à
	un service ADSL à l'aide de
	<span class="application">mpd</span>.  La configuration est
	séparée en deux fichiers, le premier est
	<code class="filename">mpd.conf</code>:</p><pre class="programlisting">default:
    load adsl

adsl:
    new -i ng0 adsl adsl
    set bundle authname <em class="replaceable"><code>username</code></em> <a id="co-mpd-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set bundle password <em class="replaceable"><code>password</code></em> <a id="co-mpd-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    set bundle disable multilink

    set link no pap acfcomp protocomp
    set link disable chap
    set link accept chap
    set link keep-alive 30 10

    set ipcp no vjcomp
    set ipcp ranges 0.0.0.0/0 0.0.0.0/0

    set iface route default
    set iface disable on-demand
    set iface enable proxy-arp
    set iface idle 0

    open</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le nom d'utilisateur utilisé pour vous identifier
	    auprès de votre FAI.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le mot de passe utilisé pour vous identifier
	    auprès de votre FAI.</p></td></tr></table></div><p>Le fichier <code class="filename">mpd.links</code> contient les
	informations concernant la liaison, ou les liaisons, que vous
	souhaitez établir.  En exemple de fichier
	<code class="filename">mpd.links</code> accompagnant l'exemple
	précédent est donné ci-dessous:</p><pre class="programlisting">adsl:
    set link type pptp
    set pptp mode active
    set pptp enable originate outcall
    set pptp self <em class="replaceable"><code>10.0.0.1</code></em> <a id="co-mpd-ex-self"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
    set pptp peer <em class="replaceable"><code>10.0.0.138</code></em> <a id="co-mpd-ex-peer"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-self"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>L'adresse IP de la machine FreeBSD à partir de
	    laquelle vous utiliserez
	    <span class="application">mpd</span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-mpd-ex-peer"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>L'adresse IP de votre modem ADSL.  Pour le
	    <span class="trademark">SpeedTouch</span>&#8482; Home d'Alcatel cette adresse est par
	    défaut <code class="systemitem">10.0.0.138</code>.</p></td></tr></table></div><p>Il est possible d'initialiser aisément une
	connexion en tapant la commande suivante en tant que
	<code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mpd -b adsl</code></strong></pre><p>Vous pouvez voir quel est l'état de votre connexion
	à l'aide de la commande suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig ng0</code></strong>
ng0: flags=88d1&lt;UP,POINTOPOINT,RUNNING,NOARP,SIMPLEX,MULTICAST&gt; mtu 1500
     inet 216.136.204.117 --&gt; 204.152.186.171 netmask 0xffffffff</pre><p>L'utilisation de <span class="application">mpd</span> est la
	méthode recommandée de connexion à un
	service ADSL sous FreeBSD.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81633872"></a>27.5.3. Utiliser pptpclient</h3></div></div></div><p>Il est également possible d'utiliser FreeBSD pour se
	connecter à d'autres service PPPoA en utilisant
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a>.</p><p>Pour utiliser <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/pptpclient/pkg-descr">net/pptpclient</a> pour vous connecter
	à un service DSL, installez le logiciel porté ou
	le paquetage correspondant et éditez votre fichier
	<code class="filename">/etc/ppp/ppp.conf</code>.  Vous aurez besoin des
	droits de super-utilisateur pour effectuer ces deux
	opérations.  Un exemple de fichier
	<code class="filename">ppp.conf</code> est donné plus bas.  Pour
	plus d'information sur les options du fichier
	<code class="filename">ppp.conf</code>, consultez la page de manuel de
	<span class="application">ppp</span>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a>.</p><pre class="programlisting">adsl:
 set log phase chat lcp ipcp ccp tun command
 set timeout 0
 enable dns
 set authname <em class="replaceable"><code>username</code></em> <a id="co-pptp-ex-user"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
 set authkey <em class="replaceable"><code>password</code></em> <a id="co-pptp-ex-pass"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
 set ifaddr 0 0
 add default HISADDR</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-user"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le nom d'utilisateur de votre compte chez le
	    fournisseur d'accès DSL.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-pptp-ex-pass"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le mot de passe de votre compte.</p></td></tr></table></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Etant donné que vous devez mettre le mot de passe
	  de votre compte en clair dans le fichier
	  <code class="filename">ppp.conf</code>, vous devez vous assurer que
	  personne d'autre ne puisse lire le contenu de ce fichier.  La
	  série de commandes suivante s'assurera que ce fichier
	  n'est lisible que par <code class="systemitem">root</code>.
	  Référez-vous aux pages de manuel de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chmod&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">chmod</span>(1)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chown&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chown</span>(8)</span></a> pour plus
	  d'informations.</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>chown root:wheel /etc/ppp/ppp.conf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 600 /etc/ppp/ppp.conf</code></strong></pre></div><p>Cela créera un tunnel pour une session PPP vers
	votre routeur DSL.  Les modems DSL Ethernet ont une adresse IP
	pour le réseau local pré-configurée
	à laquelle vous vous connectez.  Dans le cas du modem
	<span class="trademark">SpeedTouch</span>&#8482; Home d'Alcatel cette adresse est <code class="systemitem">10.0.0.138</code>.  La documentation de votre
	routeur devrait mentionner quelle adresse utilise votre
	périphérique.  Pour créer le tunnel et
	démarrer une session PPP exécutez la commande
	suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pptp address adsl</code></strong></pre><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous pourrez ajouter un &#8220;et commercial&#8221;
	  (&#8220;&amp;&#8221;) à la fin de la commande
	  précédente car sinon
	  <span class="application">pptp</span> ne vous rendra pas la
	  main.</p></div><p>Un périphérique virtuel de tunnel
	(<code class="filename">tun</code>) sera créé pour la
	communication entre les processus
	<span class="application">pptp</span> et
	<span class="application">ppp</span>.  Une fois
	retourné à l'invite, ou que le processus
	<span class="application">pptp</span> a confirmé la
	connexion, vous pouvez examiner le tunnel de cette
	manière:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ifconfig tun0</code></strong>
tun0: flags=8051&lt;UP,POINTOPOINT,RUNNING,MULTICAST&gt; mtu 1500
        inet 216.136.204.21 --&gt; 204.152.186.171 netmask 0xffffff00
        Opened by PID 918</pre><p>Si vous n'êtes pas en mesure de vous connecter,
	vérifiez la configuration de votre routeur qui est
	généralement accessible par
	<span class="application">telnet</span> ou avec un navigateur web.
	Si le problème persiste, vous devrez examiner la sortie
	de la commande <code class="command">pptp</code> et le contenu du
	fichier de trace de <span class="application">ppp</span>,
	<code class="filename">/var/log/ppp.log</code> à la recherche
	d'indices.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="slip"></a>27.6. Utiliser SLIP</h2></div><div><span class="authorgroup">Contribution originale de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Satoshi</span> <span class="surname">Asami</span></span>. </span></div><div><span class="authorgroup">Avec la participation de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Guy</span> <span class="surname">Helmer</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Piero</span> <span class="surname">Serini</span></span>. </span></div></div></div><a id="idp81669712" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slipc"></a>27.6.1. Configurer un client SLIP</h3></div></div></div><a id="idp81671120" class="indexterm"></a><p>Ce qui suit décrit une manière de configurer
	une machine FreeBSD pour utiliser SLIP sur un réseau
	où les noms de machine sont statiques.  Si le nom de
	machine est affecté dynamiquement (votre adresse change
	à chaque connexion), vous devrez probablement utiliser
	une méthode plus sophistiquée.</p><p>Tout d'abord, déterminez sur quel port série
	votre modem est connecté.  De nombreuses personnes
	utilisent un lien symbolique, comme
	<code class="filename">/dev/modem</code>, pour pointer vers le nom
	réel du périphérique,
	<code class="filename">/dev/cuaaN</code> (ou
	<code class="filename">/dev/cuadN</code> sous FreeBSD 6.X).  Ceci
	vous permet de faire abstraction du véritable nom du
	périphérique même si vous déplacez
	le modem vers un autre port.  Cela évite le
	côté pénible de devoir modifier un certain
	nombre de fichiers dans le répertoire <code class="filename">/etc</code> et les fichiers
	<code class="filename">.kermrc</code> pour l'ensemble du
	système!</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="filename">/dev/cuaa0</code> (ou
	  <code class="filename">/dev/cuad0</code> sous FreeBSD 6.X)
	  représente <code class="filename">COM1</code>,
	  <code class="filename">cuaa1</code> (ou
	  <code class="filename">/dev/cuad1</code>)
	  <code class="filename">COM2</code>, etc.</p></div><p>Assurez-vous d'avoir dans votre fichier de configuration
	du noyau ce qui suit:</p><pre class="programlisting">device   sl</pre><p>Sous FreeBSD 4.X, utilisez à la place la ligne
	suivante:</p><pre class="programlisting">pseudo-device   sl      1</pre><p>Cette configuration fait partie du noyau
	<code class="filename">GENERIC</code>, aussi cela ne devrait pas
	être un problème à moins que vous ne
	l'ayez effacée.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81684176"></a>27.6.1.1. Ce que vous n'aurez à faire qu'une seule
	  fois</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Ajoutez votre machine, la passerelle et les serveurs
	      de noms de domaines à votre fichier
	      <code class="filename">/etc/hosts</code>.  Le notre ressemble
	      à ceci:</p><pre class="programlisting">127.0.0.1               localhost loghost
136.152.64.181          water.CS.Example.EDU water.CS water
136.152.64.1            inr-3.CS.Example.EDU inr-3 slip-gateway
128.32.136.9            ns1.Example.EDU ns1
128.32.136.12           ns2.Example.EDU ns2</pre></li><li class="step"><p>Assurez-vous que <code class="literal">hosts</code>
	      apparaît avant <code class="literal">bind</code> dans votre
	      fichier <code class="filename">/etc/host.conf</code> sous les
	      versions de FreeBSD antérieures à 5.0.  Depuis
	      FreeBSD 5.0, le système utilise à la place
	      le fichier <code class="filename">/etc/nsswitch.conf</code>,
	      vérifiez que <code class="literal">files</code> est avant
	      <code class="literal">dns</code> dans la ligne
	      <code class="literal">hosts</code> de ce fichier.  Sans ces
	      paramètres, il peut se passer des choses
	      bizarres.</p></li><li class="step"><p>Editez le fichier
	      <code class="filename">/etc/rc.conf</code>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Définissez votre nom de machine en
		  éditant la ligne:</p><pre class="programlisting">hostname="myname.my.domain"</pre><p>Le nom Internet complet de la machine doit
		  être utilisé ici.</p></li><li class="listitem"><p>Ajoutez <code class="filename">sl0</code> à la
		  liste des interfaces réseau en modifiant la
		  ligne:</p><pre class="programlisting">network_interfaces="lo0"</pre><p>en:</p><pre class="programlisting">network_interfaces="lo0 sl0"</pre></li><li class="listitem"><p>Définissez les paramètres de
		  configuration de <code class="filename">sl0</code> en
		  ajoutant une ligne:</p><pre class="programlisting">ifconfig_sl0="inet ${hostname} slip-gateway netmask 0xffffff00 up"</pre></li><li class="listitem"><a id="idp81697232" class="indexterm"></a><p>Indiquez la passerelle par défaut en
		  modifiant la ligne:</p><pre class="programlisting">defaultrouter="NO"</pre><p>en:</p><pre class="programlisting">defaultrouter="slip-gateway"</pre></li></ol></div></li><li class="step"><p>Créez un fichier
	      <code class="filename">/etc/resolv.conf</code> qui contient:</p><pre class="programlisting">domain CS.Example.EDU
nameserver 128.32.136.9
nameserver 128.32.136.12</pre><a id="idp81709520" class="indexterm"></a><a id="idp81710032" class="indexterm"></a><p>Comme vous pouvez le voir, ceci définit les
	      serveurs de noms de domaines.  Bien entendu, les noms de
	      domaines et les adresses dépendront de votre
	      environnement.</p></li><li class="step"><p>Donnez des mots de passe pour les utilisateurs
	      <code class="systemitem">root</code> et <code class="systemitem">toor</code>
	      (et à tous les autres comptes qui n'auraient pas
	      de mot de passe).</p></li><li class="step"><p>Redémarrez votre machine et vérifiez
	      qu'elle a bien le nom voulu.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81713872"></a>27.6.1.2. Etablir une connexion SLIP </h4></div></div></div><a id="idp81714512" class="indexterm"></a><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Téléphonez, tapez
	      <code class="command">slip</code> à l'invite, puis entrez
	      votre nom de machine et votre mot de passe.  Ce que vous
	      devez entrer dépend de votre environnement.  Si
	      vous utilisez <span class="application">Kermit</span>, vous
	      pouvez essayer une procédure comme celle-ci:</p><pre class="programlisting"># configuration kermit
set modem hayes
set line /dev/modem
set speed 115200
set parity none
set flow rts/cts
set terminal bytesize 8
set file type binary
# The next macro will dial up and login
define slip dial 643-9600, input 10 =&gt;, if failure stop, -
output slip\x0d, input 10 Username:, if failure stop, -
output silvia\x0d, input 10 Password:, if failure stop, -
output ***\x0d, echo \x0aCONNECTED\x0a</pre><p>Vous devez, bien évidemment, remplacer le nom
	      d'utilisateur et le mot de passe par les votre.
	      Après cela vous pouvez alors entrer simplement
	      <code class="command">slip</code> à l'invite de
	      <span class="application">Kermit</span> pour vous
	      connecter.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Conserver votre mot de passe en clair dans un
		fichier quelconque est en général une
		<span class="emphasis"><em>mauvaise</em></span> idée.  Faites-le
		à vos risques et périls.</p></div></li><li class="step"><p>Laissez ensuite <span class="application">Kermit</span>
	      tel quel (vous pouvez le mettre en arrière-plan
	      avec
	      <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>z</strong></span>) et en tant que <code class="systemitem">root</code>,
	      tapez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>slattach -h -c -s 115200 /dev/modem</code></strong></pre><p>Si vous êtes en mesure d'envoyer un
	      <code class="command">ping</code> vers des machines situées
	      de l'autre côté du routeur, c'est que vous
	      êtes connecté!  Si cela ne fonctionne pas,
	      vous pouvez essayer l'option <code class="option">-a</code> au lieu
	      de <code class="option">-c</code> en argument de
	      <code class="command">slattach</code>.</p></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81730512"></a>27.6.1.3. Comment couper la connexion</h4></div></div></div><p>Effectuez ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -INT `cat /var/run/slattach.modem.pid`</code></strong></pre><p>pour tuer <code class="command">slattach</code>.  Gardez à
	  l'esprit que vous devez avoir les droits du
	  super-utilisateur pour faire cela.  Revenez ensuite sous
	  <code class="command">kermit</code> (en tapant <code class="command">fg</code>
	  si l'avez mis en tâche de fond) et quittez-le
	  (<span class="keycap"><strong>q</strong></span>).</p><p>La page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=slattach&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">slattach</span>(8)</span></a> dit que vous devez
	  employer la commande <code class="command">ifconfig sl0 down</code>
	  pour indiquer que l'interface n'est plus active, mais cela
	  ne change apparemment rien (les diagnostics donnés
	  par la commande <code class="command">ifconfig sl0</code> restent
	  identiques).</p><p>Il arrive que parfois que votre modem refuse de
	  raccrocher.  Dans ce cas, relancez <code class="command">kermit</code>
	  et quittez-le de nouveau.  Cela fonctionne en
	  général à la seconde tentative.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81741392"></a>27.6.1.4. Dépannage</h4></div></div></div><p>Si cela ne fonctionne pas, n'hésitez pas à
	  contacter la liste de diffusion <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-net" target="_top">freebsd-net</a>.  Voici les
	  problèmes que certains ont rencontré
	  jusqu'ici:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ne pas utiliser l'option <code class="option">-c</code> ou
	      <code class="option">-a</code> avec <code class="command">slattach</code> (Cela
	      ne devrait pas poser de problème, mais des
	      utilisateurs ont signalé que l'utilisation de cet
	      indicateur a résolu leur problème).</p></li><li class="listitem"><p>Utiliser <code class="option">s10</code> au lieu de
	      <code class="option">sl0</code> (avec certaines polices de
	      caractères, il est parfois difficile de faire la
	      différence).</p></li><li class="listitem"><p>Essayez <code class="command">ifconfig sl0</code> pour
	      connaître la configuration de votre interface.
	      Vous obtiendrez, par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig sl0</code></strong>
sl0: flags=10&lt;POINTOPOINT&gt;
        inet 136.152.64.181 --&gt; 136.152.64.1 netmask ffffff00</pre></li><li class="listitem"><p>Si vous obtenez le message d'erreur <span class="errorname">no
	      route to host</span> lors de l'utilisation de
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>, il se peut qu'il y ait un problème
	      avec votre table de routage.  Vous pouvez utiliser la
	      commande <code class="command">netstat -r</code> pour afficher les
	      routes actives:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables
Destination      Gateway            Flags     Refs     Use  IfaceMTU    Rtt    Netmasks:

(root node)
(root node)

Route Tree for Protocol Family inet:
(root node) =&gt;
default          inr-3.Example.EDU  UG          8   224515  sl0 -      -
localhost.Exampl localhost.Example. UH          5    42127  lo0 -       0.438
inr-3.Example.ED water.CS.Example.E UH          1        0  sl0 -      -
water.CS.Example localhost.Example. UGH        34 47641234  lo0 -       0.438
(root node)</pre><p>Les exemples précédents proviennent
	      d'un système relativement chargé.  La
	      valeurs sur votre système varieront en fonction
	      de l'activité réseau.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips"></a>27.6.2. Configurer un serveur SLIP</h3></div></div></div><a id="idp81758032" class="indexterm"></a><p>Ce document donne des indications pour la mise en oeuvre
	d'un serveur SLIP sur un système FreeBSD, ce qui signifie
	généralement configurer votre système
	pour ouvrir automatiquement une connexion à l'ouverture
	d'une session depuis un client SLIP distant.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="slips-prereqs"></a>27.6.2.1. Prérequis</h4></div></div></div><a id="idp81760336" class="indexterm"></a><p>Cette section est très technique, il vous faut
	  donc quelques connaissances de base.  On supposera que vous
	  connaissez le protocole réseau TCP/IP et, en
	  particulier, l'adressage des réseaux et des noeuds,
	  les masques de sous-réseau, les sous-réseaux,
	  le routage et les protocoles de routage tels que RIP.  Ce
	  sont les concepts que vous devez maîtriser pour
	  configurer les services SLIP sur un serveur de connexions,
	  et si ce n'est pas le cas, veuillez lire <span class="emphasis"><em>TCP/IP
	  Network Administration</em></span> de Craig Hunt chez
	  O'Reilly &amp; Associates, Inc. (ISBN 0-937175-82-X), ou les
	  ouvrages de Douglas Comer sur le protocole TCP/IP.</p><a id="idp81761744" class="indexterm"></a><p>On suppose également que vous avez
	  déjà installé vos modems et
	  configuré les fichiers systèmes
	  appropriés pour permettre l'ouverture de session via
	  vos modems.  Si vous ne l'avez pas encore fait reportez-vous
	  à la <a class="xref" href="#dialup" title="26.4. Dial-in Service">Section 26.4, « Dial-in Service »</a> pour des informations sur
	  la configuration des connexions entrantes.  Vous pouvez aussi
	  consulter les pages de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a> pour plus
	  d'information sur le pilote du port série et
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ttys&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ttys</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gettytab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">gettytab</span>(5)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=getty&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">getty</span>(8)</span></a>, &amp; et
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=init&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">init</span>(8)</span></a> en ce qui concerne la configuration du
	  système pour qu'il autorise les connexions en
	  provenance de modems, et peut-être la page de manuel
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=stty&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">stty</span>(1)</span></a> pour des informations sur le paramétrage
	  des ports série (comme <code class="literal">clocal</code> pour
	  les interfaces série directement
	  connectées).</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81768400"></a>27.6.2.2. Rapide vue d'ensemble</h4></div></div></div><p>Une configuration typique d'utilisation de FreeBSD comme
	  serveur SLIP fonctionne de la manière suivante: un
	  utilisateur SLIP appelle votre serveur SLIP FreeBSD et ouvre
	  une session sous un identifiant utilisateur SLIP particulier
	  qui lance <code class="filename">/usr/sbin/sliplogin</code> comme
	  interpréteur de commandes.  Le programme
	  <code class="command">sliplogin</code> consulte le fichier
	  <code class="filename">/etc/sliphome/slip.hosts</code> à la
	  recherche d'une ligne correspondant à cet utilisateur
	  particulier, et s'il la trouve, connecte la ligne
	  série à une interface SLIP disponible et lance
	  ensuite la procédure
	  <code class="filename">/etc/sliphome/slip.login</code> pour
	  configurer cette interface SLIP.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81771088"></a>27.6.2.2.1. Un exemple d'ouverture de session sur un serveur
	    SLIP</h5></div></div></div><p>Par exemple, si <code class="systemitem">Shelmerg</code>
	    était un identifiant utilisateur SLIP,
	    l'entrée pour <code class="systemitem">Shelmerg</code>
	    ressemblerait à ceci:</p><pre class="programlisting">Shelmerg:password:1964:89::0:0:Guy Helmer - SLIP:/usr/users/Shelmerg:/usr/sbin/sliplogin</pre><p>Quand <code class="systemitem">Shelmerg</code> ouvre une session,
	    <code class="command">sliplogin</code> consulte
	    <code class="filename">/etc/sliphome/slip.hosts</code> à la
	    recherche d'une ligne correspondant à l'identifiant
	    de l'utilisateur correspondant; par exemple, il peut y
	    avoir dans le fichier
	    <code class="filename">/etc/sliphome/slip.hosts</code> la
	    ligne:</p><pre class="programlisting">Shelmerg        dc-slip sl-helmer       0xfffffc00		  autocomp</pre><p><code class="command">sliplogin</code> trouvera alors cette
	    ligne, affectera la ligne série à
	    l'interface SLIP suivante,et ensuite exécutera
	    <code class="filename">/etc/sliphome/slip.login</code> avec les
	    arguments suivants:</p><pre class="programlisting">/etc/sliphome/slip.login 0 19200 Shelmerg dc-slip sl-helmer 0xfffffc00 autocomp</pre><p>Si tous se passe bien,
	    <code class="filename">/etc/sliphome/slip.login</code>
	    exécutera un <code class="command">ifconfig</code> sur
	    l'interface SLIP que s'est attribué
	    <code class="command">sliplogin</code> (l'interface SLIP 0, dans
	    l'exemple ci-dessus, qui est le premier paramètre
	    passé à <code class="filename">slip.login</code>)
	    pour définir l'adresse IP locale
	    (<code class="systemitem">dc-slip</code>), l'adresse IP de la machine
	    distante (<code class="systemitem">sl-helmer</code>), le masque de
	    sous-réseau de l'interface SLIP (<code class="systemitem">0xfffffc00</code>), et tout autre
	    indicateur supplémentaire
	    (<code class="literal">autocomp</code>).  Si quelque chose se passe
	    mal, <code class="command">sliplogin</code> fournit en
	    général des messages d'information via la
	    fonctionnalité de trace du
	    <span class="quote">« <span class="quote">démon</span> »</span>
	    <span class="application">syslogd</span>, qui les enregistre
	    habituellement dans le fichier
	    <code class="filename">/var/log/messages</code> (reportez-vous au
	    pages de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslogd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(5)</span></a>
	    et consultez peut-être aussi le fichier
	    <code class="filename">/etc/syslog.conf</code> pour voir ce que
	    trace <span class="application">syslogd</span> et où il
	    enregistre ces messages.).</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81793360"></a>27.6.2.3. Configuration du noyau</h4></div></div></div><a id="idp81794128" class="indexterm"></a><a id="idp81795280" class="indexterm"></a><p>Le noyau par défaut de FreeBSD
	  (<code class="filename">GENERIC</code>) fourni le support SLIP
	  (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sl</span>(4)</span></a>); dans le cas d'un noyau personnalisé,
	  vous devez ajouter la ligne suivante à votre fichier
	  de configuration du noyau:</p><pre class="programlisting">device   sl</pre><p>Sous FreeBSD 4.X, utilisez la ligne suivante:</p><pre class="programlisting">pseudo-device   sl      2</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le chiffre en fin de ligne représente le nombre
	    maximum de connexions SLIP qui peuvent cohexister.  Depuis
	    FreeBSD 5.0, le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sl&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sl</span>(4)</span></a> est capable
	    d'<span class="quote">« <span class="quote">auto-clonage</span> »</span>.</p></div><p>Par défaut, votre machine FreeBSD ne transmettra pas
	  les paquets.  Si vous désirez que votre serveur SLIP
	  FreeBSD agisse en routeur, vous devez éditer le fichier
	  <code class="filename">/etc/rc.conf</code> et positionner la variable
	  <code class="literal">gateway_enable</code> à
	  <code class="option">YES</code>.</p><p>Vous devrez ensuite redémarrer pour que les
	  nouveaux paramètres prennent effet.</p><p>Veuillez vous référer à la <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a> sur la configuration du noyau pour
	  de l'aide sur ce sujet.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81803344"></a>27.6.2.4. Configuration de sliplogin</h4></div></div></div><p>Comme indiqué plus haut, il y a trois fichiers
	  dans le répertoire <code class="filename">/etc/sliphome</code> qui servent
	  à la configuration de
	  <code class="filename">/usr/sbin/sliplogin</code> (voyez
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sliplogin&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sliplogin</span>(8)</span></a> pour avoir la page de manuel de
	  <code class="command">sliplogin</code>):
	  <code class="filename">slip.hosts</code>, définit les
	  utilisateurs SLIP et les adresses IP qui leur sont
	  associées, <code class="filename">slip.login</code>, qui ne
	  fait en général que configurer l'interface
	  SLIP, et (facultatif) <code class="filename">slip.logout</code>, qui
	  effectue le travail inverse de
	  <code class="filename">slip.login</code> quand la connexion
	  série est terminée.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81807824"></a>27.6.2.4.1. Configuration de <code class="filename">slip.hosts</code></h5></div></div></div><p><code class="filename">/etc/sliphome/slip.hosts</code> contient
	    des lignes avec au moins quatre champs
	    séparés par des espaces:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'identifiant (ID) d'utilisateur SLIP;</p></li><li class="listitem"><p>L'adresse locale (locale au serveur SLIP) de la
		liaison SLIP;</p></li><li class="listitem"><p>L'adresse de l'autre extrémité de la
		liaison SLIP;</p></li><li class="listitem"><p>Le masque de sous-réseau.</p></li></ul></div><p>Les adresses locales et distantes peuvent être
	    des noms de machines (qui seront convertis en adresses IP
	    via <code class="filename">/etc/hosts</code> ou par le service de
	    noms de domaines, en fonction de ce que contient le
	    fichier <code class="filename">/etc/nsswitch.conf</code>, ou
	    <code class="filename">/etc/host.conf</code> si vous utilisez
	    FreeBSD 4.X), et le masque de sous-réseau peut
	    être un nom qui sera converti en consultant le
	    fichier <code class="filename">/etc/networks</code>.  Par exemple,
	    <code class="filename">/etc/sliphome/slip.hosts</code>
	    contiendra:</p><pre class="programlisting">#
# login local-addr      remote-addr     mask            opt1    opt2
#                                               (normal,compress,noicmp)
#
Shelmerg  dc-slip       sl-helmerg      0xfffffc00      autocomp</pre><p>La ligne se termine par une ou plusieurs
	    options:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="option">normal</code> &#8212; pas de compression
		des en-têtes;</p></li><li class="listitem"><p><code class="option">compress</code> &#8212; compression des
		en-têtes;</p></li><li class="listitem"><p><code class="option">autocomp</code> &#8212; compression des
		en-têtes si la machine distante l'autorise;</p></li><li class="listitem"><p><code class="option">noicmp</code> &#8212; interdit les
		paquets ICMP (de sorte que les paquets
		<span class="quote">« <span class="quote">ping</span> »</span> seront ignorés au lieu de
		consommer votre bande passante).</p></li></ul></div><a id="idp81829328" class="indexterm"></a><a id="idp81829840" class="indexterm"></a><p>Le choix des adresses pour les deux
	    extrémités des liaisons SLIP dépend du
	    fait que vous leur dédiez un sous-réseau
	    TCP/IP ou que vous comptiez utiliser un <span class="quote">« <span class="quote">proxy
	    ARP</span> »</span> sur votre serveur SLIP (ce n'est pas un
	    <span class="quote">« <span class="quote">vrai</span> »</span> proxy ARP, mais c'est la terminologie
	    que nous utiliserons dans ce document pour le
	    désigner).  Si vous n'êtes pas sûr de la
	    méthode à choisir ou de la façon
	    d'assigner les adresses IP, référez-vous aux
	    ouvrages sur le TCP/IP mentionnés à section
	    sur les prérequis (<a class="xref" href="#slips-prereqs" title="27.6.2.1. Prérequis">Section 27.6.2.1, « Prérequis »</a>)
	    et/ou consultez l'administrateur de votre réseau
	    IP.</p><p>Si vous comptez utiliser un sous-réseau IP
	    séparé pour vos clients SLIP, vous devrez
	    définir l'adresse de sous-réseau à
	    partir de votre réseau IP et attribuer à
	    chacun de vos clients SLIP une adresse IP sur ce
	    sous-réseau.  Ensuite, vous devrez probablement
	    configurer sur votre routeur IP le plus proche une route
	    statique vers votre sous-réseau SLIP via votre
	    serveur SLIP.</p><a id="idp81832272" class="indexterm"></a><p>Sinon, si vous avez l'intention d'utiliser la
	    méthode du <span class="quote">« <span class="quote">proxy ARP</span> »</span>, vous devrez
	    assigner à vos clients SLIP des adresses IP en
	    provenance du sous-réseau Ethernet de votre serveur
	    SLIP, et vous devrez également adapter vos
	    procédures
	    <code class="filename">/etc/sliphome/slip.login</code> et
	    <code class="filename">/etc/sliphome/slip.logout</code> pour qu'elles
	    utilisent <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a> pour gérer les entrées
	    proxy ARP dans la table ARP de votre serveur SLIP.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81839568"></a>27.6.2.4.2. Configuration de <code class="filename">slip.login</code></h5></div></div></div><p>Le fichier
	    <code class="filename">/etc/sliphome/slip.login</code> ressemble
	    généralement à ceci:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# procédure générique d'ouverture de session pour
# une liaison SLIP.  sliplogin l'appelle avec les paramètres:
#      1        2         3        4          5         6     7-n
# interface vitesse nom adresse-locale adresse-distante masque arg-optionnels
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6</pre><p>Ce fichier <code class="filename">slip.login</code> ne fait
	    qu'exécuter <code class="command">ifconfig</code> sur
	    l'interface SLIP appropriée avec comme
	    paramètres les adresses locales et distantes et le
	    masque de sous-réseau de l'interface SLIP.</p><p>Si vous avez choisi d'utiliser la méthode du
	    <span class="quote">« <span class="quote">proxy ARP</span> »</span> (au lieu d'affecter un
	    sous-réseau distinct à vos clients SLIP),
	    votre fichier
	    <code class="filename">/etc/sliphome/slip.login</code> devra
	    ressembler à ceci:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.login  5.1 (Berkeley) 7/1/90

#
# procédure générique d'ouverture de session pour
# une liaison SLIP.  sliplogin l'appelle avec les paramètres:
#     1         2    3         4              5           6     7-n
# interface vitesse nom adresse-locale adresse-distante masque arg-optionnels
#
/sbin/ifconfig sl$1 inet $4 $5 netmask $6
# répondre aux requêtes ARP concernant le client SLIP avec notre
# adresse Ethernet
/usr/sbin/arp -s $5 00:11:22:33:44:55 pub</pre><p>La ligne supplémentaire dans ce fichier
	    <code class="filename">slip.login</code>, <code class="command">arp -s $5
	    00:11:22:33:44:55 pub</code>, crée une
	    entrée ARP dans la table ARP du serveur SLIP.
	    Cette entrée ARP fait que le serveur SLIP
	    répond avec sa propre adresse MAC lorsqu'un autre
	    noeud IP du réseau Ethernet demande à
	    dialoguer avec le client SLIP qui possède cette
	    adresse IP.</p><a id="idp81845456" class="indexterm"></a><p>Dans l'exemple donné ci-dessus, remplacez
	    l'adresse MAC Ethernet (<code class="systemitem">00:11:22:33:44:55</code>) avec l'adresse MAC de
	    la carte Ethernet de votre système, ou sinon votre
	    <span class="quote">« <span class="quote">proxy ARP</span> »</span> ne fonctionnera jamais!  Vous
	    pouvez déterminer l'adresse MAC de votre serveur SLIP
	    en examinant le résultat de la commande
	    <code class="command">netstat -i</code>; la seconde ligne doit
	    ressembler à ce qui suit:</p><pre class="screen">ed0   1500  &lt;Link&gt;0.2.c1.28.5f.4a         191923	0   129457     0   116</pre><p>Cela indique que l'adresse MAC Ethernet de ce
	    système est <code class="systemitem">00:02:c1:28:5f:4a</code> &#8212; les points
	    dans les adresses MAC que donne <code class="command">netstat
	    -i</code> doivent être remplacés par des
	    <span class="quote">« <span class="quote">:</span> »</span> et il faut ajouter un zéro devant
	    chaque valeur hexadécimale donnée sur un
	    seul digit pour obtenir des adresses dans le format requis
	    par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a>; consultez la page de manuel d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=arp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span></a>
	    pour avoir des informations complètes sur ces
	    conventions.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Quand vous créez les fichiers
	      <code class="filename">/etc/sliphome/slip.login</code> et
	      <code class="filename">/etc/sliphome/slip.logout</code>, le bit
	      <span class="quote">« <span class="quote">exécutable</span> »</span> (i.e., <code class="command">chmod
	      755 /etc/sliphome/slip.login
	      /etc/sliphome/slip.logout</code>) doit être
	      positionné, ou sinon <code class="command">sliplogin</code>
	      sera incapable d'exécuter la
	      procédure.</p></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81859280"></a>27.6.2.4.3. Configuration de
	    <code class="filename">slip.logout</code></h5></div></div></div><p><code class="filename">/etc/sliphome/slip.logout</code>
	    n'est pas strictement indispensable (à moins que
	    vous n'implémentiez un <span class="quote">« <span class="quote">proxy ARP</span> »</span>),
	    mais si vous décidez de la créer, voici un
	    exemple de procédure
	    <code class="filename">slip.logout</code>
	    élémentaire:</p><pre class="programlisting">#!/bin/sh -
#
#       slip.logout

#
# procédure générique de fermeture de session pour
# une liaison SLIP.  sliplogin l'appelle avec les paramètres:
#     1         2    3         4              5           6     7-n
# interface vitesse nom adresse-locale adresse-distante masque arg-optionnels
#
/sbin/ifconfig sl$1 down</pre><p>Si vous utilisez la méthode <span class="quote">« <span class="quote">proxy
	    ARP</span> »</span>, vous voudrez que
	    <code class="filename">/etc/sliphome/slip.logout</code> supprime
	    l'entrée ARP pour le client SLIP:</p><pre class="programlisting">#!/bin/sh -
#
#       @(#)slip.logout

#
# procédure générique de fermeture de session pour
# une liaison SLIP.  sliplogin l'appelle avec les paramètres:
#     1         2    3         4              5           6     7-n
# interface vitesse nom adresse-locale adresse-distante masque arg-optionnels
#
/sbin/ifconfig sl$1 down
# Cesser de répondre aux requêtes ARP concernant le client SLIP
/usr/sbin/arp -d $5</pre><p>La commande <code class="command">arp -d $5</code> supprime
	    l'entrée ARP que la procédure
	    <code class="filename">slip.login</code> pour le <span class="quote">« <span class="quote">proxy
	    ARP</span> »</span> a ajouté quand le client SLIP a ouvert
	    la session.</p><p>Il n'est pas inutile de répéter:
	    assurez-vous que le bit <span class="quote">« <span class="quote">exécutable</span> »</span>
	    de la procédure
	    <code class="filename">/etc/sliphome/slip.logout</code> a
	    été positionné après que vous
	    l'ayez créée (i.e., <code class="command">chmod 755
	    /etc/sliphome/slip.logout</code>).</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81866960"></a>27.6.2.5. A propos du routage</h4></div></div></div><a id="idp81867728" class="indexterm"></a><p>Si vous n'utilisez pas <span class="quote">« <span class="quote">proxy ARP</span> »</span> pour
	  router les paquets entre vos clients SLIP et le reste de
	  votre réseau (et peut-être l'Internet), vous
	  devrez probablement ajouter des routes statiques vers le(s)
	  routeur(s) par défaut le(s) plus proche(s) pour
	  router le sous-réseau de vos clients SLIP via votre
	  serveur SLIP.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81869648"></a>27.6.2.5.1. Routes statiques</h5></div></div></div><a id="idp81870288" class="indexterm"></a><p>Ajouter des routes statiques vers vos routeurs
	    les plus proches peut être problématique
	    (voire impossible si vous n'avez pas les autorisations
	    pour...).  Si vous avez un réseau avec plusieurs
	    routeurs, certains d'entre eux, tels que les Cisco et les
	    Proteon, devront non seulement être
	    configurés pour la route statique vers le
	    sous-réseau SLIP, mais devront aussi savoir quelles
	    routes statiques ils doivent annoncer aux autres routeurs,
	    donc quelques compétences, un peu de
	    dépannage ou de <span class="quote">« <span class="quote">bidouille</span> »</span> pourront
	    être nécessaire pour que vos routes statiques
	    fonctionnent.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp81871696"></a>27.6.2.5.2. Utiliser <span class="application"><span class="trademark">GateD</span>®</span></h5></div></div></div><a id="idp81872848" class="indexterm"></a><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application"><span class="trademark">GateD</span>®</span> est
	    désormais un logiciel propriétaire et les
	    sources ne seront donc plus disponibles (plus d'information
	    sur le site Web de <a class="link" href="http://www.gated.org/" target="_top"><span class="trademark">GateD</span>®</a>).  Cette section
	    existe uniquement pour des raisons de compatibilité
	    pour ceux qui utilisent encore une ancienne version.</p></div><p>Une alternative aux maux de tête que provoquent
	    les routes statiques est d'installer
	    <span class="application"><span class="trademark">GateD</span>®</span> sur votre serveur SLIP
	    FreeBSD et de le configurer pour qu'il utilise les protocoles
	    de routage appropriés (RIP/OSPF/BGP/EGP) pour
	    annoncer aux autres routeurs votre sous-réseau
	    SLIP.  Vous aurez besoin de créer un fichier
	    <code class="filename">/etc/gated.conf</code> pour configurer
	    <span class="application"><span class="trademark">GateD</span>®</span>; voici un exemple,
	    semblable à celui que l'auteur a utilisé sur
	    un serveur SLIP FreeBSD:</p><pre class="programlisting">#
# fichier de configuration de gated dc.dsu.edu; pour la version
# 3.5alpha5
# diffusion des informations RIP pour xxx.xxx.yy via l'interface
# Ethernet "ed"
#
#
# options de trace
#
traceoptions "/var/tmp/gated.output" replace size 100k files 2 general ;

rip yes {
  interface sl noripout noripin ;
  interface ed ripin ripout version 1 ;
  traceoptions route ;
} ;

#
# Activer un certain nombre d'informations de trace sur l'interface
# au noyau:
kernel {
  traceoptions remnants request routes info interface ;
} ;

#
# Propager la route vers xxx.xxx.yy via l'Ethernet interface et RIP
#

export proto rip interface ed {
  proto direct {
      <em class="replaceable"><code>xxx.xxx.yy</code></em> mask 255.255.252.0 metric 1; # SLIP connections
  } ;
} ;

#
# Accepter les routes de RIP via les interfaces Ethernet "ed"

import proto rip interface ed {
  all ;
} ;</pre><a id="idp81883088" class="indexterm"></a><p>L'exemple de fichier <code class="filename">gated.conf</code>
	    ci-dessus diffuse l'information de routage concernant le
	    sous-réseau SLIP
	    <em class="replaceable"><code>xxx.xxx.yy</code></em> via RIP sur
	    l'interface Ethernet; si vous utilisez un pilote de
	    périphérique Ethernet différent du
	    pilote <code class="filename">ed</code>, vous devrez modifier en
	    conséquence les références à
	    l'interface <code class="filename">ed</code>.  Ce fichier
	    d'exemple active également les journaux sur
	    <code class="filename">/var/tmp/gated.output</code> pour pouvoir
	    déboguer le fonctionnement de
	    <span class="application"><span class="trademark">GateD</span>®</span>; vous pouvez
	    désactiver ces options de trace si
	    <span class="application"><span class="trademark">GateD</span>®</span> fonctionne correctement
	    pour vous.  Vous devrez remplacer
	    <em class="replaceable"><code>xxx.xxx.yy</code></em> par l'adresse
	    réseau de votre propre sous-réseau SLIP
	    (assurez-vous de remplacer également le masque de
	    sous-réseau dans la clause <code class="literal">proto
	    direct</code>).</p><p>Une fois que vous avez installé et
	    configuré <span class="application"><span class="trademark">GateD</span>®</span> sur
	    votre système, vous devrez indiquer aux
	    procédures de démarrage de FreeBSD de lancer
	    <span class="application"><span class="trademark">GateD</span>®</span> à la place de
	    <span class="application">routed</span>.  La manière la
	    plus simple de faire cela est de positionner les variables
	    <code class="varname">router</code> et
	    <code class="varname">router_flags</code> dans le fichier
	    <code class="filename">/etc/rc.conf</code>.  Veuillez consulter la
	    page de manuel de <span class="application"><span class="trademark">GateD</span>®</span> pour
	    des informations sur les paramètres en ligne de
	    commande.</p></div></div></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail"></a>Chapitre 28. Courrier électronique</h2></div><div><span class="authorgroup">Contribution originale de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Lloyd</span></span>. </span></div><div><span class="authorgroup">Réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jim</span> <span class="surname">Mock</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#mail-synopsis">28.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#mail-using">28.2. Utilisation du courrier électronique</a></span></dt><dt><span class="sect1"><a href="#sendmail">28.3. Configuration de <span class="application">sendmail</span></a></span></dt><dt><span class="sect1"><a href="#mail-changingmta">28.4. Changer votre agent de transfert de courrier</a></span></dt><dt><span class="sect1"><a href="#mail-trouble">28.5. Dépannage</a></span></dt><dt><span class="sect1"><a href="#mail-advanced">28.6. Sujets avancés</a></span></dt><dt><span class="sect1"><a href="#SMTP-UUCP">28.7. SMTP avec UUCP</a></span></dt><dt><span class="sect1"><a href="#outgoing-only">28.8. Configuration pour l'envoi seul</a></span></dt><dt><span class="sect1"><a href="#SMTP-dialup">28.9. Utiliser le courrier électronique avec une connexion
      temporaire</a></span></dt><dt><span class="sect1"><a href="#SMTP-Auth">28.10. Authentification SMTP</a></span></dt><dt><span class="sect1"><a href="#mail-agents">28.11. Clients de messagerie</a></span></dt><dt><span class="sect1"><a href="#mail-fetchmail">28.12. Utiliser fetchmail</a></span></dt><dt><span class="sect1"><a href="#mail-procmail">28.13. Utiliser procmail</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-synopsis"></a>28.1. Synopsis</h2></div></div></div><a id="idp81903056" class="indexterm"></a><a id="idp81903568" class="indexterm"></a><p>Le &#8220;courrier électronique&#8221;, plus connu sous le nom d'email,
      est une des formes de communication les plus utilisées
      aujourd'hui.  Ce chapitre fournit une introduction sur comment
      faire fonctionner un serveur de courrier électronique sous
      FreeBSD, et comment envoyer et recevoir du courrier électronique sous FreeBSD.  Cependant, cela n'est pas un document de
      référence, en fait de nombreux
      éléments importants ont été omis.
      Pour une couverture plus complète du sujet, le lecteur doit
      se référer aux nombreux ouvrages excellents
      listés dans l'<a class="xref" href="#bibliography" title="Annexe B. Bibliographie">Annexe B, <em>Bibliographie</em></a>.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Quels composants logiciel sont impliqués dans
	  l'envoi et la réception du courrier
	  électronique.</p></li><li class="listitem"><p>Où se trouvent sous FreeBSD les fichiers de
	  configuration de base de
	  <span class="application">sendmail</span>.</p></li><li class="listitem"><p>La différence entre boîtes aux lettres
	  distantes et boîtes aux lettres locale.</p></li><li class="listitem"><p>Comment empêcher les personnes à l'origine
	  de courriers non sollicités (spam) d'utiliser votre
	  serveur de courrier comme relais.</p></li><li class="listitem"><p>Comment installer et configurer un agent de transfert de
	  courrier alternatif sur votre système, en remplacement
	  de <span class="application">sendmail</span>.</p></li><li class="listitem"><p>Comment dépanner les problèmes
	  courants des serveurs de courrier
	  électronique.</p></li><li class="listitem"><p>Comment utiliser le protocole SMTP avec UUCP.</p></li><li class="listitem"><p>Comment utiliser le courrier électronique avec
	  une connexion temporaire.</p></li><li class="listitem"><p>Comment configurer l'authentification SMTP pour une
	  sécurité accrue.</p></li><li class="listitem"><p>Comment installer et utiliser un client de messagerie,
	  comme <span class="application">mutt</span> pour envoyer et lire
	  du courrier électronique.</p></li><li class="listitem"><p>Comme récupérer votre courrier
	  électronique à partir d'un serveur
	  <acronym class="acronym">POP</acronym> ou <acronym class="acronym">IMAP</acronym>
	  distant.</p></li><li class="listitem"><p>Comment appliquer automatiquement des règles de
	  filtrage au courrier entrant.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configurer correctement votre connexion réseau
	(<a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>).</p></li><li class="listitem"><p>Configurer correctement les informations DNS
	pour votre serveur de courrier (<a class="xref" href="#advanced-networking" title="Chapitre 31. Administration réseau avancée">Chapitre 31, <em>Administration réseau avancée</em></a>).</p></li><li class="listitem"><p>Savoir comment installer des logiciels tiers
	(<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-using"></a>28.2. Utilisation du courrier électronique</h2></div></div></div><a id="idp81929936" class="indexterm"></a><a id="idp81930448" class="indexterm"></a><a id="idp81930960" class="indexterm"></a><p>Il y a cinq éléments majeurs impliqués
      dans un échange de courrier.  Ce sont:
      <a class="link" href="#mail-mua" title="28.2.1. Le programme utilisateur">le programme utilisateur</a>,
      <a class="link" href="#mail-mta" title="28.2.2. Le &#8220;daemon&#8221; serveur de courrier">le &#8220;daemon&#8221; serveur de
      courrier</a>, <a class="link" href="#mail-dns" title="28.2.3. Courrier électronique et DNS">le serveur DNS</a>,
      <a class="link" href="#mail-receive" title="28.2.4. Réception de courrier">une boîte aux lettres distante ou locale</a>, et
      bien sûr le <a class="link" href="#mail-host" title="28.2.5. Le serveur de courrier">le serveur
      de courrier lui-même </a>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-mua"></a>28.2.1. Le programme utilisateur</h3></div></div></div><p>Cela inclut des programmes en ligne de commande comme
	<span class="application">mutt</span>, <span class="application">pine</span>,
	<span class="application">elm</span>, et
	<span class="application">mail</span>, et des programmes graphiques
	comme <span class="application">balsa</span>,
	<span class="application">xfmail</span> pour juste en nommer
	quelques-uns, ou quelque chose de plus
	<span class="quote">« <span class="quote">sophisticated</span> »</span> comme un navigateur WWW.  Ces
	programmes transmettent simplement toutes les transactions
	concernant le courrier électronique au <a class="link" href="#mail-host" title="28.2.5. Le serveur de courrier">serveur de courrier local</a>, soit en
	invoquant un des <a class="link" href="#mail-mta" title="28.2.2. Le &#8220;daemon&#8221; serveur de courrier">&#8220;daemons&#8221; serveurs</a>
	(Agents de transfert de courrier) disponibles, soit via
	<acronym class="acronym">TCP</acronym>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-mta"></a>28.2.2. Le &#8220;daemon&#8221; serveur de courrier</h3></div></div></div><a id="idp81940816" class="indexterm"></a><a id="idp81942224" class="indexterm"></a><a id="idp81943504" class="indexterm"></a><a id="idp81944784" class="indexterm"></a><p>FreeBSD est fourni par défaut avec
	<span class="application">sendmail</span>, mais supporte
	également de nombreux autres &#8220;daemons&#8221;
	serveurs de courrier, parmi lesquels:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">exim</span>;</p></li><li class="listitem"><p><span class="application">postfix</span>;</p></li><li class="listitem"><p><span class="application">qmail</span>.</p></li></ul></div><p>Le serveur a généralement deux
	fonctions&#8212;il est responsable de la réception du
	courrier comme celle de son envoi.  Il n'est cependant
	<span class="emphasis"><em>pas</em></span> responsable de la
	récupération du courrier électronique en
	utilisant des protocoles comme <acronym class="acronym">POP</acronym> ou
	<acronym class="acronym">IMAP</acronym> pour lire votre courrier, il ne vous
	permet pas non plus la connexion à des boîtes aux
	lettres locales de type <code class="filename">mbox</code> ou maildir.
	Vous avez besoin d'un <a class="link" href="#mail-receive" title="28.2.4. Réception de courrier">&#8220;daemon&#8221;</a>
	supplémentaire pour cela.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Les anciennes version de
	  <span class="application">sendmail</span> ont de sérieux
	  problèmes de sécurité qui peuvent avoir
	  pour conséquence l'obtention d'un accès local
	  et/ou à distance à votre machine pour une
	  personne malveillante.  Vérifiez que vous utilisez
	  une version à jour pour éviter de tels
	  problèmes.  Vous avez cependant toujours la
	  possibilité d'installer un autre
	  <acronym class="acronym">MTA</acronym> à partir du <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés de
	  FreeBSD</a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-dns"></a>28.2.3. Courrier électronique et DNS</h3></div></div></div><p>Le système de noms de domaines (DNS) et son
	&#8220;daemon&#8221; <code class="command">named</code> jouent un rôle
	important dans la transmission du courrier électronique.
	Afin de délivrer du courrier de votre site à un autre,
	le serveur recherchera le site distant dans la base de données DNS
	pour déterminer la machine qui recevra le courrier
	électronique pour le destinataire.  Ce processus
	intervient également quand un courrier
	électronique est envoyé à partir d'une
	machine distante vers votre serveur de courrier.</p><a id="idp81956560" class="indexterm"></a><p>Le <acronym class="acronym">DNS</acronym> gère la correspondance
	entre nom de machine et adresse IP, et le stockage des
	informations spécifiques à la distribution du
	courrier électronique, connues sous le nom
	d'enregistrements MX.  L'enregistrement MX (&#8220;Mail
	eXchanger&#8221;) définit la machine, ou les machines,
	qui recevra le courrier pour un domaine particulier.  Si vous
	n'avez pas d'enregistrement MX pour votre machine ou votre
	domaine, le courrier sera directement envoyé à
	votre machine à condition que vous ayez un
	enregistrement A faisant correspondre à votre nom de
	machine votre adresse IP.</p><p>Vous pouvez obtenir les enregistrements MX pour n'importe
	quel domaine en utilisant la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=host&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">host</span>(1)</span></a> est
	présentée ci-dessous:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>host -t mx FreeBSD.org</code></strong>
FreeBSD.org mail is handled (pri=10) by mx1.FreeBSD.org</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-receive"></a>28.2.4. Réception de courrier</h3></div></div></div><a id="idp81969488" class="indexterm"></a><p>La réception du courrier pour votre domaine se fait par le
	serveur de courrier.  Il collectera le courrier qui est
	envoyé à destination de votre domaine et le
	stockera soit sous le format <code class="filename">mbox</code> (la
	méthode par défaut de stockage du courrier
	électronique) ou le format Maildir, en fonction de
	votre configuration.  Une fois le courrier stocké, il
	peut être lu localement en utilisant des applications
	comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a> ou <span class="application">mutt</span>, ou lu
	à distance et récupéré en
	utilisant des protocoles tels que <acronym class="acronym">POP</acronym> ou
	<acronym class="acronym">IMAP</acronym>.  Cela signifie que si vous
	désirez uniquement lire votre courrier
	électroniquement en local, vous n'avez pas besoin
	d'installer un serveur <acronym class="acronym">POP</acronym> ou
	<acronym class="acronym">IMAP</acronym>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pop-and-imap"></a>28.2.4.1. Accès aux boîtes aux lettres distantes en
	  utilisant <acronym class="acronym">POP</acronym> et
	  <acronym class="acronym">IMAP</acronym></h4></div></div></div><a id="idp81979856" class="indexterm"></a><a id="idp81980368" class="indexterm"></a><p>Pour accéder à des boîtes aux
	  lettres distantes, vous devez avoir un accès à
	  un serveur <acronym class="acronym">POP</acronym> ou
	  <acronym class="acronym">IMAP</acronym>.  Ces protocoles permettent aux
	  utilisateurs de se connecter aisément à leurs
	  boîtes aux lettres à partir de machines
	  distantes.  Bien que <acronym class="acronym">POP</acronym> et
	  <acronym class="acronym">IMAP</acronym> permettent, tous les deux,
	  l'accès aux boîtes aux lettres pour les
	  utilisateurs, <acronym class="acronym">IMAP</acronym> offre de nombreux
	  avantages, parmi lesquels:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><acronym class="acronym">IMAP</acronym> peut stocker les messages
	      sur un serveur distant et les
	      récupérer.</p></li><li class="listitem"><p><acronym class="acronym">IMAP</acronym> supporte les mises à
	      jour concourantes.</p></li><li class="listitem"><p><acronym class="acronym">IMAP</acronym> peut être
	      extrêmement utile pour les connexions lentes car il
	      permet aux utilisateurs de récupérer la
	      structure des messages sans les télécharger.
	      Il peut également effectuer des tâches comme
	      la recherche sur le serveur pour réduire les
	      transferts de données entre clients et
	      serveurs.</p></li></ul></div><p>Pour installer un serveur <acronym class="acronym">POP</acronym> ou
	  <acronym class="acronym">IMAP</acronym>, les étapes suivantes doivent
	  être suivies:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Choisissez un serveur <acronym class="acronym">IMAP</acronym> ou
	      <acronym class="acronym">POP</acronym> correspondant à vos
	      besoins.  Les serveurs <acronym class="acronym">POP</acronym> et
	      <acronym class="acronym">IMAP</acronym> suivants sont connus et sont de
	      bons exemples:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="application">qpopper</span>;</p></li><li class="listitem"><p><span class="application">teapop</span>;</p></li><li class="listitem"><p><span class="application">imap-uw</span>;</p></li><li class="listitem"><p><span class="application">courier-imap</span>;</p></li></ul></div></li><li class="step"><p>Installez le &#8220;daemon&#8221;
	      <acronym class="acronym">POP</acronym> ou <acronym class="acronym">IMAP</acronym> de votre
	      choix à partir du catalogue des logiciels
	      portés.</p></li><li class="step"><p>Si cela est nécessaire, modifiez le fichier
	      <code class="filename">/etc/inetd.conf</code> pour charger le
	      serveur <acronym class="acronym">POP</acronym> ou
	      <acronym class="acronym">IMAP</acronym>.</p></li></ol></div><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il doit être noté que
	    <acronym class="acronym">POP</acronym> et <acronym class="acronym">IMAP</acronym>
	    transmettent les données, y compris les noms
	    d'utilisateurs et mot de passe d'authentification en clair.
	    Cela signifie que si vous désirez sécuriser la
	    transmission des données avec ces protocoles, vous
	    devriez considérer l'utilisation de de tunnels
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>.  L'utilisation de tels tunnels est
	    décrite dans la <a class="xref" href="#security-ssh-tunneling" title="15.11.7. Tunnels SSH">Section 15.11.7, « Tunnels SSH »</a>.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="local"></a>28.2.4.2. Accès aux boîtes aux lettres
	  locales</h4></div></div></div><p>Les boîtes aux lettres peuvent être
	  accessibles localement en utilisant un client de messagerie
	  sur le serveur où se trouve la boîte.  Cela
	  peut être fait en employant des applications telles
	  que <span class="application">mutt</span> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-host"></a>28.2.5. Le serveur de courrier</h3></div></div></div><a id="idp82021456" class="indexterm"></a><p>Le serveur de courrier est le nom donné au
	serveur qui est responsable de la transmission et la
	réception du courrier pour votre machine, et
	probablement votre réseau.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="sendmail"></a>28.3. Configuration de <span class="application">sendmail</span></h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp82025424" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> est l'agent de transfert de courrier (Mail
      Transfert Agent&#8212;MTA) par défaut sous FreeBSD.  Le rôle
      de <span class="application">sendmail</span> est d'accepter le
      courrier en provenance des agents de courrier utilisateur (Mail
      User Agents&#8212;MUA) et de délivrer le courrier aux programmes de
      gestion du courrier définis dans son fichier de configuration.
      <span class="application">sendmail</span> peut également accepter
      les connexions réseau et délivrer le courrier dans des
      boîtes aux lettres locales ou le transmettre à un autre
      programme.</p><p><span class="application">sendmail</span> utilise les fichiers de
      configuration suivants:</p><a id="idp82028880" class="indexterm"></a><a id="idp82029776" class="indexterm"></a><a id="idp82030672" class="indexterm"></a><a id="idp82031568" class="indexterm"></a><a id="idp82032464" class="indexterm"></a><a id="idp82033360" class="indexterm"></a><a id="idp82034256" class="indexterm"></a><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Fichier</th><th>Fonction</th></tr></thead><tbody><tr><td>
	      <code class="filename">/etc/mail/access</code>
	    </td><td>Fichier de la base de données d'accès
	      de <span class="application">sendmail</span></td></tr><tr><td>
	      <code class="filename">/etc/mail/aliases</code>
	    </td><td>Alias de boîte aux lettres</td></tr><tr><td>
	      <code class="filename">/etc/mail/local-host-names</code>
	    </td><td>Liste des machines pour lesquelles
	      <span class="application">sendmail</span> accepte du
	      courrier</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailer.conf</code>
	    </td><td>Configuration du programme de gestion du
	      courrier</td></tr><tr><td>
	      <code class="filename">/etc/mail/mailertable</code>
	    </td><td>Table de livraison du courrier</td></tr><tr><td>
	      <code class="filename">/etc/mail/sendmail.cf</code>
	    </td><td>Fichier de configuration principal
	      de <span class="application">sendmail</span></td></tr><tr><td>
	      <code class="filename">/etc/mail/virtusertable</code>
	    </td><td>Table des domaines et utilisateurs virtuels</td></tr></tbody></table></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82058064"></a>28.3.1. <code class="filename">/etc/mail/access</code></h3></div></div></div><p>La base de données d'accès définit
      quelle(s) machine(s) ou adresses IP ont accès au serveur de
      courrier local et quel type d'accès ils ont.
      Les machines peuvent être listées avec <code class="option">OK</code>,
      <code class="option">REJECT</code>, <code class="option">RELAY</code> ou simplement
      transférées à la routine de gestion des erreurs
      <span class="application">sendmail</span> avec une erreur donnée.
      Les machines qui sont listées avec <code class="option">OK</code>, qui est le
      comportement par défaut, sont autorisées à envoyer du
      courrier à cette machine dès que la destination finale
      du courrier est la machine locale.  Les machines listées avec
      <code class="option">REJECT</code> se verront rejeter pour toute connexion
      au serveur.  Les machines présentes avec l'option
      <code class="option">RELAY</code> sont autorisées à envoyer du
      courrier à n'importe quelle destination par
      l'intermédiaire de ce serveur de courrier.</p><div class="example"><a id="idp82062032"></a><div class="example-title">Exemple 28.1. Configuration de la base de données d'accès
	de <span class="application">sendmail</span></div><div class="example-contents"><pre class="programlisting">cyberspammer.com                550 We don't accept mail from spammers
FREE.STEALTH.MAILER@            550 We don't accept mail from spammers
another.source.of.spam          REJECT
okay.cyberspammer.com           OK
128.32                          RELAY</pre></div></div><br class="example-break" /><p>Dans cet exemple nous avons cinq entrées.
     Les émetteurs de courrier qui correspondent à la partie
     gauche de la table sont affectés par l'action donnée
     sur la partie droite de la table.  Les deux premiers
     exemples donnent un code d'erreur à la routine de gestion
     d'erreur de <span class="application">sendmail</span>.
     Le message est affiché sur la machine distante quand un courrier
     électronique correspond à la partie gauche de la table.
     L'entrée suivante rejette le courrier en provenance
     d'une machine précise de l'Internet,
     <code class="systemitem">another.source.of.spam</code>.  L'entrée suivante
     accepte les connexions à partir de la machine
     <code class="systemitem">okay.cyberspammer.com</code>, qui est plus précis
     que le <code class="systemitem">cyberspammer.com</code> de la ligne
     précédente.  Les correspondances plus spécifiques
     priment sur les moins précises.  La dernière
     entrée autorise le relais du courrier électronique en
     provenance de machines avec une adresse IP qui commence par
     <code class="systemitem">128.32</code>.  Ces machines seront en mesure
     d'envoyer du courrier destiné à d'autres
     serveurs de courrier par l'intermédiaire de ce serveur de
     courrier.</p><p>Quand ce fichier est mis à jour, vous devez exécuter
     la commande <code class="command">make</code> dans
     <code class="filename">/etc/mail/</code> pour mettre à jour la base
     de données.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82067280"></a>28.3.2. <code class="filename">/etc/mail/aliases</code></h3></div></div></div><p>La base de données d'alias contient une liste
      de boîtes aux lettres virtuelles dont le contenu sera transmis
      à d'autres utilisateurs, fichiers, programmes ou d'autres
      alias.  Voici quelques exemples qui peuvent être
      utilisés dans <code class="filename">/etc/mail/aliases</code>:</p><div class="example"><a id="idp82068944"></a><div class="example-title">Exemple 28.2. Exemple de base de données d'alias</div><div class="example-contents"><pre class="programlisting">root: localuser
ftp-bugs: joe,eric,paul
bit.bucket:  /dev/null
procmail: "|/usr/local/bin/procmail"</pre></div></div><br class="example-break" /><p>Le format du fichier est simple; le nom de la boîte
      aux lettres à gauche et la cible sur la droite.
      Le premier exemple transfère la boîte aux lettres
      <code class="systemitem">root</code> vers la boîte aux lettres
      <code class="systemitem">localuser</code>, qui est ensuite recherchée
      dans la base de données d'alias.  Si aucune correspondance n'est
      trouvée alors le message est délivré à
      l'utilisateur locale
      <code class="systemitem">localuser</code>.  L'exemple suivant montre une
      liste de correspondance.  Un courrier envoyé à la
      boîte aux lettres <code class="systemitem">ftp-bugs</code> sera
      délivré aux trois boites locales <code class="systemitem">joe</code>,
      <code class="systemitem">eric</code>, et <code class="systemitem">paul</code>.  Notez
      qu'une boîte aux lettres distante comme <code class="literal">user@exemple.com</code>/procmail
      pourra
      être spécifiée.  L'exemple suivant montre comment
      transférer le courrier dans un fichier, dans notre cas
      <code class="filename">/dev/null</code>.  Le dernier exemple montre
      l'envoi du courrier à un programme, dans le cas présent
      le message est écrit sur l'entrée standard de
      <code class="filename">/usr/local/bin/procmail</code> par
      l'intermédiaire d'un tube <span class="trademark">UNIX</span>®.</p><p>Quand ce fichier est mis à jour, vous devez
      exécuter la commande <code class="command">make</code> dans
      <code class="filename">/etc/mail/</code> pour mettre à jour
      la base de données.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82081360"></a>28.3.3. <code class="filename">/etc/mail/local-host-names</code></h3></div></div></div><p>C'est la liste des machines pour lesquelles <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a>
      accepte du courrier comme s'il était destiné
      à la machine locale.
      Placez-y tous les domaines ou machines pour lesquels
      <span class="application">sendmail</span> doit recevoir du courrier.
      Par exemple, si le serveur de courrier devait accepter du
      courrier pour le domaine <code class="systemitem">exemple.com</code> et la machine
      <code class="systemitem">mail.exemple.com</code>, sont
      <code class="filename">local-host-names</code> ressemblera à quelque
      chose comme ceci:</p><pre class="programlisting">exemple.com
mail.exemple.com</pre><p>Quand ce fichier est mis à jour, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sendmail</span>(8)</span></a> doit
      être relancé pour lire les changements.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82086864"></a>28.3.4. <code class="filename">/etc/mail/sendmail.cf</code></h3></div></div></div><p>Fichier principal de configuration de
      <span class="application">sendmail</span>,
      <code class="filename">sendmail.cf</code> contrôle le comportement
      général de <span class="application">sendmail</span>,
      y compris tout depuis la réécriture des adresses
      de courrier jusqu'à l'envoi de message de rejet aux
      serveurs de courrier distants.  Naturellement, avec tant de
      différentes activités, ce fichier de configuration
      est relativement complexe et son étude détaillée
      n'est pas le but de cette section.  Heureusement, ce fichier a
      rarement besoin d'être modifié pour les serveurs de courrier
      standards.</p><p>Le fichier de configuration principal de
      <span class="application">sendmail</span> peut être
      créé à partir de macros <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> qui
      définissent les fonctions
      et le comportement de <span class="application">sendmail</span>.
      Veuillez consulter
      <code class="filename">/usr/src/contrib/sendmail/cf/README</code> pour
      plus de détails.</p><p>Quand des modifications à ce fichier sont apportées,
      <span class="application">sendmail</span> doit être
      redémarré pour que les changements prennent effet.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82100816"></a>28.3.5. <code class="filename">/etc/mail/virtusertable</code></h3></div></div></div><p>La table <code class="filename">virtusertable</code> fait
      correspondre les adresses de courrier électronique pour des
      domaines virtuels et les boîtes aux lettres avec des
      boîtes aux lettres réelles.  Ces boîtes aux lettres
      peuvent être locales, distantes, des alias définis dans
      <code class="filename">/etc/mail/aliases</code> ou des fichiers.</p><div class="example"><a id="idp82102736"></a><div class="example-title">Exemple 28.3. Exemple de correspondance de domaine virtuel de
	courrier</div><div class="example-contents"><pre class="programlisting">root@exemple.com                root
postmaster@exemple.com          postmaster@noc.exemple.net
@exemple.com                    joe</pre></div></div><br class="example-break" /><p>Dans l'exemple ci-dessus, nous avons une correspondance pour
      un domaine <code class="systemitem">exemple.com</code>.  Ce fichier est traité
      jusqu'à trouver la première correspondance.
      Le premier élément fait correspondre <code class="literal">root@exemple.com</code>
      à la boîte aux lettres root locale.  L'entrée
      suivante fait correspondre <code class="literal">postmaster@exemple.com</code> à la
      boîte aux lettres postmaster sur la machine <code class="systemitem">noc.exemple.net</code>.
      Et enfin, si un courrier en provenance de <code class="systemitem">exemple.com</code> n'a pas
      trouvé de correspondance, il correspondra à la
      dernière ligne, qui régira tous les autres messages
      adressés à
      quelqu'un du domaine <code class="systemitem">exemple.com</code>.
      La correspondance sera la boîte aux lettres locale
      <code class="systemitem">joe</code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-changingmta"></a>28.4. Changer votre agent de transfert de courrier</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Andrew</span> <span class="surname">Boothman</span></span>. </span></div><div><span class="authorgroup">Information provenant de courriers électroniques
	    écrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Gregory</span> <span class="surname">Neil Shapiro</span></span>. </span></div></div></div><a id="idp82112208" class="indexterm"></a><p>Comme mentionné précédemment,
      FreeBSD est fournit avec <span class="application">sendmail</span>
      comme agent de transfert du courrier (MTA - Mail Transfert
      Agent).  Il est donc par défaut
      en charge de votre courrier sortant et entrant.</p><p>Cependant, pour une variété de raison,
      certains administrateurs système désirent
      changer le MTA de leur système.  Ces raisons vont de la
      simple envie d'essayer un autre agent au besoin d'une fonction
      ou ensemble spécifique qui dépend d'un autre gestionnaire de
      courrier.  Heureusement, quelle qu'en soit la raison, FreeBSD
      rend le changement aisé.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82118736"></a>28.4.1. Installer un nouveau MTA</h3></div></div></div><p>Vous avez un vaste choix d'agent disponible.  Un bon
	point de départ est le <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des
	logiciels portés de FreeBSD</a> où vous pourrez
	en trouver un grand nombre.
	Bien évidemment vous êtes libres
	d'utiliser n'importe quel agent de n'importe quelle origine,
	dès que vous pouvez le faire fonctionner sous FreeBSD.</p><p>Commencez par installer votre nouvel agent.  Une fois ce
	dernier installé, il vous donne une chance de décider s'il
	remplit vraiment vos besoins, et vous donne l'opportunité
	de configurer votre nouveau logiciel avant de remplacer
	<span class="application">sendmail</span>.  Quand vous faites cela,
	vous devez être sûr que l'installation du nouveau
	logiciel ne tentera pas de remplacer des binaires du système
	comme <code class="filename">/usr/bin/sendmail</code>.  Sinon, votre
	nouveau logiciel sera mis en service avant d'avoir pu
	le configurer.</p><p>Veuillez vous référer à la documentation de l'agent choisi
	pour de l'information sur comment configurer le logiciel que
	vous avez choisi.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82121936"></a>28.4.2. Désactiver <span class="application">sendmail</span></h3></div></div></div><p>La procédure utilisée pour lancer
	<span class="application">sendmail</span> a changé de façon
	significative entre la 4.5-RELEASE et la 4.6-RELEASE.
	Par conséquent, la procédure utilisée pour
	la désactiver est légèrement
	différente.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82123600"></a>28.4.2.1. FreeBSD 4.5-STABLE d'avant le 2002/4/4 et plus ancienne
	  (y compris 4.5-RELEASE et précédentes)</h4></div></div></div><p>Ajoutez:</p><pre class="programlisting">sendmail_enable="NO"</pre><p>dans <code class="filename">/etc/rc.conf</code>.  Cela
	    désactivera le service de courrier entrant de
	    <span class="application">sendmail</span> mais si
	    <code class="filename">/etc/mail/mailer.conf</code> (voir plus bas)
	    n'est pas modifié, <span class="application">sendmail</span>
	    sera toujours utilisé pour envoyer du courrier
	    électronique.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82127184"></a>28.4.2.2. FreeBSD 4.5-STABLE d'après le 2002/4/4
	  (y compris 4.6-RELEASE et suivantes)</h4></div></div></div><p>Afin de complètement désactiver
	  <span class="application">sendmail</span> vous devez utiliser</p><pre class="programlisting">sendmail_enable="NONE"</pre><p>dans <code class="filename">/etc/rc.conf.</code></p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous désactivez le service d'envoi de courrier de
	    <span class="application">sendmail</span> de cette manière, il
	    est important que vous le remplaciez par un système de
	    courrier alternatif fonctionnant parfaitement.  Si vous
	    choisissez de ne pas le faire, des fonctions du système
	    comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=periodic&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">periodic</span>(8)</span></a> ne seront pas en mesure de délivrer
	    leur résultat par courrier électronique comme elles
	    s'attendent normalement à le faire.  De nombreux
	    composants de votre système s'attendent à
	    avoir un système
	    compatible à <span class="application">sendmail</span> en
	    fonctionnement.  Si des applications continuent à utiliser
	    les binaires de <span class="application">sendmail</span> pour
	    essayer d'envoyer du courrier électronique après la
	    désactivation, le courrier pourra aller dans une file
	    d'attente inactive, et pourra n'être jamais
	    livré.</p></div><p>Si vous voulez uniquement désactiver le service de
	  réception de courrier de <span class="application">sendmail</span>
	  vous devriez fixer</p><pre class="programlisting">sendmail_enable="NO"</pre><p>dans <code class="filename">/etc/rc.conf</code>.  Plus
	  d'information sur les options de démarrage de
	  <span class="application">sendmail</span> est disponible à partir
	  de la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.sendmail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc.sendmail</span>(8)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82140112"></a>28.4.3. Lancement de votre nouvel agent au démarrage</h3></div></div></div><p>Vous pourrez avoir le choix entre deux méthodes pour
	lancer votre nouvel agent au démarrage, encore une fois en
	fonction de la version de FreeBSD dont vous disposez.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82141136"></a>28.4.3.1. FreeBSD 4.5-STABLE d'avant le 2002/4/11
	  (y compris 4.5-RELEASE et précédentes)</h4></div></div></div><p>Ajouter une procédure dans
	  <code class="filename">/usr/local/etc/rc.d/</code> qui
	  se termine en <code class="filename">.sh</code> et qui est
	  exécutable par <code class="systemitem">root</code>.  La
	  procédure devrait accepter les paramètres
	  <code class="literal">start</code> et <code class="literal">stop</code>.
	  Au moment du démarrage les procédures
	  système exécuteront la commande</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh start</pre><p>que vous pouvez également utiliser pour démarrer le
	  serveur.  Au moment de l'arrêt du système, les
	  procédures système utiliseront l'option
	  <code class="literal">stop</code> en exécutant la commande</p><pre class="programlisting">/usr/local/etc/rc.d/supermailer.sh stop</pre><p>que vous pouvez également utiliser manuellement pour
	  arrêter le serveur quand le système est en
	  fonctionnement.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82146512"></a>28.4.3.2. FreeBSD 4.5-STABLE d'après le 2002/4/11
	  (y compris 4.6-RELEASE et suivantes)</h4></div></div></div><p>Avec les versions suivantes de FreeBSD, vous pouvez
	  utiliser la méthode ci-dessus ou fixer</p><pre class="programlisting">mta_start_script="nomfichier"</pre><p>dans <code class="filename">/etc/rc.conf</code>, où
	  <em class="replaceable"><code>nomfichier</code></em> est le nom
	  d'une procédure que vous voulez exécuter
	  au démarrage pour lancer votre agent.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82149328"></a>28.4.4. Remplacer <span class="application">sendmail</span> comme
	gestionnaire du courrier du système par
	défaut</h3></div></div></div><p>Le programme <span class="application">sendmail</span> est tellement
	omniprésent comme logiciel standard sur les
	systèmes <span class="trademark">UNIX</span>® que certains programmes supposent qu'il est tout
	simplement déjà installé et configuré.
	Pour cette raison, de nombreux agents alternatifs fournissent
	leur propre implémentation compatible avec l'interface en
	ligne de commande de <span class="application">sendmail</span>;
	cela facilite leur utilisation comme remplaçant pour
	<span class="application">sendmail</span>.</p><p>Donc, si vous utilisez un programme alternatif, vous
	devrez vérifier que le logiciel essayant d'exécuter
	les binaires standards de <span class="application">sendmail</span>
	comme <code class="filename">/usr/bin/sendmail</code> exécute
	réellement l'agent que vous avez choisi à la place.
	Heureusement, FreeBSD fournit un système appelé
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mailwrapper&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mailwrapper</span>(8)</span></a> qui remplit ce travail pour vous.</p><p>Quand <span class="application">sendmail</span> fonctionne tel
	qu'il a été installé, vous
	trouverez quelque chose comme ce qui suit dans
	<code class="filename">/etc/mail/mailer.conf</code>:</p><pre class="programlisting">sendmail	 /usr/libexec/sendmail/sendmail
send-mail	/usr/libexec/sendmail/sendmail
mailq		/usr/libexec/sendmail/sendmail
newaliases	/usr/libexec/sendmail/sendmail
hoststat	/usr/libexec/sendmail/sendmail
purgestat	/usr/libexec/sendmail/sendmail</pre><p>Cela signifie que lorsque l'une des commandes courantes
	(comme <code class="filename">sendmail</code> lui-même) est
	lancée, le système invoque en fait une copie de
	&#8220;mailwrapper&#8221; appelée
	<code class="filename">sendmail</code>, qui lit
	<code class="filename">mailer.conf</code> et
	exécute <code class="filename">/usr/libexec/sendmail/sendmail</code>
	à la place.  Ce système rend aisé le changement
	des binaires qui sont réellement exécutés
	quand les fonctions de <code class="filename">sendmail</code> par
	défaut sont invoquées.</p><p>Donc si vous avez voulu que
	<code class="filename">/usr/local/supermailer/bin/sendmail-compat</code>
	soit lancé en place de <span class="application">sendmail</span>,
	vous pourrez modifier <code class="filename">/etc/mail/mailer.conf</code>
	de cette façon:</p><pre class="programlisting">sendmail	 /usr/local/supermailer/bin/sendmail-compat
send-mail	/usr/local/supermailer/bin/sendmail-compat
mailq		/usr/local/supermailer/bin/mailq-compat
newaliases	/usr/local/supermailer/bin/newaliases-compat
hoststat	/usr/local/supermailer/bin/hoststat-compat
purgestat	/usr/local/supermailer/bin/purgestat-compat</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82164688"></a>28.4.5. Pour en terminer</h3></div></div></div><p>Une fois que vous avez tout configuré de la façon
	  dont vous le désirez, vous devriez soit tuer les processus de
	  <span class="application">sendmail</span> dont vous n'avez plus
	  besoin et lancer les processus appartenant à votre
	  nouveau logiciel, ou tout simplement redémarrer.  Le
	  redémarrage vous donnera l'opportunité de vous assurer
	  que vous avez correctement configuré votre système
	  pour le lancement automatique de votre nouvel agent au
	  démarrage.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-trouble"></a>28.5. Dépannage</h2></div></div></div><a id="idp82167248" class="indexterm"></a><div class="qandaset"><a id="idp82168400"></a><dl><dt>28.5.1. <a href="#idp82168656">Pourquoi faut-il que j'utilise le FQDN (&#8220;Fully
	  Qualified Domain Name&#8221; - nom complet de machine) pour
	  les machines de mon site?</a></dt><dt>28.5.2. <a href="#idp82178768">sendmail affiche le message
	  mail loops back to myself</a></dt><dt>28.5.3. <a href="#idp82192208">Comment puis-je faire tourner un serveur de courrier
	  électronique avec une connexion
	  téléphonique PPP</a></dt><dt>28.5.4. <a href="#idp82206288">Pourquoi j'obtiens le message d'erreur
	    Relaying Denied à chaque
	    fois que j'envoie du courrier à partir d'autres
	    machines?</a></dt></dl><table border="0" style="width: 100%;"><colgroup><col align="left" width="1%" /><col /></colgroup><tbody><tr class="question"><td align="left" valign="top"><a id="idp82168656"></a><a id="idp82168912"></a><p><strong>28.5.1.</strong></p></td><td align="left" valign="top"><p>Pourquoi faut-il que j'utilise le FQDN (&#8220;Fully
	  Qualified Domain Name&#8221; - nom complet de machine) pour
	  les machines de mon site?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Vous vous rendrez probablement compte que la machine est
	  en fait dans un domaine différent; par exemple, si vous
	  êtes dans le domaine <code class="systemitem">foo.bar.edu</code>
	  et que vous voulez atteindre la machine <code class="systemitem">mumble</code>
	  du domaine <code class="systemitem">bar.edu</code>,
	  vous devrez utiliser son nom de machine complet,
	  <code class="systemitem">mumble.bar.edu</code>, au lieu de
	  juste <code class="systemitem">mumble</code>.</p><p>C'était traditionnellement autorisé par les
	  résolveurs <span class="application">BIND</span><a id="idp82173264" class="indexterm"></a> BSD.
	  Néanmoins, la version de <span class="application">BIND</span>
	  qui est maintenant livrée avec FreeBSD ne sait pas
	  compléter les noms de machines abrégés autrement
	  qu'avec le nom de votre domaine.  Donc le nom non
	  qualifié <code class="systemitem">mumble</code> doit correspondre
	  à <code class="systemitem">mumble.foo.bar.edu</code>,
	  sans quoi il sera recherché dans le domaine racine.</p><p>Cela diffère du comportement précédent,
	  où la recherche se prolongeait à
	  <code class="systemitem">mumble.bar.edu</code>, puis
	  <code class="systemitem">mumble.edu</code>.
	  Consultez la RFC 1535 pour savoir pourquoi cela était
	  considéré comme une mauvaise pratique, voire
	  même un trou de sécurité.</p><p>Comme solution, vous pouvez mettre la ligne:

	  </p><pre class="programlisting">search foo.bar.edu bar.edu</pre><p>

	  à la place de:

	  </p><pre class="programlisting">domain foo.bar.edu</pre><p>

	  dans votre fichier <code class="filename">/etc/resolv.conf</code>.
	  Cependant, assurez-vous que la recherche ne franchit pas la
	  &#8220;limite entre l'administration locale et
	  publique&#8221;, selon l'expression de la RFC 1535.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp82178768"></a><a id="idp82179024"></a><p><strong>28.5.2.</strong></p></td><td align="left" valign="top"><p><span class="application">sendmail</span> affiche le message
	  <span class="errorname">mail loops back to myself</span></p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>La réponse donnée dans la FAQ de
	  <span class="application">sendmail</span> est la suivante:</p><pre class="programlisting">J'obtiens les messages d'erreur suivant:

553 MX list for domain.net points back to relay.domain.net
554 &lt;user@domain.net&gt;... Local configuration error

Comment puis-je résoudre ce problème?

Vous avez demandé que le courrier pour un domaine (e.g., domain.net)
soit transmis à une machine donnée (dans ce cas précis, relay.domain.net)
en utilisant un enregistrement MX<a id="idp82181584" class="indexterm"></a>, mais la machine relais ne se
connaît pas elle-même comme domain.net.  Ajoutez domain.net à
/etc/mail/local-host-names [connu sous le nom /etc/sendmail.cw dans les versionsantérieure à 8.10] (si vous utilisez FEATURE(use_cw_file))
ou ajoutez &#8220;Cw domain.net&#8221; à
/etc/mail/sendmail.cf.</pre><p>La FAQ de <span class="application">sendmail</span> peut être trouvée
	  à l'adresse <code class="uri"><a class="uri" href="http://www.sendmail.org/faq/" target="_top">http://www.sendmail.org/faq/</a></code> et
	  sa lecture est recommandée si vous voulez
	  &#8220;bidouiller&#8221; votre configuration du courrier
	  électronique.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="idp82192208"></a><a id="idp82192464"></a><p><strong>28.5.3.</strong></p></td><td align="left" valign="top"><p>Comment puis-je faire tourner un serveur de courrier
	  électronique avec une connexion
	  téléphonique PPP<a id="idp82192976" class="indexterm"></a></p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Vous voulez connecter une machine FreeBSD du réseau
	  local à l'Internet.  Cette machine servira de passerelle de
	  courrier électronique pour le réseau local.
	  La connexion PPP n'est pas dédiée.</p><p>Il y a au moins deux façons de faire.  L'une d'elle
	  est d'utiliser UUCP<a id="idp82194640" class="indexterm"></a>.</p><p>L'autre méthode étant d'obtenir un serveur Internet
	  constamment connecté pour qu'il vous fournisse les services
	  MX pour votre domaine.  Par exemple, si le domaine de votre
	  compagnie est <code class="systemitem">exemple.com</code> et votre
	  fournisseur d'accès a configuré
	  <code class="systemitem">exemple.net</code> pour fournir un MX secondaire
	  pour votre domaine:</p><pre class="programlisting">exemple.com.            MX        10      exemple.com.
                      MX        20      exemple.net.</pre><p>Une seule machine devrait être
	  spécifiée comme destinataire final (ajoutez
	  <code class="literal">Cw exemple.com</code> au fichier
	  <code class="filename">/etc/mail/sendmail.cf</code> de
	  <code class="systemitem">exemple.com</code>).</p><p>Quand le <code class="command">sendmail</code> expéditeur tente
	  de vous délivrer du courrier, il essaiera de se connecter
	  à votre serveur (<code class="systemitem">exemple.com</code>)
	  via votre liaison par modem.  Ce qui échouera très
	  probablement par dépassement de délai puisque
	  vous n'êtes pas en ligne.  Le programme
	  <span class="application">sendmail</span> enverra automatiquement
	  le courrier au site MX secondaire<a id="idp82200528" class="indexterm"></a>, i.e. votre fournisseur
	  d'accès (<code class="systemitem">exemple.net</code>).
	  Le site MX secondaire essayera périodiquement de se
	  connecter à votre machine pour expédier le
	  courrier au site MX primaire (<code class="systemitem">exemple.com</code>).</p><p>Vous pourrez vouloir utiliser quelque chose comme ceci
	  comme procédure de connexion:</p><pre class="programlisting">#!/bin/sh
# Mettez-moi dans /usr/local/bin/pppmyisp
( sleep 60 ; /usr/sbin/sendmail -q ) &amp;
/usr/sbin/ppp -direct pppmyisp</pre><p>Si vous avez l'intention de définir une
	  procédure de connexion particulière pour un
	  utilisateur, vous pourrez utiliser
	  <code class="command">sendmail -qRexemple.com</code> à la place
	  de la procédure ci-dessus.  Cela forcera le traitement
	  immédiat de tout le courrier dans votre file d'attente
	  pour <code class="systemitem">exemple.com</code>.</p><p>On peut encore affiner la configuration comme
	  suit:</p><p>Message emprunté à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">liste de diffusion pour les fournisseurs d'accès Internet utilisant FreeBSD</a>.</p><pre class="programlisting">&gt; Nous fournissons un MX secondaire à un
client.  Le client se connecte
&gt; à notre service automatiquement plusieurs fois par jour pour acheminer
&gt; le courrier sur son MX primaire (nous n'appelons pas son site lorsque
&gt; du courrier pour ses domaines arrive).  Notre sendmail envoie le courrier de la
&gt; file d'attente toutes les demi-heures.  Pour l'instant, il doit rester
&gt; une demi-heure en ligne pour être sûr que tout le courrier soit
&gt; arrivé au MX primaire.
&gt;
&gt; Y-a-t-il une commande qui permette de dire à sendmail d'envoyer
&gt; sur-le-champ tout le courrier? L'utilisateur n'a évidemment pas
&gt; les droits super-utilisateur sur la machine.

Dans la section &#8220;privacy flags&#8221; (indicateurs de
confidentialité) de sendmail.cf, il y a la définition Opgoaway,restrictqrun

Supprimer restrictqrun permet à d'autres utilisateurs que le
super-utilisateur de lancer le traitement de la file d'attente.  Vous
pouvez aussi redéfinir les MXs.  Nous sommes le premier MX pour les
utilisateurs de ce type, et nous avons défini:

# Si nous sommes le meilleur MX pour une machine, essayer directement
# au lieu d'émettre des messages d'erreur de configuration locale.
OwTrue

De cette façon, un site distant vous enverra directement le courrier,
sans essayer de se connecter chez votre client.  Vous le lui
transmettez ensuite.  Cela ne marche qu'avec les &#8220;machines&#8221;,
votre client doit nommer son serveur de courrier
&#8220;client.com&#8221; aussi bien que
&#8220;machine.client.com&#8221; dans le DNS.  Mettez seulement un
enregistrement A pour &#8220;client.com&#8221;.</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="idp82206288"></a><a id="idp82206544"></a><p><strong>28.5.4.</strong></p></td><td align="left" valign="top"><p>Pourquoi j'obtiens le message d'erreur
	    <span class="errorname">Relaying Denied</span> à chaque
	    fois que j'envoie du courrier à partir d'autres
	    machines?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Dans l'installation par défaut de FreeBSD,
	    <span class="application">sendmail</span> est configuré pour
	    envoyer du courrier uniquement à partir de la machine
	    sur laquelle il tourne.  Par exemple, si un serveur <acronym class="acronym">POP</acronym>
	    est disponible, alors les utilisateurs pourront retirer leur
	    courrier depuis l'école, le travail, ou toute autre
	    machine distante mais ils ne seront toujours pas en mesure
	    d'envoyer du courrier électronique à partir de machines
	    extérieures.  Généralement, quelques
	    instants après une tentative, un courrier
	    électronique sera envoyé par le
	    <span class="application">MAILER-DAEMON</span> avec un message
	    <span class="errorname">5.7 Relaying Denied</span>.</p><p>Il y a plusieurs façons d'y remédier.
	    La solution la plus directe est de mettre l'adresse
	    de votre fournisseur d'accès dans un fichier de domaine
	    à relayer <code class="filename">/etc/mail/relay-domains</code>.
	    Une façon rapide de le faire serait:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo "votre.fai.exemple.com" &gt; /etc/mail/relay-domains</code></strong></pre><p>Après avoir créé ou édité
	    ce fichier vous devez
	    redémarrer <span class="application">sendmail</span>.
	    Cela fonctionne parfaitement si vous êtes
	    l'administrateur d'un serveur et vous ne désirez pas
	    envoyer de courrier localement, ou que vous désiriez
	    utiliser un système ou un client &#8220;clic-bouton&#8221;
	    sur une autre machine ou un autre FAI.  C'est également
	    très utile si vous avez uniquement qu'un ou deux
	    comptes de courrier électronique configurés.
	    S'il y a un grand nombre d'adresses à ajouter, vous
	    pouvez tout simplement ouvrir ce fichier dans votre
	    éditeur de texte favori et ensuite ajouter les domaines,
	    un par ligne:</p><pre class="programlisting">votre.fai.exemple.com
autre.fai.exemple.net
utilisateurs-fai.exemple.org
www.exemple.org</pre><p>Désormais tout courrier envoyé vers votre
	    système, par n'importe quelle machine de cette liste
	    (en supposant que l'utilisateur possède un compte sur
	    votre système), sera accepté.  C'est un bon
	    moyen d'autoriser aux utilisateurs d'envoyer du courrier
	    électronique à distance depuis votre système
	    sans autoriser l'utilisation de votre système pour l'envoi de
	    courrier électronique non sollicité (SPAM).</p></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-advanced"></a>28.6. Sujets avancés</h2></div></div></div><p>LA fonction suivante couvre des sujets plus avancés
      comme la configuration du courrier électronique pour
      l'intégralité de votre domaine.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-config"></a>28.6.1. Basic Configuration</h3></div></div></div><a id="idp82228048" class="indexterm"></a><p>Sans aucune configuration, vous devrez être en
	mesure d'envoyer du courrier électronique à des machines
	extérieures à partir du moment où vous avez
	configuré <code class="filename">/etc/resolv.conf</code> ou que
	vous avez votre propre serveur de noms.  Si vous désirez
	que le courrier pour votre machine soit délivré au
	serveur de courrier (e.g., <span class="application">sendmail</span>) sur
	votre propre machine FreeBSD, il y a deux méthodes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Faites tourner votre propre serveur de noms et
	    possédez votre propre domaine.  Par exemple <code class="systemitem">FreeBSD.org</code></p></li><li class="listitem"><p>Faire délivrer le courrier directement sur votre
	    machine.  Cela est possible en délivrant directement le
	    courrier à la machine sur lequel pointe le DNS pour le
	    courrier qui vous est destiné.  Par exemple <code class="systemitem">exemple.FreeBSD.org</code>.</p></li></ul></div><a id="idp82233296" class="indexterm"></a><p>Indépendamment de la méthode que vous choisissez, afin
	d'avoir le courrier délivré directement
	à votre machine, elle doit avoir une adresse IP statique
	permanente (et non pas une adresse dynamique, comme avec la
	plupart des connexions PPP par modem).  Si vous êtes
	derrière un coupe-feu, il doit autoriser le trafic SMTP en
	votre direction.  Si vous voulez recevoir directement le
	courrier sur votre machine, vous devez être sûrs
	de l'une de ces deux choses:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Assurez-vous que l'enregistrement MX<a id="idp82234960" class="indexterm"></a> (le nombre le
	    plus bas) de votre DNS pointe sur l'adresse IP de votre
	    machine.</p></li><li class="listitem"><p>Assurez-vous qu'il n'y a pas d'entrée MX pour votre
	    machine dans votre DNS.</p></li></ul></div><p>Une des deux conditions précédentes vous
	permettra de recevoir directement le courrier pour votre
	machine.</p><p>Essayez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hostname</code></strong>
exemple.FreeBSD.org
<code class="prompt">#</code> <strong class="userinput"><code>host exemple.FreeBSD.org</code></strong>
exemple.FreeBSD.org has address 204.216.27.XX</pre><p>Si c'est la réponse que vous obtenez, le courrier
	adressé à
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:votreindentifiant@exemple.FreeBSD.org">votreindentifiant@exemple.FreeBSD.org</a>&gt;</code>
	arrivera sans problème (en supposant que
	<span class="application">sendmail</span> fonctionne correctement
	sur <code class="systemitem">exemple.FreeBSD.org</code>).</p><p>Si au lieu de cela vous obtenez quelque chose de similaire
	à ceci:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>host exemple.FreeBSD.org</code></strong>
exemple.FreeBSD.org has address 204.216.27.XX
exemple.FreeBSD.org mail is handled (pri=10) by hub.FreeBSD.org</pre><p>Tout le courrier adressé à votre machine
	(<code class="systemitem">exemple.FreeBSD.org</code>)
	arrivera sur <code class="systemitem">hub</code> adressé au même
	utilisateur au lieu d'être directement
	envoyé à votre machine.</p><p>L'information précédente est
	gérée par votre serveur DNS.  L'enregistrement du
	DNS qui contient l'information de routage de courrier est
	l'entrée MX (<span class="emphasis"><em>M</em></span>ail
	e<span class="emphasis"><em>X</em></span>change).  S'il n'y pas d'enregistrement MX,
	le courrier sera directement envoyé à la machine
	en utilisant son adresse IP.</p><p>Voici ce que fut à un moment donné
	l'entrée MX pour <code class="systemitem">freefall.FreeBSD.org</code>:</p><pre class="programlisting">freefall		MX	30	mail.crl.net
freefall		MX	40	agora.rdrop.com
freefall		MX	10	freefall.FreeBSD.org
freefall		MX	20	who.cdrom.com</pre><p>Comme vous pouvez le voir, <code class="systemitem">freefall</code>
	avait plusieurs entrées MX.  L'entrée MX dont le
	numéro est le plus bas est la machine qui reçoit
	directement le courrier si elle est disponible; si elle n'est
	pas accessible pour diverses raisons, les autres (parfois
	appelées &#8220;MX de secours&#8221;) acceptent
	temporairement les messages, et les transmettent à une
	machine de numéro plus faible quand elle devient
	disponible, et par la suite à la machine de numéro le
	plus bas.</p><p>Les sites MX alternatifs devraient avoir une connexion
	Internet séparée de la votre afin d'être
	les plus utiles.  Votre fournisseur d'accès ou tout autre
	site amical ne devrait pas avoir de problème pour vous
	fournir ce service.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-domain"></a>28.6.2. Courrier pour votre domaine</h3></div></div></div><p>Pour configurer un serveur de courrier vous devez faire
	en sorte que tout le courrier à destination des diverses
	stations de travail lui soit envoyé.  Concrètement,
	vous voulez &#8220;revendiquer&#8221; tout courrier pour
	n'importe quelle machine de votre domaine (dans ce cas
	<code class="systemitem">*.FreeBSD.org</code>) et le détourner
	vers votre serveur de courrier de sorte que vos utilisateurs
	puissent recevoir leur courrier sur le serveur de courrier
	principal.</p><a id="idp82257616" class="indexterm"></a><p>Pour rendre les choses plus aisées, un compte
	utilisateur avec le même <span class="emphasis"><em>nom
	d'utilisateur</em></span> devrait exister sur les deux
	machines.  Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=adduser&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">adduser</span>(8)</span></a> pour ce
	faire.</p><p>Le serveur de courrier que vous utiliserez sera
	défini comme &#8220;mail exchanger&#8221; pour chaque
	station de travail du réseau.  Cela est fait dans votre
	configuration de DNS de cette manière:</p><pre class="programlisting">exemple.FreeBSD.org	A	204.216.27.XX		; Station de travail
			MX	10 hub.FreeBSD.org	; Serveur de courrier</pre><p>Cela redirigera le courrier pour votre station de travail
	au serveur de courrier quelque soit la machine sur laquelle
	pointe l'enregistrement A.  Le courrier est envoyé sur la
	machine MX.</p><p>Vous ne pouvez le faire vous-même que si vous
	gérez un serveur de noms.  Si ce n'est pas le cas, ou que vous
	ne pouvez avoir votre propre serveur DNS, parlez-en à
	votre fournisseur d'accès ou à celui qui fournit
	votre DNS.</p><p>Si vous faites de l'hébergement virtuel du courrier
	électronique, l'information suivante sera utile.  Pour cet
	exemple, nous supposerons que vous avez un client qui possède
	son propre domaine, dans notre cas <code class="systemitem">client1.org</code>, et vous voulez
	que tout le courrier pour <code class="systemitem">client1.org</code> arrive sur votre
	serveur de courrier, <code class="systemitem">mail.mamachine.com</code>.
	L'entrée dans votre DNS devrait ressembler à ceci:</p><pre class="programlisting">client1.org		MX	10	mail.mamachine.com</pre><p>Vous n'avez <span class="emphasis"><em>pas</em></span> besoin d'un
	enregistrement A pour <code class="systemitem">client1.org</code> si vous ne voulez
	gérer que le courrier pour ce domaine.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Soyez conscient que &#8220;pinger&#8221;
	  <code class="systemitem">client1.org</code> ne
	  fonctionnera pas à moins qu'un enregistrement A existe pour
	  cette machine.</p></div><p>La dernière chose que vous devez faire est d'indiquer à
	<span class="application">sendmail</span> sur le serveur de courrier
	quels sont les domaines et/ou machines pour lesquels il
	devrait accepter du courrier.  Il y a peu de façons
	différentes de le faire.  L'une des deux méthodes
	suivantes devrait fonctionner:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Ajoutez les machines à votre fichier
	    <code class="filename">/etc/mail/local-host-names</code> si vous
	    utilisez la fonction <code class="literal">FEATURE(use_cw_file)</code>.
	    Si vous utilisez une version de
	    <span class="application">sendmail</span> antérieure à
	    la version 8.10, le fichier sera
	    <code class="filename">/etc/sendmail.cw</code>.</p></li><li class="listitem"><p>Ajoutez une ligne <code class="literal">Cwyour.host.com</code>
	    à votre fichier
	    <code class="filename">/etc/sendmail.cf</code> ou
	    <code class="filename">/etc/mail/sendmail.cf</code> si vous utilisez
	    <span class="application">sendmail</span> 8.10 ou supérieur.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-UUCP"></a>28.7. SMTP avec UUCP</h2></div></div></div><p>La configuration de <span class="application">sendmail</span>
      fournie avec FreeBSD est conçue pour les sites directement
      connectés à l'Internet.  Les sites désirant
      échanger leur courrier électronique par
      l'intermédiaire d'UUCP doivent installer un autre fichier
      de configuration pour
      <span class="application">sendmail</span>.</p><p>Modifier manuellement le fichier
      <code class="filename">/etc/mail/sendmail.cf</code> est un sujet
      réservé aux spécialistes.  Dans version 8
      de <span class="application">sendmail</span> la
      génération des fichiers de configuration se fait
      par l'intermédiaire du processeur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>, où
      la configuration se fait à un haut niveau d'abstraction.
      Les fichiers de configuration <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a> se trouvent dans le
      répertoire <code class="filename">/usr/src/usr.sbin/sendmail/cf</code>.</p><p>Si vous n'avez pas installé toutes les sources du
      système, l'ensemble des fichiers de configuration de
      <span class="application">sendmail</span> a été
      regroupé dans une archive séparée des
      autres sources.  En supposant que vous avez monté votre
      CDROM FreeBSD contenant les sources, faites:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /cdrom/src</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cat scontrib.?? | tar xzf - -C /usr/src/contrib/sendmail</code></strong></pre><p>Cette extraction ne donne lieu qu'à une centaine de
      kilo-octets.  Le fichier <code class="filename">README</code> dans le
      répertoire <code class="filename">cf</code>
      pourra faire office d'une introduction à la configuration
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=m4&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">m4</span>(1)</span></a>.</p><p>La meilleure façon d'ajouter le support UUCP est
      d'utiliser la fonctionnalité
      <code class="literal">mailertable</code>.  Cela créé une
      base de données que <span class="application">sendmail</span>
      utilise pour décider de la manière dont il va
      router le courrier électronique.</p><p>Tout d'abord, vous devez créer votre fichier
      <code class="filename">.mc</code>.  Le répertoire <code class="filename">/usr/src/usr.sbin/sendmail/cf/cf</code>
      contient quelques exemples.  En supposant que vous avez
      appelé votre fichier <code class="filename">foo.mc</code>, tout ce
      dont vous avez besoin de faire pour le convertir en un fichier
      <code class="filename">sendmail.cf</code> valide est:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail/cf/cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make foo.cf</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp foo.cf /etc/mail/sendmail.cf</code></strong></pre><p>Un fichier <code class="filename">.mc</code> classique devrait
      ressembler à ceci:</p><pre class="programlisting">VERSIONID(`<em class="replaceable"><code>Votre numéro de version</code></em>') OSTYPE(bsd4.4)

FEATURE(accept_unresolvable_domains)
FEATURE(nocanonify)
FEATURE(mailertable, `hash -o /etc/mail/mailertable')

define(`UUCP_RELAY', <em class="replaceable"><code>votre.relai.uucp</code></em>)
define(`UUCP_MAX_SIZE', 200000)
define(`confDONT_PROBE_INTERFACES')

MAILER(local)
MAILER(smtp)
MAILER(uucp)

Cw    <em class="replaceable"><code>alias.de.votre.nom.de.machine</code></em>
Cw    <em class="replaceable"><code>votrenomdenoeuduucp.UUCP</code></em></pre><p>Les lignes contenant les directives
      <code class="literal">accept_unresolvable_domains</code>,
      <code class="literal">nocanonify</code>, et
      <code class="literal">confDONT_PROBE_INTERFACES</code> empêcheront
      l'utilisation du DNS lors de l'envoi du courrier
      électronique.  La directive <code class="literal">UUCP_RELAY</code>
      est nécessaire pour le support de l'UUCP.  Mettez juste
      un nom de machine Internet capable de gérer des adresses
      d'un pseudo-domaine .UUCP; la plupart du temps, vous mettrez le
      nom du serveur de messagerie de votre fournisseur
      d'accès.</p><p>Après avoir défini tout ceci, vous avez besoin
      d'un fichier <code class="filename">/etc/mail/mailertable</code>.  Si
      vous n'avez qu'un seul lien avec l'extérieur qui est
      utilisé pour votre courrier électronique, le
      fichier suivant devrait suffire:</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
.                             uucp-dom:<em class="replaceable"><code>your.uucp.relay</code></em></pre><p>Un exemple plus complexe ressemblerait à ceci:</p><pre class="programlisting">#
# makemap hash /etc/mail/mailertable.db &lt; /etc/mail/mailertable
#
horus.interface-business.de   uucp-dom:horus
.interface-business.de        uucp-dom:if-bus
interface-business.de         uucp-dom:if-bus
.heep.sax.de                  smtp8:%1
horus.UUCP                    uucp-dom:horus
if-bus.UUCP                   uucp-dom:if-bus
.                             uucp-dom:</pre><p>Les trois premières lignes gèrent les cas
      spécifiques où les courriers électroniques
      pour l'extérieur ne devraient pas être
      envoyés au serveur par défaut, mais plutôt
      à des serveurs UUCP voisins afin de
      &#8220;raccourcir&#8221; le chemin à parcourir.  La ligne
      suivante gère le courrier électronique
      destiné au domaine Ethernet local et qui peut être
      distribué en utilisant le protocole SMTP.  Et enfin, les
      voisins UUCP sont mentionnés dans la notation de
      pseudo-domaine UUCP, pour permettre à un courrier du type
      <code class="literal">voisin-uucp
      !destinataire</code>
      de passer outre les règles par défaut.  La
      dernière ligne doit toujours être un point, ce qui
      correspond à tout le reste, avec la distribution UUCP
      vers un voisin UUCP qui sert de passerelle universelle de
      courrier électronique vers le reste du monde.  Tous les
      noms de noeuds placés après le mot clé
      <code class="literal">uucp-dom:</code> doivent être des noms valides
      de voisins UUCP, que vous pouvez vérifier en utilisant la
      commande <code class="literal">uuname</code>.</p><p>Pour vous rappeler que ce fichier doit être converti
      en un fichier de base de données DBM avant d'être
      utilisable.  La ligne de commande pour accomplir cette
      conversion est rappelée dans les commentaires au
      début du fichier <code class="filename">mailertable</code>.  Vous
      devez lancer cette commande à chaque fois que vous
      modifiez votre fichier
      <code class="filename">mailertable</code>.</p><p>Pour finir: si vous n'êtes pas certain du bon
      fonctionnement de certaines configurations de routage du
      courrier électronique, rappelez-vous de l'option
      <code class="option">-bt</code> de <span class="application">sendmail</span>.
      Cela lance <span class="application">sendmail</span> dans le
      <span class="emphasis"><em>mode test d'adresse</em></span>; entrez simplement
      <code class="literal">3,0</code>, suivi de l'adresse que vous
      désirez tester.  La dernière ligne vous indiquera
      le type d'agent utilisé pour l'envoi, la machine de
      destination à laquelle l'agent doit envoyer le message,
      et l'adresse (peut-être traduite) à laquelle il
      l'enverra.  Pour quitter ce mode tapez <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>D</strong></span>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sendmail -bt</code></strong>
ADDRESS TEST MODE (ruleset 3 NOT automatically invoked)
Enter &lt;ruleset&gt; &lt;address&gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>3,0 foo@example.com</code></strong>
canonify           input: foo @ example . com
...
parse            returns: $# uucp-dom $@ <em class="replaceable"><code>your.uucp.relay</code></em> $: foo &lt; @ example . com . &gt;
<code class="prompt">&gt;</code> <strong class="userinput"><code>^D</code></strong></pre></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="outgoing-only"></a>28.8. Configuration pour l'envoi seul</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Moran</span></span>. </span></div></div></div><p>Il existe de nombreux cas où vous désirez
      être capable d'uniquement envoyer du courrier
      électronique par l'intermédiaire d'un relais.
      Quelques exemples:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Votre ordinateur est une machine de bureau, mais vous
	  voulez utilisez des programmes comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a>.
	  Pour cela vous devez utiliser le relais de courrier
	  électronique de votre FAI.</p></li><li class="listitem"><p>L'ordinateur est un serveur qui ne gère pas le
	  courrier électronique localement, mais a besoin de
	  soumettre tout le courrier à un relais pour qu'il soit
	  transmis.</p></li></ul></div><p>N'importe quel <acronym class="acronym">MTA</acronym> est capable d'assurer
      cette fonction.  Malheureusement, il peut être très
      compliqué de configurer correctement un
      <acronym class="acronym">MTA</acronym> complet pour juste gérer le
      courrier sortant.  Des logiciels comme
      <span class="application">sendmail</span> et
      <span class="application">postfix</span> sont largement
      surdimensionnés pour cette utilisation.</p><p>De plus, si vous utilisez un accès Internet
      classique, votre contrat peut vous interdire de faire tourner un
      &#8220;serveur de courrier électronique&#8221;.</p><p>La manière la plus simple pour répondre
      à ce besoin est d'installer le logiciel porté
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/ssmtp/pkg-descr">mail/ssmtp</a>.  Exécutez
      les commandes suivantes en tant que
      <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/ports/mail/ssmtp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install replace clean</code></strong></pre><p>Une fois installé, <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/ssmtp/pkg-descr">mail/ssmtp</a> peut être
      configuré avec un fichier de quatre lignes,
      <code class="filename">/usr/local/etc/ssmtp/ssmtp.conf</code>:</p><pre class="programlisting">root=yourrealemail@example.com
mailhub=mail.example.com
rewriteDomain=example.com
hostname=_HOSTNAME_</pre><p>Assurez-vous d'employer votre adresse électronique
      réelle pour l'utilisateur <code class="systemitem">root</code>.
      Utilisez le relais de courrier électronique sortant de
      votre FAI à la place de <code class="systemitem">mail.example.com</code> (certains FAIs appellent
      cela le &#8220;serveur de courrier sortant&#8221; ou le
      &#8220;serveur SMTP&#8221;).</p><p>Assurez-vous également d'avoir
      désactivé <span class="application">sendmail</span> en
      fixant <code class="literal">sendmail_enable="NONE"</code> dans le fichier
      <code class="filename">/etc/rc.conf</code>.</p><p><a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/ssmtp/pkg-descr">mail/ssmtp</a> dispose
      d'autres options.  Consultez le fichier de configuration
      d'exemple dans le répertoire <code class="filename">/usr/local/etc/ssmtp</code> ou la page de
      manuel de <span class="application">ssmtp</span> pour quelques
      exemples et plus d'informations.</p><p>Configurer <span class="application">ssmtp</span> de cette
      manière permettra à toute application tournant sur
      votre ordinateur et ayant besoin d'envoyer un courrier
      électronique de fonctionner correctement, tout en
      n'outrepassant pas la politique de votre FAI ou en ne permettant
      pas l'utilisation de votre ordinateur comme base arrière
      pour &#8220;spammers&#8221;.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-dialup"></a>28.9. Utiliser le courrier électronique avec une connexion
      temporaire</h2></div></div></div><p>Si vous disposez d'une adresse IP statique, vous ne devez
      rien changer du paramétrage par défaut.
      Définissez votre nom de machine pour qu'il corresponde
      à celui qui vous a été assigné pour
      l'Internet et <span class="application">sendmail</span> s'occupera du
      reste.</p><p>Si votre adresse IP vous est attribuée dynamiquement
      et que vous utilisez une connexion PPP par modem pour
      accèder à l'Internet, vous disposez probablement
      d'une boite aux lettres chez votre fournisseur d'accès.
      Supposons que le domaine de votre fournisseur d'accès
      soit <code class="systemitem">example.net</code>, que votre
      nom d'utilisateur soit <code class="systemitem">user</code>, que vous
      avez appelé votre machine <code class="systemitem">bsd.home</code>, et que votre fournisseur vous ait
      demandé d'utiliser la machine <code class="systemitem">relay.example.net</code> comme serveur relai de
      messagerie électronique.</p><p>Pour pouvoir rapatrier votre courrier depuis votre boite aux
      lettres, vous devez installer un agent de rapatriement.
      L'utilitaire <span class="application">fetchmail</span> est un bon
      choix car il supporte la plupart des protocoles de messagerie.
      Ce programme est disponible sous forme de paquetage ou à
      partir du catalogue des logiciels portés (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/fetchmail/pkg-descr">mail/fetchmail</a>).  La plupart du temps,
      votre fournisseur d'accès fournit l'accès aux
      boites aux lettre à l'aide du protocole <acronym class="acronym">POP</acronym>.  Si vous utilisez PPP
      en mode utilisateur, vous pouvez automatiquement
      récupérer votre courrier quand une connexion
      Internet est établie avec l'entrée suivante dans
      le fichier <code class="filename">/etc/ppp/ppp.linkup</code>:</p><pre class="programlisting">MYADDR:
!bg su user -c fetchmail</pre><p>Si vous utilisez <span class="application">sendmail</span> (comme
      montré ci-dessous) pour distribuer le courrier aux
      comptes non-locaux, vous voudrez probablement que
      <span class="application">sendmail</span> s'occupe de transmettre les
      messages en attente dès que votre connexion Internet est
      établie.  Pour cela, ajoutez la commande suivante
      après la commande <code class="command">fetchmail</code> dans le
      fichier <code class="filename">/etc/ppp/ppp.linkup</code>:</p><pre class="programlisting">!bg su user -c "sendmail -q"</pre><p>En supposant que vous avez un compte
      <code class="systemitem">user</code> sur <code class="systemitem">bsd.home</code>.  Dans le répertoire de
      l'utilisateur <code class="systemitem">user</code> sur <code class="systemitem">bsd.home</code>, créez un fichier
      <code class="filename">.fetchmailrc</code> contenant:</p><pre class="programlisting">poll example.net protocol pop3 fetchall pass MySecret</pre><p>Ce fichier ne devrait être lisible que par
      l'utilisateur <code class="systemitem">user</code> car il contient le mot
      de passe <code class="literal">MySecret</code>.</p><p>Afin de pouvoir envoyer du courrier avec l'entête
      <code class="literal">from:</code> correcte, vous devez configurer
      <span class="application">sendmail</span> pour utiliser l'adresse
      <code class="literal">user@example.net</code> plutôt que
      <code class="literal">user@bsd.home</code>.  Vous pouvez également
      dire à <span class="application">sendmail</span> d'envoyer le
      courrier via le serveur <code class="systemitem">relay.example.net</code>, permettant une
      transmission du courrier plus rapide.</p><p>Le fichier <code class="filename">.mc</code> suivant devrait
      suffire:</p><pre class="programlisting">VERSIONID(`bsd.home.mc version 1.0')
OSTYPE(bsd4.4)dnl
FEATURE(nouucp)dnl
MAILER(local)dnl
MAILER(smtp)dnl
Cwlocalhost
Cwbsd.home
MASQUERADE_AS(`example.net')dnl
FEATURE(allmasquerade)dnl
FEATURE(masquerade_envelope)dnl
FEATURE(nocanonify)dnl
FEATURE(nodns)dnl
define(`SMART_HOST', `relay.example.net')
Dmbsd.home
define(`confDOMAIN_NAME',`bsd.home')dnl
define(`confDELIVERY_MODE',`deferred')dnl</pre><p>Référez-vous à la section
      précédente pour des détails sur la
      conversion de ce fichier <code class="filename">.mc</code> en un fichier
      <code class="filename">sendmail.cf</code>.  N'oubliez pas
      également de redémarrer
      <span class="application">sendmail</span> après la mise
      à jour du fichier
      <code class="filename">sendmail.cf</code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="SMTP-Auth"></a>28.10. Authentification SMTP</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">James</span> <span class="surname">Gorham</span></span>. </span></div></div></div><p>Disposer de l'authentification <acronym class="acronym">SMTP</acronym>
      sur votre serveur de courrier présente un certain
      nombre d'avantages.  L'authentification <acronym class="acronym">SMTP</acronym>
      peut ajouter une autre couche de sécurité à
      <span class="application">sendmail</span>, et a l'avantage
      de donner aux utilisateurs mobiles la possibilité
      d'utiliser le même serveur de courrier sans avoir
      besoin de reconfigurer les paramètres de leur client
      courrier à chaque déplacement.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Installez <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a> à
	  partir du catalogue des logiciels portés.  Vous
	  pouvez trouver ce logiciel porté dans
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>.
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>
	  dispose de nombreuses options de compilation possibles,
	  pour la méthode que nous allons utiliser ici,
	  assurez-vous de sélectionner l'option
	  <code class="option">pwcheck</code>.</p></li><li class="step"><p>Après avoir installé
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/security/cyrus-sasl/pkg-descr">security/cyrus-sasl</a>,
	  éditez
	  <code class="filename">/usr/local/lib/sasl/Sendmail.conf</code>
	  (ou créez-le s'il n'existe pas) et ajoutez la ligne
	  suivante:</p><pre class="programlisting">pwcheck_method: passwd</pre><p>Cette méthode activera au niveau de
	  <span class="application">sendmail</span> l'authentification par
	  l'intermédiaire de votre base de données
	  FreeBSD <code class="filename">passwd</code>.  Cela nous épargne
	  le problème de la création d'un nouvel ensemble
	  de nom d'utilisateur et de mot de passe pour chaque
	  utilisateur ayant besoin de recourir à
	  l'authentification <acronym class="acronym">SMTP</acronym>, et conserve le
	  même nom d'utilisateur et mot de passe pour le
	  courrier.</p></li><li class="step"><p>Maintenant éditez <code class="filename">/etc/make.conf</code>
	  et ajoutez les lignes suivantes:</p><pre class="programlisting">SENDMAIL_CFLAGS=-I/usr/local/include/sasl1 -DSASL
SENDMAIL_LDFLAGS=-L/usr/local/lib
SENDMAIL_LDADD=-lsasl</pre><p>Ces lignes passeront à
	<span class="application">sendmail</span> les bonnes options de
	configuration au moment de la compilation pour lier
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl/pkg-descr">cyrus-sasl</a>.
	Assurez-vous que <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/cyrus-sasl/pkg-descr">cyrus-sasl</a>
	a été installé avant de recompiler
	<span class="application">sendmail</span>.</p></li><li class="step"><p>Recompilez <span class="application">sendmail</span> en
	  lançant les commandes suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/usr.sbin/sendmail</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make cleandir</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make obj</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make install</code></strong></pre><p>La compilation de <span class="application">sendmail</span>
	  ne devrait pas présenter de problèmes si le
	  répertoire <code class="filename">/usr/src</code> n'a pas subi
	  d'énormes changements et si les bibliothèques
	  partagés nécessaires sont disponibles.</p></li><li class="step"><p>Une fois que <span class="application">sendmail</span> a
	  été compilé et réinstallé,
	  éditez votre fichier <code class="filename">/etc/mail/freebsd.mc</code>
	  (ou tout autre fichier que vous utilisez comme fichier
	  <code class="filename">.mc</code>.  De nombreux administrateurs
	  utilisent la sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hostname&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">hostname</span>(1)</span></a> comme nom de fichier
	  <code class="filename">.mc</code> par unicité).  Ajoutez-y les
	  lignes qui suivents:</p><pre class="programlisting">dnl set SASL options
TRUST_AUTH_MECH(`GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confAUTH_MECHANISMS', `GSSAPI DIGEST-MD5 CRAM-MD5 LOGIN')dnl
define(`confDEF_AUTH_INFO', `/etc/mail/auth-info')dnl</pre><p>Ces options configurent les différentes méthodes
	  disponibles pour <span class="application">sendmail</span>
	  pour l'authentification des utilisateurs.  Si vous
	  désirez utiliser une méthode autre que
	  <span class="application">pwcheck</span>, veuillez consulter
	  la documentation fournie.</p></li><li class="step"><p>Enfin, exécutez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=make&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">make</span>(1)</span></a> quand vous êtes
	  dans <code class="filename">/etc/mail</code>.  Cela prendra votre
	  nouveau fichier <code class="filename">.mc</code> et créera un
	  fichier <code class="filename">.cf</code> appelé
	  <code class="filename">freebsd.cf</code> (ou selon tout autre nom que
	  vous avez utilisé pour votre fichier
	  <code class="filename">.mc</code>).  Ensuite utilisez la commande
	  <code class="command">make install restart</code>, qui copiera le
	  fichier en <code class="filename">sendmail.cf</code>, et
	  redémarrera proprement
	  <span class="application">sendmail</span>.  Pour plus
	  d'informations sur ce processus, vous devriez vous
	  réferrer au fichier
	  <code class="filename">/etc/mail/Makefile</code>.</p></li></ol></div><p>Si tout s'est bien passé, vous devriez être
      en mesure d'entrer votre identifiant dans votre programme
      de courrier et d'envoyer un message de test.  Pour plus
      d'investigation, fixez le <code class="option">LogLevel</code> de
      <span class="application">sendmail</span> à 13 et scrutez
      <code class="filename">/var/log/maillog</code> à la recherche
      d'une erreur.</p><p>Vous pourrez rajouter les lignes suivantes au fichier
      <code class="filename">/etc/rc.conf</code> afin de rendre ce service
      disponible après chaque démarrage du
      système:</p><pre class="programlisting">sasl_pwcheck_enable="YES"
sasl_pwcheck_program="/usr/local/sbin/pwcheck"</pre><p>Cela assurera l'initialisation de
      <acronym class="acronym">SMTP_AUTH</acronym>, l'authentification SMTP, au
      démarrage du système.</p><p>Pour plus d'informations, veuillez consulter la page de la
      documentation de <span class="application">sendmail</span> concernant
      <a class="link" href="http://www.sendmail.org/~ca/email/auth.html" target="_top">
      l'authentification <acronym class="acronym">SMTP</acronym></a>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-agents"></a>28.11. Clients de messagerie</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Silver</span></span>. </span></div></div></div><a id="idp82453328" class="indexterm"></a><p>Un client de messagerie (&#8220;Mail User
      Agent&#8221;&#8212;<acronym class="acronym">MUA</acronym>) est une application
      qui est utilisée pour envoyer et recevoir du courrier
      électronique.  En outre, au fur et à mesure que le
      système du courrier électronique
      &#8220;évolue&#8221; et devient plus complexe, les
      <acronym class="acronym">MUA</acronym> deviennent de plus en plus puissants,
      offrant aux utilisateurs plus de fonctionnalités et de
      flexibilité.  FreeBSD offre le support pour de nombreux
      clients de messagerie, ils peuvent tous être
      aisément installés à partir du <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés de
      FreeBSD</a>.  Les utilisateurs pourront choisir entre des
      clients de messagerie graphiques comme
      <span class="application">evolution</span> ou
      <span class="application">balsa</span>, des clients en mode console
      tels que <span class="application">mutt</span>,
      <span class="application">pine</span> ou <code class="command">mail</code>, ou
      encore les interfaces Web utilisées par certaines
      organisations importantes.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mail-command"></a>28.11.1. mail</h3></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a> est le client de messagerie (&#8220;Mail User
	Agent&#8221;&#8212;<acronym class="acronym">MUA</acronym>) par défaut
	de FreeBSD.  C'est un <acronym class="acronym">MUA</acronym> en mode console qui
	offre toutes les fonctionnalités de base
	nécessaires pour envoyer et lire son courrier
	électronique en mode texte, cependant il est
	limité en ce qui concerne les possibilités de
	pièces jointes et ne supporte que les boîtes aux
	lettres locales.</p><p>Bien que <code class="command">mail</code> ne supporte pas
	l'intéraction avec les serveurs <acronym class="acronym">POP</acronym>
	ou <acronym class="acronym">IMAP</acronym>, ces boîtes aux lettres
	peuvent être téléchargées vers un
	fichier <code class="filename">mbox</code> local en utilisant une
	application telle que <span class="application">fetchmail</span>,
	qui sera abordée plus tard dans ce chapitre (<a class="xref" href="#mail-fetchmail" title="28.12. Utiliser fetchmail">Section 28.12, « Utiliser fetchmail »</a>).</p><p>Afin d'envoyer et de recevoir du courrier
	électronique, invoquez simplement la commande
	<code class="command">mail</code> comme le montre l'exemple
	suivant:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail</code></strong></pre><p>Le contenu de la boîte aux lettres de l'utilisateur
	dans <code class="filename">/var/mail</code> est
	automatiquement lu par l'utilitaire <code class="command">mail</code>.
	Si la boîte est vide, l'utilitaire rend la main avec un
	message indiquant qu'aucun courrier électronique ne
	peut être trouvé.  Une fois que la boîte
	aux lettres a été lue, l'interface de
	l'application est lancée, et une liste de messages sera
	affichée.  Les messages sont automatiquement
	numérotés, comme on peut le voir dans l'exemple
	suivant:</p><pre class="screen">Mail version 8.1 6/6/93.  Type ? for help.
"/var/mail/marcs": 3 messages 3 new
&gt;N  1 root@localhost        Mon Mar  8 14:05  14/510   "test"
 N  2 root@localhost        Mon Mar  8 14:05  14/509   "user account"
 N  3 root@localhost        Mon Mar  8 14:05  14/509   "sample"</pre><p>Les messages peuvent désormais être lus en
	utilisant la commande <span class="keycap"><strong>t</strong></span> de
	<code class="command">mail</code>, suivie du numéro du message
	qui devra être affiché.  Dans cet exemple, nous
	lirons le premier courrier électronique:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>t 1</code></strong>
Message 1:
From root@localhost  Mon Mar  8 14:05:52 2004
X-Original-To: marcs@localhost
Delivered-To: marcs@localhost
To: marcs@localhost
Subject: test
Date: Mon,  8 Mar 2004 14:05:52 +0200 (SAST)
From: root@localhost (Charlie Root)

This is a test message, please reply if you receive it.</pre><p>Comme nous pouvons le constater dans l'exemple ci-dessus,
	l'appuie sur la touche <span class="keycap"><strong>t</strong></span> fera afficher le
	message avec les entêtes complètes.  Pour
	afficher à nouveau la liste des messages, la touche
	<span class="keycap"><strong>h</strong></span> doit être utilisée.</p><p>Si le message nécessite une réponse, vous
	pouvez utiliser <code class="command">mail</code> pour cela, en entrant
	soit la touche <span class="keycap"><strong>R</strong></span>, soit la touche
	<span class="keycap"><strong>r</strong></span>.  La touche <span class="keycap"><strong>R</strong></span> demande
	à <code class="command">mail</code> de ne répondre
	qu'à l'expéditeur du message, alors que
	<span class="keycap"><strong>r</strong></span> répond à l'expéditeur
	mais également aux autres destinataires du message.
	Vous pouvez ajouter à la suite de ces commandes le
	numéro du courrier auquel vous désirez
	répondre.  Une fois cela effectué, la
	réponse doit être tapée, et la fin du
	message doit être indiquée par un
	<span class="keycap"><strong>.</strong></span> sur une nouvelle ligne.  Ci-dessous est
	présenté un exemple:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>R 1</code></strong>
To: root@localhost
Subject: Re: test

<strong class="userinput"><code>Thank you, I did get your email.
.</code></strong>
EOT</pre><p>Afin d'envoyer un nouveau courrier électronique, la
	touche <span class="keycap"><strong>m</strong></span> doit être utilisée,
	suivie de l'adresse électronique du destinataire.
	Plusieurs destinataires peuvent également être
	spécifiés en séparant chaque adresse par
	une <span class="keycap"><strong>,</strong></span>.  Le sujet du message peut alors
	être entré, suivi du corps du message.  La fin
	d'un message doit être indiquée en mettant un
	<span class="keycap"><strong>.</strong></span> seul sur une nouvelle ligne.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mail root@localhost</code></strong>
Subject: <strong class="userinput"><code>I mastered mail

Now I can send and receive email using mail ... :)
.</code></strong>
EOT</pre><p>Bien qu'à partir de l'utilitaire
	<code class="command">mail</code>, la commande <span class="keycap"><strong>?</strong></span> puisse
	être utilisée à tout instant pour afficher
	l'aide, la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a> devrait être
	consultée pour plus d'aide sur
	<code class="command">mail</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Comme indiqué précédemment, la
	  commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a> à l'origine n'a pas
	  été conçue pour gérer les
	  pièces jointes, et par conséquent ne s'en sort
	  pas très bien à ce niveau.  Les
	  <acronym class="acronym">MUA</acronym>s plus récents comme
	  <span class="application">mutt</span> gérent les
	  pièces jointes de manière plus intelligente.
	  Mais si vous souhaitez toujours utiliser
	  <code class="command">mail</code>, le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/converters/mpack/pkg-descr">converters/mpack</a> vous sera d'une
	  grande aide.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mutt-command"></a>28.11.2. mutt</h3></div></div></div><p><span class="application">mutt</span> est un client de
	messagerie léger mais très puissant, avec de
	nombreuses fonctionnalités, parmi lesquelles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>la possibilité de gérer les fils
	    (&#8220;threads&#8221;) de discussions;</p></li><li class="listitem"><p>le support PGP pour la signature électronique
	    et le chiffrage de courriers électroniques;</p></li><li class="listitem"><p>le support MIME;</p></li><li class="listitem"><p>le support du format maildir;</p></li><li class="listitem"><p>application hautement configurable et
	    personnalisable.</p></li></ul></div><p>Toutes ces caractéristiques font de
	<span class="application">mutt</span> un des clients de messagerie
	les plus avancés.  Consultez <code class="uri"><a class="uri" href="http://www.mutt.org" target="_top">http://www.mutt.org</a></code> pour plus d'informations
	sur <span class="application">mutt</span>.</p><p>La version stable de <span class="application">mutt</span> peut
	être installée en utilisant le logiciel
	porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/mutt/pkg-descr">mail/mutt</a>,
	tandis que la version actuellement en développement
	peut être installée par l'intermédiaire du
	logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/mutt-devel/pkg-descr">mail/mutt-devel</a>.  Une fois
	installé, <span class="application">mutt</span> peut
	être lancé en tapant la commande suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>mutt</code></strong></pre><p><span class="application">mutt</span> lira automatiquement le
	contenu de la boîte aux lettres de l'utilisateur dans
	<code class="filename">/var/mail</code> et en affiche
	le contenu le cas échéant.  Si aucun message
	n'est trouvé dans cette boîte, alors
	<span class="application">mutt</span> attendra une commande de
	l'utilisateur.  L'exemple ci-dessous montre
	<span class="application">mutt</span> affichant une liste de
	messages:</p><div class="mediaobject"><img src="mail/mutt1.png" /></div><p>Afin de lire un message, sélectionnez-le en
	utilisant les touches fléchées, et appuyez sur
	<span class="keycap"><strong>Entrée</strong></span>.  Un exemple montrant
	<span class="application">mutt</span> affichant le contenu d'un
	message est donné ci-dessous:</p><div class="mediaobject"><img src="mail/mutt2.png" /></div><p>Comme avec la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>,
	<span class="application">mutt</span> permet aux utilisateurs de
	répondre uniquement à l'expéditeur du
	message comme également à l'ensemble de ses
	destinataires.  Pour répondre uniquement à
	l'expéditeur du courrier électronique, utilisez
	le raccourci clavier <span class="keycap"><strong>r</strong></span>.  Pour faire une
	réponse groupée, qui sera envoyée
	à l'expéditeur comme à tous les
	destinataires du message, utilisez la touche
	<span class="keycap"><strong>g</strong></span>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="application">mutt</span> emploie <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a> comme
	  éditeur pour la création et la réponse
	  aux courriers électronique.  Cela peut être
	  modifié par l'utilisateur en créant son propre
	  fichier <code class="filename">.muttrc</code> dans leur
	  répertoire personnel et en positionnant la variable
	  <code class="literal">editor</code>.</p></div><p>Pour rédiger un nouveau message, appuyez sur la
	touche <span class="keycap"><strong>m</strong></span>.  Après avoir donné un
	sujet valide, <span class="application">mutt</span> lancera
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a> et l'intégralité du message pourra
	être écrite.  Une fois le courrier
	électronique rédigé, sauvegardez et
	quittez <code class="command">vi</code> et
	<span class="application">mutt</span> réapparaîtra
	affichant un écran résumant le courrier devant
	être envoyé.  Pour envoyer le message, appuyez
	sur <span class="keycap"><strong>y</strong></span>.  Un exemple de résumé
	peut être vu ci-dessous:</p><div class="mediaobject"><img src="mail/mutt3.png" /></div><p><span class="application">mutt</span> propose également
	une aide complète, qui peut être consultée
	à partir de la plupart des menus en appuyant sur la
	touche <span class="keycap"><strong>?</strong></span>.  La ligne située en haut de
	l'écran affiche également les raccourcis clavier
	appropriés.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pine-command"></a>28.11.3. pine</h3></div></div></div><p><span class="application">pine</span> est destiné aux
	débutants, mais il dispose également de
	fonctions avancées.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Plusieurs vulnérabilités exploitables
	  à distance ont été découvertes
	  dans le logiciel <span class="application">pine</span> par le
	  passé, autorisant à un agresseur distant
	  d'exécuter un programme arbitraire en tant
	  qu'utilisateur local du système, en envoyant un
	  courrier électronique particulier.  Tous les
	  problèmes <span class="emphasis"><em>connus</em></span> ont
	  été corrigés, mais le code source de
	  <span class="application">pine</span> est écrit d'une
	  manière assez peu sécurisée et l'officier
	  de sécurité de FreeBSD pense qu'il existe d'autres
	  failles qui ne sont pas encore découvertes.  Vous
	  installez donc <span class="application">pine</span> à vos
	  propres risques.</p></div><p>La version actuelle de <span class="application">pine</span>
	peut être installée en utilisant le logiciel
	porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/pine4/pkg-descr">mail/pine4</a>.
	Une fois installé, <span class="application">pine</span> peut
	être lancé en tapant la commande suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>pine</code></strong></pre><p>Lors du premier lancement de
	<span class="application">pine</span>, ce dernier affiche une page
	de présentation avec une brève introduction,
	ainsi qu'un message de la part de l'équipe de
	développement de <span class="application">pine</span>
	demandant l'envoi d'un courrier électronique anonyme
	pour leur permettre d'évaluer le nombre d'utilisateurs
	de leur client de messagerie.  Pour envoyer ce courrier
	anonyme, appuyez sur <span class="keycap"><strong>Entrée</strong></span>, ou sinon
	appuyez sur <span class="keycap"><strong>E</strong></span> pour quitter la
	présentation sans envoyer de message anonyme.  Un
	exemple de page de présentation peut être vu
	ci-dessous:</p><div class="mediaobject"><img src="mail/pine1.png" /></div><p>Le menu principal est ensuite affiché, menu dans
	lequel il est aisé de naviguer avec les touches
	fléchées.  Ce menu principal fournit les
	raccourcis pour la rédaction de nouveaux messages, la
	navigation dans les répertoires de messages, et
	même la gestion des entrées du carnet d'adresses.
	Sous le menu principal, les raccourcis clavier correspondants
	pour effectuer les différentes tâches sont
	donnés.</p><p>Le répertoire ouvert par défaut par
	<span class="application">pine</span> est <code class="filename">inbox</code>.  Pour afficher l'index des
	messages, appuyez sur <span class="keycap"><strong>I</strong></span>, ou
	sélectionnez l'option <span class="guimenuitem">MESSAGE
	INDEX</span> comme montré ci-dessous:</p><div class="mediaobject"><img src="mail/pine2.png" /></div><p>L'index des messages montre les messages dans le
	répertoire courant, on peut se déplacer dans
	l'index en utilisant les touches fléchées.  Les
	messages en surbrillance peuvent être lus en appuyant
	sur la touche <span class="keycap"><strong>Enter</strong></span>.</p><div class="mediaobject"><img src="mail/pine3.png" /></div><p>Dans la capture d'écran ci-dessous, un message
	d'exemple est affiché par
	<span class="application">pine</span>.  Les raccourcis clavier sont
	affichés au bas de l'écran.  Un exemple de
	raccourci est la touche <span class="keycap"><strong>r</strong></span>, qui demande au
	programme de répondre au message actuellement à
	l'écran.</p><div class="mediaobject"><img src="mail/pine4.png" /></div><p>La rédaction d'une réponse à un
	courrier électronique avec
	<span class="application">pine</span> se fait en utilisant
	l'éditeur <span class="application">pico</span>, qui est
	installé par défaut avec
	<span class="application">pine</span>.  L'utilitaire
	<span class="application">pico</span> rend aisé les
	déplacements dans le message et est plus indulgent avec
	les novices que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vi&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">vi</span>(1)</span></a> ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mail&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">mail</span>(1)</span></a>.  Une fois la
	réponse rédigée, le message peut
	être envoyé en appuyant sur <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>X</strong></span>.
	<span class="application">pine</span> vous demandera de confirmer
	votre action.</p><div class="mediaobject"><img src="mail/pine5.png" /></div><p>Le programme <span class="application">pine</span> peut
	être personnalisé en utilisant l'option
	<span class="guimenuitem">SETUP</span> du menu principal.  Consultez
	<code class="uri"><a class="uri" href="http://www.washington.edu/pine/" target="_top">http://www.washington.edu/pine/</a></code> pour
	plus d'information.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-fetchmail"></a>28.12. Utiliser fetchmail</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Silver</span></span>. </span></div></div></div><a id="idp82566352" class="indexterm"></a><p><span class="application">fetchmail</span> est un client
      <acronym class="acronym">IMAP</acronym> et <acronym class="acronym">POP</acronym> complet qui
      offre aux utilisateurs le téléchargement
      automatiquement de leur courrier électronique à
      partir de serveurs <acronym class="acronym">IMAP</acronym> et
      <acronym class="acronym">POP</acronym> distants et sa sauvegarde dans des
      boîtes aux lettres locales; ainsi, le courrier
      électronique pourra être consulté plus
      facilement.  <span class="application">fetchmail</span> peut
      être installé en utilisant le logiciel porté
      <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/fetchmail/pkg-descr">mail/fetchmail</a>, et offre
      diverses fonctionnalités, dont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>le support des protocoles <acronym class="acronym">POP3</acronym>,
	  <acronym class="acronym">APOP</acronym>, <acronym class="acronym">KPOP</acronym>,
	  <acronym class="acronym">IMAP</acronym>, <acronym class="acronym">ETRN</acronym> et
	  <acronym class="acronym">ODMR</acronym>;</p></li><li class="listitem"><p>la capacité de faire suivre le courrier
	  électronique en utilisant <acronym class="acronym">SMTP</acronym>, ce
	  qui autorise le filtrage, le transfert, et la gestion des
	  alias de fonctionner correctement;</p></li><li class="listitem"><p>la possibilité de fonctionner en mode
	  &#8220;daemon&#8221; pour contrôler
	  périodiquement si il y a de nouveaux messages;</p></li><li class="listitem"><p>la possibilité de récupérer le
	  courrier de plusieurs boîtes aux lettres et de le
	  transférer en fonction d'une configuration bien
	  précise aux différents utilisateurs
	  locaux.</p></li></ul></div><p>Bien qu'expliquer l'intégralité des fonctions
      de <span class="application">fetchmail</span> dépasse le cadre
      de ce document, certaines fonctions de base seront
      abordées.  L'utilitaire
      <span class="application">fetchmail</span> nécessite un fichier
      de configuration nommé <code class="filename">.fetchmailrc</code>,
      afin de fonctionner correctement.  Ce fichier comprend les
      informations concernant les serveurs ainsi que les
      accréditations d'accès.  En raison du
      caractère sensible du contenu de ce fichier, il est
      recommandé de ne le rendre lisible que par l'utilisateur,
      avec la commande suivante:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>chmod 600 .fetchmailrc</code></strong></pre><p>Le fichier <code class="filename">.fetchmailrc</code> suivant
      sert d'exemple pour récupérer le courrier
      électronique pour un seul utilisateur à partir
      d'une boîte aux lettres utilisant le protocole
      <acronym class="acronym">POP</acronym>.  Il demande à
      <span class="application">fetchmail</span> de se connecter à
      <code class="systemitem">example.com</code> en utilisant le nom
      d'utilisateur <code class="systemitem">joesoap</code> et le mot de passe
      <code class="literal">XXX</code>.  Dans cet exemple on suppose que
      l'utilisateur <code class="systemitem">joesoap</code> est également
      un utilisateur sur le système local.</p><pre class="programlisting">poll example.com protocol pop3 username "joesoap" password "XXX"</pre><p>L'exemple suivant présente la connexion à
      plusieurs serveurs <acronym class="acronym">POP</acronym> et
      <acronym class="acronym">IMAP</acronym> et la redirection vers différents
      utilisateurs locaux quand c'est nécessaire:</p><pre class="programlisting">poll example.com proto pop3:
user "joesoap", with password "XXX", is "jsoap" here;
user "andrea", with password "XXXX";
poll example2.net proto imap:
user "john", with password "XXXXX", is "myth" here;</pre><p>L'utilitaire <span class="application">fetchmail</span> peut
      être exécuté en mode &#8220;daemon&#8221; en
      le lançant avec le paramètre <code class="option">-d</code>,
      suivi par l'intervalle de temps (en secondes) que
      <span class="application">fetchmail</span> doit respecter entre chaque
      consultation des serveurs listés dans le fichier
      <code class="filename">.fetchmailrc</code>.  L'exemple suivant demandera
      à <span class="application">fetchmail</span> de
      récupérer le courrier toutes les 60
      secondes:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>fetchmail -d 60</code></strong></pre><p>Plus d'informations concernant
      <span class="application">fetchmail</span> peuvent être
      trouvées sur <code class="uri"><a class="uri" href="http://www.catb.org/~esr/fetchmail/" target="_top">http://www.catb.org/~esr/fetchmail/</a></code>.</p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mail-procmail"></a>28.13. Utiliser procmail</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Silver</span></span>. </span></div></div></div><a id="idp82596048" class="indexterm"></a><p>L'utilitaire <span class="application">procmail</span> est une
      application extrêmement puissante utilisée pour
      filtrer le courrier électronique entrant.  Il permet aux
      utilisateurs de définir des &#8220;règles&#8221;
      qui seront utilisées sur le courrier entrant pour
      effectuer des opérations particulières ou pour
      transférer le courrier vers d'autres boîtes aux
      lettres et/ou adresses électroniques.
      <span class="application">procmail</span> peut être
      installé en utilisant le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/mail/procmail/pkg-descr">mail/procmail</a>.  Une fois
      installé, il peut être intégré dans
      la plupart des <acronym class="acronym">MTA</acronym>s, consultez la
      documentation de votre <acronym class="acronym">MTA</acronym> pour plus
      d'information.  Alternativement,
      <span class="application">procmail</span> peut être
      intégré en ajoutant la ligne suivante à un
      fichier <code class="filename">.forward</code> dans le répertoire
      personnel de l'utilisateur employant les fonctionnalités
      de <span class="application">procmail</span>:</p><pre class="programlisting">"|exec /usr/local/bin/procmail || exit 75"</pre><p>La suite de cette section présentera quelques
      règles de base pour <span class="application">procmail</span>,
      avec une brève description de ce qu'elles font.  Ces
      règles, ainsi que d'autres, doivent être
      ajoutées dans le fichier
      <code class="filename">.procmailrc</code>, qui doit résider dans
      le répertoire personnel de l'utilisateur.</p><p>La majorité de ces règles peut
      également être trouvée dans la page de
      manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=procmailex&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">procmailex</span>(5)</span></a>.</p><p>Transférer tout courrier en provenance de
      <code class="literal">user@example.com</code> vers l'adresse externe
      <code class="literal">goodmail@example2.com</code>:</p><pre class="programlisting">:0
* ^From.*user@example.com
! goodmail@example2.com</pre><p>Transférer tous les courriers d'une taille
      inférieure à 1000 octets vers l'adresse externe
      <code class="literal">goodmail@example2.com</code>:</p><pre class="programlisting">:0
* &lt; 1000
! goodmail@example2.com</pre><p>Mettre tout le courrier à destination de
      <code class="literal">alternate@example.com</code> dans une boîte
      aux lettres appelée
      <code class="filename">alternate</code>:</p><pre class="programlisting">:0
* ^TOalternate@example.com
alternate</pre><p>Envoyer tous les courriers avec pour sujet
      &#8220;Spam&#8221; vers <code class="filename">/dev/null</code>:</p><pre class="programlisting">:0
^Subject:.*Spam
/dev/null</pre><p>Une recette utile pour trier les courriers en provenance des
      listes de diffusion <code class="systemitem">FreeBSD.org</code>
      et placer chaque liste dans sa propre boîte aux
      lettres:</p><pre class="programlisting">:0
* ^Sender:.owner-freebsd-\/[^@]+@FreeBSD.ORG
{
	LISTNAME=${MATCH}
	:0
	* LISTNAME??^\/[^@]+
	FreeBSD-${MATCH}
}</pre></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-servers"></a>Chapitre 29. Serveurs réseau</h2></div><div><span class="authorgroup">Réorganisé par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#network-servers-synopsis">29.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#network-inetd">29.2. Le &#8220;super-serveur&#8221;
      <span class="application">inetd</span></a></span></dt><dt><span class="sect1"><a href="#network-nfs">29.3. Système de fichiers réseau (NFS)</a></span></dt><dt><span class="sect1"><a href="#network-nis">29.4. Services d'information réseau (NIS/YP)</a></span></dt><dt><span class="sect1"><a href="#network-dhcp">29.5. Configuration réseau automatique (DHCP)</a></span></dt><dt><span class="sect1"><a href="#network-dns">29.6. Serveurs de noms (<acronym class="acronym">DNS</acronym>)</a></span></dt><dt><span class="sect1"><a href="#network-apache">29.7. Serveur HTTP Apache</a></span></dt><dt><span class="sect1"><a href="#network-ftp">29.8. Protocole de transfert de fichiers (FTP)</a></span></dt><dt><span class="sect1"><a href="#network-samba">29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</a></span></dt><dt><span class="sect1"><a href="#network-ntp">29.10. Synchronisation de l'horloge avec NTP</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-servers-synopsis"></a>29.1. Synopsis</h2></div></div></div><p>Ce chapitre abordera certains des services réseaux
      les plus fréquemment utilisés sur les
      systèmes <span class="trademark">UNIX</span>®.  Nous verrons comment installer,
      configurer, tester et maintenir plusieurs types
      différents de services réseaux.  De plus, des
      exemples de fichier de configuration ont été
      inclus tout au long de ce chapitre pour que vous puissiez en
      bénéficier.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment gérer le &#8220;daemon&#8221;
	  <span class="application">inetd</span>.</p></li><li class="listitem"><p>Comment configurer un système de fichiers
	  réseau.</p></li><li class="listitem"><p>Comment mettre en place un serveur d'information sur le
	  réseau pour partager les comptes utilisateurs.</p></li><li class="listitem"><p>Comment configurer le paramétrage réseau
	  automatique en utilisant DHCP.</p></li><li class="listitem"><p>Comment configurer un serveur de noms de domaine.</p></li><li class="listitem"><p>Comment configurer le serveur HTTP
	  <span class="application">Apache</span>.</p></li><li class="listitem"><p>Comment configurer un serveur de transfert de fichier
	  (FTP).</p></li><li class="listitem"><p>Comment configurer un serveur de fichiers et
	  d'impression pour des clients <span class="trademark">Windows</span>® en utilisant
	  <span class="application">Samba</span>.</p></li><li class="listitem"><p>Comment synchroniser l'heure et la date, et mettre en
	  place en serveur de temps, avec le protocole NTP.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les bases des procédures
	  <code class="filename">/etc/rc</code>.</p></li><li class="listitem"><p>Etre familier avec la terminologie réseau de
	  base.</p></li><li class="listitem"><p>Savoir comment installer des applications tierce-partie
	  (<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-inetd"></a>29.2. Le &#8220;super-serveur&#8221;
      <span class="application">inetd</span></h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div><div><span class="authorgroup">Mise à jour pour FreeBSD 6.1-RELEASE par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="othername">le projet de documentation de FreeBSD</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-overview"></a>29.2.1. Généralités</h3></div></div></div><p>On fait parfois référence à
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> comme étant le &#8220;super-serveur
	Internet&#8221; parce qu'il gère les connexions pour
	plusieurs services.
	Quand une connexion est reçue par
	<span class="application">inetd</span>, ce dernier détermine
	à quel programme la connexion est
	destinée, invoque le processus en question
	et lui délègue la &#8220;socket&#8221; (le
	programme est invoqué avec la &#8220;socket&#8221; service
	comme entrée standard, sortie et descripteurs d'erreur).
	Exécuter
	<span class="application">inetd</span> pour les serveurs qui ne sont
	pas utilisés intensément peut réduire la
	charge système globale quand on compare avec
	l'exécution
	de chaque &#8220;daemon&#8221; individuellement en mode
	autonome.</p><p><span class="application">inetd</span> est utilisé pour
	invoquer d'autres &#8220;daemon&#8221;s, mais plusieurs
	protocoles triviaux sont gérés directement,
	comme <span class="application">chargen</span>,
	<span class="application">auth</span>, et
	<span class="application">daytime</span>.</p><p>Cette section abordera la configuration de base
	d'<span class="application">inetd</span> à travers ses
	options en ligne de commande et son fichier de configuration
	<code class="filename">/etc/inetd.conf</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-settings"></a>29.2.2. Configuration</h3></div></div></div><p><span class="application">inetd</span> est initialisé par
	l'intermédiaire du système
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a>.  L'option
	<code class="literal">inetd_enable</code> est positionnée
	à la valeur <code class="literal">NO</code> par défaut,
	mais peut être activée par
	<span class="application">sysinstall</span> lors de l'installation
	en fonction de la configuration choisie par l'utilisateur.
	Placer</p><pre class="programlisting">inetd_enable="YES"</pre><p>ou</p><pre class="programlisting">inetd_enable="NO"</pre><p>dans
	<code class="filename">/etc/rc.conf</code> activera ou
	désactivera le lancement
	d'<span class="application">inetd</span> à la mise en route
	du système.  La commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/inetd rcvar</code></strong></pre><p>peut être lancée pour afficher le
	paramétrage en vigueur.</p><p>De plus, différentes options de ligne de commande
	peuvent être passées à
	<span class="application">inetd</span> par l'intermédiaire de
	l'option <code class="literal">inetd_flags</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-cmdline"></a>29.2.3. Options en ligne de commande</h3></div></div></div><p>Comme la plupart des <span class="quote">« <span class="quote">daemons</span> »</span>,
	<span class="application">inetd</span> possède de nombreuses
	options que l'on peut passer à son lancement afin de
	modifier son comportement.  La liste complète des
	options se présente sous la forme:</p><p><code class="command">inetd</code> <code class="option">[-d] [-l] [-w] [-W] [-c maximum] [-C taux] [-a adresse | nom de machine] [-p fichier] [-R taux] [fichier de configuration]</code></p><p>Les options peuvent être passées à
	<span class="application">inetd</span> en utilisant le
	paramètre <code class="literal">inetd_flags</code> dans
	<code class="filename">/etc/rc.conf</code>.  Par défaut,
	<code class="literal">inetd_flags</code> contient <code class="literal">-wW -C
	60</code>, qui active le <span class="quote">« <span class="quote">TCP wrapping</span> »</span> pour
	les services <span class="application">inetd</span>, et
	empêche l'invocation d'un service plus de 60 fois par
	minute à partir d'une unique adresse IP.</p><p>Les novices seront heureux d'apprendre que ce
	paramétrage n'a en général pas besoin
	d'être modifié, cependant nous présentons
	ci-dessous les options de limitation du taux d'invocation
	étant donné que cela peut être utile si
	vous recevez une quantité excessive de connexions.  Une
	liste complète d'options peut être trouvée
	dans la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">-c maximum</span></dt><dd><p>Spécifie le nombre maximal par défaut
	      d'invocations simultanées pour chaque service; il
	      n'y a pas de limite par défaut.  Cette option peut
	      être surchargée pour chaque service à
	      l'aide du paramètre
	      <code class="option">nb-max-enfants</code>.</p></dd><dt><span class="term">-C taux</span></dt><dd><p>Précise le nombre maximal de fois qu'un
	      service peut être invoqué à partir
	      d'une unique adresse IP et cela sur une minute.  Ce
	      paramètre peut être configuré
	      différemment pour chaque service avec le
	      paramètre
	      <code class="option">nb-max-connexions-par-ip-par-minute</code>.</p></dd><dt><span class="term">-R taux</span></dt><dd><p>Précise le nombre maximal de fois qu'un
	      service peut être invoqué par minute; la
	      valeur par défaut est 256.  Un taux de 0 autorise
	      un nombre illimité d'invocations.</p></dd><dt><span class="term">-s maximum</span></dt><dd><p>Précise le nombre maximal de fois qu'un
	      service peut être invoqué
	      simultanément à partir d'une adresse IP
	      unique; il n'y a pas de limite par défaut.  Cette
	      option peut-être surchargée pour chaque
	      service individuellement avec le paramètre
	      <code class="option">max-child-per-ip</code>.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-conf"></a>29.2.4. <code class="filename">inetd.conf</code></h3></div></div></div><p>La configuration d'<span class="application">inetd</span> se
	fait par l'intermédiaire du fichier
	<code class="filename">/etc/inetd.conf</code>.</p><p>Quand le fichier <code class="filename">/etc/inetd.conf</code> est
	modifié, <span class="application">inetd</span> peut
	être forcé de relire son fichier de configuration
	en utilisant la commande:</p><div class="example"><a id="network-inetd-reread"></a><div class="example-title">Exemple 29.1. Recharger le fichier de configuration
	  d'<span class="application">inetd</span></div><div class="example-contents"><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/inetd reload</code></strong></pre></div></div><br class="example-break" /><p>Chaque ligne du fichier de configuration ne mentionne
	qu'un seul &#8220;daemon&#8221;.  Les commentaires dans le
	fichier sont précédés par un
	&#8220;#&#8221;.  Le format de chaque entrée du fichier
	<code class="filename">/etc/inetd.conf</code> est le suivant:</p><pre class="programlisting">nom-du-service
type-de-socket
protocole
{wait|nowait}[/nb-max-enfants[/nb-connexions-max-par-minute]]
{wait|nowait}[/nb-max-enfants[/nb-connexions-max-par-minute[/nb-max-enfants-par-ip]]]
utilisateur[:groupe][/classe-session]
programme-serveur
arguments-du-programme-serveur</pre><p>Un exemple d'entrée pour le &#8220;daemon&#8221;
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ftpd</span>(8)</span></a> utilisant l'IPv4 ressemblerait:</p><pre class="programlisting">ftp     stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -l</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">nom-du-service</span></dt><dd><p>C'est le nom de service du &#8220;daemon&#8221; en
	      question.  Il doit correspondre à un des services
	      listés dans le fichier
	      <code class="filename">/etc/services</code>.  Cela détermine
	      quel port <span class="application">inetd</span> doit
	      écouter.  Si un nouveau service est
	      créé, il doit être ajouté en
	      premier lieu dans
	      <code class="filename">/etc/services</code>.</p></dd><dt><span class="term">type-de-socket</span></dt><dd><p>Soit <code class="literal">stream</code>, soit
	      <code class="literal">dgram</code>, soit <code class="literal">raw</code>, ou
	      <code class="literal">seqpacket</code>.  <code class="literal">stream</code>
	      doit être utilisé pour les
	      &#8220;daemon&#8221;s TCP, alors que
	      <code class="literal">dgram</code> est utilisé pour les
	      &#8220;daemon&#8221;s utilisant le protocole UDP.</p></dd><dt><span class="term">protocole</span></dt><dd><p>Un des suivants:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Protocole</th><th>Explication</th></tr></thead><tbody><tr><td>tcp, tcp4</td><td>TCP IPv4</td></tr><tr><td>udp, udp4</td><td>UDP IPv4</td></tr><tr><td>tcp6</td><td>TCP IPv6</td></tr><tr><td>udp6</td><td>UDP IPv6</td></tr><tr><td>tcp46</td><td>TCP IPv4 et v6</td></tr><tr><td>udp46</td><td>UDP IPv4 et v6</td></tr></tbody></table></div></dd><dt><span class="term">{wait|nowait}[/nb-max-enfants[/nb-max-connexions-par-ip-par-minute[/nb-max-enfants-par-ip]]]</span></dt><dd><p><code class="option">wait|nowait</code> indique si le
	      &#8220;daemon&#8221; invoqué par
	      <span class="application">inetd</span> est capable ou non de
	      gérer sa propre &#8220;socket&#8221;.  Les
	      &#8220;socket&#8221;s de type <code class="option">dgram</code>
	      doivent utiliser l'option <code class="option">wait</code>, alors
	      que les &#8220;daemons à socket stream&#8221;,
	      qui sont généralement
	      multi-threadés, devraient utiliser
	      <code class="option">nowait</code>.  L'option <code class="option">wait</code>
	      a généralement pour conséquence de
	      fournir plusieurs &#8220;socket&#8221;s à un
	      &#8220;daemon&#8221;, tandis que l'option
	      <code class="option">nowait</code> invoquera un
	      &#8220;daemon&#8221; enfant pour chaque nouvelle
	      &#8220;socket&#8221;.</p><p>Le nombre maximal de &#8220;daemon&#8221;s
	      qu'<span class="application">inetd</span> peut invoquer peut
	      être fixé en utilisant l'option
	      <code class="option">nb-max-enfants</code>.  Si une limite de dix
	      instances pour un &#8220;daemon&#8221; est
	      nécessaire, <code class="literal">/10</code> devra
	      être placé après
	      <code class="option">nowait</code>.  Spécifier
	      <code class="literal">/0</code> autorise un nombre illimité
	      d'enfant.</p><p>En plus de <code class="option">nb-max-enfants</code>, deux
	      autres options limitant le nombre maximal de connexions
	      à partir d'un emplacement vers un
	      &#8220;daemon&#8221; particulier peuvent être
	      activéees.  L'option
	      <code class="option">nb-max-connexions-par-ip-par-minute</code>
	      limite le nombre de connexions par minutes à
	      partir d'une adresse IP donnée, par exemple, une
	      valeur de dix limiterait
	      à dix le nombre de tentatives de connexions par
	      minute pour une adresse IP particulière.
	      L'option <code class="option">max-child-per-ip</code> limite le
	      nombre d'enfants qui peuvent être lancés
	      pour une adresse IP unique à un instant
	      donné.  Ces options sont utiles pour
	      empêcher l'abus excessif intentionnel ou par
	      inadvertance des ressources d'une machine et les
	      attaques par déni de service (<span class="quote">« <span class="quote">Denial of
	      Service&#8212;DOS</span> »</span>).</p><p>Dans ce champ, <code class="option">wait</code> ou
	      <code class="option">nowait</code> est obligatoire.
	      <code class="option">nb-max-enfants</code>,
	      <code class="option">nb-max-connexions-par-ip-par-minute</code> et
	      <code class="option">max-child-per-ip</code>
	      sont optionnelles.</p><p>Un &#8220;daemon&#8221; utilisant un flux de type
	      multi-threadé sans limites
	      <code class="option">nb-max-enfants</code>,
	      <code class="option">nb-max-connexions-par-ip-par-minute</code> ou
	      <code class="option">max-child-per-ip</code>
	      sera tout simplement affecté de l'option
	      <code class="literal">nowait</code>.</p><p>Le même &#8220;daemon&#8221; avec une limite
	      maximale de dix &#8220;daemon&#8221; serait:
	      <code class="literal">nowait/10</code>.</p><p>La même configuration avec une limite
	      de vingt connexions par adresse IP par minute et une
	      limite maximale de dix &#8220;daemon&#8221;s enfant
	      serait: <code class="literal">nowait/10/20</code>.</p><p>Ces options sont utilisées comme valeurs par
	      défaut par le &#8220;daemon&#8221;
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fingerd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">fingerd</span>(8)</span></a>, comme le montre ce
	      qui suit:</p><pre class="programlisting">finger stream  tcp     nowait/3/10 nobody /usr/libexec/fingerd fingerd -s</pre><p>Et enfin, un exemple de champ avec un maximum de 100
	      enfants en tout, avec un maximum de 5 adresses IP
	      distinctes serait:
	      <code class="literal">nowait/100/0/5</code>.</p></dd><dt><span class="term">utilisateur</span></dt><dd><p>C'est l'utilisateur sous lequel le
	      &#8220;daemon&#8221; en question est
	      exécuté.  En général les
	      &#8220;daemon&#8221;s tournent sous l'utilisateur
	      <code class="systemitem">root</code>.  Pour des questions de
	      sécurité, il est courant de rencontrer des
	      serveurs tournant sous l'utilisateur
	      <code class="systemitem">daemon</code>, ou sous l'utilisateur avec
	      le moins de privilèges:
	      <code class="systemitem">nobody</code>.</p></dd><dt><span class="term">programme-serveur</span></dt><dd><p>Le chemin complet du &#8220;daemon&#8221; qui doit
	      être exécuté quand une requête
	      est reçue.  Si le &#8220;daemon&#8221; est un
	      service fourni en interne par
	      <span class="application">inetd</span>, alors l'option
	      <code class="option">internal</code> devrait être
	      utilisée.</p></dd><dt><span class="term">arguments-programme-serveur</span></dt><dd><p>Cette option va de pair avec
	      <code class="option">programme-serveur</code> en précisant
	      les arguments, en commençant avec
	      <code class="literal">argv[0]</code>, passés au
	      &#8220;daemon&#8221; lors de son invocation.  Si
	      <code class="command">mydaemon -d</code> est la ligne de commande,
	      <code class="literal">mydaemon -d</code> sera la valeur de
	      l'option <code class="option">arguments-programme-serveur</code>.
	      Ici également, si le &#8220;daemon&#8221; est un
	      service interne, utilisez
	      <code class="option">internal</code>.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-security"></a>29.2.5. Sécurité</h3></div></div></div><p>En fonction des choix effectués
	à l'installation, plusieurs services
	peuvent être activés par défaut.  S'il n'y
	a pas de raison particulière à l'utilisation
	d'un &#8220;daemon&#8221;, envisagez de le désactiver.  Ajoutez un
	caractère &#8220;#&#8221; devant le
	&#8220;daemon&#8221; en question dans le fichier
	<code class="filename">/etc/inetd.conf</code>, et ensuite
	<a class="link" href="#network-inetd-reread" title="Exemple 29.1. Recharger le fichier de configuration d'inetd">rechargez la
	configuration
	d'inetd</a>.  Certains <span class="quote">« <span class="quote">daemon</span> »</span>s comme
	<span class="application">fingerd</span>, devraient être
	évités parce qu'ils peuvent fournir des informations
	utiles aux personnes malveillantes.</p><p>Certains &#8220;daemon&#8221;s n'ont aucune conscience des
	problèmes de sécurité, et ont un long
	délai limite, ou pas du tout, d'expiration pour les tentatives de
	connexions.  Cela permet à une personne malveillante
	d'envoyer régulièrement et de manière
	espacée des demandes de connexions à un
	&#8220;daemon&#8221; particulier, avec pour conséquence
	de saturer les ressources disponibles.  Cela peut être
	une bonne idée de placer des limitations
	<code class="option">nb-max-connexions-par-ip-par-minute</code>,
	<code class="option">max-child</code> ou
	<code class="option">nb-max-enfants</code> sur certains
	<span class="quote">« <span class="quote">daemon</span> »</span>s si vous trouvez que vous avez trop de
	connexions.</p><p>Par défaut, le &#8220;TCP wrapping&#8221; est
	activé.  Consultez la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts_access&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts_access</span>(5)</span></a> pour plus d'information sur le placement
	de restrictions TCP pour divers &#8220;daemon&#8221;s
	invoqués par <span class="application">inetd</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-inetd-misc"></a>29.2.6. Divers</h3></div></div></div><p><span class="application">daytime</span>,
	<span class="application">time</span>,
	<span class="application">echo</span>,
	<span class="application">discard</span>,
	<span class="application">chargen</span>, et
	<span class="application">auth</span> sont des services fournis en
	interne par <span class="application">inetd</span>.</p><p>Le  service <span class="application">auth</span> fournit les
	services réseau d'identification,
	et est configurable
	à un certain degré, alors que les autres
	services ne peuvent être que stoppés ou en
	fonctionnement.</p><p>Consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=inetd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">inetd</span>(8)</span></a> pour plus
	d'informations.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nfs"></a>29.3. Système de fichiers réseau (NFS)</h2></div><div><span class="authorgroup">Réorganisé et augmenté par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div></div></div><a id="idp82835792" class="indexterm"></a><p>Parmi les différents systèmes de fichiers que
      FreeBSD supporte se trouve le système de fichiers
      réseau, connu sous le nom de <acronym class="acronym">NFS</acronym>.
      <acronym class="acronym">NFS</acronym> permet à un système de
      partager des répertoires et des fichiers avec d'autres
      systèmes par l'intermédiaire d'un réseau.  En
      utilisant <acronym class="acronym">NFS</acronym>, les utilisateurs et les
      programmes peuvent accéder aux fichiers sur des
      systèmes distants comme s'ils étaient des fichiers
      locaux.</p><p>Certains des avantages les plus remarquables offerts par
      <acronym class="acronym">NFS</acronym> sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les stations de travail utilisent moins d'espace disque
	  en local parce que les données utilisées en
	  commun peuvent être stockées sur une seule
	  machine tout en restant accessibles aux autres machines sur le
	  réseau.</p></li><li class="listitem"><p>Les utilisateurs n'ont pas besoin d'avoir un
	  répertoire personnel sur chaque machine du
	  réseau.  Les répertoires personnels pourront se
	  trouver sur le serveur <acronym class="acronym">NFS</acronym> et seront
	  disponibles par l'intermédiaire du
	  réseau.</p></li><li class="listitem"><p>Les périphériques de stockage comme les
	  lecteurs de disquettes, de CDROM, de disquettes <span class="trademark">Zip</span>® peuvent
	  être utilisés par d'autres machines sur le
	  réseau.  Cela pourra réduire le nombre de
	  lecteurs de medias amovibles sur le réseau.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82846544"></a>29.3.1. Comment <acronym class="acronym">NFS</acronym> fonctionne</h3></div></div></div><p><acronym class="acronym">NFS</acronym> consiste en deux
	éléments principaux: un serveur et un ou
	plusieurs clients.  Le client accède à distance
	aux données stockées sur la machine serveur.
	Afin que tout cela fonctionne correctement quelques processus
	doivent être configurés et en
	fonctionnement.</p><p>Sur le serveur, les &#8220;daemons&#8221; suivants
	doivent tourner:</p><a id="idp82848592" class="indexterm"></a><a id="idp82849744" class="indexterm"></a><a id="idp82851024" class="indexterm"></a><a id="idp82851920" class="indexterm"></a><a id="idp82852816" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Daemon</th><th>Description</th></tr></thead><tbody><tr><td><span class="application">nfsd</span></td><td>Le &#8220;daemon&#8221; <acronym class="acronym">NFS</acronym>
		qui répond aux requêtes des clients
		<acronym class="acronym">NFS</acronym>.</td></tr><tr><td><span class="application">mountd</span></td><td>Le &#8220;daemon&#8221; de montage
		<acronym class="acronym">NFS</acronym> qui traite les requêtes que
		lui passe <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsd</span>(8)</span></a>.</td></tr><tr><td><span class="application">rpcbind</span></td><td>Ce <span class="quote">« <span class="quote">daemon</span> »</span> permet aux
		clients <acronym class="acronym">NFS</acronym> de trouver le port que
		le serveur <acronym class="acronym">NFS</acronym> utilise.</td></tr></tbody></table></div><p>Le client peut également faire tourner un
	&#8220;daemon&#8221; connu sous le nom de
	<span class="application">nfsiod</span>.  Le &#8220;daemon&#8221;
	<span class="application">nfsiod</span> traite les requêtes en
	provenance du serveur <acronym class="acronym">NFS</acronym>.  Ceci est
	optionnel, et améliore les performances, mais n'est pas
	indispensable pour une utilisation normale et correcte.
	Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=nfsiod&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">nfsiod</span>(8)</span></a> pour plus
	d'informations.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-configuring-nfs"></a>29.3.2. Configurer <acronym class="acronym">NFS</acronym></h3></div></div></div><a id="idp82876368" class="indexterm"></a><p>La configuration de <acronym class="acronym">NFS</acronym> est une
	opération relativement directe.  Les processus qui
	doivent tourner peuvent tous être lancés au
	démarrage en modifiant légèrement votre
	fichier <code class="filename">/etc/rc.conf</code>.</p><p>Sur le serveur <acronym class="acronym">NFS</acronym>, assurez-vous que
	les options suivantes sont configurées dans le fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">rpcbind_enable="YES"
nfs_server_enable="YES"
mountd_flags="-r"</pre><p><span class="application">mountd</span> est automatiquement
	exécuté dès que le serveur
	<acronym class="acronym">NFS</acronym> est activé.</p><p>Sur le client, assurez-vous que cette option est
	présente dans le fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">nfs_client_enable="YES"</pre><p>Le fichier <code class="filename">/etc/exports</code> indique quels
	systèmes de fichiers <acronym class="acronym">NFS</acronym> devraient
	être exportés (parfois on utilise le terme de
	&#8220;partagés&#8221;).  Chaque ligne dans
	<code class="filename">/etc/exports</code> précise un
	système de fichiers à exporter et quelles
	machines auront accès à ce système de
	fichiers.  En plus des machines qui auront accès, des
	options d'accès peuvent également être
	présentes.  Ces options sont nombreuses mais seules
	quelques unes seront abordées ici.  Vous pouvez
	aisément découvrir d'autres options en lisant la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a>.</p><p>Voici quelques exemples d'entrées du fichier
	<code class="filename">/etc/exports</code>:</p><a id="idp82885712" class="indexterm"></a><p>Les exemples suivants donnent une idée de comment
	exporter des systèmes de fichiers bien que certains
	paramètres peuvent être différents en
	fonction de votre environnement et votre configuration
	réseau.  Par exemple, pour exporter le
	répertoire <code class="filename">/cdrom</code>
	pour les trois machines d'exemple qui appartiennent au
	même domaine que le serveur (d'où l'absence du
	nom de domaine pour chacune d'entre elles) ou qui ont une
	entrée dans votre fichier
	<code class="filename">/etc/hosts</code>.  Le paramètre
	<code class="option">-ro</code> limite l'accès en lecture seule au
	système de fichiers exporté.  Avec ce
	paramètre, le système distant ne pourra pas
	écrire sur le système de fichiers
	exporté.</p><pre class="programlisting">/cdrom -ro host1 host2 host3</pre><p>La ligne suivante exporte <code class="filename">/home</code> pour les trois machines en
	utilisant les adresses IP.  C'est une configuration utile si
	vous disposez d'un réseau privé sans serveur
	<acronym class="acronym">DNS</acronym> configuré.  Le fichier
	<code class="filename">/etc/hosts</code> pourrait éventuellement
	être configuré pour les noms de machines
	internes, consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hosts&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">hosts</span>(5)</span></a> pour plus
	d'information.  Le paramètre <code class="option">-alldirs</code>
	autorise l'utilisation des sous-répertoires en tant que
	point de montage.  En d'autres termes, il ne montera pas les
	sous-répertoires mais autorisera le client à ne
	monter que les répertoires qui sont nécessaires
	ou désirés.</p><pre class="programlisting">/home  -alldirs  10.0.0.2 10.0.0.3 10.0.0.4</pre><p>La ligne suivante exporte <code class="filename">/a</code> pour que deux clients d'un
	domaine différent puissent y accéder.  Le
	paramètre <code class="option">-maproot=root</code> autorise
	l'utilisateur <code class="systemitem">root</code> du système
	distant à écrire des données sur le
	système de fichiers exporté en tant que
	<code class="systemitem">root</code>.  Si le paramètre
	<code class="literal">-maproot=root</code> n'est pas
	précisé, même si un utilisateur dispose
	d'un accès <code class="systemitem">root</code> sur le
	système distant, il ne pourra pas modifier de fichiers
	sur le système de fichiers exporté.</p><pre class="programlisting">/a  -maproot=root  host.example.com box.example.org</pre><p>Afin de pouvoir accéder à un système
	de fichiers exporté, le client doit avoir les
	permissions de le faire.  Assurez-vous que le client est
	mentionné dans votre fichier
	<code class="filename">/etc/exports</code>.</p><p>Dans <code class="filename">/etc/exports</code>, chaque ligne
	représente l'information d'exportation d'un
	système de fichiers vers une machine.  Une machine
	distante ne peut être spécifiée qu'une
	fois par système de fichiers, et ne devrait avoir
	qu'une seule entrée par défaut.  Par exemple,
	supposons que <code class="filename">/usr</code> soit
	un seul système de fichiers.  Le fichier
	<code class="filename">/etc/exports</code> suivant serait
	invalide:</p><pre class="programlisting"># Invalide quand /usr est un système de fichiers
/usr/src   client
/usr/ports client</pre><p>Un système de fichiers,
	<code class="filename">/usr</code>, a deux lignes
	précisant des exportations vers la même machine,
	<code class="systemitem">client</code>.  Le format correct pour une telle
	situation est:</p><pre class="programlisting">/usr/src /usr/ports  client</pre><p>Les propriétés d'un système de fichiers
	exporté vers une machine donnée devraient
	apparaître sur une ligne.  Les lignes sans client sont
	traitées comme destinée à une seule
	machine.  Cela limite la manière dont vous pouvez
	exporter les systèmes de fichiers, mais pour la plupart
	des gens cela n'est pas un problème.</p><p>Ce qui suit est un exemple de liste d'exportation valide,
	où les répertoires <code class="filename">/usr</code> et <code class="filename">/exports</code> sont des systèmes
	de fichiers locaux:</p><pre class="programlisting"># Exporte src et ports vers client01 et client02, mais seul
# client01 dispose des privilèges root dessus
/usr/src /usr/ports -maproot=root    client01
/usr/src /usr/ports               client02
# Les machines clientes ont les privilèges root et peuvent monter tout
# de /exports.  N'importe qui peut monter en lecture seule
# /exports/obj
/exports -alldirs -maproot=root      client01 client02
/exports/obj -ro</pre><p>Le <span class="quote">« <span class="quote">daemon</span> »</span> <span class="application">mountd</span>
	doit être forcé de relire le fichier
	<code class="filename">/etc/exports</code> à chacune de ses
	modifications, afin que les changements puissent prendre effet.
	Cela peut être effectué soit en envoyant un signal
	HUP au <span class="quote">« <span class="quote">daemon</span> »</span>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre><p>soit en invoquant la procédure <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rc</span>(8)</span></a> de
	<code class="command">mountd</code> avec le paramètre
	approprié:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/mountd onereload</code></strong></pre><p>Veuillez consulter la <a class="xref" href="#configtuning-rcd" title="12.7. Utilisation du système rc sous FreeBSD">Section 12.7, « Utilisation du système rc sous FreeBSD »</a>
	pour plus d'information sur l'utilisation des procédures
	rc.</p><p>De plus, un redémarrage permettra à FreeBSD de
	tout configurer proprement.  Un redémarrage n'est
	cependant pas nécessaire.  Exécuter les
	commandes suivantes en tant que <code class="systemitem">root</code>
	devrait mettre en place ce qui est nécessaire.</p><p>Sur le serveur <acronym class="acronym">NFS</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rpcbind</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>nfsd -u -t -n 4</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>mountd -r</code></strong></pre><p>Sur le client <acronym class="acronym">NFS</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>nfsiod -n 4</code></strong></pre><p>Maintenant il devrait être possible de monter un
	système de fichiers distant.  Dans nos exemples le nom
	du serveur sera <code class="systemitem">serveur</code> et le nom du client
	<code class="systemitem">client</code>.  Si vous voulez monter temporairement
	un système de fichiers distant ou vous voulez
	simplement tester la configuration, exécutez juste une
	commande comme celle-ci en tant que <code class="systemitem">root</code>
	sur le client:</p><a id="idp82923472" class="indexterm"></a><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount serveur:/home /mnt</code></strong></pre><p>Cela montera le répertoire <code class="filename">/home</code> situé sur le serveur
	au point <code class="filename">/mnt</code> sur le
	client.  Si tout est correctement configuré vous
	devriez être en mesure d'entrer dans le
	répertoire <code class="filename">/mnt</code>
	sur le client et de voir tous les fichiers qui sont sur le
	serveur.</p><p>Si vous désirez monter automatiquement un
	système de fichiers distant à chaque
	démarrage de l'ordinateur, ajoutez le système de
	fichiers au fichier <code class="filename">/etc/fstab</code>.  Voici un
	exemple:</p><pre class="programlisting">server:/home	/mnt	nfs	rw	0	0</pre><p>La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fstab&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span></a> liste toutes les options
	disponibles.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82929616"></a>29.3.3. Verrouillage</h3></div></div></div><p>Certaines applications (par exemple
	<span class="application">mutt</span>) ont besoin du verrouillage
	des fichiers pour fonctionner correctement.  Dans le cas du
	<acronym class="acronym">NFS</acronym>, <span class="application">rpc.lockd</span>
	peut être utilisé pour assurer le verrouillage
	des fichiers.  Pour l'activer, ajouter ce qui suit au fichier
	<code class="filename">/etc/rc.conf</code> sur les machines clientes et
	serveur (on suppose que les clients et le serveur
	<acronym class="acronym">NFS</acronym> sont déjà
	configurés):</p><pre class="programlisting">rpc_lockd_enable="YES"
rpc_statd_enable="YES"</pre><p>Lancez l'application en utilisant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/nfslocking start</code></strong></pre><p>Si un verrouillage réel n'est pas nécessaire
	entre les clients et le serveur <acronym class="acronym">NFS</acronym>, il est
	possible de laisser le client <acronym class="acronym">NFS</acronym> effectuer
	le verrouillage localement en passant l'option
	<code class="option">-L</code> à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a>.  Veuillez vous
	référer à la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount_nfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount_nfs</span>(8)</span></a> pour de plus amples détails.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp82937552"></a>29.3.4. Exemples pratiques d'utilisation</h3></div></div></div><p>Il existe de nombreuses applications pratiques de
	<acronym class="acronym">NFS</acronym>.  Les plus communes sont
	présentés ci-dessous:</p><a id="idp82938960" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configurer plusieurs machines pour partager un CDROM
	    ou un autre médium.  C'est moins cher et souvent une
	    méthode plus pratique pour installer des logiciels
	    sur de multiples machines.</p></li><li class="listitem"><p>Sur les réseaux importants, il peut être
	    plus pratique de configurer un serveur
	    <acronym class="acronym">NFS</acronym> central sur lequel tous les
	    répertoires utilisateurs sont stockés.  Ces
	    répertoires utilisateurs peuvent alors être
	    exportés vers le réseau, les utilisateurs
	    devraient alors toujours avoir le même
	    répertoire utilisateur indépendamment de la
	    station de travail sur laquelle ils ouvrent une
	    session.</p></li><li class="listitem"><p>Plusieurs machines pourront avoir un répertoire
	    <code class="filename">/usr/ports/distfiles</code>
	    commun.  De cette manière, quand vous avez besoin
	    d'installer un logiciel porté sur plusieurs machines,
	    vous pouvez accéder rapidement aux sources sans les
	    télécharger sur chaque machine.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-amd"></a>29.3.5. Montages automatiques avec
	<span class="application">amd</span></h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Wylie</span> <span class="surname">Stilwell</span></span>. </span></div><div><span class="authorgroup">Réécrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><a id="idp82952272" class="indexterm"></a><a id="idp82957008" class="indexterm"></a><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> (&#8220;automatic mounter
	daemon&#8221;&#8212;&#8220;daemon&#8221; de montage
	automatique) monte automatiquement un système de
	fichiers distant dès que l'on accède à un
	fichier ou un répertoire contenu par ce système
	de fichiers.  Les systèmes de fichiers qui sont
	inactifs pendant une certaine période seront
	automatiquement démontés par
	<span class="application">amd</span>.  L'utilisation
	d'<span class="application">amd</span> offre une alternative simple
	aux montages permanents qui sont généralement
	listés dans <code class="filename">/etc/fstab</code>.</p><p><span class="application">amd</span> opère en s'attachant
	comme un serveur NFS aux répertoires <code class="filename">/host</code> et <code class="filename">/net</code>.  Quand on accède
	à un fichier à l'intérieur de ces
	répertoires, <span class="application">amd</span> recherche
	le montage distant correspondant et le monte automatiquement.
	<code class="filename">/net</code> est utilisé
	pour monter un système de fichiers exporté
	à partir d'une adresse IP, alors que <code class="filename">/host</code> est utilisé pour
	monter un système de fichiers exporté à
	partir d'un nom de machine distant.</p><p>Un accès à un fichier dans <code class="filename">/host/foobar/usr</code> demandera
	à <span class="application">amd</span> de tenter de monter
	l'export <code class="filename">/usr</code> sur la
	machine <code class="systemitem">foobar</code>.</p><div class="example"><a id="idp82964304"></a><div class="example-title">Exemple 29.2. Monter un systèmes de fichiers exporté
	  avec <span class="application">amd</span></div><div class="example-contents"><p>Vous pouvez voir les systèmes de fichiers
	  exportés par une machine distante avec la commande
	  <code class="command">showmount</code>.  Par exemple, pour voir les
	  répertoires exportés par une machine
	  appelée <code class="systemitem">foobar</code>, vous pouvez
	  utiliser:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>showmount -e foobar</code></strong>
Exports list on foobar:
/usr                               10.10.10.0
/a                                 10.10.10.0
<code class="prompt">%</code> <strong class="userinput"><code>cd /host/foobar/usr</code></strong></pre></div></div><br class="example-break" /><p>Comme on le voit dans l'exemple,
	<code class="command">showmount</code> liste <code class="filename">/usr</code> comme une exportation.  Quand
	on change de répertoire pour
	<code class="filename">/host/foobar/usr</code>,
	<span class="application">amd</span> tente de résoudre le nom
	de machine <code class="systemitem">foobar</code> et de monter
	automatiquement le système exporté
	désiré.</p><p><span class="application">amd</span> peut être
	lancé par les procédures de démarrage en
	ajoutant les lignes suivantes dans le fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">amd_enable="YES"</pre><p>De plus, des paramètres peuvent être
	passés à <span class="application">amd</span> à
	l'aide de l'option <code class="literal">amd_flags</code>.  Par
	défaut, l'option <code class="varname">amd_flags</code> est
	possitionnée à:</p><pre class="programlisting">amd_flags="-a /.amd_mnt -l syslog /host /etc/amd.map /net /etc/amd.map"</pre><p>Le fichier <code class="filename">/etc/amd.map</code>
	définit les options par défaut avec lesquelles
	les systèmes exportés sont montés.  Le
	fichier <code class="filename">/etc/amd.conf</code> définit
	certaines des fonctionnalités les plus avancées
	de <span class="application">amd</span>.</p><p>Consultez les pages de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">amd</span>(8)</span></a> et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=amd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">amd.conf</span>(5)</span></a> pour plus d'informations.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nfs-integration"></a>29.3.6. Problèmes d'intégration avec d'autres
	systèmes</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">John</span> <span class="surname">Lind</span></span>. </span></div></div></div><p>Certaines cartes Ethernet ISA présentent des
	limitations qui peuvent poser de sérieux
	problèmes sur un réseau, en particulier avec
	NFS.  Ce n'est pas une particularité de FreeBSD, mais FreeBSD
	en est également affecté.</p><p>Ce problème se produit pratiquement à chaque
	fois que des systèmes (FreeBSD) PC sont sur le même
	réseau que des stations de travail très
	performantes, comme celles de Silicon Graphics, Inc. et Sun
	Microsystems, Inc.  Les montages NFS se feront sans
	difficulté, et certaines opérations pourront
	réussir, puis soudain le serveur semblera ne plus
	répondre au client, bien que les requêtes vers ou
	en provenance d'autres systèmes continueront à
	être traitées normalement.  Cela se manifeste
	sur la machine cliente, que ce soit le système FreeBSD ou
	la station de travail.  Sur de nombreux systèmes, il
	n'est pas possible d'arrêter le client proprement une
	fois que ce problème apparaît.  La seule solution
	est souvent de réinitialiser le client parce que le
	problème NFS ne peut être résolu.</p><p>Bien que la solution &#8220;correcte&#8221; est
	d'installer une carte Ethernet plus performante et de plus
	grande capacité sur le système FreeBSD, il existe
	une solution simple qui donnera satisfaction.  Si le
	système FreeBSD est le <span class="emphasis"><em>serveur</em></span>,
	ajoutez l'option <code class="option">-w=1024</code> lors du montage sur
	le client.  Si le système FreeBSD est le
	<span class="emphasis"><em>client</em></span>, alors montez le système de
	fichiers NFS avec l'option <code class="option">-r=1024</code>.  Ces
	options peuvent être spécifiées dans le
	quatrième champ de l'entrée
	<code class="filename">fstab</code> sur le client pour les montages
	automatiques, ou en utilisant le paramètre
	<code class="option">-o</code> de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a> pour les
	montages manuels.</p><p>Il faut noter qu'il existe un problème
	différent, que l'on confond parfois avec le
	précédent, qui peut se produire lorsque les
	serveurs et les clients NFS sont sur des réseaux
	différents.  Si c'est le cas,
	<span class="emphasis"><em>assurez-vous</em></span> que vos routeurs
	transmettent bien les informations UDP nécessaires, ou
	vous n'irez nulle part, quoi que vous fassiez par
	ailleurs.</p><p>Dans les exemples suivants, <code class="systemitem">fastws</code> est le
	nom de la station de travail (interface) performante, et
	<code class="systemitem">freebox</code> celui d'une machine (interface) FreeBSD
	avec une carte Ethernet moins performante.  <code class="filename">/sharedfs</code> est le système de
	fichiers NFS qui sera exporté (consulter la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=exports&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">exports</span>(5)</span></a>), et <code class="filename">/project</code> sera le point de montage
	sur le client pour le système de fichiers
	exporté.  Dans tous les cas, des options
	supplémentaires, telles que <code class="option">hard</code>
	<code class="option">soft</code> et <code class="option">bg</code> seront
	peut-être nécessaires pour vos
	applications.</p><p>Exemple d'extrait du fichier
	<code class="filename">/etc/fstab</code> sur <code class="systemitem">freebox</code>
	quand le système FreeBSD (<code class="systemitem">freebox</code>) est le
	client:</p><pre class="programlisting">fastws:/sharedfs /project nfs rw,-r=1024 0 0</pre><p>Commande de montage manuelle sur
	<code class="systemitem">freebox</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -r=1024 fastws:/sharedfs /project</code></strong></pre><p>Exemple d'extrait du fichier
	<code class="filename">/etc/fstab</code> sur <code class="systemitem">fastws</code>
	quand le système FreeBSD est le serveur:</p><pre class="programlisting">freebox:/sharedfs /project nfs rw,-w=1024 0 0</pre><p>Commande de montage manuelle sur
	<code class="systemitem">fastws</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount -t nfs -o -w=1024 freebox:/sharedfs /project</code></strong></pre><p>Presque n'importe quelle carte Ethernet 16 bits
	permettra d'opérer sans l'utilisation des
	paramètres restrictifs précédents sur les
	tailles des tampons de lecture et d'écriture.</p><p>Pour ceux que cela intéresse, voici ce qui se passe
	quand le problème survient, ce qui explique
	également pourquoi ce n'est pas
	récupérable.  NFS travaille
	généralement avec une taille de
	&#8220;bloc&#8221; de 8 k (bien qu'il arrive qu'il les
	fragmente en de plus petits morceaux).  Comme la taille
	maximale d'un paquet Ethernet est de 1500 octets, le
	&#8220;bloc&#8221; NFS est divisé en plusieurs paquets
	Ethernet, bien qu'il soit toujours vu comme quelque chose
	d'unitaire par les couches supérieures du code, et doit
	être réceptionné, assemblé, et
	<span class="emphasis"><em>acquitté</em></span> comme tel.  Les stations
	de travail performantes peuvent traiter les paquets qui
	composent le bloc NFS les uns après les autres,
	pratiquement aussi rapidement que le standard le permet.  Sur
	les cartes les plus petites, de moindre capacité, les
	derniers paquets d'un même bloc écrasent les
	paquets précédents avant qu'ils aient pu
	être transmis à la machine et le bloc ne peut
	être réassemblé ou acquitté.  Avec
	pour conséquence, le dépassement du délai
	d'attente sur la station de travail qui recommence alors la
	transmission, mais en renvoyant l'intégralité
	des 8 K, et ce processus se répète à
	l'infini.</p><p>En définissant la taille de bloc inférieure
	à la taille d'un paquet Ethernet, nous nous assurons
	que chaque paquet Ethernet complet sera acquitté
	individuellement, évitant ainsi la situation de
	blocage.</p><p>Des écrasements peuvent toujours survenir quand des
	stations de travail performantes surchargent un système
	PC de données, mais avec de meilleures cartes, de tels
	écrasements ne sont pas systématiques pour les
	&#8220;blocs&#8221; NFS.  Quand un écrasement
	apparaît, les blocs affectés sont retransmis, et
	ils y a de fortes chances pour qu'ils soient reçus,
	assemblés et acquittés.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-nis"></a>29.4. Services d'information réseau (NIS/YP)</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Bill</span> <span class="surname">Swingle</span></span>. </span></div><div><span class="authorgroup">Augmenté par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Eric</span> <span class="surname">Ogren</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83032656"></a>29.4.1. Qu'est-ce que c'est?</h3></div></div></div><a id="idp83033296" class="indexterm"></a><a id="idp83033808" class="indexterm"></a><a id="idp83034320" class="indexterm"></a><a id="idp83034960" class="indexterm"></a><a id="idp83035472" class="indexterm"></a><a id="idp83035984" class="indexterm"></a><a id="idp83036496" class="indexterm"></a><p>NIS, qui signifie &#8220;Network Information
	Services&#8221; (services d'information réseau), fut
	développé par Sun Microsystems pour centraliser
	l'administration de systèmes <span class="trademark">UNIX</span>® (à l'origine
	<span class="trademark">SunOS</span>&#8482;).  C'est devenu aujourd'hui un standard industriel; tous
	les systèmes importants de type <span class="trademark">UNIX</span>® (<span class="trademark">Solaris</span>&#8482;, HP-UX,
	<span class="trademark">AIX</span>®, Linux, NetBSD, OpenBSD, FreeBSD, etc.) supportent
	NIS.</p><a id="idp83039696" class="indexterm"></a><p>NIS était appelé au départ
	&#8220;Yellow Pages&#8221; (page jaunes), mais étant
	donné que c'était marque déposée,
	Sun changea le nom.  L'ancienne appelation (et yp) est toujours
	rencontrée et utilisée.</p><a id="idp83040848" class="indexterm"></a><p>C'est un système client/serveur basé sur les
	RPCs qui permet à un groupe de machines d'un domaine NIS
	de partager un ensemble de fichiers de configuration communs.
	Cela permet à un administrateur système de mettre
	en place des clients NIS avec un minimum de configuration et
	d'ajouter, modifier ou supprimer les informations de
	configuration à partir d'un unique emplacement.</p><a id="idp83042384" class="indexterm"></a><p>C'est similaire au système de domaine <span class="trademark">Windows NT</span>®;
	bien que l'implémentation interne des deux n'est pas du
	tout identique, les fonctionnalités de base sont
	comparables.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83044048"></a>29.4.2. Termes/processus à connaître</h3></div></div></div><p>Il existe plusieurs termes et processus utilisateurs que
	vous rencontrerez lors de la configuration de NIS sous FreeBSD,
	que vous vouliez mettre en place un serveur NIS ou un client
	NIS:</p><a id="idp83045072" class="indexterm"></a><a id="idp83045968" class="indexterm"></a><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Terme</th><th>Description</th></tr></thead><tbody><tr><td>Nom de domaine NIS</td><td>Un serveur maître NIS et tous ses clients
		(y compris ses serveurs esclaves) ont un domaine NIS.
		Similaire au nom de domaine <span class="trademark">Windows NT</span>®, le nom de
		domaine NIS n'a rien à voir avec le
		système DNS.</td></tr><tr><td><span class="application">rpcbind</span></td><td>Doit tourner afin d'activer les RPC (Remote
		Procedure Call, appel de procédures distantes, un
		protocole réseau utilisé par NIS).  Si
		<span class="application">rpcbind</span> ne tourne pas, il
		sera impossible de faire fonctionner un serveur NIS, ou
		jouer le rôle d'un client NIS.</td></tr><tr><td><span class="application">ypbind</span></td><td>Fait pointer un client NIS vers son serveur NIS.
		Il récupérera le nom de domaine NIS
		auprès du système, et en utilisant les
		RPC, se connectera au serveur.
		<span class="application">ypbind</span> est le coeur de la
		communication client-serveur dans un environnement NIS;
		si <span class="application">ypbind</span> meurt sur une
		machine cliente, elle ne sera pas en mesure
		d'accéder au serveur NIS.</td></tr><tr><td><span class="application">ypserv</span></td><td>Ne devrait tourner que sur les serveurs NIS,
		c'est le processus serveur en lui-même.  Si
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> meurt, alors le serveur ne pourra plus
		répondre aux requêtes NIS (avec un peu de
		chance, un serveur esclave prendra la relève).
		Il existe des implémentations de NIS (mais ce
		n'est pas le cas de celle de FreeBSD), qui n'essayent pas
		de se reconnecter à un autre serveur si le
		serveur utilisé précédemment meurt.
		Souvent, la seule solution dans ce cas est de relancer
		le processus serveur (ou même redémarrer le
		serveur) ou le processus
		<span class="application">ypbind</span> sur le client.</td></tr><tr><td><span class="application">rpc.yppasswdd</span></td><td>Un autre processus qui ne devrait tourner que sur
		les serveurs maître NIS; c'est un
		&#8220;daemon&#8221; qui permettra aux clients de
		modifier leur mot de passe NIS.  Si ce
		&#8220;daemon&#8221; ne tourne pas, les utilisateurs
		devront ouvrir une session sur le serveur maître
		NIS et y changer à cet endroit leur mot de
		passe.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83064528"></a>29.4.3. Comment cela fonctionne-t-il?</h3></div></div></div><p>Dans un environnement NIS il y a trois types de machines:
	les serveurs maîtres, les serveurs esclaves et les
	clients.  Les serveurs centralisent les informations de
	configuration des machines.  Les serveurs maîtres
	détiennent l'exemplaire de référence de
	ces informations, tandis que les serveurs esclaves en ont un
	double pour assurer la redondance.  Les clients attendent des
	serveurs qu'ils leur fournissent ces informations.</p><p>Le contenu de nombreux fichiers peut être
	partagé de cette manière.  Les fichiers
	<code class="filename">master.passwd</code>,
	<code class="filename">group</code>, et <code class="filename">hosts</code> sont
	fréquemment partagés par l'intermédiaire
	de NIS.  A chaque fois qu'un processus d'une machine cliente a
	besoin d'une information qu'il trouverait normalement
	localement dans un de ces fichiers, il émet une
	requête au serveur NIS auquel il est rattaché
	pour obtenir cette information.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83067088"></a>29.4.3.1. Type de machine</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="idp83068240" class="indexterm"></a><p>Un <span class="emphasis"><em>serveur NIS maître</em></span>.
	      Ce serveur, analogue à un contrôleur de
	      domaine <span class="trademark">Windows NT</span>® primaire, gère les fichiers
	      utilisés par tous les clients NIS.  Les fichiers
	      <code class="filename">passwd</code>, <code class="filename">group</code>,
	      et les autres fichiers utilisés par les clients NIS
	      résident sur le serveur maître.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il est possible pour une machine d'être
		un serveur NIS maître pour plus qu'un domaine NIS.
		Cependant, ce cas ne sera pas abordé dans cette
		introduction, qui suppose un environnement NIS
		relativement petit.</p></div></li><li class="listitem"><a id="idp83072720" class="indexterm"></a><p><span class="emphasis"><em>Serveurs NIS esclaves</em></span>.
	      Similaire aux contrôleurs de domaine <span class="trademark">Windows NT</span>® de
	      secours, les serveurs NIS esclaves possèdent une
	      copie des fichiers du serveur NIS maître.  Les
	      serveurs NIS esclaves fournissent la redondance
	      nécessaire dans les environnements importants.  Ils
	      aident également à à la
	      répartition de la charge du serveur maître:
	      les clients NIS s'attachent toujours au serveur NIS dont
	      ils reçoivent la réponse en premier, y
	      compris si c'est la réponse d'un serveur
	      esclave.</p></li><li class="listitem"><a id="idp83075408" class="indexterm"></a><p><span class="emphasis"><em>Clients NIS</em></span>.
	      Les clients NIS, comme la plupart des stations de
	      travail <span class="trademark">Windows NT</span>®, s'identifient auprès du
	      serveur NIS (ou le contrôleur de domaine
	      <span class="trademark">Windows NT</span>® dans le cas de stations de travail
	      <span class="trademark">Windows NT</span>®) pour l'ouverture de sessions.</p></li></ul></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83079248"></a>29.4.4. Utiliser NIS/YP</h3></div></div></div><p>Cette section traitera de la configuration d'un
	exemple d'environnement NIS.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83080400"></a>29.4.4.1. Planification</h4></div></div></div><p>Supposons que vous êtes l'administrateur d'un
	  petit laboratoire universitaire.  Ce laboratoire dispose de
	  15 machines FreeBSD, et ne possède pas actuellement de
	  point central d'administration; chaque machine a ses propres
	  fichiers <code class="filename">/etc/passwd</code> et
	  <code class="filename">/etc/master.passwd</code>.  Ces fichiers sont
	  maintenus à jour entre eux grâce à des
	  interventions manuelles; actuellement quand vous ajoutez un
	  utilisateur pour le laboratoire, vous devez exécuter
	  <code class="command">adduser</code> sur les 15 machines.  Cela doit
	  changer, vous avez donc décidé de convertir le
	  laboratoire à l'utilisation de NIS en utilisant deux
	  machines comme serveurs.</p><p>La configuration du laboratoire ressemble à
	  quelque chose comme:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Nom de machine</th><th>Adresse IP</th><th>Rôle de la machine</th></tr></thead><tbody><tr><td><code class="systemitem">ellington</code></td><td><code class="systemitem">10.0.0.2</code></td><td>Maître NIS</td></tr><tr><td><code class="systemitem">coltrane</code></td><td><code class="systemitem">10.0.0.3</code></td><td>Esclave NIS</td></tr><tr><td><code class="systemitem">basie</code></td><td><code class="systemitem">10.0.0.4</code></td><td>Station de travail</td></tr><tr><td><code class="systemitem">bird</code></td><td><code class="systemitem">10.0.0.5</code></td><td>Machine cliente</td></tr><tr><td><code class="systemitem">cli[1-11]</code></td><td><code class="systemitem">10.0.0.[6-17]</code></td><td>Autres machines clientes</td></tr></tbody></table></div><p>Si vous mettez en place un système NIS pour la
	  première fois, c'est une bonne idée de penser
	  à ce que vous voulez en faire.  Peu importe la taille
	  de votre réseau, il y a quelques décisions
	  à prendre.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83104848"></a>29.4.4.1.1. Choisir un nom de domaine NIS</h5></div></div></div><a id="idp83105488" class="indexterm"></a><p>Ce n'est pas le &#8220;nom de domaine&#8221; dont vous
	    avez l'habitude.  Il est plus exactement appelé
	    &#8220;nom de domaine NIS&#8221;.  Quand un client diffuse
	    des requêtes pour obtenir des informations, il y
	    inclut le nom de domaine NIS auquel il appartient.  C'est
	    ainsi que plusieurs serveurs d'un même réseau
	    peuvent savoir lequel d'entre eux doit répondre aux
	    différentes requêtes.  Pensez au nom de domaine
	    NIS comme le nom d'un groupe de machines qui sont
	    reliées entre elles.</p><p>Certains choisissent d'utiliser leur nom de domaine
	    Internet pour nom de domaine NIS.  Ce n'est pas
	    conseillé parce que c'est une source de confusion
	    quand il faut résoudre un problème
	    réseau.  Le nom de domaine NIS devrait être
	    unique sur votre réseau et est utile s'il
	    décrit le groupe de machines qu'il
	    représente.  Par exemple, le département
	    artistique de Acme Inc. pourrait avoir
	    &#8220;acme-art&#8221; comme nom de domaine NIS.  Pour
	    notre exemple, nous supposerons que vous avez choisi le
	    nom <span class="emphasis"><em>test-domain</em></span>.</p><a id="idp83107792" class="indexterm"></a><p>Cependant, certains systèmes d'exploitation
	    (notamment <span class="trademark">SunOS</span>&#8482;) utilisent leur nom de domaine NIS pour
	    nom de domaine Internet.  Si une ou plusieurs machines sur
	    votre réseau présentent cette restriction,
	    vous <span class="emphasis"><em>devez</em></span> utiliser votre nom de
	    domaine Internet pour nom de domaine NIS.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83109712"></a>29.4.4.1.2. Contraintes au niveau du serveur</h5></div></div></div><p>Il y a plusieurs choses à garder à
	    l'esprit quand on choisit une machine destinée
	    à être un serveur NIS.  Un des
	    problèmes du NIS est le degré de
	    dépendance des clients vis à vis du serveur.
	    Si un client ne peut contacter le serveur de son domaine
	    NIS, la plupart du temps la machine n'est plus utilisable.
	    L'absence d'information sur les utilisateurs et les
	    groupes bloque la plupart des systèmes.  Vous devez
	    donc vous assurer de choisir une machine qui ne sera pas
	    redémarré fréquemment, ni
	    utilisée pour du développement.
	    Idéalement, le serveur NIS devrait être une
	    machine dont l'unique utilisation serait d'être un
	    serveur NIS.  Si vous avez un réseau qui n'est pas
	    très chargé, il peut être
	    envisagé de mettre le serveur NIS sur une machine
	    fournissant d'autres services, gardez juste à
	    l'esprit que si le serveur NIS n'est pas disponible
	    à un instant donné, cela affectera
	    <span class="emphasis"><em>tous</em></span> vos clients NIS.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83111376"></a>29.4.4.2. Serveurs NIS</h4></div></div></div><p>La copie de référence de toutes les
	  informations NIS est stockée sur une seule machine
	  appelée serveur NIS maître.  Les bases de
	  données utilisées pour le stockage de ces
	  informations sont appelées tables NIS (&#8220;NIS
	  maps&#8221;).  Sous FreeBSD ces tables se trouvent dans
	  <code class="filename">/var/yp/[domainname]</code> où
	  <code class="filename">[domainname]</code> est le nom du domaine NIS
	  concerné.  Un seul serveur NIS peut gérer
	  plusieurs domaines à la fois, il peut donc y avoir
	  plusieurs de ces répertoires, un pour chaque domaine.
	  Chaque domaine aura son propre jeu de tables.</p><p>Les serveurs NIS maîtres et esclaves traitent
	  toutes les requêtes NIS à l'aide du
	  &#8220;daemon&#8221; <span class="application">ypserv</span>.
	  <span class="application">ypserv</span> reçoit les
	  requêtes des clients NIS, traduit le nom de domaine et
	  le nom de table demandés en chemin d'accès
	  à la base de données correspondante et
	  transmet l'information de la base de données au
	  client.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83118544"></a>29.4.4.2.1. Configurer un serveur NIS maître</h5></div></div></div><a id="idp83119184" class="indexterm"></a><p>Selon vos besoins, la configuration d'un serveur NIS
	    maître peut être relativement simple.  FreeBSD
	    offre par défaut un support direct du NIS.  Tout ce
	    dont vous avez besoin est d'ajouter les lignes qui suivent
	    au fichier <code class="filename">/etc/rc.conf</code>, et FreeBSD
	    s'occupera du reste pour vous.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><pre class="programlisting">nisdomainname="test-domain"</pre><p>
		Cette ligne définie le nom de domaine NIS,
		<code class="literal">test-domain</code>, à la
		configuration du réseau (e.g. au
		démarrage).</p></li><li class="step"><pre class="programlisting">nis_server_enable="YES"</pre><p>
		Demandera à FreeBSD de lancer les processus du
		serveur NIS dès que le réseau est en
		fonctionnement.</p></li><li class="step"><pre class="programlisting">nis_yppasswdd_enable="YES"</pre><p>
		Ceci activera le &#8220;daemon&#8221;
		<span class="application">rpc.yppasswdd</span>, qui, comme
		mentionné précedement, permettra aux
		utilisateurs de modifier leur mot de passe à
		partir d'une machine cliente.</p></li></ol></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Selon votre configuration NIS, vous aurez
	      peut-être à ajouter des entrées
	      supplémentaires.  Consultez la <a class="link" href="#network-nis-server-is-client" title="29.4.10. Serveurs NIS qui sont aussi des clients NIS">section sur les
	      serveurs NIS qui sont également des clients
	      NIS</a>, plus bas, pour plus de détails.</p></div><p>Maintenant, tout ce que vous devez faire est
	    d'exécuter la commande
	    <code class="command">/etc/netstart</code> en tant que
	    super-utilisateur.  Elle configurera tout en utilisant les
	    valeurs que vous avez définies dans
	    <code class="filename">/etc/rc.conf</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83132240"></a>29.4.4.2.2. Initialisation des tables NIS</h5></div></div></div><a id="idp83132880" class="indexterm"></a><p>Les <span class="emphasis"><em>tables NIS</em></span> sont des fichiers
	    de base de données, qui sont conservés dans le
	    répertoire <code class="filename">/var/yp</code>.  Elles sont
	    générées à partir des fichiers
	    de configuration du répertoire <code class="filename">/etc</code> du serveur NIS
	    maître, avec une exception: le fichier
	    <code class="filename">/etc/master.passwd</code>.  Et cela pour une
	    bonne raison, vous ne voulez pas divulguer les mots de passe
	    pour l'utilisateur <code class="systemitem">root</code> et autres
	    comptes d'administration aux autres serveurs du domaine NIS.
	    Par conséquent, avant d'initialiser les tables NIS,
	    vous devrez faire:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp /etc/master.passwd /var/yp/master.passwd</code></strong>
  <code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
  <code class="prompt">#</code> <strong class="userinput"><code>vi master.passwd</code></strong></pre><p>Vous devrez effacer toutes les entrées
	    concernant les comptes système
	    (<code class="systemitem">bin</code>, <code class="systemitem">tty</code>,
	    <code class="systemitem">kmem</code>, <code class="systemitem">games</code>,
	    etc.), tout comme les comptes que vous ne désirez
	    pas propager aux clients NIS (par exemple
	    <code class="systemitem">root</code> et tout autre compte avec un UID
	    0 (super-utilisateur)).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Assurez-vous que le fichier
	    <code class="filename">/var/yp/master.passwd</code> n'est pas
	    lisible par son groupe ou le reste du monde (mode 600)!
	    Utilisez la commande <code class="command">chmod</code> si
	    nécessaire.</p></div><a id="idp83143248" class="indexterm"></a><p>Cela achevé, il est temps d'initialiser les
	    tables NIS!  FreeBSD dispose d'une procédure
	    appelée <code class="command">ypinit</code> pour le faire
	    à votre place (consultez sa page de manuel pour plus
	    d'informations).  Notez que cette procédure est
	    disponible sur la plupart des systèmes d'exploitation
	    du type <span class="trademark">UNIX</span>®, mais pas tous.  Sur Digital UNIX/Compaq
	    Tru64 UNIX, elle est appelée
	    <code class="command">ypsetup</code>.  Comme nous voulons
	    générer les tables pour un maître NIS,
	    nous passons l'option <code class="option">-m</code> à
	    <code class="command">ypinit</code>.  Pour générer les
	    tables NIS, en supposant que vous avez effectué les
	    étapes précédentes, lancez:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>ypinit -m test-domain</code></strong>
Server Type: MASTER Domain: test-domain
Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.
Do you want this procedure to quit on non-fatal errors? [y/n: n] <strong class="userinput"><code>n</code></strong>
Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
At this point, we have to construct a list of this domains YP servers.
rod.darktech.org is already known as master server.
Please continue to add any slave servers, one per line. When you are
done with the list, type a &lt;control D&gt;.
master server   :  ellington
next host to add:  <strong class="userinput"><code>coltrane</code></strong>
next host to add:  <strong class="userinput"><code>^D</code></strong>
The current list of NIS servers looks like this:
ellington
coltrane
Is this correct?  [y/n: y] <strong class="userinput"><code>y</code></strong>

[..output from map generation..]

NIS Map update completed.
ellington has been setup as an YP master server without any errors.</pre><p><code class="command">ypinit</code> devrait avoir
	    créé <code class="filename">/var/yp/Makefile</code>
	    à partir de
	    <code class="filename">/var/yp/Makefile.dist</code>.  Une fois
	    créé, ce fichier suppose que vous être
	    dans un environnement composé uniquement de
	    machines FreeBSD et avec un seul serveur.  Comme
	    <code class="literal">test-domain</code> dispose également
	    d'un serveur esclave, vous devez éditer
	    <code class="filename">/var/yp/Makefile</code>:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/Makefile</code></strong></pre><p>Vous devez commenter la ligne</p><pre class="programlisting">NOPUSH = "True"</pre><p>(si elle n'est pas déjà
	    commentée).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83170000"></a>29.4.4.2.3. Configurer un serveur NIS esclave</h5></div></div></div><a id="idp83170640" class="indexterm"></a><p>Configurer un serveur NIS esclave est encore plus
	    simple que de configurer un serveur maître.  Ouvrez
	    une session sur le serveur esclave et éditez le
	    fichier <code class="filename">/etc/rc.conf</code> comme
	    précédemment.  La seule différence est
	    que nous devons maintenant utiliser l'option
	    <code class="option">-s</code> avec <code class="command">ypinit</code>.
	    L'option <code class="option">-s</code> a besoin du nom du serveur NIS
	    maître, donc notre ligne de commande ressemblera
	    à:</p><pre class="screen">coltrane<code class="prompt">#</code> <strong class="userinput"><code>ypinit -s ellington test-domain</code></strong>

Server Type: SLAVE Domain: test-domain Master: ellington

Creating an YP server will require that you answer a few questions.
Questions will all be asked at the beginning of the procedure.

Do you want this procedure to quit on non-fatal errors? [y/n: n]  <strong class="userinput"><code>n</code></strong>

Ok, please remember to go back and redo manually whatever fails.
If you don't, something might not work.
There will be no further questions. The remainder of the procedure
should take a few minutes, to copy the databases from ellington.
Transferring netgroup...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byuser...
ypxfr: Exiting: Map successfully transferred
Transferring netgroup.byhost...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byuid...
ypxfr: Exiting: Map successfully transferred
Transferring passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring group.bygid...
ypxfr: Exiting: Map successfully transferred
Transferring group.byname...
ypxfr: Exiting: Map successfully transferred
Transferring services.byname...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring rpc.byname...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.byname...
ypxfr: Exiting: Map successfully transferred
Transferring master.passwd.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byname...
ypxfr: Exiting: Map successfully transferred
Transferring networks.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring netid.byname...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byaddr...
ypxfr: Exiting: Map successfully transferred
Transferring protocols.bynumber...
ypxfr: Exiting: Map successfully transferred
Transferring ypservers...
ypxfr: Exiting: Map successfully transferred
Transferring hosts.byname...
ypxfr: Exiting: Map successfully transferred

coltrane has been setup as an YP slave server without any errors.
Don't forget to update map ypservers on ellington.</pre><p>Vous devriez avoir un répertoire appelé
	    <code class="filename">/var/yp/test-domain</code>.  Des copies des
	    tables du serveur NIS maître devraient se trouver
	    dans ce répertoire.  Vous devrez vous assurer que
	    ces tables restent à jour.  Les entrées
	    suivantes dans <code class="filename">/etc/crontab</code> sur vos
	    serveurs esclaves s'en chargeront:</p><pre class="programlisting">20      *       *       *       *       root   /usr/libexec/ypxfr passwd.byname
21      *       *       *       *       root   /usr/libexec/ypxfr passwd.byuid</pre><p>Ces deux lignes obligent le serveur esclave à
	    synchroniser ses tables avec celles du serveur
	    maître.  Bien que ces entrées ne soient pas
	    indispensables puisque le serveur maître essaye de
	    s'assurer que toute modification de ses tables NIS soit
	    répercutée à ses serveurs esclaves et
	    comme l'information sur les mots de passe est vitale pour
	    les systèmes qui dépendent du serveur, il
	    est bon de forcer les mises à jour.  C'est d'autant
	    plus important sur les réseaux chargés
	    où il n'est pas certain que les mises à jour
	    soient intégrales.</p><p>Maintenant, exécutez la commande
	    <code class="command">/etc/netstart</code> sur le serveur esclave,
	    ce qui lancera le serveur NIS.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83186512"></a>29.4.4.3. Clients NIS</h4></div></div></div><p>Un client NIS établit une connexion avec un
	  serveur NIS donné par l'intermédiaire du
	  &#8220;daemon&#8221; <span class="application">ypbind</span>.
	  <span class="application">ypbind</span> consulte le nom de domaine
	  par défaut du système (défini par la
	  commande <code class="command">domainname</code>), et commence
	  à diffuser des requêtes RPC sur le
	  réseau local.  Ces requêtes précisent le
	  nom de domaine auquel <span class="application">ypbind</span>
	  essaye de se rattacher.  Si un serveur configuré pour
	  ce domaine reçoit une des requêtes
	  diffusées, il répond à
	  <span class="application">ypbind</span>, qui enregistrera
	  l'adresse du serveur.  S'il y a plusieurs serveurs
	  disponibles (un maître et plusieurs esclaves par
	  example), <span class="application">ypbind</span> utilisera
	  l'adresse du premier à répondre.  Dès
	  lors, le système client dirigera toutes ses
	  requêtes NIS vers ce serveur.
	  <span class="application">ypbind</span> enverra de temps en temps
	  des requêtes &#8220;ping&#8221; au serveur pour
	  s'assurer qu'il fonctionne toujours.  S'il ne reçoit
	  pas de réponse dans un laps de temps raisonnable,
	  <span class="application">ypbind</span> considérera ne plus
	  être attaché au domaine et recommencera
	  à diffuser des requêtes dans l'espoir de
	  trouver un autre serveur.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83190608"></a>29.4.4.3.1. Configurer un client NIS</h5></div></div></div><a id="idp83191248" class="indexterm"></a><p>Configurer une machine FreeBSD en client NIS est assez
	    simple.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Editez le fichier
		<code class="filename">/etc/rc.conf</code> et ajoutez les lignes
		suivantes afin de définir le nom de domaine NIS
		et lancez <span class="application">ypbind</span> au
		démarrage du réseau:</p><pre class="programlisting">nisdomainname="test-domain"
nis_client_enable="YES"</pre></li><li class="step"><p>Pour importer tous les mots de passe disponibles
		du serveur NIS, effacez tous les comptes utilisateur de
		votre fichier <code class="filename">/etc/master.passwd</code> et
		utilisez <code class="command">vipw</code> pour ajouter la ligne
		suivante à la fin du fichier:</p><pre class="programlisting">+:::::::::</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette ligne permet à chaque utilisateur
		  ayant un compte valide dans les tables de mots de
		  passe du serveur d'avoir un compte sur le client.  Il
		  y a plusieurs façons de configurer votre client
		  NIS en modifiant cette ligne.  Consultez la section
		  <a class="link" href="#network-netgroups" title="29.4.7. Utiliser les groupes réseau (&#8220;netgroups&#8221;)">groupes
		  réseau</a> plus bas pour plus
		  d'informations.  Pour en savoir plus, reportez-vous
		  à l'ouvrage <code class="literal">Managing NFS and
		  NIS</code> de chez O'Reilly.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Vous devriez conservez au moins un compte local
		  (i.e. non-importé via NIS) dans votre fichier
		  <code class="filename">/etc/master.passwd</code> et ce compte
		  devrait également être membre du groupe
		  <code class="systemitem">wheel</code>.  Si quelque chose se
		  passe mal avec NIS, ce compte peut être
		  utilisé pour ouvrir une session à
		  distance, devenir <code class="systemitem">root</code>, et
		  effectuer les corrections nécessaires.</p></div></li><li class="step"><p>Pour importer tous les groupes disponibles du
		serveur NIS, ajoutez cette ligne à votre fichier
		<code class="filename">/etc/group</code>:</p><pre class="programlisting">+:*::</pre></li></ol></div><p>Une fois que c'est fait, vous devriez être en
	    mesure d'exécuter <code class="command">ypcat passwd</code>
	    et voir la table des mots de passe du serveur NIS.</p></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83208016"></a>29.4.5. Sécurité du NIS</h3></div></div></div><p>De façon générale, n'importe quel
	utilisateur distant peut émettre une requête RPC
	à destination de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> et
	récupérer le contenu de vos tables NIS, en
	supposant que l'utilisateur distant connaisse votre nom de
	domaine.  Pour éviter ces transactions non
	autorisées, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> dispose d'une
	fonctionnalité appelée &#8220;securenets&#8221;
	qui peut être utilisée pour restreindre
	l'accès à un ensemble donné de machines.
	Au démarrage, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> tentera de charger les
	informations sur les &#8220;securenets&#8221; à partir
	d'un fichier nommé
	<code class="filename">/var/yp/securenets</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ce chemin d'accès peut varier en fonction du
	  chemin d'accès défini par l'option
	  <code class="option">-p</code>.  Ce fichier contient des entrées
	  sous la forme de définitions de réseau et d'un
	  masque de sous-réseau séparé par une
	  espace.  Les lignes commençant par un &#8220;#&#8221;
	  sont considérées comme des commentaires.  Un
	  exemple de fichier <code class="filename">securenets</code> peut
	  ressembler à ceci:</p></div><pre class="programlisting"># autorise les connexions depuis la machine locale -- obligatoire
127.0.0.1     255.255.255.255
# autorise les connexions de n'importe quelle machine
# du réseau 192.168.128.0
192.168.128.0 255.255.255.0
# autorise les connexions de n'importe quelle machine
# entre 10.0.0.0 et 10.0.15.255
# y compris les machines du laboratoire de test
10.0.0.0      255.255.240.0</pre><p>Si <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypserv&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypserv</span>(8)</span></a> reçoit une requête d'une
	adresse qui satisfait à ces règles, il la traite
	normalement.  Si une adresse ne correspond pas aux
	règles, la requête sera ignorée et un
	message d'avertissement sera enregistré.  Si le fichier
	<code class="filename">/var/yp/securenets</code> n'existe pas,
	<code class="command">ypserv</code> autorisera les connexions à
	partir de n'importe quelle machine.</p><p>Le programme <code class="command">ypserv</code> supporte
	également l'outil <span class="application">TCP Wrapper</span>
	de Wietse Venema.  Cela permet à l'administrateur
	d'utiliser les fichiers de configuration de
	<span class="application">TCP Wrapper</span> pour contrôler les
	accès à la place de
	<code class="filename">/var/yp/securenets</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Bien que ces deux mécanismes de contrôle
	  d'accès offrent une certaine sécurité, il
	  sont, de même que le test du port
	  privilégié, vulnérables aux attaques par
	  &#8220;usurpation&#8221; d'adresses.  Tout le trafic relatif
	  à NIS devrait être bloqué par votre
	  coupe-feu.</p><p xmlns="http://www.w3.org/1999/xhtml">Les serveurs utilisant
	  <code class="filename">/var/yp/securenets</code> pourront
	  échouer à traiter les requêtes de
	  clients NIS légitimes avec des implémentation
	  TCP/IP archaïques.  Certaines de ces
	  implémentations positionnent à zéro les
	  bits de la partie machine de l'adresse IP lors de diffusions
	  et/ou sont incapables respecter le masque de
	  sous-réseau lors du calcul de l'adresse de diffusion.
	  Alors que certains de ces problèmes peuvent
	  être corrigés en modifiant la configuration du
	  client, d'autres problèmes peuvent forcer le retrait
	  des systèmes clients fautifs ou l'abandon de
	  <code class="filename">/var/yp/securenets</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Utiliser <code class="filename">/var/yp/securenets</code> sur un
	  serveur avec une implémentation TCP/IP archaïque
	  est une mauvaise idée et sera à l'origine de
	  pertes de la fonctionnalité NIS pour une grande
	  partie de votre réseau.</p><a xmlns="http://www.w3.org/1999/xhtml" id="idp83224272" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">L'utilisation du système
	  <span class="application">TCP Wrapper</span> augmente les temps de
	  latence de votre serveur NIS.  Le délai
	  supplémentaire peut être suffisamment long pour
	  dépasser le délai d'attente des programmes
	  clients, tout particulièrement sur des réseaux
	  chargés ou avec des serveurs NIS lents.  Si un ou
	  plusieurs de vos systèmes clients souffrent de ces
	  symptômes, vous devrez convertir les systèmes
	  clients en question en serveurs esclaves NIS et les forcer
	  à se rattacher à eux-mêmes.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83225808"></a>29.4.6. Interdire l'accès à certains
	utilisateurs</h3></div></div></div><p>Dans notre laboratoire, il y a une machine
	<code class="systemitem">basie</code> qui est supposée être une
	station de travail de la faculté.  Nous ne voulons pas
	retirer cette machine du domaine NIS, le fichier
	<code class="filename">passwd</code> sur le serveur maître NIS
	contient les comptes pour la faculté et les
	étudiants.  Que pouvons-nous faire?</p><p>Il existe une méthode pour interdire à
	certains utilisateurs d'ouvrir une session sur une machine,
	même s'ils sont présents dans la base de
	données NIS.  Pour cela, tout ce dont vous avez besoin
	de faire est d'ajouter
	<span class="emphasis"><em>-<em class="replaceable"><code>nom_utilisateur</code></em></em></span>
	à la fin du fichier
	<code class="filename">/etc/master.passwd</code> sur la machine
	cliente, où <em class="replaceable"><code>nom_utilisateur</code></em>
	est le nom de l'utilisateur auquel vous désirez refuser
	l'accès.  Ceci doit être fait de
	préférence avec <code class="command">vipw</code>, puisque
	<code class="command">vipw</code> contrôlera vos changements au
	fichier <code class="filename">/etc/master.passwd</code>, et
	régénérera automatiquement la base de
	données à la fin de l'édition.  Par
	exemple, si nous voulions interdire l'ouverture de session
	à l'utilisateur <code class="systemitem">bill</code> sur la
	machine <code class="systemitem">basie</code> nous ferions:</p><pre class="screen">basie<code class="prompt">#</code> <strong class="userinput"><code>vipw</code></strong>
<strong class="userinput"><code>[add -bill to the end, exit]</code></strong>
vipw: rebuilding the database...
vipw: done

basie<code class="prompt">#</code> <strong class="userinput"><code>cat /etc/master.passwd</code></strong>

root:[password]:0:0::0:0:The super-user:/root:/bin/csh
toor:[password]:0:0::0:0:The other super-user:/root:/bin/sh
daemon:*:1:1::0:0:Owner of many system processes:/root:/sbin/nologin
operator:*:2:5::0:0:System &amp;:/:/sbin/nologin
bin:*:3:7::0:0:Binaries Commands and Source,,,:/:/sbin/nologin
tty:*:4:65533::0:0:Tty Sandbox:/:/sbin/nologin
kmem:*:5:65533::0:0:KMem Sandbox:/:/sbin/nologin
games:*:7:13::0:0:Games pseudo-user:/usr/games:/sbin/nologin
news:*:8:8::0:0:News Subsystem:/:/sbin/nologin
man:*:9:9::0:0:Mister Man Pages:/usr/share/man:/sbin/nologin
bind:*:53:53::0:0:Bind Sandbox:/:/sbin/nologin
uucp:*:66:66::0:0:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67::0:0:X-10 daemon:/usr/local/xten:/sbin/nologin
pop:*:68:6::0:0:Post Office Owner:/nonexistent:/sbin/nologin
nobody:*:65534:65534::0:0:Unprivileged user:/nonexistent:/sbin/nologin
+:::::::::
-bill

basie<code class="prompt">#</code></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-netgroups"></a>29.4.7. Utiliser les groupes réseau
	(&#8220;netgroups&#8221;)</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Udo</span> <span class="surname">Erdelhoff</span></span>. </span></div></div></div><a id="idp83241040" class="indexterm"></a><p>La méthode présentée dans la section
	précédente fonctionne relativement bien si vous
	avez besoin de règles spécifiques pour un petit
	nombre d'utilisateurs et/ou de machines.  Sur les
	réseaux plus important, vous
	<span class="emphasis"><em>oublierez</em></span> d'interdire l'accès aux
	machines sensibles à certains utilisateurs, ou vous
	devrez même modifier chaque machine
	séparément, perdant par là même les
	avantages du NIS: l'administration
	<span class="emphasis"><em>centralisée</em></span>.</p><p>La solution des développeurs du NIS pour ce
	problème est appelé <span class="emphasis"><em>groupes
	réseau</em></span> (&#8220;netgroups&#8221;).  Leur
	objet et définition peuvent être comparés
	aux groupes utilisés par les systèmes <span class="trademark">UNIX</span>®.
	La principale différence étant l'absence
	d'identifiants (ID) numériques et la capacité de
	définir un groupe réseau à l'aide de
	comptes utilisateur et d'autres groupes réseau.</p><p>Les groupes réseau furent développés
	pour gérer des réseaux importants et complexes
	avec des centaines de machines et d'utilisateurs.  C'est une
	bonne option si vous êtes forcés de faire avec
	une telle situation.  Cependant leur complexité rend
	impossible une explication avec des exemples simples.
	L'exemple utilisé dans le reste de cette section met en
	évidence ce problème.</p><p>Supposons que l'introduction avec succès de NIS
	dans votre laboratoire a retenu l'attention de vos
	supérieurs.  Votre mission suivante est
	d'étendre la couverture de votre domaine NIS à
	d'autres machines sur le campus.  Les deux tables contiennent
	les noms des nouveaux utilisateurs et des nouvelles machines
	ainsi qu'une courte description de chacun.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom(s) d'utilisateurs</th><th>Description</th></tr></thead><tbody><tr><td><code class="systemitem">alpha</code>,
		<code class="systemitem">beta</code></td><td>Les employés du département IT
		(&#8220;Information Technology&#8220;)</td></tr><tr><td><code class="systemitem">charlie</code>,
		<code class="systemitem">delta</code></td><td>Les nouveaux apprentis du département
		IT</td></tr><tr><td><code class="systemitem">echo</code>,
		<code class="systemitem">foxtrott</code>,
		<code class="systemitem">golf</code>, ...</td><td>Les employés ordinaires</td></tr><tr><td><code class="systemitem">able</code>,
		<code class="systemitem">baker</code>, ...</td><td>Les internes actuels</td></tr></tbody></table></div><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Nom(s) de machines</th><th>Description</th></tr></thead><tbody><tr><td><code class="systemitem">war</code>, <code class="systemitem">death</code>,
		<code class="systemitem">famine</code>,
		<code class="systemitem">pollution</code></td><td>Vos serveurs les plus importants.  Seuls les
		employés du département IT sont
		autorisés à ouvrir des sessions sur ces
		machines.</td></tr><tr><td><code class="systemitem">pride</code>, <code class="systemitem">greed</code>,
		<code class="systemitem">envy</code>, <code class="systemitem">wrath</code>,
		<code class="systemitem">lust</code>, <code class="systemitem">sloth</code></td><td>Serveurs moins importants.  Tous les membres du
		laboratoire IT sont autorisés à ouvrir des
		sessions sur ces machines.</td></tr><tr><td><code class="systemitem">one</code>, <code class="systemitem">two</code>,
		<code class="systemitem">three</code>, <code class="systemitem">four</code>,
		...</td><td>Stations de travail ordinaires.  Seuls les
		employés <span class="emphasis"><em>réels</em></span> sont
		autorisés à utiliser ces machines.</td></tr><tr><td><code class="systemitem">trashcan</code></td><td>Une très vielle machine sans
		données sensibles.  Même les internes
		peuvent utiliser cette machine.</td></tr></tbody></table></div><p>Si vous avez essayé d'implémenter ces
	restrictions en bloquant séparément chaque
	utilisateur, vous avez dû ajouter une ligne
	<code class="literal">-utilisateur</code>
	à chaque fichier <code class="filename">passwd</code> de chaque
	système pour chaque utilisateur non-autorisé
	à ouvrir une session sur le système.  Si vous
	omettez ne serait-ce qu'une entrée, vous aurez des
	problèmes.  Il doit être possible de faire cela
	lors de la configuration initiale, cependant vous
	<span class="emphasis"><em>finirez</em></span> par oublier d'ajouter les lignes
	pour de nouveaux utilisateurs lors d'opérations
	quotidiennes.  Après tout, Murphy était
	quelqu'un d'optimiste.</p><p>Traiter cette situation avec les groupes réseau
	présente plusieurs avantages.  Chaque utilisateur n'a
	pas besoin d'être traité
	séparément; vous assignez un utilisateur
	à un ou plusieurs groupes réseau et autorisez ou
	refusez l'ouverture de session à tous les membres du
	groupe réseau.  Si vous ajoutez une nouvelle machine,
	vous n'aurez à définir les restrictions
	d'ouverture de session que pour les groupes réseau.
	Ces modifications sont indépendantes les unes des
	autres, plus de &#8220;pour chaque combinaison d'utilisateur
	et de machine faire...&#8221;  Si votre configuration NIS est
	réfléchie, vous n'aurez à modifier qu'une
	configuration centrale pour autoriser ou refuser
	l'accès aux machines.</p><p>La première étape est l'initialisation de la
	table NIS du groupe réseau.  La version FreeBSD
	d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypinit&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypinit</span>(8)</span></a> ne crée pas de table par
	défaut, mais son implémentation NIS la
	supportera une fois créée.  Pour créer
	une table vide, tapez simplement</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>vi /var/yp/netgroup</code></strong></pre><p>et commencez à ajouter du contenu.  Pour notre
	exemple, nous avons besoin de quatre groupes réseau:
	les employées du département IT, les apprentis
	du département IT, les employés normaux et les
	internes.</p><pre class="programlisting">IT_EMP  (,alpha,test-domain)    (,beta,test-domain)
IT_APP  (,charlie,test-domain)  (,delta,test-domain)
USERS   (,echo,test-domain)     (,foxtrott,test-domain) \
        (,golf,test-domain)
INTERNS (,able,test-domain)     (,baker,test-domain)</pre><p><code class="literal">IT_EMP</code>, <code class="literal">IT_APP</code> etc.
	sont les noms des groupes réseau.  Chaque groupement
	entre parenthèses ajoute un ou plusieurs comptes
	utilisateurs aux groupes.  Les trois champs dans un groupement
	sont:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Le nom de la/les machine(s) où les
	    éléments suivants sont valides.  Si vous ne
	    précisez pas un nom de machine, l'entrée est
	    valide sur toutes les machines.  Si vous précisez un
	    nom de machine, vous pénétrerez dans un
	    royaume obscure, d'horreur et de confusion totale.</p></li><li class="listitem"><p>Le nom du compte qui appartient au groupe
	    réseau.</p></li><li class="listitem"><p>Le domaine NIS pour le compte.  Vous pouvez importer
	    les comptes d'autres domaines NIS dans votre groupe
	    réseau si vous êtes une de ces personnes
	    malchanceuses avec plus d'un domaine NIS.</p></li></ol></div><p>Chacun de ces champs peut contenir des jokers.  Consultez
	la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgroup&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">netgroup</span>(5)</span></a> pour plus de
	détails.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><a xmlns="http://www.w3.org/1999/xhtml" id="idp83296592" class="indexterm"></a><p xmlns="http://www.w3.org/1999/xhtml">Les noms de groupes réseau plus long que 8
	  caractères ne devraient pas être utilisés,
	  tout particulièrement si vous avez des machines
	  utilisant d'autres systèmes d'exploitation dans votre
	  domaine NIS.  Les noms sont sensibles à la casse des
	  caractères; utiliser des majuscules pour vos noms de
	  groupes réseau est une méthode simple pour
	  distinguer les utilisateurs, les machines et les noms de
	  groupes réseau.</p><p xmlns="http://www.w3.org/1999/xhtml">Certains clients NIS (autres que FreeBSD) ne peuvent
	  gérer les groupes réseau avec un grand nombre
	  d'entrées.  Par exemple, certaines anciennes versions
	  de <span class="trademark">SunOS</span>&#8482; commencent à causer des problèmes
	  si un groupe réseau contient plus de 15
	  <span class="emphasis"><em>entrées</em></span>.  Vous pouvez contourner
	  cette limite en créant plusieurs sous-groupes
	  réseau avec 15 utilisateurs ou moins et un
	  véritable groupe réseau constitué des
	  sous-groupes réseau:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">BIGGRP1  (,joe1,domain)  (,joe2,domain)  (,joe3,domain) [...]
BIGGRP2  (,joe16,domain)  (,joe17,domain) [...]
BIGGRP3  (,joe31,domain)  (,joe32,domain)
BIGGROUP  BIGGRP1 BIGGRP2 BIGGRP3</pre><p xmlns="http://www.w3.org/1999/xhtml">Vous pouvez répéter ce processus si vous
	  avez besoin de plus de 255 utilisateurs dans un seul groupe
	  réseau.</p></div><p>Activer et propager votre nouvelle table NIS est
	simple:</p><pre class="screen">ellington<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
ellington<code class="prompt">#</code> <strong class="userinput"><code>make</code></strong></pre><p>Ceci générera les trois tables NIS
	<code class="filename">netgroup</code>,
	<code class="filename">netgroup.byhost</code> et
	<code class="filename">netgroup.byuser</code>.  Utilisez <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypcat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ypcat</span>(1)</span></a>
	pour contrôler si vos nouvelles tables NIs sont
	disponibles:</p><pre class="screen">ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byhost</code></strong>
ellington<code class="prompt">%</code> <strong class="userinput"><code>ypcat -k netgroup.byuser</code></strong></pre><p>La sortie devrait être semblable au contenu de
	<code class="filename">/var/yp/netgroup</code>.  La deuxième
	commande ne produira pas de sortie si vous n'avez pas
	précisé les groupes réseau
	spécifiques à une machine.  La troisième
	commande peut être utilisée pour obtenir les
	listes des groupes réseau pour un utilisateur.</p><p>La configuration du client est plutôt simple.  Pour
	configurer le serveur <code class="systemitem">war</code>, vous devez lancer
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=vipw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">vipw</span>(8)</span></a> et remplacer la ligne</p><pre class="programlisting">+:::::::::</pre><p>par</p><pre class="programlisting">+@IT_EMP:::::::::</pre><p>Maintenant, seules les données pour les
	utilisateurs définis dans le groupe réseau
	<code class="literal">IT_EMP</code> sont importées dans la base
	de données de mots de passe de <code class="systemitem">war</code> et
	seuls ces utilisateurs sont autorisés à ouvrir
	une session.</p><p>Malheureusement, cette limitation s'applique
	également à la fonction <code class="literal">~</code> de
	l'interpréteur de commandes et toutes les routines de
	conversion entre nom d'utilisateur et identifiant
	numérique d'utilisateur.  En d'autres termes,
	<code class="command">cd ~utilisateur</code>
	ne fonctionnera pas, et <code class="command">ls -l</code> affichera
	l'ID numérique à la place du nom d'utilisateur
	et <code class="command">find . -user joe -print</code> échouera
	avec le message d'erreur <span class="errorname">No such user</span>.
	Pour corriger cela, vous devrez importer toutes les
	entrées d'utilisateurs <span class="emphasis"><em>sans leur autoriser
	l'ouverture de session sur vos serveurs</em></span>.</p><p>Cela peut être fait en ajoutant une autre ligne au
	fichier <code class="filename">/etc/master.passwd</code>.  Cette ligne
	devrait contenir:</p><p><code class="literal">+:::::::::/sbin/nologin</code>, signifiant
	&#8220;Importer toutes les entrées mais remplacer
	l'interpréteur de commandes avec
	<code class="filename">/sbin/nologin</code> dans les entrées
	importées&#8221;.  Vous pouvez remplacer n'importe quel
	champ dans l'entrée <code class="literal">passwd</code> en
	plaçant une valeur par défaut dans votre fichier
	<code class="filename">/etc/master.passwd</code>.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Assurez-vous que
	  <code class="literal">+:::::::::/sbin/nologin</code> est placée
	  après <code class="literal">+@IT_EMP:::::::::</code>.  Sinon,
	  tous les comptes utilisateur importés du NIS auront
	  <code class="filename">/sbin/nologin</code> comme interpréteur
	  de commandes.</p></div><p>Après cette modification, vous ne devrez uniquement
	que modifier une des tables NIS si un nouvel employé
	rejoint le département IT.  Vous pourrez utiliser une
	approche similaire pour les serveurs moins importants en
	remplaçant l'ancienne ligne
	<code class="literal">+:::::::::</code> dans leur version locale de
	<code class="filename">/etc/master.passwd</code> avec quelque chose de
	semblable à ceci:</p><pre class="programlisting">+@IT_EMP:::::::::
+@IT_APP:::::::::
+:::::::::/sbin/nologin</pre><p>Les lignes correspondantes pour les stations de travail
	normales seraient:</p><pre class="programlisting">+@IT_EMP:::::::::
+@USERS:::::::::
+:::::::::/sbin/nologin</pre><p>Tout était parfait jusqu'au changement de politique
	quelques semaines plus tard:  le département IT
	commença à engager des internes.  Les internes
	du département IT sont autorisés à
	utiliser les stations de travail normales et les serveurs les
	moins importants; les apprentis du département IT sont
	autorisés à ouvrir des sessions sur les serveurs
	principaux.  Vous ajoutez alors un nouveau groupe
	réseau <code class="literal">IT_INTERN</code>, ajoutez les
	nouveaux internes IT à ce groupe réseau et
	commencez à modifier la configuration sur chaque
	machine...  Comme disait l'ancien: &#8220;Erreurs dans la
	planification centralisée mènent à un
	désordre général&#8221;.</p><p>La capacité de NIS à créer des
	groupes réseau à partir d'autres groupes
	réseau peut être utilisée pour
	éviter de telles situations.  Une possibilité
	est la création de groupes réseau basés
	sur le rôle du groupe.  Par exemple vous pourriez
	créer un groupe réseau appelé
	<code class="literal">BIGSRV</code> pour définir les restrictions
	d'ouverture de session pour les serveurs importants, un autre
	groupe réseau appelé <code class="literal">SMALLSRV</code>
	pour les serveurs moins importants et un troisième
	groupe réseau nommé <code class="literal">USERBOX</code>
	pour les stations de travail normales.  Chacun de ces groupes
	réseau contient les groupes réseau
	autorisés à ouvrir des sessions sur ces
	machines.  Les nouvelles entrées pour la table NIS de
	groupes réseau devrait ressembler à ceci:</p><pre class="programlisting">BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP  ITINTERN
USERBOX   IT_EMP  ITINTERN USERS</pre><p>Cette méthode qui consiste à définir
	des restrictions d'ouverture de session fonctionne
	relativement bien si vous pouvez définir des groupes de
	machines avec des restrictions identiques.  Malheureusement,
	ceci est une exception et pas une
	généralité.  La plupart du temps, vous
	aurez besoin de définir des restrictions d'ouverture de
	session par machine.</p><p>La définition de groupes réseau
	spécifiques aux machines est une autre
	possibilité pour traiter la modification de politique
	soulignée précédemment.  Dans ce
	scénario, le fichier
	<code class="filename">/etc/master.passwd</code> de chaque machine
	contient deux lignes débutant par &#8220;+&#8221;.  La
	première ajoute un groupe réseau avec les
	comptes autorisés à ouvrir une session sur cette
	machine, la seconde ajoute tous les comptes avec
	l'interpréteur de commandes
	<code class="filename">/sbin/nologin</code>.  C'est une bonne
	idée d'utiliser des majuscules pour le nom de la
	machine ainsi que celui du groupe réseau.  Dans
	d'autres termes, les lignes en question devraient être
	semblables à:</p><pre class="programlisting">+@<em class="replaceable"><code>NOMMACHINE</code></em>:::::::::
+:::::::::/sbin/nologin</pre><p>Une fois cette tâche achevée pour toutes vos
	machines, vous n'aurez plus jamais à modifier les
	versions locales du fichier
	<code class="filename">/etc/master.passwd</code>.  Tous les changements
	futurs peuvent être gérés en modifiant la
	table NIS.  Voici un exemple d'une table de groupes
	réseau possible pour ce scénario avec quelques
	petits plus:</p><pre class="programlisting"># Définir tout d'abord les groupes d'utilisateurs
IT_EMP    (,alpha,test-domain)    (,beta,test-domain)
IT_APP    (,charlie,test-domain)  (,delta,test-domain)
DEPT1     (,echo,test-domain)     (,foxtrott,test-domain)
DEPT2     (,golf,test-domain)     (,hotel,test-domain)
DEPT3     (,india,test-domain)    (,juliet,test-domain)
ITINTERN  (,kilo,test-domain)     (,lima,test-domain)
D_INTERNS (,able,test-domain)     (,baker,test-domain)
#
# Définir, maintenant, des groupes basés sur les rôles
USERS     DEPT1   DEPT2     DEPT3
BIGSRV    IT_EMP  IT_APP
SMALLSRV  IT_EMP  IT_APP    ITINTERN
USERBOX   IT_EMP  ITINTERN  USERS
#
# Et un groupe pour les tâches spéciales
# Permettre à echo et golf d'accéder à notre machine anti-virus
SECURITY  IT_EMP  (,echo,test-domain)  (,golf,test-domain)
#
# les groupes réseau basés sur un ensemble de machines
# Nos principaux serveurs
WAR       BIGSRV
FAMINE    BIGSRV
# L'utilisateur india a besoin d'un accès à ce serveur
POLLUTION  BIGSRV  (,india,test-domain)
#
# Celle-ci est très importante et nécessite plus de restrictions d'accès
DEATH     IT_EMP
#
# La machine anti-virus mentionnée précédemment
ONE       SECURITY
#
# Restreindre l'accès à une machine à un seul utilisateur
TWO       (,hotel,test-domain)
# [...d'autres groupes suivent]</pre><p>Si vous utilisez une sorte de base de données pour
	gérer vos comptes utilisateur, vous devriez pouvoir
	créer la première partie de la table avec les
	outils de votre base de données.  De cette
	façon, les nouveaux utilisateurs auront automatiquement
	accès aux machines.</p><p>Dernier avertissement: il n'est pas toujours
	conseillé d'utiliser des groupes réseau
	basés sur les machines.  Si vous déployez
	quelques douzaines ou même centaines de machines
	identiques pour des laboratoires pour étudiants, vous
	devriez utiliser des groupes basés sur les types
	d'utilisateurs plutôt que sur les machines pour
	conserver la taille de la table NIS dans des limites
	raisonnables.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83337168"></a>29.4.8. Les choses importantes à ne pas oublier</h3></div></div></div><p>Il y a un certain nombre de choses que vous devrez
	effectuer différemment maintenant que vous êtes
	dans un environnement NIS.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>A chaque fois que vous désirez ajouter un
	    utilisateur au laboratoire, vous devez l'ajouter
	    <span class="emphasis"><em>uniquement</em></span> sur le serveur NIS et
	    <span class="emphasis"><em>vous devez ne pas oublier de reconstruire les
	    tables NIS</em></span>.  Si vous oubliez de le faire, le
	    nouvel utilisateur ne pourra pas ouvrir de session en dehors
	    du serveur maître NIS.  Par exemple, si nous devons
	    ajouter au laboratoire un nouvel utilisateur
	    <code class="systemitem">jsmith</code>, nous ferions:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>pw useradd jsmith</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /var/yp</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make test-domain</code></strong></pre><p>Vous pouvez lancer <code class="command">adduser jsmith</code>
	    à la place de <code class="command">pw useradd
	    jsmith</code>.</p></li><li class="listitem"><p><span class="emphasis"><em>Conservez les comptes d'administration en
	    dehors des tables NIS</em></span>.  Vous ne voulez pas
	    propager les comptes et mots de passe d'administration sur
	    les machines qui auront des utilisateurs qui ne devraient
	    pas avoir accès à ces comptes.</p></li><li class="listitem"><p><span class="emphasis"><em>Sécurisez les serveurs maître
	    et esclave NIS, et réduisez leur temps
	    d'arrêt</em></span>.  Si quelqu'un tente soit
	    d'attaquer soit de simplement arrêter ces machines, de
	    nombreuses personnes ne pourront plus ouvrir de session dans
	    le laboratoire.</p><p>C'est la principale faiblesse d'un système
	    d'administration centralisée.  Si vous ne
	    protégez pas vos serveurs NIS, vous aurez à
	    faire face à de nombreux utilisateurs
	    mécontents!</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83408464"></a>29.4.9. Compatibilité NIS version 1</h3></div></div></div><p><span class="application">ypserv</span> sous FreeBSD offre un
	support des clients NIS version 1.  L'implémentation
	NIS de FreeBSD utilise uniquement le protocole NIS version 2,
	cependant d'autres implémentations disposent du support
	pour le protocole version 1 pour des raisons de
	compatibilité avec d'anciens systèmes.  Les
	&#8220;daemons&#8221; <span class="application">ypbind</span>
	fournis avec ces systèmes tenteront de s'attacher
	à un serveur NIS version 1 même s'ils n'en ont
	pas besoin (et ils pourront continuer à diffuser des
	requêtes pour en trouver un même après
	avoir reçu une réponse d'un serveur NIS version
	2).  Notez que bien que les requêtes des clients normaux
	soient supportées, cette version
	d'<span class="application">ypserv</span> ne supporte pas les
	requêtes de transfert de tables version 1; par
	conséquent il n'est pas possible de l'utiliser comme
	serveur maître ou esclave avec des serveurs NIS plus
	anciens qui ne supportent que la version 1 du protocole.
	Heureusement, il n'y a, aujourd'hui, presque plus de serveurs
	de ce type actifs.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-nis-server-is-client"></a>29.4.10. Serveurs NIS qui sont aussi des clients NIS</h3></div></div></div><p>Il faut faire attention quand on utilise
	<span class="application">ypserv</span> dans un domaine avec
	plusieurs serveurs NIS qui sont également des clients
	NIS.  Il est en général préférable
	de forcer les serveurs de se rattacher à
	eux-mêmes plutôt que de les laisser diffuser des
	requêtes de rattachement et éventuellement se rattacher
	réciproquement les uns aux autres.  Il peut en
	résulter de curieux problèmes si l'un des
	serveurs tombe et que d'autres en dépendent.  Tous les
	clients finiront par dépasser leur délai
	d'attente et se tenteront de se rattacher à d'autres
	serveurs, mais ce délai peut être
	considérable et le problème persistera puisque
	les serveurs peuvent à nouveau se rattacher les uns aux
	autres.</p><p>Vous pouvez obliger une machine à se rattacher
	à un serveur particulier en exécutant
	<code class="command">ypbind</code> avec l'option <code class="option">-S</code>.
	Si vous ne désirez pas faire cela à la main
	à chaque fois que vous redémarrez votre serveur
	NIS, vous pouvez ajouter les lignes suivantes à votre
	fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">nis_client_enable="YES"	# run client stuff as well
nis_client_flags="-S <em class="replaceable"><code>NIS domain</code></em>,<em class="replaceable"><code>server</code></em>"</pre><p>Voir la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ypbind&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ypbind</span>(8)</span></a> pour plus
	d'informations.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83416272"></a>29.4.11. Formats des mots de passe</h3></div></div></div><a id="idp83416912" class="indexterm"></a><p>Un des problèmes les plus courants que l'on
	rencontre en mettant en oeuvre NIS est celui de la
	compatibilité des formats de mots de passe.  Si votre
	serveur NIS utilise des mots de passe chiffrés avec
	l'algorithme DES, il ne supportera que les clients utilisant
	également DES.  Par exemple, si vous avez des client NIS
	<span class="trademark">Solaris</span>&#8482; sur votre réseau, alors vous aurez presque
	certainement besoin d'utiliser des mots de passe chiffrés
	avec le système DES.</p><p>Pour déterminer quel format vos serveurs et clients
	utilisent, consultez le fichier
	<code class="filename">/etc/login.conf</code>.  Si la machine est
	configurée pour utiliser des mots de passe
	chiffrés avec DES, alors la classe
	<code class="literal">default</code> contiendra une entrée comme
	celle-ci:</p><pre class="programlisting">default:\
	:passwd_format=des:\
	:copyright=/etc/COPYRIGHT:\
	[Entrées suivantes omises]</pre><p>D'autres valeurs possibles pour la capacité
	<code class="literal">passwd_format</code> sont <code class="literal">blf</code>
	et <code class="literal">md5</code> (respectivement pour les chiffrages
	de mots de passe Blowfish et MD5).</p><p>Si vous avez modifié le fichier
	<code class="filename">/etc/login.conf</code>, vous devrez
	également regénérer la base de
	données des capacités de classes de session, ce
	qui est accompli en exécutant la commande suivante en
	tant que <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cap_mkdb /etc/login.conf</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Le format des mots de passe utilisés dans
	<code class="filename">/etc/master.passwd</code> ne sera pas mis
	à jour avant qu'un utilisateur ne change son mot de
	passe pour la première fois
	<span class="emphasis"><em>après</em></span> la
	régénération de la base de données des
	capacités de classes de session.</p></div><p>Ensuite, afin de s'assurer que les mots de passe sont
	chiffrés avec le format que vous avez choisi, vous
	devez vérifier que l'entrée
	<code class="literal">crypt_default</code> dans le fichier
	<code class="filename">/etc/auth.conf</code> donne la priorité
	au format de mots de passe choisi.  Par exemple, quand les
	mots de passe DES sont utilisés, l'entrée
	serait:</p><pre class="programlisting">crypt_default	=	des blf md5</pre><p>En suivant les points précédents sur chaque
	serveur et client NIS sous FreeBSD, vous pouvez être
	sûr qu'ils seront tous d'accord sur le format de mot de
	passe utilisé dans le réseau.  Si vous avez des
	problèmes d'authentification sur un client NIS, c'est
	probablement la première chose à
	vérifier.  Rappelez-vous: si vous désirez mettre
	en place un serveur NIS pour un réseau
	hétérogène, vous devrez probablement
	utiliser DES sur tous les systèmes car c'est le
	standard le plus courant.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dhcp"></a>29.5. Configuration réseau automatique (DHCP)</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Greg</span> <span class="surname">Sutter</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83430224"></a>29.5.1. Qu'est-ce que DHCP?</h3></div></div></div><a id="idp83430864" class="indexterm"></a><a id="idp83432144" class="indexterm"></a><p>DHCP, le protocole d'attribution dynamique des adresses
	(&#8220;Dynamic Host Configuration Protocol&#8221;),
	décrit les moyens par lesquels un système peut
	se connecter à un réseau et obtenir les
	informations nécessaires pour dialoguer sur ce
	réseau.  Les versions de FreeBSD antérieures
	à la version 6.0 utilisent l'implémentation du
	client DHCP (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>) de l'ISC (Internet Software
	Consortium).  Les versions suivantes utilisent le programme
	<code class="command">dhclient</code> d'OpenBSD issu d'OpenBSD 3.7.
	Toutes les informations données ici au sujet de
	<code class="command">dhclient</code> sont valables aussi bien pour le
	client DHCP d'ISC que pour celui d'OpenBSD.  Le serveur DHCP
	est celui distribué par le consortium ISC.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83434960"></a>29.5.2. Ce que traite cette section</h3></div></div></div><p>Cette section décrit les composants
	côté client des clients DHCP d'ISC et d' OpenBSD et côté serveur du
	système DHCP ISC.  Le programme client,
	<code class="command">dhclient</code>, est intégré
	à FreeBSD, la partie serveur est disponible à
	partir du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  Les pages de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a>, et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>, en plus des références
	données plus bas, sont des ressources utiles.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83439184"></a>29.5.3. Comment cela fonctionne-t-il?</h3></div></div></div><a id="idp83439824" class="indexterm"></a><p>Quand <code class="command">dhclient</code>, le client DHCP, est
	exécuté sur la machine cliente, il commence
	à diffuser des requêtes de demandes d'information
	de configuration.  Par défaut, ces requêtes sont
	effectuées sur le port UDP 68.  Le serveur
	répond sur le port UDP 67, fournissant au client une
	adresse IP et d'autres informations réseau importantes
	comme le masque de sous-réseau, les routeurs, et les
	serveurs DNS.  Toutes ces informations viennent sous la forme
	d'un &#8220;bail&#8221; DHCP qui est uniquement valide pendant
	un certain temps (configuré par l'administrateur du
	serveur DHCP).  De cette façon, les adresses IP
	expirées pour les clients qui ne sont plus
	connectés peuvent être automatiquement
	récupérées.</p><p>Les clients DHCP peuvent obtenir une grande
	quantité d'informations à partir du serveur.
	Une liste exhaustive est donnée dans la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcp-options&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcp-options</span>(5)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83442512"></a>29.5.4. Intégration dans FreeBSD</h3></div></div></div><p>Le client DHCP ISC ou OpenBSD (en fonction de la version de FreeBSD que vous utilisez), <code class="command">dhclient</code>, est
	complètement intégré à FreeBSD.  Le
	support du client DHCP est fourni avec l'installeur et le
	système de base, rendant évident le besoin d'une
	connaissance détaillée des configurations
	réseaux pour n'importe quel réseau utilisant un
	serveur DHCP.  <code class="command">dhclient</code> fait partie de
	toutes les versions de FreeBSD depuis la version 3.2.</p><a id="idp83444304" class="indexterm"></a><p>DHCP est supporté par
	<span class="application">sysinstall</span>.  Quand on configure une
	interface réseau sous
	<span class="application">sysinstall</span>, la deuxième
	question posée est: &#8220;Voulez-vous tenter la
	configuration DHCP de l'interface?&#8221;.
	Répondre par l'affirmative à cette question
	lancera <code class="command">dhclient</code>, et en cas de
	succès, complétera automatiquement les
	informations de configuration réseau.</p><p>Vous devez faire deux choses pour que votre système
	utilise DHCP au démarrage:</p><a id="idp83447120" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Assurez-vous que le périphérique
	    <code class="filename">bpf</code> est compilé dans votre
	    noyau.  Pour cela, vous devez ajouter la ligne
	    <code class="literal">device bpf</code> à votre fichier
	    de configuration du noyau, et recompiler le noyau.  Pour
	    plus d'informations sur la compilation de noyaux,
	    consultez le <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><p>Le périphérique
	    <code class="filename">bpf</code> est déjà
	    présent dans le noyau <code class="filename">GENERIC</code>
	    qui est fourni avec FreeBSD, vous ne devez donc pas
	    créer de noyau spécifique pour faire
	    fonctionner DHCP.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ceux qui sont particulièrement conscients de
	      l'aspect sécurité devraient noter que
	      <code class="filename">bpf</code> est également le
	      périphérique qui permet le fonctionnement de
	      &#8220;renifleurs&#8221; de paquets (de tels programmes
	      doivent être lancés sous l'utilisateur
	      <code class="systemitem">root</code>).  <code class="filename">bpf</code>
	      <span class="emphasis"><em>est</em></span> nécessaire pour utiliser
	      DHCP, mais si vous êtes très sensible
	      à la sécurité, vous ne devriez
	      probablement pas ajouter <code class="filename">bpf</code>
	      à votre noyau parce que vous projetez d'utiliser
	      DHCP dans le futur.</p></div></li><li class="listitem"><p>Editez votre fichier <code class="filename">/etc/rc.conf</code>
	    pour y ajouter ce qui suit:</p><pre class="programlisting">ifconfig_fxp0="DHCP"</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Assurez-vous de bien remplacer
	      <code class="literal">fxp0</code> par l'interface que vous voulez
	      configurer de façon dynamique comme décrit
	      dans la <a class="xref" href="#config-network-setup" title="12.8. Configuration des cartes réseaux">Section 12.8, « Configuration des cartes réseaux »</a>.</p></div><p>Si vous utilisez un emplacement différent pour
	    <code class="command">dhclient</code>, ou si vous désirez
	    passer des arguments supplémentaires à
	    <code class="command">dhclient</code>, ajoutez ce qui suit (en
	    effectuant des modifications si nécessaire):</p><pre class="programlisting">dhcp_program="/sbin/dhclient"
dhcp_flags=""</pre></li></ul></div><a id="idp83467600" class="indexterm"></a><p>Le serveur DHCP, <span class="application">dhcpd</span>, fait
	partie du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> disponible dans
	le catalogue des logiciels portés.  Ce logiciel
	porté contient le serveur DHCP ISC et sa
	documentation.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83470032"></a>29.5.5. Fichiers</h3></div></div></div><a id="idp83470672" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/etc/dhclient.conf</code></p><p><code class="command">dhclient</code> nécessite un
	    fichier de configuration,
	    <code class="filename">/etc/dhclient.conf</code>.
	    Généralement le fichier ne contient que des
	    commentaires, les valeurs par défaut étant
	    suffisantes.  Ce fichier de configuration est décrit
	    par la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.conf</span>(5)</span></a>.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient</code></p><p><code class="command">dhclient</code> est lié
	    statiquement et réside dans le répertoire
	    <code class="filename">/sbin</code>.  La page de
	    manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient</span>(8)</span></a> donne beaucoup plus d'informations
	    au sujet de <code class="command">dhclient</code>.</p></li><li class="listitem"><p><code class="filename">/sbin/dhclient-script</code></p><p><code class="command">dhclient-script</code> est la
	    procédure de configuration du client DHCP
	    spécifique à FreeBSD.  Elle est décrite
	    dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient-script&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhclient-script</span>(8)</span></a>, mais ne
	    devrait pas demander de modification de la part de
	    l'utilisateur pour fonctionner correctement.</p></li><li class="listitem"><p><code class="filename">/var/db/dhclient.leases</code></p><p>Le client DHCP conserve une base de données des
	    baux valides, qui est écrite comme un fichier
	    journal.  La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhclient.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhclient.leases</span>(5)</span></a> en donne
	    une description légèrement plus longue.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83486544"></a>29.5.6. Lecture supplémentaire</h3></div></div></div><p>Le protocole DHCP est intégralement décrit
	dans la <a class="link" href="http://www.freesoft.org/CIE/RFC/2131/" target="_top">RFC
	2131</a>.  Des informations sont également
	disponibles à l'adresse <code class="uri"><a class="uri" href="http://www.dhcp.org/" target="_top">http://www.dhcp.org/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dhcp-server"></a>29.5.7. Installer et configurer un serveur DHCP</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83489616"></a>29.5.7.1. Ce que traite cette section</h4></div></div></div><p>Cette section fournit les informations
	    nécessaires à la configuration d'un
	    système FreeBSD comme serveur DHCP en utilisant
	    l'implémentation ISC (Internet Software Consortium)
	    du serveur DHCP.</p><p>Le serveur n'est pas fourni dans le
	    système de base de FreeBSD, et vous devrez installer
	    le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> pour
	    bénéficier de ce service.  Lisez le <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a> pour plus d'information sur l'utilisation
	    du catalogue des logiciels portés.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83491920"></a>29.5.7.2. Installation d'un serveur DHCP</h4></div></div></div><a id="idp83492560" class="indexterm"></a><p>Afin de configurer votre système FreeBSD en
	    serveur DHCP, vous devrez vous assurer que le support du
	    périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bpf&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bpf</span>(4)</span></a> est compilé
	    dans votre noyau.  Pour cela ajouter la ligne
	    <code class="literal">device bpf</code> dans votre fichier de
	    configuration du noyau.  Pour plus d'information sur la
	    compilation de noyaux, consultez le <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>.</p><p>Le périphérique
	    <code class="filename">bpf</code> est déjà
	    présent dans le noyau <code class="filename">GENERIC</code>
	    qui est fourni avec FreeBSD, vous ne devez donc pas
	    créer de noyau spécifique pour faire
	    fonctionner DHCP.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ceux qui sont particulièrement conscients de
	      l'aspect sécurité devraient noter que
	      <code class="filename">bpf</code> est également le
	      périphérique qui permet le fonctionnement de
	      &#8220;renifleurs&#8221; de paquets (de tels programmes
	      nécessitent également un accès avec
	      privilèges).  <code class="filename">bpf</code>
	      <span class="emphasis"><em>est</em></span> nécessaire pour utiliser
	      DHCP, mais si vous êtes très sensible
	      à la sécurité, vous ne devriez
	      probablement pas ajouter <code class="filename">bpf</code>
	      à votre noyau parce que vous projetez d'utiliser
	      DHCP dans le futur.</p></div><p>Il vous reste ensuite à éditer le
	    fichier <code class="filename">dhcpd.conf</code> d'exemple qui a
	    été installé par le logiciel
	    porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  Par
	    défaut, cela sera
	    <code class="filename">/usr/local/etc/dhcpd.conf.sample</code>, et
	    vous devriez le copier vers
	    <code class="filename">/usr/local/etc/dhcpd.conf</code> avant de
	    commencer vos modifications.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83505488"></a>29.5.7.3. Configuration du serveur DHCP</h4></div></div></div><a id="idp83506256" class="indexterm"></a><p><code class="filename">dhcpd.conf</code> est composé de
	    déclarations concernant les masques de
	    sous-réseaux et les machines, il est
	    peut-être plus facile à expliquer à
	    l'aide d'un exemple:</p><pre class="programlisting">option domain-name "example.com";<a id="domain-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
option domain-name-servers 192.168.4.100;<a id="domain-name-servers"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
option subnet-mask 255.255.255.0;<a id="subnet-mask"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>

default-lease-time 3600;<a id="default-lease-time"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
max-lease-time 86400;<a id="max-lease-time"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span>
ddns-update-style none;<a id="ddns-update-style"></a><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span>

subnet 192.168.4.0 netmask 255.255.255.0 {
  range 192.168.4.129 192.168.4.254;<a id="range"></a><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span>
  option routers 192.168.4.1;<a id="routers"></a><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span>
}

host mailhost {
  hardware ethernet 02:03:04:05:06:07;<a id="hardware"></a><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span>
  fixed-address mailhost.example.com;<a id="fixed-address"></a><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span>
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette option spécifie le domaine qui sera
		donné aux clients comme domaine par
		défaut.  Consultez la page de manuel de
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=resolv.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">resolv.conf</span>(5)</span></a> pour plus d'information sur sa
		signification.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#domain-name-servers"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette option donne une liste,
		séparée par des virgules, de serveurs DNS
		que le client devrait utiliser.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#subnet-mask"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Le masque de sous-réseau qui sera fourni
		aux clients.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#default-lease-time"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Un client peut demander un bail d'une durée
		bien précise.  Sinon par défaut le serveur
		alloue un bail avec cette durée avant expiration
		(en secondes).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#max-lease-time"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>C'est la durée maximale d'allocation
		autorisée par le serveur.  Si un client demande
		un bail plus long, le bail sera accordé mais il
		ne sera valide que durant
		<code class="literal">max-lease-time</code> secondes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#ddns-update-style"><span><img src="./imagelib/callouts/6.png" alt="6" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette option indique si le serveur DHCP doit
		tenter de mettre à jour le DNS quand un bail
		est accepté ou révoqué.  Dans
		l'implémentation ISC, cette option est
		<span class="emphasis"><em>obligatoire</em></span>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#range"><span><img src="./imagelib/callouts/7.png" alt="7" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Ceci indique quelles adresses IP devraient
		être utilisées dans l'ensemble des adresses
		réservées aux clients.  Les adresses
		comprises dans l'intervalle spécifiée sont
		allouées aux clients.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#routers"><span><img src="./imagelib/callouts/8.png" alt="8" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Définit la passerelle par défaut
		fournie aux clients.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#hardware"><span><img src="./imagelib/callouts/9.png" alt="9" border="0" /></span></a> </p></td><td valign="top" align="left"><p>L'adresse matérielle MAC d'une machine (de
		manière à ce que le serveur DHCP puisse
		reconnaître une machine quand elle envoie une
		requête).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#fixed-address"><span><img src="./imagelib/callouts/10.png" alt="10" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Indique que la machine devrait se voir attribuer
		toujours la même adresse IP.  Notez que
		l'utilisation d'un nom de machine ici est correct,
		puisque le serveur DHCP effectuera une
		résolution de nom sur le nom de la machine
		avant de renvoyer l'information sur le bail.</p></td></tr></table></div><p>Une fois l'écriture de votre fichier
	    <code class="filename">dhcpd.conf</code> terminée, vous
	    devez activer le serveur DHCP dans le fichier
	    <code class="filename">/etc/rc.conf</code>, en ajoutant:</p><pre class="programlisting">dhcpd_enable="YES"
dhcpd_ifaces="dc0"</pre><p>Remplacez le nom de l'interface <code class="literal">dc0</code>
	    avec celui de l'interface (ou des interfaces,
	    séparées par un espace) sur laquelle votre
	    serveur DHCP attendra les requêtes des clients
	    DHCP.</p><p>Ensuite, vous
	    pouvez lancer le serveur en tapant la commande
	    suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/isc-dhcpd.sh start</code></strong></pre><p>Si vous devez, dans le futur, effectuer des
	    changements dans la configuration de votre serveur, il est
	    important de savoir que l'envoi d'un signal
	    <code class="literal">SIGHUP</code> à
	    <span class="application">dhcpd</span> ne provoque
	    <span class="emphasis"><em>pas</em></span> le rechargement de la
	    configuration, contrairement à la plupart des
	    &#8220;daemons&#8221;.  Vous devrez envoyer un signal
	    <code class="literal">SIGTERM</code> pour arrêter le
	    processus, puis le relancer en utilisant la commande
	    ci-dessus.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83533392"></a>29.5.7.4. Fichiers</h4></div></div></div><a id="idp83534032" class="indexterm"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcpd</code></p><p><span class="application">dhcpd</span> est lié
		statiquement et réside dans le répertoire
		<code class="filename">/usr/local/sbin</code>.
		La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcpd</span>(8)</span></a> installée avec le
		logiciel porté donne beaucoup plus d'informations
		au sujet de <span class="application">dhcpd</span>.</p></li><li class="listitem"><p><code class="filename">/usr/local/etc/dhcpd.conf</code></p><p><span class="application">dhcpd</span> nécessite
		un fichier de configuration,
		<code class="filename">/usr/local/etc/dhcpd.conf</code> avant de
		pouvoir commencer à offrir ses services aux
		client.  Ce fichier doit contenir toutes les
		informations à fournir aux clients qui seront
		traités, en plus des informations concernant le
		fonctionnement du serveur.  Ce fichier de configuration
		est décrit par la page de manuel
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.conf</span>(5)</span></a> installée par le logiciel
		porté.</p></li><li class="listitem"><p><code class="filename">/var/db/dhcpd.leases</code></p><p>Le serveur DHCP conserve une base de
		données des baux qu'il a délivré,
		qui est écrite comme un fichier journal.  La page
		de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcpd.leases&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">dhcpd.leases</span>(5)</span></a> installée par le
		logiciel porté en donne une description
		légèrement plus longue.</p></li><li class="listitem"><p><code class="filename">/usr/local/sbin/dhcrelay</code></p><p><span class="application">dhcrelay</span> est
		utilisé dans les environnements avancés
		où un serveur DHCP fait suivre la requête
		d'un client vers un autre serveur DHCP sur un
		réseau séparé.  Si vous avez besoin
		de cette fonctionnalité, installez alors le
		logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a>.  La page
		de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dhcrelay&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dhcrelay</span>(8)</span></a> fournie avec le logiciel
		porté contient plus de détails.</p></li></ul></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-dns"></a>29.6. Serveurs de noms (<acronym class="acronym">DNS</acronym>)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>, <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span> et <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Daniel</span> <span class="surname">Gerzo</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83560016"></a>29.6.1. Généralités</h3></div></div></div><a id="idp83560656" class="indexterm"></a><p>FreeBSD utilise, par défaut, BIND (Berkeley Internet
	Name Domain), qui est l'implémentation la plus courante
	du protocole DNS.  Le DNS est le protocole qui effectue la
	correspondance entre noms et adresses IP, et inversement.  Par
	exemple une requête pour <code class="systemitem">www.FreeBSD.org</code> aura pour réponse
	l'adresse IP du serveur Web du projet FreeBSD, et une
	requête pour <code class="systemitem">ftp.FreeBSD.org</code> renverra l'adresse IP de
	la machine FTP correspondante.  De même, l'opposé
	est possible.  Une requête pour une adresse IP retourne
	son nom de machine.  Il n'est pas nécessaire de faire
	tourner un serveur DNS pour effectuer des requêtes DNS
	sur un système.</p><p>FreeBSD est actuellement fourni par défaut avec le
	serveur <acronym class="acronym">DNS</acronym> <acronym class="acronym">BIND</acronym>9.
	Notre installation est dotée de fonctionnalités
	étendues au niveau de la sécurité, d'une
	nouvelle organisation du système de fichiers et d'une
	configuration en environnement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>
	automatisée.</p><a id="idp83564624" class="indexterm"></a><p>Le DNS est coordonné sur l'Internet à
	travers un système complexe de serveurs de noms racines
	faisant autorité, de domaines de premier niveau
	(<span class="quote">« <span class="quote">Top Level Domain</span> »</span>, <acronym class="acronym">TLD</acronym>), et
	d'autres serveurs de noms de plus
	petites tailles qui hébergent, directement ou font office
	de &#8220;cache&#8221;, l'information pour des domaines
	individuels.</p><p>Actuellement, BIND est maintenu par l'Internet Software
	Consortium <code class="uri"><a class="uri" href="http://www.isc.org/" target="_top">http://www.isc.org/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83567440"></a>29.6.2. Terminologie</h3></div></div></div><p>Pour comprendre ce document, certains termes relatifs
	au DNS doivent être maîtrisés.</p><a id="idp83568464" class="indexterm"></a><a id="idp83568976" class="indexterm"></a><a id="idp83569488" class="indexterm"></a><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Terme</th><th>Definition</th></tr></thead><tbody><tr><td>&#8220;Forward&#8220; DNS</td><td>Correspondance noms de machine vers adresses
		IP.</td></tr><tr><td>Origine</td><td>Fait référence au domaine couvert
		par un fichier de zone particulier.</td></tr><tr><td><span class="application">named</span>, BIND, serveur
		de noms</td><td>Noms courants pour le serveur de noms BIND de
		FreeBSD</td></tr><tr><td>Resolveur</td><td>Un processus système par
		l'intermédiaire duquel une machine contacte un
		serveur de noms pour obtenir des informations sur une
		zone.</td></tr><tr><td>DNS inverse</td><td>C'est l'inverse du DNS &#8220;classique&#8221;
		(&#8220;Forward&#8220; DNS).  C'est la correspondance
		adresses IP vers noms de machine.</td></tr><tr><td>Zone racine</td><td>Début de la hiérarchie de la zone
		Internet.  Toutes les zones sont rattachées
		à la zone racine, de la même
		manière qu'un système de fichier est
		rattaché au répertoire racine.</td></tr><tr><td>Zone</td><td>Un domaine individuel, un sous-domaine, ou une
		partie des noms administrés par un même
		serveur faisant autorité.</td></tr></tbody></table></div><a id="idp83586256" class="indexterm"></a><p>Exemples de zones:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="systemitem">.</code> est la zone racine</p></li><li class="listitem"><p><code class="systemitem">org.</code> est un domaine de premier niveau
	    (<acronym class="acronym">TLD</acronym>) sous la
	    zone racine</p></li><li class="listitem"><p><code class="systemitem">example.org.</code> est une
	    zone sous le <acronym class="acronym">TLD</acronym>
	    <code class="systemitem">org.</code></p></li><li class="listitem"><p>
	    <code class="systemitem">1.168.192.in-addr.arpa</code> est une zone faisant
	    référence à toutes les adresses IP
	    qui appartiennent l'espace d'adresse <code class="systemitem">192.168.1.*</code>.</p></li></ul></div><p>Comme on peut le remarquer, la partie la plus
	significative d'un nom de machine est à sa gauche.  Par
	exemple, <code class="systemitem">example.org.</code> est
	plus spécifique que <code class="systemitem">org.</code>, comme
	<code class="systemitem">org.</code> est à son tour plus
	spécifique que la zone racine.  La constitution de
	chaque partie d'un nom de machine est proche de celle d'un
	système de fichiers: le répertoire <code class="filename">/dev</code> se trouve sous la racine, et
	ainsi de suite.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83600592"></a>29.6.3. Les raisons de faire tourner un serveur de noms</h3></div></div></div><p>Les serveurs de noms se présentent
	généralement sous deux formes: un serveur de
	noms faisant autorité, et un serveur de noms
	cache.</p><p>Un serveur de noms faisant autorité est
	nécessaire quand:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>on désire fournir des informations DNS au reste
	    du monde, être le serveur faisant autorité lors
	    des réponses aux requêtes.</p></li><li class="listitem"><p>un domaine, comme par exemple
	    <code class="systemitem">example.org</code>, est
	    enregistré et des adresses IP doivent être
	    assignées à des noms de machine appartenant
	    à ce domaine.</p></li><li class="listitem"><p>un bloc d'adresses IP nécessite des
	    entrées DNS inverses (IP vers nom de machine).</p></li><li class="listitem"><p>un second serveur de noms ou de secours, appelé esclave,
	    qui répondra aux requêtes.</p></li></ul></div><p>Un serveur de noms cache est nécessaire
	quand:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>un serveur de noms local peut faire office de cache
	    et répondre plus rapidement que l'interrogation
	    d'un serveur de noms extérieur.</p></li></ul></div><p>Quand on émet des requêtes pour <code class="systemitem">www.FreeBSD.org</code>, le résolveur
	interroge généralement le serveur de noms du
	fournisseur d'accès, et récupère la
	réponse.  Avec un serveur DNS cache local, la
	requête doit être effectuée qu'une seule
	fois vers le monde extérieur par le serveur DNS cache.
	Chaque interrogation suivante n'aura pas à être
	transmise en dehors du réseau local, puisque
	l'information est désormais disponible localement dans
	le cache.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83629264"></a>29.6.4. Comment cela fonctionne-t-il?</h3></div></div></div><p>Sous FreeBSD le &#8220;daemon&#8221; BIND est appelé
	<span class="application">named</span> pour des raisons
	évidentes.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Fichier</th><th>Description</th></tr></thead><tbody><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a></td><td>le &#8220;daemon&#8221; BIND</td></tr><tr><td><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rndc</span>(8)</span></a></td><td>le programme de contrôle du
		serveur de noms</td></tr><tr><td><code class="filename">/etc/namedb</code></td><td>répertoire où se trouvent les
		informations sur les zones de BIND</td></tr><tr><td><code class="filename">/etc/namedb/named.conf</code></td><td>le fichier de configuration du
		&#8220;daemon&#8221;</td></tr></tbody></table></div><p>En fonction de la manière dont est
	configurée sur le serveur une zone donnée, les
	fichiers relatifs à cette zone pourront être
	trouvés dans les sous-répertoires <code class="filename">master</code>, <code class="filename">slave</code>, ou <code class="filename">dynamic</code> du répertoire
	<code class="filename">/etc/namedb</code>.  Ces
	fichiers contiennent les informations <acronym class="acronym">DNS</acronym>
	qui seront données par le serveur de noms en
	réponse aux requêtes.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83642192"></a>29.6.5. Lancer BIND</h3></div></div></div><a id="idp83642832" class="indexterm"></a><p>Puisque BIND est installé par défaut, sa
	configuration est relativement simple.</p><p>La configuration par défaut de
	<span class="application">named</span> est un serveur de noms
	résolveur basique, tournant dans un environnement
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>.  Pour lancer le serveur avec cette
	configuration, utilisez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/named forcestart</code></strong></pre><p>Pour s'assurer que le &#8220;daemon&#8221;
	<span class="application">named</span> est lancé à chaque
	démarrage, ajoutez la ligne suivante dans
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">named_enable="YES"</pre><p>Il existe, bien évidemment, de nombreuses options de
	configuration pour <code class="filename">/etc/namedb/named.conf</code>
	qui dépassent le cadre de ce document.  Si vous êtes intéressé
	par les options de démarrage de
	<span class="application">named</span> sous FreeBSD, jetez un oeil aux
	paramètres
	<code class="literal">named_*</code> dans
	<code class="filename">/etc/defaults/rc.conf</code> et consultez la
	page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>.  La section <a class="xref" href="#configtuning-rcd" title="12.7. Utilisation du système rc sous FreeBSD">Section 12.7, « Utilisation du système rc sous FreeBSD »</a> constitue également une bonne
	lecture.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83655760"></a>29.6.6. Fichiers de configuration</h3></div></div></div><a id="idp83656400" class="indexterm"></a><p>Les fichiers de configuration pour
	<span class="application">named</span> se trouvent dans le
	répertoire <code class="filename">/etc/namedb</code> et devront être
	adaptés avant toute utilisation, à moins que
	l'on ait besoin que d'un simple résolveur.  C'est dans
	ce répertoire où la majeure partie de la
	configuration se fera.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83662928"></a>29.6.6.1. Utilisation de
	  <code class="command">make-localhost</code></h4></div></div></div><p>Pour configurer une zone maître, il faut se rendre
	  dans le répertoire <code class="filename">/etc/namedb/</code> et exécuter
	  la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sh make-localhost</code></strong></pre><p>Si tout s'est bien passé, un nouveau fichier
	  devrait apparaître dans le sous-répertoire
	  <code class="filename">master</code>.  Les noms de
	  fichiers devraient être
	  <code class="filename">localhost.rev</code> pour le nom de domaine
	  local et <code class="filename">localhost-v6.rev</code> pour les
	  configurations <acronym class="acronym">IPv6</acronym>.  Tout comme le
	  fichier de configuration par défaut, les informations
	  nécessaires seront présentes dans le fichier
	  <code class="filename">named.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83667920"></a>29.6.6.2. <code class="filename">/etc/namedb/named.conf</code></h4></div></div></div><pre class="programlisting">// $FreeBSD$
//
// Reportez-vous aux pages de manuel named.conf(5) et named(8), et à
// la documentation se trouvant dans /usr/share/doc/bind9 pour plus de
// détails.
//
// Si vous devez configurer un serveur primaire, assurez-vous d'avoir
// compris les détails épineux du fonctionnement du DNS.  Même avec de
// simples erreurs, vous pouvez rompre la connexion entre les parties
// affectées, ou causer un important et inutile trafic Internet.

options {
        directory "/etc/namedb";
	pid-file	"/var/run/named/pid";
	dump-file	"/var/dump/named_dump.db";
	statistics-file	"/var/stats/named.stats";

// Si named est utilisé uniquement en tant que résolveur local, ceci
// est un bon réglage par défaut.  Pour un named qui doit être
// accessible à l'ensemble du réseau, commentez cette option, précisez
// l'adresse IP correcte, ou supprimez cette option.
	listen-on	{ 127.0.0.1; };

// Si l'IPv6 est activé sur le système, décommentez cette option pour
// une utilisation en résolveur local.  Pour donner l'accès au réseau,
// précisez une adresse IPv6, ou le mot-clé "any".
//	listen-on-v6	{ ::1; };

// En plus de la clause "forwarders", vous pouvez forcer votre serveur
// de noms à ne jamais être à l'origine de
// requêtes, mais plutôt faire suivre les demandes en
// activant la ligne suivante:
//
//      forward only;

// Si vous avez accès à un serveur de noms au niveau de
// votre fournisseur d'accès, ajoutez ici son adresse IP, et
// activez la ligne ci-dessous.  Cela vous permettra de
// bénéficier de son cache, réduisant ainsi le
// trafic Internet.
/*
        forwarders {
                127.0.0.1;
        };
*/</pre><p>Comme les commentaires le précisent, pour
	  bénéficier d'un cache en amont de votre
	  connexion, le paramètre <code class="literal">forwarders</code>
	  peut être activé.  Dans des circonstances
	  normales, un serveur de noms interrogera de façon
	  récursive certains serveurs de noms jusqu'à
	  obtenir la réponse à sa requête.  Avec
	  ce paramètre activé, votre serveur interrogera
	  le serveur de noms en amont (ou le serveur de noms fourni)
	  en premier, en bénéficiant alors de son cache.
	  Si le serveur en question gère beaucoup de trafic, et
	  est un serveur rapide, activer cette option peut en valoir
	  la peine.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml"><code class="systemitem">127.0.0.1</code>
	  ne fonctionnera <span class="emphasis"><em>pas</em></span> ici.  Remplacez
	  cette adresse IP par un serveur de noms en amont de votre
	  connexion.</p></div><pre class="programlisting">        /*
         * S'il y a un coupe-feu entre vous et les serveurs de noms
         * avec lesquels vous voulez communiquer, vous aurez
         * peut-être besoin de décommenter la directive
         * query-source ci-dessous.  Les versions
         * précédentes de BIND lançaient des
         * requêtes à partir du port 53, mais depuis la
         * version 8, BIND utilise
         * par défaut un port pseudo-aléatoire quelconque non
         * réservé.
         */
        // query-source address * port 53;
};

// Si vous activez un serveur de noms local, n'oubliez pas d'entrer
// 127.0.0.1 dans votre fichier /etc/resolv.conf de sorte que ce
// serveur soit interrogé le premier.  Assurez-vous
// également de l'activer dans /etc/rc.conf.

zone "." {
        type hint;
        file "named.root";
};

zone "0.0.127.IN-ADDR.ARPA" {
        type master;
	file "master/localhost.rev";
};

// RFC 3152
zone "1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.IP6.ARPA" {
	type master;
	file "master/localhost-v6.rev";
};

// NB: N'utilisez pas les adresses IP ci-dessous, elles sont factices,
// et ne servent que pour des besoins de
// démonstration/documentation!
//
// Exemple d'entrées de configuration de zone esclave.
// Il peut être pratique de devenir serveur esclave pour la
// zone à laquelle appartient votre domaine.  Demandez à
// votre administrateur réseau l'adresse IP du serveur primaire
// responsable de la zone.
//
// N'oubliez jamais d'inclure la résolution de la zone inverse
// (IN-ADDR.ARPA)!
// (Ce sont les premiers octets de l'adresse IP, en ordre inverse,
// auxquels ont a ajouté ".IN-ADDR.ARPA".)
//
// Avant de commencer à configurer une zone primaire, il faut
// être sûr que vous avez parfaitement compris comment le
// DNS et BIND fonctionnent.  Il apparaît parfois des pièges
// peu évidents à saisir.  En comparaison, configurer une
// zone esclave est plus simple.
//
// NB: N'activez pas aveuglément les exemples ci-dessous. :-)
// Utilisez des noms et des adresses réelles.

/* Un exemple de zone maître
zone "example.net" {
	type master;
	file "master/example.net";
};
*/

/* Un exemple de zone dynamique
key "exampleorgkey" {
	algorithm hmac-md5;
	secret "sf87HJqjkqh8ac87a02lla==";
};
zone "example.org" {
	type master;
	allow-update {
		key "exampleorgkey";
	};
	file "dynamic/example.org";
};
*/

/* Exemple de zones esclaves directes et inverses
zone "example.com" {
	type slave;
	file "slave/example.com";
	masters {
		192.168.1.1;
	};
};
zone "1.168.192.in-addr.arpa" {
	type slave;
	file "slave/1.168.192.in-addr.arpa";
	masters {
		192.168.1.1;
	};
};
*/</pre><p>Dans <code class="filename">named.conf</code>, ce sont des
	  exemples d'entrées d'un serveur esclave.</p><p>Pour chaque nouvelle zone gérée, une
	  nouvelle entrée de zone doit être
	  ajoutée au fichier
	  <code class="filename">named.conf</code>.</p><p>Par exemple, l'entrée de zone la plus simple
	  possible pour <code class="systemitem">example.org</code>
	  serait:</p><pre class="programlisting">zone "example.org" {
	type master;
	file "master/example.org";
};</pre><p>Ce sera un serveur maître pour la zone, comme
	  indiqué par l'option <code class="option">type</code>,
	  concervant ses informations de zone dans le fichier
	  <code class="filename">/etc/namedb/master/example.org</code> comme
	  précisé par l'option
	  <code class="option">file</code>.</p><pre class="programlisting">zone "example.org" {
	type slave;
	file "slave/example.org";
};</pre><p>Dans le cas d'un esclave, les informations concernant la
	  zone seront transférées à partir du
	  serveur maître pour la zone en question, et
	  sauvegardées dans le fichier indiqué.  Si ou
	  lorsque le serveur maître tombe ou est inaccessible,
	  le serveur esclave disposera des informations de la zone
	  transférée et sera capable de les
	  diffuser.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83677264"></a>29.6.6.3. Fichiers de zone</h4></div></div></div><a id="idp83698512" class="indexterm"></a><p>Un exemple de fichier de zone maître pour <code class="systemitem">example.org</code> (défini dans
	  <code class="filename">/etc/namedb/master/example.org</code>) suit:</p><pre class="programlisting">$TTL 3600        ; 1 hour
example.org.    IN      SOA      ns1.example.org. admin.example.org. (
                                2006051501      ; Serial
                                10800           ; Refresh
                                3600            ; Retry
                                604800          ; Expire
                                86400           ; Minimum TTL
                        )

; Serveurs DNS
                IN      NS      ns1.example.org.
                IN      NS      ns2.example.org.

; Enregistrements MX
                IN      MX 10   mx.example.org.
                IN      MX 20   mail.example.org.

                IN      A       192.168.1.1

; Noms de machine
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5

; Alias
www             IN      CNAME   @</pre><p>Notez que chaque nom de machine se terminant par un
	  &#8220;.&#8221; est un nom de machine complet, alors que
	  tout ce qui se termine pas par un &#8220;.&#8221; est
	  référencé par rapport à une
	  origine.  Par exemple, <code class="literal">www</code> sera traduit
	  en
	  <code class="literal">www.origine</code>.
	  Dans notre fichier de zone fictif, notre origine est
	  <code class="systemitem">example.org.</code>, donc <code class="literal">www</code>
	  sera traduit en <code class="systemitem">www.example.org.</code> </p><p>Le format d'un fichier de zone est le suivant:</p><pre class="programlisting">nom-enregistrement      IN type-enregistrement   valeur</pre><a id="idp83704400" class="indexterm"></a><p>Les enregistrements DNS les plus couramment
	  utilisés:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SOA</span></dt><dd><p>début des données de
		zone</p></dd><dt><span class="term">NS</span></dt><dd><p>serveur de noms faisant
		autorité</p></dd><dt><span class="term">A</span></dt><dd><p>adresse d'une machine</p></dd><dt><span class="term">CNAME</span></dt><dd><p>alias d'un nom de machine</p></dd><dt><span class="term">MX</span></dt><dd><p>serveur de messagerie recevant le courrier
		pour le domaine</p></dd><dt><span class="term">PTR</span></dt><dd><p>un pointeur sur un nom de domaine
		(utilisé dans le DNS inverse)</p></dd></dl></div><pre class="programlisting">
example.org. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serial
                        10800           ; Refresh after 3 hours
                        3600            ; Retry after 1 hour
                        604800          ; Expire after 1 week
                        86400 )         ; Minimum TTL of 1 day</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="systemitem">example.org.</code></span></dt><dd><p>le nom de domaine, également l'origine pour
		ce fichier de zone.</p></dd><dt><span class="term"><code class="systemitem">ns1.example.org.</code></span></dt><dd><p>le serveur de noms primaire/faisant autorité
		pour cette zone.</p></dd><dt><span class="term"><code class="literal">admin.example.org.</code></span></dt><dd><p>la personne responsable pour cette zone avec
		le caractère &#8220;@&#8221; remplacé.
		(<code class="email">&lt;<a xmlns="" class="email" href="mailto:admin@example.org">admin@example.org</a>&gt;</code> devient
		<code class="literal">admin.example.org</code>)</p></dd><dt><span class="term"><code class="literal">2006051501</code></span></dt><dd><p>le numéro de série de ce fichier.
		Celui-ci doit être incrémenté
		à chaque modification du fichier de zone.  De nos
		jours, de nombreux administrateurs
		préfèrent un format du type
		<code class="literal">aaaammjjrr</code> pour le numéro de
		série.  <code class="literal">2006051501</code>
		signifierait dernière modification le 15/05/2006,
		le <code class="literal">01</code> indiquant que c'est la seconde
		fois que ce fichier a été
		révisé ce jour.  Le numéro de
		série est important puisqu'il indique aux
		serveurs de noms esclaves pour la zone une modification
		de celle-ci.</p></dd></dl></div><pre class="programlisting">
       IN NS           ns1.example.org.</pre><p>C'est une entrée de type NS.  Tous les serveurs
	  de noms qui doivent faire autorité pour la zone
	  devront inclure une de ces entrées.</p><pre class="programlisting">
localhost       IN      A       127.0.0.1
ns1             IN      A       192.168.1.2
ns2             IN      A       192.168.1.3
mx              IN      A       192.168.1.4
mail            IN      A       192.168.1.5</pre><p>Un enregistrement de type A indique des noms de machine.
	  Comme présenté ci-dessus <code class="systemitem">ns1.example.org</code> sera résolu en
	  <code class="systemitem">192.168.1.2</code>.</p><pre class="programlisting">
                IN      A       192.168.1.1</pre><p>Cette ligne assigne l'adresse IP <code class="systemitem">192.168.1.1</code> à l'origine, dans
	  cet exemple <code class="systemitem">example.org</code>.</p><pre class="programlisting">
www             IN CNAME        @</pre><p>L'enregistrement de type CNAME est
	  généralement utilisé pour créer
	  des alias à une machine.  Dans l'exemple,
	  <code class="systemitem">www</code> est un alias de la machine
	  connue sous le nom <code class="systemitem">localhost.example.org</code> (<code class="systemitem">127.0.0.1</code>).  Les enregistrements CNAME
	  peuvent être utilisés pour fournir des alias
	  à des noms de machines, ou permettre la rotation
	  (&#8220;round robin&#8221;) d'un nom de machine entre
	  plusieurs machines.</p><a id="idp83747664" class="indexterm"></a><pre class="programlisting">
               IN MX   10      mail.example.org.</pre><p>L'enregistrement MX indique quels serveurs de messagerie
	  sont responsables de la gestion du courrier entrant pour la
	  zone.  <code class="systemitem">mail.example.org</code> est le
	  nom de machine du serveur de messagerie, et 10 étant
	  la priorité du serveur de messagerie.</p><p>On peut avoir plusieurs serveurs de messagerie, avec des
	  priorités de 10, 20, etc.  Un serveur de messagerie
	  tentant de transmettre du courrier au domaine <code class="systemitem">example.org</code> essaiera en premier
	  le MX avec la plus haute priorité (l'enregistrement
	  avec le numéro de priorité le plus bas), puis
	  celui venant
	  en second, etc, jusqu'à ce que le courrier puisse
	  être correctement délivré.</p><p>Pour les fichiers de zone in-addr.arpa (DNS inverse), le
	  même format est utilisé, à l'exception
	  du fait que des entrées PTR seront utilisées
	  en place de A ou CNAME.</p><pre class="programlisting">$TTL 3600

1.168.192.in-addr.arpa. IN SOA ns1.example.org. admin.example.org. (
                        2006051501      ; Serial
                        10800           ; Refresh
                        3600            ; Retry
                        604800          ; Expire
                        3600 )          ; Minimum

        IN      NS      ns1.example.org.
        IN      NS      ns2.example.org.

1       IN      PTR     example.org.
2       IN      PTR     ns1.example.org.
3       IN      PTR     ns2.example.org.
4       IN      PTR     mx.example.org.
5       IN      PTR     mail.example.org.</pre><p>Ce fichier donne la correspondance entre adresses IP et
	  noms de machines de notre domaine fictif.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83752016"></a>29.6.7. Serveur de noms cache</h3></div></div></div><a id="idp83752656" class="indexterm"></a><p>Un serveur de noms cache est un serveur de noms qui ne
	fait autorité pour aucune zone.  Il émet
	simplement des requêtes, et se souvient du résultat
	pour une utilisation ultérieure.  Pour mettre en place un
	tel serveur, configurez le serveur de noms comme à
	l'accoutumé, en prenant bien soin de n'inclure aucune
	zone.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83754320"></a>29.6.8. Sécurité</h3></div></div></div><p>Bien que BIND soit l'implémentation la plus
	courante du DNS, le problème de la
	sécurité subsiste toujours.  De possibles
	problèmes de sécurité exploitables sont
	parfois découvert.</p><p>Bien que FreeBSD enferme automatiquement
	<span class="application">named</span> dans un environnement
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">chroot</span>(8)</span></a>, il existe plusieurs autres mécanismes
	de sécurité qui pourraient aider à se
	prémunir contre de possibles attaques
	<acronym class="acronym">DNS</acronym>.</p><p>C'est une bonne idée de lire les avis de
	sécurité du <a class="link" href="http://www.cert.org/" target="_top">CERT</a> et de s'inscrire
	à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">liste de diffusion des avis de sécurité pour FreeBSD</a> pour se maintenir au
	courant des problèmes de sécurité actuels
	de l'Internet et de FreeBSD.</p><div xmlns="" class="tip"><h3 class="admontitle">Astuce: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si un problème surgit, conserver les sources
	  à jour et disposer d'une version compilée de
	  <span class="application">named</span> récente ne seront pas
	  de trop.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83764304"></a>29.6.9. Lectures supplémentaires</h3></div></div></div><p>Les pages de manuel de
	BIND/<span class="application">named</span>: <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rndc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rndc</span>(8)</span></a>
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">named</span>(8)</span></a> <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=named.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">named.conf</span>(5)</span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.isc.org/products/BIND/" target="_top">Page
	    officielle ISC concernant BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.isc.org/sw/guild/bf/" target="_top">Forum officiel
	    ISC concernant BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.nominum.com/getOpenSourceResource.php?id=6" target="_top">FAQ
	    BIND</a></p></li><li class="listitem"><p><a class="link" href="http://www.oreilly.com/catalog/dns5/" target="_top">DNS
	    et BIND 5ème Edition de chez O'Reilly</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1034.txt" target="_top">RFC1034
	    - Domain Names - Concepts and Facilities</a></p></li><li class="listitem"><p><a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1035.txt" target="_top">RFC1035
	    - Domain Names - Implementation and
	    Specification</a></p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-apache"></a>29.7. Serveur HTTP Apache</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp83785808" class="indexterm"></a><a id="idp83786704" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83787216"></a>29.7.1. Généralités</h3></div></div></div><p>FreeBSD est utilisé pour faire tourner certains des
	sites les plus chargés au monde.  La majorité
	des serveurs web sur l'Internet utilisent le serveur HTTP
	<span class="application">Apache</span>.  Les versions
	pré-compilées
	d'<span class="application">Apache</span> devraient se trouver sur
	le support d'installation de FreeBSD que vous avez
	utilisé.  Si vous n'avez pas installé
	<span class="application">Apache</span> à l'installation de
	FreeBSD, alors vous pouvez installer le serveur à partir
	du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13/pkg-descr">www/apache13</a> ou <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache20/pkg-descr">www/apache20</a>.</p><p>Une fois qu'<span class="application">Apache</span> a
	été installé avec succès, il doit
	être configuré.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette section traite de la version 1.3.X du serveur
	  HTTP <span class="application">Apache</span> étant
	  donné que  c'est la version la plus largement
	  utilisée sous FreeBSD.
	  <span class="application">Apache</span> 2.X introduit de
	  nombreuses nouvelles technologies mais elles ne sont pas
	  abordées ici.  Pour plus d'informations concernant
	  <span class="application">Apache</span> 2.X veuillez
	  consulter <code class="uri"><a class="uri" href="http://httpd.apache.org/" target="_top">http://httpd.apache.org/</a></code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83793744"></a>29.7.2. Configuration</h3></div></div></div><a id="idp83794384" class="indexterm"></a><p>Le fichier principal de configuration du serveur HTTP
	<span class="application">Apache</span> est, sous FreeBSD, le fichier
	<code class="filename">/usr/local/etc/apache/httpd.conf</code>.  Ce
	fichier est un fichier texte de configuration <span class="trademark">UNIX</span>® typique
	avec des lignes de commentaires débutant par un
	caractère <code class="literal">#</code>.  Une description
	complète de toutes les options de configuration
	possibles dépasse le cadre de cet ouvrage, aussi seules
	les directives les plus fréquemment modifiées
	seront décrites ici.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ServerRoot "/usr/local"</code></span></dt><dd><p>Indique le répertoire d'installation par
	      défaut pour l'arborescence
	      <span class="application">Apache</span>.  Les binaires sont
	      stockés dans les sous-répertoires <code class="filename">bin</code> et <code class="filename">sbin</code> de la racine du serveur,
	      et les fichiers de configuration dans <code class="filename">etc/apache</code>.</p></dd><dt><span class="term"><code class="literal">ServerAdmin you@your.address</code></span></dt><dd><p>L'adresse électronique à laquelle tous
	      les problèmes concernant le serveur doivent
	      être rapportés.  Cette adresse apparaît
	      sur certaines pages générées par le
	      serveur, comme des pages d'erreur.</p></dd><dt><span class="term"><code class="literal">ServerName www.example.com</code></span></dt><dd><p>La directive <code class="literal">ServerName</code> vous
	      permet de fixer un nom de machine qui est renvoyé
	      aux clients de votre serveur si le nom est
	      différent de celui de la machine (i.e, utilisez
	      <code class="systemitem">www</code> à la place du véritable
	      nom de la machine).</p></dd><dt><span class="term"><code class="literal">DocumentRoot "/usr/local/www/data"</code></span></dt><dd><p><code class="literal">DocumentRoot</code> est le
	      répertoire où se trouvent les documents que
	      votre serveur diffusera.  Par défaut, toutes les
	      requêtes sont prises en compte par rapport à
	      ce répertoire, mais des liens symboliques et des
	      alias peuvent être utilisés pour pointer vers
	      d'autres emplacements.</p></dd></dl></div><p>C'est toujours une bonne idée de faire des copies
	de sauvegarde de votre fichier de configuration
	d'<span class="application">Apache</span> avant de faire des
	modifications.  Une fois que vous êtes satisfait avec
	votre configuration, vous êtes prêt à
	lancer <span class="application">Apache</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83809232"></a>29.7.3. Exécuter <span class="application">Apache</span></h3></div></div></div><a id="idp83810128" class="indexterm"></a><p><span class="application">Apache</span> n'est pas lancé
	à partir du &#8220;super-serveur&#8221;
	<span class="application">inetd</span> comme pour beaucoup d'autres
	serveurs réseau.  Il est configuré pour tourner
	de façon autonome pour de meilleures performances
	à la réception des requêtes HTTP des
	navigateurs web.  Une procédure est fournie pour rendre
	le démarrage, l'arrêt, et le redémarrage
	du serveur aussi simple que possible.  Pour démarrer
	<span class="application">Apache</span> pour la première
	fois, exécutez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl start</code></strong></pre><p>Vous pouvez arrêter le serveur à tout moment
	en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl stop</code></strong></pre><p>Après avoir effectué des modifications dans
	le fichier de configuration, vous devez redémarrer le
	serveur:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl restart</code></strong></pre><p>Pour redémarrer <span class="application">Apache</span>
	sans faire échouer les connexions en cours,
	exécutez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/sbin/apachectl graceful</code></strong></pre><p>Des informations supplémentaires sont disponibles
	dans la page de manuel d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=apachectl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">apachectl</span>(8)</span></a>.</p><p>Pour lancer <span class="application">Apache</span> au
	démarrage du système, ajoutez la ligne suivante
	au fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">apache_enable="YES"</pre><p>Si vous désirez passer des options en ligne de
	commande supplémentaires au programme
	<code class="command">httpd</code> d'<span class="application">Apache</span>
	lancé au démarrage du système, vous
	pouvez les spécifier à l'aide d'une ligne dans
	<code class="filename">rc.conf</code>:</p><pre class="programlisting">apache_flags=""</pre><p>Maintenant que le serveur web tourne, vous pouvez voir
	votre site web en pointant votre navigateur sur
	<code class="literal">http://localhost/</code>.  La page web
	affichée par défaut est
	<code class="filename">/usr/local/www/data/index.html</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83828048"></a>29.7.4. Serveurs virtuels</h3></div></div></div><p><span class="application">Apache</span> supporte deux types
	différents de serveurs virtuels.  Le premier type est
	celui des serveurs virtuels basés sur les noms.  Ce
	type de serveurs virtuels utilise les entêtes HTTP/1.1
	pour déterminer le nom de la machine.  Cela autorise le
	partage de la même adresse IP entre plusieurs domaines
	différents.</p><p>Pour configurer <span class="application">Apache</span> à
	l'utilisation de serveurs virtuels basés sur les noms,
	ajoutez une entrée comme la suivante à votre
	fichier <code class="filename">httpd.conf</code>:</p><pre class="programlisting">NameVirtualHost *</pre><p>Si votre serveur web est appelé <code class="systemitem">www.domain.tld</code> et que vous voulez mettre
	en place un domain virtuel pour <code class="systemitem">www.someotherdomain.tld</code> alors vous
	ajouterez les entrées suivantes au fichier
	<code class="filename">httpd.conf</code>:</p><pre class="screen">&lt;VirtualHost *&gt;
ServerName www.domain.tld
DocumentRoot /www/domain.tld
&lt;/VirtualHost&gt;

&lt;VirtualHost *&gt;
ServerName www.someotherdomain.tld
DocumentRoot /www/someotherdomain.tld
&lt;/VirtualHost&gt;</pre><p>Remplacez les addresses avec celles que vous
	désirez utiliser et le chemin d'accès des
	documents avec celui que vous utilisez.</p><p>Pour plus d'informations sur la mise en place de serveurs
	virtuels, veuillez consulter la documentation officielle
	d'<span class="application">Apache</span> à l'adresse <code class="uri"><a class="uri" href="http://httpd.apache.org/docs/vhosts/" target="_top">http://httpd.apache.org/docs/vhosts/</a></code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83839312"></a>29.7.5. Modules Apache</h3></div></div></div><a id="idp83839952" class="indexterm"></a><p>Il existe de nombreux modules
	<span class="application">Apache</span> disponibles en vue d'ajouter
	des fonctionnalités au serveur de base.  Le catalogue
	des logiciels portés offre une méthode simple
	d'installation d'<span class="application">Apache</span> avec
	certains des modules les plus populaires.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83842128"></a>29.7.5.1. mod_ssl</h4></div></div></div><a id="idp83842768" class="indexterm"></a><a id="idp83843664" class="indexterm"></a><a id="idp83844176" class="indexterm"></a><p>Le module <span class="application">mod_ssl</span> utilise la
	  bibliothèque OpenSSL pour offrir un chiffrement
	  solide à l'aide des protocoles &#8220;Secure Sockets
	  Layer&#8221; (SSL v2/v3) et &#8220;Transport Layer
	  Security&#8221;.  Ce module fourni tout ce qui est
	  nécessaire à la demande de certificats
	  signés auprès d'une autorité de
	  certification connue de façon à pouvoir faire
	  tourner un serveur web sécurisé sous
	  FreeBSD.</p><p>Si vous n'avez pas déjà installé
	  <span class="application">Apache</span>, alors une version
	  d'<span class="application">Apache</span> 1.3.X comprenant
	  <span class="application">mod_ssl</span> peut être
	  installée à l'aide du logiciel porté
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13-modssl/pkg-descr">www/apache13-modssl</a>.  Le support
	  SSL est également disponible pour
	  <span class="application">Apache</span> 2.X avec le logiciel
	  porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache20/pkg-descr">www/apache20</a>, où il est
	  activé par défaut.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83849168"></a>29.7.5.2. Sites Web dynamiques avec Perl &amp; PHP</h4></div></div></div><p>Ces dernières années, de plus en plus
	  d'entreprises se sont tournées vers l'Internet pour
	  augmenter leurs revenus et renforcer leur exposition.  Cela
	  a eu pour conséquence d'accroître le besoin de
	  contenus Web interactifs.  Quand certaines entreprises,
	  comme <span class="trademark">Microsoft</span>®, ont introduit dans leurs produits
	  propriétaires des solutions à ces besoins, la
	  communauté des logiciels libres a également
	  répondu à l'appel.  Deux options pour obtenir
	  du contenu Web dynamique sont
	  <span class="application">mod_perl</span> et
	  <span class="application">mod_php</span>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83855696"></a>29.7.5.2.1. mod_perl</h5></div></div></div><a id="idp83856336" class="indexterm"></a><p>Le projet d'intégration
	  <span class="application">Apache</span>/Perl réuni la
	  puissance du langage de programmation Perl et le serveur
	  HTTP <span class="application">Apache</span>.  Avec le module
	  <span class="application">mod_perl</span> il est alors possible
	  d'écrire des modules
	  <span class="application">Apache</span> entièrement en
	  Perl.  De plus, la présence d'un interpréteur
	  intégré au serveur évite la surcharge
	  due au lancement d'un interpréteur externe et le
	  délai pénalisant du démarrage de
	  Perl.</p><p>Le module <span class="application">mod_perl</span> est peut
	    être obtenu de diverses manières.  Pour
	    l'utilisation du module
	    <span class="application">mod_perl</span> souvenez-vous que
	    <span class="application">mod_perl</span> 1.0 ne fonctionne
	    qu'avec <span class="application">Apache</span> 1.3 et
	    <span class="application">mod_perl</span> 2.0 ne fonctionne
	    qu'avec <span class="application">Apache</span> 2.  Le module
	    <span class="application">mod_perl</span> 1.0 est disponible
	    sous <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mod_perl/pkg-descr">www/mod_perl</a> et
	    une version compilée en statique sous <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/apache13-modperl/pkg-descr">www/apache13-modperl</a>.  Le module
	    <span class="application">mod_perl</span> 2.0 est disponible
	    sous <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mod_perl2/pkg-descr">www/mod_perl2</a>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83864272"></a>29.7.5.2.2. mod_php</h5></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div></div></div><a id="idp83866704" class="indexterm"></a><p><acronym class="acronym">PHP</acronym>, aussi connu sous le nom de
	  <span class="quote">« <span class="quote">PHP: Hypertext Preprocessor</span> »</span> est un langage de
	  script tout particulièrement adapté au
	  développement Web.  Pouvant être
	  intégré à du <acronym class="acronym">HTML</acronym>,
	  sa syntaxe est dérivée du C, <span class="trademark">Java</span>&#8482;, et du
	  Perl avec pour objectif de permettre aux développeurs
	  Web d'écrire rapidement des pages Web au contenu
	  généré dynamiquement.</p><p>Pour ajouter le support de <acronym class="acronym">PHP</acronym>5 au
	  serveur Web <span class="application">Apache</span>, commencez par
	  installer le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php5/pkg-descr">lang/php5</a>.</p><p>Si c'est la première installation du logiciel
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php5/pkg-descr">lang/php5</a>, les
	  <code class="literal">OPTIONS</code> disponibles seront
	  affichées automatiquement.  Si aucun menu n'est
	  affiché, parce que le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php5/pkg-descr">lang/php5</a> a été
	  installé par le passé, il est toujours
	  possible de forcer l'affichage du menu des options de
	  compilation en utilisant la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make config</code></strong></pre><p>dans le répertoire du logiciel
	  porté.</p><p>Dans le menu des options de compilation,
	  sélectionnez l'option <code class="literal">APACHE</code> pour
	  compiler <span class="application">mod_php5</span> sous forme de
	  module chargeable pour le serveur Web
	  <span class="application">Apache</span>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">De nombreux sites utilisent toujours
	    <acronym class="acronym">PHP</acronym>4 pour diverses raisons (des
	    problèmes de compatibilité ou des
	    applications Web déjà
	    déployées).  Si
	    <span class="application">mod_php4</span> est requis à la
	    place de <span class="application">mod_php5</span>, utilisez
	    alors le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php4/pkg-descr">lang/php4</a>.  Le logiciel
	    porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php4/pkg-descr">lang/php4</a>
	    supporte plusieurs des options de configuration et de
	    compilation du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php5/pkg-descr">lang/php5</a>.</p></div><p>Cela installera et configurera les modules requis au
	  support des applications dynamiques <acronym class="acronym">PHP</acronym>.
	  Assurez-vous que les sections suivantes ont
	  été ajoutées au fichier
	  <code class="filename">/usr/local/etc/apache/httpd.conf</code>:</p><pre class="programlisting">LoadModule php5_module        libexec/apache/libphp5.so</pre><pre class="programlisting">AddModule mod_php5.c
    &lt;IfModule mod_php5.c&gt;
        DirectoryIndex index.php index.html
    &lt;/IfModule&gt;
    &lt;IfModule mod_php5.c&gt;
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php-source .phps
    &lt;/IfModule&gt;</pre><p>Ensuite, un simple appel à la commande
	  <code class="command">apachectl</code> pour un redémarrage
	  élégant est requis pour charger le module
	  <acronym class="acronym">PHP</acronym>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>apachectl graceful</code></strong></pre><p>Lors des futures mises à jour de
	  <acronym class="acronym">PHP</acronym>, la commande <code class="command">make
	  config</code> ne sera pas nécessaire; les
	  <code class="literal">OPTIONS</code> précédemment
	  sélectionnées sont automatiquement
	  sauvegardées par le système des logiciels
	  portés de FreeBSD.</p><p>Le support de <acronym class="acronym">PHP</acronym> sous FreeBSD est
	  extrêmement modulaire ce qui donne lieu à une
	  installation de base limitée.  Il est très
	  simple d'ajouter une fonctionnalité en utilisant le
	  logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/lang/php5-extensions/pkg-descr">lang/php5-extensions</a>.  Ce logiciel
	  porté fournit un menu pour l'installation des
	  extensions <acronym class="acronym">PHP</acronym>.  Alternativement, il est
	  possible d'installer les extensions individuellement en
	  utilisant les logiciels portés correspondants.</p><p>Par exemple, pour ajouter à
	  <acronym class="acronym">PHP</acronym>5 le support pour le serveur de bases
	  de données <span class="application">MySQL</span>,
	  installez simplement le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/databases/php5-mysql/pkg-descr">databases/php5-mysql</a>.</p><p>Après l'installation d'une extension, le serveur
	  <span class="application">Apache</span> doit être
	  redémarré pour prendre en compte les
	  changements de configuration:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>apachectl graceful</code></strong></pre></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ftp"></a>29.8. Protocole de transfert de fichiers (FTP)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp83900496" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83901008"></a>29.8.1. Généralités</h3></div></div></div><p>Le protocol de transfert de fichiers (FTP) offre aux
	utilisateurs une méthode simple pour transférer
	des fichiers vers ou à partir d'un serveur <acronym class="acronym">FTP</acronym>.  FreeBSD comprend un
	serveur <acronym class="acronym">FTP</acronym>,
	<span class="application">ftpd</span>, dans le système de
	base.  Cela rend la configuration et l'administration d'un
	serveur <acronym class="acronym">FTP</acronym>
	sous FreeBSD très simple.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83904208"></a>29.8.2. Configuration</h3></div></div></div><p>L'étape de configuration la plus important est de
	décider quels comptes seront autorisés à
	accéder au serveur FTP.  Un système FreeBSD
	classique possède de nombreux comptes système
	utilisés par divers &#8220;daemon&#8221;s, mais les
	utilisateurs inconnus ne devraient pas être
	autorisés à ouvrir de session sous ces comptes.
	Le fichier <code class="filename">/etc/ftpusers</code> est une liste
	d'utilisateurs interdits d'accès au serveur FTP.  Par
	défaut, il inclut les comptes systèmes
	précédemment mentionnés, mais il est
	possible d'ajouter des utilisateurs précis qui ne
	devraient pas avoir accès au serveur FTP.</p><p>Vous pouvez vouloir restreindre l'accès à
	certains utilisateurs sans leur refuser complètement
	l'utilisation du serveur FTP.  Cela peut être
	réalisé à l'aide du fichier
	<code class="filename">/etc/ftpchroot</code>.  Ce fichier liste les
	utilisateurs et les groupes sujet à des restrictions
	d'accès FTP.  La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ftpchroot</span>(5)</span></a>
	fournit tous les détails, cela ne sera donc pas
	décrit ici.</p><a id="idp83907152" class="indexterm"></a><p>Si vous désirez activer l'accès FTP anonyme
	sur votre serveur, vous devez alors créer un
	utilisateur appelé <code class="systemitem">ftp</code> sur votre
	serveur FreeBSD.  Les utilisateurs seront donc en mesure d'ouvrir
	une session FTP sur votre serveur sous le nom d'utilisateur
	<code class="systemitem">ftp</code> ou <code class="systemitem">anonymous</code> et
	sans aucun mot de passe (par convention l'adresse
	électronique de l'utilisateur devrait être
	utilisée comme mot de passe).  Le serveur FTP appellera
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> quand un utilisateur anonyme ouvrira une
	session, pour restreindre l'accès juste au
	répertoire personnel de l'utilisateur
	<code class="systemitem">ftp</code>.</p><p>Il existe deux fichiers texte qui spécifient les
	messages de bienvenue à afficher aux clients FTP.  Le
	contenu du fichier <code class="filename">/etc/ftpwelcome</code> sera
	affiché aux utilisateurs avant qu'ils atteignent
	l'invite de session.  Après une ouverture de session,
	le contenu du fichier <code class="filename">/etc/ftpmotd</code> sera
	affiché.  Notez que le chemin d'accès à
	ce fichier est relatif à l'environnement de la session,
	aussi le fichier <code class="filename">~ftp/etc/ftpmotd</code> sera
	affiché aux utilisateurs anonymes.</p><p>Une fois que le serveur FTP a été
	configuré correctement, il doit être
	activé dans le fichier
	<code class="filename">/etc/inetd.conf</code>.  Ici il faut juste
	retirer le symbole de commentaire &#8220;#&#8221; en face de
	la ligne <span class="application">ftpd</span>:</p><pre class="programlisting">ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre><p>Comme expliqué dans la <a class="xref" href="#network-inetd-reread" title="Exemple 29.1. Recharger le fichier de configuration d'inetd">Exemple 29.1, « Recharger le fichier de configuration
	  d'<span class="application">inetd</span> »</a>, la configuration
	d'<span class="application">inetd</span> doit être
	rechargée après que le fichier
	de configuration ait été modifié.</p><p>Vous pouvez maintenant ouvrir une session FTP sur votre
	serveur en tapant:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ftp localhost</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83917392"></a>29.8.3. Maintenance</h3></div></div></div><a id="idp83918032" class="indexterm"></a><a id="idp83918544" class="indexterm"></a><p>Le &#8220;daemon&#8221; <span class="application">ftpd</span>
	utilise <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> pour l'enregistrement des messages.  Par
	défaut, le &#8220;daemon&#8221; de gestion des journaux
	du système enverra les messages relatifs au FTP dans le
	fichier <code class="filename">/var/log/xferlog</code>.  L'emplacement
	des journaux FTP peut être modifié en changeant
	la ligne suivante dans le fichier
	<code class="filename">/etc/syslog.conf</code>:</p><pre class="programlisting">ftp.info      /var/log/xferlog</pre><a id="idp83930448" class="indexterm"></a><p>Soyez conscient des éventuels problèmes
	impliqués par l'utilisation d'un serveur FTP acceptant
	les connexions anonymes.  Vous devriez, tout
	particulièrement, penser à deux fois avant
	d'autoriser les utilisateurs anonyme à déposer
	des fichiers sur le serveur.  Votre site FTP pourrait devenir
	un forum d'échange de logiciels commerciaux sans les
	licences ou pire.  Si vous devez autoriser le
	dépôt de fichiers de façon anonyme sur le
	serveur FTP, alors vous devriez fixer les permissions sur ces
	fichiers de telle sorte qu'ils ne puissent être lus par
	d'autres utilisateurs anonymes avant qu'ils n'aient pu
	être contrôlés.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-samba"></a>29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp83940048" class="indexterm"></a><a id="idp83940560" class="indexterm"></a><a id="idp83941072" class="indexterm"></a><a id="idp83942224" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83943376"></a>29.9.1. Généralités</h3></div></div></div><p><span class="application">Samba</span> est un logiciel libre
	très populaire qui offre des services de partage de
	fichiers et d'imprimantes pour les clients
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  De tels clients peuvent se connecter et
	utiliser l'espace de fichiers d'une machine FreeBSD comme si
	c'était un disque local, ou utiliser des imprimantes
	FreeBSD comme si elles étaient des imprimantes
	locales.</p><p><span class="application">Samba</span> devrait se trouver sur
	votre support d'installation.  Si vous n'avez pas
	installé <span class="application">Samba</span> à
	l'installation de FreeBSD, vous pouvez alors l'installer à
	partir de la version pré-compilée ou
	portée <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba3/pkg-descr">net/samba3</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83947472"></a>29.9.2. Configuration</h3></div></div></div><p>Le fichier de configuration par défaut de
	<span class="application">Samba</span> est installé sous le
	nom <code class="filename">/usr/local/etc/smb.conf.default</code>.  Ce
	fichier doit être copié vers
	<code class="filename">/usr/local/etc/smb.conf</code> et
	personnalisé avant que <span class="application">Samba</span>
	ne puisse être utilisé.</p><p>Le fichier <code class="filename">smb.conf</code> contient la
	configuration nécessaire à l'exécution de
	<span class="application">Samba</span>, comme la définition
	des imprimantes et des &#8220;systèmes de fichiers
	partagés&#8221; que vous désirez partager avec
	les clients <span class="trademark">Windows</span>®.  Le logiciel
	<span class="application">Samba</span> comprend une interface Web
	appelé <span class="application">swat</span> qui offre une
	méthode simple de configuration du fichier
	<code class="filename">smb.conf</code>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83953232"></a>29.9.2.1. Utilisation de l'interface web d'administration de
	  Samba (SWAT)</h4></div></div></div><p>L'interface web d'administration de
	  <span class="application">Samba</span> (SWAT) est
	  exécutée sous la forme d'un
	  &#8220;daemon&#8221; à partir
	  d'<span class="application">inetd</span>.  Par conséquent,
	  la ligne suivante dans le fichier
	  <code class="filename">/etc/inetd.conf</code> doit être
	  décommentée avant que
	  <span class="application">swat</span> ne puisse être
	  utilisé pour configurer
	  <span class="application">Samba</span>:</p><pre class="programlisting">swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre><p>Comme expliqué dans la <a class="xref" href="#network-inetd-reread" title="Exemple 29.1. Recharger le fichier de configuration d'inetd">Exemple 29.1, « Recharger le fichier de configuration
	  d'<span class="application">inetd</span> »</a>, la configuration
	  d'<span class="application">inetd</span> doit être
	  rechargée après modification
	  de ce fichier de configuration.</p><p>Une fois que <span class="application">swat</span> a
	  été activé dans
	  <code class="filename">inetd.conf</code>, vous pouvez utiliser un
	  navigateur pour vous connecter à l'adresse <code class="uri"><a class="uri" href="http://localhost:901" target="_top">http://localhost:901</a></code>.  Vous devez ouvrir tout
	  d'abord une session sous le compte système
	  <code class="systemitem">root</code>.</p><p>Une fois que vous avez ouvert une session sur la page
	  principale de configuration de
	  <span class="application">Samba</span>, vous pouvez naviguer dans
	  la documentation du système, ou commencer par cliquer
	  sur l'onglet <span class="guimenu">Globals</span>.  Le menu
	  <span class="guimenu">Globals</span> correspond aux variables
	  situées dans la section <code class="literal">[global]</code>
	  du fichier
	  <code class="filename">/usr/local/etc/smb.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83962832"></a>29.9.2.2. Paramétrages généraux</h4></div></div></div><p>Que vous utilisiez <span class="application">swat</span> ou
	  éditiez directement le fichier
	  <code class="filename">/usr/local/etc/smb.conf</code>, les
	  premières directives que vous allez sûrement
	  rencontrer en configurant <span class="application">Samba</span>
	  seront:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">workgroup</code></span></dt><dd><p>Le nom de domaine NT ou le groupe de travail pour
		les ordinateurs qui accéderont à ce
		serveur.</p></dd><dt><span class="term"><code class="literal">netbios name</code></span></dt><dd><a id="idp83980368" class="indexterm"></a><p>Fixe le nom NetBIOS sous lequel est connu le
		serveur <span class="application">Samba</span>.  Par
		défaut c'est le même que la première
		composante du nom de la machine pour le DNS.</p></dd><dt><span class="term"><code class="literal">server string</code></span></dt><dd><p>Cette directive définie la chaîne de
		caractères qui sera affichée lors de
		l'utilisation de la commande <code class="command">net view</code>
		et par d'autres outils réseau recherchant
		à afficher une description du serveur.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp83984208"></a>29.9.2.3. Paramètres de sécurité</h4></div></div></div><p>Deux des plus importants paramétrages de
	  <code class="filename">/usr/local/etc/smb.conf</code> sont le mode de
	  sécurité choisi, et le format de mot de passe
	  pour les utilisateurs.  Les directives suivantes
	  contrôlent ces options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">security</code></span></dt><dd><p>Les deux options les plus courantes sont
		<code class="literal">security = share</code> et <code class="literal">security
		= user</code>.  Si vos clients utilisent des noms
		d'utilisateur identiques à ceux sur votre machine
		FreeBSD, alors vous voudrez utiliser un niveau de
		sécurité utilisateur.  C'est le mode de
		sécurité par défaut et qui demande
		aux clients de d'ouvrir une session avant de pouvoir
		accéder aux ressources partagées.</p><p>Dans le niveau de sécurité partage
		(&#8220;share&#8221;), le client n'a pas besoin
		d'ouvrir de session avant de pouvoir se connecter
		à une ressource partagée.
		C'était le mode de sécurité par
		défaut d'anciennes versions de
		<span class="application">Samba</span>.</p></dd><dt><span class="term"><code class="literal">passdb backend</code></span></dt><dd><a id="idp83994320" class="indexterm"></a><a id="idp83994832" class="indexterm"></a><a id="idp83995344" class="indexterm"></a><p><span class="application">Samba</span> possède
		plusieurs modèles de support d'authentification.
		Vous pouvez authentifier des clients avec LDAP, NIS+,
		une base de données SQL ou un fichier de mot de
		passe modifié.  La méthode
		d'authentification par défaut est appelée
		<code class="literal">smbpasswd</code>, et c'est celle qui sera
		présentée ici.</p></dd></dl></div><p>En supposant que le modèle
	  <code class="literal">smbpasswd</code> par défaut est
	  utilisé, le fichier
	  <code class="filename">/usr/local/private/smbpasswd</code> doit
	  être créé pour permettre à
	  <span class="application">Samba</span> d'identifier les clients.
	  Si vous désirez donner accès à vos
	  comptes utilisateur <span class="trademark">UNIX</span>® à partir de clients
	  <span class="trademark">Windows</span>®, utilisez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>smbpasswd -a username</code></strong></pre><p>Veuillez consulter le
	  <a class="link" href="http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/" target="_top">tutorial
	  officiel de Samba</a> pour des informations
	  supplémentaires sur les options de configuration.
	  Avec les bases présentées ici, vous devriez
	  disposer de tous les éléments
	  nécessaires au démarrage de
	  <span class="application">Samba</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84002384"></a>29.9.3. Démarrage de
	<span class="application">Samba</span></h3></div></div></div><p>Le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba3/pkg-descr">net/samba3</a> amène une nouvelle
	procédure de démarrage qui peut être
	employée pour contrôler
	<span class="application">Samba</span>.  Pour activer cette
	procédure de manière à ce qu'elle soit
	utilisée pour par exemple lancer, arrêter ou
	relancer <span class="application">Samba</span>, ajoutez la ligne
	suivante au fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">samba_enable="YES"</pre><p>Ou, pour un contrôle plus fin:</p><pre class="programlisting">nmbd_enable="YES"
	smbd_enable="YES"</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avec cela, <span class="application">Samba</span> sera
	  automatiquement lancé au démarrage.</p></div><p>Il est alors possible de démarrer
	<span class="application">Samba</span> à n'importe quel
	moment en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/samba start</code></strong>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</pre><p>Veuillez consulter la <a class="xref" href="#configtuning-rcd" title="12.7. Utilisation du système rc sous FreeBSD">Section 12.7, « Utilisation du système rc sous FreeBSD »</a>
	pour plus d'information sur les procédures rc.</p><p><span class="application">Samba</span> consiste essentiellement
	en trois &#8220;daemon&#8221;s séparés.  Vous
	devriez vous rendre compte que les &#8220;daemon&#8221;s
	<span class="application">nmbd</span> et
	<span class="application">smbd</span> sont lancés par la
	procédure <code class="filename">samba</code>.  Si vous avez
	activé la résolution de noms winbind dans le
	fichier <code class="filename">smb.conf</code>, alors le
	&#8220;daemon&#8221; <span class="application">winbindd</span> sera
	également lancé.</p><p>Vous pouvez arrêter <span class="application">Samba</span>
	à tout moment en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/samba stop</code></strong></pre><p><span class="application">Samba</span> est une suite logiciels
	complexes avec des fonctionnalités permettant une large
	intégration avec les réseaux
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  Pour plus d'information sur les
	fonctionnalités non-abordées dans ce document,
	veuillez consulter <code class="uri"><a class="uri" href="http://www.samba.org" target="_top">http://www.samba.org</a></code>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ntp"></a>29.10. Synchronisation de l'horloge avec NTP</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Hukins</span></span>. </span></div></div></div><a id="idp84023632" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84024144"></a>29.10.1. Généralités</h3></div></div></div><p>Avec le temps, l'horloge d'un ordinateur tend à
	dériver.  Le protocole NTP (&#8220;Network Time
	Protocol&#8221;) est une des manières pour s'assurer
	que votre horloge reste précise.</p><p>De nombreux services Internet ont besoin, ou tirent
	partie, de la précision des horloges des ordinateurs.
	Par exemple, un serveur web, peut recevoir des requêtes
	pour n'envoyer un fichier que s'il a été
	modifié depuis un certain temps.  Sur un réseau
	local, il est essentiel que les ordinateurs partageant des
	fichiers à partir du même serveur de fichiers
	aient des horloges synchronisées de manière
	à ce que les dates de création ou de
	dernière modification d'un fichier
	(&#8220;timestamp&#8221;) soient cohérentes.  Des
	services comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> reposent sur une horloge
	système précise pour exécuter des
	commandes à des moments précis.</p><a id="idp84026448" class="indexterm"></a><p>FreeBSD est fourni avec le serveur NTP <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> qui peut
	être utilisé pour contacter d'autres serveurs NTP
	pour régler l'horloge de votre machine ou pour jouer le
	rôle de serveur de temps pour d'autres.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84028880"></a>29.10.2. Choisir les serveurs NTP appropriés</h3></div></div></div><a id="idp84029520" class="indexterm"></a><p>Afin de synchroniser votre horloge, vous devrez trouver un
	ou plusieurs serveurs NTP.  Votre administrateur réseau
	ou votre FAI peuvent avoir mis en place un serveur NTP dans
	cet objectif&#8212;consultez leur documentation pour voir si
	c'est le cas.  Il existe une <a class="link" href="http://ntp.isc.org/bin/view/Servers/WebHome" target="_top">liste
	en ligne de serveurs NTP accessibles par le public</a> que
	vous pouvez utiliser pour trouver un serveur NTP proche de
	vous.  Assurez-vous d'avoir pris connaissance de la politique
	d'utilisation des serveurs que vous choisissez, et demandez la
	permission si nécessaire.</p><p>Choisir plusieurs serveurs NTP non-connectés entre
	eux est une bonne idée au cas où un des serveurs
	que vous utilisez devient inaccessible ou que son horloge
	n'est plus fiable.  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> utilise intelligemment les
	réponses qu'il reçoit d'autres serveurs&#8212;il
	favorisera les plus fiables par rapport aux moins
	fiables.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84032848"></a>29.10.3. Configuration de votre machine</h3></div></div></div><a id="idp84033488" class="indexterm"></a><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84042960"></a>29.10.3.1. Configuration de base</h4></div></div></div><a id="idp84043600" class="indexterm"></a><p>Si vous désirez synchroniser votre horloge
	  uniquement lors du démarrage de la machine, vous
	  pouvez alors employer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a>.  Cela peut être
	  approprié pour certaines machines de bureau qui sont
	  fréquemment redémarrées et qui
	  ne nécessites qu'une synchronisation
	  épisodique, cependant la plupart des machines
	  devraient utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>.</p><p>Utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> au moment du démarrage
	  est également une bonne idée pour les machines
	  qui exécutent <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>.  Le programme
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> modifie l'horloge graduellement, alors que
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> change directement l'horloge, peu importe la
	  différence entre l'heure actuelle de la machine et
	  l'heure correcte.</p><p>Pour activer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> au démarrage,
	  ajoutez la ligne <code class="literal">ntpdate_enable="YES"</code> au
	  fichier <code class="filename">/etc/rc.conf</code>.  Vous devrez
	  également préciser tous les serveurs avec
	  lesquels vous désirez vous synchroniser et tous les
	  indicateurs devant être passés à
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpdate&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpdate</span>(8)</span></a> avec
	  <code class="literal">ntpdate_flags</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84052816"></a>29.10.3.2. Configuration générale</h4></div></div></div><a id="idp84053456" class="indexterm"></a><p>NTP est configuré par l'intermédiaire du
	  fichier <code class="filename">/etc/ntp.conf</code> suivant le format
	  décrit dans la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a>.
	  Voici un exemple simple:</p><pre class="programlisting">server ntplocal.example.com prefer
server timeserver.example.org
server ntp2a.example.net

driftfile /var/db/ntp.drift</pre><p>L'option <code class="literal">server</code> précise quels
	  serveurs doivent être utilisés, avec un serveur
	  listé par ligne.  Si un serveur est
	  spécifié avec l'argument
	  <code class="literal">prefer</code>, comme c'est le cas pour <code class="systemitem">ntplocal.example.com</code>, ce serveur est
	  préféré par rapport aux autres
	  serveurs.  Une réponse en provenance d'un serveur
	  <span class="emphasis"><em>préféré</em></span> sera
	  ignorée si elle diffère de façon
	  significative des réponses des autres serveurs, sinon
	  elle sera utilisée sans considérer les autres
	  réponses.  L'argument <code class="literal">prefer</code> est
	  normalement employé pour les serveurs NTP qui sont
	  connus pour leur grande précision, comme ceux avec
	  des systèmes spéciaux de contrôle du
	  matériel.</p><p>L'option <code class="literal">driftfile</code> précise
	  quel fichier est utilisé pour stocker le
	  décalage de fréquence de l'horloge.  Le
	  programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> l'utilise pour compenser
	  automatiquement la dérive naturelle de l'horloge,
	  permettant de maintenir un réglage raisonnablement
	  correct même s'il est coupé d'autres sources
	  extérieures de temps pendant une certaine
	  période.</p><p>L'option <code class="literal">driftfile</code> précise
	  également quel fichier est utilisé pour
	  stocker l'information concernant les réponses
	  précédentes des serveurs NTP que vous
	  utilisez.  Il ne devrait pas être modifié par
	  un autre processus.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84061648"></a>29.10.3.3. Contrôler l'accès à votre
	  serveur</h4></div></div></div><p>Par défaut, votre serveur NTP sera accessible par
	  toutes les machines sur l'Internet.  L'option
	  <code class="literal">restrict</code> du fichier
	  <code class="filename">/etc/ntp.conf</code> vous permet de
	  contrôler quelles machines peuvent accéder
	  à votre serveur.</p><p>Si vous voulez refuser à tout le monde
	  l'accès à votre serveur NTP, ajoutez la ligne
	  suivante au fichier
	  <code class="filename">/etc/ntp.conf</code>:</p><pre class="programlisting">restrict default ignore</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cela empêchera également à votre serveur d'accéder
	    à tout serveur listé dans votre configuration locale.
	    Si vous avez besoin de synchroniser votre serveur NTP avec
	    un serveur NTP externe, vous devez alors autoriser le
	    serveur en question.  Consultez la page de manuel de
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a> pour plus d'information.</p></div><p>Si vous désirez autoriser uniquement
	  l'accès aux machines de votre réseau pour
	  qu'elles puissent synchroniser leur horloge, tout en vous
	  assurant qu'elles ne peuvent configurer le serveur ou
	  être utilisées comme point de de
	  synchronisation, ajoutez:</p><pre class="programlisting">restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</pre><p>à la place, où <code class="systemitem">192.168.1.0</code> est une adresse IP de
	  votre réseau et <code class="systemitem">255.255.255.0</code> est votre masque de
	  sous-réseau.</p><p>Le fichier <code class="filename">/etc/ntp.conf</code> peut
	  contenir plusieurs options <code class="literal">restrict</code>.
	  Pour plus de détails, lisez la section
	  <code class="literal">Access Control Support</code> de la page de
	  manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntp.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ntp.conf</span>(5)</span></a>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84075088"></a>29.10.4. Exécuter le serveur NTP</h3></div></div></div><p>Pour s'assurer que le serveur NTP est lancé au
	démarrage, ajoutez la ligne
	<code class="literal">ntpd_enable="YES"</code> dans le fichier
	<code class="filename">/etc/rc.conf</code>.  Si vous désirez
	passer des indicateurs supplémentaires à
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a>, éditez les paramètres de l'option
	<code class="varname">ntpd_flags</code> dans
	<code class="filename">/etc/rc.conf</code>.</p><p>Pour lancer le serveur sans redémarrer votre
	machine, exécutez <code class="command">ntpd</code> en
	étant sûr de préciser tout
	paramètre supplémentaire de
	<code class="varname">ntpd_flags</code> dans
	<code class="filename">/etc/rc.conf</code>.  Par exemple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ntpd -p /var/run/ntpd.pid</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84089296"></a>29.10.5. Utiliser ntpd avec une connexion Internet
	temporaire</h3></div></div></div><p>Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ntpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ntpd</span>(8)</span></a> n'a pas besoin d'une connexion
	permanente à l'Internet pour fonctionner correctement.
	Cependant, si vous disposez d'une connexion temporaire qui
	est configurée de telle sorte qu'il y ait
	établissement de la connexion à la demande,
	c'est une bonne idée d'empêcher le trafic NTP de
	déclencher la numérotation ou de maintenir
	constamment établie la connexion.  Si vous utilisez PPP
	en mode utilisateur, vous pouvez employer les directives
	<code class="literal">filter</code> dans le fichier
	<code class="filename">/etc/ppp/ppp.conf</code>.  Par exemple:</p><pre class="programlisting"> set filter dial 0 deny udp src eq 123
 # Empêche le trafic NTP de lancer une connexion
 set filter dial 1 permit 0 0
 set filter alive 0 deny udp src eq 123
 # Empêche le trafic NTP entrant de garder la connexion établie
 set filter alive 1 deny udp dst eq 123
 # Empêche le trafic NTP sortant de garder la connexion établie
 set filter alive 2 permit 0/0 0/0</pre><p>Pour plus de détails lisez la section
	<code class="literal">PACKET FILTERING</code> de la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> et les exemples du répertoire <code class="filename">/usr/share/examples/ppp/</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains fournisseurs d'accès Internet bloquent
	  les ports dont le numéro est faible, empêchant
	  NTP de fonctionner puisque les réponses n'atteignent
	  jamais votre machine.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84095056"></a>29.10.6. Information supplémentaire</h3></div></div></div><p>La documentation pour le serveur NTP peut être
	trouvée dans le répertoire <code class="filename">/usr/share/doc/ntp/</code> sous le format
	HTML.</p></div></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="firewalls"></a>Chapitre 30. Firewalls ** Traduction en Cours **</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Joseph J.</span> <span class="surname">Barbish</span></span>. </span></div><div><span class="authorgroup">Converti en SGML et mis à jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brad</span> <span class="surname">Davis</span></span>. </span></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#firewalls-intro">30.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#firewalls-concepts">30.2. Firewall Concepts</a></span></dt><dt><span class="sect1"><a href="#firewalls-apps">30.3. Firewall Packages</a></span></dt><dt><span class="sect1"><a href="#firewalls-pf">30.4. The OpenBSD Packet Filter (PF) and
      <acronym class="acronym">ALTQ</acronym></a></span></dt><dt><span class="sect1"><a href="#firewalls-ipf">30.5. The IPFILTER (IPF) Firewall</a></span></dt><dt><span class="sect1"><a href="#firewalls-ipfw">30.6. IPFW</a></span></dt></dl></div><a id="idp84101456" class="indexterm"></a><a id="idp84101968" class="indexterm"></a><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-intro"></a>30.1. Introduction</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-concepts"></a>30.2. Firewall Concepts</h2></div></div></div><a id="idp84109264" class="indexterm"></a><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-apps"></a>30.3. Firewall Packages</h2></div></div></div><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-pf"></a>30.4. The OpenBSD Packet Filter (PF) and
      <acronym class="acronym">ALTQ</acronym></h2></div></div></div><a id="idp84112976" class="indexterm"></a><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-ipf"></a>30.5. The IPFILTER (IPF) Firewall</h2></div></div></div><a id="idp84115280" class="indexterm"></a><p></p></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="firewalls-ipfw"></a>30.6. IPFW</h2></div></div></div><a id="idp84125904" class="indexterm"></a><p></p></div></div><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="advanced-networking"></a>Chapitre 31. Administration réseau avancée</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#advanced-networking-synopsis">31.1. Synopsis</a></span></dt><dt><span class="sect1"><a href="#network-routing">31.2. Passerelles et routes</a></span></dt><dt><span class="sect1"><a href="#network-wireless">31.3. Réseau sans fil</a></span></dt><dt><span class="sect1"><a href="#network-bluetooth">31.4. Bluetooth</a></span></dt><dt><span class="sect1"><a href="#network-bridging">31.5. Bridging</a></span></dt><dt><span class="sect1"><a href="#network-diskless">31.6. Système sans disque dur</a></span></dt><dt><span class="sect1"><a href="#network-isdn">31.7. ISDN</a></span></dt><dt><span class="sect1"><a href="#network-natd">31.8. Translation d'adresses</a></span></dt><dt><span class="sect1"><a href="#network-plip">31.9. IP sur liaison parallèle (PLIP)</a></span></dt><dt><span class="sect1"><a href="#network-ipv6">31.10. IPv6</a></span></dt><dt><span class="sect1"><a href="#network-atm">31.11. ATM (<span class="quote">« <span class="quote">Asynchronous Transfer Mode</span> »</span>)</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="advanced-networking-synopsis"></a>31.1. Synopsis</h2></div></div></div><p>Ce chapitre abordera certains nombre de sujets réseau
      avancés.</p><p>Après la lecture de ce chapitre, vous
      connaîtrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les bases sur les passerelles et les routes.</p></li><li class="listitem"><p>Comment configurer les périphériques IEEE
	  802.11 et <span class="trademark">Bluetooth</span>®.</p></li><li class="listitem"><p>Comment utiliser FreeBSD en tant que pont
	  (&#8220;bridge&#8221;).</p></li><li class="listitem"><p>Comment configurer le démarrage via le
	  réseau pour une machine sans disque dur.</p></li><li class="listitem"><p>Comment configurer la translation d'adresse
	  réseau.</p></li><li class="listitem"><p>Comment connecter deux ordinateurs via PLIP.</p></li><li class="listitem"><p>Comment configurer l'IPv6 sur une machine FreeBSD.</p></li><li class="listitem"><p>Comment configurer ATM.</p></li></ul></div><p>Avant de lire ce chapitre, vous devrez:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comprendre les bases des procédures
	  <code class="filename">/etc/rc</code>.</p></li><li class="listitem"><p>Etre familier avec la terminologie réseau de
	  base.</p></li><li class="listitem"><p>Savoir comment configurer et installer un nouveau noyau
	  FreeBSD (<a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>).</p></li><li class="listitem"><p>Savoir comment installer des logiciels tierce-partie
	  (<a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a>).</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-routing"></a>31.2. Passerelles et routes</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Coranth</span> <span class="surname">Gryphon</span></span>. </span></div></div></div><a id="idp84158672" class="indexterm"></a><a id="idp84159184" class="indexterm"></a><a id="idp84159696" class="indexterm"></a><p>Pour qu'une machine soit en mesure d'en contacter une autre,
      il faut que soit mis en place un mécanisme qui
      décrive comment aller de l'une à l'autre.  C'est ce
      que l'on appelle le <em class="firstterm">routage</em>.  Une
      &#8220;route&#8221; est définie par une paire d'adresses:
      une &#8220;destination&#8221; et une &#8220;passerelle&#8221;.
      Cette paire signifie que pour atteindre cette
      <span class="emphasis"><em>destination</em></span>, vous devez passer par cette
      <span class="emphasis"><em>passerelle</em></span>.  Il y a trois sortes de
      destination: les machines individuelles, les sous-réseaux,
      et &#8220;default&#8221;&#8212;la destination par défaut.
      La route par défaut (&#8220;default route&#8221;) est
      utilisée lorsqu'aucune autre route n'est applicable.  Nous
      parlerons un peu plus des routes par défaut par la suite.
      Il existe également trois sortes de passerelles: les
      machines individuelles, les interfaces (aussi appelées
      &#8220;liens&#8221;), et les adresses Ethernet matérielles
      (adresses MAC).</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84190544"></a>31.2.1. Un exemple</h3></div></div></div><p>Pour illustrer différents aspects du routage,
	nous utiliserons l'exemple suivant, qui est produit par la
	commande <code class="command">netstat</code>:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Destination      Gateway            Flags     Refs     Use     Netif Expire

default          outside-gw         UGSc       37      418      ppp0
localhost        localhost          UH          0      181       lo0
test0            0:e0:b5:36:cf:4f   UHLW        5    63288       ed0     77
10.20.30.255     link#1             UHLW        1     2421
example.com      link#1             UC          0        0
host1            0:e0:a8:37:8:1e    UHLW        3     4601       lo0
host2            0:e0:a8:37:8:1e    UHLW        0        5       lo0 =&gt;
host2.example.com link#1             UC          0        0
224              link#1             UC          0        0</pre><a id="idp84192976" class="indexterm"></a><p>Les deux premières lignes définissent la
	route par défaut (dont nous parlerons dans la <a class="link" href="#network-routing-default" title="31.2.2. Routes par défaut">section suivante</a>) et la
	route <code class="systemitem">localhost</code>.</p><a id="idp84194768" class="indexterm"></a><p>L'interface (colonne <code class="literal">Netif</code>) qu'il est
	indiqué d'utiliser pour <code class="literal">localhost</code> est
	<code class="filename">lo0</code>, aussi appelée interface
	&#8220;loopback&#8221;&#8212;en boucle.  Ce qui veut dire que
	tout le trafic vers cette destination doit rester interne, au
	lieu d'être envoyé sur le réseau local,
	puisqu'il reviendra de toute façon à son point de
	départ.</p><a id="idp84196816" class="indexterm"></a><p>Ce qui se remarque ensuite, ce sont les adresses
	commençant par <code class="systemitem">0:e0:</code>.  Ce
	sont les adresses Ethernet matérielles, qui sont
	également connues sous le nom d'adresses MAC.  FreeBSD
	reconnaîtra automatiquement toute machine
	(<code class="systemitem">test0</code> dans l'exemple) sur le réseau
	local Ethernet et ajoutera une route vers cette machine,
	directement via l'interface Ethernet
	<code class="filename">ed0</code>.  Il y a aussi un délai
	(colonne <code class="literal">Expire</code>) associé à ce
	type de route, qui est utilisé si l'on entend plus parler
	de cette machine pendant un laps de temps précis.  Quand
	cela arrive, la route vers cette machine est automatiquement
	supprimée.  Ces machines sont identifiées par un
	mécanisme appelé RIP (&#8220;Routing Information
	Protocol&#8221;&#8212;protocole d'information de routage), qui
	met en place des routes vers les machines locales en
	déterminant le chemin le plus court.</p><a id="idp84200144" class="indexterm"></a><p>FreeBSD ajoutera également des routes de
	sous-réseau pour le sous-réseau local (<code class="systemitem">10.20.30.255</code> est l'adresse de diffusion
	pour le sous-réseau <code class="systemitem">10.20.30</code>, et <code class="systemitem">example.com</code> est le nom de domaine
	associé à ce sous-réseau).  La
	dénomination <code class="literal">link#1</code> fait
	référence à la première carte
	Ethernet de la machine.  Vous constaterez qu'il n'y a pas
	d'autre interface associée à ces routes.</p><p>Ces deux types de routes (vers les machines du
	réseau local et les sous-réseaux locaux) sont
	automatiquement configurés par un &#8220;daemon&#8221;
	appelé <span class="application">routed</span>.  S'il ne
	tourne pas, alors seules les routes définies comme
	statiques (i.e. explicitement définies)
	existeront.</p><p>La ligne <code class="literal">host1</code> fait
	référence à votre machine, qui est
	identifiée par l'adresse Ethernet.  Puisque nous sommes
	l'émetteur, FreeBSD sait qu'il faut utiliser l'interface
	en &#8220;boucle&#8221; (<code class="filename">lo0</code>)
	plutôt que d'envoyer les données sur l'interface
	Ethernet.</p><p>Les deux lignes <code class="literal">host2</code> montrent ce qui
	se passe quand on utilise un alias avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>
	(lisez la section sur l'Ethernet pour savoir pour quelles
	raisons on peut vouloir cela).  Le symbole
	<code class="literal">=&gt;</code> qui suit l'interface
	<code class="filename">lo0</code> indique que non seulement nous
	utilisons l'interface en &#8220;boucle&#8221; (puisque cette
	adresse correspond également à la machine
	locale), mais que c'est plus spécifiquement un alias.
	Ce type de route n'apparaît que sur la machine pour
	laquelle est défini l'alias; sur toutes les autres
	machines du réseau local il n'y aura q'une ligne
	<code class="literal">link#1</code> pour cette machine.</p><p>La dernière ligne (le sous-réseau
	destinataire <code class="systemitem">224</code>) concerne le
	multicasting (diffusion pour plusieurs destinataires), qui
	sera abordé dans une autre section.</p><p>Et enfin, diverses caractéristiques de chaque route
	sont indiquées dans la colonne <code class="literal">Flags</code>
	(indicateurs).  Ci-dessous, une courte table présente
	certains de ces indicateurs et leur signification:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>U</td><td>Active (&#8220;Up&#8221;): la route est
		active.</td></tr><tr><td>H</td><td>Machine (&#8220;Host&#8221;): la destination de
		la route est une machine.</td></tr><tr><td>G</td><td>Passerelle (&#8220;Gateway&#8221;): envoyer tout
		ce qui concerne cette destination sur la machine
		distante indiquée, qui déterminera
		à qui transmettre ensuite.</td></tr><tr><td>S</td><td>Statique (&#8220;Static&#8221;): cette route a
		été configurée manuellement et non
		pas générée automatiquement par le
		système.</td></tr><tr><td>C</td><td>Clone: génère une nouvelle route
		sur la base de celle-ci pour les machines auxquelles
		nous nous connectons.  Ce type de route est normalement
		utilisé pour les réseaux locaux.</td></tr><tr><td>W</td><td>Clonée (&#8220;WasCloned&#8221;): cette
		route a été auto-configurée (Clone)
		à partir d'une route pour le réseau
		local.</td></tr><tr><td>L</td><td>Lien (&#8220;Link&#8221;): la route fait
		référence à une adresse
		matérielle Ethernet.</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-routing-default"></a>31.2.2. Routes par défaut</h3></div></div></div><a id="idp84290384" class="indexterm"></a><p>Quand le système local doit établir une
	connexion avec une machine distante, il consulte la table de
	routage pour voir s'il existe déjà une route
	connue.  Si la machine distante appartient à un
	sous-réseau auquel le système sait se connecter
	(routes clonées), alors le système vérifie
	s'il peut se connecter via cette interface.</p><p>Si toutes les routes connues échouent, il reste
	alors au système une dernière option: la route
	par &#8220;défaut&#8221;.  Cette route est un type
	particulier de route passerelle (c'est
	généralement la seule du système), et est
	toujours marquée avec un <code class="literal">c</code> dans le
	champ des indicateurs.  Pour les machines du réseau
	local, cette passerelle est définie avec la machine qui
	est directement connectée au monde extérieur
	(que ce soit par une liaison PPP, DSL, cable, T1, ou toute
	autre interface réseau).</p><p>Si vous configurez la route par défaut sur une
	machine qui fonctionne comme passerelle vers le monde
	extérieur, alors la route par défaut sera la
	passerelle de votre Fournisseur d'Accès à
	Internet (FAI).</p><p>Examinons un exemple de route par défaut.  Voici
	une configuration classique:</p><div class="mediaobject"><img src="advanced-networking/net-routing.png" /></div><p>Les machines <code class="systemitem">Local1</code> et
	<code class="systemitem">Local2</code> sont sur votre site.
	<code class="systemitem">Local1</code> est connectée au serveur du FAI
	via une liaison PPP par modem.  Ce serveur PPP est
	connecté par l'intermédiaire d'un réseau
	local à un autre ordinateur passerelle relié au
	point d'entrée Internet du FAI.</p><p>Les routes par défaut sur chacune de vos machines
	seront:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Machine</th><th>Passerelle par défaut</th><th>Interface</th></tr></thead><tbody><tr><td>Local2</td><td>Local1</td><td>Ethernet</td></tr><tr><td>Local1</td><td>T1-GW</td><td>PPP</td></tr></tbody></table></div><p>Une question qui revient souvent est &#8220;Pourquoi
	(ou comment) définir <code class="systemitem">T1-GW</code> comme
	passerelle par défaut pour <code class="systemitem">Local1</code>,
	plutôt que le serveur du FAI auquel elle est
	connectée?&#8220;.</p><p>Rappelez-vous, puisque l'interface PPP utilise, de votre
	côté de la connexion, une adresse IP du
	réseau local du FAI, les routes vers toute autre
	machine du réseau local du FAI seront automatiquement
	générées.  Par conséquent vous
	savez déjà comment atteindre la machine
	<code class="systemitem">T1-GW</code>, il n'y a donc pas besoin
	d'étape intermédiaire qui passe par le serveur
	du FAI.</p><p>Il est habituel d'attribuer l'adresse <code class="systemitem">X.X.X.1</code> à la passerelle sur
	votre réseau local.  Donc (dans notre exemple), si
	votre espace d'adresse de classe C local était <code class="systemitem">10.20.30</code> et que votre FAI utilisait
	l'espace <code class="systemitem">10.9.9</code>, alors les
	routes par défaut seraient:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Machine</th><th>Route par défaut</th></tr></thead><tbody><tr><td>Local2 (10.20.30.2)</td><td>Local1 (10.20.30.1)</td></tr><tr><td>Local1 (10.20.30.1, 10.9.9.30)</td><td>T1-GW (10.9.9.1)</td></tr></tbody></table></div><p>Vous pouvez aisément définir la route par
	défaut via le fichier
	<code class="filename">/etc/rc.conf</code>.  Dans notre exemple, sur la
	machine <code class="systemitem">Local2</code>, nous avons ajouté la
	ligne suivante dans <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">defaultrouter="10.20.30.1"</pre><p>Il est également possible de faire directement cela
	à partir de la ligne de commande avec la commande
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add default 10.20.30.1</code></strong></pre><p>Pour plus d'informations sur la manipulation à la
	main des tables de routage réseau, consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84322640"></a>31.2.3. Machines sur deux réseaux</h3></div></div></div><a id="idp84323280" class="indexterm"></a><p>Il y a un autre type de configuration dont il faut parler,
	c'est celle d'une machine qui est connectée à deux
	réseaux différents.  Techniquement, toute machine
	servant de passerelle (comme dans l'exemple ci-dessus, en
	utilisant une connexion PPP) est une machine sur deux
	réseaux.  Mais ce terme n'est normalement utilisé
	que pour faire référence à une machine qui
	est sur deux réseaux locaux différents.</p><p>Selon le cas, la machine dispose de deux cartes Ethernet,
	ayant chacune une adresse sur des sous-réseaux
	séparés.  Alternativement, la machine peut ne
	disposer que d'une seule carte Ethernet, et utiliser des alias
	avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>.  Le premier cas correspond à
	l'utilisation de deux réseaux Ethernet physiquement
	séparés, le deuxième cas est
	employé s'il n'y a qu'un seul réseau physique
	mais deux sous-réseaux logiquement distincts.</p><p>Dans les deux cas, les tables de routage sont
	définies de telle sorte que chaque sous-réseau
	sache que cette machine est la passerelle (route entrante)
	vers l'autre sous-réseau.  Cette configuration,
	où la machine sert de routeur entre les deux
	sous-réseaux, est souvent utilisée quand il faut
	mettre en place un dispositif de sécurité:
	filtrage de paquets ou coupe-feu, dans l'une ou dans les deux
	directions.</p><p>Si vous voulez que cette machine transmette
	réellement les paquets entre les deux interfaces, vous
	devez demander à FreeBSD d'activer cette
	fonctionnalité.  Lisez la section suivante pour plus de
	détails sur comment faire cela.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-dedicated-router"></a>31.2.4. Mettre en place un routeur</h3></div></div></div><a id="idp84326992" class="indexterm"></a><p>Un routeur est un système qui transmet les paquets
	d'une interface à une autre.  Les standards de
	l'Internet et de bons principes d'ingénierie
	empêchent le projet FreeBSD d'activer cette fonction par
	défaut sous FreeBSD.  Vous pouvez l'activer en
	positionnant à <code class="literal">YES</code> la variable
	suivante du fichier <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a>:</p><pre class="programlisting">gateway_enable=YES          # Set to YES if this host will be a gateway</pre><p>Cette option fixera la variable <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>
	<code class="varname">net.inet.ip.forwarding</code> à la valeur
	<code class="literal">1</code>.  Si vous devez arrêter
	temporairement le routage, vous pouvez positionner la variable
	momentanément à <code class="literal">0</code>.</p><p>Votre nouveau routeur aura besoin de route pour savoir
	où envoyer le trafic.  Si votre réseau est
	suffisamment simple vous pouvez utiliser des routes statiques.
	FreeBSD est également fourni avec le &#8220;daemon&#8221;
	de routage BSD standard <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=routed&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">routed</span>(8)</span></a>, qui comprend et
	utilise les protocoles RIP (version 1 est 2) et IRDP.  Le
	support de BGP v4, OSPF v2, et d'autres protocoles de routage
	sophistiqué est disponible avec le logiciel <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/zebra/pkg-descr">net/zebra</a>.  Des produits commerciaux
	comme <span class="application"><span class="trademark">GateD</span>®</span> sont également
	disponibles comme solutions avancées de routage.</p><a id="idp84338128" class="indexterm"></a><a id="idp84338640" class="indexterm"></a><a id="idp84339152" class="indexterm"></a></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84339792"></a>31.2.5. Configurarion des routes statiques</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Al</span> <span class="surname">Hoang</span></span>. </span></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84346704"></a>31.2.5.1. Configuration manuelle</h4></div></div></div><p>Supposons que nous avons un réseau comme
	  celui-ci:</p><div class="mediaobject"><img src="advanced-networking/static-routes.png" /></div><p>Dans ce scénario, <code class="systemitem">RouteurA</code> est
	  notre machine FreeBSD qui joue le rôle de routeur pour
	  l'Internet.  Elle a une route par défaut vers <code class="systemitem">10.0.0.1</code> qui permet de se connecter
	  au reste du monde extérieur.  Nous supposerons que la
	  machine <code class="systemitem">RouteurB</code> est correctement
	  configurée et sait comment transmettre vers n'importe
	  quelle destination (D'après notre schéma c'est
	  relativement simple.  Ajoutez juste une route par
	  défaut sur <code class="systemitem">RouteurB</code> en utilisant
	  <code class="systemitem">192.168.1.1</code> comme
	  passerelle).</p><p>Si nous regardons la table de routage de
	  <code class="systemitem">RouteurA</code> nous verrions quelque chose
	  comme:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>netstat -nr</code></strong>
Routing tables

Internet:
Destination        Gateway            Flags    Refs      Use  Netif  Expire
default            10.0.0.1           UGS         0    49378    xl0
127.0.0.1          127.0.0.1          UH          0        6    lo0
10.0.0/24          link#1             UC          0        0    xl0
192.168.1/24       link#2             UC          0        0    xl1</pre><p>Avec la table de routage actuelle,
	  <code class="systemitem">RouteurA</code> ne sera pas en mesure d'atteindre
	  notre réseau interne 2.  Elle ne dispose pas de route
	  pour <code class="systemitem">192.168.2.0/24</code>.  Une
	  manière de résoudre cela est d'ajouter
	  manuellement la route.  La commande suivante ajouterait le
	  réseau interne 2 à la table de routage de
	  <code class="systemitem">RouteurA</code> en utilisant <code class="systemitem">192.168.1.2</code> comme point
	  intermédiaire:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>Maintenant <code class="systemitem">RouteurA</code> peut joindre
	  n'importe quelle machine du réseau <code class="systemitem">192.168.2.0/24</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84358736"></a>31.2.5.2. Configuration persistante</h4></div></div></div><p>L'exemple précédent est parfait pour
	  configurer une route statique sur un système en
	  fonctionnement.  Cependant, le problème est que
	  l'information de routage ne sera pas conservée si
	  vous redémarrez votre machine FreeBSD.  L'addition d'une
	  route statique doit se faire dans votre fichier
	  <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting"># Add Internal Net 2 as a static route
static_routes="internalnet2"
route_internalnet2="-net 192.168.2.0/24 192.168.1.2"</pre><p>La variable <code class="literal">static_routes</code> est une
	  liste de chaîne de caractères
	  séparées par une espace.  Chaque chaîne
	  fait référence à un nom de route.  Dans
	  notre exemple nous avons qu'une seule chaîne dans
	  <code class="literal">static_routes</code>.  Cette chaîne est
	  <em class="replaceable"><code>internalnet2</code></em>.  Nous ajoutons
	  ensuite une variable de configuration appelée
	  <code class="literal">route_internalnet2</code>
	  dans laquelle nous mettons tous les paramètres de
	  configuration que nous passerions à la commande
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=route&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">route</span>(8)</span></a>.  Pour nous exemple précédent
	  nous aurions utilisé la commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -net 192.168.2.0/24 192.168.1.2</code></strong></pre><p>nous avons donc besoin de <code class="literal">"-net 192.168.2.0/24
	    192.168.1.2"</code>.</p><p>Comme cela a été précisé,
	  nous pouvons avoir plus d'une chaîne dans la variable
	  <code class="literal">static_routes</code>.  Cela nous permet de
	  créer plusieurs routes statiques.  Les lignes
	  suivantes donnent un exemple d'ajout de routes statiques
	  pour les réseaux <code class="systemitem">192.168.0.0/24</code> et <code class="systemitem">192.168.1.0/24</code> sur un routeur
	  imaginaire:</p><pre class="programlisting">static_routes="net1 net2"
route_net1="-net 192.168.0.0/24 192.168.0.1"
route_net2="-net 192.168.1.0/24 192.168.1.1"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84371792"></a>31.2.6. Propagation de route</h3></div></div></div><a id="idp84372432" class="indexterm"></a><p>Nous avons déjà expliqué comment
	définir nos routes vers le monde extérieur, mais
	pas comment le monde extérieur apprend à nous
	localiser.</p><p>Nous savons déjà que les tables de routages
	peuvent être renseignées pour que tout le trafic
	pour un espace d'adresses donné (dans nos exemples, un
	sous-réseau de classe C) soit envoyé à
	une machine précise de ce réseau, qui
	transmettra les paquets entrants.</p><p>Lorsqu'il attribue un espace d'adresses à votre
	site, votre fournisseur d'accès définira ses
	tables de routage de sorte que tout le trafic destiné
	à votre sous-réseau vous soit envoyé sur
	votre liaison PPP.  Mais comment les sites à l'autre
	bout du pays savent-ils qu'ils doivent passer par votre
	fournisseur d'accès?</p><p>Il existe un mécanisme (assez semblable au
	système d'information distribué du DNS) qui
	conserve un enregistrement de tous les espaces d'adresses
	affectés, et définit leur point de connexion
	à la dorsale Internet (&#8220;backbone&#8221;).  La
	&#8220;dorsale&#8221; comprend les liaisons principales qui
	véhiculent le trafic Internet à travers le pays
	et le monde entier.  Chaque machine de la dorsale dispose
	d'une copie de l'ensemble des tables maîtresses qui
	aiguillent le trafic pour un réseau donné vers
	le transporteur correspondant de la dorsale, et de là
	par l'intermédiaire de fournisseurs d'accès
	successifs, jusqu'à atteindre votre
	réseau.</p><p>C'est le rôle de votre fournisseur d'accès
	d'annoncer aux sites de la dorsale qu'il est le point de
	connexion (et par conséquent la route entrante) pour
	votre site.  C'est ce que l'on appelle la propagation de
	route.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84375120"></a>31.2.7. En cas de problème</h3></div></div></div><a id="idp84375760" class="indexterm"></a><p>Il se peut qu'il y ait parfois un problème avec la
	propagation de route et que certains sites ne puissent vous
	atteindre.  La commande probablement la plus utile pour
	déterminer où une route est défaillante est
	la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>.  Elle est également utile
	si vous n'arrivez pas à vous connecter à une
	machine distante (i.e.  lorsque <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>
	échoue).</p><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a> prend comme
	paramètre le nom de la machine distante avec laquelle
	vous essayez d'établir une connexion.  Elle vous
	donnera la liste de passerelles intermédiaires
	jusqu'à la machine cible, ou jusqu'à ce qu'il
	n'y ait plus de connexion.</p><p>Pour plus d'informations, consultez la page de manuel de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=traceroute&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">traceroute</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84381008"></a>31.2.8. Routage multicast</h3></div></div></div><a id="idp84381648" class="indexterm"></a><a id="idp84390736" class="indexterm"></a><p>FreeBSD supporte nativement les applications et le routage
	multicast (diffusion pour plusieurs destinataires).  Les
	applications multicast ne nécessitent pas de
	configuration spécifique de FreeBSD,
	généralement, elles fonctionneront directement.
	Le routage multicast demande à ce que le support soit
	compilé dans le noyau:</p><pre class="programlisting">options MROUTING</pre><p>De plus, le &#8220;daemon&#8221; de routage multicast,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a> doit être configuré par
	l'intermédiaire du fichier
	<code class="filename">/etc/mrouted.conf</code> pour mettre en place
	des tunnels et le protocole <acronym class="acronym">DVMRP</acronym>.  Plus de détails sur
	la configuration du routage multicast peuvent être
	trouvés dans la page de manuel de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mrouted&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mrouted</span>(8)</span></a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-wireless"></a>31.3. Réseau sans fil</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Eric</span> <span class="surname">Anderson</span></span>. </span></div></div></div><a id="idp84398672" class="indexterm"></a><a id="idp84399184" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84400336"></a>31.3.1. Introduction</h3></div></div></div><p>Il peut être très utile de pouvoir utiliser
	un micro-ordinateur sans le désagrément
	d'être constamment relié à un câble
	réseau.  FreeBSD peut être utilisé comme
	client sans fil, et même comme &#8220;point
	d'accès&#8221; sans fil.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84401488"></a>31.3.2. Modes de fonctionnement des systèmes sans
	fils</h3></div></div></div><p>Il existe deux manières différentes de
	configurer les périphériques sans fil 802.11:
	les modes BSS et IBSS.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84402512"></a>31.3.2.1. Mode BSS</h4></div></div></div><p>Le mode BSS est le mode généralement
	  utilisé.  Le mode BSS est également
	  appelé mode infrastructure.  Dans ce mode, plusieurs
	  points d'accès sans fils sont connectés
	  à un réseau câblé.  Chaque
	  réseau sans fil possède son propre nom.  Ce
	  nom est ce que l'on appelle le &#8220;SSID&#8221; du
	  réseau.</p><p>Les clients sans fils se connectent à ces points
	  d'accès sans fils.  La norme IEEE 802.11
	  définie le protocole que les réseaux sans fils
	  utilisent pour les connexions.  Un client sans fil peut
	  être attaché à un réseau
	  particulier quand un SSID est fixé.  Un client peut
	  s'attacher à n'importe quel réseau en ne
	  définissant pas explicitement de SSID.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84404048"></a>31.3.2.2. Mode IBSS</h4></div></div></div><p>Le mode IBSS, également appelé mode
	  &#8220;ad-hoc&#8221;, est conçu pour les connexions
	  point à point.  Il existe en fait deux types de mode
	  ad-hoc.  Le premier est le mode IBSS, également
	  appelé mode ad-hoc ou IEEE ad-hoc.  Ce mode est
	  défini par les normes IEEE 802.11.  Le
	  deuxième mode est appelé ad-hoc démo ou
	  encore mode ad-hoc Lucent (et parfois, ce qui prête
	  à confusion, mode ad-hoc).  C'est l'ancien mode
	  ad-hoc pré-standard 802.11 et ne devrait être
	  utilisé qu'avec d'anciennes installations.  Nous ne
	  parlerons pas des modes ad-hoc dans ce qui suit.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84405328"></a>31.3.3. Mode infrastructure</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84405968"></a>31.3.3.1. Points d'accès</h4></div></div></div><p>Un point d'accès est un
	  périphérique sans fil qui permet à un
	  ou plusieurs clients sans fils d'utiliser ce
	  périphérique comme un hub.  Quand ils
	  utilisent un point d'accès, tous les clients
	  communiquent par l'intermédiaire de ce point
	  d'accès.  Plusieurs points d'accès sont
	  souvent utilisés pour couvrir
	  l'intégralité d'une zone géographique
	  comme une maison, une entreprise, ou un parc avec un
	  réseau sans fil.</p><p>Les points d'accès ont généralement
	  plusieurs connexions réseaux: la carte réseaux
	  sans fil, et une ou plusieurs cartes réseaux Ethernet
	  pour les connexions avec le reste du réseau.</p><p>Les points d'accès peuvent être
	  achetés tout fait, ou vous pouvez construire le votre
	  avec FreeBSD et une carte réseau sans fil
	  supportée.  De nombreux constructeurs proposent des
	  points d'accès et des cartes réseaux sans fils
	  avec diverses fonctionnalités.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84408016"></a>31.3.3.2. Construire un point d'accès avec FreeBSD</h4></div></div></div><a id="idp84408656" class="indexterm"></a><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84409808"></a>31.3.3.2.1. Pré-requis</h5></div></div></div><p>En vue de mettre en place un point d'accès sans
	    fil sous FreeBSD, vous avez besoin d'une carte réseau
	    sans fil compatible.  Actuellement seule les cartes
	    basées sur le circuit Prism sont supportées.
	    Vous aurez également besoin d'une carte
	    réseau câblée supportée par
	    FreeBSD (cela ne devrait pas être difficile à
	    trouver, FreeBSD supporte de nombreuses cartes).  Dans le
	    cadre de cette section, nous supposerons que le trafic
	    passera par un pont entre la carte sans fil et le
	    réseau relié à la carte réseau
	    classique.</p><p>Le mode point d'accès implémenté
	    par FreeBSD fonctionne mieux avec certaines versions de
	    firmware.  Les cartes utilisant un circuit Prism 2
	    devraient utiliser un firmware 1.3.4 ou plus
	    récent.  Les cartes Prism 2.5 et Prism 3 devraient
	    utiliser la version 1.4.9.  Des versions de firmware plus
	    anciennes pourront ne pas fonctionner correctement.
	    Actuellement, la seule manière de mettre à
	    jour vos cartes est d'utiliser les outils de mise à
	    jour du firmware pour <span class="trademark">Windows</span>® disponibles auprès
	    du constructeur de votre carte.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84411984"></a>31.3.3.2.2. Configuration</h5></div></div></div><p>Assurez-vous tout d'abord que votre système
	    voit la carte réseau sans fil:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
wi0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
	inet6 fe80::202:2dff:fe2d:c938%wi0 prefixlen 64 scopeid 0x7
	inet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255
	ether 00:09:2d:2d:c9:50
	media: IEEE 802.11 Wireless Ethernet autoselect (DS/2Mbps)
	status: no carrier
	ssid ""
	stationname "FreeBSD Wireless node"
	channel 10 authmode OPEN powersavemode OFF powersavesleep 100
	wepmode OFF weptxkey 1</pre><p>Ne vous préoccupez pas des détails,
	    verifiez juste que s'affiche quelque chose qui vous
	    indique qu'une carte réseau sans fil est
	    installée.  Si vous avez des problèmes
	    à voir l'interface réseau sans fil
	    correspondante, et que vous utilisez une carte de type PC
	    Card, vous devriez consultez les pages de manuel
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pccardc&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pccardc</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pccardd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pccardd</span>(8)</span></a> pour plus
	    d'information.</p><p>Ensuite, vous devrez charger un module afin de mettre
	    en place la partie de FreeBSD faisant office de pont pour le
	    point d'accès.  Pour charger le module
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a>, exécutez la commande
	    suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload bridge</code></strong></pre><p>Vous ne devriez pas voir apparaître de message
	    d'erreur lors du chargement du module.  Si ce n'est pas le
	    cas, vous devrez peut-être compiler le support
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a> dans votre noyau.  La section sur le <a class="link" href="#network-bridging" title="31.5. Bridging">Bridging</a> de ce manuel
	    devrait pouvoir vous aider dans cette tâche.</p><p>Maintenant que cette partie est assurée, nous
	    devons dire à FreeBSD entre quelles interface le pont
	    doit être installé.  Nous effectuons cette
	    configuration en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sysctl&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sysctl</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge.enable=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge.config="wi0 xl0"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding=1</code></strong></pre><p>Sous les versions antérieures à la 5.2,
	    vous devez utiliser à la place les options
	    suivantes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge=1</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.link.ether.bridge_cfg="wi0,xl0"</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>sysctl net.inet.ip.forwarding=1</code></strong></pre><p>Il est maintenant possible de configurer la carte.  La
	    commande suivante positionnera la carte en mode point
	    d'accès:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 ssid my_net channel 11 media DS/11Mbps mediaopt hostap up stationname "FreeBSD AP"</code></strong></pre><p>La ligne <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> active l'interface
	    <code class="filename">wi0</code>, fixe son paramètre
	    SSID à la valeur <em class="replaceable"><code>my_net</code></em>,
	    et fixe le nom de station à <em class="replaceable"><code>FreeBSD
	    AP</code></em>.  L'option <code class="option">media
	    DS/11Mbps</code> positionne la carte dans le mode 11Mbps
	    et est nécessaire pour que le paramètre
	    <code class="option">mediaopt</code> soit pris en compte.  L'option
	    <code class="option">mediaopt hostap</code> place l'interface dans le
	    mode point d'accès.  L'option <code class="option">channel
	    11</code> fixe le canal 802.11b à employer.  La
	    page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a> donne les options de
	    canaux valides en fonction de votre zone
	    géographique.</p><p>Vous devez maintenant disposer d'un point
	    d'accès opérationnel et en fonctionnement.
	    Vous êtes encouragés à lire les pages
	    de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>, et
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a> pour plus d'amples informations.</p><p>Il est également conseillé de lire la
	    section qui suit sur le chiffrage.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84448080"></a>31.3.3.2.3. Information d'état</h5></div></div></div><p>Une fois que le point d'accès est
	    configuré et opérationnel, les
	    opérateurs voudront voir quels clients sont
	    associés avec le point d'accès.  A n'importe
	    quel instant, l'opérateur pourra taper:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>wicontrol -l</code></strong>
1 station:
00:09:b7:7b:9d:16  asid=04c0, flags=3&lt;ASSOC,AUTH&gt;, caps=1&lt;ESS&gt;, rates=f&lt;1M,2M,5.5M,11M&gt;, sig=38/15</pre><p>Ceci nous montre qu'une station est associée,
	    ainsi que son paramétrage.  Les informations
	    indiquées concernant le signal devraient être
	    utilisées uniquement comme une indication relative
	    sur sa puissance.  Sa conversion en dBm ou tout autre
	    unité varie en fonction des différentes
	    versions de firmware.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84450768"></a>31.3.3.3. Clients</h4></div></div></div><p>Un client sans fil est un système qui se connecte
	  à un point d'accès ou un autre client
	  directement.</p><p>Typiquement, les clients sans fils disposent d'une seule
	  interface réseau, la carte réseau sans
	  fil.</p><p>Il existe quelques manières différentes de
	  configurer un client sans fil.  Elles sont basées sur
	  les différents modes sans fils,
	  généralement les modes BSS (mode
	  infrastructure, qui nécessite un point
	  d'accès), et IBSS (mode ad-hoc, ou mode point
	  à point).  Dans notre exemple, nous utiliserons le
	  plus populaire des deux, le mode BSS, pour discuter avec un
	  point d'accès.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84456784"></a>31.3.3.3.1. Pré-requis</h5></div></div></div><p>Il n'y a qu'un seul pré-requis pour configurer
	    FreeBSD comme client sans fil.  Vous aurez besoin d'une carte
	    sans fil supportée par FreeBSD.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84457936"></a>31.3.3.3.2. Configurer un client sans fil FreeBSD</h5></div></div></div><p>Avant de commencer, vous aurez besoin de
	    connaître certaines choses concernant le
	    réseau sans fil auquel vous désirez vous
	    connecter.  Dans cet exemple, nous rejoignons un
	    réseau ayant pour nom
	    <em class="replaceable"><code>my_net</code></em>, et avec le chiffrage
	    des liaisons désactivé.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans cet exemple, nous n'utilisons pas le chiffrage
	      des liaisons, ce qui est une situation dangereuse.  Dans
	      la section suivante, nous verrons comment activer le
	      chiffrage, pourquoi il est important de le faire, et
	      pourquoi certaines technologies de chiffrage ne vous
	      protégerons pas complètement.</p></div><p>Assurez-vous que votre carte est reconnue par
	    FreeBSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig -a</code></strong>
wi0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
	inet6 fe80::202:2dff:fe2d:c938%wi0 prefixlen 64 scopeid 0x7
	inet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255
	ether 00:09:2d:2d:c9:50
	media: IEEE 802.11 Wireless Ethernet autoselect (DS/2Mbps)
	status: no carrier
	ssid ""
	stationname "FreeBSD Wireless node"
	channel 10 authmode OPEN powersavemode OFF powersavesleep 100
	wepmode OFF weptxkey 1</pre><p>Maintenant, nous pouvons configurer la carte suivant
	    les paramètres de notre réseau:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet 192.168.0.20 netmask 255.255.255.0 ssid my_net</code></strong></pre><p>Remplacez <code class="systemitem">192.168.0.20</code>
	    et <code class="systemitem">255.255.255.0</code> avec une
	    adresse IP ainsi qu'un masque de sous-réseau
	    valides de votre réseau câblé.
	    Rappelez-vous, notre point d'accès joue le
	    rôle de pont entre le réseau sans fil et le
	    réseau câblé, il apparaîtra aux
	    autres cartes sur votre réseau que vous êtes
	    sur le même réseau câblé.</p><p>Une fois cela effectué, vous devriez être
	    en mesure d'utiliser <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a> pour atteindre les
	    machines sur le réseau câblé de la
	    même façon que si vous étiez
	    connecté en utilisant un câble réseau
	    standard.</p><p>Si vous rencontrez des problèmes avec votre
	    connexion sans fil, vérifiez que vous êtes
	    associé&#8212;&#8220;associated&#8221;
	    (connecté) avec le point d'accès:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0</code></strong></pre><p>devrait retourner un certain nombre d'information; et
	    vous devriez voir s'afficher:</p><pre class="screen">status: associated</pre><p>Si <code class="literal">associated</code> n'est pas
	    affiché, alors il se peut que vous soyez hors de
	    portée du point d'accès, que vous ayez le
	    chiffrage activé, ou peut-être que vous ayez
	    un problème de configuration.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84468560"></a>31.3.3.4. Chiffrement</h4></div></div></div><a id="idp84469200" class="indexterm"></a><p>L'utilisation du chiffrement sur un réseau sans
	  fil est important parce que vous n'avez plus la
	  possibilité de conserver le réseau dans une
	  zone protégée.  Vos données sans fil
	  seront diffusées dans tout le voisinage, et toute
	  personne désirant y accéder pourra le faire.
	  C'est ici que le chiffrement entre en jeu.  En chiffrant les
	  données qui sont envoyées par les ondes, vous
	  rendez plus difficile l'interception de celles-ci par
	  quiconque d'intéressé.</p><p>Les deux méthodes les plus courantes de chiffrage
	  des données entre un client et un point
	  d'accès sont le protocol WEP et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a>.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84471888"></a>31.3.3.4.1. WEP</h5></div></div></div><a id="idp84476752" class="indexterm"></a><p>WEP est l'abbrévation de &#8220;Wired
	    Equivalency Protocol&#8220;.  Le protocole de chiffrage
	    WEP est une tentative de rendre les réseaux sans fils
	    aussi sûrs et sécurisés qu'un
	    réseau filaire.  Malheureusement, il a
	    été craqué, et est relativement
	    simple à déjouer.  Cela signifie que l'on ne
	    doit pas lui faire confiance quand il est
	    nécessaire de chiffrer des données
	    sensibles.</p><p>Cela reste mieux que rien du tout, utilisez ce qui
	    suit pour activer WEP sur votre nouveau point
	    d'accès FreeBSD:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet up ssid my_net wepmode on wepkey 0x1234567890 media DS/11Mbps mediaopt hostap</code></strong></pre><p>Et vous pouvez activer WEP sur un client avec la
	    commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig wi0 inet 192.168.0.20 netmask 255.255.255.0 ssid my_net wepmode on wepkey 0x1234567890</code></strong></pre><p>Notez que vous devriez remplacer
	    <em class="replaceable"><code>0x1234567890</code></em> par une clé
	    plus personnelle.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84481104"></a>31.3.3.4.2. IPsec</h5></div></div></div><p><a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> est un outil bien plus puissant et
	    robuste pour chiffrer des données sur un
	    réseau.  C'est la méthode à
	    préférer pour chiffrer les données sur un
	    réseau sans fil.  Vous pouvez obtenir plus de
	    détails concernant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipsec&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ipsec</span>(4)</span></a> et comment
	    l'implémenter dans la section <a class="link" href="#ipsec" title="15.10. IPsec">IPsec</a> de ce manuel.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84484304"></a>31.3.3.5. Outils</h4></div></div></div><p>Il existe un petit nombre d'outils disponibles pour le
	  débogage et la configuration d'un réseau sans
	  fil, et nous tenterons ici d'en décrire certains
	  ainsi que leurs fonctionnalités.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84489552"></a>31.3.3.5.1. La suite
	    <span class="application">bsd-airtools</span></h5></div></div></div><p>La suite <span class="application">bsd-airtools</span> est
	    une trousse à outils complète qui comprend
	    des outils d'audit sans fil pour le craquage du
	    système WEP, la détection de points
	    d'accès, etc.</p><p>Les utilitaires
	    <span class="application">bsd-airtools</span> peuvent être
	    installés à partir du logiciel porté
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net-mgmt/bsd-airtools/pkg-descr">net-mgmt/bsd-airtools</a>.  Des
	    instructions sur l'installation des logiciels
	    portés peuvent être trouvées dans le
	    <a class="xref" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">Chapitre 5, <em>Installer des applications: les logiciels pré-compilés
    et les logiciels portés</em></a> de ce manuel.</p><p>Le programme <code class="command">dstumbler</code> est l'outil
	    qui permet la recherche de points d'accès et la
	    mesure du rapport signal sur bruit.  Si vous avez des
	    difficultés à mettre en place et à
	    faire fonctionner votre point d'accès,
	    <code class="command">dstumbler</code> pourra vous aider dans ce
	    sens.</p><p>Pour tester la sécurité de votre
	    réseau sans fil, vous pouvez choisir d'employer les
	    outils &#8220;dweputils&#8221;
	    (<code class="command">dwepcrack</code>, <code class="command">dwepdump</code>
	    et <code class="command">dwepkeygen</code>) pour vous aider à
	    déterminer si WEP répond à vos
	    besoins en matière de sécurité au
	    niveau de votre réseau sans fil.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84495568"></a>31.3.3.5.2. Les utilitaires <code class="command">wicontrol</code>,
	    <code class="command">ancontrol</code> et
	    <code class="command">raycontrol</code></h5></div></div></div><p>Il existe des outils que vous pouvez utiliser pour
	    contrôler le comportement de votre carte
	    réseau sans fil sur le réseau sans fil.
	    Dans les exemples précédents, nous avons
	    choisi d'employer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a> puisque notre carte
	    sans fil utilise l'interface <code class="filename">wi0</code>.
	    Si vous avez une carte sans fil Cisco, elle
	    apparaîtrait comme <code class="filename">an0</code>, et
	    vous utiliseriez alors le programme
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ancontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ancontrol</span>(8)</span></a>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84500176"></a>31.3.3.5.3. La commande <code class="command">ifconfig</code></h5></div></div></div><a id="idp84501072" class="indexterm"></a><p>La commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> propose plusieurs options
	    identiques à celles de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wicontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">wicontrol</span>(8)</span></a>, cependant
	    il manque quelques options.  Consultez la page de manuel
	    d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a> pour les différents
	    paramètres et options en ligne de commande.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84504656"></a>31.3.3.6. Cartes supportées</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84505424"></a>31.3.3.6.1. Points d'accès</h5></div></div></div><p>Les seules cartes actuellement supportées pour
	    le mode BSS (points d'accès) sont celles
	    basées sur les circuits Prism 2, 2.5, ou 3.  Pour
	    une liste complète, consultez la page de manuel de
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=wi&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">wi</span>(4)</span></a>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84507344"></a>31.3.3.6.2. Clients 802.11b</h5></div></div></div><p>Presque toutes les cartes réseaux sans fil
	    802.11b sont supportées sous FreeBSD.  La plupart des
	    cartes basées sur les circuits Prism, Spectrum24,
	    Hermes, Aironet, et Raylink fonctionneront dans le mode
	    IBSS (ad-hoc, point à point, et BSS).</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84508496"></a>31.3.3.6.3. Clients 802.11a &amp; 802.11g</h5></div></div></div><p>Le pilote de périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ath&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ath</span>(4)</span></a>
	    supporte les normes 802.11a et 802.11g.  Si votre carte
	    est basée sur un circuit Atheros, vous devriez
	    être en mesure d'utiliser ce pilote.</p><p>Malheureusement il y a toujours de nombreux fabricants
	    qui ne fournissent pas à la communauté des
	    logiciels libres les informations concernant les pilotes
	    pour leurs cartes considérant de telles
	    informations comme des secrets industriels.  Par
	    conséquent, il ne reste aux développeurs de
	    FreeBSD et d'autres systèmes d'exploitation libres que
	    deux choix: développer les pilotes en passant par
	    un long et pénible processus de <span class="quote">« <span class="quote">reverse
	    engineering</span> »</span> ou utiliser les pilotes binaires
	    existants disponibles pour la plateforme
	    <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  La plupart des développeurs,
	    y compris ceux impliqués dans FreeBSD, ont choisi
	    cette dernière approche.</p><p>Grâce aux contributions de Bill Paul (wpaul),
	    depuis FreeBSD 5.3-RELEASE, il existe un support
	    <span class="quote">« <span class="quote">natif</span> »</span> pour la spécification
	    d'interface des pilotes de périphérique
	    réseau (Network Driver Interface
	    Specification&#8212;NDIS).  Le NDISulator FreeBSD (connu
	    également sous le nom de Project Evil) prend un
	    pilote binaire réseau <span class="trademark">Windows</span>® et lui fait penser
	    qu'il est en train de tourner sous <span class="trademark">Windows</span>®.  Cette
	    fonctionnalité est relativement nouvelle, mais
	    semble fonctionner correctement dans la plupart des
	    tests.</p><a id="idp84518096" class="indexterm"></a><a id="idp84518608" class="indexterm"></a><a id="idp84519120" class="indexterm"></a><a id="idp84520016" class="indexterm"></a><a id="idp84520528" class="indexterm"></a><a id="idp84521424" class="indexterm"></a><p>Pour utiliser le NDISulator, vous avez besoin de trois
	    choses:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>les sources du noyau;</p></li><li class="listitem"><p>le pilote binaire <span class="trademark">Windows</span>® XP
		(extension <code class="filename">.SYS</code>);</p></li><li class="listitem"><p>le fichier de configuration du pilote <span class="trademark">Windows</span>® XP
		(extension <code class="filename">.INF</code>).</p></li></ol></div><p>Vous aurez besoin de compiler le module d'interface du
	    mini-pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndis&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ndis</span>(4)</span></a>.  En tant que
	    <code class="systemitem">root</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/modules/ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>make &amp;&amp; make install</code></strong></pre><p>Recherchez les fichiers spécifiques à
	    votre carte.  Généralement, ils peuvent
	    être trouvés sur les CDs livrés avec
	    la carte ou sur le site du fabricant.  Dans les exemples
	    qui suivent nous utiliseront les fichiers
	    <code class="filename">W32DRIVER.SYS</code> et
	    <code class="filename">W32DRIVER.INF</code>.</p><p>L'étape suivante est de compiler le pilote
	    binaire dans un module chargeable du noyau.  Pour
	    effectuer cela, en tant que <code class="systemitem">root</code>,
	    rendez vous dans le répertoire du module
	    <code class="filename">if_ndis</code> et copiez-y les fichiers du
	    pilote <span class="trademark">Windows</span>®:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/src/sys/modules/if_ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp /path/to/driver/W32DRIVER.SYS ./</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cp /path/to/driver/W32DRIVER.INF ./</code></strong></pre><p>Nous utiliserons maintenant l'utilitaire
	    <code class="command">ndiscvt</code> pour générer le
	    fichier d'entête
	    <code class="filename">ndis_driver_data.h</code> du pilote pour la
	    compilation du module:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ndiscvt -i W32DRIVER.INF -s W32DRIVER.SYS -o ndis_driver_data.h</code></strong></pre><p>Les options <code class="option">-i</code> et <code class="option">-s</code>
	    précisent respectivement le fichier de
	    configuration et le fichier binaire.  Nous utilisons
	    l'option <code class="option">-o ndis_driver_data.h</code> car le
	    <code class="filename">Makefile</code> recherchera ce fichier lors
	    de la compilation du module.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certains pilotes <span class="trademark">Windows</span>® nécessitent des
	      fichiers supplémentaires pour fonctionner.  Vous
	      pouvez les ajouter avec <code class="command">ndiscvt</code> en
	      utilisant l'option <code class="option">-f</code>.  Consultez la page
	      de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ndiscvt&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ndiscvt</span>(8)</span></a> pour plus d'information.</p></div><p>Nous pouvons enfin compiler et installer le module du
	    pilote:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>make &amp;&amp; make install</code></strong></pre><p>Pour utiliser le pilote, vous devez charger les
	    modules appropriés:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ndis</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>kldload if_ndis</code></strong></pre><p>La première commande charge le pilote
	    d'interface NDIS, la seconde charge l'interface
	    réseau.  Contrôlez la sortie de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dmesg&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">dmesg</span>(8)</span></a>
	    à la recherche d'une quelconque erreur au
	    chargement.  Si tout s'est bien passé, vous devriez
	    obtenir une sortie ressemblant à ce qui
	    suit:</p><pre class="screen">ndis0: &lt;Wireless-G PCI Adapter&gt; mem 0xf4100000-0xf4101fff irq 3 at device 8.0 on pci1
      ndis0: NDIS API version: 5.0
      ndis0: Ethernet address: 0a:b1:2c:d3:4e:f5
      ndis0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps
      ndis0: 11g rates: 6Mbps 9Mbps 12Mbps 18Mbps 36Mbps 48Mbps 54Mbps</pre><p>A partir de là, vous pouvez traiter le
	    périphérique <code class="filename">ndis0</code>
	    comme n'importe quel périphérique sans fil
	    (e.g. <code class="filename">wi0</code>) et consulter les
	    premières sections de ce chapitre.</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-bluetooth"></a>31.4. Bluetooth</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Pav</span> <span class="surname">Lucistnik</span></span>. </span></div></div></div><a id="idp84581968" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84582480"></a>31.4.1. Introduction</h3></div></div></div><p><span class="trademark">Bluetooth</span>® est une technologie sans fil pour créer
	des réseaux personnels sans fils fonctionnant dans la
	bande 2.4 GHz ne nécessitant pas d'autorisation, avec
	une portée de 10 mètres.  Les réseaux
	étant généralement composés de
	périphériques nomades comme les
	téléphones portables, les assistants personnels
	et les ordinateurs portables.  Contrairement à l'autre
	technologie sans fil, Wi-Fi, <span class="trademark">Bluetooth</span>® offre un niveau plus
	élevé de profils de service, par exemple des
	serveurs de fichiers semblables à FTP, &#8220;file
	pushing&#8221;, transport de la voix, émulation de
	lignes séries, et bien plus.</p><p>La pile <span class="trademark">Bluetooth</span>® sous FreeBSD utilise le système
	Netgraph (voir <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netgraph&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">netgraph</span>(4)</span></a>).  Une large gamme
	d'adaptateurs USB <span class="trademark">Bluetooth</span>® sont supportés par le
	pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_ubt</span>(4)</span></a>.  Les périphériques
	<span class="trademark">Bluetooth</span>® basés sur le circuit Broadcom BCM2033 sont
	supportés par les pilotes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ubtbcmfw&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ubtbcmfw</span>(4)</span></a> et
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_ubt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_ubt</span>(4)</span></a>.  La carte 3Com <span class="trademark">Bluetooth</span>® PC Card 3CRWB60-A
	demande le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_bt3c&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_bt3c</span>(4)</span></a>.  Les
	périphériques <span class="trademark">Bluetooth</span>® de type série
	et UART sont supportés via les pilotes <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sio&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sio</span>(4)</span></a>,
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_h4&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_h4</span>(4)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcseriald&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcseriald</span>(8)</span></a>.  Cette section
	décrit l'utilisation d'un adaptateur USB <span class="trademark">Bluetooth</span>®.
	Le support <span class="trademark">Bluetooth</span>® est disponible sur les systèmes
	5.0 et suivants.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84603216"></a>31.4.2. Branchement du périphérique</h3></div></div></div><p>Par défaut les pilotes de
	périphériques <span class="trademark">Bluetooth</span>® sont disponibles sous
	la forme de modules du noyau.  Avant de brancher le
	périphérique, vous devrez charger le pilote dans
	le noyau:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kldload ng_ubt</code></strong></pre><p>Si le périphérique <span class="trademark">Bluetooth</span>® est
	présent au démarrage du système, chargez
	le module à partir de
	<code class="filename">/boot/loader.conf</code>:</p><pre class="programlisting">ng_ubt_load="YES"</pre><p>Branchez votre clé USB.  Une sortie semblable
	à celle-ci devrait s'afficher sur la console (ou dans
	les journaux du système):</p><pre class="screen">ubt0: vendor 0x0a12 product 0x0001, rev 1.10/5.25, addr 2
ubt0: Interface 0 endpoints: interrupt=0x81, bulk-in=0x82, bulk-out=0x2
ubt0: Interface 1 (alt.config 5) endpoints: isoc-in=0x83, isoc-out=0x3,
      wMaxPacketSize=49, nframes=6, buffer size=294</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La pile Bluetooth doit être lancée
	  manuellement sous FreeBSD 6.0, et sous les versions 5.0
	  antérieures à la 5.5.  Ce lancement est
	  automatique à partir de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">devd</span>(8)</span></a> sous
	  FreeBSD 5.5, 6.1 et versions suivantes.</p><p xmlns="http://www.w3.org/1999/xhtml">Copiez
	<code class="filename">/usr/share/examples/netgraph/bluetooth/rc.bluetooth</code>
	à un emplacement adapté, comme
	<code class="filename">/etc/rc.bluetooth</code>.  Cette
	procédure est utilisée pour démarrer et
	arrêter la pile <span class="trademark">Bluetooth</span>®.  C'est une bonne
	idée d'arrêter la pile avant de débrancher
	le périphérique, mais ce n'est pas
	(généralement) fatal.  Quand la pile
	démarre, vous devriez avoir des messages similaires aux
	suivants:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.bluetooth start ubt0</code></strong>
BD_ADDR: 00:02:72:00:d4:1a
Features: 0xff 0xff 0xf 00 00 00 00 00
&lt;3-Slot&gt; &lt;5-Slot&gt; &lt;Encryption&gt; &lt;Slot offset&gt;
&lt;Timing accuracy&gt; &lt;Switch&gt; &lt;Hold mode&gt; &lt;Sniff mode&gt;
&lt;Park mode&gt; &lt;RSSI&gt; &lt;Channel quality&gt; &lt;SCO link&gt;
&lt;HV2 packets&gt; &lt;HV3 packets&gt; &lt;u-law log&gt; &lt;A-law log&gt; &lt;CVSD&gt;
&lt;Paging scheme&gt; &lt;Power control&gt; &lt;Transparent SCO data&gt;
Max. ACL packet size: 192 bytes
Number of ACL packets: 8
Max. SCO packet size: 64 bytes
Number of SCO packets: 8</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84629072"></a>31.4.3. Interface de contrôle de l'hôte (HCI)</h3></div></div></div><a id="idp84629712" class="indexterm"></a><p>L'interface de contrôle de l'hôte (HCI)
	fournit une interface de commande pour le contrôleur de
	la bande de base et le gestionnaire de liaisons, et
	l'accès à l'état du matériel et
	aux registres de contrôle.  Cette interface offre une
	méthode uniforme d'accès aux fonctions de la
	bande de base <span class="trademark">Bluetooth</span>®.  La couche HCI de l'hôte
	échange des données et des commandes avec le
	firmware HCI du matériel <span class="trademark">Bluetooth</span>®.  Le pilote de la
	couche de transport du contrôleur d'hôte (i.e.  le
	bus physique) fournit aux deux couches HCI la
	possibilité d'échanger des informations entre
	elles.</p><p>Un seul noeud Netgraph de type <span class="emphasis"><em>hci</em></span>
	est créé pour un périphérique
	<span class="trademark">Bluetooth</span>®.  Le noeud HCI est normalement connecté au
	noeud du pilote <span class="trademark">Bluetooth</span>® (flux descendant) et au noeud
	L2CAP (flux montant).  Toutes les opérations HCI
	doivent être effectuées sur le noeud HCI et non
	pas sur le noeud du pilote de périphérique.  Le
	nom par défaut pour le noeud HCI est
	&#8220;devicehci&#8221;.  Pour plus de détails
	consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_hci&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_hci</span>(4)</span></a>.</p><p>Une des tâches les plus courantes est la recherche
	de périphériques <span class="trademark">Bluetooth</span>® dans le voisinage
	hertzien.  Cette opération est appelée
	<span class="emphasis"><em>inquiry</em></span> (enquête, recherche).
	Cette recherche et les autres opérations relatives
	à HCI sont effectuées par l'utilitaire
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hccontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hccontrol</span>(8)</span></a>.  L'exemple ci-dessous montre comment
	déterminer quels périphériques
	<span class="trademark">Bluetooth</span>® sont dans le voisinage.  Vous devriez obtenir une
	listes de périphériques au bout de quelques
	secondes.  Notez qu'un périphérique distant ne
	répondra à la recherche que s'il est
	placé dans le mode <span class="emphasis"><em>discoverable</em></span>.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci inquiry</code></strong>
Inquiry result, num_responses=1
Inquiry result #0
       BD_ADDR: 00:80:37:29:19:a4
       Page Scan Rep. Mode: 0x1
       Page Scan Period Mode: 00
       Page Scan Mode: 00
       Class: 52:02:04
       Clock offset: 0x78ef
Inquiry complete. Status: No error [00]</pre><p><code class="literal">BD_ADDR</code> est l'adresse unique d'un
	périphérique <span class="trademark">Bluetooth</span>®, similaire à
	l'adresse MAC d'une carte réseau.  Cette adresse est
	nécessaire pour communiquer avec un
	périphérique.  Il est possible d'assigner un nom
	humainement compréhensible à l'adresse BD_ADDR.
	Le fichier <code class="filename">/etc/bluetooth/hosts</code> contient
	des informations concernant les hôtes <span class="trademark">Bluetooth</span>®
	connus.  L'exemple suivant montre comment obtenir le nom qui a
	été assigné au périphérique
	distant:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci remote_name_request 00:80:37:29:19:a4</code></strong>
BD_ADDR: 00:80:37:29:19:a4
Name: Pav's T39</pre><p>Si vous effectuez une recherche sur un
	périphérique <span class="trademark">Bluetooth</span>® distant, vous devriez
	trouver votre ordinateur en tant que &#8220;votre.machine.nom
	(ubt0)&#8221;.  Le nom affecté au
	périphérique local peut être
	modifié à tout moment.</p><p>Le système <span class="trademark">Bluetooth</span>® fournit une connexion point
	à point (seules deux matériels <span class="trademark">Bluetooth</span>® sont
	concernés), ou une connexion point à
	multipoints.  Dans le cas d'une connexion point à
	multipoints, la connexion est partagés entre plusieurs
	périphériques <span class="trademark">Bluetooth</span>®.  L'exemple suivant
	montre comment obtenir la liste des connexions en bande de
	base actives pour le périphérique local:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>hccontrol -n ubt0hci read_connection_list</code></strong>
Remote BD_ADDR    Handle Type Mode Role Encrypt Pending Queue State
00:80:37:29:19:a4     41  ACL    0 MAST    NONE       0     0 OPEN</pre><p>Une <span class="emphasis"><em>manipulation de la connexion</em></span> est
	utile quand la fin d'une connexion en bande de base est
	nécessaire.  Notez qu'il n'est normalement pas
	nécessaire de le faire à la main.  La pile
	mettra fin automatiquement aux connexions en bande de base
	inactives.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hccontrol -n ubt0hci disconnect 41</code></strong>
Connection handle: 41
Reason: Connection terminated by local host [0x16]</pre><p>Référez-vous à la commande
	<code class="command">hccontrol help</code> pour une liste
	complète des commandes HCI disponibles.  La plupart des
	commandes HCI ne nécessitent pas les privilèges
	du super-utilisateur.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84656592"></a>31.4.4. Protocole d'adaptation et de contrôle de lien
	logique (L2CAP)</h3></div></div></div><a id="idp84657360" class="indexterm"></a><p>Le protocole d'adaptation et de contrôle de lien
	logique (L2CAP) fournit des services orientés connexion
	ou non aux protocoles de niveaux supérieurs, et cela
	avec des possibilités de multiplexage de protocoles, de
	segmentation et de réassemblage.  L2CAP permet aux
	applications et aux protocoles de niveaux supérieurs de
	transmettre et recevoir des paquets L2CAP d'une taille allant
	jusqu'à 64 Ko.</p><p>L2CAP est basé sur le concept de
	<span class="emphasis"><em>canaux</em></span>.  Un canal est une connexion
	logique au sommet de la connexion en bande de base.  Chaque
	canal est attaché à un protocole suivant le
	schéma plusieurs-vers-un.  Plusieurs canaux peuvent
	être attachés au même protocole, mais un
	canal ne peut être attachés à plusieurs
	protocoles.  Chaque paquet L2CAP reçu sur un canal est
	dirigé vers le protocole de niveau supérieur
	approprié.  Plusieurs canaux peuvent partager la
	même connexion en bande de base.</p><p>Un seul noeud Netgraph de type <span class="emphasis"><em>l2cap</em></span>
	est créé pour un périphérique
	<span class="trademark">Bluetooth</span>®.  Le noeud L2CAP est normalement connecté
	au noeud HCI <span class="trademark">Bluetooth</span>® (flux descendant) et aux noeuds des
	&#8220;sockets&#8221; <span class="trademark">Bluetooth</span>® (flux montant).  Le nom par
	défaut pour le noeud L2CAP est
	&#8220;device2cap&#8221;.  Pour plus de détails
	consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ng_l2cap&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">ng_l2cap</span>(4)</span></a>.</p><p>Une commande utile est <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2ping</span>(8)</span></a>, qui peut être
	utilisée pour &#8220;pinguer&#8221; les autres
	périphériques.  Certaines implémentations
	de <span class="trademark">Bluetooth</span>® peuvent ne pas renvoyer toutes les
	données qui leur sont envoyées, aussi <code class="literal">0
	bytes</code> dans ce qui suit est normal.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>l2ping -a 00:80:37:29:19:a4</code></strong>
0 bytes from 0:80:37:29:19:a4 seq_no=0 time=48.633 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=1 time=37.551 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=2 time=28.324 ms result=0
0 bytes from 0:80:37:29:19:a4 seq_no=3 time=46.150 ms result=0</pre><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2control&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2control</span>(8)</span></a> est employé pour
	effectuer diverses opérations sur les noeuds L2CAP.
	Cet exemple montre comment obtenir la liste des connexions
	logiques (canaux) et la liste des connexions en bande de base
	pour le périphérique local:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>l2control -a 00:02:72:00:d4:1a read_channel_list</code></strong>
L2CAP channels:
Remote BD_ADDR     SCID/ DCID   PSM  IMTU/ OMTU State
00:07:e0:00:0b:ca    66/   64     3   132/  672 OPEN
<code class="prompt">%</code> <strong class="userinput"><code>l2control -a 00:02:72:00:d4:1a read_connection_list</code></strong>
L2CAP connections:
Remote BD_ADDR    Handle Flags Pending State
00:07:e0:00:0b:ca     41 O           0 OPEN</pre><p>Un autre outil de diagnostic est <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=btsockstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">btsockstat</span>(1)</span></a>.  Il
	effectue un travail similaire à celui de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=netstat&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">netstat</span>(1)</span></a>, mais relatif aux structures de données
	réseau <span class="trademark">Bluetooth</span>®.  L'exemple ci-dessous montre la
	même connexion logique que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=l2control&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">l2control</span>(8)</span></a>
	ci-dessus.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>btsockstat</code></strong>
Active L2CAP sockets
PCB      Recv-Q Send-Q Local address/PSM       Foreign address   CID   State
c2afe900      0      0 00:02:72:00:d4:1a/3     00:07:e0:00:0b:ca 66    OPEN
Active RFCOMM sessions
L2PCB    PCB      Flag MTU   Out-Q DLCs State
c2afe900 c2b53380 1    127   0     Yes  OPEN
Active RFCOMM sockets
PCB      Recv-Q Send-Q Local address     Foreign address   Chan DLCI State
c2e8bc80      0    250 00:02:72:00:d4:1a 00:07:e0:00:0b:ca 3    6    OPEN</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84677200"></a>31.4.5. Protocole RFCOMM</h3></div></div></div><a id="idp84677840" class="indexterm"></a><p>Le protocole RFCOMM permet l'émulation du port
	série au-dessus du protocole L2CAP.  Le protocole est
	basé sur la norme ETSI TS 07.10.  RFCOMM est un
	protocole de transport simple, avec les dispositions
	supplémentaires pour émuler les 9 circuits
	(signaux) d'un port série RS232 (EIATIA-232-E).  Le
	protocole RFCOMM supporte jusqu'à 60 connexions
	simultanées (canaux RFCOMM) entre deux
	périphériques <span class="trademark">Bluetooth</span>®.</p><p>Dans le cas de RFCOMM, l'établissement d'une
	communication implique deux applications tournant sur des
	périphériques différents (les
	extrémités de la communication) avec un segment
	de communication entre eux.  RFCOMM est prévu pour
	couvrir les applications faisant usage des ports séries
	des périphériques sur lesquels elles
	résident.  Le segment de communication est une liaison
	<span class="trademark">Bluetooth</span>® d'un périphérique vers un autre
	(connexion directe).</p><p>RFCOMM est seulement concerné par la connexion
	entre périphériques dans le cas d'un
	raccordement direct, ou entre le périphérique et
	un modem dans le cas d'un réseau.  RFCOMM peut
	supporter d'autres configurations, comme les modules qui
	communiquent par l'intermédiaire de la technologie sans
	fil <span class="trademark">Bluetooth</span>® d'un côté et utilise une
	interface câblée de l'autre
	côté.</p><p>Sous FreeBSD, le protocole RFCOMM est
	implémenté au niveau de la couche des
	&#8220;sockets&#8221; <span class="trademark">Bluetooth</span>®.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84686416"></a>31.4.6. Couplage des périphériques</h3></div></div></div><a id="idp84687056" class="indexterm"></a><p>Par défaut, une communication <span class="trademark">Bluetooth</span>® n'est pas
	authentifiée, et n'importe quel
	périphérique peut parler avec n'importe quel
	autre périphérique.  Un
	périphérique <span class="trademark">Bluetooth</span>® (par exemple un
	téléphone portable) peut choisir de demander une
	authentification pour fournir un service particulier (par
	exemple un service de connexion téléphonique).
	L'authentification <span class="trademark">Bluetooth</span>® est généralement
	effectuée avec des <span class="emphasis"><em>codes PIN</em></span>.  Un
	code PIN est une chaîne ASCII d'une longueur de 16
	caractères.  L'utilisateur doit entrer le même
	code PIN sur les deux périphériques.  Une fois
	que l'utilisateur a entré le code PIN, les deux
	périphériques génèrent une
	<span class="emphasis"><em>clé de liaison</em></span> (link key).
	Ensuite la clé peut être enregistrée soit
	dans les périphériques eux-mêmes ou sur un
	moyen de stockage non-volatile.  La fois suivante les deux
	périphériques utiliseront la clé
	précédemment générée.  La
	procédure décrite est appelée
	<span class="emphasis"><em>couplage</em></span>.  Si la clé de liaison
	est perdue par un des périphériques alors
	l'opération de couplage doit être
	répétée.</p><p>Le &#8220;daemon&#8221; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcsecd</span>(8)</span></a> est responsable de
	la gestion de toutes les requêtes d'authentification
	<span class="trademark">Bluetooth</span>®.  Le fichier de configuration par défaut
	est <code class="filename">/etc/bluetooth/hcsecd.conf</code>.  Un
	exemple de section pour un téléphone portable
	avec un code PIN arbitraire de &#8220;1234&#8221; est
	donné ci-dessous:</p><pre class="programlisting">device {
        bdaddr  00:80:37:29:19:a4;
        name    "Pav's T39";
        key     nokey;
        pin     "1234";
      }</pre><p>Il n'y pas de limitation sur les codes PIN (en dehors de
	la longueur).  Certains périphériques (comme les
	casques-micro <span class="trademark">Bluetooth</span>®) peuvent avoir un code PIN
	définitivement fixé.  Le paramètre
	<code class="option">-d</code> force le &#8220;daemon&#8221;
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=hcsecd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">hcsecd</span>(8)</span></a> à rester en tâche de fond, il est
	donc aisé de voir ce qu'il se passe.  Configurez le
	périphérique distant pour recevoir le couplage
	et initier la connexion <span class="trademark">Bluetooth</span>® vers le
	périphérique distant.  Le
	périphérique distant devrait annoncer que le
	couplage a été accepté, et demander le
	code PIN.  Entrez le même code PIN que celui que vous
	avez dans le fichier <code class="filename">hcsecd.conf</code>.
	Maintenant votre PC et le périphérique distant
	sont couplés.  Alternativement, vous pouvez initier le
	couplage sur le périphérique distant.</p><p>Sous FreeBSD 5.5, 6.1 et versions suivantes, la ligne
	suivante peut être ajoutée au fichier
	<code class="filename">/etc/rc.conf</code> pour obtenir un lancement
	automatique de <span class="application">hcsecd</span> au
	démarrage du système:</p><pre class="programlisting">hcsecd_enable="YES"</pre><p>Ce qui
	suit est une partie de la sortie du &#8220;daemon&#8221;
	<span class="application">hcsecd</span>:</p><pre class="programlisting">hcsecd[16484]: Got Link_Key_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', link key doesn't exist
hcsecd[16484]: Sending Link_Key_Negative_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Got PIN_Code_Request event from 'ubt0hci', remote bdaddr 0:80:37:29:19:a4
hcsecd[16484]: Found matching entry, remote bdaddr 0:80:37:29:19:a4, name 'Pav's T39', PIN code exists
hcsecd[16484]: Sending PIN_Code_Reply to 'ubt0hci' for remote bdaddr 0:80:37:29:19:a4</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84703184"></a>31.4.7. Le protocole de découverte de service
	(SDP)</h3></div></div></div><a id="idp84703824" class="indexterm"></a><p>Le protocole de découverte de service (SDP) offre
	aux applications clientes les moyens de découvrir
	l'existence des services fournis par les applications serveurs
	ainsi que les propriétés (attributs) de ces
	services.  Les attributs d'un service comprennent le type ou
	la classe du service offert et le mécanisme ou
	l'information sur le protocole nécessaire pour utiliser
	le service.</p><p>Le SDP implique la communication entre un serveur SDP et
	un client SDP.  Le serveur maintient une liste
	d'enregistrements de services qui décrit les
	caractéristiques des services associés avec le
	serveur.  Chaque enregistrement de service contient
	l'information sur un seul serveur.  Un client peut
	récupérer l'information à partir d'un
	enregistrement de service maintenu par le serveur SDP en
	émettant une requête SDP.  Si le client, ou une
	application associée avec le client, décide
	d'utiliser un service, il doit ouvrir une connexion
	séparée avec le fournisseur du service afin
	d'utiliser ce service.  Le SDP fournit un mécanisme
	pour découvrir les services et leur attributs, mais
	n'offre pas de mécanisme pour utiliser ces
	services.</p><p>Généralement, un client SDP recherche les
	services sur la base de caractéristiques de services
	désirées.  Cependant, il est parfois
	désirable de découvrir quel type de services
	sont décrits par les enregistrements de services d'un
	serveur SDP sans aucune information préalable sur les
	services.  Ce processus de recherche des services offerts est
	appelé <span class="emphasis"><em>navigation</em></span>
	(&#8220;browsing&#8221;).</p><p>Le serveur SDP <span class="trademark">Bluetooth</span>® <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a> et le client en
	ligne de commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpcontrol</span>(8)</span></a> font partie de
	l'installation FreeBSD standard.  L'exemple suivant montre
	comment effectuer un requête de navigation
	(&#8220;browse&#8221;) SDP:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sdpcontrol -a 00:01:03:fc:6e:ec browse</code></strong>
Record Handle: 00000000
Service Class ID List:
        Service Discovery Server (0x1000)
Protocol Descriptor List:
        L2CAP (0x0100)
                Protocol specific parameter #1: u/int/uuid16 1
                Protocol specific parameter #2: u/int/uuid16 1

Record Handle: 0x00000001
Service Class ID List:
        Browse Group Descriptor (0x1001)

Record Handle: 0x00000002
Service Class ID List:
        LAN Access Using PPP (0x1102)
Protocol Descriptor List:
        L2CAP (0x0100)
        RFCOMM (0x0003)
                Protocol specific parameter #1: u/int8/bool 1
Bluetooth Profile Descriptor List:
        LAN Access Using PPP (0x1102) ver. 1.0
</pre><p>... et ainsi de suite.  Remarquez que chaque service a une
	liste d'attributs (canal RFCOMM par exemple).  En fonction du
	service vous pourrez avoir besoin de prendre note de certains
	de ces attributs.  Certaines implémentations
	<span class="trademark">Bluetooth</span>® ne supportent pas les requêtes de navigation
	et peuvent renvoyer une liste vide.  Dans ce cas il est
	possible de chercher un service spécifique.  L'exemple
	ci-dessous montre comment chercher le service OBEX Object Push
	(OPUSH):</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>sdpcontrol -a 00:01:03:fc:6e:ec search OPUSH</code></strong></pre><p>Offrir des services sous FreeBSD aux clients <span class="trademark">Bluetooth</span>® se
	fait à l'aide du serveur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a>.  Sous les
	versions de FreeBSD 5.5, 6.1 et plus récentes, la ligne
	suivante peut être ajoutée au fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">sdpd_enable="YES"</pre><p>Ensuite, le <span class="quote">« <span class="quote">démon</span> »</span>
	<span class="application">sdpd</span> peut être
	démarré avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/etc/rc.d/sdpd start</code></strong></pre><p>Sous FreeBSD 6.0, et sous les versions FreeBSD 5.X
	antérieures à 5.5, <span class="application">sdpd</span>
	n'est pas intégré aux procédures de
	démarrage du système.  Il doit être
	lancé manuellement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdpd</code></strong></pre><p>L'application serveur locale qui désire offrir un
	service <span class="trademark">Bluetooth</span>® à des clients distants enregistrera
	le service auprès du &#8220;daemon&#8221; SDP local.
	Un exemple d'une telle application est <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>.
	Une fois démarré, il enregistrera un service de
	réseau local <span class="trademark">Bluetooth</span>® auprès du serveur SDP
	local.</p><p>La liste des services enregistrés auprès du
	serveur SDP local peut être obtenue en émettant
	une requête de navigation (&#8220;browse&#8221;) SDP par
	l'intermédiaire du canal de contrôle:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>sdpcontrol -l browse</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84758096"></a>31.4.8. Les profils Dial-Up Networking (DUN) et accès au
	réseau local avec PPP (LAN)</h3></div></div></div><p>Le profil Dial-Up Networking (DUN) est principalement
	utilisé avec les modems et les téléphones
	portables.  Les cas de figure couverts par ce profil sont les
	suivants:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Utilisation d'un téléphone portable ou
	    d'un modem par un ordinateur comme modem sans fil pour se
	    connecter à un serveur d'accès Internet, ou
	    pour l'utilisation de services accessibles par
	    téléphone;</p></li><li class="listitem"><p>Utilisation d'un téléphone portable ou
	    d'un modem par un ordinateur pour recevoir des appels avec
	    transmission de données.</p></li></ul></div><p>Le profil d'accès au réseau local avec PPP
	(LAN) peut être utilisé dans les situations
	suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Accès au réseau local pour un
	    périphérique <span class="trademark">Bluetooth</span>®;</p></li><li class="listitem"><p>Accès au réseau local pour plusieurs
	    périphériques <span class="trademark">Bluetooth</span>®;</p></li><li class="listitem"><p>Liaison PC à PC (en utilisant le protocole PPP
	    sur une émulation de câble
	    série).</p></li></ul></div><p>Sous FreeBSD les deux profils sont implémentés
	par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>&#8212;un
	&#8220;wrapper&#8221; convertit la connexion <span class="trademark">Bluetooth</span>®
	RFCOMM en quelque chose d'utilisable par PPP.  Avant qu'un
	profil ne soit utilisable, un nouveau label doit être
	créé dans le fichier
	<code class="filename">/etc/ppp/ppp.conf</code>.  Consultez la page de
	manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> pour des exemples.</p><p>Dans l'exemple suivant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> sera
	employé pour ouvrir un connexion RFCOMM avec le
	périphérique distant avec une adresse BD_ADDR
	00:80:37:29:19:a4 sur un canal DUN RFCOMM.  Le numéro
	de canal RFCOMM réel sera obtenu du
	périphérique distant par l'intermédiaire
	de SDP.  Il est possible de préciser le canal RFCOMM
	à la main, dans ce cas <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a>
	n'émettra pas de requête SDP.  Utilisez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpcontrol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpcontrol</span>(8)</span></a> pour trouver le canal RFCOMM sur le
	périphérique distant.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_pppd -a 00:80:37:29:19:a4 -c -C dun -l rfcomm-dialup</code></strong></pre><p>Afin de fournir un service d'accès au réseau
	local avec PPP, le serveur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a> doit être en
	fonctionnement.  Une nouvelle entrée pour les clients
	du réseau local doit être créée
	dans le fichier <code class="filename">/etc/ppp/ppp.conf</code>.
	Consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_pppd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rfcomm_pppd</span>(8)</span></a> pour des
	exemples.  Enfin, lancez le serveur RFCOMM PPP sur un
	numéro de canal RFCOMM valide.  Le serveur RFCOMM PPP
	enregistrera automatiquement un service <span class="trademark">Bluetooth</span>® LAN
	auprès du &#8220;daemon&#8221; SDP local.  L'exemple
	ci-dessous montre comment démarrer le serveur RFCOMM
	PPP:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_pppd -s -C 7 -l rfcomm-server</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84801360"></a>31.4.9. Le profil OBEX Object Push (OPUSH)</h3></div></div></div><a id="idp84802000" class="indexterm"></a><p>OBEX (échange d'objets) est un protocole
	très largement utilisé pour les transferts de
	fichiers entre périphériques mobiles.  Son
	utilisation principale se trouve dans les communications par
	infrarouge, où il est utilisé pour le transfert
	des fichiers entre ordinateurs portables ou PDAs, et pour
	envoyer des cartes de visite électronique ou des
	éléments d'agenda entre téléphones
	portables et d'autres périphériques disposant
	d'applications de gestion d'informations personnelles
	(PIM).</p><p>Le serveur et le client OBEX sont
	implémentés dans le logiciel tierce-partie
	<span class="application">obexapp</span>, qui est disponible sous la
	forme du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/obexapp/pkg-descr">comms/obexapp</a>.</p><p>Le client OBEX est employé pour
	&#8220;pousser&#8221; et/ou &#8220;tirer&#8221; des objets du
	serveur OBEX.  Un objet peut être, par exemple, une
	carte de visite ou un rendez-vous.  Le client OBEX peut
	obtenir un numéro de canal RFCOMM d'un
	périphérique distant par l'intermédiaire
	de SDP.  Cela peut être fait en spécifiant le nom
	du service plutôt que le numéro du canal RFCOMM.
	Les noms de service supportés sont: IrMC, FTRN et
	OPUSH.  Il est possible de préciser le canal RFCOMM par
	un nombre.  Un exemple de session OBEX est
	présenté ci-dessous, où l'objet
	information du périphérique d'un
	téléphone portable est
	récupéré, et un nouvel objet (carte de
	visite) est envoyé dans le répertoire du
	téléphone.</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>obexapp -a 00:80:37:29:19:a4 -C IrMC</code></strong>
obex&gt; get telecom/devinfo.txt devinfo-t39.txt
Success, response: OK, Success (0x20)
obex&gt; put new.vcf
Success, response: OK, Success (0x20)
obex&gt; di
Success, response: OK, Success (0x20)</pre><p>Afin de fournir le service OBEX Object Push, le serveur
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sdpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">sdpd</span>(8)</span></a> doit tourner.  Un dossier racine où tous
	les objets entrant seront stockés doit être
	créé.  Le chemin d'accès par
	défaut du répertoire racine est <code class="filename">/var/spool/obex</code>.  Le serveur OBEX
	enregistrera automatiquement le service OBEX Object Push
	auprès du &#8220;daemon&#8221; SDP local.  L'exemple
	ci-dessous montre comment démarrer le serveur
	OBEX:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>obexapp -s -C 10</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84808016"></a>31.4.10. Le profil port série (SPP)</h3></div></div></div><p>Le profil port série (SPP) permet aux
	périphériques <span class="trademark">Bluetooth</span>® d'émuler un
	câble série RS232 (ou similaire).  Ce profil
	traite avec les applications classiques en utilisant
	<span class="trademark">Bluetooth</span>® comme un câble de remplacement, à
	travers une abstraction de port série virtuel.</p><p>L'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rfcomm_sppd</span>(1)</span></a> implémente le
	profil port série.  Un pseudo terminal est
	utilisé comme abstraction de port série virtuel.
	L'exemple ci-dessous montre comment se connecter à un
	service port série d'un périphérique
	distant.  Notez que vous n'avez pas besoin d'indiquer un canal
	RFCOMM &#8212; <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rfcomm_sppd&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rfcomm_sppd</span>(1)</span></a> peut l'obtenir
	auprès du périphérique distant via SDP.
	Si vous désirez forcer cela, spécifiez un canal
	RFCOMM sur la ligne de commande.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>rfcomm_sppd -a 00:07:E0:00:0B:CA -t /dev/ttyp6</code></strong>
rfcomm_sppd[94692]: Starting on /dev/ttyp6...</pre><p>Une fois connecté, le pseudo-terminal peut
	être utilisé comme un port série:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l ttyp6</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84818768"></a>31.4.11. Dépannage</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84819408"></a>31.4.11.1. Un périphérique distant ne peut pas se
	  connecter</h4></div></div></div><p>Certains anciens périphériques <span class="trademark">Bluetooth</span>®
	  ne supportent pas de changement de rôle.  Par
	  défaut, quand FreeBSD accepte une nouvelle connexion, il
	  tente d'effectuer un changement de rôle et de devenir
	  maître.  Les périphériques qui ne
	  supportent pas cela ne seront pas en mesure de se connecter.
	  Notez qu'un changement de rôle est effectué
	  quand une nouvelle connexion est établie, il n'est
	  donc pas possible de demander au périphérique
	  distant s'il supporte le changement de rôle.  Il
	  existe une option HCI pour désactiver le changement
	  de rôle au niveau local:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>hccontrol -n ubt0hci write_node_role_switch 0</code></strong></pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84822096"></a>31.4.11.2. Quelque chose ne va pas, puis-je voir ce qui se passe
	  exactement?</h4></div></div></div><p>Bien sûr.  Utilisez le logiciel tierce-partie
	  <span class="application">hcidump</span> qui est disponible sous
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/comms/hcidump/pkg-descr">comms/hcidump</a> dans le
	  catalogue des logiciels portés.
	  L'utilitaire <span class="application">hcidump</span> est
	  similaire à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tcpdump&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tcpdump</span>(1)</span></a>.  Il peut être
	  utilisé pour afficher le contenu des paquets
	  <span class="trademark">Bluetooth</span>® à l'écran et les sauvegarder dans
	  un fichier.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-bridging"></a>31.5. Bridging</h2></div><div><span class="authorgroup">Ecrit par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Steve</span> <span class="surname">Peterson</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84836944"></a>31.5.1. Introduction</h3></div></div></div><a id="idp84837584" class="indexterm"></a><a id="idp84838096" class="indexterm"></a><p>Il est parfois utile de diviser un réseau physique
	(comme un réseau Ethernet) en deux réseaux
	séparés sans avoir à créer de
	sous-réseaux IPs et à utiliser un routeur pour
	connecter ces réseaux entre eux.  Le
	périphérique qui connecte ensemble deux
	réseaux de cette manière est appelé
	&#8220;bridge&#8221;&#8212;pont.  Un système FreeBSD avec
	deux cartes réseaux peut faire fonction de pont.</p><p>Le pont apprend les adresses MAC (adresses Ethernet) des
	périphériques branchés sur chacune de ses
	interfaces réseaux.  Il transmet le trafic entre deux
	réseaux uniquement quand la source et la destination
	sont sur des réseaux différents.</p><p>Sous de nombreux aspects, un pont ressemble à un
	switch (commutateur) Ethernet avec très peu de
	ports.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84839888"></a>31.5.2. Situations où l'utilisation d'un pont est
	appropriée</h3></div></div></div><p>Il existe deux situations dans lesquelles un pont est de
	nos jours utilisé.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84840912"></a>31.5.2.1. Trafic important sur un segment</h4></div></div></div><p>La première situation apparaît quand un
	  segment physique d'un réseau est submergé par
	  le trafic, mais vous ne voulez pas, pour différentes
	  raisons, subdiviser le réseau et interconnecter les
	  sous-réseaux à l'aide d'un routeur.</p><p>Prenons comme exemple un journal où les bureaux
	  de la rédaction et de la production sont sur le
	  même sous-réseau.  Les utilisateurs de la
	  rédaction utilisent tous le serveur de fichiers
	  <code class="systemitem">A</code>, et les utilisateurs de la production le
	  serveur <code class="systemitem">B</code>.  Un réseau Ethernet est
	  utilisé pour connecter ensemble les utilisateurs, et
	  des surcharges du réseau ralentissent les
	  échanges.</p><p>Si les utilisateurs de la rédaction peuvent
	  être cantonné sur un segment, et les
	  utilisateurs de la production sur un autre, les deux
	  réseaux pourront être connectés par un
	  pont.  Seul le trafic réseau destiné aux
	  interfaces réseaux situées de
	  l'&#8220;autre&#8221; côté du pont sera
	  transmis à l'autre réseau, réduisant
	  ainsi les congestions sur chaque segment.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84843600"></a>31.5.2.2. Coupe-feu filtrant/régulant le trafic</h4></div></div></div><a id="idp84844240" class="indexterm"></a><a id="idp84844752" class="indexterm"></a><p>La deuxième situation est quand un coupe-feu est
	  nécessaire mais sans translation d'adresses
	  (NAT).</p><p>Un exemple est une compagnie qui est connectée
	  à son fournisseur d'accès internet par
	  l'intermédiaire d'une connexion ISDN ou DSL.  Elle
	  dispose de 13 adresses IP routables fournies par le
	  fournisseur d'accès et dispose de 10 PCs sur son
	  réseau.  Dans cette situation, utiliser un
	  coupe-feu/routeur est complexe en raison des
	  problèmes de sous-réseaux.</p><a id="idp84850256" class="indexterm"></a><a id="idp84850768" class="indexterm"></a><a id="idp84851280" class="indexterm"></a><p>Un coupe-feu basé sur un pont peut être
	  configuré et positionné dans le flux juste en
	  aval de leur routeur DSL/ISDN sans aucun problème
	  d'adressage IP.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84852432"></a>31.5.3. Configuration d'un pont</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84853072"></a>31.5.3.1. Choix des cartes réseaux</h4></div></div></div><p>Un pont nécessite au moins deux cartes
	  réseaux pour fonctionner.  Malheureusement toutes les
	  cartes réseaux ne supportent pas le mode bridging.
	  Lisez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bridge&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">bridge</span>(4)</span></a> pour des
	  détails sur les cartes supportées.</p><p>Installez et testez les deux cartes réseaux avant
	  de poursuivre.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84855376"></a>31.5.3.2. Modification de la configuration du noyau</h4></div></div></div><a id="idp84856016" class="indexterm"></a><p>Pour activer le support nécessaire pour mettre en
	  place un pont ajouter la ligne suivante:</p><pre class="programlisting">options BRIDGE</pre><p>à votre fichier de configuration du noyau, et
	  recompilez votre noyau.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84858576"></a>31.5.3.3. Support du coupe-feu</h4></div></div></div><a id="idp84859216" class="indexterm"></a><p>Si vous projetez d'utiliser un pont en tant que
	  coupe-feu, vous devrez également ajouter l'option
	  <code class="literal">IPFIREWALL</code>.  Lisez la <a class="xref" href="#firewalls" title="Chapitre 30. Firewalls ** Traduction en Cours **">Chapitre 30, <em>Firewalls ** Traduction en Cours **</em></a> pour des informations
	  générales sur la configuration d'un pont en tant
	  que coupe-feu.</p><p>Si vous avez besoin de permettre le passage à
	  travers le pont des paquets non-IP (comme ARP), il existe
	  une option du coupe-feu qui doit être activée.
	  Cette option est
	  <code class="literal">IPFIREWALL_DEFAULT_TO_ACCEPT</code>.  Prennez
	  note que cela modifie le fonctionnement par défaut du
	  coupe-feu, ce dernier acceptera alors tous les paquets.
	  Assurez-vous de savoir ce que ce changement signifie pour
	  votre ensemble de règles de filtrage avant de
	  l'effectuer.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84861776"></a>31.5.3.4. Support de la régulation du trafic</h4></div></div></div><p>Si vous désirez utiliser le pont comme
	  régulateur de trafic, vous devrez ajouter l'option
	  <code class="literal">DUMMYNET</code> à votre fichier de
	  configuration du noyau.  Consultez la page de manuel
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=dummynet&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">dummynet</span>(4)</span></a> pour plus d'information.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84864208"></a>31.5.4. Activer le pont</h3></div></div></div><p>Ajoutez la ligne:</p><pre class="programlisting">net.link.ether.bridge.enable=1</pre><p>au fichier <code class="filename">/etc/sysctl.conf</code> pour
	activer le pont au démarrage, et la ligne:</p><pre class="programlisting">net.link.ether.bridge.config=<em class="replaceable"><code>if1</code></em>,<em class="replaceable"><code>if2</code></em></pre><p>pour activer le mode bridging sur les interfaces
	spécifiées (remplacez
	<em class="replaceable"><code>if1</code></em> et
	<em class="replaceable"><code>if2</code></em> par les noms de vos interfaces
	réseaux).  Si vous désirez que les paquets
	traversant le pont soient filtrés par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ipfw&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ipfw</span>(8)</span></a>,
	vous devrez ajouter également la ligne:</p><pre class="programlisting">net.link.ether.bridge.ipfw=1</pre><p>Pour les versions antérieures à FreeBSD 5.2-RELEASE, utilisez
	les lignes suivantes:</p><pre class="programlisting">net.link.ether.bridge=1
net.link.ether.bridge_cfg=<em class="replaceable"><code>if1</code></em>,<em class="replaceable"><code>if2</code></em>
net.link.ether.bridge_ipfw=1</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84883792"></a>31.5.5. Informations supplémentaires</h3></div></div></div><p>Si vous désirez être en mesure de vous
	connecter au pont par l'intermédiaire de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ssh&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ssh</span>(1)</span></a>, il est correct d'ajouter à l'une des
	cartes réseaux une adresse IP.  Il existe un consensus
	sur le fait qu'assigner une adresse aux deux cartes est une
	mauvaise idée.</p><p>Si vous avez plusieurs ponts sur votre réseau, il
	ne peut y en avoir plus d'un sur le chemin qui sera
	emprunté par le trafic entre deux stations de travail.
	Techniquement, cela signifie qu'il n'y a pas de support pour
	la gestion du &#8220;spanning tree&#8221;.</p><p>Un pont peut ajouter des temps de latence lors de
	l'utilisation de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping</span>(8)</span></a>, et tout particulièrement
	dans le cas du trafic d'un segment vers un autre.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-diskless"></a>31.6. Système sans disque dur</h2></div><div><span class="authorgroup">Mis à jour par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Jean-François</span> <span class="surname">Dockès</span></span>. </span></div><div><span class="authorgroup">Réorganisé et augmenté
	    par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Alex</span> <span class="surname">Dupre</span></span>. </span></div></div></div><a id="idp84899792" class="indexterm"></a><a id="idp84900304" class="indexterm"></a><p>Une machine FreeBSD peut démarrer via le réseau
      et fonctionner sans disque dur local, en utilisant des
      systèmes de fichiers montés à partir d'un
      serveur <acronym class="acronym">NFS</acronym>.  Aucune modification du
      système n'est nécessaire en dehors des fichiers de
      configuration standards.  Un tel système est facile
      à mettre en oeuvre comme tous les éléments
      sont directement disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Il y a au moins deux méthodes possibles pour
	  charger un noyau via le réseau:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym>: l'environnement
	      d'exécution préalable au démarrage
	      d'<span class="trademark">Intel</span>® (Preboot eXecution Environment) est une sorte de
	      ROM intelligente présente sur certaines cartes
	      réseau ou cartes mère.  Consultez la page de
	      manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> pour plus de détails.</p></li><li class="listitem"><p>Le logiciel porté
	      <span class="application">Etherboot</span> (<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a>) produit un code
	      stockable dans une ROM pour démarrer des noyaux via
	      le réseau.  Le code peut être soit
	      implanté dans une PROM de démarrage sur une
	      carte réseau, soit chargé à partir
	      d'une disquette (ou d'un disque dur local), ou à
	      partir d'un système <span class="trademark">MS-DOS</span>® en fonctionnement.  De
	      nombreuses cartes réseau sont
	      supportées.</p></li></ul></div></li><li class="listitem"><p>Une procédure d'exemple
	  (<code class="filename">/usr/share/examples/diskless/clone_root</code>)
	  facilite la création et la maintenance du
	  système de fichiers racine de la station de travail sur
	  le serveur.  La procédure demandera sûrement
	  quelques modifications mais vous permettra de démarrer
	  rapidement.</p></li><li class="listitem"><p>Des fichiers de démarrage du système
	  existent dans le répertoire <code class="filename">/etc</code> pour détecter et
	  supporter le démarrage d'un système sans disque
	  dur.</p></li><li class="listitem"><p>La pagination, si nécessaire, peut être
	  faite par l'intermédiaire d'un fichier
	  <acronym class="acronym">NFS</acronym> ou sur un disque local.</p></li></ul></div><p>Il existe plusieurs façons de configurer des stations
      de travail sans disque dur.  Plusieurs éléments
      entrent en oeuvre, et la plupart peuvent être
      ajustés en fonction des besoins locaux.  Ce qui suit
      décrit des variations sur la configuration d'un
      système complet, mettant en avant le simplicité et
      la compatibilité avec les procédures standards de
      démarrage de FreeBSD.  Le système décrit
      présente les caractéristiques suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Les stations de travail sans disque dur utilisent des
	  systèmes de fichiers <code class="filename">/</code> et
	  <code class="filename">/usr</code> partagés et en lecture
	  seule.</p><p>Le système de fichiers racine est une copie d'une
	  racine FreeBSD standard (généralement celle du
	  serveur), avec certains fichiers de configuration
	  remplacés par des versions spécifiques
	  à un fonctionnement sans disque dur, et parfois
	  à la station de travail auxquels ils
	  appartiennent.</p><p>Les parties de la racine qui doivent être
	  inscriptibles sont remplacées par des systèmes
	  de fichiers <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mfs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mfs</span>(8)</span></a> (FreeBSD 4.X) ou <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=md&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">md</span>(4)</span></a>
	  (FreeBSD 5.X).  Toute modification sera perdue au
	  redémarrage du système.</p></li><li class="listitem"><p>Le noyau est transféré et chargé
	  soit à l'aide d'<span class="application">Etherboot</span>
	  soit de <acronym class="acronym">PXE</acronym> comme certaines situations
	  peuvent exiger l'utilisation de l'une ou l'autre
	  méthode.</p></li></ul></div><div xmlns="" class="caution"><h3 class="admontitle">Attention: </h3><p xmlns="http://www.w3.org/1999/xhtml">Ainsi décrit, le système n'est pas
	sécurisé.  Il devrait se trouver dans une partie
	protégée du réseau, et les autres machines
	ne devraient pas lui faire confiance aveuglément.</p></div><p>Toutes les instructions de cette section ont
      été testées sous FreeBSD 4.9-RELEASE et
      5.2.1-RELEASE.  Le texte est destiné à l'origine
      pour une utilisation sous 4.X.  Des notes on été
      insérées aux endroits nécessaires pour
      indiquer les modifications concernant la branche 5.X.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84918608"></a>31.6.1. Information de fond</h3></div></div></div><p>Mettre en place des stations de travail sans disque dur
	est à la fois relativement simple et enclin aux
	erreurs.  Ces dernières sont parfois difficiles
	à diagnostiquer pour de nombreuses raisons.  Par
	exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Des options de compilation peuvent donner lieu
	    à des comportements différents à
	    l'exécution.</p></li><li class="listitem"><p>Les messages d'erreurs sont souvent cachés ou
	    totalement absents.</p></li></ul></div><p>Dans ce contexte, avoir quelques connaissances des
	mécanismes sous-jacents impliqués est très
	utile pour résoudre les problèmes qui peuvent
	surgir.</p><p>Plusieurs opérations doivent être
	effectuées pour un amorçage
	réussi:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La machine doit obtenir des paramètres de base
	    comme son adresse IP, le nom du fichier exécutable,
	    le nom du serveur, l'emplacement de la racine.  Ceci est
	    fait en utilisant le protocole <acronym class="acronym">DHCP</acronym> ou le
	    protocole BOOTP.  <acronym class="acronym">DHCP</acronym> est une extension
	    compatible de BOOTP, et utilise les mêmes
	    numéros de ports et son format de paquets
	    basic.</p><p>Il est possible de configurer un système pour
	    n'utiliser que BOOTP.  Le programme serveur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a>
	    fait partie du système de base de FreeBSD.</p><p>Cependant, <acronym class="acronym">DHCP</acronym> présente
	    plusieurs avantage sur BOOTP (des fichiers de
	    configuration plus lisibles, la possibilité
	    d'utiliser <acronym class="acronym">PXE</acronym>, plus de nombreux autres
	    avantages n'ayant pas de relation directe avec les
	    systèmes sans disque dur), et nous décrirons
	    principalement une configuration <acronym class="acronym">DHCP</acronym>,
	    avec des exemples équivalent utilisant
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=bootpd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">bootpd</span>(8)</span></a> quand cela est possible.  L'exemple de
	    configuration utilisera le logiciel <span class="application">ISC
	    DHCP</span> (la version 3.0.1.r12 était
	    installée sur le serveur de test).</p></li><li class="listitem"><p>La machine a besoin de transférer un ou
	    plusieurs programmes en mémoire locale.
	    <acronym class="acronym">TFTP</acronym> ou <acronym class="acronym">NFS</acronym> sont
	    utilisés.  Le choix entre <acronym class="acronym">TFTP</acronym> et
	    <acronym class="acronym">NFS</acronym> est à de nombreux endroits une
	    option sélectionnée lors de la compilation.
	    Une source d'erreur courante est d'indiquer des noms de
	    fichiers pour le mauvais protocole: <acronym class="acronym">TFTP</acronym>
	    transfère généralement tous les
	    fichiers à partir d'un seul répertoire sur le
	    serveur, et attendra des noms de fichiers relatifs à
	    ce répertoire.  <acronym class="acronym">NFS</acronym> a besoin de
	    chemins d'accès absolus.</p></li><li class="listitem"><p>Les éventuels programmes d'amorce
	    intermédiaires et le noyau doivent être
	    initialisés et exécutés.  Il existe
	    plusieurs variations à ce niveau:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><acronym class="acronym">PXE</acronym> chargera <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a>,
		qui est une version modifiée du chargeur.  Le
		chargeur (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>) récupérera la
		plupart des paramètres nécessaires au
		démarrage du système, et les transmettra
		au noyau avant de lui abandonner le contrôle du
		système.  Dans ce cas il est possible d'utiliser
		un noyau <code class="filename">GENERIC</code>.</p></li><li class="listitem"><p><span class="application">Etherboot</span>, chargera
		directement le noyau avec moins de préparation.
		Vous devrez compiler un noyau avec des options
		particulières.</p></li></ul></div><p><acronym class="acronym">PXE</acronym> et
	    <span class="application">Etherboot</span> fonctionnent aussi
	    bien l'un que l'autre avec des systèmes 4.X.  Comme
	    le noyau des systèmes 5.X laisse au chargeur
	    (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=loader&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">loader</span>(8)</span></a>) un peu plus de travail à
	    effectuer, <acronym class="acronym">PXE</acronym> est
	    préféré pour les systèmes
	    5.X.</p><p>Si votre <acronym class="acronym">BIOS</acronym> et vos cartes
	    réseau supportent <acronym class="acronym">PXE</acronym>, vous
	    devriez probablement l'utiliser.  Cependant, il est
	    toujours possible de démarrer un système 5.X
	    à l'aide
	    d'<span class="application">Etherboot</span>.</p></li><li class="listitem"><p>Et enfin, la machine a besoin d'accéder
	    à ses systèmes de fichiers.
	    <acronym class="acronym">NFS</acronym> est utilisé dans tous les
	    cas.</p></li></ul></div><p>Consultez également la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=diskless&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">diskless</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84959312"></a>31.6.2. Configuration</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84968272"></a>31.6.2.1. Configuration utilisant <span class="application">ISC
	  DHCP</span></h4></div></div></div><a id="idp84969168" class="indexterm"></a><p>Le serveur <span class="application">ISC DHCP</span>
	  peut répondre aux requêtes BOOTP et
	  <acronym class="acronym">DHCP</acronym>.</p><p>Avec la version 4.9, <span class="application">ISC DHCP
	  3.0</span> ne fait pas partie du système de
	  base.  Vous devrez installer le logiciel porté
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/isc-dhcp3-server/pkg-descr">net/isc-dhcp3-server</a> ou
	  la version pré-compilée correspondante.</p><p>Une fois <span class="application">ISC DHCP</span>
	  installé, il nécessite un fichier de
	  configuration pour fonctionner (normalement appelé
	  <code class="filename">/usr/local/etc/dhcpd.conf</code>).  Voici un
	  exemple commenté, où la machine
	  <code class="systemitem">margaux</code> utilise
	  <span class="application">Etherboot</span> et où la machine
	  <code class="systemitem">corbieres</code> emploie
	  <acronym class="acronym">PXE</acronym>:</p><pre class="programlisting">
default-lease-time 600;
max-lease-time 7200;
authoritative;

option domain-name "example.com";
option domain-name-servers 192.168.4.1;
option routers 192.168.4.1;

subnet 192.168.4.0 netmask 255.255.255.0 {
  use-host-decl-names on; <a id="co-dhcp-host-name"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.4.255;

  host margaux {
    hardware ethernet 01:23:45:67:89:ab;
    fixed-address margaux.example.com;
    next-server 192.168.4.4; <a id="co-dhcp-next-server"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
    filename "/data/misc/kernel.diskless"; <a id="co-dhcp-filename"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
    option root-path "192.168.4.4:/data/misc/diskless"; <a id="co-dhcp-root-path"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
  }
  host corbieres {
    hardware ethernet 00:02:b3:27:62:df;
    fixed-address corbieres.example.com;
    next-server 192.168.4.4;
    filename "pxeboot";
    option root-path "192.168.4.4:/data/misc/diskless";
  }
}
	</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-host-name"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cette option dit
	      à <span class="application">dhcpd</span> d'envoyer le
	      paramètre des déclarations
	      <code class="literal">host</code> comme nom de machine pour la
	      machine sans disque dur.  Une autre méthode
	      aurait été d'ajouter <code class="literal">option
	      host-name margaux</code>
	      à l'intérieur des déclarations
	      <code class="literal">host</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-next-server"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La directive
	      <code class="literal">next-server</code> désigne le serveur
	      <acronym class="acronym">TFTP</acronym> ou <acronym class="acronym">NFS</acronym>
	      à utiliser pour télécharger le
	      chargeur ou le noyau (le comportement par défaut
	      étant d'utiliser la même machine que le
	      serveur <acronym class="acronym">DHCP</acronym>).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-filename"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>La directive
	      <code class="literal">filename</code> précise le fichier
	      que chargera <span class="application">Etherboot</span> ou
	      <acronym class="acronym">PXE</acronym> à la prochaine
	      étape.  Il doit être défini en
	      fonction de la méthode de transfert
	      utilisée.  <span class="application">Etherboot</span>
	      peut être compilé pour utiliser
	      <acronym class="acronym">NFS</acronym> ou <acronym class="acronym">TFTP</acronym>.  Le
	      logiciel porté pour FreeBSD utilisera
	      <acronym class="acronym">NFS</acronym> par défaut.
	      <acronym class="acronym">PXE</acronym> emploie <acronym class="acronym">TFTP</acronym>,
	      c'est pourquoi un chemin d'accès relatif est
	      utilisé ici (cela peut dépendre de la
	      configuration du serveur <acronym class="acronym">TFTP</acronym>, mais
	      devrait être plutôt classique).  De plus,
	      <acronym class="acronym">PXE</acronym> charge
	      <code class="filename">pxeboot</code>, et non pas le noyau.  Il
	      existe d'autres possibilités
	      intéressantes, comme le chargement de
	      <code class="filename">pxeboot</code> à partir du
	      répertoire <code class="filename">/boot</code> d'un CD-ROM FreeBSD
	      (comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> peut charger un noyau
	      <code class="filename">GENERIC</code> cela rend possible
	      l'utilisation de <acronym class="acronym">PXE</acronym> pour
	      démarrer à partir d'un lecteur de CD-ROM
	      distant).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-dhcp-root-path"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>L'option
	      <code class="literal">root-path</code> définie le chemin
	      d'accès au système de fichiers racine,
	      suivant la notation classique de <acronym class="acronym">NFS</acronym>.
	      En utilisant <acronym class="acronym">PXE</acronym>, il est possible de
	      ne pas préciser l'adresse IP de la machine
	      dès lors que vous n'activez pas l'option BOOTP du
	      noyau.  Le serveur <acronym class="acronym">NFS</acronym> sera alors le
	      même que le serveur
	      <acronym class="acronym">TFTP</acronym>.</p></td></tr></table></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84993360"></a>31.6.2.2. Configuration utilisant BOOTP</h4></div></div></div><a id="idp84994000" class="indexterm"></a><p>Ce qui suit présente une configuration
	  <span class="application">bootpd</span> équivalente
	  (réduite à un seul client).  Elle se
	  trouverait sous <code class="filename">/etc/bootptab</code>.</p><p>Veuillez noter qu'<span class="application">Etherboot</span>
	  doit être compilé avec l'option
	  <code class="literal">NO_DHCP_SUPPORT</code> (qui n'est pas
	  activée par défaut) afin d'utiliser BOOTP et
	  que <acronym class="acronym">PXE</acronym>
	  <span class="emphasis"><em>nécessite</em></span>
	  <acronym class="acronym">DHCP</acronym>.  The seul avantage évident
	  de <span class="application">bootpd</span> est qu'il est
	  disponible dans le système de base.</p><pre class="programlisting">
.def100:\
  :hn:ht=1:sa=192.168.4.4:vm=rfc1048:\
  :sm=255.255.255.0:\
  :ds=192.168.4.1:\
  :gw=192.168.4.1:\
  :hd="/tftpboot":\
  :bf="/kernel.diskless":\
  :rp="192.168.4.4:/data/misc/diskless":

margaux:ha=0123456789ab:tc=.def100
	</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp84999504"></a>31.6.2.3. Préparation d'un programme de démarrage
	  avec <span class="application">Etherboot</span></h4></div></div></div><a id="idp85000400" class="indexterm"></a><p>Le <a class="link" href="http://etherboot.sourceforge.net" target="_top">site
	  Web d'Etherboot</a> propose une <a class="link" href="http://etherboot.sourceforge.net/doc/html/userman/t1.html" target="_top">
	  documentation importante</a> principalement
	  destinée aux systèmes Linux, mais contenant
	  néamoins des informations utiles.  Ce qui suit
	  présente comment vous utiliseriez
	  <span class="application">Etherboot</span> sur un système
	  FreeBSD.</p><p>Vous devez tout d'abord installer le logiciel
	  porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/etherboot/pkg-descr">net/etherboot</a> ou sa version
	  pré-compilée.</p><p>Vous pouvez modifier la configuration
	  d'<span class="application">Etherboot</span> (i.e. pour utiliser
	  <acronym class="acronym">TFTP</acronym> au lieu de <acronym class="acronym">NFS</acronym>)
	  en éditant le fichier <code class="filename">Config</code>
	  dans le répertoire des sources
	  d'<span class="application">Etherboot</span>.</p><p>Pour notre configuration nous utiliserons une disquette
	  de démarrage.  Pour d'autres méthodes (PROM,
	  ou un programme <span class="trademark">MS-DOS</span>®), consultez la documentation
	  d'<span class="application">Etherboot</span>.</p><p>Pour créer une disquette de démarrage,
	  insérez une disquette dans le lecteur de la machine
	  où vous avez installé
	  <span class="application">Etherboot</span>, puis rendez-vous dans
	  le répertoire <code class="filename">src</code> de l'arborescence
	  <span class="application">Etherboot</span> et tapez:</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>gmake bin32/devicetype.fd0</code></strong></pre><p><em class="replaceable"><code>devicetype</code></em> dépend du
	  type de carte Ethernet se trouvant dans la station de
	  travail sans disque dur.  Référez-vous au
	  fichier <code class="filename">NIC</code> dans le même
	  répertoire pour déterminer la valeur
	  <em class="replaceable"><code>devicetype</code></em> correcte.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85020112"></a>31.6.2.4. Démarrer avec <acronym class="acronym">PXE</acronym></h4></div></div></div><p>Par défaut le chargeur <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> charge le
	  noyau via <acronym class="acronym">NFS</acronym>.  Il peut être
	  compilé pour utiliser <acronym class="acronym">TFTP</acronym>
	  à la place en spécifiant l'option
	  <code class="literal">LOADER_TFTP_SUPPORT</code> dans le fichier
	  <code class="filename">/etc/make.conf</code>.  Lisez les commentaires
	  dans le fichier <code class="filename">/etc/defaults/make.conf</code>
	  (ou <code class="filename">/usr/share/examples/etc/make.conf</code>
	  pour les systèmes 5.X) pour plus de
	  détails.</p><p>Il existe deux autres options de
	  <code class="filename">make.conf</code> non-documentées qui
	  peuvent être utiles pour la configuration d'une
	  machine faisant fonction de console série sans disque
	  dur: <code class="literal">BOOT_PXELDR_PROBE_KEYBOARD</code>, et
	  <code class="literal">BOOT_PXELDR_ALWAYS_SERIAL</code> (cette
	  dernière n'existe que sous FreeBSD 5.X).</p><p>Pour utiliser <acronym class="acronym">PXE</acronym> quand la machine
	  démarre, vous aurez normalement besoin de
	  sélectionner l'option <code class="literal">Boot from
	  network</code> dans votre <acronym class="acronym">BIOS</acronym>, ou
	  d'appuyer sur une touche de fonction lors de
	  l'initialisation du PC.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85027792"></a>31.6.2.5. Configuration des serveurs <acronym class="acronym">TFTP</acronym> et
	  <acronym class="acronym">NFS</acronym></h4></div></div></div><a id="idp85029072" class="indexterm"></a><a id="idp85030224" class="indexterm"></a><p>Si vous utilisez <acronym class="acronym">PXE</acronym> ou
	  <span class="application">Etherboot</span> configurés pour
	  employer <acronym class="acronym">TFTP</acronym>, vous devez activer
	  <span class="application">tftpd</span> sur le serveur de
	  fichier:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Créez un répertoire à partir
	      duquel <span class="application">tftpd</span> proposera les
	      fichiers, e.g. <code class="filename">/tftpboot</code>.</p></li><li class="step"><p>Ajoutez la ligne suivante à votre fichier
	      <code class="filename">/etc/inetd.conf</code>:</p><pre class="programlisting">tftp	dgram	udp	wait	root	/usr/libexec/tftpd	tftpd -l -s /tftpboot</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il apparaît que certaines versions de
		<acronym class="acronym">PXE</acronym> veulent la version
		<acronym class="acronym">TCP</acronym> de <acronym class="acronym">TFTP</acronym>.
		Dans ce cas, ajoutez une seconde ligne, en
		remplaçant <code class="literal">dgram udp</code> par
		<code class="literal">stream tcp</code>.</p></div></li><li class="step"><p>Demandez à <span class="application">inetd</span>
	      de relire son fichier de configuration:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/inetd.pid`</code></strong></pre></li></ol></div><p>Le répertoire <code class="filename">tftpboot</code> peut être
	  placé n'importe où sur le serveur.
	  Assurez-vous que son emplacement est défini dans les
	  fichiers <code class="filename">inetd.conf</code> et
	  <code class="filename">dhcpd.conf</code>.</p><p>Dans tous les cas, vous devez également activer
	  <acronym class="acronym">NFS</acronym> et exporter le système de
	  fichiers approprié sur le serveur
	  <acronym class="acronym">NFS</acronym>.</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Ajoutez ce qui suit au fichier
	      <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">nfs_server_enable="YES"</pre></li><li class="step"><p>Exportez le système de fichiers contenant le
	      répertoire racine du système sans disque dur
	      en ajoutant ce qui suit au fichier
	      <code class="filename">/etc/exports</code> (ajustez le point de
	      montage et remplacez <em class="replaceable"><code>margaux
	      corbieres</code></em> avec les noms des stations de
	      travail sans disque dur):</p><pre class="programlisting"><em class="replaceable"><code>/data/misc</code></em> -alldirs -ro <em class="replaceable"><code>margaux corbieres</code></em></pre></li><li class="step"><p>Demandez à <span class="application">mountd</span>
	      de relire son fichier de configuration.  Si vous avez eu
	      besoin d'activer <acronym class="acronym">NFS</acronym> dans
	      <code class="filename">/etc/rc.conf</code> lors du premier point,
	      vous voudrez probablement plutot redémarrer la
	      machine.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>kill -HUP `cat /var/run/mountd.pid`</code></strong></pre></li></ol></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85068368"></a>31.6.2.6. Compilation d'un noyau pour système sans disque
	  dur</h4></div></div></div><a id="idp85069008" class="indexterm"></a><p>Si vous utilisez <span class="application">Etherboot</span>,
	  vous devez créer un fichier de configuration du noyau
	  pour le client sans disque dur avec les options suivantes
	  (en plus des options habituelles):</p><pre class="programlisting">
options     BOOTP          # Use BOOTP to obtain IP address/hostname
options     BOOTP_NFSROOT  # NFS mount root filesystem using BOOTP info
	</pre><p>Vous pouvez vouloir également employer les
	  options <code class="literal">BOOTP_NFSV3</code>,
	  <code class="literal">BOOT_COMPAT</code> et
	  <code class="literal">BOOTP_WIRED_TO</code> (référez-vous au
	  fichier <code class="filename">LINT</code> sous 4.X ou
	  <code class="filename">NOTES</code> sous 5.X).</p><p>Les noms de ces options sont historiques et
	  légèrement trompeur comme elles activent
	  indifférement l'utilisation de
	  <acronym class="acronym">DHCP</acronym> et BOOTP dans le noyau (il est
	  également possible de forcer une utilisation stricte
	  de BOOTP ou <acronym class="acronym">DHCP</acronym>).</p><p>Compilez le noyau (voir <a class="xref" href="#kernelconfig" title="Chapitre 9. Configurer le noyau de FreeBSD">Chapitre 9, <em>Configurer le noyau de FreeBSD</em></a>),
	  et copiez-le à l'emplacement indiqué dans
	  <code class="filename">dhcpd.conf</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Quand on utilise <acronym class="acronym">PXE</acronym>, la
	    compilation d'un noyau avec les options
	    précédentes n'est pas strictement
	    nécessaire (bien que conseillé).  Les activer
	    causera un plus grand nombre de requêtes
	    <acronym class="acronym">DHCP</acronym> générées lors
	    du démarrage du noyau, avec un petit risque
	    d'inconsistance entre les nouvelles valeurs et celles
	    récupérées par <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pxeboot&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">pxeboot</span>(8)</span></a> dans
	    certains cas particuliers.  L'avantage de leur utilisation
	    est que le nom de la machine sera forcément
	    défini.  Sinon vous devrez définir le nom de
	    la machine par une autre méthode, par exemple dans un
	    fichier <code class="filename">rc.conf</code> particulier au
	    client.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Afin d'être chargeable par
	    <span class="application">Etherboot</span>, un noyau 5.X doit
	    être compilé avec les &#8220;device
	    hints&#8221;.  Vous définirez normalement l'option
	    suivante dans le fichier de configuration (voir le fichier
	    de commentaires sur la configuration:
	    <code class="filename">NOTES</code>):</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">hints		"GENERIC.hints"</pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85080784"></a>31.6.2.7. Préparer le système de fichiers
	  racine</h4></div></div></div><a id="idp85081424" class="indexterm"></a><p>Vous devez créer un système de fichiers
	  racine pour les stations de travail sans disque dur,
	  à l'emplacement défini par
	  <code class="literal">root-path</code> dans le fichier
	  <code class="filename">dhcpd.conf</code>.  Les sections suivantes
	  décrivent deux manières de le faire.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85087952"></a>31.6.2.7.1. Utilisation de la procédure
	    <code class="filename">clone_root</code></h5></div></div></div><p>C'est la méthode la plus rapide pour
	    créer un système de fichiers racine, mais
	    elle est, pour le moment, uniquement supportée sous
	    FreeBSD 4.X..  Cette procédure est située
	    à l'emplacement
	    <code class="filename">/usr/share/examples/diskless/clone_root</code>
	    et demande quelques modifications, pour au moins ajuster
	    l'emplacement du système de fichiers à
	    créer (la variable <code class="literal">DEST</code>).</p><p>Référez-vous aux commentaires
	    situés en début de la procédure pour
	    information.  Ils expliquent comment le système de
	    fichiers de base est construit, et comment les fichiers
	    peuvent être remplacés de façon
	    sélective par des versions spécifiques
	    à un fonctionnement sans disque dur, ou à un
	    sous-réseau, ou encore à une station de
	    travail particulière.  Ils donnent également
	    des exemples de fichiers <code class="filename">/etc/fstab</code>
	    et <code class="filename">/etc/rc.conf</code> pour un
	    fonctionnement sans disque dur.</p><p>Les fichiers <code class="filename">README</code> dans le
	    répertoire <code class="filename">/usr/share/examples/diskless</code>
	    contiennent beaucoup d'information de fond, mais, avec les
	    autres exemples du répertoire <code class="filename">diskless</code>, ils documentent une
	    méthode de configuration qui est distincte de celle
	    utilisée par <code class="filename">clone_root</code> et les
	    procédures de démarrage du système de
	    <code class="filename">/etc</code>, ce qui est un
	    peu à l'origine de confusions.  Utilisez-les comme
	    référence uniquement, à moins que
	    vous préfériez la méthode qu'ils
	    décrivent, dans quel cas vous devrez modifier les
	    procédures <code class="filename">rc</code>.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85094096"></a>31.6.2.7.2. Utilisation de la procédure <code class="command">make
	    world</code> standard</h5></div></div></div><p>Cette méthode s'applique aussi bien à
	    FreeBSD 4.X qu'à FreeBSD 5.X et installera un
	    système complet (et non pas uniquement le
	    système de fichiers racine) dans le
	    répertoire défini par
	    <code class="envar">DESTDIR</code>.  Tout ce dont vous avez besoin de
	    faire est d'exécuter la procédure
	    suivante:</p><pre class="programlisting">#!/bin/sh
export DESTDIR=/data/misc/diskless
mkdir -p ${DESTDIR}
cd /usr/src; make world &amp;&amp; make kernel
cd /usr/src/etc; make distribution</pre><p>Une fois cela terminé, vous devrez personaliser
	    vos fichiers <code class="filename">/etc/rc.conf</code> et
	    <code class="filename">/etc/fstab</code> situés dans
	    <code class="envar">DESTDIR</code> en fonction de vos besoins.</p></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85098192"></a>31.6.2.8. Configuration de l'espace de pagination</h4></div></div></div><p>Si nécessaire, un fichier de pagination
	  situé sur le serveur peut être utilisé
	  via <acronym class="acronym">NFS</acronym>.  Une des méthodes
	  couramment utilisées pour cela n'est plus
	  supportée sous 5.X.</p><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85099600"></a>31.6.2.8.1. Pagination via <acronym class="acronym">NFS</acronym> sous
	    FreeBSD 4.X</h5></div></div></div><p>L'emplacement et la taille du fichier de pagination
	    peuvent être spécifiés avec les
	    options BOOTP/<acronym class="acronym">DHCP</acronym> 128 et 129
	    spécifiques à FreeBSD.  Des exemples de
	    fichiers de configuration pour <span class="application">ISC DHCP
	    3.0</span> ou <span class="application">bootpd</span>
	    suivent:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Ajoutez les lignes suivantes au fichier
		<code class="filename">dhcpd.conf</code>:</p><pre class="programlisting">
# Global section
option swap-path code 128 = string;
option swap-size code 129 = integer 32;

host margaux {
  ... # Standard lines, see above
  option swap-path <em class="replaceable"><code>"192.168.4.4:/netswapvolume/netswap"</code></em>;
  option swap-size <em class="replaceable"><code>64000</code></em>;
}
	      </pre><p><code class="literal">swap-path</code> est le chemin
		d'accès vers un répertoire où les
		fichiers de pagination sont situés.  Chaque
		fichier sera nommé
		<code class="filename">swap.ip-client</code>.</p><p>Les anciennes version de
		<span class="application">dhcpd</span> utilisaient une
		syntaxe du type <code class="literal">option option-128
		"...</code>, qui n'est plus
		supportée.</p><p><code class="filename">/etc/bootptab</code> utiliserait la
		syntaxe suivante à la place:</p><pre class="programlisting">T128="192.168.4.4:/netswapvolume/netswap":T129=0000fa00</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans le fichier
		  <code class="filename">/etc/bootptab</code>, la taille de
		  l'espace de pagination doit être exprimée
		  en hexadécimal.</p></div></li><li class="step"><p>Sur le serveur du fichier de pagination
		par <acronym class="acronym">NFS</acronym>, créez le(s)
		fichier(s) de pagination:</p><pre class="screen">
<code class="prompt">#</code> <strong class="userinput"><code>mkdir /netswapvolume/netswap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cd /netswapvolume/netswap</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero bs=1024 count=64000 of=swap.192.168.4.6</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>chmod 0600 swap.192.168.4.6</code></strong></pre><p><em class="replaceable"><code>192.168.4.6</code></em> est
		l'adresse IP du client sans disque dur.</p></li><li class="step"><p>Sur le serveur du fichier de pagination par
		<acronym class="acronym">NFS</acronym>, ajoutez la ligne suivante au
		fichier <code class="filename">/etc/exports</code>:</p><pre class="programlisting">
<em class="replaceable"><code>/netswapvolume</code></em>  -maproot=0:10 -alldirs <em class="replaceable"><code>margaux corbieres</code></em>
	      </pre><p>Ensuite demandez à
		<span class="application">mountd</span> à relire le
		fichier <code class="filename">exports</code>, comme plus
		haut.</p></li></ol></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85122640"></a>31.6.2.8.2. Pagination via <acronym class="acronym">NFS</acronym> sous
	    FreeBSD 5.X</h5></div></div></div><p>Le noyau ne supporte pas l'activation de la pagination
	    par <acronym class="acronym">NFS</acronym> au démarrage.  L'espace
	    de pagination doit être activé par les
	    procédures de démarrage, en montant un
	    système de fichiers accessible en écriture
	    et en créant et en activant un fichier de
	    pagination.  Pour créer un fichier de pagination de
	    la taille appropriée, vous pouvez effectuer ce qui
	    suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>dd if=/dev/zero of=/path/to/swapfile bs=1k count=1 oseek=100000</code></strong></pre><p>Pour ensuite l'activer, vous devez ajouter la ligne
	    suivante à votre fichier
	    <code class="filename">rc.conf</code>:</p><pre class="programlisting">swapfile=<em class="replaceable"><code>/path/to/swapfile</code></em></pre></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85131216"></a>31.6.2.9. Problèmes divers</h4></div></div></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85131856"></a>31.6.2.9.1. Utilisation d'un <code class="filename">/usr</code> en lecture
	    seule</h5></div></div></div><a id="idp85132880" class="indexterm"></a><p>Si la station de travail sans disque dur est
	    configurée pour exécuter X, you devrez
	    ajuster le fichier de configuration de
	    <span class="application">XDM</span>, qui envoie le journal
	    d'erreurs sur <code class="filename">/usr</code>
	    par défaut.</p></div><div class="sect4"><div xmlns="" class="titlepage"><div><div><h5 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85135312"></a>31.6.2.9.2. Utilisation d'un serveur non-FreeBSD</h5></div></div></div><p>Quand le serveur pour le système de fichiers
	    racine ne fait pas tourner FreeBSD, vous devrez créer
	    le système de fichiers racine sur une machine FreeBSD,
	    puis le copier vers sa destination en utilisant
	    <code class="command">tar</code> ou <code class="command">cpio</code>.</p><p>Dans cette situation, il y a parfois des
	    problèmes avec les fichiers spéciaux de
	    périphériques dans <code class="filename">/dev</code>, en raison de
	    différences de taille sur les entiers.  Une
	    solution à ce problème est d'exporter un
	    répertoire à partir du serveur non-FreeBSD, de
	    monter ce répertoire sur une machine FreeBSD, et
	    exécuter <code class="command">MAKEDEV</code> sur la machine
	    FreeBSD pour créer les entrées de
	    périphériques correctes (FreeBSD 5.X et
	    les versions suivantes utilisent <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=devfs&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">devfs</span>(5)</span></a> pour
	    l'allocation des fichiers spéciaux de
	    périphériques de manière transparente
	    pour l'utilisateur, exécuter
	    <code class="command">MAKEDEV</code> sur ces versions est
	    inutile).</p></div></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-isdn"></a>31.7. ISDN</h2></div></div></div><a id="idp85140944" class="indexterm"></a><p>Une bonne source d'information sur la technologie et le
      matériel ISDN (RNIS) est <a class="link" href="http://www.alumni.caltech.edu/~dank/isdn/" target="_top">la page ISDN de
      Dan Kegel</a>.</p><p>Voici un rapide aperçu à propos de
      l'ISDN:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Si vous résidez en Europe, vous devriez
	  étudier la section sur les cartes ISDN.</p></li><li class="listitem"><p>Si vous envisagez d'utiliser l'ISDN avant tout pour vous
	  connecter à l'Internet par l'intermédiaire d'un
	  fournisseur d'accès Internet et d'une ligne
	  téléphonique non dédiée, vous
	  devriez vous intéresser aux Adaptateurs Terminaux.
	  C'est la solution la plus souple, qui vous posera le moins de
	  problèmes si vous changez de fournisseur
	  d'accès.</p></li><li class="listitem"><p>Si vous interconnectez deux réseaux locaux, ou si
	  vous vous connectez à l'Internet avec une liaison ISDN
	  dédiée, vous devriez envisager un pont/routeur
	  autonome.</p></li></ul></div><p>Le coût est un facteur déterminant de la
      solution que vous choisirez.  Les options suivantes sont
      listées de la moins chère à la plus
      chère.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-isdn-cards"></a>31.7.1. Cartes ISDN</h3></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Hellmuth</span> <span class="surname">Michaelis</span></span>. </span></div></div></div><a id="idp85148752" class="indexterm"></a><p>L'implémentation ISDN de FreeBSD ne supporte que la
	norme DSS1/Q.931 (ou Euro-ISDN) utilisant des cartes passives.
	Depuis FreeBSD 4.4, quelques cartes actives sont
	supportées où le firmware supporte
	également d'autres protocoles au niveau des signaux,
	cela inclut les premières cartes supportées du
	type &#8220;Primary Rate ISDN&#8221; (PRI).</p><p>Le logiciel <span class="application">isdn4bsd</span> vous
	permet de vous connecter à d'autres routeurs ISDN soit
	en utilisant l'IP sur de l'HDLC de base, soit en utilisant PPP
	synchrone: en employant PPP intégré au noyau
	avec <code class="literal">isppp</code>, une version modifiée du
	pilote de périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=sppp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">sppp</span>(4)</span></a>, ou en
	employant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> en mode utilisateur.  L'utilisation de
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ppp&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ppp</span>(8)</span></a> en mode utilisateur rend possible
	l'agrégation de deux ou plus canaux ISDN de type B.
	Une application capable de répondre aux appels
	téléphoniques est également disponible,
	tout comme de nombreux utilitaires comme un modem logiciel 300
	bauds.</p><p>Un nombre croissant de cartes ISDN pour PC sont
	supportées sous FreeBSD et les retours montrent qu'elles
	sont utilisées avec succès dans toute l'Europe
	et dans de nombreuses autres parties du monde.</p><p>Les cartes ISDN passives supportées sont
	principalement celles avec le circuit ISDN ISAC/HSCX/IPAC
	d'Infineon (précédemment Siemens), mais
	également les cartes avec des circuits en provenance de
	Cologne Chip (cartes ISA uniquement), les cartes PCI avec les
	circuits Winbond W6692, quelques cartes avec les circuits
	Tiger300/320/ISAC et quelques cartes avec des circuits
	spécifiques comme l'AVM Fritz!Card PCI V.1.0 de l'AVM
	Fritz!Card PnP.</p><p>Actuellement les cartes ISDN actives supportées
	sont les cartes AVM B1 (ISA et PCI) BRI et les cartes PCI AVM
	T1 PRI.</p><p>Pour de la documentation sur
	<span class="application">isdn4bsd</span>, consultez le
	répertoire <code class="filename">/usr/share/examples/isdn/</code> sur
	votre système FreeBSD ou sur la <a class="link" href="http://www.freebsd-support.de/i4b/" target="_top">page web
	d'isdn4bsd</a> qui propose également des astuces,
	des erratas et bien plus de documentation que le <a class="link" href="http://people.FreeBSD.org/~hm/" target="_top">manuel
	d'isdn4bsd</a>.</p><p>Au cas où vous seriez intéressé par
	l'ajout du support pour un protocole ISDN différent,
	d'une carte ISDN pour PC non encore supportée ou par
	l'amélioration d'<span class="application">isdn4bsd</span>,
	veuillez contacter Hellmuth Michaelis.</p><p>Pour les questions concernant l'installation, la
	configuration et le dépannage
	d'<span class="application">isdn4bsd</span>, une liste de diffusion
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a> est disponible.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85167568"></a>31.7.2. Adaptateurs terminaux ISDN</h3></div></div></div><p>Les adaptateurs terminaux&#8212;&#8220;Terminal adapters
	(TA)&#8221;; sont l'équivalent ISDN des modems pour les
	lignes téléphoniques ordinaires.</p><a id="idp85168720" class="indexterm"></a><p>La plupart des TA utilisent le jeu de commandes standard
	des modems Hayes, et peuvent être utilisés en
	remplacement d'un modem.</p><p>Un TA fonctionne essentiellement de la même
	manière qu'un modem à la différence que
	la vitesse de la connexion sera plus élevée
	qu'avec votre vieux modem.  Vous devrez configurer <a class="link" href="#ppp" title="27.3. Utiliser PPP intégré au noyau">PPP</a> de façon exactement identique
	que pour un modem classique.  Assurez-vous de fixer la vitesse
	de votre port série la plus haute possible.</p><a id="idp85170512" class="indexterm"></a><p>Le principal avantage d'utiliser un TA pour vous connecter
	à votre fournisseur d'accès Internet est de
	pouvoir utiliser PPP en mode dynamic.  Comme l'espace
	d'adressage IP disponible devient de plus en plus restreint,
	la plupart des fournisseurs d'accès ne désirent
	plus vous fournir d'adresse IP statique.  La plupart des
	routeurs autonomes ne peuvent pas fonctionner avec une
	allocation dynamique d'adresse IP.</p><p>Les fonctionnalités et la stabilité de la
	connexion des adaptateurs terminaux reposent
	complètement sur le &#8220;daemon&#8221; PPP.  Cela
	vous permet de passer facilement d'un modem classique à
	l'ISDN sur une machine FreeBSD, si vous avez déjà
	configuré PPP.  Cependant, les problèmes que
	vous avez éventuellement rencontrés avec PPP
	persisteront.</p><p>Si vous désirez un maximum de stabilité,
	utilisez <a class="link" href="#ppp" title="27.3. Utiliser PPP intégré au noyau">PPP intégré au
	noyau</a>, à la place du <a class="link" href="#userppp" title="27.2. Using User PPP ** Traduction en Cours **">PPP
	en mode utilisateur</a>.</p><p>Les adaptateurs suivants sont connus pour fonctionner avec
	FreeBSD:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Motorola BitSurfer et Bitsurfer Pro</p></li><li class="listitem"><p>Adtran</p></li></ul></div><p>La plupart des adaptateurs terminaux fonctionneront
	probablement également, les fabricants de TA font en
	sorte que leurs produits acceptent la plupart du jeu de
	commandes AT des modems.</p><p>Le vrai problème avec les adaptateurs terminaux est
	que comme pour les modems, il vous faudra une bonne interface
	série dans votre ordinateur.</p><p>Vous devriez lire le document sur <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/serial-uart/index.html" target="_top">les ports
	série sous FreeBSD</a> pour comprendre en
	détail le fonctionnement des
	périphériques série et les
	différences entre les ports séries asynchrones
	et synchrones.</p><p>Un adaptateur terminal sur un port série PC
	standard (asynchrone) vous limite à 115.2 Kbs,
	même si vous disposez d'une connexion à
	128 Kbs.  Pour utiliser complètement les
	128 Kbs offert par l'ISDN, vous devez brancher
	l'adaptateur sur une carte série synchrone.</p><p>Ne vous imaginez pas qu'il suffit d'acheter un adaptateur
	terminal interne pour s'affranchir du problème
	synchrone/asynchrone.  Les adaptateurs internes disposent
	simplement d'un port série PC standard.  Tout ce que
	vous y gagnerez sera d'économiser un câble
	série et de libérer une prise
	électrique.</p><p>Une carte synchrone avec un adaptateur terminal est au
	moins aussi rapide qu'un routeur autonome, piloté par
	une simple machine FreeBSD, et probablement plus souple.</p><p>Le choix entre carte synchrone/adaptateur ou routeur
	autonome est une question de goût.  Ce sujet a
	été abordé dans les listes de diffusion.
	Nous vous suggérons de chercher dans les <a class="link" href="../../../../search/index.html" target="_top">archives</a> pour
	obtenir l'intégralité de la discussion.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85204048"></a>31.7.3. Ponts/Routeurs ISDN autonomes</h3></div></div></div><a id="idp85204688" class="indexterm"></a><p>Les ponts ou routeurs ISDN ne sont pas spécifiques
	à FreeBSD ou à tout autre système
	d'exploitation.  Pour une description complète de la
	technologie du routage et des ponts, veuillez vous reportez
	à un ouvrage de référence sur les
	réseaux.</p><p>Dans le contexte de cette section, les termes de routeur
	et de pont seront utilisés
	indifféremment.</p><p>Comme le prix des routeurs/ponts ISDN d'entrée de
	gamme baissent, il est probable qu'ils deviennent un choix de
	plus en plus populaire.  Un routeur ISDN est une petite
	boîte qui se branche directement sur votre réseau
	Ethernet, et gère sa propre connexion aux autres
	ponts/routeurs.  Il intègre le logiciel
	nécessaire au support du protocole PPP et d'autres
	protocoles.</p><p>Un routeur vous offrira un débit plus
	élevé qu'un adaptateur terminal standard,
	puisqu'il utilisera une connexion ISDN synchrone.</p><p>Le principal problème avec les routeurs et ponts
	ISDN est que l'intéropérabilité entre les
	matériels des différents constructeurs n'est pas
	toujours garantie.  Si vous projetez de vous connecter
	à un fournisseur d'accès Internet, vous devriez
	discuter de vos besoins avec ce dernier.</p><p>Si vous envisagez de connecter ensemble deux
	réseaux locaux, comme le réseau de votre
	domicile et celui de votre bureau, c'est la solution la plus
	simple et celle qui demande le moins de maintenance.  Etant
	donné que vous êtes la personne qui achète
	les équipements pour les deux extrémités,
	vous êtes sûr que cela fonctionnera.</p><p>Par exemple pour connecter un ordinateur personnel
	situé à son domicile ou le réseau d'une
	agence à celui du siège social, la configuration
	suivante pourra être utilisée:</p><div class="example"><a id="idp85208528"></a><div class="example-title">Exemple 31.1. Réseau d'agence ou à domicile</div><div class="example-contents"><a id="idp85209168" class="indexterm"></a><p>Le réseau utilise une topologie en bus avec une
	  connectique Ethernet 10 base 2 (&#8220;thinnet&#8221;).
	  Connectez le routeur au réseau à l'aide d'un
	  émetteur/récepteur AUI/10BT si
	  nécessaire.</p><div class="mediaobject"><img src="advanced-networking/isdn-bus.png" alt="Ethernet 10 Base 2" /></div><p>Si votre réseau de domicile/d'agence n'est
	  constitué que d'un seul ordinateur, vous pouvez
	  utiliser une paire torsadée croisée pour le
	  connecter directement au routeur autonome.</p></div></div><br class="example-break" /><div class="example"><a id="idp85217616"></a><div class="example-title">Exemple 31.2. Siège social ou autre réseau</div><div class="example-contents"><a id="idp85218256" class="indexterm"></a><p>Le réseau utilise une topologie en étoile
	  avec une connectique Ethernet 10 base T (&#8220;paire
	  torsadée&#8221;).</p><div class="mediaobject"><img src="advanced-networking/isdn-twisted-pair.png" alt="Architecture du Réseau ISDN" /></div></div></div><br class="example-break" /><p>Un des principaux avantages de la plupart des
	routeurs/ponts est le fait qu'ils permettent d'avoir deux
	connexions PPP <span class="emphasis"><em>séparées et
	indépendantes</em></span> vers deux sites
	différents et cela en <span class="emphasis"><em>même</em></span>
	temps.  Ceci n'est pas supporté par la plupart des
	adaptateurs terminaux, en dehors de modèles
	spécifiques (en général coûteux)
	qui disposent de deux ports série.  Ne confondez pas
	cette possibilité avec l'agrégation de canaux,
	MPP, etc.</p><p>Ceci peut être une fonctionnalité très
	utile si, par exemple, vous disposez d'une connexion ISDN
	dédiée au bureau et vous voudriez en profiter
	mais vous ne voulez pas acquérir une nouvelle ligne
	ISDN.  Un routeur au bureau peut gérer un canal B
	dédié (64 Kbps) vers l'Internet et utiliser
	l'autre canal B pour une autre connexion.  Le deuxième
	canal B peut être utilisé pour les connexions
	entrantes, sortantes ou pour l'agrégation de canaux
	(MPP, etc.) avec le premier canal B pour augmenter la bande
	passante.</p><a id="idp85223888" class="indexterm"></a><p>Un pont Ethernet vous permettra de transmettre autre chose
	que juste du trafic IP.  Vous pouvez également faire
	passer de l'IPX/SPX ou tout autre protocole que vous
	utilisez.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-natd"></a>31.8. Translation d'adresses</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Chern</span> <span class="surname">Lee</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natoverview"></a>31.8.1. Généralités</h3></div></div></div><a id="idp85228368" class="indexterm"></a><p>Le &#8220;daemon&#8221; de translation d'adresses
	(&#8220;Network Address Translation&#8221;&#8212;NAT) de FreeBSD,
	généralement connu sous le nom de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> est
	un &#8220;daemon&#8221; qui accepte les paquets IP entrants,
	change l'adresse de la source par celle de la machine locale et
	ré-injecte les paquets dans le flux sortant des paquets
	IP.  Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> effectue cela en changeant
	l'adresse IP et le port source de sorte quand les données
	réponse arrivent il soit en mesure de déterminer
	la provenance des données d'origine et les
	transférer à l'émetteur original.</p><a id="idp85268176" class="indexterm"></a><a id="idp85268688" class="indexterm"></a><p>L'utilisation classique de NAT est le partage de connexion
	Internet.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natsetup"></a>31.8.2. Architecture du réseau</h3></div></div></div><p>En raison de la diminution du nombre d'adresses IP libres
	sous IPv4, et de l'augmentation du nombre d'utilisateurs de
	lignes haut-débit comme le câble ou l'ADSL, le
	besoin d'utiliser une solution de partage de connexion est
	donc en constante augmentation.  La possibilité de
	connecter plusieurs ordinateurs par l'intermédiaire
	d'une connexion et d'une adresse IP fait de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> une
	solution de choix.</p><p>Plus généralement, un utilisateur dispose
	d'une machine connecté sur la câble ou une ligne
	ADSL avec une adresse IP et désire utiliser cet
	ordinateur connecté pour fournir un accès
	Internet à d'autres machines du réseau
	local.</p><p>Pour cela, la machine FreeBSD sur Internet doit jouer le
	rôle de passerelle.  Cette machine passerelle doit avoir
	deux cartes réseaux&#8212;l'une pour se connecter au
	routeur Internet, l'autre est connectée au
	réseau local.  Toutes les machines du réseau
	local sont connectées par l'intermédiaire d'un
	hub ou d'un switch.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il existe plusieurs manières pour connecter un
	  réseau local à l'Internet à travers une
	  passerelle FreeBSD.  Cet exemple n'abordera que le cas d'une
	  passerelle avec au moins deux cartes réseaux.</p></div><div class="mediaobject"><img src="advanced-networking/natd.png" alt="Organisation du réseau" /></div><p>Une telle configuration est communément
	utilisée pour partager une connexion Internet.  Une des
	machines du réseau local est connectée à
	Internet.  Le reste des machines accède à
	Internet par l'intermédiaire de cette machine
	&#8220;passerelle&#8221;.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdkernconfiguration"></a>31.8.3. Configuration</h3></div></div></div><a id="idp85281488" class="indexterm"></a><p>Les options suivantes doivent être présentes
	dans le fichier de configuration du noyau:</p><pre class="programlisting">options IPFIREWALL
options IPDIVERT</pre><p>De plus, les options suivantes peuvent également
	être utiles:</p><pre class="programlisting">options IPFIREWALL_DEFAULT_TO_ACCEPT
options IPFIREWALL_VERBOSE</pre><p>Ce qui suit doit figurer dans le fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">gateway_enable="YES" <a id="co-natd-gateway-enable"></a><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span>
firewall_enable="YES" <a id="co-natd-firewall-enable"></a><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span>
firewall_type="OPEN" <a id="co-natd-firewall-type"></a><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span>
natd_enable="YES"
natd_interface="<em class="replaceable"><code>fxp0</code></em>" <a id="co-natd-natd-interface"></a><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span>
natd_flags="" <a id="co-natd-natd-flags"></a><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co-natd-gateway-enable"><span><img src="./imagelib/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Configure la machine comme passerelle.
	    Exécuter <code class="command">sysctl
	    net.inet.ip.forwarding=1</code> aurait le même
	    effet.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-natd-firewall-enable"><span><img src="./imagelib/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Active au démarrage les règles du
	    coupe-feu se trouvant dans le fichier
	    <code class="filename">/etc/rc.firewall</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-natd-firewall-type"><span><img src="./imagelib/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Cela spécifie un ensemble de règles
	    prédéfinies pour le coupe-feu qui autorise
	    tous les paquets entrant.  Consultez le fichier
	    <code class="filename">/etc/rc.firewall</code> pour d'autres
	    ensembles de régles.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-natd-natd-interface"><span><img src="./imagelib/callouts/4.png" alt="4" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Indique à travers quelle interface
	    transférer les paquets (l'interface
	    connectée à l'Internet).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co-natd-natd-flags"><span><img src="./imagelib/callouts/5.png" alt="5" border="0" /></span></a> </p></td><td valign="top" align="left"><p>Toutes options de configuration
	    supplémentaires passées à
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> au démarrage.</p></td></tr></table></div><p>Le fait d'avoir les options précédentes
	définies dans le fichier
	<code class="filename">/etc/rc.conf</code> lancera la commande
	<code class="filename">/etc/rc.conf</code> au démarrage.  Cette
	commande peut être également
	exécutée à la main.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il est également possible d'utiliser un fichier
	  de configuration pour <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> quand il y a trop d'options
	  à passer.  Dans ce cas, le fichier de configuration
	  doit être défini en ajoutant la ligne suivante au
	  fichier <code class="filename">/etc/rc.conf</code>:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">natd_flags="-f /etc/natd.conf"</pre><p xmlns="http://www.w3.org/1999/xhtml">Le fichier <code class="filename">/etc/natd.conf</code>
	  contiendra une liste d'options de configuration, une par
	  ligne.  Par exemple le cas de figure de la section suivante
	  utiliserait le fichier suivant:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting">redirect_port tcp 192.168.0.2:6667 6667
redirect_port tcp 192.168.0.3:80 80</pre><p xmlns="http://www.w3.org/1999/xhtml">Pour plus d'information concernant le fichier de
	  configuration, consultez la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>
	  au sujet de l'option <code class="option">-f</code>.</p></div><p>A chaque machine et interface derrière le
	réseau local doit être assigné une adresse
	IP de l'espace d'adresses privées comme défini
	par la <a class="link" href="ftp://ftp.isi.edu/in-notes/rfc1918.txt" target="_top">RFC
	1918</a> et doit disposer d'une passerelle par
	défaut qui est l'adresse IP interne de la machine
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>.</p><p>Par exemple, les clients <code class="systemitem">A</code> et
	<code class="systemitem">B</code> du réseau local ont les adresses IP
	<code class="systemitem">192.168.0.2</code> et <code class="systemitem">192.168.0.3</code>, tandis que l'interface sur
	le réseau local de la machine
	<span class="application">natd</span> a pour adresse IP <code class="systemitem">192.168.0.1</code>.  La passerelle par
	défaut des clients <code class="systemitem">A</code> et
	<code class="systemitem">B</code> doit être l'adresse <code class="systemitem">192.168.0.1</code> de la machine
	<span class="application">natd</span>.  L'interface externe ou
	Internet de cette dernière ne demande aucune
	modification spécifique pour que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> puisse
	fonctionner.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdport-redirection"></a>31.8.4. Redirection de ports</h3></div></div></div><p>L'inconvénient avec <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> est que les
	clients du réseau local ne sont pas accessibles depuis
	l'Internet.  Les clients sur le réseau local peuvent
	établir des connexions sortantes vers le monde
	extérieur mais ne peuvent recevoir de connexions
	entrantes.  Cela présente un problème si l'on
	tente de faire tourner des services Internet sur une des
	machines du réseau local.  Une solution simple à
	ce problème est de rediriger les ports Internet
	sélectionnés de la machine
	<span class="application">natd</span> vers le client sur le
	réseau local.</p><p>Par exemple, un serveur IRC tourne sur le client
	<code class="systemitem">A</code>, et un serveur web sur le client
	<code class="systemitem">B</code>.  Pour que cela fonctionne correctement,
	les connections reçues sur les ports 6667 (IRC) et 80
	(web) doivent être redirigées vers les machines
	correspondantes.</p><p>L'option <code class="option">-redirect_port</code> doit être
	passée à <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> avec les autres options
	adéquates.  La syntaxe est la suivante:</p><pre class="programlisting">-redirect_port proto targetIP:targetPORT[-targetPORT]
                 [aliasIP:]aliasPORT[-aliasPORT]
                 [remoteIP[:remotePORT[-remotePORT]]]</pre><p>Dans l'exemple précédent, l'argument
	passé à la commande devrait être:</p><pre class="programlisting">-redirect_port tcp 192.168.0.2:6667 6667
-redirect_port tcp 192.168.0.3:80 80</pre><p>Cela va rediriger les ports <span class="emphasis"><em>tcp</em></span>
	voulus vers les machines du réseau local.</p><p>L'option <code class="option">-redirect_port</code> peut être
	utilisée pour indiquer une plage de ports plutôt
	que des ports individuels.  Par exemple <em class="replaceable"><code>tcp
	192.168.0.2:2000-3000 2000-3000</code></em> redirigerait
	toutes les connexions reçues sur les ports 2000
	à 3000 vers les ports 2000 à 3000 du client
	<code class="systemitem">A</code>.</p><p>Ces options peuvent être utilisées quand on
	exécute directement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a>, placées dans
	l'option <code class="literal">natd_flags=""</code> du fichier
	<code class="filename">/etc/rc.conf</code>, ou passées
	par l'intermédiaire d'un fichier de configuration.</p><p>Pour plus d'éléments et d'options de
	configuration consultez la page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a></p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-natdaddress-redirection"></a>31.8.5. Redirection d'adresses</h3></div></div></div><a id="idp85333072" class="indexterm"></a><p>La redirection d'adresses est utile si plusieurs adresses
	IP sont disponibles mais doivent se trouver sur une seule
	machine.  Avec cela, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> peut assigner à
	chaque client du réseau local sa propre adresse IP
	externe.  Le programme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=natd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">natd</span>(8)</span></a> récrit alors les
	paquets sortant des clients du réseau local avec
	l'adresse IP externe correcte et redirige tout le trafic
	entrant sur une adresse IP particulière vers la machine
	du réseau local correspondante.  Ce principe est
	également connu sous le nom de translation d'adresses
	statique.  Par exemple, les adresses IP <code class="systemitem">128.1.1.1</code>, <code class="systemitem">128.1.1.2</code>, et <code class="systemitem">128.1.1.3</code> appartiennent à la
	passerelle <span class="application">natd</span>.  L'adresse <code class="systemitem">128.1.1.1</code> peut être
	utilisée comme adresse IP externe de la passerelle
	<span class="application">natd</span>, tandis que <code class="systemitem">128.1.1.2</code> et <code class="systemitem">128.1.1.3</code> sont redirigées vers
	les machines <code class="systemitem">A</code> et <code class="systemitem">B</code> du
	réseau local.</p><p>La syntaxe de l'option <code class="option">-redirect_address</code>
	est la suivante:</p><pre class="programlisting">-redirect_address localIP publicIP</pre><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>localIP</td><td>L'adresse IP interne du client sur le
		réseau local.</td></tr><tr><td>publicIP</td><td>L'adresse IP externe correspondant au client sur
		le réseau local.</td></tr></tbody></table></div><p>Dans l'exemple, les arguments passés à la
	commande seraient:</p><pre class="programlisting">-redirect_address 192.168.0.2 128.1.1.2
-redirect_address 192.168.0.3 128.1.1.3</pre><p>Comme pour l'option <code class="option">-redirect_port</code>, ces
	options peuvent être placées dans l'option
	<code class="literal">natd_flags=""</code> du fichier
	<code class="filename">/etc/rc.conf</code>, ou passées par l'intermédiaire d'un fichier de configuration.  Avec la redirection
	d'adresse, il n'y a pas besoin de redirection de ports puisque
	toutes les données reçues sur une IP
	particulière sont redirigées.</p><p>Les adresses IP sur la machine
	<span class="application">natd</span> doivent être active et
	pointer sur l'interface externe.  Consultez la page de manuel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rc.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">rc.conf</span>(5)</span></a> pour cela.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-plip"></a>31.9. IP sur liaison parallèle (PLIP)</h2></div></div></div><a id="idp85358544" class="indexterm"></a><a id="idp85359056" class="indexterm"></a><p>PLIP nous permet d'utiliser le protocole TCP/IP entre ports
      parallèles.  C'est utile sur des machines sans cartes
      réseaux, ou pour effectuer une installation sur
      ordinateur portable.  Dans cette section nous aborderons:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>La fabrication d'un câble parallèle
	  (&#8220;laplink&#8221;).</p></li><li class="listitem"><p>La connexion de deux ordinateurs via PLIP.</p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-create-parallel-cable"></a>31.9.1. Fabriquer un câble parallèle</h3></div></div></div><p>Vous pouvez acheter un câble parallèle
	auprès de la plupart des vendeurs de matériel
	informatique.  Si ce n'est pas le cas, ou désirez
	savoir comment est fait un tel câble, le tableau suivant
	montre comment en faire un à partir d'un câble
	parallèle d'imprimante.</p><div class="table"><a id="idp85363664"></a><div class="table-title">Tableau 31.1. Câblage d'un câble parallèle pour
	  réseau</div><div class="table-contents"><table summary="Câblage d'un câble parallèle pour&#10;&#9;  réseau" border="0"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>A-name</th><th>A-End</th><th>B-End</th><th>Descr.</th><th>Post/Bit</th></tr></thead><tbody><tr><td><div class="literallayout"><p>DATA0<br />
-ERROR</p></div></td><td><div class="literallayout"><p>2<br />
15</p></div></td><td><div class="literallayout"><p>15<br />
2</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x01<br />
1/0x08</p></div></td></tr><tr><td><div class="literallayout"><p>DATA1<br />
+SLCT</p></div></td><td><div class="literallayout"><p>3<br />
13</p></div></td><td><div class="literallayout"><p>13<br />
3</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x02<br />
1/0x10</p></div></td></tr><tr><td><div class="literallayout"><p>DATA2<br />
+PE</p></div></td><td><div class="literallayout"><p>4<br />
12</p></div></td><td><div class="literallayout"><p>12<br />
4</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x04<br />
1/0x20</p></div></td></tr><tr><td><div class="literallayout"><p>DATA3<br />
-ACK</p></div></td><td><div class="literallayout"><p>5<br />
10</p></div></td><td><div class="literallayout"><p>10<br />
5</p></div></td><td>Strobe</td><td><div class="literallayout"><p>0/0x08<br />
1/0x40</p></div></td></tr><tr><td><div class="literallayout"><p>DATA4<br />
BUSY</p></div></td><td><div class="literallayout"><p>6<br />
11</p></div></td><td><div class="literallayout"><p>11<br />
6</p></div></td><td>Data</td><td><div class="literallayout"><p>0/0x10<br />
1/0x80</p></div></td></tr><tr><td>GND</td><td>18-25</td><td>18-25</td><td>GND</td><td>-</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="network-plip-setup"></a>31.9.2. Configurer PLIP</h3></div></div></div><p>Tout d'abord procurez-vous un câble
	&#8220;laplink&#8221;.  Vérifiez ensuite que les deux
	ordinateurs disposent d'un noyau avec le support pour le
	pilote de périphérique <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>grep lp /var/run/dmesg.boot</code></strong>
lpt0: &lt;Printer&gt; on ppbus0
lpt0: Interrupt-driven port</pre><p>Le port parallèle doit fonctionner sous interruption,
	sous FreeBSD 4.X vous devriez avoir une ligne semblable
	à la ligne suivante dans le fichier de configuration du
	noyau:</p><pre class="programlisting">device ppc0 at isa? irq 7</pre><p>Sous FreeBSD 5.X, le fichier
	<code class="filename">/boot/device.hints</code> devrait contenir les
	lignes suivantes:</p><pre class="programlisting">hint.ppc.0.at="isa"
hint.ppc.0.irq="7"</pre><p>Ensuite vérifiez si le fichier de configuration du
	noyau contient une ligne <code class="literal">device plip</code>
	ou si le module <code class="filename">plip.ko</code> est chargé.
	Dans les deux cas l'interface réseau parallèle
	devrait apparaître quand vous utilisez la
	commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ifconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ifconfig</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0</code></strong>
plip0: flags=8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500</pre><p>Branchez le câble &#8220;laplink&#8221; sur les
	interfaces parallèles des deux ordinateurs.</p><p>Configurez les paramètres de l'interface
	réseau des deux côtés en tant que
	<code class="systemitem">root</code>.  Par exemple, si vous voulez
	connecter la machine <code class="systemitem">host1</code>
	avec la machine <code class="systemitem">host2</code>:</p><pre class="programlisting">                 host1 &lt;-----&gt; host2
IP Address    10.0.0.1      10.0.0.2</pre><p>Configurez l'interface sur <code class="systemitem">host1</code> en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0 10.0.0.1 10.0.0.2</code></strong></pre><p>Configurez l'interface sur <code class="systemitem">host2</code> en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0 10.0.0.2 10.0.0.1</code></strong></pre><p>Vous devriez avoir maintenant une connexion qui
	fonctionne.  Veuillez consulter les pages de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lp</span>(4)</span></a>
	et <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=lpt&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">lpt</span>(4)</span></a> pour plus de détails.</p><p>Vous devriez également ajouter les deux noms de
	machines dans le fichier
	<code class="filename">/etc/hosts</code>:</p><pre class="programlisting">127.0.0.1               localhost.my.domain localhost
10.0.0.1                host1.my.domain host1
10.0.0.2                host2.my.domain</pre><p>Pour vérifier le bon fonctionnement de la connexion,
	aller sur les deux machines et effectuez un &#8220;ping&#8221;
	vers l'autre machine.  Par exemple, sur
	<code class="systemitem">host1</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig plip0</code></strong>
plip0: flags=8851&lt;UP,POINTOPOINT,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
        inet 10.0.0.1 --&gt; 10.0.0.2 netmask 0xff000000
<code class="prompt">#</code> <strong class="userinput"><code>netstat -r</code></strong>
Routing tables

Internet:
Destination        Gateway          Flags     Refs     Use      Netif Expire
host2              host1              UH          0       0       plip0
<code class="prompt">#</code> <strong class="userinput"><code>ping -c 4 host2</code></strong>
PING host2 (10.0.0.2): 56 data bytes
64 bytes from 10.0.0.2: icmp_seq=0 ttl=255 time=2.774 ms
64 bytes from 10.0.0.2: icmp_seq=1 ttl=255 time=2.530 ms
64 bytes from 10.0.0.2: icmp_seq=2 ttl=255 time=2.556 ms
64 bytes from 10.0.0.2: icmp_seq=3 ttl=255 time=2.714 ms

--- host2 ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max/stddev = 2.530/2.643/2.774/0.103 ms</pre></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ipv6"></a>31.10. IPv6</h2></div><div><span class="authorgroup">Ecrit original de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Aaron</span> <span class="surname">Kaplan</span></span>. </span></div><div><span class="authorgroup">Restructuré et ajouté par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Tom</span> <span class="surname">Rhodes</span></span>. </span></div><div><span class="authorgroup">Complété par <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Brad</span> <span class="surname">Davis</span></span>. </span></div></div></div><p>L'IPv6 (également connu sous le nom de IPng &#8220;IP
      nouvelle génération&#8221;) est la nouvelle
      version du très célèbre protocole IP (aussi
      connu sous le nom d'<acronym class="acronym">IPv4</acronym>).  Comme les autres
      systèmes BSD, FreeBSD utilise l'implémentation IPv6
      KAME.  Votre système FreeBSD est donc
      fourni avec tout ce dont vous aurez besoin pour tester l'IPv6.
      Cette section se concentre sur la configuration et l'utilisation
      d'IPv6.</p><p>Au début des années 90, on a pris conscience
      de la diminution rapide de l'espace d'adresses IPv4.  Etant
      donné le taux d'expansion de l'Internet, deux
      problèmes majeurs apparaissaient:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le manque d'adresses.  Aujourd'hui ce n'est plus
	  vraiment un problème puisque les espaces d'adresses
	  privées RFC1918 (<code class="systemitem">10.0.0.0/8</code>,
	  <code class="systemitem">172.16.0.0/12</code>, et
	  <code class="systemitem">192.168.0.0/16</code>) et la
	  translation d'adresses (<acronym class="acronym">NAT</acronym>) sont
	  utilisés.</p></li><li class="listitem"><p>Les tables des routeurs devenaient trop importantes.
	  C'est toujours un problème actuellement.</p></li></ul></div><p>L'IPv6 remédie à ces problèmes
      et à de nombreux autres:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Espace d'adressage sur 128 bits.  Ou plus
	  précisément, il y a 340 282 366 920 938 463 463
	  374 607 431 768 211 456 adresses disponibles.  Cela
	  équivaut à approximativement 6.67 * 10^27
	  adresses IPv6 par kilomètre-carré de surface de
	  notre planète.</p></li><li class="listitem"><p>Les routeurs ne stockeront que des regroupements
	  d'adresses dans leurs tables de routage réduisant donc
	  l'espace moyen d'une table de routage à 8192
	  entrées.</p></li></ul></div><p>IPv6 présente également de nombreuses autres
      intéressantes fonctionnalités telles que:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>L'autoconfiguration des adresses (<a class="link" href="http://www.ietf.org/rfc/rfc2462.txt" target="_top">RFC2462</a>)</p></li><li class="listitem"><p>Adresses unicast (&#8220;une parmi
	  plusieurs&#8221;)</p></li><li class="listitem"><p>Adresses multicast (multidestinataires)
	  obligatoires</p></li><li class="listitem"><p>IPsec (protocole de sécurité IP)</p></li><li class="listitem"><p>Struture d'entête simplifiée</p></li><li class="listitem"><p><acronym class="acronym">IP</acronym> mobile</p></li><li class="listitem"><p>Mécanismes de transition IPv6-vers-IPv4</p></li></ul></div><p>Pour plus d'informations consultez les
      références suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Généralités sur l'IPv6 à
	  <a class="link" href="http://playground.sun.com/pub/ipng/html/ipng-main.html" target="_top">playground.sun.com</a></p></li><li class="listitem"><p><a class="link" href="http://www.kame.net" target="_top">KAME.net</a></p></li><li class="listitem"><p><a class="link" href="http://www.6bone.net" target="_top">6bone.net</a></p></li></ul></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85450192"></a>31.10.1. Les adresses IPv6</h3></div></div></div><p>Il existe différent types d'adresses IPv6: unicast,
	anycast et multicast.</p><p>Les adresses unicast (mono-destinataire) sont les adresses
	classiques.  Un paquet envoyé à une adresse
	unicast arrive à l'interface correspondant à
	l'adresse.</p><p>Les adresses anycast ne sont normalement pas distinguables
	des adresses unicast mais correspondent à un groupe
	d'interfaces.  Un paquet destiné à une adresse
	anycast arrivera à l'interface la plus proche (en terme
	d'unité de distance du protocole de routage).  Les
	adresses anycast devraient n'être utilisées que
	par les routeurs.</p><p>Les adresses multicast identifient un groupe d'interfaces.
	Un paquet destiné à une adresse multicast
	arrivera sur toutes les interfaces appartenant au groupe
	multicast.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'adresse de diffusion IPv4
	    (généralement <code class="systemitem">xxx.xxx.xxx.255</code>) est exprimée
	    par des adresses multicast en IPv6.</p></div><div class="table"><a id="idp85458000"></a><div class="table-title">Tableau 31.2. Adresses IPv6 réservées</div><div class="table-contents"><table summary="Adresses IPv6 réservées" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Adresse IPv6</th><th>Longueur du préfixe (bits)</th><th>Description</th><th>Notes</th></tr></thead><tbody><tr><td><code class="systemitem">::</code></td><td>128 bits</td><td>non-spécifiée</td><td>similaire à <code class="systemitem">0.0.0.0</code> sous IPv4</td></tr><tr><td><code class="systemitem">::1</code></td><td>128 bits</td><td>adresse de boucle</td><td>similaire à <code class="systemitem">127.0.0.1</code> sous IPv4</td></tr><tr><td><code class="systemitem">::00:xx:xx:xx:xx</code></td><td>96 bits</td><td>IPv4 encapsulé</td><td>Les 32 bits de poids faible sont l'adresse IPv4.
		Egalement appelée &#8220;adresse IPv6 compatible
		IPv4&#8221;.</td></tr><tr><td><code class="systemitem">::ff:xx:xx:xx:xx</code></td><td>96 bits</td><td>adresse IPv6 mappée IPv4</td><td>Les 32 bits de poids faible sont l'adresse IPv4.
		Destinées aux machines ne supportant pas
		l'IPv6.</td></tr><tr><td><code class="systemitem">fe80::</code> - <code class="systemitem">feb::</code></td><td>10 bits</td><td>lien-local</td><td>similaire à l'interface de boucle sous
		IPv4</td></tr><tr><td><code class="systemitem">fec0::</code> - <code class="systemitem">fef::</code></td><td>10 bits</td><td>site-local</td><td> </td></tr><tr><td><code class="systemitem">ff::</code></td><td>8 bits</td><td>multicast</td><td> </td></tr><tr><td><code class="systemitem">001</code> (base
		2)</td><td>3 bits</td><td>unicast globale</td><td>Toutes les adresses unicast globales sont
		assignées à partir de ce pool.  Les trois
		premiers bits de l'adresse sont
		&#8220;001&#8221;.</td></tr></tbody></table></div></div><br class="table-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85485008"></a>31.10.2. Lecture des adresses IPv6</h3></div></div></div><p>La forme canonique est représentée suivant
	le schéma: <code class="systemitem">x:x:x:x:x:x:x:x</code>, où chaque
	&#8220;x&#8221; est une valeur héxadécimale sur
	16 bits.  Par exemple <code class="systemitem">FEBC:A574:382B:23C1:AA49:4592:4EFE:9982</code></p><p>Souvent dans une adresse on aura de longues sous-parties
	constituées de zéros, une telle
	sous-partie peut être abrégée par
	&#8220;::&#8221;.  Les trois <span class="quote">« <span class="quote">0</span> »</span>s de poids fort
	de chaque quartet hexadécimal peuvent également être omis.
	Par exemple <code class="systemitem">fe80::1</code> correspond à la forme
	canonique <code class="systemitem">fe80:0000:0000:0000:0000:0000:0000:0001</code>.</p><p>Une troisième forme est d'écrire les
	derniers 32 bits dans le style IPv4 bien connu
	(décimal) avec des points &#8220;.&#8221; comme
	séparateurs.  Par exemple <code class="systemitem">2002::10.0.0.1</code> correspond à la
	représentation canonique (hexadécimale) <code class="systemitem">2002:0000:0000:0000:0000:0000:0a00:0001</code>
	qui est à son tour équivalente à
	l'écriture <code class="systemitem">2002::a00:1</code>.</p><p>Maintenant le lecteur devrait être en mesure de
	comprendre ce qui suit:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig</code></strong></pre><pre class="programlisting">rl0: flags=8943&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt; mtu 1500
         inet 10.0.0.10 netmask 0xffffff00 broadcast 10.0.0.255
         inet6 fe80::200:21ff:fe03:8e1%rl0 prefixlen 64 scopeid 0x1
         ether 00:00:21:03:08:e1
         media: Ethernet autoselect (100baseTX )
         status: active</pre><p><code class="systemitem">fe80::200:21ff:fe03:8e1%rl0</code> est une
	adresse de lien local configurée automatiquement.  Elle
	est générée à partir de l'adresse MAC dans le cas de
	l'autoconfiguration.</p><p>Pour plus d'informations sur la structure des adresses
	IPv6 consultez la <a class="link" href="http://www.ietf.org/rfc/rfc3513.txt" target="_top">RFC3513</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85497552"></a>31.10.3. Se connecter</h3></div></div></div><p>Actuellement, il y a quatre façons de se connecter
	à des machines et des réseaux utilisant
	l'IPv6:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Rejoindre le réseau expérimental
	    6bone</p></li><li class="listitem"><p>Obtenir un réseau IPv6 auprès de votre
	  fournisseur d'accès.  Contactez votre fournisseur
	  d'accès Internet pour plus d'informations.</p></li><li class="listitem"><p>Utilisation d'un tunnel 6-vers-4 (<a class="link" href="http://www.ietf.org/rfc/rfc3068.txt" target="_top">RFC3068</a>)</p></li><li class="listitem"><p>Utilisation du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/freenet6/pkg-descr">net/freenet6</a> si vous utilisez
	    une connexion par modem.</p></li></ul></div><p>Ici nous ne parlerons que de la manière de se
	connecter au réseau 6bone puisque cela semble
	être aujourd'hui la méthode de connexion la plus
	populaire.</p><p>Consultez tout d'abord le site <a class="link" href="http://www.6bone.net/" target="_top">6bone</a> et recherchez une
	connexion 6bone proche de vous.  Contactez le responsable et
	avec un peu de chance on vous donnera les instructions
	à suivre pour configurer votre connexion.
	Généralement cela implique la mise en place d'un
	tunnel GRE (gif).</p><p>Voici un exemple typique de configuration d'un tunnel
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gif&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">gif</span>(4)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 create</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0</code></strong>
gif0: flags=8010&lt;POINTOPOINT,MULTICAST&gt; mtu 1280
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 tunnel MON_ADR_IPv4 MON_ADR_IPv4_ASSIGNEE_A_LAUTRE_BOUT_DU_TUNNEL</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ifconfig gif0 inet6 alias MON_ADR_IPv6_ASSIGNEE_A_LEXTREMITE_DU_TUNNEL MON_ADR_IPv6_ASSIGNEE_A_LAUTRE_BOUT_DU_TUNNEL</code></strong></pre><p>Remplacez les mots en majuscules par les informations que
	vous avez reçues du point d'accès 6bone.</p><p>Ceci établit le tunnel.  Vérifiez si le
	tunnel fonctionne en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ping6&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">ping6</span>(8)</span></a> sur l'adresse
	<code class="systemitem">ff02::1%gif0</code>.  Vous devriez
	récevoir les réponses aux requêtes
	ping.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Au cas où vous seriez intrigué par
	  l'adresse <code class="systemitem">ff02:1%gif0</code>, sachez
	  que c'est une adresse multicast.  <code class="literal">%gif0</code>
	  précise que l'adresse multicast de l'interface
	  <code class="filename">gif0</code> doit être utilisée.
	  Puisque nous utilisons <code class="command">ping</code> sur une adresse
	  multicast, l'autre bout du tunnel devrait également
	  répondre.</p></div><p>Désormais, la mise en place d'une route vers votre
	lien 6bone devrait être relativement directe:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>route add -inet6 default -interface gif0</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ping6 -n MON_LIEN_MONTANT</code></strong></pre><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>traceroute6 www.jp.FreeBSD.org</code></strong>
(3ffe:505:2008:1:2a0:24ff:fe57:e561) from 3ffe:8060:100::40:2, 30 hops max, 12 byte packets
     1  atnet-meta6  14.147 ms  15.499 ms  24.319 ms
     2  6bone-gw2-ATNET-NT.ipv6.tilab.com  103.408 ms  95.072 ms *
     3  3ffe:1831:0:ffff::4  138.645 ms  134.437 ms  144.257 ms
     4  3ffe:1810:0:6:290:27ff:fe79:7677  282.975 ms  278.666 ms  292.811 ms
     5  3ffe:1800:0:ff00::4  400.131 ms  396.324 ms  394.769 ms
     6  3ffe:1800:0:3:290:27ff:fe14:cdee  394.712 ms  397.19 ms  394.102 ms</pre><p>La sortie pourra être différente d'une
	machine à une autre.  Maintenant vous devriez
	être en mesure d'atteindre le site IPv6 <a class="link" href="http://www.kame.net" target="_top">www.kame.net</a> et de voir la
	tortue dansante &#8212; et cela si vous disposez d'un
	navigateur supportant l'IPv6 comme <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/mozilla/pkg-descr">www/mozilla</a>,
	<span class="application">Konqueror</span> qui fait partie du
	logiciel <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/x11/kdebase3/pkg-descr">x11/kdebase3</a>,
	ou <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/www/epiphany/pkg-descr">www/epiphany</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85531344"></a>31.10.4. DNS dans le monde IPv6</h3></div></div></div><p>A l'origine, il existait deux types d'enregistrement DNS
	pour l'IPv6.  L'organisme IETF a déclaré
	obsolète l'enregistrement A6.  Les enregistrements AAAA
	sont aujourd'hui le standard.</p><p>L'utilisation des enregistrements AAAA est assez direct.
	Assignez votre nom de machine à la nouvelle adresse
	IPv6 que vous venez d'obtenir en ajoutant:</p><pre class="programlisting">MYHOSTNAME           AAAA    MYIPv6ADDR</pre><p>à votre fichier de zone DNS primaire.  Dans le cas
	où vous ne gérez pas vos propres zones
	<acronym class="acronym">DNS</acronym> contactez le responsable de votre
	<acronym class="acronym">DNS</acronym>.  Les versions actuelles de
	<span class="application">bind</span> (version 8.3 et 9) et <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/dns/djbdns/pkg-descr">dns/djbdns</a> (avec le correctif IPv6) supportent
	les enregistrements AAAA.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85543504"></a>31.10.5. Effectuer les changements nécessaires dans le
	fichier <code class="filename">/etc/rc.conf</code></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85544528"></a>31.10.5.1. Paramétrage du client IPv6</h4></div></div></div><p>Ces paramètres vous permettront de configurer une
	  machine qui sera sur votre réseau local et sera un
	  client, non pas un routeur.  Pour que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtsol&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtsol</span>(8)</span></a>
	  configure automatiquement votre interface réseau au
	  démarrage tout ce dont vous avez besoin d'ajouter
	  est:</p><pre class="programlisting">ipv6_enable="YES"</pre><p>Pour assigner une adresse IP statique telle que <code class="systemitem">2001:471:1f11:251:290:27ff:fee0:2093</code>,
	  à votre interface <code class="filename">fxp0</code>,
	  ajoutez:</p><pre class="programlisting">ipv6_ifconfig_fxp0="2001:471:1f11:251:290:27ff:fee0:2093"</pre><p>Pour assigner le routeur par défaut <code class="systemitem">2001:471:1f11:251::1</code>, ajoutez ce qui
	  suit au fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ipv6_defaultrouter="2001:471:1f11:251::1"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85550032"></a>31.10.5.2. Paramétrage d'un routeur/passerelle IPv6</h4></div></div></div><p>Ceci vous aidera à mettre en oeuvre les
	  instructions que votre fournisseur de tunnel, tel que <a class="link" href="http://www.6bone.net/" target="_top">6bone</a>, vous a
	  donné et à les convertir en paramètres
	  qui seront conservés à chaque
	  démarrage.  Pour rétablir votre tunnel au
	  démarrage, utilisez quelque chose comme ce qui suit
	  dans le fichier <code class="filename">/etc/rc.conf</code>:</p><p>Listez les interfaces génériques de tunnel
	  qui seront configurées, par exemple
	  <code class="filename">gif0</code>:</p><pre class="programlisting">gif_interfaces="gif0"</pre><p>Pour configurer l'interface avec une adresse
	  (extrémité) locale
	  <em class="replaceable"><code>MY_IPv4_ADDR</code></em> vers une adresse
	  (extrémité) distante
	  <em class="replaceable"><code>REMOTE_IPv4_ADDR</code></em>:</p><pre class="programlisting">gifconfig_gif0="<em class="replaceable"><code>MY_IPv4_ADDR REMOTE_IPv4_ADDR</code></em>"</pre><p>Pour utiliser l'adresse IPv6 que l'on vous a
	  assigné en vue d'être utilisée pour
	  votre extrémité du tunnel IPv6,
	  ajoutez:</p><pre class="programlisting">ipv6_ifconfig_gif0="<em class="replaceable"><code>MY_ASSIGNED_IPv6_TUNNEL_ENDPOINT_ADDR</code></em>"</pre><p>Ensuite tout ce qu'il reste à faire est de
	  définir la route par défaut pour l'IPv6.
	  C'est l'autre extrémité du tunnel IPv6:</p><pre class="programlisting">ipv6_defaultrouter="<em class="replaceable"><code>MY_IPv6_REMOTE_TUNNEL_ENDPOINT_ADDR</code></em>"</pre></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85557456"></a>31.10.5.3. Paramétrage d'un tunnel IPv6</h4></div></div></div><p>Si le serveur doit router de l'IPv6 entre votre
	  réseau et le reste du monde, le paramètre
	  suivant sera également nécessaire dans votre
	  fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">ipv6_gateway_enable="YES"</pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85559632"></a>31.10.6. Annonce du routeur et auto-configuration</h3></div></div></div><p>Cette section vous aidera à configurer
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> pour l'annonce de la route IPv6 par
	défaut.</p><p>Pour activer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a>, vous devrez ajouter ce qui
	suit à votre fichier
	<code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">rtadvd_enable="YES"</pre><p>Il est important que vous indiquiez l'interface sur
	laquelle le routeur IPv6 sera sollicité.  Par exemple
	pour que <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rtadvd&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rtadvd</span>(8)</span></a> utilise
	<code class="filename">fxp0</code>:</p><pre class="programlisting">rtadvd_interfaces="fxp0"</pre><p>Nous devons maintenant créer le fichier de
	configuration <code class="filename">/etc/rtadvd.conf</code>.  Voici un
	exemple:</p><pre class="programlisting">fxp0:\
	:addrs#1:addr="2001:471:1f11:246::":prefixlen#64:tc=ether:</pre><p>Remplacez <code class="filename">fxp0</code> avec l'interface
	que vous allez utiliser.</p><p>Ensuite remplacez <code class="systemitem">2001:471:1f11:246::</code> avec votre
	préfixe.</p><p>Si vous êtes un sous-réseau <code class="systemitem">/64</code> dédié, il ne sera
	pas nécessaire de modifier quelque chose d'autre.
	Sinon, vous devrez modifier <code class="literal">prefixlen#</code> avec
	la valeur correcte.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-atm"></a>31.11. ATM (<span class="quote">« <span class="quote">Asynchronous Transfer Mode</span> »</span>)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Harti</span> <span class="surname">Brandt</span></span>. </span></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85576784"></a>31.11.1. Configuration IP conventionnelle sur ATM (PVCs)</h3></div></div></div><p>L'IP conventionnelle sur ATM (&#8220;Classical IP over
	ATM&#8221;&#8212;<acronym class="acronym">CLIP</acronym>) est la
	méthode la plus simple pour utiliser ATM
	(Asynchronous Transfer Mode) avec l'IP.
	Elle peut être utilisée en mode non
	connecté (&#8220;Switched Virtual
	Connections&#8221;&#8212;SVCs) et en mode connecté
	(&#8220;Permanent Virtual Connections&#8221;&#8212;PVCs).
	Cette section décrit comment configurer un
	réseau basé sur les PVCs.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85582416"></a>31.11.1.1. Configurations en réseau maillé</h4></div></div></div><p>La première méthode de configuration
	  <acronym class="acronym">CLIP</acronym> avec des PVCs est de connecter entre
	  elles chaque machine du réseau par
	  l'intermédiaire d'une PVC dédiée.  Bien
	  que cela soit simple à configurer, cela tend à
	  devenir impraticable avec un nombre important de machines.
	  Notre exemple suppose que nous avons quatre machines sur le
	  réseau, chacune connectée au réseau
	  <acronym class="acronym">ATM</acronym>
	  à l'aide d'une carte réseau <acronym class="acronym">ATM</acronym>.  La
	  première étape est d'établir le plan
	  des adresses IP et des connexions <acronym class="acronym">ATM</acronym> entre machines.  Nous
	  utilisons le plan suivant:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Machine</th><th>Adresse IP</th></tr></thead><tbody><tr><td><code class="systemitem">hostA</code></td><td><code class="systemitem">192.168.173.1</code></td></tr><tr><td><code class="systemitem">hostB</code></td><td><code class="systemitem">192.168.173.2</code></td></tr><tr><td><code class="systemitem">hostC</code></td><td><code class="systemitem">192.168.173.3</code></td></tr><tr><td><code class="systemitem">hostD</code></td><td><code class="systemitem">192.168.173.4</code></td></tr></tbody></table></div><p>Pour réaliser un réseau maillé,
	  nous avons besoin d'une connexion ATM entre chaque paire de
	  machines:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Machines</th><th>Couple VPI.VCI</th></tr></thead><tbody><tr><td><code class="systemitem">hostA</code> - <code class="systemitem">hostB</code></td><td>0.100</td></tr><tr><td><code class="systemitem">hostA</code> - <code class="systemitem">hostC</code></td><td>0.101</td></tr><tr><td><code class="systemitem">hostA</code> - <code class="systemitem">hostD</code></td><td>0.102</td></tr><tr><td><code class="systemitem">hostB</code> - <code class="systemitem">hostC</code></td><td>0.103</td></tr><tr><td><code class="systemitem">hostB</code> - <code class="systemitem">hostD</code></td><td>0.104</td></tr><tr><td><code class="systemitem">hostC</code> - <code class="systemitem">hostD</code></td><td>0.105</td></tr></tbody></table></div><p>Les valeurs VPI et VCI à chaque
	  extrémité de la connexion peuvent bien
	  évidemment être différentes, mais par
	  souci de simplicité nous supposerons quelles sont
	  identiques.  Ensuite nous devons configurer les interfaces
	  ATM sur chaque machine:</p><pre class="screen">hostA<code class="prompt">#</code> <strong class="userinput"><code>ifconfig hatm0 192.168.173.1 up</code></strong>
hostB<code class="prompt">#</code> <strong class="userinput"><code>ifconfig hatm0 192.168.173.2 up</code></strong>
hostC<code class="prompt">#</code> <strong class="userinput"><code>ifconfig hatm0 192.168.173.3 up</code></strong>
hostD<code class="prompt">#</code> <strong class="userinput"><code>ifconfig hatm0 192.168.173.4 up</code></strong></pre><p>en supposant que l'interface ATM est
	  <code class="filename">hatm0</code> sur toutes les machines.
	  Maintenant les PVCs doivent être configurées
	  sur <code class="systemitem">hostA</code> (nous supposons qu'elles sont
	  déjà configurées sur les switches ATM,
	  vous devez consulter le manuel du switch sur comment
	  réaliser cette configuration).</p><pre class="screen">hostA<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.2 hatm0 0 100 llc/snap ubr</code></strong>
hostA<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.3 hatm0 0 101 llc/snap ubr</code></strong>
hostA<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.4 hatm0 0 102 llc/snap ubr</code></strong>

hostB<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.1 hatm0 0 100 llc/snap ubr</code></strong>
hostB<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.3 hatm0 0 103 llc/snap ubr</code></strong>
hostB<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.4 hatm0 0 104 llc/snap ubr</code></strong>

hostC<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.1 hatm0 0 101 llc/snap ubr</code></strong>
hostC<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.2 hatm0 0 103 llc/snap ubr</code></strong>
hostC<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.4 hatm0 0 105 llc/snap ubr</code></strong>

hostD<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.1 hatm0 0 102 llc/snap ubr</code></strong>
hostD<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.2 hatm0 0 104 llc/snap ubr</code></strong>
hostD<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm add 192.168.173.3 hatm0 0 105 llc/snap ubr</code></strong></pre><p>Bien évidemment des contrats de trafic autres
	  qu'UBR (&#8220;Unspecified Bit Rate&#8221;) peuvent
	  être utilisés dès que la carte ATM les
	  supportent.  Dans ce cas le nom du contrat de trafic est
	  suivi par les paramètres du trafic.  De l'aide
	  concernant l'outil <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atmconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atmconfig</span>(8)</span></a> peut être obtenue
	  avec:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>atmconfig help natm add</code></strong></pre><p>ou dans la page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=atmconfig&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">atmconfig</span>(8)</span></a>.</p><p>La même configuration peut être faite par
	  l'intermédiaire de <code class="filename">/etc/rc.conf</code>.
	  Pour la machine <code class="systemitem">hostA</code> cela ressemblerait
	  à:</p><pre class="programlisting">network_interfaces="lo0 hatm0"
ifconfig_hatm0="inet 192.168.173.1 up"
natm_static_routes="hostB hostC hostD"
route_hostB="192.168.173.2 hatm0 0 100 llc/snap ubr"
route_hostC="192.168.173.3 hatm0 0 101 llc/snap ubr"
route_hostD="192.168.173.4 hatm0 0 102 llc/snap ubr"</pre><p>L'état de toutes les routes
	  <acronym class="acronym">CLIP</acronym> peut être obtenu avec:</p><pre class="screen">hostA<code class="prompt">#</code> <strong class="userinput"><code>atmconfig natm show</code></strong></pre></div></div></div></div></div><div class="part"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="appendices"></a>Partie V. Annexes</h1></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="appendix"><a href="#mirrors">A. Se procurer FreeBSD</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mirrors-cdrom">A.1. Editeurs de CD-ROMs et DVDs</a></span></dt><dt><span class="sect1"><a href="#mirrors-ftp">A.2. Sites FTP</a></span></dt><dt><span class="sect1"><a href="#anoncvs">A.3. CVS anonyme</a></span></dt><dt><span class="sect1"><a href="#ctm">A.4. Utiliser CTM</a></span></dt><dt><span class="sect1"><a href="#cvsup">A.5. Utiliser CVSup</a></span></dt><dt><span class="sect1"><a href="#portsnap">A.6. Utiliser Portsnap</a></span></dt><dt><span class="sect1"><a href="#cvs-tags">A.7. Etiquettes CVS</a></span></dt><dt><span class="sect1"><a href="#mirrors-afs">A.8. Sites AFS</a></span></dt><dt><span class="sect1"><a href="#mirrors-rsync">A.9. Sites rsync</a></span></dt></dl></dd><dt><span class="appendix"><a href="#bibliography">B. Bibliographie</a></span></dt><dd><dl><dt><span class="sect1"><a href="#bibliography-freebsd">B.1. Livres &amp; magazines consacrés à FreeBSD</a></span></dt><dt><span class="sect1"><a href="#bibliography-userguides">B.2. Manuels d'utilisation</a></span></dt><dt><span class="sect1"><a href="#bibliography-adminguides">B.3. Manuels d'administration</a></span></dt><dt><span class="sect1"><a href="#bibliography-programmers">B.4. Manuels de programmation</a></span></dt><dt><span class="sect1"><a href="#bibliography-osinternals">B.5. &#8220;Internes&#8221; du système d'exploitation</a></span></dt><dt><span class="sect1"><a href="#bibliography-security">B.6. Ouvrages de référence en matière de sécurité</a></span></dt><dt><span class="sect1"><a href="#bibliography-hardware">B.7. Ouvrages de référence sur le matériel</a></span></dt><dt><span class="sect1"><a href="#bibliography-history">B.8. Histoire d'<span class="trademark">UNIX</span>®</a></span></dt><dt><span class="sect1"><a href="#bibliography-journals">B.9. Revues et journaux</a></span></dt></dl></dd><dt><span class="appendix"><a href="#eresources">C. Ressources sur Internet</a></span></dt><dd><dl><dt><span class="sect1"><a href="#eresources-mail">C.1. Listes de diffusion</a></span></dt><dt><span class="sect1"><a href="#eresources-news">C.2. Forums de discussion</a></span></dt><dt><span class="sect1"><a href="#eresources-web">C.3. Serveurs World Wide Web</a></span></dt><dt><span class="sect1"><a href="#eresources-email">C.4. Adresses électroniques</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">C.5. Comptes</a></span></dt></dl></dd><dt><span class="appendix"><a href="#pgpkeys">D. Clés Open<acronym class="acronym">PGP</acronym></a></span></dt><dd><dl><dt><span class="sect1"><a href="#pgpkeys-officers">D.1. Officiers</a></span></dt></dl></dd></dl></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirrors"></a>Annexe A. Se procurer FreeBSD</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#mirrors-cdrom">A.1. Editeurs de CD-ROMs et DVDs</a></span></dt><dt><span class="sect1"><a href="#mirrors-ftp">A.2. Sites FTP</a></span></dt><dt><span class="sect1"><a href="#anoncvs">A.3. CVS anonyme</a></span></dt><dt><span class="sect1"><a href="#ctm">A.4. Utiliser CTM</a></span></dt><dt><span class="sect1"><a href="#cvsup">A.5. Utiliser CVSup</a></span></dt><dt><span class="sect1"><a href="#portsnap">A.6. Utiliser Portsnap</a></span></dt><dt><span class="sect1"><a href="#cvs-tags">A.7. Etiquettes CVS</a></span></dt><dt><span class="sect1"><a href="#mirrors-afs">A.8. Sites AFS</a></span></dt><dt><span class="sect1"><a href="#mirrors-rsync">A.9. Sites rsync</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-cdrom"></a>A.1. Editeurs de CD-ROMs et DVDs</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85672272"></a>A.1.1. Produits vendus en boîte</h3></div></div></div><p>Des versions en boîte de FreeBSD sont disponibles (CDs de
	FreeBSD, logiciels supplémentaires, et documentation papier)
	auprès de plusieurs revendeurs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><div class="address"><p><br />
	    CompUSA<br />
	    WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.compusa.com/" target="_top">http://www.compusa.com/</a></span><br />
	  </p></div></li><li class="listitem"><div class="address"><p><br />
	    Frys Electronics<br />
	    WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.frys.com/" target="_top">http://www.frys.com/</a></span><br />
	  </p></div></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85676368"></a>A.1.2. CDs et DVDs</h3></div></div></div><p>Les CDs et DVDs de FreeBSD sont disponibles auprès de
	nombreux revendeurs en ligne:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><div class="address"><p><br />
	  BSD Mall by Daemon News<br />
	  <span class="street">PO Box 161</span><br />
	  <span class="city">Nauvoo</span>, <span class="state">IL</span> <span class="postcode">62354</span><br />
	  <span class="country">USA</span><br />
	  Phone: <span class="phone">+1 866 273-6255</span><br />
	  Fax: <span class="fax">+1 217 453-9956</span><br />
	  Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:sales@bsdmall.com">sales@bsdmall.com</a>&gt;</code><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.bsdmall.com/" target="_top">http://www.bsdmall.com/</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	  BSD-Systems<br />
	  Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:info@bsd-systems.co.uk">info@bsd-systems.co.uk</a>&gt;</code><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.bsd-systems.co.uk" target="_top">http://www.bsd-systems.co.uk</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p><br />
	  FreeBSD Mall, Inc.<br />
	  <span class="street">3623 Sanford Street</span><br />
	  <span class="city">Concord</span>, <span class="state">CA</span>  <span class="postcode">94520-1405</span><br />
	  <span class="country">USA</span><br />
	  Phone: <span class="phone">+1 925 240-6652</span><br />
	  Fax: <span class="fax">+1 925 674-0821</span><br />
	  Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:info@freebsdmall.com">info@freebsdmall.com</a>&gt;</code><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.freebsdmall.com/" target="_top">http://www.freebsdmall.com/</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	  Dr. Hinner EDV<br />
	  <span class="street">St. Augustinus-Str. 10</span><br />
	  <span class="postcode">D-81825</span> <span class="city">München</span><br />
	  <span class="country">Allemagne</span><br />
	  Phone: <span class="phone">(089) 428 419</span><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.hinner.de/linux/freebsd.html" target="_top">http://www.hinner.de/linux/freebsd.html</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	  Ikarios<br />
	  <span class="street">22-24 rue Voltaire</span><br />
	  <span class="postcode">92000</span> <span class="city">Nanterre</span><br />
	  <span class="country">France</span><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://ikarios.com/form/#freebsd" target="_top">http://ikarios.com/form/#freebsd</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	  JMC Software<br />
	  <span class="country">Ireland</span><br />
	  Phone: <span class="phone">353 1 6291282</span><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.thelinuxmall.com" target="_top">http://www.thelinuxmall.com</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p><br />
	 Linux CD Mall<br />
	 <span class="street">Private Bag MBE N348</span><br />
	 <span class="city">Auckland 1030</span><br />
	 <span class="country">New Zealand</span><br />
	 Phone: <span class="phone">+64 21 866529</span><br />
	 WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.linuxcdmall.co.nz/" target="_top">http://www.linuxcdmall.co.nz/</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p><br />
	  The Linux Emporium<br />
	  <span class="street">Hilliard House, Lester Way</span><br />
	  <span class="city">Wallingford</span><br />
	  <span class="postcode">OX10 9TA</span><br />
	  <span class="country">Royaume-Uni</span><br />
	  Phone: <span class="phone">+44 1491 837010</span><br />
	  Fax: <span class="fax">+44 1491 837016</span><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.linuxemporium.co.uk/products/freebsd/" target="_top">http://www.linuxemporium.co.uk/products/freebsd/</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	  Linux+ DVD Magazine<br />
	  <span class="street">Lewartowskiego 6</span><br />
	  <span class="city">Warsaw</span><br />
	  <span class="postcode">00-190</span><br />
	  <span class="country">Poland</span><br />
	  Phone: <span class="phone">+48 22 860 18 18</span><br />
	  Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:editors@lpmagazine.org">editors@lpmagazine.org</a>&gt;</code><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.lpmagazine.org/" target="_top">http://www.lpmagazine.org/</a></span><br />
	</p></div></li><li class="listitem"><div class="address"><p><br />
	  Linux System Labs Australie<br />
	  <span class="street">21 Ray Drive</span><br />
	  <span class="city">Balwyn North</span><br />
	  <span class="postcode">VIC - 3104</span><br />
	  <span class="country">Australie</span><br />
	  Phone: <span class="phone">+61 3 9857 5918</span><br />
	  Fax: <span class="fax">+61 3 9857 8974</span><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.lsl.com.au" target="_top">http://www.lsl.com.au</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	  LinuxCenter.Ru<br />
	  <span class="street">Galernaya Street, 55</span><br />
	  <span class="city">Saint-Petersburg</span><br />
	  <span class="postcode">190000</span><br />
	  <span class="country">Russia</span><br />
	  Phone: <span class="phone">+7-812-3125208</span><br />
	  Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:info@linuxcenter.ru">info@linuxcenter.ru</a>&gt;</code><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://linuxcenter.ru/freebsd" target="_top">http://linuxcenter.ru/freebsd</a></span><br />
	</p></div></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85726416"></a>A.1.3. Distributeurs</h3></div></div></div><p>Si vous êtes un revendeur et désirez vendre des
	CDROMs de FreeBSD, veuillez contacter un distributeur:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><div class="address"><p><br />
	    Cylogistics<br />
	    <span class="street">809B Cuesta Dr., #2149</span><br />
	    <span class="city">Mountain View</span>, <span class="state">CA</span> <span class="postcode">94040</span><br />
	    <span class="country">USA</span><br />
	    Phone: <span class="phone">+1 650 694-4949</span><br />
	    Fax: <span class="fax">+1 650 694-4953</span><br />
	    Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:sales@cylogistics.com">sales@cylogistics.com</a>&gt;</code><br />
	    WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.cylogistics.com/" target="_top">http://www.cylogistics.com/</a></span><br />
	  </p></div></li><li class="listitem"><div class="address"><p><br />
	  Ingram Micro<br />
	  <span class="street">1600 E. St. Andrew Place</span><br />
	  <span class="city">Santa Ana</span>, <span class="state">CA</span>  <span class="postcode">92705-4926</span><br />
	  <span class="country">USA</span><br />
	  Phone: <span class="phone">1 (800) 456-8000</span><br />
	  WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.ingrammicro.com/" target="_top">http://www.ingrammicro.com/</a></span><br />
        </p></div></li><li class="listitem"><div class="address"><p><br />
	    Kudzu, LLC<br />
	    <span class="street">7375 Washington Ave. S.</span><br />
	    <span class="city">Edina</span>, <span class="state">MN</span> <span class="postcode">55439</span><br />
	    <span class="country">USA</span><br />
	    Phone: <span class="phone">+1 952 947-0822</span><br />
	    Fax: <span class="fax">+1 952 947-0876</span><br />
	    Email: <code class="email">&lt;<a xmlns="" class="email" href="mailto:sales@kudzuenterprises.com">sales@kudzuenterprises.com</a>&gt;</code><br />
	  </p></div></li><li class="listitem"><div class="address"><p><br />
	    Navarre Corp<br />
	    <span class="street">7400 49th Ave South</span><br />
	    <span class="city">New Hope</span>, <span class="state">MN</span> <span class="postcode">55428</span><br />
	    <span class="country">USA</span><br />
	    Phone: <span class="phone">+1 763 535-8333</span><br />
	    Fax: <span class="fax">+1 763 535-0341</span><br />
	    WWW: <span class="otheraddr"><a class="otheraddr" href="http://www.navarre.com/" target="_top">http://www.navarre.com/</a></span><br />
	  </p></div></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-ftp"></a>A.2. Sites FTP</h2></div></div></div><p>&gt;Les sources officielles de FreeBSD sont disponibles via FTP
      anonyme à partir d'un ensemble de sites miroir.  Le site
      <code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/</a></code>
      dispose d'une bonne connectivité et autorise un grand
      nombre de connexions, mais vous avez intérêt à
      trouver plutôt un site miroir &#8220;plus proche&#8221;
      (tout particulièrement si vous décidez de mettre en
      place une sorte de miroir à votre tour).</p><p>La <a class="link" href="http://mirrorlist.FreeBSD.org/" target="_top">base de données
      des sites miroir FreeBSD</a> est plus à jour que la liste
      de ce Manuel, parce qu'elle tire ses informations du DNS
      plutôt que se reposer sur une liste statique de machines.</p><p>De plus, FreeBSD est disponible via FTP anonyme à partir
      des sites miroir ci-dessous.  Si vous décidez de vous
      procurer FreeBSD via FTP anonyme, essayez si possible d'utiliser un
      site proche de vous.  Les sites miroir listés en tant que
      &#8220;sites miroir primaires&#8220; disposent
      généralement de l'intégralité de
      l'archive FreeBSD (toutes les versions actuellement disponibles
      pour chacune des architectures) mais vous obtiendrez les temps
      de téléchargements les plus courts à partir
      d'un site situé dans votre pays ou votre région.  Les sites régionaux
      proposent les versions les plus récentes des
      architectures les plus populaires mais pourraient ne pas
      proposer l'intégralité de l'archive de FreeBSD.  Tous
      les sites proposent un accès FTP anonyme mais certains
      sites fournissent également un accès suivant
      d'autres méthodes.  Les méthodes d'accès
      disponibles pour chaque site sont données entre
      parenthèses après le nom de la machine.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a id="central-ftp"></a>Serveurs primaires</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-primary-ftp"></a>Sites miroirs primaires</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:mirror-admin@FreeBSD.org">mirror-admin@FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp1.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp4.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp10.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp10.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp10.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp10.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp10.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp10.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp11.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp11.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp13.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp13.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp14.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp14.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp14.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp14.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-za-ftp"></a>Afrique du Sud</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@za.FreeBSD.org">hostmaster@za.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.za.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.za.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.za.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.za.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.za.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.za.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-de-ftp"></a>Allemagne</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:de-bsd-hubs@de.FreeBSD.org">de-bsd-hubs@de.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.de.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp1.de.FreeBSD.org/freebsd/" target="_top">ftp://ftp1.de.FreeBSD.org/freebsd/</a> (ftp / <a class="link" href="http://www1.de.FreeBSD.org/freebsd/" target="_top">http://www1.de.FreeBSD.org/freebsd/</a> / <a class="link" href="rsync://rsync3.de.FreeBSD.org/freebsd/" target="_top">rsync://rsync3.de.FreeBSD.org/freebsd/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.de.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.de.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.de.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.de.FreeBSD.org/FreeBSD/" target="_top">ftp://ftp4.de.FreeBSD.org/FreeBSD/</a> (ftp / <a class="link" href="http://ftp4.de.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.de.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.de.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.de.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp7.de.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp7.de.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.de.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.de.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-sa-ftp"></a>Arabie Saoudite</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:ftpadmin@isu.net.sa">ftpadmin@isu.net.sa</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.isu.net.sa/pub/ftp.freebsd.org/" target="_top">ftp://ftp.isu.net.sa/pub/ftp.freebsd.org/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-am-ftp"></a>Armenia</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@am.FreeBSD.org">hostmaster@am.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp1.am.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.am.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp1.am.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp1.am.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-au-ftp"></a>Australie</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@au.FreeBSD.org">hostmaster@au.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.au.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.au.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.au.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.au.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.au.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.au.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-at-ftp"></a>Autriche</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@at.FreeBSD.org">hostmaster@at.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.at.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.at.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp.at.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.at.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.at.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.at.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-br-ftp"></a>Brésil</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@br.FreeBSD.org">hostmaster@br.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp2.br.FreeBSD.org/FreeBSD/" target="_top">ftp://ftp2.br.FreeBSD.org/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.br.FreeBSD.org/" target="_top">http://ftp2.br.FreeBSD.org/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.br.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.br.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.br.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.br.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ca-ftp"></a>Canada</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ca.FreeBSD.org">hostmaster@ca.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ca.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ca.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.ca.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.ca.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-cn-ftp"></a>Chine</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@cn.FreeBSD.org">hostmaster@cn.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.cn.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.cn.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-kr-ftp"></a>Corée</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@kr.FreeBSD.org">hostmaster@kr.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.kr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.kr.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.kr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.kr.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.kr.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.kr.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-dk-ftp"></a>Danemark</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@dk.FreeBSD.org">hostmaster@dk.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.dk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.dk.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp.dk.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.dk.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.dk.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.dk.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-es-ftp"></a>Espagne</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@es.FreeBSD.org">hostmaster@es.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.es.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.es.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.es.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.es.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.es.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.es.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ee-ftp"></a>Estonie</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ee.FreeBSD.org">hostmaster@ee.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ee.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ee.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-fi-ftp"></a>Finlande</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@fi.FreeBSD.org">hostmaster@fi.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.fi.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.fi.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-fr-ftp"></a>France</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@fr.FreeBSD.org">hostmaster@fr.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp1.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp1.fr.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp1.fr.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.fr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.fr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-gr-ftp"></a>Grèce</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@gr.FreeBSD.org">hostmaster@gr.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.gr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.gr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.gr.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.gr.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-hk-ftp"></a>Hong-Kong</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.hk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.hk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ie-ftp"></a>Irlande</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ie.FreeBSD.org">hostmaster@ie.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp3.ie.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.ie.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-jp-ftp"></a>Japon</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@jp.FreeBSD.org">hostmaster@jp.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp9.jp.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp9.jp.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-lv-ftp"></a>Lettonie</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@lv.FreeBSD.org">hostmaster@lv.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.lv.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.lv.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.lv.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.lv.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-lt-ftp"></a>Lituanie</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@lt.FreeBSD.org">hostmaster@lt.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.lt.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.lt.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.lt.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.lt.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-no-ftp"></a>Norvège</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@no.FreeBSD.org">hostmaster@no.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.no.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.no.FreeBSD.org/pub/FreeBSD/</a> (ftp / rsync) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-nz-ftp"></a>Nouvelle-Zélande</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.nz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.nz.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.nz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.nz.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-nl-ftp"></a>Pays-Bas</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@nl.FreeBSD.org">hostmaster@nl.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.nl.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.nl.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.nl.FreeBSD.org/os/FreeBSD/" target="_top">http://ftp.nl.FreeBSD.org/os/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.nl.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.nl.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-pl-ftp"></a>Pologne</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@pl.FreeBSD.org">hostmaster@pl.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.pl.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.pl.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p>ftp2.pl.FreeBSD.org</p></li></ul></div></dd><dt><span class="term"><a id="mirrors-cz-ftp"></a>République Tchèque</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@cz.FreeBSD.org">hostmaster@cz.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp.cz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.cz.FreeBSD.org/pub/FreeBSD/</a> / rsync / rsyncv6) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.cz.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.cz.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.cz.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.cz.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-uk-ftp"></a>Royaume-Uni</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@uk.FreeBSD.org">hostmaster@uk.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="rsync://ftp2.uk.FreeBSD.org/ftp.freebsd.org/pub/FreeBSD/" target="_top">rsync://ftp2.uk.FreeBSD.org/ftp.freebsd.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.uk.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.uk.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ru-ftp"></a>Russie</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ru.FreeBSD.org">hostmaster@ru.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.ru.FreeBSD.org/FreeBSD/" target="_top">http://ftp.ru.FreeBSD.org/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp2.ru.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.ru.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp5.ru.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp5.ru.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.ru.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.ru.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-si-ftp"></a>Slovénie</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@si.FreeBSD.org">hostmaster@si.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.si.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.si.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-se-ftp"></a>Suède</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@se.FreeBSD.org">hostmaster@se.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.se.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.se.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="rsync://ftp2.se.FreeBSD.org/" target="_top">rsync://ftp2.se.FreeBSD.org/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.se.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/" target="_top">rsync://ftp4.se.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.se.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.se.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp6.se.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp6.se.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ch-ftp"></a>Suisse</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@ch.FreeBSD.org">hostmaster@ch.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ch.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ch.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.ch.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.ch.FreeBSD.org/pub/FreeBSD/</a>) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-tw-ftp"></a>Taïwan</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@tw.FreeBSD.org">hostmaster@tw.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.tw.FreeBSD.org/pub/FreeBSD/</a> / rsync / rsyncv6) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp2.tw.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp2.tw.FreeBSD.org/pub/FreeBSD/</a> / rsync / rsyncv6) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp6.tw.FreeBSD.org/" target="_top">http://ftp6.tw.FreeBSD.org/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp11.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp11.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp11.tw.FreeBSD.org/FreeBSD/" target="_top">http://ftp11.tw.FreeBSD.org/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp12.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp12.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp13.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp13.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp14.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp14.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp15.tw.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp15.tw.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-ua-ftp"></a>Ukraine</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp.ua.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp.ua.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp.ua.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp.ua.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.ua.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.ua.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp6.ua.FreeBSD.org/pub/FreeBSD" target="_top">http://ftp6.ua.FreeBSD.org/pub/FreeBSD</a> / <a class="link" href="rsync://ftp6.ua.FreeBSD.org/FreeBSD/" target="_top">rsync://ftp6.ua.FreeBSD.org/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp7.ua.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp7.ua.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd><dt><span class="term"><a id="mirrors-us-ftp"></a>USA</span></dt><dd><p>En cas de problèmes, merci de contacter le hostmaster
      <code class="email">&lt;<a xmlns="" class="email" href="mailto:hostmaster@us.FreeBSD.org">hostmaster@us.FreeBSD.org</a>&gt;</code> pour ce domaine.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="ftp://ftp1.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp1.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp2.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp2.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp3.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp3.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp4.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp4.us.FreeBSD.org/pub/FreeBSD/</a> (ftp / ftpv6 / <a class="link" href="http://ftp4.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.us.FreeBSD.org/pub/FreeBSD/</a> / <a class="link" href="http://ftp4.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp4.us.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp5.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp5.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp6.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp6.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp8.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp8.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp10.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp10.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp11.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp11.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp13.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp13.us.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp13.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp13.us.FreeBSD.org/pub/FreeBSD/</a> / rsync) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp14.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp14.us.FreeBSD.org/pub/FreeBSD/</a> (ftp / <a class="link" href="http://ftp14.us.FreeBSD.org/pub/FreeBSD/" target="_top">http://ftp14.us.FreeBSD.org/pub/FreeBSD/</a>) </p></li><li class="listitem"><p><a class="link" href="ftp://ftp15.us.FreeBSD.org/pub/FreeBSD/" target="_top">ftp://ftp15.us.FreeBSD.org/pub/FreeBSD/</a> (ftp) </p></li></ul></div></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="anoncvs"></a>A.3. CVS anonyme</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="anoncvs-intro"></a>A.3.1. Introduction</h3></div></div></div><a id="idp86174032" class="indexterm"></a><p>CVS anonyme (ou comme on l'appelle également,
	  <span class="emphasis"><em>anoncvs</em></span>) est une de fonctionnalité
	  des utilitaires CVS livrés avec FreeBSD qui permet la
	  synchronisation avec un référentiel CVS sur une machine
	  distante.  Elle permet, entre autres, aux utilisateurs
	  de FreeBSD, de lire, sans autorisation particulière, les
	  archives disponibles sur l'un des serveurs
	  <span class="application">anoncvs</span> officiels du projet
	  FreeBSD.  Pour l'utiliser, il suffit simplement de définir
	  la variable d'environnement <code class="envar">CVSROOT</code>
	  pour qu'elle pointe sur le serveur
	  <span class="application">anoncvs</span> approprié,
	  fournir le fameux mot de passe &#8220;anoncvs&#8221; avec la
	  commande <code class="command">cvs login</code>, puis ensuite utiliser
	  la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> pour y accéder de la même
	  manière qu'à un référentiel local.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">La commande <code class="command">cvs login</code>, stocke les
	    mots de passe utilisés pour authentification sur le
	    serveur CVS dans un fichier appelé
	    <code class="filename">.cvspass</code> dans votre répertoire
	    <code class="envar">HOME</code>.  Si ce fichier n'existe pas, vous
	    pourrez obtenir une erreur quand vous essaierez d'utiliser
	    <code class="command">cvs login</code> pour la première fois.
	    Créez juste un fichier <code class="filename">.cvspass</code> vide,
	    et relancez la commande.</p></div><p>Bien que l'on puisse aussi dire que <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">CVSup</a> et <span class="application">anoncvs</span>
	  assurent globalement la même fonction, il y a diverses
	  nuances qui peuvent influencer l'utilisateur dans son choix
	  d'une méthode de synchronisation.  En résumé,
	  <span class="application">CVSup</span> utilise plus efficacement
	  les ressources réseau et est de loin la méthode la plus
	  sophistiquée des deux, mais cela a un prix.  Pour employer
	  <span class="application">CVSup</span>, il faut d'abord installer
	  et configurer un programme client spécialisé
	  avant de pouvoir récupérer quoi que ce soit,
	  et il faut ensuite travailler par sous-ensemble relativement
	  importants, que <span class="application">CVSup</span> appelle
	  <span class="emphasis"><em>catalogues</em></span>.</p><p><span class="application">anoncvs</span>, au contraire, peut
	  être utilisé pour examiner n'importe quoi, d'un
	  seul fichier à un programme particulier (tel que
	  <code class="command">ls</code> ou <code class="command">grep</code>) en faisant
	  référence au nom du module CVS.  Bien sûr,
	  <span class="application">anoncvs</span> n'est bon qu'à lire
	  un référentiel CVS, si vous avez donc l'intention de
	  développer localement sur un référentiel
	  partagé avec le projet FreeBSD, alors vous n'avez d'autre choix
	  que d'utiliser <span class="application">CVSup</span>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="anoncvs-usage"></a>A.3.2. Utiliser CVS anonyme</h3></div></div></div><p>Configurer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> pour utiliser un
	  référentiel <span class="application">CVS anonyme</span>
	  consiste simplement à définir la variable
	  d'environnement <code class="envar">CVSROOT</code> pour qu'elle pointe
	  sur l'un des serveurs <span class="application">anoncvs</span> du
	  projet FreeBSD.  A la date de rédaction de ce document,
	  les serveurs suivants sont disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Autriche</em></span>:
	      :pserver:anoncvs@anoncvs.at.FreeBSD.org:/home/ncvs
	      (Utilisez <code class="command">cvs login</code> et entrez le mot
	      de passe &#8220;anoncvs&#8221; quand on vous le
	      demandera.)</p></li><li class="listitem"><p><span class="emphasis"><em>France</em></span>:
	      :pserver:anoncvs@anoncvs.fr.FreeBSD.org:/home/ncvs
	      (pserver (mot de passe &#8220;anoncvs&#8221;), ssh (aucun
	      mot de passe))
	    </p></li><li class="listitem"><p><span class="emphasis"><em>Allemagne</em></span>:
	      :pserver:anoncvs@anoncvs.de.FreeBSD.org:/home/ncvs
	      (rsh, pserver, ssh, ssh/2022)
	      </p></li><li class="listitem"><p><span class="emphasis"><em>Japon</em></span>:
	      :pserver:anoncvs@anoncvs.jp.FreeBSD.org:/home/ncvs
	      (Utilisez <code class="command">cvs login</code> et entrez le mot
	      de passe &#8220;anoncvs&#8221; quand on vous le
	      demandera.)</p></li><li class="listitem"><p><span class="emphasis"><em>Taiwan</em></span>:
	      :pserver:anoncvs@anoncvs.tw.FreeBSD.org:/home/ncvs
	      (pserver (utilisez <code class="command">cvs login</code> and entrez
	      n'importe quel mot de passe quand on vous le demandera),
	      ssh (pas de mot de passe))</p><pre class="programlisting">SSH2 HostKey: 1024 e8:3b:29:7b:ca:9f:ac:e9:45:cb:c8:17:ae:9b:eb:55 /etc/ssh/ssh_host_dsa_key.pub</pre></li><li class="listitem"><p><span class="emphasis"><em>USA</em></span>:
	      freebsdanoncvs@anoncvs.FreeBSD.org:/home/ncvs
	      (ssh uniquement - pas de mot de passe)</p><pre class="programlisting">SSH HostKey: 1024 a1:e7:46:de:fb:56:ef:05:bc:73:aa:91:09:da:f7:f4 root@sanmateo.ecn.purdue.edu
SSH2 HostKey: 1024 52:02:38:1a:2f:a8:71:d3:f5:83:93:8d:aa:00:6f:65 ssh_host_dsa_key.pub</pre></li><li class="listitem"><p><span class="emphasis"><em>USA</em></span>:
	      anoncvs@anoncvs1.FreeBSD.org:/home/ncvs
	      (ssh2 uniquement - pas de mot de passe)</p><pre class="programlisting">SSH2 HostKey: 2048 53:1f:15:a3:72:5c:43:f6:44:0e:6a:e9:bb:f8:01:62 /etc/ssh/ssh_host_dsa_key.pub</pre></li></ul></div><p>Comme CVS vous permet de récupérer
	  (&#8220;check out&#8221;) pratiquement n'importe quelle
	  version des sources de FreeBSD ayant existé (ou, dans
	  certains cas, à venir), vous devez maîtriser
	  l'indicateur de révision (<code class="option">-r</code>) de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> et connaître les valeurs qu'il peut prendre
	  dans le référentiel du projet FreeBSD.</p><p>Il y a deux sortes d'étiquettes, les étiquettes
	  de révision et les étiquettes de branches.  Les
	  étiquettes de révision s'appliquent à une
	  révision particulière.  Leur signification ne
	  varie pas d'un jour à l'autre.  Les étiquettes de
	  branche, à l'inverse, se rapportent à la
	  dernière révision
	  sur une branche particulière à un moment donné.
	  Comme les étiquettes de branche ne se rapportent pas
	  à une révision particulière, elles peuvent
	  désigner demain quelque chose de différent de ce
	  qu'elles référencent
	  aujourd'hui.</p><p><a class="xref" href="#cvs-tags" title="A.7. Etiquettes CVS">Section A.7, « Etiquettes CVS »</a> présente les étiquettes
	  de révision qui peuvent intéresser l'utilisateur.
	  Encore une fois, aucune ne s'applique au catalogue des
	  logiciels portés puisque ce dernier ne présente pas
	  de multiples branches de développement.</p><p>Quand vous précisez une étiquette de branche,
	  vous obtenez normalement la dernière version des fichiers
	  de cette branche de développement.  Si vous voulez une
	  version antérieure, vous pouvez l'obtenir en
	  précisant une date avec l'indicateur <code class="option">-D
	  date</code>.  Reportez-vous aux pages de manuel
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> pour plus de détails.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86216016"></a>A.3.3. Exemples</h3></div></div></div><p>Bien qu'il soit vraiment recommandé de lire
	  attentivement les pages de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvs</span>(1)</span></a> avant de
	  faire quoi que ce soit, voici quelques exemples rapides
	  qui vous montrent essentiellement comment utiliser
	  <span class="application">CVS anonyme</span>:</p><div class="example"><a id="idp86218320"></a><div class="example-title">Exemple A.1. Récupérer quelque chose de -CURRENT (<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>):</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv CVSROOT :pserver:anoncvs@anoncvs.tw.FreeBSD.org:/home/ncvs</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs login</code></strong>
<span class="emphasis"><em>At the prompt, enter any word for</em></span> <span class="quote">« <span class="quote">password</span> »</span>.
<code class="prompt">%</code> <strong class="userinput"><code>cvs co ls</code></strong>
	  </pre></div></div><br class="example-break" /><div class="example"><a id="idp86223312"></a><div class="example-title">Exemple A.2. Utiliser SSH pour récupérer
	    l'arborescence <code class="filename">src/</code>:</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>cvs -d freebsdanoncvs@anoncvs.FreeBSD.org:/home/ncvs co src</code></strong>
The authenticity of host 'anoncvs.freebsd.org (128.46.156.46)' can't be established.
DSA key fingerprint is 52:02:38:1a:2f:a8:71:d3:f5:83:93:8d:aa:00:6f:65.
Are you sure you want to continue connecting (yes/no)? <strong class="userinput"><code>yes</code></strong>
Warning: Permanently added 'anoncvs.freebsd.org' (DSA) to the list of known hosts.</pre></div></div><br class="example-break" /><div class="example"><a id="idp86225872"></a><div class="example-title">Exemple A.3. Récupérer la version 6-STABLE de
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a>:</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv CVSROOT :pserver:anoncvs@anoncvs.tw.FreeBSD.org:/home/ncvs</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs login</code></strong>
<span class="emphasis"><em>At the prompt, enter any word for</em></span> <span class="quote">« <span class="quote">password</span> »</span>.
<code class="prompt">%</code> <strong class="userinput"><code>cvs co -rRELENG_6 ls</code></strong>
	  </pre></div></div><br class="example-break" /><div class="example"><a id="idp86243152"></a><div class="example-title">Exemple A.4. Générer la liste des différences
	    concernant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ls&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span></a> (sous forme de &#8220;diffs
	    unifiés&#8221;) entre différentes versions de FreeBSD</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv CVSROOT :pserver:anoncvs@anoncvs.tw.FreeBSD.org:/home/ncvs</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs login</code></strong>
<span class="emphasis"><em>At the prompt, enter any word for</em></span> <span class="quote">« <span class="quote">password</span> »</span>.
<code class="prompt">%</code> <strong class="userinput"><code>cvs rdiff -u -rRELENG_5_3_0_RELEASE -rRELENG_5_4_0_RELEASE ls</code></strong>
	  </pre></div></div><br class="example-break" /><div class="example"><a id="idp86248016"></a><div class="example-title">Exemple A.5. Savoir quels autres noms de modules peuvent
	    être utilisés:</div><div class="example-contents"><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>setenv CVSROOT :pserver:anoncvs@anoncvs.tw.FreeBSD.org:/home/ncvs</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>cvs login</code></strong>
<span class="emphasis"><em>At the prompt, enter any word for</em></span> <span class="quote">« <span class="quote">password</span> »</span>.
<code class="prompt">%</code> <strong class="userinput"><code>cvs co modules</code></strong>
<code class="prompt">%</code> <strong class="userinput"><code>more modules/modules</code></strong>
	  </pre></div></div><br class="example-break" /></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86253136"></a>A.3.4. Autres ressources</h3></div></div></div><p>Les ressources supplémentaires suivantes peuvent
	  être utiles pour apprendre à se servir de
	  CVS:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.csc.calpoly.edu/~dbutler/tutorials/winter96/cvs/" target="_top">Guide CVS</a> de Cal Poly.</p></li><li class="listitem"><p><a class="link" href="http://ximbiot.com/cvs/wiki/" target="_top">CVS Home</a>,
	      la communauté de développement et de support
	      de CVS.</p></li><li class="listitem"><p><a class="link" href="http://www.FreeBSD.org/cgi/cvsweb.cgi" target="_top">CVSweb</a> est
	      l'interface Web pour CVS du projet FreeBSD.</p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ctm"></a>A.4. Utiliser CTM</h2></div></div></div><a id="idp86259152" class="indexterm"></a><p><span class="application">CTM</span> est une méthode pour
	synchroniser une arborescence de répertoires distants
	avec une arborescence centrale.  Elle a été
	développée pour être utilisée avec
	l'arborescence des sources de FreeBSD, bien que d'autres
	puissent avec le temps la trouver utile pour d'autres
	besoins.  Il existe actuellement très peu, sinon aucune,
	documentation sur la façon de créer les deltas,
	contactez-donc la liste de diffusion <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-users" target="_top">ctm-users</a> pour obtenir plus
	d'informations et si vous souhaitez utiliser
	<span class="application">CTM</span> pour autre chose.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86261456"></a>A.4.1. Pourquoi utiliser <span class="application">CTM</span>?</h3></div></div></div><p><span class="application">CTM</span> vous procurera un
	  exemplaire local de l'arborescence des sources de FreeBSD.
	  Il y a plusieurs &#8220;moutures&#8221; de l'arborescence
	  disponibles.  Que vous désiriez suivre toute l'arborescence
	  CVS ou seulement une de ses branches,
	  <span class="application">CTM</span> peut vous fournir ce dont
	  vous avez besoin.  Si vous développez activement sous
	  FreeBSD, mais ne disposez que d'une connectivité TCP/IP
	  peu fiable ou n'en avez pas du tout, ou voulez tout
	  simplement que les modifications vous soient automatiquement
	  envoyées, <span class="application">CTM</span> est ce qu'il vous
	  faut.  Il vous faudra jusqu'à trois deltas par jour sur
	  les branches les plus actives.  Cependant, vous devriez
	  envisager de vous les faire envoyer automatiquement par
	  courrier électronique.  La taille des mises à jour
	  est toujours aussi petite que possible.  Typiquement moins
	  de 5KO, occasionnellement (une fois sur 10), entre 10 et
	  50KO, et de temps à autre, une grosse modification de 100KO
	  ou plus.</p><p>Vous devrez aussi vous tenir au courant des
	  différentes contre-parties liées au fait de
	  travailler directement avec les sources en cours de
	  développement plutôt qu'avec les versions
	  publiées.  C'est particulièrement vrai si vous
	  choisissez les sources de la branche &#8220;-CURRENT&#8221;.
	  Il est recommandé de lire <a class="link" href="#current" title="24.4.1. Se synchroniser avec la version -CURRENT de FreeBSD">Se
	  synchroniser avec la version -CURRENT de
	  FreeBSD</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86264912"></a>A.4.2. Que vous faut-il pour utiliser
	  <span class="application">CTM</span>?</h3></div></div></div><p>Vous aurez besoin de deux choses: le programme
	  <span class="application">CTM</span>, et les deltas initiaux
	  à lui fournir (pour mettre à jour avec la version
	  &#8220;courante&#8221;).</p><p>Le programme <span class="application">CTM</span> fait partie
	  de FreeBSD depuis la publication de la version 2.0, et se
	  trouve dans <code class="filename">/usr/src/usr.sbin/ctm</code> si
	  vous avez un exemplaire des sources en ligne.</p><p>Vous pouvez obtenir les &#8220;deltas&#8221; à
	  fournir à <span class="application">CTM</span> de deux
	  façons, par FTP ou par courrier électronique.  Si vous
	  avez un accès FTP à l'Internet, les sites suivants
	  supportent l'accès à
	  <span class="application">CTM</span>:</p><p><code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/CTM/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/CTM/</a></code></p><p>ou reportez-vous à la section <a class="link" href="#mirrors-ctm" title="A.4.9. Miroirs CTM">Sites miroirs</a>.</p><p>Allez dans le répertoire vous concernant et commencez
	  par télécharger le fichier
	  <code class="filename">README</code>.</p><p>Si vous souhaitez récupérer vos deltas par
	  courrier électronique:</p><p>Abonnez-vous à l'une des listes de distribution
	  <span class="application">CTM</span>.  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-cvs-cur" target="_top">ctm-cvs-cur</a>
	  comprend toute l'arborescence -CURRENT.
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-src-4" target="_top">ctm-src-4</a> concerne la branche 4.X, etc...
	  (Si vous ne savez pas comment vous abonner à une liste,
	  cliquez sur le nom de la liste ci-dessus ou sur
	  <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a> puis cliquez sur la liste à
	  laquelle vous désirez vous abonner.  La page devrait
	  contenir toutes les instructions nécessaires à
	  l'abonnement.)</p><p>Dès que vous commencez à recevoir vos
	  mises à jour <span class="application">CTM</span> par courrier
	  électronique, vous pouvez utiliser le programme
	  <code class="command">ctm_rmail</code> pour les décompacter et
	  les appliquer.  Vous pouvez en fait utiliser directement le
	  programme <code class="command">ctm_rmail</code> à partir d'une
	  entrée dans <code class="filename">/etc/aliases</code> si vous
	  voulez automatiser complètement le processus.  Consultez les
	  pages de manuel de <code class="command">ctm_rmail</code> pour plus de
	  détails.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Quelle que soit la méthode que vous utilisez
	    pour récupérer les deltas
	    <span class="application">CTM</span>, vous devriez vous abonner
	    à la liste de diffusion <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-announce" target="_top">ctm-announce</a>.
	    Ce sera, dans l'avenir, le seul endroit où les
	    annonces concernant le fonctionnement du système
	    <span class="application">CTM</span> seront faites.
	    Cliquez sur le nom de la liste et suivez les instructions
	    pour s'inscrire à la liste.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86283088"></a>A.4.3. Utiliser <span class="application">CTM</span> pour la
	  première fois</h3></div></div></div><p>Avant de pouvoir utiliser les deltas
	  <span class="application">CTM</span>, il vous faut un point de
	  départ pour appliquer les deltas générés
	  à partir de là.</p><p>Tout d'abord vous devez déterminer ce que vous
	  avez déjà.  Tout le monde peut partir d'un
	  répertoire &#8220;vide&#8221;.  Vous devez utiliser
	  un delta &#8220;Empty&#8221; (vide) au départ pour
	  débuter votre arborescence supportée par
	  <span class="application">CTM</span>.
	  Il fut question que l'un de ces deltas de départ
	  soit distribué sur le CD, cependant ce n'est
	  actuellement pas le cas.</p><p>Puisque les arborescences représentent plusieurs
	  dizaines de mégaoctets, vous préférerez
	  commencer avec ce que vous avez déjà sous la main.
	  Si vous disposez d'une version de FreeBSD sur CD, vous
	  pouvez copier ou extraire les sources initiales
	  qui s'y trouvent.  Cela évitera un transfert de
	  données conséquent.</p><p>Vous pouvez reconnaître ces deltas de transition
	  au <code class="literal">X</code> qui suit leur numéro de
	  séquence
	  (<code class="filename">src-cur.3210XEmpty.gz</code> par exemple).
	  La dénomination après le <code class="literal">X</code>
	  correspond à l'origine de votre &#8220;racine&#8221;
	  initiale.  <code class="filename">Empty</code> est un répertoire
	  vide.  La règle est qu'une transition de base à
	  partir de <code class="filename">Empty</code> est
	  générée tous les 100 deltas.  Au passage,
	  elles sont volumineuses! De 70 à 80 mégaoctets de
	  données compressées avec <code class="command">gzip</code>
	  est une taille habituelle pour les deltas
	  <code class="filename">XEmpty</code>.</p><p>Une fois que vous avez sélectionné un delta
	  initial à partir duquel commencer, il vous faudra
	  également tous les deltas de numéro supérieur
	  qui le suivent.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86293968"></a>A.4.4. Utiliser <span class="application">CTM</span> au quotidien</h3></div></div></div><p>Pour appliquer les deltas, tapez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /où/vous/voulez/mettre/les/fichiers</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ctm -v -v /où/vous/mettez/vos/deltas/src-xxx.*</code></strong></pre><p><span class="application">CTM</span> reconnaît les deltas
	  qui ont été compressés avec <code class="command">gzip</code>,
	  vous n'avez donc pas besoin de les décompresser avant,
	  ce qui économise de l'espace disque.</p><p>A moins d'être absolument sûr du résultat,
	  <span class="application">CTM</span> ne touchera pas à
	  votre arborescence.  Pour contrôler la validité
	  d'un delta, vous pouvez également utiliser
	  l'indicateur <code class="option">-c</code> et
	  <span class="application">CTM</span> ne modifiera alors pas
	  votre arborescence; il vérifiera simplement
	  l'intégrité du delta et regardera s'il peut
	  s'appliquer proprement à votre arborescence en
	  l'état.</p><p>Il y a aussi d'autres option pour
	  <span class="application">CTM</span>, voyez les pages de manuel ou
	  lisez les sources pour plus d'informations.</p><p>C'est à peu près tout.  Chaque fois que vous recevez
	  un delta, passez-le à <span class="application">CTM</span>
	  pour tenir à jour votre arborescence des sources.</p><p>N'effacez pas les deltas s'il vous est difficile de
	  les télécharger de nouveau.  Vous pouvez en avoir
	  besoin si quelque chose mauvais se produit.  Même
	  si vous n'avez que des disquettes, envisagez d'utiliser
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=fdwrite&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">fdwrite</span>(1)</span></a> pour en faire une copie.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86306768"></a>A.4.5. Conserver vos modifications locales</h3></div></div></div><p>Si vous êtes développeur vous voudrez
	  expérimenter et modifier des fichiers de l'arborescence
	  des sources.  <span class="application">CTM</span> supporte
	  de façon limitée les modifications locales: avant
	  de contrôler l'existence d'un fichier
	  <code class="filename">foo</code>, il regarde tout d'abord s'il y a
	  un fichier <code class="filename">foo.ctm</code>.  Si ce fichier
	  existe, <span class="application">CTM</span> l'utilisera au lieu
	  de <code class="filename">foo</code>.</p><p>Ce comportement vous permet de conserver de façon
	  simple des modifications locales: copiez simplement les
	  fichiers que vous envisagez de modifier dans des fichiers
	  de même nom, mais avec le suffixe
	  <code class="filename">.ctm</code>.  Vous pouvez ensuite bidouiller
	  tranquillement le code, pendant que
	  <span class="application">CTM</span> maintient à jour le
	  fichier <code class="filename">.ctm</code>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86311504"></a>A.4.6. D'autres options intéressantes de
	  <span class="application">CTM</span></h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86312400"></a>A.4.6.1. Savoir avec précision ce que va modifier
	    une mise à jour</h4></div></div></div><p>Vous pouvez connaître la liste des modifications
	    que <span class="application">CTM</span> appliquera à
	    votre archive des sources en utilisant
	    <span class="application">CTM</span> avec l'option
	    <code class="option">-l</code>.</p><p>C'est utile si vous voulez conserver la trace des
	    modifications, pré- ou post- modifier les fichiers
	    concernés, ou vous vous sentez un tantinet
	    paranoïaque.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86315344"></a>A.4.6.2. Faire des sauvegardes avant la mise
	    à jour</h4></div></div></div><p>Parfois vous voudrez sauvegarder tous les fichiers
	    qui seraient toucher par une mise à jour
	    <span class="application">CTM</span>.</p><p>Avec l'option
	    <code class="option">-B fichier_de_sauvegarde</code>,
	    <span class="application">CTM</span> sauvegarde tous les
	    fichiers que seraient modifiés par delta
	    <span class="application">CTM</span> donné dans
	    <code class="filename">fichier_de_sauvegarde</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86318800"></a>A.4.6.3. Restreindre la liste des fichiers touchés
	    par une mise à jour</h4></div></div></div><p>Parfois vous voudrez restreindre le champ d'application
	    d'une mise à jour <span class="application">CTM</span>,
	    ou serez intéressé à n'extraire que
	    quelques fichiers d'une séquence de deltas.</p><p>Vous pouvez contrôler la liste de fichiers
	    sur laquelle travaillera <span class="application">CTM</span>
	    en donnant comme filtre une expression régulière
	    avec les options <code class="option">-e</code> et
	    <code class="option">-x</code>.</p><p>Par exemple, pour extraire une version à jour
	    de <code class="filename">lib/libc/Makefile</code> de la série
	    de deltas <span class="application">CTM</span> que vous
	    avez sauvegardé, lancez les commandes:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /where/ever/you/want/to/extract/it/</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>ctm -e '^lib/libc/Makefile' ~ctm/src-xxx.*</code></strong></pre><p>Pour chaque fichier d'un delta
	    <span class="application">CTM</span>, les options
	    <code class="option">-e</code> et <code class="option">-x</code> sont
	    appliquées dans l'ordre donné sur la ligne de
	    commande.  Le fichier est traité par
	    <span class="application">CTM</span> uniquement s'il est
	    sélectionné après application des options
	    <code class="option">-e</code> et <code class="option">-x</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86339920"></a>A.4.7. Perspectives pour <span class="application">CTM</span></h3></div></div></div><p>Il y en a des tonnes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Utiliser une méthode d'authentification
	      au système <span class="application">CTM</span> pour
	      détecter la substitution de mises à
	      jour.</p></li><li class="listitem"><p>Faire le ménage dans les options de
	      <span class="application">CTM</span>, elles commencent à
	      engendrer de la confusion et à contredire
	      l'intuition.</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86344400"></a>A.4.8. Divers</h3></div></div></div><p>Il existe aussi une séquence de deltas pour le
	  catalogue des logiciels portés, mais elle n'a pas
	  reçue beaucoup d'écho jusqu'ici.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="mirrors-ctm"></a>A.4.9. Miroirs <span class="application">CTM</span></h3></div></div></div><p><a class="link" href="#ctm" title="A.4. Utiliser CTM">CTM</a>/FreeBSD est disponible via
      FTP anonyme sur les miroirs suivants.  Si vous faites le choix
      de vous procurer <span class="application">CTM</span> via FTP anonyme,
      utilisez s'il vous plaît un site proche de vous.</p><p>En cas de problème, contactez la liste de diffusion
      <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/ctm-users" target="_top">ctm-users</a>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Californie, Bay Area, source officielle</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ftp.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ftp.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li></ul></div></dd><dt><span class="term">Afrique du Sud, serveur de sauvegarde pour les anciens
	  deltas</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ftp.za.FreeBSD.org/pub/FreeBSD/CTM/" target="_top">ftp://ftp.za.FreeBSD.org/pub/FreeBSD/CTM/</a></code></p></li></ul></div></dd><dt><span class="term">Taïwan/R.O.C.</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ctm.tw.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ctm.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ctm2.tw.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ctm2.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li><li class="listitem"><p><code class="uri"><a class="uri" href="ftp://ctm3.tw.FreeBSD.org/pub/FreeBSD/development/CTM/" target="_top">ftp://ctm3.tw.FreeBSD.org/pub/FreeBSD/development/CTM/</a></code></p></li></ul></div></dd></dl></div><p>Si vous n'avez pas trouvé de miroir proche de vous,
      où si le miroir est incomplet, essayez d'utiliser un moteur
      de recherche comme
      <a class="link" href="http://www.alltheweb.com/" target="_top">alltheweb</a>.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="cvsup"></a>A.5. Utiliser CVSup</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-intro"></a>A.5.1. Introduction</h3></div></div></div><p><span class="application">CVSup</span> est un ensemble de
	logiciels pour la distribution et la mise à jour
	d'arborescences de sources à partir d'un
	référentiel CVS principal sur une machine serveur
	distante.  Les sources de FreeBSD sont archivées sous
	un référentiel CVS sur une machine centrale de
	développement en Californie.  Grâce à
	<span class="application">CVSup</span>, les utilisateurs
	de FreeBSD peuvent facilement tenir à jour leur
	propre arborescence de sources.</p><p><span class="application">CVSup</span> utilise le modèle
	<span class="emphasis"><em>pull</em></span> de mise à jour.  Dans ce
	schéma, chaque client réclame les mises à
	jour au serveur, si et quand il le souhaite.  Le serveur
	attend passivement les demandes de mises à jour
	de ses clients.  Toutes les mises à jour sont donc faites
	à la demande du client.  Le serveur n'envoie jamais de
	mise à jour non sollicitée.  Les utilisateurs doivent
	soit exécuter le client <span class="application">CVSup</span>
	à la main pour obtenir une mise à jour, soit
	mettre en oeuvre une tâche <code class="command">cron</code>
	pour l'exécuter automatiquement et à intervalles
	réguliers.</p><p>Le terme <span class="application">CVSup</span>,
	avec les majuscules, désigne l'ensemble du logiciel.
	Ses principales composantes sont le client
	<code class="command">cvsup</code> qui s'exécute sur les
	machines de chaque utilisateur, et le serveur
	<code class="command">cvsupd</code>, qui tourne sur tous les sites
	miroir de FreeBSD.</p><p>En lisant la documentation et les listes de diffusion
	de FreeBSD, vous trouverez des références à
	<span class="application">sup</span>.  <span class="application">sup</span>
	était le prédécesseur de
	<span class="application">CVSup</span>, et remplissait la
	même fonction.  <span class="application">CVSup</span>
	est utilisé de la même façon que
	<span class="application">sup</span> et, emploie de fait des
	fichiers de configuration qui sont compatibles avec ceux de
	<code class="command">sup</code>.  <span class="application">sup</span>
	n'est plus utilisé pour le projet FreeBSD, parce que
	<span class="application">CVSup</span> est à la fois plus
	rapide et plus souple.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">L'utilitaire <span class="application">csup</span> est une
	  réécriture en C du logiciel
	  <span class="application">CVSup</span>.  Son plus grand avantage
	  est d'être plus rapide et de ne pas dépendre du
	  langage Modula-3, vous n'avez donc pas besoin de
	  l'installer.  De plus si vous utilisez FreeBSD 6.2 ou une
	  version suivante, vous pouvez directement utiliser cet
	  utilitaire puisqu'il fait partie du système de base.
	  Les anciennes versions de FreeBSD ne disposent pas de
	  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=csup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">csup</span>(1)</span></a> dans leur système de base, mais vous
	  pouvez facilement installer le logiciel porté
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/csup/pkg-descr">net/csup</a>, ou le
	  paquetage pré-compilé correspondant.
	  L'utilitaire <span class="application">csup</span> ne supporte
	  pas, cependant, le mode CVS.  Si vous désirez
	  dupliquer l'intégralité de
	  dépôts, vous aurez toujours besoin de
	  <span class="application">CVSup</span>.  Si vous avez
	  décidé d'utiliser
	  <span class="application">csup</span>, passez les étapes
	  concernant l'installation de
	  <span class="application">CVSup</span> et remplacez les
	  références à
	  <span class="application">CVSup</span> par
	  <span class="application">csup</span> dans le reste de cette
	  section.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-install"></a>A.5.2. Installation</h3></div></div></div><p>La méthode la plus simple pour installer
	<span class="application">CVSup</span> est d'utiliser la version
	pré-compilée <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a> du <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés</a>
	de FreeBSD.  Si vous préférez compiler
	<span class="application">CVSup</span> à partir des sources, vous
	pouvez directement utiliser le logiciel porté
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a>.  Cependant
	soyez averti: le logiciel porté
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup/pkg-descr">net/cvsup</a> est écrit en
	Modula-3, qui demande un temps et un espace disque non
	négligeables pour le télécharger et le
	compiler.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous avez l'intention d'utiliser
	  <span class="application">CVSup</span> sur une machine qui ne
	  disposera pas de
	  <span class="application"><span class="trademark">XFree86</span>&#8482;</span> ou <span class="application">Xorg</span>, comme un serveur,
	  assurez-vous que le logiciel porté de n'incluera pas
	  l'interface graphique (&#8220;GUI&#8221;) de
	  <span class="application">CVSup</span>,
	  <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/cvsup-without-gui/pkg-descr">net/cvsup-without-gui</a>.</p></div><p>Si vous voulez installer <span class="application">csup</span>
	sous FreeBSD 6.1 et version précédentes, vous
	pouvez utiliser le paquetage pré-compilé
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/csup/pkg-descr">net/csup</a> du <a class="link" href="#ports" title="Chapitre 5. Installer des applications: les logiciels pré-compilés et les logiciels portés">catalogue des logiciels portés</a>.
	Si vous préférez compiler
	<span class="application">csup</span> à partir des sources,
	vous pouvez directement utiliser le logiciel porté
	<a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/csup/pkg-descr">net/csup</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-config"></a>A.5.3. Configuration de <span class="application">CVSup</span></h3></div></div></div><p>Le fonctionnement de <span class="application">CVSup</span>
	est contrôlé par un fichier de configuration
	appelé <code class="filename">supfile</code>.  Il y a des
	exemples de fichiers <code class="filename">supfile</code> dans
	le répertoire
	<a class="link" href="file://localhost/usr/share/examples/cvsup/" target="_top"><code class="filename">/usr/share/examples/cvsup/</code></a>.</p><p>Les informations du fichier <code class="filename">supfile</code>
	répondent pour <span class="application">CVSup</span>
	aux question suivantes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="#cvsup-config-files">Quels fichiers
	    voulez-vous télécharger?</a></p></li><li class="listitem"><p><a class="link" href="#cvsup-config-vers">Quelles versions de
	    ces fichiers voulez-vous?</a></p></li><li class="listitem"><p><a class="link" href="#cvsup-config-where">D'où voulez-vous
	    les télécharger?</a></p></li><li class="listitem"><p><a class="link" href="#cvsup-config-dest">Où voulez-vous les
	    mettre sur votre machine?</a></p></li><li class="listitem"><p><a class="link" href="#cvsup-config-status">Où voulez-vous
	    mettre les fichiers d'état de votre
	    machine?</a></p></li></ul></div><p>Dans les sections suivantes, nous allons renseigner
	un fichier <code class="filename">supfile</code> typique en
	répondant une à une à chacune de ces questions.
	Commençons par décrire la structure d'ensemble
	d'un fichier <code class="filename">supfile</code>.</p><p>Un fichier <code class="filename">supfile</code> est un fichier
	texte.  Les commentaires débutent par un
	<code class="literal">#</code> et se prolongent jusqu'à la fin de
	la ligne.  Les lignes vides ou qui ne contiennent que
	des commentaires sont ignorées.</p><p>Les autres lignes décrivent les ensembles de
	fichiers que l'utilisateur souhaite recevoir.  Ces lignes
	commencent par le nom d'un &#8220;catalogue&#8221; -
	<span class="emphasis"><em>collection</em></span>, un regroupement logique de
	fichiers défini par le serveur.  Le nom du catalogue
	dit au serveur quels fichiers vous voulez.  Ce nom est
	éventuellement suivi d'un ou plusieurs champs,
	séparés par un espace.  Ces champs répondent aux
	questions listées ci-dessus.  Il y deux types de champs:
	des indicateurs et des valeurs.  Un indicateur est un
	mot-clé autonome, e.g., <code class="literal">delete</code> ou
	<code class="literal">compress</code>.  Une valeur commence
	aussi par un mot-clé, mais il est impérativement
	suivi sans espace par un <code class="literal">=</code> et un
	deuxième mot.  Par exemple,
	<code class="literal">release=cvs</code> est un champ définissant
	une valeur.</p><p>Un fichier <code class="filename">supfile</code> spécifie
	en général plus d'un catalogue à
	télécharger.  Une façon de construire un fichier
	<code class="filename">supfile</code> consiste à préciser
	explicitement tous les champs nécessaires pour chaque
	catalogue.  Cependant, cela tend à donner des fichiers
	<code class="filename">supfile</code> avec des lignes assez longues,
	et ce n'est pas très pratique parce que la plupart des
	champs sont les mêmes pour tous les catalogues du
	fichier <code class="filename">supfile</code>.
	<span class="application">CVSup</span> fournit un mécanisme
	pour s'affranchir de ce problème.  Les lignes qui
	commencent par le nom du pseudo-catalogue spécial
	<code class="literal">*default</code> servent à définir les
	indicateurs et les valeurs qui seront pris par
	défaut pour les catalogues listés ensuite dans le
	fichier <code class="filename">supfile</code>.  Une valeur par
	défaut peut-être surchargée pour un catalogue
	particulier, en associant au catalogue lui-même une
	valeur différente.  Les valeurs par défaut peuvent
	également être redéfinies, ou bien on peut en
	définir de nouvelles, en cours de fichier
	<code class="filename">supfile</code>, par de nouvelles lignes
	<code class="literal">*default</code>.</p><p>Sachant cela, nous allons maintenant mettre au point
	un fichier <code class="filename">supfile</code> pour
	télécharger et mettre à jour l'arborescence
	principale de
	<a class="link" href="#current" title="24.4.1. Se synchroniser avec la version -CURRENT de FreeBSD">FreeBSD-CURRENT</a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a id="cvsup-config-files"></a>Quels fichiers
	    voulez-vous télécharger?</p><p>Les fichiers disponibles via
	    <span class="application">CVSup</span> sont regroupés par
	    &#8220;catalogues&#8221; -
	    <span class="emphasis"><em>collections</em></span>.  Les catalogues
	    disponibles sont décrits dans la
	    <a class="link" href="#cvsup-collec" title="A.5.5. Catalogue de fichiers CVSup">section suivante</a>.
	    Dans notre exemple, nous souhaitons recevoir toute
	    l'arborescence principale du système FreeBSD.  Il existe
	    un unique gros catalogue <code class="literal">src-all</code> qui
	    correspond à tout cela.  Pour commencer à renseigner
	    notre fichier <code class="filename">supfile</code>, nous listons
	    simplement les catalogues, un par ligne (dans notre cas,
	    une seule ligne):</p><pre class="programlisting">src-all</pre></li><li class="listitem"><p><a id="cvsup-config-vers"></a>Quelle(s) version(s)
	    voulez-vous télécharger?</p><p>Avec <span class="application">CVSup</span>, vous pouvez
	    obtenir pratiquement n'importe quelle version qui ait
	    existé des sources.  C'est possible parce que le
	    serveur <span class="application">cvsupd</span> travaille
	    directement à partir du référentiel CVS, qui
	    contient toutes les versions.  Vous indiquez quelle
	    version vous voulez en utilisant les valeurs
	    <code class="literal">tag=</code> et <code class="option">date=</code>.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Faites très attention à définir
	      correctement la valeur <code class="literal">tag=</code>.
	      Certaines étiquettes ne s'appliquent qu'à
	      certains catalogues.  Si l'étiquette que vous
	      donnez n'est pas valable ou mal orthographiée,
	      <span class="application">CVSup</span> effacera des fichiers
	      que vous ne vouliez probablement pas supprimer.  En
	      particulier, n'utilisez <span class="emphasis"><em>que</em></span>
	      <code class="literal">tag=.</code> pour les catalogues
	      <code class="literal">ports-*</code>.</p></div><p>Les valeurs données avec <code class="literal">tag=</code>
	    sont des étiquettes symboliques définies dans
	    le référentiel.  Il y a deux sortes
	    d'étiquettes, les étiquettes de révision et
	    les étiquettes de branches.  Les étiquettes de
	    révision s'appliquent à une révision
	    particulière.  Leur signification ne varie pas d'un
	    jour à l'autre.  Les étiquettes de branches,
	    à l'inverse, se rapportent à la dernière
	    révision sur une branche particulière à un
	    moment donné.  Comme les étiquettes de branches
	    ne se rapportent pas à une révision
	    particulière, elles peuvent désigner demain
	    quelque chose de différent de ce qu'elles
	    référencent aujourd'hui.</p><p><a class="xref" href="#cvs-tags" title="A.7. Etiquettes CVS">Section A.7, « Etiquettes CVS »</a> contient les étiquettes
	    de branches qui peuvent intéresser les utilisateurs.
	    Quand on spécifie une étiquette dans
	    le fichier de configuration de
	    <span class="application">CVSup</span>, elle doit être
	    précédée du champ <code class="literal">tag=</code>
	    (<code class="literal">RELENG_4</code> deviendra
	    <code class="literal">tag=RELENG_4</code>).  Gardez à l'esprit
	    que seule l'étiquette <code class="literal">tag=.</code> n'a de
	    signification pour le catalogue des logiciels
	    portés.</p><div xmlns="" class="warning"><h3 class="admontitle">Avertissement: </h3><p xmlns="http://www.w3.org/1999/xhtml">Faites très attention à mentionner
	      précisément l'étiquette exacte.
	      <span class="application">CVSup</span> ne sait
	      différencier une étiquette valide d'une
	      étiquette qui ne l'est pas.  Si vous orthographiez
	      mal l'étiquette, <span class="application">CVSup</span>
	      se comportera comme si vous aviez donné une
	      étiquette valide qui ne se réfère
	      à aucun fichier.  Dans ce cas il supprimera
	      toutes les sources que vous avez déjà.</p></div><p>Lorsque vous indiquez une étiquette de
	    branche, vous recevez normalement les dernières
	    versions des fichiers sur cette branche de
	    développement.  Si vous voulez récupérer
	    des version antérieures, vous pouvez le faire
	    en donnant une date avec le champ <code class="option">date=</code>.
	    La page de manuel de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvsup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvsup</span>(1)</span></a> vous expliquent
	    comment le faire.</p><p>Dans notre exemple, nous désirons obtenir
	    FreeBSD-CURRENT.  Nous ajoutons alors la ligne suivante
	    au début de notre fichier
	    <code class="filename">supfile</code>:</p><pre class="programlisting">*default tag=.</pre><p>Il existe un cas particulier important qui se produit
	    lorsque que l'on ne spécifie ni le champ
	    <code class="literal">tag=</code> ni le champ
	    <code class="literal">date=</code>.  Dans ce cas, vous obtenez
	    alors les fichiers RCS directement du
	    référentiel CVS du serveur, plutôt que de
	    recevoir une version donnée.  Les développeurs
	    préfèrent généralement cette
	    façon de travailler.
	    En maintenant une version du référentiel
	    lui-même sur leur système, ils ont la
	    possibilité de consulter l'historique des
	    révisions et
	    d'accéder aux versions antérieures des fichiers.
	    Cet avantage ne s'obtient cependant qu'au prix d'une
	    consommation importante d'espace disque.</p></li><li class="listitem"><p><a id="cvsup-config-where"></a>D'où voulez-vous
	    les télécharger?</p><p>Nous employons le champ <code class="literal">host=</code>
	    pour dire à <code class="command">cvsup</code> où
	    récupérer ses mises à jour.
	    N'importe quel des
	    <a class="link" href="#cvsup-mirrors" title="A.5.7. Sites CVSup">sites miroir CVSup</a>
	    fera l'affaire, bien que vous devriez essayer de
	    choisir un site proche de vous.  Dans cet exemple,
	    nous utiliserons un site fictif de distribution de
	    FreeBSD <code class="systemitem">cvsup99.FreeBSD.org</code>:</p><pre class="programlisting">*default host=cvsup99.FreeBSD.org</pre><p>Vous devrez changer le site pour un qui existe
	    réellement avant d'exécuter
	    <span class="application">CVSup</span>.  Lors de l'exécution
	    de <code class="command">cvsup</code>, vous pouvez surcharger cette
	    définition sur la ligne de commande avec l'option
	    <code class="option">-h
	    <em class="replaceable"><code>nom_de_machine</code></em></code>.</p></li><li class="listitem"><p><a id="cvsup-config-dest"></a>Où voulez-vous
	    les mettre sur votre machine?</p><p>Le champ <code class="literal">prefix=</code> dit à
	    <code class="command">cvsup</code> où mettre les fichiers
	    qu'il obtient.  Dans l'exemple, nous mettrons les fichiers
	    source directement dans notre arborescence des sources,
	    <code class="filename">/usr/src</code>.  Le répertoire
	    <code class="filename">src</code> est déjà implicitement
	    défini dans les catalogues que nous avons choisis
	    de télécharger, voici donc la définition
	    correcte:</p><pre class="programlisting">*default prefix=/usr</pre></li><li class="listitem"><p><a id="cvsup-config-status"></a>Où
	    <code class="command">cvsup</code> doit-il mettre les fichiers
	    d'état?</p><p>Le client <span class="application">CVSup</span> tient à
	    jour des fichiers d'état dans ce qui est appelé le
	    répertoire de &#8220;base&#8221;.  Ces fichiers
	    permettent à <span class="application">CVSup</span> de
	    travailler plus efficacement en gardant la trace des
	    modifications que vous avez déjà reçues.
	    Nous utiliserons le répertoire de base standard,
	    <code class="filename">/var/db</code>:</p><pre class="programlisting">*default base=/var/db</pre><p>Si votre répertoire de base n'existe pas encore,
	    c'est le moment de le créer.  Le client
	    <code class="command">cvsup</code> refusera de s'exécuter si le
	    répertoire de base n'existe pas.</p></li><li class="listitem"><p>Diverses autres options de configuration dans le
	    fichier <code class="filename">supfile</code>:</p><p>Il y a une autre ligne d'instruction qui doit
	    normalement figurer dans le fichier
	    <code class="filename">supfile</code>:</p><pre class="programlisting">*default release=cvs delete use-rel-suffix compress</pre><p><code class="literal">release=cvs</code> dit au serveur
	    d'obtenir les informations du référentiel principal
	    de FreeBSD.  C'est quasiment toujours le cas, mais il existe
	    d'autres possibilités qui sortent du cadre du présent
	    document.</p><p><code class="literal">delete</code> donne à
	    <span class="application">CVSup</span> l'autorisation de
	    supprimer des fichiers.  Vous devriez toujours utiliser
	    cette possibilité, de sorte que
	    <span class="application">CVSup</span> puisse vraiment maintenir
	    à jour votre arborescence des sources.
	    <span class="application">CVSup</span> veille à ne supprimer
	    que les fichiers qu'il maintient.  Les fichiers
	    supplémentaires que vous pourriez avoir ne seront pas
	    touchés.</p><p><code class="literal">use-rel-suffix</code> est...
	    ésotérique.  Si vous voulez vraiment savoir de
	    quoi il retourne, lisez la page de manuel de
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cvsup&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cvsup</span>(1)</span></a>.  Sinon, mettez cet indicateur et ne vous en
	    souciez pas plus.</p><p><code class="literal">compress</code> permet d'utiliser un
	    algorithme de compression de type <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=gzip&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">gzip</span>(1)</span></a> sur la
	    ligne de communication.  Si votre connexion a la vitesse
	    d'une ligne T1 ou plus, vous ne devriez probablement pas
	    utiliser la compression.  Sinon, cela facilite
	    substantiellement les choses.</p></li><li class="listitem"><p>Assembler les morceaux:</p><p>Voici le fichier <code class="filename">supfile</code> de notre
	    exemple en entier:</p><pre class="programlisting">*default tag=.
*default host=cvsup99.FreeBSD.org
*default prefix=/usr
*default base=/var/db
*default release=cvs delete use-rel-suffix compress

src-all</pre></li></ul></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-refuse-file"></a>A.5.3.1. Le fichier <code class="filename">refuse</code></h4></div></div></div><p>Comme mentionné ci-dessus,
	  <span class="application">CVSup</span> utilise une méthode de
	  type <span class="emphasis"><em>pull</em></span>.  Fondamentalement, cela
	  signifie que vous vous connectez au serveur
	  <span class="application">CVSup</span>, ce dernier dit, &#8220;Voici
	  ce que vous pouvez télécharger...&#8221;, puis
	  votre client répond &#8220;Ok, je prendrai ceci, ceci,
	  ceci et cela&#8221;.  Dans la configuration par défaut,
	  le client <span class="application">CVSup</span>
	  téléchargera chaque fichier associé avec
	  le catalogue et l'étiquette que vous avez choisi dans
	  le fichier de configuration.  Cependant cela ne correspond
	  pas toujours à ce que vous désirez, tout
	  particulièrement si vous mettez à jour les
	  arborescences <code class="filename">doc</code>,
	  <code class="filename">ports</code>, ou <code class="filename">www</code>
	  &#8212; la plupart des personnes sont incapables de lire
	  quatre ou cinq langues différentes, et donc elles n'ont
	  pas besoin de télécharger les fichiers
	  spécifiques à
	  certaines langues.  Si vous mettez à jour le catalogue
	  des logiciels portés, vous pouvez remédier à
	  cela en spécifiant chaque catalogue individuellement
	  (e.g., <span class="emphasis"><em>ports-astrology</em></span>,
	  <span class="emphasis"><em>ports-biology</em></span>, etc au lieu de
	  spécifier simplement <span class="emphasis"><em>ports-all</em></span>).
	  Cependant puisque les arborescences <code class="filename">doc</code>
	  et <code class="filename">www</code> ne disposent pas de catalogues
	  spécifiques à chaque langue, vous devez utiliser
	  une des nombreuses fonctions de
	  <span class="application">CVSup</span>: le fichier
	  <code class="filename">refuse</code>.</p><p>Le fichier <code class="filename">refuse</code> indique
	  essentiellement à <span class="application">CVSup</span>
	  qu'il ne doit pas télécharger chaque fichier
	  d'un catalogue; en d'autre termes, il dit au client
	  de <span class="emphasis"><em>refuser</em></span> certains fichiers du
	  serveur.  Le fichier <code class="filename">refuse</code> peut
	  être trouvé (ou, si vous n'en disposez pas
	  encore d'un, doit être placé) dans
	  <code class="filename">base/sup/</code>.
	  <em class="replaceable"><code>base</code></em> est défini dans votre
	  <code class="filename">supfile</code>; notre répertoire
	  <em class="replaceable"><code>base</code></em> est défini en tant que
	  <code class="filename">/var/db</code> ce qui signifie
	  que le fichier <code class="filename">refuse</code> est par
	  défaut
	  <code class="filename">/var/db/sup/refuse</code>.</p><p>Le fichier <code class="filename">refuse</code> a un format
	  très simple; il contient tout simplement les noms des
	  fichiers ou des répertoires que vous ne
	  désirez pas rapatrier.  Par exemple, si vous ne
	  pouvez parler d'autres langues que l'anglais ou un peu
	  d'allemand, et vous ne ressentez pas le besoin de lire
	  la traduction en allemand de la documentation, vous pouvez mettre
	  ce qui suit dans le fichier
	  <code class="filename">refuse</code>:</p><pre class="screen">doc/bn_*
doc/da_*
doc/de_*
doc/el_*
doc/es_*
doc/fr_*
doc/it_*
doc/ja_*
doc/nl_*
doc/no_*
doc/pl_*
doc/pt_*
doc/ru_*
doc/sr_*
doc/tr_*
doc/zh_*</pre><p>et ainsi de suite pour les autres langues (vous pouvez
	  en trouver une liste complète en parcourant le
	  <a class="link" href="http://www.FreeBSD.org/cgi/cvsweb.cgi/" target="_top">référentiel
	  CVS de FreeBSD</a>).</p><p>Avec cette fonction très utile, les utilisateurs
	  disposant d'une connexion lente ou payant le temps de
	  connexion à la minute seront en mesure
	  d'économiser de précieuses minutes comme ils n'auront
	  plus du tout besoin de télécharger des
	  fichiers qu'ils n'utiliseront jamais.  Pour plus
	  d'information sur les fichiers <code class="filename">refuse</code>
	  et d'autres caractéristiques intéressantes de
	  <span class="application">CVSup</span>, consultez sa page de
	  manuel.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86511056"></a>A.5.4. Exécuter <span class="application">CVSup</span></h3></div></div></div><p>Vous êtes maintenant prêt à essayer de faire
	une mise à jour.  La ligne de commande à utiliser
	est très simple:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cvsup supfile</code></strong></pre><p>où <code class="filename">supfile</code>
	est bien sûr le nom du fichier <code class="filename">supfile</code>
	que vous venez de créer.  Si vous êtes sous X11,
	<code class="command">cvsup</code> affichera une interface graphique
	avec des boutons pour les opérations courantes.  Appuyez
	sur le bouton <span class="guibutton">go</span> et suivez le
	déroulement des opérations.</p><p>Comme, dans cet l'exemple, vous mettez directement à
	jour votre arborescence <code class="filename">/usr/src</code>,
	vous devrez exécuter le programme en tant que
	<code class="systemitem">root</code> de façon à ce que
	<code class="command">cvsup</code> ait le droit de mettre à jour vos
	fichiers.  Comme vous venez juste de créer votre fichier
	de configuration et n'avez encore jamais utilisé le
	programme, il est compréhensible que cela vous rende
	nerveux.  Il est facile de faire un essai sans toucher
	à vos précieux fichiers.  Créez juste un nouveau
	répertoire quelque part et donnez-le en argument
	supplémentaire sur la ligne de commande:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir /var/tmp/dest</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>cvsup supfile /var/tmp/dest</code></strong></pre><p>Le répertoire indiqué sera pris comme destination
	pour tous les fichiers modifiés.
	<span class="application">CVSup</span> examinera les fichiers
	habituels dans <code class="filename">/usr/src</code>, mais ne les
	modifiera pas et n'en supprimera aucun.
	Les modifications atterriront dans
	<code class="filename">/var/tmp/dest/usr/src</code>.
	<span class="application">CVSup</span> ne touchera pas non plus
	à ses fichiers d'état dans le répertoire de base,
	lorsqu'il est invoqué de cette manière.  Les
	nouvelles versions de ces fichiers iront dans le
	répertoire indiqué.  A partir du moment où
	vous avez les les droits en lecture sur
	<code class="filename">/usr/src</code>, vous n'avez pas besoin
	d'être <code class="systemitem">root</code> pour faire ce genre
	d'essai.</p><p>Si vous n'êtes pas sous X11, ou si vous n'aimez
	tout simplement pas les interfaces graphiques, vous
	devrez ajouter quelques options supplémentaires sur la
	ligne de commande de <code class="command">cvsup</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cvsup -g -L 2 supfile</code></strong></pre><p>L'option <code class="option">-g</code> dit à
	<span class="application">CVSup</span> de ne pas utiliser son
	interface graphique.  C'est automatique si vous n'êtes pas
	sous X11, sinon vous devez le préciser.</p><p>L'option<code class="option">-L 2</code> dit à
	<span class="application">CVSup</span> d'afficher le détail de
	ce qu'il est en train de faire.  Il y a trois niveaux
	de trace, de <code class="option">-L 0</code> à
	<code class="option">-L 2</code>.  La valeur par défaut est de 0,
	ce qui équivaut à n'émettre que les messages
	d'erreur.</p><p>Il y a de nombreuses autres option disponibles.
	Pour en obtenir un résumé, tapez
	<code class="command">cvsup -H</code>.  Pour une description plus
	détaillée, reportez-vous aux pages de
	manuel.</p><p>Une fois que vous êtes satisfait de la façon
	dont se passent les mises à jour, vous pouvez mettre
	en place une exécution de
	<span class="application">CVSup</span> à intervalles
	réguliers en utilisant <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  Bien
	évidemment, vous ne devez pas laisser
	<span class="application">CVSup</span> utiliser don interface
	graphique quand vous le lancez depuis <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-collec"></a>A.5.5. Catalogue de fichiers <span class="application">CVSup</span></h3></div></div></div><p>Les catalogues de fichiers disponibles via
	<span class="application">CVSup</span> sont organisés
	hiérarchiquement.  Il y a quelques gros catalogues, qui
	sont divisés en plus petits sous-catalogues.  Recevoir
	un gros catalogue équivaut à recevoir chacun de ces
	sous-catalogues.  Les relations hiérarchiques entre
	les sous-catalogues sont décrites par les indentations
	dans la liste ci-dessous.</p><p>Les catalogues habituellement les plus employés sont
	<code class="literal">src-all</code>, et <code class="literal">ports-all</code>.
	Les autres catalogues ne sont utilisés que par de petits
	groupes de personnes pour des besoins particuliers, et
	certains sites miroir ne les mettent pas à
	disposition.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">cvs-all release=cvs</code></span></dt><dd><p>Le référentiel CVS principal de FreeBSD,
	      incluant les logiciels de chiffrement.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">distrib release=cvs</code></span></dt><dd><p>Les fichiers ayant trait à la distribution
		    et à la mise en place de sites miroir
		    FreeBSD.</p></dd><dt><span class="term"><code class="literal">doc-all release=cvs</code></span></dt><dd><p>Les sources du manuel FreeBSD et d'autres
		    documentations.  Cela de comprend pas les
		    fichiers pour le site Web de FreeBSD.</p></dd><dt><span class="term"><code class="literal">ports-all release=cvs</code></span></dt><dd><p>Le catalogue des logiciels portés de
		    FreeBSD.</p><div xmlns="" class="important"><h3 class="admontitle"><a xmlns="http://www.w3.org/1999/xhtml" id="cvsup-collec-pbase-warn"></a>Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous ne voulez pas mettre à
		      jour l'intégralité du catalogue
		      <code class="literal">ports-all</code> (l'intégralité
		      du catalogue des logiciels portés), mais
		      utiliser un des sous-catalogues listés
		      ci-dessous, assurez-vous de
		      <span class="emphasis"><em>toujours</em></span> mettre à
		      jour le sous-catalogue
		      <code class="literal">ports-base</code>!  Dès qu'il
		      y a un changement dans l'infrastructure
		      de compilation des logiciels portés
		      représentée par
		      <code class="literal">ports-base</code>, il est certain
		      que ces changements seront utilisés
		      par un logiciel porté très rapidement.
		      Donc, si vous ne mettez à jour que les
		      logiciels portés en tant que tel et
		      qu'ils utilisent certains des changements,
		      il y a de grandes chances pour que leur
		      compilation échoue avec de mystérieux
		      messages d'erreur.  La
		      <span class="emphasis"><em>première</em></span> chose
		      à faire dans ce cas est de vérifier
		      que votre sous-catalogue
		      <code class="literal">ports-base</code> est à
		      jour.</p></div><div xmlns="" class="important"><h3 class="admontitle"><a xmlns="http://www.w3.org/1999/xhtml" id="cvsup-collec-index-warn"></a>Important: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si vous voulez construire votre propre
		      version locale du fichier
		      <code class="filename">ports/INDEX</code>, vous
		      <span class="emphasis"><em>devez</em></span> accepter le catalogue
		      <code class="literal">ports-all</code>
		      (l'intégralité du catalogue des
		      logiciels portés).  La construction de
		      <code class="filename">ports/INDEX</code> avec une
		      arborescence partielle n'est pas
		      supportée.  Consultez la <a class="link" href="../../../../doc/en_US.ISO8859-1/books/faq/applications.html#MAKE-INDEX" target="_top">
		      FAQ</a>.</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ports-accessibility
			  release=cvs</code></span></dt><dd><p>Logiciels pour utilisateurs
			  handicapées.</p></dd><dt><span class="term"><code class="literal">ports-arabic
			  release=cvs</code></span></dt><dd><p>Support pour l'arabe.</p></dd><dt><span class="term"><code class="literal">ports-archivers
			  release=cvs</code></span></dt><dd><p>Outils d'archivage.</p></dd><dt><span class="term"><code class="literal">ports-astro
			  release=cvs</code></span></dt><dd><p>Logiciels d'astronomie.</p></dd><dt><span class="term"><code class="literal">ports-audio
			  release=cvs</code></span></dt><dd><p>Support du son.</p></dd><dt><span class="term"><code class="literal">ports-base
			  release=cvs</code></span></dt><dd><p>L'infrastructure de compilation
			  du catalogue des logiciels portés
			  &#8212; divers fichiers situés dans les
			  répertoires
			  <code class="filename">Mk/</code> et
			  <code class="filename">Tools/</code>
			  sous-répertoires de la hiérarchie
			  <code class="filename">/usr/ports</code>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Lisez l'<a class="link" href="#cvsup-collec-pbase-warn" title="Important">important
			    avertissement ci-dessus</a>: vous
			    devriez <span class="emphasis"><em>toujours</em></span>
			    mettre à jour ce sous-catalogue,
			    dès que vous mettez à jour une partie
			    du catalogue des logiciels portés
			    de FreeBSD!</p></div></dd><dt><span class="term"><code class="literal">ports-benchmarks
			  release=cvs</code></span></dt><dd><p>Evaluation de performances.</p></dd><dt><span class="term"><code class="literal">ports-biology
			  release=cvs</code></span></dt><dd><p>Biologie.</p></dd><dt><span class="term"><code class="literal">ports-cad
			  release=cvs</code></span></dt><dd><p>Outils de conception assistée
			  par ordinateur.</p></dd><dt><span class="term"><code class="literal">ports-chinese
			  release=cvs</code></span></dt><dd><p>Support pour le chinois.</p></dd><dt><span class="term"><code class="literal">ports-comms
			  release=cvs</code></span></dt><dd><p>Logiciels de communication.</p></dd><dt><span class="term"><code class="literal">ports-converters
			  release=cvs</code></span></dt><dd><p>Conversion entre codages de
			  caratères.</p></dd><dt><span class="term"><code class="literal">ports-databases
			  release=cvs</code></span></dt><dd><p>Bases de données.</p></dd><dt><span class="term"><code class="literal">ports-deskutils
			  release=cvs</code></span></dt><dd><p>Les choses que l'on trouvait
			  sur un bureau avant l'invention
			  des ordinateurs.</p></dd><dt><span class="term"><code class="literal">ports-devel
			  release=cvs</code></span></dt><dd><p>Outils de développement.</p></dd><dt><span class="term"><code class="literal">ports-dns
			  release=cvs</code></span></dt><dd><p>Logiciels relatifs au DNS.</p></dd><dt><span class="term"><code class="literal">ports-editors
			  release=cvs</code></span></dt><dd><p>Editeurs.</p></dd><dt><span class="term"><code class="literal">ports-emulators
			  release=cvs</code></span></dt><dd><p>Emulateurs d'autres systèmes
			  d'exploitation.</p></dd><dt><span class="term"><code class="literal">ports-finance
			  release=cvs</code></span></dt><dd><p>Applications concernant les finances
			  et l'argent.</p></dd><dt><span class="term"><code class="literal">ports-ftp
			  release=cvs</code></span></dt><dd><p>Clients et serveurs FTP.</p></dd><dt><span class="term"><code class="literal">ports-games
			  release=cvs</code></span></dt><dd><p>Jeux.</p></dd><dt><span class="term"><code class="literal">ports-german
			  release=cvs</code></span></dt><dd><p>Support pour l'allemand.</p></dd><dt><span class="term"><code class="literal">ports-graphics
			  release=cvs</code></span></dt><dd><p>Outils graphiques.</p></dd><dt><span class="term"><code class="literal">ports-hebrew
			  release=cvs</code></span></dt><dd><p>Support de l'hébreu.</p></dd><dt><span class="term"><code class="literal">ports-hungarian
			  release=cvs</code></span></dt><dd><p>Support du hongrois.</p></dd><dt><span class="term"><code class="literal">ports-irc
			  release=cvs</code></span></dt><dd><p>Outils pour l'IRC.</p></dd><dt><span class="term"><code class="literal">ports-japanese
			  release=cvs</code></span></dt><dd><p>Support pour le japonais.</p></dd><dt><span class="term"><code class="literal">ports-java
			  release=cvs</code></span></dt><dd><p>Outils <span class="trademark">Java</span>&#8482;.</p></dd><dt><span class="term"><code class="literal">ports-korean
			  release=cvs</code></span></dt><dd><p>Support pour le coréen.</p></dd><dt><span class="term"><code class="literal">ports-lang
			  release=cvs</code></span></dt><dd><p>Langages de programmation.</p></dd><dt><span class="term"><code class="literal">ports-mail
			  release=cvs</code></span></dt><dd><p>Logiciels de courrier
			  électronique.</p></dd><dt><span class="term"><code class="literal">ports-math
			  release=cvs</code></span></dt><dd><p>Logiciels de calcul numérique.</p></dd><dt><span class="term"><code class="literal">ports-mbone
			  release=cvs</code></span></dt><dd><p>Applications MBone.</p></dd><dt><span class="term"><code class="literal">ports-misc
			  release=cvs</code></span></dt><dd><p>Utilitaires divers.</p></dd><dt><span class="term"><code class="literal">ports-multimedia
			  release=cvs</code></span></dt><dd><p>Logiciels pour le multimedia.</p></dd><dt><span class="term"><code class="literal">ports-net
			  release=cvs</code></span></dt><dd><p>Logiciels réseau.</p></dd><dt><span class="term"><code class="literal">ports-net-im
			  release=cvs</code></span></dt><dd><p>Logiciels de messagerie
			  instantanée.</p></dd><dt><span class="term"><code class="literal">ports-net-mgmt
			  release=cvs</code></span></dt><dd><p>Logiciels de gestion des
			  réseaux.</p></dd><dt><span class="term"><code class="literal">ports-net-p2p
			  release=cvs</code></span></dt><dd><p>Logiciels pour le <span class="quote">« <span class="quote">peer to
			  peer</span> »</span>.</p></dd><dt><span class="term"><code class="literal">ports-news
			  release=cvs</code></span></dt><dd><p>Logiciels pour les forums de
			  discussion USENET.</p></dd><dt><span class="term"><code class="literal">ports-palm
			  release=cvs</code></span></dt><dd><p>Logiciels de support des machines
			  <span class="trademark">Palm</span>&#8482;.</p></dd><dt><span class="term"><code class="literal">ports-polish
			  release=cvs</code></span></dt><dd><p>Support pour le polonais.</p></dd><dt><span class="term"><code class="literal">ports-ports-mgmt
			  release=cvs</code></span></dt><dd><p>Utilitaires pour la gestion des
			  logiciels portés et des
			  paquetages.</p></dd><dt><span class="term"><code class="literal">ports-portuguese
			  release=cvs</code></span></dt><dd><p>Support pour le portugais.</p></dd><dt><span class="term"><code class="literal">ports-print
			  release=cvs</code></span></dt><dd><p>Logiciels d'impression.</p></dd><dt><span class="term"><code class="literal">ports-russian
			  release=cvs</code></span></dt><dd><p>Support pour le russe.</p></dd><dt><span class="term"><code class="literal">ports-science
			  release=cvs</code></span></dt><dd><p>Science.</p></dd><dt><span class="term"><code class="literal">ports-security
			  release=cvs</code></span></dt><dd><p>Outils de sécurité.</p></dd><dt><span class="term"><code class="literal">ports-shells
			  release=cvs</code></span></dt><dd><p>Interpréteurs de commandes.</p></dd><dt><span class="term"><code class="literal">ports-sysutils
			  release=cvs</code></span></dt><dd><p>Utilitaires système.</p></dd><dt><span class="term"><code class="literal">ports-textproc
			  release=cvs</code></span></dt><dd><p>Outils de traitement de texte (sauf les
			  logiciels de publication assistée par
			  ordinateur).</p></dd><dt><span class="term"><code class="literal">ports-ukrainian
			  release=cvs</code></span></dt><dd><p>Support de l'ukrainien.</p></dd><dt><span class="term"><code class="literal">ports-vietnamese
			  release=cvs</code></span></dt><dd><p>Support du vietnamien.</p></dd><dt><span class="term"><code class="literal">ports-www
			  release=cvs</code></span></dt><dd><p>Logiciels concernant le World Wide
			  Web.</p></dd><dt><span class="term"><code class="literal">ports-x11
			  release=cvs</code></span></dt><dd><p>Logiciel pour le système X window.</p></dd><dt><span class="term"><code class="literal">ports-x11-clocks
			  release=cvs</code></span></dt><dd><p>Horloges pour X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-drivers
			  release=cvs</code></span></dt><dd><p>pilotes de périphérique
			  X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-fm
			  release=cvs</code></span></dt><dd><p>Gestionnaires de fichiers pour
			  X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-fonts
			  release=cvs</code></span></dt><dd><p>Polices de caractères et outils
			  associés pour X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-toolkits
			  release=cvs</code></span></dt><dd><p>&#8220;Toolkits&#8221; X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-servers
			  release=cvs</code></span></dt><dd><p>Serveurs X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-themes
			  release=cvs</code></span></dt><dd><p>Thèmes X11.</p></dd><dt><span class="term"><code class="literal">ports-x11-wm
			  release=cvs</code></span></dt><dd><p>Gestionnaires de fenêtres pour
			  X11.</p></dd></dl></div></dd><dt><span class="term"><code class="literal">projects-all release=cvs</code></span></dt><dd><p>Les sources présentes dans le
		    dépots des projets FreeBSD.</p></dd><dt><span class="term"><code class="literal">src-all release=cvs</code></span></dt><dd><p>Les sources du système FreeBSD, comprenant les
		    logiciels de chiffrement.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">src-base
			  release=cvs</code></span></dt><dd><p>Divers fichiers en haut de
			  la hiérarchie
			  <code class="filename">/usr/src</code>.</p></dd><dt><span class="term"><code class="literal">src-bin
			  release=cvs</code></span></dt><dd><p>Programmes utilisateurs qui peuvent
			  être utiles en mode mono-utilisateur
			  (<code class="filename">/usr/src/bin</code>).</p></dd><dt><span class="term"><code class="literal">src-cddl
			  release=cvs</code></span></dt><dd><p>Utilitaires et bibliothèques sous
			  licence CDDL
			  (<code class="filename">/usr/src/cddl</code>).</p></dd><dt><span class="term"><code class="literal">src-contrib
			  release=cvs</code></span></dt><dd><p>Utilitaires et bibliothèques
			  d'origine indépendante du projet FreeBSD,
			  employés à peu près tels quels
			  (<code class="filename">/usr/src/contrib</code>).</p></dd><dt><span class="term"><code class="literal">src-crypto release=cvs</code></span></dt><dd><p>Utilitaires et bibliothèques
			  pour le chiffrement d'origine indépendante
			  du projet FreeBSD, employés à peu près tels
			  quels
			  (<code class="filename">/usr/src/crypto</code>).</p></dd><dt><span class="term"><code class="literal">src-eBones release=cvs</code></span></dt><dd><p>Kerberos et DES
			  (<code class="filename">/usr/src/eBones</code>).  Non
			  utilisés dans les versions de FreeBSD
			  actuellement publiées.</p></dd><dt><span class="term"><code class="literal">src-etc
			  release=cvs</code></span></dt><dd><p>Fichiers de configuration du système
			  (<code class="filename">/usr/src/etc</code>).</p></dd><dt><span class="term"><code class="literal">src-games
			  release=cvs</code></span></dt><dd><p>Jeux
			  (<code class="filename">/usr/src/games</code>).</p></dd><dt><span class="term"><code class="literal">src-gnu
			  release=cvs</code></span></dt><dd><p>Utilitaires soumis à la licence
			  publique GNU
			  (<code class="filename">/usr/src/gnu</code>).</p></dd><dt><span class="term"><code class="literal">src-include
			  release=cvs</code></span></dt><dd><p>Fichiers d'entête
			  (<code class="filename">/usr/src/include</code>).</p></dd><dt><span class="term"><code class="literal">src-kerberos5
			  release=cvs</code></span></dt><dd><p>Logiciel de sécurité
			  Kerberos5
			  (<code class="filename">/usr/src/kerberos5</code>).</p></dd><dt><span class="term"><code class="literal">src-kerberosIV
			  release=cvs</code></span></dt><dd><p>Logiciel de sécurité
			  KerberosIV
			  (<code class="filename">/usr/src/kerberosIV</code>).</p></dd><dt><span class="term"><code class="literal">src-lib
			  release=cvs</code></span></dt><dd><p>Bibliothèques
			  (<code class="filename">/usr/src/lib</code>).</p></dd><dt><span class="term"><code class="literal">src-libexec
			  release=cvs</code></span></dt><dd><p>Programmes système normalement
			  exécutés par d'autres programmes
			  (<code class="filename">/usr/src/libexec</code>).</p></dd><dt><span class="term"><code class="literal">src-release
			  release=cvs</code></span></dt><dd><p>Fichiers nécessaires à la
			  génération
			  d'une version publiable de FreeBSD
			  (<code class="filename">/usr/src/release</code>).</p></dd><dt><span class="term"><code class="literal">src-rescue
			  release=cvs</code></span></dt><dd><p>Programmes liés en statique pour
			  les dépannages d'urgence; consultez
			  la page de manuel  <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rescue&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">rescue</span>(8)</span></a>
			  (<code class="filename">/usr/src/rescue</code>).</p></dd><dt><span class="term"><code class="literal">src-sbin release=cvs</code></span></dt><dd><p>Utilitaires système pour le mode
			  mono-utilisateur
			  (<code class="filename">/usr/src/sbin</code>).</p></dd><dt><span class="term"><code class="literal">src-secure
			  release=cvs</code></span></dt><dd><p>Commandes et bibliothèques pour
			  le chiffrage
			  (<code class="filename">/usr/src/secure</code>).</p></dd><dt><span class="term"><code class="literal">src-share
			  release=cvs</code></span></dt><dd><p>Fichiers qui peuvent être
			  partagés par plusieurs systèmes
			  (<code class="filename">/usr/src/share</code>).</p></dd><dt><span class="term"><code class="literal">src-sys
			  release=cvs</code></span></dt><dd><p>Le noyau
			  (<code class="filename">/usr/src/sys</code>).</p></dd><dt><span class="term"><code class="literal">src-sys-crypto
			release=cvs</code></span></dt><dd><p>Code du noyau destiné au chiffrement
			  (<code class="filename">/usr/src/sys/crypto</code>).</p></dd><dt><span class="term"><code class="literal">src-tools
			  release=cvs</code></span></dt><dd><p>Divers outils pour la maintenance de
			  FreeBSD
			  (<code class="filename">/usr/src/tools</code>).</p></dd><dt><span class="term"><code class="literal">src-usrbin
			  release=cvs</code></span></dt><dd><p>Outils utilisateur
			  (<code class="filename">/usr/src/usr.bin</code>).</p></dd><dt><span class="term"><code class="literal">src-usrsbin
			  release=cvs</code></span></dt><dd><p>Utilitaires système
			  (<code class="filename">/usr/src/usr.sbin</code>).</p></dd></dl></div></dd><dt><span class="term"><code class="literal">www release=cvs</code></span></dt><dd><p>Les sources du site WWW de FreeBSD.</p></dd></dl></div></dd><dt><span class="term"><code class="literal">distrib release=self</code></span></dt><dd><p>Fichiers de configuration du serveur
	      <span class="application">CVSup</span>.  Utilisés par
	      les sites miroir
	      <span class="application">CVSup</span>.</p></dd><dt><span class="term"><code class="literal">gnats release=current</code></span></dt><dd><p>Base de données GNATS d'historique
	      des bogues.</p></dd><dt><span class="term"><code class="literal">mail-archive release=current</code></span></dt><dd><p>Archives des listes de diffusion FreeBSD.</p></dd><dt><span class="term"><code class="literal">www release=current</code></span></dt><dd><p>Les fichiers/données WWW publiés (pas les
	      fichiers source).  Utilisés par les sites miroir
	      WWW.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86886096"></a>A.5.6. Pour plus d'informations</h3></div></div></div><p>Pour la FAQ de <span class="application">CVSup</span>
	et d'autres informations concernant <span class="application">CVSup</span>,
	consultez la
	<a class="link" href="http://www.cvsup.org" target="_top">page
        Web de CVSup</a>.</p><p>La plupart des discussions relatives à
	l'utilisation de <span class="application">CVSup</span> sous FreeBSD
	ont lieu sur la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">liste de diffusion pour les discussions techniques sur FreeBSD</a>.  Les nouvelles versions du
	logiciel y sont annoncés ainsi que sur la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">liste de diffusion pour les annonces relatives à FreeBSD</a>.</p><p>Pour toutes les questions et rapports de bogues concernant
	<span class="application">CVSup</span>, consultez la <a class="link" href="http://www.cvsup.org/faq.html#bugreports" target="_top">FAQ
	CVSup</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cvsup-mirrors"></a>A.5.7. Sites CVSup</h3></div></div></div><p>Des serveurs <a class="link" href="#cvsup" title="A.5. Utiliser CVSup">CVSup</a> pour FreeBSD
      fonctionnent aux sites suivants:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a id="central-cvsup"></a>Serveurs primaires</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>cvsup.FreeBSD.org</p></li></ul></div></dd></dl></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="portsnap"></a>A.6. Utiliser Portsnap</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portsnap-intro"></a>A.6.1. Introduction</h3></div></div></div><p><span class="application">Portsnap</span> est un système
	de distribution sécurisée du catalogue des
	logiciels portés de FreeBSD.  Approximativement chaque
	heure, un <span class="quote">« <span class="quote">instantané</span> »</span> du catalogue des
	logiciels portés est généré,
	rassemblé et signé de manière
	chiffrée.  Les fichiers résultants sont alors
	distribués par l'intermédiaire du protocole
	HTTP.</p><p>Tout comme <span class="application">CVSup</span>,
	<span class="application">Portsnap</span> utilise un modèle
	de mise à jour de type <span class="emphasis"><em>pull</em></span>: le
	catalogue des logiciels portés packagé et
	signé est placé sur un serveur Web qui attend
	les requêtes des clients.  Les utilisateurs doivent soit
	exécuter manuellement <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a> pour
	télécharger les mises à jour, soit
	configurer <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a> pour un téléchargement
	régulier et automatique des mises à jour.</p><p>Pour des raisons techniques,
	<span class="application">Portsnap</span> ne met pas à jour
	le catalogue des logiciels portés directement dans le
	répertoire <code class="filename">/usr/ports</code>; le logiciel travaille
	plutôt par défaut sur une version
	compressée de l'arborescence des logiciels
	portés dans le répertoire <code class="filename">/var/db/portsnap</code>.  Cette copie
	compressée est ensuite utilisée pour mettre
	à jour le catalogue des logiciels portés.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si <span class="application">Portsnap</span> est
	  installé à partir du catalogue des logiciels
	  portés de FreeBSD, alors l'emplacement par défaut
	  pour son instantané compressé sera <code class="filename">/usr/local/portsnap</code> au lieu de
	  <code class="filename">/var/db/portsnap</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portsnap-install"></a>A.6.2. Installation</h3></div></div></div><p>Sous FreeBSD 6.0 et les versions plus récentes,
	<span class="application">Portsnap</span> fait partie du
	système de base de FreeBSD.  Sous des versions plus
	anciennes de FreeBSD, il peut être installé à
	partir du logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/ports-mgmt/portsnap/pkg-descr">ports-mgmt/portsnap</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="portsnap-config"></a>A.6.3. Configuration de Portsnap</h3></div></div></div><p>L'exécution de <span class="application">Portsnap</span>
	est contrôlée par le fichier de configuration
	<code class="filename">/etc/portsnap.conf</code>.  Pour la plupart des
	utilisateurs, le fichier de configuration par défaut
	sera suffisant; pour plus de détails, consultez la page
	de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap.conf&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">portsnap.conf</span>(5)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si <span class="application">Portsnap</span> est
	  installé à partir du catalogue des logiciels
	  portés, il utilisera
	  <code class="filename">/usr/local/etc/portsnap.conf</code> comme
	  fichier de configuration au lieu de
	  <code class="filename">/etc/portsnap.conf</code>.  Ce fichier n'est pas
	  créé lors de l'installation du logiciel, mais un
	  fichier d'exemple est fourni; pour le copier à son
	  emplacement correct, utilisez la commande suivante:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cd /usr/local/etc &amp;&amp; cp portsnap.conf.sample portsnap.conf</code></strong></pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86922448"></a>A.6.4. Exécuter <span class="application">Portsnap</span> pour la
	première fois</h3></div></div></div><p>Au premier lancement de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=portsnap&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">portsnap</span>(8)</span></a>, il
	sera nécessaire de télécharger un
	instantané compressé de
	l'intégralité de l'arborescence des logiciels
	portés dans <code class="filename">/var/db/portsnap</code> (ou <code class="filename">/usr/local/portsnap</code> si
	<span class="application">Portsnap</span> a été
	installé à partir du catalogue des logiciels
	portés).  Au début de l'année 2006, cela
	représentait un téléchargement d'environ
	41 Mo.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong></pre><p>Une fois que l'instantané compressé a
	été récupéré, une copie
	utilisable de l'arborescence des logiciels portés peut
	être extraite dans le répertoire <code class="filename">/usr/ports</code>.  Cela est
	nécessaire même si une arborescence a
	déjà été créée dans
	ce répertoire (par exemple en utilisant
	<span class="application">CVSup</span>), puisque cela met en place
	une version de référence à partir de
	laquelle <code class="command">portsnap</code> peut déterminer
	plus tard quelles parties du catalogue des logiciels
	portés a besoin d'une mise à jour.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap extract</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Dans l'installation par défaut de FreeBSD <code class="filename">/usr/ports</code> n'est pas
	  créé.  Si vous utilisez FreeBSD 6.0-RELEASE,
	  ce répertoire doit être créé avant
	  d'utiliser la commande <code class="command">portsnap</code>.  Sur les
	  versions de FreeBSD plus récentes ou de
	  <span class="application">Portsnap</span>, cette
	  création est effectuée automatiquement à
	  la premiere utilisation de la commande
	  <code class="command">portsnap</code>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86935888"></a>A.6.5. Mettre à jour l'arborescence des logiciels
	portés</h3></div></div></div><p>Après qu'un instantané initial du catalogue
	des logiciels portés ait été
	récupéré puis décompressé
	dans le répertoire <code class="filename">/usr/ports</code>, la mise à jour
	du catalogue se divise en deux étapes: la
	récupération (<span class="emphasis"><em>fetch</em></span>) des
	mises à jour de l'instantané, et leur
	utilisation pour mettre à jour
	(<span class="emphasis"><em>update</em></span>) le catalogue des logiciels
	portés en tant que tel.  Ces deux étapes peuvent
	être effectuées par l'intermédiaire d'une
	seule commande <code class="command">portsnap</code>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch update</code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Des versions anciennes de <code class="command">portsnap</code> ne
	  supporte pas cette syntaxe; en cas d'échec, utilisez
	  à la place ceci:</p><pre xmlns="http://www.w3.org/1999/xhtml" class="screen"><code class="prompt">#</code> <strong class="userinput"><code>portsnap fetch</code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>portsnap update</code></strong></pre></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86942416"></a>A.6.6. Exécuter Portsnap à partir de cron</h3></div></div></div><p>Afin d'éviter tout problème
	<span class="quote">« <span class="quote">d'embouteillage</span> »</span> lors de l'accès aux
	serveurs <span class="application">Portsnap</span>,
	<code class="command">portsnap fetch</code> ne fonctionnera pas à
	partir d'une tâche <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cron&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">cron</span>(8)</span></a>.  Il existe, à la
	place, une commande <code class="command">portsnap cron</code>
	spécifique, qui patiente durant un délai
	aléatoire pouvant aller jusqu'à 3600 secondes
	avant de récupérer les mises à
	jour.</p><p>De plus, il est fortement recommandé de ne pas
	exécuter <code class="command">portsnap update</code> à
	partir d'une tâche <code class="command">cron</code>, puisque cela
	peut être à l'origine de graves problèmes
	si la commande a lieu au même moment qu'un logiciel
	porté est en train d'être compilé ou
	installé.  Cependant, les fichiers
	<code class="filename">INDEX</code> peuvent être mis à
	jour sans risque, et cela peut être fait en passant
	l'indicateur <code class="option">-I</code> à la commande
	<code class="command">portsnap</code> (bien entendu si <code class="command">portsnap
	-I update</code> est exécuté à par
	<code class="command">cron</code>, il sera alors nécessaire de
	lancer <code class="command">portsnap update</code> sans l'option
	<code class="option">-I</code> ultérieurement pour mettre à
	jour le reste de l'arborescence).</p><p>L'ajout de la ligne suivante dans le fichier
	<code class="filename">/etc/crontab</code> demandera à
	<code class="command">portsnap</code> de mettre à jour son
	instantané compressé et les fichiers
	<code class="filename">INDEX</code> du répertoire <code class="filename">/usr/ports</code>, et enverra un courrier
	électronique si un logiciel porté
	installé n'est pas à jour:</p><pre class="programlisting">0 3 * * * root portsnap -I cron update &amp;&amp; pkg_version -vIL=</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si l'horloge système n'est pas positionnée
	  sur le fuseau horaire local, remplacez <code class="literal">3</code>
	  par une valeur quelconque comprise entre 0 et 23, afin de
	  répartir de manière plus
	  équilibrée la charge sur les serveurs
	  <span class="application">Portsnap</span>.</p></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Des versions anciennes de <code class="command">portsnap</code> ne
	  supportent pas l'utilisation de commandes multiples (par
	  exemple <code class="literal">cron update</code>) lors de la même
	  invocation de <code class="command">portsnap</code>.  Si la ligne
	  précédente échoue, essayez de remplacer
	  <code class="command">portsnap -I cron update</code> par
	  <code class="command">portsnap cron &amp;&amp; portsnap -I
	  update</code>.</p></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="cvs-tags"></a>A.7. Etiquettes CVS</h2></div></div></div><p>Quand on récupère ou l'on met à
      jour les sources en utilisant
      <span class="application">cvs</span> ou
      <span class="application">CVSup</span>, une étiquette de
      révision doit être spécifiée.
      Une étiquette de révision fait référence
      soit à une branche particulière de développement
      de FreeBSD, soit à un moment particulier dans
      le temps.  Le premier type d'étiquette est nommé
      &#8220;étiquette de branche&#8221;, le second type
      &#8220;étiquette de publication&#8221; &#8212;
      <span class="emphasis"><em>release tags</em></span>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86991824"></a>A.7.1. Etiquettes de branche</h3></div></div></div><p>Toutes ces étiquettes, à l'exception de
	l'étiquette <code class="literal">HEAD</code> (qui est une
	étiquette toujours valide), ne s'appliquent
	qu'à l'arborescence <code class="filename">src/</code>.
	Il n'y a pas de branche pour les arborescences
	<code class="filename">ports/</code>, <code class="filename">doc/</code>,
	et <code class="filename">www/</code>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">HEAD</span></dt><dd><p>Nom symbolique pour la branche principale de
	    développement, ou FreeBSD-CURRENT.  C'est aussi
	    la valeur par défaut lorsque la révision n'est
	    pas précisée.</p><p>Sous <span class="application">CVSup</span>, cette
	    étiquette est représentée par un
	    <code class="literal">.</code>
	    (ce n'est pas une ponctuation, mais bien le caractère
	    <code class="literal">.</code>).</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Sous CVS, c'est la valeur par défaut quand
	      aucune étiquette de révision n'est
	      précisée.  Ce n'est généralement
	      <span class="emphasis"><em>pas</em></span> une bonne idée
	      de récupérer ou mettre à jour vers
	      les sources CURRENT sur une machine STABLE, à
	      moins que cela ne soit vraiment votre intention.</p></div></dd><dt><span class="term">RELENG_6</span></dt><dd><p>Branche de développement pour FreeBSD-6.X,
	    également connue sous le nom de
	    FreeBSD 6-STABLE.</p></dd><dt><span class="term">RELENG_6_2</span></dt><dd><p>Branche de publication de la version FreeBSD-6.2,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_6_1</span></dt><dd><p>Branche de publication de la version FreeBSD-6.1,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_6_0</span></dt><dd><p>Branche de publication de la version FreeBSD-6.0,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_5</span></dt><dd><p>Branche de développement pour FreeBSD-5.X,
	    également connue sous le nom de
	    FreeBSD 5-STABLE.</p></dd><dt><span class="term">RELENG_5_5</span></dt><dd><p>Branche de publication de la version FreeBSD-5.5,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_5_4</span></dt><dd><p>Branche de publication de la version FreeBSD-5.4,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_5_3</span></dt><dd><p>Branche de publication de la version FreeBSD-5.3,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_5_2</span></dt><dd><p>Branche de publication des versions FreeBSD-5.2 et
	    FreeBSD-5.2.1, utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_5_1</span></dt><dd><p>Branche de publication de la version FreeBSD-5.1,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_5_0</span></dt><dd><p>Branche de publication de la version FreeBSD-5.0,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_4</span></dt><dd><p>Branche de développement de FreeBSD-4.X, aussi
	    connue sous le nom de FreeBSD 4-STABLE.</p></dd><dt><span class="term">RELENG_4_11</span></dt><dd><p>Branche de publication de la version FreeBSD-4.11,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_4_10</span></dt><dd><p>Branche de publication de la version FreeBSD-4.10,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_4_9</span></dt><dd><p>Branche de publication de la version FreeBSD-4.9,
	    utilisée uniquement pour les avis de
	    sécurité et autres correctifs de
	    problèmes critiques.</p></dd><dt><span class="term">RELENG_4_8</span></dt><dd><p>Branche de publication de la version FreeBSD-4.8,
	    utilisée uniquement pour les avis de sécurité
	    et autres correctifs de problèmes critiques.</p></dd><dt><span class="term">RELENG_4_7</span></dt><dd><p>Branche de publication de la version FreeBSD-4.7,
	    utilisée uniquement pour les avis de sécurité
	    et autres correctifs de problèmes critiques.</p></dd><dt><span class="term">RELENG_4_6</span></dt><dd><p>Branche de publication des versions FreeBSD-4.6 et
	    FreeBSD-4.6.2, utilisée uniquement pour les avis de
	    sécurité et autres correctifs de problèmes
	    critiques.</p></dd><dt><span class="term">RELENG_4_5</span></dt><dd><p>Branche de publication de la version FreeBSD-4.5,
	    utilisée uniquement pour les avis de sécurité
	    et autres correctifs de problèmes critiques.</p></dd><dt><span class="term">RELENG_4_4</span></dt><dd><p>Branche de publication de la version FreeBSD-4.4,
	    utilisée uniquement pour les avis de sécurité
	    et autres correctifs de problèmes critiques.</p></dd><dt><span class="term">RELENG_4_3</span></dt><dd><p>Branche de publication de la version FreeBSD-4.3,
	    utilisée uniquement pour les avis de sécurité
	    et autres correctifs de problèmes critiques.</p></dd><dt><span class="term">RELENG_3</span></dt><dd><p>Branche de développement de FreeBSD-3.X, aussi
	    connue sous le nom de 3.X-STABLE.</p></dd><dt><span class="term">RELENG_2_2</span></dt><dd><p>Branche de développement de FreeBSD-2.2.X, aussi
	    connue sous le nom de 2.2-STABLE.  Cette branche
	    est en grande partie obsolète.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87047888"></a>A.7.2. Etiquettes de publication</h3></div></div></div><p>Ces étiquettes font référence
	à un moment bien précis dans le temps quand une
	version particulière de FreeBSD a été
	publiée.  Le processus d'ingénierie des
	publications est documenté en détails dans les
	documents <a class="link" href="../../../../releng/" target="_top">Information sur la
	publication des versions</a> et <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/releng/release-proc.html" target="_top">Processus
	de publication</a>.  L'arborescence <code class="filename">src</code> utilise des étiquettes
	commençant par <code class="literal">RELENG_</code>.  Les
	arborescences <code class="filename">ports</code> et
	<code class="filename">doc</code> utilisent des
	étiquettes dont les noms commencent par
	<code class="literal">RELEASE</code>.  Enfin, l'arborescence <code class="filename">www</code> ne bénéficie pas
	d'étiquette particulière pour les
	publications.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">RELENG_6_2_0_RELEASE</span></dt><dd><p>FreeBSD 6.2</p></dd><dt><span class="term">RELENG_6_1_0_RELEASE</span></dt><dd><p>FreeBSD 6.1</p></dd><dt><span class="term">RELENG_6_0_0_RELEASE</span></dt><dd><p>FreeBSD 6.0</p></dd><dt><span class="term">RELENG_5_5_0_RELEASE</span></dt><dd><p>FreeBSD 5.5</p></dd><dt><span class="term">RELENG_5_4_0_RELEASE</span></dt><dd><p>FreeBSD 5.4</p></dd><dt><span class="term">RELENG_4_11_0_RELEASE</span></dt><dd><p>FreeBSD 4.11</p></dd><dt><span class="term">RELENG_5_3_0_RELEASE</span></dt><dd><p>FreeBSD 5.3</p></dd><dt><span class="term">RELENG_4_10_0_RELEASE</span></dt><dd><p>FreeBSD 4.10</p></dd><dt><span class="term">RELENG_5_2_1_RELEASE</span></dt><dd><p>FreeBSD 5.2.1</p></dd><dt><span class="term">RELENG_5_2_0_RELEASE</span></dt><dd><p>FreeBSD 5.2</p></dd><dt><span class="term">RELENG_4_9_0_RELEASE</span></dt><dd><p>FreeBSD 4.9</p></dd><dt><span class="term">RELENG_5_1_0_RELEASE</span></dt><dd><p>FreeBSD 5.1</p></dd><dt><span class="term">RELENG_4_8_0_RELEASE</span></dt><dd><p>FreeBSD 4.8</p></dd><dt><span class="term">RELENG_5_0_0_RELEASE</span></dt><dd><p>FreeBSD 5.0</p></dd><dt><span class="term">RELENG_4_7_0_RELEASE</span></dt><dd><p>FreeBSD 4.7</p></dd><dt><span class="term">RELENG_4_6_2_RELEASE</span></dt><dd><p>FreeBSD 4.6.2</p></dd><dt><span class="term">RELENG_4_6_1_RELEASE</span></dt><dd><p>FreeBSD 4.6.1</p></dd><dt><span class="term">RELENG_4_6_0_RELEASE</span></dt><dd><p>FreeBSD 4.6</p></dd><dt><span class="term">RELENG_4_5_0_RELEASE</span></dt><dd><p>FreeBSD 4.5</p></dd><dt><span class="term">RELENG_4_4_0_RELEASE</span></dt><dd><p>FreeBSD 4.4</p></dd><dt><span class="term">RELENG_4_3_0_RELEASE</span></dt><dd><p>FreeBSD 4.3</p></dd><dt><span class="term">RELENG_4_2_0_RELEASE</span></dt><dd><p>FreeBSD 4.2</p></dd><dt><span class="term">RELENG_4_1_1_RELEASE</span></dt><dd><p>FreeBSD 4.1.1</p></dd><dt><span class="term">RELENG_4_1_0_RELEASE</span></dt><dd><p>FreeBSD 4.1</p></dd><dt><span class="term">RELENG_4_0_0_RELEASE</span></dt><dd><p>FreeBSD 4.0</p></dd><dt><span class="term">RELENG_3_5_0_RELEASE</span></dt><dd><p>FreeBSD-3.5</p></dd><dt><span class="term">RELENG_3_4_0_RELEASE</span></dt><dd><p>FreeBSD-3.4</p></dd><dt><span class="term">RELENG_3_3_0_RELEASE</span></dt><dd><p>FreeBSD-3.3</p></dd><dt><span class="term">RELENG_3_2_0_RELEASE</span></dt><dd><p>FreeBSD-3.2</p></dd><dt><span class="term">RELENG_3_1_0_RELEASE</span></dt><dd><p>FreeBSD-3.1</p></dd><dt><span class="term">RELENG_3_0_0_RELEASE</span></dt><dd><p>FreeBSD-3.0</p></dd><dt><span class="term">RELENG_2_2_8_RELEASE</span></dt><dd><p>FreeBSD-2.2.8</p></dd><dt><span class="term">RELENG_2_2_7_RELEASE</span></dt><dd><p>FreeBSD-2.2.7</p></dd><dt><span class="term">RELENG_2_2_6_RELEASE</span></dt><dd><p>FreeBSD-2.2.6</p></dd><dt><span class="term">RELENG_2_2_5_RELEASE</span></dt><dd><p>FreeBSD-2.2.5</p></dd><dt><span class="term">RELENG_2_2_2_RELEASE</span></dt><dd><p>FreeBSD-2.2.2</p></dd><dt><span class="term">RELENG_2_2_1_RELEASE</span></dt><dd><p>FreeBSD-2.2.1</p></dd><dt><span class="term">RELENG_2_2_0_RELEASE</span></dt><dd><p>FreeBSD-2.2.0</p></dd></dl></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-afs"></a>A.8. Sites AFS</h2></div></div></div><p>Il y a des serveurs AFS pour FreeBSD sur les sites
      suivants:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Suède</span></dt><dd><p>Le chemin d'accès au fichiers est
	    <code class="filename">/afs/stacken.kth.se/ftp/pub/FreeBSD/</code></p><pre class="programlisting">stacken.kth.se         # Stacken Computer Club, KTH, Suède
130.237.234.43         #hot.stacken.kth.se
130.237.237.230        #fishburger.stacken.kth.se
130.237.234.3          #milko.stacken.kth.se</pre><p>Responsable <code class="email">&lt;<a xmlns="" class="email" href="mailto:ftp@stacken.kth.se">ftp@stacken.kth.se</a>&gt;</code></p></dd></dl></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="mirrors-rsync"></a>A.9. Sites rsync</h2></div></div></div><p>Les sites suivants fournissent FreeBSD en utilisant le
      protocole rsync.  L'utilitaire <span class="application">rsync</span>
      fonctionne globalement de la même manière que
      la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=rcp&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">rcp</span>(1)</span></a>, mais il dispose de plus d'options
      et utilise le protocole de mise à jour à distance rsync
      qui ne transfert que les différences entre deux ensembles
      de fichiers, ce qui accélère énormément
      la synchronisation par le réseau.  C'est surtout utile
      si vous disposez d'un miroir du serveur FTP de FreeBSD, ou
      du référentiel CVS.
      La suite <span class="application">rsync</span>
      est disponible sur de nombreux systèmes d'exploitation,
      et sous FreeBSD, voir le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/rsync/pkg-descr">net/rsync</a> ou utilisez la version
      pré-compilée.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">République Tchèque</span></dt><dd><p>rsync://ftp.cz.FreeBSD.org/</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp: un miroir partiel du serveur FTP
	      FreeBSD.</p></li><li class="listitem"><p>FreeBSD: un miroir complet du serveur FTP
	      FreeBSD.</p></li></ul></div></dd><dt><span class="term">Allemagne</span></dt><dd><p>rsync://grappa.unix-ag.uni-kl.de/</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>freebsd-cvs: référentiel CVS FreeBSD
	      complet.</p></li></ul></div><p>Cette machine est également miroir des
	    référentiels CVS des projets NetBSD et OpenBSD,
	    parmi d'autres.</p></dd><dt><span class="term">Hollande</span></dt><dd><p>rsync://ftp.nl.FreeBSD.org/</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>vol/4/freebsd-core: un miroir complet du
	      serveur FTP FreeBSD.</p></li></ul></div></dd><dt><span class="term">Thailande</span></dt><dd><p>rsync://ftp.tw.FreeBSD.org/</p><p>rsync://ftp2.tw.FreeBSD.org/</p><p>rsync://ftp6.tw.FreeBSD.org/</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: Un miroir complet
	      du serveur FTP FreeBSD.</p></li></ul></div></dd><dt><span class="term">Royaume-Uni</span></dt><dd><p>rsync://rsync.mirror.ac.uk/</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>ftp.freebsd.org: Un miroir complet
	      du serveur FTP FreeBSD.</p></li></ul></div></dd><dt><span class="term">Etats Unis d'Amérique</span></dt><dd><p>rsync://ftp-master.FreeBSD.org/</p><p>Ce serveur ne pourra être utilisé que
	    par les sites miroirs primaires FreeBSD.</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: l'archive principale du serveur
	      FTP FreeBSD.</p></li><li class="listitem"><p>acl: la liste principale ACL de
	      FreeBSD.</p></li></ul></div><p>rsync://ftp13.FreeBSD.org/</p><p>Collections disponibles:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>FreeBSD: Un miroir complet
	      du serveur FTP FreeBSD.</p></li></ul></div></dd></dl></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="bibliography"></a>Annexe B. Bibliographie</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#bibliography-freebsd">B.1. Livres &amp; magazines consacrés à FreeBSD</a></span></dt><dt><span class="sect1"><a href="#bibliography-userguides">B.2. Manuels d'utilisation</a></span></dt><dt><span class="sect1"><a href="#bibliography-adminguides">B.3. Manuels d'administration</a></span></dt><dt><span class="sect1"><a href="#bibliography-programmers">B.4. Manuels de programmation</a></span></dt><dt><span class="sect1"><a href="#bibliography-osinternals">B.5. &#8220;Internes&#8221; du système d'exploitation</a></span></dt><dt><span class="sect1"><a href="#bibliography-security">B.6. Ouvrages de référence en matière de sécurité</a></span></dt><dt><span class="sect1"><a href="#bibliography-hardware">B.7. Ouvrages de référence sur le matériel</a></span></dt><dt><span class="sect1"><a href="#bibliography-history">B.8. Histoire d'<span class="trademark">UNIX</span>®</a></span></dt><dt><span class="sect1"><a href="#bibliography-journals">B.9. Revues et journaux</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><p>Bien que les pages de manuel soient la documentation de
    référence pour chaque facette du système d'exploitation
    FreeBSD, il est de notoriété
    publique qu'elles n'expliquent pas comment assembler les morceaux pour avoir
    un système d'exploitation qui tourne sans encombre. Il n'y a pour
    cela pas d'autre alternative qu'un bon livre sur l'administration <span class="trademark">UNIX</span>® et un
    bon manuel utilisateur.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-freebsd"></a>B.1. Livres &amp; magazines consacrés à FreeBSD</h2></div></div></div><p><span class="emphasis"><em>Livres &amp; revues
	internationaux:</em></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://jdli.tw.FreeBSD.org/publication/book/freebsd2/index.htm" target="_top">Utiliser
	  FreeBSD</a> (en chinois traditionnel), publié par
	  <a class="link" href="http://www.drmaster.com.tw/" target="_top">Drmaster.</a>,
	  1997.  ISBN 9-578-39435-7.</p></li><li class="listitem"><p>FreeBSD Unleashed (traduction en chinois
	  simplifié), publié par
	  <a class="link" href="http://www.hzbook.com/" target="_top">China Machine
	  Press</a>. ISBN 7-111-10201-0.
	</p></li><li class="listitem"><p>FreeBSD From Scratch First Edition (en chinois
	  simplifié),
	  publié par China Machine Press. ISBN 7-111-07482-3.
	</p></li><li class="listitem"><p>FreeBSD From Scratch Second Edition (en chinois
	  simplifié),
	  publié par China Machine Press. ISBN 7-111-10286-X.
	</p></li><li class="listitem"><p>Manuel FreeBSD (traduction en chinois simplifié),
	  publié par
	  <a class="link" href="http://www.ptpress.com.cn/" target="_top">Posts &amp; Telecom
	  Press</a>. ISBN 7-115-10541-3.
	</p></li><li class="listitem"><p>FreeBSD 3.x Internet (en chinois simplifié),
	  publié par
	  <a class="link" href="http://www.tup.tsinghua.edu.cn/" target="_top">Tsinghua
	  University Press</a>. ISBN 7-900625-66-6.</p></li><li class="listitem"><p>FreeBSD &amp; Windows (en chinois simplifié),
	  ISBN 7-113-03845-X</p></li><li class="listitem"><p>FreeBSD Internet Services HOWTO (en chinois
	  simplifié), ISBN 7-113-03423-3</p></li><li class="listitem"><p>FreeBSD pour les utilisateurs de PC 98 (en Japonais),
	  publié par
	  SHUWA System Co, LTD.  ISBN 4-87966-468-5 C3055 P2900E.</p></li><li class="listitem"><p>FreeBSD (en Japonais), publié par CUTT.  ISBN 4-906391-22-2
	  C3055 P2400E.</p></li><li class="listitem"><p><a class="link" href="http://www.shoeisha.com/book/Detail.asp?bid=650" target="_top">Introduction
	    complète à FreeBSD</a> (en Japonais),
	    publié par <a class="link" href="http://www.shoeisha.co.jp/" target="_top">Shoeisha Co., Ltd</a>.  ISBN
	    4-88135-473-6 P3600E.</p></li><li class="listitem"><p><a class="link" href="http://www.ascii.co.jp/pb/book1/shinkan/detail/1322785.html" target="_top">Kit
	    de démarrage pour Unix personnel FreeBSD</a> (en
	    Japonais), publié par <a class="link" href="http://www.ascii.co.jp/" target="_top">ASCII</a>.  ISBN 4-7561-1733-3
	    P3000E.</p></li><li class="listitem"><p>Manuel de référence FreeBSD (traduction en
	  Japonais), publié par
	  <a class="link" href="http://www.ascii.co.jp/" target="_top">ASCII</a>.  ISBN
	  4-7561-1580-2 P3800E.</p></li><li class="listitem"><p>FreeBSD avec méthode (en Allemand), publié par
	  <a class="link" href="http://www.cul.de" target="_top">Computer und Literatur Verlag</a>/Vertrieb Hanser, 1998.  ISBN
	  3-932311-31-0.</p></li><li class="listitem"><p><a class="link" href="http://www.cul.de/freebsd.html" target="_top">FreeBSD 4 -
	  Installieren, Konfigurieren, Administrieren</a> (en Allemand),
	  publié par <a class="link" href="http://www.cul.de" target="_top">Computer und Literatur
	  Verlag</a>, 2001.  ISBN 3-932311-88-4.</p></li><li class="listitem"><p><a class="link" href="http://www.cul.de/freebsd.html" target="_top">FreeBSD 5 -
	  Installieren, Konfigurieren, Administrieren</a>
	  (en Allemand), publié par <a class="link" href="http://www.cul.de" target="_top">Computer und Literatur Verlag</a>,
	  2003.  ISBN 3-936546-06-1.</p></li><li class="listitem"><p><a class="link" href="http://www.mitp.de/vmi/mitp/detail/pWert/1343/" target="_top">
	  FreeBSD de Luxe</a> (en Allemand), publié par
	  <a class="link" href="http://www.mitp.de" target="_top">Verlag Modere Industrie</a>,
	  2003. ISBN 3-8266-1343-0.</p></li><li class="listitem"><p><a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/install-manual.html" target="_top">Manuel
	    d'installation et d'utilisation de FreeBSD</a> (en Japonais),
	    publié par <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">Mainichi
	    Communications Inc.</a>, 1998.  ISBN 4-8399-0112-0.</p></li><li class="listitem"><p>Onno W Purbo, Dodi Maryanto, Syahrial Hubbany, Widjil Widodo
	<span class="emphasis"><em><a class="link" href="http://maxwell.itb.ac.id/" target="_top">Construire un
	serveur Internet avec FreeBSD</a></em></span> (en Indonésien),
	publié
	par <a class="link" href="http://www.elexmedia.co.id/" target="_top">Elex Media Komputindo</a>.</p></li><li class="listitem"><p>Absolute BSD: The Ultimate Guide to FreeBSD (traduction
	  en chinois traditionnel), publié par <a class="link" href="http://www.grandtech.com.tw/" target="_top">GrandTech Press</a>,
	  2003.  ISBN 986-7944-92-5.</p></li><li class="listitem"><p><a class="link" href="http://www.twbsd.org/cht/book/" target="_top">The FreeBSD 6.0
	  Book</a> (en chinois traditionnel), publié par
	  Drmaster, 2006.  ISBN 9-575-27878-X.</p></li></ul></div><p><span class="emphasis"><em>Livres &amp; revues en langue anglaise:</em></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://www.AbsoluteBSD.com/" target="_top">Absolute
	  BSD: The Ultimate Guide to FreeBSD</a>, publié par
	  <a class="link" href="http://www.nostarch.com/" target="_top">No Starch
	  Press</a>, 2002.  ISBN: 1886411743</p></li><li class="listitem"><p><a class="link" href="http://www.freebsdmall.com/cgi-bin/fm/bsdcomp" target="_top">
	    The Complete FreeBSD</a>, publié par
	    <a class="link" href="http://www.oreilly.com/" target="_top">O'Reilly</a>,
	    2003.  ISBN: 0596005164</p></li><li class="listitem"><p><a class="link" href="http://www.freebsd-corp-net-guide.com/" target="_top">The
	  FreeBSD Corporate Networker's Guide</a>, publié par
	  <a class="link" href="http://www.awl.com/aw/" target="_top">Addison-Wesley</a>,
	  2000.  ISBN: 0201704811</p></li><li class="listitem"><p><a class="link" href="http://andrsn.stanford.edu/FreeBSD/introbook/" target="_top">
	  FreeBSD: An Open-Source Operating System for Your Personal
	  Computer</a>, publié par The Bit Tree Press, 2001.
	  ISBN: 0971204500</p></li><li class="listitem"><p>Teach Yourself FreeBSD in 24 Hours, publié par
	  <a class="link" href="http://www.samspublishing.com/" target="_top">Sams</a>, 2002.
	  ISBN: 0672324245</p></li><li class="listitem"><p>FreeBSD unleashed, publié par
	  <a class="link" href="http://www.samspublishing.com/" target="_top">Sams</a>, 2006.
	  ISBN: 0672328755</p></li><li class="listitem"><p>FreeBSD: The Complete Reference, publié
	  <a class="link" href="http://books.mcgraw-hill.com" target="_top">McGrawHill</a>, 2003.
	  ISBN: 0072224096 </p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-userguides"></a>B.2. Manuels d'utilisation</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    User's Reference Manual</em></span>.  O'Reilly &amp; Associates,
	  Inc., 1994. ISBN 1-56592-075-9</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    User's Supplementary Documents</em></span>. O'Reilly &amp;
	  Associates, Inc., 1994. ISBN 1-56592-076-7</p></li><li class="listitem"><p><span class="emphasis"><em>UNIX in a Nutshell</em></span>.  O'Reilly &amp;
	  Associates, Inc., 1990. ISBN 093717520X</p></li><li class="listitem"><p>Mui, Linda.  <span class="emphasis"><em>What You Need To Know When You Can't Find
	    Your UNIX System Administrator</em></span>.  O'Reilly &amp;
	  Associates, Inc., 1995. ISBN 1-56592-104-6</p></li><li class="listitem"><p><a class="link" href="http://www.osu.edu/" target="_top">L'Université de l'Etat
	  d'Ohio</a> a écrit un <a class="link" href="http://8help.osu.edu/wks/unix_course/unix.html" target="_top">Cours
	  d'introduction à Unix</a> qui est disponible en ligne aux
	  formats HTML et PostScript.</p><p>Une <a class="link" href="../../../../doc/it_IT.ISO8859-15/books/unix-introduction/index.html" target="_top">version</a>
	  en Italien de ce document fait partie du projet de
	  documentation FreeBSD Italien.</p></li><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/" target="_top">Jpman Project,
	  Groupe d'utilisateurs japonais de FreeBSD</a>.  <a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/urm.html" target="_top">Manuel de
	  référence utilisateur de FreeBSD</a> (traduction en
	  Japonais). <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">Mainichi
	  Communications Inc.</a>, 1998.  ISBN4-8399-0088-4 P3800E.</p></li><li class="listitem"><p><a class="link" href="http://www.ed.ac.uk/" target="_top">L'Université d'Edinburgh</a>
	  a écrit un <a class="link" href="http://unixhelp.ed.ac.uk/" target="_top">Guide en
	  ligne</a> pour les nouveaux venus à l'environnement Unix.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-adminguides"></a>B.3. Manuels d'administration</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Albitz, Paul and Liu, Cricket.  <span class="emphasis"><em>DNS and
	    BIND</em></span>, 4th Ed. O'Reilly &amp; Associates, Inc., 2001.
	  ISBN 1-59600-158-4</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    System Manager's Manual</em></span>.  O'Reilly &amp; Associates,
	  Inc., 1994.  ISBN 1-56592-080-5</p></li><li class="listitem"><p>Costales, Brian, et al.  <span class="emphasis"><em>Sendmail</em></span>, 2nd Ed.
	  O'Reilly &amp; Associates, Inc., 1997. ISBN 1-56592-222-0</p></li><li class="listitem"><p>Frisch, Æleen.  <span class="emphasis"><em>Essential System
	    Administration</em></span>, 2nd Ed. O'Reilly &amp; Associates,
	  Inc., 1995.  ISBN 1-56592-127-5</p></li><li class="listitem"><p>Hunt, Craig.  <span class="emphasis"><em>TCP/IP Network
	    Administration</em></span>, 2nd Ed. O'Reilly &amp; Associates, Inc., 1997.
	  ISBN 1-56592-322-7</p></li><li class="listitem"><p>Nemeth, Evi.  <span class="emphasis"><em>UNIX System Administration
	    Handbook</em></span>.  3rd Ed. Prentice Hall, 2000.  ISBN
          0-13-020601-6</p></li><li class="listitem"><p>Stern, Hal <span class="emphasis"><em>Managing NFS and NIS</em></span> O'Reilly
	  &amp; Associates, Inc., 1991.  ISBN 0-937175-75-7</p></li><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/" target="_top">Jpman Project,
	    Groupe d'utilisateurs japonais de FreeBSD</a>.  <a class="link" href="http://www.pc.mycom.co.jp/FreeBSD/sam.html" target="_top">Manuel de
	    l'administrateur système FreeBSD</a> (traduction en Japonais).
	    <a class="link" href="http://www.pc.mycom.co.jp/" target="_top">Mainichi Communications
	    Inc.</a>, 1998.  ISBN4-8399-0109-0 P3300E.</p></li><li class="listitem"><p>Dreyfus, Emmanuel.  <a class="link" href="http://www.eyrolles.com/Informatique/Livre/9782212114638/" target="_top">Cahiers
	  de l'Admin: BSD</a> 2nde Ed. (en Français), Eyrolles, 2004.
	  ISBN 2-212-11463-X</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-programmers"></a>B.4. Manuels de programmation</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Asente, Paul, Converse, Diana, and Swick, Ralph.
	  <span class="emphasis"><em>X Window System Toolkit</em></span>.  Digital Press,
	  1998.  ISBN 1-55558-178-1</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    Programmer's Reference Manual</em></span>. O'Reilly &amp;
	  Associates, Inc., 1994.  ISBN 1-56592-078-3</p></li><li class="listitem"><p>Computer Systems Research Group, UC Berkeley.  <span class="emphasis"><em>4.4BSD
	    Programmer's Supplementary Documents</em></span>.  O'Reilly &amp;
	  Associates, Inc., 1994.  ISBN 1-56592-079-1</p></li><li class="listitem"><p>Harbison, Samuel P. and Steele, Guy L. Jr.  <span class="emphasis"><em>C: A
	    Reference Manual</em></span>.  4th ed. Prentice Hall, 1995.
	  ISBN 0-13-326224-3</p></li><li class="listitem"><p>Kernighan, Brian and Dennis M. Ritchie.  <span class="emphasis"><em>The C
	    Programming Language</em></span>.  2nd Ed. PTR Prentice Hall, 1988.
	  ISBN 0-13-110362-8</p></li><li class="listitem"><p>Lehey, Greg.  <span class="emphasis"><em>Porting UNIX Software</em></span>.
	  O'Reilly &amp; Associates, Inc., 1995.  ISBN 1-56592-126-7</p></li><li class="listitem"><p>Plauger, P. J. <span class="emphasis"><em>The Standard C Library</em></span>.
	  Prentice Hall, 1992.  ISBN 0-13-131509-9</p></li><li class="listitem"><p>Spinellis, Diomidis.  <a class="link" href="http://www.spinellis.gr/codereading/" target="_top"><span class="emphasis"><em>Code
	  Reading: The Open Source Perspective</em></span></a>.
	  Addison-Wesley, 2003.  ISBN 0-201-79940-5</p></li><li class="listitem"><p>Spinellis, Diomidis.  <a class="link" href="http://www.spinellis.gr/codequality/" target="_top"><span class="emphasis"><em>Code
	  Quality: The Open Source Perspective</em></span></a>.
	  Addison-Wesley, 2006.  ISBN 0-321-16607-8</p></li><li class="listitem"><p>Stevens, W. Richard and Stephen A. Rago.
	<span class="emphasis"><em>Advanced Programming in the UNIX
	    Environment</em></span>.  2nd Ed.
	    Reading, Mass. : Addison-Wesley, 2005.
	  ISBN 0-201-43307-9</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>UNIX Network
	    Programming</em></span>.  2nd Ed, PTR Prentice Hall, 1998.  ISBN
	  0-13-490012-X</p></li><li class="listitem"><p>Wells, Bill.  &#8220;Writing Serial Drivers for UNIX&#8221;.
	  <span class="emphasis"><em>Dr. Dobb's Journal</em></span>. 19(15), December 1994.
	  pp68-71, 97-99.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-osinternals"></a>B.5. &#8220;Internes&#8221; du système d'exploitation</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Andleigh, Prabhat K.  <span class="emphasis"><em>UNIX System
	    Architecture</em></span>.  Prentice-Hall, Inc., 1990.  ISBN
          0-13-949843-5</p></li><li class="listitem"><p>Jolitz, William.  &#8220;Porting UNIX to the 386&#8221;.
	  <span class="emphasis"><em>Dr. Dobb's Journal</em></span>.  January 1991-July
	  1992.</p></li><li class="listitem"><p>Leffler, Samuel J., Marshall Kirk McKusick, Michael J Karels and
	  John Quarterman <span class="emphasis"><em>The Design and Implementation of the
	    4.3BSD UNIX Operating System</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1989.  ISBN 0-201-06196-1</p></li><li class="listitem"><p>Leffler, Samuel J., Marshall Kirk McKusick, <span class="emphasis"><em>The Design
	    and Implementation of the 4.3BSD UNIX Operating System: Answer
	    Book</em></span>.  Reading, Mass. : Addison-Wesley, 1991.  ISBN
          0-201-54629-9</p></li><li class="listitem"><p>McKusick, Marshall Kirk, Keith Bostic, Michael J Karels, and
	  John Quarterman.  <span class="emphasis"><em>The Design and Implementation of the
	    4.4BSD Operating System</em></span>.  Reading, Mass. :
	  Addison-Wesley, 1996.  ISBN 0-201-54979-4</p><p>(Le chapitre 2 de ce livre est disponible <a class="link" href="../../../../doc/en_US.ISO8859-1/books/design-44bsd/book.html" target="_top">en ligne</a> en tant que
	  partie du Projet de Documentation de FreeBSD, et le chapitre 9 <a class="link" href="http://www.netapp.com/tech_library/nfsbook.html" target="_top">
	  ici</a>.)</p></li><li class="listitem"><p>Marshall Kirk McKusick, George V. Neville-Neil
	  <span class="emphasis"><em>The Design and Implementation of the FreeBSD
	  Operating System</em></span>.  Boston, Mass. : Addison-Wesley,
	  2004.  ISBN 0-201-70245-2</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>TCP/IP Illustrated, Volume 1:
	    The Protocols</em></span>.  Reading, Mass. : Addison-Wesley,
	  1996.  ISBN 0-201-63346-9</p></li><li class="listitem"><p>Schimmel, Curt.  <span class="emphasis"><em>Unix Systems for Modern
	    Architectures</em></span>.  Reading, Mass. : Addison-Wesley, 1994.
	  ISBN 0-201-63338-8</p></li><li class="listitem"><p>Stevens, W. Richard.  <span class="emphasis"><em>TCP/IP Illustrated, Volume 3:
	    TCP for Transactions, HTTP, NNTP and the UNIX Domain
	    Protocols</em></span>.  Reading, Mass. : Addison-Wesley, 1996.
	  ISBN 0-201-63495-3</p></li><li class="listitem"><p>Vahalia, Uresh.  <span class="emphasis"><em>UNIX Internals -- The New
	    Frontiers</em></span>.  Prentice Hall, 1996.  ISBN
          0-13-101908-2</p></li><li class="listitem"><p>Wright, Gary R. and W. Richard Stevens.  <span class="emphasis"><em>TCP/IP
	    Illustrated, Volume 2: The Implementation</em></span>. Reading,
	  Mass. : Addison-Wesley, 1995.  ISBN 0-201-63354-X</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-security"></a>B.6. Ouvrages de référence en matière de sécurité</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cheswick, William R. and Steven M. Bellovin. <span class="emphasis"><em>Firewalls
	    and Internet Security: Repelling the Wily Hacker</em></span>.
	  Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-63357-4</p></li><li class="listitem"><p>Garfinkel, Simson and Gene Spafford.
	  <span class="emphasis"><em>Practical UNIX &amp; Internet Security</em></span>.
	  2nd Ed. O'Reilly &amp; Associates, Inc., 1996.  ISBN
	  1-56592-148-8</p></li><li class="listitem"><p>Garfinkel, Simson.  <span class="emphasis"><em>PGP Pretty Good
	    Privacy</em></span> O'Reilly &amp; Associates, Inc., 1995.  ISBN
          1-56592-098-8</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-hardware"></a>B.7. Ouvrages de référence sur le matériel</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Anderson, Don and Tom Shanley.  <span class="emphasis"><em>Pentium Processor
	    System Architecture</em></span>.  2nd Ed. Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-40992-5</p></li><li class="listitem"><p>Ferraro, Richard F.  <span class="emphasis"><em>Programmer's Guide to the EGA,
	    VGA, and Super VGA Cards</em></span>.  3rd ed. Reading, Mass. :
	  Addison-Wesley, 1995.  ISBN 0-201-62490-7</p></li><li class="listitem"><p>Intel Corporation publie la documentation sur ses
	  processeurs, circuits et standards sur son <a class="link" href="http://developer.intel.com/" target="_top">site web développeur</a>,
	  généralement sous forme de fichiers PDF.</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>80486 System Architecture</em></span>.
	  3rd ed. Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-40994-1</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>ISA System Architecture</em></span>.
	  3rd ed. Reading, Mass. : Addison-Wesley, 1995.  ISBN
	  0-201-40996-8</p></li><li class="listitem"><p>Shanley, Tom.  <span class="emphasis"><em>PCI System Architecture</em></span>.
	  4th ed. Reading, Mass. : Addison-Wesley, 1999.  ISBN
	  0-201-30974-2</p></li><li class="listitem"><p>Van Gilluwe, Frank.  <span class="emphasis"><em>The Undocumented PC</em></span>, 2nd Ed.
	  Reading, Mass: Addison-Wesley Pub. Co., 1996.  ISBN
	  0-201-47950-8</p></li><li class="listitem"><p>Messmer, Hans-Peter.  <span class="emphasis"><em>The Indispensable PC Hardware Book</em></span>, 4th Ed.
	  Reading, Mass: Addison-Wesley Pub. Co., 2002.  ISBN
	  0-201-59616-4</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-history"></a>B.8. Histoire d'<span class="trademark">UNIX</span>®</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Lion, John <span class="emphasis"><em>Lion's Commentary on UNIX, 6th Ed. With
	    Source Code</em></span>.  ITP Media Group, 1996.  ISBN
	  1573980137</p></li><li class="listitem"><p>Raymond, Eric S.  <span class="emphasis"><em>The New Hacker's Dictionary, 3rd
	    edition</em></span>.  MIT Press, 1996.  ISBN
	  0-262-68092-0.  Aussi connu sous le nom de <a class="link" href="http://www.catb.org/~esr/jargon/html/index.html" target="_top">Jargon
	    File</a></p></li><li class="listitem"><p>Salus, Peter H.  <span class="emphasis"><em>A quarter century of UNIX</em></span>.
	  Addison-Wesley Publishing Company, Inc., 1994.  ISBN
	  0-201-54777-5</p></li><li class="listitem"><p>Simon Garfinkel, Daniel Weise, Steven Strassmann. <span class="emphasis"><em>The
	    UNIX-HATERS Handbook</em></span>.  IDG Books Worldwide, Inc.,
	  1994.  ISBN 1-56884-203-1.  Epuisé, mais disponible
	  <a class="link" href="http://research.microsoft.com/~daniel/unix-haters.html" target="_top">
	  en ligne</a>.</p></li><li class="listitem"><p>Don Libes, Sandy Ressler <span class="emphasis"><em>Life with UNIX</em></span>
	  &#8212; special edition.  Prentice-Hall, Inc., 1989.  ISBN
          0-13-536657-7</p></li><li class="listitem"><p><span class="emphasis"><em>The BSD family tree</em></span>.  <code class="uri"><a class="uri" href="http://www.FreeBSD.org/cgi/cvsweb.cgi/src/share/misc/bsd-family-tree" target="_top">http://www.FreeBSD.org/cgi/cvsweb.cgi/src/share/misc/bsd-family-tree</a></code> ou <a class="link" href="file://localhost/usr/share/misc/bsd-family-tree" target="_top">local</a> sur une machine FreeBSD.</p></li><li class="listitem"><p><span class="emphasis"><em>The BSD Release Announcements collection</em></span>.
	  1997.  <code class="uri"><a class="uri" href="http://www.de.FreeBSD.org/de/ftp/releases/" target="_top">http://www.de.FreeBSD.org/de/ftp/releases/</a></code></p></li><li class="listitem"><p><span class="emphasis"><em>Networked Computer Science Technical Reports
	    Library</em></span>.  <code class="uri"><a class="uri" href="http://www.ncstrl.org/" target="_top">http://www.ncstrl.org/</a></code></p></li><li class="listitem"><p><span class="emphasis"><em>Anciennes version de BSD du Computer Systems Research
	    group (CSRG)</em></span>.  <code class="uri"><a class="uri" href="http://www.mckusick.com/csrg/" target="_top">http://www.mckusick.com/csrg/</a></code>:
	  Ces 4 CDROMs incluent toutes les versions de BSD de 1BSD à
	  4.4BSD et 4.4BSD-Lite2 (mais malheureusement pas 2.11BSD).  De
	  plus le dernier CDROM contient les dernières sources et les
	  fichiers SCCS.</p></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="bibliography-journals"></a>B.9. Revues et journaux</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>The C/C++ Users Journal</em></span>.  R&amp;D
	  Publications Inc.  ISSN 1075-2838</p></li><li class="listitem"><p><span class="emphasis"><em>Sys Admin &#8212; The Journal for UNIX System
	    Administrators</em></span> Miller Freeman, Inc., ISSN
	  1061-2688</p></li><li class="listitem"><p><span class="emphasis"><em>freeX &#8212; Das Magazin für Linux - BSD
	  - UNIX</em></span> (in German) Computer- und Literaturverlag
	  GmbH, ISSN 1436-7033</p></li></ul></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources"></a>Annexe C. Ressources sur Internet</h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#eresources-mail">C.1. Listes de diffusion</a></span></dt><dt><span class="sect1"><a href="#eresources-news">C.2. Forums de discussion</a></span></dt><dt><span class="sect1"><a href="#eresources-web">C.3. Serveurs World Wide Web</a></span></dt><dt><span class="sect1"><a href="#eresources-email">C.4. Adresses électroniques</a></span></dt><dt><span class="sect1"><a href="#eresources-shell">C.5. Comptes</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><p>L'évolution rapide de FreeBSD rend peu pratique le suivi des
    développements via des supports imprimés. Les supports
    électroniques sont le meilleur, sinon la plupart du temps
    le seul, moyen de se tenir au courant des dernières avancées.
    Comme FreeBSD est un effort basé sur le volontariat, la communauté
    des utilisateurs sert généralement de &#8220;service
    de support technique&#8221;, le courrier électronique et les
    forums de discussion étant le meilleur moyen de contacter cette
    communauté.</p><p>Les points de contact les plus importants avec la communauté
    des utilisateurs de FreeBSD sont listés ci-dessous.  Si vous
    connaissez d'autres ressources qui n'y figurent pas,
    communiquez-les s'il vous plaît à la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">liste de diffusion du groupe de documentation de FreeBSD</a> de façon
    à ce qu'elles soient aussi mentionnées.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-mail"></a>C.1. Listes de diffusion</h2></div></div></div><p>Bien qu'un grand de nombre de développeurs de FreeBSD lisent les forums
      de discussion, nous ne pouvons vous garantir de réponse en
      temps et en heure à vos questions (ni même de
      réponse tout court) si vous ne les postez que sur un des forums
      <code class="literal">comp.unix.bsd.freebsd.*</code>.  En adressant vos
      questions sur la liste de diffusion appropriée vous nous
      contacterez en même temps qu'un auditoire FreeBSD
      concentré, ce qui vous garantit invariablement une
      meilleure (ou tout au moins une plus rapide) réponse.</p><p>Les chartes d'utilisation pour les différentes listes sont
      données à la fin de ce document.  <span class="emphasis"><em>Lisez-les
      s'il vous plaît avant de vous inscrire ou d'envoyer du courrier
      à une liste</em></span>.  La plupart des inscrits à nos
      listes reçoivent maintenant des centaines de messages en rapport
      à FreeBSD chaque jour, et en définissant des chartes
      et des règles d'utilisation, nous essayons de garder assez
      élevé le rapport signal/bruit sur les listes.  Ne pas
      le faire verrait l'échec des listes de diffusion comme moyen
      efficace de communication pour le projet.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml"><span class="emphasis"><em>Si vous désirez tester votre
	capacité à envoyer du courrier aux listes FreeBSD,
	envoyez un message de test à la liste
	<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-test" target="_top">freebsd-test</a>.</em></span>  Veuillez ne pas envoyer de messages
	de test vers une autre liste.</p></div><p>En cas de doute sur la liste sur laquelle poser une
      question, lisez <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/freebsd-questions" target="_top">
      Comment obtenir les meilleurs résultats sur la liste de
      diffusion FreeBSD-questions</a>.</p><p>Avant de poster sur une liste de diffusion, veuillez
      apprendre à utiliser au mieux les listes de diffusion,
      comme par exemple éviter de relancer des discussions qui
      reviennent régulièrement, en lisant le document
      (FAQ) sur <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/mailing-list-faq" target="_top">les
      questions fréquemment posées au sujet des listes
      de diffusion</a>.</p><p>Des archives de toutes les listes de diffusion sont
      conservées et on peut effectuer des recherches sur le
      <a class="link" href="../../../../search/index.html" target="_top">serveur World Wide
      Web de FreeBSD</a>.  Les archives interrogeables par
      mots-clés offrent un excellent moyen de trouver des réponses
      aux questions fréquemment posées et devraient
      être consultées avant de poster une question.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-summary"></a>C.1.1. Résumé des listes de diffusion</h3></div></div></div><p><span class="emphasis"><em>Listes générales:</em></span> les listes
	suivantes sont des listes générales auxquelles chacun est
	libre (et encouragé) de s'inscrire:</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Liste</th><th>Objet</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/cvs-all" target="_top">cvs-all</a></td><td>Toutes les modifications de l'arborescence des
		sources</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-advocacy" target="_top">freebsd-advocacy</a></td><td>Propagande FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">freebsd-announce</a></td><td>Evénements et étapes importantes du
		projet</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-arch" target="_top">freebsd-arch</a></td><td>Discussions sur l'architecture et
		l'implémentation de FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugbusters" target="_top">freebsd-bugbusters</a></td><td>Discussions concernant la maintenance de la base
		des données des rapports de bogue de FreeBSD et des
		outils rattachés</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugs" target="_top">freebsd-bugs</a></td><td>Rapports de bogue</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">freebsd-chat</a></td><td>Sujets non-techniques en rapport avec la
		communauté FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a></td><td>Discussions concernant l'utilisation de
		FreeBSD-CURRENT</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">freebsd-isp</a></td><td>Pour les fournisseurs d'accès utilisant
		FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-jobs" target="_top">freebsd-jobs</a></td><td>Emplois et interventions de consultants en
		rapport avec FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-policy" target="_top">freebsd-policy</a></td><td>Décisions de la politique de l'équipe
		de base de FreeBSD.  Volume faible, et accès en lecture
		uniquement</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a></td><td>Questions des utilisateurs et support
		technique</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">freebsd-security-notifications</a></td><td>Avis de sécurité</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a></td><td>Discussions concernant l'utilisation de
		FreeBSD-STABLE</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-test" target="_top">freebsd-test</a></td><td>Où envoyer vos messages de test au lieu que
		dans une des listes réelles</td></tr></tbody></table></div><p><span class="emphasis"><em>Listes techniques:</em></span> les listes
	suivantes sont destinées aux discussions techniques.  Vous
	devriez lire la charte d'utilisation pour chaque liste
	attentivement avant de s'y inscrire ou d'y envoyer du courrier
	parce qu'il y a des règles fermes quant à leur
	utilisation et leur contenu.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Liste</th><th>Objet</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a></td><td>Développement de l'ACPI et de la gestion
		d'energie</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-afs" target="_top">freebsd-afs</a></td><td>Portage d'AFS sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/aic7xxx" target="_top">freebsd-aic7xxx</a></td><td>Développement de pilotes pour les
		contrôleurs AIC 7xxx d'<span class="trademark">Adaptec</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-alpha" target="_top">freebsd-alpha</a></td><td>Portage de FreeBSD sur les systèmes Alpha</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-amd64" target="_top">freebsd-amd64</a></td><td>Portage de FreeBSD sur les systèmes
		AMD64</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-apache" target="_top">freebsd-apache</a></td><td>Discussion sur les logiciels portés
		relatifs à
		<span class="application">Apache</span></td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-arm" target="_top">freebsd-arm</a></td><td>Portage de FreeBSD sur les processeurs <span class="trademark">ARM</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-atm" target="_top">freebsd-atm</a></td><td>Utilisation de réseaux ATM avec FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-audit" target="_top">freebsd-audit</a></td><td>Projet d'audit du code source</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-binup" target="_top">freebsd-binup</a></td><td>Conception et développement du système
		de mise à jour binaire</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bluetooth" target="_top">freebsd-bluetooth</a></td><td>Utilisation de la technologie <span class="trademark">Bluetooth</span>® sous
		FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-cluster" target="_top">freebsd-cluster</a></td><td>Utilisation de FreeBSD dans un environnement en
		grappe</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-cvsweb" target="_top">freebsd-cvsweb</a></td><td>Maintenance du système CVSweb</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-database" target="_top">freebsd-database</a></td><td>Discussions à propos de l'utilisation de bases
		de données et de leur développement sous
		FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">freebsd-doc</a></td><td>Création de documents en rapport avec
		FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-drivers" target="_top">freebsd-drivers</a></td><td>Ecrire des pilotes de périphériques
		pour FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-eclipse" target="_top">freebsd-eclipse</a></td><td>Pour les utilisateurs FreeBSD de l'EDI Eclipse, les
		outils, les applications clientes et les logiciels
		portés.</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-embedded" target="_top">freebsd-embedded</a></td><td>Utilisation de FreeBSD dans les applications
		embarquées</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-eol" target="_top">freebsd-eol</a></td><td>Entre-aide sur les logiciels relatifs à
		FreeBSD et qui ne sont plus supportés par le projet
		FreeBSD.</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-emulation" target="_top">freebsd-emulation</a></td><td>Emulation d'autres systèmes comme
		Linux/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-firewire" target="_top">freebsd-firewire</a></td><td>Discussion technique au sujet du <span class="trademark">FireWire</span>® (iLink,
		IEEE 1394) sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-fs" target="_top">freebsd-fs</a></td><td>Systèmes de fichiers</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-geom" target="_top">freebsd-geom</a></td><td>Discussions spécifiques à GEOM et
		à ses implémentations</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-gnome" target="_top">freebsd-gnome</a></td><td>Portage de <span class="application">GNOME</span> et
		des applications <span class="application">GNOME</span></td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">freebsd-hackers</a></td><td>Discussions techniques générales</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hardware" target="_top">freebsd-hardware</a></td><td>Discussion générale à propos du
		matériel fonctionnant sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-i18n" target="_top">freebsd-i18n</a></td><td>Internationalisation de FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ia32" target="_top">freebsd-ia32</a></td><td>FreeBSD sur la plate-forme IA-32 (<span class="trademark">Intel</span>® x86)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ia64" target="_top">freebsd-ia64</a></td><td>Portage de FreeBSD sur les futurs système
		<span class="trademark">Intel</span>® IA64</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ipfw" target="_top">freebsd-ipfw</a></td><td>Discussion technique concernant le développement
		du nouveau code du coupe-feu</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a></td><td>Développeurs ISDN</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-jail" target="_top">freebsd-jail</a></td><td>Discussion au sujet des environnements
		<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=jail&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">jail</span>(8)</span></a></td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-java" target="_top">freebsd-java</a></td><td>Développeurs <span class="trademark">Java</span>&#8482; et personnes portant et les
		JDKs sous FreeBSD</td></tr><tr><td><a class="link" href="https://mail.kde.org/mailman/listinfo/kde-freebsd" target="_top">freebsd-kde</a></td><td>Portage de <span class="application">KDE</span> et des
		applications pour <span class="application">KDE</span></td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-lfs" target="_top">freebsd-lfs</a></td><td>Portage de LFS sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-libh" target="_top">freebsd-libh</a></td><td>Le système d'installation et de logiciel
		pré-compilé de seconde
		génération</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mips" target="_top">freebsd-mips</a></td><td>Portage de FreeBSD sur <span class="trademark">MIPS</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mobile" target="_top">freebsd-mobile</a></td><td>Discussions à propos des ordinateurs
		portables</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-mozilla" target="_top">freebsd-mozilla</a></td><td>Portage de <span class="application">Mozilla</span> sous
		FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-multimedia" target="_top">freebsd-multimedia</a></td><td>Applications multimédia</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-new-bus" target="_top">freebsd-new-bus</a></td><td>Discussions techniques au sujet de l'architecture
		de bus</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-net" target="_top">freebsd-net</a></td><td>Discussion au sujet des réseaux et du code source
		TCP/IP</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-openoffice" target="_top">freebsd-openoffice</a></td><td>Portage d'<span class="application">OpenOffice.org</span> et de
		<span class="application"><span class="trademark">StarOffice</span>&#8482;</span> sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-performance" target="_top">freebsd-performance</a></td><td>Questions relatives à l'optimisation pour
		les installations à charge/performances
		élevées.</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-perl" target="_top">freebsd-perl</a></td><td>Maintenance des logiciels portés relatifs
		à <span class="application">perl</span></td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-pf" target="_top">freebsd-pf</a></td><td>Discussions et questions concernant le
		système de coupe-feu packet filter</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-platforms" target="_top">freebsd-platforms</a></td><td>Portages sur des plateformes à architecture
		non <span class="trademark">Intel</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">freebsd-ports</a></td><td>Discussion sur le catalogue des logiciels
		portés</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports-bugs" target="_top">freebsd-ports-bugs</a></td><td>Discussion sur les bogues/PRs des logiciels
		portés</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ppc" target="_top">freebsd-ppc</a></td><td>Portage de FreeBSD pour le <span class="trademark">PowerPC</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-proliant" target="_top">freebsd-proliant</a></td><td>Discussion technique sur l'utilisation de FreeBSD
		sur les serveurs HP ProLiant</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-python" target="_top">freebsd-python</a></td><td>Problèmes concernant l'utilisation de
		Python sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-qa" target="_top">freebsd-qa</a></td><td>Discussion sur la qualité de FreeBSD,
		généralement entre deux versions</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-rc" target="_top">freebsd-rc</a></td><td>Discussion relative au système
		<code class="filename">rc.d</code> et à son
		développement</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-realtime" target="_top">freebsd-realtime</a></td><td>Développement des extensions temps réel
		de FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-scsi" target="_top">freebsd-scsi</a></td><td>Sous-système SCSI</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security" target="_top">freebsd-security</a></td><td>Questions concernant la sécurité</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-small" target="_top">freebsd-small</a></td><td>Utilisation de FreeBSD dans les applications
		embarquées (obsolète, utilisez
		<a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-embedded" target="_top">freebsd-embedded</a> à la place)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-smp" target="_top">freebsd-smp</a></td><td>Discussions sur la conception du
		traitement symétrique multiprocesseurs</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-sparc64" target="_top">freebsd-sparc64</a></td><td>Portage de FreeBSD sur les systèmes <span class="trademark">SPARC</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-standards" target="_top">freebsd-standards</a></td><td>Conformité de FreeBSD aux normes C99 et
		<span class="trademark">POSIX</span>®</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-sun4v" target="_top">freebsd-sun4v</a></td><td>Portage de FreeBSD sur les systèmes
		basés sur <span class="trademark">UltraSPARC</span>® T1</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-threads" target="_top">freebsd-threads</a></td><td>Threading sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-testing" target="_top">freebsd-testing</a></td><td>Tests de stabilité et de performance de
		FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-tokenring" target="_top">freebsd-tokenring</a></td><td>Support du Token Ring sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-x11" target="_top">freebsd-x11</a></td><td>Support et maintenance de X11 sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-usb" target="_top">freebsd-usb</a></td><td>Discussion sur le support USB sous FreeBSD</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-vuxml" target="_top">freebsd-vuxml</a></td><td>Discussion sur l'infrastructure VuXML</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-x11" target="_top">freebsd-x11</a></td><td>Maintenance and support of X11 on FreeBSD</td></tr></tbody></table></div><p><span class="emphasis"><em>Liste à accès restreint:</em></span>
	les listes suivantes sont pour les assistances plus
	spécialisées (et exigeantes) et ne sont probablement
	pas d'intérêt général.  C'est aussi une
	bonne idée d'être d'abord actif sur les listes
	techniques avant de vous inscrire à une de ces listes
	limités de sorte que vous compreniez l'étiquette
	impliquée dans ces communications.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /></colgroup><thead><tr><th>Liste</th><th>Objet</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">freebsd-hubs</a></td><td>Pour ceux qui gèrent des sites miroir (questions
		d'infrastructure)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-user-groups" target="_top">freebsd-user-groups</a></td><td>Coordination des groupes d'utilisateurs</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-vendors" target="_top">freebsd-vendors</a></td><td>Coordination des fournisseurs des
		pré-versions</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-www" target="_top">freebsd-www</a></td><td>Webmestres de <a class="link" href="../../../../index.html" target="_top">www.FreeBSD.org</a></td></tr></tbody></table></div><p><span class="emphasis"><em>Résumé de liste:</em></span> Toutes
	les listes ci-dessus sont également disponibles sous
	forme de résumé.  Une fois inscrit à une
	liste, vous pouvez modifier vos options de résumé
	dans les options de votre compte.</p><p><span class="emphasis"><em>Listes CVS lists:</em></span> Les listes
	suivantes sont destinées aux personnes
	intéressées par la lecture des journaux des
	modifications effectuées sur les différentes
	partie de l'arborescence des sources.  Ce sont des listes
	à <span class="emphasis"><em>lecture seule</em></span> et on ne devrait
	pas y envoyer de messages.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Liste</th><th>Partie de l'arborescence des sources</th><th>Description de la partie (des sources
		concernées)</th></tr></thead><tbody><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/cvs-all" target="_top">cvs-all</a></td><td><code class="filename">/usr/(CVSROOT|doc|ports|projects|src)</code></td><td>Toute modification de l'arborescence
		(agrégation de l'ensemble des listes CVS)</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/cvs-doc" target="_top">cvs-doc</a></td><td><code class="filename">/usr/(doc|www)</code></td><td>Toutes les modifications effectuées sur les
		arborescences doc et www</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/cvs-ports" target="_top">cvs-ports</a></td><td><code class="filename">/usr/ports</code></td><td>Toutes les modifications effectuées sur
		l'arborescence des logiciels portés</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/cvs-projects" target="_top">cvs-projects</a></td><td><code class="filename">/usr/projects</code></td><td>Toutes les modifications effectuées sur
		l'arborescence des projets</td></tr><tr><td><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/cvs-src" target="_top">cvs-src</a></td><td><code class="filename">/usr/src</code></td><td>Toutes les modifications effectuées sur
		l'arborescence des sources</td></tr></tbody></table></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-subscribe"></a>C.1.2. Comment s'inscrire</h3></div></div></div><p>Pour s'inscrire à une liste, cliquez sur le nom
	d'une liste ci-dessus où sur <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo" target="_top">http://lists.FreeBSD.org/mailman/listinfo</a> et cliquez
	ensuite sur la liste qui vous intéresse.  La page de la liste
	devrait contenir toutes les instructions nécessaires à
	l'inscription.</p><p>Pour poster réellement sur une liste, envoyez simplement
	un courrier électronique à l'adresse
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:nom-de-la-liste@FreeBSD.org"><em xmlns="http://www.w3.org/1999/xhtml" class="replaceable"><code>nom-de-la-liste</code></em>@FreeBSD.org</a>&gt;</code>.
	Ce courrier sera alors redistribué à l'ensemble
	des membres de la liste de par le monde.</p><p>Pour vous désabonner d'une liste, cliquez sur l'URL
	se trouvant à la fin de chaque message reçu de
	la liste.  Il est également possible d'envoyer un
	message à
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:nom-de-la-liste-unsubscribe@FreeBSD.org"><em xmlns="http://www.w3.org/1999/xhtml" class="replaceable"><code>nom-de-la-liste</code></em>-unsubscribe@FreeBSD.org</a>&gt;</code> pour vous
	désabonner.</p><p>Encore une fois, nous voudrions vous demander de garder
	aux discussions sur les listes techniques leur caractère
	technique.  Si vous n'êtes intéressés uniquement
	que par les annonces importantes alors nous vous suggérons
	de vous inscrire à la liste <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">liste de diffusion pour les annonces relatives à FreeBSD</a>, dont le trafic
	n'est qu'occasionnel.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-charters"></a>C.1.3. Chartes d'utilisation des listes</h3></div></div></div><p>Il y a pour <span class="emphasis"><em>toutes</em></span> les listes de
	diffusion FreeBSD des règles de base auxquelles tous leurs
	utilisateurs doivent se conformer.  En cas de non respect de
	ces règles, et après deux (2) avertissements
	écrits de la part du &#8220;Postmaster&#8221; de FreeBSD
	<code class="email">&lt;<a xmlns="" class="email" href="mailto:postmaster@FreeBSD.org">postmaster@FreeBSD.org</a>&gt;</code>, au troisième
	manquement, le contrevenant sera désabonné de toutes les
	listes de diffusion de FreeBSD, et ses messages ultérieurs
	filtrés.  Nous regrettons de devoir prendre de telles mesures,
	mais l'Internet d'aujourd'hui est un milieu relativement
	hostile, et beaucoup ne se rendent pas compte de la fragilité
	de certains de ses mécanismes.</p><p>Règles générales:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Le sujet de tout message doit correspondre au sujet
	    traité par la liste à laquelle il est
	    adressé, e.g., si c'est une liste concernant des
	    problèmes techniques alors le contenu de votre message
	    doit être technique.  Le bavardage continu et les
	    polémiques ne font que dégrader la
	    qualité de la liste de diffusion pour tous les
	    utilisateurs et ne seront pas tolérés.  Pour des
	    discussions libres sans sujet particulier, la <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">liste de diffusion pour la discussion de sujets non-techniques en rapport avec FreeBSD</a> est
	    disponible et devrait être utilisée dans ce cas.</p></li><li class="listitem"><p>Aucun message ne doit être adressé à
	    plus de 2 listes de diffusion, et à 2 listes uniquement
	    dans le cas où il y a une nécessité
	    évidente de poster sur les deux listes.
	    Pour la plupart des listes, il y a déjà beaucoup de
	    souscripteurs communs, et mis à part les cas les plus
	    ésotériques (par exemple
	    &#8220;-stable &amp; -scsi&#8221;), il n'y a pas vraiment de
	    raison de poster sur plus d'une liste à la fois.
	    Si vous recevez un message où apparaissent sur la
	    ligne <code class="literal">Cc</code> plusieurs listes de diffusion,
	    vous devez purger cette ligne <code class="literal">Cc</code> avant
	    d'y répondre.  <span class="emphasis"><em>Vous êtes toujours
	    responsable de vos expéditions croisées, peu
	    importe qui en a été à
	    l'origine</em></span>.</p></li><li class="listitem"><p>Les attaques personnelles et les insultes (dans le
	    cadre d'une discussion) ne sont pas autorisés, et cela
	    concerne tout autant les utilisateurs que les développeurs.
	    Les manquements grossiers à la
	    &#8220;nétiquette&#8221;, citer ou
	    reposter des courriers privés quand l'accord n'en a pas
	    été donné et ne le sera pas, par exemple,
	    sont désapprouvés, mais pas
	    particulièrement réprimés.
	    <span class="emphasis"><em>Cependant</em></span> de tels contenus entrent
	    rarement dans le cadre des règles d'utilisation d'une liste,
	    et entraîneront donc probablement un avertissement (ou une
	    exclusion) pour cette seule raison.</p></li><li class="listitem"><p>La publicité pour des produits ou services sans
	    rapport avec FreeBSD est rigoureusement interdite et
	    entraînera l'exclusion immédiate s'il s'avère
	    que le contrevenant adresse ses publicités par
	    &#8220;courrier électronique non sollicité&#8221;
	    - spam.</p></li></ul></div><p><span class="emphasis"><em>Chartes liste par liste:</em></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-acpi" target="_top">freebsd-acpi</a></span></dt><dd><p><span class="emphasis"><em>Développement de l'ACPI et de la
	      gestion de l'énergie</em></span></p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-afs" target="_top">freebsd-afs</a></span></dt><dd><p><span class="emphasis"><em>Système de fichiers Andrew - Andrew File
	      System</em></span></p><p>C'est une liste de discussion sur le portage et
	      l'utilisation d'AFS de CMU/Transarc.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-announce" target="_top">freebsd-announce</a></span></dt><dd><p><span class="emphasis"><em>Evénements importants /
	      étapes importantes pour le projet</em></span></p><p>C'est une liste pour les gens intéressés
	      uniquement par les annonces occasionnelles d'évènements
	      FreeBSD importants.  Cela inclut les annonces
	      d'instantanés et autres versions.  Cela comprend
	      également les annonces de nouvelles
	      fonctionnalités de FreeBSD.  Il peut y avoir
	      aussi des appels à volontaires, etc...  C'est
	      une liste de faible volume et rigoureusement
	      modérée.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-arch" target="_top">freebsd-arch</a></span></dt><dd><p><span class="emphasis"><em>Discussions concernant l'architecture et
	      l'implémentation</em></span></p><p>C'est une liste pour discuter de l'architecture de
	      FreeBSD.  Les messages y seront habituellement de nature
	      technique.  Des exemples de sujets qui cadrent avec
	      cette liste sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Comment revoir le système de compilation pour que
		  plusieurs compilations personnalisées puissent
		  être effectuées en même temps.</p></li><li class="listitem"><p>Que faut-il corriger dans VFS pour que les couches
		  Heidemann fonctionnent.</p></li><li class="listitem"><p>Comment modifier l'interface des pilotes de
		  périphériques pour que la même
		  interface fonctionne proprement sur différents
		  bus et architectures.</p></li><li class="listitem"><p>Comment écrire un pilote réseau.</p></li></ul></div></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-audit" target="_top">freebsd-audit</a></span></dt><dd><p><span class="emphasis"><em>Projet d'audit du code source</em></span></p><p>C'est la liste de discussion pour le projet d'audit
	      du code source de FreeBSD.  Bien que n'étant à
	      l'origine destinée qu'aux modifications relatives à
	      la sécurité, sa charte a été
	      élargie pour l'examen de toute modification de
	      code.</p><p>Cette liste est très chargée de correctif,
	      et n'est probablement pas intéressant pour
	      l'utilisateur moyen de FreeBSD.  Les discussions sur la
	      sécurité non relatives à une
	      modification particulière du code ont lieu sur
	      freebsd-security.  Réciproquement, tous les
	      développeurs sont encouragés à
	      envoyer leur correctifs sur la liste pour examen, tout
	      particulièrement s'ils touchent une partie du système
	      où un bogue peut compromettre l'intégrité du
	      système.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-binup" target="_top">freebsd-binup</a></span></dt><dd><p><span class="emphasis"><em>Projet de mise à jour binaire de
	      FreeBSD</em></span></p><p>Cette liste existe pour discuter du système de mise
	      à jour binaire, ou <span class="application">binup</span>.
	      Problèmes de conception, détails
	      d'implémentation, correctifs, rapports de bogue, rapport
	      d'état, demandes de fonctionnalités, traces des
	      modifications du code, et tout ce qui peut avoir rapport
	      avec <span class="application">binup</span> sont à leur place
	      ici.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bluetooth" target="_top">freebsd-bluetooth</a></span></dt><dd><p><span class="emphasis"><em><span class="trademark">Bluetooth</span>® sous FreeBSD</em></span></p><p>C'est un forum où se rassemble les
	      utilisateurs de la technologie <span class="trademark">Bluetooth</span>® sous FreeBSD.
	      Problèmes de conception, détails de
	      l'implémentation, rapports de bogues, état
	      du support, demande de fonctionnalités, et tous
	      les sujets en rapport avec <span class="trademark">Bluetooth</span>® sont les
	      bienvenues.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugbusters" target="_top">freebsd-bugbusters</a></span></dt><dd><p><span class="emphasis"><em>Coordination de la gestion des rapports de
	      bogue</em></span></p><p>L'objet de cette liste est de servir de forum de
	      coordination et de discussion entre le &#8220;Boguemestre&#8221;,
	      ses chasseurs de bogues et toute autre partie
	      intéressée dans la base de données
	      des PRs.  Cette liste n'est pas destinée aux discussions
	      sur des bogues spécifiques, correctifs ou PRs.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugs" target="_top">freebsd-bugs</a></span></dt><dd><p><span class="emphasis"><em>Rapports de bogue</em></span></p><p>C'est la liste pour rapporter les bogues de
	      FreeBSD.  Chaque fois que c'est possible, les bogues
	      devraient être soumis en utilisant la commande
	      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=send-pr&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">send-pr</span>(1)</span></a> ou son <a class="link" href="../../../../send-pr.html" target="_top">interface WEB</a>.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-chat" target="_top">freebsd-chat</a></span></dt><dd><p><span class="emphasis"><em>Sujets non-techniques en rapport avec la
	      communauté FreeBSD</em></span></p><p>Cette liste reçoit le résidu des discussions sur
	      les autres listes: informations sociologiques, et non
	      techniques.  Cela va de savoir si Jordan ressemble ou non
	      à un furet de bande dessinée, s'il faut tapez en
	      majuscules, qui boit trop de café, quelle est la meilleure
	      bière, qui brasse de la bière dans sa cave, et
	      ainsi de suite.
	      Les annonces occasionnelles d'événements importants
	      (les prochaines fêtes, mariages, naissances, nouveaux
	      emplois, etc...) peuvent être adressées aux listes
	      techniques, mais doivent ensuite être redirigées sur
	      cette liste.</p></dd><dt><span class="term">freebsd-core</span></dt><dd><p><span class="emphasis"><em>Equipe de base de FreeBSD</em></span></p><p>C'est une liste interne à l'usage des membres de
	      l'équipe de base.  Des messages peuvent y être
	      adressés lorsqu'un sujet en rapport avec FreeBSD
	      demande arbitrage ou examen à haut niveau.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-current" target="_top">freebsd-current</a></span></dt><dd><p><span class="emphasis"><em>Discussions concernant l'utilisation de
		FreeBSD-CURRENT</em></span></p><p>C'est la liste de diffusion pour les
	      utilisateurs de FreeBSD-CURRENT.  Elle inclut
	      avertissements au sujet de nouvelles fonctionnalités de
	      -CURRENT qui affecteront les utilisateurs, et les
	      instructions sur ce qu'il faut faire pour rester à jour
	      avec -CURRENT.  Tous les utilisateurs de
	      &#8220;CURRENT&#8221; doivent s'inscrire à
	      cette liste.  C'est une liste de discussion technique sur
	      laquelle le contenu doit être strictement
	      technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-cvsweb" target="_top">freebsd-cvsweb</a></span></dt><dd><p><span class="emphasis"><em>Project CVSweb de FreeBSD</em></span></p><p>Discussions techniques au sujet de l'utilisation,
	      du développement et de la maintenance du
	      FreeBSD-CVSweb.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc" target="_top">freebsd-doc</a></span></dt><dd><p><span class="emphasis"><em>Project de documentation</em></span></p><p>C'est la liste de discussion sur les questions
	      et projets liés à la rédaction de
	      documentation pour
	      FreeBSD.  Les membres de cette liste sont collectivement
	      appelés &#8220;Le Projet de Documentation de
	      FreeBSD&#8221; - The FreeBSD Documentation Project.
	      C'est une liste ouverte; n'hésitez pas à vous
	      inscrire et à participer!</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-drivers" target="_top">freebsd-drivers</a></span></dt><dd><p><span class="emphasis"><em>Ecrire des pilotes de
	      périphériques pour FreeBSD</em></span></p><p>C'est une liste pour les discussions techniques au
	      sujet des pilotes de périphériques sous
	      FreeBSD.  C'est principalement un lieu où les
	      personnes écrivant les pilotes peuvent poser des
	      questions sur l'écriture de pilotes utilisant les
	      APIs du noyau FreeBSD.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-eclipse" target="_top">freebsd-eclipse</a></span></dt><dd><p><span class="emphasis"><em>Pour les utilisateurs FreeBSD de l'EDI
	      Eclipse, les outils, les applications clientes et les
	      logiciels portés.</em></span></p><p>L'objectif de cette liste est de fournir un support
	      pour tout que qui concerne le choix, l'installation,
	      l'utilisation, le développement et la maintenance
	      de l'EDI Eclipse, des ses outils, de ses applications
	      clients sous FreeBSD et l'aide au portage de l'EDI Eclipse
	      et de ses greffons sous l'environnement FreeBSD.</p><p>Le but est également de faciliter les
	      échanges d'information entre les
	      communautés Eclipse et FreeBSD pour un
	      bénéfice mutuel.</p><p>Bien que cette liste soit principalement
	      destinée à répondre aux demandes
	      des utilisateurs d'Eclipse, elle est également un
	      forum pour ceux qui désirent développer
	      des applications spécifiques à FreeBSD en
	      utilisant le système Eclipse.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-embedded" target="_top">freebsd-embedded</a></span></dt><dd><p><span class="emphasis"><em>Utilisation de FreeBSD dans les applications
	      embarquées</em></span></p><p>Cette liste aborde les sujets relatifs à
	      l'utilisation de FreeBSD dans les systèmes
	      embarqués.  C'est une liste de diffusion à
	      caractère technique pour laquelle on attend un
	      contenu strictement technique.  Dans le cadre de cette
	      liste, nous définissons le terme de
	      système embarqué pour les appareils
	      informatisés qui ne sont pas des stations de
	      travail et qui sont destinés à une
	      application bien particulière et limitée
	      par opposition aux systèmes informatiques
	      classiques.  Des exemples de systèmes
	      embarqués, parmi tant d'autres, sont les
	      combinés téléphoniques, les
	      équipements réseau comme les routeurs, les
	      commutateurs et les PABXs, les équipements de
	      mesure à distance, les PDAs, les systèmes
	      de distributeurs, et ainsi de suite.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-emulation" target="_top">freebsd-emulation</a></span></dt><dd><p><span class="emphasis"><em>Emulation d'autres systèmes comme
	      Linux/<span class="trademark">MS-DOS</span>®/<span class="trademark">Windows</span>®</em></span></p><p>C'est une liste pour les discussions techniques
	      relativent à l'exécution sous FreeBSD de
	      programmes écris pour d'autres systèmes
	      d'exploitation.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-eol" target="_top">freebsd-eol</a></span></dt><dd><p><span class="emphasis"><em>Entre-aide sur les logiciels relatifs
	      à FreeBSD et qui ne sont plus supportés par le
	      projet FreeBSD.</em></span></p><p>Cette liste est destinée aux personnes
	      désirant proposer ou recherchant une aide pour
	      les logiciels relatifs à FreeBSD pour lesquels le
	      projet FreeBSD ne fournir officiellement plus de support
	      (par exemple sous la forme d'avis de
	      sécutité et de correctifs).</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-firewire" target="_top">freebsd-firewire</a></span></dt><dd><p><span class="emphasis"><em><span class="trademark">FireWire</span>® (iLink, IEEE 1394)</em></span></p><p>C'est une liste pour les discussions sur la
	      conception et le développement d'un
	      sous-système <span class="trademark">FireWire</span>® (IEEE 1394, iLink) sous
	      FreeBSD.  Les sujets appropriés incluent
	      spécifiquement les normes, les
	      bus périphériques et leur protocole, l'ensemble
	      d'adaptateurs/cartes/circuits, et l'architecture et
	      l'implémentation de leur propre support.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-fs" target="_top">freebsd-fs</a></span></dt><dd><p><span class="emphasis"><em>Systèmes de fichiers</em></span></p><p>Discussions concernant les systèmes de fichiers
	      FreeBSD.  C'est une liste de discussion technique sur
	      laquelle le contenu doit être strictement
	      technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-geom" target="_top">freebsd-geom</a></span></dt><dd><p><span class="emphasis"><em>GEOM</em></span></p><p>Discussions spécifiques à GEOM et aux
	      implémentations relatives.  C'est une liste de
	      diffusion technique sur laquelle le contenu doit
	      être strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-gnome" target="_top">freebsd-gnome</a></span></dt><dd><p><span class="emphasis"><em>GNOME</em></span></p><p>Discussions concernant l'environnement de travail
	      <span class="application">GNOME</span> sous les systèmes
	      FreeBSD.  C'est une liste de discussion technique sur
	      laquelle le contenu doit être strictement
	      technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ipfw" target="_top">freebsd-ipfw</a></span></dt><dd><p><span class="emphasis"><em>Coupe-feu IP</em></span></p><p>C'est le forum pour les discussions techniques
	      concernant la nouvelle implémentation du code du
	      coupe-feu IP sous FreeBSD.  C'est une liste de
	      discussion technique sur laquelle le contenu doit
	      être strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ia64" target="_top">freebsd-ia64</a></span></dt><dd><p><span class="emphasis"><em>Portage de FreeBSD sur IA64</em></span></p><p>C'est une liste de discussion technique pour les
	      personnes travaillant sur le portage de FreeBSD sur la
	      plate-forme IA-64 d'<span class="trademark">Intel</span>®, pour soulever les problèmes ou
	      discuter de solutions alternatives.  Ceux qui sont
	      intéressés à suivre les discussions
	      techniques sont aussi bienvenus.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isdn" target="_top">freebsd-isdn</a></span></dt><dd><p><span class="emphasis"><em>Communications ISDN</em></span></p><p>C'est la liste pour les personnes discutant du
	      développement du support ISDN de FreeBSD.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-java" target="_top">freebsd-java</a></span></dt><dd><p><span class="emphasis"><em>Développement <span class="trademark">Java</span>&#8482;</em></span></p><p>C'est la liste pour les personnes discutant du
	      développement d'applications <span class="trademark">Java</span>&#8482; significatives sous
	      FreeBSD et du portage et de la maintenance des
	      <span class="trademark">JDK</span>&#8482;s.</p></dd><dt><a id="eresources-charters-jobs"></a><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-jobs" target="_top">freebsd-jobs</a></span></dt><dd><p><span class="emphasis"><em>Recherches et offres
	      d'emplois</em></span></p><p>C'est un forum pour poster des offres d'emplois et
	      des curriculum vitae relatifs à FreeBSD, c'est
	      à dire si vous cherchez un emploi concernant FreeBSD
	      ou que vous offrez un emploi impliquant FreeBSD, alors
	      c'est le bon endroit.  Ce n'est <span class="emphasis"><em>pas</em></span>
	      une liste de diffusion pour les problèmes
	      généraux relatifs aux offres et à
	      la recherche d'un emploi puisque des forums
	      adéquats existent déjà par
	      ailleurs.</p><p>Notez que cette liste, comme les autres listes de
	      diffusion du domaine <code class="systemitem">FreeBSD.org</code>, est
	      diffusée au niveau mondial.  Par
	      conséquent, vous devez être précis
	      quant à l'emplacement, les possibilités de
	      travail à distance ou de
	      déplacement.</p><p>Les messages devraient utiliser uniquement des
	      formats ouverts &#8212; de préférence du
	      texte brut, mais le <acronym class="acronym">PDF</acronym>, l'HTML, et
	      quelques autres formats sont acceptables.  Les formats
	      propriétaires comme <span class="trademark">Microsoft</span>® Word
	      (<code class="filename">.doc</code>) seront rejetés par le
	      serveur de la liste de diffusion.</p></dd><dt><span class="term"><a class="link" href="https://mail.kde.org/mailman/listinfo/kde-freebsd" target="_top">freebsd-kde</a></span></dt><dd><p><span class="emphasis"><em>KDE</em></span></p><p>Discussions concernant
	      <span class="application">KDE</span> sous les systèmes
	      FreeBSD.  C'est une liste de discussion technique sur
	      laquelle le contenu doit rester strictement
	      technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hackers" target="_top">freebsd-hackers</a></span></dt><dd><p><span class="emphasis"><em>Discussions techniques</em></span></p><p>C'est le forum pour les discussions techniques
	      au sujet de FreeBSD.  C'est la principale liste technique.
	      Elle est destinée à ceux qui travaillent
	      activement à FreeBSD, pour soulever des
	      problèmes et discuter de solutions alternatives.
	      Ceux qui sont intéressés à suivre
	      les discussions techniques sont aussi bienvenus.  C'est une
	      liste de discussion technique sur laquelle le contenu doit
	      être strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hardware" target="_top">freebsd-hardware</a></span></dt><dd><p><span class="emphasis"><em>Discussions générales sur le
	      matériel pour FreeBSD</em></span></p><p>Discussions générales sur les types de
	      matériel sur lesquels tourne FreeBSD, les
	      problèmes rencontrés et suggestions sur
	      quoi acheter ou éviter.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-hubs" target="_top">freebsd-hubs</a></span></dt><dd><p><span class="emphasis"><em>Sites miroir</em></span></p><p>Annonces et discussions pour les personnes qui font
	      fonctionner les sites miroir FreeBSD.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-isp" target="_top">freebsd-isp</a></span></dt><dd><p><span class="emphasis"><em>Questions concernant les fournisseurs
	      d'accès à Internet</em></span></p><p>C'est la liste pour discuter des sujets qui
	      intéressent les fournisseurs d'accès Internet
	      - Internet Service Providers (ISPs) - qui utilisent FreeBSD.
	      C'est une liste de discussion technique sur laquelle le contenu
	      doit être strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-openoffice" target="_top">freebsd-openoffice</a></span></dt><dd><p><span class="emphasis"><em>OpenOffice.org</em></span></p><p>Discussions concernant le portage et la maintenance
	      d'<span class="application">OpenOffice.org</span> et
	      <span class="application"><span class="trademark">StarOffice</span>&#8482;</span>.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-performance" target="_top">freebsd-performance</a></span></dt><dd><p><span class="emphasis"><em>Discussions au sujet de l'optimisation et
	      l'accélération de la vitesse
	      d'exécution de FreeBSD</em></span></p><p>Cette liste de diffusion existe pour offrir un
	      endroit aux hackers, administrateurs, et/ou les parties
	      concernées pour discuter de sujets ayant trait
	      aux performances de FreeBSD.  Les sujets acceptables
	      comprennent les discussions concernant les installations
	      de FreeBSD qui sont soit sous charge importante, soit
	      présentant des problèmes de performance,
	      ou encore qui repoussent les limites de FreeBSD.  Les
	      personnes désirant travailler sur
	      l'amélioration des performances de FreeBSD sont
	      grandement encouragées à s'inscrire
	      à cette liste.  C'est une liste hautement
	      technique destinée aux utilisateurs
	      expérimentés de FreeBSD, aux hackers, ou aux
	      administrateurs intéressés par un FreeBSD
	      rapide, robuste, et adaptable.  Ce n'est pas une liste
	      de questions-réponses qui remplace la lecture de
	      la documentation, mais c'est un endroit où il est
	      possible d'effectuer des contributions ou de se
	      préoccuper de sujets non-résolus relatifs
	      aux performances.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-pf" target="_top">freebsd-pf</a></span></dt><dd><p><span class="emphasis"><em>Discussions et questions concernant le
	      système de coupe-feu packet
	      filter</em></span></p><p>Discussions concernant le système de
	      coupe-feu packet filter (pf) sous FreeBSD.  Les discussions
	      techniques ainsi que les questions des utilisateurs sont
	      les bienvenues.  Cette liste est également un
	      endroit où discuter du système de
	      qualité de service ALTQ.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-platforms" target="_top">freebsd-platforms</a></span></dt><dd><p><span class="emphasis"><em>Portage sur les plate-formes
	      non <span class="trademark">Intel</span>®</em></span></p><p>Questions concernant le support d'autres
	      plates-formes, discussions générales et
	      propositions pour les portages sur des plates-formes
	      non <span class="trademark">Intel</span>®.  C'est une liste de discussion technique sur
	      laquelle le contenu doit être strictement
	      technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-policy" target="_top">freebsd-policy</a></span></dt><dd><p><span class="emphasis"><em>Décisions de la politique de
	      l'équipe de base</em></span></p><p>C'est une liste de discussion à faible trafic,
	      et en lecture seule pour les décisions de la
	      politique de l'équipe de base.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-ports" target="_top">freebsd-ports</a></span></dt><dd><p><span class="emphasis"><em>Discussion sur les
	      &#8220;logiciels portés&#8221;</em></span></p><p>Discussions concernant le ``catalogue des
	      logiciels portés'' de FreeBSD
	      (<code class="filename">/usr/ports</code>), propositions
	      de portages, modifications de l'infrastructure du
	      catalogue des logiciels portés et coordination
	      générale.  C'est une liste de discussion
	      technique sur laquelle le contenu doit être
	      strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-proliant" target="_top">freebsd-proliant</a></span></dt><dd><p><span class="emphasis"><em>Discussion technique sur l'utilisation de
	      FreeBSD sur les serveurs HP ProLiant</em></span></p><p>Cette liste de diffusion doit être
	      utilisée pour les discussions techniques
	      concernant l'utilisation de FreeBSD sur les serveurs HP
	      ProLiant, y compris les discussions sur les pilotes
	      spécifiques à ces machines, les logiciels
	      de gestion, les outils de configuration, et les mises
	      à jour du BIOS.  C'est également le
	      premier endroit où discuter des modules hpasmd,
	      hpasmcli, et hpacucli.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-python" target="_top">freebsd-python</a></span></dt><dd><p><span class="emphasis"><em>Python sous FreeBSD</em></span></p><p>C'est une liste pour les discussions relatives
	      à l'amélioration du support de Python sous
	      FreeBSD.  C'est une liste de discussion technique.  Elle
	      est destinée aux personnes travaillant sur le
	      portage de Python, de ses modules tiers partie et
	      éléments relatifs à
	      <span class="application">Zope</span> sous FreeBSD.  Les
	      personnes intéressées par ces discussions
	      techniques sont également les bienvenues.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-questions" target="_top">freebsd-questions</a></span></dt><dd><p><span class="emphasis"><em>Questions des utilisateurs</em></span></p><p>C'est la liste pour les questions à propos de
	      FreeBSD.  Vous ne devriez pas adresser de questions
	      du type &#8220;comment faire&#8221; aux listes
	      techniques à moins que vous n'estimiez que la question
	      soit vraiment très technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-scsi" target="_top">freebsd-scsi</a></span></dt><dd><p><span class="emphasis"><em>Sous-système SCSI</em></span></p><p>C'est la liste de diffusion pour ceux qui
	      travaillent sur le sous-système SCSI de FreeBSD.
	      C'est une liste de discussion technique sur laquelle le
	      contenu doit être strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security" target="_top">freebsd-security</a></span></dt><dd><p><span class="emphasis"><em>Questions relatives à la
	      sécurité</em></span></p><p>Questions ayant trait à la
	      sécurité des ordinateurs sous FreeBSD
	      (DES, Kerberos, trous de sécurité connus et
	      correctifs, etc...).  C'est une liste de discussion
	      technique sur laquelle le contenu doit être strictement
	      technique.  Notez que ce n'est pas une liste de
	      question-réponse, mais ce type de contribution (la
	      question ET la réponse) à la FAQ est le
	      bienvenue.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-security-notifications" target="_top">freebsd-security-notifications</a></span></dt><dd><p><span class="emphasis"><em>Avis de sécurité</em></span></p><p>Notifications des problèmes de
	      sécurité concernant FreeBSD et correctifs.
	      Ce n'est pas une liste de discussion.  La liste de
	      discussion correspondante est FreeBSD-security.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-small" target="_top">freebsd-small</a></span></dt><dd><p><span class="emphasis"><em>Utilisation de FreeBSD dans les
	      applications embarquées</em></span></p><p>Cette liste discute de sujets relatifs aux
	      installations inhabituellement petites et embarquées
	      de FreeBSD.  C'est une liste de discussion technique
	      sur laquelle un contenu strictement technique est
	      attendu.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Cette liste est obsolète depuis la
		création de <a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-embedded" target="_top">freebsd-embedded</a>.</p></div></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-stable" target="_top">freebsd-stable</a></span></dt><dd><p><span class="emphasis"><em>Discussions concernant l'utilisation de
		FreeBSD-STABLE</em></span></p><p>C'est la liste de diffusion pour les utilisateurs
	      de FreeBSD-STABLE.  Elle inclut avertissements
	      au sujet de nouvelles fonctionnalités de -STABLE qui
	      affecteront les utilisateurs, et des instructions sur
	      ce qu'il faut faire pour rester à jour avec -STABLE.
	      Tous les utilisateurs de la branche &#8220;STABLE&#8221;
	      devraient s'inscrire à cette liste.  C'est une
	      liste de discussion technique sur laquelle le contenu
	      doit être strictement technique.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-standards" target="_top">freebsd-standards</a></span></dt><dd><p><span class="emphasis"><em>Conformité aux normes C99
	      &amp; POSIX</em></span></p><p>C'est un forum pour les discussions techniques
	      concernant la conformité de FreeBSD aux normes C99 et
	      POSIX.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-usb" target="_top">freebsd-usb</a></span></dt><dd><p><span class="emphasis"><em>Discussion sur le support USB sous
	      FreeBSD</em></span></p><p>C'est une liste de diffusion pour les discussions
	      techniques relatives au support de l'USB sous
	      FreeBSD</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-user-groups" target="_top">freebsd-user-groups</a></span></dt><dd><p><span class="emphasis"><em>Coordination des groupes
	      d'utilisateurs</em></span></p><p>C'est la liste pour les coordinateurs des
	      différents groupes locaux d'utilisateurs,
	      destinée à leurs discussions entre eux et avec
	      un membre désigné de l'équipe de base.
	      Cette liste doit se limiter aux comptes-rendus de
	      réunions et à la coordination de projets
	      entre plusieurs groupes d'utilisateurs.</p></dd><dt><span class="term"><a class="link" href="http://lists.FreeBSD.org/mailman/listinfo/freebsd-vendors" target="_top">freebsd-vendors</a></span></dt><dd><p><span class="emphasis"><em>Fournisseurs</em></span></p><p>Coordination des discussions entre le projet FreeBSD
	      et les fournisseurs de logiciel ou de matériel pour
	      FreeBSD.</p></dd></dl></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="eresources-mailfiltering"></a>C.1.4. Filtrages en vigueur sur les listes de diffusion</h3></div></div></div><p>Les listes de diffusion FreeBSD sont filtrées de
	plusieurs façons en vue d'éviter la distribution
	de SPAM, de virus, et tout autre message non-sollicité.
	Les opérations de filtrage décries dans cette
	section ne comprennent pas toutes celles utilisées pour
	protéger les listes re diffusion.</p><p>Seuls certains types de pièces jointes sont
	autorisés sur les listes de diffusion.  Toutes les
	pièces jointes avec un format MIME qui ne figurent pas
	parmi la liste ci-dessous seront retirées avant que le
	message ne soit distribué sur les listes de
	diffusion.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>application/octet-stream</p></li><li class="listitem"><p>application/pdf</p></li><li class="listitem"><p>application/pgp-signature</p></li><li class="listitem"><p>application/x-pkcs7-signature</p></li><li class="listitem"><p>message/rfc822</p></li><li class="listitem"><p>multipart/alternative</p></li><li class="listitem"><p>multipart/related</p></li><li class="listitem"><p>multipart/signed</p></li><li class="listitem"><p>text/html</p></li><li class="listitem"><p>text/plain</p></li><li class="listitem"><p>text/x-diff</p></li><li class="listitem"><p>text/x-patch</p></li></ul></div><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Certaines listes de diffusion pourront autoriser
	  des pièces jointes sous d'autres formats MIME, mais
	  la liste précédente devrait être
	  applicable pour la plupart des listes de diffusion.</p></div><p>Si un message contient une version HTML et une version
	texte du contenu du message, la version HTML sera
	retirée.  Si le corps d'un message est uniquement sous
	forme HTML, il sera converti sous forme texte brut.</p></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-news"></a>C.2. Forums de discussion</h2></div></div></div><p>En plus de deux forums de discussion spécifiques à
      FreeBSD, il y en a de nombreux autres où il est question de
      FreeBSD ou qui sont par ailleurs d'intérêt
      pour les utilisateurs de FreeBSD.  <a class="link" href="http://minnie.tuhs.org/BSD-info/bsdnews_search.html" target="_top">Des
      archives interrogeables par mots-clés</a> sont
      disponibles pour certains de ces forums, grâce à
      Warren Toomey <code class="email">&lt;<a xmlns="" class="email" href="mailto:wkt@cs.adfa.edu.au">wkt@cs.adfa.edu.au</a>&gt;</code>.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87908048"></a>C.2.1. Forums spécifiques à BSD</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.unix.bsd.freebsd.announce" target="_top">comp.unix.bsd.freebsd.announce</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.bsd.freebsd.misc" target="_top">comp.unix.bsd.freebsd.misc</a></p></li><li class="listitem"><p><a class="link" href="news:de.comp.os.unix.bsd" target="_top">de.comp.os.unix.bsd</a>
	    (Allemand)</p></li><li class="listitem"><p><a class="link" href="news:fr.comp.os.bsd" target="_top">fr.comp.os.bsd</a>
	    (Français)</p></li><li class="listitem"><p><a class="link" href="news:it.comp.os.freebsd" target="_top">it.comp.os.freebsd</a>
	      (Italien)</p></li><li class="listitem"><p><a class="link" href="news:tw.bbs.comp.386bsd" target="_top">tw.bbs.comp.386bsd</a> (Chinois)</p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87948752"></a>C.2.2. Autres forums <span class="trademark">UNIX</span>® intéressants</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.unix" target="_top">comp.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.questions" target="_top">comp.unix.questions</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.admin" target="_top">comp.unix.admin</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.programmer" target="_top">comp.unix.programmer</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.shell" target="_top">comp.unix.shell</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.user-friendly" target="_top">comp.unix.user-friendly</a></p></li><li class="listitem"><p><a class="link" href="news:comp.security.unix" target="_top">comp.security.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.sources.unix" target="_top">comp.sources.unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.advocacy" target="_top">comp.unix.advocacy</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.misc" target="_top">comp.unix.misc</a></p></li><li class="listitem"><p><a class="link" href="news:comp.bugs.4bsd" target="_top">comp.bugs.4bsd</a></p></li><li class="listitem"><p><a class="link" href="news:comp.bugs.4bsd.ucb-fixes" target="_top">comp.bugs.4bsd.ucb-fixes</a></p></li><li class="listitem"><p><a class="link" href="news:comp.unix.bsd" target="_top">comp.unix.bsd</a></p></li></ul></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp87972176"></a>C.2.3. Système X Window</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="news:comp.windows.x.i386unix" target="_top">comp.windows.x.i386unix</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x" target="_top">comp.windows.x</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.apps" target="_top">comp.windows.x.apps</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.announce" target="_top">comp.windows.x.announce</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.intrinsics" target="_top">comp.windows.x.intrinsics</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.motif" target="_top">comp.windows.x.motif</a></p></li><li class="listitem"><p><a class="link" href="news:comp.windows.x.pex" target="_top">comp.windows.x.pex</a></p></li><li class="listitem"><p><a class="link" href="news:comp.emulators.ms-windows.wine" target="_top">comp.emulators.ms-windows.wine</a></p></li></ul></div></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-web"></a>C.3. Serveurs World Wide Web</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a id="central-www"></a><p>Serveurs primaires</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.FreeBSD.org/" target="_top">http://www.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-za-www"></a><p>Afrique du Sud</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.za.FreeBSD.org/" target="_top">http://www.za.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-de-www"></a><p>Allemagne</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.de.FreeBSD.org/" target="_top">http://www.de.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-am-www"></a><p>Armenia</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www1.am.FreeBSD.org/" target="_top">http://www1.am.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-au-www"></a><p>Australie</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.au.FreeBSD.org/" target="_top">http://www.au.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.au.FreeBSD.org/" target="_top">http://www2.au.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-at-www"></a><p>Autriche</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.at.FreeBSD.org/" target="_top">http://www.at.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-ca-www"></a><p>Canada</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.ca.FreeBSD.org/" target="_top">http://www.ca.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.ca.FreeBSD.org/" target="_top">http://www2.ca.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-dk-www"></a><p>Danemark</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.dk.FreeBSD.org/" target="_top">http://www.dk.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-es-www"></a><p>Espagne</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.es.FreeBSD.org/" target="_top">http://www.es.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.es.FreeBSD.org/" target="_top">http://www2.es.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-fi-www"></a><p>Finlande</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.fi.FreeBSD.org/" target="_top">http://www.fi.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-fr-www"></a><p>France</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www1.fr.FreeBSD.org/" target="_top">http://www1.fr.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-hk-www"></a><p>Hong-Kong</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.hk.FreeBSD.org/" target="_top">http://www.hk.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ie-www"></a><p>Irlande</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.ie.FreeBSD.org/" target="_top">http://www.ie.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-jp-www"></a><p>Japon</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.jp.FreeBSD.org/www.FreeBSD.org/" target="_top">http://www.jp.FreeBSD.org/www.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-lv-www"></a><p>Lettonie</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.lv.FreeBSD.org/" target="_top">http://www.lv.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-lt-www"></a><p>Lituanie</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.lt.FreeBSD.org/" target="_top">http://www.lt.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-no-www"></a><p>Norvège</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.no.FreeBSD.org/" target="_top">http://www.no.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-nl-www"></a><p>Pays-Bas</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.nl.FreeBSD.org/" target="_top">http://www.nl.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-cz-www"></a><p>République Tchèque</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.cz.FreeBSD.org/" target="_top">http://www.cz.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-uk-www"></a><p>Royaume-Uni</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www1.uk.FreeBSD.org/" target="_top">http://www1.uk.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www3.uk.FreeBSD.org/" target="_top">http://www3.uk.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ru-www"></a><p>Russie</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.ru.FreeBSD.org/" target="_top">http://www.ru.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-si-www"></a><p>Slovénie</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.si.FreeBSD.org/" target="_top">http://www.si.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-se-www"></a><p>Suède</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.se.FreeBSD.org/" target="_top">http://www.se.FreeBSD.org/</a>
        </p></li></ul></div></li><li class="listitem"><a id="mirrors-ch-www"></a><p>Suisse</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www.ch.FreeBSD.org/" target="_top">http://www.ch.FreeBSD.org/</a> (IPv6)</p></li><li class="listitem"><p><a class="link" href="http://www2.ch.FreeBSD.org/" target="_top">http://www2.ch.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-tw-www"></a><p>Taïwan</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          <a class="link" href="http://www.tw.FreeBSD.org/" target="_top">http://www.tw.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www2.tw.FreeBSD.org/" target="_top">http://www2.tw.FreeBSD.org/</a>
        </p></li><li class="listitem"><p>
          <a class="link" href="http://www4.tw.FreeBSD.org/" target="_top">http://www4.tw.FreeBSD.org/</a>
        </p></li><li class="listitem"><p><a class="link" href="http://www5.tw.FreeBSD.org/" target="_top">http://www5.tw.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li><li class="listitem"><a id="mirrors-us-www"></a><p>USA</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a class="link" href="http://www5.us.FreeBSD.org/" target="_top">http://www5.us.FreeBSD.org/</a> (IPv6)</p></li></ul></div></li></ul></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-email"></a>C.4. Adresses électroniques</h2></div></div></div><p>Les groupes d'utilisateurs suivants fournissent à leurs
      membres des adresses électroniques liées à
      FreeBSD.  Les administrateurs cités se réservent le
      droit de supprimer l'adresse si elle est à l'origine
      d'abus.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Domaine</th><th>Possibilités offertes</th><th>Groupe d'utilisateurs</th><th>Administrateur</th></tr></thead><tbody><tr><td>ukug.uk.FreeBSD.org</td><td>Transmission de courrier uniquement</td><td><code class="email">&lt;<a xmlns="" class="email" href="mailto:freebsd-users@uk.FreeBSD.org">freebsd-users@uk.FreeBSD.org</a>&gt;</code></td><td>Lee Johnston
	      <code class="email">&lt;<a xmlns="" class="email" href="mailto:lee@uk.FreeBSD.org">lee@uk.FreeBSD.org</a>&gt;</code></td></tr></tbody></table></div></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="eresources-shell"></a>C.5. Comptes</h2></div></div></div><p>Les groupes d'utilisateurs suivants fournissent des comptes
      aux personnes supportant le projet FreeBSD.  Les administrateurs
      cités se réservent le droit de supprimer le compte s'il
      est à l'origine d'abus.</p><div class="informaltable"><table width="100%" border="0"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>Hôte</th><th>Accès</th><th>Possibilités offertes</th><th>Administrateur</th></tr></thead><tbody><tr><td>dogma.freebsd-uk.eu.org</td><td>Telnet/FTP/SSH</td><td>Adresse électronique, espace Web, FTP anonyme</td><td>Lee Johnston
	      <code class="email">&lt;<a xmlns="" class="email" href="mailto:lee@uk.FreeBSD.org">lee@uk.FreeBSD.org</a>&gt;</code></td></tr></tbody></table></div></div></div><div class="appendix"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkeys"></a>Annexe D. Clés Open<acronym class="acronym">PGP</acronym></h2></div></div></div><div class="toc"><div class="toc-title">Table des matières</div><dl class="toc"><dt><span class="sect1"><a href="#pgpkeys-officers">D.1. Officiers</a></span></dt></dl></div><p><span class="emphasis"><em>Version française de Marc Fonvieille
  <code class="email">&lt;<a xmlns="" class="email" href="mailto:blackend@FreeBSD.org">blackend@FreeBSD.org</a>&gt;</code>.</em></span></p><a id="idp88116688" class="indexterm"></a><p>Les clés Open<acronym class="acronym">PGP</acronym> des officiers
    <code class="systemitem">FreeBSD.org</code> sont
    données ici.  Ces clés peuvent être utilisées pour vérifier une
    signature ou pour envoyer un courrier électronique chiffré à un
    des officiers.  Une liste complète des clés
    Open<acronym class="acronym">PGP</acronym> FreeBSD est disponible dans l'article
    <a class="link" href="../../../../doc/en_US.ISO8859-1/articles/pgpkeys" target="_top">Clés
    <acronym class="acronym">PGP</acronym></a>.  Le trouseau complet peut être
    télécharger depuis <a class="link" href="https://www.FreeBSD.org/doc/pgpkeyring.txt" target="_top">https://www.FreeBSD.org/doc/pgpkeyring.txt</a>.</p><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="pgpkeys-officers"></a>D.1. Officiers</h2></div></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-security-officer"></a>D.1.1. L'officier de sécurité <code class="email">&lt;<a xmlns="" class="email" href="mailto:security-officer@FreeBSD.org">security-officer@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   1024D/15D68804CA6CDFB2 2002-08-27 [expires: 2014-01-01]
      Key fingerprint = C374 0FC5 69A6 FBB1 4AED  B131 15D6 8804 CA6C DFB2
uid                          FreeBSD Security Officer &lt;security-officer@FreeBSD.org&gt;
sub   2048g/E8C96EEFA3071809 2002-08-27 [expires: 2014-01-01]

pub   4096R/ED67ECD65DCF6AE7 2013-09-24 [expires: 2018-01-01]
      Key fingerprint = 1CF7 FF6F ADF5 CA9F BE1B  8CB2 ED67 ECD6 5DCF 6AE7
uid                          FreeBSD Security Officer &lt;security-officer@FreeBSD.org&gt;
sub   4096R/B64357A343D9CBAE 2013-09-24 [expires: 2018-01-01]

</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQGiBD1rpGQRBACJ1CQS7VnTTvH3wjscXQed2RoeVi+n3HtxaF9ApJbxb77dXk+/
DL1ZR0bcZ8s7uQ1D5BkrqSHevoA9FlEN02MM9qyIerXter2/ZEporVOG+/XMkIiV
rd3AgVwUnawhOMKTlYmttcOpADKr9RkYvCT6QMqFDXJssbW7gPlEqOzhYwCgoIdD
ygZ5RdfXm/hBnp+oTWadeIED/2WvL/Iy0YheRTSmTvEdK+Cd4xPhmY2SrrvF2+lE
oFIn94C0fJhqKhJp+wGXmQ/h3yF0gcr1NfFBm6y1iztEz2n0ciaEmMf1tu0Y+u+Y
E0/1Igpoj9Kj5xxRJD5wYyDi0qzxP8BhvJ6sKJtO+f6/OIgZ0ITYWakim7d3RrNV
0ditA/0XUvDgdEB0hm7iqR8FbwKNmS8DVKGs+CYrFwSBJ0vUH65WFapbdWbi2uwm
8CDKgSWpS16/PVr/ql84ePWdiVhHYmkkjuWPUFHSUcDiYL8YG9rnymw6Enx3Nyyr
ewiUOJFzWN6/u3O4x2M9ljrQQ1FmmAbw9R4KT/KHOyBC0W+xHbQ3RnJlZUJTRCBT
ZWN1cml0eSBPZmZpY2VyIDxzZWN1cml0eS1vZmZpY2VyQEZyZWVCU0Qub3JnPoha
BBMRAgAaBQI9a6RkBQsHAwIBAxUCAwMWAgECHgECF4AACgkQFdaIBMps37J/wQCf
epaHjByMpiZ4IJ7I5va1CwHjTkwAoIWSaoQOtqTuUupwzv4bNpPSBWbBiGAEExEK
ACAFCwcDAgEDFQIDAxYCAQIeAQIXgAUCUkUymwUJFVe2HAAKCRAV1ogEymzfspbW
AKCDvRJCLhfcdt+Rs8j6rxNZeaiPugCdGf70yZDhLmHuZJcirtNKShReca2IRgQT
EQIABgUCPWurSgAKCRCMMoz/FgbbldR2AJ9TkXexibjUd/bysiVJnNAxq3S2FwCg
j2AK9NlD1soRBvC0VVYiTbB5TxWInAQTAQEABgUCPWurawAKCRBVLh4uc9KIpYgV
A/9RhH/BsCRrvLRyTQgtXVFF0bZdKeZxvgxJZ/8tnAx+ZpDncwL6kdtFZsxmplWX
CshFKjCf2pG+YVPSnjtF0nlOgpLwbwcj29Un+2M1TZth9216WvBk++M4noyfj6vO
Rsvc7NQ5kuokLQsq8+gEyZM3OxbtDaDIQx8i6MFueG/PdokBHAQTAQEABgUCPWuv
bQAKCRBnwoCPM8Fie7k1B/95K8U9+QunBDYcYbn/afd195xb5TYUEeHV5Qs2RES1
f78CLE+95jnAno2XfPW9ip6Vk3bHD/66MT3ZuMQhk9BYzzLbEZnbKck9wiwhOhva
Y5C/5R4+AK6fcTfE9EKj45vSOG5PjkxKhIVh5PDXGAwtsIY3sujBMAbeDPK3IkAs
Ya5rC/5X11SCnofkZW/u6RM3Q44MWD0b149sueSvb9NKNk/0oi2HgBgsA6Ziodyy
y5b9QIdvNC+gOajstneVLCWahONnr9npAJse9fS90/SYMbH8/BcRpVHT6TG1Jwoe
6fWegEEDjwDAw021msQc9FUfW/FpJMZiou2cFXXP5vpSiEYEEhECAAYFAj1r6bYA
CgkQbGPaBITQ1+flVQCgxKicYCuXL7hT3Iz/i5YK8vyZy/YAnRpwkzbKaEMnVzMn
smeFMTxejsexiEYEExECAAYFAj1sgqQACgkQhDa3C3+GgmhvrgCfUEAGrporit4V
G/xddNf33zi5jFIAniCdksJJ0DhTekfIGxBOvwq0Nh1viEYEExECAAYFAj1tVWgA
CgkQObaG4P6BelCYDQCgnyVaUr7s/PJhJYpwi256vJ/Ha4EAn1KbR6Wc8JZzv6Bh
+iXkwP5fvgVgiQCVAwUQPdMiy01WKCF5BQwRAQFr5gP/XnIcMS41EP7ooB5Q0th7
QSBtLFCauRCoib7uKmOM5RfftQlSVqvnLOkrIFe/9a9iS9TGSUrphJF3dztcvtp3
0VzsgjZ59NRI7Nlg//FR4re0UFKf3gvHlyYaMd/hYc8M4NDPacAqoSjbMwyXAIKH
UrPYZj+ELOqaW2mWsRGNQUCInAQTAQIABgUCPd1MsAAKCRDhyUtG3x3UcTr0A/48
M61zbAKzmJ0kHZ+Q6ssXtBb1Cd8YSCUGqlr7i+LvyJgdB+ebyUzzXE8KOektIjxj
y0TtVTgsZE8YLW/EdoLKoa6Zw+BQKLuUxH/xEaz7la3kOwrXXOVnmA3zWrKzXFFT
aqaFf8dddCb5iJ/f0aafBNdocaUphSyoJZwyVo4Z2YhGBBMRAgAGBQJAkt8pAAoJ
EOuA3h2LcdOkAuMAoKCz8SumnyZCf1T1C3rMdbmbYNkBAJ9YCNF2x/dPRsxSeKbu
SmBaHlPYH4hFBBMRAgAGBQI/bZczAAoJEN68VxqalnmwSaMAn1l/3BJQzSdWwKd5
1a9x+kxActRyAJi6s5sCKTv9opL9Wj9rWrb9ZPj3iEYEExECAAYFAj9i2VEACgkQ
TyzT2CeTzy0btgCg3BceMu8hKtRCW16fAd0vtHoSp1sAnRLvJuDmypHO3mgvg3TE
Y7gYNsEziEYEExECAAYFAj9iF9kACgkQyIakK9Wy8PuqIACgmj3gpbfiPpkx/tG4
Yf7mxzq4juEAn3cLYlJwL+dcZ074wY2pXfd7cHNliEYEExECAAYFAj4cXQYACgkQ
2MO5UukaublYAQCggRDpTQCl7fpUnunAxxJzK0fOuW0AoIjRbboNnilOL2o4fmt1
TaCRxp0jiEYEExECAAYFAj4cWrwACgkQbZTbIaRBRXHJjACePSDDtm3jIlezrxKu
F+RRo4w+3OkAn1BqRElRGWu8HrG9xhO9dE0jIG0LiEYEEhECAAYFAkBR5+EACgkQ
OO1t8kNcHJqBnQCeIHpxX8Zg3ZYa6ivBJe5AKZiWd8MAn2np9GJi9BMTTLTX2sL8
ekC2lzjaiEYEEhECAAYFAkA+wrsACgkQqh18sBJn8JIccQCfTTO0ZIdIp5CAqlha
drSuNhU48ygAoMmB5mXUlcaV8ee/VlLqSupEqJ51iEYEEhECAAYFAj9h5/cACgkQ
2MoxcVugUsM2vQCgrsl5oItD6odM0TkfSYx273P7WCEAoJDyxJ7b3Xy67sOf1xPh
FXbwmKOaiEYEEhECAAYFAj8+BuMACgkQ2z/V939+MWMItwCfTZsRZJujvGiFYCT3
8JXYY10DOE4AoIPcHvW1WvgMLothdYGLuSADkWrSiEYEEhECAAYFAj67eiwACgkQ
72rIAB3Lz7eyEwCgv5WXThEaxz4fnvKpe8M9xC1qJhsAmgJxO/as8NajfegYmW4u
Gwxt772biEYEERECAAYFAkBHsmYACgkQMEuQSofRzg/UawCglF93sAXFzUFgrPAh
AJldt6l5fkUAmgKVuaJVV5em8kpR/5iz77WV2TsKiEUEEBECAAYFAkAiqvAACgkQ
1hDu5GjD2mW+VgCgxPsh6evF8lP5m9qOA8Dw03SOVOUAl0UuwwXoTlIi550tPdZ4
apxDpFyIRgQQEQIABgUCP+P6fgAKCRCT72NexbJb07I5AJ9g5j8LUeynnc8Qdaa3
2/ELvsgMxgCgmAilm0OaV+GI6VrWMwra+oy4CU6IRgQQEQIABgUCP33yEgAKCRDn
Qgt4utuOEaxTAKCMA67/PUI62JfKwUuow/6NL26W2gCgnMthTlLATPwz2tNeL+Ek
g3o+hF6IRgQQEQIABgUCP3HtvQAKCRBNrPLCwxI7HxuyAJ9/a0KffzpWw2g1lAT4
P7c9eD709wCgkcR0gypA4PPqNlmWlwAWycLb08+IRgQQEQIABgUCPuGahQAKCRDF
CSV+DzAaLn9JAKCWJ4Boe6dag2ukC6jFugnYcloLDACfd5nTjGj2mjJiv16rP6es
KAkz4luIRgQQEQIABgUCPmKk6wAKCRBuxMs5TCWbRzvoAJ4rBT4UpsnuSXHm+W7H
Z1D2wf1wrwCgy0ZnBUT3fFOd1VCDSJLUpSrbE8WIRgQQEQIABgUCPmKdCgAKCRDh
qZsPqaYP4ycuAJwL7n7cri4NzC9yvqW9Gl9nZptpUACfdIRzYqBamZbyO4rOa6Jl
uhH8JAaIRgQQEQIABgUCPlxY8wAKCRDnZkDIb0WuacbQAJ97zdAe3/5VX+d6A8vK
/keJbkKcJACfS7e2yRBp6i/VC5G7bqZvYZqxKYGIRgQQEQIABgUCPkf7+wAKCRB+
kn2FdkGYY2SPAJ0WZWC2fNfdq6cLZPkiWGVnLY/PuwCg+t143ijjKQj61IGoU3ch
hRkYl7yIRgQQEQIABgUCQDeVLQAKCRAqbV2p6xmZrAJJAJ0U+DCVqGxkdSAcfbgm
hkSxW9yuZACcDN88/I6tTSm3/l/occuN7mQGOiOIRgQTEQIABgUCQH+KJAAKCRA1
nhUBgs2eQzJKAJ9hLUeoJ1KhzvmSftxFIAdjoyaB+QCfQZ6UDZDksdUYES0HyZaM
LoEnNsSIRgQTEQIABgUCQSeEqwAKCRA/oN4IoNORaOFPAKCE7SBgOuugO9OOq7LX
nziKHN/PlACfS6tHZbyt4A5HQfwh8G6ay43/7N2IRgQTEQIABgUCQLYRzAAKCRD3
RQ1yObRVQXmtAJ9NP/a9aYNJ6oLx0rlmxIuK6q0ezgCdHg++QjH5OSeEpTYTBxUT
kJWkfDqIRgQTEQIABgUCQLIoXAAKCRB5A4OpdGbmU+7CAKCi8EmsmWPUHVYzCksh
JL6rjcC4IwCeNdpDKcYiOqjrBGmBXYLHN62FgYWIRgQTEQIABgUCQKrpNwAKCRAV
G6mUEXXC4zQ6AJwJjeizo5nnCZ0Qzeo4keC1XPkUpQCffz/qkjK07PRGEfP3FE8m
OuUYIyWIRgQTEQIABgUCQKqnpAAKCRAHYXOxkoTEUrHuAJ93vaIg6+mJX3HDSb2f
vuJQiR2AHgCdHd+yVP5sqYXGeZ+ragpL9sP6K7+IRgQTEQIABgUCQKqCfwAKCRAP
WuglNDguUY1NAJ4wcyUIfCQMXvQ7wqToAH2sJULFJACgqlUFO1GoXQKTvG4JGnfn
0A8D/WuIRgQTEQIABgUCQKjgbwAKCRBxzq+s7KKK22EwAJ42eTYNPJ2bEHL5bgnl
+sgxDCx6GQCfXIFX+AgG9d5TMVf7qj/JKDQXU9KIRgQTEQIABgUCQKjfpgAKCRCg
7/ngeafIcHhRAJ9Vt5ZVFnqstoF7PS+Sl9mybiDdgACggm566eWLJjlax7v4YgDV
P80r8l6IRgQTEQIABgUCQKhLnwAKCRD9/49Y5NtE8tVrAJ0UoRfpoYzGFafo5xOn
tCl6ijp4EQCg0tAVYXnuE4egIEPRB5vtTui5ZL6IRgQTEQIABgUCQKhLnAAKCRDS
D9QFytUJxv8/AJ9fThcbzZTiJv68+i9CrWeZdIUY9gCfbBZoHsaX3GoWQvVLXozg
UxQD1OiIRgQTEQIABgUCQKfupgAKCRB9vQuV7YwgQnJSAJ4mDNsLfr8rBJZgKaks
zvb9W7HRFgCgmFN1I64Cnjr/gET0a05XLSWpnN6IRgQTEQIABgUCQKd8nAAKCRDf
7jeUa+yYCrC+AJ423DDnUbT3auMicWgsBTRioFOHBACfe/773KoNw9MA+0NFygQx
KS0+WYmInAQTAQIABgUCQKnAwAAKCRAff6kIA1j8vdTTA/9UzhCtYCc4vFlD8KDp
m4jGxfGxy420u+VdytDMJdpKWxiGTH7mKq87KGKKzsRli7m/Aeeyy6qezw8LgHlc
AkC5H/438Qfy3gqc//KohzTCngp+lVh/A82q71e+aqM6Zdq/qpg4ZIcNyzKyIBN4
3MSsMVuZApPoR4ecyMXgdllt+ohGBBIRAgAGBQJA5EuHAAoJED8Szz1kFZUJw60A
niDmbeslCVAQZJNxJsxZs2E4kV0ZAJ9Qjjh5d1cm05cTAjjOzEV2SLXpbIhGBBIR
AgAGBQJAsOzKAAoJEH63kt8ZH82KwNsAoKkZuz+38bJ961/LczZF92x0hdxIAJ9Y
HM8/GzeWZG0zq9XHevuibrfdyYhFBBIRAgAGBQJAquvkAAoJEEuzpm9+s1JA58QA
l2BPvrAyoyIcMODMfz80XcD/V9QAnjqI53HdvHKEusjWgeBFz2LMFtiZiEYEEhEC
AAYFAkCo+K8ACgkQM4SDxAv8uX4H9ACeJhldCoPQ8jPLXLeFvoIFLI2M5OwAn14Q
+n+iH5pyXZUO4+crfghC1B4ViEYEEhECAAYFAkCoC7EACgkQDMt+/gswqTtE8wCe
OYv6sCNDH1LS081Io1+4WddTM2YAn0UXd+aIt17uSqgNJD+31mbpldEdiEYEEhEC
AAYFAkCn3TMACgkQSUWlN9d7Q/tBoACghHZaTNqIV03NVSPW94hifHXH6Z8AoIXZ
43KpCmgk4cFI8dzGauB2ggZriEYEEhECAAYFAkCm/AkACgkQF47idPgWcsWfhwCc
DdggxPA9FNa9CFUZeoRQgz7vrUgAoIIaIC3f5Ci/flk4LIpD+8OTkETJiEYEEREC
AAYFAkCm2DEACgkQ6SYtkGO1mF+woACfX9IlrfU63iR+LvT8RUO4whUug/QAn2c0
AlM5wsSQUVYnRl7E5KphSKNSiEoEEBECAAoFAkCm0/gDBQh4AAoJEPYcyLWu8zhH
NIkAn0xhy9EjBPURUFO6teiTB9wcwno6AKCGwl2XUa9TyrKcnpNlHR2nWhvEkYhG
BBARAgAGBQJAqukfAAoJEBUbqZQRdcLjAn0An0TdGpuJxIHokIf0VMI2kXLc/6fe
AJ9WF3rNR2/zc/fk9psqHpdb9W6ItIhGBBARAgAGBQJAqWMbAAoJEGlqm6oW1qT4
8HAAn0drFNBEJ/q970omFYwptBqNZ68JAJoCJ5wIzYKmtytEuc0fgmLOQR8/yohG
BBARAgAGBQI+eTKEAAoJEJAtvZGMOKkKnOQAniJX3xzZ7uWHHTnnSFVQ+cQIdHAE
AKCDOhDg8BFu+brIv63YgzvxGhJcU4hGBBARAgAGBQI/fWYfAAoJELcM/uw7sga/
ulMAn1/jrciw6qJ4Zzp9fXj4tNKkI3hFAKDfiJyUaUf0KJn2buZVpZQIzBsJ8IhG
BBARAgAGBQJAyTLtAAoJEEcxdTMMgeE8SCcAoMUQPwGijQMIEhOqYVKgpHtoJMJw
AKCRT4bUCO4RMGX2QZe9Wt59QUkBbIhGBBARAgAGBQJA5WgKAAoJEFhOU3zw+3u3
UKMAn1WW2WZBBmuhZSA+qxyPuKdRqVgSAJ9B4KhrMFFuzxiKFa14/4wMOIVZhIhG
BBARAgAGBQJB9Na3AAoJEKH3GNLIXe3AXWMAoJzU1RKakiSrTaDWGRk/Ly0zVr4s
AJ9pt+bsB+ArJTjUyrbkDwDpitDV1YhGBBARAgAGBQJCSIaFAAoJEGmo7Unq2nxZ
NokAnA8WM1WobqfbQ9xJbAZpneezHTf/AKC4kbDUDr+b0Dxr0tocT2Efk3yao4hG
BBARAgAGBQJCT17CAAoJEBi2sjIC/3GyOKkAnA1o/lqo3WdBR0aqj6Qmg9dHqyQP
AJ49/qJFJrNO5kwk8azN4CCJzGY0rohGBBARAgAGBQJCe2iZAAoJEPMxmA5OilAb
UgoAoNd6HscseNFee9fE8305ujhGfcuxAJ4nT1RlwoOEpcF6YRzbNxgz2pVe7ohG
BBARAgAGBQJCinGSAAoJEN+ig2JUF1no1NsAn1ZGfKRP2L7njOuzwOEW7swas6UW
AJ0Tf+IBf8fuuo2Ihc6Np1ze67Ti2IhGBBARAgAGBQJCqgu3AAoJEKK7Smn1q0T/
n6EAn32upJu7p8WWtYbR27LLKrXpl/H4AJ9QGsowCK3VyMAES4irU73T9BVtgYhG
BBARAgAGBQJC7B6hAAoJEINk48Y0qnRPlEkAoNXnLLGCNWILyMUvhxSXAyZ5xFs3
AKDqeqqPVWZxzgF0qa/GetzAYPCJNIhGBBARAgAGBQJDb3R6AAoJEK+1mC+KAcSn
tRUAn0kl7pUHCOU77xfrjLWvszlq97giAJ9hQHMzuEqrEnpP+JWLNTy1+rVCAohG
BBARAgAGBQJDzhwGAAoJEDl84qgJDKm0EzcAnitO6fkU1KmnC0hqcpDQCNzJT743
AKCOSf5lEeLQeRjJLAjWBLstOEM57IhGBBARAgAGBQJD4aXHAAoJEMMQ14pUoOQX
VzMAniGfPL9myk46V/ESjoD3HHp6rZxdAJ9kBWJirGJMf1xLR+P/1/xhQ6AVaIhG
BBARAgAGBQJEUlIyAAoJEAssGHlMQ+b1UGEAoJECFUozma7E9Asmq5/SfaxqNTvM
AJ9uDRNRY8cVU+jZe5IAdLX8mTlgr4hGBBARAgAGBQJEkExNAAoJEJjt8eIHzJ5l
vFkAnj/yQBZE3ozWTVkGpySNwhx9JshzAJ4j0UHi+FeuyM+/1zAuBUPJfSM664hG
BBARAgAGBQJE1vEOAAoJEKIjlRMQhVQt3nAAn3aZ+RIOG5GhLjpvqy1OOr178Q1A
AJsEQk83rTJdBmXp3L43RD3crzFr8YhGBBARAgAGBQJFFsqyAAoJEKctGR6SoTMk
ROkAn3X+A+3ztaJ3TzQb5zyMTzkb77RsAJ0Q/Iu+xxIksgIMKj6e/3YdMG+m9ohG
BBARAgAGBQJFVx0aAAoJEDDUOm5k6+Ig7XcAnjNDKUxQwTH7pXu3H/mZU2LoOLNt
AJwMcjCeNwq3QYhlq4RjZivS6SzLY4hGBBARAgAGBQJFm24aAAoJEFpDCyQ8LuZq
eMwAnjvYrEl0MYUWDJON71k3AE80KPhHAJ94HusVFkxy8AIshFd7ykyHxbqehIhG
BBARAgAGBQJF+uPGAAoJEKenCzN5XdlxXuYAn2cKkEBQPgl+/sK70vs2kR/sFuEP
AKCfo09LN9cWyUyGVlyMmOM/u4ApeYhGBBARAgAGBQJGuXwNAAoJEMNToZJ25W+2
52IAni2jS3152HJklqJuNaH5AcAp712vAJ900+YK76yeMjSkC6pXzQIPD3vHeIhG
BBARAgAGBQJGyEG/AAoJELNRWTiXjTGseW0AoKMx1NIg8v0QVOeJLerufrXyojqC
AJ9bX3re1+sLTyAGuKZtMNlJr2bcZIhGBBARAgAGBQJGyEOpAAoJEF+0x22hWnfu
TksAn3+KEMREtXdpGMAU/3Vslc99IGh1AJ0RgkjBif65Oo+sbpid256jODaNxIhG
BBARAgAGBQJJJhYoAAoJEAoQd4z8f0YhVh0AnRNd7kx3gy54FgDkMS59ogKnpMJf
AJ4jW9kd9CnDewdqQQvgA9qWwyjElYhGBBARAgAGBQJKL5R6AAoJEKgTSad+1XPT
1+oAn0z7hK2tQ3TP3zVMtX1BJNlHqiX2AKCVN4GMJ0GtfUV/Ro9IKITqbJ4OQohG
BBARAgAGBQJLIgzIAAoJELTjE/U2ZxFeSnUAnRbPqh79z2K+Y4CYvlFsSLRw91nK
AJ9BZUWrhuqN8WaU2Vy8KzHCsAi2fohGBBARAgAGBQJLtOjFAAoJEGfzMRpuD7SU
+UcAn2zoN6Mz7jsU74iaIdDGl8g5qVh1AJ9RrXqLxHQFxaoQ7Ho+dXVhlOogTIhG
BBARAgAGBQJMRpL4AAoJEE/BMsN8gQR2QAkAoJ1OvW07kFwhFv1WXEN2VFbd9xL/
AJ98ipsE2CmW49OYax8H9+RBG7VUYohGBBARAgAGBQJMZpp4AAoJEFfAdbIXpfJc
dM0AnjomwQIi4csicV/KXOYyFf5ZEBcxAKCCiKBcE15makROEnHazgLpIwYRBIhG
BBARAgAGBQJNbsEQAAoJEE0sDPzVimehi9kAnAma3cts1K0o7cO92WYjJ1VhUco2
AJ4oNnprsH9kB+REAJROg2tb0kEAMohGBBERAgAGBQJLSCKFAAoJEG09p+pjnF0Q
cwAAoMstTzBlHEm1iKoY5ZmyxmXeU6dpAKC3j0aZFfw8hMov+UsNIeUCBTdaqYhG
BBIRAgAGBQI/bSymAAoJEBj1A4AkwngCAZwAoLYGe6+hh1eT95+T2K6lhfZzV5lG
AJ9s/ytvHef5qt3I66rzLb+Evqwq5ohGBBIRAgAGBQI/bSyzAAoJECH5xbz3apv1
w4gAnRGfACThXTlxxtvEc0d1rPsl9V+EAKCz/8yOT+wlxpaxHgW0qt/XHREaOIhG
BBIRAgAGBQJCcRScAAoJEEsiCRufMca1I9kAniwU0GNZDVXzKslbVu4G1EKEHjWg
AJ4hupCGN5Cnzy6ELhc/cXKzux/MDohGBBIRAgAGBQJDHl/wAAoJEPW0eMZmqaUQ
2PgAnRc4o7Id2njS/f4R1JdOCJGdl17xAJwOcnGAwN6I7HSh4KZ51Ks4GnN8aYhG
BBIRAgAGBQJDVnhBAAoJEGbPHiVU26Rh3ngAnjlURkEL/3EqB0gyMgitGbaSm7us
AKDv1bQ25mYhwv8vwXI1fz5MUKfFTYhGBBMRAgAGBQJA4+GnAAoJEOgkW4kiRO2p
qQYAn0xAuwT0FaBtf2nBST6clBcxGyqmAJ9smzk/bOtKBuTKm6M+eTIeME3I/ohG
BBMRAgAGBQJBhLIpAAoJEL9L0OYEnbh5BpkAnA2rOpPzo3Cn53N15UT/4sGmfWrc
AKDoMHtpmWF192QJAmgRGsiSCUnrsYhGBBMRAgAGBQJBmwt2AAoJEMdeyVAbfju7
hQMAn3MCk6kP3/Gr80VFFEZdt+MMNPN2AJ9SRHkmWrbOHKR885L9nb2eENAVQohG
BBMRAgAGBQJBnWMMAAoJEL6YDgZWajXgkjkAn2dOeURnR4RH6ML4/viKf3F++Zpb
AJ4jqD7ftRCxLa27aV+74VtmnR1DB4hGBBMRAgAGBQJCqJF4AAoJEDIrCnSoXv2X
doIAnRskFgXun20T/BEKwFFIk/tdjaIqAJ0W76fYR68dV9DWhWYhkxlHQzEgvYhG
BBMRAgAGBQJC30tQAAoJEGuSvENlxpT3ZnkAn37o3ziLVtmCoSnzHn24LtQzNYmK
AJ9dXs8VxXJEP0Ka6DqPxML56EoYoohGBBMRAgAGBQJEu+5dAAoJEJki45vXY/+i
Z0cAn2IoDE1U25fF2v7fjvG8qxduHM2+AJ990FV84qxE4fS4g4kR1Ahel+tDr4hM
BBARAgAMBQJDuNMtBQMCCMCAAAoJEHSdKVBj61zIIlMAnR6I3IIh0EzwQHezKKHe
jHhVlcK1AJoCbUgOQ8m5nyHMF0bl0VaBGhMrH4haBBMRAgAaBQI9a6RkBQsHAwIB
AxUCAwMWAgECHgECF4AACgkQFdaIBMps37J/wQCgje4X7iqjNbVDgwpk+98vc+/H
oE4An1usSnfAlNcEcd+05ksTw1gPh+h2iF0EExECAB0CHgECF4AFAkNGu/0GCwkI
BwMCBBUCCAMEFgIDAQAKCRAV1ogEymzfsp7eAJ0dbFbiegRXFnp6X1a8B1eTDNdX
WgCeLmzXUp83gjnUnVrJ3sJUREreKVqIXgQQEQgABgUCTJ9xAgAKCRB/urM2KlaH
OGhXAP0X4sBAkxjxf5AcUrbFvyElsACYou25SILHiBMjVzbL6AD/TQpi3dqC01OP
lmSHD/0kADdJm8qI2QdJ6POqj4RTl0yJARwEEAECAAYFAkM9Z0gACgkQgdpXm5x3
8d1Blgf/VEE+rXnWGqITLcnvhNGWE221fd43dJZwWBfw8lkuPMXyRlI1jdVStON6
DMiCS9+Ex9c4nzyGmkKneqkyuhW04+DgCoKpbflAM9tLpTG2Cz43pLMYfiKTPY9Z
4MIlWT8bzpF9jP2YSOt7RSoJna8hiBr3NCxRsll/SZZ5q/bjO8W/aLHGh3VmQFMO
kdsYy5J7NGdv7oTYAnIzyuc3QLESHD80qaJAjrmR7r7clDPPRXfy4GbBI4ZtuRrk
49SdTfz0OM90pGOBPEaZuP+MRLeitfMnRlHirfCv8TMK+Dlk1yH/eYQdVVfeqK7j
XHOCmYWn9OUCjsnP49iUI2lIUHmng4kBHAQQAQIABgUCRGDOXAAKCRCJsz+f21Oa
7WcoB/4kqfVfFZs+i8IvLmibdDL/sR48/SCjE0KSnWyQna6yHpId4t1kRQtuIJSI
7Z7DHNZlfs8xZHFHYRBiot9nfA8GPxw4RhR7MJMEnrPByqEqmtOUGFrCbYfTkSxd
SGXB+2U7MNilkGEeTxyYQ9Pyd0C2eoLGJ3II/fCs4TSb277C0X7G1YDG3/yycdPq
o5grlvikaIFrnP9UsQd9MYFeCM4KUw5Wb+QkxVtElBChBT3KKlYex5wx4IAV913x
P0DfzkUGlpuh8vlyXWriUxJimjUzV6HCyYr+zt+dIaqSqvgDCsq1eNgNO+N1qinW
8BefBW5UNxU7oW2YOaSKdIcW36WhiQEcBBABAgAGBQJNeUGZAAoJEEjb1pAwnDBe
gPIIAIf0exOxFLlv2buqwnPbAwCQUk9+tV4NumL49fs0++JLZnvWs4TlC/llnkTD
aJkd+BSuO+rInccO431RXsm9a9OpjEFzyF5KhFjJicfnFLa1bJoQxsmcmVxEHU4B
OSvDLnEs3NAkYRwDriGNdTiLI9IoBwfYriLgXAVU/PJ+hYKtka5R+akpXEaM7w8X
d1cweXCwl9FSzMEEul1RzxHK1U+7NMYE8XlfPCh7efkR0Vm/07xyNR/tW0jHf6uq
Ioj2WGzW7mJIq006YzBMTFmIOpPHKDF7qFpGakZjTXx7ljB44A9gQXR+WUnJy35p
Ms/RGXxL3BDxyRNf9PBM5Eqrl9CJARwEEQECAAYFAlI8HXIACgkQRG9u+TkF4/0T
vwf+J+nTvymJJNIk5tOH5m1qCdF85xYej2Ey0W+QJgdomfOJ/qfpZZFXnVSInl6y
XhV24iuFC7VfNh1sHvkI8Mz5pOdUWn3wH8NNL+RD8KHK+YVcwjs/eZg6EtAlUfLm
77p9w4tXdsRfE35zGtmNRRGp/CfXolX0UNyEZoTnqyRVjp91PepkY6yOHeLtAcmj
c7+OUM/f/z2lCe/ZXbRTvx0yuE3YGKsvVyNocucSUI67S3KyVXgDz9Gr2CMehjv8
Xx81NmfY76IVpOLRxxSXG8pahCw6xclWQo2BmG17wrELvEoiNTK9kp4Mi+tArcbE
u3y/9wCnkfTnGeofLxlpZ9I+0YkBHAQSAQIABgUCTox57QAKCRB5eCsGL5NY+7+9
B/4y30T1N8UDAPyy4A9D69bfElvULMNaJNbOVP6FQ6eJWWvir1kCkvqVnh5hCfP9
+sF9sdEd4UvmvgIb9bQcPxmtROVbMhK7CouPDbJ3PcFgIewt8G4z6TfMgAbIbNIA
ySo963RI+Hx4hc7UWruMYG/i7OXcRdoVKK73ROO5zxt4XFtSNcst4ThcWxlaWO8B
QnRWYaJIVjgkp++q5fNPUK4Fq2iKq3h65TGtVjD2jdnu37gdSpu0SVLVHjs7jzK9
qzlrMjub4JH38hWmII8d9LJ39izvYxTSY+9Vb10/rD9NjR/J5o/JYkbtLP3s4lht
CyFpfj+VkzMxk9dr86HShplUiQEcBBIBAgAGBQJO9LVPAAoJEOgBcD7A/5N89iUI
AOg+F4XnFFQvMLYodkUJiwOYjw0I/7Z0hfrNKHIj6wUpQKUD3n/fTFCrX+DihQ2d
jrcUrIza2ZQwoRnTyA6zJWrADGqqPlPCJb5zangYwVAyc7+yH/qJtK2TqdVYSgo3
MjvpOJHrQLqlVpUl9nXg75XuCU9BjlMDL+i5BRDOy1TcHQUUbhhPmTmpdeQpxnWY
tuCF2L5IAm8DOH6zkeHNATR7yr+/z3/s97+H0SfxfdocSHUAtpAbeb/HfYzQg15H
SwpLnFg+otJVDaeMiT79jd2G3Jy9MZD0HkuFSiKJzDGA7zr/cO9g/R175WRqFyHS
4zhI4uuVgbZmERpWZ2yETsSJASIEEAECAAwFAkL+Q7QFAwASdQAACgkQlxC4m8pX
rXyxwwgAvjFEl/lyPAFPXTNzHbjGsp3iPo0DxSSHlqCgHA/zcP0veRCsWyDmJmpN
tFnmoCiT23aNtTe/iHhibLcQ8hPbR9oZOiLU/J1A5wvdmK5NqCocbzDPI1u8h72l
YIyvUWvpWGv8e6xnuQQvtX1uxUXK/DPDlHB76TrqVjKVT2CUQ+8vNtgovRE+PHB6
hCEVrtnzoEWGWopruWKBXmdAlqna9os6AWDcK9+KA02KJnALX2XBwPzHU3a3xLJb
aVfqfsIeiGwMQXdaXBHAozM/4exdh9srGmGkHqoA1OmYf7etUe3wwykLCvmhcfBV
dPYu8LYaNUhBvYrCgXqt7ZYrrarvaIkBIgQQAQIADAUCQw98LAUDABJ1AAAKCRCX
ELibyletfEGvB/9/yJIqGF1PrMXhIs7jAhBF5KEqvmvQxnGKQabfYSKciXwewiR9
aSrSrXqGn1lt4ABsc3wqgiFKZBCRfAl/3QrQj46n3gTaiO5FBz5MBJ1VpYUL01+D
JILKfwWT9BbQs9cZuVrLawbId4vBmXvG5EN6bUhVPTgpHRYx1V60v7bjs86c2/du
ExM69o+gL7oXXRgdBhYmkbTewV7uERCvvgrXLUgUN3vuJj1JxBFksFSzGLZ/9ABQ
gBpSbHJlwrX8cXRPvOqu0YoeLuS6Cn7iq/xxLkdSxyZAhsYPUqrteGKLfs4ixzV5
9M1Xu82eNGaWDfCSYHPy6Pdu/ZEkLKBtpqi/iQEiBBABAgAMBQJDEMykBQMAEnUA
AAoJEJcQuJvKV618m8UIAJnp1WA2XMJ5mZ9rNGKCTow4Zs+Fn+8PSWjD+DWxCIUD
AcMqZaUGIv+TJ2YwZ8YqteCAzV7dvr6yjQpNn4XLTcxyQAqFGR39QvyVC4D6u4rW
v+NKgRk2o2J0BooudbEGRk2gwsjzo09OZfaCwtiOgPw9a6Sy4rPjd+fjZYx4EWT4
6u30sUsXiv0gIrUjzd4WPVeLn0j5QPnnDKa199Ekpj0XP5O7YQZUy2Rbh8sCJQQc
z+ewzziodRUsV8cHb3re2wpGHImJCXvMrXZJ6r4aipB60h7SlN0zHW2m9NrNOiHa
by8shlZe1lStADhOQ5BNMy5xvjVn3cNTmUJWxmd4nRSJASIEEAECAAwFAkMSyAsF
AwASdQAACgkQlxC4m8pXrXwPQggAsN8MgCCA2p7+KLETSIsAxOJMi8Sit1+QftkP
f7uuay6BeCyljwuLazl5KiLMjiIx0NWZn9hKYnETvaJAcEFk6VM/4KKc3Q8r/WIX
bqeCqZySRSNYIKXpQcUw7+f++coEiiXK+nHJykWp0z7PmjIVOEiUMwjP/hkE+YYt
/XMOl9p3mIHfQc2zxGm+Te4N7PhBX7QqMMTLJjXB40ajssQDdndbov85ZgTxlOv8
+rygAOfjGX49X3PO5QexTp8dcQUUn1qXVbMe7m5YSBtIVRbi3uTLc0RTWCFyUwdN
GAiwdwKnRrjnQhSN8fmMJ7YMgLeNqICs4pc5pJszdsQbsh3m0YkBIgQQAQIADAUC
QxNwkwUDABJ1AAAKCRCXELibyletfIYLCADIJqYvAp33q9UJzKrhXheAVDlZaNs+
z1XGUUSY+GJJUZ4jlf7UzLdUD3mUzfOSmkkQGzkM8jTz2GzX7LX5EZ9vLGWJXCFa
RauLApB4SW55SELqe2JrUhDJ1GAxmCTOWsjGdVatiiT2tR67z6tnjpcF0neaJiMz
VCXlM9dC/f4odPM71w4e62nSRvDvVKoFVwqKp0Ihwa2PXZBH8+M8V5a/kFt/Jqt2
ooSDM/WVY+ttqbnivh8o4Qvdw4FF9vyJr+buehyW1PZzf7SCG+q+3CKntDo30FAU
nmLU8eZ30rbqPqL7QfwpYRqW5Dc1vUFMAYbrGrcrwbcePHTqhgQ6rs3kiQEiBBAB
AgAMBQJDFBmlBQMAEnUAAAoJEJcQuJvKV618fUQH/3ueYtS/qV6sDgdjLaCTMfNN
dEPFTOTmTMlM8HMb78bYMhtt7KhFQ3z0qbvAZCvawM92fXmUbxCj1rgX1FINPeIx
Gg5FVz1TQjBT3WBLnVvVQgyq+PbBypnrrY2KzcVSg2MG8SRm29PXzZ3Z32IjzW85
f6GkWjq4V+5a9TVI9QUbj14KpcqbVaLXk4HxAQcXtzhUhyxpNs3Z1PlfxPaosZa/
02f7ys9vSMqPZeTionI08p+AkKYjYRrywW2KkGsu7vu0ASWNIf9Bc2qX5SUyv/I2
+CASIiSs9Y6OIECRDWopphEfjWAVmAGOvVFR6xNnKrOXPITipK5TSyQveEjhjYqJ
ASIEEAECAAwFAkMWE5EFAwASdQAACgkQlxC4m8pXrXyAXggAi7kl+4WYEZZex2Hi
t8Q7xpZnkXe9bpRZD7b6Ms50qv5XkCWz2YVKi+IXECFNI3EqvMYq1J8cG3iN2eBz
weXR00WFMnVwDLgY0ijdDKsiuFlaoPXHCR1ql7LKavcHHZYiX5PwHo4EFgNT4adR
eK3tLJtO1h9Fsu+377VzwRWhgFXf0+MxHpr+gkpgSLyxt2zIAYKm5Ekl/OJm6UIM
Qre6yEyYQ5r768s6UsseJoQvxVjuYp7ZJCGFTcRuAp04QFzgRAg47J/GR+CPbwTv
iy0PcnGD1Ag7ZN0t5QC4/gF1kD2GEVDGVOj0RYzuHg1E7pElFgHRYze0a3XeYzrZ
CIEWOIkBIgQQAQIADAUCQxdlmgUDABJ1AAAKCRCXELibyletfHejB/9mY9hrnyeJ
6EPkJumm96b/xCdojboUJmz59aX49DhOaqBLd7lZ4XkyxFxM+n3siJOxjXVc+5hv
AEE4F0laVlVqHiL2wLkGS/tOWlmkQ5DiSQPyhjZuS5JMuBPR8Qza1IIpjEb/hW2T
HongeH0rdICj3ksTgB6ppL7D73BxocO0kHdzqnPVH+kpc68oRsC4OeNKom1Sg2R2
rgeeyTA8HMvgJGpjo3zH3InYonNqkpQG0VXdpAIg/H8KeU/G6nX7dHvMzxOrG4dj
Bik43iOUpnPUeRN8EpZjUMHkTFZ9OTvxUS5/MVAbs9++IHDm9PNX/r1FLxI7ry7D
9XTzaONXx6esiQEiBBABAgAMBQJDGLZNBQMAEnUAAAoJEJcQuJvKV618klIH/RYe
XwfWfXmDk9hwEhl7mx3Tp37MpBFHVg+xAMbJp9RLzr+pMS7bpjq3b0WWbXVwjuIS
UV7lnHwKrBDM3WtNhIWkQbSRhi+B3a6Ky4Hpug6gSvrHce3sOHNYCyNatL1Dgm6i
3lv7xs3NzlmSDNuftEU3Gp6Jv5X5vASjnSL9Y/E4xN3gfot/ltDW+H6SAdFde3z7
IAxXvl7wjxot3M1WNTLqmtLN2MRFsukyX6xVKVboNSMbY48lfcehDwv6uJXkwnO+
aK0fJ75fXRrHonBf1hiiFmer5Oi7WhwGPxlEjmxzKLlyUWmqp3uExuzRDbeXPgbB
IJ1Y3GR4kzY1zt8DLgKJASIEEAECAAwFAkMZX5AFAwASdQAACgkQlxC4m8pXrXxH
Gwf+NSKiOGVC0jpp3IjY5+pZWkCG8qvB34dQga2YxRcvOA0op4pKbIXXsrYmWveX
q7+iK5TSCS7iQyBlLendaNZ7y8dGSS0rxlMKvWePVKmZBXY9uYmJdDEeDcMfj519
wVd8pPmu4Snpc0opaj2gu3n4Dr4tatdvA3sB4AiCiXocDcEub7EsunQab4I0Qvin
j8ApouRMJSTC9Udytow7beh1p7t7SfyoLdlsI/1a4T3TE58jPk3eir/DEAmh88Xy
hXtRq7GBTx48wSa3lGRXfWPJW1ODYS4FViNyhRnZ8q3wkPEJxaHs58MkQqOwxGdP
B/p14HW3T+IV59ACStlXLdfg5IkBIgQQAQIADAUCQxtZCQUDABJ1AAAKCRCXELib
yletfE3PB/9TfKN/QBfAOAmeC1S9Wn6o0YB0WL0i16gtkrxavhvUCkWp29BOuCoe
d8wh2ir6mg9KQ0i/QGTS028slOeO8IVX113aElUN7UsFgP6Oqx/aKtdCO+8ZppGv
6G2QbvebgzPeHKO+UJ5tboA47c2NB+E6Zx4X5dGXQoL1KXSxcUHral9yB13+YBQc
nMZWll+Lb2J4d5L2xG80/qZECxKspsSfTXtUdwYpQ0EN94DiWOt3YIVk+Fxv8328
81RJFMvuR2jY/C8+Finw1BYkVloaXqpyBF4HclJQ+q6xRckv6CaR3pRAqfbSECCS
ZmGpSHKDztTK8wWhnsi8GGb18U321arQiQEiBBABAgAMBQJDG1kJBQMAEnUAAAoJ
EJcQuJvKV618Tc8H/1N8o39AF8A4CZ4LVL1afqjRgHRYvSLXqC2SvFq+G9QKRanb
0E64Kh7/////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
//////////////////////////////////////+JAZwEEAECAAYFAlF1oN0ACgkQ
jw7rxHtHFsmrwgv/aVGvQnxFX1BGQse85UTZig5GvslhktVGRcdBb86YKzsLxFRE
Pc8IOqItTSxBtvSTQEyQuYXMZfP1+iw1uQm+OyqP0cEipeo/fCcUXDjndMslHb2O
5jE1kqOGh3SvvQzUtS8Y6O/iKiR6urQFJYXGF4gkyvBRw9MyIf60HnSxM8QX8AMh
C3JOoDrTIhFLq8WFkrdPU37zvJet/k80+uFXL7vToO8AIvzynRKzuQLRn0DlFUDA
hWvvy+lXsquL9sGzyE9oOQDcBmkSArNpJ5zFi9g8p/45dvjHWcqNYNe35zq+7QG1
ctN7kjPvJNWFuFE0PwwQ/LCNwg2XYoOUDDnNQXhcZAa/eD5bUmJtD71AYIx0SlmM
X8xoCh83SD6qK/eML6gKSOMc2Kxoq7BEHG230/sjSqUrWHW31ikcPTxB1q8aSW1X
pSNpBcpVNYeJfCImEi/FH+pUY3ueIEt1B2NzuUTmopg7kYqQfEnOFYnNjdV1G4D3
VwwDdWhVVET7x8ltiQGcBBABAgAGBQJRdaDiAAoJEBrKdusyNTqzoLcMAJsY/oTM
zdqj6rAd0rLulQ8ZrTb5VFGS6bhFrv98h8mn/nJ7nM368A7F0GoxjAHTgvXndgxl
7+xuxCCBdcxT0/oFGwU7T1chvZ/MEa6ErXLsJb2jXpI/tXMSuwkhX4Tkza063v+D
yfjDDgIgoblUUSQzJsfrnAGniq1kXl7EdlMTjIRUHKfXLnOqdvWq2cloP0W7RzXC
YMC03w7nOUSbz4PBHHGPareNPz//wEAUeCIt4GcqPNh8n+zRrylklVebO4HMaVuf
r/6F66Q56En8DvyVw4NtGvuo5bZjhmrM6muAvVqHc8qnAb6fhM7VmT57smWRUTDF
2wJeOr6JyAz6A6rRwKI2WUrSgHjBENDJnPJmTeX3O3XTDcN4Y8JeswjsMDBkr5io
qEdwykEEudMstGVV3negPYRQtOiZVPiHSRnrrnKGLHDKtwiwwAl9NmGCFpHqwGNW
+hse1Ze2hFVqlU/EO61TQO/dqwQTmfx4QanKxAIkFxWRFpkbDGiUnzDsCYkCHAQQ
AQIABgUCTDQ2jgAKCRDn+Npl/acoMW3ZD/9YJQejYaKOHz1YAH+jV/BQY+b1X100
ERsA6RzvuAT8Bh5RB0yHlt1cVAjJQlEnEzJuTSwT2EKbDb6MBHtdLjl89PkbvdHF
wVE18h2k2bQWQUHprDQKPjhACA9+ZXdYhVrj4d/W+zsWaFSEs/s1pSf1l1lEDutG
UQD/bmBiIaM10YlKp8YhRBCGPduH5/4p5NY/oF/gfZWDx7/Fy5SYlQc6OpJIx0/7
2V0dNC/ScnaJUHXhLR1D88ste3l0o6fLycUBqfVS2eztvzslXXxNYInhUMuH0SYX
zjJCyjrNxUCrh0g+Npsa9zqmULrPFwtNy/p/7wFww5v5DPAEdzCEw2x19/zWTw3/
EYum6Mv/dL5uvVx1Sm9hIknSmvSgpH5EdBWiJHDjBTD7bkQ4JlGUlzgjqXIFTemc
8VgzL4D/yik+/rlKgh+UHL/CVXcbjr9zsGFb4auZ02koxyWJUUyl+ScDzLd3cq3v
ZDZZTMBep0p+EXJrmxDAgknUe1H+PKRHb16319TaH1+V9JThr1+BAcFqTLJVgb9t
jiDChXxWe0/pTO3LnGp0GLZqP8KPabwI3wFtYYQKBdJBmMfQe0nMOuzg8aREC7qj
uwTncXH4Eqe1I2xtZgfUDx9cWWqLnBktm9b7OVXJ8+7lI4q2PGmDjHgGUpAAjRKp
KphxXsQJwRNYHIkCHAQQAQIABgUCTDz4zAAKCRB0m//TuofodBMTD/9Eh7Sjxn9Y
Z4vwXwcIpEAdJeCrwstNXQFb2MHJere3Ee4sjGQRV+Y8Y8f6axqFVxrpksvcNMuH
ysTo42E7etUWa9I3ZBRbHdzbbKzukUT0Gn9pHSmmAKtmjfZPsIYDQtOeRfjLUgEl
QfGTnexZ66BPqPbORVOGqw7MAniMz3nTtSOkfwJ6TPqBZFx4p+U5spWgw1jdzxwy
bWjAwDC2jronE+ssH3xQc5lb06y6PKYU5bv1D1eMh54yNsC2/R0mCszAB4TuuS5E
314ZuTJwyLgdnZrYqFg5k/lhl90gbJyTa1tADg/HgtkUwiag2gQbB3BmFfxlWwLO
ZkUzEvTIVSv7YqLb0XfYJJfOJHCiE3IyeZvtkX6p9qTH9DgvEgSxLC3dpAWtQYxP
p4KhQMpLoE7EIARRH4dtAr7+y6t4fR54mPJRDmbndErO3+v5YjQvQSPxt+lwDBvm
0pERrWpv7znL4TEZ/e8WA1JDDk9ym5TE1S/QGet8J/psWOgfIXDBGZfMzIgWNzkn
7esnUqG9Y0InWTf+Xtbkg4hPZJGuirI9Ofuzs4IBxuBZVx8tng13fvkIjonNLQxU
lGvCThSAz4KngQvy2nkoeeMa0QPADyFMCSZpL6yWakvY1QcaJkodlv0eP39yca4J
RwIJTGC0aPXlmcrOczj7eNa9zwdvccMY14kCHAQQAQIABgUCTtVixgAKCRBZeIn2
zl348lzrEAChOE/xwQN/deypoRF9+hIF/PAiijRctv0SZ7sqEZnKCSApVOE0i4LJ
X9g0EOC2kxh0D1YBPBdojXMl1uFDRmHQKJX+s+eEGLVWcO1gQVQKxARLtaigdFxv
TqEl+NjDHXOdxY6nksurxvJAgMUk++U+4Taz8qRdjp8YW4nYBAfiAdjTFLl4ub5A
0l/PgK2KsYyxV4e9eVF6HsTPUyZF7sVMOxFxf3j3niRiadLAnzGRF3RkZndhOuEU
+P0qOiZQHSzE29Iu8Eze1PBYpbC6a1T1YNpPKGlPIn5ZbCi0i6o5ZAuyc85qyxBT
yuoYrvixOD5yE2y5edMo4CBd427+V7fX27UU4vH2Vv9Cp1F2YkCZagXpQPYDCE7R
Bi1wmeTx165YOtiic0ScuFaBEa9Tr4VkI5xv04KvEZVyYL//NubNU0ul7Xhrghvz
27s9aZQIFWVjlIm5iGPTFm9I5evqo0LsFvDmxIUk3qooNv5adrN17PAmFLVyQQew
sjrZSN9T6MjP0IpvoomVGtCE6IqzNLqc1pimt871BNHF2p3zHQxx2KfV0lPGz67m
lEKYafCNqJTF+hE9GNyr78++rQnJUK27Ig3RVM9IpQp8QOhRloiQsGQtD//CvSWs
h54c36K15Yl9g5fQ8HUYkbcetiub3uBr0mMdVa7wgYfF1/VZB8bPJYkCHAQQAQIA
BgUCT5TSEQAKCRCjOKb8j8gZbNT+EACmzXhlgI33H0I0PzbSviO4yM0Sa1STzTK0
M1lm51g3Uc43vstS0ruQKZjpLXf1SUhQVyV3QIalx/cQsqxBXonTLfGvEr5EOerz
xrGNRzSNRyV8KNpZ0yoYjvxHGjbYDAEM5HkdBOt0eSJM6Mn5f5W1MwB93YDCg4RE
0ElyvKEezsuhY5tl4nF9X2GeciJBRrd9tE4MdJaj/nj0xcDx4NXNEFF5XMdh10DI
S1ZDVTCFs75coEedoW4GtZAQg6WkKX4yqJ8Vk80tJd4h6IYNYXmATXcuPJ40F28p
WphBbSJmwwLSJO+N8zYTHpbrN0+PmC1WsflMmpy01hp2/+6WFpDgaWToYptZwvau
Apoh3Lo9BMb5+cZd+knogDLB9RGMy9AV9Lt987dKlXexHfwUbfRZzdXuH/vJLwbv
ziYvTXO3N1PXSNE7AQ787KVc8dIPx00RVJf52Es6QuhOFl2Eb2L7sgHDbDpyhwoq
feFKdkH6kWVg90t+uKVuGALTvI0q8xxVnljvD2L2vqZMrmdGzqiylnOPyYXWzYDr
jBJXGaI2bR9mTEE2TWb60ptlKBOpWHLJC0ta+AiHItaDJUs77LPHmozT3UxS6Xtr
Wl40owVS2BdnveYtbS6ShKWYfiwSFqvGxMO6zTiMMLSJqHlM+yVuFVUsF64sICEh
rBZr9ofWZYkCHAQQAQIABgUCURQ6HQAKCRD2xo8/nF8DuUr9D/9r0Mpt+5SV9h+t
l8sYHQQev6odjAQ2u5wG5G7p/2nXFYs3dRpO09up0foqdOPqLYPhe1PaIyp4KFu4
R13yeVbh4iq6hjrOO5ftADj3bBWQTGKlUCaeKXi1TRouoejgO55KBABcVY6PORru
Kz7LQ03ADZFwUkzrG/31yxT/LEU0uHljpmvEmp0OEIIMEjIxUiUF5hOoMhnH+hMH
ENliPGlJJ6H/bvqPvKhyFIusleRktHMEKfNvY8QO4dAcziIcOSo/Mbu9HGBoE+WD
8GDcJE3DdqYOY0uZpghr+V0yvejt0vej5KhbRLO2Cgyora9FO7KUyhcGjMvK3Ti7
3Fe43lr/B1C7ahUmdPBrXKKJMnlVWUC2+8fXvjVQm37/v3JzjAN7lky8041JVNHR
k9Ve1rgTBq4X6bYkHNzCXwb1o06Y4bQr8UiRFLrwue1yUzYp7xTQ4vpsaqkqVVTK
YpKoeURH2qbZ93GJDJV/Pkmn1+VH0TNGzLE/KRtIZy9536YvmZovxF9jVs4kVNIW
0Q17D5mqH64nlRDJgCpOPuTW2jSg0JNzidIY6zvf70BmjiaityHIAtPH8LFyQ2/g
SyzHZ4UJENEw5mMkZG3j7fXN0Pt/NhlQ/mhl7ZbCtQIBnA/3d1fVxBWHuojFqgyZ
IAgIxvlUSwtTEq+KTJlIwuj8N+QrMYkCHAQQAQIABgUCUV2QewAKCRC7m0cb+U6H
svcwD/9LEjuSGv4vfTU8pKOcIzrwKScq6xTgJ9wAyNZ+rC0PJjHHEhLw8j27qZAv
32uohHt3T0F7n/iRKHsCszTKUkYLWmUVBVaOl3y6HufZE7sMDJuidiPhSi11tOgM
t9ekySI1uNBfnLLR1rOUMbxjoG1NbdJIYjUPHCpArlKp6zd0lW+TQdgEQhsWxuM7
Pw3F79s1SVf7twjdj4NbWfnw2ByHX9HGuDytKuoEm/OgjHDapUpD4Ctc8K7l8WCa
ve4YkikxebC6K3C9NAyRmMup1wC1PRpzLD7UNkFXxo+Zt0bETuac6g8UCSR2vs7W
aw8ZiARcLaml3uJvadLP76TkvM86y7zdPWoxPySDtaXtAfEdsBwkmoSma7qK4c1R
IHUGj77TNDsJp4rJW54bFuWMcyY1KYfp5ofqmvXx7nU/7+SG1g/T/e4foBbEsTQ2
nUTMGeEQokHpsDc15a4fTNHL+Yn2ngeO8k1/AtRp6MWPQvVDGWYUO4HFYnihDmMc
6c5H/aKtGepdIqd7vct8Nfdn7ABgNyb5o7znQ02PsClf6G1pQP3erJ1ryywSwKKF
QiIwIL+n/SpAwGO8BfcOeVM3tkLTtnZdvvzaA+VS7407J7AKiyxOFyKdg2NN6woX
dY5YASI4EN9z3TvmEOLtqmCVzUCIN7fL6a50cCdicIeohqej0YkCHAQRAQIABgUC
Ujx7ZwAKCRAnffdJdtkFnwGBEACYxYy1VjQKp6cc5CQQgWju6xTacJjJYMc3nZkq
X8OSuBby+bXLAAaCp+6lhckdtmdOCsw33b7D5/S+GbXoeakxonhN0nNy+zKRz3tl
lNwtNtKgWcM0pJOSH3+X3fPcvQSXY+SMUOtCcBFgg1Xo8dWwIof+M+ZoBghiwZ6O
T2QDoTUUPL6chV1/6FqNK6SoIuIafWTqFOT3mFBhXEd3felA3njkMnsgpGS7XG4i
A+nLB9PmKdkPvz/QBH/zMitJr/JgRGHQCiynh36PkQ8bmZN2fBoviuTxJgTA4jT3
YYAaLQDJjyadl9680TYXs7QX81ZObV5pw9L15qt0locm+eYRpbjJyTreWzrHsglT
MvqOF5RgH1xDX2D3dPLFgZcrHU0uMhqzsHbI/DzTrI9rlkJ6jfbiSTEmn16GThuo
ONVUJ1M3KayFgmkPgYH6OKngwYVynhUSY5YN54MEowuITq7eXfh7Vu9ZhWDeY4yO
pTw/4qdbrZ7AlpaiN74SXvfvm42oyZG4XhLOD7Vnt8zSYvOiHzUx8ci/B88TiX9P
C35OPOi+zxh8Sl4V3o4CqwcQg9SSm040p/CcMJIkan8Ql8UUH/2TiYjXc/89Oi7M
8mH3AW3eSelP1y1zjm9RLdBMsPYUZ1LRTFSsyL8vswwei0554YMWSZCv4ANdm4V0
SYixoIkCHAQTAQIABgUCQZpZ5wAKCRCQnUi5NkQ5u21zEACvJPiTSJhdmKhYmC5O
BoZJwT3kxYhWB4Lr2wsmH9qI/DrnRaCKYVYu39mFWR7i+dQrQT4I0a2HpxRKZRrR
pVlEh0nPHUkgslUyUN4W5XiPW3IsBfBNIsWsDf0ROAHjzuBtThYHDxTyYd/EYwQs
4i2sNVkMbu9BV7s/HElQmlIFSCu51YWbOuq53/19Ma7HMJW4CiX223pWX38n5mhV
e3+mNTO+jSgASNRuDq3pXyuu9gOeUBptlCCfkM63W740kbzlwz/9dYHasV1BX/61
ZWwGGylSrWQaNwMnBCxIfERqfXrsvWd1Y8wmlmGJn8ZUhnpspYbnJkSlV8rKx7+c
JopdZkTv5bzVKGAD6/0nge3iOKzwXY7YdyoboA5HJDNk6vY+HSLYwzHeM1BA/VnJ
JoDlI3XsRDvHbTUcYwp4RGnIsZWNwyQbWEcsDqshkSUM8p8ODkOzmetEBILIDUPb
l0UaUF4gbRUc3Rh+3UiB+MdQiqaPoBx5sKVeUd4SQc958a+z7vx/HrSxP9R9Qpm9
UYZwrIa03CrZMaKEfqInOs74GiA4qkADgw9b8uGXgvpgWMTz5AGSLZqN6B290NDq
GOnhOIZl21UOHrCwEu/qdw+3NqUBfkcLrHqLU9dZ6rHxR4TwwrZ4/nkaA3hS0quO
d66/IDnomgSWtY0vU/AdmZCut4kCHAQTAQoABgUCUaVYaAAKCRAIh22TLlSrLFiw
EAC6UdDRPB/VJnX6Wkg0FB8Y077cQFwnB9gw5jBKP/1kV2nNSQFZJthuKfa8R30l
5pwUBChblOad6aW5cyV43P0n24B5FE9anRpjqX5I6eB04IW/km0Dfg5d5z0PRsSV
EExwLQyxvJJx3gQKvhjzuygWzEfsGSc11+Qie+GEdLr3oNA5EQZ87Jz2En3d8UtQ
Q4zoJfOHaRtjuWMnzp4dxRB0cK2CsZLSsA2/aCygkVkO6wxkchBQLm/m6/cVDqUu
kWpDtZKYxeKcYl+ypwwY1taSoH9XpX/w4zVlkHblesOvfrBtgj6/51YaRhyNOAAf
ijYIyG7n4uNWRrgPNfXbo02NscRg1f2ey9BffZxAzi2lrzyuU536p93wn9wLpUOJ
R06FQyG4DVUEi10iy+jsSwDweqiNJGY0euG14P3770HtdRGmxJkikJRS2evIzzve
/34q/M5cIHOHYzcVX1+207sqH6EGGjypAeHS44CMonXsyV5CK5habTkbxz+X5G03
JKmJEu0yA7udQBPLsmOcQ3yD7BCh28GU0+LNIIuqIa1+Hl/NDkLnvs+u7HsQuqyK
F3M1W4iNre0JANuEN3uU5SOXDKY+sqjrFd8C6ADgR1Mm0nB0LBbudVjrJtF7OYKo
erY/DhCI2t776MPsEY/zIPJQ7QkVXg9i+BQnduEGNB3w8IkCSAQQAQIAMgUCRVcc
NSsaaHR0cDovL3d3dy5wYWVwcy5jeC9ncGcvc2lnbmluZy1wb2xpY3kuYXNjAAoJ
ECZJ5ijF000FvsAQAI16T+yMp+Wif0qllqKzzRrmEvSJi0v4Yj/WEj7fMDj2OHlD
3FPUMm+rZ2pkC+U3ULbUx/qtsRBGHLI5ZUUuw3/wYbMF7L0wSfBcyiqoMu4PF8dS
3E0QS5Y8XpPkPB44daZksCLj8nsMO6cSnGJt70hD6tXYJ8L6Wn6pEeYQ7RvQVA3H
1W37/SwBR+fO8iYUNOhDBxWZI4PfQoDN6uHNvAGm+GOUL6xyMOs2urJQf3TNF0Ct
U486BDp79/XvUXLLqb1NUh0ynHYk4aCXytPBnYYo1QBlStl+u79r45WS1pjmO7fN
vdG8R807jGaUz4Wrv+PC8SPT/W+W3E2FprwOCiYo39FJLy+fd3wrA1hN2zjuiT6k
fS+Mqq8fiolUXC/GpOtDR9d0XC6h5ZjNb9vpYyScAmfFalrpw/y8h+d4tP9+LvmW
a0QMlH04xOq+o+L2jeEpu8aq+9TGRQx5MikojocyNj6Gn1vsBFlRxrHS9Zv4984V
KZaSQbFWYJAL9IxTYiVJxgrZ2g4JO6FINSQLTXLrtS8+m8qjIXUD0QZqUB/JYghp
DtRl4y1GkFg6COqPOEviWbCd/26EFtgKzZWt2x0ZfW/EZOTqGrB46RCol8igwEFO
BAaTaASTiNVyxWweHlAh+Uw+tHyLAZMn9sRrZ9j8jQQxT4Y2R44CRGidk74WiQIc
BBABCAAGBQJSTYTDAAoJECC3DeE/HR5PJWAP/jkgCkQspG7iIpEt525V8W5ikBP2
hlEtDpGqyAvT3HcCuxT01PwrtepaEvyOdtX5TY8h03T8vUesFSMXywNiwt5sTVVs
JJ4jqSRnPjVxdYpf+vk40qZuAs/JHykefrtHpBoIBshKniV2mmNZcbRMZaFvfIRE
7TbQjid+c2dZ/v0Nyy1fD1aRQh4+QgE83Tx3oSGduyiPe6uqenM0+w5duy/xpiKL
d+8JXZDxiRZ77Nr6CCNLlDJc9apNsrFpJCt6/5kw/Q+HIOBQOhc5XS5qkmhkkQGc
JELIr4WpJBGFafBS36/OdbOBUiCDtUL7Fmr7axxMdnKRQCUQV+YqiUaFZnq8tSxZ
0DEMYkQuDZ2Tkyd96QlmmMD9TKUJWpRl6AtiO0bXtK6p3Y1ntQSPE+t0tcOtV3zD
Bxkw8uCKU1iR47OkeIsiBGiSS2GebSS6sFPEC16N3VBgaR2Vn9nM92B1YPhGIkyV
bsJAIwV4T9eH5kerTCgkpaSvTcr2m7MdfIneKk4pLp3lH0rlhL2v2Rr0XbYVRF0Y
LKsZTCZVWl/kamAAQDcwQdW++8n49AWqsOdutpz5rJ5I0CMQAeDb+5e+ofA7Hm9Q
MmHKV2sN+S/DfYkqOvwRUVRmCCK8s20J1CoWEQZR+efi9D1M7OfjyjX9kSn/Nbd2
rttCRoVu6BFJqAfauQINBD1rpGkQCADyZeINQyOAsPXyOkPR5OOj8LaYIs+Iw3vm
KndG0lKD+JBQ+w+jzuHIC6js+tfZTLMylbDtTw815tadrUiT4yGrpJ6ieKW1FhIS
Ae/gpCtAfIp1W82N8w14dVPBDVKyAa8w5Bvdk1iEKkyLaNMt9YFVvkvB1DKgbyqL
ZpwYE6vCPgVsyPuCxqDJzg+e2cMHSiOlY59DSesAr0UcDYwVnxK0p5b/CaxXKCLA
Yk1EJIK7v5SWHOseItOwauS8+EfroNDbOfx9HK8AabdLyu2BB5gBhVIjSmbslAUl
s24mMYRGHnOryse9gCG56xsRWvL6Y7Jtfnzn8lUCXc6cZ69nXtqjAAMFB/9IUrUP
dUVEqdysECd1NBoJ1DtIcEZGRCbONC1pKcG5QGVt+iFAbXjZkHeykw2j3DR9jwRe
cHLtgIOvg7SKf8w1958ifZ2sPmq8yh3+b8qxiwBGqqyKJ65v9vb9U8pRYxqRXpjh
/SZyhxieqPeWUoLZeyWF0Q/70nxjc55zHqCZ65bLxAnMWLrTTvqhRm1aYLznrnzK
4VoPcnv2zTBrSTqjvxa2Zd5Eev02kyPN5WyuR7EqlEN81IyCMFDiisUYJQUMsuq6
g6eMwVdfFfZHa299ENt6lFh5l9uOJ0E2U5P1evVfbVtxsdYRJAuZFm87QS1gRxGG
ntG3oCE/8vveBHgtiEwEGBEKAAwFAlJFMokFCRVXthcACgkQFdaIBMps37IyOwCe
IAXR+JM4sHsiOw4tfniC2LAhmvAAoJ1w1Osdp1sKIp47wyBJOmQPuOtcmQINBFJB
jOYBEADuKnefrbTVFTZf9mITVx1lFAqwDHPRHZeWBr2Vq1B/Y1eKKsenBKbK/O/C
XaLuGFRn/6Ptvi9eLuWnho88qzaPU1Aa7BFRRiZlN+WrTmaDwdONJnJQp1LTPjqH
mLVAkD7mFZe/H8Glxot62zEqY7LrEs+ZuxQ8oI51YKjhGaACvkrFMinO09+TDey1
fupVH1+yskVKQZo1zp//Hl/IrPbZKfGCxIGePQowZF7YLvl8DKPo4jI5KO4tZ1kO
PcPL2CqwhuCDy0fpUhrQZBswp6tsGx5mRJxDxfgePRBYDK4tMK+BSVsRputIKOZ4
zoBf12hYFiJ8Yd7e9cqxTiPa7AhxPbAjppiH7qJ3NJKCXOOp9DcSvrfbymu9cbDI
PNwh/LQ1wt3T+U8QkD6a1a2kJL5+mdg03Ny+8Ej8hUyuJOEx+sxLs+JX4TS1KRre
LzxN7Ak21dNMr8361lB+Uprgi9lOBNLO31TWPABtJhIzwBOhohSqstB9w6I2ZsPp
LqUp/p9BrWlw6+UfOqNDFILZ0CqL1CyFIyrkjutXrUshqniSc/u1VbTURlIcufZh
N3FtW1P6ktUq5ss4dqEh/QZfR1WxBYRMbKXXAN61XO8M2t44I+44DHi7jOs1q6jr
bfAli1ZGYam/5wjOJkvQ3xemP6SaDKnCKOnPHC45EAt2SEVGywARAQABtDdGcmVl
QlNEIFNlY3VyaXR5IE9mZmljZXIgPHNlY3VyaXR5LW9mZmljZXJARnJlZUJTRC5v
cmc+iQI9BBMBCgAnBQJSQYzmAhsDBQkIB+1BBQsJCAcDBRUKCQgLBRYCAwEAAh4B
AheAAAoJEO1n7NZdz2rnKEkQAJWJ2ctNY7vg2pqrabavfRZ4UOWrLi4AgOMnKrsm
4ozZ1mc7NVMRj0Ve8jLLHrySW5QaSmp8TcaI6twxKD8FfTOFYjBU35DUliyRlcbZ
msBk7aG561TPwaK0XnF47RyPZWKbHrO7WgiDveGx52AmBdm2VRyMBwnue3b5RlKn
NVMMSm4RLmrolkL0SAZNAWZGG4FqFtaxPRZo7LR9fEv/NydQN91b2cR8SnLc2F2y
iVc5mq/1f/t8dMBEbNx2+NoFaqP1O+1JeGYgmA/vE9fk1oDnn1pHej8OhoJJ9SsQ
EuaITvzKP9bU+5/o/UqYzAX+y8QbTthjhzpkRwjqwjuMVmp6/f/o8ivlnzD5K1lQ
OP/OJAki63h5LDUC/JHYkT/XN/bbgoSNveFSGV7cdocdSpCoBaZUJ9pfzZpqRxyp
RB57f7bKBCI36E42KJKJ3wo873MJeElAeo31tXi2pBvTN/Idmrl6sDCNPWwgsIOm
u4Xd2FG5lanbTsXHKebCDPh/KK51mWra5judWWFVxChsNSwRHJACBXVa2fPsahfz
4GAEVp0/VbC114m8CHrgm3nh/ZAyNjgJQN5jJ37gQjx2LFsAhW5WKK8U0Es5YXff
jLEiNOnmJ+q8IZj6Mj5lWXkbCvrqjfNTOKnzzZGws+6y4gRQkgkSY3BPp+mpCQPj
ORc/iEYEEBEKAAYFAlJBjuoACgkQFdaIBMps37Jv6QCeJjxijseWZzn/z7Cv3zSw
SFMAWPwAnig7ZgzoqKqwpvnwAXsQpGSnE8K5iQIcBBABCgAGBQJSQZHeAAoJEJLI
Q0VtpqZu8r8P/jHm+xi5yMz3DVj6emMazJdXLtnnGrKTNw5xL1X10a1Rvmo+sj4J
1gmL+Cy2hM6fl6r054E/BYt9GVGaIC4eYiF6DUzlcPWkwniDKfi1lNJzNIja4qha
nuGrK7EJtZXACRhUuNr2EzEm4dd3nXNaBQZv9FlIn79tk4vVho7wK7uiIT7nseUM
WDh7T0h4IVSs2LWdvP71WDx8acoyfspI35C2pKXB5GRWxnzN+wOl+V0kDn2fGd+n
L7ZEb/c/01h6AfyYJGetCXY1omkXSzgD9KKu/RqZuxL8TMMjNN6z4SAyMTthOHW0
lTK/5h55dJYSquBQwuEAX0Z8RT8S4Nva5LKGr25IpIJuP/TxaHIgdncrin4D0Ftu
G0JMOxjuzNdo2lOiMZ/lqZ75l61C68GuKAhU2Rn1toqc/NReL1yLhHoM1o3EvovA
fZmzX3sOugU2N8L+oiTnFFXezpY5Huup5KUkrX+C5EErBIVfvKjNyhhKFru6Jwy9
z3qiGhxNUFAAzftVYhNT1lDkMNqa4jPjOrcWS6+gwVfQAo9k0p5uwPNbIw59RA2q
/wwhZuRoai4nqN9WkgnwmWn0sS9XO87jwN3uvK0IF97MGPSXNcmAGXlxzF3GBFHY
f/bpagrvT4v+DE+gLpgfplo86oZbjDPsXGhVNu1iffC64R+vecw7r3DiiQIcBBAB
AgAGBQJSRaaeAAoJECZJ5ijF000F4jIP+weCFBeCkY7sprDa61kp10GNF4YujiZ1
QKQDgrQA9ipgv3pN+5ovC/ClzZm5baVGi+j5zWD/blG9YZAApM/kkpAIvCPYIuQ9
b+/crOUjuxyywuE2HSbaFuh66lW7Eox3NT8NNMEl6Zry6m8RDHqTZIpwJPBiCgEc
Nqr/dcbtE0XgzJj94NOWSuq1URpP4wIT9aAVBqdj+0KQDkDk6Sqvmf59Cjt8hihv
XAhOqcguKo8y262ABEO8kxwfqvRYECCE+eDEAPUEyOi/6uI0dQjQMytTWKogPIYg
4wQjpG+Pa7wl7AnxOTBp4WvoS0BuCgjSYaxnwVKHBMvxSCuDHBurLN0wqOaKSg9i
b6m/Vy2vfi9ak8crXJFZ6eLrIxt73gyiozfKEfvd6LBOJ9AeXstnubEs7ltNq9qK
yW4+vR9eABmn/wABxCsHNjW+mmi8xAVhhc1KqZC/D4vm6r8ZwrVAsmTADqcTr6A4
8J15FmIwcaQRQWQ4oytxTGA7rHRFVjrt3YIj/WP62byp8s59HOKJE+mA9q7ksAvn
ToLfrMiNA8/18Zm4CADKUny6GLzpuKgcYwTucqE/zBWUszI2NrJNtaKWafdXyEAw
gBxNIl1FiYF9+ntoMWlqDQROPZLYChRThJvRnNNsT+WwcuSHSFexLl14yrPJ3MBE
e7e+2Vpj9HR2iQIcBBABAgAGBQJSSFmrAAoJEDpFFvNRg85IHx8P/3exX3fATzNw
qfININlvYjxMzuGIHdV03w2pHrOllmPX28/UUHSQL9yRRNhzimm/9v3dvu5XHzjU
zCEozoAa74DnICe8wUfju8sGmN5FKolbvSz7VvcW4mAC5RY85zk+7luTg2wHZIId
girTDrgPSirtYkm+qpuX/k5LAkwmYtH6gghqv7rnYNKUChh+Ga+4yNbsdD7blWYr
52UwnfT3evbgI5GqBMZEbghmqNiR2fcII6trNnuawH646UcucwogxPtLxLuZnslE
pWiHQlAVvHlrCMoEkYqS+NRXOwZF04zTwRpLCUlj0PxlRInvTrEpBd1KVejbkNWK
K7wfyL/bF3rR9pMGWuDC32/9BfjtGgNDXJhQMDGntyAeQfiI3Ml5b5SA8bT5DsR/
FIQDg0UDe5jjeVIEGZKunmRT/IqOLFMpZoMHqNqWW8YrHlpN2o2c0/VqWSLzPKmo
cgqLwlkx5oqvn/F12xUzazGhFTFp6IXpqQVTlkSPdDsVJuidj9ZJLMRoKfFD9tIS
qTocGw3suLqp8u5KZf43THWspBi4tD4IoN5rlrLWtPnkteffyO62NZOOyg7rPUGJ
YlpgAMIDkXmsp58CyXqrL1/art0Ymcy5z8ea1eUCnq/ZJJxrj+HrXuwko4fXTewf
+nzSbJ2GEL/fMBkzAOKl9j5bOPAKwiD9iEYEEBECAAYFAlJKlYkACgkQ20zMSyow
1ymmfwCeLqsUDHBH8JnuaJjEUYqACGWZo88An0wcNy95yGdSJtgBFXNPZQJL2gSu
iF4EEBEIAAYFAlJNSA0ACgkQUYUJaGx+XoKvBAD/bUBqzL0oZtaF7WUDXchb4yki
f0ko+zh832R2Ad0KfygBAKNEUUKOnZFLJ8GZqAXmIWktgMiWFOMSxAXDLsyionoh
iQEcBBABCAAGBQJSRqY/AAoJEFF75hSlwe7HvwsIAJUnlLFMOBLvlBrRuxVeAO6X
8DhytdD5YlRzt866cXq6A/dw57O9qwyyDy3upJIGRy6hYlL18ngGZXv5djcw7Rch
QmvBJ9ROkmkCHLe3+fYn668nkxtgQJHWADd90MGFHkLDWa4Pbu5yJKqkTy3tqx2N
mBDEz317F6mMtyTP56QI8PVnh1p6w0McQIVctS3LOC3u4Wjbw7l3Hwof9Pl3u4BZ
L/gJz5KAozUa5TqNV4SLwtUqXBg7kipwfshXVuQekG9XfMC84GaFMqEKTExscHoF
VdSzrBKHn6VlEl1sdhcdS9aKSOsqMXB25xhBe0hOl4Ddw63j7b47XCqcyqAE5eiJ
AhwEEAEIAAYFAlJHAsIACgkQ8cUWs8g1l1OXkhAAvXUR237vXF/sZCZgG0748Dp0
eOhish/c4ODgW3JRehVWAyAlTAit/+xK6oI5xkQA+z3KO6+/bAtnDQgikAkykgpt
VeVW/6v4GGBarUTc/CTcofEpC3rsrEm1ZwPLyva3YuFFnYHATq/2Qi1a5PnSfj5C
O3fZrOgJTXsm6eNt21bH7RYF4DYi4kDNQHxtBOaEcUhcIkS1MsMz5F+/YeqOd12/
FrcIPDq8c0G3Ol+QsHFx+Y6b5Fp/HgkQem9Pzu7XkNcf7nj5UFJw+qx+BivaVYhJ
8Ugq3pXYkNkhYSy/AP/YYp7moOgpo2tY5e+fqho4pVlrHoPqWTNKJJrfYg2Mg/vP
e0nPxiCU3anmFXhfeZy87QLrA2BrO0I45StbU3uBhzT1dfNW2BIgxg+LqUZyTrZ2
qHq8TOPsnplu5Xn/UjEDQ5soTq1zDpslEjCX36R8wL3eai74HUTjstF4xq+kiXmK
bX7HhGKD9TILRjU+toOPXY0ffbS7FOUijLqOJqWEW1nBpoYoHbGfMHn2g2rNFGzz
wiLZgbL2HZsC+kDoog33s60b//A9E3yFIIiPtk668kQmiobs9Iel3RC+eOdHP8lD
gcMN/Rc/5B1S9a+wYC8VTf6KInUTq5YwC0veKbg1s+Ow7tB9ejqgxtHT7iFjR5NB
oOpVkI4UtHDpewRAW9SJAhwEEAEIAAYFAlJIEEoACgkQi+h5sChzHhzyGQ//e6o3
y+pnFTS4UWjUxFTKCtqJeqtS84jvcbXhXFGKfnXX15atLYkVoD2LcO5yvrFRNvY6
PjRkxJmLo2Lb/MpoDupRMfR1PxotFYuNYodmoHxVUun+1eIFQ5XUSiQSsIsjcUYd
EcOoZFzMfWIHZUOA1cGAtb8WL/Ql6cLcZT3fhPjEO253O8XcxKmU7sJ1sCCh3tyL
CY0dvLffA0jgxEXUYmf3DpC6p+MNkPU3EDk60OUzy4/C2HT26Lt4NR6TNcEZg6O/
lPvmD1/ATO9fAHCb4uEIkqR3VLdeg31EHND32gO/2HXc4Xp2dbV8qs+ts13w5L26
D+94PSsTwYF+85mfgu8nBhPOOn7lqWxIO/1MnOrEIVNu+K/fwh4lu8v/6PJYEYIn
LtYkDH3/LcKTsK6N/2KLbtROlHXeNKXyt0UliINteDlV9xYkn6TtzUcTrZ4Xa3HM
yN5mi+a0vptJFBPxyonMMHDAXRkLR8BexxUJqdk2aupIs0Y0Cet6Vk+8Q9bn04gl
pKjTjnnarJJsTlhrdmVobkDhbEGYB3KyrjZp2JmdYYzAbHXbdp3T7yJ4R3/7aQRg
XJIQgEHjmgFf0Wwzxs1JIN2URDZS8k2pyuI6M8ndPtJiYbwqy1Wcflz57aWYAOVf
b/G4IEsicSd1mHjYjsaMV/kp1kGrWihB/Dt79nWJAhwEEwECAAYFAlJJfnUACgkQ
cTWO1j93QHkxbA//SKb0a0wo5dTJpMp7pUL4pkCx1gR3YCZMyiJHAGnC0vHoTmxI
+6+YAU9DBFWjQk2uqqn+GW+3AxLEN08s2xYvNoxJHUB1bF43HI9lXscGmzfjDR62
cIptcWtggeMw6W66UStdFWUudwDM6WV8BTxg2LYD3upeY69GnN92HinMj90D6PMc
iQjfUdZxZAYLKEhic12dKHpWRC0PH9NIAS0EchARkZQmjyPc4trWevAyhmpqdw+H
gxh9EBH2I194SvIXVuU5Gyl/l3a/6ntEUZnitBijU3uUjRnkS5XkJfqy1MjdrJ0o
ymo8mlxOVFKV879ez10KBnE1BLe9ioylOeGQRNcyYehFE7GmzkZHbOk+Pqd1Meaf
AjNIgQxrqgh8pJ2F8Zd8pGDrYspjICGbbdR0WRNcoN4kckJruTWFQ1xr//Kfwp1b
kCQWRwYcRL/RNVVZuHGgvTiTa2wZNbWfZk3tF9cXaYHIqhYU8l7Lc1zK0Fhv2E1t
Phw4pu495RbGRAFOE14S+QmknIy+DgIkTzQ1s36vnI4SVw9zs0D4Np6d1mF1p4gi
VVrgTQnlF3poZNppCUK9Rih8s5kMnyuRruGm/Lod4jL3wcbBz4sxBkCgrc2pyU1M
SNAjM2V8c7cGLgPOqX0eVqgXJoTnlNItF07aIZyFEA6e7YeiTeXxPfU10Q2JAhwE
EAEIAAYFAlJNhQYACgkQILcN4T8dHk8Ifg/+JzwtYSnxoksuU5H4NIH0fchwRLfq
6VAscqaZYxz/KxH9suEaEGoXxMzeHO91OqPqnvMxkpOGEopUssHGOVXYwtw5XCEL
NCjD8PwSlSpDDe5+lYNjMIjtIXieiGt6ZeOO/0VlVXzRCHEtKoN96ikgEaxkPq/m
ZmfQK1PSEFcPWujBxlWjZl2DHv8eAvgFEfX1kyIoxV2nfrllDMaVFU1NvDB+zXdR
Mg1xyEDiCBsldfmHmhSjylunfJeyjpwye65rAVEO7XkmNBy2SloPIHRCiFLPeLku
oD3XaRFHWsRCOBcfwZy519DrvUUpn5InuXB36zu91Qwh8Bd+UJQIowsBoU9AH8n9
lPsUTCU7dl4UqtZxiaTHQB/3+J4o7+m12I5/Y5ftW8ToCRF5EGKoB4r0zhp2BLWG
e+z5B08HjR1NcQVG6Tv6FwSqpqf5m4yFaiEmUCFMfFMXxXGXSjI3JeJeImKYkxOw
aa8XbH65D9Lj7syDz4DSgZiPC+cUL7SNY73YjH0zfL66nGRzwo4zX9T2ermnvCN7
kw11wIfJVOlLG+D9sNpBiikpMPppW73i7g6VuFReSLgmdNCXCoVWQYeelb4E9ulD
KqFj63VChpRaBEv6fz5YFUKqUVAXy8iiptgY/hbF5V/KVlN9JVYOglQ8oq9sSzKG
lUWPldPvS8nzroSJAhwEEAECAAYFAlJNN0YACgkQTaEU5cSi5X+5JA/+L/Ilu9WT
FeVZmGTYkWEOllp7B0tNQKSCwN5L0zt917Vj81udXBKb9O3PKwjpc9rmUh5dRNOV
vAaIj9moU8NoOm1SYvnVvdyAxF5bajnN8u2cNlkdg+fzCiwwUyGPbCQ5elC/sM4k
FB/kw2c8e5uUHBjTmjh18MEqLQYpVaXxmQcica9EQnDvAXq6Ri2dZA4hpb/+qZXC
iS/fojYQmiigV2XugWFr4+rWfcOFACCKWfr8zP/3p+fs29i91tCUwaW49EA1W4qN
8/3NCugXwGaFZBsQdkZotP4WwPToD8KNaUqRvdiz83TAOL2RDZ7P8NmGNeAExeEm
t0+Z5MQeudfvTUCb7YMJKnPttuQ5rIgsLmDHwNariGMa7km0ZykkTgCw3r11efiv
/DwhR5ygZkb8KNVDIBxHGwhz2c4mbNsmRAas/wDboijT/GvA6NTaAaRhH4RpHej1
Bry1j+5mlhve3fKH5vQ+qfyks4yemjXq4meLf+0hj+SKoGcYXnfJUuOV6TB85FcF
EVncY2uh7bU5et9sdDv0HK0yNMGxBqF9ox0VkXVAg28Q10n49CGHHtHaDzTLGPru
hrQX9bTN2pgNticzZu0zDz2a/+rV/TGZ21pMlfPpmks9jcy0NYIn8twoMpRCqfJL
teKUP3kd0WdyT0Y8pB4X+aCzliVB5BmDxxKISgQQEQoACgUCUk3NEAMFAXgACgkQ
OfuToMruuMAgxQCfScnmgUcnT0J07KNsLKLMGW/6ffAAn2J50o8KV/wu8auCY1o6
EkjpiJt/uQINBFJBjOYBEAC2oNVWMm9p1UwMmKl7srU84rhC1wWzCIpgDBzQk6Q5
4zS0OKuis/zr2B0e2S4qvd8S5bSu0h3k54CNIIj00iKFfSvQDaInU+t2GGV6hXsI
XS7QPFNUCj9n0dKa5BahPPfOvTVdfJvulLMlvygYwsYW5DhfXI1FnD/R1oY3eNib
FFYsmP7++VRrO/O3wvbgl0kng8RndM1M46imFkOOfPEYxHbp30VvcxX2QJwEiki/
d7UjwgonKKCaU5SoZEKa6/oIwAMzQ1YQZEGQBSD5iM/sLblBHsO0UtLKiuknZBdR
rHYHCDwXZvX7nil9dtA7bydhGzPLT/JKKtiNqGtP4uIo6Ao3kctOfq8hv8pmCZo9
HgXVxUlg+OXEOJu7bqREiUcEhm5gn12JlKmb+6anhlfLlHzjU2OgZkGkgWx+biiv
Tacu7ESh/qSHLYrWX1Y7xT0CMbTlrM1CEMaKO/gYHgpd+cvENbnWrw9laY/HAESL
uZBuH93YPKrNUuchCJRYyTg44IHdUQdbNLSww5/00EdY4LyOGUdqT3PMHeo2wnrH
UNcgcLd/gPyjAUCrLrPYFWQpDKzubFfNyJO/JgiqtvnKdG2wsvYYx2fU14wXOIHn
XIxqT0EMwYbKZc5tjcaaDbaAXCdv5kHH6s0Aa3hHeeCT78LSN5cfIZA2ezrDCgLK
4wARAQABiQIlBBgBCgAPBQJSQYzmAhsMBQkIB+1BAAoJEO1n7NZdz2rn4csP/3gl
2XgdJvZsDo3WT5KdqO/LsLbEJLoak4wiQNoij4CjB7zmLFwl6qI0ziUGvw4YyoB7
bPRwyzgG88e502Y3/hx4GzHBSeZwKvWEmIRpCvh4BH+UML+nPqC+QKd0MpJ46+Dk
WKJcip/qxNeky7h65ptA7jjzmhtIFoXv/fM5R87dG1p3DSHMRy/9dqIJOgDx/AYU
2MaECaX87u5o+YAjet6XgcwQc3EiCoBEyJg2YU/ydWAmLs6rPqu/rn8T2yG01VCI
cGARcZl/+WyvEGxAmyAbZWP6CCQNk9fkB9PsoJXhSse0z51ffIpvCJbCiw/AqaDN
jFHmpfolnICv7vZmzn95vno0YQZQlgouZYl3znMJAdNmKsWwMi5mzzuhh2sNiYWv
ChaajFmpIt4EI1tRG78Fs7ieclbOvd/CWpY7os87usJp9Qrr+Z1g8m3gKmYN7ega
e10/9RUDXRlDupZgdPM0raF4Gbg0djRAwFdigATlscwIOc1hU3hBFXFTKOxcp+CM
7KLSNkdf738IeKEhdoKo4jgx0vBHHt1TCGgo63nX39aWHvXDSq+D2RW3rcDsS3Kv
vGP8g+kQZREN8P8SFdefSh99Yvz4EpwtinVNun2Al7cBv8XdU5a5p8yWk434iLhg
R6bnoCX8SLywMD4E3tynDujld/4cAbvQJ1xEOftW
=Ba2T
-----END PGP PUBLIC KEY BLOCK-----
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-secteam-secretary"></a>D.1.2. Security Team Secretary <code class="email">&lt;<a xmlns="" class="email" href="mailto:secteam-secretary@FreeBSD.org">secteam-secretary@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   4096R/3CB2EAFCC3D6C666 2013-09-24 [expires: 2018-01-01]
      Key fingerprint = FA97 AA04 4DF9 0969 D5EF  4ADA 3CB2 EAFC C3D6 C666
uid                          FreeBSD Security Team Secretary &lt;secteam-secretary@FreeBSD.org&gt;
sub   4096R/509B26612335EB65 2013-09-24 [expires: 2018-01-01]
</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFJBjIIBEADadvvpXSkdnBOGV2xcsFwBBcSwAdryWuLk6v2VxjwsPcY6Lwqz
NAZr2Ox1BaSgX7106Psa6v9si8nxoOtMc5BCM/ps/fmedFU48YtqOTGF+utxvACg
Ou6SKintEMUa1eoPcww1jzDZ3mxx49bQaNAJLjVxeiAZoYHe9loTe1fxsprCONnx
Era1hrI+YA2KjMWDORcwa0sSXRCI3V+b4PUnbMUOQa3fFVUriM4QjjUBU6hW0Ub0
GDPcZq45nd7PoPPtb3/EauaYfk/zdx8Xt0OmuKTi9/vMkvB09AEUyShbyzoebaKH
dKtXlzyAPCZoH9dihFM67rhUg4umckFLc8vc5P2tNblwYrnhgL8ymUaOIjZB/fOi
Z2OZLVCiDeHNjjK3VZ6jLAiPyiYTG1Hrk9E8NaZDeUgIb9X/K06JXVBQIKNSGfX5
LLp/j2wr+Kbg3QtEBkcStlUGBOzfcbhKpE2nySnuIyspfDb/6JbhD/qYqMJerX0T
d5ekkJ1tXtM6aX2iTXgZ8cqv+5gyouEF5akrkLi1ySgZetQfjm+zhy/1x/NjGd0u
35QbUye7sTbfSimwzCXKIIpy06zIO4iNA0P/vgG4v7ydjMvXsW8FRULSecDT19Gq
xOZGfSPVrSRSAhgNxHzwUivxJbr05NNdwhJSbx9m57naXouLfvVPAMeJYwARAQAB
tD9GcmVlQlNEIFNlY3VyaXR5IFRlYW0gU2VjcmV0YXJ5IDxzZWN0ZWFtLXNlY3Jl
dGFyeUBGcmVlQlNELm9yZz6JAj0EEwEKACcFAlJBjIICGwMFCQgH7b8FCwkIBwMF
FQoJCAsFFgIDAQACHgECF4AACgkQPLLq/MPWxmYt8Q/+IfFhPIbqglh4rwFzgR58
8YonMZcq+5Op3qiUBh6tE6yRz6VEqBqTahyCQGIk4xGzrHSIOIj2e6gEk5a4zYtf
0jNJprk3pxu2Og05USJmd8lPSbyBF20FVm5W0dhWMKHagL5dGS8zInlwRYxr6mMi
UuJjj+2Hm3PoUNGAwL1SH2BVOeAeudtzu80vAlbRlujYVmjIDn/dWVjqnWgEBNHT
SD+WpA3yW4mBJyxWil0sAJQbTlt5EM/XPORVZ2tvETxJIrXea/Sda9mFwvJ02pJn
gHi6TGyOYydmbu0ob9Ma9AvUrRlxv8V9eN7eZUtvNa6n+IT8WEJj2+snJlO4SpHL
D3Z+l7zwfYeM8FOdzGZdVFgxeyBU7t3AnPjYfHmoneqgLcCO0nJDKq/98ohz5T9i
FbNR/vtLaEiYFBeX3C9Ee96pP6BU26BXhw+dRSnFeyIhD+4g+/AZ0XJ1CPF19D+5
z0ojanJkh7lZn4JL+V6+mF1eOExiGrydIiiSXDA/p5FhavMMu8Om4S0sn5iaQ2aX
wRUv2SUKhbHDqhIILLeQKlB3X26obx1Vg0nRhy47qNQn/xc9oSWLAQSVOgsShQeC
6DSzrKIBdKB3V8uWOmuM7lWAoCP53bDRW+XIOu9wfpSaXN2VTyqzU7zpTq5BHX1a
+XRw8KNHZGnCSAOCofZWnKyJAhwEEAEKAAYFAlJBjYgACgkQ7Wfs1l3PaudFcQ//
UiM7EXsIHLwHxez32TzA/0uNMPWFHQN4Ezzg4PKB6Cc4amva5qbgbhoeCPuP+XPI
2ELfRviAHbmyZ/zIgqplDC4nmyisMoKlpK0Yo1w4qbix9EVVZr2ztL8F43qN3Xe/
NUSMTBgt/Jio7l5lYyhuVS3JQCfDlYGbq6NPk0xfYoYOMOZASoPhEquCxM5D4D0Z
3J3CBeAjyVzdF37HUw9rVQe2IRlxGn1YAyMb5EpR2Ij612GFad8c/5ikzDh5q6JD
tB9ApdvLkr0czTBucDljChSpFJ7ENPjAgZuH9N5Dmx2rRUj2mdBmi7HKqxAN9Kdm
+pg/6vZ3vM18rBlXmw1poQdc3srAL+6MHmIfHHrq49oksLyHwyeL8T6BO4d4nTZU
xObP7PLAeWrdrd1Sb3EWlZJ9HB/m2UL9w9Om1c6cb6X2DoCzQAStVypAE6SQCMBK
pxkWRj90L41BS62snja+BlZTELuuLTHULRkWqS3fFkUxlDSMUn96QksWlwZLcxCv
hKxJXOX+pHAiUuMIImaPQ0TBDBWWf5d8zOQlNPsyhSGFR5Skwzlg+m9ErQ+jy7Uz
UmNCNztlYgRKeckXuvr73seoKoNXHrn7vWQ6qB1IRURj2bfphsqlmYuITmcBhfFS
Dw0fdYXSDXrmG9wad98g49g4HwCJhPAl0j55f93gHLGIRgQQEQoABgUCUkGO5gAK
CRAV1ogEymzfsol4AKCI7rOnptuoXgwYx2Z9HkUKuugSRwCgkyW9pxa5EovDijEF
j1jG/cdxTOaJAhwEEAEKAAYFAlJBkdUACgkQkshDRW2mpm6aLxAAzpWNHMZVFt7e
wQnCJnf/FMLTjduGTEhVFnVCkEtI+YKarveE6pclqKJfSRFDxruZ6PHGG2CDfMig
J6mdDdmXCkN//TbIlRGowVgsxpIRg4jQVh4S3D0Nz50h+Zb7CHbjp6WAPVoWZz7b
Myp+pN7qx/miJJwEiw22Eet4Hjj1QymKwjWyY146V928BV/wDBS/xiwfg3xIVPZr
RqtiOGN/AGpMGeGQKKplkeITY7AXiAd+mL4H/eNf8b+o0Ce2Z9oSxSsGPF3DzMTL
kIX7sWD3rjy3Xe2BM20stIDrJS2a1fbnIwFvqszS3Z3sF5bLc6W0iyPJdtbQ0pt6
nekRl9nboAdUs0R+n/6QNYBkj4AcSh3jpZKe82NwnD/6WyzHWtC0SDRTVkcQWXPW
EaWLmv8VqfzdBiw6aLcxlmXQSAr0cUA6zo6/bMQZosKwiCfGl3tR4Pbwgvbyjoii
pF+ZXfz7rWWUqZ2C79hy3YTytwIlVMOnp3MyOV+9ubOsFhLuRDxAksIMaRTsO7ii
5J4z1d+jzWMW4g1B50CoQ8W+FyAfVp/8qGwzvGN7wxN8P1iR+DZjtpCt7J+Xb9Pt
L+lRKSO/aOgOfDksyt2fEKY4yEWdzq9A3VkRo1HCdUQY6SJ/qt7IyQHumxvL90F6
vbB3edrR/fVGeJsz4vE10hzy7kI1QT65Ag0EUkGMggEQAMTsvyKEdUsgEehymKz9
MRn9wiwfHEX5CLmpJAvnX9MITgcsTX8MKiPyrTBnyY/QzA0rh+yyhzkY/y55yxMP
INdpL5xgJCS1SHyJK85HOdN77uKDCkwHfphlWYGlBPuaXyxkiWYXJTVUggSjuO4b
jeKwDqFl/4Xc0XeZNgWVjqHtKF91wwgdXXgAzUL1/nwN3IglxiIR31y10GQdOQEG
4T3ufx6gv73+qbFc0RzgZUQiJykQ3tZK1+Gw6aDirgjQYOc90o2Je0RJHjdObyZQ
aQc4PTZ2DC7CElFEt2EHJCXLyP/taeLq+IdpKe6sLPckwakqtbqwunWVoPTbgkxo
Q1eCMzgrkRu23B2TJaY9zbZAFP3cpL65vQAVJVQISqJvDL8K5hvAWJ3vi92qfBcz
jqydAcbhjkzJUI9t44v63cIXTI0+QyqTQhqkvEJhHZkbb8MYoimebDVxFVtQ3I1p
EynOYPfn4IMvaItLFbkgZpR/zjHYau5snErR9NC4AOIfNFpxM+fFFJQ7W88JP3cG
JLl9dcRGERq28PDU/CTDH9rlk1kZ0xzpRDkJijKDnFIxT2ajijVOZx7l2jPL1njx
s4xa1jK0/39kh6XnrCgK49WQsJM5IflVR2JAi8BLi2q/e0NQG2pgn0QL695Sqbbp
NbrrJGRcRJD9sUkQTpMsLlQTABEBAAGJAiUEGAEKAA8FAlJBjIICGwwFCQgH7b8A
CgkQPLLq/MPWxmZAew//et/LToMVR3q6/qP/pf9ob/QwQ3MgejkC0DY3Md7JBRl/
6GWfySYnO0Vm5IoJofcv1hbhc/y3OeZTvK4s+BOQsNokYe34mCxZG4dypNaepkQi
x0mLujeU/n4Y0p0LTLjhGLVdKina2dM9HmllgYr4KumT58g6eGjxs2oZD6z5ty0L
viU5tx3lz3o0c3I9soH2RN2zNHVjXNW0EvWJwFLxFeLJbk/Y3UY1/kXCtcyMzLua
S5L5012eUOEvaZr5iYDKjy+wOxY4SUCNYf0GPmSej8CBbwHOF2XCwXytSzm6hNb3
5TRgCGbOSFTIy9MxfV5lpddQcdzijmuFSl8LySkL2yuJxjlI7uKNDN+NlfODIPMg
rdH0hBSyKci6Uz7Nz/Up3qdE+aISq68k+Hk1fiKJG1UcBRJidheds29FCzj3hoyZ
VDmf6OL60hL0YI1/4GjIkJyetlPzjMp8J7K3GweOUkfHcFihYZlbiMe7z+oIWEc7
0fNScrAGF/+JN3L6mjXKB6Pv+ER5ztzpfuhBJ/j7AV5BaNMmDXAVO4aTphWl7Dje
iecENuGTpkK8Ugv5cMJc4QJaWDkj/9sACc0EFgigPo68KjegvKg5R8jUPwb8E7T6
lIjBtlclVhaUrE2uLx/yTz2Apbm+GAmD8M0dQ7IYsOFlZNBW9zjgLLCtWDW+p1A=
=5gJ7
-----END PGP PUBLIC KEY BLOCK-----
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-core-secretary"></a>D.1.3. Le secrétaire de l'équipe de base <code class="email">&lt;<a xmlns="" class="email" href="mailto:core-secretary@FreeBSD.org">core-secretary@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   rsa4096/36A7C05FE1ECF9BB 2014-07-09 [expires: 2016-07-08]
      Key fingerprint = C07B F5E3 10AE 64BF 6120  B0F6 36A7 C05F E1EC F9BB
uid                          Core Secretary &lt;core-secretary@freebsd.org&gt;
uid                          FreeBSD Core Team Secretary &lt;core-secretary@freebsd.org&gt;
sub   rsa4096/7B5150C8D7CE5D02 2014-07-09 [expires: 2016-07-08]

</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBFO9HvEBEADRfuWeoNUwib7ZjNmhg0Kt1kjiGEEosf3O2yMDfYuAXt4De6qK
S4KECe5+vZH2T8g+zmNLl/7JxdqHiWj9cnoZ6T3bqKh7w7pW7QzC/Q2k4mZsQkGl
xzhStHvaHSPKw5808TME0d3ewAfs0dQkDuA0eari0HipCbOVzqHUMTIROr/syPXs
jHxb2bj0KVzzq7wgy+vF4Cv25VzaAPBVgPv3HAoO/gLOr4SnXqBCw2vgprWx335t
QX1JslWlsUDmwwq40q4+eMnSFPZ0ing1DgfhMb+Dnrl6Rbxhb0pwPhbwubppUKfe
W6owOrTuUbATVoAhsfNySmUWQKc2p9w/8uFV/jJj9HOSgIMKrNONvqekPrjWOQn9
/lcQtGhldWmtPbMogOfaQisBEn1XjMZ3VEOagQxIe/6LDjU7GGoYvSdwf8Z0wXUY
/qDntPwudjJA4wQid1Tzf53gpUjr0tYq7aclpiBGs3F5EOs4HMXq5/xlwRGtBDHY
i9RNAlbRSfSD2s1nGsfsImPowlpjtLa+3PqYs/cRLGDu51DsgV/p/CqtAyebG+9O
WsF0Ydt4Q62jEuU8HY7SOj+AuKJVdUkyAZGk5vkPvsKzjdZUqRslurme7d3LqKai
FjBGj8UyId/IomDCjth3baGc/Y4e+JKyx1XDXgFY2HoQ2KzEoANrizjy5QARAQAB
tDhGcmVlQlNEIENvcmUgVGVhbSBTZWNyZXRhcnkgPGNvcmUtc2VjcmV0YXJ5QGZy
ZWVic2Qub3JnPokCPQQTAQoAJwUCU70sxwIbAwUJAeEzgAULCQgHAwUVCgkICwUW
AwIBAAIeAQIXgAAKCRA2p8Bf4ez5u2R4D/4o7Qb/hFz3XFRiBLtcsr+v5CS1fYgk
VN2Xp40dOTtt+Xo257+1oQDsS6McNXT7XSAFOTrFW+XID8GBnY6+ZpRYzontMCJd
25qGHzGBs2aFA/ROfhdvpOkhngxsYG89+IOUjS6SRNqG85Iro6eI7ZLi8sznEhZd
lH1jEWHiJhEubOvcedWS1zSHpOZwNIpyQV5d2O3/EhAOJRWgy8VmegeQLGg0zqdL
r9MKfg8/OwNQlysjrsA5MRnZMZAm6kEO381zYg8+Rwe+HtspzL/1cu4M7k5aBw0m
a8nShgXTqfgX+pwW2zBBL8c42p5D3Jh4Oe7KQ1KEvysZJGWO5ZjR9p4KLu49X2Yl
9cuD3Ii6+Nz9/cUlEGaMm4I8N3jpSNH+GCj7k1Wa9KWMh2ZxmVO5AML8h4g+A7aT
qNasKpG4XLXpcZ38sOw2/h6G2kwnrCel1ViCe0Z4pxeW95bxREqs6pkkym7Wz4sy
F5Mkba0uwFhWg5zBANBteXfOS/WU3fLEWeHXvZu9t44vyvP84qqZfNzBhz9puDVi
kPAY4uiZK4BTDkYZZr3YNKIIwEQ/rjcJSDKZKGJ6dsHKBSi0oGxFZpCE+YMH/Zqq
hTQHgXbMKWLgJ7xxRYJS/apvgnTd1Dc7zc5J7IT7XCdML0+Qj8eD48DwyMu+uAAq
/048iyhu/R8RP4kCHAQQAQoABgUCU70tAgAKCRADb2ye5/Oevxk0D/4wEJarg3nO
/B8ks+s7DadvpmNZrNSGeeR4qSEeZlH1ye30xD1HDE+ekJXC97Td4mKWKTrbRVEX
F1y1aBCe8tL5BbsRDmwzKwpv3OqQ1rhowlAKZD8hdBEyEn15ciaoRisFKpWAv+mm
mZeTnG5sYOo9BF1v36WrX+9AOvy7yduVcZE3kLNoivS+8bXe5ULj6uMoyo/eC5uk
q35f1p1qBzrplMc+vs7z8Npc7YFP2ORhR/mVg0rYFLkPVdPV3uFkrkb/Z2SVu02B
IFWEeJojEBEbFNfziHUaQ8Z7ZdtkZ9OIS1Z0Wuy64xjgORWVcTlRe4AwZKVC8DJs
Fs9Gk9gnsPmfLgM46pcKaac445w9uUQzKLxdCBKLPxMV/JHBRrMghyahevwnpsuB
Ok+ldsCNqjFaeAnVAmv3YtTbZ1JdorupeFa65JyjQon7l1JwWD67P7N0xrn1gxJ+
9uGUeHwGAvDF3IRr5ECISKAW92NfLYuNpyv6re/bt6A+FxaSA+E8P7Z+I4Gl5l37
czz+9ciYipiusweDuxectOlEnh13/WKXuUb68v6ZzbwGjkW8wunavhAN9fWxqqgF
W0tKtmpAOHFzmNOw5WGPfGdKOzc+g5ZqRt3CREVHj/uizNJsHzfadkTqYum+kQTa
y4tSgGH0S3EAiHGsEy4YZ4M/nxdIyakmsIkBHAQQAQIABgUCU701xQAKCRBNWP3N
LKSXdmOGCADEySzz4Q6wKsx/gLiAyhYNbEJbiv1MirxhjIYGP9MqNpxxI1+Q3kuj
01K6ELIMuAhehoQOgU4AssJQxu7q78+hz2O7s+V0Syl+pvEOl2zUCgAmOYfle+BQ
75ZEEiINBuh6SOXBVLhfNp90FZ55KUSW4EeyoT+A4nRGHRgCTEfZ5WHi3lGlaLQd
Z9viLfNKA/DxrLWww+joTPIEhc3eU1mgDrcmfxo/L95EmTyUa5BtE0WuLwQEaY8H
J3eBgA9Y130ubuzzY4jGl4SCNedMzeIroHw2Bogd3V+E5aFtGd8gZUjXXr8rM6yX
PpttP2Hc8Bie2YXI2NffqwVqpL0dxo3uiQIcBBABAgAGBQJTvTYRAAoJEMATMJ1t
fkRccM4P/Rbg0W6l4KPFUvyKcUE6odRwoXExRGHdG9qW8Vf6xtW5eXUX/AZoCnXD
f3yWWttxgzN1e8iNRh0aYfuNSFTuHcHut/xw6GZ1yqASbuDmGWQ6uTb0yHYQcwQ5
ioaRaZZo5cpnSs0qZUpnrSzdUzyVmlKsD+1ut0/Z8yM8WGRyhplWX0dfXKnUUxJG
yh4GQc2dQon1vrsiuDTD2hr3EVues7le4WU+csegZTGPgPjhTSH6ZNFdDs4Y5KPi
unjXx+X6avPKPSJCnC9YlPMkI0RcokVLJW+K3+4QnbqU8m2MpZWVaaOo5s9PCx1I
208EHQ77A7EAFYNFrPZmtSV5X3BhU2rYNoRu0fpsNqJC34Oi7JdZdplPoO7FHRAC
AyQJyv8KUG8VVzK7m6Kt/Okq7LBc8RuvLQpUHSv1Z19fQvFgTegM5Pcpp3/ful/H
QIIc7XRElM57e+t8kbsoRpOlaKa3Okl3KisXdksWB4Fu6XdVArY/jIIQGs6dCpYa
jhRZcjkjHUAPvY/OqD2mBSwj0YwP0RoMVvFHMP1cgB3gjaB37A+DJeiKEXTWzGe1
fKC1TxCcOUZsrcqXnUyy23lKV9CXC7za3eB23dPIfWzJnD9BsVgYsemRVJx8r3Sv
QIL5zjKVDRAuV3M/HbCtSOgO68MExC0TFEl/8LPIMW8oVCY4+iqliQIcBBABCgAG
BQJTvUdSAAoJEO1n7NZdz2rnXxsP/R8WHku1nxjELqdM9M72JLD8UBlaAIwLStDy
hnTvLa0GO6eN0r2eJ1+tG8mKB+PZKOvNt8eZcSO/kjUvTIBILt7fAtN1BhsWpjQz
n+tuVWs4GVoPQssM4N09AYUzx8ni4byADY6n9l4zof2HsPsjXvuw/bzYXctKTQxg
gD3nswtLGY3q6unYewIChyaG8DStihFLcXIhXbwc6EOqdPN3VWwNInG/602UTO2L
eXoEM+tTaXkE51P5otACVH37AW0Vqqh1GxklYlMYLrKKn/YIBRvLVS5G+95iKs3g
MJhnaeFND2s9dmOTXyKyfTUffr/XTL/PVJSCbdqwiuXZQp8J77MtYyJn1262H8ko
59OlPtqvpBNuywco0/F8BOFvSTw5sS8CmU0EHvyunKaofS3mxCFd2B0DzX89+AoY
ZY7CKU8OYt/VqhsfsL0C+DL4+XschBOUoTg6HrqG4F69+gerkK4Ps2984vOeTXe3
IqlYN/Bn92m9rGy9PKkpqG5C6w5X58BgvfeWTAkM4X32rZHKOmyYSCdRJQw7MGSR
24OaWKPmgKvMaH8MQaJx9oSaAgF1y1892+ykVI9ntCVwywkmxNg1lfMuVFM4Vh9j
+C7OngnbQbhYtbFG90z9zfoMln39z8KT2yDP4A7Hklw0xmmT6t8KduGD2tfmaW4+
oz9attTyiQIcBBABCgAGBQJTvUdkAAoJEJLIQ0VtpqZuLNQP/RazXTtk1mixmLfu
nrScgh/1Gtb6XPVDTP5SGb/8HVdY1a+dDBClUIAFbEAUBIcBO4/NVlW9un4IHyri
xdD/ijE/Cr/BMLnSFU5EmHKn8yOc3Bv6eTTRbJ8EYru0Cj5MdSIAoq8JKF8Lbxba
hBFw9ZSIpREPGlxnKI3TEuHJQreSZR07/GPk50suTK2CXxzEsk4VZesSTnwt/1m+
hrdtyNke3+wy8R0Use+KKgmTzpQ9phc8wq3uhHFzLJ5HbE21VRHgFd5+osZuSDuH
jw5o/zU5o0Bq9DDY3TWXPD9lgqKQ2PgH5DG6od9gjpjJdvXpXpck08HJDu2V+u7M
zW5lsnthDsW39YVLRD4ZwZJQaw+0wBuGDDxV+8x4fYhYJnXD8ZtUHCQ56FlcMyzL
m00WRLNxBSJjRvH12geg5xK3JWZ8V6Ce+XhvIAduDkajuUKQoWvTMzYaviqQhfV1
zXNNt5rxDNT+jMiwnAtDeCTZPMfGvzOPw9sYBz5RUa4liVPrGiEW/snAhcMB9JDK
jMAsKHvJwIvB9QrRC9sz6JIgEqv+jlsdkslEVU2AALlcJ3QuXlW0j9Z26q0sNGt8
5FVqhc4DOyXtZhKR5Ru8Lyc3swYRi2ofu9Roycq3L0swcMoGnOikRbj2PuuRdQiU
ozJ7mT6JmNF8ynlx/1+uzniVneEliQIcBBIBCAAGBQJUGDc+AAoJEOqwPFi/3EeP
EpUP/i2p7BLtyrujFmwr6wxru8G2HBWySFeRZ7YC5iH1ZIiGPPi7nuinWEv6FaW6
dW8fzrwmJy0iUpstKM8CUdR10PZ66Un6A9yfj9MuYSWBDQwzkd3wSJ2+HPLeaTsc
hb545CYnIJBaUAWyfufyoeB2+u3DNQd4oHv5ceI781D6J0h9MUz1bNgV2w3prubD
9o8ycaUvXqHrADqDZiUA1zblm19AmbJIJbgeUaXD8iwkyk2hRHScVe9aLzd2J4TX
PIQt9Dj/VnW3TLvTtMPEls1SM+pQ9xYF3IBz5BWbrMuk3o3mpsIijs+vfjJdv77Q
UeyT0Ur0fJ5xa7zWxCs5AMpCFDdLGRW1jzFYipJBBhDVkylIjpr3eoIIU/RxVC6f
5dTaW8GeaspllyJT8BKe54R9u/uf7QPgIkuXdIdaZ4qbbftLxvyBJk6A2gSM/sLY
qeoo+zRxKi+lMZ/Zw8MUZ/ON+yE1ccQJAk1GDqAhUs5f7zCPU6xBLFeXhz9d6bFP
BGWZ3dy7mZaHgALDGqSd240hIoknwzqHaWZK5lWTmzIVUUQPV1Vn68stcaVsuaFd
tnGHv/JMvAj1F9ZlDDRwaPx0ATTXQbBI6JlvDQ8u2tTKIYEswtez/enkjX1dALFl
tV5FNartIWGiHWYxkGVRlh/QtAb0NsBU4/5uZkWpWzG0GtOniQI9BBMBCgAnAhsD
BQsJCAcDBRUKCQgLBRYDAgEAAh4BAheABQJVntrCBQkDwu9RAAoJEDanwF/h7Pm7
aw8QAIJadQ8+oJgvc9yMS+kW+EzkdmGQUDk/7Ozkkj8gk3Fyh2gTI6AenQaDm3QD
/qvShJts/JX9+zVREwGU7WAvXm2EGIB2OB6pVQOGhNc0V8BihykQ27BtetvMivgp
KTYCwdh/CWdF3hAGaPFcc/GkrQThTBZARISUC5zce/FvCSugvRsMdGYjhaCA/LYp
YBGRzXZIrfCaT19tvfW89WdFamT5dVcMVs0uVHw1qYzz9EyH8cj3KwVanZ/KF7zA
pENdsmx2/+EPmVL/oGqctcx5vXtzMYTdr54aRay67oDbtWZNqYoIksShaw5rsNkI
OnqMXCqQkDd0lf46CmqAqqwH0bNlnxTpm8cEcfGIee1yNUc0BGs7qgmtm/7+96My
WPKHixQR48OPiTAdT6/n8msm/+MeL8aRWvhLUkhi3zDWoilScPW121JbE0QytpWP
v+2QCRtvnJritKrzyfjO2CRHOoe5zOY/yRd91CVBde7Tpd0UdQP3vw3B0MznahYQ
+qdt1bMD6NLgADNDP0B2yWMnUS6xku6iBANwZcdLSav4gE7gVFbePKNJnGW6rOIp
ljl0Ivm//KVufLPNX0DAokfvHIvDNNuVuk82UpvVSVxrIaig4HhbWDOnYiDhtE0Q
CDNP7v5e9u/iC3VwBVI73iOsDpPGqEFp1E6UZF6Uvfcxmsp5tCtDb3JlIFNlY3Jl
dGFyeSA8Y29yZS1zZWNyZXRhcnlAZnJlZWJzZC5vcmc+iQIcBBABCgAGBQJTvR9B
AAoJEANvbJ7n856/QGAQANf7Qn3AvTB1Co9oCtKobbtLxOx/FFw6/jnfurJxQ2Y1
8N9zTNJ1KCzI8pYbanicWQFqUfC1wu6FrnSlNGQvW464NqcERElbFE41pvqX+Tb6
/dOX07mMBZYK8wgLDcHEjl4i7NHurx1AKA2ro/5utRvfIqmhPxcHwhNiP1He4MD1
NgkyrxmRWtO4VM99mhXdm+pl/8XwuFJrdg4v36pEws6tYJgPwDc86/XrmeJT6GOC
RFREdwXn6osSvvVYnx4Pyto/xTG5Fm4sa7S4bxgvvSzp2/L+eO4JpOGXuhiIGhfE
wISta1yf14GKTa4a0Qd+gquml4yd1DBybNoa0zcz/sJOBULe/CLKzSs5IuGkfdH0
os1WEjdqQ7JPct3Yizb7Iw/j1YfvDmnM+tt3EMU1DJ1ttY9+XB6pZvtjSHNApaDP
fSeizstpoLle3kvECBJyEIr5u/hL72dYEZtFiYFlHcvWIq6KqWJlIJrOa7vG7r58
6qstiG270tCeaVOfZT5grKNcDf4vYEoxL+2NKcHVA0rogRWPMwSWZbWEAaIilK/6
AVzc8xmefZJEHHxH7PprcPsH3MPpOwmWjfheHBKfIfEu1UqWAD+cRQmE+jEz1vc6
DzVUfA4c27j9/GXT9/NQsBTamC6rT3YUZKWlFulCC3ncRwf9ZTGSsiT5qCuV1ECn
iQIcBBABCgAGBQJTvUdSAAoJEO1n7NZdz2rnVCcP/3zh4y7MrLnV536rB0tDOM+l
sP3UYDmclWZmTENZ+r0ESM4YJzDjKO6ltXhh+MdYqDddY3vqLnsKTNYuMjKiu6jd
0ETy4ThzHxVhcyrgl1yWxyaSsdi5gMOnwNVClHfOD5gaOF0jdRJnLTLMueAEM3fy
NzSUjBOHJpk+RcIV3r/u8LvPFV2qwLWa937vYwfLRJ9jaQur5MnEVOWBz7CB0g1F
06JAcLv16FyWiLCOBxXZJd974lKXHd2yEMkSlF3Of1qX5FI6FK3HQU+c6eJcrWc5
4++zvgWHZTM3SwY9g5rl57Wz9Vpi13Ev6ArIIIEQ9P1ViwK4zyW78rFoM09juqHk
N4uUCWuk0f57XCFkrDA/n6YCSfAxSYXc1I+MKpAm/6yBYiBNpyS3Jz5HGO2S0QGs
PsBcUHGEmO6k/Z6boJLwaCAGx2dSQ84R4DQeFAd3NjBPab2xTNlitcOi+xnidCJZ
oDWQqx5dSLwLeORsw25ikOWroUS1hqfta2HDnnou4zuyppov0Q+50JGFJIril8sv
oUmLfuSk3XUrlxPHgL57Wp5K8NOIU4u/DStX4UaRuHQ+Uu9GV+c6rr3F46+MooqX
ISAw5cm/kDMwuOfQ4GOo8J/ADUfLQa6a/JnWFg3hb/rgt/lHJxjZliOZy8G08HyB
ddNfKCTBauqEyPYWTHzgiQIcBBABCgAGBQJTvUdkAAoJEJLIQ0VtpqZu/g0QAMXE
q8sNraENb3zO8wisdE0UZXOGuQduXDSrwpe26L9mCR/usjeWeGqbG9b6mP+fAwXx
m/BovdkF3bWguo1GCzztEHy+aTB4voxI6lEnyDKB8GG3mlkVjNAbDjVi/jCZfe6T
bJ6xDhX7633ees1An8tvizMHRr+z8zQ3xF4MNjlxLzawPE7/As5uHaT6Q3NhGTGy
G1oGsVlO8pYp97p2E/d44m6IlY5XEzO2A2fIq+0N4dcy8omTX8P4eUZFlUezRbbZ
tNP8Av77hESXO79gpmQir9fC5/qMBgJN+3iB9O+VcB0SeLm0TvUWtSFULqEdDkKA
rLOgZf0HNnsu7/rb1tR9zqSYN8gsF3MvF0RNHUdbyEh189LZTmapwSxcaoUYPcoO
Bfwo0MqMuEuyCkMWSD53BvsaSbcs2OWKYAp+oluM0TrnLup37O2G/EbxmMRHZVVy
uX60pIQDXO4DjLo9tqbM6OUNCG+1tKEX7Bs9GIzUL2mxZ072qE8x1A+eidSzy5Tx
2nE7DOurziiuv8G3JPFDtLkUVtPx9gqyyG3wmfThkMCl1jnutYDjetpeC8LcI5S9
mFE8BXBka7qEEY19GI/1LJcfMI8lMn16OITYv4/cwqWPMbjSMg6JpWBCFdsxRmIW
iggKodt6LfnuEciChejk8ewTf6/47z7aVhdBkYaOiQIcBBIBCAAGBQJUGDc+AAoJ
EOqwPFi/3EePCM0QAKFrkt0wW+am/O8ZzIejSCY+htWilGAIa6REk5gv00k2dKPC
Wf5rNPAXeQRAX4qItmd35hz7czElm2EVbrylDD+F9uN8wbkCMLdIe88caWfoj12l
JACAd0NiBSwJPgrajvER92fr173I31cKT6hwXP6bgjU3J4HICc1h7h5j7g+/YSeH
UacPSiY4MuXAQao6e2BtFI77LOwFvIFFdCEMdZDwoH+7lIF9I+Krm7ojMF5fauaS
K4e3kL029QugIFYlgb7HeDGLlonBSn40YXPenafAin0lNGWMWVv3SKN7tweNkKEh
MVoVReropjYpRg+khKaMumwJ9bdGkYP8jq7DwCKXy/J2rfCUzsyVX5Ga7keT8Ztn
y4RO6YqFtTryraiSPrxDZQ0Gt6kc1m3u+4vh93qJk+foUDRSLWfWjmX9aRf+7+4z
dsYBOrpt3tab6FqXrW7IcI+p8PCyBW4c/WHkU3YWreEba21BXGiMDoxfhQ9OyvSH
t6G8kgO9+k8sRY/78oGYxR4Aait8/Y54DmHkyZKSewu96So0+TDmcbkeatatDhra
sbjfQLWx8363tnQvmhWpw/bpWGmDQDLVTHn9OcXlckGU1fiUM7721g4s2UdijTMp
yYWfsLTaxOujHyxkwkBBtGV3DCas5Ep2KPMfSOgf3YVtPQH9IaotJSw/A6FdiQI9
BBMBCgAnBQJTvR7xAhsDBQkB4TOABQsJCAcDBRUKCQgLBRYDAgEAAh4BAheAAAoJ
EDanwF/h7Pm7QvMQAKE3pM3e7LrDH6+xsdafxb/RxnVwUI6FaoN3dIZRjIIh7Dyd
6WypD43+f4c4AeIX+b78RuCuu+oZMMkHk4/Y4PIRv6jw1wuGa67iHopFXy9KPYjE
QOtLptZUAorqC62CzoVJxwbpIPw1AkKBag7FFKtiymQKbxSAkEkCOTa64RF+FFDJ
zUqbRQPJMMhKR35lJ/W3TfNQQViF/nydDdNmSY+gYAPU8kqhx4K7K9al9DUwVa/P
dL0l549BLOHzmFcEtw4FQOGMYt4Gkma5+6OIMJOuoM/ADAUz7qdcWYYdsFl42HzC
73u7MGLcfGkElcZKkH8sn2zuKsTTtTKD5rhLfIiu132vK7vqoONdJLd7U1X2Bwif
/ub1we7x4eGonZjhKajENpD3o/1Y072gLy8rlZ1r6/J+GQ9TEwUBNV8NNOfDPv0p
xTP6OCFPHEFA4toG0rRBm7OIxmQXFWmfxMT3NnwBqPCufWlOm20JhaU/pefPCqHJ
Vc8Ap+k6/bct3iNuAg1buggFVDWg89uBqF9vfdELiCDF3nRYm4bQ6S1cWxvnu5aq
9MZdt4Dc1WnTSNfY9/zjKJWmG3miv1D1eo3fSyVJNYVfVzQ23KMOPwR/jdr47Gle
8/5OM38zPhZ+vC+XD//Lq0/c8iMO39B4pwQ0Bb8FAhk/6Ug0cYbap+lPWkY+iQI9
BBMBCgAnAhsDBQsJCAcDBRUKCQgLBRYDAgEAAh4BAheABQJVntrOBQkDwu9RAAoJ
EDanwF/h7Pm77qQQALNcLFh7Eqc6gztkIySQtqDgieH1Frj2YGMrTxdzP7fnl4sT
wWQF2H0rsLgvOTZszACwLm9Rg2GaRi/bFZ9S8AIM1klQEQmu5LoQDSPrfX0pNxDl
1WhESECgEAF7++HDk3kHUxr5bCr+AN6kG3mY2nuKtw33G5ZbPtM5Nwgk/GT8dB0w
EazZVAN103RpdDmqGgWhYP/dYjGZJjLQCjGyM4VoQcEu+dPrUlAxhFbm13wRyfgi
fBkOug9pB0lpblEXAbB3slDw+4A1++lUjTLzGHayRZIys3d4uM4l1C1b8Z5SeU4r
mpDcqvRbDkhxwVh6e7YdEbf1VTWjQ2WgvEDQXG74N/nN3npbjPfnyFF79udHTZvb
qW+uqyozxXdtLvIbcEHWVDdQGqqTeeRinRu7sK8PRuJxbI7YaECGFw/1QrXdIUzi
1jxRWgtfWihCArXiEuo1LBwdto8CaSxkKV+QTsaH/t5mUiA+fHzsMlexWe55K/7i
OZ5wViUcffNYwbQ7DgcRxwuzc+IYaGg0GYGzJfWeKnrpwm8uZSccH1LLXdIyf5vp
Q9UojD0qz1+byBPtl5/DBwFi5st248YMnXCItIYkjTfLeXQp4oSi3AHH0TEAxhUt
MLoI7CRnIiuCLmssfGI3sNH55wJQQeD7h8c/DaBI8yDuJ28dNY6H5zjPc82suQIN
BFO9HvEBEACynbl7EgcRIGWP7O6h1O6mrYXNZ2JpJBgYosqizdDHyru2nQSrNfgi
wAM1feB2NLJC0coQzRO1sDK2JP770+eK3ZhbWSP5BWN2toSFVEGlVpGWLBGoefae
ZnZA22IDzpOIjIi7iC92JBsTXESsBoV8iG1rylQ15pcE03IQEuuDu9r7H8RJ3vTf
X1c+a+B8MUHn56kn3QkdG2blV0/3gjFqqavZeOxZpAmyn9n9Vc3yCCPkagtNQwle
NyZOSOLjjVpBjncE6dATdLOj85phfOU6eO/0bMXAgTr7mY41EIqYqdPQYrY93ySG
gBvBkyNaH5AlDNZZwJ4ddtDMFoP8nUhBoRrf5ApYyHcEmSXahLfW3a2qrPm/w5VL
EGLt53/6GZvEetpP+TtBLAxX6XaC2SXAOrzfSZENdYt/Ew6F/dTCZ622m0eW65iV
wSi1sNZD2hNFPs/12a2tem7DAWqD2bi8BltKRbO+8T7BARwIl5hXGq5+YnO+DgTI
f4SYkSt8aiPYwDAF3YSkzpiUmZoBSRt6Sb9sZ3zIxpfnrtLFmSeujzinyCVNzFdn
+HKxZvI9Mc3Tv/LqPruVuWHt1Aj+eygH5bRZw4PTsMNX1FxM/K8hRY91A6Fyp3GC
kb5RzqdEGuSONBseaZirC0d+EYZ4smy1jydpzwT1O8VjY4wi5BdgwQARAQABiQIl
BBgBCgAPBQJTvR7xAhsMBQkB4TOAAAoJEDanwF/h7Pm7gzUP/Auq4I876RUqAP2D
gPNArjuc7jqvIIsgqBvwS2Vdvxg0pFQmsL13nvlmFHR1dp+yOhiz1WmXIVGa9UoB
rVdmDrzqCifHUVlFct99DLJlM+hNmQnHgTABTsClR4idkekOvyEgAW/gsgddYfqm
N8nRKSrokFZvwoR7HlCcSXEuATbqgHjJC8IuJuIgDWjshy3yVLIo5v/g/Yuio4bx
tRTJm72DtUIdDH3tDejc37wd945Rzk4hKzet64inF6XfRhqBsRob1m6/wtP62xPc
Gbb1GlzxYg9WllRJ/ZOTktB4BemVjRn4/0KU93YyxFxHOtXsoZpRGDlovQBUhRkd
b2JEyHaLnFVKa7w7JFKW9d+OdGjV93l//6139QEQlcuocV4QciXZOXTZkWsaKQOb
6WkrSwkQwvNFS2yeUd0x6HD0xebztmSGoXL3uCKyeIxP/8MJjJUkWHh/+DLue4kh
lHwva7Wym0cvYoS3RzfYd26t9OgM7rflE0tOeJovaoaKP6Aant/EkQj2Wb1MssO/
Ia44NyMTrLARAPlAEGW/HI5JL9DZDnmUtByf29yqaHDuJCZS3nvR3T/4q+pblTVd
xQgwopUWjiKkg72yCXMhr/6FcOr9Xgqn++GuMZzh/TFdEoFoJn9stUaScYsoMoih
ym2NFbd1l2Pw/ifTQk5/KpQD/HkwiQIlBBgBCgAPAhsMBQJVnts0BQkDwu/DAAoJ
EDanwF/h7Pm7fV4P/Rb4aYTZmpajgk26vnXIJ2L/Xorx1lV7+a1bDxct71qWSLv3
aCDGDXe1ZLYMnyaNCJHNn4SP2biF7QrRhRmGdETA2VXXCFYLDS7s4OQKltF3p1DS
1UPozfIyXkCFGbOasbaDtJ9SOSv04q1E6nXfCcF8xgjxMHbbrCsGiiHSNet+5A9f
AeZPWKWeUDgc3U7tho0FWyHZWgCjt5x1pYlCsUPgV3vlyo8HqRiWxLYF1WQ7SwV/
1536r5DD5vFbzhdxQ03mPDqLh0VZwPlQ6nb+bKwDX/75Q6tBNBkUQGM7XqI5tZ07
CjjI1/sTYMJz+GNnkIgrSiBr3vihtJgUzbJFfJqoIPkSdpayCP17k2Mdk9eCW6mc
tmtfhU91lzJUvAl3Og1TQP/wiyPQhTrQOlonwkrzY/Bve9Ilh2ZDt/9Q+XzEtSdG
59phFT4s7Yt5f9gVGx2hUhE5mmLN27rQJ2JnyIkA9IyNiycFPRo4ZURXI0yzCwXH
bwLEmA2FVnnyotURN7Z1k2PzUOL6lb7j2fMJZBbaFDR1G7J2pKNihJO3IY80z7Le
tpRpWKSdHTpSW1UXJFQBFT4W7fja03aEXP3bK+RV1MkAp/TCWlVCsqnyJae7BnEu
g9NgaY6PRozzy5ZAdWM36ylnwFyz48fgUWHFhDc7fMCHjwqDtP62K1TbRvFM
=cQn3
-----END PGP PUBLIC KEY BLOCK-----
</pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="pgpkey-portmgr-secretary"></a>D.1.4. Le secrétaire de l'équipe de gestion des logiciels portés <code class="email">&lt;<a xmlns="" class="email" href="mailto:portmgr-secretary@FreeBSD.org">portmgr-secretary@FreeBSD.org</a>&gt;</code></h3></div></div></div><pre class="programlisting">
pub   2048R/D8294EC3BBC4D7D5 2012-07-24
      Key fingerprint = FB37 45C8 6F15 E8ED AC81  32FC D829 4EC3 BBC4 D7D5
uid                          FreeBSD Ports Management Team Secretary &lt;portmgr-secretary@FreeBSD.org&gt;
sub   2048R/5CC117965F65CFE7 2012-07-24
sub   4096R/CA20328577064EB7 2013-10-05
sub   4096R/8B114B3613867E00 2013-10-05

</pre><pre class="programlisting">
-----BEGIN PGP PUBLIC KEY BLOCK-----

mQENBFAOzqYBCACYd+KGv0/DduIRpSEKWZG2yfDILStzWfdaQMD+8zdWihB0x7dd
JDBUpV0o0Ixzt9mvu5CHybx+9lOHeFRhZshFXc+bIJOPyi+JrSs100o7Lo6jg6+c
Si2vME0ixG4x9YjCi8DisXIGJ1kZiDXhmVWwCvL+vLInpeXrtJnK8yFkmszCOr4Y
Q3GXuvdU0BF2tL/Wo/eCbSf+3U9syopVS2L2wKcP76bbYU0ioO35Y503rJEK6R5G
TchwYvYjSXuhv4ec7N1/j3thrMC9GNpoqjVninTynOk2kn+YZuMpO3c6b/pfoNcq
MxoizGlTu8VT4OO/SF1y52OkKjpAsENbFaNTABEBAAG0R0ZyZWVCU0QgUG9ydHMg
TWFuYWdlbWVudCBUZWFtIFNlY3JldGFyeSA8cG9ydG1nci1zZWNyZXRhcnlARnJl
ZUJTRC5vcmc+iQE4BBMBAgAiBQJQDs6mAhsDBgsJCAcDAgYVCAIJCgsEFgIDAQIe
AQIXgAAKCRDYKU7Du8TX1QW2B/0coHe8utbTfGKpeM4BY9IyC+PFgkE58Hq50o8d
shoB9gfommcUaK9PNwJPxTEJNlwiKPZy+VoKs/+dO8gahovchbRdSyP1ejn3CFy+
H8pol0hDDU4n7Ldc50q54GLuZijdcJZqlgOloZqWOYtXFklKPZjdUvYN8KHAntgf
u361rwM4DZ40HngYY9fdGc4SbXurGA5m+vLAURLzPv+QRQqHfaI1DZF6gzMgY49x
qS1JBF4kPoicpgvs3o6CuX8MD9ewGFSAMM3EdzV6ZdC8pnpXC8+8Q+p6FjNqmtjk
GpW39Zq/p8SJVg1RortCH6qWLe7dW7TaFYov7gF1V/DYwDN5iQEcBBABAgAGBQJQ
DuVrAAoJENk3EJekc8mQ3KwIAImNDMXAF8ajPwCZFpM6KDi3F/jpwyBPISGY1oWu
YPEi1zN94k5jS90aZb3W8Y8x4JTh35Ewb6XODi3uGLSLCmnlqu2a80yPfXf5IuWm
IQdFNQxvosj9UHrg+icZGFmm+f0hPJxMTsZREv3AvivQfnb/N3xIICxW4SjKSYXQ
cq4hr4ObhUx7GKnjayq+ofU2cRlujr87uOH0fO3xhOJG4+cX5mI1HGK38k0Csc1z
qYa/66Qe5dnIZz+sNXpEPMLAHIt1a45UB967igJdZSDFN33bPl1QWmf3aUXU3d1V
ttiSyHkpm4kb9KgsDkUk1IJ5nUe9OXydWtoqNW5afDa5N0aIRgQQEQIABgUCUA7l
wwAKCRB59uBxdBRinNh2AJ41+zfsaQSRHWvSkqOXGcP/fgOduwCfUJDT+M1eXe2u
dmKof/9yzGYMirKJASIEEAECAAwFAlAaIT8FAwASdQAACgkQlxC4m8pXrXwCHAf+
J7l+L7AvRpqlQcezjnjFS/zG1098qkDflThHZlpVnrBMJZaXdvL6LzVgiIYVWZC5
CSSazW9EWFjp9VjM7FBHdWFZNMV7GAuUt0jzx6gGXOWwi+/v/hs1P11RyDZN5hIC
HdPNmyZVupciDxe+sIEP9aEbVxcaiccqzM/pFzIVIMMP5tCiA42q6Mz3h0hy6hnt
UKptS8Uon6sje5cDVcVlKAUj1wO2cphCqkYlwMQfZV5J9f/hcW5ODriD3cBwK8So
cA2Cq5JYF8kYDL1+pXnUutGnvAHUYt87RWvQdKmfXjzBcMFJ2LlPUB1+IFvwQ13V
9R8j9B/EdLmSWQYT9qRA2rkBDQRQDs6mAQgAzNxJYpf5PrqV8pdRXkn36Fe45q67
1YtbZ2WrT7D0CVZ8Z+AZsxnP/tiY1SrM2MepCeA2xBAhKGsWBWo1aRk5mfZOksKs
iXsi2XeBVhdZlCkrOMKBTVian7I1lH59ZnNIMX0Nl0tlj3L1IjeWWNvfej43URV8
1S9EmSwpjaWboatr2A+1oJku5m7nPD9JIOckE1TzBsyhx7zIUN9w6MKr7gFw8DCz
ypwUKyYgKYToVm8QlkT/L3B0fuQHWhT6ROGk4o8SC71ia5tc1TzUzGEZ1AQO8bbn
bmJLBDKveWHCoaeAkRzINzoD9wAn9z4pnilze59QtKC1cOqUksTvBSDh6wARAQAB
iQEfBBgBAgAJBQJQDs6mAhsMAAoJENgpTsO7xNfVOHoH/i5VyggVdwpqPX8YBmN5
mXQziYZNQoiON8IhOsxpX4W2nXCj5m6MACV6nJDVV6wyUH8/VvDQC9nHarCe1oaN
sHXJz0HamYt5gHJ0G1bYuBcuJp/FEjLa48XFI7nXQjJHn8rlwZMjK/PWj1lw2WZi
ekviuzTEDH8c3YStGJSa+gYe8Eyq3XJVAe2VQOhImoWgGDR3tWfgrya/IdEFb/jm
jHSG5XUfbI0vNwqlf832BqSQKPG/Zix4MmBJgvAz4R71PH8WBmbmNFjDelxVyfz8
0+iMgEb9aL91MfeBNC2KB1pFmg91mQTsiq7ajwVLVJK8NplHAkdLmkBCO8MgMjzG
hlG5Ag0EUk+ViAEQALkCj95JmvmfgytOxnR1w8xnQBuUxtYxf+BWwqU0IfOMBxAm
XDRfbfe9Bc3DDZygmjrZ0RCDcVJ4OmDNRc/vvoTst870so49dM1h2i6aWUhhD4Hy
cNjkx0wAIyZ9jXidT3LyAhCTSf/GjtpcORCvmAsXcJHzhhbJ5eM2SBkXmNdn4MeC
/hCbfUfzN64fmsGR4tKKIlPPayyQaQv/dOP3ofEh4SWRc8KtjEA6uIyHztWMWEJQ
KN/7nSeVuwDpVJL9l4yUGB0TqlK0p/necoQkOolnHUX5oK7Emin9TjPYCGqYAEWu
M1BbWXiYIdivlEm3ZU+vqq6CbSw/SKDZ2ZuK4UzDGQnW7WycsbXqZ18aewh1mdf+
5+YBxeXazRJvfFapB/WvtVqi84LOWior1IBMMg3PCyBiCjhHwXvoV5V6M3lthrnV
gyiCTreLXvTLNgIKQQFUvwW2Jscuwa3HhBgkhkJBSCPmpWAIZ9eA1RugvFQ893Xh
t8vy+z33WqxgUzhD8ZonKCBEZa29Zj7SeIYXcZmVmxCbRt4PYkgFoq6VC+93qtXu
OaOvC+0b9qkmNj5EqvozRt6SNv0sDe844T0LacR6QS9Pq/YMjAs8ao3gw0iwOAlV
vpiZfoEb6purf0Tz0h/URRHUZngEBsFmhciZxuCg9g/GaD8o/+PX0nzOWH4PABEB
AAGJAz4EGAECAAkFAlJPlYgCGwICKQkQ2ClOw7vE19XBXSAEGQECAAYFAlJPlYgA
CgkQyiAyhXcGTrfF9g/8C6JhufyxnYO0DmPURCFV0em3WjXcxQkhQa03u/sU8OFN
yp2UOB8jxI3XAsGe4RnclPF273K5G5OfUAJ2hjWFGrMqXGNLlsuJvDJCUmdHnI6c
sw1RvOn2myMzUSTqxPQynkvntughqiyXbGQaoxQJVWjruhogcIkVYvOT4nMGXCyk
9Q+uooLNw8xpzsZBw83znWhjjzemu/BbOfjXbf3qdK9NWMkBfcaR9sDhRA+YY4bc
o7oTKXFfh3gMN1pqTuAM8dbGc0/bS558yNQuFaJ+cX3lbSLXz5oibJi6kudyL9E/
CkVvMFWTLcQQWCPS5rK0dctodW1x8JnwVnaG80trFIxmQ+wk4S156CdYwTv/1LbW
GKcVz9Og1e9wIL2LsVaLD9OIRnx4G8dLqZJz4pmGEES7CX6rrJuSpXxNOg4PthiP
s0z/q9deohKJkUgj6tln0OCgI8203GSSLq3FTAFer2VS+m1XMkA2mqk1Wv6tZeyY
MnYAZCBzc16F2zMg5dVKmV114bHmRTX0b5QQNB7JU3C34kdTagjLr4dz/5BhXgof
zjP9HgVQKCp7JvTdUT7N0y/k+mRMmnK8vnWdbOZH48IOELDhMkU5QIiKHoJaXsw7
wVo68LtSQItfIoA/m6EORGZxUWCi/8G+kBK6NEExR1dlAW+M+fRhzNgqvqoLrcfR
4wgAkQGq3M2/hGdU/Z1j6CDKEvA1/iSRpnBnfVM8KUR661QrEctmIo1YwSU7x5+g
H5lfDUjU2cIlD+HgfxERKwl+hb2KY9OyLq2AUhhf8rAvG2dU9djDp7TWIvF3wexL
liu4C6EWcwlnEecCpkPUYv7/PKb0h0xAx32Umb6dzkfd24miWZTI/Gg7R1Qyl1DC
wBM9kgPRgEhnV3ummsD3KPXf5UwzHPslhqWTO1p2iML4exnXlknL7mJKjj4d3gyi
5LxVVSzt2xi5MyCkFhiHFkSfItihcRpHdzxsBW+7YWw1ELlcKMeOkZQcyBm3VpE/
ZD4DQK6zwGfk4y8WS7A5SJEjJrkCDQRST5W/ARAAwbT4loEoK7ZY8fzt8hyhdBgS
bpXFWAB6yeyGDYp9ucG4ySjlfZIAew/EOzIR/68pKiGzIE0+kxKjlvVDcJoqWfrr
gomondGK2oyK35qOsYOlae6tsZm73InJuGSC+fZ1Vv0HBIn8JZpJXFV7z4FotaG5
iaKDdZCjxawVEWDl7z0zDSLKgPLtK4uSsEVsQIhPo5YLSqT7mCnleCqdNu3S4cun
tXaZmmSZnfv3qnkiPNNNSagZrMUK349fVCdvnJ4hKDbMAEgbxZVwEeB4HFicjwAN
UQTO1qSc+h8bwkrN/RgaT0Zz3nak+DJOOrKRV5VWWemx4Oy2oT08SqMRbhip/veI
LvrV+rKH+lb9uxp0vYWnRvWodOlEla0NeBzfz6Sv8ZI2D+xLJ260mIB4f4BUYCBi
SDu8UKTDffYba+50I9RgV9+umJ2WTcp/PA5/59M9e6R2F3dcM0Qey8hVDcf+rPY2
thXymS85IHcPauDjvjpHpx1xvhoEu2iX0yJwBDUX/xVWwH/lei7DT0cd1dB1pKiP
zNvWSoPp6zhqcB6tUvE69CLRzotmb2OiAkFOReEVkcATL+bG9PBN0zWtSXJuCSL5
WAb+syRzBGwLA7+iQOY0yXCZ+Etl6BG8rsyQkBRwpTG5jXzDKUTl2hmKGFmU72xc
cPeNxhbq1tGMGfDVVmkAEQEAAYkBHwQYAQIACQUCUk+VvwIbDAAKCRDYKU7Du8TX
1cEOB/0WwX3yF/MC8upI0YAbjht+KG4cLgU6qo1ydZgQyHpAf8cttzq/uCDu4wLE
g0CDmreTXoiNR9W0ULhkn1LFkZQI6Z2uSH/wqQUJrE4P9Oo61TXClIzvjBoEufkS
3bg3wuAKiQ4cD1XxyThUG3qa4nbGVvKi4eWYuubpzJof7QD75LudHmLneY4mtCNA
ZgmgEWA2Utn0GWN1QNfoy1NGeLt0kza0VFjm6l6KeMc28ULZZztg0KbuFmQIreN9
JHQbJrrqX8ev57SqEtanoPyX4IjxVJFEmTn4xVSlRXY2uFZZtlB1SuyEPYmrdnjb
pDN9ZUgVOk/c+0+5u+G3JBRYu6P1
=fyjO
-----END PGP PUBLIC KEY BLOCK-----
</pre></div></div></div></div><div class="glossary"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="freebsd-glossary"></a>Glossaire FreeBSD</h1></div></div></div><p>Ce glossaire définit des termes et des acronymes
    spécifiques à FreeBSD.</p><div class="glossdiv"><h3 class="title">B</h3><dl><dt><a id="bsd"></a><span class="glossterm">Berkeley Software Distribution</span></dt><dd class="glossdef"><p>C'est le nom qu'a donné le groupe de recherche en
	  systèmes informatique (&#8220;Computer Systems Research
	  Group&#8221;) de Berkeley aux améliorations et
	  modifications qu'il a apporté à l'<span class="trademark">UNIX</span>® 32V
	  d'AT&amp;T.</p></dd><dt><a id="bikeshed"></a><span class="glossterm">Bikeshed Building</span></dt><dd class="glossdef"><p>Un phénomène selon lequel beaucoup de gens
	  donnent leur opinion sur un sujet trivial, tandis qu'un sujet
	  complexe n'est que peu ou pas du tout débattu.
	  Consultez la <a class="link" href="../faq/misc.html#BIKESHED-PAINTING" target="_top">FAQ</a> pour
	  l'origine de ce terme.</p></dd><dt><span class="glossterm">BSD</span></dt><dd><p>Voir <a class="glosssee" href="#bsd">Berkeley Software Distribution</a>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">K</h3><dl><dt><a id="kse"></a><span class="glossterm">Kernel Scheduler Entities</span></dt><dd class="glossdef"><p>Un système de threading supporté par le
	  noyau.  Consultez la <a class="link" href="http://www.FreeBSD.org/kse" target="_top">page du projet</a> pour
	  plus de détails.</p></dd><dt><span class="glossterm">KSE</span></dt><dd><p>Voir <a class="glosssee" href="#kse">Kernel Scheduler Entities</a>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">M</h3><dl><dt><a id="mfc"></a><span class="glossterm">Merge From Current</span></dt><dd class="glossdef"><p>Intégration d'une fonctionnalité ou d'un
	  correctif de la branche -CURRENT vers une autre branche, la
	  plupart du temps la branche -STABLE.</p></dd><dt><a id="mfs"></a><span class="glossterm">Merge From Stable</span></dt><dd class="glossdef"><p>Lors du déroulement normal du
	  développement de FreeBSD, une modification sera
	  effectuée tout d'abord sur la branche -CURRENT pour
	  être testée avant d'être
	  intégrée sur la branche -STABLE.  Dans de rares
	  occasions, une modification pourra être effectuée
	  en premier lieu sur la branche -STABLE puis être ensuite
	  intégrée à la branche -CURRENT.</p><p>Ce terme est également utilisé quand un
	  correctif de la branche -STABLE est intégré
	  dans une branche de sécurité.</p><p>Voir aussi <a class="glossseealso" href="#mfc">Merge From Current</a>.</p></dd><dt><span class="glossterm">MFC</span></dt><dd><p>Voir <a class="glosssee" href="#mfc">Merge From Current</a>.</p></dd><dt><span class="glossterm">MFS</span></dt><dd><p>Voir <a class="glosssee" href="#mfs">Merge From Stable</a>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">P</h3><dl><dt><a id="pola"></a><span class="glossterm">Principle Of Least Astonishment</span></dt><dd class="glossdef"><p>Avec l'évolution de FreeBSD, les changements
	  visibles par l'utilisateur devraient être les moins
	  déroutant possible.  Par exemple, un
	  réarrangement arbitraire des variables de
	  démarrage du système dans le fichier
	  <code class="filename">/etc/defaults/rc.conf</code> viole ce principe
	  (<acronym class="acronym">POLA</acronym>&#8212;principe du moindre
	  étonnement).  Les développeurs prennent en
	  compte ce principe quand ils s'intéressent aux
	  changements du système visibles par les
	  utilisateurs.</p></dd><dt><span class="glossterm">POLA</span></dt><dd><p>Voir <a class="glosssee" href="#pola">Principle Of Least Astonishment</a>.</p></dd></dl></div></div><div class="index"><div xmlns="" class="titlepage"><div><div><h1 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp88175312"></a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>Symboles</h3><dl><dt>-CURRENT, <a class="indexterm" href="#current-stable">Suivre une branche de développement</a></dt><dd><dl><dt>compilation, <a class="indexterm" href="#idp80551760">Utiliser FreeBSD-CURRENT</a></dt><dt>Synchronisation avec CVSup, <a class="indexterm" href="#idp80551760">Utiliser FreeBSD-CURRENT</a></dt><dt>Synchroniser avec CTM, <a class="indexterm" href="#idp80551760">Utiliser FreeBSD-CURRENT</a></dt><dt>utilisation, <a class="indexterm" href="#idp80551760">Utiliser FreeBSD-CURRENT</a></dt></dl></dd><dt>-STABLE, <a class="indexterm" href="#current-stable">Suivre une branche de développement</a>, <a class="indexterm" href="#idp80584400">Qu'est-ce que FreeBSD-STABLE?</a></dt><dd><dl><dt>compilation, <a class="indexterm" href="#idp80591184">Utiliser FreeBSD-STABLE</a></dt><dt>Synchronisation avec CVSup, <a class="indexterm" href="#idp80591184">Utiliser FreeBSD-STABLE</a></dt><dt>Synchroniser avec CTM, <a class="indexterm" href="#idp80591184">Utiliser FreeBSD-STABLE</a></dt><dt>utilisation, <a class="indexterm" href="#idp80591184">Utiliser FreeBSD-STABLE</a></dt></dl></dd><dt>.rhosts, <a class="indexterm" href="#idp78573008">Dump et Restore</a></dt><dt>/boot/kernel.old, <a class="indexterm" href="#kernelconfig-building">Compiler et installer un noyau sur mesure</a></dt><dt>/dev/vinum, <a class="indexterm" href="#idp79644368">Appellation des objets</a></dt><dt>/etc, <a class="indexterm" href="#idp74513104">Organisation des partitions</a></dt><dt>/etc/groups, <a class="indexterm" href="#users-groups">Groupes</a></dt><dt>/etc/login.conf, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>/etc/mail/access, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/etc/mail/aliases, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/etc/mail/local-host-names, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/etc/mail/mailer.conf, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/etc/mail/mailertable, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/etc/mail/sendmail.cf, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/etc/mail/virtusertable, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>/usr, <a class="indexterm" href="#idp74513104">Organisation des partitions</a></dt><dt>/usr/local/etc, <a class="indexterm" href="#configtuning-appconfig">Configuration des applications</a></dt><dt>/usr/share/skel, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>/var, <a class="indexterm" href="#idp74513104">Organisation des partitions</a></dt><dt>10 base 2, <a class="indexterm" href="#idp85204048">Ponts/Routeurs ISDN autonomes</a></dt><dt>10 base T, <a class="indexterm" href="#idp85204048">Ponts/Routeurs ISDN autonomes</a></dt><dt>386BSD, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a>, <a class="indexterm" href="#relnotes">A propos de cette version</a></dt><dt>386BSD Patchkit, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>4.3BSD-Lite, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>4.4BSD-Lite, <a class="indexterm" href="#nutshell">Bienvenue à FreeBSD!</a>, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>802.11 (voir réseau sans fil)</dt><dt>&#8220;locales&#8221;, <a class="indexterm" href="#idp80078544">Méthodes de configuration des
	  &#8220;locales&#8221;</a>, <a class="indexterm" href="#startup-file">Méthode utilisant les fichiers d'initialisation de
	    l'interpréteur de commandes</a></dt></dl></div><div class="indexdiv"><h3>A</h3><dl><dt>Abacus, <a class="indexterm" href="#idp70395856">Abacus</a></dt><dt>AbiWord, <a class="indexterm" href="#idp70235728">AbiWord</a></dt><dt>accès multi-utilisateurs, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>accounting</dt><dd><dl><dt>espace disque, <a class="indexterm" href="#quotas">Quotas d'utilisation des disques</a></dt><dt>imprimante, <a class="indexterm" href="#printing-advanced-lpf">lpf: un filtre texte</a></dt></dl></dd><dt>ACL, <a class="indexterm" href="#fs-acl">Listes de contrôle d'accès au système de
      fichiers</a></dt><dt>ACPI, <a class="indexterm" href="#acpi-intro">Qu'est-ce que l'ACPI?</a>, <a class="indexterm" href="#ACPI-background">Information de fond</a></dt><dd><dl><dt>ASL, <a class="indexterm" href="#ACPI-aslanddump">ASL, acpidump, et
        IASL</a>, <a class="indexterm" href="#ACPI-fixasl">Correction de votre ASL</a></dt><dt>débogage, <a class="indexterm" href="#ACPI-debugoutput">Obtenir d'ACPI une sortie de
	débogage</a></dt><dt>messages d'erreur, <a class="indexterm" href="#ACPI-fixasl">Correction de votre ASL</a></dt><dt>problèmes, <a class="indexterm" href="#ACPI-debug">Utiliser et déboguer l'ACPI
      sous FreeBSD</a>, <a class="indexterm" href="#ACPI-comprob">Problèmes courants</a>, <a class="indexterm" href="#ACPI-debugoutput">Obtenir d'ACPI une sortie de
	débogage</a></dt></dl></dd><dt>Acrobat Reader, <a class="indexterm" href="#idp70308688">Acrobat Reader®</a></dt><dt>adduser, <a class="indexterm" href="#users-adduser">adduser</a>, <a class="indexterm" href="#adm-setup">Configuration au niveau administrateur</a></dt><dt>AIX, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dt>alias IP, <a class="indexterm" href="#configtuning-virtual-hosts">Hôtes virtuels</a></dt><dt>Alpha, <a class="indexterm" href="#idp63172944">Architecture FreeBSD/alpha</a>, <a class="indexterm" href="#idp65739472">Organisation des disques pour l'architecture Alpha</a>, <a class="indexterm" href="#idp65961168">Démarrage pour l'architecture Alpha</a>, <a class="indexterm" href="#idp66751824">Démarrage de FreeBSD sur FreeBSD/alpha</a></dt><dt>Alpha BIOS, <a class="indexterm" href="#idp63172944">Architecture FreeBSD/alpha</a></dt><dt>Amanda, <a class="indexterm" href="#backups-programs-amanda">Amanda</a></dt><dt>amd, <a class="indexterm" href="#network-amd">Montages automatiques avec
	amd</a></dt><dt>Apache, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a>, <a class="indexterm" href="#network-apache">Serveur HTTP Apache</a></dt><dd><dl><dt>démarrage ou
	  arrêt, <a class="indexterm" href="#idp83809232">Exécuter Apache</a></dt><dt>fichier de configuration, <a class="indexterm" href="#idp83793744">Configuration</a></dt><dt>modules, <a class="indexterm" href="#idp83839312">Modules Apache</a></dt></dl></dd><dt>APIC</dt><dd><dl><dt>désactivation, <a class="indexterm" href="#idp75475024">Blocages du système (temporaires ou permanents)</a></dt></dl></dd><dt>APM, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a>, <a class="indexterm" href="#acpi-intro">Qu'est-ce que l'ACPI?</a></dt><dt>applications</dt><dd><dl><dt>Maple, <a class="indexterm" href="#linuxemu-maple">Installer Maple&#8482;</a></dt><dt>Mathematica, <a class="indexterm" href="#linuxemu-mathematica">Installer Mathematica®</a></dt><dt>MATLAB, <a class="indexterm" href="#linuxemu-matlab">Installer MATLAB®</a></dt><dt>Oracle, <a class="indexterm" href="#linuxemu-oracle">Installer Oracle®</a></dt><dt>SAP R/3, <a class="indexterm" href="#sapr3">Installer SAP® R/3®</a></dt></dl></dd><dt>apsfilter, <a class="indexterm" href="#printing-advanced-autoconv">Conversion automatique: une alternative aux filtres de
	    conversion</a></dt><dt>ARC, <a class="indexterm" href="#idp63172944">Architecture FreeBSD/alpha</a></dt><dt>ASCII, <a class="indexterm" href="#idp80054096">Codage des caractères</a></dt><dt>AT&amp;T, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>attaques DoS (voir déni de service (DoS))</dt><dt>AUDIT, <a class="indexterm" href="#audit-synopsis">Synopsis</a></dt><dt>Audit des événements relatifs à la
	sécurité du système (voir MAC)</dt><dt>Avis de sécurité de FreeBSD, <a class="indexterm" href="#security-advisories">Avis de sécurité de FreeBSD</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>bande magnétique, <a class="indexterm" href="#backups-tapebackups">Créer et utiliser les bandes magnétiques</a></dt><dd><dl><dt>AIT, <a class="indexterm" href="#idp78466128">AIT</a></dt><dt>bandes DDS (4mm), <a class="indexterm" href="#backups-tapebackups-4mm">Bandes 4mm (DDS: &#8220;Digital Data Storage&#8221;)</a></dt><dt>Bandes Exabyte (8mm), <a class="indexterm" href="#backups-tapebackups-8mm">Bandes 8mm (Exabyte)</a></dt><dt>bandes QIC, <a class="indexterm" href="#backups-tapebackups-4mm">Bandes 4mm (DDS: &#8220;Digital Data Storage&#8221;)</a></dt><dt>DLT, <a class="indexterm" href="#backups-tapebackups-dlt">DLT</a></dt><dt>QIC-150, <a class="indexterm" href="#backups-tapebackups-qic">QIC</a></dt></dl></dd><dt>bannières (voir pages d'en-tête)</dt><dt>base de données
		SQL, <a class="indexterm" href="#idp83984208">Paramètres de sécurité</a></dt><dt>Basic Input/Output System (voir BIOS)</dt><dt>BGP, <a class="indexterm" href="#network-dedicated-router">Mettre en place un routeur</a></dt><dt>bibliothèques
	  partagées, <a class="indexterm" href="#idp73001808">Comment installer des bibliothèques
	  partagées supplémentaires</a></dt><dt>BIND, <a class="indexterm" href="#mail-trouble">Dépannage</a>, <a class="indexterm" href="#idp83560016">Généralités</a></dt><dd><dl><dt>fichiers de configuration, <a class="indexterm" href="#idp83655760">Fichiers de configuration</a></dt><dt>fichiers de zone, <a class="indexterm" href="#idp83677264">Fichiers de zone</a></dt><dt>lancement, <a class="indexterm" href="#idp83642192">Lancer BIND</a></dt><dt>serveur de noms cache, <a class="indexterm" href="#idp83752016">Serveur de noms cache</a></dt></dl></dd><dt>BIOS, <a class="indexterm" href="#install-drive-bios-numbering">La numérotation des disques par le BIOS</a>, <a class="indexterm" href="#boot-introduction">Le problème du démarrage</a></dt><dt>bits-par-seconde, <a class="indexterm" href="#printing-checking-serial">Tester une imprimante série</a></dt><dt>Blue Mountain Arts, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>Bluetooth, <a class="indexterm" href="#network-bluetooth">Bluetooth</a></dt><dt>Boot Loader, <a class="indexterm" href="#boot-introduction">Le problème du démarrage</a></dt><dt>boot-loader, <a class="indexterm" href="#boot-loader">Etape trois, /boot/loader</a></dt><dt>BOOTP</dt><dd><dl><dt>système sans disque dur, <a class="indexterm" href="#idp84993360">Configuration utilisant BOOTP</a></dt></dl></dd><dt>bootstrap, <a class="indexterm" href="#boot-synopsis">Synopsis</a></dt><dt>Bourne shells, <a class="indexterm" href="#shells">Interpréteurs de commandes - &#8220;Shells&#8221;</a></dt><dt>bridge/pont, <a class="indexterm" href="#idp84836944">Introduction</a></dt><dt>BSD Copyright, <a class="indexterm" href="#goals">Les objectifs du projet FreeBSD</a></dt><dt>bsdlabel, <a class="indexterm" href="#idp78698192">Avant le désastre</a>, <a class="indexterm" href="#idp78744912">Après le désastre</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>câble null-modem, <a class="indexterm" href="#headless-install">Installer FreeBSD sur un système sans moniteur ou sans
	clavier</a>, <a class="indexterm" href="#printing-serial">Les ports série</a></dt><dt>cartes réseaux</dt><dd><dl><dt>configuration, <a class="indexterm" href="#idp74800720">Configuration de la carte réseau</a></dt><dt>dépannage, <a class="indexterm" href="#idp74873808">Dépannage</a></dt><dt>pilote, <a class="indexterm" href="#config-network-setup">Configuration des cartes réseaux</a></dt><dt>tests, <a class="indexterm" href="#idp74867152">Tester la carte Ethernet</a></dt></dl></dd><dt>cartes son, <a class="indexterm" href="#sound-device">Configuration du système</a></dt><dt>cartes TV, <a class="indexterm" href="#tvcard">Configuration des cartes TV</a></dt><dt>catalogue des logiciels
	  portés, <a class="indexterm" href="#linuxemu-libs-port">Installation à l'aide du logiciel porté
	  linux_base</a></dt><dt>CDROMs</dt><dd><dl><dt>création, <a class="indexterm" href="#creating-cds">Création et utilisation de supports optiques
      (CDs)</a></dt><dt>création d'un CDROM bootable, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>gravure, <a class="indexterm" href="#burncd">burncd</a>, <a class="indexterm" href="#cdrecord">cdrecord</a></dt></dl></dd><dt>centronics (voir imprimantes parallèle)</dt><dt>chargeur, <a class="indexterm" href="#boot-loader-flow">Déroulement des opérations du chargeur</a></dt><dt>chargeur de classe d'exécution, <a class="indexterm" href="#idp74390480">Comme ça marche?</a></dt><dt>chiffrement, <a class="indexterm" href="#crypt">DES, MD5, et chiffrement</a>, <a class="indexterm" href="#idp83842128">mod_ssl</a></dt><dt>Chinois traditionnel</dt><dd><dl><dt>codage BIG-5, <a class="indexterm" href="#usr-setup">Configuration au niveau utilisateur</a></dt></dl></dd><dt>chpass, <a class="indexterm" href="#users-chpass">chpass</a></dt><dt>circuits graphiques Intel i810, <a class="indexterm" href="#idp69632848">Configuration avec les circuits graphiques Intel®
	  i810</a></dt><dt>Cisco, <a class="indexterm" href="#idp81457360">Utiliser pppd comme client</a></dt><dt>classe de session, <a class="indexterm" href="#idp80078544">Méthodes de configuration des
	  &#8220;locales&#8221;</a>, <a class="indexterm" href="#adm-setup">Configuration au niveau administrateur</a></dt><dt>clés pgp, <a class="indexterm" href="#pgpkeys">Clés OpenPGP</a></dt><dt>Client de messagerie, <a class="indexterm" href="#mail-agents">Clients de messagerie</a></dt><dt>Coda, <a class="indexterm" href="#disks-virtual">Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></dt><dt>codage des langues, <a class="indexterm" href="#idp80032464">Codage de la langue et du pays</a></dt><dt>codage des pays, <a class="indexterm" href="#idp80032464">Codage de la langue et du pays</a></dt><dt>codages des caractères, <a class="indexterm" href="#idp80054096">Codage des caractères</a></dt><dt>code source, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>Compatibilité binaire</dt><dd><dl><dt>BSD/OS, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>Linux, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>NetBSD, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>SCO, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>SVR4, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt></dl></dd><dt>compatibilité binaire</dt><dd><dl><dt>Linux, <a class="indexterm" href="#linuxemu-synopsis">Synopsis</a></dt></dl></dd><dt>compatibilité binaire avec Linux, <a class="indexterm" href="#linuxemu-synopsis">Synopsis</a></dt><dt>Compilateur GNU, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>compilateurs</dt><dd><dl><dt>C, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>C++, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>Fortran, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt></dl></dd><dt>compilation du système</dt><dd><dl><dt>durée, <a class="indexterm" href="#idp80789072">Durée</a></dt></dl></dd><dt>compression, <a class="indexterm" href="#floppies-compress">Puis-je sauvegarder mes sauvegardes?</a></dt><dt>comptabiliser l'utilisation</dt><dd><dl><dt>imprimante, <a class="indexterm" href="#printing-advanced-acct">Comptabiliser l'utilisation de l'imprimante</a></dt></dl></dd><dt>Comptabilité des processus, <a class="indexterm" href="#security-accounting">Comptabilité des processus</a></dt><dt>compte</dt><dd><dl><dt>création, <a class="indexterm" href="#users-adduser">adduser</a></dt></dl></dd><dt>comptes</dt><dd><dl><dt>daemon, <a class="indexterm" href="#users-system">Comptes système</a></dt><dt>groupes, <a class="indexterm" href="#users-groups">Groupes</a></dt><dt>modification, <a class="indexterm" href="#users-modifying">Modifier des comptes</a></dt><dt>modifier le mot de passe, <a class="indexterm" href="#users-passwd">passwd</a></dt><dt>nobody, <a class="indexterm" href="#users-system">Comptes système</a></dt><dt>operator, <a class="indexterm" href="#users-system">Comptes système</a></dt><dt>restriction, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>super-utilisateur (root), <a class="indexterm" href="#users-superuser">Le compte super-utilisateur</a></dt><dt>suppression, <a class="indexterm" href="#users-rmuser">rmuser</a></dt><dt>système, <a class="indexterm" href="#users-system">Comptes système</a></dt><dt>utilisateur, <a class="indexterm" href="#users-user">Comptes utilisateur</a></dt></dl></dd><dt>Computer Systems Research Group (CSRG), <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#relnotes">A propos de cette version</a></dt><dt>concaténation</dt><dd><dl><dt>Vinum, <a class="indexterm" href="#idp79520976">Les goulots d'étranglement d'accès aux
      données</a></dt></dl></dd><dt>Concurrent Versions System (voir CVS)</dt><dt>configuration des cartes réseaux</dt><dd><dl><dt>déterminer le pilote de
	  périphérique, <a class="indexterm" href="#idp74726480">Déterminer le bon pilote de
	périphérique</a></dt></dl></dd><dt>configuration des écrans
	  larges, <a class="indexterm" href="#idp69639248">Utilisation d'un écran large
	  (Widescreen)</a></dt><dt>configuration du chargeur, <a class="indexterm" href="#boot-loader-flow">Déroulement des opérations du chargeur</a></dt><dt>configuration du
      système, <a class="indexterm" href="#config-synopsis">Synopsis</a></dt><dt>console, <a class="indexterm" href="#consoles-intro">La console</a>, <a class="indexterm" href="#boot-singleuser">Mode mono-utilisateur</a></dt><dt>console série, <a class="indexterm" href="#headless-install">Installer FreeBSD sur un système sans moniteur ou sans
	clavier</a></dt><dt>consoles virtuelles, <a class="indexterm" href="#consoles">Consoles virtuelles &amp; terminaux</a></dt><dt>contributions, <a class="indexterm" href="#development">Le mode de développement de FreeBSD</a></dt><dt>coredumpsize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>couleur</dt><dd><dl><dt>contraste, <a class="indexterm" href="#idp66838736">Questions et réponses de dépannage</a></dt></dl></dd><dt>coupe-feu, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#idp84843600">Coupe-feu filtrant/régulant le trafic</a>, <a class="indexterm" href="#idp84858576">Support du coupe-feu</a></dt><dt>couplage, <a class="indexterm" href="#idp84686416">Couplage des périphériques</a></dt><dt>courrier électronique, <a class="indexterm" href="#mail-synopsis">Synopsis</a></dt><dd><dl><dt>changer d'agent de transfert de courrier, <a class="indexterm" href="#mail-changingmta">Changer votre agent de transfert de courrier</a></dt><dt>configuration, <a class="indexterm" href="#mail-config">Basic Configuration</a></dt><dt>dépannage, <a class="indexterm" href="#mail-trouble">Dépannage</a></dt><dt>réception, <a class="indexterm" href="#mail-receive">Réception de courrier</a></dt></dl></dd><dt>cpio, <a class="indexterm" href="#idp78637136">cpio</a></dt><dt>cputime, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>cron, <a class="indexterm" href="#idp80551760">Utiliser FreeBSD-CURRENT</a>, <a class="indexterm" href="#idp80591184">Utiliser FreeBSD-STABLE</a></dt><dd><dl><dt>configuration, <a class="indexterm" href="#configtuning-cron">Configuration de l'utilitaire
      cron</a></dt></dl></dd><dt>CTM, <a class="indexterm" href="#synching">Synchroniser vos sources</a>, <a class="indexterm" href="#ctm">Utiliser CTM</a></dt><dt>cu, <a class="indexterm" href="#headless-install">Installer FreeBSD sur un système sans moniteur ou sans
	clavier</a></dt><dt>CVS</dt><dd><dl><dt>anonyme, <a class="indexterm" href="#synching">Synchroniser vos sources</a>, <a class="indexterm" href="#anoncvs-intro">Introduction</a></dt><dt>archives, <a class="indexterm" href="#development">Le mode de développement de FreeBSD</a></dt></dl></dd><dt>cvsup, <a class="indexterm" href="#idp80551760">Utiliser FreeBSD-CURRENT</a>, <a class="indexterm" href="#idp80591184">Utiliser FreeBSD-STABLE</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>daemon de montage
	automatique, <a class="indexterm" href="#network-amd">Montages automatiques avec
	amd</a></dt><dt>daemons serveurs de courrier</dt><dd><dl><dt>exim, <a class="indexterm" href="#mail-mta">Le &#8220;daemon&#8221; serveur de courrier</a></dt><dt>postfix, <a class="indexterm" href="#mail-mta">Le &#8220;daemon&#8221; serveur de courrier</a></dt><dt>qmail, <a class="indexterm" href="#mail-mta">Le &#8220;daemon&#8221; serveur de courrier</a></dt><dt>sendmail, <a class="indexterm" href="#mail-mta">Le &#8220;daemon&#8221; serveur de courrier</a></dt></dl></dd><dt>délai de grâce, <a class="indexterm" href="#idp79017040">Consulter les quotas et l'utilisation des disques</a></dt><dt>démarrage, <a class="indexterm" href="#boot-synopsis">Synopsis</a></dt><dt>déni de service
      (DoS), <a class="indexterm" href="#security-intro">Introduction</a></dt><dt>DES, <a class="indexterm" href="#crypt">DES, MD5, et chiffrement</a></dt><dt>device.hints, <a class="indexterm" href="#device-hints">&#8220;Device Hints&#8221;&#8212;Paramétrage des
      périphériques</a></dt><dt>DGA, <a class="indexterm" href="#video-interface">Déterminer les capacités vidéo</a></dt><dt>DHCP</dt><dd><dl><dt>dhcpd.conf, <a class="indexterm" href="#idp83505488">Configuration du serveur DHCP</a></dt><dt>fichier de configuration, <a class="indexterm" href="#idp83533392">Fichiers</a></dt><dt>fichiers de configuration, <a class="indexterm" href="#idp83470032">Fichiers</a></dt><dt>installation, <a class="indexterm" href="#idp83491920">Installation d'un serveur DHCP</a></dt><dt>prérequis, <a class="indexterm" href="#idp83442512">Intégration dans FreeBSD</a></dt><dt>serveur, <a class="indexterm" href="#idp83442512">Intégration dans FreeBSD</a></dt><dt>système sans disque dur, <a class="indexterm" href="#idp84968272">Configuration utilisant ISC
	  DHCP</a></dt></dl></dd><dt>dimensionnement de l'espace de
	  pagination, <a class="indexterm" href="#swap-design">Partition de pagination</a></dt><dt>disques</dt><dd><dl><dt>ajout, <a class="indexterm" href="#disks-adding">Ajouter des disques</a></dt><dt>chiffrement, <a class="indexterm" href="#disks-encrypting">Chiffrer les partitions d'un disque</a></dt><dt>détacher un disque mémoire, <a class="indexterm" href="#idp78856784">Détacher un disque mémoire du système</a></dt><dt>mémoire, <a class="indexterm" href="#disks-virtual">Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></dt><dt>système de fichiers en mémoire, <a class="indexterm" href="#disks-md-freebsd5">Système de fichiers en mémoire</a></dt><dt>système de fichiers sauvegardé dans un
	  fichier, <a class="indexterm" href="#disks-mdconfig">Système de fichiers sauvegardé dans un fichier</a></dt><dt>virtuels, <a class="indexterm" href="#disks-virtual">Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></dt></dl></dd><dt>disques virtuels, <a class="indexterm" href="#disks-virtual">Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a></dt><dt>disquette de reprise
	  d'urgence, <a class="indexterm" href="#idp78698192">Avant le désastre</a></dt><dt>disquettes, <a class="indexterm" href="#floppies-using">Puis-je utiliser des disquettes pour la sauvegarde
	des mes données?</a></dt><dt>disquettes de sauvegarde, <a class="indexterm" href="#floppies-using">Puis-je utiliser des disquettes pour la sauvegarde
	des mes données?</a></dt><dt>DNS, <a class="indexterm" href="#idp75007952">Nom d'hôtes</a>, <a class="indexterm" href="#mail-using">Utilisation du courrier électronique</a>, <a class="indexterm" href="#mail-domain">Courrier pour votre domaine</a>, <a class="indexterm" href="#idp83560016">Généralités</a></dt><dd><dl><dt>enregistrements, <a class="indexterm" href="#idp83677264">Fichiers de zone</a></dt></dl></dd><dt>DNS inverse, <a class="indexterm" href="#idp83567440">Terminologie</a></dt><dt>DOS, <a class="indexterm" href="#install-floppies">Préparer les supports de démarrage</a>, <a class="indexterm" href="#install-drive-bios-numbering">La numérotation des disques par le BIOS</a>, <a class="indexterm" href="#idp66795472">Traiter les partitions MS-DOS® existantes</a>, <a class="indexterm" href="#idp80212688">Noyau et systèmes de fichiers</a></dt><dt>DSL, <a class="indexterm" href="#idp84843600">Coupe-feu filtrant/régulant le trafic</a></dt><dt>DSP, <a class="indexterm" href="#troubleshooting">Problèmes courants</a></dt><dt>DTrace, <a class="indexterm" href="#dtrace-synopsis">Synopsis</a></dt><dt>dump, <a class="indexterm" href="#idp78573008">Dump et Restore</a></dt><dt>DVD</dt><dd><dl><dt>DVD+RW, <a class="indexterm" href="#idp78342608">Utiliser un DVD+RW</a></dt><dt>DVD-RAM, <a class="indexterm" href="#creating-dvd-ram">Utiliser un disque DVD-RAM</a></dt><dt>DVD-RW, <a class="indexterm" href="#idp78360144">Utiliser un DVD-RW</a></dt><dt>DVD-Video, <a class="indexterm" href="#idp78326608">Graver un DVD-Vidéo</a></dt><dt>gravure, <a class="indexterm" href="#creating-dvds">Création et utilisation de supports optiques
      (DVDs)</a></dt></dl></dd><dt>Dynamic Host Configuration Protocol (voir DHCP)</dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>éditeurs, <a class="indexterm" href="#editors">Editeurs de texte</a></dt><dd><dl><dt>ee, <a class="indexterm" href="#editors">Editeurs de texte</a></dt><dt>emacs, <a class="indexterm" href="#editors">Editeurs de texte</a></dt><dt>vi, <a class="indexterm" href="#editors">Editeurs de texte</a></dt></dl></dd><dt>éditeurs de texte, <a class="indexterm" href="#editors">Editeurs de texte</a></dt><dt>ELF, <a class="indexterm" href="#idp74390480">Comme ça marche?</a></dt><dd><dl><dt>marquage, <a class="indexterm" href="#idp74390480">Comme ça marche?</a></dt></dl></dd><dt>emacs, <a class="indexterm" href="#editors">Editeurs de texte</a></dt><dt>email, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#mail-synopsis">Synopsis</a></dt><dt>enregistrement MX, <a class="indexterm" href="#mail-dns">Courrier électronique et DNS</a>, <a class="indexterm" href="#mail-config">Basic Configuration</a></dt><dt>équipe de base de FreeBSD, <a class="indexterm" href="#development">Le mode de développement de FreeBSD</a></dt><dt>espace de pagination</dt><dd><dl><dt>chiffrage, <a class="indexterm" href="#swap-encrypting">Chiffrage de l'espace de pagination</a></dt></dl></dd><dt>Etherboot, <a class="indexterm" href="#idp84999504">Préparation d'un programme de démarrage
	  avec Etherboot</a></dt><dt>Ethernet, <a class="indexterm" href="#idp81807824">Configuration de slip.hosts</a></dt><dd><dl><dt>adresse MAC, <a class="indexterm" href="#idp73220176">Obtenir votre mot de passe pour Mathematica®</a>, <a class="indexterm" href="#idp81839568">Configuration de slip.login</a>, <a class="indexterm" href="#idp84190544">Un exemple</a></dt></dl></dd><dt>Extensions d'adressage physique&#8212;&#8220;Physical
	  Address Extensions&#8221; (PAE)</dt><dd><dl><dt>mémoire importante, <a class="indexterm" href="#idp71584336">Configurations mémoire importantes
	(PAE)</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>fdisk, <a class="indexterm" href="#disks-adding">Ajouter des disques</a></dt><dt>fichiers, <a class="indexterm" href="#boot-rc">Configuration des ressources (rc)</a></dt><dt>fichiers de trace, <a class="indexterm" href="#idp75042256">Configuration des fichiers de trace</a></dt><dt>fichiers journaux</dt><dd><dl><dt>FTP, <a class="indexterm" href="#idp83917392">Maintenance</a></dt></dl></dd><dt>fichiers rc</dt><dd><dl><dt>rc.conf, <a class="indexterm" href="#configtuning-core-configuration">Configuration principale</a></dt></dl></dd><dt>fichiers spéciaux de
	périphérique, <a class="indexterm" href="#troubleshooting">Problèmes courants</a></dt><dt>file d'attente
	    d'imprimante, <a class="indexterm" href="#printing-spooldir">Créer le répertoire de file
	    d'attente</a></dt><dt>filesize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>Firefox, <a class="indexterm" href="#idp70137552">Firefox</a></dt><dt>firewall, <a class="indexterm" href="#firewalls">Firewalls ** Traduction en Cours **</a></dt><dd><dl><dt>IPFILTER, <a class="indexterm" href="#firewalls-ipf">The IPFILTER (IPF) Firewall</a></dt><dt>IPFW, <a class="indexterm" href="#firewalls-ipfw">IPFW</a></dt><dt>PF, <a class="indexterm" href="#firewalls-pf">The OpenBSD Packet Filter (PF) and
      ALTQ</a></dt><dt>rulesets, <a class="indexterm" href="#firewalls-concepts">Firewall Concepts</a></dt></dl></dd><dt>Fondation pour le Logiciel Libre, <a class="indexterm" href="#basics-info">Fichiers GNU Info</a></dt><dt>fonts</dt><dd><dl><dt>TrueType, <a class="indexterm" href="#truetype">Polices de caractères TrueType®</a></dt></dl></dd><dt>Fonts</dt><dd><dl><dt>LCD screen, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt></dl></dd><dt>FORTRAN, <a class="indexterm" href="#idp72291152">Quels filtres de conversion dois-je
	    installer?</a></dt><dt>Free Software Foundation, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a>, <a class="indexterm" href="#relnotes">A propos de cette version</a>, <a class="indexterm" href="#basics-info">Fichiers GNU Info</a></dt><dt>freebsd-update (voir mise à jour)</dt><dt>fréquence de balayage
	horizontale, <a class="indexterm" href="#idp69571280">Avant de commencer</a></dt><dt>fréquence de synchronisation
	verticale, <a class="indexterm" href="#idp69571280">Avant de commencer</a></dt><dt>FreshMeat, <a class="indexterm" href="#ports-finding-applications">Trouver votre application</a></dt><dt>FreshPorts, <a class="indexterm" href="#ports-finding-applications">Trouver votre application</a></dt><dt>FTP</dt><dd><dl><dt>anonyme, <a class="indexterm" href="#ftpanon">FTP anonyme</a>, <a class="indexterm" href="#network-services">Configuration des services réseaux
	supplémentaires</a>, <a class="indexterm" href="#idp83904208">Configuration</a>, <a class="indexterm" href="#idp83917392">Maintenance</a></dt><dt>mode passif, <a class="indexterm" href="#install-media">Choisir votre support d'installation</a></dt><dt>via proxy HTTP, <a class="indexterm" href="#install-media">Choisir votre support d'installation</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GateD, <a class="indexterm" href="#idp81871696">Utiliser GateD®</a></dt><dt>GEOM, <a class="indexterm" href="#GEOM-synopsis">Synopsis</a>, <a class="indexterm" href="#GEOM-striping">RAID0 - « Striping »</a>, <a class="indexterm" href="#GEOM-mirror">RAID1 - « mirroring »</a>, <a class="indexterm" href="#geom-glabel">Ajouter un label à un disque</a></dt><dt>gestionnaire d'impression
      LPD, <a class="indexterm" href="#printing-synopsis">Synopsis</a></dt><dt>Gestionnaire de démarrage, <a class="indexterm" href="#boot-introduction">Le problème du démarrage</a>, <a class="indexterm" href="#boot-blocks">Le gestionnaire de démarrage et les étapes de
      démarrage</a></dt><dt>Ghostscript, <a class="indexterm" href="#printing-advanced-ps">Emuler du PostScript® sur les imprimantes
	  non-PostScript®</a></dt><dt>GNOME, <a class="indexterm" href="#x11-wm-gnome-about">A propos de GNOME</a></dt><dd><dl><dt>polices de caractères
	    anticrénelage, <a class="indexterm" href="#x11-wm-gnome-antialias">Polices de caractères anticrénelage avec
	  GNOME</a></dt></dl></dd><dt>GNU General Public License (GPL), <a class="indexterm" href="#goals">Les objectifs du projet FreeBSD</a></dt><dt>GNU Lesser General Public License (LGPL), <a class="indexterm" href="#goals">Les objectifs du projet FreeBSD</a></dt><dt>GnuCash, <a class="indexterm" href="#idp70373712">GnuCash</a></dt><dt>Gnumeric, <a class="indexterm" href="#idp70386128">Gnumeric</a></dt><dt>GQview, <a class="indexterm" href="#idp70339536">GQview</a></dt><dt>graveur de CD</dt><dd><dl><dt>ATAPI, <a class="indexterm" href="#idp78065360">Introduction</a></dt><dt>pilote ATAPI/CAM, <a class="indexterm" href="#atapicam">Utilisation du pilote de périphérique
	ATAPI/CAM</a></dt></dl></dd><dt>Greenman, David, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>Grimes, Rod, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>groupes, <a class="indexterm" href="#users-groups">Groupes</a></dt><dt>groupes réseau, <a class="indexterm" href="#network-netgroups">Utiliser les groupes réseau
	(&#8220;netgroups&#8221;)</a></dt><dt>gv, <a class="indexterm" href="#idp70320208">gv</a></dt><dt>gzip, <a class="indexterm" href="#floppies-compress">Puis-je sauvegarder mes sauvegardes?</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>HCI, <a class="indexterm" href="#idp84629072">Interface de contrôle de l'hôte (HCI)</a></dt><dt>hiérarchie des répertoires, <a class="indexterm" href="#dirstructure">Organisation de l'arborescence des répertoires</a></dt><dt>hosts, <a class="indexterm" href="#idp75027280">/etc/hosts</a></dt><dt>hôtes virtuels, <a class="indexterm" href="#configtuning-virtual-hosts">Hôtes virtuels</a></dt><dt>HP-UX, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dt>Hubbard, Jordan, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>hw.ata.wc, <a class="indexterm" href="#idp75118160">hw.ata.wc</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>IEEE, <a class="indexterm" href="#idp78659280">pax</a></dt><dt>ifconfig, <a class="indexterm" href="#idp84500176">La commande ifconfig</a></dt><dt>IMAP, <a class="indexterm" href="#mail-using">Utilisation du courrier électronique</a>, <a class="indexterm" href="#pop-and-imap">Accès aux boîtes aux lettres distantes en
	  utilisant POP et
	  IMAP</a></dt><dt>impression en réseau, <a class="indexterm" href="#printing-advanced-network-rm">Imprimantes installées sur des machines
	  distantes</a></dt><dt>impression réseau, <a class="indexterm" href="#printing-advanced-network-printers">Imprimer via un réseau</a></dt><dt>imprimantes, <a class="indexterm" href="#idp80246096">Configuration de l'imprimante</a></dt><dd><dl><dt>fonctionnalités, <a class="indexterm" href="#printing-printcap">Mettre en place le gestionnaire d'impression: le
	  fichier /etc/printcap</a></dt><dt>parallèle, <a class="indexterm" href="#printing-ports">Les ports et les câbles</a>, <a class="indexterm" href="#printing-checking-parallel">Tester une imprimante parallèle</a></dt><dt>réseau, <a class="indexterm" href="#printing-advanced-network-printers">Imprimer via un réseau</a>, <a class="indexterm" href="#printing-advanced-network-rm">Imprimantes installées sur des machines
	  distantes</a></dt><dt>restreindre l'accès aux, <a class="indexterm" href="#printing-advanced-restricting">Restreindre l'utilisation de l'imprimante</a></dt><dt>série, <a class="indexterm" href="#printing-ports">Les ports et les câbles</a>, <a class="indexterm" href="#printing-checking-serial">Tester une imprimante série</a>, <a class="indexterm" href="#printing-commparam">Configurer les paramètres de communication du
	    gestionnaire d'impression</a>, <a class="indexterm" href="#printing-advanced-if-conversion">Gérer les travaux d'impression de texte brut sur
	  des imprimantes PostScript®</a></dt><dt>USB, <a class="indexterm" href="#printing-ports">Les ports et les câbles</a></dt></dl></dd><dt>imprimer, <a class="indexterm" href="#printing-synopsis">Synopsis</a></dt><dd><dl><dt>filtres, <a class="indexterm" href="#printing-textfilter">Installer le filtre texte</a>, <a class="indexterm" href="#printing-advanced-filter-intro">Les filtres</a>, <a class="indexterm" href="#printing-advanced-filters">Fonctionnement des filtres</a></dt><dd><dl><dt>apsfilter, <a class="indexterm" href="#printing-advanced-autoconv">Conversion automatique: une alternative aux filtres de
	    conversion</a></dt></dl></dd><dt>pages d'en-tête, <a class="indexterm" href="#printing-no-header-pages">Supprimer les pages d'en-tête</a></dt></dl></dd><dt>init, <a class="indexterm" href="#boot-introduction">Le problème du démarrage</a>, <a class="indexterm" href="#boot-init">Init: Initialisation de la gestion des processus</a></dt><dt>installation, <a class="indexterm" href="#install-synopsis">Synopsis</a>, <a class="indexterm" href="#bsdinstall-synopsis">Synopsis</a></dt><dd><dl><dt>à partir de bandes QIC/SCSI, <a class="indexterm" href="#idp67062608">Création d'une bande d'installation</a></dt><dt>dépannage, <a class="indexterm" href="#install-trouble">Dépannage</a>, <a class="indexterm" href="#bsdinstall-install-trouble">Dépannage</a></dt><dt>depuis MS-DOS, <a class="indexterm" href="#install-msdos">Installation depuis une partition MS-DOS®</a></dt><dt>disquettes, <a class="indexterm" href="#idp66995408">Création de disquettes d'installation</a></dt><dt>headless (console série), <a class="indexterm" href="#headless-install">Installer FreeBSD sur un système sans moniteur ou sans
	clavier</a></dt><dt>réseau</dt><dd><dl><dt>Ethernet, <a class="indexterm" href="#idp67069008">Avant d'installer via le réseau</a></dt><dt>FTP, <a class="indexterm" href="#install-media">Choisir votre support d'installation</a>, <a class="indexterm" href="#install-ftp">Création d'un site FTP local avec le disque FreeBSD</a></dt><dt>NFS, <a class="indexterm" href="#idp67105104">Avant d'installer par NFS</a></dt><dt>parallèle (PLIP), <a class="indexterm" href="#idp67069008">Avant d'installer via le réseau</a></dt><dt>série (SLIP ou PPP), <a class="indexterm" href="#idp67069008">Avant d'installer via le réseau</a></dt></dl></dd></dl></dd><dt>instantané, <a class="indexterm" href="#idp80529232">Qu'est-ce que FreeBSD-CURRENT?</a></dt><dt>Instantané de système de fichiers</dt><dd><dl><dt>Snapshot, <a class="indexterm" href="#snapshots">Instantané (&#8220;Snapshot&#8221;) d'un système de fichiers</a></dt></dl></dd><dt>interface en boucle, <a class="indexterm" href="#idp84190544">Un exemple</a></dt><dt>internationalisation (voir localisation)</dt><dt>Internet Software Consortium (ISC), <a class="indexterm" href="#idp83430224">Qu'est-ce que DHCP?</a></dt><dt>interpréteurs de commandes, <a class="indexterm" href="#shells">Interpréteurs de commandes - &#8220;Shells&#8221;</a></dt><dt>IP masquerading, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>IP sur liaison parallèle (voir PLIP)</dt><dt>IPsec, <a class="indexterm" href="#ipsec">IPsec</a></dt><dt>IPX/SPX, <a class="indexterm" href="#idp85204048">Ponts/Routeurs ISDN autonomes</a></dt><dt>IRQ, <a class="indexterm" href="#troubleshooting">Problèmes courants</a></dt><dt>ISA, <a class="indexterm" href="#sound-device">Configuration du système</a></dt><dt>ISDN, <a class="indexterm" href="#idp84843600">Coupe-feu filtrant/régulant le trafic</a></dt><dd><dl><dt>cartes, <a class="indexterm" href="#network-isdn-cards">Cartes ISDN</a></dt><dt>ponts/routeurs autonomes, <a class="indexterm" href="#idp85204048">Ponts/Routeurs ISDN autonomes</a></dt></dl></dd><dt>ISDN&#8212;(RNIS), <a class="indexterm" href="#network-isdn">ISDN</a></dt><dt>ISO 9660, <a class="indexterm" href="#idp78065360">Introduction</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>jails, <a class="indexterm" href="#jails">Environnements jail</a></dt><dt>JMA Wired, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>Jolitz, Bill, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt>KDE, <a class="indexterm" href="#x11-wm-kde">KDE</a></dt><dd><dl><dt>gestionnaire d'affichage, <a class="indexterm" href="#x11-wm-kde-kdm">Le gestionnaire d'affichage de KDE</a></dt></dl></dd><dt>Kerberos, <a class="indexterm" href="#kerberosIV">Kerberos</a></dt><dd><dl><dt>installation, <a class="indexterm" href="#idp76562640">Installation de Kerberos</a></dt></dl></dd><dt>kermit, <a class="indexterm" href="#idp81457360">Utiliser pppd comme client</a></dt><dt>kern.cam.scsi_delay, <a class="indexterm" href="#idp75126096">SCSI_DELAY
	(kern.cam.scsi_delay)</a></dt><dt>kern.ipc.somaxconn, <a class="indexterm" href="#idp75235408">kern.ipc.somaxconn</a></dt><dt>kern.maxfiles, <a class="indexterm" href="#kern-maxfiles">kern.maxfiles</a></dt><dt>kernel.old, <a class="indexterm" href="#boot-loader-examples">Exemples d'utilisation du chargeur</a></dt><dt>KLD (kernel loadable object), <a class="indexterm" href="#linuxemu-lbc-install">Installation</a>, <a class="indexterm" href="#idp84508496">Clients 802.11a &amp; 802.11g</a></dt><dt>KLD (module noyau chargeable), <a class="indexterm" href="#config-network-ndis">Utilisation des pilotes NDIS de Windows®</a></dt><dt>KMyMoney, <a class="indexterm" href="#idp70408784">KMyMoney</a></dt><dt>KOffice, <a class="indexterm" href="#idp70224720">KOffice</a></dt><dt>Konqueror, <a class="indexterm" href="#idp70192208">Konqueror</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>L2CAP, <a class="indexterm" href="#idp84656592">Protocole d'adaptation et de contrôle de lien
	logique (L2CAP)</a></dt><dt>Labels de disque, <a class="indexterm" href="#geom-glabel">Ajouter un label à un disque</a></dt><dt>LCD screen, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt><dt>LDAP, <a class="indexterm" href="#idp83984208">Paramètres de sécurité</a></dt><dt>lecteur zip, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>liens symboliques, <a class="indexterm" href="#idp73001808">Comment installer des bibliothèques
	  partagées supplémentaires</a></dt><dt>ligne de commande, <a class="indexterm" href="#shells">Interpréteurs de commandes - &#8220;Shells&#8221;</a></dt><dt>limitation du produit délai-bande passante
	    TCP</dt><dd><dl><dt>net.inet.tcp.inflight.enable, <a class="indexterm" href="#idp75268304">Le produit délai-bande passante TCP</a></dt></dl></dd><dt>limite souple, <a class="indexterm" href="#idp78970448">Définir les quotas</a></dt><dt>limite stricte, <a class="indexterm" href="#idp78970448">Définir les quotas</a></dt><dt>Linux, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dd><dl><dt>binaires ELF, <a class="indexterm" href="#idp73052368">Installer des binaires Linux ELF</a></dt><dt>installer les bibliothèques Linux, <a class="indexterm" href="#idp72981072">Installer les bibliothèques Linux</a></dt></dl></dd><dt>LISA, <a class="indexterm" href="#idp78688592">Quel est le meilleur programme de sauvegarde?</a></dt><dt>liste de diffusion, <a class="indexterm" href="#makeworld">Recompiler le système</a></dt><dt>locale, <a class="indexterm" href="#necessarylocales">&#8220;Locales&#8221; nécessaires</a>, <a class="indexterm" href="#using-localization">Utiliser la localisation</a></dt><dt>localisation, <a class="indexterm" href="#idp80019280">Qu'est-ce que I18N/L10N?</a></dt><dd><dl><dt>allemand, <a class="indexterm" href="#idp80304208">Localisation pour la langue allemande (valable également
	pour tous les langues respectant le standard ISO 8859-1)</a></dt><dt>chinois traditionnel, <a class="indexterm" href="#idp80294224">Localisation du chinois traditionnel pour Taiwan</a></dt><dt>coréenne, <a class="indexterm" href="#idp80307408">Localisation pour le japonais et le coréen</a></dt><dt>japonaise, <a class="indexterm" href="#idp80307408">Localisation pour le japonais et le coréen</a></dt><dt>russe, <a class="indexterm" href="#ru-localize">Russe (codage KOI8-R)</a></dt></dl></dd><dt>logiciels portés, <a class="indexterm" href="#ports-synopsis">Synopsis</a></dt><dd><dl><dt>désinstallation, <a class="indexterm" href="#ports-removing">Supprimer des logiciels portés installés</a></dt><dt>espace disque, <a class="indexterm" href="#ports-disk-space">Logiciels portés et espace disque</a></dt><dt>installation, <a class="indexterm" href="#ports-skeleton">Installation de logiciels portés</a></dt><dt>mise à jour, <a class="indexterm" href="#ports-upgrading">Mise à jour des logiciels portés</a></dt></dl></dd><dt>logiciels portés
      vidéo, <a class="indexterm" href="#video-ports">Logiciels portés et pré-compilés
      relatifs à la vidéo</a></dt><dt>logiciels pré-compilés, <a class="indexterm" href="#ports-synopsis">Synopsis</a></dt><dd><dl><dt>effacer, <a class="indexterm" href="#idp69095760">Effacer un logiciel pré-compilé</a></dt><dt>gestion, <a class="indexterm" href="#idp69058000">Gestion des logiciels pré-compilés</a></dt><dt>installation, <a class="indexterm" href="#idp69007696">Installation d'un logiciel pré-compilé</a></dt></dl></dd><dt>logiciels pré-compilés
      vidéo, <a class="indexterm" href="#video-ports">Logiciels portés et pré-compilés
      relatifs à la vidéo</a></dt><dt>ls, <a class="indexterm" href="#permissions">Permissions</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>machines sur deux réseaux, <a class="indexterm" href="#idp84322640">Machines sur deux réseaux</a></dt><dt>MacOS, <a class="indexterm" href="#idp76441424">Générer un unique mot de passe non
	réutilisable</a></dt><dt>make, <a class="indexterm" href="#make-buildworld">Compiler le nouveau système</a></dt><dt>make.conf, <a class="indexterm" href="#idp80680784">Contrôler /etc/make.conf</a></dt><dt>Master Boot Record (MBR), <a class="indexterm" href="#boot-introduction">Le problème du démarrage</a>, <a class="indexterm" href="#boot-boot0">Le gestionnaire de démarrage</a></dt><dt>maxproc, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>MD5, <a class="indexterm" href="#crypt">DES, MD5, et chiffrement</a></dt><dt>mémoire virtuelle, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>memorylocked, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>memoryuse, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>mencoder, <a class="indexterm" href="#video-mencoder">mencoder</a></dt><dt>mergemaster, <a class="indexterm" href="#mergemaster">mergemaster</a></dt><dt>Microsoft Windows, <a class="indexterm" href="#install-drive-bios-numbering">La numérotation des disques par le BIOS</a>, <a class="indexterm" href="#config-network-ndis">Utilisation des pilotes NDIS de Windows®</a>, <a class="indexterm" href="#network-samba">Serveur de fichiers et d'impression pour clients
      Microsoft® Windows® (Samba)</a>, <a class="indexterm" href="#idp84508496">Clients 802.11a &amp; 802.11g</a></dt><dd><dl><dt>pilotes de périphériques, <a class="indexterm" href="#config-network-ndis">Utilisation des pilotes NDIS de Windows®</a>, <a class="indexterm" href="#idp84508496">Clients 802.11a &amp; 802.11g</a></dt></dl></dd><dt>MIME, <a class="indexterm" href="#setting-locale">Configurer les &#8220;locales&#8221;</a>, <a class="indexterm" href="#startup-file">Méthode utilisant les fichiers d'initialisation de
	    l'interpréteur de commandes</a></dt><dt>mirroring, <a class="indexterm" href="#GEOM-mirror">RAID1 - « mirroring »</a></dt><dt>Mise à jour, <a class="indexterm" href="#updating-upgrading-freebsdupdate">Mise à jour de FreeBSD</a>, <a class="indexterm" href="#updating-upgrading-portsnap">Portsnap: un outil de mise à jour du catalogue des
      logiciels portés</a></dt><dt>MIT, <a class="indexterm" href="#idp76562640">Installation de Kerberos</a></dt><dt>mode dédié, <a class="indexterm" href="#disk-organization">Organisation des disques</a></dt><dt>mode miroir</dt><dd><dl><dt>Vinum, <a class="indexterm" href="#idp79543504">Intégrité des données</a></dt></dl></dd><dt>mode mono-utilisateur, <a class="indexterm" href="#boot-loader-examples">Exemples d'utilisation du chargeur</a>, <a class="indexterm" href="#boot-singleuser">Mode mono-utilisateur</a>, <a class="indexterm" href="#makeworld-singleuser">Passer en mode mono-utilisateur</a>, <a class="indexterm" href="#idp80834384">Redémarrer en mode mono-utilisateur</a></dt><dt>mode multi-utilisateur, <a class="indexterm" href="#boot-multiuser">Mode multi-utilisateur</a></dt><dt>mode multi-utilisateurs, <a class="indexterm" href="#makeworld-singleuser">Passer en mode mono-utilisateur</a></dt><dt>modem, <a class="indexterm" href="#idp81457360">Utiliser pppd comme client</a>, <a class="indexterm" href="#slips-prereqs">Prérequis</a>, <a class="indexterm" href="#idp85167568">Adaptateurs terminaux ISDN</a></dt><dt>mod_perl</dt><dd><dl><dt>Perl, <a class="indexterm" href="#idp83855696">mod_perl</a></dt></dl></dd><dt>mod_php</dt><dd><dl><dt>PHP, <a class="indexterm" href="#idp83864272">mod_php</a></dt></dl></dd><dt>mots de passe non réutilisables, <a class="indexterm" href="#one-time-passwords">Mots de passe non réutilisables</a></dt><dt>mount, <a class="indexterm" href="#headless-install">Installer FreeBSD sur un système sans moniteur ou sans
	clavier</a>, <a class="indexterm" href="#idp78744912">Après le désastre</a></dt><dt>mountd, <a class="indexterm" href="#idp82846544">Comment NFS fonctionne</a></dt><dt>moused, <a class="indexterm" href="#setting-console">Configuration de la console</a></dt><dt>Mozilla, <a class="indexterm" href="#idp70114384">Mozilla</a></dt><dd><dl><dt>désactiver l'anticrénelage des
	  polices de caractères, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt></dl></dd><dt>mplayer</dt><dd><dl><dt>compilation, <a class="indexterm" href="#video-mplayer-building">Compiler MPlayer</a></dt></dl></dd><dt>MPlayer</dt><dd><dl><dt>utiliser, <a class="indexterm" href="#video-mplayer-using">Utiliser MPlayer</a></dt></dl></dd><dt>MS-DOS, <a class="indexterm" href="#idp76441424">Générer un unique mot de passe non
	réutilisable</a></dt><dt>multi-tâche préemptif, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>MX record, <a class="indexterm" href="#mail-trouble">Dépannage</a>, <a class="indexterm" href="#idp83677264">Fichiers de zone</a></dt><dt>MySQL, <a class="indexterm" href="#l10n-compiling">Compiler des programmes I18N</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>NAT, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#idp84843600">Coupe-feu filtrant/régulant le trafic</a>, <a class="indexterm" href="#network-natoverview">Généralités</a></dt><dt>natd, <a class="indexterm" href="#network-natoverview">Généralités</a></dt><dt>navigateurs</dt><dd><dl><dt>web, <a class="indexterm" href="#desktop-browsers">Navigateurs</a></dt></dl></dd><dt>NDIS, <a class="indexterm" href="#config-network-ndis">Utilisation des pilotes NDIS de Windows®</a>, <a class="indexterm" href="#idp84508496">Clients 802.11a &amp; 802.11g</a></dt><dt>NDISulator, <a class="indexterm" href="#config-network-ndis">Utilisation des pilotes NDIS de Windows®</a>, <a class="indexterm" href="#idp84508496">Clients 802.11a &amp; 802.11g</a></dt><dt>net.inet.ip.portrange.*, <a class="indexterm" href="#idp75262800">net.inet.ip.portrange.*</a></dt><dt>Net/2, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>NetBIOS, <a class="indexterm" href="#idp83962832">Paramétrages généraux</a></dt><dt>NetBSD, <a class="indexterm" href="#relnotes">A propos de cette version</a>, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dt>Netcraft, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>newfs, <a class="indexterm" href="#idp78744912">Après le désastre</a></dt><dt>newsyslog.conf, <a class="indexterm" href="#idp75048400">newsyslog.conf</a></dt><dt>NFS, <a class="indexterm" href="#disks-virtual">Systèmes de fichiers réseaux, en mémoire
      et sauvegardés sur fichier</a>, <a class="indexterm" href="#idp79031376">Quotas avec NFS</a>, <a class="indexterm" href="#network-nfs">Système de fichiers réseau (NFS)</a></dt><dd><dl><dt>configuration, <a class="indexterm" href="#network-configuring-nfs">Configurer NFS</a></dt><dt>exemples d'exportation, <a class="indexterm" href="#network-configuring-nfs">Configurer NFS</a></dt><dt>installation de multiples machines, <a class="indexterm" href="#small-lan">Suivre les mises à jour pour plusieurs machines</a></dt><dt>montage, <a class="indexterm" href="#network-configuring-nfs">Configurer NFS</a></dt><dt>serveur, <a class="indexterm" href="#idp82846544">Comment NFS fonctionne</a></dt><dt>système sans disque dur, <a class="indexterm" href="#idp85027792">Configuration des serveurs TFTP et
	  NFS</a></dt><dt>utilisations, <a class="indexterm" href="#idp82937552">Exemples pratiques d'utilisation</a></dt></dl></dd><dt>nfsd, <a class="indexterm" href="#idp82846544">Comment NFS fonctionne</a></dt><dt>NIS, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dd><dl><dt>client, <a class="indexterm" href="#idp83067088">Type de machine</a></dt><dt>configuration du client, <a class="indexterm" href="#idp83190608">Configurer un client NIS</a></dt><dt>configuration du serveur, <a class="indexterm" href="#idp83118544">Configurer un serveur NIS maître</a></dt><dt>domaines, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dt>formats des mots de passe, <a class="indexterm" href="#idp83416272">Formats des mots de passe</a></dt><dt>nom de domaine, <a class="indexterm" href="#idp83104848">Choisir un nom de domaine NIS</a></dt><dt>serveur esclave, <a class="indexterm" href="#idp83067088">Type de machine</a>, <a class="indexterm" href="#idp83170000">Configurer un serveur NIS esclave</a></dt><dt>serveur maître, <a class="indexterm" href="#idp83067088">Type de machine</a></dt><dt>tables, <a class="indexterm" href="#idp83132240">Initialisation des tables NIS</a></dt></dl></dd><dt>NIS+, <a class="indexterm" href="#idp83984208">Paramètres de sécurité</a></dt><dt>nom d'hôte, <a class="indexterm" href="#idp75007952">Nom d'hôtes</a></dt><dt>nom de domaine, <a class="indexterm" href="#idp81684176">Ce que vous n'aurez à faire qu'une seule
	  fois</a></dt><dt>NOTES, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>Novell, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>noyau, <a class="indexterm" href="#boot-introduction">Le problème du démarrage</a></dt><dd><dl><dt>compilation, <a class="indexterm" href="#idp80791504">Compiler et installer un nouveau noyau</a></dt><dt>compiler / installer, <a class="indexterm" href="#kernelconfig-building">Compiler et installer un noyau sur mesure</a></dt><dt>compiler un noyau sur mesure, <a class="indexterm" href="#kernelconfig-synopsis">Synopsis</a></dt><dt>configuration, <a class="indexterm" href="#sound-device">Configuration du système</a>, <a class="indexterm" href="#idp81793360">Configuration du noyau</a>, <a class="indexterm" href="#network-natdkernconfiguration">Configuration</a></dt><dt>fichier de configuration, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>interaction au démarrage, <a class="indexterm" href="#boot-kernel">Interaction avec le noyau au démarrage</a></dt><dt>NOTES, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>options de démarrage, <a class="indexterm" href="#boot-kernel-bootflags">Options de démarrage du noyau</a></dt></dl></dd><dt>NTP, <a class="indexterm" href="#network-ntp">Synchronisation de l'horloge avec NTP</a></dt><dd><dl><dt>choisir les serveurs, <a class="indexterm" href="#idp84028880">Choisir les serveurs NTP appropriés</a></dt><dt>configuration, <a class="indexterm" href="#idp84032848">Configuration de votre machine</a></dt><dt>ntp.conf, <a class="indexterm" href="#idp84052816">Configuration générale</a></dt><dt>ntpd, <a class="indexterm" href="#idp84024144">Généralités</a></dt></dl></dd><dt>ntpdate, <a class="indexterm" href="#idp84042960">Configuration de base</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>OBEX, <a class="indexterm" href="#idp84801360">Le profil OBEX Object Push (OPUSH)</a></dt><dt>OpenBSD, <a class="indexterm" href="#relnotes">A propos de cette version</a>, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dt>openfiles, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>OpenOffice.org, <a class="indexterm" href="#idp70263888">OpenOffice.org</a></dt><dt>OpenSSH, <a class="indexterm" href="#openssh">OpenSSH</a></dt><dd><dl><dt>activation, <a class="indexterm" href="#idp76932176">Activer sshd</a></dt><dt>client, <a class="indexterm" href="#idp76937040">Client SSH</a></dt><dt>configuration, <a class="indexterm" href="#idp76978128">Configuration</a></dt><dt>copie sécurisée, <a class="indexterm" href="#idp76968400">Copie sécurisée</a></dt><dt>tunnel, <a class="indexterm" href="#security-ssh-tunneling">Tunnels SSH</a></dt></dl></dd><dt>OpenSSL</dt><dd><dl><dt>génération de certificats, <a class="indexterm" href="#idp76796496">Générer des certificats</a></dt></dl></dd><dt>Opera, <a class="indexterm" href="#idp70179024">Opera</a></dt><dt>optimisation</dt><dd><dl><dt>avec sysctl, <a class="indexterm" href="#configtuning-sysctl">Optimisation avec sysctl</a></dt></dl></dd><dt>Optimisation</dt><dd><dl><dt>limitations du noyau, <a class="indexterm" href="#configtuning-kernel-limits">Optimisation des limitations du noyau</a></dt></dl></dd><dt>optimisation de la configuration
	d'X11, <a class="indexterm" href="#idp69580752">Configurer X11</a></dt><dt>optimisation du noyau, <a class="indexterm" href="#linuxemu-kernel-tuning">Optimisation du noyau</a>, <a class="indexterm" href="#kerneltuning">Optimisation du noyau</a></dt><dt>optimisation du
      système, <a class="indexterm" href="#config-synopsis">Synopsis</a></dt><dt>options du noyau</dt><dd><dl><dt>BRIDGE, <a class="indexterm" href="#idp84855376">Modification de la configuration du noyau</a></dt><dt>cpu, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>ident, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>LINUX, <a class="indexterm" href="#linuxemu-lbc-install">Installation</a></dt><dt>machine, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>MROUTING, <a class="indexterm" href="#idp84381008">Routage multicast</a></dt><dt>MSDOSFS, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>NFS, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>NFS_ROOT, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt><dt>SCSI_DELAY, <a class="indexterm" href="#idp75126096">SCSI_DELAY
	(kern.cam.scsi_delay)</a></dt><dt>SMP, <a class="indexterm" href="#kernelconfig-config">Le fichier de configuration</a></dt></dl></dd><dt>organisation des partitions, <a class="indexterm" href="#idp74513104">Organisation des partitions</a></dt><dt>OS/2, <a class="indexterm" href="#idp77872208">Mode dédié</a></dt><dt>OSPF, <a class="indexterm" href="#network-dedicated-router">Mettre en place un routeur</a></dt><dt>outils GNU, <a class="indexterm" href="#idp73052368">Installer des binaires Linux ELF</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>page accounting, <a class="indexterm" href="#printing-advanced-lpf">lpf: un filtre texte</a></dt><dt>pages d'en-tête, <a class="indexterm" href="#printing-printcap">Mettre en place le gestionnaire d'impression: le
	  fichier /etc/printcap</a>, <a class="indexterm" href="#printing-advanced-header-pages">Pages d'en-tête</a></dt><dt>pages de manuel, <a class="indexterm" href="#basics-man">Les pages de manuel</a></dt><dt>Pair Networks, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>parité, <a class="indexterm" href="#printing-serial">Les ports série</a>, <a class="indexterm" href="#printing-checking-serial">Tester une imprimante série</a></dt><dt>Partage de connexion Internet, <a class="indexterm" href="#network-natoverview">Généralités</a></dt><dt>partition de pagination, <a class="indexterm" href="#swap-design">Partition de pagination</a></dt><dt>partition racine, <a class="indexterm" href="#idp78744912">Après le désastre</a></dt><dt>partitions, <a class="indexterm" href="#disk-organization">Organisation des disques</a>, <a class="indexterm" href="#disks-adding">Ajouter des disques</a></dt><dt>partitions BSD, <a class="indexterm" href="#idp77820112">Utiliser sysinstall(8)</a></dt><dt>passerelles, <a class="indexterm" href="#network-routing">Passerelles et routes</a></dt><dt>passwd, <a class="indexterm" href="#users-passwd">passwd</a></dt><dt>pax, <a class="indexterm" href="#idp78659280">pax</a></dt><dt>PCI, <a class="indexterm" href="#sound-device">Configuration du système</a></dt><dt>PCL, <a class="indexterm" href="#printing-testing">Vérifier la communication avec
	  l'imprimante</a></dt><dt>PDF</dt><dd><dl><dt>lecture, <a class="indexterm" href="#idp70308688">Acrobat Reader®</a>, <a class="indexterm" href="#idp70320208">gv</a>, <a class="indexterm" href="#idp70330448">Xpdf</a></dt></dl></dd><dt>permissions, <a class="indexterm" href="#permissions">Permissions</a></dt><dd><dl><dt>symboliques, <a class="indexterm" href="#idp68121168">Permissions symboliques</a></dt></dl></dd><dt>permissions de fichier, <a class="indexterm" href="#permissions">Permissions</a></dt><dt>personnes autorisées,
	      &#8220;committers&#8221;, <a class="indexterm" href="#development">Le mode de développement de FreeBSD</a></dt><dt>pilotes de périphériques
	    Windows, <a class="indexterm" href="#idp84508496">Clients 802.11a &amp; 802.11g</a></dt><dt>pilotes Windows, <a class="indexterm" href="#config-network-ndis">Utilisation des pilotes NDIS de Windows®</a></dt><dt>pkg_add, <a class="indexterm" href="#idp69007696">Installation d'un logiciel pré-compilé</a></dt><dt>pkg_delete, <a class="indexterm" href="#idp69095760">Effacer un logiciel pré-compilé</a></dt><dt>pkg_info, <a class="indexterm" href="#idp69058000">Gestion des logiciels pré-compilés</a></dt><dt>pkg_version, <a class="indexterm" href="#idp69058000">Gestion des logiciels pré-compilés</a></dt><dt>PLIP, <a class="indexterm" href="#network-plip">IP sur liaison parallèle (PLIP)</a></dt><dt>polices de caractères, <a class="indexterm" href="#idp73237712">Exécuter l'interface de Mathematica® via le
	réseau</a></dt><dd><dl><dt>anticrénelage, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt><dt>espacement, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt></dl></dd><dt>polices de caractères
	anticrénelage, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt><dt>POP, <a class="indexterm" href="#mail-using">Utilisation du courrier électronique</a>, <a class="indexterm" href="#pop-and-imap">Accès aux boîtes aux lettres distantes en
	  utilisant POP et
	  IMAP</a></dt><dt>port d'E/S, <a class="indexterm" href="#troubleshooting">Problèmes courants</a></dt><dt>port
		série, <a class="indexterm" href="#printing-checking-serial">Tester une imprimante série</a></dt><dt>Portaudit, <a class="indexterm" href="#security-portaudit">Surveillance des problèmes de sécurité
      relatifs aux programmes tierce-partie</a></dt><dt>portmanager, <a class="indexterm" href="#portmanager">Mise à jour des logiciels portés à
	  l'aide de Portmanager</a></dt><dt>portmap, <a class="indexterm" href="#idp83044048">Termes/processus à connaître</a></dt><dt>portmaster, <a class="indexterm" href="#portmaster">Mise à jour des logiciels portés à
	  l'aide de Portmaster</a></dt><dt>Portsnap (voir mise à jour)</dt><dt>portupgrade, <a class="indexterm" href="#portupgrade">Mise à jour des logiciels portés à
	  l'aide de portupgrade</a></dt><dt>POSIX, <a class="indexterm" href="#idp78659280">pax</a>, <a class="indexterm" href="#setting-locale">Configurer les &#8220;locales&#8221;</a></dt><dt>PostScript, <a class="indexterm" href="#printing-ports">Les ports et les câbles</a>, <a class="indexterm" href="#printing-testing">Vérifier la communication avec
	  l'imprimante</a></dt><dd><dl><dt>émulation, <a class="indexterm" href="#printing-advanced-ps">Emuler du PostScript® sur les imprimantes
	  non-PostScript®</a></dt><dt>lecture, <a class="indexterm" href="#idp70320208">gv</a></dt></dl></dd><dt>PPP, <a class="indexterm" href="#ppp-and-slip-synopsis">Synopsis</a>, <a class="indexterm" href="#mail-trouble">Dépannage</a>, <a class="indexterm" href="#idp85167568">Adaptateurs terminaux ISDN</a></dt><dd><dl><dt>client, <a class="indexterm" href="#idp81457360">Utiliser pppd comme client</a></dt><dt>PPP en mode utilisateur, <a class="indexterm" href="#ppp-and-slip-synopsis">Synopsis</a></dt><dt>PPP intégré au noyau, <a class="indexterm" href="#ppp-and-slip-synopsis">Synopsis</a>, <a class="indexterm" href="#idp81444560">Configurer PPP intégré au noyau</a></dt><dt>serveur, <a class="indexterm" href="#idp81444560">Configurer PPP intégré au noyau</a></dt><dt>sur ATM, <a class="indexterm" href="#pppoa">Utiliser PPP sur ATM (PPPoA)</a></dt><dt>sur Ethernet, <a class="indexterm" href="#ppp-and-slip-synopsis">Synopsis</a>, <a class="indexterm" href="#pppoe">Utiliser PPP sur Ethernet (PPPoE)</a></dt></dl></dd><dt>PPPoA (voir PPP, sur ATM)</dt><dt>PPPoE (voir PPP, sur Ethernet)</dt><dt>procédures de démarrage, <a class="indexterm" href="#consoles-login">Ouvrir une session sur un système FreeBSD</a></dt><dt>programmes de sauvegarde</dt><dd><dl><dt>Amanda, <a class="indexterm" href="#backups-programs-amanda">Amanda</a></dt><dt>cpio, <a class="indexterm" href="#idp78637136">cpio</a></dt><dt>dump / restore, <a class="indexterm" href="#idp78573008">Dump et Restore</a></dt><dt>pax, <a class="indexterm" href="#idp78659280">pax</a></dt><dt>tar, <a class="indexterm" href="#idp78612944">tar</a></dt></dl></dd><dt>Projet FreeBSD</dt><dd><dl><dt>historique, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>mode de développement, <a class="indexterm" href="#development">Le mode de développement de FreeBSD</a></dt><dt>objectifs, <a class="indexterm" href="#goals">Les objectifs du projet FreeBSD</a></dt></dl></dd><dt>propagation de route, <a class="indexterm" href="#idp84371792">Propagation de route</a></dt><dt>protection de la mémoire, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>protocole de contrôle de
	    flux, <a class="indexterm" href="#printing-serial">Les ports série</a></dt><dt>pw, <a class="indexterm" href="#users-pw">pw</a>, <a class="indexterm" href="#adm-setup">Configuration au niveau administrateur</a></dt></dl></div><div class="indexdiv"><h3>Q</h3><dl><dt>quotas, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>quotas disque, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a>, <a class="indexterm" href="#quotas">Quotas d'utilisation des disques</a></dt><dd><dl><dt>contrôle, <a class="indexterm" href="#idp78911824">Configurer votre système pour pouvoir utiliser
	les quotas d'utilisation des disques</a>, <a class="indexterm" href="#idp79017040">Consulter les quotas et l'utilisation des disques</a></dt><dt>limites, <a class="indexterm" href="#idp78970448">Définir les quotas</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>RAID, <a class="indexterm" href="#idp79520976">Les goulots d'étranglement d'accès aux
      données</a></dt><dd><dl><dt>CCD, <a class="indexterm" href="#ccd">Configuration du pilote de disque concaténé
	  (CCD &#8212; &#8220;Concatenated Disk Driver&#8221;)</a></dt><dt>Logiciel, <a class="indexterm" href="#ccd">Configuration du pilote de disque concaténé
	  (CCD &#8212; &#8220;Concatenated Disk Driver&#8221;)</a>, <a class="indexterm" href="#vinum">Le gestionnaire de volume Vinum</a></dt><dt>Matériel, <a class="indexterm" href="#raid-hard">RAID Matériel</a></dt><dt>niveau 1, <a class="indexterm" href="#idp79543504">Intégrité des données</a></dt><dt>Vinum, <a class="indexterm" href="#vinum">Le gestionnaire de volume Vinum</a></dt></dl></dd><dt>RAID-1, <a class="indexterm" href="#idp79543504">Intégrité des données</a></dt><dt>RAID-5, <a class="indexterm" href="#idp79543504">Intégrité des données</a></dt><dt>recompiler le système, <a class="indexterm" href="#makeworld">Recompiler le système</a></dt><dt>redirection d'adresses, <a class="indexterm" href="#network-natdaddress-redirection">Redirection d'adresses</a></dt><dt>Redundant</dt><dd><dl><dt>Array of Inexpensive Disks, <a class="indexterm" href="#idp79520976">Les goulots d'étranglement d'accès aux
      données</a></dt></dl></dd><dt>répertoire de squelettes, <a class="indexterm" href="#users-adduser">adduser</a></dt><dt>répertoires, <a class="indexterm" href="#permissions">Permissions</a></dt><dt>réseau sans fil, <a class="indexterm" href="#network-wireless">Réseau sans fil</a></dt><dd><dl><dt>chiffrement, <a class="indexterm" href="#idp84468560">Chiffrement</a></dt><dt>point d'accès, <a class="indexterm" href="#idp84408016">Construire un point d'accès avec FreeBSD</a></dt></dl></dd><dt>Réseau TCP/IP, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>réseau TCP/IP, <a class="indexterm" href="#slips-prereqs">Prérequis</a>, <a class="indexterm" href="#idp81807824">Configuration de slip.hosts</a></dt><dt>resolv.conf, <a class="indexterm" href="#idp75009616">/etc/resolv.conf</a></dt><dt>résolveur, <a class="indexterm" href="#idp83567440">Terminologie</a></dt><dt>restore, <a class="indexterm" href="#idp78573008">Dump et Restore</a></dt><dt>restrictions pour les utilisateurs, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dd><dl><dt>coredumpsize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>cputime, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>filesize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>maxproc, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>memorylocked, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>memoryuse, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>openfiles, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>quotas, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>sbsize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>stacksize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt></dl></dd><dt>RFCOMM, <a class="indexterm" href="#idp84677200">Protocole RFCOMM</a></dt><dt>RIP, <a class="indexterm" href="#idp81871696">Utiliser GateD®</a>, <a class="indexterm" href="#network-dedicated-router">Mettre en place un routeur</a></dt><dt>rmuser, <a class="indexterm" href="#users-rmuser">rmuser</a></dt><dt>routage, <a class="indexterm" href="#network-routing">Passerelles et routes</a></dt><dt>routage multicast, <a class="indexterm" href="#idp84381008">Routage multicast</a></dt><dt>route par
		  défaut, <a class="indexterm" href="#idp81684176">Ce que vous n'aurez à faire qu'une seule
	  fois</a>, <a class="indexterm" href="#idp84190544">Un exemple</a>, <a class="indexterm" href="#network-routing-default">Routes par défaut</a></dt><dt>routes statiques, <a class="indexterm" href="#idp81869648">Routes statiques</a></dt><dt>routeur, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#network-dedicated-router">Mettre en place un routeur</a>, <a class="indexterm" href="#idp84843600">Coupe-feu filtrant/régulant le trafic</a></dt><dt>rpcbind, <a class="indexterm" href="#idp82846544">Comment NFS fonctionne</a>, <a class="indexterm" href="#idp83044048">Termes/processus à connaître</a></dt><dt>RPMs, <a class="indexterm" href="#installingnecessaryrpms">Installer les RPMs nécessaires</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>sbsize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>scanners, <a class="indexterm" href="#scanners">Scanners</a></dt><dt>scp, <a class="indexterm" href="#idp76968400">Copie sécurisée</a></dt><dt>SCSI, <a class="indexterm" href="#install-drive-bios-numbering">La numérotation des disques par le BIOS</a></dt><dt>SDL, <a class="indexterm" href="#video-interface">Déterminer les capacités vidéo</a></dt><dt>SDP, <a class="indexterm" href="#idp84703184">Le protocole de découverte de service
	(SDP)</a></dt><dt>sécurité, <a class="indexterm" href="#security">Sécurité</a></dt><dd><dl><dt>attaques DoS (voir déni de service (DoS))</dt><dt>backdoors, <a class="indexterm" href="#security-intro">Introduction</a></dt><dt>chiffrement, <a class="indexterm" href="#crypt">DES, MD5, et chiffrement</a></dt><dt>comptes compromis, <a class="indexterm" href="#security-intro">Introduction</a></dt><dt>IPsec, <a class="indexterm" href="#ipsec">IPsec</a></dt><dt>mots de passe non réutilisables, <a class="indexterm" href="#one-time-passwords">Mots de passe non réutilisables</a></dt><dt>OpenSSH, <a class="indexterm" href="#openssh">OpenSSH</a></dt><dt>OpenSSL, <a class="indexterm" href="#openssl">OpenSSL</a></dt></dl></dd><dt>security</dt><dd><dl><dt>firewalls, <a class="indexterm" href="#firewalls">Firewalls ** Traduction en Cours **</a></dt></dl></dd><dt>sendmail, <a class="indexterm" href="#sendmail">Configuration de sendmail</a></dt><dt>serveur d'impression</dt><dd><dl><dt>clients Windows, <a class="indexterm" href="#network-samba">Serveur de fichiers et d'impression pour clients
      Microsoft® Windows® (Samba)</a></dt></dl></dd><dt>serveur de courrier, <a class="indexterm" href="#mail-host">Le serveur de courrier</a></dt><dt>serveur de fichiers</dt><dd><dl><dt>clients UNIX, <a class="indexterm" href="#idp82846544">Comment NFS fonctionne</a></dt><dt>clients Windows, <a class="indexterm" href="#network-samba">Serveur de fichiers et d'impression pour clients
      Microsoft® Windows® (Samba)</a></dt></dl></dd><dt>serveur de polices de caractères
	  True Type pour X11, <a class="indexterm" href="#idp80200656">Affichage des polices de caractères</a></dt><dt>serveur DNS, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>serveur Samba, <a class="indexterm" href="#network-samba">Serveur de fichiers et d'impression pour clients
      Microsoft® Windows® (Samba)</a></dt><dt>serveurs de noms de
	      domaines, <a class="indexterm" href="#idp81684176">Ce que vous n'aurez à faire qu'une seule
	  fois</a></dt><dt>serveurs FTP, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#network-ftp">Protocole de transfert de fichiers (FTP)</a></dt><dt>serveurs web, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dd><dl><dt>configuration, <a class="indexterm" href="#network-apache">Serveur HTTP Apache</a></dt><dt>sécurisé, <a class="indexterm" href="#idp83842128">mod_ssl</a></dt></dl></dd><dt>services, <a class="indexterm" href="#configtuning-starting-services">Démarrer des services</a></dt><dt>shutdown, <a class="indexterm" href="#boot-shutdown">Séquence d'arrêt du système</a></dt><dt>signal 11, <a class="indexterm" href="#idp81024080">Questions</a></dt><dt>slices, <a class="indexterm" href="#disk-organization">Organisation des disques</a></dt><dt>SLIP, <a class="indexterm" href="#ppp-and-slip-synopsis">Synopsis</a>, <a class="indexterm" href="#slip">Utiliser SLIP</a>, <a class="indexterm" href="#idp81793360">Configuration du noyau</a>, <a class="indexterm" href="#idp81807824">Configuration de slip.hosts</a></dt><dd><dl><dt>client, <a class="indexterm" href="#slipc">Configurer un client SLIP</a></dt><dt>routage, <a class="indexterm" href="#idp81866960">A propos du routage</a></dt><dt>se connecter avec, <a class="indexterm" href="#idp81713872">Etablir une connexion SLIP </a></dt><dt>serveur, <a class="indexterm" href="#slips">Configurer un serveur SLIP</a></dt></dl></dd><dt>SMTP, <a class="indexterm" href="#mail-config">Basic Configuration</a></dt><dt>Soft Updates, <a class="indexterm" href="#soft-updates">Les &#8220;Soft Updates&#8221;</a></dt><dd><dl><dt>détails, <a class="indexterm" href="#idp75142992">Plus de détails à propos des
	  &#8220;Soft Updates&#8221;</a></dt></dl></dd><dt>Solaris, <a class="indexterm" href="#idp74390480">Comme ça marche?</a>, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt><dt>Sony Japan, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>Sophos Anti-Virus, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>sous-réseau, <a class="indexterm" href="#network-routing">Passerelles et routes</a>, <a class="indexterm" href="#idp84190544">Un exemple</a></dt><dt>sous-réseau IP, <a class="indexterm" href="#idp84836944">Introduction</a></dt><dt>SRM, <a class="indexterm" href="#idp63172944">Architecture FreeBSD/alpha</a></dt><dt>SSH</dt><dd><dl><dt>sshd, <a class="indexterm" href="#ssh-login">Autoriser les ouvertures de session SSH</a></dt></dl></dd><dt>SSL, <a class="indexterm" href="#idp83842128">mod_ssl</a></dt><dt>stacksize, <a class="indexterm" href="#users-limiting">Mettre en place des restrictions pour les utilisateurs</a></dt><dt>station de travail sans disque
      dur, <a class="indexterm" href="#network-diskless">Système sans disque dur</a></dt><dt>Striping, <a class="indexterm" href="#GEOM-striping">RAID0 - « Striping »</a></dt><dt>striping</dt><dd><dl><dt>Vinum, <a class="indexterm" href="#idp79520976">Les goulots d'étranglement d'accès aux
      données</a></dt></dl></dd><dt>su, <a class="indexterm" href="#idp77820112">Utiliser sysinstall(8)</a></dt><dt>suite de bureautique</dt><dd><dl><dt>KOffice, <a class="indexterm" href="#idp70224720">KOffice</a></dt><dt>OpenOffice.org, <a class="indexterm" href="#idp70263888">OpenOffice.org</a></dt></dl></dd><dt>SunOS, <a class="indexterm" href="#kernelconfig-building">Compiler et installer un noyau sur mesure</a>, <a class="indexterm" href="#idp83104848">Choisir un nom de domaine NIS</a></dt><dt>Supervalu, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>support DTrace (voir DTrace)</dt><dt>sysctl, <a class="indexterm" href="#configtuning-sysctlconf">sysctl.conf</a>, <a class="indexterm" href="#configtuning-sysctl">Optimisation avec sysctl</a></dt><dt>sysctl.conf, <a class="indexterm" href="#configtuning-sysctlconf">sysctl.conf</a></dt><dt>sysinstall, <a class="indexterm" href="#setting-console">Configuration de la console</a>, <a class="indexterm" href="#idp83442512">Intégration dans FreeBSD</a></dt><dd><dl><dt>ajout de disque, <a class="indexterm" href="#idp77820112">Utiliser sysinstall(8)</a></dt></dl></dd><dt>syslog, <a class="indexterm" href="#idp83917392">Maintenance</a></dt><dt>syslog.conf, <a class="indexterm" href="#idp75043408">syslog.conf</a></dt><dt>système de fichiers racine, <a class="indexterm" href="#mount-unmount">Monter et démonter des systèmes de fichiers</a></dt><dd><dl><dt>système sans disque dur, <a class="indexterm" href="#idp85080784">Préparer le système de fichiers
	  racine</a></dt></dl></dd><dt>Système de gestion des disques GEOM (voir GEOM)</dt><dt>système sans disque
      dur, <a class="indexterm" href="#network-diskless">Système sans disque dur</a></dt><dd><dl><dt>/usr en lecture seule, <a class="indexterm" href="#idp85131856">Utilisation d'un /usr en lecture
	    seule</a></dt><dt>configuration du noyau, <a class="indexterm" href="#idp85068368">Compilation d'un noyau pour système sans disque
	  dur</a></dt></dl></dd><dt>système X Window, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dd><dl><dt>(voir aussi XFree86)</dt><dt>Accelerated-X, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>XFree86, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt></dl></dd><dt>systèmes de fichiers</dt><dd><dl><dt>démontage, <a class="indexterm" href="#disks-umount">La commande umount</a></dt><dt>HFS, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>ISO 9660, <a class="indexterm" href="#idp78065360">Introduction</a>, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>Joliet, <a class="indexterm" href="#mkisofs">mkisofs</a></dt><dt>montage, <a class="indexterm" href="#disks-mount">La commande mount</a></dt><dt>montés avec fstab, <a class="indexterm" href="#disks-fstab">Le fichier fstab</a></dt></dl></dd><dt>sysutils/cdrtools, <a class="indexterm" href="#idp78065360">Introduction</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>table de clavier, <a class="indexterm" href="#setting-console">Configuration de la console</a></dt><dt>table de correspondance d'affichage, <a class="indexterm" href="#setting-console">Configuration de la console</a></dt><dt>tableur</dt><dd><dl><dt>Abacus, <a class="indexterm" href="#idp70395856">Abacus</a></dt><dt>Gnumeric, <a class="indexterm" href="#idp70386128">Gnumeric</a></dt><dt>KMyMoney, <a class="indexterm" href="#idp70408784">KMyMoney</a></dt></dl></dd><dt>tar, <a class="indexterm" href="#floppies-compress">Puis-je sauvegarder mes sauvegardes?</a>, <a class="indexterm" href="#idp78612944">tar</a></dt><dt>TCP Wrapper, <a class="indexterm" href="#idp83208016">Sécurité du NIS</a></dt><dt>TCP Wrappers, <a class="indexterm" href="#tcpwrappers">L'encapsuleur TCP (« TCP Wrappers »)</a></dt><dt>TELEHOUSE America, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>tempêtes d'interruptions, <a class="indexterm" href="#idp75475024">Blocages du système (temporaires ou permanents)</a></dt><dt>terminaux, <a class="indexterm" href="#consoles">Consoles virtuelles &amp; terminaux</a></dt><dt>TeX, <a class="indexterm" href="#printing-intro-why">Pourquoi vous devriez utiliser le gestionnaire
	d'impression</a></dt><dd><dl><dt>imprimer des fichiers DVI, <a class="indexterm" href="#idp72275920">Pourquoi installer des filtres de conversion?</a></dt></dl></dd><dt>TFTP</dt><dd><dl><dt>système sans disque dur, <a class="indexterm" href="#idp85027792">Configuration des serveurs TFTP et
	  NFS</a></dt></dl></dd><dt>The GIMP, <a class="indexterm" href="#idp70244048">The GIMP</a></dt><dt>traceroute, <a class="indexterm" href="#idp84375120">En cas de problème</a></dt><dt>Traitement symétrique multiprocesseurs (SMP), <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>tranches, <a class="indexterm" href="#disk-organization">Organisation des disques</a>, <a class="indexterm" href="#disks-adding">Ajouter des disques</a></dt><dt>travaux d'impression, <a class="indexterm" href="#printing-intro-spooler">Introduction</a>, <a class="indexterm" href="#printing-spooldir">Créer le répertoire de file
	    d'attente</a>, <a class="indexterm" href="#printing-advanced-if-conversion">Gérer les travaux d'impression de texte brut sur
	  des imprimantes PostScript®</a>, <a class="indexterm" href="#printing-advanced-restricting-sizes">Contrôler la taille des travaux d'impression</a></dt><dd><dl><dt>contrôle, <a class="indexterm" href="#printing-advanced-restricting-sizes">Contrôler la taille des travaux d'impression</a></dt></dl></dd><dt>troff, <a class="indexterm" href="#printing-advanced-filters">Fonctionnement des filtres</a></dt><dt>Tru64 UNIX, <a class="indexterm" href="#idp83132240">Initialisation des tables NIS</a></dt><dt>TrueType Fonts, <a class="indexterm" href="#truetype">Polices de caractères TrueType®</a></dt><dt>tunefs, <a class="indexterm" href="#soft-updates">Les &#8220;Soft Updates&#8221;</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>U.C. Berkeley, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a>, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a>, <a class="indexterm" href="#relnotes">A propos de cette version</a></dt><dt>UDP, <a class="indexterm" href="#idp83439184">Comment cela fonctionne-t-il?</a></dt><dt>Unicode, <a class="indexterm" href="#idp80212688">Noyau et systèmes de fichiers</a></dt><dt>UNIX, <a class="indexterm" href="#permissions">Permissions</a></dt><dt>USB</dt><dd><dl><dt>disques, <a class="indexterm" href="#usb-disks">Périphériques de stockage USB</a></dt></dl></dd><dt>USENET, <a class="indexterm" href="#os-overview">Que peut faire FreeBSD?</a></dt><dt>utilisateurs</dt><dd><dl><dt>les sites importants utilisant FreeBSD, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt></dl></dd><dt>Utiliser fetchmail, <a class="indexterm" href="#mail-fetchmail">Utiliser fetchmail</a></dt><dt>Utiliser procmail, <a class="indexterm" href="#mail-procmail">Utiliser procmail</a></dt><dt>UUCP, <a class="indexterm" href="#mail-trouble">Dépannage</a></dt></dl></div><div class="indexdiv"><h3>V</h3><dl><dt>variables d'environnement, <a class="indexterm" href="#shells">Interpréteurs de commandes - &#8220;Shells&#8221;</a></dt><dt>vfs.hirunningspace, <a class="indexterm" href="#idp75110992">vfs.hirunningspace</a></dt><dt>vfs.vmiodirenable, <a class="indexterm" href="#idp75105488">vfs.vmiodirenable</a></dt><dt>vfs.write_behind, <a class="indexterm" href="#idp75108048">vfs.write_behind</a></dt><dt>vi, <a class="indexterm" href="#editors">Editeurs de texte</a></dt><dt>Vinum, <a class="indexterm" href="#vinum-intro">Les disques sont trop petits</a></dt><dd><dl><dt>concaténation, <a class="indexterm" href="#idp79520976">Les goulots d'étranglement d'accès aux
      données</a></dt><dt>mode miroir, <a class="indexterm" href="#idp79543504">Intégrité des données</a></dt><dt>striping, <a class="indexterm" href="#idp79520976">Les goulots d'étranglement d'accès aux
      données</a></dt></dl></dd><dt>vipw, <a class="indexterm" href="#adm-setup">Configuration au niveau administrateur</a></dt><dt>vitesse de
	    transmission, <a class="indexterm" href="#printing-serial">Les ports série</a></dt><dt>vm.swap_idle_enabled, <a class="indexterm" href="#idp75114448">vm.swap_idle_enabled</a></dt><dt>Volume</dt><dd><dl><dt>Gestionnaire, <a class="indexterm" href="#vinum-intro">Les disques sont trop petits</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>Walnut Creek CDROM, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>Weathernews, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>WEP, <a class="indexterm" href="#idp84471888">WEP</a></dt><dt>Williams, Nate, <a class="indexterm" href="#intro-history">Un court historique de FreeBSD</a></dt><dt>Windows, <a class="indexterm" href="#idp76441424">Générer un unique mot de passe non
	réutilisable</a></dt><dt>Windows NT, <a class="indexterm" href="#idp83032656">Qu'est-ce que c'est?</a></dt></dl></div><div class="indexdiv"><h3>X</h3><dl><dt>X Display Manager, <a class="indexterm" href="#idp69819856">Généralités</a></dt><dt>X11, <a class="indexterm" href="#x-config">Configuration d'X11</a></dt><dt>X11 Input Method (XIM), <a class="indexterm" href="#idp80208720">Saisie de caractères non-anglais</a></dt><dt>XML, <a class="indexterm" href="#antialias">Polices de caractères anticrénelage</a></dt><dt>Xorg, <a class="indexterm" href="#x-config">Configuration d'X11</a></dt><dt>xorg.conf, <a class="indexterm" href="#idp69580752">Configurer X11</a></dt><dt>Xpdf, <a class="indexterm" href="#idp70330448">Xpdf</a></dt><dt>XVideo, <a class="indexterm" href="#video-interface">Déterminer les capacités vidéo</a></dt></dl></div><div class="indexdiv"><h3>Y</h3><dl><dt>Yahoo!, <a class="indexterm" href="#idp62769488">Qui utilise FreeBSD?</a></dt><dt>yellow pages (voir NIS)</dt></dl></div><div class="indexdiv"><h3>Z</h3><dl><dt>zone racine, <a class="indexterm" href="#idp83567440">Terminologie</a></dt><dt>zones</dt><dd><dl><dt>exemples, <a class="indexterm" href="#idp83567440">Terminologie</a></dt></dl></dd></dl></div></div></div><div class="colophon"><h1 class="title"><a id="colophon"></a>Achevé d'imprimer</h1><p>Cet ouvrage est le travail combiné de centaines de contributeurs
    au <span class="quote">« <span class="quote">Groupe de Documentation de FreeBSD</span> »</span>.  Le texte est
    écrit en XML en respectant la DTD DocBook et est formaté à
    partir du XML dans de nombreux différents formats de présentation
    en utilisant XSLT.  La version imprimée de ce document n'aurait
    pas été possible sans le langage de formatage <span class="application">TeX</span> de Donald
    Knuth,
    <span class="application">LaTeX</span> de Leslie Lamport, ou l'ensemble de
    macro <span class="application">JadeTeX</span> de Sebastian Rahtz.</p></div></div></body></html>