<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>7. Utiliser les polices &#8220;Type 1&#8221; avec Groff</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD et les polices de caractères" /><link rel="up" href="index.html" title="FreeBSD et les polices de caractères" /><link rel="prev" href="ar01s06.html" title="6. Utiliser les polices &#8220;Type 1&#8221; avec GhostScript" /><link rel="next" href="ar01s08.html" title="8. Peut-on utiliser des polices &#8220;True Type&#8221;?" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Utiliser les polices &#8220;Type 1&#8221; avec Groff</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s06.html">Précédent</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s08.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp64153296"></a>7. Utiliser les polices &#8220;Type 1&#8221; avec Groff</h2></div></div></div><p>Maintenant que nous pouvons utiliser la nouvelle police avec X11 et
      GhostScript, comment faire pour s'en servir aussi avec groff? Tout
      d'abord, comme nous nous occupons de polices PostScript
      &#8220;Type 1&#8221;, le périphérique groff à utiliser est
      <code class="filename">ps</code>. Il faut créer un fichier de police pour
      chaque police utilisée par groff. Le nom d'une police groff se résume à un
      fichier dans le répertoire
      <code class="filename">/usr/share/groff_font/devps</code>. Dans notre exemple, ce
      pourrait être <code class="filename">/usr/share/groff_font/devps/SHOWBOAT</code>.
      Il faut créer ce fichier avec les outils fournis par groff.</p><p>Le premier outil est <code class="filename">afmtodit</code>. Il n'est pas
      normalement installé et doit donc être extrait de la distribution sous
      forme de sources. Je me suis aperçu qu'il fallait modifier la première
      ligne du fichier, voici donc ce que j'ai fait:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cp /usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.pl /tmp</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ex /tmp/afmtodit.pl</code></strong>
<strong class="userinput"><code>:1c</code></strong>
<strong class="userinput"><code>#!/usr/bin/perl -P-</code></strong>
<strong class="userinput"><code>.</code></strong>
<strong class="userinput"><code>:wq</code></strong></pre></div><p>Cet outil crée le fichier de police groff à partir du fichier de
      dimensions de la police (suffixe <code class="filename">.afm</code>). Pour
      continuer avec notre exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>De nombreux fichiers <code class="filename">.afm</code> sont au
          format Mac... avec des lignes terminées par des ^M</em></span></p><p>Il faut les convertir au style Unix avec des lignes terminées par
          des ^J</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>cat /usr/local/share/fonts/type1/showboat.afm |</code></strong>
       <strong class="userinput"><code>tr '\015' '\012' &gt;showboat.afm</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Créons maintenant le fichier de police
          groff</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /usr/share/groff_font/devps</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>/tmp/afmtodit.pl -d DESC -e text.enc /tmp/showboat.afm generate/textmap SHOWBOAT</code></strong></pre></div></li></ul></div><p>La police peut maintenant être référencée par le nom SHOWBOAT.</p><p>Si l'on utilise GhostScript pour piloter les imprimantes du système,
      il n'y a rien d'autre à faire. Si, par contre, l'on utilise de vraies
      imprimantes PostScript, il faut alors charger la police sur l'imprimante
      pour pouvoir l'utiliser (à moins que l'imprimante ne dispose de la police
      &#8220;showboat&#8221; en interne ou sur une disquette de polices
      accessible). La dernière étape consiste à créer la police chargeable.
      L'outil <code class="filename">pfbtops</code> est utilisé pour créer le format
      <code class="filename">.pfa</code> de la police et le fichier
      <code class="filename">download</code> est modifié pour faire référence à la
      nouvelle police. Le fichier <code class="filename">download</code> doit indiquer le
      nom interne de la police. Ce nom peut être facilement connu à l'aide du
      fichier de police groff, comme le montre l'exemple:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Créer le fichier de police
          <code class="filename">.pfa</code></em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>fgrep internalname SHOWBOAT</code></strong>
internalname Showboat</pre></div></li><li class="listitem"><p><span class="emphasis"><em>Dire à groff qu'il faut charger la
          police</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>ex download</code></strong>
<strong class="userinput"><code>:$a</code></strong>
<strong class="userinput"><code>Showboat      showboat.pfa</code></strong>
<strong class="userinput"><code>.</code></strong>
<strong class="userinput"><code>:wq</code></strong></pre></div></li></ul></div><p>Pour tester la police:</p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>cd /tmp</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>cat &gt;exemple.t &lt;&lt;EOF</code></strong>
<strong class="userinput"><code>.sp 5</code></strong>
<strong class="userinput"><code>.ps 15</code></strong>
<strong class="userinput"><code>C'est un exemple de police Showboat:</code></strong>
<strong class="userinput"><code>.br</code></strong>
<strong class="userinput"><code>.ps 48</code></strong>
<strong class="userinput"><code>.vs (\n(.s+2)p</code></strong>
<strong class="userinput"><code>.sp</code></strong>
<strong class="userinput"><code>.ft SHOWBOAT</code></strong>
<strong class="userinput"><code>ABCDEFGHI</code></strong>
<strong class="userinput"><code>.br</code></strong>
<strong class="userinput"><code>JKLMNOPQR</code></strong>
<strong class="userinput"><code>.br</code></strong>
<strong class="userinput"><code>STUVWXYZ</code></strong>
<strong class="userinput"><code>.sp</code></strong>
<strong class="userinput"><code>.ps 16</code></strong>
<strong class="userinput"><code>.vs (\n(.s+2)p</code></strong>
<strong class="userinput"><code>.fp 5 SHOWBOAT</code></strong>
<strong class="userinput"><code>.ft 5</code></strong>
<strong class="userinput"><code>Utilisée comme première lettre d'un paragraphe. Cela ressemblera à:</code></strong>
<strong class="userinput"><code>.sp50p</code></strong>
<strong class="userinput"><code>\s(48\f5V\s0\fRoici la première phrase d'un paragraphe qui utilise</code></strong>
<strong class="userinput"><code>la police showboat pour sa première lettre. Il faut augmenter</code></strong>
<strong class="userinput"><code>l'espacement vertical pour laisser de la place pour la première</code></strong>
<strong class="userinput"><code>lettre.</code></strong>
<strong class="userinput"><code>EOF</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>groff -Tps exemple.t &gt;exemple.ps</code></strong></pre></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Pour utiliser GhostScript/GhostView</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>ghostview exemple.ps</code></strong></pre></div></li><li class="listitem"><p><span class="emphasis"><em>Pour l'imprimer</em></span></p><div class="informalexample"><pre class="screen"><code class="prompt">bash$</code> <strong class="userinput"><code>lpr -Ppostscript exemple.ps</code></strong></pre></div></li></ul></div><p>Références:
      <code class="filename">/usr/src/gnu/usr.bin/groff/afmtodit/afmtodit.man</code>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff_font&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">groff_font</span>(5)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=groff_char&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">groff_char</span>(5)</span></a>,
      <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=pfbtops&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">pfbtops</span>(1)</span></a>.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s06.html">Précédent</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s08.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">6. Utiliser les polices &#8220;Type 1&#8221; avec GhostScript </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 8. Peut-on utiliser des polices &#8220;True Type&#8221;?</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>