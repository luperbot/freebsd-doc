<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>11.8. Comment mettre en place un login dialup sur mon modem?</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Questions Fréquemment Posées sur FreeBSD 2.X, 3.X et 4.X" /><link rel="up" href="serial.html" title="Chapitre 11. Communications par port série. **Mise à jour en cours**" /><link rel="prev" href="ch11s07.html" title="11.7. Puis-je définir les paramètres par défaut de la liaison série pour un port?" /><link rel="next" href="ch11s09.html" title="11.9. Comment connecter un terminal sur mon système FreeBSD?" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.8. Comment mettre en place un login dialup sur mon modem?</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch11s07.html">Précédent</a> </td><th width="60%" align="center">Chapitre 11. Communications par port série. **Mise à jour en cours**</th><td width="20%" align="right"> <a accesskey="n" href="ch11s09.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp68340048"></a>11.8. Comment mettre en place un login dialup sur mon modem?</h2></div></div></div><p>Vous voulez devenir fournisseur d'accès à l'Internet ?
	Pour commencer vous devez disposer de plus d'un modem pouvant
	répondre automatiquement. Votre modem doit pouvoir detecter
une émission de porteuse lorsque qu'elle se présente et ne doit pas en
détecter constemment. Il doit aussi etre capable de racrocher la ligne
lorsqu'il détecte le passage de 1 à 0 du signal <span class="emphasis"><em>DTR</em></span>. Il doit aussi utiliser un controle de flux
de type  <span class="emphasis"><em> RTS/CTS </em></span> ou aucun controle
de flus. Enfin, il doit etre capable de négocier la vitesse de
transmission entre lui-même et le modem distant tout en gardant
une vitesse constante vis à vis de l'ordinateur.</p><p>Pour la plupart des modems comprennant les commande Hayes,
cette commande met en place les bonnes valeurs et les enregistre en
mémoire morte:</p><pre class="programlisting">
AT &amp;C1 &amp;D3 &amp;K3 &amp;Q6 S0=1 &amp;W
</pre><p>Voyez la section sur l'envoi direct de commandes AT, pour
savoir comment les mettre en place sans avoir besoin de lancer un
émulateur de terminal sous MS-DOS.</p><p>Ensuite créez une entrée dans <a class="link" href="http://www.freebsd.org/cgi/man.cgi?ttys" target="_top"> /etc/ttys </a> pour
 le modem. Ce fichier comporte tous les ports sur lesquels le système
d'exploitation attend des commandes de login. Ajoutez une ligne
ressemblant à celle ci:
</p><pre class="programlisting">
 ttyd1 "/usr/libexec/getty std.57600" dialup on insecure
</pre><p>Cette ligne indique que sur le deuxième port série
(<span class="emphasis"><em>/dev/ttyd1</em></span>) est attaché un modem
dialoguant à 57600 bauds sans parité (<span class="emphasis"><em>std.57600</em></span>) se  trouvant dans le fichier <a class="link" href="http://www.freebsd.org/cgi/man.cgi?gettytab" target="_top"> /etc/gettytab
</a>). Le type de terminal est ``dialup''. Le port est ``on'' et
``insecure'' -- ce qui veut dire que les logins sous root ne sont pas
autorisés sur ce port. Pour utiliser d'autres ports en entrée,
utilisez les autres entrées <span class="emphasis"><em> ttydX </em></span>.
</p><p>Il est d'usage courant d'utiliser ``dialup'' comme type de
terminal. Beaucoup d'utilisateurs affichent un prompt dans leur
.profile ou .login si le type de terminal est ``dialup''. L'exemple
ci-dessus affecte au port le mode ``insecure''. Pour passer root, vous
 devez donc vous logguer en temps qu'utilisateur ordinaire et utiliser
la commande <a class="link" href="http://www.freebsd.org/cgi/man.cgi?su" target="_top"> su
</a> pour devenir <span class="emphasis"><em>root</em></span>. Si vous
définissez le port en tant que ``secure'', alors vous pourrez vous
logguer sous <span class="emphasis"><em>root </em></span> directement.</p><p>Après avoir effectué les modifications au fichier <a class="link" href="http://www.freebsd.org/cgi/man.cgi?ttys" target="_top"> /etc/ttys </a>,
vous devez envoyer un signal <span class="emphasis"><em> HUP </em></span> au
processus <a class="link" href="http://www.freebsd.org/cgi/man.cgi?init" target="_top"> init
</a>
</p><pre class="programlisting">
 kill -HUP 1
</pre><p> Cela force le processus init à relire le fichier <a class="link" href="http://www.freebsd.org/cgi/man.cgi?ttys" target="_top"> /etc/ttys</a>. Le
processus init démarrera donc des processus getty sur tous les ports
marqués comme <span class="quote">« <span class="quote">on</span> »</span>. Vous pouvez alors vérifiez que le login est
possible sur le port en tapant :
</p><pre class="programlisting">
ps -ax | grep '[t]tyd1'
</pre><p>Et vous devez voir apparaitre quelque chose comme
ceci:</p><pre class="programlisting">
747 ??  I      0:00.04 /usr/libexec/getty std.57600 ttyd1
</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch11s07.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="serial.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="ch11s09.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">11.7. Puis-je définir les paramètres par défaut de la liaison série pour un port? </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 11.9. Comment connecter un terminal sur mon système FreeBSD?</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>