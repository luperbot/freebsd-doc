<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>4.12.  FreeBSD 2.0 panique avec ``kmem_map too small!''</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Questions Fréquemment Posées sur FreeBSD 2.X, 3.X et 4.X" /><link rel="up" href="troubleshoot.html" title="Chapitre 4. Résolutions des incidents. **Mise à jour en cours**" /><link rel="prev" href="ch04s11.html" title="4.11.  J'ai 128 MB de RAM mais le système n'en voit que 64 MB." /><link rel="next" href="ch04s13.html" title="4.13.  ``CMAP busy panic'' au moment d'un reboot avec un nouveau noyau." /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.12.  FreeBSD 2.0 panique avec ``kmem_map too small!'' </th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s11.html">Précédent</a> </td><th width="60%" align="center">Chapitre 4. Résolutions des incidents. **Mise à jour en cours**</th><td width="20%" align="right"> <a accesskey="n" href="ch04s13.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="idp65009488"></a>4.12.  FreeBSD 2.0 panique avec ``kmem_map too small!'' </h2></div></div></div><p>
          <code class="filename">Note : </code>Le message peut aussi être ``mb_map too small!''
      </p><p>
La panique indique que le système n'a plus de mémoire virtuelle pour les
buffers réseau (spécialement mbuf clusters). Vous pouvez augmenter
la quantité de mémoire virtuelle disponible pour les clusters mbuf en
ajoutant :
      </p><p>
      <code class="filename">options "NMBCLUSTERS=&lt;n&gt;"</code>
      </p><p>
dans votre configuration du kernel, où &lt;n&gt; est un nombre compris
entre 512 et 4096, suivant le nombre de connexions concurrentes TCP que
vous aurez à supporter. Je vous recommande d'utiliser 2048 - cela devrait
vous débarasser complètement de cette panique.
Vous pouvez contrôler le nombre de clusters mbuf alloué/en cours
d'utilisation sur votre système, avec
<a class="link" href="http://www.freebsd.org/cgi/man.cgi?netstat" target="_top"> netstat -m </a>.
La valeur par défaut pour NMBCLUSTERS est
      <code class="filename">512 + MAXUSERS * 16/</code>.
      </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s11.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="troubleshoot.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s13.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">4.11.  J'ai 128 MB de RAM mais le système n'en voit que 64 MB.    </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 4.13.  ``CMAP busy panic'' au moment d'un reboot avec un nouveau noyau.  </td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>