<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.9. Serveur de fichiers et d'impression pour clients Microsoft® Windows® (Samba)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="network-servers.html" title="Chapitre 29. Serveurs réseau" /><link rel="prev" href="network-ftp.html" title="29.8. Protocole de transfert de fichiers (FTP)" /><link rel="next" href="network-ntp.html" title="29.10. Synchronisation de l'horloge avec NTP" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-ftp.html">Précédent</a> </td><th width="60%" align="center">Chapitre 29. Serveurs réseau</th><td width="20%" align="right"> <a accesskey="n" href="network-ntp.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-samba"></a>29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp85979472" class="indexterm"></a><a id="idp85979984" class="indexterm"></a><a id="idp85980496" class="indexterm"></a><a id="idp85981648" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85982800"></a>29.9.1. Généralités</h3></div></div></div><p><span class="application">Samba</span> est un logiciel libre
	très populaire qui offre des services de partage de
	fichiers et d'imprimantes pour les clients
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  De tels clients peuvent se connecter et
	utiliser l'espace de fichiers d'une machine FreeBSD comme si
	c'était un disque local, ou utiliser des imprimantes
	FreeBSD comme si elles étaient des imprimantes
	locales.</p><p><span class="application">Samba</span> devrait se trouver sur
	votre support d'installation.  Si vous n'avez pas
	installé <span class="application">Samba</span> à
	l'installation de FreeBSD, vous pouvez alors l'installer à
	partir de la version pré-compilée ou
	portée <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba3/pkg-descr">net/samba3</a>.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85991120"></a>29.9.2. Configuration</h3></div></div></div><p>Le fichier de configuration par défaut de
	<span class="application">Samba</span> est installé sous le
	nom <code class="filename">/usr/local/etc/smb.conf.default</code>.  Ce
	fichier doit être copié vers
	<code class="filename">/usr/local/etc/smb.conf</code> et
	personnalisé avant que <span class="application">Samba</span>
	ne puisse être utilisé.</p><p>Le fichier <code class="filename">smb.conf</code> contient la
	configuration nécessaire à l'exécution de
	<span class="application">Samba</span>, comme la définition
	des imprimantes et des &#8220;systèmes de fichiers
	partagés&#8221; que vous désirez partager avec
	les clients <span class="trademark">Windows</span>®.  Le logiciel
	<span class="application">Samba</span> comprend une interface Web
	appelé <span class="application">swat</span> qui offre une
	méthode simple de configuration du fichier
	<code class="filename">smb.conf</code>.</p><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85996880"></a>29.9.2.1. Utilisation de l'interface web d'administration de
	  Samba (SWAT)</h4></div></div></div><p>L'interface web d'administration de
	  <span class="application">Samba</span> (SWAT) est
	  exécutée sous la forme d'un
	  &#8220;daemon&#8221; à partir
	  d'<span class="application">inetd</span>.  Par conséquent,
	  la ligne suivante dans le fichier
	  <code class="filename">/etc/inetd.conf</code> doit être
	  décommentée avant que
	  <span class="application">swat</span> ne puisse être
	  utilisé pour configurer
	  <span class="application">Samba</span>:</p><pre class="programlisting">swat   stream  tcp     nowait/400      root    /usr/local/sbin/swat    swat</pre><p>Comme expliqué dans la <a class="xref" href="network-inetd.html#network-inetd-reread" title="Exemple 29.1. Recharger le fichier de configuration d'inetd">Exemple 29.1, « Recharger le fichier de configuration
	  d'<span class="application">inetd</span> »</a>, la configuration
	  d'<span class="application">inetd</span> doit être
	  rechargée après modification
	  de ce fichier de configuration.</p><p>Une fois que <span class="application">swat</span> a
	  été activé dans
	  <code class="filename">inetd.conf</code>, vous pouvez utiliser un
	  navigateur pour vous connecter à l'adresse <code class="uri"><a class="uri" href="http://localhost:901" target="_top">http://localhost:901</a></code>.  Vous devez ouvrir tout
	  d'abord une session sous le compte système
	  <code class="systemitem">root</code>.</p><p>Une fois que vous avez ouvert une session sur la page
	  principale de configuration de
	  <span class="application">Samba</span>, vous pouvez naviguer dans
	  la documentation du système, ou commencer par cliquer
	  sur l'onglet <span class="guimenu">Globals</span>.  Le menu
	  <span class="guimenu">Globals</span> correspond aux variables
	  situées dans la section <code class="literal">[global]</code>
	  du fichier
	  <code class="filename">/usr/local/etc/smb.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86010576"></a>29.9.2.2. Paramétrages généraux</h4></div></div></div><p>Que vous utilisiez <span class="application">swat</span> ou
	  éditiez directement le fichier
	  <code class="filename">/usr/local/etc/smb.conf</code>, les
	  premières directives que vous allez sûrement
	  rencontrer en configurant <span class="application">Samba</span>
	  seront:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">workgroup</code></span></dt><dd><p>Le nom de domaine NT ou le groupe de travail pour
		les ordinateurs qui accéderont à ce
		serveur.</p></dd><dt><span class="term"><code class="literal">netbios name</code></span></dt><dd><a id="idp86015696" class="indexterm"></a><p>Fixe le nom NetBIOS sous lequel est connu le
		serveur <span class="application">Samba</span>.  Par
		défaut c'est le même que la première
		composante du nom de la machine pour le DNS.</p></dd><dt><span class="term"><code class="literal">server string</code></span></dt><dd><p>Cette directive définie la chaîne de
		caractères qui sera affichée lors de
		l'utilisation de la commande <code class="command">net view</code>
		et par d'autres outils réseau recherchant
		à afficher une description du serveur.</p></dd></dl></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86019664"></a>29.9.2.3. Paramètres de sécurité</h4></div></div></div><p>Deux des plus importants paramétrages de
	  <code class="filename">/usr/local/etc/smb.conf</code> sont le mode de
	  sécurité choisi, et le format de mot de passe
	  pour les utilisateurs.  Les directives suivantes
	  contrôlent ces options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">security</code></span></dt><dd><p>Les deux options les plus courantes sont
		<code class="literal">security = share</code> et <code class="literal">security
		= user</code>.  Si vos clients utilisent des noms
		d'utilisateur identiques à ceux sur votre machine
		FreeBSD, alors vous voudrez utiliser un niveau de
		sécurité utilisateur.  C'est le mode de
		sécurité par défaut et qui demande
		aux clients de d'ouvrir une session avant de pouvoir
		accéder aux ressources partagées.</p><p>Dans le niveau de sécurité partage
		(&#8220;share&#8221;), le client n'a pas besoin
		d'ouvrir de session avant de pouvoir se connecter
		à une ressource partagée.
		C'était le mode de sécurité par
		défaut d'anciennes versions de
		<span class="application">Samba</span>.</p></dd><dt><span class="term"><code class="literal">passdb backend</code></span></dt><dd><a id="idp86029776" class="indexterm"></a><a id="idp86030288" class="indexterm"></a><a id="idp86030800" class="indexterm"></a><p><span class="application">Samba</span> possède
		plusieurs modèles de support d'authentification.
		Vous pouvez authentifier des clients avec LDAP, NIS+,
		une base de données SQL ou un fichier de mot de
		passe modifié.  La méthode
		d'authentification par défaut est appelée
		<code class="literal">smbpasswd</code>, et c'est celle qui sera
		présentée ici.</p></dd></dl></div><p>En supposant que le modèle
	  <code class="literal">smbpasswd</code> par défaut est
	  utilisé, le fichier
	  <code class="filename">/usr/local/private/smbpasswd</code> doit
	  être créé pour permettre à
	  <span class="application">Samba</span> d'identifier les clients.
	  Si vous désirez donner accès à vos
	  comptes utilisateur <span class="trademark">UNIX</span>® à partir de clients
	  <span class="trademark">Windows</span>®, utilisez la commande suivante:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>smbpasswd -a username</code></strong></pre><p>Veuillez consulter le
	  <a class="link" href="http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/" target="_top">tutorial
	  officiel de Samba</a> pour des informations
	  supplémentaires sur les options de configuration.
	  Avec les bases présentées ici, vous devriez
	  disposer de tous les éléments
	  nécessaires au démarrage de
	  <span class="application">Samba</span>.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp86037840"></a>29.9.3. Démarrage de
	<span class="application">Samba</span></h3></div></div></div><p>Le logiciel porté <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/net/samba3/pkg-descr">net/samba3</a> amène une nouvelle
	procédure de démarrage qui peut être
	employée pour contrôler
	<span class="application">Samba</span>.  Pour activer cette
	procédure de manière à ce qu'elle soit
	utilisée pour par exemple lancer, arrêter ou
	relancer <span class="application">Samba</span>, ajoutez la ligne
	suivante au fichier <code class="filename">/etc/rc.conf</code>:</p><pre class="programlisting">samba_enable="YES"</pre><p>Ou, pour un contrôle plus fin:</p><pre class="programlisting">nmbd_enable="YES"
	smbd_enable="YES"</pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Avec cela, <span class="application">Samba</span> sera
	  automatiquement lancé au démarrage.</p></div><p>Il est alors possible de démarrer
	<span class="application">Samba</span> à n'importe quel
	moment en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/samba start</code></strong>
Starting SAMBA: removing stale tdbs :
Starting nmbd.
Starting smbd.</pre><p>Veuillez consulter la <a class="xref" href="configtuning-rcd.html" title="12.7. Utilisation du système rc sous FreeBSD">Section 12.7, « Utilisation du système rc sous FreeBSD »</a>
	pour plus d'information sur les procédures rc.</p><p><span class="application">Samba</span> consiste essentiellement
	en trois &#8220;daemon&#8221;s séparés.  Vous
	devriez vous rendre compte que les &#8220;daemon&#8221;s
	<span class="application">nmbd</span> et
	<span class="application">smbd</span> sont lancés par la
	procédure <code class="filename">samba</code>.  Si vous avez
	activé la résolution de noms winbind dans le
	fichier <code class="filename">smb.conf</code>, alors le
	&#8220;daemon&#8221; <span class="application">winbindd</span> sera
	également lancé.</p><p>Vous pouvez arrêter <span class="application">Samba</span>
	à tout moment en tapant:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>/usr/local/etc/rc.d/samba stop</code></strong></pre><p><span class="application">Samba</span> est une suite logiciels
	complexes avec des fonctionnalités permettant une large
	intégration avec les réseaux
	<span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>®.  Pour plus d'information sur les
	fonctionnalités non-abordées dans ce document,
	veuillez consulter <code class="uri"><a class="uri" href="http://www.samba.org" target="_top">http://www.samba.org</a></code>.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-ftp.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="network-ntp.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">29.8. Protocole de transfert de fichiers (FTP) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 29.10. Synchronisation de l'horloge avec NTP</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>