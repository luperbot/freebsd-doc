<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>29.8. Protocole de transfert de fichiers (FTP)</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="network-servers.html" title="Chapitre 29. Serveurs réseau" /><link rel="prev" href="network-apache.html" title="29.7. Serveur HTTP Apache" /><link rel="next" href="network-samba.html" title="29.9. Serveur de fichiers et d'impression pour clients Microsoft® Windows® (Samba)" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">29.8. Protocole de transfert de fichiers (FTP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="network-apache.html">Précédent</a> </td><th width="60%" align="center">Chapitre 29. Serveurs réseau</th><td width="20%" align="right"> <a accesskey="n" href="network-samba.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="network-ftp"></a>29.8. Protocole de transfert de fichiers (FTP)</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Murray</span> <span class="surname">Stokely</span></span>. </span></div></div></div><a id="idp85919568" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85920080"></a>29.8.1. Généralités</h3></div></div></div><p>Le protocol de transfert de fichiers (FTP) offre aux
	utilisateurs une méthode simple pour transférer
	des fichiers vers ou à partir d'un serveur <acronym class="acronym">FTP</acronym>.  FreeBSD comprend un
	serveur <acronym class="acronym">FTP</acronym>,
	<span class="application">ftpd</span>, dans le système de
	base.  Cela rend la configuration et l'administration d'un
	serveur <acronym class="acronym">FTP</acronym>
	sous FreeBSD très simple.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85923152"></a>29.8.2. Configuration</h3></div></div></div><p>L'étape de configuration la plus important est de
	décider quels comptes seront autorisés à
	accéder au serveur FTP.  Un système FreeBSD
	classique possède de nombreux comptes système
	utilisés par divers &#8220;daemon&#8221;s, mais les
	utilisateurs inconnus ne devraient pas être
	autorisés à ouvrir de session sous ces comptes.
	Le fichier <code class="filename">/etc/ftpusers</code> est une liste
	d'utilisateurs interdits d'accès au serveur FTP.  Par
	défaut, il inclut les comptes systèmes
	précédemment mentionnés, mais il est
	possible d'ajouter des utilisateurs précis qui ne
	devraient pas avoir accès au serveur FTP.</p><p>Vous pouvez vouloir restreindre l'accès à
	certains utilisateurs sans leur refuser complètement
	l'utilisation du serveur FTP.  Cela peut être
	réalisé à l'aide du fichier
	<code class="filename">/etc/ftpchroot</code>.  Ce fichier liste les
	utilisateurs et les groupes sujet à des restrictions
	d'accès FTP.  La page de manuel <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ftpchroot&amp;sektion=5"><span class="citerefentry"><span class="refentrytitle">ftpchroot</span>(5)</span></a>
	fournit tous les détails, cela ne sera donc pas
	décrit ici.</p><a id="idp85926096" class="indexterm"></a><p>Si vous désirez activer l'accès FTP anonyme
	sur votre serveur, vous devez alors créer un
	utilisateur appelé <code class="systemitem">ftp</code> sur votre
	serveur FreeBSD.  Les utilisateurs seront donc en mesure d'ouvrir
	une session FTP sur votre serveur sous le nom d'utilisateur
	<code class="systemitem">ftp</code> ou <code class="systemitem">anonymous</code> et
	sans aucun mot de passe (par convention l'adresse
	électronique de l'utilisateur devrait être
	utilisée comme mot de passe).  Le serveur FTP appellera
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=chroot&amp;sektion=2"><span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span></a> quand un utilisateur anonyme ouvrira une
	session, pour restreindre l'accès juste au
	répertoire personnel de l'utilisateur
	<code class="systemitem">ftp</code>.</p><p>Il existe deux fichiers texte qui spécifient les
	messages de bienvenue à afficher aux clients FTP.  Le
	contenu du fichier <code class="filename">/etc/ftpwelcome</code> sera
	affiché aux utilisateurs avant qu'ils atteignent
	l'invite de session.  Après une ouverture de session,
	le contenu du fichier <code class="filename">/etc/ftpmotd</code> sera
	affiché.  Notez que le chemin d'accès à
	ce fichier est relatif à l'environnement de la session,
	aussi le fichier <code class="filename">~ftp/etc/ftpmotd</code> sera
	affiché aux utilisateurs anonymes.</p><p>Une fois que le serveur FTP a été
	configuré correctement, il doit être
	activé dans le fichier
	<code class="filename">/etc/inetd.conf</code>.  Ici il faut juste
	retirer le symbole de commentaire &#8220;#&#8221; en face de
	la ligne <span class="application">ftpd</span>:</p><pre class="programlisting">ftp	stream	tcp	nowait	root	/usr/libexec/ftpd	ftpd -l</pre><p>Comme expliqué dans la <a class="xref" href="network-inetd.html#network-inetd-reread" title="Exemple 29.1. Recharger le fichier de configuration d'inetd">Exemple 29.1, « Recharger le fichier de configuration
	  d'<span class="application">inetd</span> »</a>, la configuration
	d'<span class="application">inetd</span> doit être
	rechargée après que le fichier
	de configuration ait été modifié.</p><p>Vous pouvez maintenant ouvrir une session FTP sur votre
	serveur en tapant:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>ftp localhost</code></strong></pre></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp85965136"></a>29.8.3. Maintenance</h3></div></div></div><a id="idp85965776" class="indexterm"></a><a id="idp85966288" class="indexterm"></a><p>Le &#8220;daemon&#8221; <span class="application">ftpd</span>
	utilise <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=syslog&amp;sektion=3"><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a> pour l'enregistrement des messages.  Par
	défaut, le &#8220;daemon&#8221; de gestion des journaux
	du système enverra les messages relatifs au FTP dans le
	fichier <code class="filename">/var/log/xferlog</code>.  L'emplacement
	des journaux FTP peut être modifié en changeant
	la ligne suivante dans le fichier
	<code class="filename">/etc/syslog.conf</code>:</p><pre class="programlisting">ftp.info      /var/log/xferlog</pre><a id="idp85969872" class="indexterm"></a><p>Soyez conscient des éventuels problèmes
	impliqués par l'utilisation d'un serveur FTP acceptant
	les connexions anonymes.  Vous devriez, tout
	particulièrement, penser à deux fois avant
	d'autoriser les utilisateurs anonyme à déposer
	des fichiers sur le serveur.  Votre site FTP pourrait devenir
	un forum d'échange de logiciels commerciaux sans les
	licences ou pire.  Si vous devez autoriser le
	dépôt de fichiers de façon anonyme sur le
	serveur FTP, alors vous devriez fixer les permissions sur ces
	fichiers de telle sorte qu'ils ne puissent être lus par
	d'autres utilisateurs anonymes avant qu'ils n'aient pu
	être contrôlés.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="network-apache.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="network-servers.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="network-samba.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">29.7. Serveur HTTP Apache </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 29.9. Serveur de fichiers et d'impression pour clients
      <span class="trademark">Microsoft</span>® <span class="trademark">Windows</span>® (Samba)</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>