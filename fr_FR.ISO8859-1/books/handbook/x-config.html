<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>6.4. Configuration d'X11</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Manuel FreeBSD" /><link rel="up" href="x11.html" title="Chapitre 6. Le système X Window" /><link rel="prev" href="x-install.html" title="6.3. Installer X11" /><link rel="next" href="x-fonts.html" title="6.5. Utilisation des polices de caractères sous X11" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="/layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.4. Configuration d'X11</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="x-install.html">Précédent</a> </td><th width="60%" align="center">Chapitre 6. Le système X Window</th><td width="20%" align="right"> <a accesskey="n" href="x-fonts.html">Suivant</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="x-config"></a>6.4. Configuration d'X11</h2></div><div><span class="authorgroup">Contribution de <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Christopher</span> <span class="surname">Shumway</span></span>. </span></div></div></div><a id="idp71429456" class="indexterm"></a><a id="idp71429968" class="indexterm"></a><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71430480"></a>6.4.1. Avant de commencer</h3></div></div></div><p>Avant de configurer X11,
	les informations sur le système cible sont
	nécessaires:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Caractéristiques du moniteur</p></li><li class="listitem"><p>Circuit graphique présent sur la carte
	  vidéo</p></li><li class="listitem"><p>Quantité de mémoire présente
	  sur la carte vidéo</p></li></ul></div><a id="idp71433552" class="indexterm"></a><a id="idp71434064" class="indexterm"></a><p>Les caractéristiques du moniteur sont utilisées par
	X11 pour déterminer la
	résolution
	et le taux de rafraîchissement à utiliser.  Ces
	caractéristiques sont généralement obtenues sur la
	documentation fournie avec le moniteur ou sur le site web du
	constructeur.  Il y a deux intervalles de nombres nécessaires,
	les fréquences de balayage horizontale et les fréquences
	de synchronisation verticale.</p><p>La circuit graphique présent sur la carte vidéo
	définit quel pilote de périphérique
	X11 utilise pour communiquer avec
	le matériel graphique.  Avec la plupart des circuits, cela peut
	être détecté automatiquement, mais il
	est toujours utile de connaître le type dans le cas où
	la détection automatique ne fonctionnerait pas
	correctement.</p><p>La quantité de mémoire graphique sur la carte
	vidéo détermine la résolution et la profondeur de
	couleurs qui pourront être utilisées.  C'est important
	de le savoir afin que l'utilisateur soit au courant des limitations du
	système.</p></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71435856"></a>6.4.2. Configurer X11</h3></div></div></div><p>Avec la version 7.3, <span class="application">Xorg</span>
	peut, la plupart du temps, fonctionner sans aucun fichier de
	configuration en tapant simplement à l'invite:</p><pre class="screen"><code class="prompt">%</code> <strong class="userinput"><code>startx</code></strong></pre><p>Si cela ne fonctionne pas, ou si la configuration par
	défaut n'est pas satisfaisante, X11 peut être
	configuré manuellement.  La configuration d'X11
	est un processus en plusieurs étapes.  La première
	étape est de générer un fichier de configuration.
	En tant que super
	utilisateur, lancez simplement:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -configure</code></strong></pre><p>Cela générera, dans le répertoire
	<code class="filename">/root</code>,
	un squelette de fichier de
	configuration pour X11 appelé
	<code class="filename">xorg.conf.new</code> (que vous utilisiez
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=su&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">su</span>(1)</span></a> ou ouvrez directement une session, cela affecte la
	variable d'environnement <code class="envar">$HOME</code> du
	super-utilisateur, et donc le répertoire utilisé
	pour écrire ce fichier).
	Le programme X11 tentera de
	sonder le matériel graphique présent sur le
	système et écrira un fichier de configuration pour
	charger les pilotes de périphériques corrects pour
	le matériel détecté sur le système
	cible.</p><p>L'étape suivante est de tester la configuration existante
	pour vérifier que <span class="application">Xorg</span> peut
	fonctionner avec le matériel graphique présent sur
	le système cible.  Pour effectuer ce test, lancez:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>Xorg -config xorg.conf.new</code></strong></pre><p>Si une grille grise et noire et un curseur de souris en
	forme de X apparaissent, la configuration fonctionne
	correctement.  Pour quitter le test,  appuyez simplement sur les
	touches
	<span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>Backspace</strong></span> simultanément.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Si la souris ne fonctionne pas, vous devrez, avant toute
	  autre chose, la configurer.
	  Consultez la <a class="xref" href="install-post.html#mouse" title="2.10.10. Configuration de la souris">Section 2.10.10, « Configuration de la souris »</a>
	  dans le chapitre sur l'installation de
	  FreeBSD.</p></div><a id="idp71446864" class="indexterm"></a><p>Ensuite, optimisez le fichier de configuration
	<code class="filename">xorg.conf.new</code>
	selon vos goûts.  Ouvrez le
	fichier dans un éditeur de texte comme <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=emacs&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">emacs</span>(1)</span></a> ou
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=ee&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">ee</span>(1)</span></a>.  Tout d'abord, ajoutez les fréquences pour le
	moniteur du système cible.  Celles-ci sont
	généralement exprimées sous la forme de
	fréquences de
	synchronisation horizontale et verticale.  Ces valeurs sont
	ajoutées dans le fichier <code class="filename">xorg.conf.new</code>
	dans la section <code class="literal">"Monitor"</code>:</p><pre class="programlisting">Section "Monitor"
        Identifier   "Monitor0"
        VendorName   "Monitor Vendor"
        ModelName    "Monitor Model"
        HorizSync    30-107
        VertRefresh  48-120
EndSection</pre><p>Les termes <code class="literal">HorizSync</code> et
	<code class="literal">VertRefresh</code> peuvent être
	absents du fichier de configuration.  Si c'est le cas,
	ils doivent être ajoutés, avec les fréquences
	horizontales correctes placées après le terme
	<code class="literal">HorizSync</code> et les fréquences verticales
	après le terme <code class="literal">VertRefresh</code>.  Dans l'exemple
	ci-dessus les fréquences du moniteur ont été
	entrées.</p><p>X autorise l'utilisation des caractéristiques DMPS (Energy
	Star) avec les moniteurs qui en sont capables.  Le programme
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xset&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xset</span>(1)</span></a> contrôle les délais et peut forcer
	la mise en
	veille, l'arrêt, ou les modes d'extinction.  Si vous souhaitez
	activer les fonctions DMPS de votre moniteur, vous devez ajouter
	la ligne suivante dans la section concernant le moniteur:</p><pre class="programlisting">
        Option       "DPMS"</pre><a id="idp71462864" class="indexterm"></a><p>Pendant que le fichier de configuration
	<code class="filename">xorg.conf.new</code>
	est toujours ouvert dans un
	éditeur, sélectionnez la résolution par
	défaut et la profondeur de couleurs désirée.
	Cela est défini dans la section
	<code class="literal">"Screen"</code>:</p><pre class="programlisting">Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
        DefaultDepth 24
        SubSection "Display"
                Viewport  0 0
                Depth     24
                Modes     "1024x768"
        EndSubSection
EndSection</pre><p>Le terme <code class="literal">DefaultDepth</code> indique la
	profondeur de couleurs utilisée par défaut.  Cette
	valeur peut être outrepassée avec l'option
	<code class="option">-depth</code> en ligne de la commande <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a>.
	Le terme
	<code class="literal">Modes</code> indique la résolution à utiliser
	pour la profondeur de couleurs donnée.
	Notez que seuls les modes standard VESA sont supportés
	comme définis par le matériel graphique du
	système cible.  Dans l'exemple
	ci-dessus, la profondeur de couleurs par défaut est de vingt
	quatre bits par pixel.  A cette profondeur de couleurs, la
	résolution acceptée est de 1024 par 768.</p><p>Pour fonctionner à une résolution de mille
	vingt quatre pixels par sept cent soixante huit pixels à vingt
	quatre bits par pixel, ajoutez le terme
	<code class="varname">DefaultDepth</code> avec la valeur vingt quatre, et
	ajoutez à la sous-section <code class="literal">"Display"</code> avec la
	valeur <code class="varname">Depth</code> désirée le terme
	<code class="varname">Modes</code> avec la résolution souhaitée par
	l'utilisateur.  Notez que seuls les modes standard VESA sont
	supportés comme définis par le matériel
	graphique du système cible.</p><p>Enfin, sauvez le fichier de configuration et testez-le en
	utilisant la procédure de test donnée ci-dessus.
      </p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Un des outils disponibles pour vous aider en cas
	  de problèmes sont les fichiers journaux d'X11, qui
	  contiennent des informations sur chaque périphérique auquel
	  le serveur X11 s'attache.  Les noms des fichiers journaux
	  d'<span class="application">Xorg</span> suivent la forme
	  <code class="filename">/var/log/Xorg.0.log</code>.  Le nom exact du
	  fichier peut aller de <code class="filename">Xorg.0.log</code> à
	  <code class="filename">Xorg.8.log</code> et ainsi de suite.</p></div><p>Si tout se passe bien, le fichier de configuration doit
	être
	installé à un emplacement commun où
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=Xorg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">Xorg</span>(1)</span></a> pourra le trouver.  C'est typiquement soit
	<code class="filename">/etc/X11/xorg.conf</code> ou
	<code class="filename">/usr/local/etc/X11/xorg.conf</code>.</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cp xorg.conf.new /etc/X11/xorg.conf</code></strong></pre><p>La configuration de X11 est maintenant achevée.
	<span class="application">Xorg</span> peut être maintenant
	lancé avec l'utilitaire <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=startx&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">startx</span>(1)</span></a>.
	Le serveur X11 peut également
	être lancé
	à l'aide de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xdm&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xdm</span>(1)</span></a>.</p><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Il existe également un outil de configuration
	  graphique, <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>, qui est fourni avec
	  la distribution X11.  Il permet de
	  définir intéractivement votre configuration en
	  sélectionnant les pilotes de
	  périphériques et les paramètres
	  adéquats.  Ce programme peut être invoqué
	  à partir de la console, en tapant la commande
	  <code class="command">xorgcfg -textmode</code>.
	  Pour plus de détails, consultez la
	  page de manuel d'<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgcfg&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgcfg</span>(1)</span></a>.</p><p xmlns="http://www.w3.org/1999/xhtml">Alternativement, il existe également un outil
	appelé <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=xorgconfig&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">xorgconfig</span>(1)</span></a>.
	Ce programme est un
	utilitaire en mode console moins convivial, mais qui peut
	fonctionner dans les situations où les autres ont
	échoué.</p></div></div><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71487312"></a>6.4.3. Sujets avancés de configuration</h3></div></div></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71487952"></a>6.4.3.1. Configuration avec les circuits graphiques <span class="trademark">Intel</span>®
	  i810</h4></div></div></div><a id="idp71489104" class="indexterm"></a><p>La configuration avec les circuits intégrés
	  graphiques <span class="trademark">Intel</span>® i810 nécessite
	  <code class="filename">agpgart</code> l'interface de programmation AGP
	  pour X11 afin de piloter la carte.  Consultez la page de
	  manuel du pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> pour plus d'information.</p><p>Cela permettra la configuration de ce matériel comme
	  n'importe quelle autre carte graphique.  Notez que sur les
	  systèmes sans le pilote <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=agp&amp;sektion=4"><span class="citerefentry"><span class="refentrytitle">agp</span>(4)</span></a> compilé dans
	  le noyau, tenter de charger le module à l'aide
	  de <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=kldload&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">kldload</span>(8)</span></a> ne fonctionnera pas.  Ce pilote doit
	  être dans le noyau au démarrage soit compilé dans le
	  noyau soit en utilisant
	  <code class="filename">/boot/loader.conf</code>.</p></div><div class="sect3"><div xmlns="" class="titlepage"><div><div><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="idp71494480"></a>6.4.3.2. Utilisation d'un écran large
	  (<span class="emphasis"><em>Widescreen</em></span>)</h4></div></div></div><a id="idp71495504" class="indexterm"></a><p>Cette section nécessite une maîtrise des
	  configurations avancées.  Si les tentatives
	  d'utilisation des outils de configuration standards
	  précédents n'ont pas donné lieu
	  à une configuration fonctionnelle, il y a cependant
	  suffisamment d'information dans les fichiers journaux pour
	  parvenir à faire fonctionner votre équipement.
	  L'utilisation d'un éditeur de texte sera
	  également nécessaire.</p><p>Les écrans larges actuellement disponibles
	  (WSXGA, WSXGA+, WUXGA, WXGA, WXGA+, et.al.) supportent les
	  formats 16:10 et 10:9 ainsi que  d'autres formats pouvant
	  être problèmatiques.  Les résolutions
	  d'écran courantes pour les formats 16:10 sont:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>2560x1600</p></li><li class="listitem"><p>1920x1200</p></li><li class="listitem"><p>1680x1050</p></li><li class="listitem"><p>1440x900</p></li><li class="listitem"><p>1280x800</p></li></ul></div><p>Dans certains cas, la configuration nécessitera
	  de simplement ajouter une de ces résolutions comme
	  <code class="literal">Mode</code> possible dans la <code class="literal">Section
	  "Screen"</code>:</p><pre class="programlisting">Section "Screen"
Identifier "Screen0"
Device     "Card0"
Monitor    "Monitor0"
DefaultDepth 24
SubSection "Display"
	Viewport  0 0
	Depth     24
	Modes     "1680x1050"
EndSubSection
EndSection</pre><p><span class="application">Xorg</span> est suffisamment
	  intelligent pour obtenir auprès de l'écran les
	  informations sur la résolution par
	  l'intermédiaire des données I2C/DDC, de cette
	  manière il connaît les fréquences et
	  résolutions maximales que peut supporter le
	  moniteur.</p><p>Si ces <code class="literal">ModeLines</code> ne sont pas
	  présentes dans les pilotes, on pourra toujours aider
	  <span class="application">Xorg</span> dans ce sens.  En
	  examinant le contenu du fichier
	  <code class="filename">/var/log/Xorg.0.log</code>, on peut en
	  extraire suffisamment d'information pour créer
	  manuellement une <code class="literal">ModeLine</code> qui
	  fonctionnera.  Recherchez les lignes du type:</p><pre class="programlisting">(II) MGA(0): Supported additional Video Mode:
(II) MGA(0): clock: 146.2 MHz   Image Size:  433 x 271 mm
(II) MGA(0): h_active: 1680  h_sync: 1784  h_sync_end 1960 h_blank_end 2240 h_border: 0
(II) MGA(0): v_active: 1050  v_sync: 1053  v_sync_end 1059 v_blanking: 1089 v_border: 0
(II) MGA(0): Ranges: V min: 48  V max: 85 Hz, H min: 30  H max: 94 kHz, PixClock max 170 MHz</pre><p>Ce type de données est appelée information
	  EDID.  La création d'une <code class="literal">ModeLine</code>
	  à partir de ces informations consiste juste à
	  placer les différentes valeurs dans le bon
	  ordre:</p><pre class="programlisting">ModeLine &lt;name&gt; &lt;clock&gt; &lt;4 horiz. timings&gt; &lt;4 vert. timings&gt;</pre><p>Ainsi la ligne <code class="literal">ModeLine</code> de la
	  <code class="literal">Section "Monitor"</code> pour cet exemple
	  ressemblera à ceci:</p><pre class="programlisting">Section "Monitor"
Identifier      "Monitor1"
VendorName      "Bigname"
ModelName       "BestModel"
ModeLine        "1680x1050" 146.2 1680 1784 1960 2240 1050 1053 1059 1089
Option          "DPMS"
EndSection</pre><p>Ces modifications effectuées, X devrait
	  maintenant se lancer sans problème sur votre nouvel
	  écran large.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="x-install.html">Précédent</a> </td><td width="20%" align="center"><a accesskey="u" href="x11.html">Niveau supérieur</a></td><td width="40%" align="right"> <a accesskey="n" href="x-fonts.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">6.3. Installer X11 </td><td width="20%" align="center"><a accesskey="h" href="index.html">Sommaire</a></td><td width="40%" align="right" valign="top"> 6.5. Utilisation des polices de caractères sous X11</td></tr></table></div><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Ce document, ainsi que d'autres peut être téléchargé sur
    <a href="ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/">ftp://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="http://www.w3.org/TR/xhtml1/transitional" align="center"><small>Pour toutes questions à propos de FreeBSD, lisez la
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> avant de contacter
    &lt;<a href="mailto:questions@FreeBSD.org">questions@FreeBSD.org</a>&gt;.<br></br>
    Pour les questions sur cette documentation, contactez
    &lt;<a href="mailto:doc@FreeBSD.org">doc@FreeBSD.org</a>&gt;.</small></p></body></html>